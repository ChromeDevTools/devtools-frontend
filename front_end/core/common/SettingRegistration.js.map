{
  "version": 3,
  "sources": ["../../../../../../front_end/core/common/SettingRegistration.ts"],
  "sourcesContent": ["// Copyright 2020 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as i18n from '../i18n/i18n.js';\nimport type * as Platform from '../platform/platform.js';\nimport * as Root from '../root/root.js';\n\nimport type {SettingStorageType} from './Settings.js';\n\nconst UIStrings = {\n  /**\n   * @description Title of the Elements Panel\n   */\n  elements: 'Elements',\n  /**\n   * @description Text for DevTools AI\n   */\n  ai: 'AI',\n  /**\n   * @description Text for DevTools appearance\n   */\n  appearance: 'Appearance',\n  /**\n   * @description Name of the Sources panel\n   */\n  sources: 'Sources',\n  /**\n   * @description Title of the Network tool\n   */\n  network: 'Network',\n  /**\n   * @description Text for the performance of something\n   */\n  performance: 'Performance',\n  /**\n   * @description Title of the Console tool\n   */\n  console: 'Console',\n  /**\n   * @description A title of the 'Persistence' setting category\n   */\n  persistence: 'Persistence',\n  /**\n   * @description Text that refers to the debugger\n   */\n  debugger: 'Debugger',\n  /**\n   * @description Text describing global shortcuts and settings that are available throughout the DevTools\n   */\n  global: 'Global',\n  /**\n   * @description Title of the Rendering tool\n   */\n  rendering: 'Rendering',\n  /**\n   * @description Title of a section on CSS Grid tooling\n   */\n  grid: 'Grid',\n  /**\n   * @description Text for the mobile platform, as opposed to desktop\n   */\n  mobile: 'Mobile',\n  /**\n   * @description Text for the memory of the page\n   */\n  memory: 'Memory',\n  /**\n   * @description Text for the extension of the page\n   */\n  extension: 'Extension',\n  /**\n   * @description Text for the adorner of the page\n   */\n  adorner: 'Adorner',\n  /**\n   * @description Header for the \"Account\" section in the settings UI. The \"Account\"\n   * section allows users see their signed in account and configure which DevTools data is synced via Chrome Sync.\n   */\n  account: 'Account',\n  /**\n   * @description Text for the privacy section of the page.\n   */\n  privacy: 'Privacy',\n} as const;\nconst str_ = i18n.i18n.registerUIStrings('core/common/SettingRegistration.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\nlet registeredSettings: SettingRegistration[] = [];\nconst settingNameSet = new Set<string>();\n\nexport function registerSettingExtension(registration: SettingRegistration): void {\n  const settingName = registration.settingName;\n  if (settingNameSet.has(settingName)) {\n    throw new Error(`Duplicate setting name '${settingName}'`);\n  }\n  settingNameSet.add(settingName);\n  registeredSettings.push(registration);\n}\n\nexport function getRegisteredSettings(): SettingRegistration[] {\n  return registeredSettings.filter(setting => Root.Runtime.Runtime.isDescriptorEnabled(setting));\n}\n\nexport function registerSettingsForTest(settings: SettingRegistration[], forceReset = false): void {\n  if (registeredSettings.length === 0 || forceReset) {\n    registeredSettings = settings;\n    settingNameSet.clear();\n    for (const setting of settings) {\n      const settingName = setting.settingName;\n      if (settingNameSet.has(settingName)) {\n        throw new Error(`Duplicate setting name '${settingName}'`);\n      }\n      settingNameSet.add(settingName);\n    }\n  }\n}\n\nexport function resetSettings(): void {\n  registeredSettings = [];\n  settingNameSet.clear();\n}\n\nexport function maybeRemoveSettingExtension(settingName: string): boolean {\n  const settingIndex = registeredSettings.findIndex(setting => setting.settingName === settingName);\n  if (settingIndex < 0 || !settingNameSet.delete(settingName)) {\n    return false;\n  }\n  registeredSettings.splice(settingIndex, 1);\n  return true;\n}\n\nexport const enum SettingCategory {\n  NONE = '',  // `NONE` must be a falsy value. Legacy code uses if-checks for the category.\n  ELEMENTS = 'ELEMENTS',\n  AI = 'AI',\n  APPEARANCE = 'APPEARANCE',\n  SOURCES = 'SOURCES',\n  NETWORK = 'NETWORK',\n  PERFORMANCE = 'PERFORMANCE',\n  CONSOLE = 'CONSOLE',\n  PERSISTENCE = 'PERSISTENCE',\n  DEBUGGER = 'DEBUGGER',\n  GLOBAL = 'GLOBAL',\n  RENDERING = 'RENDERING',\n  GRID = 'GRID',\n  MOBILE = 'MOBILE',\n  EMULATION = 'EMULATION',\n  MEMORY = 'MEMORY',\n  EXTENSIONS = 'EXTENSIONS',\n  ADORNER = 'ADORNER',\n  ACCOUNT = 'ACCOUNT',\n  PRIVACY = 'PRIVACY',\n}\n\nexport function getLocalizedSettingsCategory(category: SettingCategory): Platform.UIString.LocalizedString {\n  switch (category) {\n    case SettingCategory.ELEMENTS:\n      return i18nString(UIStrings.elements);\n    case SettingCategory.AI:\n      return i18nString(UIStrings.ai);\n    case SettingCategory.APPEARANCE:\n      return i18nString(UIStrings.appearance);\n    case SettingCategory.SOURCES:\n      return i18nString(UIStrings.sources);\n    case SettingCategory.NETWORK:\n      return i18nString(UIStrings.network);\n    case SettingCategory.PERFORMANCE:\n      return i18nString(UIStrings.performance);\n    case SettingCategory.CONSOLE:\n      return i18nString(UIStrings.console);\n    case SettingCategory.PERSISTENCE:\n      return i18nString(UIStrings.persistence);\n    case SettingCategory.DEBUGGER:\n      return i18nString(UIStrings.debugger);\n    case SettingCategory.GLOBAL:\n      return i18nString(UIStrings.global);\n    case SettingCategory.RENDERING:\n      return i18nString(UIStrings.rendering);\n    case SettingCategory.GRID:\n      return i18nString(UIStrings.grid);\n    case SettingCategory.MOBILE:\n      return i18nString(UIStrings.mobile);\n    case SettingCategory.EMULATION:\n      return i18nString(UIStrings.console);\n    case SettingCategory.MEMORY:\n      return i18nString(UIStrings.memory);\n    case SettingCategory.EXTENSIONS:\n      return i18nString(UIStrings.extension);\n    case SettingCategory.ADORNER:\n      return i18nString(UIStrings.adorner);\n    case SettingCategory.NONE:\n      return i18n.i18n.lockedString('');\n    case SettingCategory.ACCOUNT:\n      return i18nString(UIStrings.account);\n    case SettingCategory.PRIVACY:\n      return i18nString(UIStrings.privacy);\n  }\n}\n\nexport const enum SettingType {\n  ARRAY = 'array',\n  REGEX = 'regex',\n  ENUM = 'enum',\n  BOOLEAN = 'boolean',\n}\n\nexport interface RegExpSettingItem {\n  /**\n   * A regular expression matched against URLs for ignore listing.\n   */\n  pattern: string;\n  /**\n   * If true, ignore this rule.\n   */\n  disabled?: boolean;\n  /**\n   * When a rule is disabled due to requesting through a script's context menu\n   * that it no longer be ignore listed, this field is set to the URL of that\n   * script, so that if the user requests through the same context menu to\n   * enable ignore listing, the rule can be reenabled.\n   */\n  disabledForUrl?: Platform.DevToolsPath.UrlString;\n}\n\nexport interface SettingRegistration {\n  /**\n   * The category with which the setting is displayed in the UI.\n   */\n  category?: SettingCategory;\n  /**\n   * Used to sort on screen the settings that belong to the same category.\n   */\n  order?: number;\n  /**\n   * The title with which the setting is shown on screen.\n   */\n  title?: () => Platform.UIString.LocalizedString;\n  /**\n   * The identifier of the setting.\n   */\n  settingName: string;\n  /**\n   * Determines how the possible values of the setting are expressed.\n   *\n   * - If the setting can only be enabled and disabled use BOOLEAN\n   * - If the setting has a list of possible values use ENUM\n   * - If each setting value is a set of objects use ARRAY\n   * - If the setting value is a regular expression use REGEX\n   */\n  settingType: SettingType;\n  /**\n   * The value set by default to the setting.\n   */\n  defaultValue: unknown;\n  /**\n   * Words used to find a setting in the Command Menu.\n   */\n  tags?: Array<() => Platform.UIString.LocalizedString>;\n  /**\n   * The possible values the setting can have, each with a description composed of a title and an optional text.\n   */\n  options?: SettingExtensionOption[];\n  /**\n   * Whether DevTools must be reloaded for a change in the setting to take effect.\n   */\n  reloadRequired?: boolean;\n  /**\n   * Determines if the setting value is stored in the global, local or session storage.\n   */\n  storageType?: SettingStorageType;\n  /**\n   * A condition that, when present in the queryParamsObject of Runtime, constraints the value\n   * of the setting to be changed only if the user set it.\n   */\n  userActionCondition?: string;\n  /**\n   * The name of the experiment a setting is associated with. Enabling and disabling the declared\n   * experiment will enable and disable the setting respectively.\n   */\n  experiment?: Root.Runtime.ExperimentName;\n  /**\n   * A condition is a function that will make the setting available if it\n   * returns true, and not available, otherwise. Make sure that objects you\n   * access from inside the condition function are ready at the time when the\n   * setting conditions are checked.\n   */\n  condition?: Root.Runtime.Condition;\n\n  /**\n   * A function that returns true if the setting should be disabled, along with\n   * the reason why.\n   */\n  disabledCondition?: (config?: Root.Runtime.HostConfig) => DisabledConditionResult;\n\n  /**\n   * If a setting is deprecated, define this notice to show an appropriate warning according to the `warning` property.\n   * If `disabled` is set, the setting will be disabled in the settings UI. In that case, `experiment` optionally can be\n   * set to link to an experiment (by experiment name). The information icon in the settings UI can then be clicked to\n   * jump to the experiment. If a setting is not disabled, the experiment entry will be ignored.\n   */\n  deprecationNotice?: {disabled: boolean, warning: () => Platform.UIString.LocalizedString, experiment?: string};\n\n  /**\n   * Optional information to learn more about the setting. If provided, a `(?)` icon will show next to the setting\n   * in the Settings panel with a link to learn more, and the `tooltip` will be presented to the user when hovering\n   * the `(?)` icon.\n   */\n  learnMore?: LearnMore;\n}\n\n/**\n * Metadata to learn more about a setting. The `url` will be used to construct\n * a `(?)` icon link and the `tooltip` will be shown when hovering the icon.\n */\nexport interface LearnMore {\n  tooltip: () => Platform.UIString.LocalizedString;\n  url?: Platform.DevToolsPath.UrlString;\n}\n\ninterface LocalizedSettingExtensionOption {\n  value: boolean|string;\n  title: () => Platform.UIString.LocalizedString;\n  text?: () => Platform.UIString.LocalizedString;\n  raw?: false;\n}\ninterface RawSettingExtensionOption {\n  value: boolean|string;\n  title: () => Platform.UIString.LocalizedString;\n  /**\n   * Text used to describe the option. Must be localized if 'raw' is false.\n   */\n  text?: string;\n  raw: true;\n}\nexport type SettingExtensionOption = LocalizedSettingExtensionOption|RawSettingExtensionOption;\nexport type DisabledConditionResult = {\n  disabled: true,\n  reasons: Platform.UIString.LocalizedString[],\n}|{disabled: false};\n"],
  "mappings": "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",
  "names": ["SettingCategory", "SettingType"]
}
