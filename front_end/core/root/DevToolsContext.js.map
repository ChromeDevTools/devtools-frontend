{"version":3,"file":"DevToolsContext.js","sourceRoot":"","sources":["../../../../../../front_end/core/root/DevToolsContext.ts"],"names":[],"mappings":"AAAA,sCAAsC;AACtC,yEAAyE;AACzE,6BAA6B;AAI7B;;;;;;GAMG;AACH,MAAM,OAAO,eAAe;IACjB,UAAU,GAAG,IAAI,GAAG,EAAkC,CAAC;IAEhE,GAAG,CAAI,IAAqB;QAC1B,MAAM,QAAQ,GAAG,IAAI,CAAC,UAAU,CAAC,GAAG,CAAC,IAAI,CAAkB,CAAC;QAC5D,IAAI,CAAC,QAAQ,EAAE,CAAC;YACd,MAAM,IAAI,KAAK,CAAC,mBAAmB,IAAI,CAAC,IAAI,uCAAuC,CAAC,CAAC;QACvF,CAAC;QACD,OAAO,QAAQ,CAAC;IAClB,CAAC;IAED,wEAAwE;IACxE,GAAG,CAAI,IAAqB;QAC1B,OAAO,IAAI,CAAC,UAAU,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;IACnC,CAAC;IAED;;;OAGG;IACH,GAAG,CAAI,IAAqB,EAAE,QAAW;QACvC,mFAAmF;QACnF,IAAI,CAAC,UAAU,CAAC,GAAG,CAAC,IAAI,EAAE,QAAQ,CAAC,CAAC;IACtC,CAAC;IAED,mFAAmF;IACnF,MAAM,CAAI,IAAqB;QAC7B,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;IAC/B,CAAC;CACF;AAED,IAAI,SAAS,GAAyB,IAAI,CAAC;AAE3C;;GAEG;AACH,MAAM,UAAU,cAAc;IAC5B,IAAI,CAAC,SAAS,EAAE,CAAC;QACf,0FAA0F;QAC1F,8DAA8D;QAC9D,SAAS,GAAG,IAAI,eAAe,EAAE,CAAC;IACpC,CAAC;IACD,OAAO,SAAS,CAAC;AACnB,CAAC;AAED;;GAEG;AACH,MAAM,UAAU,iBAAiB,CAAC,OAA6B;IAC7D,SAAS,GAAG,OAAO,CAAC;AACtB,CAAC","sourcesContent":["// Copyright 2025 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nexport type ConstructorT<T> = new (...args: any[]) => T;\n\n/**\n * Container for singletons scoped to a single DevTools universe.\n *\n * When wiring up dependencies, strongly prefer to pass all direct dependencies\n * via constructor, and not just pass a {@link DevToolsContext} around. That would hide\n * dependencies and we want to be explicit.\n */\nexport class DevToolsContext {\n  readonly #instances = new Map<ConstructorT<unknown>, unknown>();\n\n  get<T>(ctor: ConstructorT<T>): T {\n    const instance = this.#instances.get(ctor) as T | undefined;\n    if (!instance) {\n      throw new Error(`No instance for ${ctor.name}. Ensure the bootstrapper creates it.`);\n    }\n    return instance;\n  }\n\n  /** @deprecated Should only be used by existing `instance` accessors. */\n  has<T>(ctor: ConstructorT<T>): boolean {\n    return this.#instances.has(ctor);\n  }\n\n  /**\n   * @deprecated Should only be used by existing `instance` accessors and the bootstrapper.\n   * Exists on the public interface only for migration purposes for now.\n   */\n  set<T>(ctor: ConstructorT<T>, instance: T): void {\n    // TODO(crbug.com/458180550): We need to throw here if an instance was already set!\n    this.#instances.set(ctor, instance);\n  }\n\n  /** @deprecated Should only be used by existing `removeInstance` static methods. */\n  delete<T>(ctor: ConstructorT<T>): void {\n    this.#instances.delete(ctor);\n  }\n}\n\nlet gInstance: DevToolsContext|null = null;\n\n/**\n * @deprecated Exists to migrate instance() methods.\n */\nexport function globalInstance(): DevToolsContext {\n  if (!gInstance) {\n    // TODO(crbug.com/458180550): This should really throw to prevent side-effects and globals\n    //                            from leaking all over the place.\n    gInstance = new DevToolsContext();\n  }\n  return gInstance;\n}\n\n/**\n * @deprecated Should only be called by test setup and MainImpl\n */\nexport function setGlobalInstance(context: DevToolsContext|null): void {\n  gInstance = context;\n}\n"]}