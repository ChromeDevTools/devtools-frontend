{"version":3,"file":"NetworkManager.js","sourceRoot":"","sources":["../../../../../../front_end/core/sdk/NetworkManager.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright 2011 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport type * as ProtocolProxyApi from '../../generated/protocol-proxy-api.js';\nimport * as Protocol from '../../generated/protocol.js';\nimport * as TextUtils from '../../models/text_utils/text_utils.js';\nimport * as Common from '../common/common.js';\nimport * as i18n from '../i18n/i18n.js';\nimport * as Platform from '../platform/platform.js';\nimport * as Root from '../root/root.js';\n\nimport {Cookie} from './Cookie.js';\nimport {\n  type BlockedCookieWithReason,\n  DirectSocketChunkType,\n  DirectSocketStatus,\n  DirectSocketType,\n  Events as NetworkRequestEvents,\n  type ExtraRequestInfo,\n  type ExtraResponseInfo,\n  type IncludedCookieWithReason,\n  type NameValue,\n  NetworkRequest,\n} from './NetworkRequest.js';\nimport {SDKModel} from './SDKModel.js';\nimport {Capability, type Target} from './Target.js';\nimport {type SDKModelObserver, TargetManager} from './TargetManager.js';\n\nconst UIStrings = {\n  /**\n   * @description Explanation why no content is shown for WebSocket connection.\n   */\n  noContentForWebSocket: 'Content for WebSockets is currently not supported',\n  /**\n   * @description Explanation why no content is shown for redirect response.\n   */\n  noContentForRedirect: 'No content available because this request was redirected',\n  /**\n   * @description Explanation why no content is shown for preflight request.\n   */\n  noContentForPreflight: 'No content available for preflight request',\n  /**\n   * @description Text to indicate that network throttling is disabled\n   */\n  noThrottling: 'No throttling',\n  /**\n   * @description Text to indicate the network connectivity is offline\n   */\n  offline: 'Offline',\n  /**\n   * @description Text in Network Manager representing the \"3G\" throttling preset.\n   */\n  slowG: '3G',  // Named `slowG` for legacy reasons and because this value\n                // is serialized locally on the user's machine: if we\n                // change it we break their stored throttling settings.\n                // (See crrev.com/c/2947255)\n  /**\n   * @description Text in Network Manager representing the \"Slow 4G\" throttling preset\n   */\n  fastG: 'Slow 4G',  // Named `fastG` for legacy reasons and because this value\n                     // is serialized locally on the user's machine: if we\n                     // change it we break their stored throttling settings.\n                     // (See crrev.com/c/2947255)\n  /**\n   * @description Text in Network Manager representing the \"Fast 4G\" throttling preset\n   */\n  fast4G: 'Fast 4G',\n  /**\n   * @description Text in Network Manager representing the \"Blocking\" throttling preset\n   */\n  block: 'Block',\n  /**\n   * @description Text in Network Manager\n   * @example {https://example.com} PH1\n   */\n  requestWasBlockedByDevtoolsS: 'Request was blocked by DevTools: \"{PH1}\"',\n  /**\n   * @description Message in Network Manager\n   * @example {XHR} PH1\n   * @example {GET} PH2\n   * @example {https://example.com} PH3\n   */\n  sFailedLoadingSS: '{PH1} failed loading: {PH2} \"{PH3}\".',\n  /**\n   * @description Message in Network Manager\n   * @example {XHR} PH1\n   * @example {GET} PH2\n   * @example {https://example.com} PH3\n   */\n  sFinishedLoadingSS: '{PH1} finished loading: {PH2} \"{PH3}\".',\n  /**\n   * @description One of direct socket connection statuses\n   */\n  directSocketStatusOpening: 'Opening',\n  /**\n   * @description One of direct socket connection statuses\n   */\n  directSocketStatusOpen: 'Open',\n  /**\n   * @description One of direct socket connection statuses\n   */\n  directSocketStatusClosed: 'Closed',\n  /**\n   * @description One of direct socket connection statuses\n   */\n  directSocketStatusAborted: 'Aborted',\n} as const;\nconst str_ = i18n.i18n.registerUIStrings('core/sdk/NetworkManager.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\nconst i18nLazyString = i18n.i18n.getLazilyComputedLocalizedString.bind(undefined, str_);\n\nconst requestToManagerMap = new WeakMap<NetworkRequest, NetworkManager>();\n\nconst CONNECTION_TYPES = new Map([\n  ['2g', Protocol.Network.ConnectionType.Cellular2g],\n  ['3g', Protocol.Network.ConnectionType.Cellular3g],\n  ['4g', Protocol.Network.ConnectionType.Cellular4g],\n  ['bluetooth', Protocol.Network.ConnectionType.Bluetooth],\n  ['wifi', Protocol.Network.ConnectionType.Wifi],\n  ['wimax', Protocol.Network.ConnectionType.Wimax],\n]);\n\n/**\n * We store two settings to disk to persist network throttling.\n * 1. The custom conditions that the user has defined.\n * 2. The active `key` that applies the correct current preset.\n * The reason the setting creation functions are defined here is because they are referred\n * to in multiple places, and this ensures we don't have accidental typos which\n * mean extra settings get mistakenly created.\n */\nexport function customUserNetworkConditionsSetting(): Common.Settings.Setting<Conditions[]> {\n  return Common.Settings.Settings.instance().moduleSetting<Conditions[]>('custom-network-conditions');\n}\n\nexport function activeNetworkThrottlingKeySetting(): Common.Settings.Setting<ThrottlingConditionKey> {\n  return Common.Settings.Settings.instance().createSetting(\n      'active-network-condition-key', PredefinedThrottlingConditionKey.NO_THROTTLING);\n}\n\nexport class NetworkManager extends SDKModel<EventTypes> {\n  readonly dispatcher: NetworkDispatcher;\n  readonly fetchDispatcher: FetchDispatcher;\n  readonly #networkAgent: ProtocolProxyApi.NetworkApi;\n  readonly #bypassServiceWorkerSetting: Common.Settings.Setting<boolean>;\n\n  readonly activeNetworkThrottlingKey: Common.Settings.Setting<ThrottlingConditionKey> =\n      activeNetworkThrottlingKeySetting();\n\n  constructor(target: Target) {\n    super(target);\n    this.dispatcher = new NetworkDispatcher(this);\n    this.fetchDispatcher = new FetchDispatcher(target.fetchAgent(), this);\n    this.#networkAgent = target.networkAgent();\n    target.registerNetworkDispatcher(this.dispatcher);\n    target.registerFetchDispatcher(this.fetchDispatcher);\n    if (Common.Settings.Settings.instance().moduleSetting('cache-disabled').get()) {\n      void this.#networkAgent.invoke_setCacheDisabled({cacheDisabled: true});\n    }\n\n    if (Root.Runtime.hostConfig.devToolsPrivacyUI?.enabled &&\n        Root.Runtime.hostConfig.thirdPartyCookieControls?.managedBlockThirdPartyCookies !== true &&\n        (Common.Settings.Settings.instance().createSetting('cookie-control-override-enabled', undefined).get() ||\n         Common.Settings.Settings.instance().createSetting('grace-period-mitigation-disabled', undefined).get() ||\n         Common.Settings.Settings.instance().createSetting('heuristic-mitigation-disabled', undefined).get())) {\n      this.cookieControlFlagsSettingChanged();\n    }\n\n    void this.#networkAgent.invoke_enable({\n      maxPostDataSize: MAX_EAGER_POST_REQUEST_BODY_LENGTH,\n      enableDurableMessages: Root.Runtime.hostConfig.devToolsEnableDurableMessages?.enabled,\n      maxTotalBufferSize: MAX_RESPONSE_BODY_TOTAL_BUFFER_LENGTH,\n      reportDirectSocketTraffic: true,\n    });\n    void this.#networkAgent.invoke_setAttachDebugStack({enabled: true});\n\n    this.#bypassServiceWorkerSetting =\n        Common.Settings.Settings.instance().createSetting('bypass-service-worker', false);\n    if (this.#bypassServiceWorkerSetting.get()) {\n      this.bypassServiceWorkerChanged();\n    }\n    this.#bypassServiceWorkerSetting.addChangeListener(this.bypassServiceWorkerChanged, this);\n\n    Common.Settings.Settings.instance()\n        .moduleSetting('cache-disabled')\n        .addChangeListener(this.cacheDisabledSettingChanged, this);\n\n    Common.Settings.Settings.instance()\n        .createSetting('cookie-control-override-enabled', undefined)\n        .addChangeListener(this.cookieControlFlagsSettingChanged, this);\n    Common.Settings.Settings.instance()\n        .createSetting('grace-period-mitigation-disabled', undefined)\n        .addChangeListener(this.cookieControlFlagsSettingChanged, this);\n    Common.Settings.Settings.instance()\n        .createSetting('heuristic-mitigation-disabled', undefined)\n        .addChangeListener(this.cookieControlFlagsSettingChanged, this);\n  }\n\n  static forRequest(request: NetworkRequest): NetworkManager|null {\n    return requestToManagerMap.get(request) || null;\n  }\n\n  static canReplayRequest(request: NetworkRequest): boolean {\n    return Boolean(requestToManagerMap.get(request)) && Boolean(request.backendRequestId()) && !request.isRedirect() &&\n        request.resourceType() === Common.ResourceType.resourceTypes.XHR;\n  }\n\n  static replayRequest(request: NetworkRequest): void {\n    const manager = requestToManagerMap.get(request);\n    const requestId = request.backendRequestId();\n    if (!manager || !requestId || request.isRedirect()) {\n      return;\n    }\n    void manager.#networkAgent.invoke_replayXHR({requestId});\n  }\n\n  static async searchInRequest(request: NetworkRequest, query: string, caseSensitive: boolean, isRegex: boolean):\n      Promise<TextUtils.ContentProvider.SearchMatch[]> {\n    const manager = NetworkManager.forRequest(request);\n    const requestId = request.backendRequestId();\n    if (!manager || !requestId || request.isRedirect()) {\n      return [];\n    }\n    const response =\n        await manager.#networkAgent.invoke_searchInResponseBody({requestId, query, caseSensitive, isRegex});\n    return TextUtils.TextUtils.performSearchInSearchMatches(response.result || [], query, caseSensitive, isRegex);\n  }\n\n  static async requestContentData(request: NetworkRequest): Promise<TextUtils.ContentData.ContentDataOrError> {\n    if (request.resourceType() === Common.ResourceType.resourceTypes.WebSocket) {\n      return {error: i18nString(UIStrings.noContentForWebSocket)};\n    }\n    if (!request.finished) {\n      await request.once(NetworkRequestEvents.FINISHED_LOADING);\n    }\n    if (request.isRedirect()) {\n      return {error: i18nString(UIStrings.noContentForRedirect)};\n    }\n    if (request.isPreflightRequest()) {\n      return {error: i18nString(UIStrings.noContentForPreflight)};\n    }\n    const manager = NetworkManager.forRequest(request);\n    if (!manager) {\n      return {error: 'No network manager for request'};\n    }\n    const requestId = request.backendRequestId();\n    if (!requestId) {\n      return {error: 'No backend request id for request'};\n    }\n    const response = await manager.#networkAgent.invoke_getResponseBody({requestId});\n    const error = response.getError();\n    if (error) {\n      return {error};\n    }\n    return new TextUtils.ContentData.ContentData(\n        response.body, response.base64Encoded, request.mimeType, request.charset() ?? undefined);\n  }\n\n  /**\n   * Returns the already received bytes for an in-flight request. After calling this method\n   * \"dataReceived\" events will contain additional data.\n   */\n  static async streamResponseBody(request: NetworkRequest): Promise<TextUtils.ContentData.ContentDataOrError> {\n    if (request.finished) {\n      return {error: 'Streaming the response body is only available for in-flight requests.'};\n    }\n    const manager = NetworkManager.forRequest(request);\n    if (!manager) {\n      return {error: 'No network manager for request'};\n    }\n    const requestId = request.backendRequestId();\n    if (!requestId) {\n      return {error: 'No backend request id for request'};\n    }\n    const response = await manager.#networkAgent.invoke_streamResourceContent({requestId});\n    const error = response.getError();\n    if (error) {\n      return {error};\n    }\n    // Wait for at least the `responseReceived event so we have accurate mimetype and charset.\n    await request.waitForResponseReceived();\n    return new TextUtils.ContentData.ContentData(\n        response.bufferedData, /* isBase64=*/ true, request.mimeType, request.charset() ?? undefined);\n  }\n\n  static async requestPostData(request: NetworkRequest): Promise<string|null> {\n    const manager = NetworkManager.forRequest(request);\n    if (!manager) {\n      console.error('No network manager for request');\n      return null;\n    }\n    const requestId = request.backendRequestId();\n    if (!requestId) {\n      console.error('No backend request id for request');\n      return null;\n    }\n    try {\n      const {postData} = await manager.#networkAgent.invoke_getRequestPostData({requestId});\n      return postData;\n    } catch (e) {\n      return e.message;\n    }\n  }\n\n  static connectionType(conditions: Conditions): Protocol.Network.ConnectionType {\n    if (!conditions.download && !conditions.upload) {\n      return Protocol.Network.ConnectionType.None;\n    }\n    try {\n      const title =\n          typeof conditions.title === 'function' ? conditions.title().toLowerCase() : conditions.title.toLowerCase();\n      for (const [name, protocolType] of CONNECTION_TYPES) {\n        if (title.includes(name)) {\n          return protocolType;\n        }\n      }\n    } catch {\n      // If the i18nKey for this condition has changed, calling conditions.title() will break, so in that case we reset to NONE\n      return Protocol.Network.ConnectionType.None;\n    }\n\n    return Protocol.Network.ConnectionType.Other;\n  }\n\n  static lowercaseHeaders(headers: Protocol.Network.Headers): Protocol.Network.Headers {\n    const newHeaders: Protocol.Network.Headers = {};\n    for (const headerName in headers) {\n      newHeaders[headerName.toLowerCase()] = headers[headerName];\n    }\n    return newHeaders;\n  }\n\n  requestForURL(url: Platform.DevToolsPath.UrlString): NetworkRequest|null {\n    return this.dispatcher.requestForURL(url);\n  }\n\n  requestForId(id: string): NetworkRequest|null {\n    return this.dispatcher.requestForId(id);\n  }\n\n  requestForLoaderId(loaderId: Protocol.Network.LoaderId): NetworkRequest|null {\n    return this.dispatcher.requestForLoaderId(loaderId);\n  }\n\n  private cacheDisabledSettingChanged({data: enabled}: Common.EventTarget.EventTargetEvent<boolean>): void {\n    void this.#networkAgent.invoke_setCacheDisabled({cacheDisabled: enabled});\n  }\n\n  private cookieControlFlagsSettingChanged(): void {\n    const overridesEnabled =\n        Boolean(Common.Settings.Settings.instance().createSetting('cookie-control-override-enabled', undefined).get());\n    const gracePeriodEnabled = overridesEnabled ?\n        Boolean(\n            Common.Settings.Settings.instance().createSetting('grace-period-mitigation-disabled', undefined).get()) :\n        false;\n    const heuristicEnabled = overridesEnabled ?\n        Boolean(Common.Settings.Settings.instance().createSetting('heuristic-mitigation-disabled', undefined).get()) :\n        false;\n    void this.#networkAgent.invoke_setCookieControls({\n      enableThirdPartyCookieRestriction: overridesEnabled,\n      disableThirdPartyCookieMetadata: gracePeriodEnabled,\n      disableThirdPartyCookieHeuristics: heuristicEnabled,\n    });\n  }\n\n  override dispose(): void {\n    Common.Settings.Settings.instance()\n        .moduleSetting('cache-disabled')\n        .removeChangeListener(this.cacheDisabledSettingChanged, this);\n  }\n\n  private bypassServiceWorkerChanged(): void {\n    void this.#networkAgent.invoke_setBypassServiceWorker({bypass: this.#bypassServiceWorkerSetting.get()});\n  }\n\n  async getSecurityIsolationStatus(frameId: Protocol.Page.FrameId|null):\n      Promise<Protocol.Network.SecurityIsolationStatus|null> {\n    const result = await this.#networkAgent.invoke_getSecurityIsolationStatus({frameId: frameId ?? undefined});\n    if (result.getError()) {\n      return null;\n    }\n    return result.status;\n  }\n\n  async enableReportingApi(enable = true): Promise<Promise<Protocol.ProtocolResponseWithError>> {\n    return await this.#networkAgent.invoke_enableReportingApi({enable});\n  }\n\n  async loadNetworkResource(\n      frameId: Protocol.Page.FrameId|null, url: Platform.DevToolsPath.UrlString,\n      options: Protocol.Network.LoadNetworkResourceOptions): Promise<Protocol.Network.LoadNetworkResourcePageResult> {\n    const result = await this.#networkAgent.invoke_loadNetworkResource({frameId: frameId ?? undefined, url, options});\n    if (result.getError()) {\n      throw new Error(result.getError());\n    }\n    return result.resource;\n  }\n\n  clearRequests(): void {\n    this.dispatcher.clearRequests();\n  }\n}\n\nexport enum Events {\n  /* eslint-disable @typescript-eslint/naming-convention -- Used by web_tests. */\n  RequestStarted = 'RequestStarted',\n  RequestUpdated = 'RequestUpdated',\n  RequestFinished = 'RequestFinished',\n  RequestUpdateDropped = 'RequestUpdateDropped',\n  ResponseReceived = 'ResponseReceived',\n  MessageGenerated = 'MessageGenerated',\n  RequestRedirected = 'RequestRedirected',\n  LoadingFinished = 'LoadingFinished',\n  ReportingApiReportAdded = 'ReportingApiReportAdded',\n  ReportingApiReportUpdated = 'ReportingApiReportUpdated',\n  ReportingApiEndpointsChangedForOrigin = 'ReportingApiEndpointsChangedForOrigin',\n  /* eslint-enable @typescript-eslint/naming-convention */\n}\n\nexport interface RequestStartedEvent {\n  request: NetworkRequest;\n  originalRequest: Protocol.Network.Request|null;\n}\n\nexport interface ResponseReceivedEvent {\n  request: NetworkRequest;\n  response: Protocol.Network.Response;\n}\n\nexport interface MessageGeneratedEvent {\n  message: Common.UIString.LocalizedString;\n  requestId: string;\n  warning: boolean;\n}\n\nexport interface EventTypes {\n  [Events.RequestStarted]: RequestStartedEvent;\n  [Events.RequestUpdated]: NetworkRequest;\n  [Events.RequestFinished]: NetworkRequest;\n  [Events.RequestUpdateDropped]: RequestUpdateDroppedEventData;\n  [Events.ResponseReceived]: ResponseReceivedEvent;\n  [Events.MessageGenerated]: MessageGeneratedEvent;\n  [Events.RequestRedirected]: NetworkRequest;\n  [Events.LoadingFinished]: NetworkRequest;\n  [Events.ReportingApiReportAdded]: Protocol.Network.ReportingApiReport;\n  [Events.ReportingApiReportUpdated]: Protocol.Network.ReportingApiReport;\n  [Events.ReportingApiEndpointsChangedForOrigin]: Protocol.Network.ReportingApiEndpointsChangedForOriginEvent;\n}\n\n/**\n * Define some built-in DevTools throttling presets.\n * Note that for the download, upload and RTT values we multiply them by adjustment factors to make DevTools' emulation more accurate.\n * @see https://docs.google.com/document/d/10lfVdS1iDWCRKQXPfbxEn4Or99D64mvNlugP1AQuFlE/edit for historical context.\n * @see https://crbug.com/342406608#comment10 for context around the addition of 4G presets in June 2024.\n */\n\nexport const BlockingConditions: ThrottlingConditions = {\n  key: PredefinedThrottlingConditionKey.BLOCKING,\n  block: true,\n  title: i18nLazyString(UIStrings.block),\n};\n\nexport const NoThrottlingConditions: Conditions = {\n  key: PredefinedThrottlingConditionKey.NO_THROTTLING,\n  title: i18nLazyString(UIStrings.noThrottling),\n  i18nTitleKey: UIStrings.noThrottling,\n  download: -1,\n  upload: -1,\n  latency: 0,\n};\n\nexport const OfflineConditions: Conditions = {\n  key: PredefinedThrottlingConditionKey.OFFLINE,\n  title: i18nLazyString(UIStrings.offline),\n  i18nTitleKey: UIStrings.offline,\n  download: 0,\n  upload: 0,\n  latency: 0,\n};\n\nconst slow3GTargetLatency = 400;\nexport const Slow3GConditions: Conditions = {\n  key: PredefinedThrottlingConditionKey.SPEED_3G,\n  title: i18nLazyString(UIStrings.slowG),\n  i18nTitleKey: UIStrings.slowG,\n  // ~500Kbps down\n  download: 500 * 1000 / 8 * .8,\n  // ~500Kbps up\n  upload: 500 * 1000 / 8 * .8,\n  // 400ms RTT\n  latency: slow3GTargetLatency * 5,\n  targetLatency: slow3GTargetLatency,\n};\n\n// Note for readers: this used to be called \"Fast 3G\" but it was renamed in May\n// 2024 to align with LH (crbug.com/342406608).\nconst slow4GTargetLatency = 150;\nexport const Slow4GConditions: Conditions = {\n  key: PredefinedThrottlingConditionKey.SPEED_SLOW_4G,\n  title: i18nLazyString(UIStrings.fastG),\n  i18nTitleKey: UIStrings.fastG,\n  // ~1.6 Mbps down\n  download: 1.6 * 1000 * 1000 / 8 * .9,\n  // ~0.75 Mbps up\n  upload: 750 * 1000 / 8 * .9,\n  // 150ms RTT\n  latency: slow4GTargetLatency * 3.75,\n  targetLatency: slow4GTargetLatency,\n};\n\nconst fast4GTargetLatency = 60;\nexport const Fast4GConditions: Conditions = {\n  key: PredefinedThrottlingConditionKey.SPEED_FAST_4G,\n  title: i18nLazyString(UIStrings.fast4G),\n  i18nTitleKey: UIStrings.fast4G,\n  // 9 Mbps down\n  download: 9 * 1000 * 1000 / 8 * .9,\n  // 1.5 Mbps up\n  upload: 1.5 * 1000 * 1000 / 8 * .9,\n  // 60ms RTT\n  latency: fast4GTargetLatency * 2.75,\n  targetLatency: fast4GTargetLatency,\n};\n\nconst MAX_EAGER_POST_REQUEST_BODY_LENGTH = 64 * 1024;             // bytes\nconst MAX_RESPONSE_BODY_TOTAL_BUFFER_LENGTH = 250 * 1024 * 1024;  // bytes\n\nexport class FetchDispatcher implements ProtocolProxyApi.FetchDispatcher {\n  readonly #fetchAgent: ProtocolProxyApi.FetchApi;\n  readonly #manager: NetworkManager;\n\n  constructor(agent: ProtocolProxyApi.FetchApi, manager: NetworkManager) {\n    this.#fetchAgent = agent;\n    this.#manager = manager;\n  }\n\n  requestPaused({requestId, request, resourceType, responseStatusCode, responseHeaders, networkId}:\n                    Protocol.Fetch.RequestPausedEvent): void {\n    const networkRequest = networkId ? this.#manager.requestForId(networkId) : null;\n    // If there was no 'Network.responseReceivedExtraInfo' event (e.g. for 'file:/' URLSs),\n    // populate 'originalResponseHeaders' with the headers from the 'Fetch.requestPaused' event.\n    if (networkRequest?.originalResponseHeaders.length === 0 && responseHeaders) {\n      networkRequest.originalResponseHeaders = responseHeaders;\n    }\n    void MultitargetNetworkManager.instance().requestIntercepted(new InterceptedRequest(\n        this.#fetchAgent, request, resourceType, requestId, networkRequest, responseStatusCode, responseHeaders));\n  }\n\n  authRequired({}: Protocol.Fetch.AuthRequiredEvent): void {\n  }\n}\n\nexport class NetworkDispatcher implements ProtocolProxyApi.NetworkDispatcher {\n  readonly #manager: NetworkManager;\n  readonly #requestsById = new Map<string, NetworkRequest>();\n  readonly #requestsByURL = new Map<Platform.DevToolsPath.UrlString, NetworkRequest>();\n  readonly #requestsByLoaderId = new Map<Protocol.Network.LoaderId, NetworkRequest>();\n  readonly #requestIdToExtraInfoBuilder = new Map<string, ExtraInfoBuilder>();\n  /**\n   * In case of an early abort or a cache hit, the Trust Token done event is\n   * reported before the request itself is created in `requestWillBeSent`.\n   * This causes the event to be lost as no `NetworkRequest` instance has been\n   * created yet.\n   * This map caches the events temporarily and populates the NetworkRequest\n   * once it is created in `requestWillBeSent`.\n   */\n  readonly #requestIdToTrustTokenEvent = new Map<string, Protocol.Network.TrustTokenOperationDoneEvent>();\n\n  constructor(manager: NetworkManager) {\n    this.#manager = manager;\n\n    MultitargetNetworkManager.instance().addEventListener(\n        MultitargetNetworkManager.Events.REQUEST_INTERCEPTED, this.#markAsIntercepted.bind(this));\n  }\n\n  #markAsIntercepted(event: Common.EventTarget.EventTargetEvent<string>): void {\n    const request = this.requestForId(event.data);\n    if (request) {\n      request.setWasIntercepted(true);\n    }\n  }\n\n  private headersMapToHeadersArray(headersMap: Protocol.Network.Headers): NameValue[] {\n    const result = [];\n    for (const name in headersMap) {\n      const values = headersMap[name].split('\\n');\n      for (let i = 0; i < values.length; ++i) {\n        result.push({name, value: values[i]});\n      }\n    }\n    return result;\n  }\n\n  private updateNetworkRequestWithRequest(networkRequest: NetworkRequest, request: Protocol.Network.Request): void {\n    networkRequest.requestMethod = request.method;\n    networkRequest.setRequestHeaders(this.headersMapToHeadersArray(request.headers));\n    networkRequest.setRequestFormData(Boolean(request.hasPostData), request.postData || null);\n    networkRequest.setInitialPriority(request.initialPriority);\n    networkRequest.mixedContentType = request.mixedContentType || Protocol.Security.MixedContentType.None;\n    networkRequest.setReferrerPolicy(request.referrerPolicy);\n    networkRequest.setIsSameSite(request.isSameSite || false);\n    networkRequest.setIsAdRelated(request.isAdRelated || false);\n  }\n\n  private updateNetworkRequestWithResponse(networkRequest: NetworkRequest, response: Protocol.Network.Response): void {\n    if (response.url && networkRequest.url() !== response.url) {\n      networkRequest.setUrl(response.url as Platform.DevToolsPath.UrlString);\n    }\n    networkRequest.mimeType = response.mimeType;\n    networkRequest.setCharset(response.charset);\n    if (!networkRequest.statusCode || networkRequest.wasIntercepted()) {\n      networkRequest.statusCode = response.status;\n    }\n    if (!networkRequest.statusText || networkRequest.wasIntercepted()) {\n      networkRequest.statusText = response.statusText;\n    }\n    if (!networkRequest.hasExtraResponseInfo() || networkRequest.wasIntercepted()) {\n      networkRequest.responseHeaders = this.headersMapToHeadersArray(response.headers);\n    }\n\n    if (response.encodedDataLength >= 0) {\n      networkRequest.setTransferSize(response.encodedDataLength);\n    }\n\n    if (response.requestHeaders && !networkRequest.hasExtraRequestInfo()) {\n      // TODO(http://crbug.com/1004979): Stop using response.requestHeaders and\n      //   response.requestHeadersText once shared workers\n      //   emit Network.*ExtraInfo events for their network #requests.\n      networkRequest.setRequestHeaders(this.headersMapToHeadersArray(response.requestHeaders));\n      networkRequest.setRequestHeadersText(response.requestHeadersText || '');\n    }\n\n    networkRequest.connectionReused = response.connectionReused;\n    networkRequest.connectionId = String(response.connectionId);\n    if (response.remoteIPAddress) {\n      networkRequest.setRemoteAddress(response.remoteIPAddress, response.remotePort || -1);\n    }\n\n    if (response.fromServiceWorker) {\n      networkRequest.fetchedViaServiceWorker = true;\n    }\n\n    if (response.fromDiskCache) {\n      networkRequest.setFromDiskCache();\n    }\n\n    if (response.fromPrefetchCache) {\n      networkRequest.setFromPrefetchCache();\n    }\n\n    if (response.fromEarlyHints) {\n      networkRequest.setFromEarlyHints();\n    }\n\n    if (response.cacheStorageCacheName) {\n      networkRequest.setResponseCacheStorageCacheName(response.cacheStorageCacheName);\n    }\n\n    if (response.serviceWorkerRouterInfo) {\n      networkRequest.serviceWorkerRouterInfo = response.serviceWorkerRouterInfo;\n    }\n\n    if (response.responseTime) {\n      networkRequest.setResponseRetrievalTime(new Date(response.responseTime));\n    }\n\n    networkRequest.timing = response.timing;\n\n    networkRequest.protocol = response.protocol || '';\n\n    networkRequest.alternateProtocolUsage = response.alternateProtocolUsage;\n\n    if (response.serviceWorkerResponseSource) {\n      networkRequest.setServiceWorkerResponseSource(response.serviceWorkerResponseSource);\n    }\n\n    networkRequest.setSecurityState(response.securityState);\n\n    if (response.securityDetails) {\n      networkRequest.setSecurityDetails(response.securityDetails);\n    }\n\n    const newResourceType = Common.ResourceType.ResourceType.fromMimeTypeOverride(networkRequest.mimeType);\n    if (newResourceType) {\n      networkRequest.setResourceType(newResourceType);\n    }\n    if (networkRequest.responseReceivedPromiseResolve) {\n      // Anyone interested in waiting for response headers being available?\n      networkRequest.responseReceivedPromiseResolve();\n    } else {\n      // If not, make sure no one will wait on it in the future.\n      networkRequest.responseReceivedPromise = Promise.resolve();\n    }\n  }\n\n  requestForId(id: string): NetworkRequest|null {\n    return this.#requestsById.get(id) || null;\n  }\n\n  requestForURL(url: Platform.DevToolsPath.UrlString): NetworkRequest|null {\n    return this.#requestsByURL.get(url) || null;\n  }\n\n  requestForLoaderId(loaderId: Protocol.Network.LoaderId): NetworkRequest|null {\n    return this.#requestsByLoaderId.get(loaderId) || null;\n  }\n\n  resourceChangedPriority({requestId, newPriority}: Protocol.Network.ResourceChangedPriorityEvent): void {\n    const networkRequest = this.#requestsById.get(requestId);\n    if (networkRequest) {\n      networkRequest.setPriority(newPriority);\n    }\n  }\n\n  signedExchangeReceived({requestId, info}: Protocol.Network.SignedExchangeReceivedEvent): void {\n    // While loading a signed exchange, a signedExchangeReceived event is sent\n    // between two requestWillBeSent events.\n    // 1. The first requestWillBeSent is sent while starting the navigation (or\n    //    prefetching).\n    // 2. This signedExchangeReceived event is sent when the browser detects the\n    //    signed exchange.\n    // 3. The second requestWillBeSent is sent with the generated redirect\n    //    response and a new redirected request which URL is the inner request\n    //    URL of the signed exchange.\n    let networkRequest = this.#requestsById.get(requestId);\n    // |requestId| is available only for navigation #requests. If the request was\n    // sent from a renderer process for prefetching, it is not available. In the\n    // case, need to fallback to look for the URL.\n    // TODO(crbug/841076): Sends the request ID of prefetching to the browser\n    // process and DevTools to find the matching request.\n    if (!networkRequest) {\n      networkRequest = this.#requestsByURL.get(info.outerResponse.url as Platform.DevToolsPath.UrlString);\n      if (!networkRequest) {\n        return;\n      }\n      // Or clause is never hit, but is here because we can't use non-null assertions.\n      const backendRequestId = networkRequest.backendRequestId() || requestId;\n      requestId = backendRequestId;\n    }\n    networkRequest.setSignedExchangeInfo(info);\n    networkRequest.setResourceType(Common.ResourceType.resourceTypes.SignedExchange);\n\n    this.updateNetworkRequestWithResponse(networkRequest, info.outerResponse);\n    this.updateNetworkRequest(networkRequest);\n    this.getExtraInfoBuilder(requestId).addHasExtraInfo(info.hasExtraInfo);\n\n    this.#manager.dispatchEventToListeners(\n        Events.ResponseReceived, {request: networkRequest, response: info.outerResponse});\n  }\n\n  requestWillBeSent({\n    requestId,\n    loaderId,\n    documentURL,\n    request,\n    timestamp,\n    wallTime,\n    initiator,\n    redirectHasExtraInfo,\n    redirectResponse,\n    type,\n    frameId,\n    hasUserGesture,\n  }: Protocol.Network.RequestWillBeSentEvent): void {\n    let networkRequest = this.#requestsById.get(requestId);\n    if (networkRequest) {\n      // FIXME: move this check to the backend.\n      if (!redirectResponse) {\n        return;\n      }\n      // If signedExchangeReceived event has already been sent for the request,\n      // ignores the internally generated |redirectResponse|. The\n      // |outerResponse| of SignedExchangeInfo was set to |networkRequest| in\n      // signedExchangeReceived().\n      if (!networkRequest.signedExchangeInfo()) {\n        this.responseReceived({\n          requestId,\n          loaderId,\n          timestamp,\n          type: type || Protocol.Network.ResourceType.Other,\n          response: redirectResponse,\n          hasExtraInfo: redirectHasExtraInfo,\n          frameId,\n        });\n      }\n      networkRequest = this.appendRedirect(requestId, timestamp, request.url as Platform.DevToolsPath.UrlString);\n      this.#manager.dispatchEventToListeners(Events.RequestRedirected, networkRequest);\n    } else {\n      networkRequest = NetworkRequest.create(\n          requestId, request.url as Platform.DevToolsPath.UrlString, documentURL as Platform.DevToolsPath.UrlString,\n          frameId ?? null, loaderId, initiator, hasUserGesture);\n      requestToManagerMap.set(networkRequest, this.#manager);\n    }\n    networkRequest.hasNetworkData = true;\n    this.updateNetworkRequestWithRequest(networkRequest, request);\n    networkRequest.setIssueTime(timestamp, wallTime);\n    networkRequest.setResourceType(\n        type ? Common.ResourceType.resourceTypes[type] : Common.ResourceType.resourceTypes.Other);\n    if (request.trustTokenParams) {\n      networkRequest.setTrustTokenParams(request.trustTokenParams);\n    }\n    const maybeTrustTokenEvent = this.#requestIdToTrustTokenEvent.get(requestId);\n    if (maybeTrustTokenEvent) {\n      networkRequest.setTrustTokenOperationDoneEvent(maybeTrustTokenEvent);\n      this.#requestIdToTrustTokenEvent.delete(requestId);\n    }\n\n    this.getExtraInfoBuilder(requestId).addRequest(networkRequest);\n\n    this.startNetworkRequest(networkRequest, request);\n  }\n\n  requestServedFromCache({requestId}: Protocol.Network.RequestServedFromCacheEvent): void {\n    const networkRequest = this.#requestsById.get(requestId);\n    if (!networkRequest) {\n      return;\n    }\n\n    networkRequest.setFromMemoryCache();\n  }\n\n  responseReceived({requestId, loaderId, timestamp, type, response, hasExtraInfo, frameId}:\n                       Protocol.Network.ResponseReceivedEvent): void {\n    const networkRequest = this.#requestsById.get(requestId);\n    const lowercaseHeaders = NetworkManager.lowercaseHeaders(response.headers);\n    if (!networkRequest) {\n      const lastModifiedHeader = lowercaseHeaders['last-modified'];\n      // We missed the requestWillBeSent.\n      const eventData: RequestUpdateDroppedEventData = {\n        url: response.url as Platform.DevToolsPath.UrlString,\n        frameId: frameId ?? null,\n        loaderId,\n        resourceType: type,\n        mimeType: response.mimeType,\n        lastModified: lastModifiedHeader ? new Date(lastModifiedHeader) : null,\n      };\n      this.#manager.dispatchEventToListeners(Events.RequestUpdateDropped, eventData);\n      return;\n    }\n\n    networkRequest.responseReceivedTime = timestamp;\n    networkRequest.setResourceType(Common.ResourceType.resourceTypes[type]);\n\n    this.updateNetworkRequestWithResponse(networkRequest, response);\n\n    this.updateNetworkRequest(networkRequest);\n    this.getExtraInfoBuilder(requestId).addHasExtraInfo(hasExtraInfo);\n    this.#manager.dispatchEventToListeners(Events.ResponseReceived, {request: networkRequest, response});\n  }\n\n  dataReceived(event: Protocol.Network.DataReceivedEvent): void {\n    let networkRequest: NetworkRequest|null|undefined = this.#requestsById.get(event.requestId);\n    if (!networkRequest) {\n      networkRequest = this.maybeAdoptMainResourceRequest(event.requestId);\n    }\n    if (!networkRequest) {\n      return;\n    }\n    networkRequest.addDataReceivedEvent(event);\n    this.updateNetworkRequest(networkRequest);\n  }\n\n  loadingFinished({requestId, timestamp: finishTime, encodedDataLength}: Protocol.Network.LoadingFinishedEvent): void {\n    let networkRequest: NetworkRequest|null|undefined = this.#requestsById.get(requestId);\n    if (!networkRequest) {\n      networkRequest = this.maybeAdoptMainResourceRequest(requestId);\n    }\n    if (!networkRequest) {\n      return;\n    }\n    this.getExtraInfoBuilder(requestId).finished();\n    this.finishNetworkRequest(networkRequest, finishTime, encodedDataLength);\n    this.#manager.dispatchEventToListeners(Events.LoadingFinished, networkRequest);\n  }\n\n  loadingFailed({\n    requestId,\n    timestamp: time,\n    type: resourceType,\n    errorText: localizedDescription,\n    canceled,\n    blockedReason,\n    corsErrorStatus,\n  }: Protocol.Network.LoadingFailedEvent): void {\n    const networkRequest = this.#requestsById.get(requestId);\n    if (!networkRequest) {\n      return;\n    }\n\n    networkRequest.failed = true;\n    networkRequest.setResourceType(Common.ResourceType.resourceTypes[resourceType]);\n    networkRequest.canceled = Boolean(canceled);\n    if (blockedReason) {\n      networkRequest.setBlockedReason(blockedReason);\n      if (blockedReason === Protocol.Network.BlockedReason.Inspector) {\n        const message = i18nString(UIStrings.requestWasBlockedByDevtoolsS, {PH1: networkRequest.url()});\n        this.#manager.dispatchEventToListeners(Events.MessageGenerated, {message, requestId, warning: true});\n      }\n    }\n    if (corsErrorStatus) {\n      networkRequest.setCorsErrorStatus(corsErrorStatus);\n    }\n    networkRequest.localizedFailDescription = localizedDescription;\n    this.getExtraInfoBuilder(requestId).finished();\n    this.finishNetworkRequest(networkRequest, time, -1);\n  }\n\n  webSocketCreated({requestId, url: requestURL, initiator}: Protocol.Network.WebSocketCreatedEvent): void {\n    const networkRequest =\n        NetworkRequest.createForSocket(requestId, requestURL as Platform.DevToolsPath.UrlString, initiator);\n    requestToManagerMap.set(networkRequest, this.#manager);\n    networkRequest.setResourceType(Common.ResourceType.resourceTypes.WebSocket);\n    this.startNetworkRequest(networkRequest, null);\n  }\n\n  webSocketWillSendHandshakeRequest({requestId, timestamp: time, wallTime, request}:\n                                        Protocol.Network.WebSocketWillSendHandshakeRequestEvent): void {\n    const networkRequest = this.#requestsById.get(requestId);\n    if (!networkRequest) {\n      return;\n    }\n\n    networkRequest.requestMethod = 'GET';\n    networkRequest.setRequestHeaders(this.headersMapToHeadersArray(request.headers));\n    networkRequest.setIssueTime(time, wallTime);\n\n    this.updateNetworkRequest(networkRequest);\n  }\n\n  webSocketHandshakeResponseReceived({requestId, timestamp: time, response}:\n                                         Protocol.Network.WebSocketHandshakeResponseReceivedEvent): void {\n    const networkRequest = this.#requestsById.get(requestId);\n    if (!networkRequest) {\n      return;\n    }\n\n    networkRequest.statusCode = response.status;\n    networkRequest.statusText = response.statusText;\n    networkRequest.responseHeaders = this.headersMapToHeadersArray(response.headers);\n    networkRequest.responseHeadersText = response.headersText || '';\n    if (response.requestHeaders) {\n      networkRequest.setRequestHeaders(this.headersMapToHeadersArray(response.requestHeaders));\n    }\n    if (response.requestHeadersText) {\n      networkRequest.setRequestHeadersText(response.requestHeadersText);\n    }\n    networkRequest.responseReceivedTime = time;\n    networkRequest.protocol = 'websocket';\n\n    this.updateNetworkRequest(networkRequest);\n  }\n\n  webSocketFrameReceived({requestId, timestamp: time, response}: Protocol.Network.WebSocketFrameReceivedEvent): void {\n    const networkRequest = this.#requestsById.get(requestId);\n    if (!networkRequest) {\n      return;\n    }\n\n    networkRequest.addProtocolFrame(response, time, false);\n    networkRequest.responseReceivedTime = time;\n\n    this.updateNetworkRequest(networkRequest);\n  }\n\n  webSocketFrameSent({requestId, timestamp: time, response}: Protocol.Network.WebSocketFrameSentEvent): void {\n    const networkRequest = this.#requestsById.get(requestId);\n    if (!networkRequest) {\n      return;\n    }\n\n    networkRequest.addProtocolFrame(response, time, true);\n    networkRequest.responseReceivedTime = time;\n\n    this.updateNetworkRequest(networkRequest);\n  }\n\n  webSocketFrameError({requestId, timestamp: time, errorMessage}: Protocol.Network.WebSocketFrameErrorEvent): void {\n    const networkRequest = this.#requestsById.get(requestId);\n    if (!networkRequest) {\n      return;\n    }\n\n    networkRequest.addProtocolFrameError(errorMessage, time);\n    networkRequest.responseReceivedTime = time;\n\n    this.updateNetworkRequest(networkRequest);\n  }\n\n  webSocketClosed({requestId, timestamp: time}: Protocol.Network.WebSocketClosedEvent): void {\n    const networkRequest = this.#requestsById.get(requestId);\n    if (!networkRequest) {\n      return;\n    }\n    this.finishNetworkRequest(networkRequest, time, -1);\n  }\n\n  eventSourceMessageReceived({requestId, timestamp: time, eventName, eventId, data}:\n                                 Protocol.Network.EventSourceMessageReceivedEvent): void {\n    const networkRequest = this.#requestsById.get(requestId);\n    if (!networkRequest) {\n      return;\n    }\n    networkRequest.addEventSourceMessage(time, eventName, eventId, data);\n  }\n\n  requestIntercepted({}: Protocol.Network.RequestInterceptedEvent): void {\n  }\n\n  requestWillBeSentExtraInfo({\n    requestId,\n    associatedCookies,\n    headers,\n    clientSecurityState,\n    connectTiming,\n    siteHasCookieInOtherPartition,\n    appliedNetworkConditionsId\n  }: Protocol.Network.RequestWillBeSentExtraInfoEvent): void {\n    const blockedRequestCookies: BlockedCookieWithReason[] = [];\n    const includedRequestCookies: IncludedCookieWithReason[] = [];\n    for (const {blockedReasons, exemptionReason, cookie} of associatedCookies) {\n      if (blockedReasons.length === 0) {\n        includedRequestCookies.push({exemptionReason, cookie: Cookie.fromProtocolCookie(cookie)});\n      } else {\n        blockedRequestCookies.push({blockedReasons, cookie: Cookie.fromProtocolCookie(cookie)});\n      }\n    }\n    const extraRequestInfo = {\n      blockedRequestCookies,\n      includedRequestCookies,\n      requestHeaders: this.headersMapToHeadersArray(headers),\n      clientSecurityState,\n      connectTiming,\n      siteHasCookieInOtherPartition,\n      appliedNetworkConditionsId,\n    };\n    this.getExtraInfoBuilder(requestId).addRequestExtraInfo(extraRequestInfo);\n\n    const networkRequest = this.#requestsById.get(requestId);\n    if (appliedNetworkConditionsId && networkRequest) {\n      networkRequest.setAppliedNetworkConditions(appliedNetworkConditionsId);\n      this.updateNetworkRequest(networkRequest);\n    }\n  }\n\n  responseReceivedEarlyHints({\n    requestId,\n    headers,\n  }: Protocol.Network.ResponseReceivedEarlyHintsEvent): void {\n    this.getExtraInfoBuilder(requestId).setEarlyHintsHeaders(this.headersMapToHeadersArray(headers));\n  }\n\n  responseReceivedExtraInfo({\n    requestId,\n    blockedCookies,\n    headers,\n    headersText,\n    resourceIPAddressSpace,\n    statusCode,\n    cookiePartitionKey,\n    cookiePartitionKeyOpaque,\n    exemptedCookies,\n  }: Protocol.Network.ResponseReceivedExtraInfoEvent): void {\n    const extraResponseInfo: ExtraResponseInfo = {\n      blockedResponseCookies:\n          blockedCookies.map(blockedCookie => ({\n                               blockedReasons: blockedCookie.blockedReasons,\n                               cookieLine: blockedCookie.cookieLine,\n                               cookie: blockedCookie.cookie ? Cookie.fromProtocolCookie(blockedCookie.cookie) : null,\n                             })),\n      responseHeaders: this.headersMapToHeadersArray(headers),\n      responseHeadersText: headersText,\n      resourceIPAddressSpace,\n      statusCode,\n      cookiePartitionKey,\n      cookiePartitionKeyOpaque,\n      exemptedResponseCookies: exemptedCookies?.map(exemptedCookie => ({\n                                                      cookie: Cookie.fromProtocolCookie(exemptedCookie.cookie),\n                                                      cookieLine: exemptedCookie.cookieLine,\n                                                      exemptionReason: exemptedCookie.exemptionReason,\n                                                    })),\n    };\n    this.getExtraInfoBuilder(requestId).addResponseExtraInfo(extraResponseInfo);\n  }\n\n  private getExtraInfoBuilder(requestId: string): ExtraInfoBuilder {\n    let builder: ExtraInfoBuilder;\n    if (!this.#requestIdToExtraInfoBuilder.has(requestId)) {\n      builder = new ExtraInfoBuilder();\n      this.#requestIdToExtraInfoBuilder.set(requestId, builder);\n    } else {\n      builder = (this.#requestIdToExtraInfoBuilder.get(requestId) as ExtraInfoBuilder);\n    }\n    return builder;\n  }\n\n  private appendRedirect(\n      requestId: Protocol.Network.RequestId, time: number,\n      redirectURL: Platform.DevToolsPath.UrlString): NetworkRequest {\n    const originalNetworkRequest = this.#requestsById.get(requestId);\n    if (!originalNetworkRequest) {\n      throw new Error(`Could not find original network request for ${requestId}`);\n    }\n    let redirectCount = 0;\n    for (let redirect = originalNetworkRequest.redirectSource(); redirect; redirect = redirect.redirectSource()) {\n      redirectCount++;\n    }\n\n    originalNetworkRequest.markAsRedirect(redirectCount);\n    this.finishNetworkRequest(originalNetworkRequest, time, -1);\n    const newNetworkRequest = NetworkRequest.create(\n        requestId, redirectURL, originalNetworkRequest.documentURL, originalNetworkRequest.frameId,\n        originalNetworkRequest.loaderId, originalNetworkRequest.initiator(),\n        originalNetworkRequest.hasUserGesture() ?? undefined);\n    requestToManagerMap.set(newNetworkRequest, this.#manager);\n    newNetworkRequest.setRedirectSource(originalNetworkRequest);\n    originalNetworkRequest.setRedirectDestination(newNetworkRequest);\n    return newNetworkRequest;\n  }\n\n  private maybeAdoptMainResourceRequest(requestId: string): NetworkRequest|null {\n    const request = MultitargetNetworkManager.instance().inflightMainResourceRequests.get(requestId);\n    if (!request) {\n      return null;\n    }\n    const oldDispatcher = (NetworkManager.forRequest(request) as NetworkManager).dispatcher;\n    oldDispatcher.#requestsById.delete(requestId);\n    oldDispatcher.#requestsByURL.delete(request.url());\n    const loaderId = request.loaderId;\n    if (loaderId) {\n      oldDispatcher.#requestsByLoaderId.delete(loaderId);\n    }\n    const builder = oldDispatcher.#requestIdToExtraInfoBuilder.get(requestId);\n    oldDispatcher.#requestIdToExtraInfoBuilder.delete(requestId);\n    this.#requestsById.set(requestId, request);\n    this.#requestsByURL.set(request.url(), request);\n    if (loaderId) {\n      this.#requestsByLoaderId.set(loaderId, request);\n    }\n    if (builder) {\n      this.#requestIdToExtraInfoBuilder.set(requestId, builder);\n    }\n    requestToManagerMap.set(request, this.#manager);\n    return request;\n  }\n\n  private startNetworkRequest(networkRequest: NetworkRequest, originalRequest: Protocol.Network.Request|null): void {\n    this.#requestsById.set(networkRequest.requestId(), networkRequest);\n    this.#requestsByURL.set(networkRequest.url(), networkRequest);\n    const loaderId = networkRequest.loaderId;\n    if (loaderId) {\n      this.#requestsByLoaderId.set(loaderId, networkRequest);\n    }\n    // The following relies on the fact that loaderIds and requestIds\n    // are globally unique and that the main request has them equal. If\n    // loaderId is an empty string, it indicates a worker request. For the\n    // request to fetch the main worker script, the request ID is the future\n    // worker target ID and, therefore, it is unique.\n    if (networkRequest.loaderId === networkRequest.requestId() || networkRequest.loaderId === '') {\n      MultitargetNetworkManager.instance().inflightMainResourceRequests.set(networkRequest.requestId(), networkRequest);\n    }\n\n    this.#manager.dispatchEventToListeners(Events.RequestStarted, {request: networkRequest, originalRequest});\n  }\n\n  private updateNetworkRequest(networkRequest: NetworkRequest): void {\n    this.#manager.dispatchEventToListeners(Events.RequestUpdated, networkRequest);\n  }\n\n  private finishNetworkRequest(\n      networkRequest: NetworkRequest,\n      finishTime: number,\n      encodedDataLength: number,\n      ): void {\n    networkRequest.endTime = finishTime;\n    networkRequest.finished = true;\n    if (encodedDataLength >= 0) {\n      const redirectSource = networkRequest.redirectSource();\n      if (redirectSource?.signedExchangeInfo()) {\n        networkRequest.setTransferSize(0);\n        redirectSource.setTransferSize(encodedDataLength);\n        this.updateNetworkRequest(redirectSource);\n      } else {\n        networkRequest.setTransferSize(encodedDataLength);\n      }\n    }\n    this.#manager.dispatchEventToListeners(Events.RequestFinished, networkRequest);\n    MultitargetNetworkManager.instance().inflightMainResourceRequests.delete(networkRequest.requestId());\n\n    if (Common.Settings.Settings.instance().moduleSetting('monitoring-xhr-enabled').get() &&\n        networkRequest.resourceType().category() === Common.ResourceType.resourceCategories.XHR) {\n      let message;\n      const failedToLoad = networkRequest.failed || networkRequest.hasErrorStatusCode();\n      if (failedToLoad) {\n        message = i18nString(\n            UIStrings.sFailedLoadingSS,\n            {PH1: networkRequest.resourceType().title(), PH2: networkRequest.requestMethod, PH3: networkRequest.url()});\n      } else {\n        message = i18nString(\n            UIStrings.sFinishedLoadingSS,\n            {PH1: networkRequest.resourceType().title(), PH2: networkRequest.requestMethod, PH3: networkRequest.url()});\n      }\n\n      this.#manager.dispatchEventToListeners(\n          Events.MessageGenerated, {message, requestId: networkRequest.requestId(), warning: false});\n    }\n  }\n\n  clearRequests(): void {\n    for (const [requestId, request] of this.#requestsById) {\n      if (request.finished) {\n        this.#requestsById.delete(requestId);\n      }\n    }\n    for (const [requestURL, request] of this.#requestsByURL) {\n      if (request.finished) {\n        this.#requestsByURL.delete(requestURL);\n      }\n    }\n    for (const [requestLoaderId, request] of this.#requestsByLoaderId) {\n      if (request.finished) {\n        this.#requestsByLoaderId.delete(requestLoaderId);\n      }\n    }\n    for (const [requestId, builder] of this.#requestIdToExtraInfoBuilder) {\n      if (builder.isFinished()) {\n        this.#requestIdToExtraInfoBuilder.delete(requestId);\n      }\n    }\n  }\n\n  webTransportCreated({transportId, url: requestURL, timestamp: time, initiator}:\n                          Protocol.Network.WebTransportCreatedEvent): void {\n    const networkRequest =\n        NetworkRequest.createForSocket(transportId, requestURL as Platform.DevToolsPath.UrlString, initiator);\n    networkRequest.hasNetworkData = true;\n    requestToManagerMap.set(networkRequest, this.#manager);\n    networkRequest.setResourceType(Common.ResourceType.resourceTypes.WebTransport);\n    networkRequest.setIssueTime(time, 0);\n    // TODO(yoichio): Add appropreate events to address abort cases.\n    this.startNetworkRequest(networkRequest, null);\n  }\n\n  webTransportConnectionEstablished({transportId, timestamp: time}:\n                                        Protocol.Network.WebTransportConnectionEstablishedEvent): void {\n    const networkRequest = this.#requestsById.get(transportId);\n    if (!networkRequest) {\n      return;\n    }\n\n    // This dummy deltas are needed to show this request as being\n    // downloaded(blue) given typical WebTransport is kept for a while.\n    // TODO(yoichio): Add appropreate events to fix these dummy datas.\n    // DNS lookup?\n    networkRequest.responseReceivedTime = time;\n    networkRequest.endTime = time + 0.001;\n    this.updateNetworkRequest(networkRequest);\n  }\n\n  webTransportClosed({transportId, timestamp: time}: Protocol.Network.WebTransportClosedEvent): void {\n    const networkRequest = this.#requestsById.get(transportId);\n    if (!networkRequest) {\n      return;\n    }\n\n    networkRequest.endTime = time;\n    this.finishNetworkRequest(networkRequest, time, 0);\n  }\n\n  directTCPSocketCreated(event: Protocol.Network.DirectTCPSocketCreatedEvent): void {\n    const requestURL = this.concatHostPort(event.remoteAddr, event.remotePort);\n    const networkRequest = NetworkRequest.createForSocket(\n        event.identifier, requestURL as Platform.DevToolsPath.UrlString, event.initiator);\n    networkRequest.hasNetworkData = true;\n    networkRequest.setRemoteAddress(event.remoteAddr, event.remotePort);\n    networkRequest.protocol = i18n.i18n.lockedString('tcp');\n\n    networkRequest.statusText = i18nString(UIStrings.directSocketStatusOpening);\n    networkRequest.directSocketInfo = {\n      type: DirectSocketType.TCP,\n      status: DirectSocketStatus.OPENING,\n      createOptions: {\n        remoteAddr: event.remoteAddr,\n        remotePort: event.remotePort,\n        noDelay: event.options.noDelay,\n        keepAliveDelay: event.options.keepAliveDelay,\n        sendBufferSize: event.options.sendBufferSize,\n        receiveBufferSize: event.options.receiveBufferSize,\n        dnsQueryType: event.options.dnsQueryType,\n      }\n    };\n    networkRequest.setResourceType(Common.ResourceType.resourceTypes.DirectSocket);\n    networkRequest.setIssueTime(event.timestamp, event.timestamp);\n\n    requestToManagerMap.set(networkRequest, this.#manager);\n    this.startNetworkRequest(networkRequest, null);\n  }\n\n  directTCPSocketOpened(event: Protocol.Network.DirectTCPSocketOpenedEvent): void {\n    const networkRequest = this.#requestsById.get(event.identifier);\n    if (!networkRequest?.directSocketInfo) {\n      return;\n    }\n    networkRequest.responseReceivedTime = event.timestamp;\n    networkRequest.directSocketInfo.status = DirectSocketStatus.OPEN;\n    networkRequest.statusText = i18nString(UIStrings.directSocketStatusOpen);\n    networkRequest.directSocketInfo.openInfo = {\n      remoteAddr: event.remoteAddr,\n      remotePort: event.remotePort,\n      localAddr: event.localAddr,\n      localPort: event.localPort,\n    };\n    networkRequest.setRemoteAddress(event.remoteAddr, event.remotePort);\n    const requestURL = this.concatHostPort(event.remoteAddr, event.remotePort);\n    networkRequest.setUrl(requestURL as Platform.DevToolsPath.UrlString);\n    this.updateNetworkRequest(networkRequest);\n  }\n\n  directTCPSocketAborted(event: Protocol.Network.DirectTCPSocketAbortedEvent): void {\n    const networkRequest = this.#requestsById.get(event.identifier);\n    if (!networkRequest?.directSocketInfo) {\n      return;\n    }\n    networkRequest.failed = true;\n    networkRequest.directSocketInfo.status = DirectSocketStatus.ABORTED;\n    networkRequest.statusText = i18nString(UIStrings.directSocketStatusAborted);\n    networkRequest.directSocketInfo.errorMessage = event.errorMessage;\n    this.finishNetworkRequest(networkRequest, event.timestamp, 0);\n  }\n\n  directTCPSocketClosed(event: Protocol.Network.DirectTCPSocketClosedEvent): void {\n    const networkRequest = this.#requestsById.get(event.identifier);\n    if (!networkRequest?.directSocketInfo) {\n      return;\n    }\n    networkRequest.statusText = i18nString(UIStrings.directSocketStatusClosed);\n    networkRequest.directSocketInfo.status = DirectSocketStatus.CLOSED;\n    this.finishNetworkRequest(networkRequest, event.timestamp, 0);\n  }\n\n  directTCPSocketChunkSent(event: Protocol.Network.DirectTCPSocketChunkSentEvent): void {\n    const networkRequest = this.#requestsById.get(event.identifier);\n    if (!networkRequest) {\n      return;\n    }\n\n    networkRequest.addDirectSocketChunk({\n      data: event.data,\n      type: DirectSocketChunkType.SEND,\n      timestamp: event.timestamp,\n    });\n    networkRequest.responseReceivedTime = event.timestamp;\n\n    this.updateNetworkRequest(networkRequest);\n  }\n\n  directTCPSocketChunkReceived(event: Protocol.Network.DirectTCPSocketChunkReceivedEvent): void {\n    const networkRequest = this.#requestsById.get(event.identifier);\n    if (!networkRequest) {\n      return;\n    }\n\n    networkRequest.addDirectSocketChunk({\n      data: event.data,\n      type: DirectSocketChunkType.RECEIVE,\n      timestamp: event.timestamp,\n    });\n    networkRequest.responseReceivedTime = event.timestamp;\n\n    this.updateNetworkRequest(networkRequest);\n  }\n\n  directUDPSocketCreated(event: Protocol.Network.DirectUDPSocketCreatedEvent): void {\n    let requestURL = '';\n    let type: DirectSocketType;\n    if (event.options.remoteAddr && event.options.remotePort) {\n      requestURL = this.concatHostPort(event.options.remoteAddr, event.options.remotePort);\n      type = DirectSocketType.UDP_CONNECTED;\n    } else if (event.options.localAddr) {\n      requestURL = this.concatHostPort(event.options.localAddr, event.options.localPort);\n      type = DirectSocketType.UDP_BOUND;\n    } else {\n      // Must be present in a valid command if remoteAddr\n      // is not specified.\n      return;\n    }\n    const networkRequest = NetworkRequest.createForSocket(\n        event.identifier, requestURL as Platform.DevToolsPath.UrlString, event.initiator);\n    networkRequest.hasNetworkData = true;\n    if (event.options.remoteAddr && event.options.remotePort) {\n      networkRequest.setRemoteAddress(event.options.remoteAddr, event.options.remotePort);\n    }\n    networkRequest.protocol = i18n.i18n.lockedString('udp');\n\n    networkRequest.statusText = i18nString(UIStrings.directSocketStatusOpening);\n    networkRequest.directSocketInfo = {\n      type,\n      status: DirectSocketStatus.OPENING,\n      createOptions: {\n        remoteAddr: event.options.remoteAddr,\n        remotePort: event.options.remotePort,\n        localAddr: event.options.localAddr,\n        localPort: event.options.localPort,\n        sendBufferSize: event.options.sendBufferSize,\n        receiveBufferSize: event.options.receiveBufferSize,\n        dnsQueryType: event.options.dnsQueryType,\n        multicastLoopback: event.options.multicastLoopback,\n        multicastTimeToLive: event.options.multicastTimeToLive,\n        multicastAllowAddressSharing: event.options.multicastAllowAddressSharing,\n      },\n      joinedMulticastGroups: new Set(),\n    };\n    networkRequest.setResourceType(Common.ResourceType.resourceTypes.DirectSocket);\n    networkRequest.setIssueTime(event.timestamp, event.timestamp);\n\n    requestToManagerMap.set(networkRequest, this.#manager);\n    this.startNetworkRequest(networkRequest, null);\n  }\n\n  directUDPSocketOpened(event: Protocol.Network.DirectUDPSocketOpenedEvent): void {\n    const networkRequest = this.#requestsById.get(event.identifier);\n    if (!networkRequest?.directSocketInfo) {\n      return;\n    }\n    let requestURL: string;\n    if (networkRequest.directSocketInfo.type === DirectSocketType.UDP_CONNECTED) {\n      if (!event.remoteAddr || !event.remotePort) {\n        // Connected socket must have remoteAdd and remotePort.\n        return;\n      }\n      networkRequest.setRemoteAddress(event.remoteAddr, event.remotePort);\n      requestURL = this.concatHostPort(event.remoteAddr, event.remotePort);\n    } else {\n      requestURL = this.concatHostPort(event.localAddr, event.localPort);\n    }\n\n    networkRequest.setUrl(requestURL as Platform.DevToolsPath.UrlString);\n    networkRequest.responseReceivedTime = event.timestamp;\n    networkRequest.directSocketInfo.status = DirectSocketStatus.OPEN;\n    networkRequest.statusText = i18nString(UIStrings.directSocketStatusOpen);\n    networkRequest.directSocketInfo.openInfo = {\n      remoteAddr: event.remoteAddr,\n      remotePort: event.remotePort,\n      localAddr: event.localAddr,\n      localPort: event.localPort,\n    };\n\n    this.updateNetworkRequest(networkRequest);\n  }\n\n  directUDPSocketAborted(event: Protocol.Network.DirectUDPSocketAbortedEvent): void {\n    const networkRequest = this.#requestsById.get(event.identifier);\n    if (!networkRequest?.directSocketInfo) {\n      return;\n    }\n    networkRequest.failed = true;\n    networkRequest.directSocketInfo.status = DirectSocketStatus.ABORTED;\n    networkRequest.statusText = i18nString(UIStrings.directSocketStatusAborted);\n    networkRequest.directSocketInfo.errorMessage = event.errorMessage;\n    this.finishNetworkRequest(networkRequest, event.timestamp, 0);\n  }\n\n  directUDPSocketClosed(event: Protocol.Network.DirectUDPSocketClosedEvent): void {\n    const networkRequest = this.#requestsById.get(event.identifier);\n    if (!networkRequest?.directSocketInfo) {\n      return;\n    }\n    networkRequest.statusText = i18nString(UIStrings.directSocketStatusClosed);\n    networkRequest.directSocketInfo.status = DirectSocketStatus.CLOSED;\n    this.finishNetworkRequest(networkRequest, event.timestamp, 0);\n  }\n\n  directUDPSocketChunkSent(event: Protocol.Network.DirectUDPSocketChunkSentEvent): void {\n    const networkRequest = this.#requestsById.get(event.identifier);\n    if (!networkRequest) {\n      return;\n    }\n\n    networkRequest.addDirectSocketChunk({\n      data: event.message.data,\n      type: DirectSocketChunkType.SEND,\n      timestamp: event.timestamp,\n      remoteAddress: event.message.remoteAddr,\n      remotePort: event.message.remotePort\n    });\n    networkRequest.responseReceivedTime = event.timestamp;\n\n    this.updateNetworkRequest(networkRequest);\n  }\n\n  directUDPSocketChunkReceived(event: Protocol.Network.DirectUDPSocketChunkReceivedEvent): void {\n    const networkRequest = this.#requestsById.get(event.identifier);\n    if (!networkRequest) {\n      return;\n    }\n\n    networkRequest.addDirectSocketChunk({\n      data: event.message.data,\n      type: DirectSocketChunkType.RECEIVE,\n      timestamp: event.timestamp,\n      remoteAddress: event.message.remoteAddr,\n      remotePort: event.message.remotePort\n    });\n    networkRequest.responseReceivedTime = event.timestamp;\n\n    this.updateNetworkRequest(networkRequest);\n  }\n\n  directUDPSocketJoinedMulticastGroup(event: Protocol.Network.DirectUDPSocketJoinedMulticastGroupEvent): void {\n    const networkRequest = this.#requestsById.get(event.identifier);\n    if (!networkRequest?.directSocketInfo) {\n      return;\n    }\n    if (!networkRequest.directSocketInfo.joinedMulticastGroups) {\n      networkRequest.directSocketInfo.joinedMulticastGroups = new Set();\n    }\n    if (!networkRequest.directSocketInfo.joinedMulticastGroups.has(event.IPAddress)) {\n      networkRequest.directSocketInfo.joinedMulticastGroups.add(event.IPAddress);\n      this.updateNetworkRequest(networkRequest);\n    }\n  }\n\n  directUDPSocketLeftMulticastGroup(event: Protocol.Network.DirectUDPSocketLeftMulticastGroupEvent): void {\n    const networkRequest = this.#requestsById.get(event.identifier);\n    if (!networkRequest?.directSocketInfo?.joinedMulticastGroups) {\n      return;\n    }\n    if (networkRequest.directSocketInfo.joinedMulticastGroups.delete(event.IPAddress)) {\n      this.updateNetworkRequest(networkRequest);\n    }\n  }\n\n  trustTokenOperationDone(event: Protocol.Network.TrustTokenOperationDoneEvent): void {\n    const request = this.#requestsById.get(event.requestId);\n    if (!request) {\n      this.#requestIdToTrustTokenEvent.set(event.requestId, event);\n      return;\n    }\n    request.setTrustTokenOperationDoneEvent(event);\n  }\n\n  reportingApiReportAdded(data: Protocol.Network.ReportingApiReportAddedEvent): void {\n    this.#manager.dispatchEventToListeners(Events.ReportingApiReportAdded, data.report);\n  }\n\n  reportingApiReportUpdated(data: Protocol.Network.ReportingApiReportUpdatedEvent): void {\n    this.#manager.dispatchEventToListeners(Events.ReportingApiReportUpdated, data.report);\n  }\n\n  reportingApiEndpointsChangedForOrigin(data: Protocol.Network.ReportingApiEndpointsChangedForOriginEvent): void {\n    this.#manager.dispatchEventToListeners(Events.ReportingApiEndpointsChangedForOrigin, data);\n  }\n\n  policyUpdated(): void {\n  }\n\n  /**\n   * @deprecated\n   * This method is only kept for usage in a web test.\n   */\n  protected createNetworkRequest(\n      requestId: Protocol.Network.RequestId, frameId: Protocol.Page.FrameId, loaderId: Protocol.Network.LoaderId,\n      url: string, documentURL: string, initiator: Protocol.Network.Initiator|null): NetworkRequest {\n    const request = NetworkRequest.create(\n        requestId, url as Platform.DevToolsPath.UrlString, documentURL as Platform.DevToolsPath.UrlString, frameId,\n        loaderId, initiator);\n    requestToManagerMap.set(request, this.#manager);\n    return request;\n  }\n\n  private concatHostPort(host: string, port?: number): string {\n    if (!port || port === 0) {\n      return host;\n    }\n    return `${host}:${port}`;\n  }\n}\n\nexport type RequestConditionsSetting = {\n  url: string,\n  enabled: boolean,\n}|{\n  urlPattern: URLPatternConstructorString,\n  conditions: ThrottlingConditionKey,\n  enabled: boolean,\n};\n\nexport type URLPatternConstructorString = Platform.Brand.Brand<string, 'URLPatternConstructorString'>;\n\nexport const enum RequestURLPatternValidity {\n  VALID = 'valid',\n  FAILED_TO_PARSE = 'failed-to-parse',\n  HAS_REGEXP_GROUPS = 'has-regexp-groups',\n}\n\nexport class RequestURLPattern {\n  private constructor(readonly constructorString: URLPatternConstructorString, readonly pattern: URLPattern) {\n    if (pattern.hasRegExpGroups) {\n      throw new Error('RegExp groups are not allowed');\n    }\n  }\n\n  static isValidPattern(pattern: string): RequestURLPatternValidity {\n    try {\n      const urlPattern = new URLPattern(pattern);\n      return urlPattern.hasRegExpGroups ? RequestURLPatternValidity.HAS_REGEXP_GROUPS : RequestURLPatternValidity.VALID;\n    } catch {\n      return RequestURLPatternValidity.FAILED_TO_PARSE;\n    }\n  }\n\n  static create(constructorString: URLPatternConstructorString): RequestURLPattern|null {\n    try {\n      const urlPattern = new URLPattern(constructorString);\n      return urlPattern.hasRegExpGroups ? null : new RequestURLPattern(constructorString, urlPattern);\n    } catch {\n      return null;\n    }\n  }\n\n  static upgradeFromWildcard(pattern: string): RequestURLPattern|null {\n    const tryCreate = (constructorString: string): RequestURLPattern|null => {\n      const result = this.create(constructorString as URLPatternConstructorString);\n      if (result?.pattern.protocol === 'localhost' && result?.pattern.hostname === '') {\n        // localhost:1234 parses as a valid pattern, do the right thing here instead\n        return tryCreate(`*://${constructorString}`);\n      }\n      return result;\n    };\n\n    return tryCreate(pattern)  // try as is\n        ??\n        // Try to upgrade patterns created from the network panel, which either blocks the full url (sans\n        // protocol) or just the domain name. In both cases the wildcard patterns had implicit wildcards at the end.\n        // We explicitly add that here, which will match both domain names without path (implicitly setting pathname\n        // to '*') and urls with path (appending * to the pathname).\n        tryCreate(`*://${pattern}*`);\n  }\n}\n\nexport class RequestCondition extends Common.ObjectWrapper.ObjectWrapper<RequestCondition.EventTypes> {\n  #pattern: RequestURLPattern|{wildcardURL: string, upgradedPattern?: RequestURLPattern};\n  #enabled: boolean;\n  #conditions: ThrottlingConditions;\n  #ruleIds = new Set<string>();\n\n  static createFromSetting(setting: RequestConditionsSetting): RequestCondition {\n    if ('urlPattern' in setting) {\n      const pattern = RequestURLPattern.create(setting.urlPattern) ?? {\n        wildcardURL: setting.urlPattern,\n        upgradedPattern: RequestURLPattern.upgradeFromWildcard(setting.urlPattern) ?? undefined,\n      };\n\n      const conditions = getPredefinedOrBlockingCondition(setting.conditions) ??\n          customUserNetworkConditionsSetting().get().find(condition => condition.key === setting.conditions) ??\n          NoThrottlingConditions;\n\n      return new this(pattern, setting.enabled, conditions);\n    }\n\n    const pattern = {\n      wildcardURL: setting.url,\n      upgradedPattern: RequestURLPattern.upgradeFromWildcard(setting.url) ?? undefined\n    };\n    return new this(pattern, setting.enabled, BlockingConditions);\n  }\n\n  static create(pattern: RequestURLPattern, conditions: ThrottlingConditions): RequestCondition {\n    return new this(pattern, /* enabled=*/ true, conditions);\n  }\n\n  private constructor(\n      pattern: RequestURLPattern|{wildcardURL: string, upgradedPattern?: RequestURLPattern}, enabled: boolean,\n      conditions: ThrottlingConditions) {\n    super();\n    this.#pattern = pattern;\n    this.#enabled = enabled;\n    this.#conditions = conditions;\n  }\n\n  get isBlocking(): boolean {\n    return this.conditions === BlockingConditions;\n  }\n\n  get ruleIds(): Set<string> {\n    return this.#ruleIds;\n  }\n\n  get constructorString(): string|undefined {\n    return this.#pattern instanceof RequestURLPattern ? this.#pattern.constructorString :\n                                                        this.#pattern.upgradedPattern?.constructorString;\n  }\n\n  get wildcardURL(): string|undefined {\n    return 'wildcardURL' in this.#pattern ? this.#pattern.wildcardURL : undefined;\n  }\n\n  get constructorStringOrWildcardURL(): string {\n    return this.#pattern instanceof RequestURLPattern ?\n        this.#pattern.constructorString :\n        (this.#pattern.upgradedPattern?.constructorString ?? this.#pattern.wildcardURL);\n  }\n\n  set pattern(pattern: RequestURLPattern|string) {\n    if (typeof pattern === 'string') {\n      // TODO(pfaffe) Remove once the feature flag is no longer required\n      if (Root.Runtime.hostConfig.devToolsIndividualRequestThrottling?.enabled) {\n        throw new Error('Should not use wildcard urls');\n      }\n      this.#pattern = {\n        wildcardURL: pattern,\n        upgradedPattern: RequestURLPattern.upgradeFromWildcard(pattern) ?? undefined\n      };\n    } else {\n      this.#pattern = pattern;\n    }\n    this.dispatchEventToListeners(RequestCondition.Events.REQUEST_CONDITION_CHANGED);\n  }\n\n  get enabled(): boolean {\n    return this.#enabled;\n  }\n\n  set enabled(enabled: boolean) {\n    this.#enabled = enabled;\n    this.dispatchEventToListeners(RequestCondition.Events.REQUEST_CONDITION_CHANGED);\n  }\n\n  get conditions(): ThrottlingConditions {\n    return this.#conditions;\n  }\n\n  set conditions(conditions: ThrottlingConditions) {\n    this.#conditions = conditions;\n    this.#ruleIds = new Set();\n    this.dispatchEventToListeners(RequestCondition.Events.REQUEST_CONDITION_CHANGED);\n  }\n\n  toSetting(): RequestConditionsSetting {\n    const enabled = this.enabled;\n    if (this.#pattern instanceof RequestURLPattern) {\n      return {enabled, urlPattern: this.#pattern.constructorString, conditions: this.#conditions.key};\n    }\n    if (this.#conditions !== BlockingConditions && this.#pattern.upgradedPattern) {\n      return {enabled, urlPattern: this.#pattern.upgradedPattern.constructorString, conditions: this.#conditions.key};\n    }\n    return {enabled, url: this.#pattern.wildcardURL};\n  }\n\n  get originalOrUpgradedURLPattern(): URLPattern|undefined {\n    return this.#pattern instanceof RequestURLPattern ? this.#pattern.pattern : this.#pattern.upgradedPattern?.pattern;\n  }\n}\n\nexport namespace RequestCondition {\n  export const enum Events {\n    REQUEST_CONDITION_CHANGED = 'request-condition-changed',\n  }\n\n  export interface EventTypes {\n    [Events.REQUEST_CONDITION_CHANGED]: void;\n  }\n}\n\nexport class RequestConditions extends Common.ObjectWrapper.ObjectWrapper<RequestConditions.EventTypes> {\n  readonly #setting =\n      Common.Settings.Settings.instance().createSetting<RequestConditionsSetting[]>('network-blocked-patterns', []);\n  readonly #conditionsEnabledSetting =\n      Common.Settings.Settings.instance().moduleSetting<boolean>('request-blocking-enabled');\n  readonly #conditions: RequestCondition[] = [];\n  readonly #requestConditionsById = new Map<string, {\n    conditions: Conditions,\n    urlPattern?: string,\n  }>();\n  #conditionsAppliedForTestPromise: Promise<unknown> = Promise.resolve();\n\n  constructor() {\n    super();\n    for (const condition of this.#setting.get()) {\n      try {\n        this.#conditions.push(RequestCondition.createFromSetting(condition));\n      } catch (e) {\n        console.error('Error loading throttling settings: ', e);\n      }\n    }\n    for (const condition of this.#conditions) {\n      condition.addEventListener(RequestCondition.Events.REQUEST_CONDITION_CHANGED, this.#conditionsChanged, this);\n    }\n    this.#conditionsEnabledSetting.addChangeListener(\n        () => this.dispatchEventToListeners(RequestConditions.Events.REQUEST_CONDITIONS_CHANGED));\n  }\n\n  get count(): number {\n    return this.#conditions.length;\n  }\n\n  get conditionsEnabled(): boolean {\n    return this.#conditionsEnabledSetting.get();\n  }\n\n  set conditionsEnabled(enabled: boolean) {\n    if (this.#conditionsEnabledSetting.get() === enabled) {\n      return;\n    }\n    this.#conditionsEnabledSetting.set(enabled);\n  }\n\n  findCondition(pattern: string): RequestCondition|undefined {\n    if (Root.Runtime.hostConfig.devToolsIndividualRequestThrottling?.enabled) {\n      return this.#conditions.find(condition => condition.constructorString === pattern);\n    }\n    return this.#conditions.find(condition => condition.wildcardURL === pattern);\n  }\n\n  has(url: string): boolean {\n    return Boolean(this.findCondition(url));\n  }\n\n  add(...conditions: RequestCondition[]): void {\n    this.#conditions.push(...conditions);\n    for (const condition of conditions) {\n      condition.addEventListener(RequestCondition.Events.REQUEST_CONDITION_CHANGED, this.#conditionsChanged, this);\n    }\n    this.#conditionsChanged();\n  }\n\n  decreasePriority(condition: RequestCondition): void {\n    const index = this.#conditions.indexOf(condition);\n    if (index < 0 || index >= this.#conditions.length - 1) {\n      return;\n    }\n\n    Platform.ArrayUtilities.swap(this.#conditions, index, index + 1);\n    this.#conditionsChanged();\n  }\n\n  increasePriority(condition: RequestCondition): void {\n    const index = this.#conditions.indexOf(condition);\n    if (index <= 0) {\n      return;\n    }\n\n    Platform.ArrayUtilities.swap(this.#conditions, index - 1, index);\n    this.#conditionsChanged();\n  }\n\n  delete(condition: RequestCondition): void {\n    const index = this.#conditions.indexOf(condition);\n    if (index < 0) {\n      return;\n    }\n    condition.removeEventListener(RequestCondition.Events.REQUEST_CONDITION_CHANGED, this.#conditionsChanged, this);\n    this.#conditions.splice(index, 1);\n    this.#conditionsChanged();\n  }\n\n  clear(): void {\n    this.#conditions.splice(0);\n    this.#conditionsChanged();\n    for (const condition of this.#conditions) {\n      condition.removeEventListener(RequestCondition.Events.REQUEST_CONDITION_CHANGED, this.#conditionsChanged, this);\n    }\n  }\n\n  #conditionsChanged(): void {\n    this.#setting.set(this.#conditions.map(condition => condition.toSetting()));\n    this.dispatchEventToListeners(RequestConditions.Events.REQUEST_CONDITIONS_CHANGED);\n  }\n\n  get conditions(): IteratorObject<RequestCondition> {\n    return this.#conditions.values();\n  }\n\n  applyConditions(offline: boolean, globalConditions: Conditions|null, ...agents: ProtocolProxyApi.NetworkApi[]):\n      boolean {\n    function isNonBlockingCondition(condition: ThrottlingConditions): condition is Conditions {\n      return !('block' in condition);\n    }\n    if (Root.Runtime.hostConfig.devToolsIndividualRequestThrottling?.enabled) {\n      const urlPatterns: Protocol.Network.BlockPattern[] = [];\n      // We store all this info out-of-band to prevent races with changing conditions while the promise is still pending\n      const matchedNetworkConditions: Array<{conditions: Conditions, ruleIds?: Set<string>, urlPattern?: string}> = [];\n      if (this.conditionsEnabled) {\n        for (const condition of this.#conditions) {\n          const urlPattern = condition.constructorString;\n          const conditions = condition.conditions;\n          if (!condition.enabled || !urlPattern || conditions === NoThrottlingConditions) {\n            continue;\n          }\n          const block = !isNonBlockingCondition(conditions);\n          urlPatterns.push({urlPattern, block});\n          if (!block) {\n            const {ruleIds} = condition;\n            matchedNetworkConditions.push({ruleIds, urlPattern, conditions});\n          }\n        }\n\n        if (globalConditions) {\n          matchedNetworkConditions.push({conditions: globalConditions});\n        }\n      }\n\n      const promises: Array<Promise<unknown>> = [];\n\n      for (const agent of agents) {\n        promises.push(agent.invoke_setBlockedURLs({urlPatterns}));\n        promises.push(agent\n                          .invoke_emulateNetworkConditionsByRule({\n                            offline,\n                            matchedNetworkConditions: matchedNetworkConditions.map(\n                                ({urlPattern, conditions}) => ({\n                                  urlPattern: urlPattern ?? '',\n                                  latency: conditions.latency,\n                                  downloadThroughput: conditions.download < 0 ? 0 : conditions.download,\n                                  uploadThroughput: conditions.upload < 0 ? 0 : conditions.upload,\n                                  packetLoss: (conditions.packetLoss ?? 0) < 0 ? 0 : conditions.packetLoss,\n                                  packetQueueLength: conditions.packetQueueLength,\n                                  packetReordering: conditions.packetReordering,\n                                  connectionType: NetworkManager.connectionType(conditions),\n                                }))\n                          })\n                          .then(response => {\n                            if (!response.getError()) {\n                              for (let i = 0; i < response.ruleIds.length; ++i) {\n                                const ruleId = response.ruleIds[i];\n                                const {ruleIds, conditions, urlPattern} = matchedNetworkConditions[i];\n                                if (ruleIds) {\n                                  this.#requestConditionsById.set(ruleId, {urlPattern, conditions});\n                                  matchedNetworkConditions[i].ruleIds?.add(ruleId);\n                                }\n                              }\n                            }\n                          }));\n        promises.push(agent.invoke_overrideNetworkState({\n          offline,\n          latency: globalConditions?.latency ?? 0,\n          downloadThroughput: globalConditions?.download ?? -1,\n          uploadThroughput: globalConditions?.upload ?? -1,\n          connectionType: globalConditions ? NetworkManager.connectionType(globalConditions) :\n                                             Protocol.Network.ConnectionType.None,\n        }));\n      }\n\n      this.#conditionsAppliedForTestPromise = this.#conditionsAppliedForTestPromise.then(() => Promise.all(promises));\n      return urlPatterns.length > 0;\n    }\n\n    const urls = this.conditionsEnabled ?\n        this.#conditions.filter(condition => condition.enabled && condition.wildcardURL)\n            .map(condition => condition.wildcardURL as string) :\n        [];\n\n    for (const agent of agents) {\n      void agent.invoke_setBlockedURLs({urls});\n    }\n    return urls.length > 0;\n  }\n\n  conditionsAppliedForTest(): Promise<unknown> {\n    return this.#conditionsAppliedForTestPromise;\n  }\n\n  conditionsForId(appliedNetworkConditionsId: string): AppliedNetworkConditions|undefined {\n    const requestConditions = this.#requestConditionsById.get(appliedNetworkConditionsId);\n    if (!requestConditions) {\n      return undefined;\n    }\n    const {conditions, urlPattern} = requestConditions;\n    return new AppliedNetworkConditions(conditions, appliedNetworkConditionsId, urlPattern);\n  }\n}\n\nexport namespace RequestConditions {\n  export const enum Events {\n    REQUEST_CONDITIONS_CHANGED = 'request-conditions-changed',\n  }\n  export interface EventTypes {\n    [Events.REQUEST_CONDITIONS_CHANGED]: void;\n  }\n}\n\nlet multiTargetNetworkManagerInstance: MultitargetNetworkManager|null;\n\nexport class AppliedNetworkConditions {\n  constructor(\n      readonly conditions: Conditions, readonly appliedNetworkConditionsId: string, readonly urlPattern?: string) {\n  }\n}\n\nexport class MultitargetNetworkManager extends Common.ObjectWrapper.ObjectWrapper<MultitargetNetworkManager.EventTypes>\n    implements SDKModelObserver<NetworkManager> {\n  #userAgentOverride = '';\n  #userAgentMetadataOverride: Protocol.Emulation.UserAgentMetadata|null = null;\n  #customAcceptedEncodings: Protocol.Network.ContentEncoding[]|null = null;\n  readonly #networkAgents = new Set<ProtocolProxyApi.NetworkApi>();\n  readonly #fetchAgents = new Set<ProtocolProxyApi.FetchApi>();\n  readonly inflightMainResourceRequests = new Map<string, NetworkRequest>();\n  #networkConditions: Conditions = NoThrottlingConditions;\n  #updatingInterceptionPatternsPromise: Promise<void>|null = null;\n  readonly #requestConditions = new RequestConditions();\n  readonly #urlsForRequestInterceptor:\n      Platform.MapUtilities.Multimap<(arg0: InterceptedRequest) => Promise<void>, InterceptionPattern> =\n      new Platform.MapUtilities.Multimap();\n  #extraHeaders?: Protocol.Network.Headers;\n  #customUserAgent?: string;\n  #isBlocking = false;\n\n  constructor() {\n    super();\n\n    // TODO(allada) Remove these and merge it with request interception.\n    const blockedPatternChanged: () => void = () => {\n      this.updateBlockedPatterns();\n      this.dispatchEventToListeners(MultitargetNetworkManager.Events.BLOCKED_PATTERNS_CHANGED);\n    };\n    this.#requestConditions.addEventListener(\n        RequestConditions.Events.REQUEST_CONDITIONS_CHANGED, blockedPatternChanged);\n    this.updateBlockedPatterns();\n\n    TargetManager.instance().observeModels(NetworkManager, this);\n  }\n\n  static instance(opts: {\n    forceNew: boolean|null,\n  } = {forceNew: null}): MultitargetNetworkManager {\n    const {forceNew} = opts;\n    if (!multiTargetNetworkManagerInstance || forceNew) {\n      multiTargetNetworkManagerInstance = new MultitargetNetworkManager();\n    }\n\n    return multiTargetNetworkManagerInstance;\n  }\n\n  static dispose(): void {\n    multiTargetNetworkManagerInstance = null;\n  }\n\n  static patchUserAgentWithChromeVersion(uaString: string): string {\n    // Patches Chrome/ChrOS version from user #agent (\"1.2.3.4\" when user #agent is: \"Chrome/1.2.3.4\").\n    // Otherwise, ignore it. This assumes additional appVersions appear after the Chrome version.\n    const chromeVersion = Root.Runtime.getChromeVersion();\n    if (chromeVersion.length > 0) {\n      // \"1.2.3.4\" becomes \"1.0.100.0\"\n      const additionalAppVersion = chromeVersion.split('.', 1)[0] + '.0.100.0';\n      return Platform.StringUtilities.sprintf(uaString, chromeVersion, additionalAppVersion);\n    }\n    return uaString;\n  }\n\n  static patchUserAgentMetadataWithChromeVersion(userAgentMetadata: Protocol.Emulation.UserAgentMetadata): void {\n    // Patches Chrome/ChrOS version from user #agent metadata (\"1.2.3.4\" when user #agent is: \"Chrome/1.2.3.4\").\n    // Otherwise, ignore it. This assumes additional appVersions appear after the Chrome version.\n    if (!userAgentMetadata.brands) {\n      return;\n    }\n    const chromeVersion = Root.Runtime.getChromeVersion();\n    if (chromeVersion.length === 0) {\n      return;\n    }\n\n    const majorVersion = chromeVersion.split('.', 1)[0];\n    for (const brand of userAgentMetadata.brands) {\n      if (brand.version.includes('%s')) {\n        brand.version = Platform.StringUtilities.sprintf(brand.version, majorVersion);\n      }\n    }\n\n    if (userAgentMetadata.fullVersion) {\n      if (userAgentMetadata.fullVersion.includes('%s')) {\n        userAgentMetadata.fullVersion = Platform.StringUtilities.sprintf(userAgentMetadata.fullVersion, chromeVersion);\n      }\n    }\n  }\n\n  modelAdded(networkManager: NetworkManager): void {\n    const networkAgent = networkManager.target().networkAgent();\n    const fetchAgent = networkManager.target().fetchAgent();\n    if (this.#extraHeaders) {\n      void networkAgent.invoke_setExtraHTTPHeaders({headers: this.#extraHeaders});\n    }\n    if (this.currentUserAgent()) {\n      void networkAgent.invoke_setUserAgentOverride(\n          {userAgent: this.currentUserAgent(), userAgentMetadata: this.#userAgentMetadataOverride || undefined});\n    }\n    this.#requestConditions.applyConditions(\n        this.isOffline(), this.isThrottling() ? this.#networkConditions : null, networkAgent);\n    if (this.isIntercepting()) {\n      void fetchAgent.invoke_enable({patterns: this.#urlsForRequestInterceptor.valuesArray()});\n    }\n    if (this.#customAcceptedEncodings === null) {\n      void networkAgent.invoke_clearAcceptedEncodingsOverride();\n    } else {\n      void networkAgent.invoke_setAcceptedEncodings({encodings: this.#customAcceptedEncodings});\n    }\n    this.#networkAgents.add(networkAgent);\n    this.#fetchAgents.add(fetchAgent);\n    if (this.isThrottling() && !Root.Runtime.hostConfig.devToolsIndividualRequestThrottling?.enabled) {\n      this.updateNetworkConditions(networkAgent);\n    }\n  }\n\n  modelRemoved(networkManager: NetworkManager): void {\n    for (const entry of this.inflightMainResourceRequests) {\n      const manager = NetworkManager.forRequest((entry[1]));\n      if (manager !== networkManager) {\n        continue;\n      }\n      this.inflightMainResourceRequests.delete((entry[0]));\n    }\n    this.#networkAgents.delete(networkManager.target().networkAgent());\n    this.#fetchAgents.delete(networkManager.target().fetchAgent());\n  }\n\n  isThrottling(): boolean {\n    return this.#networkConditions.download >= 0 || this.#networkConditions.upload >= 0 ||\n        this.#networkConditions.latency > 0;\n  }\n\n  isOffline(): boolean {\n    return !this.#networkConditions.download && !this.#networkConditions.upload;\n  }\n\n  setNetworkConditions(conditions: Conditions): void {\n    this.#networkConditions = conditions;\n    if (Root.Runtime.hostConfig.devToolsIndividualRequestThrottling?.enabled) {\n      this.#requestConditions.applyConditions(\n          this.isOffline(), this.isThrottling() ? this.#networkConditions : null, ...this.#networkAgents);\n    } else {\n      for (const agent of this.#networkAgents) {\n        this.updateNetworkConditions(agent);\n      }\n    }\n    this.dispatchEventToListeners(MultitargetNetworkManager.Events.CONDITIONS_CHANGED);\n  }\n\n  networkConditions(): Conditions {\n    return this.#networkConditions;\n  }\n\n  private updateNetworkConditions(networkAgent: ProtocolProxyApi.NetworkApi): void {\n    const conditions = this.#networkConditions;\n    if (!this.isThrottling()) {\n      void networkAgent.invoke_emulateNetworkConditions({\n        offline: false,\n        latency: 0,\n        downloadThroughput: 0,\n        uploadThroughput: 0,\n      });\n    } else {\n      void networkAgent.invoke_emulateNetworkConditions({\n        offline: this.isOffline(),\n        latency: conditions.latency,\n        downloadThroughput: conditions.download < 0 ? 0 : conditions.download,\n        uploadThroughput: conditions.upload < 0 ? 0 : conditions.upload,\n        packetLoss: (conditions.packetLoss ?? 0) < 0 ? 0 : conditions.packetLoss,\n        packetQueueLength: conditions.packetQueueLength,\n        packetReordering: conditions.packetReordering,\n        connectionType: NetworkManager.connectionType(conditions),\n      });\n    }\n  }\n\n  setExtraHTTPHeaders(headers: Protocol.Network.Headers): void {\n    this.#extraHeaders = headers;\n    for (const agent of this.#networkAgents) {\n      void agent.invoke_setExtraHTTPHeaders({headers: this.#extraHeaders});\n    }\n  }\n\n  currentUserAgent(): string {\n    return this.#customUserAgent ? this.#customUserAgent : this.#userAgentOverride;\n  }\n\n  private updateUserAgentOverride(): void {\n    const userAgent = this.currentUserAgent();\n    for (const agent of this.#networkAgents) {\n      void agent.invoke_setUserAgentOverride(\n          {userAgent, userAgentMetadata: this.#userAgentMetadataOverride || undefined});\n    }\n  }\n\n  setUserAgentOverride(userAgent: string, userAgentMetadataOverride: Protocol.Emulation.UserAgentMetadata|null): void {\n    const uaChanged = (this.#userAgentOverride !== userAgent);\n    this.#userAgentOverride = userAgent;\n    if (!this.#customUserAgent) {\n      this.#userAgentMetadataOverride = userAgentMetadataOverride;\n      this.updateUserAgentOverride();\n    } else {\n      this.#userAgentMetadataOverride = null;\n    }\n\n    if (uaChanged) {\n      this.dispatchEventToListeners(MultitargetNetworkManager.Events.USER_AGENT_CHANGED);\n    }\n  }\n\n  setCustomUserAgentOverride(\n      userAgent: string, userAgentMetadataOverride: Protocol.Emulation.UserAgentMetadata|null = null): void {\n    this.#customUserAgent = userAgent;\n    this.#userAgentMetadataOverride = userAgentMetadataOverride;\n    this.updateUserAgentOverride();\n  }\n\n  setCustomAcceptedEncodingsOverride(acceptedEncodings: Protocol.Network.ContentEncoding[]): void {\n    this.#customAcceptedEncodings = acceptedEncodings;\n    this.updateAcceptedEncodingsOverride();\n    this.dispatchEventToListeners(MultitargetNetworkManager.Events.ACCEPTED_ENCODINGS_CHANGED);\n  }\n\n  clearCustomAcceptedEncodingsOverride(): void {\n    this.#customAcceptedEncodings = null;\n    this.updateAcceptedEncodingsOverride();\n    this.dispatchEventToListeners(MultitargetNetworkManager.Events.ACCEPTED_ENCODINGS_CHANGED);\n  }\n\n  isAcceptedEncodingOverrideSet(): boolean {\n    return this.#customAcceptedEncodings !== null;\n  }\n\n  private updateAcceptedEncodingsOverride(): void {\n    const customAcceptedEncodings = this.#customAcceptedEncodings;\n    for (const agent of this.#networkAgents) {\n      if (customAcceptedEncodings === null) {\n        void agent.invoke_clearAcceptedEncodingsOverride();\n      } else {\n        void agent.invoke_setAcceptedEncodings({encodings: customAcceptedEncodings});\n      }\n    }\n  }\n\n  get requestConditions(): RequestConditions {\n    return this.#requestConditions;\n  }\n\n  isBlocking(): boolean {\n    return this.#isBlocking && this.requestConditions.conditionsEnabled;\n  }\n\n  /**\n   * @deprecated Kept for layout tests\n   * TODO(pfaffe) remove\n   */\n  private setBlockingEnabled(enabled: boolean): void {\n    this.requestConditions.conditionsEnabled = enabled;\n  }\n\n  /**\n   * @deprecated Kept for layout tests\n   * TODO(pfaffe) remove\n   */\n  private setBlockedPatterns(patterns: Array<{url: string, enabled: boolean}>): void {\n    this.requestConditions.clear();\n    this.requestConditions.add(...patterns.map(pattern => RequestCondition.createFromSetting(pattern)));\n  }\n\n  private updateBlockedPatterns(): void {\n    this.#isBlocking = this.#requestConditions.applyConditions(\n        this.isOffline(), this.isThrottling() ? this.#networkConditions : null, ...this.#networkAgents);\n  }\n\n  isIntercepting(): boolean {\n    return Boolean(this.#urlsForRequestInterceptor.size);\n  }\n\n  setInterceptionHandlerForPatterns(\n      patterns: InterceptionPattern[], requestInterceptor: (arg0: InterceptedRequest) => Promise<void>): Promise<void> {\n    // Note: requestInterceptors may receive interception #requests for patterns they did not subscribe to.\n    this.#urlsForRequestInterceptor.deleteAll(requestInterceptor);\n    for (const newPattern of patterns) {\n      this.#urlsForRequestInterceptor.set(requestInterceptor, newPattern);\n    }\n    return this.updateInterceptionPatternsOnNextTick();\n  }\n\n  private updateInterceptionPatternsOnNextTick(): Promise<void> {\n    // This is used so we can register and unregister patterns in loops without sending lots of protocol messages.\n    if (!this.#updatingInterceptionPatternsPromise) {\n      this.#updatingInterceptionPatternsPromise = Promise.resolve().then(this.updateInterceptionPatterns.bind(this));\n    }\n    return this.#updatingInterceptionPatternsPromise;\n  }\n\n  private async updateInterceptionPatterns(): Promise<void> {\n    if (!Common.Settings.Settings.instance().moduleSetting('cache-disabled').get()) {\n      Common.Settings.Settings.instance().moduleSetting('cache-disabled').set(true);\n    }\n    this.#updatingInterceptionPatternsPromise = null;\n    const promises = ([] as Array<Promise<unknown>>);\n    for (const agent of this.#fetchAgents) {\n      promises.push(agent.invoke_enable({patterns: this.#urlsForRequestInterceptor.valuesArray()}));\n    }\n    this.dispatchEventToListeners(MultitargetNetworkManager.Events.INTERCEPTORS_CHANGED);\n    await Promise.all(promises);\n  }\n\n  async requestIntercepted(interceptedRequest: InterceptedRequest): Promise<void> {\n    for (const requestInterceptor of this.#urlsForRequestInterceptor.keysArray()) {\n      await requestInterceptor(interceptedRequest);\n      if (interceptedRequest.hasResponded() && interceptedRequest.networkRequest) {\n        this.dispatchEventToListeners(\n            MultitargetNetworkManager.Events.REQUEST_INTERCEPTED, interceptedRequest.networkRequest.requestId());\n        return;\n      }\n    }\n    if (!interceptedRequest.hasResponded()) {\n      interceptedRequest.continueRequestWithoutChange();\n    }\n  }\n\n  clearBrowserCache(): void {\n    for (const agent of this.#networkAgents) {\n      void agent.invoke_clearBrowserCache();\n    }\n  }\n\n  clearBrowserCookies(): void {\n    for (const agent of this.#networkAgents) {\n      void agent.invoke_clearBrowserCookies();\n    }\n  }\n\n  async getCertificate(origin: string): Promise<string[]> {\n    const target = TargetManager.instance().primaryPageTarget();\n    if (!target) {\n      return [];\n    }\n    const certificate = await target.networkAgent().invoke_getCertificate({origin});\n    if (!certificate) {\n      return [];\n    }\n    return certificate.tableNames;\n  }\n\n  appliedRequestConditions(requestInternal: NetworkRequest): AppliedNetworkConditions|undefined {\n    if (!requestInternal.appliedNetworkConditionsId) {\n      return undefined;\n    }\n    return this.requestConditions.conditionsForId(requestInternal.appliedNetworkConditionsId);\n  }\n}\n\nexport namespace MultitargetNetworkManager {\n  export const enum Events {\n    BLOCKED_PATTERNS_CHANGED = 'BlockedPatternsChanged',\n    CONDITIONS_CHANGED = 'ConditionsChanged',\n    USER_AGENT_CHANGED = 'UserAgentChanged',\n    INTERCEPTORS_CHANGED = 'InterceptorsChanged',\n    ACCEPTED_ENCODINGS_CHANGED = 'AcceptedEncodingsChanged',\n    REQUEST_INTERCEPTED = 'RequestIntercepted',\n    REQUEST_FULFILLED = 'RequestFulfilled',\n  }\n\n  export interface EventTypes {\n    [Events.BLOCKED_PATTERNS_CHANGED]: void;\n    [Events.CONDITIONS_CHANGED]: void;\n    [Events.USER_AGENT_CHANGED]: void;\n    [Events.INTERCEPTORS_CHANGED]: void;\n    [Events.ACCEPTED_ENCODINGS_CHANGED]: void;\n    [Events.REQUEST_INTERCEPTED]: string;\n    [Events.REQUEST_FULFILLED]: Platform.DevToolsPath.UrlString;\n  }\n}\n\nexport class InterceptedRequest {\n  readonly #fetchAgent: ProtocolProxyApi.FetchApi;\n  #hasResponded = false;\n  request: Protocol.Network.Request;\n  resourceType: Protocol.Network.ResourceType;\n  responseStatusCode: number|undefined;\n  responseHeaders: Protocol.Fetch.HeaderEntry[]|undefined;\n  requestId: Protocol.Fetch.RequestId;\n  networkRequest: NetworkRequest|null;\n\n  constructor(\n      fetchAgent: ProtocolProxyApi.FetchApi,\n      request: Protocol.Network.Request,\n      resourceType: Protocol.Network.ResourceType,\n      requestId: Protocol.Fetch.RequestId,\n      networkRequest: NetworkRequest|null,\n      responseStatusCode?: number,\n      responseHeaders?: Protocol.Fetch.HeaderEntry[],\n  ) {\n    this.#fetchAgent = fetchAgent;\n    this.request = request;\n    this.resourceType = resourceType;\n    this.responseStatusCode = responseStatusCode;\n    this.responseHeaders = responseHeaders;\n    this.requestId = requestId;\n    this.networkRequest = networkRequest;\n  }\n\n  hasResponded(): boolean {\n    return this.#hasResponded;\n  }\n\n  static mergeSetCookieHeaders(\n      originalSetCookieHeaders: Protocol.Fetch.HeaderEntry[],\n      setCookieHeadersFromOverrides: Protocol.Fetch.HeaderEntry[]): Protocol.Fetch.HeaderEntry[] {\n    // Generates a map containing the `set-cookie` headers. Valid `set-cookie`\n    // headers are stored by the cookie name. Malformed `set-cookie` headers are\n    // stored by the whole header value. Duplicates are allowed.\n    const generateHeaderMap = (headers: Protocol.Fetch.HeaderEntry[]): Map<string, string[]> => {\n      const result = new Map<string, string[]>();\n      for (const header of headers) {\n        // The regex matches cookie headers of the form '<header-name>=<header-value>'.\n        // <header-name> is a token as defined in https://www.rfc-editor.org/rfc/rfc9110.html#name-tokens.\n        // The shape of <header-value> is not being validated at all here.\n        const match = header.value.match(/^([a-zA-Z0-9!#$%&'*+.^_`|~-]+=)(.*)$/);\n        if (match) {\n          if (result.has(match[1])) {\n            result.get(match[1])?.push(header.value);\n          } else {\n            result.set(match[1], [header.value]);\n          }\n        } else if (result.has(header.value)) {\n          result.get(header.value)?.push(header.value);\n        } else {\n          result.set(header.value, [header.value]);\n        }\n      }\n      return result;\n    };\n\n    const originalHeadersMap = generateHeaderMap(originalSetCookieHeaders);\n    const overridesHeaderMap = generateHeaderMap(setCookieHeadersFromOverrides);\n\n    // Iterate over original headers. If the same key is found among the\n    // overrides, use those instead.\n    const mergedHeaders: Protocol.Fetch.HeaderEntry[] = [];\n    for (const [key, headerValues] of originalHeadersMap) {\n      if (overridesHeaderMap.has(key)) {\n        for (const headerValue of overridesHeaderMap.get(key) || []) {\n          mergedHeaders.push({name: 'set-cookie', value: headerValue});\n        }\n      } else {\n        for (const headerValue of headerValues) {\n          mergedHeaders.push({name: 'set-cookie', value: headerValue});\n        }\n      }\n    }\n\n    // Finally add all overrides which have not been added yet.\n    for (const [key, headerValues] of overridesHeaderMap) {\n      if (originalHeadersMap.has(key)) {\n        continue;\n      }\n      for (const headerValue of headerValues) {\n        mergedHeaders.push({name: 'set-cookie', value: headerValue});\n      }\n    }\n    return mergedHeaders;\n  }\n\n  async continueRequestWithContent(\n      contentBlob: Blob, encoded: boolean, responseHeaders: Protocol.Fetch.HeaderEntry[],\n      isBodyOverridden: boolean): Promise<void> {\n    this.#hasResponded = true;\n    const body = encoded ? await contentBlob.text() : await Common.Base64.encode(contentBlob).catch(err => {\n      console.error(err);\n      return '';\n    });\n    const responseCode = isBodyOverridden ? 200 : (this.responseStatusCode || 200);\n\n    if (this.networkRequest) {\n      const originalSetCookieHeaders =\n          this.networkRequest?.originalResponseHeaders.filter(header => header.name === 'set-cookie') || [];\n      const setCookieHeadersFromOverrides = responseHeaders.filter(header => header.name === 'set-cookie');\n      this.networkRequest.setCookieHeaders =\n          InterceptedRequest.mergeSetCookieHeaders(originalSetCookieHeaders, setCookieHeadersFromOverrides);\n      this.networkRequest.hasOverriddenContent = isBodyOverridden;\n    }\n\n    void this.#fetchAgent.invoke_fulfillRequest({requestId: this.requestId, responseCode, body, responseHeaders});\n    MultitargetNetworkManager.instance().dispatchEventToListeners(\n        MultitargetNetworkManager.Events.REQUEST_FULFILLED, this.request.url as Platform.DevToolsPath.UrlString);\n  }\n\n  continueRequestWithoutChange(): void {\n    console.assert(!this.#hasResponded);\n    this.#hasResponded = true;\n    void this.#fetchAgent.invoke_continueRequest({requestId: this.requestId});\n  }\n\n  async responseBody(): Promise<TextUtils.ContentData.ContentDataOrError> {\n    const response = await this.#fetchAgent.invoke_getResponseBody({requestId: this.requestId});\n    const error = response.getError();\n    if (error) {\n      return {error};\n    }\n\n    const {mimeType, charset} = this.getMimeTypeAndCharset();\n    return new TextUtils.ContentData.ContentData(\n        response.body, response.base64Encoded, mimeType ?? 'application/octet-stream', charset ?? undefined);\n  }\n\n  isRedirect(): boolean {\n    return this.responseStatusCode !== undefined && this.responseStatusCode >= 300 && this.responseStatusCode < 400;\n  }\n\n  /**\n   * Tries to determine the MIME type and charset for this intercepted request.\n   * Looks at the intercepted response headers first (for Content-Type header), then\n   * checks the `NetworkRequest` if we have one.\n   */\n  getMimeTypeAndCharset(): {mimeType: string|null, charset: string|null} {\n    for (const header of this.responseHeaders ?? []) {\n      if (header.name.toLowerCase() === 'content-type') {\n        return Platform.MimeType.parseContentType(header.value);\n      }\n    }\n\n    const mimeType = this.networkRequest?.mimeType ?? null;\n    const charset = this.networkRequest?.charset() ?? null;\n    return {mimeType, charset};\n  }\n}\n\n/**\n * Helper class to match #requests created from requestWillBeSent with\n * requestWillBeSentExtraInfo and responseReceivedExtraInfo when they have the\n * same requestId due to redirects.\n */\nclass ExtraInfoBuilder {\n  readonly #requests: NetworkRequest[] = [];\n  #responseExtraInfoFlag: Array<boolean|null> = [];\n  #requestExtraInfos: Array<ExtraRequestInfo|null> = [];\n  #responseExtraInfos: Array<ExtraResponseInfo|null> = [];\n  #responseEarlyHintsHeaders: NameValue[] = [];\n  #finished = false;\n\n  addRequest(req: NetworkRequest): void {\n    this.#requests.push(req);\n    this.sync(this.#requests.length - 1);\n  }\n\n  addHasExtraInfo(hasExtraInfo: boolean): void {\n    this.#responseExtraInfoFlag.push(hasExtraInfo);\n    // This comes in response, so it can't come before request or after next\n    // request in the redirect chain.\n    console.assert(this.#requests.length === this.#responseExtraInfoFlag.length, 'request/response count mismatch');\n    if (!hasExtraInfo) {\n      // We may potentially have gotten extra infos from the next redirect\n      // request already. Account for that by inserting null for missing\n      // extra infos at current position.\n      this.#requestExtraInfos.splice(this.#requests.length - 1, 0, null);\n      this.#responseExtraInfos.splice(this.#requests.length - 1, 0, null);\n    }\n    this.sync(this.#requests.length - 1);\n  }\n\n  addRequestExtraInfo(info: ExtraRequestInfo): void {\n    this.#requestExtraInfos.push(info);\n    this.sync(this.#requestExtraInfos.length - 1);\n  }\n\n  addResponseExtraInfo(info: ExtraResponseInfo): void {\n    this.#responseExtraInfos.push(info);\n    this.sync(this.#responseExtraInfos.length - 1);\n  }\n\n  setEarlyHintsHeaders(earlyHintsHeaders: NameValue[]): void {\n    this.#responseEarlyHintsHeaders = earlyHintsHeaders;\n    this.updateFinalRequest();\n  }\n\n  finished(): void {\n    this.#finished = true;\n    // We may have missed responseReceived event in case of failure.\n    // That said, the ExtraInfo events still may be here, so mark them\n    // as present. Event if they are not, this is harmless.\n    // TODO(caseq): consider if we need to report hasExtraInfo in the\n    // loadingFailed event.\n    if (this.#responseExtraInfoFlag.length < this.#requests.length) {\n      this.#responseExtraInfoFlag.push(true);\n      this.sync(this.#responseExtraInfoFlag.length - 1);\n    }\n    console.assert(\n        this.#requests.length === this.#responseExtraInfoFlag.length,\n        'request/response count mismatch when request finished');\n    this.updateFinalRequest();\n  }\n\n  isFinished(): boolean {\n    return this.#finished;\n  }\n\n  private sync(index: number): void {\n    const req = this.#requests[index];\n    if (!req) {\n      return;\n    }\n\n    // No response yet, so we don't know if extra info would\n    // be there, bail out for now.\n    if (index >= this.#responseExtraInfoFlag.length) {\n      return;\n    }\n    if (!this.#responseExtraInfoFlag[index]) {\n      return;\n    }\n\n    const requestExtraInfo = this.#requestExtraInfos[index];\n    if (requestExtraInfo) {\n      req.addExtraRequestInfo(requestExtraInfo);\n      this.#requestExtraInfos[index] = null;\n    }\n\n    const responseExtraInfo = this.#responseExtraInfos[index];\n    if (responseExtraInfo) {\n      req.addExtraResponseInfo(responseExtraInfo);\n      this.#responseExtraInfos[index] = null;\n    }\n  }\n\n  finalRequest(): NetworkRequest|null {\n    if (!this.#finished) {\n      return null;\n    }\n    return this.#requests[this.#requests.length - 1] || null;\n  }\n\n  private updateFinalRequest(): void {\n    if (!this.#finished) {\n      return;\n    }\n    const finalRequest = this.finalRequest();\n    finalRequest?.setEarlyHintsHeaders(this.#responseEarlyHintsHeaders);\n  }\n}\n\nSDKModel.register(NetworkManager, {capabilities: Capability.NETWORK, autostart: true});\n\nexport function networkConditionsEqual(first: ThrottlingConditions, second: ThrottlingConditions): boolean {\n  if ('block' in first || 'block' in second) {\n    if ('block' in first && 'block' in second) {\n      const firstTitle = (typeof first.title === 'function' ? first.title() : first.title);\n      const secondTitle = (typeof second.title === 'function' ? second.title() : second.title);\n      return firstTitle === secondTitle && first.block === second.block;\n    }\n    return false;\n  }\n  // Caution: titles might be different function instances, which produce\n  // the same value.\n  // We prefer to use the i18nTitleKey to prevent against locale changes or\n  // UIString changes that might change the value vs what the user has stored\n  // locally.\n  const firstTitle = first.i18nTitleKey || (typeof first.title === 'function' ? first.title() : first.title);\n  const secondTitle = second.i18nTitleKey || (typeof second.title === 'function' ? second.title() : second.title);\n\n  return second.download === first.download && second.upload === first.upload && second.latency === first.latency &&\n      first.packetLoss === second.packetLoss && first.packetQueueLength === second.packetQueueLength &&\n      first.packetReordering === second.packetReordering && secondTitle === firstTitle;\n}\n\n/**\n * IMPORTANT: this key is used as the value that is persisted so we remember\n * the user's throttling settings\n *\n * This means that it is very important that;\n * 1. Each Conditions that is defined must have a unique key.\n * 2. The keys & values DO NOT CHANGE for a particular condition, else we might break\n *    DevTools when restoring a user's persisted setting.\n *\n * If you do want to change them, you need to handle that in a migration, but\n * please talk to jacktfranklin@ first.\n */\nexport const enum PredefinedThrottlingConditionKey {\n  BLOCKING = 'BLOCKING',\n  NO_THROTTLING = 'NO_THROTTLING',\n  OFFLINE = 'OFFLINE',\n  SPEED_3G = 'SPEED_3G',\n  SPEED_SLOW_4G = 'SPEED_SLOW_4G',\n  SPEED_FAST_4G = 'SPEED_FAST_4G',\n}\n\nexport type UserDefinedThrottlingConditionKey = `USER_CUSTOM_SETTING_${number}`;\nexport type ThrottlingConditionKey = PredefinedThrottlingConditionKey|UserDefinedThrottlingConditionKey;\n\nexport const THROTTLING_CONDITIONS_LOOKUP: ReadonlyMap<PredefinedThrottlingConditionKey, Conditions> = new Map([\n  [PredefinedThrottlingConditionKey.NO_THROTTLING, NoThrottlingConditions],\n  [PredefinedThrottlingConditionKey.OFFLINE, OfflineConditions],\n  [PredefinedThrottlingConditionKey.SPEED_3G, Slow3GConditions],\n  [PredefinedThrottlingConditionKey.SPEED_SLOW_4G, Slow4GConditions],\n  [PredefinedThrottlingConditionKey.SPEED_FAST_4G, Fast4GConditions]\n]);\n\nfunction keyIsPredefined(key: ThrottlingConditionKey): key is PredefinedThrottlingConditionKey {\n  return !key.startsWith('USER_CUSTOM_SETTING_');\n}\nexport function keyIsCustomUser(key: ThrottlingConditionKey): key is UserDefinedThrottlingConditionKey {\n  return key.startsWith('USER_CUSTOM_SETTING_');\n}\n\nexport function getPredefinedCondition(key: ThrottlingConditionKey): Conditions|null {\n  if (!keyIsPredefined(key)) {\n    return null;\n  }\n  return THROTTLING_CONDITIONS_LOOKUP.get(key) ?? null;\n}\n\nexport function getPredefinedOrBlockingCondition(key: ThrottlingConditionKey): ThrottlingConditions|null {\n  return key === PredefinedThrottlingConditionKey.BLOCKING ? BlockingConditions : getPredefinedCondition(key);\n}\n\nexport type ThrottlingConditions = Conditions|{\n  readonly key: ThrottlingConditionKey,\n  block: true,\n  title: string | (() => string),\n};\nexport interface Conditions {\n  readonly key: ThrottlingConditionKey;\n  download: number;\n  upload: number;\n  latency: number;\n  packetLoss?: number;\n  packetQueueLength?: number;\n  packetReordering?: boolean;\n  // TODO(crbug.com/1219425): In the future, it might be worthwhile to\n  // consider avoiding mixing up presentation state (e.g.: displayed\n  // titles) with behavioral state (e.g.: the throttling amounts). In\n  // this particular case, the title (along with other properties)\n  // doubles as both part of group of fields which (loosely) uniquely\n  // identify instances, as well as the literal string displayed in the\n  // UI, which leads to complications around persistance.\n  // TODO(crbug.com/422682525): make this just a function because we use lazy string everywhere.\n  title: string|(() => string);\n  // Instances may be serialized to local storage, so localized titles\n  // should not be irrecoverably baked, just in case the string changes\n  // (or the user switches locales).\n  // TODO(crbug.com/422682525): get rid of this, there is no need to store on\n  // the condition now we do not rely on it to reload a setting from disk.\n  i18nTitleKey?: string;\n  /**\n   * RTT values are multiplied by adjustment factors to make DevTools' emulation more accurate.\n   * This value represents the RTT value *before* the adjustment factor is applied.\n   * @see https://docs.google.com/document/d/10lfVdS1iDWCRKQXPfbxEn4Or99D64mvNlugP1AQuFlE/edit for historical context.\n   */\n  targetLatency?: number;\n}\n\nexport interface Message {\n  message: string;\n  requestId: string;\n  warning: boolean;\n}\n\nexport interface InterceptionPattern {\n  urlPattern: string;\n  requestStage: Protocol.Fetch.RequestStage;\n}\n\nexport type RequestInterceptor = (request: InterceptedRequest) => Promise<void>;\n\nexport interface RequestUpdateDroppedEventData {\n  url: Platform.DevToolsPath.UrlString;\n  frameId: Protocol.Page.FrameId|null;\n  loaderId: Protocol.Network.LoaderId;\n  resourceType: Protocol.Network.ResourceType;\n  mimeType: string;\n  lastModified: Date|null;\n}\n\n/**\n * For the given Round Trip Time (in MilliSeconds), return the best throttling conditions.\n */\nexport function getRecommendedNetworkPreset(rtt: number): Conditions|null {\n  const RTT_COMPARISON_THRESHOLD = 200;\n  const RTT_MINIMUM = 60;\n\n  if (!Number.isFinite(rtt)) {\n    return null;\n  }\n\n  if (rtt < RTT_MINIMUM) {\n    return null;\n  }\n\n  // We pick from the set of presets in the panel but do not want to allow\n  // the \"No Throttling\" option to be picked.\n  const presets = THROTTLING_CONDITIONS_LOOKUP.values()\n                      .filter(condition => {\n                        return condition !== NoThrottlingConditions;\n                      })\n                      .toArray();\n\n  let closestPreset: Conditions|null = null;\n  let smallestDiff = Infinity;\n  for (const preset of presets) {\n    const {targetLatency} = preset;\n    if (!targetLatency) {\n      continue;\n    }\n\n    const diff = Math.abs(targetLatency - rtt);\n    if (diff > RTT_COMPARISON_THRESHOLD) {\n      continue;\n    }\n\n    if (smallestDiff < diff) {\n      continue;\n    }\n\n    closestPreset = preset;\n    smallestDiff = diff;\n  }\n\n  return closestPreset;\n}\n"]}