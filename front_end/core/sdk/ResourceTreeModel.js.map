{"version":3,"file":"ResourceTreeModel.js","sourceRoot":"","sources":["../../../../../../front_end/core/sdk/ResourceTreeModel.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright 2011 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport type * as ProtocolProxyApi from '../../generated/protocol-proxy-api.js';\nimport * as Protocol from '../../generated/protocol.js';\nimport * as Common from '../common/common.js';\nimport * as i18n from '../i18n/i18n.js';\nimport * as Platform from '../platform/platform.js';\n\nimport {type DeferredDOMNode, DOMModel, type DOMNode} from './DOMModel.js';\nimport {FrameManager} from './FrameManager.js';\nimport {Events as NetworkManagerEvents, NetworkManager, type RequestUpdateDroppedEventData} from './NetworkManager.js';\nimport type {NetworkRequest} from './NetworkRequest.js';\nimport {Resource} from './Resource.js';\nimport {ExecutionContext, RuntimeModel} from './RuntimeModel.js';\nimport {SDKModel} from './SDKModel.js';\nimport {SecurityOriginManager} from './SecurityOriginManager.js';\nimport {StorageKeyManager} from './StorageKeyManager.js';\nimport {Capability, type Target, Type} from './Target.js';\nimport {TargetManager} from './TargetManager.js';\n\nexport class ResourceTreeModel extends SDKModel<EventTypes> {\n  readonly agent: ProtocolProxyApi.PageApi;\n  readonly storageAgent: ProtocolProxyApi.StorageApi;\n  readonly #securityOriginManager: SecurityOriginManager;\n  readonly #storageKeyManager: StorageKeyManager;\n  readonly framesInternal = new Map<string, ResourceTreeFrame>();\n  #cachedResourcesProcessed = false;\n  #pendingReloadOptions: {\n    ignoreCache: (boolean|undefined),\n    scriptToEvaluateOnLoad: (string|undefined),\n  }|null = null;\n  #reloadSuspensionCount = 0;\n  isInterstitialShowing = false;\n  mainFrame: ResourceTreeFrame|null = null;\n  #pendingBackForwardCacheNotUsedEvents = new Set<Protocol.Page.BackForwardCacheNotUsedEvent>();\n\n  constructor(target: Target) {\n    super(target);\n\n    const networkManager = target.model(NetworkManager);\n    if (networkManager) {\n      networkManager.addEventListener(NetworkManagerEvents.RequestFinished, this.onRequestFinished, this);\n      networkManager.addEventListener(NetworkManagerEvents.RequestUpdateDropped, this.onRequestUpdateDropped, this);\n    }\n    this.agent = target.pageAgent();\n    this.storageAgent = target.storageAgent();\n    void this.agent.invoke_enable({});\n    this.#securityOriginManager = (target.model(SecurityOriginManager) as SecurityOriginManager);\n    this.#storageKeyManager = (target.model(StorageKeyManager) as StorageKeyManager);\n    target.registerPageDispatcher(new PageDispatcher(this));\n\n    void this.#buildResourceTree();\n  }\n\n  async #buildResourceTree(): Promise<void> {\n    return await this.agent.invoke_getResourceTree().then(event => {\n      this.processCachedResources(event.getError() ? null : event.frameTree);\n      if (this.mainFrame) {\n        this.processPendingEvents(this.mainFrame);\n      }\n    });\n  }\n\n  static frameForRequest(request: NetworkRequest): ResourceTreeFrame|null {\n    const networkManager = NetworkManager.forRequest(request);\n    const resourceTreeModel = networkManager ? networkManager.target().model(ResourceTreeModel) : null;\n    if (!resourceTreeModel) {\n      return null;\n    }\n    return request.frameId ? resourceTreeModel.frameForId(request.frameId) : null;\n  }\n\n  static frames(): ResourceTreeFrame[] {\n    const result = [];\n    for (const resourceTreeModel of TargetManager.instance().models(ResourceTreeModel)) {\n      result.push(...resourceTreeModel.frames());\n    }\n    return result;\n  }\n\n  static resourceForURL(url: Platform.DevToolsPath.UrlString): Resource|null {\n    for (const resourceTreeModel of TargetManager.instance().models(ResourceTreeModel)) {\n      const mainFrame = resourceTreeModel.mainFrame;\n      // Workers call into this with no #frames available.\n      const result = mainFrame ? mainFrame.resourceForURL(url) : null;\n      if (result) {\n        return result;\n      }\n    }\n    return null;\n  }\n\n  static reloadAllPages(bypassCache?: boolean, scriptToEvaluateOnLoad?: string): void {\n    for (const resourceTreeModel of TargetManager.instance().models(ResourceTreeModel)) {\n      if (resourceTreeModel.target().parentTarget()?.type() !== Type.FRAME) {\n        resourceTreeModel.reloadPage(bypassCache, scriptToEvaluateOnLoad);\n      }\n    }\n  }\n\n  async storageKeyForFrame(frameId: Protocol.Page.FrameId): Promise<string|null> {\n    if (!this.framesInternal.has(frameId)) {\n      return null;\n    }\n\n    // TODO(crbug.com/445966299): Refactor to use `storageAgent().invoke_getStorageKey()` instead.\n    const response = await this.storageAgent.invoke_getStorageKey({frameId});\n    if (response.getError() === 'Frame tree node for given frame not found') {\n      return null;\n    }\n    return response.storageKey;\n  }\n\n  domModel(): DOMModel {\n    return this.target().model(DOMModel) as DOMModel;\n  }\n\n  private processCachedResources(mainFramePayload: Protocol.Page.FrameResourceTree|null): void {\n    // TODO(caseq): the url check below is a mergeable, conservative\n    // workaround for a problem caused by us requesting resources from a\n    // subtarget frame before it has committed. The proper fix is likely\n    // to be too complicated to be safely merged.\n    // See https://crbug.com/1081270 for details.\n    if (mainFramePayload && mainFramePayload.frame.url !== ':') {\n      this.dispatchEventToListeners(Events.WillLoadCachedResources);\n      this.addFramesRecursively(null, mainFramePayload);\n      this.target().setInspectedURL(mainFramePayload.frame.url as Platform.DevToolsPath.UrlString);\n    }\n    this.#cachedResourcesProcessed = true;\n    const runtimeModel = this.target().model(RuntimeModel);\n    if (runtimeModel) {\n      runtimeModel.setExecutionContextComparator(this.executionContextComparator.bind(this));\n      runtimeModel.fireExecutionContextOrderChanged();\n    }\n    this.dispatchEventToListeners(Events.CachedResourcesLoaded, this);\n  }\n\n  cachedResourcesLoaded(): boolean {\n    return this.#cachedResourcesProcessed;\n  }\n\n  private addFrame(frame: ResourceTreeFrame, _aboutToNavigate?: boolean): void {\n    this.framesInternal.set(frame.id, frame);\n    if (frame.isMainFrame()) {\n      this.mainFrame = frame;\n    }\n    this.dispatchEventToListeners(Events.FrameAdded, frame);\n    this.updateSecurityOrigins();\n    void this.updateStorageKeys();\n  }\n\n  frameAttached(\n      frameId: Protocol.Page.FrameId, parentFrameId: Protocol.Page.FrameId|null,\n      stackTrace?: Protocol.Runtime.StackTrace): ResourceTreeFrame|null {\n    const sameTargetParentFrame = parentFrameId ? (this.framesInternal.get(parentFrameId) || null) : null;\n    // Do nothing unless cached resource tree is processed - it will overwrite everything.\n    if (!this.#cachedResourcesProcessed && sameTargetParentFrame) {\n      return null;\n    }\n    if (this.framesInternal.has(frameId)) {\n      return null;\n    }\n\n    const frame = new ResourceTreeFrame(this, sameTargetParentFrame, frameId, null, stackTrace || null);\n    if (parentFrameId && !sameTargetParentFrame) {\n      frame.crossTargetParentFrameId = parentFrameId;\n    }\n    if (frame.isMainFrame() && this.mainFrame) {\n      // Navigation to the new backend process.\n      this.frameDetached(this.mainFrame.id, false);\n    }\n    this.addFrame(frame, true);\n    return frame;\n  }\n\n  frameNavigated(framePayload: Protocol.Page.Frame, type: Protocol.Page.NavigationType|undefined): void {\n    const sameTargetParentFrame =\n        framePayload.parentId ? (this.framesInternal.get(framePayload.parentId) || null) : null;\n    // Do nothing unless cached resource tree is processed - it will overwrite everything.\n    if (!this.#cachedResourcesProcessed && sameTargetParentFrame) {\n      return;\n    }\n    let frame: (ResourceTreeFrame|null) = this.framesInternal.get(framePayload.id) || null;\n    if (!frame) {\n      // Simulate missed \"frameAttached\" for a main frame navigation to the new backend process.\n      frame = this.frameAttached(framePayload.id, framePayload.parentId || null);\n      console.assert(Boolean(frame));\n      if (!frame) {\n        return;\n      }\n    }\n\n    this.dispatchEventToListeners(Events.FrameWillNavigate, frame);\n    frame.navigate(framePayload);\n    if (type) {\n      frame.backForwardCacheDetails.restoredFromCache = type === Protocol.Page.NavigationType.BackForwardCacheRestore;\n    }\n    if (frame.isMainFrame()) {\n      this.target().setInspectedURL(frame.url);\n    }\n    this.dispatchEventToListeners(Events.FrameNavigated, frame);\n\n    if (frame.isPrimaryFrame()) {\n      this.primaryPageChanged(frame, PrimaryPageChangeType.NAVIGATION);\n    }\n\n    // Fill frame with retained resources (the ones loaded using new loader).\n    const resources = frame.resources();\n    for (let i = 0; i < resources.length; ++i) {\n      this.dispatchEventToListeners(Events.ResourceAdded, resources[i]);\n    }\n\n    this.updateSecurityOrigins();\n    void this.updateStorageKeys();\n\n    if (frame.backForwardCacheDetails.restoredFromCache) {\n      FrameManager.instance().modelRemoved(this);\n      FrameManager.instance().modelAdded(this);\n      void this.#buildResourceTree();\n    }\n  }\n\n  primaryPageChanged(frame: ResourceTreeFrame, type: PrimaryPageChangeType): void {\n    this.processPendingEvents(frame);\n    this.dispatchEventToListeners(Events.PrimaryPageChanged, {frame, type});\n    const networkManager = this.target().model(NetworkManager);\n    if (networkManager && frame.isOutermostFrame()) {\n      networkManager.clearRequests();\n    }\n  }\n\n  documentOpened(framePayload: Protocol.Page.Frame): void {\n    this.frameNavigated(framePayload, undefined);\n    const frame = this.framesInternal.get(framePayload.id);\n    if (frame && !frame.getResourcesMap().get(framePayload.url)) {\n      const frameResource = this.createResourceFromFramePayload(\n          framePayload, framePayload.url as Platform.DevToolsPath.UrlString, Common.ResourceType.resourceTypes.Document,\n          framePayload.mimeType, null, null);\n      frameResource.isGenerated = true;\n      frame.addResource(frameResource);\n    }\n  }\n\n  frameDetached(frameId: Protocol.Page.FrameId, isSwap: boolean): void {\n    // Do nothing unless cached resource tree is processed - it will overwrite everything.\n    if (!this.#cachedResourcesProcessed) {\n      return;\n    }\n\n    const frame = this.framesInternal.get(frameId);\n    if (!frame) {\n      return;\n    }\n\n    const sameTargetParentFrame = frame.sameTargetParentFrame();\n    if (sameTargetParentFrame) {\n      sameTargetParentFrame.removeChildFrame(frame, isSwap);\n    } else {\n      frame.remove(isSwap);\n    }\n    this.updateSecurityOrigins();\n    void this.updateStorageKeys();\n  }\n\n  private onRequestFinished(event: Common.EventTarget.EventTargetEvent<NetworkRequest>): void {\n    if (!this.#cachedResourcesProcessed) {\n      return;\n    }\n\n    const request = event.data;\n    if (request.failed) {\n      return;\n    }\n\n    const frame = request.frameId ? this.framesInternal.get(request.frameId) : null;\n    if (frame) {\n      frame.addRequest(request);\n    }\n  }\n\n  private onRequestUpdateDropped(event: Common.EventTarget.EventTargetEvent<RequestUpdateDroppedEventData>): void {\n    if (!this.#cachedResourcesProcessed) {\n      return;\n    }\n\n    const data = event.data;\n    const frameId = data.frameId;\n    if (!frameId) {\n      return;\n    }\n    const frame = this.framesInternal.get(frameId);\n    if (!frame) {\n      return;\n    }\n\n    const url = data.url;\n    if (frame.getResourcesMap().get(url)) {\n      return;\n    }\n\n    const resource = new Resource(\n        this, null, url, frame.url, frameId, data.loaderId, Common.ResourceType.resourceTypes[data.resourceType],\n        data.mimeType, data.lastModified, null);\n    frame.addResource(resource);\n  }\n\n  frameForId(frameId: Protocol.Page.FrameId): ResourceTreeFrame|null {\n    return this.framesInternal.get(frameId) || null;\n  }\n\n  forAllResources(callback: (arg0: Resource) => boolean): boolean {\n    if (this.mainFrame) {\n      return this.mainFrame.callForFrameResources(callback);\n    }\n    return false;\n  }\n\n  frames(): ResourceTreeFrame[] {\n    return [...this.framesInternal.values()];\n  }\n\n  private addFramesRecursively(\n      sameTargetParentFrame: ResourceTreeFrame|null, frameTreePayload: Protocol.Page.FrameResourceTree): void {\n    const framePayload = frameTreePayload.frame;\n    let frame = this.framesInternal.get(framePayload.id);\n    if (!frame) {\n      frame = new ResourceTreeFrame(this, sameTargetParentFrame, framePayload.id, framePayload, null);\n    }\n    if (!sameTargetParentFrame && framePayload.parentId) {\n      frame.crossTargetParentFrameId = framePayload.parentId;\n    }\n    this.addFrame(frame);\n\n    for (const childFrame of frameTreePayload.childFrames || []) {\n      this.addFramesRecursively(frame, childFrame);\n    }\n\n    for (let i = 0; i < frameTreePayload.resources.length; ++i) {\n      const subresource = frameTreePayload.resources[i];\n      const resource = this.createResourceFromFramePayload(\n          framePayload, subresource.url as Platform.DevToolsPath.UrlString,\n          Common.ResourceType.resourceTypes[subresource.type], subresource.mimeType, subresource.lastModified || null,\n          subresource.contentSize || null);\n      frame.addResource(resource);\n    }\n\n    if (!frame.getResourcesMap().get(framePayload.url)) {\n      const frameResource = this.createResourceFromFramePayload(\n          framePayload, framePayload.url as Platform.DevToolsPath.UrlString, Common.ResourceType.resourceTypes.Document,\n          framePayload.mimeType, null, null);\n      frame.addResource(frameResource);\n    }\n  }\n\n  private createResourceFromFramePayload(\n      frame: Protocol.Page.Frame, url: Platform.DevToolsPath.UrlString, type: Common.ResourceType.ResourceType,\n      mimeType: string, lastModifiedTime: number|null, contentSize: number|null): Resource {\n    const lastModified = typeof lastModifiedTime === 'number' ? new Date(lastModifiedTime * 1000) : null;\n    return new Resource(\n        this, null, url, frame.url as Platform.DevToolsPath.UrlString, frame.id, frame.loaderId, type, mimeType,\n        lastModified, contentSize);\n  }\n\n  suspendReload(): void {\n    this.#reloadSuspensionCount++;\n  }\n\n  resumeReload(): void {\n    this.#reloadSuspensionCount--;\n    console.assert(this.#reloadSuspensionCount >= 0, 'Unbalanced call to ResourceTreeModel.resumeReload()');\n    if (!this.#reloadSuspensionCount && this.#pendingReloadOptions) {\n      const {ignoreCache, scriptToEvaluateOnLoad} = this.#pendingReloadOptions;\n      this.reloadPage(ignoreCache, scriptToEvaluateOnLoad);\n    }\n  }\n\n  reloadPage(ignoreCache?: boolean, scriptToEvaluateOnLoad?: string): void {\n    const loaderId = this.mainFrame?.loaderId;\n    if (!loaderId) {\n      return;\n    }\n    // Only dispatch PageReloadRequested upon first reload request to simplify client logic.\n    if (!this.#pendingReloadOptions) {\n      this.dispatchEventToListeners(Events.PageReloadRequested, this);\n    }\n    if (this.#reloadSuspensionCount) {\n      this.#pendingReloadOptions = {ignoreCache, scriptToEvaluateOnLoad};\n      return;\n    }\n    this.#pendingReloadOptions = null;\n    const networkManager = this.target().model(NetworkManager);\n    if (networkManager) {\n      networkManager.clearRequests();\n    }\n    this.dispatchEventToListeners(Events.WillReloadPage);\n    void this.agent.invoke_reload({ignoreCache, scriptToEvaluateOnLoad, loaderId});\n  }\n\n  navigate(url: Platform.DevToolsPath.UrlString): Promise<Protocol.Page.NavigateResponse> {\n    return this.agent.invoke_navigate({url});\n  }\n\n  async navigationHistory(): Promise<{\n    currentIndex: number,\n    entries: Protocol.Page.NavigationEntry[],\n  }|null> {\n    const response = await this.agent.invoke_getNavigationHistory();\n    if (response.getError()) {\n      return null;\n    }\n    return {currentIndex: response.currentIndex, entries: response.entries};\n  }\n\n  navigateToHistoryEntry(entry: Protocol.Page.NavigationEntry): void {\n    void this.agent.invoke_navigateToHistoryEntry({entryId: entry.id});\n  }\n\n  setLifecycleEventsEnabled(enabled: boolean): Promise<Protocol.ProtocolResponseWithError> {\n    return this.agent.invoke_setLifecycleEventsEnabled({enabled});\n  }\n\n  async fetchAppManifest(): Promise<{\n    url: Platform.DevToolsPath.UrlString,\n    data: string|null,\n    errors: Protocol.Page.AppManifestError[],\n  }> {\n    const response = await this.agent.invoke_getAppManifest({});\n    if (response.getError()) {\n      return {url: response.url as Platform.DevToolsPath.UrlString, data: null, errors: []};\n    }\n    return {url: response.url as Platform.DevToolsPath.UrlString, data: response.data || null, errors: response.errors};\n  }\n\n  async getInstallabilityErrors(): Promise<Protocol.Page.InstallabilityError[]> {\n    const response = await this.agent.invoke_getInstallabilityErrors();\n    return response.installabilityErrors || [];\n  }\n\n  async getAppId(): Promise<Protocol.Page.GetAppIdResponse> {\n    return await this.agent.invoke_getAppId();\n  }\n\n  private executionContextComparator(a: ExecutionContext, b: ExecutionContext): number {\n    function framePath(frame: ResourceTreeFrame|null): ResourceTreeFrame[] {\n      let currentFrame: (ResourceTreeFrame|null) = frame;\n      const parents = [];\n      while (currentFrame) {\n        parents.push(currentFrame);\n        currentFrame = currentFrame.sameTargetParentFrame();\n      }\n      return parents.reverse();\n    }\n\n    if (a.target() !== b.target()) {\n      return ExecutionContext.comparator(a, b);\n    }\n\n    const framesA = a.frameId ? framePath(this.frameForId(a.frameId)) : [];\n    const framesB = b.frameId ? framePath(this.frameForId(b.frameId)) : [];\n    let frameA;\n    let frameB;\n    for (let i = 0;; i++) {\n      if (!framesA[i] || !framesB[i] || (framesA[i] !== framesB[i])) {\n        frameA = framesA[i];\n        frameB = framesB[i];\n        break;\n      }\n    }\n    if (!frameA && frameB) {\n      return -1;\n    }\n\n    if (!frameB && frameA) {\n      return 1;\n    }\n\n    if (frameA && frameB) {\n      return frameA.id.localeCompare(frameB.id);\n    }\n\n    return ExecutionContext.comparator(a, b);\n  }\n\n  private getSecurityOriginData(): SecurityOriginData {\n    const securityOrigins = new Set<string>();\n\n    let mainSecurityOrigin: string|null = null;\n    let unreachableMainSecurityOrigin: string|null = null;\n    for (const frame of this.framesInternal.values()) {\n      const origin = frame.securityOrigin;\n      if (!origin) {\n        continue;\n      }\n\n      securityOrigins.add(origin);\n      if (frame.isMainFrame()) {\n        mainSecurityOrigin = origin;\n        if (frame.unreachableUrl()) {\n          const unreachableParsed = new Common.ParsedURL.ParsedURL(frame.unreachableUrl());\n          unreachableMainSecurityOrigin = unreachableParsed.securityOrigin();\n        }\n      }\n    }\n    return {\n      securityOrigins,\n      mainSecurityOrigin,\n      unreachableMainSecurityOrigin,\n    };\n  }\n\n  private async getStorageKeyData(): Promise<StorageKeyData> {\n    const storageKeys = new Set<string>();\n    let mainStorageKey: string|null = null;\n\n    for (const {isMainFrame, storageKey} of await Promise.all([...this.framesInternal.values()].map(\n             f => f.getStorageKey(/* forceFetch */ false).then(k => ({\n                                                                 isMainFrame: f.isMainFrame(),\n                                                                 storageKey: k,\n                                                               }))))) {\n      if (isMainFrame) {\n        mainStorageKey = storageKey;\n      }\n      if (storageKey) {\n        storageKeys.add(storageKey);\n      }\n    }\n\n    return {storageKeys, mainStorageKey};\n  }\n\n  private updateSecurityOrigins(): void {\n    const data = this.getSecurityOriginData();\n    this.#securityOriginManager.setMainSecurityOrigin(\n        data.mainSecurityOrigin || '', data.unreachableMainSecurityOrigin || '');\n    this.#securityOriginManager.updateSecurityOrigins(data.securityOrigins);\n  }\n\n  private async updateStorageKeys(): Promise<void> {\n    const data = await this.getStorageKeyData();\n    this.#storageKeyManager.setMainStorageKey(data.mainStorageKey || '');\n    this.#storageKeyManager.updateStorageKeys(data.storageKeys);\n  }\n\n  async getMainStorageKey(): Promise<string|null> {\n    return this.mainFrame ? await this.mainFrame.getStorageKey(/* forceFetch */ false) : null;\n  }\n\n  getMainSecurityOrigin(): string|null {\n    const data = this.getSecurityOriginData();\n    return data.mainSecurityOrigin || data.unreachableMainSecurityOrigin;\n  }\n\n  onBackForwardCacheNotUsed(event: Protocol.Page.BackForwardCacheNotUsedEvent): void {\n    if (this.mainFrame && this.mainFrame.id === event.frameId && this.mainFrame.loaderId === event.loaderId) {\n      this.mainFrame.setBackForwardCacheDetails(event);\n      this.dispatchEventToListeners(Events.BackForwardCacheDetailsUpdated, this.mainFrame);\n    } else {\n      this.#pendingBackForwardCacheNotUsedEvents.add(event);\n    }\n  }\n\n  processPendingEvents(frame: ResourceTreeFrame): void {\n    if (!frame.isMainFrame()) {\n      return;\n    }\n    for (const event of this.#pendingBackForwardCacheNotUsedEvents) {\n      if (frame.id === event.frameId && frame.loaderId === event.loaderId) {\n        frame.setBackForwardCacheDetails(event);\n        this.#pendingBackForwardCacheNotUsedEvents.delete(event);\n        break;\n      }\n    }\n    // No need to dispatch events here as this method call is followed by a `PrimaryPageChanged` event.\n  }\n}\n\nexport enum Events {\n  /* eslint-disable @typescript-eslint/naming-convention -- Used by web_tests. */\n  FrameAdded = 'FrameAdded',\n  FrameNavigated = 'FrameNavigated',\n  FrameDetached = 'FrameDetached',\n  FrameResized = 'FrameResized',\n  FrameWillNavigate = 'FrameWillNavigate',\n  PrimaryPageChanged = 'PrimaryPageChanged',\n  ResourceAdded = 'ResourceAdded',\n  WillLoadCachedResources = 'WillLoadCachedResources',\n  CachedResourcesLoaded = 'CachedResourcesLoaded',\n  DOMContentLoaded = 'DOMContentLoaded',\n  LifecycleEvent = 'LifecycleEvent',\n  Load = 'Load',\n  PageReloadRequested = 'PageReloadRequested',\n  WillReloadPage = 'WillReloadPage',\n  InterstitialShown = 'InterstitialShown',\n  InterstitialHidden = 'InterstitialHidden',\n  BackForwardCacheDetailsUpdated = 'BackForwardCacheDetailsUpdated',\n  JavaScriptDialogOpening = 'JavaScriptDialogOpening',\n  /* eslint-enable @typescript-eslint/naming-convention */\n}\n\nexport interface EventTypes {\n  [Events.FrameAdded]: ResourceTreeFrame;\n  [Events.FrameNavigated]: ResourceTreeFrame;\n  [Events.FrameDetached]: {frame: ResourceTreeFrame, isSwap: boolean};\n  [Events.FrameResized]: void;\n  [Events.FrameWillNavigate]: ResourceTreeFrame;\n  [Events.PrimaryPageChanged]: {frame: ResourceTreeFrame, type: PrimaryPageChangeType};\n  [Events.ResourceAdded]: Resource;\n  [Events.WillLoadCachedResources]: void;\n  [Events.CachedResourcesLoaded]: ResourceTreeModel;\n  [Events.DOMContentLoaded]: number;\n  [Events.LifecycleEvent]: {frameId: Protocol.Page.FrameId, name: string};\n  [Events.Load]: {resourceTreeModel: ResourceTreeModel, loadTime: number};\n  [Events.PageReloadRequested]: ResourceTreeModel;\n  [Events.WillReloadPage]: void;\n  [Events.InterstitialShown]: void;\n  [Events.InterstitialHidden]: void;\n  [Events.BackForwardCacheDetailsUpdated]: ResourceTreeFrame;\n  [Events.JavaScriptDialogOpening]: Protocol.Page.JavascriptDialogOpeningEvent;\n}\n\nexport class ResourceTreeFrame {\n  #model: ResourceTreeModel;\n  #sameTargetParentFrame: ResourceTreeFrame|null;\n  readonly #id: Protocol.Page.FrameId;\n  crossTargetParentFrameId: string|null = null;\n  #loaderId: Protocol.Network.LoaderId;\n  #name: string|null|undefined;\n  #url: Platform.DevToolsPath.UrlString;\n  #domainAndRegistry: string;\n  #securityOrigin: string|null;\n  #securityOriginDetails?: Protocol.Page.SecurityOriginDetails;\n  #storageKey?: Promise<string|null>;\n  #unreachableUrl: Platform.DevToolsPath.UrlString;\n  #adFrameStatus?: Protocol.Page.AdFrameStatus;\n  #secureContextType: Protocol.Page.SecureContextType|null;\n  #crossOriginIsolatedContextType: Protocol.Page.CrossOriginIsolatedContextType|null;\n  #gatedAPIFeatures: Protocol.Page.GatedAPIFeatures[]|null;\n  #creationStackTrace: Protocol.Runtime.StackTrace|null;\n  #creationStackTraceTarget: Target|null = null;\n  #childFrames = new Set<ResourceTreeFrame>();\n  resourcesMap = new Map<Platform.DevToolsPath.UrlString, Resource>();\n  backForwardCacheDetails: {\n    restoredFromCache: boolean|undefined,\n    explanations: Protocol.Page.BackForwardCacheNotRestoredExplanation[],\n    explanationsTree: Protocol.Page.BackForwardCacheNotRestoredExplanationTree|undefined,\n  } = {\n    restoredFromCache: undefined,\n    explanations: [],\n    explanationsTree: undefined,\n  };\n\n  constructor(\n      model: ResourceTreeModel, parentFrame: ResourceTreeFrame|null, frameId: Protocol.Page.FrameId,\n      payload: Protocol.Page.Frame|null, creationStackTrace: Protocol.Runtime.StackTrace|null) {\n    this.#model = model;\n    this.#sameTargetParentFrame = parentFrame;\n    this.#id = frameId;\n\n    this.#loaderId = payload?.loaderId ?? '' as Protocol.Network.LoaderId;\n    this.#name = payload?.name;\n    this.#url = payload && payload.url as Platform.DevToolsPath.UrlString || Platform.DevToolsPath.EmptyUrlString;\n    this.#domainAndRegistry = (payload?.domainAndRegistry) || '';\n    this.#securityOrigin = payload?.securityOrigin ?? null;\n    this.#securityOriginDetails = payload?.securityOriginDetails;\n    this.#unreachableUrl =\n        (payload && payload.unreachableUrl as Platform.DevToolsPath.UrlString) || Platform.DevToolsPath.EmptyUrlString;\n    this.#adFrameStatus = payload?.adFrameStatus;\n    this.#secureContextType = payload?.secureContextType ?? null;\n    this.#crossOriginIsolatedContextType = payload?.crossOriginIsolatedContextType ?? null;\n    this.#gatedAPIFeatures = payload?.gatedAPIFeatures ?? null;\n\n    this.#creationStackTrace = creationStackTrace;\n\n    if (this.#sameTargetParentFrame) {\n      this.#sameTargetParentFrame.#childFrames.add(this);\n    }\n  }\n\n  isSecureContext(): boolean {\n    return this.#secureContextType !== null && this.#secureContextType.startsWith('Secure');\n  }\n\n  getSecureContextType(): Protocol.Page.SecureContextType|null {\n    return this.#secureContextType;\n  }\n\n  isCrossOriginIsolated(): boolean {\n    return this.#crossOriginIsolatedContextType !== null && this.#crossOriginIsolatedContextType.startsWith('Isolated');\n  }\n\n  getCrossOriginIsolatedContextType(): Protocol.Page.CrossOriginIsolatedContextType|null {\n    return this.#crossOriginIsolatedContextType;\n  }\n\n  getGatedAPIFeatures(): Protocol.Page.GatedAPIFeatures[]|null {\n    return this.#gatedAPIFeatures;\n  }\n\n  getCreationStackTraceData():\n      {creationStackTrace: Protocol.Runtime.StackTrace|null, creationStackTraceTarget: Target} {\n    return {\n      creationStackTrace: this.#creationStackTrace,\n      creationStackTraceTarget: this.#creationStackTraceTarget || this.resourceTreeModel().target(),\n    };\n  }\n\n  navigate(framePayload: Protocol.Page.Frame): void {\n    this.#loaderId = framePayload.loaderId;\n    this.#name = framePayload.name;\n    this.#url = framePayload.url as Platform.DevToolsPath.UrlString;\n    this.#domainAndRegistry = framePayload.domainAndRegistry;\n    this.#securityOrigin = framePayload.securityOrigin;\n    this.#securityOriginDetails = framePayload.securityOriginDetails;\n    void this.getStorageKey(/* forceFetch */ true);\n    this.#unreachableUrl =\n        framePayload.unreachableUrl as Platform.DevToolsPath.UrlString || Platform.DevToolsPath.EmptyUrlString;\n    this.#adFrameStatus = framePayload?.adFrameStatus;\n    this.#secureContextType = framePayload.secureContextType;\n    this.#crossOriginIsolatedContextType = framePayload.crossOriginIsolatedContextType;\n    this.#gatedAPIFeatures = framePayload.gatedAPIFeatures;\n    this.backForwardCacheDetails = {\n      restoredFromCache: undefined,\n      explanations: [],\n      explanationsTree: undefined,\n    };\n\n    const mainResource = this.resourcesMap.get(this.#url);\n    this.resourcesMap.clear();\n    this.removeChildFrames();\n    if (mainResource && mainResource.loaderId === this.#loaderId) {\n      this.addResource(mainResource);\n    }\n  }\n\n  resourceTreeModel(): ResourceTreeModel {\n    return this.#model;\n  }\n\n  get id(): Protocol.Page.FrameId {\n    return this.#id;\n  }\n\n  get name(): string {\n    return this.#name || '';\n  }\n\n  get url(): Platform.DevToolsPath.UrlString {\n    return this.#url;\n  }\n\n  domainAndRegistry(): string {\n    return this.#domainAndRegistry;\n  }\n\n  async getAdScriptAncestry(frameId: Protocol.Page.FrameId): Promise<Protocol.Page.AdScriptAncestry|null> {\n    const res = await this.#model.agent.invoke_getAdScriptAncestry({frameId});\n    return res.adScriptAncestry || null;\n  }\n\n  get securityOrigin(): string|null {\n    return this.#securityOrigin;\n  }\n\n  get securityOriginDetails(): Protocol.Page.SecurityOriginDetails|null {\n    return this.#securityOriginDetails ?? null;\n  }\n\n  getStorageKey(forceFetch: boolean): Promise<string|null> {\n    if (!this.#storageKey || forceFetch) {\n      this.#storageKey = this.#model.storageKeyForFrame(this.#id);\n    }\n    return this.#storageKey;\n  }\n\n  unreachableUrl(): Platform.DevToolsPath.UrlString {\n    return this.#unreachableUrl;\n  }\n\n  get loaderId(): Protocol.Network.LoaderId {\n    return this.#loaderId;\n  }\n\n  adFrameType(): Protocol.Page.AdFrameType {\n    return this.#adFrameStatus?.adFrameType || Protocol.Page.AdFrameType.None;\n  }\n\n  adFrameStatus(): Protocol.Page.AdFrameStatus|undefined {\n    return this.#adFrameStatus;\n  }\n\n  get childFrames(): ResourceTreeFrame[] {\n    return [...this.#childFrames];\n  }\n\n  /**\n   * Returns the parent frame if both #frames are part of the same process/target.\n   */\n  sameTargetParentFrame(): ResourceTreeFrame|null {\n    return this.#sameTargetParentFrame;\n  }\n\n  /**\n   * Returns the parent frame if both #frames are part of different processes/targets (child is an OOPIF).\n   */\n  crossTargetParentFrame(): ResourceTreeFrame|null {\n    if (!this.crossTargetParentFrameId) {\n      return null;\n    }\n    const parentTarget = this.#model.target().parentTarget();\n    if (parentTarget?.type() !== Type.FRAME) {\n      return null;\n    }\n    const parentModel = parentTarget.model(ResourceTreeModel);\n    if (!parentModel) {\n      return null;\n    }\n    // Note that parent #model has already processed cached resources:\n    // - when parent target was created, we issued getResourceTree call;\n    // - strictly after we issued setAutoAttach call;\n    // - both of them were handled in renderer in the same order;\n    // - cached resource tree got processed on parent #model;\n    // - child target was created as a result of setAutoAttach call.\n    return parentModel.framesInternal.get(this.crossTargetParentFrameId) || null;\n  }\n\n  /**\n   * Returns the parent frame. There is only 1 parent and it's either in the\n   * same target or it's cross-target.\n   */\n  parentFrame(): ResourceTreeFrame|null {\n    return this.sameTargetParentFrame() || this.crossTargetParentFrame();\n  }\n\n  /**\n   * Returns true if this is the main frame of its target. A main frame is the root of the frame tree i.e. a frame without\n   * a parent, but the whole frame tree could be embedded in another frame tree (e.g. OOPIFs, fenced frames, portals).\n   * https://chromium.googlesource.com/chromium/src/+/HEAD/docs/frame_trees.md\n   */\n  isMainFrame(): boolean {\n    return !this.#sameTargetParentFrame;\n  }\n\n  /**\n   * Returns true if this is a main frame which is not embedded in another frame tree. With MPArch features such as\n   * back/forward cache or prerender there can be multiple outermost frames.\n   * https://chromium.googlesource.com/chromium/src/+/HEAD/docs/frame_trees.md\n   */\n  isOutermostFrame(): boolean {\n    return this.#model.target().parentTarget()?.type() !== Type.FRAME && !this.#sameTargetParentFrame &&\n        !this.crossTargetParentFrameId;\n  }\n\n  /**\n   * Returns true if this is the primary frame of the browser tab. There can only be one primary frame for each\n   * browser tab. It is the outermost frame being actively displayed in the browser tab.\n   * https://chromium.googlesource.com/chromium/src/+/HEAD/docs/frame_trees.md\n   */\n  isPrimaryFrame(): boolean {\n    return !this.#sameTargetParentFrame && this.#model.target() === TargetManager.instance().primaryPageTarget();\n  }\n\n  removeChildFrame(frame: ResourceTreeFrame, isSwap: boolean): void {\n    this.#childFrames.delete(frame);\n    frame.remove(isSwap);\n  }\n\n  private removeChildFrames(): void {\n    const frames = this.#childFrames;\n    this.#childFrames = new Set();\n    for (const frame of frames) {\n      frame.remove(false);\n    }\n  }\n\n  remove(isSwap: boolean): void {\n    this.removeChildFrames();\n    this.#model.framesInternal.delete(this.id);\n    this.#model.dispatchEventToListeners(Events.FrameDetached, {frame: this, isSwap});\n  }\n\n  addResource(resource: Resource): void {\n    if (this.resourcesMap.get(resource.url) === resource) {\n      // Already in the tree, we just got an extra update.\n      return;\n    }\n    this.resourcesMap.set(resource.url, resource);\n    this.#model.dispatchEventToListeners(Events.ResourceAdded, resource);\n  }\n\n  addRequest(request: NetworkRequest): void {\n    let resource = this.resourcesMap.get(request.url());\n    if (resource && resource.request === request) {\n      // Already in the tree, we just got an extra update.\n      return;\n    }\n    resource = new Resource(\n        this.#model, request, request.url(), request.documentURL, request.frameId, request.loaderId,\n        request.resourceType(), request.mimeType, null, null);\n    this.resourcesMap.set(resource.url, resource);\n    this.#model.dispatchEventToListeners(Events.ResourceAdded, resource);\n  }\n\n  resources(): Resource[] {\n    return Array.from(this.resourcesMap.values());\n  }\n\n  resourceForURL(url: Platform.DevToolsPath.UrlString): Resource|null {\n    const resource = this.resourcesMap.get(url);\n    if (resource) {\n      return resource;\n    }\n    for (const frame of this.#childFrames) {\n      const resource = frame.resourceForURL(url);\n      if (resource) {\n        return resource;\n      }\n    }\n    return null;\n  }\n\n  callForFrameResources(callback: (arg0: Resource) => boolean): boolean {\n    for (const resource of this.resourcesMap.values()) {\n      if (callback(resource)) {\n        return true;\n      }\n    }\n\n    for (const frame of this.#childFrames) {\n      if (frame.callForFrameResources(callback)) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  displayName(): string {\n    if (this.isOutermostFrame()) {\n      return i18n.i18n.lockedString('top');\n    }\n    const subtitle = new Common.ParsedURL.ParsedURL(this.#url).displayName;\n    if (subtitle) {\n      if (!this.#name) {\n        return subtitle;\n      }\n      return this.#name + ' (' + subtitle + ')';\n    }\n    return i18n.i18n.lockedString('iframe');\n  }\n\n  async getOwnerDeferredDOMNode(): Promise<DeferredDOMNode|null> {\n    const parentFrame = this.parentFrame();\n    if (!parentFrame) {\n      return null;\n    }\n    return await parentFrame.resourceTreeModel().domModel().getOwnerNodeForFrame(this.#id);\n  }\n\n  async getOwnerDOMNodeOrDocument(): Promise<DOMNode|null> {\n    const deferredNode = await this.getOwnerDeferredDOMNode();\n    if (deferredNode) {\n      return await deferredNode.resolvePromise();\n    }\n    if (this.isOutermostFrame()) {\n      return await this.resourceTreeModel().domModel().requestDocument();\n    }\n    return null;\n  }\n\n  async highlight(): Promise<void> {\n    const parentFrame = this.parentFrame();\n    const parentTarget = this.resourceTreeModel().target().parentTarget();\n    const highlightFrameOwner = async(domModel: DOMModel): Promise<void> => {\n      const deferredNode = await domModel.getOwnerNodeForFrame(this.#id);\n      if (deferredNode) {\n        domModel.overlayModel().highlightInOverlay({deferredNode, selectorList: ''}, 'all', true);\n      }\n    };\n\n    if (parentFrame) {\n      return await highlightFrameOwner(parentFrame.resourceTreeModel().domModel());\n    }\n\n    // Fenced frames.\n    if (parentTarget?.type() === Type.FRAME) {\n      const domModel = parentTarget.model(DOMModel);\n      if (domModel) {\n        return await highlightFrameOwner(domModel);\n      }\n    }\n\n    // For the outermost frame there is no owner node. Highlight the whole #document instead.\n    const document = await this.resourceTreeModel().domModel().requestDocument();\n    if (document) {\n      this.resourceTreeModel().domModel().overlayModel().highlightInOverlay(\n          {node: document, selectorList: ''}, 'all', true);\n    }\n  }\n\n  async getPermissionsPolicyState(): Promise<Protocol.Page.PermissionsPolicyFeatureState[]|null> {\n    const response =\n        await this.resourceTreeModel().target().pageAgent().invoke_getPermissionsPolicyState({frameId: this.#id});\n    if (response.getError()) {\n      return null;\n    }\n    return response.states;\n  }\n\n  async getOriginTrials(): Promise<Protocol.Page.OriginTrial[]> {\n    const response = await this.resourceTreeModel().target().pageAgent().invoke_getOriginTrials({frameId: this.#id});\n    if (response.getError()) {\n      return [];\n    }\n    return response.originTrials;\n  }\n\n  setCreationStackTrace(creationStackTraceData: {\n    creationStackTrace: Protocol.Runtime.StackTrace|null,\n    creationStackTraceTarget: Target,\n  }): void {\n    this.#creationStackTrace = creationStackTraceData.creationStackTrace;\n    this.#creationStackTraceTarget = creationStackTraceData.creationStackTraceTarget;\n  }\n\n  setBackForwardCacheDetails(event: Protocol.Page.BackForwardCacheNotUsedEvent): void {\n    this.backForwardCacheDetails.restoredFromCache = false;\n    this.backForwardCacheDetails.explanations = event.notRestoredExplanations;\n    this.backForwardCacheDetails.explanationsTree = event.notRestoredExplanationsTree;\n  }\n\n  getResourcesMap(): Map<string, Resource> {\n    return this.resourcesMap;\n  }\n}\n\nexport class PageDispatcher implements ProtocolProxyApi.PageDispatcher {\n  #resourceTreeModel: ResourceTreeModel;\n  constructor(resourceTreeModel: ResourceTreeModel) {\n    this.#resourceTreeModel = resourceTreeModel;\n  }\n  backForwardCacheNotUsed(params: Protocol.Page.BackForwardCacheNotUsedEvent): void {\n    this.#resourceTreeModel.onBackForwardCacheNotUsed(params);\n  }\n\n  domContentEventFired({timestamp}: Protocol.Page.DomContentEventFiredEvent): void {\n    this.#resourceTreeModel.dispatchEventToListeners(Events.DOMContentLoaded, timestamp);\n  }\n\n  loadEventFired({timestamp}: Protocol.Page.LoadEventFiredEvent): void {\n    this.#resourceTreeModel.dispatchEventToListeners(\n        Events.Load, {resourceTreeModel: this.#resourceTreeModel, loadTime: timestamp});\n  }\n\n  lifecycleEvent({frameId, name}: Protocol.Page.LifecycleEventEvent): void {\n    this.#resourceTreeModel.dispatchEventToListeners(Events.LifecycleEvent, {frameId, name});\n  }\n\n  frameAttached({frameId, parentFrameId, stack}: Protocol.Page.FrameAttachedEvent): void {\n    this.#resourceTreeModel.frameAttached(frameId, parentFrameId, stack);\n  }\n\n  frameNavigated({frame, type}: Protocol.Page.FrameNavigatedEvent): void {\n    this.#resourceTreeModel.frameNavigated(frame, type);\n  }\n\n  documentOpened({frame}: Protocol.Page.DocumentOpenedEvent): void {\n    this.#resourceTreeModel.documentOpened(frame);\n  }\n\n  frameDetached({frameId, reason}: Protocol.Page.FrameDetachedEvent): void {\n    this.#resourceTreeModel.frameDetached(frameId, reason === Protocol.Page.FrameDetachedEventReason.Swap);\n  }\n\n  frameSubtreeWillBeDetached(_params: Protocol.Page.FrameSubtreeWillBeDetachedEvent): void {\n  }\n\n  frameStartedLoading({}: Protocol.Page.FrameStartedLoadingEvent): void {\n  }\n\n  frameStoppedLoading({}: Protocol.Page.FrameStoppedLoadingEvent): void {\n  }\n\n  frameRequestedNavigation({}: Protocol.Page.FrameRequestedNavigationEvent): void {\n  }\n\n  frameScheduledNavigation({}: Protocol.Page.FrameScheduledNavigationEvent): void {\n  }\n\n  frameClearedScheduledNavigation({}: Protocol.Page.FrameClearedScheduledNavigationEvent): void {\n  }\n\n  frameStartedNavigating({}: Protocol.Page.FrameStartedNavigatingEvent): void {\n  }\n\n  navigatedWithinDocument({}: Protocol.Page.NavigatedWithinDocumentEvent): void {\n  }\n\n  frameResized(): void {\n    this.#resourceTreeModel.dispatchEventToListeners(Events.FrameResized);\n  }\n\n  javascriptDialogOpening(event: Protocol.Page.JavascriptDialogOpeningEvent): void {\n    this.#resourceTreeModel.dispatchEventToListeners(Events.JavaScriptDialogOpening, event);\n    if (!event.hasBrowserHandler) {\n      void this.#resourceTreeModel.agent.invoke_handleJavaScriptDialog({accept: false});\n    }\n  }\n\n  javascriptDialogClosed({}: Protocol.Page.JavascriptDialogClosedEvent): void {\n  }\n\n  screencastFrame({}: Protocol.Page.ScreencastFrameEvent): void {\n  }\n\n  screencastVisibilityChanged({}: Protocol.Page.ScreencastVisibilityChangedEvent): void {\n  }\n\n  interstitialShown(): void {\n    this.#resourceTreeModel.isInterstitialShowing = true;\n    this.#resourceTreeModel.dispatchEventToListeners(Events.InterstitialShown);\n  }\n\n  interstitialHidden(): void {\n    this.#resourceTreeModel.isInterstitialShowing = false;\n    this.#resourceTreeModel.dispatchEventToListeners(Events.InterstitialHidden);\n  }\n\n  windowOpen({}: Protocol.Page.WindowOpenEvent): void {\n  }\n\n  compilationCacheProduced({}: Protocol.Page.CompilationCacheProducedEvent): void {\n  }\n\n  fileChooserOpened({}: Protocol.Page.FileChooserOpenedEvent): void {\n  }\n\n  downloadWillBegin({}: Protocol.Page.DownloadWillBeginEvent): void {\n  }\n\n  downloadProgress(): void {\n  }\n}\n\nSDKModel.register(ResourceTreeModel, {capabilities: Capability.DOM, autostart: true, early: true});\nexport interface SecurityOriginData {\n  securityOrigins: Set<string>;\n  mainSecurityOrigin: string|null;\n  unreachableMainSecurityOrigin: string|null;\n}\n\nexport interface StorageKeyData {\n  storageKeys: Set<string>;\n  mainStorageKey: string|null;\n}\n\nexport const enum PrimaryPageChangeType {\n  NAVIGATION = 'Navigation',\n  ACTIVATION = 'Activation',\n}\n"]}