{
  "version": 3,
  "sources": ["../../../../../../front_end/core/sdk/SDKModel.ts", "../../../../../../front_end/core/sdk/CSSMetadata.ts", "../../../../../../front_end/generated/SupportedCSSProperties.js", "../../../../../../front_end/core/sdk/NetworkRequest.ts", "../../../../../../front_end/core/sdk/CookieModel.ts", "../../../../../../front_end/core/sdk/Cookie.ts", "../../../../../../front_end/core/sdk/NetworkManager.ts", "../../../../../../front_end/core/sdk/TargetManager.ts", "../../../../../../front_end/core/sdk/Target.ts", "../../../../../../front_end/core/sdk/ResourceTreeModel.ts", "../../../../../../front_end/core/sdk/DOMModel.ts", "../../../../../../front_end/core/sdk/CSSModel.ts", "../../../../../../front_end/core/sdk/CSSFontFace.ts", "../../../../../../front_end/core/sdk/CSSMatchedStyles.ts", "../../../../../../front_end/core/sdk/CSSProperty.ts", "../../../../../../front_end/core/sdk/CSSPropertyParser.ts", "../../../../../../front_end/core/sdk/CSSPropertyParserMatchers.ts", "../../../../../../front_end/core/sdk/CSSRule.ts", "../../../../../../front_end/core/sdk/CSSContainerQuery.ts", "../../../../../../front_end/core/sdk/CSSQuery.ts", "../../../../../../front_end/core/sdk/CSSLayer.ts", "../../../../../../front_end/core/sdk/CSSMedia.ts", "../../../../../../front_end/core/sdk/CSSScope.ts", "../../../../../../front_end/core/sdk/CSSStartingStyle.ts", "../../../../../../front_end/core/sdk/CSSStyleDeclaration.ts", "../../../../../../front_end/core/sdk/CSSSupports.ts", "../../../../../../front_end/core/sdk/CSSStyleSheetHeader.ts", "../../../../../../front_end/core/sdk/SourceMapManager.ts", "../../../../../../front_end/core/sdk/PageResourceLoader.ts", "../../../../../../front_end/core/sdk/IOModel.ts", "../../../../../../front_end/core/sdk/RemoteObject.ts", "../../../../../../front_end/core/sdk/SourceMap.ts", "../../../../../../front_end/core/sdk/ScopeTreeCache.ts", "../../../../../../front_end/core/sdk/SourceMapFunctionRanges.ts", "../../../../../../front_end/core/sdk/SourceMapScopesInfo.ts", "../../../../../../front_end/core/sdk/SourceMapScopeChainEntry.ts", "../../../../../../front_end/core/sdk/SourceMapCache.ts", "../../../../../../front_end/core/sdk/FrameManager.ts", "../../../../../../front_end/core/sdk/OverlayModel.ts", "../../../../../../front_end/core/sdk/DebuggerModel.ts", "../../../../../../front_end/core/sdk/RuntimeModel.ts", "../../../../../../front_end/core/sdk/HeapProfilerModel.ts", "../../../../../../front_end/core/sdk/Script.ts", "../../../../../../front_end/core/sdk/OverlayPersistentHighlighter.ts", "../../../../../../front_end/core/sdk/OverlayColorGenerator.ts", "../../../../../../front_end/core/sdk/Resource.ts", "../../../../../../front_end/core/sdk/SecurityOriginManager.ts", "../../../../../../front_end/core/sdk/StorageKeyManager.ts", "../../../../../../front_end/core/sdk/CookieParser.ts", "../../../../../../front_end/core/sdk/HttpReasonPhraseStrings.ts", "../../../../../../front_end/core/sdk/ServerSentEvents.ts", "../../../../../../front_end/core/sdk/ServerSentEventsProtocol.ts", "../../../../../../front_end/core/sdk/ServerTiming.ts", "../../../../../../front_end/core/sdk/AccessibilityModel.ts", "../../../../../../front_end/core/sdk/AnimationModel.ts", "../../../../../../front_end/core/sdk/AutofillModel.ts", "../../../../../../front_end/core/sdk/CategorizedBreakpoint.ts", "../../../../../../front_end/core/sdk/ChildTargetManager.ts", "../../../../../../front_end/core/sdk/CompilerSourceMappingContentProvider.ts", "../../../../../../front_end/core/sdk/Connections.ts", "../../../../../../front_end/core/sdk/RehydratingConnection.ts", "../../../../../../front_end/core/sdk/EnhancedTracesParser.ts", "../../../../../../front_end/core/sdk/TraceObject.ts", "../../../../../../front_end/core/sdk/ConsoleModel.ts", "../../../../../../front_end/core/sdk/ConsoleModelTypes.ts", "../../../../../../front_end/core/sdk/CPUProfilerModel.ts", "../../../../../../front_end/core/sdk/LogModel.ts", "../../../../../../front_end/core/sdk/CPUThrottlingManager.ts", "../../../../../../front_end/core/sdk/EmulationModel.ts", "../../../../../../front_end/core/sdk/DOMDebuggerModel.ts", "../../../../../../front_end/core/sdk/EventBreakpointsModel.ts", "../../../../../../front_end/core/sdk/FrameAssociated.ts", "../../../../../../front_end/core/sdk/IsolateManager.ts", "../../../../../../front_end/core/sdk/IssuesModel.ts", "../../../../../../front_end/core/sdk/LayerTreeBase.ts", "../../../../../../front_end/core/sdk/PageLoad.ts", "../../../../../../front_end/core/sdk/PaintProfiler.ts", "../../../../../../front_end/core/sdk/PerformanceMetricsModel.ts", "../../../../../../front_end/core/sdk/PreloadingModel.ts", "../../../../../../front_end/core/common/MapWithDefault.ts", "../../../../../../front_end/core/sdk/ScreenCaptureModel.ts", "../../../../../../front_end/core/sdk/ServiceWorkerCacheModel.ts", "../../../../../../front_end/core/sdk/StorageBucketsModel.ts", "../../../../../../front_end/core/sdk/ServiceWorkerManager.ts", "../../../../../../front_end/core/sdk/WebAuthnModel.ts"],
  "sourcesContent": ["// Copyright 2019 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as Common from '../common/common.js';\n\nimport type {Target} from './Target.js';\n\nexport interface RegistrationInfo {\n  capabilities: number;\n  autostart: boolean;\n  early?: boolean;\n}\n\nexport type SDKModelConstructor<T extends SDKModel = SDKModel> = new (target: Target) => T;\n\nconst registeredModels = new Map<SDKModelConstructor, RegistrationInfo>();\n\n// TODO(crbug.com/1228674) Remove defaults for generic type parameters once\n//                         all event emitters and sinks have been migrated.\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport class SDKModel<Events = any> extends Common.ObjectWrapper.ObjectWrapper<Events> {\n  readonly #target: Target;\n\n  constructor(target: Target) {\n    super();\n    this.#target = target;\n  }\n\n  target(): Target {\n    return this.#target;\n  }\n\n  /**\n   * Override this method to perform tasks that are required to suspend the\n   * model and that still need other models in an unsuspended state.\n   */\n  async preSuspendModel(_reason?: string): Promise<void> {\n  }\n\n  async suspendModel(_reason?: string): Promise<void> {\n  }\n\n  async resumeModel(): Promise<void> {\n  }\n\n  /**\n   * Override this method to perform tasks that are required to after resuming\n   * the model and that require all models already in an unsuspended state.\n   */\n  async postResumeModel(): Promise<void> {\n  }\n\n  dispose(): void {\n  }\n\n  static register(modelClass: SDKModelConstructor, registrationInfo: RegistrationInfo): void {\n    if (registrationInfo.early && !registrationInfo.autostart) {\n      throw new Error(`Error registering model ${modelClass.name}: early models must be autostarted.`);\n    }\n    registeredModels.set(modelClass, registrationInfo);\n  }\n\n  static get registeredModels(): typeof registeredModels {\n    return registeredModels;\n  }\n}\n", "// Copyright 2021 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\n/*\n * Copyright (C) 2010 Nikita Vasilyev. All rights reserved.\n * Copyright (C) 2010 Joseph Pecoraro. All rights reserved.\n * Copyright (C) 2010 Google Inc. All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are\n * met:\n *\n *     * Redistributions of source code must retain the above copyright\n * notice, this list of conditions and the following disclaimer.\n *     * Redistributions in binary form must reproduce the above\n * copyright notice, this list of conditions and the following disclaimer\n * in the documentation and/or other materials provided with the\n * distribution.\n *     * Neither the #name of Google Inc. nor the names of its\n * contributors may be used to endorse or promote products derived from\n * this software without specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n * \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n * A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n * OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n * THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\nimport * as Protocol from '../../generated/protocol.js';\nimport * as SupportedCSSProperties from '../../generated/SupportedCSSProperties.js';\nimport * as Common from '../common/common.js';\n\nexport class CSSMetadata {\n  readonly #values: string[] = [];\n  readonly #longhands = new Map<string, string[]>();\n  readonly #shorthands = new Map<string, string[]>();\n  readonly #inherited = new Set<string>();\n  readonly #svgProperties = new Set<string>();\n  readonly #propertyValues = new Map<string, string[]>();\n  readonly #aliasesFor = new Map<string, string>();\n  readonly #nameValuePresets: string[] = [];\n  readonly #nameValuePresetsIncludingSVG: string[] = [];\n  #valuesSet: Set<string>;\n\n  constructor(properties: CSSPropertyDefinition[], aliasesFor: Map<string, string>) {\n    this.#aliasesFor = aliasesFor;\n    for (let i = 0; i < properties.length; ++i) {\n      const property = properties[i];\n      const propertyName = property.name;\n      if (!CSS.supports(propertyName, 'initial')) {\n        continue;\n      }\n      this.#values.push(propertyName);\n\n      if (property.inherited) {\n        this.#inherited.add(propertyName);\n      }\n      if (property.svg) {\n        this.#svgProperties.add(propertyName);\n      }\n\n      const longhands = properties[i].longhands;\n      if (longhands) {\n        this.#longhands.set(propertyName, longhands);\n        for (let j = 0; j < longhands.length; ++j) {\n          const longhandName = longhands[j];\n          let shorthands = this.#shorthands.get(longhandName);\n          if (!shorthands) {\n            shorthands = [];\n            this.#shorthands.set(longhandName, shorthands);\n          }\n          shorthands.push(propertyName);\n        }\n      }\n    }\n    this.#values.sort(CSSMetadata.sortPrefixesAndCSSWideKeywordsToEnd);\n    this.#valuesSet = new Set(this.#values);\n\n    // Reads in auto-generated property names and #values from blink/public/renderer/core/css/css_properties.json5\n    // treats _generatedPropertyValues as basis\n    const propertyValueSets = new Map<string, Set<string>>();\n    for (const [propertyName, basisValueObj] of Object.entries(SupportedCSSProperties.generatedPropertyValues)) {\n      propertyValueSets.set(propertyName, new Set(basisValueObj.values));\n    }\n    // and add manually maintained map of extra prop-value pairs\n    for (const [propertyName, extraValues] of extraPropertyValues) {\n      const propertyValueSet = propertyValueSets.get(propertyName);\n      if (propertyValueSet) {\n        propertyValueSets.set(propertyName, propertyValueSet.union(extraValues));\n      } else {\n        propertyValueSets.set(propertyName, extraValues);\n      }\n    }\n    // finally add common keywords to value sets and convert property #values\n    // into arrays since callers expect arrays\n    for (const [propertyName, values] of propertyValueSets) {\n      for (const commonKeyword of CommonKeywords) {\n        if (!values.has(commonKeyword) && CSS.supports(propertyName, commonKeyword)) {\n          values.add(commonKeyword);\n        }\n      }\n\n      this.#propertyValues.set(propertyName, [...values]);\n    }\n\n    for (const name of this.#valuesSet) {\n      const values = this.specificPropertyValues(name)\n                         .filter(value => CSS.supports(name, value))\n                         .sort(CSSMetadata.sortPrefixesAndCSSWideKeywordsToEnd);\n      const presets = values.map(value => `${name}: ${value}`);\n      if (!this.isSVGProperty(name)) {\n        this.#nameValuePresets.push(...presets);\n      }\n      this.#nameValuePresetsIncludingSVG.push(...presets);\n    }\n  }\n\n  static isCSSWideKeyword(a: string): a is CSSWideKeyword {\n    return CSSWideKeywords.includes(a as CSSWideKeyword);\n  }\n\n  static isPositionTryOrderKeyword(a: string): a is PositionTryOrderKeyword {\n    return PositionTryOrderKeywords.includes(a as PositionTryOrderKeyword);\n  }\n\n  private static sortPrefixesAndCSSWideKeywordsToEnd(a: string, b: string): 1|- 1|0 {\n    const aIsCSSWideKeyword = CSSMetadata.isCSSWideKeyword(a);\n    const bIsCSSWideKeyword = CSSMetadata.isCSSWideKeyword(b);\n\n    if (aIsCSSWideKeyword && !bIsCSSWideKeyword) {\n      return 1;\n    }\n    if (!aIsCSSWideKeyword && bIsCSSWideKeyword) {\n      return -1;\n    }\n\n    const aIsPrefixed = a.startsWith('-webkit-');\n    const bIsPrefixed = b.startsWith('-webkit-');\n    if (aIsPrefixed && !bIsPrefixed) {\n      return 1;\n    }\n    if (!aIsPrefixed && bIsPrefixed) {\n      return -1;\n    }\n    return a < b ? -1 : (a > b ? 1 : 0);\n  }\n\n  allProperties(): string[] {\n    return this.#values;\n  }\n\n  aliasesFor(): Map<string, string> {\n    return this.#aliasesFor;\n  }\n\n  nameValuePresets(includeSVG?: boolean): string[] {\n    return includeSVG ? this.#nameValuePresetsIncludingSVG : this.#nameValuePresets;\n  }\n\n  isSVGProperty(name: string): boolean {\n    name = name.toLowerCase();\n    return this.#svgProperties.has(name);\n  }\n\n  getLonghands(shorthand: string): string[]|null {\n    return this.#longhands.get(shorthand) || null;\n  }\n\n  getShorthands(longhand: string): string[]|null {\n    return this.#shorthands.get(longhand) || null;\n  }\n\n  isColorAwareProperty(propertyName: string): boolean {\n    return colorAwareProperties.has(propertyName.toLowerCase()) || this.isCustomProperty(propertyName.toLowerCase());\n  }\n\n  isFontFamilyProperty(propertyName: string): boolean {\n    return propertyName.toLowerCase() === 'font-family';\n  }\n\n  isAngleAwareProperty(propertyName: string): boolean {\n    const lowerCasedName = propertyName.toLowerCase();\n    // TODO: @Yisi, parse hsl(), hsla(), hwb() and lch()\n    // See also https://drafts.csswg.org/css-color/#hue-syntax\n    return colorAwareProperties.has(lowerCasedName) || angleAwareProperties.has(lowerCasedName);\n  }\n\n  isGridAreaDefiningProperty(propertyName: string): boolean {\n    propertyName = propertyName.toLowerCase();\n    return propertyName === 'grid' || propertyName === 'grid-template' || propertyName === 'grid-template-areas';\n  }\n\n  isGridColumnNameAwareProperty(propertyName: string): boolean {\n    propertyName = propertyName.toLowerCase();\n    return ['grid-column', 'grid-column-start', 'grid-column-end'].includes(propertyName);\n  }\n\n  isGridRowNameAwareProperty(propertyName: string): boolean {\n    propertyName = propertyName.toLowerCase();\n    return ['grid-row', 'grid-row-start', 'grid-row-end'].includes(propertyName);\n  }\n\n  isGridAreaNameAwareProperty(propertyName: string): boolean {\n    propertyName = propertyName.toLowerCase();\n    return propertyName === 'grid-area';\n  }\n\n  isGridNameAwareProperty(propertyName: string): boolean {\n    return this.isGridAreaNameAwareProperty(propertyName) || this.isGridColumnNameAwareProperty(propertyName) ||\n        this.isGridRowNameAwareProperty(propertyName);\n  }\n\n  isLengthProperty(propertyName: string): boolean {\n    propertyName = propertyName.toLowerCase();\n    if (propertyName === 'line-height') {\n      return false;\n    }\n    return distanceProperties.has(propertyName) || propertyName.startsWith('margin') ||\n        propertyName.startsWith('padding') || propertyName.indexOf('width') !== -1 ||\n        propertyName.indexOf('height') !== -1;\n  }\n\n  isBezierAwareProperty(propertyName: string): boolean {\n    propertyName = propertyName.toLowerCase();\n    return bezierAwareProperties.has(propertyName) || this.isCustomProperty(propertyName);\n  }\n\n  isFontAwareProperty(propertyName: string): boolean {\n    propertyName = propertyName.toLowerCase();\n    return fontAwareProperties.has(propertyName) || this.isCustomProperty(propertyName);\n  }\n\n  isCustomProperty(propertyName: string): boolean {\n    return propertyName.startsWith('--');\n  }\n\n  isShadowProperty(propertyName: string): boolean {\n    propertyName = propertyName.toLowerCase();\n    return propertyName === 'box-shadow' || propertyName === 'text-shadow' || propertyName === '-webkit-box-shadow';\n  }\n\n  isStringProperty(propertyName: string): boolean {\n    propertyName = propertyName.toLowerCase();\n    // TODO(crbug.com/1033910): Generalize this to all CSS properties\n    // that accept <string> #values.\n    return propertyName === 'content';\n  }\n\n  canonicalPropertyName(name: string): string {\n    if (this.isCustomProperty(name)) {\n      return name;\n    }\n    name = name.toLowerCase();\n\n    const aliasFor = this.#aliasesFor.get(name);\n    if (aliasFor) {\n      return aliasFor;\n    }\n\n    if (!name || name.length < 9 || name.charAt(0) !== '-') {\n      return name;\n    }\n    const match = name.match(/(?:-webkit-)(.+)/);\n    if (!match || !this.#valuesSet.has(match[1])) {\n      return name;\n    }\n    return match[1];\n  }\n\n  isCSSPropertyName(propertyName: string): boolean {\n    propertyName = propertyName.toLowerCase();\n    if ((propertyName.startsWith('--') && propertyName.length > 2) || propertyName.startsWith('-moz-') ||\n        propertyName.startsWith('-ms-') || propertyName.startsWith('-o-') || propertyName.startsWith('-webkit-')) {\n      return true;\n    }\n    return this.#valuesSet.has(propertyName);\n  }\n\n  isPropertyInherited(propertyName: string): boolean {\n    propertyName = propertyName.toLowerCase();\n    return propertyName.startsWith('--') || this.#inherited.has(this.canonicalPropertyName(propertyName)) ||\n        this.#inherited.has(propertyName);\n  }\n\n  private specificPropertyValues(propertyName: string): string[] {\n    const unprefixedName = propertyName.replace(/^-webkit-/, '');\n    const propertyValues = this.#propertyValues;\n    // #propertyValues acts like cache; missing properties are added with possible common keywords\n    let keywords: (string[]|undefined) = propertyValues.get(propertyName) || propertyValues.get(unprefixedName);\n    if (!keywords) {\n      keywords = [];\n      for (const commonKeyword of CommonKeywords) {\n        if (CSS.supports(propertyName, commonKeyword)) {\n          keywords.push(commonKeyword);\n        }\n      }\n      propertyValues.set(propertyName, keywords);\n    }\n    return keywords;\n  }\n\n  getPropertyValues(propertyName: string): string[] {\n    propertyName = propertyName.toLowerCase();\n    // Add CSS-wide keywords to all properties.\n    const acceptedKeywords = [...this.specificPropertyValues(propertyName), ...CSSWideKeywords];\n\n    if (this.isColorAwareProperty(propertyName)) {\n      acceptedKeywords.push('currentColor');\n      for (const color of Common.Color.Nicknames.keys()) {\n        acceptedKeywords.push(color);\n      }\n    }\n    return acceptedKeywords.sort(CSSMetadata.sortPrefixesAndCSSWideKeywordsToEnd);\n  }\n\n  propertyUsageWeight(property: string): number {\n    return Weight.get(property) || Weight.get(this.canonicalPropertyName(property)) || 0;\n  }\n\n  getValuePreset(key: string, value: string): {\n    text: string,\n    startColumn: number,\n    endColumn: number,\n  }|null {\n    const values = valuePresets.get(key);\n    let text: string|(string | null | undefined) = values ? values.get(value) : null;\n    if (!text) {\n      return null;\n    }\n    let startColumn: number = text.length;\n    let endColumn: number = text.length;\n    if (text) {\n      startColumn = text.indexOf('|');\n      endColumn = text.lastIndexOf('|');\n      endColumn = startColumn === endColumn ? endColumn : endColumn - 1;\n      text = text.replace(/\\|/g, '');\n    }\n    return {text, startColumn, endColumn};\n  }\n\n  isHighlightPseudoType(pseudoType: Protocol.DOM.PseudoType): boolean {\n    return (\n        pseudoType === Protocol.DOM.PseudoType.Highlight || pseudoType === Protocol.DOM.PseudoType.Selection ||\n        pseudoType === Protocol.DOM.PseudoType.TargetText || pseudoType === Protocol.DOM.PseudoType.GrammarError ||\n        pseudoType === Protocol.DOM.PseudoType.SpellingError);\n  }\n}\n\nexport const CubicBezierKeywordValues = new Map([\n  ['linear', 'cubic-bezier(0, 0, 1, 1)'],\n  ['ease', 'cubic-bezier(0.25, 0.1, 0.25, 1)'],\n  ['ease-in', 'cubic-bezier(0.42, 0, 1, 1)'],\n  ['ease-in-out', 'cubic-bezier(0.42, 0, 0.58, 1)'],\n  ['ease-out', 'cubic-bezier(0, 0, 0.58, 1)'],\n]);\n\n/** CSS-wide keywords. **/\nexport const enum CSSWideKeyword {\n  INHERIT = 'inherit',\n  INITIAL = 'initial',\n  REVERT = 'revert',\n  REVERT_LAYER = 'revert-layer',\n  UNSET = 'unset',\n}\n/**\n * Spec: https://drafts.csswg.org/css-cascade/#defaulting-keywords\n * https://drafts.csswg.org/css-cascade-5/#revert-layer\n **/\nexport const CSSWideKeywords: CSSWideKeyword[] = [\n  CSSWideKeyword.INHERIT,\n  CSSWideKeyword.INITIAL,\n  CSSWideKeyword.REVERT,\n  CSSWideKeyword.REVERT_LAYER,\n  CSSWideKeyword.UNSET,\n];\n\n/** https://www.w3.org/TR/css-anchor-position-1/#typedef-try-size **/\nexport const enum PositionTryOrderKeyword {\n  NORMAL = 'normal',\n  MOST_HEIGHT = 'most-height',\n  MOST_WIDTH = 'most-width',\n  MOST_BLOCK_SIZE = 'most-block-size',\n  MOST_INLINE_SIZE = 'most-inline-size',\n}\n\nexport const PositionTryOrderKeywords: PositionTryOrderKeyword[] = [\n  PositionTryOrderKeyword.NORMAL,\n  PositionTryOrderKeyword.MOST_HEIGHT,\n  PositionTryOrderKeyword.MOST_WIDTH,\n  PositionTryOrderKeyword.MOST_BLOCK_SIZE,\n  PositionTryOrderKeyword.MOST_INLINE_SIZE,\n];\n\nexport const VariableNameRegex = /(\\s*--.*?)/gs;\nexport const VariableRegex = /(var\\(\\s*--.*?\\))/gs;\nexport const CustomVariableRegex = /(var\\(*--[\\w\\d]+-([\\w]+-[\\w]+)\\))/g;\nexport const URLRegex = /url\\(\\s*('.+?'|\".+?\"|[^)]+)\\s*\\)/g;\n\n/**\n * Matches an instance of a grid area 'row' definition.\n * 'grid-template-areas', e.g.\n *    \"a a .\"\n *\n * 'grid', 'grid-template', e.g.\n *    [track-#name] \"a a .\" minmax(50px, auto) [track-#name]\n */\nexport const GridAreaRowRegex = /((?:\\[[\\w\\- ]+\\]\\s*)*(?:\"[^\"]+\"|'[^']+'))[^'\"\\[]*\\[?[^'\"\\[]*/;\n\nlet cssMetadataInstance: CSSMetadata|null = null;\n\nexport function cssMetadata(): CSSMetadata {\n  if (!cssMetadataInstance) {\n    const supportedProperties = (SupportedCSSProperties.generatedProperties as CSSPropertyDefinition[]);\n    cssMetadataInstance = new CSSMetadata(supportedProperties, SupportedCSSProperties.generatedAliasesFor);\n  }\n  return cssMetadataInstance;\n}\n\n/**\n * The pipe character '|' indicates where text selection should be set.\n */\nconst imageValuePresetMap = new Map([\n  ['linear-gradient', 'linear-gradient(|45deg, black, transparent|)'],\n  ['radial-gradient', 'radial-gradient(|black, transparent|)'],\n  ['repeating-linear-gradient', 'repeating-linear-gradient(|45deg, black, transparent 100px|)'],\n  ['repeating-radial-gradient', 'repeating-radial-gradient(|black, transparent 100px|)'],\n  ['url', 'url(||)'],\n]);\n\nconst filterValuePresetMap = new Map([\n  ['blur', 'blur(|1px|)'],\n  ['brightness', 'brightness(|0.5|)'],\n  ['contrast', 'contrast(|0.5|)'],\n  ['drop-shadow', 'drop-shadow(|2px 4px 6px black|)'],\n  ['grayscale', 'grayscale(|1|)'],\n  ['hue-rotate', 'hue-rotate(|45deg|)'],\n  ['invert', 'invert(|1|)'],\n  ['opacity', 'opacity(|0.5|)'],\n  ['saturate', 'saturate(|0.5|)'],\n  ['sepia', 'sepia(|1|)'],\n  ['url', 'url(||)'],\n]);\n\nconst cornerShapeValuePresetMap = new Map([\n  ['superellipse(0.5)', 'superellipse(|0.5|)'],\n  ['superellipse(infinity)', 'superellipse(|infinity|)'],\n]);\n\nconst valuePresets = new Map([\n  ['filter', filterValuePresetMap], ['backdrop-filter', filterValuePresetMap], ['background', imageValuePresetMap],\n  ['background-image', imageValuePresetMap], ['-webkit-mask-image', imageValuePresetMap],\n  [\n    'transform',\n    new Map([\n      ['scale', 'scale(|1.5|)'],\n      ['scaleX', 'scaleX(|1.5|)'],\n      ['scaleY', 'scaleY(|1.5|)'],\n      ['scale3d', 'scale3d(|1.5, 1.5, 1.5|)'],\n      ['rotate', 'rotate(|45deg|)'],\n      ['rotateX', 'rotateX(|45deg|)'],\n      ['rotateY', 'rotateY(|45deg|)'],\n      ['rotateZ', 'rotateZ(|45deg|)'],\n      ['rotate3d', 'rotate3d(|1, 1, 1, 45deg|)'],\n      ['skew', 'skew(|10deg, 10deg|)'],\n      ['skewX', 'skewX(|10deg|)'],\n      ['skewY', 'skewY(|10deg|)'],\n      ['translate', 'translate(|10px, 10px|)'],\n      ['translateX', 'translateX(|10px|)'],\n      ['translateY', 'translateY(|10px|)'],\n      ['translateZ', 'translateZ(|10px|)'],\n      ['translate3d', 'translate3d(|10px, 10px, 10px|)'],\n      ['matrix', 'matrix(|1, 0, 0, 1, 0, 0|)'],\n      ['matrix3d', 'matrix3d(|1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1|)'],\n      ['perspective', 'perspective(|10px|)'],\n    ]),\n  ],\n  ['corner-shape', cornerShapeValuePresetMap],\n  [\n    'font-variant-alternates',\n    new Map([\n      ['stylistic', 'stylistic(||)'],\n      ['styleset', 'styleset(||)'],\n      ['character-variant', 'character-variant(||)'],\n      ['swash', 'swash(||)'],\n      ['ornaments', 'ornaments(||)'],\n      ['annotation', 'annotation(||)'],\n    ]),\n  ]\n]);\n\nconst distanceProperties = new Set<string>([\n  'background-position',\n  'border-spacing',\n  'bottom',\n  'font-size',\n  'height',\n  'left',\n  'letter-spacing',\n  'max-height',\n  'max-width',\n  'min-height',\n  'min-width',\n  'right',\n  'text-indent',\n  'top',\n  'width',\n  'word-spacing',\n  'grid-row-gap',\n  'grid-column-gap',\n  'row-gap',\n]);\n\nconst bezierAwareProperties = new Set<string>([\n  'animation',\n  'animation-timing-function',\n  'transition',\n  'transition-timing-function',\n  '-webkit-animation',\n  '-webkit-animation-timing-function',\n  '-webkit-transition',\n  '-webkit-transition-timing-function',\n]);\n\nconst fontAwareProperties =\n    new Set<string>(['font-size', 'line-height', 'font-weight', 'font-family', 'letter-spacing']);\n\nconst colorAwareProperties = new Set<string>([\n  'accent-color',\n  'background',\n  'background-color',\n  'background-image',\n  'border',\n  'border-color',\n  'border-image',\n  'border-image-source',\n  'border-bottom',\n  'border-bottom-color',\n  'border-left',\n  'border-left-color',\n  'border-right',\n  'border-right-color',\n  'border-top',\n  'border-top-color',\n  'border-block',\n  'border-block-color',\n  'border-block-end',\n  'border-block-end-color',\n  'border-block-start',\n  'border-block-start-color',\n  'border-inline',\n  'border-inline-color',\n  'border-inline-end',\n  'border-inline-end-color',\n  'border-inline-start',\n  'border-inline-start-color',\n  'box-shadow',\n  'caret-color',\n  'color',\n  'column-rule',\n  'column-rule-color',\n  'content',\n  'fill',\n  'list-style-image',\n  'mask',\n  'mask-image',\n  'mask-border',\n  'mask-border-source',\n  'outline',\n  'outline-color',\n  'scrollbar-color',\n  'stop-color',\n  'stroke',\n  'text-decoration-color',\n  'text-shadow',\n  'text-emphasis',\n  'text-emphasis-color',\n  '-webkit-border-after',\n  '-webkit-border-after-color',\n  '-webkit-border-before',\n  '-webkit-border-before-color',\n  '-webkit-border-end',\n  '-webkit-border-end-color',\n  '-webkit-border-start',\n  '-webkit-border-start-color',\n  '-webkit-box-reflect',\n  '-webkit-box-shadow',\n  '-webkit-column-rule-color',\n  '-webkit-mask',\n  '-webkit-mask-box-image',\n  '-webkit-mask-box-image-source',\n  '-webkit-mask-image',\n  '-webkit-tap-highlight-color',\n  '-webkit-text-emphasis',\n  '-webkit-text-emphasis-color',\n  '-webkit-text-fill-color',\n  '-webkit-text-stroke',\n  '-webkit-text-stroke-color',\n  // For SVG\n  'flood-color',\n  'lighting-color',\n  'stop-color',\n]);\n\n// In addition to `_colorAwareProperties`, the following properties contain CSS <angle> units.\nconst angleAwareProperties = new Set<string>([\n  '-webkit-border-image',\n  'transform',\n  '-webkit-transform',\n  'rotate',\n  'filter',\n  '-webkit-filter',\n  'backdrop-filter',\n  'offset',\n  'offset-rotate',\n  'font-style',\n]);\n\nconst textEmphasisPosition = new Set([\n  'over',\n  'under',\n  'over right',  // Initial value\n  'over left',\n  'under right',\n  'under left',\n]);\n\n// https://drafts.csswg.org/css-text-decor/#text-emphasis-style-property\nconst textEmphasisStyle = new Set([\n  'none', 'dot', 'circle', 'double-circle', 'triangle', 'sesame', 'filled', 'open', 'dot open', 'circle open',\n  'double-circle open', 'triangle open', 'sesame open',\n  '\"❤️\"',  // <string>\n]);\n\n// manually maintained list of property #values to add into autocomplete list\nconst extraPropertyValues = new Map<string, Set<string>>([\n  ['background-repeat', new Set(['repeat', 'repeat-x', 'repeat-y', 'no-repeat', 'space', 'round'])],\n  ['content', new Set(['normal', 'close-quote', 'no-close-quote', 'no-open-quote', 'open-quote'])],\n  ['baseline-shift', new Set(['baseline'])],\n  ['max-height', new Set(['min-content', 'max-content', '-webkit-fill-available', 'fit-content'])],\n  ['color', new Set(['black'])],\n  ['background-color', new Set(['white'])],\n  ['box-shadow', new Set(['inset'])],\n  ['text-shadow', new Set(['0 0 black'])],\n  ['-webkit-writing-mode', new Set(['horizontal-tb', 'vertical-rl', 'vertical-lr'])],\n  ['writing-mode', new Set(['lr', 'rl', 'tb', 'lr-tb', 'rl-tb', 'tb-rl'])],\n  ['page-break-inside', new Set(['avoid'])],\n  ['cursor', new Set(['-webkit-zoom-in', '-webkit-zoom-out', '-webkit-grab', '-webkit-grabbing'])],\n  ['border-width', new Set(['medium', 'thick', 'thin'])],\n  ['border-style', new Set(['hidden', 'inset', 'groove', 'ridge', 'outset', 'dotted', 'dashed', 'solid', 'double'])],\n  ['size', new Set(['a3', 'a4', 'a5', 'b4', 'b5', 'landscape', 'ledger', 'legal', 'letter', 'portrait'])],\n  ['overflow', new Set(['hidden', 'visible', 'overlay', 'scroll', 'clip'])],\n  ['overscroll-behavior', new Set(['contain'])],\n  ['text-rendering', new Set(['optimizeSpeed', 'optimizeLegibility', 'geometricPrecision'])],\n  ['text-align', new Set(['-webkit-auto', '-webkit-match-parent'])],\n  ['clip-path', new Set(['circle', 'ellipse', 'inset', 'polygon', 'url'])],\n  ['color-interpolation', new Set(['sRGB', 'linearRGB'])],\n  ['word-wrap', new Set(['normal', 'break-word'])],\n  ['font-weight', new Set(['100', '200', '300', '400', '500', '600', '700', '800', '900'])],\n  ['text-emphasis', textEmphasisStyle],\n  ['-webkit-text-emphasis', textEmphasisStyle],\n  ['color-rendering', new Set(['optimizeSpeed', 'optimizeQuality'])],\n  ['-webkit-text-combine', new Set(['horizontal'])],\n  ['text-orientation', new Set(['sideways-right'])],\n  [\n    'outline',\n    new Set(['inset', 'groove', 'ridge', 'outset', 'dotted', 'dashed', 'solid', 'double', 'medium', 'thick', 'thin']),\n  ],\n  [\n    'font',\n    new Set([\n      'caption',\n      'icon',\n      'menu',\n      'message-box',\n      'small-caption',\n      '-webkit-mini-control',\n      '-webkit-small-control',\n      '-webkit-control',\n      'status-bar',\n    ]),\n  ],\n  ['dominant-baseline', new Set(['text-before-edge', 'text-after-edge', 'use-script', 'no-change', 'reset-size'])],\n  ['text-emphasis-position', textEmphasisPosition],\n  ['-webkit-text-emphasis-position', textEmphasisPosition],\n  ['alignment-baseline', new Set(['before-edge', 'after-edge', 'text-before-edge', 'text-after-edge', 'hanging'])],\n  ['page-break-before', new Set(['left', 'right', 'always', 'avoid'])],\n  ['border-image', new Set(['repeat', 'stretch', 'space', 'round'])],\n  [\n    'text-decoration',\n    new Set(['blink', 'line-through', 'overline', 'underline', 'wavy', 'double', 'solid', 'dashed', 'dotted']),\n  ],\n  // List taken from https://drafts.csswg.org/css-fonts-4/#generic-font-families\n  [\n    'font-family',\n    new Set([\n      'serif',\n      'sans-serif',\n      'cursive',\n      'fantasy',\n      'monospace',\n      'system-ui',\n      'emoji',\n      'math',\n      'fangsong',\n      'ui-serif',\n      'ui-sans-serif',\n      'ui-monospace',\n      'ui-rounded',\n      '-webkit-body',\n    ]),\n  ],\n  ['zoom', new Set(['normal'])],\n  ['max-width', new Set(['min-content', 'max-content', '-webkit-fill-available', 'fit-content'])],\n  ['-webkit-font-smoothing', new Set(['antialiased', 'subpixel-antialiased'])],\n  [\n    'border',\n    new Set([\n      'hidden',\n      'inset',\n      'groove',\n      'ridge',\n      'outset',\n      'dotted',\n      'dashed',\n      'solid',\n      'double',\n      'medium',\n      'thick',\n      'thin',\n    ]),\n  ],\n  [\n    'font-variant',\n    new Set([\n      'small-caps',\n      'normal',\n      'common-ligatures',\n      'no-common-ligatures',\n      'discretionary-ligatures',\n      'no-discretionary-ligatures',\n      'historical-ligatures',\n      'no-historical-ligatures',\n      'contextual',\n      'no-contextual',\n      'all-small-caps',\n      'petite-caps',\n      'all-petite-caps',\n      'unicase',\n      'titling-caps',\n      'lining-nums',\n      'oldstyle-nums',\n      'proportional-nums',\n      'tabular-nums',\n      'diagonal-fractions',\n      'stacked-fractions',\n      'ordinal',\n      'slashed-zero',\n      'jis78',\n      'jis83',\n      'jis90',\n      'jis04',\n      'simplified',\n      'traditional',\n      'full-width',\n      'proportional-width',\n      'ruby',\n    ]),\n  ],\n  [\n    'font-variant-alternates',\n    new Set(['historical-forms', 'stylistic', 'styleset', 'character-variant', 'swash', 'ornaments', 'annotation'])\n  ],\n  ['vertical-align', new Set(['top', 'bottom', '-webkit-baseline-middle'])],\n  ['page-break-after', new Set(['left', 'right', 'always', 'avoid'])],\n  ['text-emphasis-style', textEmphasisStyle],\n  ['-webkit-text-emphasis-style', textEmphasisStyle],\n  [\n    'transform',\n    new Set([\n      'scale',      'scaleX',     'scaleY',      'scale3d', 'rotate',   'rotateX',     'rotateY',\n      'rotateZ',    'rotate3d',   'skew',        'skewX',   'skewY',    'translate',   'translateX',\n      'translateY', 'translateZ', 'translate3d', 'matrix',  'matrix3d', 'perspective',\n    ]),\n  ],\n  [\n    'align-content',\n    new Set([\n      'normal',\n      'baseline',\n      'space-between',\n      'space-around',\n      'space-evenly',\n      'stretch',\n      'center',\n      'start',\n      'end',\n      'flex-start',\n      'flex-end',\n    ]),\n  ],\n  [\n    'justify-content',\n    new Set([\n      'normal',\n      'space-between',\n      'space-around',\n      'space-evenly',\n      'stretch',\n      'center',\n      'start',\n      'end',\n      'flex-start',\n      'flex-end',\n      'left',\n      'right',\n    ]),\n  ],\n  [\n    'place-content',\n    new Set([\n      'normal',\n      'space-between',\n      'space-around',\n      'space-evenly',\n      'stretch',\n      'center',\n      'start',\n      'end',\n      'flex-start',\n      'flex-end',\n      'baseline',\n    ]),\n  ],\n  [\n    'align-items',\n    new Set([\n      'normal',\n      'stretch',\n      'baseline',\n      'center',\n      'start',\n      'end',\n      'self-start',\n      'self-end',\n      'flex-start',\n      'flex-end',\n      'anchor-center',\n    ]),\n  ],\n  [\n    'justify-items',\n    new Set([\n      'normal',\n      'stretch',\n      'baseline',\n      'center',\n      'start',\n      'end',\n      'self-start',\n      'self-end',\n      'flex-start',\n      'flex-end',\n      'left',\n      'right',\n      'legacy',\n      'anchor-center',\n    ]),\n  ],\n  [\n    'place-items',\n    new Set([\n      'normal',\n      'stretch',\n      'baseline',\n      'center',\n      'start',\n      'end',\n      'self-start',\n      'self-end',\n      'flex-start',\n      'flex-end',\n      'anchor-center',\n    ]),\n  ],\n  [\n    'align-self',\n    new Set([\n      'normal',\n      'stretch',\n      'baseline',\n      'center',\n      'start',\n      'end',\n      'self-start',\n      'self-end',\n      'flex-start',\n      'flex-end',\n      'anchor-center',\n    ]),\n  ],\n  [\n    'justify-self',\n    new Set([\n      'normal',\n      'stretch',\n      'baseline',\n      'center',\n      'start',\n      'end',\n      'self-start',\n      'self-end',\n      'flex-start',\n      'flex-end',\n      'left',\n      'right',\n      'anchor-center',\n    ]),\n  ],\n  [\n    'place-self',\n    new Set([\n      'normal',\n      'stretch',\n      'baseline',\n      'center',\n      'start',\n      'end',\n      'self-start',\n      'self-end',\n      'flex-start',\n      'flex-end',\n      'anchor-center',\n    ]),\n  ],\n  ['perspective-origin', new Set(['left', 'center', 'right', 'top', 'bottom'])],\n  ['transform-origin', new Set(['left', 'center', 'right', 'top', 'bottom'])],\n  ['transition-timing-function', new Set(['cubic-bezier', 'steps'])],\n  ['animation-timing-function', new Set(['cubic-bezier', 'steps'])],\n  ['-webkit-backface-visibility', new Set(['visible', 'hidden'])],\n  ['-webkit-column-break-after', new Set(['always', 'avoid'])],\n  ['-webkit-column-break-before', new Set(['always', 'avoid'])],\n  ['-webkit-column-break-inside', new Set(['avoid'])],\n  ['-webkit-column-span', new Set(['all'])],\n  ['-webkit-column-gap', new Set(['normal'])],\n  [\n    'filter',\n    new Set([\n      'url',\n      'blur',\n      'brightness',\n      'contrast',\n      'drop-shadow',\n      'grayscale',\n      'hue-rotate',\n      'invert',\n      'opacity',\n      'saturate',\n      'sepia',\n    ]),\n  ],\n  [\n    'backdrop-filter',\n    new Set([\n      'url',\n      'blur',\n      'brightness',\n      'contrast',\n      'drop-shadow',\n      'grayscale',\n      'hue-rotate',\n      'invert',\n      'opacity',\n      'saturate',\n      'sepia',\n    ]),\n  ],\n  ['grid-template-columns', new Set(['min-content', 'max-content'])],\n  ['grid-template-rows', new Set(['min-content', 'max-content'])],\n  ['grid-auto-flow', new Set(['dense'])],\n  [\n    'background',\n    new Set([\n      'repeat',\n      'repeat-x',\n      'repeat-y',\n      'no-repeat',\n      'top',\n      'bottom',\n      'left',\n      'right',\n      'center',\n      'fixed',\n      'local',\n      'scroll',\n      'space',\n      'round',\n      'border-box',\n      'content-box',\n      'padding-box',\n      'linear-gradient',\n      'radial-gradient',\n      'repeating-linear-gradient',\n      'repeating-radial-gradient',\n      'url',\n    ]),\n  ],\n  [\n    'background-image',\n    new Set(['linear-gradient', 'radial-gradient', 'repeating-linear-gradient', 'repeating-radial-gradient', 'url']),\n  ],\n  ['background-position', new Set(['top', 'bottom', 'left', 'right', 'center'])],\n  ['background-position-x', new Set(['left', 'right', 'center'])],\n  ['background-position-y', new Set(['top', 'bottom', 'center'])],\n  ['background-repeat-x', new Set(['repeat', 'no-repeat'])],\n  ['background-repeat-y', new Set(['repeat', 'no-repeat'])],\n  [\n    'border-bottom',\n    new Set([\n      'hidden',\n      'inset',\n      'groove',\n      'outset',\n      'ridge',\n      'dotted',\n      'dashed',\n      'solid',\n      'double',\n      'medium',\n      'thick',\n      'thin',\n    ]),\n  ],\n  [\n    'border-left',\n    new Set([\n      'hidden',\n      'inset',\n      'groove',\n      'outset',\n      'ridge',\n      'dotted',\n      'dashed',\n      'solid',\n      'double',\n      'medium',\n      'thick',\n      'thin',\n    ]),\n  ],\n  [\n    'border-right',\n    new Set([\n      'hidden',\n      'inset',\n      'groove',\n      'outset',\n      'ridge',\n      'dotted',\n      'dashed',\n      'solid',\n      'double',\n      'medium',\n      'thick',\n      'thin',\n    ]),\n  ],\n  [\n    'border-top',\n    new Set([\n      'hidden',\n      'inset',\n      'groove',\n      'outset',\n      'ridge',\n      'dotted',\n      'dashed',\n      'solid',\n      'double',\n      'medium',\n      'thick',\n      'thin',\n    ]),\n  ],\n  ['buffered-rendering', new Set(['static', 'dynamic'])],\n  ['color-interpolation-filters', new Set(['srgb', 'linearrgb'])],\n  [\n    'column-rule',\n    new Set([\n      'hidden',\n      'inset',\n      'groove',\n      'outset',\n      'ridge',\n      'dotted',\n      'dashed',\n      'solid',\n      'double',\n      'medium',\n      'thick',\n      'thin',\n    ]),\n  ],\n  ['flex-flow', new Set(['nowrap', 'row', 'row-reverse', 'column', 'column-reverse', 'wrap', 'wrap-reverse'])],\n  ['height', new Set(['-webkit-fill-available'])],\n  ['inline-size', new Set(['-webkit-fill-available', 'min-content', 'max-content', 'fit-content'])],\n  [\n    'list-style',\n    new Set([\n      'outside',\n      'inside',\n      'disc',\n      'circle',\n      'square',\n      'decimal',\n      'decimal-leading-zero',\n      'arabic-indic',\n      'bengali',\n      'cambodian',\n      'khmer',\n      'devanagari',\n      'gujarati',\n      'gurmukhi',\n      'kannada',\n      'lao',\n      'malayalam',\n      'mongolian',\n      'myanmar',\n      'oriya',\n      'persian',\n      'urdu',\n      'telugu',\n      'tibetan',\n      'thai',\n      'lower-roman',\n      'upper-roman',\n      'lower-greek',\n      'lower-alpha',\n      'lower-latin',\n      'upper-alpha',\n      'upper-latin',\n      'cjk-earthly-branch',\n      'cjk-heavenly-stem',\n      'ethiopic-halehame',\n      'ethiopic-halehame-am',\n      'ethiopic-halehame-ti-er',\n      'ethiopic-halehame-ti-et',\n      'hangul',\n      'hangul-consonant',\n      'korean-hangul-formal',\n      'korean-hanja-formal',\n      'korean-hanja-informal',\n      'hebrew',\n      'armenian',\n      'lower-armenian',\n      'upper-armenian',\n      'georgian',\n      'cjk-ideographic',\n      'simp-chinese-formal',\n      'simp-chinese-informal',\n      'trad-chinese-formal',\n      'trad-chinese-informal',\n      'hiragana',\n      'katakana',\n      'hiragana-iroha',\n      'katakana-iroha',\n    ]),\n  ],\n  ['max-block-size', new Set(['-webkit-fill-available', 'min-content', 'max-content', 'fit-content'])],\n  ['max-inline-size', new Set(['-webkit-fill-available', 'min-content', 'max-content', 'fit-content'])],\n  ['min-block-size', new Set(['-webkit-fill-available', 'min-content', 'max-content', 'fit-content'])],\n  ['min-height', new Set(['-webkit-fill-available', 'min-content', 'max-content', 'fit-content'])],\n  ['min-inline-size', new Set(['-webkit-fill-available', 'min-content', 'max-content', 'fit-content'])],\n  ['min-width', new Set(['-webkit-fill-available', 'min-content', 'max-content', 'fit-content'])],\n  ['object-position', new Set(['top', 'bottom', 'left', 'right', 'center'])],\n  ['shape-outside', new Set(['border-box', 'content-box', 'padding-box', 'margin-box'])],\n  [\n    '-webkit-appearance',\n    new Set([\n      'checkbox',\n      'radio',\n      'push-button',\n      'square-button',\n      'button',\n      'inner-spin-button',\n      'listbox',\n      'media-slider',\n      'media-sliderthumb',\n      'media-volume-slider',\n      'media-volume-sliderthumb',\n      'menulist',\n      'menulist-button',\n      'meter',\n      'progress-bar',\n      'slider-horizontal',\n      'slider-vertical',\n      'sliderthumb-horizontal',\n      'sliderthumb-vertical',\n      'searchfield',\n      'searchfield-cancel-button',\n      'textfield',\n      'textarea',\n    ]),\n  ],\n  [\n    '-webkit-border-after',\n    new Set([\n      'hidden',\n      'inset',\n      'groove',\n      'outset',\n      'ridge',\n      'dotted',\n      'dashed',\n      'solid',\n      'double',\n      'medium',\n      'thick',\n      'thin',\n    ]),\n  ],\n  [\n    '-webkit-border-after-style',\n    new Set(['hidden', 'inset', 'groove', 'outset', 'ridge', 'dotted', 'dashed', 'solid', 'double']),\n  ],\n  ['-webkit-border-after-width', new Set(['medium', 'thick', 'thin'])],\n  [\n    '-webkit-border-before',\n    new Set([\n      'hidden',\n      'inset',\n      'groove',\n      'outset',\n      'ridge',\n      'dotted',\n      'dashed',\n      'solid',\n      'double',\n      'medium',\n      'thick',\n      'thin',\n    ]),\n  ],\n  [\n    '-webkit-border-before-style',\n    new Set(['hidden', 'inset', 'groove', 'outset', 'ridge', 'dotted', 'dashed', 'solid', 'double']),\n  ],\n  ['-webkit-border-before-width', new Set(['medium', 'thick', 'thin'])],\n  [\n    '-webkit-border-end',\n    new Set([\n      'hidden',\n      'inset',\n      'groove',\n      'outset',\n      'ridge',\n      'dotted',\n      'dashed',\n      'solid',\n      'double',\n      'medium',\n      'thick',\n      'thin',\n    ]),\n  ],\n  [\n    '-webkit-border-end-style',\n    new Set(['hidden', 'inset', 'groove', 'outset', 'ridge', 'dotted', 'dashed', 'solid', 'double']),\n  ],\n  ['-webkit-border-end-width', new Set(['medium', 'thick', 'thin'])],\n  [\n    '-webkit-border-start',\n    new Set([\n      'hidden',\n      'inset',\n      'groove',\n      'outset',\n      'ridge',\n      'dotted',\n      'dashed',\n      'solid',\n      'double',\n      'medium',\n      'thick',\n      'thin',\n    ]),\n  ],\n  [\n    '-webkit-border-start-style',\n    new Set(['hidden', 'inset', 'groove', 'outset', 'ridge', 'dotted', 'dashed', 'solid', 'double']),\n  ],\n  ['-webkit-border-start-width', new Set(['medium', 'thick', 'thin'])],\n  ['-webkit-logical-height', new Set(['-webkit-fill-available', 'min-content', 'max-content', 'fit-content'])],\n  ['-webkit-logical-width', new Set(['-webkit-fill-available', 'min-content', 'max-content', 'fit-content'])],\n  ['-webkit-mask-box-image', new Set(['repeat', 'stretch', 'space', 'round'])],\n  ['-webkit-mask-box-image-repeat', new Set(['repeat', 'stretch', 'space', 'round'])],\n  ['-webkit-mask-clip', new Set(['text', 'border', 'border-box', 'content', 'content-box', 'padding', 'padding-box'])],\n  [\n    '-webkit-mask-composite',\n    new Set([\n      'clear',\n      'copy',\n      'source-over',\n      'source-in',\n      'source-out',\n      'source-atop',\n      'destination-over',\n      'destination-in',\n      'destination-out',\n      'destination-atop',\n      'xor',\n      'plus-lighter',\n    ]),\n  ],\n  [\n    '-webkit-mask-image',\n    new Set(['linear-gradient', 'radial-gradient', 'repeating-linear-gradient', 'repeating-radial-gradient', 'url']),\n  ],\n  ['-webkit-mask-origin', new Set(['border', 'border-box', 'content', 'content-box', 'padding', 'padding-box'])],\n  ['-webkit-mask-position', new Set(['top', 'bottom', 'left', 'right', 'center'])],\n  ['-webkit-mask-position-x', new Set(['left', 'right', 'center'])],\n  ['-webkit-mask-position-y', new Set(['top', 'bottom', 'center'])],\n  ['-webkit-mask-repeat', new Set(['repeat', 'repeat-x', 'repeat-y', 'no-repeat', 'space', 'round'])],\n  ['-webkit-mask-size', new Set(['contain', 'cover'])],\n  ['-webkit-max-logical-height', new Set(['-webkit-fill-available', 'min-content', 'max-content', 'fit-content'])],\n  ['-webkit-max-logical-width', new Set(['-webkit-fill-available', 'min-content', 'max-content', 'fit-content'])],\n  ['-webkit-min-logical-height', new Set(['-webkit-fill-available', 'min-content', 'max-content', 'fit-content'])],\n  ['-webkit-min-logical-width', new Set(['-webkit-fill-available', 'min-content', 'max-content', 'fit-content'])],\n  ['-webkit-perspective-origin-x', new Set(['left', 'right', 'center'])],\n  ['-webkit-perspective-origin-y', new Set(['top', 'bottom', 'center'])],\n  ['-webkit-text-decorations-in-effect', new Set(['blink', 'line-through', 'overline', 'underline'])],\n  ['-webkit-text-stroke', new Set(['medium', 'thick', 'thin'])],\n  ['-webkit-text-stroke-width', new Set(['medium', 'thick', 'thin'])],\n  ['-webkit-transform-origin-x', new Set(['left', 'right', 'center'])],\n  ['-webkit-transform-origin-y', new Set(['top', 'bottom', 'center'])],\n  ['width', new Set(['-webkit-fill-available'])],\n  ['contain-intrinsic-width', new Set(['auto none', 'auto 100px'])],\n  ['contain-intrinsic-height', new Set(['auto none', 'auto 100px'])],\n  ['contain-intrinsic-size', new Set(['auto none', 'auto 100px'])],\n  ['contain-intrinsic-inline-size', new Set(['auto none', 'auto 100px'])],\n  ['contain-intrinsic-block-size', new Set(['auto none', 'auto 100px'])],\n  // Due to some compatibility issues[1] with Chrome's implementation[2],\n  // only a few legacy values are added here.\n  // [1]: https://github.com/w3c/csswg-drafts/issues/9102#issuecomment-1807453214\n  // [2]: https://chromium-review.googlesource.com/c/chromium/src/+/4232738\n  [\n    'white-space',\n    new Set([\n      'normal',        // equal to: `collapse wrap`\n      'pre',           // equal to: `preserve nowrap`\n      'pre-wrap',      // equal to: `preserve wrap`\n      'pre-line',      // equal to: `preserve-breaks wrap`\n      'nowrap',        // equal to: `collapse nowrap`\n      'break-spaces',  // equal to: `break-spaces wrap`, Chrome 76, crbug.com/767634#c28\n    ]),\n  ],\n  // https://drafts.csswg.org/css-inline-3/#text-box-edge\n  // Now we're going to allow the following rule:\n  // auto | [ text | cap | ex ] [ text | alphabetic ]?\n  // ideographic and ideographic-ink are not implemented yet.\n  // We don't add values like `cap text` because that is equivalent to `text`.\n  [\n    'text-box-edge',\n    new Set([\n      'auto',\n      'text',\n      'cap',\n      'ex',\n      'text alphabetic',\n      'cap alphabetic',\n      'ex alphabetic',\n    ]),\n  ],\n  [\n    'corner-shape',\n    new Set([\n      'round',\n      'scoop',\n      'bevel',\n      'notch',\n      'square',\n      'squircle',\n      'superellipse(0.5)',\n      'superellipse(infinity)',\n    ]),\n  ],\n]);\n\n// Weight of CSS properties based on their usage from https://www.chromestatus.com/metrics/css/popularity\nconst Weight = new Map([\n  ['align-content', 57],\n  ['align-items', 129],\n  ['align-self', 55],\n  ['animation', 175],\n  ['animation-delay', 114],\n  ['animation-direction', 113],\n  ['animation-duration', 137],\n  ['animation-fill-mode', 132],\n  ['animation-iteration-count', 124],\n  ['animation-name', 139],\n  ['animation-play-state', 104],\n  ['animation-timing-function', 141],\n  ['backface-visibility', 123],\n  ['background', 260],\n  ['background-attachment', 119],\n  ['background-clip', 165],\n  ['background-color', 259],\n  ['background-image', 246],\n  ['background-origin', 107],\n  ['background-position', 237],\n  ['background-position-x', 108],\n  ['background-position-y', 93],\n  ['background-repeat', 234],\n  ['background-size', 203],\n  ['border', 263],\n  ['border-bottom', 233],\n  ['border-bottom-color', 190],\n  ['border-bottom-left-radius', 186],\n  ['border-bottom-right-radius', 185],\n  ['border-bottom-style', 150],\n  ['border-bottom-width', 179],\n  ['border-collapse', 209],\n  ['border-color', 226],\n  ['border-image', 89],\n  ['border-image-outset', 50],\n  ['border-image-repeat', 49],\n  ['border-image-slice', 58],\n  ['border-image-source', 32],\n  ['border-image-width', 52],\n  ['border-left', 221],\n  ['border-left-color', 174],\n  ['border-left-style', 142],\n  ['border-left-width', 172],\n  ['border-radius', 224],\n  ['border-right', 223],\n  ['border-right-color', 182],\n  ['border-right-style', 130],\n  ['border-right-width', 178],\n  ['border-spacing', 198],\n  ['border-style', 206],\n  ['border-top', 231],\n  ['border-top-color', 192],\n  ['border-top-left-radius', 187],\n  ['border-top-right-radius', 189],\n  ['border-top-style', 152],\n  ['border-top-width', 180],\n  ['border-width', 214],\n  ['bottom', 227],\n  ['box-shadow', 213],\n  ['box-sizing', 216],\n  ['caption-side', 96],\n  ['clear', 229],\n  ['clip', 173],\n  ['clip-rule', 5],\n  ['color', 256],\n  ['content', 219],\n  ['counter-increment', 111],\n  ['counter-reset', 110],\n  ['cursor', 250],\n  ['direction', 176],\n  ['display', 262],\n  ['empty-cells', 99],\n  ['fill', 140],\n  ['fill-opacity', 82],\n  ['fill-rule', 22],\n  ['filter', 160],\n  ['flex', 133],\n  ['flex-basis', 66],\n  ['flex-direction', 85],\n  ['flex-flow', 94],\n  ['flex-grow', 112],\n  ['flex-shrink', 61],\n  ['flex-wrap', 68],\n  ['float', 252],\n  ['font', 211],\n  ['font-family', 254],\n  ['font-kerning', 18],\n  ['font-size', 264],\n  ['font-stretch', 77],\n  ['font-style', 220],\n  ['font-variant', 161],\n  ['font-weight', 257],\n  ['height', 266],\n  ['image-rendering', 90],\n  ['justify-content', 127],\n  ['left', 248],\n  ['letter-spacing', 188],\n  ['line-height', 244],\n  ['list-style', 215],\n  ['list-style-image', 145],\n  ['list-style-position', 149],\n  ['list-style-type', 199],\n  ['margin', 267],\n  ['margin-bottom', 241],\n  ['margin-left', 243],\n  ['margin-right', 238],\n  ['margin-top', 253],\n  ['mask', 20],\n  ['max-height', 205],\n  ['max-width', 225],\n  ['min-height', 217],\n  ['min-width', 218],\n  ['object-fit', 33],\n  ['opacity', 251],\n  ['order', 117],\n  ['orphans', 146],\n  ['outline', 222],\n  ['outline-color', 153],\n  ['outline-offset', 147],\n  ['outline-style', 151],\n  ['outline-width', 148],\n  ['overflow', 255],\n  ['overflow-wrap', 105],\n  ['overflow-x', 184],\n  ['overflow-y', 196],\n  ['padding', 265],\n  ['padding-bottom', 230],\n  ['padding-left', 235],\n  ['padding-right', 232],\n  ['padding-top', 240],\n  ['page', 8],\n  ['page-break-after', 120],\n  ['page-break-before', 69],\n  ['page-break-inside', 121],\n  ['perspective', 92],\n  ['perspective-origin', 103],\n  ['pointer-events', 183],\n  ['position', 261],\n  ['quotes', 158],\n  ['resize', 168],\n  ['right', 245],\n  ['shape-rendering', 38],\n  ['size', 64],\n  ['speak', 118],\n  ['src', 170],\n  ['stop-color', 42],\n  ['stop-opacity', 31],\n  ['stroke', 98],\n  ['stroke-dasharray', 36],\n  ['stroke-dashoffset', 3],\n  ['stroke-linecap', 30],\n  ['stroke-linejoin', 21],\n  ['stroke-miterlimit', 12],\n  ['stroke-opacity', 34],\n  ['stroke-width', 87],\n  ['table-layout', 171],\n  ['tab-size', 46],\n  ['text-align', 260],\n  ['text-anchor', 35],\n  ['text-decoration', 247],\n  ['text-indent', 207],\n  ['text-overflow', 204],\n  ['text-rendering', 155],\n  ['text-shadow', 208],\n  ['text-transform', 202],\n  ['top', 258],\n  ['touch-action', 80],\n  ['transform', 181],\n  ['transform-origin', 162],\n  ['transform-style', 86],\n  ['transition', 193],\n  ['transition-delay', 134],\n  ['transition-duration', 135],\n  ['transition-property', 131],\n  ['transition-timing-function', 122],\n  ['unicode-bidi', 156],\n  ['unicode-range', 136],\n  ['vertical-align', 236],\n  ['visibility', 242],\n  ['-webkit-appearance', 191],\n  ['-webkit-backface-visibility', 154],\n  ['-webkit-background-clip', 164],\n  ['-webkit-background-origin', 40],\n  ['-webkit-background-size', 163],\n  ['-webkit-border-end', 9],\n  ['-webkit-border-horizontal-spacing', 81],\n  ['-webkit-border-image', 75],\n  ['-webkit-border-radius', 212],\n  ['-webkit-border-start', 10],\n  ['-webkit-border-start-color', 16],\n  ['-webkit-border-start-width', 13],\n  ['-webkit-border-vertical-spacing', 43],\n  ['-webkit-box-align', 101],\n  ['-webkit-box-direction', 51],\n  ['-webkit-box-flex', 128],\n  ['-webkit-box-ordinal-group', 91],\n  ['-webkit-box-orient', 144],\n  ['-webkit-box-pack', 106],\n  ['-webkit-box-reflect', 39],\n  ['-webkit-box-shadow', 210],\n  ['-webkit-column-break-inside', 60],\n  ['-webkit-column-count', 84],\n  ['-webkit-column-gap', 76],\n  ['-webkit-column-rule', 25],\n  ['-webkit-column-rule-color', 23],\n  ['-webkit-columns', 44],\n  ['-webkit-column-span', 29],\n  ['-webkit-column-width', 47],\n  ['-webkit-filter', 159],\n  ['-webkit-font-feature-settings', 59],\n  ['-webkit-font-smoothing', 177],\n  ['-webkit-line-break', 45],\n  ['-webkit-line-clamp', 126],\n  ['-webkit-margin-after', 67],\n  ['-webkit-margin-before', 70],\n  ['-webkit-margin-collapse', 14],\n  ['-webkit-margin-end', 65],\n  ['-webkit-margin-start', 100],\n  ['-webkit-mask', 19],\n  ['-webkit-mask-box-image', 72],\n  ['-webkit-mask-image', 88],\n  ['-webkit-mask-position', 54],\n  ['-webkit-mask-repeat', 63],\n  ['-webkit-mask-size', 79],\n  ['-webkit-padding-after', 15],\n  ['-webkit-padding-before', 28],\n  ['-webkit-padding-end', 48],\n  ['-webkit-padding-start', 73],\n  ['-webkit-print-color-adjust', 83],\n  ['-webkit-rtl-ordering', 7],\n  ['-webkit-tap-highlight-color', 169],\n  ['-webkit-text-emphasis-color', 11],\n  ['-webkit-text-fill-color', 71],\n  ['-webkit-text-security', 17],\n  ['-webkit-text-stroke', 56],\n  ['-webkit-text-stroke-color', 37],\n  ['-webkit-text-stroke-width', 53],\n  ['-webkit-user-drag', 95],\n  ['-webkit-user-modify', 62],\n  ['-webkit-user-select', 194],\n  ['-webkit-writing-mode', 4],\n  ['white-space', 228],\n  ['widows', 115],\n  ['width', 268],\n  ['will-change', 74],\n  ['word-break', 166],\n  ['word-spacing', 157],\n  ['word-wrap', 197],\n  ['writing-mode', 41],\n  ['z-index', 239],\n  ['zoom', 200],\n]);\n\n// Common keywords to CSS properties\nconst CommonKeywords = ['auto', 'none'];\n\nexport interface CSSPropertyDefinition {\n  name: string;\n  longhands: string[]|null;\n  inherited: boolean|null;\n  svg: boolean|null;\n}\n", "// Copyright 2025 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\n/* eslint-disable @stylistic/quotes, @stylistic/quote-props */\nexport const generatedProperties = [\n {\n  \"longhands\": [\n   \"max-lines\",\n   \"block-ellipsis\",\n   \"continue\"\n  ],\n  \"name\": \"-alternative-webkit-line-clamp\"\n },\n {\n  \"inherited\": true,\n  \"name\": \"-webkit-border-horizontal-spacing\"\n },\n {\n  \"name\": \"-webkit-border-image\"\n },\n {\n  \"inherited\": true,\n  \"name\": \"-webkit-border-vertical-spacing\"\n },\n {\n  \"keywords\": [\n   \"stretch\",\n   \"start\",\n   \"center\",\n   \"end\",\n   \"baseline\"\n  ],\n  \"name\": \"-webkit-box-align\"\n },\n {\n  \"keywords\": [\n   \"slice\",\n   \"clone\"\n  ],\n  \"name\": \"-webkit-box-decoration-break\"\n },\n {\n  \"keywords\": [\n   \"normal\",\n   \"reverse\"\n  ],\n  \"name\": \"-webkit-box-direction\"\n },\n {\n  \"name\": \"-webkit-box-flex\"\n },\n {\n  \"name\": \"-webkit-box-ordinal-group\"\n },\n {\n  \"keywords\": [\n   \"horizontal\",\n   \"vertical\"\n  ],\n  \"name\": \"-webkit-box-orient\"\n },\n {\n  \"keywords\": [\n   \"start\",\n   \"center\",\n   \"end\",\n   \"justify\"\n  ],\n  \"name\": \"-webkit-box-pack\"\n },\n {\n  \"name\": \"-webkit-box-reflect\"\n },\n {\n  \"longhands\": [\n   \"break-after\"\n  ],\n  \"name\": \"-webkit-column-break-after\"\n },\n {\n  \"longhands\": [\n   \"break-before\"\n  ],\n  \"name\": \"-webkit-column-break-before\"\n },\n {\n  \"longhands\": [\n   \"break-inside\"\n  ],\n  \"name\": \"-webkit-column-break-inside\"\n },\n {\n  \"inherited\": true,\n  \"name\": \"-webkit-font-smoothing\"\n },\n {\n  \"keywords\": [\n   \"auto\",\n   \"loose\",\n   \"normal\",\n   \"strict\",\n   \"after-white-space\"\n  ],\n  \"name\": \"-webkit-line-break\"\n },\n {\n  \"keywords\": [\n   \"none\"\n  ],\n  \"name\": \"-webkit-line-clamp\"\n },\n {\n  \"inherited\": true,\n  \"name\": \"-webkit-locale\"\n },\n {\n  \"longhands\": [\n   \"-webkit-mask-box-image-source\",\n   \"-webkit-mask-box-image-slice\",\n   \"-webkit-mask-box-image-width\",\n   \"-webkit-mask-box-image-outset\",\n   \"-webkit-mask-box-image-repeat\"\n  ],\n  \"name\": \"-webkit-mask-box-image\"\n },\n {\n  \"name\": \"-webkit-mask-box-image-outset\"\n },\n {\n  \"name\": \"-webkit-mask-box-image-repeat\"\n },\n {\n  \"name\": \"-webkit-mask-box-image-slice\"\n },\n {\n  \"name\": \"-webkit-mask-box-image-source\"\n },\n {\n  \"name\": \"-webkit-mask-box-image-width\"\n },\n {\n  \"name\": \"-webkit-mask-position-x\"\n },\n {\n  \"name\": \"-webkit-mask-position-y\"\n },\n {\n  \"name\": \"-webkit-perspective-origin-x\"\n },\n {\n  \"name\": \"-webkit-perspective-origin-y\"\n },\n {\n  \"inherited\": true,\n  \"keywords\": [\n   \"logical\",\n   \"visual\"\n  ],\n  \"name\": \"-webkit-rtl-ordering\"\n },\n {\n  \"inherited\": true,\n  \"name\": \"-webkit-ruby-position\"\n },\n {\n  \"inherited\": true,\n  \"name\": \"-webkit-tap-highlight-color\"\n },\n {\n  \"inherited\": true,\n  \"name\": \"-webkit-text-combine\"\n },\n {\n  \"inherited\": true,\n  \"name\": \"-webkit-text-decorations-in-effect\"\n },\n {\n  \"inherited\": true,\n  \"name\": \"-webkit-text-fill-color\"\n },\n {\n  \"inherited\": true,\n  \"name\": \"-webkit-text-orientation\"\n },\n {\n  \"inherited\": true,\n  \"keywords\": [\n   \"none\",\n   \"disc\",\n   \"circle\",\n   \"square\"\n  ],\n  \"name\": \"-webkit-text-security\"\n },\n {\n  \"inherited\": true,\n  \"longhands\": [\n   \"-webkit-text-stroke-width\",\n   \"-webkit-text-stroke-color\"\n  ],\n  \"name\": \"-webkit-text-stroke\"\n },\n {\n  \"inherited\": true,\n  \"name\": \"-webkit-text-stroke-color\"\n },\n {\n  \"inherited\": true,\n  \"name\": \"-webkit-text-stroke-width\"\n },\n {\n  \"name\": \"-webkit-transform-origin-x\"\n },\n {\n  \"name\": \"-webkit-transform-origin-y\"\n },\n {\n  \"name\": \"-webkit-transform-origin-z\"\n },\n {\n  \"keywords\": [\n   \"auto\",\n   \"none\",\n   \"element\"\n  ],\n  \"name\": \"-webkit-user-drag\"\n },\n {\n  \"inherited\": true,\n  \"keywords\": [\n   \"read-only\",\n   \"read-write\",\n   \"read-write-plaintext-only\"\n  ],\n  \"name\": \"-webkit-user-modify\"\n },\n {\n  \"inherited\": true,\n  \"name\": \"-webkit-writing-mode\"\n },\n {\n  \"inherited\": true,\n  \"keywords\": [\n   \"auto\",\n   \"currentcolor\"\n  ],\n  \"name\": \"accent-color\"\n },\n {\n  \"name\": \"additive-symbols\"\n },\n {\n  \"name\": \"align-content\"\n },\n {\n  \"name\": \"align-items\"\n },\n {\n  \"name\": \"align-self\"\n },\n {\n  \"keywords\": [\n   \"auto\",\n   \"baseline\",\n   \"alphabetic\",\n   \"ideographic\",\n   \"middle\",\n   \"central\",\n   \"mathematical\",\n   \"before-edge\",\n   \"text-before-edge\",\n   \"after-edge\",\n   \"text-after-edge\",\n   \"hanging\"\n  ],\n  \"name\": \"alignment-baseline\"\n },\n {\n  \"longhands\": [\n   \"-webkit-border-horizontal-spacing\",\n   \"-webkit-border-vertical-spacing\",\n   \"-webkit-box-align\",\n   \"-webkit-box-decoration-break\",\n   \"-webkit-box-direction\",\n   \"-webkit-box-flex\",\n   \"-webkit-box-ordinal-group\",\n   \"-webkit-box-orient\",\n   \"-webkit-box-pack\",\n   \"-webkit-box-reflect\",\n   \"-webkit-font-smoothing\",\n   \"-webkit-line-break\",\n   \"-webkit-line-clamp\",\n   \"-webkit-locale\",\n   \"-webkit-mask-box-image-outset\",\n   \"-webkit-mask-box-image-repeat\",\n   \"-webkit-mask-box-image-slice\",\n   \"-webkit-mask-box-image-source\",\n   \"-webkit-mask-box-image-width\",\n   \"-webkit-mask-position-x\",\n   \"-webkit-mask-position-y\",\n   \"-webkit-rtl-ordering\",\n   \"-webkit-ruby-position\",\n   \"-webkit-tap-highlight-color\",\n   \"-webkit-text-combine\",\n   \"-webkit-text-decorations-in-effect\",\n   \"-webkit-text-fill-color\",\n   \"-webkit-text-orientation\",\n   \"-webkit-text-security\",\n   \"-webkit-text-stroke-color\",\n   \"-webkit-text-stroke-width\",\n   \"-webkit-user-drag\",\n   \"-webkit-writing-mode\",\n   \"accent-color\",\n   \"additive-symbols\",\n   \"align-content\",\n   \"align-items\",\n   \"align-self\",\n   \"alignment-baseline\",\n   \"anchor-name\",\n   \"anchor-scope\",\n   \"animation-composition\",\n   \"animation-delay\",\n   \"animation-direction\",\n   \"animation-duration\",\n   \"animation-fill-mode\",\n   \"animation-iteration-count\",\n   \"animation-name\",\n   \"animation-play-state\",\n   \"animation-range-end\",\n   \"animation-range-start\",\n   \"animation-timeline\",\n   \"animation-timing-function\",\n   \"animation-trigger\",\n   \"app-region\",\n   \"appearance\",\n   \"ascent-override\",\n   \"aspect-ratio\",\n   \"backdrop-filter\",\n   \"backface-visibility\",\n   \"background-attachment\",\n   \"background-blend-mode\",\n   \"background-clip\",\n   \"background-color\",\n   \"background-image\",\n   \"background-origin\",\n   \"background-position-x\",\n   \"background-position-y\",\n   \"background-repeat\",\n   \"background-size\",\n   \"base-palette\",\n   \"baseline-shift\",\n   \"baseline-source\",\n   \"block-ellipsis\",\n   \"block-size\",\n   \"border-block-end-color\",\n   \"border-block-end-style\",\n   \"border-block-end-width\",\n   \"border-block-start-color\",\n   \"border-block-start-style\",\n   \"border-block-start-width\",\n   \"border-bottom-color\",\n   \"border-bottom-left-radius\",\n   \"border-bottom-right-radius\",\n   \"border-bottom-style\",\n   \"border-bottom-width\",\n   \"border-collapse\",\n   \"border-end-end-radius\",\n   \"border-end-start-radius\",\n   \"border-image-outset\",\n   \"border-image-repeat\",\n   \"border-image-slice\",\n   \"border-image-source\",\n   \"border-image-width\",\n   \"border-inline-end-color\",\n   \"border-inline-end-style\",\n   \"border-inline-end-width\",\n   \"border-inline-start-color\",\n   \"border-inline-start-style\",\n   \"border-inline-start-width\",\n   \"border-left-color\",\n   \"border-left-style\",\n   \"border-left-width\",\n   \"border-right-color\",\n   \"border-right-style\",\n   \"border-right-width\",\n   \"border-shape\",\n   \"border-start-end-radius\",\n   \"border-start-start-radius\",\n   \"border-top-color\",\n   \"border-top-left-radius\",\n   \"border-top-right-radius\",\n   \"border-top-style\",\n   \"border-top-width\",\n   \"bottom\",\n   \"box-decoration-break\",\n   \"box-shadow\",\n   \"box-sizing\",\n   \"break-after\",\n   \"break-before\",\n   \"break-inside\",\n   \"buffered-rendering\",\n   \"caption-side\",\n   \"caret-animation\",\n   \"caret-color\",\n   \"caret-shape\",\n   \"clear\",\n   \"clip\",\n   \"clip-path\",\n   \"clip-rule\",\n   \"color\",\n   \"color-interpolation\",\n   \"color-interpolation-filters\",\n   \"color-rendering\",\n   \"color-scheme\",\n   \"column-count\",\n   \"column-fill\",\n   \"column-gap\",\n   \"column-height\",\n   \"column-rule-break\",\n   \"column-rule-color\",\n   \"column-rule-edge-end-inset\",\n   \"column-rule-edge-start-inset\",\n   \"column-rule-interior-end-inset\",\n   \"column-rule-interior-start-inset\",\n   \"column-rule-style\",\n   \"column-rule-visibility-items\",\n   \"column-rule-width\",\n   \"column-span\",\n   \"column-width\",\n   \"column-wrap\",\n   \"contain\",\n   \"contain-intrinsic-block-size\",\n   \"contain-intrinsic-height\",\n   \"contain-intrinsic-inline-size\",\n   \"contain-intrinsic-width\",\n   \"container-name\",\n   \"container-type\",\n   \"content\",\n   \"content-visibility\",\n   \"continue\",\n   \"corner-bottom-left-shape\",\n   \"corner-bottom-right-shape\",\n   \"corner-end-end-shape\",\n   \"corner-end-start-shape\",\n   \"corner-start-end-shape\",\n   \"corner-start-start-shape\",\n   \"corner-top-left-shape\",\n   \"corner-top-right-shape\",\n   \"counter-increment\",\n   \"counter-reset\",\n   \"counter-set\",\n   \"cursor\",\n   \"cx\",\n   \"cy\",\n   \"d\",\n   \"descent-override\",\n   \"display\",\n   \"dominant-baseline\",\n   \"dynamic-range-limit\",\n   \"empty-cells\",\n   \"fallback\",\n   \"field-sizing\",\n   \"fill\",\n   \"fill-opacity\",\n   \"fill-rule\",\n   \"filter\",\n   \"flex-basis\",\n   \"flex-direction\",\n   \"flex-grow\",\n   \"flex-shrink\",\n   \"flex-wrap\",\n   \"float\",\n   \"flood-color\",\n   \"flood-opacity\",\n   \"font-display\",\n   \"font-family\",\n   \"font-feature-settings\",\n   \"font-kerning\",\n   \"font-language-override\",\n   \"font-optical-sizing\",\n   \"font-palette\",\n   \"font-size\",\n   \"font-size-adjust\",\n   \"font-stretch\",\n   \"font-style\",\n   \"font-synthesis-small-caps\",\n   \"font-synthesis-style\",\n   \"font-synthesis-weight\",\n   \"font-variant-alternates\",\n   \"font-variant-caps\",\n   \"font-variant-east-asian\",\n   \"font-variant-emoji\",\n   \"font-variant-ligatures\",\n   \"font-variant-numeric\",\n   \"font-variant-position\",\n   \"font-variation-settings\",\n   \"font-weight\",\n   \"forced-color-adjust\",\n   \"gap-rule-overlap\",\n   \"grid-auto-columns\",\n   \"grid-auto-flow\",\n   \"grid-auto-rows\",\n   \"grid-column-end\",\n   \"grid-column-start\",\n   \"grid-lanes-direction\",\n   \"grid-lanes-fill\",\n   \"grid-row-end\",\n   \"grid-row-start\",\n   \"grid-template-areas\",\n   \"grid-template-columns\",\n   \"grid-template-rows\",\n   \"height\",\n   \"hyphenate-character\",\n   \"hyphenate-limit-chars\",\n   \"hyphens\",\n   \"image-orientation\",\n   \"image-rendering\",\n   \"inherits\",\n   \"initial-letter\",\n   \"initial-value\",\n   \"inline-size\",\n   \"inset-block-end\",\n   \"inset-block-start\",\n   \"inset-inline-end\",\n   \"inset-inline-start\",\n   \"interactivity\",\n   \"interest-delay-end\",\n   \"interest-delay-start\",\n   \"interpolate-size\",\n   \"isolation\",\n   \"item-tolerance\",\n   \"justify-content\",\n   \"justify-items\",\n   \"justify-self\",\n   \"left\",\n   \"letter-spacing\",\n   \"lighting-color\",\n   \"line-break\",\n   \"line-gap-override\",\n   \"line-height\",\n   \"list-style-image\",\n   \"list-style-position\",\n   \"list-style-type\",\n   \"margin-block-end\",\n   \"margin-block-start\",\n   \"margin-bottom\",\n   \"margin-inline-end\",\n   \"margin-inline-start\",\n   \"margin-left\",\n   \"margin-right\",\n   \"margin-top\",\n   \"marker-end\",\n   \"marker-mid\",\n   \"marker-start\",\n   \"mask-clip\",\n   \"mask-composite\",\n   \"mask-image\",\n   \"mask-mode\",\n   \"mask-origin\",\n   \"mask-repeat\",\n   \"mask-size\",\n   \"mask-type\",\n   \"math-depth\",\n   \"math-shift\",\n   \"math-style\",\n   \"max-block-size\",\n   \"max-height\",\n   \"max-inline-size\",\n   \"max-lines\",\n   \"max-width\",\n   \"min-block-size\",\n   \"min-height\",\n   \"min-inline-size\",\n   \"min-width\",\n   \"mix-blend-mode\",\n   \"navigation\",\n   \"negative\",\n   \"object-fit\",\n   \"object-position\",\n   \"object-view-box\",\n   \"offset-anchor\",\n   \"offset-distance\",\n   \"offset-path\",\n   \"offset-position\",\n   \"offset-rotate\",\n   \"opacity\",\n   \"order\",\n   \"origin-trial-test-property\",\n   \"orphans\",\n   \"outline-color\",\n   \"outline-offset\",\n   \"outline-style\",\n   \"outline-width\",\n   \"overflow-anchor\",\n   \"overflow-block\",\n   \"overflow-clip-margin\",\n   \"overflow-inline\",\n   \"overflow-wrap\",\n   \"overflow-x\",\n   \"overflow-y\",\n   \"overlay\",\n   \"override-colors\",\n   \"overscroll-area\",\n   \"overscroll-behavior-block\",\n   \"overscroll-behavior-inline\",\n   \"overscroll-behavior-x\",\n   \"overscroll-behavior-y\",\n   \"overscroll-position\",\n   \"pad\",\n   \"padding-block-end\",\n   \"padding-block-start\",\n   \"padding-bottom\",\n   \"padding-inline-end\",\n   \"padding-inline-start\",\n   \"padding-left\",\n   \"padding-right\",\n   \"padding-top\",\n   \"page\",\n   \"page-orientation\",\n   \"paint-order\",\n   \"perspective\",\n   \"perspective-origin\",\n   \"pointer-events\",\n   \"position\",\n   \"position-anchor\",\n   \"position-area\",\n   \"position-try-fallbacks\",\n   \"position-try-order\",\n   \"position-visibility\",\n   \"prefix\",\n   \"print-color-adjust\",\n   \"quotes\",\n   \"r\",\n   \"range\",\n   \"reading-flow\",\n   \"reading-order\",\n   \"resize\",\n   \"result\",\n   \"right\",\n   \"rotate\",\n   \"row-gap\",\n   \"row-rule-break\",\n   \"row-rule-color\",\n   \"row-rule-edge-end-inset\",\n   \"row-rule-edge-start-inset\",\n   \"row-rule-interior-end-inset\",\n   \"row-rule-interior-start-inset\",\n   \"row-rule-style\",\n   \"row-rule-visibility-items\",\n   \"row-rule-width\",\n   \"ruby-align\",\n   \"ruby-overhang\",\n   \"ruby-position\",\n   \"rx\",\n   \"ry\",\n   \"scale\",\n   \"scroll-behavior\",\n   \"scroll-initial-target\",\n   \"scroll-margin-block-end\",\n   \"scroll-margin-block-start\",\n   \"scroll-margin-bottom\",\n   \"scroll-margin-inline-end\",\n   \"scroll-margin-inline-start\",\n   \"scroll-margin-left\",\n   \"scroll-margin-right\",\n   \"scroll-margin-top\",\n   \"scroll-marker-group\",\n   \"scroll-padding-block-end\",\n   \"scroll-padding-block-start\",\n   \"scroll-padding-bottom\",\n   \"scroll-padding-inline-end\",\n   \"scroll-padding-inline-start\",\n   \"scroll-padding-left\",\n   \"scroll-padding-right\",\n   \"scroll-padding-top\",\n   \"scroll-snap-align\",\n   \"scroll-snap-stop\",\n   \"scroll-snap-type\",\n   \"scroll-target-group\",\n   \"scroll-timeline-axis\",\n   \"scroll-timeline-name\",\n   \"scrollbar-color\",\n   \"scrollbar-gutter\",\n   \"scrollbar-width\",\n   \"shape-image-threshold\",\n   \"shape-margin\",\n   \"shape-outside\",\n   \"shape-rendering\",\n   \"size\",\n   \"size-adjust\",\n   \"speak\",\n   \"speak-as\",\n   \"src\",\n   \"stop-color\",\n   \"stop-opacity\",\n   \"stroke\",\n   \"stroke-dasharray\",\n   \"stroke-dashoffset\",\n   \"stroke-linecap\",\n   \"stroke-linejoin\",\n   \"stroke-miterlimit\",\n   \"stroke-opacity\",\n   \"stroke-width\",\n   \"suffix\",\n   \"symbols\",\n   \"syntax\",\n   \"system\",\n   \"tab-size\",\n   \"table-layout\",\n   \"text-align\",\n   \"text-align-last\",\n   \"text-anchor\",\n   \"text-autospace\",\n   \"text-box-edge\",\n   \"text-box-trim\",\n   \"text-combine-upright\",\n   \"text-decoration-color\",\n   \"text-decoration-line\",\n   \"text-decoration-skip-ink\",\n   \"text-decoration-style\",\n   \"text-decoration-thickness\",\n   \"text-emphasis-color\",\n   \"text-emphasis-position\",\n   \"text-emphasis-style\",\n   \"text-grow\",\n   \"text-indent\",\n   \"text-justify\",\n   \"text-orientation\",\n   \"text-overflow\",\n   \"text-rendering\",\n   \"text-shadow\",\n   \"text-shrink\",\n   \"text-size-adjust\",\n   \"text-spacing-trim\",\n   \"text-transform\",\n   \"text-underline-offset\",\n   \"text-underline-position\",\n   \"text-wrap-mode\",\n   \"text-wrap-style\",\n   \"timeline-scope\",\n   \"timeline-trigger-exit-range-end\",\n   \"timeline-trigger-exit-range-start\",\n   \"timeline-trigger-name\",\n   \"timeline-trigger-range-end\",\n   \"timeline-trigger-range-start\",\n   \"timeline-trigger-source\",\n   \"top\",\n   \"touch-action\",\n   \"transform\",\n   \"transform-box\",\n   \"transform-origin\",\n   \"transform-style\",\n   \"transition-behavior\",\n   \"transition-delay\",\n   \"transition-duration\",\n   \"transition-property\",\n   \"transition-timing-function\",\n   \"translate\",\n   \"types\",\n   \"unicode-range\",\n   \"user-select\",\n   \"vector-effect\",\n   \"vertical-align\",\n   \"view-timeline-axis\",\n   \"view-timeline-inset\",\n   \"view-timeline-name\",\n   \"view-transition-class\",\n   \"view-transition-group\",\n   \"view-transition-name\",\n   \"visibility\",\n   \"white-space-collapse\",\n   \"widows\",\n   \"width\",\n   \"will-change\",\n   \"word-break\",\n   \"word-spacing\",\n   \"writing-mode\",\n   \"x\",\n   \"y\",\n   \"z-index\",\n   \"zoom\"\n  ],\n  \"name\": \"all\"\n },\n {\n  \"keywords\": [\n   \"none\"\n  ],\n  \"name\": \"anchor-name\"\n },\n {\n  \"keywords\": [\n   \"none\",\n   \"all\"\n  ],\n  \"name\": \"anchor-scope\"\n },\n {\n  \"longhands\": [\n   \"animation-duration\",\n   \"animation-timing-function\",\n   \"animation-delay\",\n   \"animation-iteration-count\",\n   \"animation-direction\",\n   \"animation-fill-mode\",\n   \"animation-play-state\",\n   \"animation-name\",\n   \"animation-timeline\",\n   \"animation-range-start\",\n   \"animation-range-end\"\n  ],\n  \"name\": \"animation\"\n },\n {\n  \"keywords\": [\n   \"replace\",\n   \"add\",\n   \"accumulate\"\n  ],\n  \"name\": \"animation-composition\"\n },\n {\n  \"name\": \"animation-delay\"\n },\n {\n  \"keywords\": [\n   \"normal\",\n   \"reverse\",\n   \"alternate\",\n   \"alternate-reverse\"\n  ],\n  \"name\": \"animation-direction\"\n },\n {\n  \"name\": \"animation-duration\"\n },\n {\n  \"keywords\": [\n   \"none\",\n   \"forwards\",\n   \"backwards\",\n   \"both\"\n  ],\n  \"name\": \"animation-fill-mode\"\n },\n {\n  \"keywords\": [\n   \"infinite\"\n  ],\n  \"name\": \"animation-iteration-count\"\n },\n {\n  \"keywords\": [\n   \"none\"\n  ],\n  \"name\": \"animation-name\"\n },\n {\n  \"keywords\": [\n   \"running\",\n   \"paused\"\n  ],\n  \"name\": \"animation-play-state\"\n },\n {\n  \"longhands\": [\n   \"animation-range-start\",\n   \"animation-range-end\"\n  ],\n  \"name\": \"animation-range\"\n },\n {\n  \"name\": \"animation-range-end\"\n },\n {\n  \"name\": \"animation-range-start\"\n },\n {\n  \"keywords\": [\n   \"none\",\n   \"auto\"\n  ],\n  \"name\": \"animation-timeline\"\n },\n {\n  \"keywords\": [\n   \"linear\",\n   \"ease\",\n   \"ease-in\",\n   \"ease-out\",\n   \"ease-in-out\",\n   \"jump-both\",\n   \"jump-end\",\n   \"jump-none\",\n   \"jump-start\",\n   \"step-start\",\n   \"step-end\"\n  ],\n  \"name\": \"animation-timing-function\"\n },\n {\n  \"keywords\": [\n   \"none\"\n  ],\n  \"name\": \"animation-trigger\"\n },\n {\n  \"keywords\": [\n   \"none\",\n   \"drag\",\n   \"no-drag\"\n  ],\n  \"name\": \"app-region\"\n },\n {\n  \"name\": \"appearance\"\n },\n {\n  \"name\": \"ascent-override\"\n },\n {\n  \"keywords\": [\n   \"auto\"\n  ],\n  \"name\": \"aspect-ratio\"\n },\n {\n  \"keywords\": [\n   \"none\"\n  ],\n  \"name\": \"backdrop-filter\"\n },\n {\n  \"keywords\": [\n   \"visible\",\n   \"hidden\"\n  ],\n  \"name\": \"backface-visibility\"\n },\n {\n  \"longhands\": [\n   \"background-image\",\n   \"background-position-x\",\n   \"background-position-y\",\n   \"background-size\",\n   \"background-repeat\",\n   \"background-attachment\",\n   \"background-origin\",\n   \"background-clip\",\n   \"background-color\"\n  ],\n  \"name\": \"background\"\n },\n {\n  \"keywords\": [\n   \"scroll\",\n   \"fixed\",\n   \"local\"\n  ],\n  \"name\": \"background-attachment\"\n },\n {\n  \"keywords\": [\n   \"normal\",\n   \"multiply\",\n   \"screen\",\n   \"overlay\",\n   \"darken\",\n   \"lighten\",\n   \"color-dodge\",\n   \"color-burn\",\n   \"hard-light\",\n   \"soft-light\",\n   \"difference\",\n   \"exclusion\",\n   \"hue\",\n   \"saturation\",\n   \"color\",\n   \"luminosity\"\n  ],\n  \"name\": \"background-blend-mode\"\n },\n {\n  \"keywords\": [\n   \"border-box\",\n   \"padding-box\",\n   \"content-box\",\n   \"text\"\n  ],\n  \"name\": \"background-clip\"\n },\n {\n  \"keywords\": [\n   \"currentcolor\"\n  ],\n  \"name\": \"background-color\"\n },\n {\n  \"keywords\": [\n   \"auto\",\n   \"none\"\n  ],\n  \"name\": \"background-image\"\n },\n {\n  \"keywords\": [\n   \"border-box\",\n   \"padding-box\",\n   \"content-box\"\n  ],\n  \"name\": \"background-origin\"\n },\n {\n  \"longhands\": [\n   \"background-position-x\",\n   \"background-position-y\"\n  ],\n  \"name\": \"background-position\"\n },\n {\n  \"name\": \"background-position-x\"\n },\n {\n  \"name\": \"background-position-y\"\n },\n {\n  \"name\": \"background-repeat\"\n },\n {\n  \"keywords\": [\n   \"auto\",\n   \"cover\",\n   \"contain\"\n  ],\n  \"name\": \"background-size\"\n },\n {\n  \"name\": \"base-palette\"\n },\n {\n  \"keywords\": [\n   \"baseline\",\n   \"sub\",\n   \"super\"\n  ],\n  \"name\": \"baseline-shift\"\n },\n {\n  \"keywords\": [\n   \"auto\",\n   \"first\",\n   \"last\"\n  ],\n  \"name\": \"baseline-source\"\n },\n {\n  \"inherited\": true,\n  \"keywords\": [\n   \"auto\",\n   \"no-ellipsis\"\n  ],\n  \"name\": \"block-ellipsis\"\n },\n {\n  \"keywords\": [\n   \"auto\"\n  ],\n  \"name\": \"block-size\"\n },\n {\n  \"longhands\": [\n   \"border-top-color\",\n   \"border-top-style\",\n   \"border-top-width\",\n   \"border-right-color\",\n   \"border-right-style\",\n   \"border-right-width\",\n   \"border-bottom-color\",\n   \"border-bottom-style\",\n   \"border-bottom-width\",\n   \"border-left-color\",\n   \"border-left-style\",\n   \"border-left-width\",\n   \"border-image-source\",\n   \"border-image-slice\",\n   \"border-image-width\",\n   \"border-image-outset\",\n   \"border-image-repeat\"\n  ],\n  \"name\": \"border\"\n },\n {\n  \"longhands\": [\n   \"border-block-start-color\",\n   \"border-block-start-style\",\n   \"border-block-start-width\",\n   \"border-block-end-color\",\n   \"border-block-end-style\",\n   \"border-block-end-width\"\n  ],\n  \"name\": \"border-block\"\n },\n {\n  \"longhands\": [\n   \"border-block-start-color\",\n   \"border-block-end-color\"\n  ],\n  \"name\": \"border-block-color\"\n },\n {\n  \"longhands\": [\n   \"border-block-end-width\",\n   \"border-block-end-style\",\n   \"border-block-end-color\"\n  ],\n  \"name\": \"border-block-end\"\n },\n {\n  \"name\": \"border-block-end-color\"\n },\n {\n  \"name\": \"border-block-end-style\"\n },\n {\n  \"name\": \"border-block-end-width\"\n },\n {\n  \"longhands\": [\n   \"border-block-start-width\",\n   \"border-block-start-style\",\n   \"border-block-start-color\"\n  ],\n  \"name\": \"border-block-start\"\n },\n {\n  \"name\": \"border-block-start-color\"\n },\n {\n  \"name\": \"border-block-start-style\"\n },\n {\n  \"name\": \"border-block-start-width\"\n },\n {\n  \"longhands\": [\n   \"border-block-start-style\",\n   \"border-block-end-style\"\n  ],\n  \"name\": \"border-block-style\"\n },\n {\n  \"longhands\": [\n   \"border-block-start-width\",\n   \"border-block-end-width\"\n  ],\n  \"name\": \"border-block-width\"\n },\n {\n  \"longhands\": [\n   \"border-bottom-width\",\n   \"border-bottom-style\",\n   \"border-bottom-color\"\n  ],\n  \"name\": \"border-bottom\"\n },\n {\n  \"keywords\": [\n   \"currentcolor\"\n  ],\n  \"name\": \"border-bottom-color\"\n },\n {\n  \"name\": \"border-bottom-left-radius\"\n },\n {\n  \"name\": \"border-bottom-right-radius\"\n },\n {\n  \"keywords\": [\n   \"none\",\n   \"hidden\",\n   \"inset\",\n   \"groove\",\n   \"outset\",\n   \"ridge\",\n   \"dotted\",\n   \"dashed\",\n   \"solid\",\n   \"double\"\n  ],\n  \"name\": \"border-bottom-style\"\n },\n {\n  \"keywords\": [\n   \"thin\",\n   \"medium\",\n   \"thick\"\n  ],\n  \"name\": \"border-bottom-width\"\n },\n {\n  \"inherited\": true,\n  \"keywords\": [\n   \"separate\",\n   \"collapse\"\n  ],\n  \"name\": \"border-collapse\"\n },\n {\n  \"longhands\": [\n   \"border-top-color\",\n   \"border-right-color\",\n   \"border-bottom-color\",\n   \"border-left-color\"\n  ],\n  \"name\": \"border-color\"\n },\n {\n  \"name\": \"border-end-end-radius\"\n },\n {\n  \"name\": \"border-end-start-radius\"\n },\n {\n  \"longhands\": [\n   \"border-image-source\",\n   \"border-image-slice\",\n   \"border-image-width\",\n   \"border-image-outset\",\n   \"border-image-repeat\"\n  ],\n  \"name\": \"border-image\"\n },\n {\n  \"name\": \"border-image-outset\"\n },\n {\n  \"keywords\": [\n   \"stretch\",\n   \"repeat\",\n   \"round\",\n   \"space\"\n  ],\n  \"name\": \"border-image-repeat\"\n },\n {\n  \"name\": \"border-image-slice\"\n },\n {\n  \"keywords\": [\n   \"none\"\n  ],\n  \"name\": \"border-image-source\"\n },\n {\n  \"keywords\": [\n   \"auto\"\n  ],\n  \"name\": \"border-image-width\"\n },\n {\n  \"longhands\": [\n   \"border-inline-start-color\",\n   \"border-inline-start-style\",\n   \"border-inline-start-width\",\n   \"border-inline-end-color\",\n   \"border-inline-end-style\",\n   \"border-inline-end-width\"\n  ],\n  \"name\": \"border-inline\"\n },\n {\n  \"longhands\": [\n   \"border-inline-start-color\",\n   \"border-inline-end-color\"\n  ],\n  \"name\": \"border-inline-color\"\n },\n {\n  \"longhands\": [\n   \"border-inline-end-width\",\n   \"border-inline-end-style\",\n   \"border-inline-end-color\"\n  ],\n  \"name\": \"border-inline-end\"\n },\n {\n  \"name\": \"border-inline-end-color\"\n },\n {\n  \"name\": \"border-inline-end-style\"\n },\n {\n  \"name\": \"border-inline-end-width\"\n },\n {\n  \"longhands\": [\n   \"border-inline-start-width\",\n   \"border-inline-start-style\",\n   \"border-inline-start-color\"\n  ],\n  \"name\": \"border-inline-start\"\n },\n {\n  \"name\": \"border-inline-start-color\"\n },\n {\n  \"name\": \"border-inline-start-style\"\n },\n {\n  \"name\": \"border-inline-start-width\"\n },\n {\n  \"longhands\": [\n   \"border-inline-start-style\",\n   \"border-inline-end-style\"\n  ],\n  \"name\": \"border-inline-style\"\n },\n {\n  \"longhands\": [\n   \"border-inline-start-width\",\n   \"border-inline-end-width\"\n  ],\n  \"name\": \"border-inline-width\"\n },\n {\n  \"longhands\": [\n   \"border-left-width\",\n   \"border-left-style\",\n   \"border-left-color\"\n  ],\n  \"name\": \"border-left\"\n },\n {\n  \"keywords\": [\n   \"currentcolor\"\n  ],\n  \"name\": \"border-left-color\"\n },\n {\n  \"keywords\": [\n   \"none\",\n   \"hidden\",\n   \"inset\",\n   \"groove\",\n   \"outset\",\n   \"ridge\",\n   \"dotted\",\n   \"dashed\",\n   \"solid\",\n   \"double\"\n  ],\n  \"name\": \"border-left-style\"\n },\n {\n  \"keywords\": [\n   \"thin\",\n   \"medium\",\n   \"thick\"\n  ],\n  \"name\": \"border-left-width\"\n },\n {\n  \"longhands\": [\n   \"border-top-left-radius\",\n   \"border-top-right-radius\",\n   \"border-bottom-right-radius\",\n   \"border-bottom-left-radius\"\n  ],\n  \"name\": \"border-radius\"\n },\n {\n  \"longhands\": [\n   \"border-right-width\",\n   \"border-right-style\",\n   \"border-right-color\"\n  ],\n  \"name\": \"border-right\"\n },\n {\n  \"keywords\": [\n   \"currentcolor\"\n  ],\n  \"name\": \"border-right-color\"\n },\n {\n  \"keywords\": [\n   \"none\",\n   \"hidden\",\n   \"inset\",\n   \"groove\",\n   \"outset\",\n   \"ridge\",\n   \"dotted\",\n   \"dashed\",\n   \"solid\",\n   \"double\"\n  ],\n  \"name\": \"border-right-style\"\n },\n {\n  \"keywords\": [\n   \"thin\",\n   \"medium\",\n   \"thick\"\n  ],\n  \"name\": \"border-right-width\"\n },\n {\n  \"keywords\": [\n   \"none\"\n  ],\n  \"name\": \"border-shape\"\n },\n {\n  \"inherited\": true,\n  \"longhands\": [\n   \"-webkit-border-horizontal-spacing\",\n   \"-webkit-border-vertical-spacing\"\n  ],\n  \"name\": \"border-spacing\"\n },\n {\n  \"name\": \"border-start-end-radius\"\n },\n {\n  \"name\": \"border-start-start-radius\"\n },\n {\n  \"keywords\": [\n   \"none\"\n  ],\n  \"longhands\": [\n   \"border-top-style\",\n   \"border-right-style\",\n   \"border-bottom-style\",\n   \"border-left-style\"\n  ],\n  \"name\": \"border-style\"\n },\n {\n  \"longhands\": [\n   \"border-top-width\",\n   \"border-top-style\",\n   \"border-top-color\"\n  ],\n  \"name\": \"border-top\"\n },\n {\n  \"keywords\": [\n   \"currentcolor\"\n  ],\n  \"name\": \"border-top-color\"\n },\n {\n  \"name\": \"border-top-left-radius\"\n },\n {\n  \"name\": \"border-top-right-radius\"\n },\n {\n  \"keywords\": [\n   \"none\",\n   \"hidden\",\n   \"inset\",\n   \"groove\",\n   \"outset\",\n   \"ridge\",\n   \"dotted\",\n   \"dashed\",\n   \"solid\",\n   \"double\"\n  ],\n  \"name\": \"border-top-style\"\n },\n {\n  \"keywords\": [\n   \"thin\",\n   \"medium\",\n   \"thick\"\n  ],\n  \"name\": \"border-top-width\"\n },\n {\n  \"longhands\": [\n   \"border-top-width\",\n   \"border-right-width\",\n   \"border-bottom-width\",\n   \"border-left-width\"\n  ],\n  \"name\": \"border-width\"\n },\n {\n  \"keywords\": [\n   \"auto\"\n  ],\n  \"name\": \"bottom\"\n },\n {\n  \"keywords\": [\n   \"slice\",\n   \"clone\"\n  ],\n  \"name\": \"box-decoration-break\"\n },\n {\n  \"keywords\": [\n   \"none\"\n  ],\n  \"name\": \"box-shadow\"\n },\n {\n  \"keywords\": [\n   \"content-box\",\n   \"border-box\"\n  ],\n  \"name\": \"box-sizing\"\n },\n {\n  \"keywords\": [\n   \"auto\",\n   \"avoid\",\n   \"avoid-column\",\n   \"avoid-page\",\n   \"column\",\n   \"left\",\n   \"page\",\n   \"recto\",\n   \"right\",\n   \"verso\"\n  ],\n  \"name\": \"break-after\"\n },\n {\n  \"keywords\": [\n   \"auto\",\n   \"avoid\",\n   \"avoid-column\",\n   \"avoid-page\",\n   \"column\",\n   \"left\",\n   \"page\",\n   \"recto\",\n   \"right\",\n   \"verso\"\n  ],\n  \"name\": \"break-before\"\n },\n {\n  \"keywords\": [\n   \"auto\",\n   \"avoid\",\n   \"avoid-column\",\n   \"avoid-page\"\n  ],\n  \"name\": \"break-inside\"\n },\n {\n  \"keywords\": [\n   \"auto\",\n   \"dynamic\",\n   \"static\"\n  ],\n  \"name\": \"buffered-rendering\"\n },\n {\n  \"inherited\": true,\n  \"keywords\": [\n   \"top\",\n   \"bottom\"\n  ],\n  \"name\": \"caption-side\"\n },\n {\n  \"inherited\": true,\n  \"keywords\": [\n   \"auto\",\n   \"manual\"\n  ],\n  \"name\": \"caret-animation\"\n },\n {\n  \"inherited\": true,\n  \"keywords\": [\n   \"auto\",\n   \"currentcolor\"\n  ],\n  \"name\": \"caret-color\"\n },\n {\n  \"inherited\": true,\n  \"keywords\": [\n   \"auto\",\n   \"bar\",\n   \"block\",\n   \"underscore\"\n  ],\n  \"name\": \"caret-shape\"\n },\n {\n  \"keywords\": [\n   \"none\",\n   \"left\",\n   \"right\",\n   \"both\",\n   \"inline-start\",\n   \"inline-end\"\n  ],\n  \"name\": \"clear\"\n },\n {\n  \"keywords\": [\n   \"auto\"\n  ],\n  \"name\": \"clip\"\n },\n {\n  \"keywords\": [\n   \"border-box\",\n   \"padding-box\",\n   \"content-box\",\n   \"margin-box\",\n   \"fill-box\",\n   \"stroke-box\",\n   \"view-box\",\n   \"none\"\n  ],\n  \"name\": \"clip-path\"\n },\n {\n  \"inherited\": true,\n  \"keywords\": [\n   \"nonzero\",\n   \"evenodd\"\n  ],\n  \"name\": \"clip-rule\"\n },\n {\n  \"inherited\": true,\n  \"keywords\": [\n   \"currentcolor\"\n  ],\n  \"name\": \"color\"\n },\n {\n  \"inherited\": true,\n  \"keywords\": [\n   \"auto\",\n   \"srgb\",\n   \"linearrgb\"\n  ],\n  \"name\": \"color-interpolation\"\n },\n {\n  \"inherited\": true,\n  \"keywords\": [\n   \"auto\",\n   \"srgb\",\n   \"linearrgb\"\n  ],\n  \"name\": \"color-interpolation-filters\"\n },\n {\n  \"inherited\": true,\n  \"keywords\": [\n   \"auto\",\n   \"optimizespeed\",\n   \"optimizequality\"\n  ],\n  \"name\": \"color-rendering\"\n },\n {\n  \"inherited\": true,\n  \"name\": \"color-scheme\"\n },\n {\n  \"keywords\": [\n   \"auto\"\n  ],\n  \"name\": \"column-count\"\n },\n {\n  \"keywords\": [\n   \"balance\",\n   \"auto\"\n  ],\n  \"name\": \"column-fill\"\n },\n {\n  \"keywords\": [\n   \"normal\"\n  ],\n  \"name\": \"column-gap\"\n },\n {\n  \"keywords\": [\n   \"auto\"\n  ],\n  \"name\": \"column-height\"\n },\n {\n  \"longhands\": [\n   \"column-rule-width\",\n   \"column-rule-style\",\n   \"column-rule-color\"\n  ],\n  \"name\": \"column-rule\"\n },\n {\n  \"inherited\": false,\n  \"keywords\": [\n   \"none\",\n   \"spanning-item\",\n   \"intersection\"\n  ],\n  \"name\": \"column-rule-break\"\n },\n {\n  \"keywords\": [\n   \"currentcolor\"\n  ],\n  \"name\": \"column-rule-color\"\n },\n {\n  \"inherited\": false,\n  \"name\": \"column-rule-edge-end-inset\"\n },\n {\n  \"inherited\": false,\n  \"name\": \"column-rule-edge-start-inset\"\n },\n {\n  \"longhands\": [\n   \"column-rule-edge-start-inset\",\n   \"column-rule-edge-end-inset\",\n   \"column-rule-interior-start-inset\",\n   \"column-rule-interior-end-inset\"\n  ],\n  \"name\": \"column-rule-inset\"\n },\n {\n  \"inherited\": false,\n  \"name\": \"column-rule-interior-end-inset\"\n },\n {\n  \"inherited\": false,\n  \"name\": \"column-rule-interior-start-inset\"\n },\n {\n  \"keywords\": [\n   \"none\",\n   \"hidden\",\n   \"inset\",\n   \"groove\",\n   \"outset\",\n   \"ridge\",\n   \"dotted\",\n   \"dashed\",\n   \"solid\",\n   \"double\"\n  ],\n  \"name\": \"column-rule-style\"\n },\n {\n  \"inherited\": false,\n  \"keywords\": [\n   \"all\",\n   \"around\",\n   \"between\",\n   \"none\"\n  ],\n  \"name\": \"column-rule-visibility-items\"\n },\n {\n  \"keywords\": [\n   \"thin\",\n   \"medium\",\n   \"thick\"\n  ],\n  \"name\": \"column-rule-width\"\n },\n {\n  \"keywords\": [\n   \"none\",\n   \"all\"\n  ],\n  \"name\": \"column-span\"\n },\n {\n  \"keywords\": [\n   \"auto\"\n  ],\n  \"name\": \"column-width\"\n },\n {\n  \"keywords\": [\n   \"auto\",\n   \"nowrap\",\n   \"wrap\"\n  ],\n  \"name\": \"column-wrap\"\n },\n {\n  \"longhands\": [\n   \"column-width\",\n   \"column-count\",\n   \"column-height\",\n   \"column-wrap\"\n  ],\n  \"name\": \"columns\"\n },\n {\n  \"keywords\": [\n   \"none\",\n   \"strict\",\n   \"content\",\n   \"size\",\n   \"layout\",\n   \"style\",\n   \"paint\",\n   \"inline-size\",\n   \"block-size\",\n   \"view-transition\"\n  ],\n  \"name\": \"contain\"\n },\n {\n  \"name\": \"contain-intrinsic-block-size\"\n },\n {\n  \"keywords\": [\n   \"none\"\n  ],\n  \"name\": \"contain-intrinsic-height\"\n },\n {\n  \"name\": \"contain-intrinsic-inline-size\"\n },\n {\n  \"longhands\": [\n   \"contain-intrinsic-width\",\n   \"contain-intrinsic-height\"\n  ],\n  \"name\": \"contain-intrinsic-size\"\n },\n {\n  \"keywords\": [\n   \"none\"\n  ],\n  \"name\": \"contain-intrinsic-width\"\n },\n {\n  \"longhands\": [\n   \"container-name\",\n   \"container-type\"\n  ],\n  \"name\": \"container\"\n },\n {\n  \"keywords\": [\n   \"none\"\n  ],\n  \"name\": \"container-name\"\n },\n {\n  \"keywords\": [\n   \"normal\",\n   \"inline-size\",\n   \"size\",\n   \"scroll-state\",\n   \"anchored\"\n  ],\n  \"name\": \"container-type\"\n },\n {\n  \"name\": \"content\"\n },\n {\n  \"keywords\": [\n   \"visible\",\n   \"auto\",\n   \"hidden\"\n  ],\n  \"name\": \"content-visibility\"\n },\n {\n  \"keywords\": [\n   \"auto\",\n   \"collapse\",\n   \"-webkit-legacy\"\n  ],\n  \"name\": \"continue\"\n },\n {\n  \"longhands\": [\n   \"corner-end-start-shape\",\n   \"corner-end-end-shape\"\n  ],\n  \"name\": \"corner-block-end-shape\"\n },\n {\n  \"longhands\": [\n   \"corner-start-start-shape\",\n   \"corner-start-end-shape\"\n  ],\n  \"name\": \"corner-block-start-shape\"\n },\n {\n  \"keywords\": [\n   \"notch\",\n   \"scoop\",\n   \"bevel\",\n   \"round\",\n   \"squircle\",\n   \"square\"\n  ],\n  \"name\": \"corner-bottom-left-shape\"\n },\n {\n  \"keywords\": [\n   \"notch\",\n   \"scoop\",\n   \"bevel\",\n   \"round\",\n   \"squircle\",\n   \"square\"\n  ],\n  \"name\": \"corner-bottom-right-shape\"\n },\n {\n  \"longhands\": [\n   \"corner-bottom-left-shape\",\n   \"corner-bottom-right-shape\"\n  ],\n  \"name\": \"corner-bottom-shape\"\n },\n {\n  \"name\": \"corner-end-end-shape\"\n },\n {\n  \"name\": \"corner-end-start-shape\"\n },\n {\n  \"longhands\": [\n   \"corner-start-end-shape\",\n   \"corner-end-end-shape\"\n  ],\n  \"name\": \"corner-inline-end-shape\"\n },\n {\n  \"longhands\": [\n   \"corner-start-start-shape\",\n   \"corner-end-start-shape\"\n  ],\n  \"name\": \"corner-inline-start-shape\"\n },\n {\n  \"longhands\": [\n   \"corner-top-left-shape\",\n   \"corner-bottom-left-shape\"\n  ],\n  \"name\": \"corner-left-shape\"\n },\n {\n  \"longhands\": [\n   \"corner-top-right-shape\",\n   \"corner-bottom-right-shape\"\n  ],\n  \"name\": \"corner-right-shape\"\n },\n {\n  \"longhands\": [\n   \"corner-top-left-shape\",\n   \"corner-top-right-shape\",\n   \"corner-bottom-right-shape\",\n   \"corner-bottom-left-shape\"\n  ],\n  \"name\": \"corner-shape\"\n },\n {\n  \"name\": \"corner-start-end-shape\"\n },\n {\n  \"name\": \"corner-start-start-shape\"\n },\n {\n  \"keywords\": [\n   \"notch\",\n   \"scoop\",\n   \"bevel\",\n   \"round\",\n   \"squircle\",\n   \"square\"\n  ],\n  \"name\": \"corner-top-left-shape\"\n },\n {\n  \"keywords\": [\n   \"notch\",\n   \"scoop\",\n   \"bevel\",\n   \"round\",\n   \"squircle\",\n   \"square\"\n  ],\n  \"name\": \"corner-top-right-shape\"\n },\n {\n  \"longhands\": [\n   \"corner-top-left-shape\",\n   \"corner-top-right-shape\"\n  ],\n  \"name\": \"corner-top-shape\"\n },\n {\n  \"keywords\": [\n   \"normal\"\n  ],\n  \"longhands\": [\n   \"border-top-left-radius\",\n   \"corner-top-left-shape\",\n   \"border-top-right-radius\",\n   \"corner-top-right-shape\",\n   \"border-bottom-right-radius\",\n   \"corner-bottom-right-shape\",\n   \"border-bottom-left-radius\",\n   \"corner-bottom-left-shape\"\n  ],\n  \"name\": \"corners\"\n },\n {\n  \"keywords\": [\n   \"none\"\n  ],\n  \"name\": \"counter-increment\"\n },\n {\n  \"keywords\": [\n   \"none\"\n  ],\n  \"name\": \"counter-reset\"\n },\n {\n  \"keywords\": [\n   \"none\"\n  ],\n  \"name\": \"counter-set\"\n },\n {\n  \"inherited\": true,\n  \"keywords\": [\n   \"auto\",\n   \"default\",\n   \"none\",\n   \"context-menu\",\n   \"help\",\n   \"pointer\",\n   \"progress\",\n   \"wait\",\n   \"cell\",\n   \"crosshair\",\n   \"text\",\n   \"vertical-text\",\n   \"alias\",\n   \"copy\",\n   \"move\",\n   \"no-drop\",\n   \"not-allowed\",\n   \"e-resize\",\n   \"n-resize\",\n   \"ne-resize\",\n   \"nw-resize\",\n   \"s-resize\",\n   \"se-resize\",\n   \"sw-resize\",\n   \"w-resize\",\n   \"ew-resize\",\n   \"ns-resize\",\n   \"nesw-resize\",\n   \"nwse-resize\",\n   \"col-resize\",\n   \"row-resize\",\n   \"all-scroll\",\n   \"zoom-in\",\n   \"zoom-out\",\n   \"grab\",\n   \"grabbing\"\n  ],\n  \"name\": \"cursor\"\n },\n {\n  \"name\": \"cx\"\n },\n {\n  \"name\": \"cy\"\n },\n {\n  \"keywords\": [\n   \"none\"\n  ],\n  \"name\": \"d\"\n },\n {\n  \"name\": \"descent-override\"\n },\n {\n  \"inherited\": true,\n  \"keywords\": [\n   \"ltr\",\n   \"rtl\"\n  ],\n  \"name\": \"direction\"\n },\n {\n  \"keywords\": [\n   \"inline\",\n   \"block\",\n   \"list-item\",\n   \"inline-block\",\n   \"table\",\n   \"inline-table\",\n   \"table-row-group\",\n   \"table-header-group\",\n   \"table-footer-group\",\n   \"table-row\",\n   \"table-column-group\",\n   \"table-column\",\n   \"table-cell\",\n   \"table-caption\",\n   \"-webkit-box\",\n   \"-webkit-inline-box\",\n   \"flex\",\n   \"inline-flex\",\n   \"grid\",\n   \"inline-grid\",\n   \"contents\",\n   \"flow-root\",\n   \"none\",\n   \"flow\",\n   \"math\",\n   \"ruby\",\n   \"ruby-text\",\n   \"grid-lanes\",\n   \"inline-grid-lanes\"\n  ],\n  \"name\": \"display\"\n },\n {\n  \"inherited\": true,\n  \"keywords\": [\n   \"auto\",\n   \"alphabetic\",\n   \"ideographic\",\n   \"middle\",\n   \"central\",\n   \"mathematical\",\n   \"hanging\",\n   \"use-script\",\n   \"no-change\",\n   \"reset-size\",\n   \"text-after-edge\",\n   \"text-before-edge\"\n  ],\n  \"name\": \"dominant-baseline\"\n },\n {\n  \"inherited\": true,\n  \"keywords\": [\n   \"standard\",\n   \"no-limit\",\n   \"constrained\"\n  ],\n  \"name\": \"dynamic-range-limit\"\n },\n {\n  \"inherited\": true,\n  \"keywords\": [\n   \"show\",\n   \"hide\"\n  ],\n  \"name\": \"empty-cells\"\n },\n {\n  \"name\": \"fallback\"\n },\n {\n  \"keywords\": [\n   \"fixed\",\n   \"content\"\n  ],\n  \"name\": \"field-sizing\"\n },\n {\n  \"inherited\": true,\n  \"name\": \"fill\"\n },\n {\n  \"inherited\": true,\n  \"name\": \"fill-opacity\"\n },\n {\n  \"inherited\": true,\n  \"keywords\": [\n   \"nonzero\",\n   \"evenodd\"\n  ],\n  \"name\": \"fill-rule\"\n },\n {\n  \"keywords\": [\n   \"none\"\n  ],\n  \"name\": \"filter\"\n },\n {\n  \"longhands\": [\n   \"flex-grow\",\n   \"flex-shrink\",\n   \"flex-basis\"\n  ],\n  \"name\": \"flex\"\n },\n {\n  \"keywords\": [\n   \"auto\",\n   \"fit-content\",\n   \"min-content\",\n   \"max-content\",\n   \"content\"\n  ],\n  \"name\": \"flex-basis\"\n },\n {\n  \"keywords\": [\n   \"row\",\n   \"row-reverse\",\n   \"column\",\n   \"column-reverse\"\n  ],\n  \"name\": \"flex-direction\"\n },\n {\n  \"longhands\": [\n   \"flex-direction\",\n   \"flex-wrap\"\n  ],\n  \"name\": \"flex-flow\"\n },\n {\n  \"name\": \"flex-grow\"\n },\n {\n  \"name\": \"flex-shrink\"\n },\n {\n  \"keywords\": [\n   \"nowrap\",\n   \"wrap\",\n   \"wrap-reverse\",\n   \"balance\"\n  ],\n  \"name\": \"flex-wrap\"\n },\n {\n  \"keywords\": [\n   \"none\",\n   \"left\",\n   \"right\",\n   \"inline-start\",\n   \"inline-end\"\n  ],\n  \"name\": \"float\"\n },\n {\n  \"keywords\": [\n   \"currentcolor\"\n  ],\n  \"name\": \"flood-color\"\n },\n {\n  \"name\": \"flood-opacity\"\n },\n {\n  \"inherited\": true,\n  \"longhands\": [\n   \"font-style\",\n   \"font-variant-ligatures\",\n   \"font-variant-caps\",\n   \"font-variant-numeric\",\n   \"font-variant-east-asian\",\n   \"font-variant-alternates\",\n   \"font-variant-position\",\n   \"font-variant-emoji\",\n   \"font-weight\",\n   \"font-stretch\",\n   \"font-size\",\n   \"line-height\",\n   \"font-family\",\n   \"font-optical-sizing\",\n   \"font-size-adjust\",\n   \"font-kerning\",\n   \"font-feature-settings\",\n   \"font-variation-settings\",\n   \"font-language-override\"\n  ],\n  \"name\": \"font\"\n },\n {\n  \"name\": \"font-display\"\n },\n {\n  \"inherited\": true,\n  \"name\": \"font-family\"\n },\n {\n  \"inherited\": true,\n  \"keywords\": [\n   \"normal\"\n  ],\n  \"name\": \"font-feature-settings\"\n },\n {\n  \"inherited\": true,\n  \"keywords\": [\n   \"auto\",\n   \"normal\",\n   \"none\"\n  ],\n  \"name\": \"font-kerning\"\n },\n {\n  \"inherited\": true,\n  \"keywords\": [\n   \"normal\"\n  ],\n  \"name\": \"font-language-override\"\n },\n {\n  \"inherited\": true,\n  \"keywords\": [\n   \"auto\",\n   \"none\"\n  ],\n  \"name\": \"font-optical-sizing\"\n },\n {\n  \"inherited\": true,\n  \"keywords\": [\n   \"normal\",\n   \"light\",\n   \"dark\"\n  ],\n  \"name\": \"font-palette\"\n },\n {\n  \"inherited\": true,\n  \"keywords\": [\n   \"xx-small\",\n   \"x-small\",\n   \"small\",\n   \"medium\",\n   \"large\",\n   \"x-large\",\n   \"xx-large\",\n   \"xxx-large\",\n   \"larger\",\n   \"smaller\",\n   \"-webkit-xxx-large\"\n  ],\n  \"name\": \"font-size\"\n },\n {\n  \"inherited\": true,\n  \"keywords\": [\n   \"none\",\n   \"ex-height\",\n   \"cap-height\",\n   \"ch-width\",\n   \"ic-width\",\n   \"ic-height\",\n   \"from-font\"\n  ],\n  \"name\": \"font-size-adjust\"\n },\n {\n  \"inherited\": true,\n  \"keywords\": [\n   \"normal\",\n   \"ultra-condensed\",\n   \"extra-condensed\",\n   \"condensed\",\n   \"semi-condensed\",\n   \"semi-expanded\",\n   \"expanded\",\n   \"extra-expanded\",\n   \"ultra-expanded\"\n  ],\n  \"name\": \"font-stretch\"\n },\n {\n  \"inherited\": true,\n  \"keywords\": [\n   \"normal\",\n   \"italic\",\n   \"oblique\"\n  ],\n  \"name\": \"font-style\"\n },\n {\n  \"inherited\": true,\n  \"longhands\": [\n   \"font-synthesis-weight\",\n   \"font-synthesis-style\",\n   \"font-synthesis-small-caps\"\n  ],\n  \"name\": \"font-synthesis\"\n },\n {\n  \"inherited\": true,\n  \"keywords\": [\n   \"auto\",\n   \"none\"\n  ],\n  \"name\": \"font-synthesis-small-caps\"\n },\n {\n  \"inherited\": true,\n  \"keywords\": [\n   \"auto\",\n   \"none\"\n  ],\n  \"name\": \"font-synthesis-style\"\n },\n {\n  \"inherited\": true,\n  \"keywords\": [\n   \"auto\",\n   \"none\"\n  ],\n  \"name\": \"font-synthesis-weight\"\n },\n {\n  \"inherited\": true,\n  \"longhands\": [\n   \"font-variant-ligatures\",\n   \"font-variant-caps\",\n   \"font-variant-alternates\",\n   \"font-variant-numeric\",\n   \"font-variant-east-asian\",\n   \"font-variant-position\",\n   \"font-variant-emoji\"\n  ],\n  \"name\": \"font-variant\"\n },\n {\n  \"inherited\": true,\n  \"keywords\": [\n   \"normal\"\n  ],\n  \"name\": \"font-variant-alternates\"\n },\n {\n  \"inherited\": true,\n  \"keywords\": [\n   \"normal\",\n   \"small-caps\",\n   \"all-small-caps\",\n   \"petite-caps\",\n   \"all-petite-caps\",\n   \"unicase\",\n   \"titling-caps\"\n  ],\n  \"name\": \"font-variant-caps\"\n },\n {\n  \"inherited\": true,\n  \"keywords\": [\n   \"normal\",\n   \"jis78\",\n   \"jis83\",\n   \"jis90\",\n   \"jis04\",\n   \"simplified\",\n   \"traditional\",\n   \"full-width\",\n   \"proportional-width\",\n   \"ruby\"\n  ],\n  \"name\": \"font-variant-east-asian\"\n },\n {\n  \"inherited\": true,\n  \"keywords\": [\n   \"normal\",\n   \"text\",\n   \"emoji\",\n   \"unicode\"\n  ],\n  \"name\": \"font-variant-emoji\"\n },\n {\n  \"inherited\": true,\n  \"keywords\": [\n   \"normal\",\n   \"none\",\n   \"common-ligatures\",\n   \"no-common-ligatures\",\n   \"discretionary-ligatures\",\n   \"no-discretionary-ligatures\",\n   \"historical-ligatures\",\n   \"no-historical-ligatures\",\n   \"contextual\",\n   \"no-contextual\"\n  ],\n  \"name\": \"font-variant-ligatures\"\n },\n {\n  \"inherited\": true,\n  \"keywords\": [\n   \"normal\",\n   \"lining-nums\",\n   \"oldstyle-nums\",\n   \"proportional-nums\",\n   \"tabular-nums\",\n   \"diagonal-fractions\",\n   \"stacked-fractions\",\n   \"ordinal\",\n   \"slashed-zero\"\n  ],\n  \"name\": \"font-variant-numeric\"\n },\n {\n  \"inherited\": true,\n  \"keywords\": [\n   \"normal\",\n   \"sub\",\n   \"super\"\n  ],\n  \"name\": \"font-variant-position\"\n },\n {\n  \"inherited\": true,\n  \"keywords\": [\n   \"normal\"\n  ],\n  \"name\": \"font-variation-settings\"\n },\n {\n  \"inherited\": true,\n  \"keywords\": [\n   \"normal\",\n   \"bold\",\n   \"bolder\",\n   \"lighter\"\n  ],\n  \"name\": \"font-weight\"\n },\n {\n  \"inherited\": true,\n  \"keywords\": [\n   \"auto\",\n   \"none\",\n   \"preserve-parent-color\"\n  ],\n  \"name\": \"forced-color-adjust\"\n },\n {\n  \"longhands\": [\n   \"row-gap\",\n   \"column-gap\"\n  ],\n  \"name\": \"gap\"\n },\n {\n  \"inherited\": false,\n  \"keywords\": [\n   \"row-over-column\",\n   \"column-over-row\"\n  ],\n  \"name\": \"gap-rule-overlap\"\n },\n {\n  \"longhands\": [\n   \"grid-template-rows\",\n   \"grid-template-columns\",\n   \"grid-template-areas\",\n   \"grid-auto-flow\",\n   \"grid-auto-rows\",\n   \"grid-auto-columns\"\n  ],\n  \"name\": \"grid\"\n },\n {\n  \"longhands\": [\n   \"grid-row-start\",\n   \"grid-column-start\",\n   \"grid-row-end\",\n   \"grid-column-end\"\n  ],\n  \"name\": \"grid-area\"\n },\n {\n  \"keywords\": [\n   \"auto\",\n   \"min-content\",\n   \"max-content\"\n  ],\n  \"name\": \"grid-auto-columns\"\n },\n {\n  \"keywords\": [\n   \"row\",\n   \"column\"\n  ],\n  \"name\": \"grid-auto-flow\"\n },\n {\n  \"keywords\": [\n   \"auto\",\n   \"min-content\",\n   \"max-content\"\n  ],\n  \"name\": \"grid-auto-rows\"\n },\n {\n  \"longhands\": [\n   \"grid-column-start\",\n   \"grid-column-end\"\n  ],\n  \"name\": \"grid-column\"\n },\n {\n  \"keywords\": [\n   \"auto\"\n  ],\n  \"name\": \"grid-column-end\"\n },\n {\n  \"keywords\": [\n   \"auto\"\n  ],\n  \"name\": \"grid-column-start\"\n },\n {\n  \"longhands\": [\n   \"grid-template-areas\",\n   \"grid-template-columns\",\n   \"grid-lanes-direction\",\n   \"grid-lanes-fill\"\n  ],\n  \"name\": \"grid-lanes\"\n },\n {\n  \"keywords\": [\n   \"row\",\n   \"row-reverse\",\n   \"column\",\n   \"column-reverse\"\n  ],\n  \"name\": \"grid-lanes-direction\"\n },\n {\n  \"keywords\": [\n   \"normal\",\n   \"reverse\"\n  ],\n  \"name\": \"grid-lanes-fill\"\n },\n {\n  \"longhands\": [\n   \"grid-lanes-direction\",\n   \"grid-lanes-fill\"\n  ],\n  \"name\": \"grid-lanes-flow\"\n },\n {\n  \"longhands\": [\n   \"grid-row-start\",\n   \"grid-row-end\"\n  ],\n  \"name\": \"grid-row\"\n },\n {\n  \"keywords\": [\n   \"auto\"\n  ],\n  \"name\": \"grid-row-end\"\n },\n {\n  \"keywords\": [\n   \"auto\"\n  ],\n  \"name\": \"grid-row-start\"\n },\n {\n  \"longhands\": [\n   \"grid-template-rows\",\n   \"grid-template-columns\",\n   \"grid-template-areas\"\n  ],\n  \"name\": \"grid-template\"\n },\n {\n  \"keywords\": [\n   \"none\"\n  ],\n  \"name\": \"grid-template-areas\"\n },\n {\n  \"keywords\": [\n   \"none\"\n  ],\n  \"name\": \"grid-template-columns\"\n },\n {\n  \"keywords\": [\n   \"none\"\n  ],\n  \"name\": \"grid-template-rows\"\n },\n {\n  \"keywords\": [\n   \"auto\",\n   \"fit-content\",\n   \"min-content\",\n   \"max-content\"\n  ],\n  \"name\": \"height\"\n },\n {\n  \"inherited\": true,\n  \"name\": \"hyphenate-character\"\n },\n {\n  \"inherited\": true,\n  \"keywords\": [\n   \"auto\"\n  ],\n  \"name\": \"hyphenate-limit-chars\"\n },\n {\n  \"inherited\": true,\n  \"keywords\": [\n   \"none\",\n   \"manual\",\n   \"auto\"\n  ],\n  \"name\": \"hyphens\"\n },\n {\n  \"inherited\": true,\n  \"name\": \"image-orientation\"\n },\n {\n  \"inherited\": true,\n  \"keywords\": [\n   \"auto\",\n   \"optimizespeed\",\n   \"optimizequality\",\n   \"-webkit-optimize-contrast\",\n   \"pixelated\"\n  ],\n  \"name\": \"image-rendering\"\n },\n {\n  \"name\": \"inherits\"\n },\n {\n  \"inherited\": false,\n  \"keywords\": [\n   \"drop\",\n   \"normal\",\n   \"raise\"\n  ],\n  \"name\": \"initial-letter\"\n },\n {\n  \"name\": \"initial-value\"\n },\n {\n  \"keywords\": [\n   \"auto\"\n  ],\n  \"name\": \"inline-size\"\n },\n {\n  \"longhands\": [\n   \"top\",\n   \"right\",\n   \"bottom\",\n   \"left\"\n  ],\n  \"name\": \"inset\"\n },\n {\n  \"longhands\": [\n   \"inset-block-start\",\n   \"inset-block-end\"\n  ],\n  \"name\": \"inset-block\"\n },\n {\n  \"name\": \"inset-block-end\"\n },\n {\n  \"name\": \"inset-block-start\"\n },\n {\n  \"longhands\": [\n   \"inset-inline-start\",\n   \"inset-inline-end\"\n  ],\n  \"name\": \"inset-inline\"\n },\n {\n  \"name\": \"inset-inline-end\"\n },\n {\n  \"name\": \"inset-inline-start\"\n },\n {\n  \"inherited\": true,\n  \"keywords\": [\n   \"auto\",\n   \"inert\"\n  ],\n  \"name\": \"interactivity\"\n },\n {\n  \"longhands\": [\n   \"interest-delay-start\",\n   \"interest-delay-end\"\n  ],\n  \"name\": \"interest-delay\"\n },\n {\n  \"name\": \"interest-delay-end\"\n },\n {\n  \"name\": \"interest-delay-start\"\n },\n {\n  \"inherited\": true,\n  \"keywords\": [\n   \"numeric-only\",\n   \"allow-keywords\"\n  ],\n  \"name\": \"interpolate-size\"\n },\n {\n  \"keywords\": [\n   \"auto\",\n   \"isolate\"\n  ],\n  \"name\": \"isolation\"\n },\n {\n  \"keywords\": [\n   \"normal\",\n   \"infinite\"\n  ],\n  \"name\": \"item-tolerance\"\n },\n {\n  \"name\": \"justify-content\"\n },\n {\n  \"name\": \"justify-items\"\n },\n {\n  \"name\": \"justify-self\"\n },\n {\n  \"keywords\": [\n   \"auto\"\n  ],\n  \"name\": \"left\"\n },\n {\n  \"inherited\": true,\n  \"keywords\": [\n   \"normal\"\n  ],\n  \"name\": \"letter-spacing\"\n },\n {\n  \"keywords\": [\n   \"currentcolor\"\n  ],\n  \"name\": \"lighting-color\"\n },\n {\n  \"inherited\": true,\n  \"keywords\": [\n   \"auto\",\n   \"loose\",\n   \"normal\",\n   \"strict\",\n   \"anywhere\",\n   \"after-white-space\"\n  ],\n  \"name\": \"line-break\"\n },\n {\n  \"longhands\": [\n   \"max-lines\",\n   \"block-ellipsis\",\n   \"continue\"\n  ],\n  \"name\": \"line-clamp\"\n },\n {\n  \"name\": \"line-gap-override\"\n },\n {\n  \"inherited\": true,\n  \"keywords\": [\n   \"normal\"\n  ],\n  \"name\": \"line-height\"\n },\n {\n  \"inherited\": true,\n  \"longhands\": [\n   \"list-style-position\",\n   \"list-style-image\",\n   \"list-style-type\"\n  ],\n  \"name\": \"list-style\"\n },\n {\n  \"inherited\": true,\n  \"keywords\": [\n   \"none\"\n  ],\n  \"name\": \"list-style-image\"\n },\n {\n  \"inherited\": true,\n  \"keywords\": [\n   \"outside\",\n   \"inside\"\n  ],\n  \"name\": \"list-style-position\"\n },\n {\n  \"inherited\": true,\n  \"keywords\": [\n   \"disc\",\n   \"circle\",\n   \"square\",\n   \"disclosure-open\",\n   \"disclosure-closed\",\n   \"decimal\",\n   \"none\"\n  ],\n  \"name\": \"list-style-type\"\n },\n {\n  \"longhands\": [\n   \"margin-top\",\n   \"margin-right\",\n   \"margin-bottom\",\n   \"margin-left\"\n  ],\n  \"name\": \"margin\"\n },\n {\n  \"longhands\": [\n   \"margin-block-start\",\n   \"margin-block-end\"\n  ],\n  \"name\": \"margin-block\"\n },\n {\n  \"keywords\": [\n   \"auto\"\n  ],\n  \"name\": \"margin-block-end\"\n },\n {\n  \"keywords\": [\n   \"auto\"\n  ],\n  \"name\": \"margin-block-start\"\n },\n {\n  \"keywords\": [\n   \"auto\"\n  ],\n  \"name\": \"margin-bottom\"\n },\n {\n  \"longhands\": [\n   \"margin-inline-start\",\n   \"margin-inline-end\"\n  ],\n  \"name\": \"margin-inline\"\n },\n {\n  \"keywords\": [\n   \"auto\"\n  ],\n  \"name\": \"margin-inline-end\"\n },\n {\n  \"keywords\": [\n   \"auto\"\n  ],\n  \"name\": \"margin-inline-start\"\n },\n {\n  \"keywords\": [\n   \"auto\"\n  ],\n  \"name\": \"margin-left\"\n },\n {\n  \"keywords\": [\n   \"auto\"\n  ],\n  \"name\": \"margin-right\"\n },\n {\n  \"keywords\": [\n   \"auto\"\n  ],\n  \"name\": \"margin-top\"\n },\n {\n  \"inherited\": true,\n  \"longhands\": [\n   \"marker-start\",\n   \"marker-mid\",\n   \"marker-end\"\n  ],\n  \"name\": \"marker\"\n },\n {\n  \"inherited\": true,\n  \"keywords\": [\n   \"none\"\n  ],\n  \"name\": \"marker-end\"\n },\n {\n  \"inherited\": true,\n  \"keywords\": [\n   \"none\"\n  ],\n  \"name\": \"marker-mid\"\n },\n {\n  \"inherited\": true,\n  \"keywords\": [\n   \"none\"\n  ],\n  \"name\": \"marker-start\"\n },\n {\n  \"longhands\": [\n   \"mask-image\",\n   \"-webkit-mask-position-x\",\n   \"-webkit-mask-position-y\",\n   \"mask-size\",\n   \"mask-repeat\",\n   \"mask-origin\",\n   \"mask-clip\",\n   \"mask-composite\",\n   \"mask-mode\"\n  ],\n  \"name\": \"mask\"\n },\n {\n  \"name\": \"mask-clip\"\n },\n {\n  \"keywords\": [\n   \"add\",\n   \"subtract\",\n   \"intersect\",\n   \"exclude\"\n  ],\n  \"name\": \"mask-composite\"\n },\n {\n  \"name\": \"mask-image\"\n },\n {\n  \"keywords\": [\n   \"alpha\",\n   \"luminance\",\n   \"match-source\"\n  ],\n  \"name\": \"mask-mode\"\n },\n {\n  \"name\": \"mask-origin\"\n },\n {\n  \"longhands\": [\n   \"-webkit-mask-position-x\",\n   \"-webkit-mask-position-y\"\n  ],\n  \"name\": \"mask-position\"\n },\n {\n  \"name\": \"mask-repeat\"\n },\n {\n  \"name\": \"mask-size\"\n },\n {\n  \"keywords\": [\n   \"luminance\",\n   \"alpha\"\n  ],\n  \"name\": \"mask-type\"\n },\n {\n  \"inherited\": true,\n  \"name\": \"math-depth\"\n },\n {\n  \"inherited\": true,\n  \"keywords\": [\n   \"normal\",\n   \"compact\"\n  ],\n  \"name\": \"math-shift\"\n },\n {\n  \"inherited\": true,\n  \"keywords\": [\n   \"normal\",\n   \"compact\"\n  ],\n  \"name\": \"math-style\"\n },\n {\n  \"keywords\": [\n   \"none\"\n  ],\n  \"name\": \"max-block-size\"\n },\n {\n  \"keywords\": [\n   \"none\"\n  ],\n  \"name\": \"max-height\"\n },\n {\n  \"keywords\": [\n   \"none\"\n  ],\n  \"name\": \"max-inline-size\"\n },\n {\n  \"keywords\": [\n   \"none\"\n  ],\n  \"name\": \"max-lines\"\n },\n {\n  \"keywords\": [\n   \"none\"\n  ],\n  \"name\": \"max-width\"\n },\n {\n  \"name\": \"min-block-size\"\n },\n {\n  \"name\": \"min-height\"\n },\n {\n  \"name\": \"min-inline-size\"\n },\n {\n  \"name\": \"min-width\"\n },\n {\n  \"keywords\": [\n   \"normal\",\n   \"multiply\",\n   \"screen\",\n   \"overlay\",\n   \"darken\",\n   \"lighten\",\n   \"color-dodge\",\n   \"color-burn\",\n   \"hard-light\",\n   \"soft-light\",\n   \"difference\",\n   \"exclusion\",\n   \"hue\",\n   \"saturation\",\n   \"color\",\n   \"luminosity\",\n   \"plus-lighter\"\n  ],\n  \"name\": \"mix-blend-mode\"\n },\n {\n  \"name\": \"navigation\"\n },\n {\n  \"name\": \"negative\"\n },\n {\n  \"keywords\": [\n   \"fill\",\n   \"contain\",\n   \"cover\",\n   \"none\",\n   \"scale-down\"\n  ],\n  \"name\": \"object-fit\"\n },\n {\n  \"name\": \"object-position\"\n },\n {\n  \"keywords\": [\n   \"none\"\n  ],\n  \"name\": \"object-view-box\"\n },\n {\n  \"longhands\": [\n   \"offset-position\",\n   \"offset-path\",\n   \"offset-distance\",\n   \"offset-rotate\",\n   \"offset-anchor\"\n  ],\n  \"name\": \"offset\"\n },\n {\n  \"keywords\": [\n   \"auto\"\n  ],\n  \"name\": \"offset-anchor\"\n },\n {\n  \"name\": \"offset-distance\"\n },\n {\n  \"keywords\": [\n   \"none\"\n  ],\n  \"name\": \"offset-path\"\n },\n {\n  \"keywords\": [\n   \"auto\",\n   \"normal\"\n  ],\n  \"name\": \"offset-position\"\n },\n {\n  \"keywords\": [\n   \"auto\",\n   \"reverse\"\n  ],\n  \"name\": \"offset-rotate\"\n },\n {\n  \"name\": \"opacity\"\n },\n {\n  \"name\": \"order\"\n },\n {\n  \"keywords\": [\n   \"normal\",\n   \"none\"\n  ],\n  \"name\": \"origin-trial-test-property\"\n },\n {\n  \"inherited\": true,\n  \"name\": \"orphans\"\n },\n {\n  \"longhands\": [\n   \"outline-color\",\n   \"outline-style\",\n   \"outline-width\"\n  ],\n  \"name\": \"outline\"\n },\n {\n  \"keywords\": [\n   \"currentcolor\"\n  ],\n  \"name\": \"outline-color\"\n },\n {\n  \"name\": \"outline-offset\"\n },\n {\n  \"keywords\": [\n   \"none\",\n   \"hidden\",\n   \"inset\",\n   \"groove\",\n   \"outset\",\n   \"ridge\",\n   \"dotted\",\n   \"dashed\",\n   \"solid\",\n   \"double\"\n  ],\n  \"name\": \"outline-style\"\n },\n {\n  \"keywords\": [\n   \"thin\",\n   \"medium\",\n   \"thick\"\n  ],\n  \"name\": \"outline-width\"\n },\n {\n  \"longhands\": [\n   \"overflow-x\",\n   \"overflow-y\"\n  ],\n  \"name\": \"overflow\"\n },\n {\n  \"inherited\": false,\n  \"keywords\": [\n   \"visible\",\n   \"none\",\n   \"auto\"\n  ],\n  \"name\": \"overflow-anchor\"\n },\n {\n  \"name\": \"overflow-block\"\n },\n {\n  \"keywords\": [\n   \"border-box\",\n   \"content-box\",\n   \"padding-box\"\n  ],\n  \"name\": \"overflow-clip-margin\"\n },\n {\n  \"name\": \"overflow-inline\"\n },\n {\n  \"inherited\": true,\n  \"keywords\": [\n   \"normal\",\n   \"break-word\",\n   \"anywhere\"\n  ],\n  \"name\": \"overflow-wrap\"\n },\n {\n  \"keywords\": [\n   \"visible\",\n   \"hidden\",\n   \"scroll\",\n   \"auto\",\n   \"overlay\",\n   \"clip\"\n  ],\n  \"name\": \"overflow-x\"\n },\n {\n  \"keywords\": [\n   \"visible\",\n   \"hidden\",\n   \"scroll\",\n   \"auto\",\n   \"overlay\",\n   \"clip\"\n  ],\n  \"name\": \"overflow-y\"\n },\n {\n  \"keywords\": [\n   \"none\",\n   \"auto\"\n  ],\n  \"name\": \"overlay\"\n },\n {\n  \"name\": \"override-colors\"\n },\n {\n  \"keywords\": [\n   \"none\"\n  ],\n  \"name\": \"overscroll-area\"\n },\n {\n  \"longhands\": [\n   \"overscroll-behavior-x\",\n   \"overscroll-behavior-y\"\n  ],\n  \"name\": \"overscroll-behavior\"\n },\n {\n  \"name\": \"overscroll-behavior-block\"\n },\n {\n  \"name\": \"overscroll-behavior-inline\"\n },\n {\n  \"keywords\": [\n   \"auto\",\n   \"contain\",\n   \"none\"\n  ],\n  \"name\": \"overscroll-behavior-x\"\n },\n {\n  \"keywords\": [\n   \"auto\",\n   \"contain\",\n   \"none\"\n  ],\n  \"name\": \"overscroll-behavior-y\"\n },\n {\n  \"keywords\": [\n   \"none\"\n  ],\n  \"name\": \"overscroll-position\"\n },\n {\n  \"name\": \"pad\"\n },\n {\n  \"longhands\": [\n   \"padding-top\",\n   \"padding-right\",\n   \"padding-bottom\",\n   \"padding-left\"\n  ],\n  \"name\": \"padding\"\n },\n {\n  \"longhands\": [\n   \"padding-block-start\",\n   \"padding-block-end\"\n  ],\n  \"name\": \"padding-block\"\n },\n {\n  \"name\": \"padding-block-end\"\n },\n {\n  \"name\": \"padding-block-start\"\n },\n {\n  \"name\": \"padding-bottom\"\n },\n {\n  \"longhands\": [\n   \"padding-inline-start\",\n   \"padding-inline-end\"\n  ],\n  \"name\": \"padding-inline\"\n },\n {\n  \"name\": \"padding-inline-end\"\n },\n {\n  \"name\": \"padding-inline-start\"\n },\n {\n  \"name\": \"padding-left\"\n },\n {\n  \"name\": \"padding-right\"\n },\n {\n  \"name\": \"padding-top\"\n },\n {\n  \"keywords\": [\n   \"auto\"\n  ],\n  \"name\": \"page\"\n },\n {\n  \"longhands\": [\n   \"break-after\"\n  ],\n  \"name\": \"page-break-after\"\n },\n {\n  \"longhands\": [\n   \"break-before\"\n  ],\n  \"name\": \"page-break-before\"\n },\n {\n  \"longhands\": [\n   \"break-inside\"\n  ],\n  \"name\": \"page-break-inside\"\n },\n {\n  \"name\": \"page-orientation\"\n },\n {\n  \"inherited\": true,\n  \"keywords\": [\n   \"normal\",\n   \"fill\",\n   \"stroke\",\n   \"markers\"\n  ],\n  \"name\": \"paint-order\"\n },\n {\n  \"keywords\": [\n   \"none\"\n  ],\n  \"name\": \"perspective\"\n },\n {\n  \"name\": \"perspective-origin\"\n },\n {\n  \"longhands\": [\n   \"align-content\",\n   \"justify-content\"\n  ],\n  \"name\": \"place-content\"\n },\n {\n  \"longhands\": [\n   \"align-items\",\n   \"justify-items\"\n  ],\n  \"name\": \"place-items\"\n },\n {\n  \"longhands\": [\n   \"align-self\",\n   \"justify-self\"\n  ],\n  \"name\": \"place-self\"\n },\n {\n  \"inherited\": true,\n  \"keywords\": [\n   \"none\",\n   \"auto\",\n   \"stroke\",\n   \"fill\",\n   \"painted\",\n   \"visible\",\n   \"visiblestroke\",\n   \"visiblefill\",\n   \"visiblepainted\",\n   \"bounding-box\",\n   \"all\"\n  ],\n  \"name\": \"pointer-events\"\n },\n {\n  \"keywords\": [\n   \"static\",\n   \"relative\",\n   \"absolute\",\n   \"fixed\",\n   \"sticky\"\n  ],\n  \"name\": \"position\"\n },\n {\n  \"keywords\": [\n   \"auto\",\n   \"none\"\n  ],\n  \"name\": \"position-anchor\"\n },\n {\n  \"keywords\": [\n   \"none\",\n   \"top\",\n   \"bottom\",\n   \"center\",\n   \"left\",\n   \"right\",\n   \"x-start\",\n   \"x-end\",\n   \"y-start\",\n   \"y-end\",\n   \"start\",\n   \"end\",\n   \"self-start\",\n   \"self-end\",\n   \"all\"\n  ],\n  \"name\": \"position-area\"\n },\n {\n  \"longhands\": [\n   \"position-try-order\",\n   \"position-try-fallbacks\"\n  ],\n  \"name\": \"position-try\"\n },\n {\n  \"keywords\": [\n   \"none\",\n   \"flip-block\",\n   \"flip-inline\",\n   \"flip-start\"\n  ],\n  \"name\": \"position-try-fallbacks\"\n },\n {\n  \"keywords\": [\n   \"normal\",\n   \"most-width\",\n   \"most-height\",\n   \"most-block-size\",\n   \"most-inline-size\"\n  ],\n  \"name\": \"position-try-order\"\n },\n {\n  \"keywords\": [\n   \"always\",\n   \"anchors-visible\",\n   \"no-overflow\"\n  ],\n  \"name\": \"position-visibility\"\n },\n {\n  \"name\": \"prefix\"\n },\n {\n  \"inherited\": true,\n  \"keywords\": [\n   \"economy\",\n   \"exact\"\n  ],\n  \"name\": \"print-color-adjust\"\n },\n {\n  \"inherited\": true,\n  \"keywords\": [\n   \"auto\",\n   \"none\"\n  ],\n  \"name\": \"quotes\"\n },\n {\n  \"name\": \"r\"\n },\n {\n  \"name\": \"range\"\n },\n {\n  \"keywords\": [\n   \"normal\",\n   \"flex-visual\",\n   \"flex-flow\",\n   \"grid-rows\",\n   \"grid-columns\",\n   \"grid-order\",\n   \"source-order\"\n  ],\n  \"name\": \"reading-flow\"\n },\n {\n  \"name\": \"reading-order\"\n },\n {\n  \"keywords\": [\n   \"none\",\n   \"both\",\n   \"horizontal\",\n   \"vertical\",\n   \"block\",\n   \"inline\"\n  ],\n  \"name\": \"resize\"\n },\n {\n  \"name\": \"result\"\n },\n {\n  \"keywords\": [\n   \"auto\"\n  ],\n  \"name\": \"right\"\n },\n {\n  \"name\": \"rotate\"\n },\n {\n  \"keywords\": [\n   \"normal\"\n  ],\n  \"name\": \"row-gap\"\n },\n {\n  \"longhands\": [\n   \"row-rule-width\",\n   \"row-rule-style\",\n   \"row-rule-color\"\n  ],\n  \"name\": \"row-rule\"\n },\n {\n  \"inherited\": false,\n  \"keywords\": [\n   \"none\",\n   \"spanning-item\",\n   \"intersection\"\n  ],\n  \"name\": \"row-rule-break\"\n },\n {\n  \"keywords\": [\n   \"currentcolor\"\n  ],\n  \"name\": \"row-rule-color\"\n },\n {\n  \"inherited\": false,\n  \"name\": \"row-rule-edge-end-inset\"\n },\n {\n  \"inherited\": false,\n  \"name\": \"row-rule-edge-start-inset\"\n },\n {\n  \"longhands\": [\n   \"row-rule-edge-start-inset\",\n   \"row-rule-edge-end-inset\",\n   \"row-rule-interior-start-inset\",\n   \"row-rule-interior-end-inset\"\n  ],\n  \"name\": \"row-rule-inset\"\n },\n {\n  \"inherited\": false,\n  \"name\": \"row-rule-interior-end-inset\"\n },\n {\n  \"inherited\": false,\n  \"name\": \"row-rule-interior-start-inset\"\n },\n {\n  \"keywords\": [\n   \"none\",\n   \"hidden\",\n   \"inset\",\n   \"groove\",\n   \"outset\",\n   \"ridge\",\n   \"dotted\",\n   \"dashed\",\n   \"solid\",\n   \"double\"\n  ],\n  \"name\": \"row-rule-style\"\n },\n {\n  \"inherited\": false,\n  \"keywords\": [\n   \"all\",\n   \"around\",\n   \"between\",\n   \"none\"\n  ],\n  \"name\": \"row-rule-visibility-items\"\n },\n {\n  \"keywords\": [\n   \"thin\",\n   \"medium\",\n   \"thick\"\n  ],\n  \"name\": \"row-rule-width\"\n },\n {\n  \"inherited\": true,\n  \"keywords\": [\n   \"space-around\",\n   \"start\",\n   \"center\",\n   \"space-between\"\n  ],\n  \"name\": \"ruby-align\"\n },\n {\n  \"inherited\": true,\n  \"keywords\": [\n   \"auto\",\n   \"none\"\n  ],\n  \"name\": \"ruby-overhang\"\n },\n {\n  \"inherited\": true,\n  \"keywords\": [\n   \"over\",\n   \"under\"\n  ],\n  \"name\": \"ruby-position\"\n },\n {\n  \"longhands\": [\n   \"column-rule-width\",\n   \"column-rule-style\",\n   \"column-rule-color\",\n   \"row-rule-width\",\n   \"row-rule-style\",\n   \"row-rule-color\"\n  ],\n  \"name\": \"rule\"\n },\n {\n  \"longhands\": [\n   \"row-rule-break\",\n   \"column-rule-break\"\n  ],\n  \"name\": \"rule-break\"\n },\n {\n  \"longhands\": [\n   \"column-rule-color\",\n   \"row-rule-color\"\n  ],\n  \"name\": \"rule-color\"\n },\n {\n  \"longhands\": [\n   \"row-rule-edge-start-inset\",\n   \"row-rule-edge-end-inset\",\n   \"row-rule-interior-start-inset\",\n   \"row-rule-interior-end-inset\",\n   \"column-rule-edge-start-inset\",\n   \"column-rule-edge-end-inset\",\n   \"column-rule-interior-start-inset\",\n   \"column-rule-interior-end-inset\"\n  ],\n  \"name\": \"rule-inset\"\n },\n {\n  \"longhands\": [\n   \"column-rule-style\",\n   \"row-rule-style\"\n  ],\n  \"name\": \"rule-style\"\n },\n {\n  \"longhands\": [\n   \"column-rule-width\",\n   \"row-rule-width\"\n  ],\n  \"name\": \"rule-width\"\n },\n {\n  \"keywords\": [\n   \"auto\"\n  ],\n  \"name\": \"rx\"\n },\n {\n  \"keywords\": [\n   \"auto\"\n  ],\n  \"name\": \"ry\"\n },\n {\n  \"name\": \"scale\"\n },\n {\n  \"keywords\": [\n   \"auto\",\n   \"smooth\"\n  ],\n  \"name\": \"scroll-behavior\"\n },\n {\n  \"keywords\": [\n   \"none\",\n   \"nearest\"\n  ],\n  \"name\": \"scroll-initial-target\"\n },\n {\n  \"longhands\": [\n   \"scroll-margin-top\",\n   \"scroll-margin-right\",\n   \"scroll-margin-bottom\",\n   \"scroll-margin-left\"\n  ],\n  \"name\": \"scroll-margin\"\n },\n {\n  \"longhands\": [\n   \"scroll-margin-block-start\",\n   \"scroll-margin-block-end\"\n  ],\n  \"name\": \"scroll-margin-block\"\n },\n {\n  \"name\": \"scroll-margin-block-end\"\n },\n {\n  \"name\": \"scroll-margin-block-start\"\n },\n {\n  \"name\": \"scroll-margin-bottom\"\n },\n {\n  \"longhands\": [\n   \"scroll-margin-inline-start\",\n   \"scroll-margin-inline-end\"\n  ],\n  \"name\": \"scroll-margin-inline\"\n },\n {\n  \"name\": \"scroll-margin-inline-end\"\n },\n {\n  \"name\": \"scroll-margin-inline-start\"\n },\n {\n  \"name\": \"scroll-margin-left\"\n },\n {\n  \"name\": \"scroll-margin-right\"\n },\n {\n  \"name\": \"scroll-margin-top\"\n },\n {\n  \"name\": \"scroll-marker-group\"\n },\n {\n  \"longhands\": [\n   \"scroll-padding-top\",\n   \"scroll-padding-right\",\n   \"scroll-padding-bottom\",\n   \"scroll-padding-left\"\n  ],\n  \"name\": \"scroll-padding\"\n },\n {\n  \"longhands\": [\n   \"scroll-padding-block-start\",\n   \"scroll-padding-block-end\"\n  ],\n  \"name\": \"scroll-padding-block\"\n },\n {\n  \"keywords\": [\n   \"auto\"\n  ],\n  \"name\": \"scroll-padding-block-end\"\n },\n {\n  \"keywords\": [\n   \"auto\"\n  ],\n  \"name\": \"scroll-padding-block-start\"\n },\n {\n  \"keywords\": [\n   \"auto\"\n  ],\n  \"name\": \"scroll-padding-bottom\"\n },\n {\n  \"longhands\": [\n   \"scroll-padding-inline-start\",\n   \"scroll-padding-inline-end\"\n  ],\n  \"name\": \"scroll-padding-inline\"\n },\n {\n  \"keywords\": [\n   \"auto\"\n  ],\n  \"name\": \"scroll-padding-inline-end\"\n },\n {\n  \"keywords\": [\n   \"auto\"\n  ],\n  \"name\": \"scroll-padding-inline-start\"\n },\n {\n  \"keywords\": [\n   \"auto\"\n  ],\n  \"name\": \"scroll-padding-left\"\n },\n {\n  \"keywords\": [\n   \"auto\"\n  ],\n  \"name\": \"scroll-padding-right\"\n },\n {\n  \"keywords\": [\n   \"auto\"\n  ],\n  \"name\": \"scroll-padding-top\"\n },\n {\n  \"keywords\": [\n   \"none\",\n   \"start\",\n   \"end\",\n   \"center\"\n  ],\n  \"name\": \"scroll-snap-align\"\n },\n {\n  \"keywords\": [\n   \"normal\",\n   \"always\"\n  ],\n  \"name\": \"scroll-snap-stop\"\n },\n {\n  \"keywords\": [\n   \"none\",\n   \"x\",\n   \"y\",\n   \"block\",\n   \"inline\",\n   \"both\",\n   \"mandatory\",\n   \"proximity\"\n  ],\n  \"name\": \"scroll-snap-type\"\n },\n {\n  \"keywords\": [\n   \"none\",\n   \"auto\"\n  ],\n  \"name\": \"scroll-target-group\"\n },\n {\n  \"longhands\": [\n   \"scroll-timeline-name\",\n   \"scroll-timeline-axis\"\n  ],\n  \"name\": \"scroll-timeline\"\n },\n {\n  \"name\": \"scroll-timeline-axis\"\n },\n {\n  \"name\": \"scroll-timeline-name\"\n },\n {\n  \"inherited\": true,\n  \"keywords\": [\n   \"auto\"\n  ],\n  \"name\": \"scrollbar-color\"\n },\n {\n  \"inherited\": false,\n  \"keywords\": [\n   \"auto\",\n   \"stable\",\n   \"both-edges\"\n  ],\n  \"name\": \"scrollbar-gutter\"\n },\n {\n  \"inherited\": false,\n  \"keywords\": [\n   \"auto\",\n   \"thin\",\n   \"none\"\n  ],\n  \"name\": \"scrollbar-width\"\n },\n {\n  \"name\": \"shape-image-threshold\"\n },\n {\n  \"keywords\": [\n   \"none\"\n  ],\n  \"name\": \"shape-margin\"\n },\n {\n  \"keywords\": [\n   \"none\"\n  ],\n  \"name\": \"shape-outside\"\n },\n {\n  \"inherited\": true,\n  \"keywords\": [\n   \"auto\",\n   \"optimizespeed\",\n   \"crispedges\",\n   \"geometricprecision\"\n  ],\n  \"name\": \"shape-rendering\"\n },\n {\n  \"name\": \"size\"\n },\n {\n  \"name\": \"size-adjust\"\n },\n {\n  \"inherited\": true,\n  \"keywords\": [\n   \"none\",\n   \"normal\",\n   \"spell-out\",\n   \"digits\",\n   \"literal-punctuation\",\n   \"no-punctuation\"\n  ],\n  \"name\": \"speak\"\n },\n {\n  \"name\": \"speak-as\"\n },\n {\n  \"name\": \"src\"\n },\n {\n  \"keywords\": [\n   \"currentcolor\"\n  ],\n  \"name\": \"stop-color\"\n },\n {\n  \"name\": \"stop-opacity\"\n },\n {\n  \"inherited\": true,\n  \"name\": \"stroke\"\n },\n {\n  \"inherited\": true,\n  \"keywords\": [\n   \"none\"\n  ],\n  \"name\": \"stroke-dasharray\"\n },\n {\n  \"inherited\": true,\n  \"name\": \"stroke-dashoffset\"\n },\n {\n  \"inherited\": true,\n  \"keywords\": [\n   \"butt\",\n   \"round\",\n   \"square\"\n  ],\n  \"name\": \"stroke-linecap\"\n },\n {\n  \"inherited\": true,\n  \"keywords\": [\n   \"miter\",\n   \"bevel\",\n   \"round\"\n  ],\n  \"name\": \"stroke-linejoin\"\n },\n {\n  \"inherited\": true,\n  \"name\": \"stroke-miterlimit\"\n },\n {\n  \"inherited\": true,\n  \"name\": \"stroke-opacity\"\n },\n {\n  \"inherited\": true,\n  \"name\": \"stroke-width\"\n },\n {\n  \"name\": \"suffix\"\n },\n {\n  \"name\": \"symbols\"\n },\n {\n  \"name\": \"syntax\"\n },\n {\n  \"name\": \"system\"\n },\n {\n  \"inherited\": true,\n  \"name\": \"tab-size\"\n },\n {\n  \"keywords\": [\n   \"auto\",\n   \"fixed\"\n  ],\n  \"name\": \"table-layout\"\n },\n {\n  \"inherited\": true,\n  \"keywords\": [\n   \"left\",\n   \"right\",\n   \"center\",\n   \"justify\",\n   \"-webkit-left\",\n   \"-webkit-right\",\n   \"-webkit-center\",\n   \"start\",\n   \"end\",\n   \"match-parent\"\n  ],\n  \"name\": \"text-align\"\n },\n {\n  \"inherited\": true,\n  \"keywords\": [\n   \"auto\",\n   \"start\",\n   \"end\",\n   \"left\",\n   \"right\",\n   \"center\",\n   \"justify\",\n   \"match-parent\"\n  ],\n  \"name\": \"text-align-last\"\n },\n {\n  \"inherited\": true,\n  \"keywords\": [\n   \"start\",\n   \"middle\",\n   \"end\"\n  ],\n  \"name\": \"text-anchor\"\n },\n {\n  \"inherited\": true,\n  \"keywords\": [\n   \"no-autospace\",\n   \"normal\"\n  ],\n  \"name\": \"text-autospace\"\n },\n {\n  \"longhands\": [\n   \"text-box-trim\",\n   \"text-box-edge\"\n  ],\n  \"name\": \"text-box\"\n },\n {\n  \"inherited\": true,\n  \"name\": \"text-box-edge\"\n },\n {\n  \"keywords\": [\n   \"none\",\n   \"trim-start\",\n   \"trim-end\",\n   \"trim-both\"\n  ],\n  \"name\": \"text-box-trim\"\n },\n {\n  \"inherited\": true,\n  \"keywords\": [\n   \"none\",\n   \"all\"\n  ],\n  \"name\": \"text-combine-upright\"\n },\n {\n  \"longhands\": [\n   \"text-decoration-line\",\n   \"text-decoration-thickness\",\n   \"text-decoration-style\",\n   \"text-decoration-color\"\n  ],\n  \"name\": \"text-decoration\"\n },\n {\n  \"keywords\": [\n   \"currentcolor\"\n  ],\n  \"name\": \"text-decoration-color\"\n },\n {\n  \"keywords\": [\n   \"none\",\n   \"underline\",\n   \"overline\",\n   \"line-through\",\n   \"blink\",\n   \"spelling-error\",\n   \"grammar-error\"\n  ],\n  \"name\": \"text-decoration-line\"\n },\n {\n  \"inherited\": true,\n  \"keywords\": [\n   \"none\",\n   \"auto\"\n  ],\n  \"name\": \"text-decoration-skip-ink\"\n },\n {\n  \"keywords\": [\n   \"solid\",\n   \"double\",\n   \"dotted\",\n   \"dashed\",\n   \"wavy\"\n  ],\n  \"name\": \"text-decoration-style\"\n },\n {\n  \"inherited\": false,\n  \"keywords\": [\n   \"auto\",\n   \"from-font\"\n  ],\n  \"name\": \"text-decoration-thickness\"\n },\n {\n  \"inherited\": true,\n  \"longhands\": [\n   \"text-emphasis-style\",\n   \"text-emphasis-color\"\n  ],\n  \"name\": \"text-emphasis\"\n },\n {\n  \"inherited\": true,\n  \"keywords\": [\n   \"currentcolor\"\n  ],\n  \"name\": \"text-emphasis-color\"\n },\n {\n  \"inherited\": true,\n  \"name\": \"text-emphasis-position\"\n },\n {\n  \"inherited\": true,\n  \"name\": \"text-emphasis-style\"\n },\n {\n  \"name\": \"text-grow\"\n },\n {\n  \"inherited\": true,\n  \"name\": \"text-indent\"\n },\n {\n  \"inherited\": true,\n  \"keywords\": [\n   \"auto\",\n   \"none\",\n   \"inter-word\",\n   \"inter-character\"\n  ],\n  \"name\": \"text-justify\"\n },\n {\n  \"inherited\": true,\n  \"keywords\": [\n   \"sideways\",\n   \"mixed\",\n   \"upright\"\n  ],\n  \"name\": \"text-orientation\"\n },\n {\n  \"keywords\": [\n   \"clip\",\n   \"ellipsis\"\n  ],\n  \"name\": \"text-overflow\"\n },\n {\n  \"inherited\": true,\n  \"keywords\": [\n   \"auto\",\n   \"optimizespeed\",\n   \"optimizelegibility\",\n   \"geometricprecision\"\n  ],\n  \"name\": \"text-rendering\"\n },\n {\n  \"inherited\": true,\n  \"keywords\": [\n   \"none\"\n  ],\n  \"name\": \"text-shadow\"\n },\n {\n  \"name\": \"text-shrink\"\n },\n {\n  \"inherited\": true,\n  \"keywords\": [\n   \"none\",\n   \"auto\"\n  ],\n  \"name\": \"text-size-adjust\"\n },\n {\n  \"inherited\": true,\n  \"longhands\": [\n   \"text-autospace\",\n   \"text-spacing-trim\"\n  ],\n  \"name\": \"text-spacing\"\n },\n {\n  \"inherited\": true,\n  \"keywords\": [\n   \"normal\",\n   \"space-all\",\n   \"space-first\",\n   \"trim-start\"\n  ],\n  \"name\": \"text-spacing-trim\"\n },\n {\n  \"inherited\": true,\n  \"keywords\": [\n   \"capitalize\",\n   \"uppercase\",\n   \"lowercase\",\n   \"full-width\",\n   \"none\",\n   \"math-auto\"\n  ],\n  \"name\": \"text-transform\"\n },\n {\n  \"inherited\": true,\n  \"keywords\": [\n   \"auto\"\n  ],\n  \"name\": \"text-underline-offset\"\n },\n {\n  \"inherited\": true,\n  \"keywords\": [\n   \"auto\",\n   \"from-font\",\n   \"under\",\n   \"left\",\n   \"right\"\n  ],\n  \"name\": \"text-underline-position\"\n },\n {\n  \"inherited\": true,\n  \"longhands\": [\n   \"text-wrap-mode\",\n   \"text-wrap-style\"\n  ],\n  \"name\": \"text-wrap\"\n },\n {\n  \"inherited\": true,\n  \"keywords\": [\n   \"wrap\",\n   \"nowrap\"\n  ],\n  \"name\": \"text-wrap-mode\"\n },\n {\n  \"inherited\": true,\n  \"keywords\": [\n   \"auto\",\n   \"balance\",\n   \"pretty\",\n   \"stable\"\n  ],\n  \"name\": \"text-wrap-style\"\n },\n {\n  \"name\": \"timeline-scope\"\n },\n {\n  \"longhands\": [\n   \"timeline-trigger-name\",\n   \"timeline-trigger-source\",\n   \"timeline-trigger-range-start\",\n   \"timeline-trigger-range-end\",\n   \"timeline-trigger-exit-range-start\",\n   \"timeline-trigger-exit-range-end\"\n  ],\n  \"name\": \"timeline-trigger\"\n },\n {\n  \"name\": \"timeline-trigger-exit-range-end\"\n },\n {\n  \"name\": \"timeline-trigger-exit-range-start\"\n },\n {\n  \"name\": \"timeline-trigger-name\"\n },\n {\n  \"name\": \"timeline-trigger-range-end\"\n },\n {\n  \"name\": \"timeline-trigger-range-start\"\n },\n {\n  \"keywords\": [\n   \"none\",\n   \"auto\"\n  ],\n  \"name\": \"timeline-trigger-source\"\n },\n {\n  \"keywords\": [\n   \"auto\"\n  ],\n  \"name\": \"top\"\n },\n {\n  \"keywords\": [\n   \"auto\",\n   \"none\",\n   \"pan-x\",\n   \"pan-left\",\n   \"pan-right\",\n   \"pan-y\",\n   \"pan-up\",\n   \"pan-down\",\n   \"pinch-zoom\",\n   \"manipulation\"\n  ],\n  \"name\": \"touch-action\"\n },\n {\n  \"keywords\": [\n   \"none\"\n  ],\n  \"name\": \"transform\"\n },\n {\n  \"keywords\": [\n   \"content-box\",\n   \"border-box\",\n   \"fill-box\",\n   \"stroke-box\",\n   \"view-box\"\n  ],\n  \"name\": \"transform-box\"\n },\n {\n  \"name\": \"transform-origin\"\n },\n {\n  \"keywords\": [\n   \"flat\",\n   \"preserve-3d\"\n  ],\n  \"name\": \"transform-style\"\n },\n {\n  \"longhands\": [\n   \"transition-property\",\n   \"transition-duration\",\n   \"transition-timing-function\",\n   \"transition-delay\",\n   \"transition-behavior\"\n  ],\n  \"name\": \"transition\"\n },\n {\n  \"keywords\": [\n   \"normal\",\n   \"allow-discrete\"\n  ],\n  \"name\": \"transition-behavior\"\n },\n {\n  \"name\": \"transition-delay\"\n },\n {\n  \"name\": \"transition-duration\"\n },\n {\n  \"keywords\": [\n   \"none\"\n  ],\n  \"name\": \"transition-property\"\n },\n {\n  \"keywords\": [\n   \"linear\",\n   \"ease\",\n   \"ease-in\",\n   \"ease-out\",\n   \"ease-in-out\",\n   \"jump-both\",\n   \"jump-end\",\n   \"jump-none\",\n   \"jump-start\",\n   \"step-start\",\n   \"step-end\"\n  ],\n  \"name\": \"transition-timing-function\"\n },\n {\n  \"name\": \"translate\"\n },\n {\n  \"name\": \"types\"\n },\n {\n  \"keywords\": [\n   \"normal\",\n   \"embed\",\n   \"bidi-override\",\n   \"isolate\",\n   \"plaintext\",\n   \"isolate-override\"\n  ],\n  \"name\": \"unicode-bidi\"\n },\n {\n  \"name\": \"unicode-range\"\n },\n {\n  \"inherited\": true,\n  \"keywords\": [\n   \"auto\",\n   \"none\",\n   \"text\",\n   \"all\",\n   \"contain\"\n  ],\n  \"name\": \"user-select\"\n },\n {\n  \"keywords\": [\n   \"none\",\n   \"non-scaling-stroke\"\n  ],\n  \"name\": \"vector-effect\"\n },\n {\n  \"keywords\": [\n   \"baseline\",\n   \"sub\",\n   \"super\",\n   \"text-top\",\n   \"text-bottom\",\n   \"middle\"\n  ],\n  \"name\": \"vertical-align\"\n },\n {\n  \"longhands\": [\n   \"view-timeline-name\",\n   \"view-timeline-axis\",\n   \"view-timeline-inset\"\n  ],\n  \"name\": \"view-timeline\"\n },\n {\n  \"name\": \"view-timeline-axis\"\n },\n {\n  \"name\": \"view-timeline-inset\"\n },\n {\n  \"name\": \"view-timeline-name\"\n },\n {\n  \"keywords\": [\n   \"none\"\n  ],\n  \"name\": \"view-transition-class\"\n },\n {\n  \"keywords\": [\n   \"normal\",\n   \"contain\",\n   \"nearest\"\n  ],\n  \"name\": \"view-transition-group\"\n },\n {\n  \"keywords\": [\n   \"none\",\n   \"auto\"\n  ],\n  \"name\": \"view-transition-name\"\n },\n {\n  \"inherited\": true,\n  \"keywords\": [\n   \"visible\",\n   \"hidden\",\n   \"collapse\"\n  ],\n  \"name\": \"visibility\"\n },\n {\n  \"inherited\": true,\n  \"longhands\": [\n   \"white-space-collapse\",\n   \"text-wrap-mode\"\n  ],\n  \"name\": \"white-space\"\n },\n {\n  \"inherited\": true,\n  \"keywords\": [\n   \"collapse\",\n   \"preserve\",\n   \"preserve-breaks\",\n   \"break-spaces\"\n  ],\n  \"name\": \"white-space-collapse\"\n },\n {\n  \"inherited\": true,\n  \"name\": \"widows\"\n },\n {\n  \"keywords\": [\n   \"auto\",\n   \"fit-content\",\n   \"min-content\",\n   \"max-content\"\n  ],\n  \"name\": \"width\"\n },\n {\n  \"keywords\": [\n   \"auto\"\n  ],\n  \"name\": \"will-change\"\n },\n {\n  \"inherited\": true,\n  \"keywords\": [\n   \"normal\",\n   \"break-all\",\n   \"keep-all\",\n   \"break-word\",\n   \"auto-phrase\"\n  ],\n  \"name\": \"word-break\"\n },\n {\n  \"inherited\": true,\n  \"keywords\": [\n   \"normal\"\n  ],\n  \"name\": \"word-spacing\"\n },\n {\n  \"inherited\": true,\n  \"keywords\": [\n   \"horizontal-tb\",\n   \"vertical-rl\",\n   \"vertical-lr\",\n   \"sideways-rl\",\n   \"sideways-lr\"\n  ],\n  \"name\": \"writing-mode\"\n },\n {\n  \"name\": \"x\"\n },\n {\n  \"name\": \"y\"\n },\n {\n  \"keywords\": [\n   \"auto\"\n  ],\n  \"name\": \"z-index\"\n },\n {\n  \"name\": \"zoom\"\n }\n];\nexport const generatedPropertyValues = {\n \"-webkit-box-align\": {\n  \"values\": [\n   \"stretch\",\n   \"start\",\n   \"center\",\n   \"end\",\n   \"baseline\"\n  ]\n },\n \"-webkit-box-decoration-break\": {\n  \"values\": [\n   \"slice\",\n   \"clone\"\n  ]\n },\n \"-webkit-box-direction\": {\n  \"values\": [\n   \"normal\",\n   \"reverse\"\n  ]\n },\n \"-webkit-box-orient\": {\n  \"values\": [\n   \"horizontal\",\n   \"vertical\"\n  ]\n },\n \"-webkit-box-pack\": {\n  \"values\": [\n   \"start\",\n   \"center\",\n   \"end\",\n   \"justify\"\n  ]\n },\n \"-webkit-line-break\": {\n  \"values\": [\n   \"auto\",\n   \"loose\",\n   \"normal\",\n   \"strict\",\n   \"after-white-space\"\n  ]\n },\n \"-webkit-line-clamp\": {\n  \"values\": [\n   \"none\"\n  ]\n },\n \"-webkit-rtl-ordering\": {\n  \"values\": [\n   \"logical\",\n   \"visual\"\n  ]\n },\n \"-webkit-text-security\": {\n  \"values\": [\n   \"none\",\n   \"disc\",\n   \"circle\",\n   \"square\"\n  ]\n },\n \"-webkit-user-drag\": {\n  \"values\": [\n   \"auto\",\n   \"none\",\n   \"element\"\n  ]\n },\n \"-webkit-user-modify\": {\n  \"values\": [\n   \"read-only\",\n   \"read-write\",\n   \"read-write-plaintext-only\"\n  ]\n },\n \"accent-color\": {\n  \"values\": [\n   \"auto\",\n   \"currentcolor\"\n  ]\n },\n \"alignment-baseline\": {\n  \"values\": [\n   \"auto\",\n   \"baseline\",\n   \"alphabetic\",\n   \"ideographic\",\n   \"middle\",\n   \"central\",\n   \"mathematical\",\n   \"before-edge\",\n   \"text-before-edge\",\n   \"after-edge\",\n   \"text-after-edge\",\n   \"hanging\"\n  ]\n },\n \"anchor-name\": {\n  \"values\": [\n   \"none\"\n  ]\n },\n \"anchor-scope\": {\n  \"values\": [\n   \"none\",\n   \"all\"\n  ]\n },\n \"animation-composition\": {\n  \"values\": [\n   \"replace\",\n   \"add\",\n   \"accumulate\"\n  ]\n },\n \"animation-direction\": {\n  \"values\": [\n   \"normal\",\n   \"reverse\",\n   \"alternate\",\n   \"alternate-reverse\"\n  ]\n },\n \"animation-fill-mode\": {\n  \"values\": [\n   \"none\",\n   \"forwards\",\n   \"backwards\",\n   \"both\"\n  ]\n },\n \"animation-iteration-count\": {\n  \"values\": [\n   \"infinite\"\n  ]\n },\n \"animation-name\": {\n  \"values\": [\n   \"none\"\n  ]\n },\n \"animation-play-state\": {\n  \"values\": [\n   \"running\",\n   \"paused\"\n  ]\n },\n \"animation-timeline\": {\n  \"values\": [\n   \"none\",\n   \"auto\"\n  ]\n },\n \"animation-timing-function\": {\n  \"values\": [\n   \"linear\",\n   \"ease\",\n   \"ease-in\",\n   \"ease-out\",\n   \"ease-in-out\",\n   \"jump-both\",\n   \"jump-end\",\n   \"jump-none\",\n   \"jump-start\",\n   \"step-start\",\n   \"step-end\"\n  ]\n },\n \"animation-trigger\": {\n  \"values\": [\n   \"none\"\n  ]\n },\n \"app-region\": {\n  \"values\": [\n   \"none\",\n   \"drag\",\n   \"no-drag\"\n  ]\n },\n \"aspect-ratio\": {\n  \"values\": [\n   \"auto\"\n  ]\n },\n \"backdrop-filter\": {\n  \"values\": [\n   \"none\"\n  ]\n },\n \"backface-visibility\": {\n  \"values\": [\n   \"visible\",\n   \"hidden\"\n  ]\n },\n \"background-attachment\": {\n  \"values\": [\n   \"scroll\",\n   \"fixed\",\n   \"local\"\n  ]\n },\n \"background-blend-mode\": {\n  \"values\": [\n   \"normal\",\n   \"multiply\",\n   \"screen\",\n   \"overlay\",\n   \"darken\",\n   \"lighten\",\n   \"color-dodge\",\n   \"color-burn\",\n   \"hard-light\",\n   \"soft-light\",\n   \"difference\",\n   \"exclusion\",\n   \"hue\",\n   \"saturation\",\n   \"color\",\n   \"luminosity\"\n  ]\n },\n \"background-clip\": {\n  \"values\": [\n   \"border-box\",\n   \"padding-box\",\n   \"content-box\",\n   \"text\"\n  ]\n },\n \"background-color\": {\n  \"values\": [\n   \"currentcolor\"\n  ]\n },\n \"background-image\": {\n  \"values\": [\n   \"auto\",\n   \"none\"\n  ]\n },\n \"background-origin\": {\n  \"values\": [\n   \"border-box\",\n   \"padding-box\",\n   \"content-box\"\n  ]\n },\n \"background-size\": {\n  \"values\": [\n   \"auto\",\n   \"cover\",\n   \"contain\"\n  ]\n },\n \"baseline-shift\": {\n  \"values\": [\n   \"baseline\",\n   \"sub\",\n   \"super\"\n  ]\n },\n \"baseline-source\": {\n  \"values\": [\n   \"auto\",\n   \"first\",\n   \"last\"\n  ]\n },\n \"block-ellipsis\": {\n  \"values\": [\n   \"auto\",\n   \"no-ellipsis\"\n  ]\n },\n \"block-size\": {\n  \"values\": [\n   \"auto\"\n  ]\n },\n \"border-bottom-color\": {\n  \"values\": [\n   \"currentcolor\"\n  ]\n },\n \"border-bottom-style\": {\n  \"values\": [\n   \"none\",\n   \"hidden\",\n   \"inset\",\n   \"groove\",\n   \"outset\",\n   \"ridge\",\n   \"dotted\",\n   \"dashed\",\n   \"solid\",\n   \"double\"\n  ]\n },\n \"border-bottom-width\": {\n  \"values\": [\n   \"thin\",\n   \"medium\",\n   \"thick\"\n  ]\n },\n \"border-collapse\": {\n  \"values\": [\n   \"separate\",\n   \"collapse\"\n  ]\n },\n \"border-image-repeat\": {\n  \"values\": [\n   \"stretch\",\n   \"repeat\",\n   \"round\",\n   \"space\"\n  ]\n },\n \"border-image-source\": {\n  \"values\": [\n   \"none\"\n  ]\n },\n \"border-image-width\": {\n  \"values\": [\n   \"auto\"\n  ]\n },\n \"border-left-color\": {\n  \"values\": [\n   \"currentcolor\"\n  ]\n },\n \"border-left-style\": {\n  \"values\": [\n   \"none\",\n   \"hidden\",\n   \"inset\",\n   \"groove\",\n   \"outset\",\n   \"ridge\",\n   \"dotted\",\n   \"dashed\",\n   \"solid\",\n   \"double\"\n  ]\n },\n \"border-left-width\": {\n  \"values\": [\n   \"thin\",\n   \"medium\",\n   \"thick\"\n  ]\n },\n \"border-right-color\": {\n  \"values\": [\n   \"currentcolor\"\n  ]\n },\n \"border-right-style\": {\n  \"values\": [\n   \"none\",\n   \"hidden\",\n   \"inset\",\n   \"groove\",\n   \"outset\",\n   \"ridge\",\n   \"dotted\",\n   \"dashed\",\n   \"solid\",\n   \"double\"\n  ]\n },\n \"border-right-width\": {\n  \"values\": [\n   \"thin\",\n   \"medium\",\n   \"thick\"\n  ]\n },\n \"border-shape\": {\n  \"values\": [\n   \"none\"\n  ]\n },\n \"border-style\": {\n  \"values\": [\n   \"none\"\n  ]\n },\n \"border-top-color\": {\n  \"values\": [\n   \"currentcolor\"\n  ]\n },\n \"border-top-style\": {\n  \"values\": [\n   \"none\",\n   \"hidden\",\n   \"inset\",\n   \"groove\",\n   \"outset\",\n   \"ridge\",\n   \"dotted\",\n   \"dashed\",\n   \"solid\",\n   \"double\"\n  ]\n },\n \"border-top-width\": {\n  \"values\": [\n   \"thin\",\n   \"medium\",\n   \"thick\"\n  ]\n },\n \"bottom\": {\n  \"values\": [\n   \"auto\"\n  ]\n },\n \"box-decoration-break\": {\n  \"values\": [\n   \"slice\",\n   \"clone\"\n  ]\n },\n \"box-shadow\": {\n  \"values\": [\n   \"none\"\n  ]\n },\n \"box-sizing\": {\n  \"values\": [\n   \"content-box\",\n   \"border-box\"\n  ]\n },\n \"break-after\": {\n  \"values\": [\n   \"auto\",\n   \"avoid\",\n   \"avoid-column\",\n   \"avoid-page\",\n   \"column\",\n   \"left\",\n   \"page\",\n   \"recto\",\n   \"right\",\n   \"verso\"\n  ]\n },\n \"break-before\": {\n  \"values\": [\n   \"auto\",\n   \"avoid\",\n   \"avoid-column\",\n   \"avoid-page\",\n   \"column\",\n   \"left\",\n   \"page\",\n   \"recto\",\n   \"right\",\n   \"verso\"\n  ]\n },\n \"break-inside\": {\n  \"values\": [\n   \"auto\",\n   \"avoid\",\n   \"avoid-column\",\n   \"avoid-page\"\n  ]\n },\n \"buffered-rendering\": {\n  \"values\": [\n   \"auto\",\n   \"dynamic\",\n   \"static\"\n  ]\n },\n \"caption-side\": {\n  \"values\": [\n   \"top\",\n   \"bottom\"\n  ]\n },\n \"caret-animation\": {\n  \"values\": [\n   \"auto\",\n   \"manual\"\n  ]\n },\n \"caret-color\": {\n  \"values\": [\n   \"auto\",\n   \"currentcolor\"\n  ]\n },\n \"caret-shape\": {\n  \"values\": [\n   \"auto\",\n   \"bar\",\n   \"block\",\n   \"underscore\"\n  ]\n },\n \"clear\": {\n  \"values\": [\n   \"none\",\n   \"left\",\n   \"right\",\n   \"both\",\n   \"inline-start\",\n   \"inline-end\"\n  ]\n },\n \"clip\": {\n  \"values\": [\n   \"auto\"\n  ]\n },\n \"clip-path\": {\n  \"values\": [\n   \"border-box\",\n   \"padding-box\",\n   \"content-box\",\n   \"margin-box\",\n   \"fill-box\",\n   \"stroke-box\",\n   \"view-box\",\n   \"none\"\n  ]\n },\n \"clip-rule\": {\n  \"values\": [\n   \"nonzero\",\n   \"evenodd\"\n  ]\n },\n \"color\": {\n  \"values\": [\n   \"currentcolor\"\n  ]\n },\n \"color-interpolation\": {\n  \"values\": [\n   \"auto\",\n   \"srgb\",\n   \"linearrgb\"\n  ]\n },\n \"color-interpolation-filters\": {\n  \"values\": [\n   \"auto\",\n   \"srgb\",\n   \"linearrgb\"\n  ]\n },\n \"color-rendering\": {\n  \"values\": [\n   \"auto\",\n   \"optimizespeed\",\n   \"optimizequality\"\n  ]\n },\n \"column-count\": {\n  \"values\": [\n   \"auto\"\n  ]\n },\n \"column-fill\": {\n  \"values\": [\n   \"balance\",\n   \"auto\"\n  ]\n },\n \"column-gap\": {\n  \"values\": [\n   \"normal\"\n  ]\n },\n \"column-height\": {\n  \"values\": [\n   \"auto\"\n  ]\n },\n \"column-rule-break\": {\n  \"values\": [\n   \"none\",\n   \"spanning-item\",\n   \"intersection\"\n  ]\n },\n \"column-rule-color\": {\n  \"values\": [\n   \"currentcolor\"\n  ]\n },\n \"column-rule-style\": {\n  \"values\": [\n   \"none\",\n   \"hidden\",\n   \"inset\",\n   \"groove\",\n   \"outset\",\n   \"ridge\",\n   \"dotted\",\n   \"dashed\",\n   \"solid\",\n   \"double\"\n  ]\n },\n \"column-rule-visibility-items\": {\n  \"values\": [\n   \"all\",\n   \"around\",\n   \"between\",\n   \"none\"\n  ]\n },\n \"column-rule-width\": {\n  \"values\": [\n   \"thin\",\n   \"medium\",\n   \"thick\"\n  ]\n },\n \"column-span\": {\n  \"values\": [\n   \"none\",\n   \"all\"\n  ]\n },\n \"column-width\": {\n  \"values\": [\n   \"auto\"\n  ]\n },\n \"column-wrap\": {\n  \"values\": [\n   \"auto\",\n   \"nowrap\",\n   \"wrap\"\n  ]\n },\n \"contain\": {\n  \"values\": [\n   \"none\",\n   \"strict\",\n   \"content\",\n   \"size\",\n   \"layout\",\n   \"style\",\n   \"paint\",\n   \"inline-size\",\n   \"block-size\",\n   \"view-transition\"\n  ]\n },\n \"contain-intrinsic-height\": {\n  \"values\": [\n   \"none\"\n  ]\n },\n \"contain-intrinsic-width\": {\n  \"values\": [\n   \"none\"\n  ]\n },\n \"container-name\": {\n  \"values\": [\n   \"none\"\n  ]\n },\n \"container-type\": {\n  \"values\": [\n   \"normal\",\n   \"inline-size\",\n   \"size\",\n   \"scroll-state\",\n   \"anchored\"\n  ]\n },\n \"content-visibility\": {\n  \"values\": [\n   \"visible\",\n   \"auto\",\n   \"hidden\"\n  ]\n },\n \"continue\": {\n  \"values\": [\n   \"auto\",\n   \"collapse\",\n   \"-webkit-legacy\"\n  ]\n },\n \"corner-bottom-left-shape\": {\n  \"values\": [\n   \"notch\",\n   \"scoop\",\n   \"bevel\",\n   \"round\",\n   \"squircle\",\n   \"square\"\n  ]\n },\n \"corner-bottom-right-shape\": {\n  \"values\": [\n   \"notch\",\n   \"scoop\",\n   \"bevel\",\n   \"round\",\n   \"squircle\",\n   \"square\"\n  ]\n },\n \"corner-top-left-shape\": {\n  \"values\": [\n   \"notch\",\n   \"scoop\",\n   \"bevel\",\n   \"round\",\n   \"squircle\",\n   \"square\"\n  ]\n },\n \"corner-top-right-shape\": {\n  \"values\": [\n   \"notch\",\n   \"scoop\",\n   \"bevel\",\n   \"round\",\n   \"squircle\",\n   \"square\"\n  ]\n },\n \"corners\": {\n  \"values\": [\n   \"normal\"\n  ]\n },\n \"counter-increment\": {\n  \"values\": [\n   \"none\"\n  ]\n },\n \"counter-reset\": {\n  \"values\": [\n   \"none\"\n  ]\n },\n \"counter-set\": {\n  \"values\": [\n   \"none\"\n  ]\n },\n \"cursor\": {\n  \"values\": [\n   \"auto\",\n   \"default\",\n   \"none\",\n   \"context-menu\",\n   \"help\",\n   \"pointer\",\n   \"progress\",\n   \"wait\",\n   \"cell\",\n   \"crosshair\",\n   \"text\",\n   \"vertical-text\",\n   \"alias\",\n   \"copy\",\n   \"move\",\n   \"no-drop\",\n   \"not-allowed\",\n   \"e-resize\",\n   \"n-resize\",\n   \"ne-resize\",\n   \"nw-resize\",\n   \"s-resize\",\n   \"se-resize\",\n   \"sw-resize\",\n   \"w-resize\",\n   \"ew-resize\",\n   \"ns-resize\",\n   \"nesw-resize\",\n   \"nwse-resize\",\n   \"col-resize\",\n   \"row-resize\",\n   \"all-scroll\",\n   \"zoom-in\",\n   \"zoom-out\",\n   \"grab\",\n   \"grabbing\"\n  ]\n },\n \"d\": {\n  \"values\": [\n   \"none\"\n  ]\n },\n \"direction\": {\n  \"values\": [\n   \"ltr\",\n   \"rtl\"\n  ]\n },\n \"display\": {\n  \"values\": [\n   \"inline\",\n   \"block\",\n   \"list-item\",\n   \"inline-block\",\n   \"table\",\n   \"inline-table\",\n   \"table-row-group\",\n   \"table-header-group\",\n   \"table-footer-group\",\n   \"table-row\",\n   \"table-column-group\",\n   \"table-column\",\n   \"table-cell\",\n   \"table-caption\",\n   \"-webkit-box\",\n   \"-webkit-inline-box\",\n   \"flex\",\n   \"inline-flex\",\n   \"grid\",\n   \"inline-grid\",\n   \"contents\",\n   \"flow-root\",\n   \"none\",\n   \"flow\",\n   \"math\",\n   \"ruby\",\n   \"ruby-text\",\n   \"grid-lanes\",\n   \"inline-grid-lanes\"\n  ]\n },\n \"dominant-baseline\": {\n  \"values\": [\n   \"auto\",\n   \"alphabetic\",\n   \"ideographic\",\n   \"middle\",\n   \"central\",\n   \"mathematical\",\n   \"hanging\",\n   \"use-script\",\n   \"no-change\",\n   \"reset-size\",\n   \"text-after-edge\",\n   \"text-before-edge\"\n  ]\n },\n \"dynamic-range-limit\": {\n  \"values\": [\n   \"standard\",\n   \"no-limit\",\n   \"constrained\"\n  ]\n },\n \"empty-cells\": {\n  \"values\": [\n   \"show\",\n   \"hide\"\n  ]\n },\n \"field-sizing\": {\n  \"values\": [\n   \"fixed\",\n   \"content\"\n  ]\n },\n \"fill-rule\": {\n  \"values\": [\n   \"nonzero\",\n   \"evenodd\"\n  ]\n },\n \"filter\": {\n  \"values\": [\n   \"none\"\n  ]\n },\n \"flex-basis\": {\n  \"values\": [\n   \"auto\",\n   \"fit-content\",\n   \"min-content\",\n   \"max-content\",\n   \"content\"\n  ]\n },\n \"flex-direction\": {\n  \"values\": [\n   \"row\",\n   \"row-reverse\",\n   \"column\",\n   \"column-reverse\"\n  ]\n },\n \"flex-wrap\": {\n  \"values\": [\n   \"nowrap\",\n   \"wrap\",\n   \"wrap-reverse\",\n   \"balance\"\n  ]\n },\n \"float\": {\n  \"values\": [\n   \"none\",\n   \"left\",\n   \"right\",\n   \"inline-start\",\n   \"inline-end\"\n  ]\n },\n \"flood-color\": {\n  \"values\": [\n   \"currentcolor\"\n  ]\n },\n \"font-feature-settings\": {\n  \"values\": [\n   \"normal\"\n  ]\n },\n \"font-kerning\": {\n  \"values\": [\n   \"auto\",\n   \"normal\",\n   \"none\"\n  ]\n },\n \"font-language-override\": {\n  \"values\": [\n   \"normal\"\n  ]\n },\n \"font-optical-sizing\": {\n  \"values\": [\n   \"auto\",\n   \"none\"\n  ]\n },\n \"font-palette\": {\n  \"values\": [\n   \"normal\",\n   \"light\",\n   \"dark\"\n  ]\n },\n \"font-size\": {\n  \"values\": [\n   \"xx-small\",\n   \"x-small\",\n   \"small\",\n   \"medium\",\n   \"large\",\n   \"x-large\",\n   \"xx-large\",\n   \"xxx-large\",\n   \"larger\",\n   \"smaller\",\n   \"-webkit-xxx-large\"\n  ]\n },\n \"font-size-adjust\": {\n  \"values\": [\n   \"none\",\n   \"ex-height\",\n   \"cap-height\",\n   \"ch-width\",\n   \"ic-width\",\n   \"ic-height\",\n   \"from-font\"\n  ]\n },\n \"font-stretch\": {\n  \"values\": [\n   \"normal\",\n   \"ultra-condensed\",\n   \"extra-condensed\",\n   \"condensed\",\n   \"semi-condensed\",\n   \"semi-expanded\",\n   \"expanded\",\n   \"extra-expanded\",\n   \"ultra-expanded\"\n  ]\n },\n \"font-style\": {\n  \"values\": [\n   \"normal\",\n   \"italic\",\n   \"oblique\"\n  ]\n },\n \"font-synthesis-small-caps\": {\n  \"values\": [\n   \"auto\",\n   \"none\"\n  ]\n },\n \"font-synthesis-style\": {\n  \"values\": [\n   \"auto\",\n   \"none\"\n  ]\n },\n \"font-synthesis-weight\": {\n  \"values\": [\n   \"auto\",\n   \"none\"\n  ]\n },\n \"font-variant-alternates\": {\n  \"values\": [\n   \"normal\"\n  ]\n },\n \"font-variant-caps\": {\n  \"values\": [\n   \"normal\",\n   \"small-caps\",\n   \"all-small-caps\",\n   \"petite-caps\",\n   \"all-petite-caps\",\n   \"unicase\",\n   \"titling-caps\"\n  ]\n },\n \"font-variant-east-asian\": {\n  \"values\": [\n   \"normal\",\n   \"jis78\",\n   \"jis83\",\n   \"jis90\",\n   \"jis04\",\n   \"simplified\",\n   \"traditional\",\n   \"full-width\",\n   \"proportional-width\",\n   \"ruby\"\n  ]\n },\n \"font-variant-emoji\": {\n  \"values\": [\n   \"normal\",\n   \"text\",\n   \"emoji\",\n   \"unicode\"\n  ]\n },\n \"font-variant-ligatures\": {\n  \"values\": [\n   \"normal\",\n   \"none\",\n   \"common-ligatures\",\n   \"no-common-ligatures\",\n   \"discretionary-ligatures\",\n   \"no-discretionary-ligatures\",\n   \"historical-ligatures\",\n   \"no-historical-ligatures\",\n   \"contextual\",\n   \"no-contextual\"\n  ]\n },\n \"font-variant-numeric\": {\n  \"values\": [\n   \"normal\",\n   \"lining-nums\",\n   \"oldstyle-nums\",\n   \"proportional-nums\",\n   \"tabular-nums\",\n   \"diagonal-fractions\",\n   \"stacked-fractions\",\n   \"ordinal\",\n   \"slashed-zero\"\n  ]\n },\n \"font-variant-position\": {\n  \"values\": [\n   \"normal\",\n   \"sub\",\n   \"super\"\n  ]\n },\n \"font-variation-settings\": {\n  \"values\": [\n   \"normal\"\n  ]\n },\n \"font-weight\": {\n  \"values\": [\n   \"normal\",\n   \"bold\",\n   \"bolder\",\n   \"lighter\"\n  ]\n },\n \"forced-color-adjust\": {\n  \"values\": [\n   \"auto\",\n   \"none\",\n   \"preserve-parent-color\"\n  ]\n },\n \"gap-rule-overlap\": {\n  \"values\": [\n   \"row-over-column\",\n   \"column-over-row\"\n  ]\n },\n \"grid-auto-columns\": {\n  \"values\": [\n   \"auto\",\n   \"min-content\",\n   \"max-content\"\n  ]\n },\n \"grid-auto-flow\": {\n  \"values\": [\n   \"row\",\n   \"column\"\n  ]\n },\n \"grid-auto-rows\": {\n  \"values\": [\n   \"auto\",\n   \"min-content\",\n   \"max-content\"\n  ]\n },\n \"grid-column-end\": {\n  \"values\": [\n   \"auto\"\n  ]\n },\n \"grid-column-start\": {\n  \"values\": [\n   \"auto\"\n  ]\n },\n \"grid-lanes-direction\": {\n  \"values\": [\n   \"row\",\n   \"row-reverse\",\n   \"column\",\n   \"column-reverse\"\n  ]\n },\n \"grid-lanes-fill\": {\n  \"values\": [\n   \"normal\",\n   \"reverse\"\n  ]\n },\n \"grid-row-end\": {\n  \"values\": [\n   \"auto\"\n  ]\n },\n \"grid-row-start\": {\n  \"values\": [\n   \"auto\"\n  ]\n },\n \"grid-template-areas\": {\n  \"values\": [\n   \"none\"\n  ]\n },\n \"grid-template-columns\": {\n  \"values\": [\n   \"none\"\n  ]\n },\n \"grid-template-rows\": {\n  \"values\": [\n   \"none\"\n  ]\n },\n \"height\": {\n  \"values\": [\n   \"auto\",\n   \"fit-content\",\n   \"min-content\",\n   \"max-content\"\n  ]\n },\n \"hyphenate-limit-chars\": {\n  \"values\": [\n   \"auto\"\n  ]\n },\n \"hyphens\": {\n  \"values\": [\n   \"none\",\n   \"manual\",\n   \"auto\"\n  ]\n },\n \"image-rendering\": {\n  \"values\": [\n   \"auto\",\n   \"optimizespeed\",\n   \"optimizequality\",\n   \"-webkit-optimize-contrast\",\n   \"pixelated\"\n  ]\n },\n \"initial-letter\": {\n  \"values\": [\n   \"drop\",\n   \"normal\",\n   \"raise\"\n  ]\n },\n \"inline-size\": {\n  \"values\": [\n   \"auto\"\n  ]\n },\n \"interactivity\": {\n  \"values\": [\n   \"auto\",\n   \"inert\"\n  ]\n },\n \"interpolate-size\": {\n  \"values\": [\n   \"numeric-only\",\n   \"allow-keywords\"\n  ]\n },\n \"isolation\": {\n  \"values\": [\n   \"auto\",\n   \"isolate\"\n  ]\n },\n \"item-tolerance\": {\n  \"values\": [\n   \"normal\",\n   \"infinite\"\n  ]\n },\n \"left\": {\n  \"values\": [\n   \"auto\"\n  ]\n },\n \"letter-spacing\": {\n  \"values\": [\n   \"normal\"\n  ]\n },\n \"lighting-color\": {\n  \"values\": [\n   \"currentcolor\"\n  ]\n },\n \"line-break\": {\n  \"values\": [\n   \"auto\",\n   \"loose\",\n   \"normal\",\n   \"strict\",\n   \"anywhere\",\n   \"after-white-space\"\n  ]\n },\n \"line-height\": {\n  \"values\": [\n   \"normal\"\n  ]\n },\n \"list-style-image\": {\n  \"values\": [\n   \"none\"\n  ]\n },\n \"list-style-position\": {\n  \"values\": [\n   \"outside\",\n   \"inside\"\n  ]\n },\n \"list-style-type\": {\n  \"values\": [\n   \"disc\",\n   \"circle\",\n   \"square\",\n   \"disclosure-open\",\n   \"disclosure-closed\",\n   \"decimal\",\n   \"none\"\n  ]\n },\n \"margin-block-end\": {\n  \"values\": [\n   \"auto\"\n  ]\n },\n \"margin-block-start\": {\n  \"values\": [\n   \"auto\"\n  ]\n },\n \"margin-bottom\": {\n  \"values\": [\n   \"auto\"\n  ]\n },\n \"margin-inline-end\": {\n  \"values\": [\n   \"auto\"\n  ]\n },\n \"margin-inline-start\": {\n  \"values\": [\n   \"auto\"\n  ]\n },\n \"margin-left\": {\n  \"values\": [\n   \"auto\"\n  ]\n },\n \"margin-right\": {\n  \"values\": [\n   \"auto\"\n  ]\n },\n \"margin-top\": {\n  \"values\": [\n   \"auto\"\n  ]\n },\n \"marker-end\": {\n  \"values\": [\n   \"none\"\n  ]\n },\n \"marker-mid\": {\n  \"values\": [\n   \"none\"\n  ]\n },\n \"marker-start\": {\n  \"values\": [\n   \"none\"\n  ]\n },\n \"mask-composite\": {\n  \"values\": [\n   \"add\",\n   \"subtract\",\n   \"intersect\",\n   \"exclude\"\n  ]\n },\n \"mask-mode\": {\n  \"values\": [\n   \"alpha\",\n   \"luminance\",\n   \"match-source\"\n  ]\n },\n \"mask-type\": {\n  \"values\": [\n   \"luminance\",\n   \"alpha\"\n  ]\n },\n \"math-shift\": {\n  \"values\": [\n   \"normal\",\n   \"compact\"\n  ]\n },\n \"math-style\": {\n  \"values\": [\n   \"normal\",\n   \"compact\"\n  ]\n },\n \"max-block-size\": {\n  \"values\": [\n   \"none\"\n  ]\n },\n \"max-height\": {\n  \"values\": [\n   \"none\"\n  ]\n },\n \"max-inline-size\": {\n  \"values\": [\n   \"none\"\n  ]\n },\n \"max-lines\": {\n  \"values\": [\n   \"none\"\n  ]\n },\n \"max-width\": {\n  \"values\": [\n   \"none\"\n  ]\n },\n \"mix-blend-mode\": {\n  \"values\": [\n   \"normal\",\n   \"multiply\",\n   \"screen\",\n   \"overlay\",\n   \"darken\",\n   \"lighten\",\n   \"color-dodge\",\n   \"color-burn\",\n   \"hard-light\",\n   \"soft-light\",\n   \"difference\",\n   \"exclusion\",\n   \"hue\",\n   \"saturation\",\n   \"color\",\n   \"luminosity\",\n   \"plus-lighter\"\n  ]\n },\n \"object-fit\": {\n  \"values\": [\n   \"fill\",\n   \"contain\",\n   \"cover\",\n   \"none\",\n   \"scale-down\"\n  ]\n },\n \"object-view-box\": {\n  \"values\": [\n   \"none\"\n  ]\n },\n \"offset-anchor\": {\n  \"values\": [\n   \"auto\"\n  ]\n },\n \"offset-path\": {\n  \"values\": [\n   \"none\"\n  ]\n },\n \"offset-position\": {\n  \"values\": [\n   \"auto\",\n   \"normal\"\n  ]\n },\n \"offset-rotate\": {\n  \"values\": [\n   \"auto\",\n   \"reverse\"\n  ]\n },\n \"origin-trial-test-property\": {\n  \"values\": [\n   \"normal\",\n   \"none\"\n  ]\n },\n \"outline-color\": {\n  \"values\": [\n   \"currentcolor\"\n  ]\n },\n \"outline-style\": {\n  \"values\": [\n   \"none\",\n   \"hidden\",\n   \"inset\",\n   \"groove\",\n   \"outset\",\n   \"ridge\",\n   \"dotted\",\n   \"dashed\",\n   \"solid\",\n   \"double\"\n  ]\n },\n \"outline-width\": {\n  \"values\": [\n   \"thin\",\n   \"medium\",\n   \"thick\"\n  ]\n },\n \"overflow-anchor\": {\n  \"values\": [\n   \"visible\",\n   \"none\",\n   \"auto\"\n  ]\n },\n \"overflow-clip-margin\": {\n  \"values\": [\n   \"border-box\",\n   \"content-box\",\n   \"padding-box\"\n  ]\n },\n \"overflow-wrap\": {\n  \"values\": [\n   \"normal\",\n   \"break-word\",\n   \"anywhere\"\n  ]\n },\n \"overflow-x\": {\n  \"values\": [\n   \"visible\",\n   \"hidden\",\n   \"scroll\",\n   \"auto\",\n   \"overlay\",\n   \"clip\"\n  ]\n },\n \"overflow-y\": {\n  \"values\": [\n   \"visible\",\n   \"hidden\",\n   \"scroll\",\n   \"auto\",\n   \"overlay\",\n   \"clip\"\n  ]\n },\n \"overlay\": {\n  \"values\": [\n   \"none\",\n   \"auto\"\n  ]\n },\n \"overscroll-area\": {\n  \"values\": [\n   \"none\"\n  ]\n },\n \"overscroll-behavior-x\": {\n  \"values\": [\n   \"auto\",\n   \"contain\",\n   \"none\"\n  ]\n },\n \"overscroll-behavior-y\": {\n  \"values\": [\n   \"auto\",\n   \"contain\",\n   \"none\"\n  ]\n },\n \"overscroll-position\": {\n  \"values\": [\n   \"none\"\n  ]\n },\n \"page\": {\n  \"values\": [\n   \"auto\"\n  ]\n },\n \"paint-order\": {\n  \"values\": [\n   \"normal\",\n   \"fill\",\n   \"stroke\",\n   \"markers\"\n  ]\n },\n \"perspective\": {\n  \"values\": [\n   \"none\"\n  ]\n },\n \"pointer-events\": {\n  \"values\": [\n   \"none\",\n   \"auto\",\n   \"stroke\",\n   \"fill\",\n   \"painted\",\n   \"visible\",\n   \"visiblestroke\",\n   \"visiblefill\",\n   \"visiblepainted\",\n   \"bounding-box\",\n   \"all\"\n  ]\n },\n \"position\": {\n  \"values\": [\n   \"static\",\n   \"relative\",\n   \"absolute\",\n   \"fixed\",\n   \"sticky\"\n  ]\n },\n \"position-anchor\": {\n  \"values\": [\n   \"auto\",\n   \"none\"\n  ]\n },\n \"position-area\": {\n  \"values\": [\n   \"none\",\n   \"top\",\n   \"bottom\",\n   \"center\",\n   \"left\",\n   \"right\",\n   \"x-start\",\n   \"x-end\",\n   \"y-start\",\n   \"y-end\",\n   \"start\",\n   \"end\",\n   \"self-start\",\n   \"self-end\",\n   \"all\"\n  ]\n },\n \"position-try-fallbacks\": {\n  \"values\": [\n   \"none\",\n   \"flip-block\",\n   \"flip-inline\",\n   \"flip-start\"\n  ]\n },\n \"position-try-order\": {\n  \"values\": [\n   \"normal\",\n   \"most-width\",\n   \"most-height\",\n   \"most-block-size\",\n   \"most-inline-size\"\n  ]\n },\n \"position-visibility\": {\n  \"values\": [\n   \"always\",\n   \"anchors-visible\",\n   \"no-overflow\"\n  ]\n },\n \"print-color-adjust\": {\n  \"values\": [\n   \"economy\",\n   \"exact\"\n  ]\n },\n \"quotes\": {\n  \"values\": [\n   \"auto\",\n   \"none\"\n  ]\n },\n \"reading-flow\": {\n  \"values\": [\n   \"normal\",\n   \"flex-visual\",\n   \"flex-flow\",\n   \"grid-rows\",\n   \"grid-columns\",\n   \"grid-order\",\n   \"source-order\"\n  ]\n },\n \"resize\": {\n  \"values\": [\n   \"none\",\n   \"both\",\n   \"horizontal\",\n   \"vertical\",\n   \"block\",\n   \"inline\"\n  ]\n },\n \"right\": {\n  \"values\": [\n   \"auto\"\n  ]\n },\n \"row-gap\": {\n  \"values\": [\n   \"normal\"\n  ]\n },\n \"row-rule-break\": {\n  \"values\": [\n   \"none\",\n   \"spanning-item\",\n   \"intersection\"\n  ]\n },\n \"row-rule-color\": {\n  \"values\": [\n   \"currentcolor\"\n  ]\n },\n \"row-rule-style\": {\n  \"values\": [\n   \"none\",\n   \"hidden\",\n   \"inset\",\n   \"groove\",\n   \"outset\",\n   \"ridge\",\n   \"dotted\",\n   \"dashed\",\n   \"solid\",\n   \"double\"\n  ]\n },\n \"row-rule-visibility-items\": {\n  \"values\": [\n   \"all\",\n   \"around\",\n   \"between\",\n   \"none\"\n  ]\n },\n \"row-rule-width\": {\n  \"values\": [\n   \"thin\",\n   \"medium\",\n   \"thick\"\n  ]\n },\n \"ruby-align\": {\n  \"values\": [\n   \"space-around\",\n   \"start\",\n   \"center\",\n   \"space-between\"\n  ]\n },\n \"ruby-overhang\": {\n  \"values\": [\n   \"auto\",\n   \"none\"\n  ]\n },\n \"ruby-position\": {\n  \"values\": [\n   \"over\",\n   \"under\"\n  ]\n },\n \"rx\": {\n  \"values\": [\n   \"auto\"\n  ]\n },\n \"ry\": {\n  \"values\": [\n   \"auto\"\n  ]\n },\n \"scroll-behavior\": {\n  \"values\": [\n   \"auto\",\n   \"smooth\"\n  ]\n },\n \"scroll-initial-target\": {\n  \"values\": [\n   \"none\",\n   \"nearest\"\n  ]\n },\n \"scroll-padding-block-end\": {\n  \"values\": [\n   \"auto\"\n  ]\n },\n \"scroll-padding-block-start\": {\n  \"values\": [\n   \"auto\"\n  ]\n },\n \"scroll-padding-bottom\": {\n  \"values\": [\n   \"auto\"\n  ]\n },\n \"scroll-padding-inline-end\": {\n  \"values\": [\n   \"auto\"\n  ]\n },\n \"scroll-padding-inline-start\": {\n  \"values\": [\n   \"auto\"\n  ]\n },\n \"scroll-padding-left\": {\n  \"values\": [\n   \"auto\"\n  ]\n },\n \"scroll-padding-right\": {\n  \"values\": [\n   \"auto\"\n  ]\n },\n \"scroll-padding-top\": {\n  \"values\": [\n   \"auto\"\n  ]\n },\n \"scroll-snap-align\": {\n  \"values\": [\n   \"none\",\n   \"start\",\n   \"end\",\n   \"center\"\n  ]\n },\n \"scroll-snap-stop\": {\n  \"values\": [\n   \"normal\",\n   \"always\"\n  ]\n },\n \"scroll-snap-type\": {\n  \"values\": [\n   \"none\",\n   \"x\",\n   \"y\",\n   \"block\",\n   \"inline\",\n   \"both\",\n   \"mandatory\",\n   \"proximity\"\n  ]\n },\n \"scroll-target-group\": {\n  \"values\": [\n   \"none\",\n   \"auto\"\n  ]\n },\n \"scrollbar-color\": {\n  \"values\": [\n   \"auto\"\n  ]\n },\n \"scrollbar-gutter\": {\n  \"values\": [\n   \"auto\",\n   \"stable\",\n   \"both-edges\"\n  ]\n },\n \"scrollbar-width\": {\n  \"values\": [\n   \"auto\",\n   \"thin\",\n   \"none\"\n  ]\n },\n \"shape-margin\": {\n  \"values\": [\n   \"none\"\n  ]\n },\n \"shape-outside\": {\n  \"values\": [\n   \"none\"\n  ]\n },\n \"shape-rendering\": {\n  \"values\": [\n   \"auto\",\n   \"optimizespeed\",\n   \"crispedges\",\n   \"geometricprecision\"\n  ]\n },\n \"speak\": {\n  \"values\": [\n   \"none\",\n   \"normal\",\n   \"spell-out\",\n   \"digits\",\n   \"literal-punctuation\",\n   \"no-punctuation\"\n  ]\n },\n \"stop-color\": {\n  \"values\": [\n   \"currentcolor\"\n  ]\n },\n \"stroke-dasharray\": {\n  \"values\": [\n   \"none\"\n  ]\n },\n \"stroke-linecap\": {\n  \"values\": [\n   \"butt\",\n   \"round\",\n   \"square\"\n  ]\n },\n \"stroke-linejoin\": {\n  \"values\": [\n   \"miter\",\n   \"bevel\",\n   \"round\"\n  ]\n },\n \"table-layout\": {\n  \"values\": [\n   \"auto\",\n   \"fixed\"\n  ]\n },\n \"text-align\": {\n  \"values\": [\n   \"left\",\n   \"right\",\n   \"center\",\n   \"justify\",\n   \"-webkit-left\",\n   \"-webkit-right\",\n   \"-webkit-center\",\n   \"start\",\n   \"end\",\n   \"match-parent\"\n  ]\n },\n \"text-align-last\": {\n  \"values\": [\n   \"auto\",\n   \"start\",\n   \"end\",\n   \"left\",\n   \"right\",\n   \"center\",\n   \"justify\",\n   \"match-parent\"\n  ]\n },\n \"text-anchor\": {\n  \"values\": [\n   \"start\",\n   \"middle\",\n   \"end\"\n  ]\n },\n \"text-autospace\": {\n  \"values\": [\n   \"no-autospace\",\n   \"normal\"\n  ]\n },\n \"text-box-trim\": {\n  \"values\": [\n   \"none\",\n   \"trim-start\",\n   \"trim-end\",\n   \"trim-both\"\n  ]\n },\n \"text-combine-upright\": {\n  \"values\": [\n   \"none\",\n   \"all\"\n  ]\n },\n \"text-decoration-color\": {\n  \"values\": [\n   \"currentcolor\"\n  ]\n },\n \"text-decoration-line\": {\n  \"values\": [\n   \"none\",\n   \"underline\",\n   \"overline\",\n   \"line-through\",\n   \"blink\",\n   \"spelling-error\",\n   \"grammar-error\"\n  ]\n },\n \"text-decoration-skip-ink\": {\n  \"values\": [\n   \"none\",\n   \"auto\"\n  ]\n },\n \"text-decoration-style\": {\n  \"values\": [\n   \"solid\",\n   \"double\",\n   \"dotted\",\n   \"dashed\",\n   \"wavy\"\n  ]\n },\n \"text-decoration-thickness\": {\n  \"values\": [\n   \"auto\",\n   \"from-font\"\n  ]\n },\n \"text-emphasis-color\": {\n  \"values\": [\n   \"currentcolor\"\n  ]\n },\n \"text-justify\": {\n  \"values\": [\n   \"auto\",\n   \"none\",\n   \"inter-word\",\n   \"inter-character\"\n  ]\n },\n \"text-orientation\": {\n  \"values\": [\n   \"sideways\",\n   \"mixed\",\n   \"upright\"\n  ]\n },\n \"text-overflow\": {\n  \"values\": [\n   \"clip\",\n   \"ellipsis\"\n  ]\n },\n \"text-rendering\": {\n  \"values\": [\n   \"auto\",\n   \"optimizespeed\",\n   \"optimizelegibility\",\n   \"geometricprecision\"\n  ]\n },\n \"text-shadow\": {\n  \"values\": [\n   \"none\"\n  ]\n },\n \"text-size-adjust\": {\n  \"values\": [\n   \"none\",\n   \"auto\"\n  ]\n },\n \"text-spacing-trim\": {\n  \"values\": [\n   \"normal\",\n   \"space-all\",\n   \"space-first\",\n   \"trim-start\"\n  ]\n },\n \"text-transform\": {\n  \"values\": [\n   \"capitalize\",\n   \"uppercase\",\n   \"lowercase\",\n   \"full-width\",\n   \"none\",\n   \"math-auto\"\n  ]\n },\n \"text-underline-offset\": {\n  \"values\": [\n   \"auto\"\n  ]\n },\n \"text-underline-position\": {\n  \"values\": [\n   \"auto\",\n   \"from-font\",\n   \"under\",\n   \"left\",\n   \"right\"\n  ]\n },\n \"text-wrap-mode\": {\n  \"values\": [\n   \"wrap\",\n   \"nowrap\"\n  ]\n },\n \"text-wrap-style\": {\n  \"values\": [\n   \"auto\",\n   \"balance\",\n   \"pretty\",\n   \"stable\"\n  ]\n },\n \"timeline-trigger-source\": {\n  \"values\": [\n   \"none\",\n   \"auto\"\n  ]\n },\n \"top\": {\n  \"values\": [\n   \"auto\"\n  ]\n },\n \"touch-action\": {\n  \"values\": [\n   \"auto\",\n   \"none\",\n   \"pan-x\",\n   \"pan-left\",\n   \"pan-right\",\n   \"pan-y\",\n   \"pan-up\",\n   \"pan-down\",\n   \"pinch-zoom\",\n   \"manipulation\"\n  ]\n },\n \"transform\": {\n  \"values\": [\n   \"none\"\n  ]\n },\n \"transform-box\": {\n  \"values\": [\n   \"content-box\",\n   \"border-box\",\n   \"fill-box\",\n   \"stroke-box\",\n   \"view-box\"\n  ]\n },\n \"transform-style\": {\n  \"values\": [\n   \"flat\",\n   \"preserve-3d\"\n  ]\n },\n \"transition-behavior\": {\n  \"values\": [\n   \"normal\",\n   \"allow-discrete\"\n  ]\n },\n \"transition-property\": {\n  \"values\": [\n   \"none\"\n  ]\n },\n \"transition-timing-function\": {\n  \"values\": [\n   \"linear\",\n   \"ease\",\n   \"ease-in\",\n   \"ease-out\",\n   \"ease-in-out\",\n   \"jump-both\",\n   \"jump-end\",\n   \"jump-none\",\n   \"jump-start\",\n   \"step-start\",\n   \"step-end\"\n  ]\n },\n \"unicode-bidi\": {\n  \"values\": [\n   \"normal\",\n   \"embed\",\n   \"bidi-override\",\n   \"isolate\",\n   \"plaintext\",\n   \"isolate-override\"\n  ]\n },\n \"user-select\": {\n  \"values\": [\n   \"auto\",\n   \"none\",\n   \"text\",\n   \"all\",\n   \"contain\"\n  ]\n },\n \"vector-effect\": {\n  \"values\": [\n   \"none\",\n   \"non-scaling-stroke\"\n  ]\n },\n \"vertical-align\": {\n  \"values\": [\n   \"baseline\",\n   \"sub\",\n   \"super\",\n   \"text-top\",\n   \"text-bottom\",\n   \"middle\"\n  ]\n },\n \"view-transition-class\": {\n  \"values\": [\n   \"none\"\n  ]\n },\n \"view-transition-group\": {\n  \"values\": [\n   \"normal\",\n   \"contain\",\n   \"nearest\"\n  ]\n },\n \"view-transition-name\": {\n  \"values\": [\n   \"none\",\n   \"auto\"\n  ]\n },\n \"visibility\": {\n  \"values\": [\n   \"visible\",\n   \"hidden\",\n   \"collapse\"\n  ]\n },\n \"white-space-collapse\": {\n  \"values\": [\n   \"collapse\",\n   \"preserve\",\n   \"preserve-breaks\",\n   \"break-spaces\"\n  ]\n },\n \"width\": {\n  \"values\": [\n   \"auto\",\n   \"fit-content\",\n   \"min-content\",\n   \"max-content\"\n  ]\n },\n \"will-change\": {\n  \"values\": [\n   \"auto\"\n  ]\n },\n \"word-break\": {\n  \"values\": [\n   \"normal\",\n   \"break-all\",\n   \"keep-all\",\n   \"break-word\",\n   \"auto-phrase\"\n  ]\n },\n \"word-spacing\": {\n  \"values\": [\n   \"normal\"\n  ]\n },\n \"writing-mode\": {\n  \"values\": [\n   \"horizontal-tb\",\n   \"vertical-rl\",\n   \"vertical-lr\",\n   \"sideways-rl\",\n   \"sideways-lr\"\n  ]\n },\n \"z-index\": {\n  \"values\": [\n   \"auto\"\n  ]\n }\n};\nexport const generatedAliasesFor = new Map([\n [\n  \"-epub-caption-side\",\n  \"caption-side\"\n ],\n [\n  \"-epub-text-combine\",\n  \"-webkit-text-combine\"\n ],\n [\n  \"-epub-text-emphasis\",\n  \"text-emphasis\"\n ],\n [\n  \"-epub-text-emphasis-color\",\n  \"text-emphasis-color\"\n ],\n [\n  \"-epub-text-emphasis-style\",\n  \"text-emphasis-style\"\n ],\n [\n  \"-epub-text-orientation\",\n  \"-webkit-text-orientation\"\n ],\n [\n  \"-epub-text-transform\",\n  \"text-transform\"\n ],\n [\n  \"-epub-word-break\",\n  \"word-break\"\n ],\n [\n  \"-epub-writing-mode\",\n  \"-webkit-writing-mode\"\n ],\n [\n  \"-webkit-align-content\",\n  \"align-content\"\n ],\n [\n  \"-webkit-align-items\",\n  \"align-items\"\n ],\n [\n  \"-webkit-align-self\",\n  \"align-self\"\n ],\n [\n  \"-webkit-animation\",\n  \"animation\"\n ],\n [\n  \"-webkit-animation-delay\",\n  \"animation-delay\"\n ],\n [\n  \"-webkit-animation-direction\",\n  \"animation-direction\"\n ],\n [\n  \"-webkit-animation-duration\",\n  \"animation-duration\"\n ],\n [\n  \"-webkit-animation-fill-mode\",\n  \"animation-fill-mode\"\n ],\n [\n  \"-webkit-animation-iteration-count\",\n  \"animation-iteration-count\"\n ],\n [\n  \"-webkit-animation-name\",\n  \"animation-name\"\n ],\n [\n  \"-webkit-animation-play-state\",\n  \"animation-play-state\"\n ],\n [\n  \"-webkit-animation-timing-function\",\n  \"animation-timing-function\"\n ],\n [\n  \"-webkit-app-region\",\n  \"app-region\"\n ],\n [\n  \"-webkit-appearance\",\n  \"appearance\"\n ],\n [\n  \"-webkit-backface-visibility\",\n  \"backface-visibility\"\n ],\n [\n  \"-webkit-background-clip\",\n  \"background-clip\"\n ],\n [\n  \"-webkit-background-origin\",\n  \"background-origin\"\n ],\n [\n  \"-webkit-background-size\",\n  \"background-size\"\n ],\n [\n  \"-webkit-border-after\",\n  \"border-block-end\"\n ],\n [\n  \"-webkit-border-after-color\",\n  \"border-block-end-color\"\n ],\n [\n  \"-webkit-border-after-style\",\n  \"border-block-end-style\"\n ],\n [\n  \"-webkit-border-after-width\",\n  \"border-block-end-width\"\n ],\n [\n  \"-webkit-border-before\",\n  \"border-block-start\"\n ],\n [\n  \"-webkit-border-before-color\",\n  \"border-block-start-color\"\n ],\n [\n  \"-webkit-border-before-style\",\n  \"border-block-start-style\"\n ],\n [\n  \"-webkit-border-before-width\",\n  \"border-block-start-width\"\n ],\n [\n  \"-webkit-border-bottom-left-radius\",\n  \"border-bottom-left-radius\"\n ],\n [\n  \"-webkit-border-bottom-right-radius\",\n  \"border-bottom-right-radius\"\n ],\n [\n  \"-webkit-border-end\",\n  \"border-inline-end\"\n ],\n [\n  \"-webkit-border-end-color\",\n  \"border-inline-end-color\"\n ],\n [\n  \"-webkit-border-end-style\",\n  \"border-inline-end-style\"\n ],\n [\n  \"-webkit-border-end-width\",\n  \"border-inline-end-width\"\n ],\n [\n  \"-webkit-border-radius\",\n  \"border-radius\"\n ],\n [\n  \"-webkit-border-start\",\n  \"border-inline-start\"\n ],\n [\n  \"-webkit-border-start-color\",\n  \"border-inline-start-color\"\n ],\n [\n  \"-webkit-border-start-style\",\n  \"border-inline-start-style\"\n ],\n [\n  \"-webkit-border-start-width\",\n  \"border-inline-start-width\"\n ],\n [\n  \"-webkit-border-top-left-radius\",\n  \"border-top-left-radius\"\n ],\n [\n  \"-webkit-border-top-right-radius\",\n  \"border-top-right-radius\"\n ],\n [\n  \"-webkit-box-shadow\",\n  \"box-shadow\"\n ],\n [\n  \"-webkit-box-sizing\",\n  \"box-sizing\"\n ],\n [\n  \"-webkit-clip-path\",\n  \"clip-path\"\n ],\n [\n  \"-webkit-column-count\",\n  \"column-count\"\n ],\n [\n  \"-webkit-column-gap\",\n  \"column-gap\"\n ],\n [\n  \"-webkit-column-rule\",\n  \"column-rule\"\n ],\n [\n  \"-webkit-column-rule-color\",\n  \"column-rule-color\"\n ],\n [\n  \"-webkit-column-rule-style\",\n  \"column-rule-style\"\n ],\n [\n  \"-webkit-column-rule-width\",\n  \"column-rule-width\"\n ],\n [\n  \"-webkit-column-span\",\n  \"column-span\"\n ],\n [\n  \"-webkit-column-width\",\n  \"column-width\"\n ],\n [\n  \"-webkit-columns\",\n  \"columns\"\n ],\n [\n  \"-webkit-filter\",\n  \"filter\"\n ],\n [\n  \"-webkit-flex\",\n  \"flex\"\n ],\n [\n  \"-webkit-flex-basis\",\n  \"flex-basis\"\n ],\n [\n  \"-webkit-flex-direction\",\n  \"flex-direction\"\n ],\n [\n  \"-webkit-flex-flow\",\n  \"flex-flow\"\n ],\n [\n  \"-webkit-flex-grow\",\n  \"flex-grow\"\n ],\n [\n  \"-webkit-flex-shrink\",\n  \"flex-shrink\"\n ],\n [\n  \"-webkit-flex-wrap\",\n  \"flex-wrap\"\n ],\n [\n  \"-webkit-font-feature-settings\",\n  \"font-feature-settings\"\n ],\n [\n  \"-webkit-hyphenate-character\",\n  \"hyphenate-character\"\n ],\n [\n  \"-webkit-justify-content\",\n  \"justify-content\"\n ],\n [\n  \"-webkit-logical-height\",\n  \"block-size\"\n ],\n [\n  \"-webkit-logical-width\",\n  \"inline-size\"\n ],\n [\n  \"-webkit-margin-after\",\n  \"margin-block-end\"\n ],\n [\n  \"-webkit-margin-before\",\n  \"margin-block-start\"\n ],\n [\n  \"-webkit-margin-end\",\n  \"margin-inline-end\"\n ],\n [\n  \"-webkit-margin-start\",\n  \"margin-inline-start\"\n ],\n [\n  \"-webkit-mask\",\n  \"mask\"\n ],\n [\n  \"-webkit-mask-clip\",\n  \"mask-clip\"\n ],\n [\n  \"-webkit-mask-composite\",\n  \"mask-composite\"\n ],\n [\n  \"-webkit-mask-image\",\n  \"mask-image\"\n ],\n [\n  \"-webkit-mask-origin\",\n  \"mask-origin\"\n ],\n [\n  \"-webkit-mask-position\",\n  \"mask-position\"\n ],\n [\n  \"-webkit-mask-repeat\",\n  \"mask-repeat\"\n ],\n [\n  \"-webkit-mask-size\",\n  \"mask-size\"\n ],\n [\n  \"-webkit-max-logical-height\",\n  \"max-block-size\"\n ],\n [\n  \"-webkit-max-logical-width\",\n  \"max-inline-size\"\n ],\n [\n  \"-webkit-min-logical-height\",\n  \"min-block-size\"\n ],\n [\n  \"-webkit-min-logical-width\",\n  \"min-inline-size\"\n ],\n [\n  \"-webkit-opacity\",\n  \"opacity\"\n ],\n [\n  \"-webkit-order\",\n  \"order\"\n ],\n [\n  \"-webkit-padding-after\",\n  \"padding-block-end\"\n ],\n [\n  \"-webkit-padding-before\",\n  \"padding-block-start\"\n ],\n [\n  \"-webkit-padding-end\",\n  \"padding-inline-end\"\n ],\n [\n  \"-webkit-padding-start\",\n  \"padding-inline-start\"\n ],\n [\n  \"-webkit-perspective\",\n  \"perspective\"\n ],\n [\n  \"-webkit-perspective-origin\",\n  \"perspective-origin\"\n ],\n [\n  \"-webkit-print-color-adjust\",\n  \"print-color-adjust\"\n ],\n [\n  \"-webkit-shape-image-threshold\",\n  \"shape-image-threshold\"\n ],\n [\n  \"-webkit-shape-margin\",\n  \"shape-margin\"\n ],\n [\n  \"-webkit-shape-outside\",\n  \"shape-outside\"\n ],\n [\n  \"-webkit-text-emphasis\",\n  \"text-emphasis\"\n ],\n [\n  \"-webkit-text-emphasis-color\",\n  \"text-emphasis-color\"\n ],\n [\n  \"-webkit-text-emphasis-position\",\n  \"text-emphasis-position\"\n ],\n [\n  \"-webkit-text-emphasis-style\",\n  \"text-emphasis-style\"\n ],\n [\n  \"-webkit-text-size-adjust\",\n  \"text-size-adjust\"\n ],\n [\n  \"-webkit-transform\",\n  \"transform\"\n ],\n [\n  \"-webkit-transform-origin\",\n  \"transform-origin\"\n ],\n [\n  \"-webkit-transform-style\",\n  \"transform-style\"\n ],\n [\n  \"-webkit-transition\",\n  \"transition\"\n ],\n [\n  \"-webkit-transition-delay\",\n  \"transition-delay\"\n ],\n [\n  \"-webkit-transition-duration\",\n  \"transition-duration\"\n ],\n [\n  \"-webkit-transition-property\",\n  \"transition-property\"\n ],\n [\n  \"-webkit-transition-timing-function\",\n  \"transition-timing-function\"\n ],\n [\n  \"-webkit-user-select\",\n  \"user-select\"\n ],\n [\n  \"grid-column-gap\",\n  \"column-gap\"\n ],\n [\n  \"grid-gap\",\n  \"gap\"\n ],\n [\n  \"grid-row-gap\",\n  \"row-gap\"\n ],\n [\n  \"word-wrap\",\n  \"overflow-wrap\"\n ]\n]);\n", "// Copyright 2012 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as Protocol from '../../generated/protocol.js';\nimport * as TextUtils from '../../models/text_utils/text_utils.js';\nimport * as Common from '../common/common.js';\nimport * as i18n from '../i18n/i18n.js';\nimport * as Platform from '../platform/platform.js';\n\nimport {Attribute, type Cookie} from './Cookie.js';\nimport {CookieModel} from './CookieModel.js';\nimport {CookieParser} from './CookieParser.js';\nimport * as HttpReasonPhraseStrings from './HttpReasonPhraseStrings.js';\nimport {\n  Events as NetworkManagerEvents,\n  NetworkManager,\n} from './NetworkManager.js';\nimport {ServerSentEvents} from './ServerSentEvents.js';\nimport {ServerTiming} from './ServerTiming.js';\nimport {Type} from './Target.js';\n\n// clang-format off\nconst UIStrings = {\n  /**\n   * @description Text in Network Request\n   */\n  binary: '(binary)',\n  /**\n   * @description Tooltip to explain why a cookie was blocked\n   */\n  secureOnly: 'This cookie was blocked because it had the \"`Secure`\" attribute and the connection was not secure.',\n  /**\n   * @description Tooltip to explain why a cookie was blocked\n   */\n  notOnPath: 'This cookie was blocked because its path was not an exact match for or a superdirectory of the request url\\'s path.',\n  /**\n   * @description Tooltip to explain why a cookie was blocked\n   */\n  domainMismatch: 'This cookie was blocked because neither did the request URL\\'s domain exactly match the cookie\\'s domain, nor was the request URL\\'s domain a subdomain of the cookie\\'s Domain attribute value.',\n  /**\n   * @description Tooltip to explain why a cookie was blocked\n   */\n  sameSiteStrict: 'This cookie was blocked because it had the \"`SameSite=Strict`\" attribute and the request was made from a different site. This includes top-level navigation requests initiated by other sites.',\n  /**\n   * @description Tooltip to explain why a cookie was blocked\n   */\n  sameSiteLax: 'This cookie was blocked because it had the \"`SameSite=Lax`\" attribute and the request was made from a different site and was not initiated by a top-level navigation.',\n  /**\n   * @description Tooltip to explain why a cookie was blocked\n   */\n  sameSiteUnspecifiedTreatedAsLax: 'This cookie didn\\'t specify a \"`SameSite`\" attribute when it was stored and was defaulted to \"SameSite=Lax,\" and was blocked because the request was made from a different site and was not initiated by a top-level navigation. The cookie had to have been set with \"`SameSite=None`\" to enable cross-site usage.',\n  /**\n   * @description Tooltip to explain why a cookie was blocked\n   */\n  sameSiteNoneInsecure: 'This cookie was blocked because it had the \"`SameSite=None`\" attribute but was not marked \"Secure\". Cookies without SameSite restrictions must be marked \"Secure\" and sent over a secure connection.',\n  /**\n   * @description Tooltip to explain why a cookie was blocked\n   */\n  userPreferences: 'This cookie was blocked due to user preferences.',\n  /**\n   * @description Tooltip to explain why a cookie was blocked\n   */\n  thirdPartyPhaseout: 'This cookie was blocked either because of Chrome flags or browser configuration. Learn more in the Issues panel.',\n  /**\n   * @description Tooltip to explain why a cookie was blocked\n   */\n  unknownError: 'An unknown error was encountered when trying to send this cookie.',\n  /**\n   * @description Tooltip to explain why a cookie was blocked due to Schemeful Same-Site\n   */\n  schemefulSameSiteStrict: 'This cookie was blocked because it had the \"`SameSite=Strict`\" attribute but the request was cross-site. This includes top-level navigation requests initiated by other sites. This request is considered cross-site because the URL has a different scheme than the current site.',\n  /**\n   * @description Tooltip to explain why a cookie was blocked due to Schemeful Same-Site\n   */\n  schemefulSameSiteLax: 'This cookie was blocked because it had the \"`SameSite=Lax`\" attribute but the request was cross-site and was not initiated by a top-level navigation. This request is considered cross-site because the URL has a different scheme than the current site.',\n  /**\n   * @description Tooltip to explain why a cookie was blocked due to Schemeful Same-Site\n   */\n  schemefulSameSiteUnspecifiedTreatedAsLax: 'This cookie didn\\'t specify a \"`SameSite`\" attribute when it was stored, was defaulted to \"`SameSite=Lax\"`, and was blocked because the request was cross-site and was not initiated by a top-level navigation. This request is considered cross-site because the URL has a different scheme than the current site.',\n  /**\n   * @description Tooltip to explain why a cookie was blocked due to SameParty\n   */\n  samePartyFromCrossPartyContext: 'This cookie was blocked because it had the \"`SameParty`\" attribute but the request was cross-party. The request was considered cross-party because the domain of the resource\\'s URL and the domains of the resource\\'s enclosing frames/documents are neither owners nor members in the same First-Party Set.',\n  /**\n   * @description Tooltip to explain why a cookie was blocked due to exceeding the maximum size\n   */\n  nameValuePairExceedsMaxSize: 'This cookie was blocked because it was too large. The combined size of the name and value must be less than or equal to 4096 characters.',\n  /**\n   * @description Tooltip to explain why an attempt to set a cookie via `Set-Cookie` HTTP header on a request's response was blocked.\n   */\n  thisSetcookieWasBlockedDueToUser: 'This attempt to set a cookie via a `Set-Cookie` header was blocked due to user preferences.',\n  /**\n   * @description Tooltip to explain why an attempt to set a cookie via `Set-Cookie` HTTP header on a request's response was blocked.\n   */\n   thisSetcookieWasBlockedDueThirdPartyPhaseout: 'Setting this cookie was blocked either because of Chrome flags or browser configuration. Learn more in the Issues panel.',\n  /**\n   * @description Tooltip to explain why an attempt to set a cookie via `Set-Cookie` HTTP header on a request's response was blocked.\n   */\n  thisSetcookieHadInvalidSyntax: 'This `Set-Cookie` header had invalid syntax.',\n  /**\n   * @description Tooltip to explain why a cookie was blocked\n   */\n  thisSetcookieHadADisallowedCharacter: 'This `Set-Cookie` header contained a disallowed character (a forbidden ASCII control character, or the tab character if it appears in the middle of the cookie name, value, an attribute name, or an attribute value).',\n  /**\n   * @description Tooltip to explain why a cookie was blocked\n   */\n  theSchemeOfThisConnectionIsNot: 'The scheme of this connection is not allowed to store cookies.',\n  /**\n   * @description Tooltip to explain why a cookie was blocked\n   */\n  anUnknownErrorWasEncounteredWhenTrying: 'An unknown error was encountered when trying to store this cookie.',\n  /**\n   * @description Tooltip to explain why a cookie was blocked due to Schemeful Same-Site\n   * @example {SameSite=Strict} PH1\n   */\n  thisSetcookieWasBlockedBecauseItHadTheSamesiteStrictLax: 'This attempt to set a cookie via a `Set-Cookie` header was blocked because it had the \"{PH1}\" attribute but came from a cross-site response which was not the response to a top-level navigation. This response is considered cross-site because the URL has a different scheme than the current site.',\n  /**\n   * @description Tooltip to explain why a cookie was blocked due to Schemeful Same-Site\n   */\n  thisSetcookieDidntSpecifyASamesite: 'This `Set-Cookie` header didn\\'t specify a \"`SameSite`\" attribute, was defaulted to \"`SameSite=Lax\"`, and was blocked because it came from a cross-site response which was not the response to a top-level navigation. This response is considered cross-site because the URL has a different scheme than the current site.',\n  /**\n   * @description Tooltip to explain why a cookie was blocked due to SameParty\n   */\n  thisSetcookieWasBlockedBecauseItHadTheSameparty: 'This attempt to set a cookie via a `Set-Cookie` header was blocked because it had the \"`SameParty`\" attribute but the request was cross-party. The request was considered cross-party because the domain of the resource\\'s URL and the domains of the resource\\'s enclosing frames/documents are neither owners nor members in the same First-Party Set.',\n  /**\n   * @description Tooltip to explain why a cookie was blocked due to SameParty\n   */\n  thisSetcookieWasBlockedBecauseItHadTheSamepartyAttribute: 'This attempt to set a cookie via a `Set-Cookie` header was blocked because it had the \"`SameParty`\" attribute but also had other conflicting attributes. Chrome requires cookies that use the \"`SameParty`\" attribute to also have the \"Secure\" attribute, and to not be restricted to \"`SameSite=Strict`\".',\n  /**\n   * @description Tooltip to explain why an attempt to set a cookie via a `Set-Cookie` HTTP header on a request's response was blocked.\n   */\n  blockedReasonSecureOnly: 'This attempt to set a cookie via a `Set-Cookie` header was blocked because it had the \"Secure\" attribute but was not received over a secure connection.',\n  /**\n   * @description Tooltip to explain why an attempt to set a cookie via a `Set-Cookie` HTTP header on a request's response was blocked.\n   * @example {SameSite=Strict} PH1\n   */\n  blockedReasonSameSiteStrictLax: 'This attempt to set a cookie via a `Set-Cookie` header was blocked because it had the \"{PH1}\" attribute but came from a cross-site response which was not the response to a top-level navigation.',\n  /**\n   * @description Tooltip to explain why an attempt to set a cookie via a `Set-Cookie` HTTP header on a request's response was blocked.\n   */\n  blockedReasonSameSiteUnspecifiedTreatedAsLax: 'This `Set-Cookie` header didn\\'t specify a \"`SameSite`\" attribute and was defaulted to \"`SameSite=Lax,`\" and was blocked because it came from a cross-site response which was not the response to a top-level navigation. The `Set-Cookie` had to have been set with \"`SameSite=None`\" to enable cross-site usage.',\n  /**\n   * @description Tooltip to explain why an attempt to set a cookie via a `Set-Cookie` HTTP header on a request's response was blocked.\n   */\n  blockedReasonSameSiteNoneInsecure: 'This attempt to set a cookie via a `Set-Cookie` header was blocked because it had the \"`SameSite=None`\" attribute but did not have the \"Secure\" attribute, which is required in order to use \"`SameSite=None`\".',\n  /**\n   * @description Tooltip to explain why an attempt to set a cookie via a `Set-Cookie` HTTP header on a request's response was blocked.\n   */\n  blockedReasonOverwriteSecure: 'This attempt to set a cookie via a `Set-Cookie` header was blocked because it was not sent over a secure connection and would have overwritten a cookie with the Secure attribute.',\n  /**\n   * @description Tooltip to explain why an attempt to set a cookie via a `Set-Cookie` HTTP header on a request's response was blocked.\n   */\n  blockedReasonInvalidDomain: 'This attempt to set a cookie via a `Set-Cookie` header was blocked because its Domain attribute was invalid with regards to the current host url.',\n  /**\n   * @description Tooltip to explain why an attempt to set a cookie via a `Set-Cookie` HTTP header on a request's response was blocked.\n   */\n  blockedReasonInvalidPrefix: 'This attempt to set a cookie via a `Set-Cookie` header was blocked because it used the \"`__Secure-`\" or \"`__Host-`\" prefix in its name and broke the additional rules applied to cookies with these prefixes as defined in `https://tools.ietf.org/html/draft-west-cookie-prefixes-05`.',\n  /**\n   * @description Tooltip to explain why a cookie was blocked when the size of the #name plus the size of the value exceeds the max size.\n   */\n  thisSetcookieWasBlockedBecauseTheNameValuePairExceedsMaxSize: 'This attempt to set a cookie via a `Set-Cookie` header was blocked because the cookie was too large. The combined size of the name and value must be less than or equal to 4096 characters.',\n  /**\n   * @description Text in Network Manager\n   * @example {https://example.com} PH1\n   */\n  setcookieHeaderIsIgnoredIn: 'Set-Cookie header is ignored in response from url: {PH1}. The combined size of the name and value must be less than or equal to 4096 characters.',\n  /**\n   * @description Tooltip to explain why the cookie should have been blocked by third-party cookie phaseout but is exempted.\n   */\n   exemptionReasonUserSetting: 'This cookie is allowed by user preference.',\n   /**\n    * @description Tooltip to explain why the cookie should have been blocked by third-party cookie phaseout but is exempted.\n    */\n   exemptionReasonTPCDMetadata: 'This cookie is allowed by a third-party cookie deprecation trial grace period. Learn more: goo.gle/dt-grace.',\n   /**\n    * @description Tooltip to explain why the cookie should have been blocked by third-party cookie phaseout but is exempted.\n    */\n   exemptionReasonTPCDDeprecationTrial: 'This cookie is allowed by third-party cookie deprecation trial. Learn more: goo.gle/ps-dt.',\n   /**\n    * @description Tooltip to explain why the cookie should have been blocked by third-party cookie phaseout but is exempted.\n    */\n  exemptionReasonTopLevelTPCDDeprecationTrial: 'This cookie is allowed by top-level third-party cookie deprecation trial. Learn more: goo.gle/ps-dt.',\n   /**\n    * @description Tooltip to explain why the cookie should have been blocked by third-party cookie phaseout but is exempted.\n    */\n   exemptionReasonTPCDHeuristics: 'This cookie is allowed by third-party cookie heuristics. Learn more: goo.gle/hbe',\n   /**\n    * @description Tooltip to explain why the cookie should have been blocked by third-party cookie phaseout but is exempted.\n    */\n   exemptionReasonEnterprisePolicy: 'This cookie is allowed by Chrome Enterprise policy. Learn more: goo.gle/ce-3pc',\n   /**\n    * @description Tooltip to explain why the cookie should have been blocked by third-party cookie phaseout but is exempted.\n    */\n   exemptionReasonStorageAccessAPI: 'This cookie is allowed by the Storage Access API. Learn more: goo.gle/saa',\n   /**\n    * @description Tooltip to explain why the cookie should have been blocked by third-party cookie phaseout but is exempted.\n    */\n   exemptionReasonTopLevelStorageAccessAPI: 'This cookie is allowed by the top-level Storage Access API. Learn more: goo.gle/saa-top',\n   /**\n    * @description Tooltip to explain why the cookie should have been blocked by third-party cookie phaseout but is exempted.\n    */\n    exemptionReasonScheme: 'This cookie is allowed by the top-level url scheme',\n} as const;\n// clang-format on\n\nconst str_ = i18n.i18n.registerUIStrings('core/sdk/NetworkRequest.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\n\nexport class NetworkRequest extends Common.ObjectWrapper.ObjectWrapper<EventTypes> implements\n    TextUtils.ContentProvider.StreamingContentProvider {\n  #requestId: string;\n  #backendRequestId?: Protocol.Network.RequestId;\n  readonly #documentURL: Platform.DevToolsPath.UrlString;\n  readonly #frameId: Protocol.Page.FrameId|null;\n  readonly #loaderId: Protocol.Network.LoaderId|null;\n  readonly #hasUserGesture: boolean|undefined;\n  readonly #initiator: Protocol.Network.Initiator|null|undefined;\n  #redirectSource: NetworkRequest|null = null;\n  #preflightRequest: NetworkRequest|null = null;\n  #preflightInitiatorRequest: NetworkRequest|null = null;\n  #isRedirect = false;\n  #redirectDestination: NetworkRequest|null = null;\n  #issueTime = -1;\n  #startTime = -1;\n  #endTime = -1;\n  #blockedReason: Protocol.Network.BlockedReason|undefined = undefined;\n  #corsErrorStatus: Protocol.Network.CorsErrorStatus|undefined = undefined;\n  statusCode = 0;\n  statusText = '';\n  requestMethod = '';\n  requestTime = 0;\n  protocol = '';\n  alternateProtocolUsage: Protocol.Network.AlternateProtocolUsage|undefined = undefined;\n  mixedContentType: Protocol.Security.MixedContentType = Protocol.Security.MixedContentType.None;\n  #initialPriority: Protocol.Network.ResourcePriority|null = null;\n  #currentPriority: Protocol.Network.ResourcePriority|null = null;\n  #signedExchangeInfo: Protocol.Network.SignedExchangeInfo|null = null;\n  #resourceType: Common.ResourceType.ResourceType = Common.ResourceType.resourceTypes.Other;\n  #contentData: Promise<TextUtils.ContentData.ContentDataOrError>|null = null;\n  #streamingContentData: Promise<TextUtils.StreamingContentData.StreamingContentDataOrError>|null = null;\n  readonly #frames: WebSocketFrame[] = [];\n  #responseHeaderValues: Record<string, string|undefined> = {};\n  #responseHeadersText = '';\n  #originalResponseHeaders: Protocol.Fetch.HeaderEntry[] = [];\n  #sortedOriginalResponseHeaders?: NameValue[];\n\n  // This field is only used when intercepting and overriding requests, because\n  // in that case 'this.responseHeaders' does not contain 'set-cookie' headers.\n  #setCookieHeaders: Protocol.Fetch.HeaderEntry[] = [];\n\n  #requestHeaders: NameValue[] = [];\n  #requestHeaderValues: Record<string, string|undefined> = {};\n  #remoteAddress = '';\n  #remoteAddressSpace: Protocol.Network.IPAddressSpace = Protocol.Network.IPAddressSpace.Unknown;\n  #referrerPolicy: Protocol.Network.RequestReferrerPolicy|null = null;\n  #securityState: Protocol.Security.SecurityState = Protocol.Security.SecurityState.Unknown;\n  #securityDetails: Protocol.Network.SecurityDetails|null = null;\n  connectionId = '0';\n  connectionReused = false;\n  hasNetworkData = false;\n  #formParametersPromise: Promise<NameValue[]|null>|null = null;\n  #requestFormDataPromise: Promise<string|null>|null = Promise.resolve(null);\n  #hasExtraRequestInfo = false;\n  #hasExtraResponseInfo = false;\n  #blockedRequestCookies: BlockedCookieWithReason[] = [];\n  #includedRequestCookies: IncludedCookieWithReason[] = [];\n  #blockedResponseCookies: BlockedSetCookieWithReason[] = [];\n  #exemptedResponseCookies: ExemptedSetCookieWithReason[] = [];\n  #responseCookiesPartitionKey: Protocol.Network.CookiePartitionKey|null = null;\n  #responseCookiesPartitionKeyOpaque: boolean|null = null;\n  #siteHasCookieInOtherPartition = false;\n  localizedFailDescription: string|null = null;\n  #url!: Platform.DevToolsPath.UrlString;\n  #responseReceivedTime!: number;\n  #transferSize!: number;\n  #finished!: boolean;\n  #failed!: boolean;\n  #canceled!: boolean;\n  #preserved!: boolean;\n  #mimeType!: string;\n  #charset!: string;\n  #parsedURL!: Common.ParsedURL.ParsedURL;\n  #name!: string|undefined;\n  #path!: string|undefined;\n  #clientSecurityState!:|Protocol.Network.ClientSecurityState|undefined;\n  #trustTokenParams!: Protocol.Network.TrustTokenParams|undefined;\n  #trustTokenOperationDoneEvent!:|Protocol.Network.TrustTokenOperationDoneEvent|undefined;\n  #responseCacheStorageCacheName?: string;\n  #serviceWorkerResponseSource?: Protocol.Network.ServiceWorkerResponseSource;\n  #wallIssueTime?: number;\n  #responseRetrievalTime?: Date;\n  #resourceSize?: number;\n  #fromMemoryCache?: boolean;\n  #fromDiskCache?: boolean;\n  #fromPrefetchCache?: boolean;\n  #fromEarlyHints?: boolean;\n  #fetchedViaServiceWorker?: boolean;\n  #serviceWorkerRouterInfo?: Protocol.Network.ServiceWorkerRouterInfo;\n  #timing?: Protocol.Network.ResourceTiming;\n  #requestHeadersText?: string;\n  #responseHeaders?: NameValue[];\n  #earlyHintsHeaders?: NameValue[];\n  #sortedResponseHeaders?: NameValue[];\n  #responseCookies?: Cookie[];\n  #serverTimings?: ServerTiming[]|null;\n  #queryString?: string|null;\n  #parsedQueryParameters?: NameValue[];\n  #contentDataProvider?: () => Promise<TextUtils.ContentData.ContentDataOrError>;\n  #isSameSite: boolean|null = null;\n  #wasIntercepted = false;\n  #associatedData = new Map<string, object>();\n  #hasOverriddenContent = false;\n  #hasThirdPartyCookiePhaseoutIssue = false;\n  #serverSentEvents?: ServerSentEvents;\n  responseReceivedPromise?: Promise<void>;\n  responseReceivedPromiseResolve?: () => void;\n  directSocketInfo?: DirectSocketInfo;\n  readonly #directSocketChunks: DirectSocketChunk[] = [];\n  #isAdRelated: boolean;\n  #appliedNetworkConditionsId?: string;\n\n  constructor(\n      requestId: string,\n      backendRequestId: Protocol.Network.RequestId|undefined,\n      url: Platform.DevToolsPath.UrlString,\n      documentURL: Platform.DevToolsPath.UrlString,\n      frameId: Protocol.Page.FrameId|null,\n      loaderId: Protocol.Network.LoaderId|null,\n      initiator: Protocol.Network.Initiator|null,\n      hasUserGesture?: boolean,\n  ) {\n    super();\n\n    this.#requestId = requestId;\n    this.#backendRequestId = backendRequestId;\n    this.setUrl(url);\n    this.#documentURL = documentURL;\n    this.#frameId = frameId;\n    this.#loaderId = loaderId;\n    this.#initiator = initiator;\n    this.#hasUserGesture = hasUserGesture;\n    this.#isAdRelated = false;\n  }\n\n  static create(\n      backendRequestId: Protocol.Network.RequestId,\n      url: Platform.DevToolsPath.UrlString,\n      documentURL: Platform.DevToolsPath.UrlString,\n      frameId: Protocol.Page.FrameId|null,\n      loaderId: Protocol.Network.LoaderId|null,\n      initiator: Protocol.Network.Initiator|null,\n      hasUserGesture?: boolean,\n      ): NetworkRequest {\n    return new NetworkRequest(\n        backendRequestId,\n        backendRequestId,\n        url,\n        documentURL,\n        frameId,\n        loaderId,\n        initiator,\n        hasUserGesture,\n    );\n  }\n\n  static createForSocket(\n      backendRequestId: Protocol.Network.RequestId,\n      requestURL: Platform.DevToolsPath.UrlString,\n      initiator?: Protocol.Network.Initiator,\n      ): NetworkRequest {\n    return new NetworkRequest(\n        backendRequestId,\n        backendRequestId,\n        requestURL,\n        Platform.DevToolsPath.EmptyUrlString,\n        null,\n        null,\n        initiator || null,\n    );\n  }\n\n  static createWithoutBackendRequest(\n      requestId: string,\n      url: Platform.DevToolsPath.UrlString,\n      documentURL: Platform.DevToolsPath.UrlString,\n      initiator: Protocol.Network.Initiator|null,\n      ): NetworkRequest {\n    return new NetworkRequest(\n        requestId,\n        undefined,\n        url,\n        documentURL,\n        null,\n        null,\n        initiator,\n    );\n  }\n\n  identityCompare(other: NetworkRequest): number {\n    const thisId = this.requestId();\n    const thatId = other.requestId();\n    if (thisId > thatId) {\n      return 1;\n    }\n    if (thisId < thatId) {\n      return -1;\n    }\n    return 0;\n  }\n\n  requestId(): string {\n    return this.#requestId;\n  }\n\n  backendRequestId(): Protocol.Network.RequestId|undefined {\n    return this.#backendRequestId;\n  }\n\n  url(): Platform.DevToolsPath.UrlString {\n    return this.#url;\n  }\n\n  isBlobRequest(): boolean {\n    return Common.ParsedURL.schemeIs(this.#url, 'blob:');\n  }\n\n  setUrl(x: Platform.DevToolsPath.UrlString): void {\n    if (this.#url === x) {\n      return;\n    }\n\n    this.#url = x;\n    this.#parsedURL = new Common.ParsedURL.ParsedURL(x);\n    this.#queryString = undefined;\n    this.#parsedQueryParameters = undefined;\n    this.#name = undefined;\n    this.#path = undefined;\n  }\n\n  get documentURL(): Platform.DevToolsPath.UrlString {\n    return this.#documentURL;\n  }\n\n  get parsedURL(): Common.ParsedURL.ParsedURL {\n    return this.#parsedURL;\n  }\n\n  get frameId(): Protocol.Page.FrameId|null {\n    return this.#frameId;\n  }\n\n  get loaderId(): Protocol.Network.LoaderId|null {\n    return this.#loaderId;\n  }\n\n  get appliedNetworkConditionsId(): string|undefined {\n    return this.#appliedNetworkConditionsId;\n  }\n\n  setRemoteAddress(ip: string, port: number): void {\n    this.#remoteAddress = ip + ':' + port;\n    this.dispatchEventToListeners(Events.REMOTE_ADDRESS_CHANGED, this);\n  }\n\n  remoteAddress(): string {\n    return this.#remoteAddress;\n  }\n\n  remoteAddressSpace(): Protocol.Network.IPAddressSpace {\n    return this.#remoteAddressSpace;\n  }\n\n  /**\n   * The cache #name of the CacheStorage from where the response is served via\n   * the ServiceWorker.\n   */\n  getResponseCacheStorageCacheName(): string|undefined {\n    return this.#responseCacheStorageCacheName;\n  }\n\n  setResponseCacheStorageCacheName(x: string): void {\n    this.#responseCacheStorageCacheName = x;\n  }\n\n  serviceWorkerResponseSource():|Protocol.Network.ServiceWorkerResponseSource|undefined {\n    return this.#serviceWorkerResponseSource;\n  }\n\n  setServiceWorkerResponseSource(\n      serviceWorkerResponseSource: Protocol.Network.ServiceWorkerResponseSource,\n      ): void {\n    this.#serviceWorkerResponseSource = serviceWorkerResponseSource;\n  }\n\n  setReferrerPolicy(\n      referrerPolicy: Protocol.Network.RequestReferrerPolicy,\n      ): void {\n    this.#referrerPolicy = referrerPolicy;\n  }\n\n  referrerPolicy(): Protocol.Network.RequestReferrerPolicy|null {\n    return this.#referrerPolicy;\n  }\n\n  securityState(): Protocol.Security.SecurityState {\n    return this.#securityState;\n  }\n\n  setSecurityState(securityState: Protocol.Security.SecurityState): void {\n    this.#securityState = securityState;\n  }\n\n  securityDetails(): Protocol.Network.SecurityDetails|null {\n    return this.#securityDetails;\n  }\n\n  securityOrigin(): string {\n    return this.#parsedURL.securityOrigin();\n  }\n\n  setSecurityDetails(securityDetails: Protocol.Network.SecurityDetails): void {\n    this.#securityDetails = securityDetails;\n  }\n\n  get startTime(): number {\n    return this.#startTime || -1;\n  }\n\n  setIssueTime(monotonicTime: number, wallTime: number): void {\n    this.#issueTime = monotonicTime;\n    this.#wallIssueTime = wallTime;\n    this.#startTime = monotonicTime;\n  }\n\n  issueTime(): number {\n    return this.#issueTime;\n  }\n\n  pseudoWallTime(monotonicTime: number): number {\n    return this.#wallIssueTime ? this.#wallIssueTime - this.#issueTime + monotonicTime : monotonicTime;\n  }\n\n  get responseReceivedTime(): number {\n    return this.#responseReceivedTime || -1;\n  }\n\n  set responseReceivedTime(x: number) {\n    this.#responseReceivedTime = x;\n  }\n\n  /**\n   * The time at which the returned response was generated. For cached\n   * responses, this is the last time the cache entry was validated.\n   */\n  getResponseRetrievalTime(): Date|undefined {\n    return this.#responseRetrievalTime;\n  }\n\n  setResponseRetrievalTime(x: Date): void {\n    this.#responseRetrievalTime = x;\n  }\n\n  get endTime(): number {\n    return this.#endTime || -1;\n  }\n\n  set endTime(x: number) {\n    if (this.timing?.requestTime) {\n      // Check against accurate responseReceivedTime.\n      this.#endTime = Math.max(x, this.responseReceivedTime);\n    } else {\n      // Prefer endTime since it might be from the network stack.\n      this.#endTime = x;\n      if (this.#responseReceivedTime > x) {\n        this.#responseReceivedTime = x;\n      }\n    }\n    this.dispatchEventToListeners(Events.TIMING_CHANGED, this);\n  }\n\n  get duration(): number {\n    if (this.#endTime === -1 || this.#startTime === -1) {\n      return -1;\n    }\n    return this.#endTime - this.#startTime;\n  }\n\n  get latency(): number {\n    if (this.#responseReceivedTime === -1 || this.#startTime === -1) {\n      return -1;\n    }\n    return this.#responseReceivedTime - this.#startTime;\n  }\n\n  get resourceSize(): number {\n    return this.#resourceSize || 0;\n  }\n\n  set resourceSize(x: number) {\n    this.#resourceSize = x;\n  }\n\n  get transferSize(): number {\n    return this.#transferSize || 0;\n  }\n\n  increaseTransferSize(x: number): void {\n    this.#transferSize = (this.#transferSize || 0) + x;\n  }\n\n  setTransferSize(x: number): void {\n    this.#transferSize = x;\n  }\n\n  get finished(): boolean {\n    return this.#finished;\n  }\n\n  set finished(x: boolean) {\n    if (this.#finished === x) {\n      return;\n    }\n\n    this.#finished = x;\n\n    if (x) {\n      this.dispatchEventToListeners(Events.FINISHED_LOADING, this);\n    }\n  }\n\n  get failed(): boolean {\n    return this.#failed;\n  }\n\n  set failed(x: boolean) {\n    this.#failed = x;\n  }\n\n  get canceled(): boolean {\n    return this.#canceled;\n  }\n\n  set canceled(x: boolean) {\n    this.#canceled = x;\n  }\n\n  get preserved(): boolean {\n    return this.#preserved;\n  }\n\n  set preserved(x: boolean) {\n    this.#preserved = x;\n  }\n\n  blockedReason(): Protocol.Network.BlockedReason|undefined {\n    return this.#blockedReason;\n  }\n\n  setBlockedReason(reason: Protocol.Network.BlockedReason): void {\n    this.#blockedReason = reason;\n  }\n\n  corsErrorStatus(): Protocol.Network.CorsErrorStatus|undefined {\n    return this.#corsErrorStatus;\n  }\n\n  setCorsErrorStatus(corsErrorStatus: Protocol.Network.CorsErrorStatus): void {\n    this.#corsErrorStatus = corsErrorStatus;\n  }\n\n  wasBlocked(): boolean {\n    return Boolean(this.#blockedReason);\n  }\n\n  cached(): boolean {\n    return ((Boolean(this.#fromMemoryCache) || Boolean(this.#fromDiskCache)) && !this.#transferSize);\n  }\n\n  cachedInMemory(): boolean {\n    return Boolean(this.#fromMemoryCache) && !this.#transferSize;\n  }\n\n  fromPrefetchCache(): boolean {\n    return Boolean(this.#fromPrefetchCache);\n  }\n\n  setFromMemoryCache(): void {\n    this.#fromMemoryCache = true;\n    this.#timing = undefined;\n  }\n\n  get fromDiskCache(): boolean|undefined {\n    return this.#fromDiskCache;\n  }\n\n  setFromDiskCache(): void {\n    this.#fromDiskCache = true;\n  }\n\n  setFromPrefetchCache(): void {\n    this.#fromPrefetchCache = true;\n  }\n\n  fromEarlyHints(): boolean {\n    return Boolean(this.#fromEarlyHints);\n  }\n\n  setFromEarlyHints(): void {\n    this.#fromEarlyHints = true;\n  }\n\n  /**\n   * Returns true if the request was intercepted by a service worker and it\n   * provided its own response.\n   */\n  get fetchedViaServiceWorker(): boolean {\n    return Boolean(this.#fetchedViaServiceWorker);\n  }\n\n  set fetchedViaServiceWorker(x: boolean) {\n    this.#fetchedViaServiceWorker = x;\n  }\n\n  get serviceWorkerRouterInfo():|Protocol.Network.ServiceWorkerRouterInfo|undefined {\n    return this.#serviceWorkerRouterInfo;\n  }\n\n  set serviceWorkerRouterInfo(x: Protocol.Network.ServiceWorkerRouterInfo) {\n    this.#serviceWorkerRouterInfo = x;\n  }\n\n  /**\n   * Returns true if the request was matched to a route when using the\n   * ServiceWorker static routing API.\n   */\n  hasMatchingServiceWorkerRouter(): boolean {\n    // See definitions in `browser_protocol.pdl` for justification.\n    return (\n        this.#serviceWorkerRouterInfo !== undefined && this.serviceWorkerRouterInfo?.matchedSourceType !== undefined);\n  }\n\n  /**\n   * Returns true if the request was sent by a service worker.\n   */\n  initiatedByServiceWorker(): boolean {\n    const networkManager = NetworkManager.forRequest(this);\n    if (!networkManager) {\n      return false;\n    }\n    return networkManager.target().type() === Type.ServiceWorker;\n  }\n\n  get timing(): Protocol.Network.ResourceTiming|undefined {\n    return this.#timing;\n  }\n\n  set timing(timingInfo: Protocol.Network.ResourceTiming|undefined) {\n    if (!timingInfo || this.#fromMemoryCache) {\n      return;\n    }\n    // Take startTime and responseReceivedTime from timing data for better accuracy.\n    // Timing's requestTime is a baseline in seconds, rest of the numbers there are ticks in millis.\n    this.#startTime = timingInfo.requestTime;\n    const headersReceivedTime = timingInfo.requestTime + timingInfo.receiveHeadersEnd / 1000.0;\n    if ((this.#responseReceivedTime || -1) < 0 || this.#responseReceivedTime > headersReceivedTime) {\n      this.#responseReceivedTime = headersReceivedTime;\n    }\n    if (this.#startTime > this.#responseReceivedTime) {\n      this.#responseReceivedTime = this.#startTime;\n    }\n\n    this.#timing = timingInfo;\n    this.dispatchEventToListeners(Events.TIMING_CHANGED, this);\n  }\n\n  private setConnectTimingFromExtraInfo(\n      connectTiming: Protocol.Network.ConnectTiming,\n      ): void {\n    this.#startTime = connectTiming.requestTime;\n    this.dispatchEventToListeners(Events.TIMING_CHANGED, this);\n  }\n\n  get mimeType(): string {\n    return this.#mimeType;\n  }\n\n  set mimeType(x: string) {\n    this.#mimeType = x;\n    if (x === Platform.MimeType.MimeType.EVENTSTREAM && !this.#serverSentEvents) {\n      const parseFromStreamedData = this.resourceType() !== Common.ResourceType.resourceTypes.EventSource;\n      this.#serverSentEvents = new ServerSentEvents(\n          this,\n          parseFromStreamedData,\n      );\n    }\n  }\n\n  get displayName(): string {\n    return this.#parsedURL.displayName;\n  }\n\n  name(): string {\n    if (this.#name) {\n      return this.#name;\n    }\n    this.parseNameAndPathFromURL();\n    return this.#name as string;\n  }\n\n  path(): string {\n    if (this.#path) {\n      return this.#path;\n    }\n    this.parseNameAndPathFromURL();\n    return this.#path as string;\n  }\n\n  private parseNameAndPathFromURL(): void {\n    if (this.#parsedURL.isDataURL()) {\n      this.#name = this.#parsedURL.dataURLDisplayName();\n      this.#path = '';\n    } else if (this.#parsedURL.isBlobURL()) {\n      this.#name = this.#parsedURL.url;\n      this.#path = '';\n    } else if (this.#parsedURL.isAboutBlank()) {\n      this.#name = this.#parsedURL.url;\n      this.#path = '';\n    } else {\n      this.#path = this.#parsedURL.host + this.#parsedURL.folderPathComponents;\n\n      const networkManager = NetworkManager.forRequest(this);\n      const inspectedURL = networkManager ? Common.ParsedURL.ParsedURL.fromString(\n                                                networkManager.target().inspectedURL(),\n                                                ) :\n                                            null;\n      this.#path = Platform.StringUtilities.trimURL(\n          this.#path,\n          inspectedURL ? inspectedURL.host : '',\n      );\n      if (this.#parsedURL.lastPathComponent || this.#parsedURL.queryParams) {\n        this.#name =\n            this.#parsedURL.lastPathComponent + (this.#parsedURL.queryParams ? '?' + this.#parsedURL.queryParams : '');\n      } else if (this.#parsedURL.folderPathComponents) {\n        this.#name = this.#parsedURL.folderPathComponents.substring(\n                         this.#parsedURL.folderPathComponents.lastIndexOf('/') + 1,\n                         ) +\n            '/';\n        this.#path = this.#path.substring(\n            0,\n            this.#path.lastIndexOf('/'),\n        );\n      } else {\n        this.#name = this.#parsedURL.host;\n        this.#path = '';\n      }\n    }\n  }\n\n  get folder(): string {\n    let path: string = this.#parsedURL.path;\n    const indexOfQuery = path.indexOf('?');\n    if (indexOfQuery !== -1) {\n      path = path.substring(0, indexOfQuery);\n    }\n    const lastSlashIndex = path.lastIndexOf('/');\n    return lastSlashIndex !== -1 ? path.substring(0, lastSlashIndex) : '';\n  }\n\n  get pathname(): string {\n    return this.#parsedURL.path;\n  }\n\n  resourceType(): Common.ResourceType.ResourceType {\n    return this.#resourceType;\n  }\n\n  setResourceType(resourceType: Common.ResourceType.ResourceType): void {\n    this.#resourceType = resourceType;\n  }\n\n  get domain(): string {\n    return this.#parsedURL.host;\n  }\n\n  get scheme(): string {\n    return this.#parsedURL.scheme;\n  }\n\n  getInferredStatusText(): string {\n    return (this.statusText || HttpReasonPhraseStrings.getStatusText(this.statusCode));\n  }\n\n  redirectSource(): NetworkRequest|null {\n    return this.#redirectSource;\n  }\n\n  setRedirectSource(originatingRequest: NetworkRequest|null): void {\n    this.#redirectSource = originatingRequest;\n  }\n\n  preflightRequest(): NetworkRequest|null {\n    return this.#preflightRequest;\n  }\n\n  setPreflightRequest(preflightRequest: NetworkRequest|null): void {\n    this.#preflightRequest = preflightRequest;\n  }\n\n  preflightInitiatorRequest(): NetworkRequest|null {\n    return this.#preflightInitiatorRequest;\n  }\n\n  setPreflightInitiatorRequest(\n      preflightInitiatorRequest: NetworkRequest|null,\n      ): void {\n    this.#preflightInitiatorRequest = preflightInitiatorRequest;\n  }\n\n  isPreflightRequest(): boolean {\n    return (\n        this.#initiator !== null && this.#initiator !== undefined &&\n        this.#initiator.type === Protocol.Network.InitiatorType.Preflight);\n  }\n\n  redirectDestination(): NetworkRequest|null {\n    return this.#redirectDestination;\n  }\n\n  setRedirectDestination(redirectDestination: NetworkRequest|null): void {\n    this.#redirectDestination = redirectDestination;\n  }\n\n  requestHeaders(): NameValue[] {\n    return this.#requestHeaders;\n  }\n\n  setRequestHeaders(headers: NameValue[]): void {\n    this.#requestHeaders = headers;\n\n    this.dispatchEventToListeners(Events.REQUEST_HEADERS_CHANGED);\n  }\n\n  requestHeadersText(): string|undefined {\n    return this.#requestHeadersText;\n  }\n\n  setRequestHeadersText(text: string): void {\n    this.#requestHeadersText = text;\n\n    this.dispatchEventToListeners(Events.REQUEST_HEADERS_CHANGED);\n  }\n\n  requestHeaderValue(headerName: string): string|undefined {\n    if (this.#requestHeaderValues[headerName]) {\n      return this.#requestHeaderValues[headerName];\n    }\n    this.#requestHeaderValues[headerName] = this.computeHeaderValue(\n        this.requestHeaders(),\n        headerName,\n    );\n    return this.#requestHeaderValues[headerName];\n  }\n\n  requestFormData(): Promise<string|null> {\n    if (!this.#requestFormDataPromise) {\n      this.#requestFormDataPromise = NetworkManager.requestPostData(this);\n    }\n    return this.#requestFormDataPromise;\n  }\n\n  setRequestFormData(hasData: boolean, data: string|null): void {\n    this.#requestFormDataPromise = hasData && data === null ? null : Promise.resolve(data);\n    this.#formParametersPromise = null;\n  }\n\n  private filteredProtocolName(): string {\n    const protocol = this.protocol.toLowerCase();\n    if (protocol === 'h2') {\n      return 'http/2.0';\n    }\n    return protocol.replace(/^http\\/2(\\.0)?\\+/, 'http/2.0+');\n  }\n\n  requestHttpVersion(): string {\n    const headersText = this.requestHeadersText();\n    if (!headersText) {\n      const version = this.requestHeaderValue('version') || this.requestHeaderValue(':version');\n      if (version) {\n        return version;\n      }\n      return this.filteredProtocolName();\n    }\n    const firstLine = headersText.split(/\\r\\n/)[0];\n    const match = firstLine.match(/(HTTP\\/\\d+\\.\\d+)$/);\n    return match ? match[1] : 'HTTP/0.9';\n  }\n\n  get responseHeaders(): NameValue[] {\n    return this.#responseHeaders || [];\n  }\n\n  set responseHeaders(x: NameValue[]) {\n    this.#responseHeaders = x;\n    this.#sortedResponseHeaders = undefined;\n    this.#serverTimings = undefined;\n    this.#responseCookies = undefined;\n    this.#responseHeaderValues = {};\n\n    this.dispatchEventToListeners(Events.RESPONSE_HEADERS_CHANGED);\n  }\n\n  get earlyHintsHeaders(): NameValue[] {\n    return this.#earlyHintsHeaders || [];\n  }\n\n  set earlyHintsHeaders(x: NameValue[]) {\n    this.#earlyHintsHeaders = x;\n  }\n\n  get originalResponseHeaders(): Protocol.Fetch.HeaderEntry[] {\n    return this.#originalResponseHeaders;\n  }\n\n  set originalResponseHeaders(headers: Protocol.Fetch.HeaderEntry[]) {\n    this.#originalResponseHeaders = headers;\n    this.#sortedOriginalResponseHeaders = undefined;\n  }\n\n  get setCookieHeaders(): Protocol.Fetch.HeaderEntry[] {\n    return this.#setCookieHeaders;\n  }\n\n  set setCookieHeaders(headers: Protocol.Fetch.HeaderEntry[]) {\n    this.#setCookieHeaders = headers;\n  }\n\n  get responseHeadersText(): string {\n    return this.#responseHeadersText;\n  }\n\n  set responseHeadersText(x: string) {\n    this.#responseHeadersText = x;\n\n    this.dispatchEventToListeners(Events.RESPONSE_HEADERS_CHANGED);\n  }\n\n  get sortedResponseHeaders(): NameValue[] {\n    if (this.#sortedResponseHeaders !== undefined) {\n      return this.#sortedResponseHeaders;\n    }\n\n    this.#sortedResponseHeaders = this.responseHeaders.slice();\n    return this.#sortedResponseHeaders.sort(function(a, b) {\n      return Platform.StringUtilities.compare(\n          a.name.toLowerCase(),\n          b.name.toLowerCase(),\n      );\n    });\n  }\n\n  get sortedOriginalResponseHeaders(): NameValue[] {\n    if (this.#sortedOriginalResponseHeaders !== undefined) {\n      return this.#sortedOriginalResponseHeaders;\n    }\n\n    this.#sortedOriginalResponseHeaders = this.originalResponseHeaders.slice();\n    return this.#sortedOriginalResponseHeaders.sort(function(a, b) {\n      return Platform.StringUtilities.compare(\n          a.name.toLowerCase(),\n          b.name.toLowerCase(),\n      );\n    });\n  }\n\n  get overrideTypes(): OverrideType[] {\n    const types: OverrideType[] = [];\n\n    if (this.hasOverriddenContent) {\n      types.push('content');\n    }\n\n    if (this.hasOverriddenHeaders()) {\n      types.push('headers');\n    }\n\n    return types;\n  }\n\n  get hasOverriddenContent(): boolean {\n    return this.#hasOverriddenContent;\n  }\n\n  set hasOverriddenContent(value: boolean) {\n    this.#hasOverriddenContent = value;\n  }\n\n  #deduplicateHeaders(sortedHeaders: NameValue[]): NameValue[] {\n    const dedupedHeaders: NameValue[] = [];\n    for (const header of sortedHeaders) {\n      if (dedupedHeaders.length && dedupedHeaders[dedupedHeaders.length - 1].name === header.name) {\n        dedupedHeaders[dedupedHeaders.length - 1].value += `, ${header.value}`;\n      } else {\n        dedupedHeaders.push({name: header.name, value: header.value});\n      }\n    }\n    return dedupedHeaders;\n  }\n\n  hasOverriddenHeaders(): boolean {\n    if (!this.#originalResponseHeaders.length) {\n      return false;\n    }\n    const responseHeaders = this.#deduplicateHeaders(\n        this.sortedResponseHeaders,\n    );\n    const originalResponseHeaders = this.#deduplicateHeaders(\n        this.sortedOriginalResponseHeaders,\n    );\n    if (responseHeaders.length !== originalResponseHeaders.length) {\n      return true;\n    }\n    for (let i = 0; i < responseHeaders.length; i++) {\n      if (responseHeaders[i].name.toLowerCase() !== originalResponseHeaders[i].name.toLowerCase()) {\n        return true;\n      }\n      if (responseHeaders[i].value !== originalResponseHeaders[i].value) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  responseHeaderValue(headerName: string): string|undefined {\n    if (headerName in this.#responseHeaderValues) {\n      return this.#responseHeaderValues[headerName];\n    }\n    this.#responseHeaderValues[headerName] = this.computeHeaderValue(\n        this.responseHeaders,\n        headerName,\n    );\n    return this.#responseHeaderValues[headerName];\n  }\n\n  wasIntercepted(): boolean {\n    return this.#wasIntercepted;\n  }\n\n  setWasIntercepted(wasIntercepted: boolean): void {\n    this.#wasIntercepted = wasIntercepted;\n  }\n\n  setEarlyHintsHeaders(headers: NameValue[]): void {\n    this.earlyHintsHeaders = headers;\n  }\n\n  get responseCookies(): Cookie[] {\n    if (!this.#responseCookies) {\n      this.#responseCookies = CookieParser.parseSetCookie(\n                                  this.responseHeaderValue('Set-Cookie'),\n                                  this.domain,\n                                  ) ||\n          [];\n      if (this.#responseCookiesPartitionKey) {\n        for (const cookie of this.#responseCookies) {\n          if (cookie.partitioned()) {\n            cookie.setPartitionKey(\n                this.#responseCookiesPartitionKey.topLevelSite,\n                this.#responseCookiesPartitionKey.hasCrossSiteAncestor,\n            );\n          }\n        }\n      } else if (this.#responseCookiesPartitionKeyOpaque) {\n        for (const cookie of this.#responseCookies) {\n          // Do not check cookie.partitioned() since most opaque partitions\n          // are fenced/credentialless frames partitioned by default.\n          cookie.setPartitionKeyOpaque();\n        }\n      }\n    }\n    return this.#responseCookies;\n  }\n\n  set responseCookies(responseCookies: Cookie[]) {\n    this.#responseCookies = responseCookies;\n  }\n\n  responseLastModified(): string|undefined {\n    return this.responseHeaderValue('last-modified');\n  }\n\n  allCookiesIncludingBlockedOnes(): Cookie[] {\n    return [\n      ...this.includedRequestCookies().map(\n          includedRequestCookie => includedRequestCookie.cookie,\n          ),\n      ...this.responseCookies,\n      ...this.blockedRequestCookies().map(\n          blockedRequestCookie => blockedRequestCookie.cookie,\n          ),\n      ...this.blockedResponseCookies().map(\n          blockedResponseCookie => blockedResponseCookie.cookie,\n          ),\n    ].filter(v => !!v);\n  }\n\n  get serverTimings(): ServerTiming[]|null {\n    if (typeof this.#serverTimings === 'undefined') {\n      this.#serverTimings = ServerTiming.parseHeaders(\n          this.responseHeaders,\n      );\n    }\n    return this.#serverTimings;\n  }\n\n  queryString(): string|null {\n    if (this.#queryString !== undefined) {\n      return this.#queryString;\n    }\n\n    let queryString: string|null = null;\n    const url = this.url();\n    const questionMarkPosition = url.indexOf('?');\n    if (questionMarkPosition !== -1) {\n      queryString = url.substring(questionMarkPosition + 1);\n      const hashSignPosition = queryString.indexOf('#');\n      if (hashSignPosition !== -1) {\n        queryString = queryString.substring(0, hashSignPosition);\n      }\n    }\n    this.#queryString = queryString;\n    return this.#queryString;\n  }\n\n  get queryParameters(): NameValue[]|null {\n    if (this.#parsedQueryParameters) {\n      return this.#parsedQueryParameters;\n    }\n    const queryString = this.queryString();\n    if (!queryString) {\n      return null;\n    }\n    this.#parsedQueryParameters = this.parseParameters(queryString);\n    return this.#parsedQueryParameters;\n  }\n\n  private async parseFormParameters(): Promise<NameValue[]|null> {\n    const requestContentType = this.requestContentType();\n\n    if (!requestContentType) {\n      return null;\n    }\n\n    // Handling application/#x-www-form-urlencoded request bodies.\n    if (requestContentType.match(/^application\\/x-www-form-urlencoded\\s*(;.*)?$/i)) {\n      const formData = await this.requestFormData();\n      if (!formData) {\n        return null;\n      }\n\n      return this.parseParameters(formData);\n    }\n\n    // Handling multipart/form-data request bodies.\n    const multipartDetails = requestContentType.match(\n        /^multipart\\/form-data\\s*;\\s*boundary\\s*=\\s*(\\S+)\\s*$/,\n    );\n\n    if (!multipartDetails) {\n      return null;\n    }\n\n    const boundary = multipartDetails[1];\n    if (!boundary) {\n      return null;\n    }\n\n    const formData = await this.requestFormData();\n    if (!formData) {\n      return null;\n    }\n\n    return this.parseMultipartFormDataParameters(formData, boundary);\n  }\n\n  formParameters(): Promise<NameValue[]|null> {\n    if (!this.#formParametersPromise) {\n      this.#formParametersPromise = this.parseFormParameters();\n    }\n    return this.#formParametersPromise;\n  }\n\n  responseHttpVersion(): string {\n    const headersText = this.#responseHeadersText;\n    if (!headersText) {\n      const version = this.responseHeaderValue('version') || this.responseHeaderValue(':version');\n      if (version) {\n        return version;\n      }\n      return this.filteredProtocolName();\n    }\n    const firstLine = headersText.split(/\\r\\n/)[0];\n    const match = firstLine.match(/^(HTTP\\/\\d+\\.\\d+)/);\n    return match ? match[1] : 'HTTP/0.9';\n  }\n\n  private parseParameters(queryString: string): NameValue[] {\n    function parseNameValue(pair: string): {name: string, value: string} {\n      const position = pair.indexOf('=');\n      if (position === -1) {\n        return {name: pair, value: ''};\n      }\n      return {\n        name: pair.substring(0, position),\n        value: pair.substring(position + 1),\n      };\n    }\n    return queryString.split('&').map(parseNameValue);\n  }\n\n  /**\n   * Parses multipart/form-data; boundary=boundaryString request bodies -\n   * --boundaryString\n   * Content-Disposition: form-data; #name=\"field-#name\"; filename=\"r.gif\"\n   * Content-Type: application/octet-stream\n   *\n   * optionalValue\n   * --boundaryString\n   * Content-Disposition: form-data; #name=\"field-#name-2\"\n   *\n   * optionalValue2\n   * --boundaryString--\n   */\n  private parseMultipartFormDataParameters(\n      data: string,\n      boundary: string,\n      ): NameValue[] {\n    const sanitizedBoundary = Platform.StringUtilities.escapeForRegExp(boundary);\n    const keyValuePattern = new RegExp(\n        // Header with an optional file #name.\n        '^\\\\r\\\\ncontent-disposition\\\\s*:\\\\s*form-data\\\\s*;\\\\s*name=\"([^\"]*)\"(?:\\\\s*;\\\\s*filename=\"([^\"]*)\")?' +\n            // Optional secondary header with the content type.\n            '(?:\\\\r\\\\ncontent-type\\\\s*:\\\\s*([^\\\\r\\\\n]*))?' +\n            // Padding.\n            '\\\\r\\\\n\\\\r\\\\n' +\n            // Value\n            '(.*)' +\n            // Padding.\n            '\\\\r\\\\n$',\n        'is',\n    );\n    const fields = data.split(\n        new RegExp(`--${sanitizedBoundary}(?:--\\s*$)?`, 'g'),\n    );\n    return fields.reduce(parseMultipartField, []);\n\n    function parseMultipartField(\n        result: NameValue[],\n        field: string,\n        ): NameValue[] {\n      const [match, name, filename, contentType, value] = field.match(keyValuePattern) || [];\n\n      if (!match) {\n        return result;\n      }\n\n      const processedValue = filename || contentType ? i18nString(UIStrings.binary) : value;\n      result.push({name, value: processedValue});\n\n      return result;\n    }\n  }\n\n  private computeHeaderValue(\n      headers: NameValue[],\n      headerName: string,\n      ): string|undefined {\n    headerName = headerName.toLowerCase();\n\n    const values = [];\n    for (let i = 0; i < headers.length; ++i) {\n      if (headers[i].name.toLowerCase() === headerName) {\n        values.push(headers[i].value);\n      }\n    }\n    if (!values.length) {\n      return undefined;\n    }\n    // Set-Cookie #values should be separated by '\\n', not comma, otherwise cookies could not be parsed.\n    if (headerName === 'set-cookie') {\n      return values.join('\\n');\n    }\n    return values.join(', ');\n  }\n\n  requestContentData(): Promise<TextUtils.ContentData.ContentDataOrError> {\n    if (this.#contentData) {\n      return this.#contentData;\n    }\n    if (this.#contentDataProvider) {\n      this.#contentData = this.#contentDataProvider();\n    } else {\n      this.#contentData = NetworkManager.requestContentData(this);\n    }\n    return this.#contentData;\n  }\n\n  setContentDataProvider(\n      dataProvider: () => Promise<TextUtils.ContentData.ContentDataOrError>,\n      ): void {\n    console.assert(\n        !this.#contentData,\n        'contentData can only be set once.',\n    );\n    this.#contentDataProvider = dataProvider;\n  }\n\n  requestStreamingContent(): Promise<TextUtils.StreamingContentData.StreamingContentDataOrError> {\n    if (this.#streamingContentData) {\n      return this.#streamingContentData;\n    }\n\n    const contentPromise = this.finished ? this.requestContentData() : NetworkManager.streamResponseBody(this);\n    this.#streamingContentData = contentPromise.then(contentData => {\n      if (TextUtils.ContentData.ContentData.isError(contentData)) {\n        return contentData;\n      }\n      // Note that this is save: \"streamResponseBody()\" always creates base64-based ContentData and\n      // for \"contentData()\" we'll never call \"addChunk\".\n      return TextUtils.StreamingContentData.StreamingContentData.from(\n          contentData,\n      );\n    });\n\n    return this.#streamingContentData;\n  }\n\n  contentURL(): Platform.DevToolsPath.UrlString {\n    return this.#url;\n  }\n\n  contentType(): Common.ResourceType.ResourceType {\n    return this.#resourceType;\n  }\n\n  async searchInContent(\n      query: string,\n      caseSensitive: boolean,\n      isRegex: boolean,\n      ): Promise<TextUtils.ContentProvider.SearchMatch[]> {\n    if (!this.#contentDataProvider) {\n      return await NetworkManager.searchInRequest(\n          this,\n          query,\n          caseSensitive,\n          isRegex,\n      );\n    }\n\n    const contentData = await this.requestContentData();\n    if (TextUtils.ContentData.ContentData.isError(contentData) || !contentData.isTextContent) {\n      return [];\n    }\n    return TextUtils.TextUtils.performSearchInContentData(\n        contentData,\n        query,\n        caseSensitive,\n        isRegex,\n    );\n  }\n\n  requestContentType(): string|undefined {\n    return this.requestHeaderValue('Content-Type');\n  }\n\n  hasErrorStatusCode(): boolean {\n    return this.statusCode >= 400;\n  }\n\n  setInitialPriority(priority: Protocol.Network.ResourcePriority): void {\n    this.#initialPriority = priority;\n  }\n\n  initialPriority(): Protocol.Network.ResourcePriority|null {\n    return this.#initialPriority;\n  }\n\n  setPriority(priority: Protocol.Network.ResourcePriority): void {\n    this.#currentPriority = priority;\n  }\n\n  priority(): Protocol.Network.ResourcePriority|null {\n    return this.#currentPriority || this.#initialPriority || null;\n  }\n\n  setSignedExchangeInfo(info: Protocol.Network.SignedExchangeInfo): void {\n    this.#signedExchangeInfo = info;\n  }\n\n  signedExchangeInfo(): Protocol.Network.SignedExchangeInfo|null {\n    return this.#signedExchangeInfo;\n  }\n\n  async populateImageSource(image: HTMLImageElement): Promise<void> {\n    const contentData = await this.requestContentData();\n    if (TextUtils.ContentData.ContentData.isError(contentData)) {\n      return;\n    }\n    let imageSrc = contentData.asDataUrl();\n    if (imageSrc === null && !this.#failed) {\n      const cacheControl = this.responseHeaderValue('cache-control') || '';\n      if (!cacheControl.includes('no-cache')) {\n        imageSrc = this.#url;\n      }\n    }\n    if (imageSrc !== null) {\n      image.src = imageSrc;\n    }\n  }\n\n  initiator(): Protocol.Network.Initiator|null {\n    return this.#initiator || null;\n  }\n\n  hasUserGesture(): boolean|null {\n    return this.#hasUserGesture ?? null;\n  }\n\n  frames(): WebSocketFrame[] {\n    return this.#frames;\n  }\n\n  addProtocolFrameError(errorMessage: string, time: number): void {\n    this.addFrame({\n      type: WebSocketFrameType.Error,\n      text: errorMessage,\n      time: this.pseudoWallTime(time),\n      opCode: -1,\n      mask: false,\n    });\n  }\n\n  addProtocolFrame(\n      response: Protocol.Network.WebSocketFrame,\n      time: number,\n      sent: boolean,\n      ): void {\n    const type = sent ? WebSocketFrameType.Send : WebSocketFrameType.Receive;\n    this.addFrame({\n      type,\n      text: response.payloadData,\n      time: this.pseudoWallTime(time),\n      opCode: response.opcode,\n      mask: response.mask,\n    });\n  }\n\n  addFrame(frame: WebSocketFrame): void {\n    this.#frames.push(frame);\n    this.dispatchEventToListeners(Events.WEBSOCKET_FRAME_ADDED, frame);\n  }\n\n  directSocketChunks(): DirectSocketChunk[] {\n    return this.#directSocketChunks;\n  }\n\n  addDirectSocketChunk(chunk: DirectSocketChunk): void {\n    this.#directSocketChunks.push(chunk);\n    this.dispatchEventToListeners(Events.DIRECTSOCKET_CHUNK_ADDED, chunk);\n  }\n\n  eventSourceMessages(): readonly EventSourceMessage[] {\n    return this.#serverSentEvents?.eventSourceMessages ?? [];\n  }\n\n  addEventSourceMessage(\n      time: number,\n      eventName: string,\n      eventId: string,\n      data: string,\n      ): void {\n    this.#serverSentEvents?.onProtocolEventSourceMessageReceived(\n        eventName,\n        data,\n        eventId,\n        this.pseudoWallTime(time),\n    );\n  }\n\n  markAsRedirect(redirectCount: number): void {\n    this.#isRedirect = true;\n    this.#requestId = `${this.#backendRequestId}:redirected.${redirectCount}`;\n  }\n\n  isRedirect(): boolean {\n    return this.#isRedirect;\n  }\n\n  setRequestIdForTest(requestId: Protocol.Network.RequestId): void {\n    this.#backendRequestId = requestId;\n    this.#requestId = requestId;\n  }\n\n  charset(): string|null {\n    return this.#charset ?? null;\n  }\n\n  setCharset(charset: string): void {\n    this.#charset = charset;\n  }\n\n  addExtraRequestInfo(extraRequestInfo: ExtraRequestInfo): void {\n    this.#blockedRequestCookies = extraRequestInfo.blockedRequestCookies;\n    this.setIncludedRequestCookies(extraRequestInfo.includedRequestCookies);\n    this.setRequestHeaders(extraRequestInfo.requestHeaders);\n    this.#hasExtraRequestInfo = true;\n    this.setRequestHeadersText('');  // Mark request headers as non-provisional\n    this.#clientSecurityState = extraRequestInfo.clientSecurityState;\n    this.#appliedNetworkConditionsId = extraRequestInfo.appliedNetworkConditionsId;\n    if (extraRequestInfo.connectTiming) {\n      this.setConnectTimingFromExtraInfo(extraRequestInfo.connectTiming);\n    }\n    this.#siteHasCookieInOtherPartition = extraRequestInfo.siteHasCookieInOtherPartition ?? false;\n\n    this.#hasThirdPartyCookiePhaseoutIssue = this.#blockedRequestCookies.some(\n        item => item.blockedReasons.includes(\n            Protocol.Network.CookieBlockedReason.ThirdPartyPhaseout,\n            ),\n    );\n  }\n\n  setAppliedNetworkConditions(appliedNetworkConditionsId: string): void {\n    this.#appliedNetworkConditionsId = appliedNetworkConditionsId;\n  }\n\n  hasExtraRequestInfo(): boolean {\n    return this.#hasExtraRequestInfo;\n  }\n\n  blockedRequestCookies(): BlockedCookieWithReason[] {\n    return this.#blockedRequestCookies;\n  }\n\n  setIncludedRequestCookies(includedRequestCookies: IncludedCookieWithReason[]): void {\n    this.#includedRequestCookies = includedRequestCookies;\n  }\n\n  includedRequestCookies(): IncludedCookieWithReason[] {\n    return this.#includedRequestCookies;\n  }\n\n  hasRequestCookies(): boolean {\n    return (this.#includedRequestCookies.length > 0 || this.#blockedRequestCookies.length > 0);\n  }\n\n  siteHasCookieInOtherPartition(): boolean {\n    return this.#siteHasCookieInOtherPartition;\n  }\n\n  // Parse the status text from the first line of the response headers text.\n  // See net::HttpResponseHeaders::GetStatusText.\n  static parseStatusTextFromResponseHeadersText(\n      responseHeadersText: string,\n      ): string {\n    const firstLineParts = responseHeadersText.split('\\r')[0].split(' ');\n    return firstLineParts.slice(2).join(' ');\n  }\n\n  addExtraResponseInfo(extraResponseInfo: ExtraResponseInfo): void {\n    this.#blockedResponseCookies = extraResponseInfo.blockedResponseCookies;\n    if (extraResponseInfo.exemptedResponseCookies) {\n      this.#exemptedResponseCookies = extraResponseInfo.exemptedResponseCookies;\n    }\n    this.#responseCookiesPartitionKey =\n        extraResponseInfo.cookiePartitionKey ? extraResponseInfo.cookiePartitionKey : null;\n    this.#responseCookiesPartitionKeyOpaque = extraResponseInfo.cookiePartitionKeyOpaque || null;\n    this.responseHeaders = extraResponseInfo.responseHeaders;\n    // We store a copy of the headers we initially received, so that after\n    // potential header overrides, we can compare actual with original headers.\n    this.originalResponseHeaders = extraResponseInfo.responseHeaders.map(\n        headerEntry => ({...headerEntry}),\n    );\n\n    if (extraResponseInfo.responseHeadersText) {\n      this.responseHeadersText = extraResponseInfo.responseHeadersText;\n\n      if (!this.requestHeadersText()) {\n        // Generate request headers text from raw headers in extra request info because\n        // Network.requestWillBeSentExtraInfo doesn't include headers text.\n        let requestHeadersText = `${this.requestMethod} ${this.parsedURL.path}`;\n        if (this.parsedURL.queryParams) {\n          requestHeadersText += `?${this.parsedURL.queryParams}`;\n        }\n        requestHeadersText += ' HTTP/1.1\\r\\n';\n\n        for (const {name, value} of this.requestHeaders()) {\n          requestHeadersText += `${name}: ${value}\\r\\n`;\n        }\n        this.setRequestHeadersText(requestHeadersText);\n      }\n\n      this.statusText = NetworkRequest.parseStatusTextFromResponseHeadersText(\n          extraResponseInfo.responseHeadersText,\n      );\n    }\n    this.#remoteAddressSpace = extraResponseInfo.resourceIPAddressSpace;\n\n    if (extraResponseInfo.statusCode) {\n      this.statusCode = extraResponseInfo.statusCode;\n    }\n\n    this.#hasExtraResponseInfo = true;\n\n    // TODO(crbug.com/1252463) Explore replacing this with a DevTools Issue.\n    const networkManager = NetworkManager.forRequest(this);\n    if (!networkManager) {\n      return;\n    }\n    for (const blockedCookie of this.#blockedResponseCookies) {\n      if (blockedCookie.blockedReasons.includes(\n              Protocol.Network.SetCookieBlockedReason.NameValuePairExceedsMaxSize,\n              )) {\n        const message = i18nString(UIStrings.setcookieHeaderIsIgnoredIn, {\n          PH1: this.url(),\n        });\n        networkManager.dispatchEventToListeners(\n            NetworkManagerEvents.MessageGenerated,\n            {message, requestId: this.#requestId, warning: true},\n        );\n      }\n    }\n\n    const cookieModel = networkManager.target().model(CookieModel);\n    if (!cookieModel) {\n      return;\n    }\n    for (const exemptedCookie of this.#exemptedResponseCookies) {\n      cookieModel.removeBlockedCookie(exemptedCookie.cookie);\n    }\n    for (const blockedCookie of this.#blockedResponseCookies) {\n      const cookie = blockedCookie.cookie;\n      if (!cookie) {\n        continue;\n      }\n      if (blockedCookie.blockedReasons.includes(\n              Protocol.Network.SetCookieBlockedReason.ThirdPartyPhaseout,\n              )) {\n        this.#hasThirdPartyCookiePhaseoutIssue = true;\n      }\n      cookieModel.addBlockedCookie(\n          cookie,\n          blockedCookie.blockedReasons.map(blockedReason => ({\n                                             attribute: setCookieBlockedReasonToAttribute(blockedReason),\n                                             uiString: setCookieBlockedReasonToUiString(blockedReason),\n                                           })),\n      );\n    }\n  }\n\n  hasExtraResponseInfo(): boolean {\n    return this.#hasExtraResponseInfo;\n  }\n\n  blockedResponseCookies(): BlockedSetCookieWithReason[] {\n    return this.#blockedResponseCookies;\n  }\n\n  exemptedResponseCookies(): ExemptedSetCookieWithReason[] {\n    return this.#exemptedResponseCookies;\n  }\n\n  nonBlockedResponseCookies(): Cookie[] {\n    const blockedCookieLines: Array<string|null> = this.blockedResponseCookies().map(\n        blockedCookie => blockedCookie.cookieLine,\n    );\n    // Use array and remove 1 by 1 to handle the (potential) case of multiple\n    // identical cookies, only some of which are blocked.\n    const responseCookies = this.responseCookies.filter(cookie => {\n      const index = blockedCookieLines.indexOf(cookie.getCookieLine());\n      if (index !== -1) {\n        blockedCookieLines[index] = null;\n        return false;\n      }\n      return true;\n    });\n    return responseCookies;\n  }\n\n  responseCookiesPartitionKey(): Protocol.Network.CookiePartitionKey|null {\n    return this.#responseCookiesPartitionKey;\n  }\n\n  responseCookiesPartitionKeyOpaque(): boolean|null {\n    return this.#responseCookiesPartitionKeyOpaque;\n  }\n\n  redirectSourceSignedExchangeInfoHasNoErrors(): boolean {\n    return (\n        this.#redirectSource !== null && this.#redirectSource.#signedExchangeInfo !== null &&\n        !this.#redirectSource.#signedExchangeInfo.errors);\n  }\n\n  clientSecurityState(): Protocol.Network.ClientSecurityState|undefined {\n    return this.#clientSecurityState;\n  }\n\n  setTrustTokenParams(\n      trustTokenParams: Protocol.Network.TrustTokenParams,\n      ): void {\n    this.#trustTokenParams = trustTokenParams;\n  }\n\n  trustTokenParams(): Protocol.Network.TrustTokenParams|undefined {\n    return this.#trustTokenParams;\n  }\n\n  setTrustTokenOperationDoneEvent(\n      doneEvent: Protocol.Network.TrustTokenOperationDoneEvent,\n      ): void {\n    this.#trustTokenOperationDoneEvent = doneEvent;\n\n    this.dispatchEventToListeners(Events.TRUST_TOKEN_RESULT_ADDED);\n  }\n\n  trustTokenOperationDoneEvent():|Protocol.Network.TrustTokenOperationDoneEvent|undefined {\n    return this.#trustTokenOperationDoneEvent;\n  }\n\n  setIsSameSite(isSameSite: boolean): void {\n    this.#isSameSite = isSameSite;\n  }\n\n  isSameSite(): boolean|null {\n    return this.#isSameSite;\n  }\n\n  setIsAdRelated(isAdRelated: boolean): void {\n    this.#isAdRelated = isAdRelated;\n  }\n\n  isAdRelated(): boolean {\n    return this.#isAdRelated;\n  }\n\n  getAssociatedData(key: string): object|null {\n    return this.#associatedData.get(key) || null;\n  }\n\n  setAssociatedData(key: string, data: object): void {\n    this.#associatedData.set(key, data);\n  }\n\n  deleteAssociatedData(key: string): void {\n    this.#associatedData.delete(key);\n  }\n\n  hasThirdPartyCookiePhaseoutIssue(): boolean {\n    return this.#hasThirdPartyCookiePhaseoutIssue;\n  }\n\n  addDataReceivedEvent({\n    timestamp,\n    dataLength,\n    encodedDataLength,\n    data,\n  }: Protocol.Network.DataReceivedEvent): void {\n    this.resourceSize += dataLength;\n    if (encodedDataLength !== -1) {\n      this.increaseTransferSize(encodedDataLength);\n    }\n    this.endTime = timestamp;\n    if (data) {\n      void this.#streamingContentData?.then(contentData => {\n        if (!TextUtils.StreamingContentData.isError(contentData)) {\n          contentData.addChunk(data);\n        }\n      });\n    }\n  }\n\n  waitForResponseReceived(): Promise<void> {\n    if (this.responseReceivedPromise) {\n      return this.responseReceivedPromise;\n    }\n    const {promise, resolve} = Promise.withResolvers<void>();\n    this.responseReceivedPromise = promise;\n    this.responseReceivedPromiseResolve = resolve;\n    return this.responseReceivedPromise;\n  }\n}\n\nexport enum Events {\n  FINISHED_LOADING = 'FinishedLoading',\n  TIMING_CHANGED = 'TimingChanged',\n  REMOTE_ADDRESS_CHANGED = 'RemoteAddressChanged',\n  REQUEST_HEADERS_CHANGED = 'RequestHeadersChanged',\n  RESPONSE_HEADERS_CHANGED = 'ResponseHeadersChanged',\n  WEBSOCKET_FRAME_ADDED = 'WebsocketFrameAdded',\n  DIRECTSOCKET_CHUNK_ADDED = 'DirectsocketChunkAdded',\n  EVENT_SOURCE_MESSAGE_ADDED = 'EventSourceMessageAdded',\n  TRUST_TOKEN_RESULT_ADDED = 'TrustTokenResultAdded',\n}\n\nexport interface EventTypes {\n  [Events.FINISHED_LOADING]: NetworkRequest;\n  [Events.TIMING_CHANGED]: NetworkRequest;\n  [Events.REMOTE_ADDRESS_CHANGED]: NetworkRequest;\n  [Events.REQUEST_HEADERS_CHANGED]: void;\n  [Events.RESPONSE_HEADERS_CHANGED]: void;\n  [Events.WEBSOCKET_FRAME_ADDED]: WebSocketFrame;\n  [Events.DIRECTSOCKET_CHUNK_ADDED]: DirectSocketChunk;\n  [Events.DIRECTSOCKET_CHUNK_ADDED]: DirectSocketChunk;\n  [Events.EVENT_SOURCE_MESSAGE_ADDED]: EventSourceMessage;\n  [Events.TRUST_TOKEN_RESULT_ADDED]: void;\n}\n\nexport const enum InitiatorType {\n  OTHER = 'other',\n  PARSER = 'parser',\n  REDIRECT = 'redirect',\n  SCRIPT = 'script',\n  PRELOAD = 'preload',\n  SIGNED_EXCHANGE = 'signedExchange',\n  PREFLIGHT = 'preflight',\n}\n\nexport enum WebSocketFrameType {\n  /* eslint-disable @typescript-eslint/naming-convention -- Used by web_tests. */\n  Send = 'send',\n  Receive = 'receive',\n  Error = 'error',\n  /* eslint-enable @typescript-eslint/naming-convention */\n}\n\nexport const cookieExemptionReasonToUiString = function(\n    exemptionReason: Protocol.Network.CookieExemptionReason,\n    ): string {\n  switch (exemptionReason) {\n    case Protocol.Network.CookieExemptionReason.UserSetting:\n      return i18nString(UIStrings.exemptionReasonUserSetting);\n    case Protocol.Network.CookieExemptionReason.TPCDMetadata:\n      return i18nString(UIStrings.exemptionReasonTPCDMetadata);\n    case Protocol.Network.CookieExemptionReason.TopLevelTPCDDeprecationTrial:\n      return i18nString(UIStrings.exemptionReasonTopLevelTPCDDeprecationTrial);\n    case Protocol.Network.CookieExemptionReason.TPCDDeprecationTrial:\n      return i18nString(UIStrings.exemptionReasonTPCDDeprecationTrial);\n    case Protocol.Network.CookieExemptionReason.TPCDHeuristics:\n      return i18nString(UIStrings.exemptionReasonTPCDHeuristics);\n    case Protocol.Network.CookieExemptionReason.EnterprisePolicy:\n      return i18nString(UIStrings.exemptionReasonEnterprisePolicy);\n    case Protocol.Network.CookieExemptionReason.StorageAccess:\n      return i18nString(UIStrings.exemptionReasonStorageAccessAPI);\n    case Protocol.Network.CookieExemptionReason.TopLevelStorageAccess:\n      return i18nString(UIStrings.exemptionReasonTopLevelStorageAccessAPI);\n    case Protocol.Network.CookieExemptionReason.Scheme:\n      return i18nString(UIStrings.exemptionReasonScheme);\n  }\n  return '';\n};\n\nexport const cookieBlockedReasonToUiString = function(\n    blockedReason: Protocol.Network.CookieBlockedReason,\n    ): string {\n  switch (blockedReason) {\n    case Protocol.Network.CookieBlockedReason.SecureOnly:\n      return i18nString(UIStrings.secureOnly);\n    case Protocol.Network.CookieBlockedReason.NotOnPath:\n      return i18nString(UIStrings.notOnPath);\n    case Protocol.Network.CookieBlockedReason.DomainMismatch:\n      return i18nString(UIStrings.domainMismatch);\n    case Protocol.Network.CookieBlockedReason.SameSiteStrict:\n      return i18nString(UIStrings.sameSiteStrict);\n    case Protocol.Network.CookieBlockedReason.SameSiteLax:\n      return i18nString(UIStrings.sameSiteLax);\n    case Protocol.Network.CookieBlockedReason.SameSiteUnspecifiedTreatedAsLax:\n      return i18nString(UIStrings.sameSiteUnspecifiedTreatedAsLax);\n    case Protocol.Network.CookieBlockedReason.SameSiteNoneInsecure:\n      return i18nString(UIStrings.sameSiteNoneInsecure);\n    case Protocol.Network.CookieBlockedReason.UserPreferences:\n      return i18nString(UIStrings.userPreferences);\n    case Protocol.Network.CookieBlockedReason.UnknownError:\n      return i18nString(UIStrings.unknownError);\n    case Protocol.Network.CookieBlockedReason.SchemefulSameSiteStrict:\n      return i18nString(UIStrings.schemefulSameSiteStrict);\n    case Protocol.Network.CookieBlockedReason.SchemefulSameSiteLax:\n      return i18nString(UIStrings.schemefulSameSiteLax);\n    case Protocol.Network.CookieBlockedReason.SchemefulSameSiteUnspecifiedTreatedAsLax:\n      return i18nString(UIStrings.schemefulSameSiteUnspecifiedTreatedAsLax);\n    case Protocol.Network.CookieBlockedReason.SamePartyFromCrossPartyContext:\n      return i18nString(UIStrings.samePartyFromCrossPartyContext);\n    case Protocol.Network.CookieBlockedReason.NameValuePairExceedsMaxSize:\n      return i18nString(UIStrings.nameValuePairExceedsMaxSize);\n    case Protocol.Network.CookieBlockedReason.ThirdPartyPhaseout:\n      return i18nString(UIStrings.thirdPartyPhaseout);\n  }\n  return '';\n};\n\nexport const setCookieBlockedReasonToUiString = function(\n    blockedReason: Protocol.Network.SetCookieBlockedReason,\n    ): string {\n  switch (blockedReason) {\n    case Protocol.Network.SetCookieBlockedReason.SecureOnly:\n      return i18nString(UIStrings.blockedReasonSecureOnly);\n    case Protocol.Network.SetCookieBlockedReason.SameSiteStrict:\n      return i18nString(UIStrings.blockedReasonSameSiteStrictLax, {\n        PH1: 'SameSite=Strict',\n      });\n    case Protocol.Network.SetCookieBlockedReason.SameSiteLax:\n      return i18nString(UIStrings.blockedReasonSameSiteStrictLax, {\n        PH1: 'SameSite=Lax',\n      });\n    case Protocol.Network.SetCookieBlockedReason.SameSiteUnspecifiedTreatedAsLax:\n      return i18nString(UIStrings.blockedReasonSameSiteUnspecifiedTreatedAsLax);\n    case Protocol.Network.SetCookieBlockedReason.SameSiteNoneInsecure:\n      return i18nString(UIStrings.blockedReasonSameSiteNoneInsecure);\n    case Protocol.Network.SetCookieBlockedReason.UserPreferences:\n      return i18nString(UIStrings.thisSetcookieWasBlockedDueToUser);\n    case Protocol.Network.SetCookieBlockedReason.SyntaxError:\n      return i18nString(UIStrings.thisSetcookieHadInvalidSyntax);\n    case Protocol.Network.SetCookieBlockedReason.SchemeNotSupported:\n      return i18nString(UIStrings.theSchemeOfThisConnectionIsNot);\n    case Protocol.Network.SetCookieBlockedReason.OverwriteSecure:\n      return i18nString(UIStrings.blockedReasonOverwriteSecure);\n    case Protocol.Network.SetCookieBlockedReason.InvalidDomain:\n      return i18nString(UIStrings.blockedReasonInvalidDomain);\n    case Protocol.Network.SetCookieBlockedReason.InvalidPrefix:\n      return i18nString(UIStrings.blockedReasonInvalidPrefix);\n    case Protocol.Network.SetCookieBlockedReason.UnknownError:\n      return i18nString(UIStrings.anUnknownErrorWasEncounteredWhenTrying);\n    case Protocol.Network.SetCookieBlockedReason.SchemefulSameSiteStrict:\n      return i18nString(\n          UIStrings.thisSetcookieWasBlockedBecauseItHadTheSamesiteStrictLax,\n          {PH1: 'SameSite=Strict'},\n      );\n    case Protocol.Network.SetCookieBlockedReason.SchemefulSameSiteLax:\n      return i18nString(\n          UIStrings.thisSetcookieWasBlockedBecauseItHadTheSamesiteStrictLax,\n          {PH1: 'SameSite=Lax'},\n      );\n    case Protocol.Network.SetCookieBlockedReason.SchemefulSameSiteUnspecifiedTreatedAsLax:\n      return i18nString(UIStrings.thisSetcookieDidntSpecifyASamesite);\n    case Protocol.Network.SetCookieBlockedReason.SamePartyFromCrossPartyContext:\n      return i18nString(\n          UIStrings.thisSetcookieWasBlockedBecauseItHadTheSameparty,\n      );\n    case Protocol.Network.SetCookieBlockedReason.SamePartyConflictsWithOtherAttributes:\n      return i18nString(\n          UIStrings.thisSetcookieWasBlockedBecauseItHadTheSamepartyAttribute,\n      );\n    case Protocol.Network.SetCookieBlockedReason.NameValuePairExceedsMaxSize:\n      return i18nString(\n          UIStrings.thisSetcookieWasBlockedBecauseTheNameValuePairExceedsMaxSize,\n      );\n    case Protocol.Network.SetCookieBlockedReason.DisallowedCharacter:\n      return i18nString(UIStrings.thisSetcookieHadADisallowedCharacter);\n    case Protocol.Network.SetCookieBlockedReason.ThirdPartyPhaseout:\n      return i18nString(UIStrings.thisSetcookieWasBlockedDueThirdPartyPhaseout);\n  }\n  return '';\n};\n\nexport const cookieBlockedReasonToAttribute = function(\n    blockedReason: Protocol.Network.CookieBlockedReason,\n    ): Attribute|null {\n  switch (blockedReason) {\n    case Protocol.Network.CookieBlockedReason.SecureOnly:\n      return Attribute.SECURE;\n    case Protocol.Network.CookieBlockedReason.NotOnPath:\n      return Attribute.PATH;\n    case Protocol.Network.CookieBlockedReason.DomainMismatch:\n      return Attribute.DOMAIN;\n    case Protocol.Network.CookieBlockedReason.SameSiteStrict:\n    case Protocol.Network.CookieBlockedReason.SameSiteLax:\n    case Protocol.Network.CookieBlockedReason.SameSiteUnspecifiedTreatedAsLax:\n    case Protocol.Network.CookieBlockedReason.SameSiteNoneInsecure:\n    case Protocol.Network.CookieBlockedReason.SchemefulSameSiteStrict:\n    case Protocol.Network.CookieBlockedReason.SchemefulSameSiteLax:\n    case Protocol.Network.CookieBlockedReason.SchemefulSameSiteUnspecifiedTreatedAsLax:\n      return Attribute.SAME_SITE;\n    case Protocol.Network.CookieBlockedReason.SamePartyFromCrossPartyContext:\n    case Protocol.Network.CookieBlockedReason.NameValuePairExceedsMaxSize:\n    case Protocol.Network.CookieBlockedReason.UserPreferences:\n    case Protocol.Network.CookieBlockedReason.ThirdPartyPhaseout:\n    case Protocol.Network.CookieBlockedReason.UnknownError:\n      return null;\n  }\n  return null;\n};\n\nexport const setCookieBlockedReasonToAttribute = function(\n    blockedReason: Protocol.Network.SetCookieBlockedReason,\n    ): Attribute|null {\n  switch (blockedReason) {\n    case Protocol.Network.SetCookieBlockedReason.SecureOnly:\n    case Protocol.Network.SetCookieBlockedReason.OverwriteSecure:\n      return Attribute.SECURE;\n    case Protocol.Network.SetCookieBlockedReason.SameSiteStrict:\n    case Protocol.Network.SetCookieBlockedReason.SameSiteLax:\n    case Protocol.Network.SetCookieBlockedReason.SameSiteUnspecifiedTreatedAsLax:\n    case Protocol.Network.SetCookieBlockedReason.SameSiteNoneInsecure:\n    case Protocol.Network.SetCookieBlockedReason.SchemefulSameSiteStrict:\n    case Protocol.Network.SetCookieBlockedReason.SchemefulSameSiteLax:\n    case Protocol.Network.SetCookieBlockedReason.SchemefulSameSiteUnspecifiedTreatedAsLax:\n      return Attribute.SAME_SITE;\n    case Protocol.Network.SetCookieBlockedReason.InvalidDomain:\n      return Attribute.DOMAIN;\n    case Protocol.Network.SetCookieBlockedReason.InvalidPrefix:\n      return Attribute.NAME;\n    case Protocol.Network.SetCookieBlockedReason.SamePartyConflictsWithOtherAttributes:\n    case Protocol.Network.SetCookieBlockedReason.SamePartyFromCrossPartyContext:\n    case Protocol.Network.SetCookieBlockedReason.NameValuePairExceedsMaxSize:\n    case Protocol.Network.SetCookieBlockedReason.UserPreferences:\n    case Protocol.Network.SetCookieBlockedReason.ThirdPartyPhaseout:\n    case Protocol.Network.SetCookieBlockedReason.SyntaxError:\n    case Protocol.Network.SetCookieBlockedReason.SchemeNotSupported:\n    case Protocol.Network.SetCookieBlockedReason.UnknownError:\n    case Protocol.Network.SetCookieBlockedReason.DisallowedCharacter:\n      return null;\n  }\n  return null;\n};\n\nexport interface NameValue {\n  name: string;\n  value: string;\n}\n\nexport interface WebSocketFrame {\n  type: WebSocketFrameType;\n  time: number;\n  text: string;\n  opCode: number;\n  mask: boolean;\n}\n\nexport interface BlockedSetCookieWithReason {\n  blockedReasons: Protocol.Network.SetCookieBlockedReason[];\n  cookieLine: string;\n  cookie: Cookie|null;\n}\n\nexport interface BlockedCookieWithReason {\n  cookie: Cookie;\n  blockedReasons: Protocol.Network.CookieBlockedReason[];\n}\n\nexport interface IncludedCookieWithReason {\n  cookie: Cookie;\n  exemptionReason: Protocol.Network.CookieExemptionReason|undefined;\n}\n\nexport interface ExemptedSetCookieWithReason {\n  cookie: Cookie;\n  cookieLine: string;\n  exemptionReason: Protocol.Network.CookieExemptionReason;\n}\n\nexport interface EventSourceMessage {\n  time: number;\n  eventName: string;\n  eventId: string;\n  data: string;\n}\n\nexport interface ExtraRequestInfo {\n  blockedRequestCookies: Array<{blockedReasons: Protocol.Network.CookieBlockedReason[], cookie: Cookie}>;\n  requestHeaders: NameValue[];\n  includedRequestCookies: IncludedCookieWithReason[];\n  clientSecurityState?: Protocol.Network.ClientSecurityState;\n  connectTiming: Protocol.Network.ConnectTiming;\n  siteHasCookieInOtherPartition?: boolean;\n  appliedNetworkConditionsId?: string;\n}\n\nexport interface ExtraResponseInfo {\n  blockedResponseCookies:\n      Array<{blockedReasons: Protocol.Network.SetCookieBlockedReason[], cookieLine: string, cookie: Cookie|null}>;\n  responseHeaders: NameValue[];\n  responseHeadersText?: string;\n  resourceIPAddressSpace: Protocol.Network.IPAddressSpace;\n  statusCode: number|undefined;\n  cookiePartitionKey?: Protocol.Network.CookiePartitionKey;\n  cookiePartitionKeyOpaque: boolean|undefined;\n  exemptedResponseCookies:|\n      Array<{cookie: Cookie, cookieLine: string, exemptionReason: Protocol.Network.CookieExemptionReason}>|undefined;\n}\n\nexport interface EarlyHintsInfo {\n  responseHeaders: NameValue[];\n}\n\nexport type OverrideType = 'content'|'headers';\n\nexport enum DirectSocketType {\n  TCP = 1,\n  UDP_BOUND = 2,\n  UDP_CONNECTED = 3,\n}\n\nexport enum DirectSocketStatus {\n  OPENING = 1,\n  OPEN = 2,\n  CLOSED = 3,\n  ABORTED = 4,\n}\n\nexport interface DirectSocketCreateOptions {\n  remoteAddr?: string;\n  remotePort?: number;\n  localAddr?: string;\n  localPort?: number;\n  noDelay?: boolean;\n  keepAliveDelay?: number;\n  sendBufferSize?: number;\n  receiveBufferSize?: number;\n  dnsQueryType?: Protocol.Network.DirectSocketDnsQueryType;\n  multicastLoopback?: boolean;\n  multicastTimeToLive?: number;\n  multicastAllowAddressSharing?: boolean;\n}\n\nexport interface DirectSocketOpenInfo {\n  remoteAddr?: string;\n  remotePort?: number;\n  localAddr?: string;\n  localPort?: number;\n}\n\nexport interface DirectSocketInfo {\n  type: DirectSocketType;\n  status: DirectSocketStatus;\n  errorMessage?: string;\n  createOptions: DirectSocketCreateOptions;\n  openInfo?: DirectSocketOpenInfo;\n  joinedMulticastGroups?: Set<string>;\n}\n\nexport interface DirectSocketChunk {\n  data: string;\n  type: DirectSocketChunkType;\n  timestamp: number;\n  // Only for bound udp socket.\n  remoteAddress?: string;\n  remotePort?: number;\n}\n\nexport enum DirectSocketChunkType {\n  SEND = 'send',\n  RECEIVE = 'receive',\n}\n", "// Copyright 2017 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as Protocol from '../../generated/protocol.js';\nimport * as Common from '../common/common.js';\nimport * as Platform from '../platform/platform.js';\nimport * as Root from '../root/root.js';\n\nimport {type Attribute, Cookie} from './Cookie.js';\nimport {Events as NetworkManagerEvents, NetworkManager} from './NetworkManager.js';\nimport type {Resource} from './Resource.js';\nimport {Events as ResourceTreeModelEvents, ResourceTreeModel} from './ResourceTreeModel.js';\nimport {SDKModel} from './SDKModel.js';\nimport {Capability, type Target} from './Target.js';\n\nexport class CookieModel extends SDKModel<EventTypes> {\n  readonly #blockedCookies = new Map<string, Cookie>();\n  readonly #cookieToBlockedReasons = new Map<Cookie, BlockedReason[]>();\n  readonly #refreshThrottler = new Common.Throttler.Throttler(300);\n  #cookies = new Map<string, Cookie[]>();\n\n  constructor(target: Target) {\n    super(target);\n\n    target.model(ResourceTreeModel)\n        ?.addEventListener(ResourceTreeModelEvents.PrimaryPageChanged, this.#onPrimaryPageChanged, this);\n    target.model(NetworkManager)\n        ?.addEventListener(NetworkManagerEvents.ResponseReceived, this.#onResponseReceived, this);\n    target.model(NetworkManager)?.addEventListener(NetworkManagerEvents.LoadingFinished, this.#onLoadingFinished, this);\n  }\n\n  addBlockedCookie(cookie: Cookie, blockedReasons: BlockedReason[]|null): void {\n    const key = cookie.key();\n    const previousCookie = this.#blockedCookies.get(key);\n    this.#blockedCookies.set(key, cookie);\n    if (blockedReasons) {\n      this.#cookieToBlockedReasons.set(cookie, blockedReasons);\n    } else {\n      this.#cookieToBlockedReasons.delete(cookie);\n    }\n    if (previousCookie) {\n      this.#cookieToBlockedReasons.delete(previousCookie);\n    }\n  }\n\n  removeBlockedCookie(cookie: Cookie): void {\n    this.#blockedCookies.delete(cookie.key());\n  }\n\n  async #onPrimaryPageChanged(): Promise<void> {\n    this.#blockedCookies.clear();\n    this.#cookieToBlockedReasons.clear();\n    await this.#refresh();\n  }\n\n  getCookieToBlockedReasonsMap(): ReadonlyMap<Cookie, BlockedReason[]> {\n    return this.#cookieToBlockedReasons;\n  }\n\n  async #getCookies(urls: Platform.MapUtilities.Multimap<string, string>): Promise<void> {\n    const networkAgent = this.target().networkAgent();\n    const newCookies = new Map<string, Cookie[]>(await Promise.all(urls.keysArray().map(\n        domain => networkAgent.invoke_getCookies({urls: [...urls.get(domain).values()]})\n                      .then(({cookies}) => [domain, cookies.map(Cookie.fromProtocolCookie)] as const))));\n    const updated = this.#isUpdated(newCookies);\n    this.#cookies = newCookies;\n    if (updated) {\n      this.dispatchEventToListeners(Events.COOKIE_LIST_UPDATED);\n    }\n  }\n\n  async deleteCookie(cookie: Cookie): Promise<void> {\n    await this.deleteCookies([cookie]);\n  }\n\n  async clear(domain?: string, securityOrigin?: string): Promise<void> {\n    if (!this.#isRefreshing()) {\n      await this.#refreshThrottled();\n    }\n    const cookies = domain ? (this.#cookies.get(domain) || []) : [...this.#cookies.values()].flat();\n    cookies.push(...this.#blockedCookies.values());\n    if (securityOrigin) {\n      const cookiesToDelete = cookies.filter(cookie => {\n        return cookie.matchesSecurityOrigin(securityOrigin);\n      });\n      await this.deleteCookies(cookiesToDelete);\n    } else {\n      await this.deleteCookies(cookies);\n    }\n  }\n\n  async saveCookie(cookie: Cookie): Promise<boolean> {\n    let domain = cookie.domain();\n    if (!domain.startsWith('.')) {\n      domain = '';\n    }\n    let expires: number|undefined = undefined;\n    if (cookie.expires()) {\n      expires = Math.floor(Date.parse(`${cookie.expires()}`) / 1000);\n    }\n    const enabled = Root.Runtime.experiments.isEnabled('experimental-cookie-features');\n    const preserveUnset = (scheme: Protocol.Network.CookieSourceScheme): Protocol.Network.CookieSourceScheme.Unset|\n                          undefined => scheme === Protocol.Network.CookieSourceScheme.Unset ? scheme : undefined;\n    const protocolCookie = {\n      name: cookie.name(),\n      value: cookie.value(),\n      url: cookie.url() || undefined,\n      domain,\n      path: cookie.path(),\n      secure: cookie.secure(),\n      httpOnly: cookie.httpOnly(),\n      sameSite: cookie.sameSite(),\n      expires,\n      priority: cookie.priority(),\n      partitionKey: cookie.partitionKey(),\n      sourceScheme: enabled ? cookie.sourceScheme() : preserveUnset(cookie.sourceScheme()),\n      sourcePort: enabled ? cookie.sourcePort() : undefined,\n    };\n    const response = await this.target().networkAgent().invoke_setCookie(protocolCookie);\n    const error = response.getError();\n    if (error || !response.success) {\n      return false;\n    }\n    await this.#refreshThrottled();\n    return response.success;\n  }\n\n  /**\n   * Returns cookies needed by current page's frames whose security origins are |domain|.\n   */\n  async getCookiesForDomain(domain: string, forceUpdate?: boolean): Promise<Cookie[]> {\n    if (!this.#isRefreshing() || forceUpdate) {\n      await this.#refreshThrottled();\n    }\n    const normalCookies = this.#cookies.get(domain) || [];\n    return normalCookies.concat(Array.from(this.#blockedCookies.values()));\n  }\n\n  async deleteCookies(cookies: Cookie[]): Promise<void> {\n    const networkAgent = this.target().networkAgent();\n    this.#blockedCookies.clear();\n    this.#cookieToBlockedReasons.clear();\n    await Promise.all(cookies.map(cookie => networkAgent.invoke_deleteCookies({\n      name: cookie.name(),\n      url: undefined,\n      domain: cookie.domain(),\n      path: cookie.path(),\n      partitionKey: cookie.partitionKey(),\n    })));\n    await this.#refreshThrottled();\n  }\n\n  #isRefreshing(): boolean {\n    return Boolean(this.listeners?.size);\n  }\n\n  #isUpdated(newCookies: Map<string, Cookie[]>): boolean {\n    if (newCookies.size !== this.#cookies.size) {\n      return true;\n    }\n    for (const [domain, newDomainCookies] of newCookies) {\n      if (!this.#cookies.has(domain)) {\n        return true;\n      }\n      const oldDomainCookies = this.#cookies.get(domain) || [];\n      if (newDomainCookies.length !== oldDomainCookies.length) {\n        return true;\n      }\n      const comparisonKey = (c: Cookie): string => c.key() + ' ' + c.value();\n      const oldDomainCookieKeys = new Set(oldDomainCookies.map(comparisonKey));\n      for (const newCookie of newDomainCookies) {\n        if (!oldDomainCookieKeys.has(comparisonKey(newCookie))) {\n          return true;\n        }\n      }\n    }\n    return false;\n  }\n\n  #refreshThrottled(): Promise<void> {\n    return this.#refreshThrottler.schedule(() => this.#refresh());\n  }\n\n  #refresh(): Promise<void> {\n    const resourceURLs = new Platform.MapUtilities.Multimap<string, string>();\n    function populateResourceURLs(resource: Resource): boolean {\n      const documentURL = Common.ParsedURL.ParsedURL.fromString(resource.documentURL);\n      if (documentURL) {\n        resourceURLs.set(documentURL.securityOrigin(), resource.url);\n      }\n      return false;\n    }\n    const resourceTreeModel = this.target().model(ResourceTreeModel);\n    if (resourceTreeModel) {\n      // In case the current frame was unreachable, add its cookies\n      // because they might help to debug why the frame was unreachable.\n      const unreachableUrl = resourceTreeModel.mainFrame?.unreachableUrl();\n      if (unreachableUrl) {\n        const documentURL = Common.ParsedURL.ParsedURL.fromString(unreachableUrl);\n        if (documentURL) {\n          resourceURLs.set(documentURL.securityOrigin(), unreachableUrl);\n        }\n      }\n\n      resourceTreeModel.forAllResources(populateResourceURLs);\n    }\n    return this.#getCookies(resourceURLs);\n  }\n\n  #onResponseReceived(): void {\n    if (this.#isRefreshing()) {\n      void this.#refreshThrottled();\n    }\n  }\n\n  #onLoadingFinished(): void {\n    if (this.#isRefreshing()) {\n      void this.#refreshThrottled();\n    }\n  }\n}\n\nSDKModel.register(CookieModel, {capabilities: Capability.NETWORK, autostart: false});\nexport interface BlockedReason {\n  uiString: string;\n  attribute: Attribute|null;\n}\nexport interface ExemptionReason {\n  uiString: string;\n}\n\nexport const enum Events {\n  COOKIE_LIST_UPDATED = 'CookieListUpdated',\n}\n\nexport interface EventTypes {\n  [Events.COOKIE_LIST_UPDATED]: void;\n}\n", "// Copyright 2019 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport type * as Protocol from '../../generated/protocol.js';\nimport type * as Platform from '../platform/platform.js';\n\nconst OPAQUE_PARTITION_KEY = '<opaque>';\n\nexport class Cookie {\n  readonly #name: string;\n  readonly #value: string;\n  readonly #type: Type|null|undefined;\n  #attributes = new Map<Attribute, string|number|boolean|undefined>();\n  #size = 0;\n  #priority: Protocol.Network.CookiePriority;\n  #cookieLine: string|null = null;\n  #partitionKey: Protocol.Network.CookiePartitionKey|undefined;\n\n  constructor(\n      name: string, value: string, type?: Type|null, priority?: Protocol.Network.CookiePriority,\n      partitionKey?: Protocol.Network.CookiePartitionKey) {\n    this.#name = name;\n    this.#value = value;\n    this.#type = type;\n    this.#priority = (priority || 'Medium' as Protocol.Network.CookiePriority);\n    this.#partitionKey = partitionKey;\n  }\n\n  static fromProtocolCookie(protocolCookie: Protocol.Network.Cookie): Cookie {\n    const cookie = new Cookie(protocolCookie.name, protocolCookie.value, null, protocolCookie.priority);\n    cookie.addAttribute(Attribute.DOMAIN, protocolCookie['domain']);\n    cookie.addAttribute(Attribute.PATH, protocolCookie['path']);\n    if (protocolCookie['expires']) {\n      cookie.addAttribute(Attribute.EXPIRES, protocolCookie['expires'] * 1000);\n    }\n    if (protocolCookie['httpOnly']) {\n      cookie.addAttribute(Attribute.HTTP_ONLY);\n    }\n    if (protocolCookie['secure']) {\n      cookie.addAttribute(Attribute.SECURE);\n    }\n    if (protocolCookie['sameSite']) {\n      cookie.addAttribute(Attribute.SAME_SITE, protocolCookie['sameSite']);\n    }\n    if ('sourcePort' in protocolCookie) {\n      cookie.addAttribute(Attribute.SOURCE_PORT, protocolCookie.sourcePort);\n    }\n    if ('sourceScheme' in protocolCookie) {\n      cookie.addAttribute(Attribute.SOURCE_SCHEME, protocolCookie.sourceScheme);\n    }\n    if ('partitionKey' in protocolCookie) {\n      if (protocolCookie.partitionKey) {\n        cookie.setPartitionKey(\n            protocolCookie.partitionKey.topLevelSite, protocolCookie.partitionKey.hasCrossSiteAncestor);\n      }\n    }\n    if ('partitionKeyOpaque' in protocolCookie && protocolCookie.partitionKeyOpaque) {\n      cookie.addAttribute(Attribute.PARTITION_KEY, OPAQUE_PARTITION_KEY);\n    }\n    cookie.setSize(protocolCookie['size']);\n    return cookie;\n  }\n\n  key(): string {\n    return (this.domain() || '-') + ' ' + this.name() + ' ' + (this.path() || '-') + ' ' +\n        (this.partitionKey() ?\n             (this.topLevelSite() + ' ' + (this.hasCrossSiteAncestor() ? 'cross_site' : 'same_site')) :\n             '-');\n  }\n\n  name(): string {\n    return this.#name;\n  }\n\n  value(): string {\n    return this.#value;\n  }\n\n  type(): Type|null|undefined {\n    return this.#type;\n  }\n\n  httpOnly(): boolean {\n    return this.#attributes.has(Attribute.HTTP_ONLY);\n  }\n\n  secure(): boolean {\n    return this.#attributes.has(Attribute.SECURE);\n  }\n\n  partitioned(): boolean {\n    return this.#attributes.has(Attribute.PARTITIONED) || Boolean(this.partitionKey()) || this.partitionKeyOpaque();\n  }\n\n  sameSite(): Protocol.Network.CookieSameSite {\n    // TODO(allada) This should not rely on #attributes and instead store them individually.\n    // when #attributes get added via addAttribute() they are lowercased, hence the lowercasing of samesite here\n    return this.#attributes.get(Attribute.SAME_SITE) as Protocol.Network.CookieSameSite;\n  }\n\n  partitionKey(): Protocol.Network.CookiePartitionKey {\n    return this.#partitionKey as Protocol.Network.CookiePartitionKey;\n  }\n\n  setPartitionKey(topLevelSite: string, hasCrossSiteAncestor: boolean): void {\n    this.#partitionKey = {topLevelSite, hasCrossSiteAncestor};\n    if (!this.#attributes.has(Attribute.PARTITIONED)) {\n      this.addAttribute(Attribute.PARTITIONED);\n    }\n  }\n\n  topLevelSite(): string {\n    if (!this.#partitionKey) {\n      return '';\n    }\n    return this.#partitionKey?.topLevelSite;\n  }\n\n  setTopLevelSite(topLevelSite: string, hasCrossSiteAncestor: boolean): void {\n    this.setPartitionKey(topLevelSite, hasCrossSiteAncestor);\n  }\n\n  hasCrossSiteAncestor(): boolean {\n    if (!this.#partitionKey) {\n      return false;\n    }\n    return this.#partitionKey?.hasCrossSiteAncestor;\n  }\n\n  setHasCrossSiteAncestor(hasCrossSiteAncestor: boolean): void {\n    if (!this.partitionKey() || !Boolean(this.topLevelSite())) {\n      return;\n    }\n    this.setPartitionKey(this.topLevelSite(), hasCrossSiteAncestor);\n  }\n\n  partitionKeyOpaque(): boolean {\n    if (!this.#partitionKey) {\n      return false;\n    }\n    return (this.topLevelSite() === OPAQUE_PARTITION_KEY);\n  }\n\n  setPartitionKeyOpaque(): void {\n    this.addAttribute(Attribute.PARTITION_KEY, OPAQUE_PARTITION_KEY);\n    this.setPartitionKey(OPAQUE_PARTITION_KEY, false);\n  }\n\n  priority(): Protocol.Network.CookiePriority {\n    return this.#priority;\n  }\n\n  session(): boolean {\n    // RFC 2965 suggests using Discard attribute to mark session cookies, but this does not seem to be widely used.\n    // Check for absence of explicitly max-age or expiry date instead.\n    return !(this.#attributes.has(Attribute.EXPIRES) || this.#attributes.has(Attribute.MAX_AGE));\n  }\n\n  path(): string {\n    return this.#attributes.get(Attribute.PATH) as string;\n  }\n\n  domain(): string {\n    return this.#attributes.get(Attribute.DOMAIN) as string;\n  }\n\n  expires(): number {\n    return this.#attributes.get(Attribute.EXPIRES) as number;\n  }\n\n  maxAge(): number {\n    return this.#attributes.get(Attribute.MAX_AGE) as number;\n  }\n\n  sourcePort(): number {\n    return this.#attributes.get(Attribute.SOURCE_PORT) as number;\n  }\n\n  sourceScheme(): Protocol.Network.CookieSourceScheme {\n    return this.#attributes.get(Attribute.SOURCE_SCHEME) as Protocol.Network.CookieSourceScheme;\n  }\n\n  size(): number {\n    return this.#size;\n  }\n\n  /**\n   * @deprecated\n   */\n  url(): Platform.DevToolsPath.UrlString|null {\n    if (!this.domain() || !this.path()) {\n      return null;\n    }\n    let port = '';\n    const sourcePort = this.sourcePort();\n    // Do not include standard ports to ensure the back-end will change standard ports according to the scheme.\n    if (sourcePort && sourcePort !== 80 && sourcePort !== 443) {\n      port = `:${this.sourcePort()}`;\n    }\n    // We must not consider the this.sourceScheme() here, otherwise it will be impossible to set a cookie without\n    // the Secure attribute from a secure origin.\n    return (this.secure() ? 'https://' : 'http://') + this.domain() + port + this.path() as\n        Platform.DevToolsPath.UrlString;\n  }\n\n  setSize(size: number): void {\n    this.#size = size;\n  }\n\n  expiresDate(requestDate: Date): Date|null {\n    // RFC 6265 indicates that the max-age attribute takes precedence over the expires attribute\n    if (this.maxAge()) {\n      return new Date(requestDate.getTime() + 1000 * this.maxAge());\n    }\n\n    if (this.expires()) {\n      return new Date(this.expires());\n    }\n\n    return null;\n  }\n\n  addAttribute(key: Attribute|null, value?: string|number|boolean): void {\n    if (!key) {\n      return;\n    }\n    switch (key) {\n      case Attribute.PRIORITY:\n        this.#priority = (value as Protocol.Network.CookiePriority);\n        break;\n      default:\n        this.#attributes.set(key, value);\n    }\n  }\n\n  hasAttribute(key: Attribute): boolean {\n    return this.#attributes.has(key);\n  }\n\n  getAttribute(key: Attribute): string|number|boolean|undefined {\n    return this.#attributes.get(key);\n  }\n\n  setCookieLine(cookieLine: string): void {\n    this.#cookieLine = cookieLine;\n  }\n\n  getCookieLine(): string|null {\n    return this.#cookieLine;\n  }\n\n  matchesSecurityOrigin(securityOrigin: string): boolean {\n    const hostname = new URL(securityOrigin).hostname;\n    return Cookie.isDomainMatch(this.domain(), hostname);\n  }\n\n  static isDomainMatch(domain: string, hostname: string): boolean {\n    // This implementation mirrors\n    // https://source.chromium.org/search?q=net::cookie_util::IsDomainMatch()\n    //\n    // Can domain match in two ways; as a domain cookie (where the cookie\n    // domain begins with \".\") or as a host cookie (where it doesn't).\n\n    // Some consumers of the CookieMonster expect to set cookies on\n    // URLs like http://.strange.url.  To retrieve cookies in this instance,\n    // we allow matching as a host cookie even when the domain_ starts with\n    // a period.\n    if (hostname === domain) {\n      return true;\n    }\n\n    // Domain cookie must have an initial \".\".  To match, it must be\n    // equal to url's host with initial period removed, or a suffix of\n    // it.\n\n    // Arguably this should only apply to \"http\" or \"https\" cookies, but\n    // extension cookie tests currently use the funtionality, and if we\n    // ever decide to implement that it should be done by preventing\n    // such cookies from being set.\n    if (domain?.[0] !== '.') {\n      return false;\n    }\n\n    // The host with a \".\" prefixed.\n    if (domain.substr(1) === hostname) {\n      return true;\n    }\n\n    // A pure suffix of the host (ok since we know the domain already\n    // starts with a \".\")\n    return hostname.length > domain.length && hostname.endsWith(domain);\n  }\n}\n\nexport const enum Type {\n  REQUEST = 0,\n  RESPONSE = 1,\n}\n\nexport const enum Attribute {\n  NAME = 'name',\n  VALUE = 'value',\n  SIZE = 'size',\n  DOMAIN = 'domain',\n  PATH = 'path',\n  EXPIRES = 'expires',\n  MAX_AGE = 'max-age',\n  HTTP_ONLY = 'http-only',\n  SECURE = 'secure',\n  SAME_SITE = 'same-site',\n  SOURCE_SCHEME = 'source-scheme',\n  SOURCE_PORT = 'source-port',\n  PRIORITY = 'priority',\n  PARTITIONED = 'partitioned',\n  PARTITION_KEY = 'partition-key',\n  PARTITION_KEY_SITE = 'partition-key-site',\n  HAS_CROSS_SITE_ANCESTOR = 'has-cross-site-ancestor',\n}\n", "// Copyright 2011 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport type * as ProtocolProxyApi from '../../generated/protocol-proxy-api.js';\nimport * as Protocol from '../../generated/protocol.js';\nimport * as TextUtils from '../../models/text_utils/text_utils.js';\nimport * as Common from '../common/common.js';\nimport * as i18n from '../i18n/i18n.js';\nimport * as Platform from '../platform/platform.js';\nimport * as Root from '../root/root.js';\n\nimport {Cookie} from './Cookie.js';\nimport {\n  type BlockedCookieWithReason,\n  DirectSocketChunkType,\n  DirectSocketStatus,\n  DirectSocketType,\n  Events as NetworkRequestEvents,\n  type ExtraRequestInfo,\n  type ExtraResponseInfo,\n  type IncludedCookieWithReason,\n  type NameValue,\n  NetworkRequest,\n} from './NetworkRequest.js';\nimport {SDKModel} from './SDKModel.js';\nimport {Capability, type Target} from './Target.js';\nimport {type SDKModelObserver, TargetManager} from './TargetManager.js';\n\nconst UIStrings = {\n  /**\n   * @description Explanation why no content is shown for WebSocket connection.\n   */\n  noContentForWebSocket: 'Content for WebSockets is currently not supported',\n  /**\n   * @description Explanation why no content is shown for redirect response.\n   */\n  noContentForRedirect: 'No content available because this request was redirected',\n  /**\n   * @description Explanation why no content is shown for preflight request.\n   */\n  noContentForPreflight: 'No content available for preflight request',\n  /**\n   * @description Text to indicate that network throttling is disabled\n   */\n  noThrottling: 'No throttling',\n  /**\n   * @description Text to indicate the network connectivity is offline\n   */\n  offline: 'Offline',\n  /**\n   * @description Text in Network Manager representing the \"3G\" throttling preset.\n   */\n  slowG: '3G',  // Named `slowG` for legacy reasons and because this value\n                // is serialized locally on the user's machine: if we\n                // change it we break their stored throttling settings.\n                // (See crrev.com/c/2947255)\n  /**\n   * @description Text in Network Manager representing the \"Slow 4G\" throttling preset\n   */\n  fastG: 'Slow 4G',  // Named `fastG` for legacy reasons and because this value\n                     // is serialized locally on the user's machine: if we\n                     // change it we break their stored throttling settings.\n                     // (See crrev.com/c/2947255)\n  /**\n   * @description Text in Network Manager representing the \"Fast 4G\" throttling preset\n   */\n  fast4G: 'Fast 4G',\n  /**\n   * @description Text in Network Manager representing the \"Blocking\" throttling preset\n   */\n  block: 'Block',\n  /**\n   * @description Text in Network Manager\n   * @example {https://example.com} PH1\n   */\n  requestWasBlockedByDevtoolsS: 'Request was blocked by DevTools: \"{PH1}\"',\n  /**\n   * @description Message in Network Manager\n   * @example {XHR} PH1\n   * @example {GET} PH2\n   * @example {https://example.com} PH3\n   */\n  sFailedLoadingSS: '{PH1} failed loading: {PH2} \"{PH3}\".',\n  /**\n   * @description Message in Network Manager\n   * @example {XHR} PH1\n   * @example {GET} PH2\n   * @example {https://example.com} PH3\n   */\n  sFinishedLoadingSS: '{PH1} finished loading: {PH2} \"{PH3}\".',\n  /**\n   * @description One of direct socket connection statuses\n   */\n  directSocketStatusOpening: 'Opening',\n  /**\n   * @description One of direct socket connection statuses\n   */\n  directSocketStatusOpen: 'Open',\n  /**\n   * @description One of direct socket connection statuses\n   */\n  directSocketStatusClosed: 'Closed',\n  /**\n   * @description One of direct socket connection statuses\n   */\n  directSocketStatusAborted: 'Aborted',\n} as const;\nconst str_ = i18n.i18n.registerUIStrings('core/sdk/NetworkManager.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\nconst i18nLazyString = i18n.i18n.getLazilyComputedLocalizedString.bind(undefined, str_);\n\nconst requestToManagerMap = new WeakMap<NetworkRequest, NetworkManager>();\n\nconst CONNECTION_TYPES = new Map([\n  ['2g', Protocol.Network.ConnectionType.Cellular2g],\n  ['3g', Protocol.Network.ConnectionType.Cellular3g],\n  ['4g', Protocol.Network.ConnectionType.Cellular4g],\n  ['bluetooth', Protocol.Network.ConnectionType.Bluetooth],\n  ['wifi', Protocol.Network.ConnectionType.Wifi],\n  ['wimax', Protocol.Network.ConnectionType.Wimax],\n]);\n\n/**\n * We store two settings to disk to persist network throttling.\n * 1. The custom conditions that the user has defined.\n * 2. The active `key` that applies the correct current preset.\n * The reason the setting creation functions are defined here is because they are referred\n * to in multiple places, and this ensures we don't have accidental typos which\n * mean extra settings get mistakenly created.\n */\nexport function customUserNetworkConditionsSetting(): Common.Settings.Setting<Conditions[]> {\n  return Common.Settings.Settings.instance().moduleSetting<Conditions[]>('custom-network-conditions');\n}\n\nexport function activeNetworkThrottlingKeySetting(): Common.Settings.Setting<ThrottlingConditionKey> {\n  return Common.Settings.Settings.instance().createSetting(\n      'active-network-condition-key', PredefinedThrottlingConditionKey.NO_THROTTLING);\n}\n\nexport class NetworkManager extends SDKModel<EventTypes> {\n  readonly dispatcher: NetworkDispatcher;\n  readonly fetchDispatcher: FetchDispatcher;\n  readonly #networkAgent: ProtocolProxyApi.NetworkApi;\n  readonly #bypassServiceWorkerSetting: Common.Settings.Setting<boolean>;\n\n  readonly activeNetworkThrottlingKey: Common.Settings.Setting<ThrottlingConditionKey> =\n      activeNetworkThrottlingKeySetting();\n\n  constructor(target: Target) {\n    super(target);\n    this.dispatcher = new NetworkDispatcher(this);\n    this.fetchDispatcher = new FetchDispatcher(target.fetchAgent(), this);\n    this.#networkAgent = target.networkAgent();\n    target.registerNetworkDispatcher(this.dispatcher);\n    target.registerFetchDispatcher(this.fetchDispatcher);\n    if (Common.Settings.Settings.instance().moduleSetting('cache-disabled').get()) {\n      void this.#networkAgent.invoke_setCacheDisabled({cacheDisabled: true});\n    }\n\n    if (Root.Runtime.hostConfig.devToolsPrivacyUI?.enabled &&\n        Root.Runtime.hostConfig.thirdPartyCookieControls?.managedBlockThirdPartyCookies !== true &&\n        (Common.Settings.Settings.instance().createSetting('cookie-control-override-enabled', undefined).get() ||\n         Common.Settings.Settings.instance().createSetting('grace-period-mitigation-disabled', undefined).get() ||\n         Common.Settings.Settings.instance().createSetting('heuristic-mitigation-disabled', undefined).get())) {\n      this.cookieControlFlagsSettingChanged();\n    }\n\n    void this.#networkAgent.invoke_enable({\n      maxPostDataSize: MAX_EAGER_POST_REQUEST_BODY_LENGTH,\n      enableDurableMessages: Root.Runtime.hostConfig.devToolsEnableDurableMessages?.enabled,\n      maxTotalBufferSize: MAX_RESPONSE_BODY_TOTAL_BUFFER_LENGTH,\n      reportDirectSocketTraffic: true,\n    });\n    void this.#networkAgent.invoke_setAttachDebugStack({enabled: true});\n\n    this.#bypassServiceWorkerSetting =\n        Common.Settings.Settings.instance().createSetting('bypass-service-worker', false);\n    if (this.#bypassServiceWorkerSetting.get()) {\n      this.bypassServiceWorkerChanged();\n    }\n    this.#bypassServiceWorkerSetting.addChangeListener(this.bypassServiceWorkerChanged, this);\n\n    Common.Settings.Settings.instance()\n        .moduleSetting('cache-disabled')\n        .addChangeListener(this.cacheDisabledSettingChanged, this);\n\n    Common.Settings.Settings.instance()\n        .createSetting('cookie-control-override-enabled', undefined)\n        .addChangeListener(this.cookieControlFlagsSettingChanged, this);\n    Common.Settings.Settings.instance()\n        .createSetting('grace-period-mitigation-disabled', undefined)\n        .addChangeListener(this.cookieControlFlagsSettingChanged, this);\n    Common.Settings.Settings.instance()\n        .createSetting('heuristic-mitigation-disabled', undefined)\n        .addChangeListener(this.cookieControlFlagsSettingChanged, this);\n  }\n\n  static forRequest(request: NetworkRequest): NetworkManager|null {\n    return requestToManagerMap.get(request) || null;\n  }\n\n  static canReplayRequest(request: NetworkRequest): boolean {\n    return Boolean(requestToManagerMap.get(request)) && Boolean(request.backendRequestId()) && !request.isRedirect() &&\n        request.resourceType() === Common.ResourceType.resourceTypes.XHR;\n  }\n\n  static replayRequest(request: NetworkRequest): void {\n    const manager = requestToManagerMap.get(request);\n    const requestId = request.backendRequestId();\n    if (!manager || !requestId || request.isRedirect()) {\n      return;\n    }\n    void manager.#networkAgent.invoke_replayXHR({requestId});\n  }\n\n  static async searchInRequest(request: NetworkRequest, query: string, caseSensitive: boolean, isRegex: boolean):\n      Promise<TextUtils.ContentProvider.SearchMatch[]> {\n    const manager = NetworkManager.forRequest(request);\n    const requestId = request.backendRequestId();\n    if (!manager || !requestId || request.isRedirect()) {\n      return [];\n    }\n    const response =\n        await manager.#networkAgent.invoke_searchInResponseBody({requestId, query, caseSensitive, isRegex});\n    return TextUtils.TextUtils.performSearchInSearchMatches(response.result || [], query, caseSensitive, isRegex);\n  }\n\n  static async requestContentData(request: NetworkRequest): Promise<TextUtils.ContentData.ContentDataOrError> {\n    if (request.resourceType() === Common.ResourceType.resourceTypes.WebSocket) {\n      return {error: i18nString(UIStrings.noContentForWebSocket)};\n    }\n    if (!request.finished) {\n      await request.once(NetworkRequestEvents.FINISHED_LOADING);\n    }\n    if (request.isRedirect()) {\n      return {error: i18nString(UIStrings.noContentForRedirect)};\n    }\n    if (request.isPreflightRequest()) {\n      return {error: i18nString(UIStrings.noContentForPreflight)};\n    }\n    const manager = NetworkManager.forRequest(request);\n    if (!manager) {\n      return {error: 'No network manager for request'};\n    }\n    const requestId = request.backendRequestId();\n    if (!requestId) {\n      return {error: 'No backend request id for request'};\n    }\n    const response = await manager.#networkAgent.invoke_getResponseBody({requestId});\n    const error = response.getError();\n    if (error) {\n      return {error};\n    }\n    return new TextUtils.ContentData.ContentData(\n        response.body, response.base64Encoded, request.mimeType, request.charset() ?? undefined);\n  }\n\n  /**\n   * Returns the already received bytes for an in-flight request. After calling this method\n   * \"dataReceived\" events will contain additional data.\n   */\n  static async streamResponseBody(request: NetworkRequest): Promise<TextUtils.ContentData.ContentDataOrError> {\n    if (request.finished) {\n      return {error: 'Streaming the response body is only available for in-flight requests.'};\n    }\n    const manager = NetworkManager.forRequest(request);\n    if (!manager) {\n      return {error: 'No network manager for request'};\n    }\n    const requestId = request.backendRequestId();\n    if (!requestId) {\n      return {error: 'No backend request id for request'};\n    }\n    const response = await manager.#networkAgent.invoke_streamResourceContent({requestId});\n    const error = response.getError();\n    if (error) {\n      return {error};\n    }\n    // Wait for at least the `responseReceived event so we have accurate mimetype and charset.\n    await request.waitForResponseReceived();\n    return new TextUtils.ContentData.ContentData(\n        response.bufferedData, /* isBase64=*/ true, request.mimeType, request.charset() ?? undefined);\n  }\n\n  static async requestPostData(request: NetworkRequest): Promise<string|null> {\n    const manager = NetworkManager.forRequest(request);\n    if (!manager) {\n      console.error('No network manager for request');\n      return null;\n    }\n    const requestId = request.backendRequestId();\n    if (!requestId) {\n      console.error('No backend request id for request');\n      return null;\n    }\n    try {\n      const {postData} = await manager.#networkAgent.invoke_getRequestPostData({requestId});\n      return postData;\n    } catch (e) {\n      return e.message;\n    }\n  }\n\n  static connectionType(conditions: Conditions): Protocol.Network.ConnectionType {\n    if (!conditions.download && !conditions.upload) {\n      return Protocol.Network.ConnectionType.None;\n    }\n    try {\n      const title =\n          typeof conditions.title === 'function' ? conditions.title().toLowerCase() : conditions.title.toLowerCase();\n      for (const [name, protocolType] of CONNECTION_TYPES) {\n        if (title.includes(name)) {\n          return protocolType;\n        }\n      }\n    } catch {\n      // If the i18nKey for this condition has changed, calling conditions.title() will break, so in that case we reset to NONE\n      return Protocol.Network.ConnectionType.None;\n    }\n\n    return Protocol.Network.ConnectionType.Other;\n  }\n\n  static lowercaseHeaders(headers: Protocol.Network.Headers): Protocol.Network.Headers {\n    const newHeaders: Protocol.Network.Headers = {};\n    for (const headerName in headers) {\n      newHeaders[headerName.toLowerCase()] = headers[headerName];\n    }\n    return newHeaders;\n  }\n\n  requestForURL(url: Platform.DevToolsPath.UrlString): NetworkRequest|null {\n    return this.dispatcher.requestForURL(url);\n  }\n\n  requestForId(id: string): NetworkRequest|null {\n    return this.dispatcher.requestForId(id);\n  }\n\n  requestForLoaderId(loaderId: Protocol.Network.LoaderId): NetworkRequest|null {\n    return this.dispatcher.requestForLoaderId(loaderId);\n  }\n\n  private cacheDisabledSettingChanged({data: enabled}: Common.EventTarget.EventTargetEvent<boolean>): void {\n    void this.#networkAgent.invoke_setCacheDisabled({cacheDisabled: enabled});\n  }\n\n  private cookieControlFlagsSettingChanged(): void {\n    const overridesEnabled =\n        Boolean(Common.Settings.Settings.instance().createSetting('cookie-control-override-enabled', undefined).get());\n    const gracePeriodEnabled = overridesEnabled ?\n        Boolean(\n            Common.Settings.Settings.instance().createSetting('grace-period-mitigation-disabled', undefined).get()) :\n        false;\n    const heuristicEnabled = overridesEnabled ?\n        Boolean(Common.Settings.Settings.instance().createSetting('heuristic-mitigation-disabled', undefined).get()) :\n        false;\n    void this.#networkAgent.invoke_setCookieControls({\n      enableThirdPartyCookieRestriction: overridesEnabled,\n      disableThirdPartyCookieMetadata: gracePeriodEnabled,\n      disableThirdPartyCookieHeuristics: heuristicEnabled,\n    });\n  }\n\n  override dispose(): void {\n    Common.Settings.Settings.instance()\n        .moduleSetting('cache-disabled')\n        .removeChangeListener(this.cacheDisabledSettingChanged, this);\n  }\n\n  private bypassServiceWorkerChanged(): void {\n    void this.#networkAgent.invoke_setBypassServiceWorker({bypass: this.#bypassServiceWorkerSetting.get()});\n  }\n\n  async getSecurityIsolationStatus(frameId: Protocol.Page.FrameId|null):\n      Promise<Protocol.Network.SecurityIsolationStatus|null> {\n    const result = await this.#networkAgent.invoke_getSecurityIsolationStatus({frameId: frameId ?? undefined});\n    if (result.getError()) {\n      return null;\n    }\n    return result.status;\n  }\n\n  async enableReportingApi(enable = true): Promise<Promise<Protocol.ProtocolResponseWithError>> {\n    return await this.#networkAgent.invoke_enableReportingApi({enable});\n  }\n\n  async loadNetworkResource(\n      frameId: Protocol.Page.FrameId|null, url: Platform.DevToolsPath.UrlString,\n      options: Protocol.Network.LoadNetworkResourceOptions): Promise<Protocol.Network.LoadNetworkResourcePageResult> {\n    const result = await this.#networkAgent.invoke_loadNetworkResource({frameId: frameId ?? undefined, url, options});\n    if (result.getError()) {\n      throw new Error(result.getError());\n    }\n    return result.resource;\n  }\n\n  clearRequests(): void {\n    this.dispatcher.clearRequests();\n  }\n}\n\nexport enum Events {\n  /* eslint-disable @typescript-eslint/naming-convention -- Used by web_tests. */\n  RequestStarted = 'RequestStarted',\n  RequestUpdated = 'RequestUpdated',\n  RequestFinished = 'RequestFinished',\n  RequestUpdateDropped = 'RequestUpdateDropped',\n  ResponseReceived = 'ResponseReceived',\n  MessageGenerated = 'MessageGenerated',\n  RequestRedirected = 'RequestRedirected',\n  LoadingFinished = 'LoadingFinished',\n  ReportingApiReportAdded = 'ReportingApiReportAdded',\n  ReportingApiReportUpdated = 'ReportingApiReportUpdated',\n  ReportingApiEndpointsChangedForOrigin = 'ReportingApiEndpointsChangedForOrigin',\n  /* eslint-enable @typescript-eslint/naming-convention */\n}\n\nexport interface RequestStartedEvent {\n  request: NetworkRequest;\n  originalRequest: Protocol.Network.Request|null;\n}\n\nexport interface ResponseReceivedEvent {\n  request: NetworkRequest;\n  response: Protocol.Network.Response;\n}\n\nexport interface MessageGeneratedEvent {\n  message: Common.UIString.LocalizedString;\n  requestId: string;\n  warning: boolean;\n}\n\nexport interface EventTypes {\n  [Events.RequestStarted]: RequestStartedEvent;\n  [Events.RequestUpdated]: NetworkRequest;\n  [Events.RequestFinished]: NetworkRequest;\n  [Events.RequestUpdateDropped]: RequestUpdateDroppedEventData;\n  [Events.ResponseReceived]: ResponseReceivedEvent;\n  [Events.MessageGenerated]: MessageGeneratedEvent;\n  [Events.RequestRedirected]: NetworkRequest;\n  [Events.LoadingFinished]: NetworkRequest;\n  [Events.ReportingApiReportAdded]: Protocol.Network.ReportingApiReport;\n  [Events.ReportingApiReportUpdated]: Protocol.Network.ReportingApiReport;\n  [Events.ReportingApiEndpointsChangedForOrigin]: Protocol.Network.ReportingApiEndpointsChangedForOriginEvent;\n}\n\n/**\n * Define some built-in DevTools throttling presets.\n * Note that for the download, upload and RTT values we multiply them by adjustment factors to make DevTools' emulation more accurate.\n * @see https://docs.google.com/document/d/10lfVdS1iDWCRKQXPfbxEn4Or99D64mvNlugP1AQuFlE/edit for historical context.\n * @see https://crbug.com/342406608#comment10 for context around the addition of 4G presets in June 2024.\n */\n\nexport const BlockingConditions: ThrottlingConditions = {\n  key: PredefinedThrottlingConditionKey.BLOCKING,\n  block: true,\n  title: i18nLazyString(UIStrings.block),\n};\n\nexport const NoThrottlingConditions: Conditions = {\n  key: PredefinedThrottlingConditionKey.NO_THROTTLING,\n  title: i18nLazyString(UIStrings.noThrottling),\n  i18nTitleKey: UIStrings.noThrottling,\n  download: -1,\n  upload: -1,\n  latency: 0,\n};\n\nexport const OfflineConditions: Conditions = {\n  key: PredefinedThrottlingConditionKey.OFFLINE,\n  title: i18nLazyString(UIStrings.offline),\n  i18nTitleKey: UIStrings.offline,\n  download: 0,\n  upload: 0,\n  latency: 0,\n};\n\nconst slow3GTargetLatency = 400;\nexport const Slow3GConditions: Conditions = {\n  key: PredefinedThrottlingConditionKey.SPEED_3G,\n  title: i18nLazyString(UIStrings.slowG),\n  i18nTitleKey: UIStrings.slowG,\n  // ~500Kbps down\n  download: 500 * 1000 / 8 * .8,\n  // ~500Kbps up\n  upload: 500 * 1000 / 8 * .8,\n  // 400ms RTT\n  latency: slow3GTargetLatency * 5,\n  targetLatency: slow3GTargetLatency,\n};\n\n// Note for readers: this used to be called \"Fast 3G\" but it was renamed in May\n// 2024 to align with LH (crbug.com/342406608).\nconst slow4GTargetLatency = 150;\nexport const Slow4GConditions: Conditions = {\n  key: PredefinedThrottlingConditionKey.SPEED_SLOW_4G,\n  title: i18nLazyString(UIStrings.fastG),\n  i18nTitleKey: UIStrings.fastG,\n  // ~1.6 Mbps down\n  download: 1.6 * 1000 * 1000 / 8 * .9,\n  // ~0.75 Mbps up\n  upload: 750 * 1000 / 8 * .9,\n  // 150ms RTT\n  latency: slow4GTargetLatency * 3.75,\n  targetLatency: slow4GTargetLatency,\n};\n\nconst fast4GTargetLatency = 60;\nexport const Fast4GConditions: Conditions = {\n  key: PredefinedThrottlingConditionKey.SPEED_FAST_4G,\n  title: i18nLazyString(UIStrings.fast4G),\n  i18nTitleKey: UIStrings.fast4G,\n  // 9 Mbps down\n  download: 9 * 1000 * 1000 / 8 * .9,\n  // 1.5 Mbps up\n  upload: 1.5 * 1000 * 1000 / 8 * .9,\n  // 60ms RTT\n  latency: fast4GTargetLatency * 2.75,\n  targetLatency: fast4GTargetLatency,\n};\n\nconst MAX_EAGER_POST_REQUEST_BODY_LENGTH = 64 * 1024;             // bytes\nconst MAX_RESPONSE_BODY_TOTAL_BUFFER_LENGTH = 250 * 1024 * 1024;  // bytes\n\nexport class FetchDispatcher implements ProtocolProxyApi.FetchDispatcher {\n  readonly #fetchAgent: ProtocolProxyApi.FetchApi;\n  readonly #manager: NetworkManager;\n\n  constructor(agent: ProtocolProxyApi.FetchApi, manager: NetworkManager) {\n    this.#fetchAgent = agent;\n    this.#manager = manager;\n  }\n\n  requestPaused({requestId, request, resourceType, responseStatusCode, responseHeaders, networkId}:\n                    Protocol.Fetch.RequestPausedEvent): void {\n    const networkRequest = networkId ? this.#manager.requestForId(networkId) : null;\n    // If there was no 'Network.responseReceivedExtraInfo' event (e.g. for 'file:/' URLSs),\n    // populate 'originalResponseHeaders' with the headers from the 'Fetch.requestPaused' event.\n    if (networkRequest?.originalResponseHeaders.length === 0 && responseHeaders) {\n      networkRequest.originalResponseHeaders = responseHeaders;\n    }\n    void MultitargetNetworkManager.instance().requestIntercepted(new InterceptedRequest(\n        this.#fetchAgent, request, resourceType, requestId, networkRequest, responseStatusCode, responseHeaders));\n  }\n\n  authRequired({}: Protocol.Fetch.AuthRequiredEvent): void {\n  }\n}\n\nexport class NetworkDispatcher implements ProtocolProxyApi.NetworkDispatcher {\n  readonly #manager: NetworkManager;\n  readonly #requestsById = new Map<string, NetworkRequest>();\n  readonly #requestsByURL = new Map<Platform.DevToolsPath.UrlString, NetworkRequest>();\n  readonly #requestsByLoaderId = new Map<Protocol.Network.LoaderId, NetworkRequest>();\n  readonly #requestIdToExtraInfoBuilder = new Map<string, ExtraInfoBuilder>();\n  /**\n   * In case of an early abort or a cache hit, the Trust Token done event is\n   * reported before the request itself is created in `requestWillBeSent`.\n   * This causes the event to be lost as no `NetworkRequest` instance has been\n   * created yet.\n   * This map caches the events temporarily and populates the NetworkRequest\n   * once it is created in `requestWillBeSent`.\n   */\n  readonly #requestIdToTrustTokenEvent = new Map<string, Protocol.Network.TrustTokenOperationDoneEvent>();\n\n  constructor(manager: NetworkManager) {\n    this.#manager = manager;\n\n    MultitargetNetworkManager.instance().addEventListener(\n        MultitargetNetworkManager.Events.REQUEST_INTERCEPTED, this.#markAsIntercepted.bind(this));\n  }\n\n  #markAsIntercepted(event: Common.EventTarget.EventTargetEvent<string>): void {\n    const request = this.requestForId(event.data);\n    if (request) {\n      request.setWasIntercepted(true);\n    }\n  }\n\n  private headersMapToHeadersArray(headersMap: Protocol.Network.Headers): NameValue[] {\n    const result = [];\n    for (const name in headersMap) {\n      const values = headersMap[name].split('\\n');\n      for (let i = 0; i < values.length; ++i) {\n        result.push({name, value: values[i]});\n      }\n    }\n    return result;\n  }\n\n  private updateNetworkRequestWithRequest(networkRequest: NetworkRequest, request: Protocol.Network.Request): void {\n    networkRequest.requestMethod = request.method;\n    networkRequest.setRequestHeaders(this.headersMapToHeadersArray(request.headers));\n    networkRequest.setRequestFormData(Boolean(request.hasPostData), request.postData || null);\n    networkRequest.setInitialPriority(request.initialPriority);\n    networkRequest.mixedContentType = request.mixedContentType || Protocol.Security.MixedContentType.None;\n    networkRequest.setReferrerPolicy(request.referrerPolicy);\n    networkRequest.setIsSameSite(request.isSameSite || false);\n    networkRequest.setIsAdRelated(request.isAdRelated || false);\n  }\n\n  private updateNetworkRequestWithResponse(networkRequest: NetworkRequest, response: Protocol.Network.Response): void {\n    if (response.url && networkRequest.url() !== response.url) {\n      networkRequest.setUrl(response.url as Platform.DevToolsPath.UrlString);\n    }\n    networkRequest.mimeType = response.mimeType;\n    networkRequest.setCharset(response.charset);\n    if (!networkRequest.statusCode || networkRequest.wasIntercepted()) {\n      networkRequest.statusCode = response.status;\n    }\n    if (!networkRequest.statusText || networkRequest.wasIntercepted()) {\n      networkRequest.statusText = response.statusText;\n    }\n    if (!networkRequest.hasExtraResponseInfo() || networkRequest.wasIntercepted()) {\n      networkRequest.responseHeaders = this.headersMapToHeadersArray(response.headers);\n    }\n\n    if (response.encodedDataLength >= 0) {\n      networkRequest.setTransferSize(response.encodedDataLength);\n    }\n\n    if (response.requestHeaders && !networkRequest.hasExtraRequestInfo()) {\n      // TODO(http://crbug.com/1004979): Stop using response.requestHeaders and\n      //   response.requestHeadersText once shared workers\n      //   emit Network.*ExtraInfo events for their network #requests.\n      networkRequest.setRequestHeaders(this.headersMapToHeadersArray(response.requestHeaders));\n      networkRequest.setRequestHeadersText(response.requestHeadersText || '');\n    }\n\n    networkRequest.connectionReused = response.connectionReused;\n    networkRequest.connectionId = String(response.connectionId);\n    if (response.remoteIPAddress) {\n      networkRequest.setRemoteAddress(response.remoteIPAddress, response.remotePort || -1);\n    }\n\n    if (response.fromServiceWorker) {\n      networkRequest.fetchedViaServiceWorker = true;\n    }\n\n    if (response.fromDiskCache) {\n      networkRequest.setFromDiskCache();\n    }\n\n    if (response.fromPrefetchCache) {\n      networkRequest.setFromPrefetchCache();\n    }\n\n    if (response.fromEarlyHints) {\n      networkRequest.setFromEarlyHints();\n    }\n\n    if (response.cacheStorageCacheName) {\n      networkRequest.setResponseCacheStorageCacheName(response.cacheStorageCacheName);\n    }\n\n    if (response.serviceWorkerRouterInfo) {\n      networkRequest.serviceWorkerRouterInfo = response.serviceWorkerRouterInfo;\n    }\n\n    if (response.responseTime) {\n      networkRequest.setResponseRetrievalTime(new Date(response.responseTime));\n    }\n\n    networkRequest.timing = response.timing;\n\n    networkRequest.protocol = response.protocol || '';\n\n    networkRequest.alternateProtocolUsage = response.alternateProtocolUsage;\n\n    if (response.serviceWorkerResponseSource) {\n      networkRequest.setServiceWorkerResponseSource(response.serviceWorkerResponseSource);\n    }\n\n    networkRequest.setSecurityState(response.securityState);\n\n    if (response.securityDetails) {\n      networkRequest.setSecurityDetails(response.securityDetails);\n    }\n\n    const newResourceType = Common.ResourceType.ResourceType.fromMimeTypeOverride(networkRequest.mimeType);\n    if (newResourceType) {\n      networkRequest.setResourceType(newResourceType);\n    }\n    if (networkRequest.responseReceivedPromiseResolve) {\n      // Anyone interested in waiting for response headers being available?\n      networkRequest.responseReceivedPromiseResolve();\n    } else {\n      // If not, make sure no one will wait on it in the future.\n      networkRequest.responseReceivedPromise = Promise.resolve();\n    }\n  }\n\n  requestForId(id: string): NetworkRequest|null {\n    return this.#requestsById.get(id) || null;\n  }\n\n  requestForURL(url: Platform.DevToolsPath.UrlString): NetworkRequest|null {\n    return this.#requestsByURL.get(url) || null;\n  }\n\n  requestForLoaderId(loaderId: Protocol.Network.LoaderId): NetworkRequest|null {\n    return this.#requestsByLoaderId.get(loaderId) || null;\n  }\n\n  resourceChangedPriority({requestId, newPriority}: Protocol.Network.ResourceChangedPriorityEvent): void {\n    const networkRequest = this.#requestsById.get(requestId);\n    if (networkRequest) {\n      networkRequest.setPriority(newPriority);\n    }\n  }\n\n  signedExchangeReceived({requestId, info}: Protocol.Network.SignedExchangeReceivedEvent): void {\n    // While loading a signed exchange, a signedExchangeReceived event is sent\n    // between two requestWillBeSent events.\n    // 1. The first requestWillBeSent is sent while starting the navigation (or\n    //    prefetching).\n    // 2. This signedExchangeReceived event is sent when the browser detects the\n    //    signed exchange.\n    // 3. The second requestWillBeSent is sent with the generated redirect\n    //    response and a new redirected request which URL is the inner request\n    //    URL of the signed exchange.\n    let networkRequest = this.#requestsById.get(requestId);\n    // |requestId| is available only for navigation #requests. If the request was\n    // sent from a renderer process for prefetching, it is not available. In the\n    // case, need to fallback to look for the URL.\n    // TODO(crbug/841076): Sends the request ID of prefetching to the browser\n    // process and DevTools to find the matching request.\n    if (!networkRequest) {\n      networkRequest = this.#requestsByURL.get(info.outerResponse.url as Platform.DevToolsPath.UrlString);\n      if (!networkRequest) {\n        return;\n      }\n      // Or clause is never hit, but is here because we can't use non-null assertions.\n      const backendRequestId = networkRequest.backendRequestId() || requestId;\n      requestId = backendRequestId;\n    }\n    networkRequest.setSignedExchangeInfo(info);\n    networkRequest.setResourceType(Common.ResourceType.resourceTypes.SignedExchange);\n\n    this.updateNetworkRequestWithResponse(networkRequest, info.outerResponse);\n    this.updateNetworkRequest(networkRequest);\n    this.getExtraInfoBuilder(requestId).addHasExtraInfo(info.hasExtraInfo);\n\n    this.#manager.dispatchEventToListeners(\n        Events.ResponseReceived, {request: networkRequest, response: info.outerResponse});\n  }\n\n  requestWillBeSent({\n    requestId,\n    loaderId,\n    documentURL,\n    request,\n    timestamp,\n    wallTime,\n    initiator,\n    redirectHasExtraInfo,\n    redirectResponse,\n    type,\n    frameId,\n    hasUserGesture,\n  }: Protocol.Network.RequestWillBeSentEvent): void {\n    let networkRequest = this.#requestsById.get(requestId);\n    if (networkRequest) {\n      // FIXME: move this check to the backend.\n      if (!redirectResponse) {\n        return;\n      }\n      // If signedExchangeReceived event has already been sent for the request,\n      // ignores the internally generated |redirectResponse|. The\n      // |outerResponse| of SignedExchangeInfo was set to |networkRequest| in\n      // signedExchangeReceived().\n      if (!networkRequest.signedExchangeInfo()) {\n        this.responseReceived({\n          requestId,\n          loaderId,\n          timestamp,\n          type: type || Protocol.Network.ResourceType.Other,\n          response: redirectResponse,\n          hasExtraInfo: redirectHasExtraInfo,\n          frameId,\n        });\n      }\n      networkRequest = this.appendRedirect(requestId, timestamp, request.url as Platform.DevToolsPath.UrlString);\n      this.#manager.dispatchEventToListeners(Events.RequestRedirected, networkRequest);\n    } else {\n      networkRequest = NetworkRequest.create(\n          requestId, request.url as Platform.DevToolsPath.UrlString, documentURL as Platform.DevToolsPath.UrlString,\n          frameId ?? null, loaderId, initiator, hasUserGesture);\n      requestToManagerMap.set(networkRequest, this.#manager);\n    }\n    networkRequest.hasNetworkData = true;\n    this.updateNetworkRequestWithRequest(networkRequest, request);\n    networkRequest.setIssueTime(timestamp, wallTime);\n    networkRequest.setResourceType(\n        type ? Common.ResourceType.resourceTypes[type] : Common.ResourceType.resourceTypes.Other);\n    if (request.trustTokenParams) {\n      networkRequest.setTrustTokenParams(request.trustTokenParams);\n    }\n    const maybeTrustTokenEvent = this.#requestIdToTrustTokenEvent.get(requestId);\n    if (maybeTrustTokenEvent) {\n      networkRequest.setTrustTokenOperationDoneEvent(maybeTrustTokenEvent);\n      this.#requestIdToTrustTokenEvent.delete(requestId);\n    }\n\n    this.getExtraInfoBuilder(requestId).addRequest(networkRequest);\n\n    this.startNetworkRequest(networkRequest, request);\n  }\n\n  requestServedFromCache({requestId}: Protocol.Network.RequestServedFromCacheEvent): void {\n    const networkRequest = this.#requestsById.get(requestId);\n    if (!networkRequest) {\n      return;\n    }\n\n    networkRequest.setFromMemoryCache();\n  }\n\n  responseReceived({requestId, loaderId, timestamp, type, response, hasExtraInfo, frameId}:\n                       Protocol.Network.ResponseReceivedEvent): void {\n    const networkRequest = this.#requestsById.get(requestId);\n    const lowercaseHeaders = NetworkManager.lowercaseHeaders(response.headers);\n    if (!networkRequest) {\n      const lastModifiedHeader = lowercaseHeaders['last-modified'];\n      // We missed the requestWillBeSent.\n      const eventData: RequestUpdateDroppedEventData = {\n        url: response.url as Platform.DevToolsPath.UrlString,\n        frameId: frameId ?? null,\n        loaderId,\n        resourceType: type,\n        mimeType: response.mimeType,\n        lastModified: lastModifiedHeader ? new Date(lastModifiedHeader) : null,\n      };\n      this.#manager.dispatchEventToListeners(Events.RequestUpdateDropped, eventData);\n      return;\n    }\n\n    networkRequest.responseReceivedTime = timestamp;\n    networkRequest.setResourceType(Common.ResourceType.resourceTypes[type]);\n\n    this.updateNetworkRequestWithResponse(networkRequest, response);\n\n    this.updateNetworkRequest(networkRequest);\n    this.getExtraInfoBuilder(requestId).addHasExtraInfo(hasExtraInfo);\n    this.#manager.dispatchEventToListeners(Events.ResponseReceived, {request: networkRequest, response});\n  }\n\n  dataReceived(event: Protocol.Network.DataReceivedEvent): void {\n    let networkRequest: NetworkRequest|null|undefined = this.#requestsById.get(event.requestId);\n    if (!networkRequest) {\n      networkRequest = this.maybeAdoptMainResourceRequest(event.requestId);\n    }\n    if (!networkRequest) {\n      return;\n    }\n    networkRequest.addDataReceivedEvent(event);\n    this.updateNetworkRequest(networkRequest);\n  }\n\n  loadingFinished({requestId, timestamp: finishTime, encodedDataLength}: Protocol.Network.LoadingFinishedEvent): void {\n    let networkRequest: NetworkRequest|null|undefined = this.#requestsById.get(requestId);\n    if (!networkRequest) {\n      networkRequest = this.maybeAdoptMainResourceRequest(requestId);\n    }\n    if (!networkRequest) {\n      return;\n    }\n    this.getExtraInfoBuilder(requestId).finished();\n    this.finishNetworkRequest(networkRequest, finishTime, encodedDataLength);\n    this.#manager.dispatchEventToListeners(Events.LoadingFinished, networkRequest);\n  }\n\n  loadingFailed({\n    requestId,\n    timestamp: time,\n    type: resourceType,\n    errorText: localizedDescription,\n    canceled,\n    blockedReason,\n    corsErrorStatus,\n  }: Protocol.Network.LoadingFailedEvent): void {\n    const networkRequest = this.#requestsById.get(requestId);\n    if (!networkRequest) {\n      return;\n    }\n\n    networkRequest.failed = true;\n    networkRequest.setResourceType(Common.ResourceType.resourceTypes[resourceType]);\n    networkRequest.canceled = Boolean(canceled);\n    if (blockedReason) {\n      networkRequest.setBlockedReason(blockedReason);\n      if (blockedReason === Protocol.Network.BlockedReason.Inspector) {\n        const message = i18nString(UIStrings.requestWasBlockedByDevtoolsS, {PH1: networkRequest.url()});\n        this.#manager.dispatchEventToListeners(Events.MessageGenerated, {message, requestId, warning: true});\n      }\n    }\n    if (corsErrorStatus) {\n      networkRequest.setCorsErrorStatus(corsErrorStatus);\n    }\n    networkRequest.localizedFailDescription = localizedDescription;\n    this.getExtraInfoBuilder(requestId).finished();\n    this.finishNetworkRequest(networkRequest, time, -1);\n  }\n\n  webSocketCreated({requestId, url: requestURL, initiator}: Protocol.Network.WebSocketCreatedEvent): void {\n    const networkRequest =\n        NetworkRequest.createForSocket(requestId, requestURL as Platform.DevToolsPath.UrlString, initiator);\n    requestToManagerMap.set(networkRequest, this.#manager);\n    networkRequest.setResourceType(Common.ResourceType.resourceTypes.WebSocket);\n    this.startNetworkRequest(networkRequest, null);\n  }\n\n  webSocketWillSendHandshakeRequest({requestId, timestamp: time, wallTime, request}:\n                                        Protocol.Network.WebSocketWillSendHandshakeRequestEvent): void {\n    const networkRequest = this.#requestsById.get(requestId);\n    if (!networkRequest) {\n      return;\n    }\n\n    networkRequest.requestMethod = 'GET';\n    networkRequest.setRequestHeaders(this.headersMapToHeadersArray(request.headers));\n    networkRequest.setIssueTime(time, wallTime);\n\n    this.updateNetworkRequest(networkRequest);\n  }\n\n  webSocketHandshakeResponseReceived({requestId, timestamp: time, response}:\n                                         Protocol.Network.WebSocketHandshakeResponseReceivedEvent): void {\n    const networkRequest = this.#requestsById.get(requestId);\n    if (!networkRequest) {\n      return;\n    }\n\n    networkRequest.statusCode = response.status;\n    networkRequest.statusText = response.statusText;\n    networkRequest.responseHeaders = this.headersMapToHeadersArray(response.headers);\n    networkRequest.responseHeadersText = response.headersText || '';\n    if (response.requestHeaders) {\n      networkRequest.setRequestHeaders(this.headersMapToHeadersArray(response.requestHeaders));\n    }\n    if (response.requestHeadersText) {\n      networkRequest.setRequestHeadersText(response.requestHeadersText);\n    }\n    networkRequest.responseReceivedTime = time;\n    networkRequest.protocol = 'websocket';\n\n    this.updateNetworkRequest(networkRequest);\n  }\n\n  webSocketFrameReceived({requestId, timestamp: time, response}: Protocol.Network.WebSocketFrameReceivedEvent): void {\n    const networkRequest = this.#requestsById.get(requestId);\n    if (!networkRequest) {\n      return;\n    }\n\n    networkRequest.addProtocolFrame(response, time, false);\n    networkRequest.responseReceivedTime = time;\n\n    this.updateNetworkRequest(networkRequest);\n  }\n\n  webSocketFrameSent({requestId, timestamp: time, response}: Protocol.Network.WebSocketFrameSentEvent): void {\n    const networkRequest = this.#requestsById.get(requestId);\n    if (!networkRequest) {\n      return;\n    }\n\n    networkRequest.addProtocolFrame(response, time, true);\n    networkRequest.responseReceivedTime = time;\n\n    this.updateNetworkRequest(networkRequest);\n  }\n\n  webSocketFrameError({requestId, timestamp: time, errorMessage}: Protocol.Network.WebSocketFrameErrorEvent): void {\n    const networkRequest = this.#requestsById.get(requestId);\n    if (!networkRequest) {\n      return;\n    }\n\n    networkRequest.addProtocolFrameError(errorMessage, time);\n    networkRequest.responseReceivedTime = time;\n\n    this.updateNetworkRequest(networkRequest);\n  }\n\n  webSocketClosed({requestId, timestamp: time}: Protocol.Network.WebSocketClosedEvent): void {\n    const networkRequest = this.#requestsById.get(requestId);\n    if (!networkRequest) {\n      return;\n    }\n    this.finishNetworkRequest(networkRequest, time, -1);\n  }\n\n  eventSourceMessageReceived({requestId, timestamp: time, eventName, eventId, data}:\n                                 Protocol.Network.EventSourceMessageReceivedEvent): void {\n    const networkRequest = this.#requestsById.get(requestId);\n    if (!networkRequest) {\n      return;\n    }\n    networkRequest.addEventSourceMessage(time, eventName, eventId, data);\n  }\n\n  requestIntercepted({}: Protocol.Network.RequestInterceptedEvent): void {\n  }\n\n  requestWillBeSentExtraInfo({\n    requestId,\n    associatedCookies,\n    headers,\n    clientSecurityState,\n    connectTiming,\n    siteHasCookieInOtherPartition,\n    appliedNetworkConditionsId\n  }: Protocol.Network.RequestWillBeSentExtraInfoEvent): void {\n    const blockedRequestCookies: BlockedCookieWithReason[] = [];\n    const includedRequestCookies: IncludedCookieWithReason[] = [];\n    for (const {blockedReasons, exemptionReason, cookie} of associatedCookies) {\n      if (blockedReasons.length === 0) {\n        includedRequestCookies.push({exemptionReason, cookie: Cookie.fromProtocolCookie(cookie)});\n      } else {\n        blockedRequestCookies.push({blockedReasons, cookie: Cookie.fromProtocolCookie(cookie)});\n      }\n    }\n    const extraRequestInfo = {\n      blockedRequestCookies,\n      includedRequestCookies,\n      requestHeaders: this.headersMapToHeadersArray(headers),\n      clientSecurityState,\n      connectTiming,\n      siteHasCookieInOtherPartition,\n      appliedNetworkConditionsId,\n    };\n    this.getExtraInfoBuilder(requestId).addRequestExtraInfo(extraRequestInfo);\n\n    const networkRequest = this.#requestsById.get(requestId);\n    if (appliedNetworkConditionsId && networkRequest) {\n      networkRequest.setAppliedNetworkConditions(appliedNetworkConditionsId);\n      this.updateNetworkRequest(networkRequest);\n    }\n  }\n\n  responseReceivedEarlyHints({\n    requestId,\n    headers,\n  }: Protocol.Network.ResponseReceivedEarlyHintsEvent): void {\n    this.getExtraInfoBuilder(requestId).setEarlyHintsHeaders(this.headersMapToHeadersArray(headers));\n  }\n\n  responseReceivedExtraInfo({\n    requestId,\n    blockedCookies,\n    headers,\n    headersText,\n    resourceIPAddressSpace,\n    statusCode,\n    cookiePartitionKey,\n    cookiePartitionKeyOpaque,\n    exemptedCookies,\n  }: Protocol.Network.ResponseReceivedExtraInfoEvent): void {\n    const extraResponseInfo: ExtraResponseInfo = {\n      blockedResponseCookies:\n          blockedCookies.map(blockedCookie => ({\n                               blockedReasons: blockedCookie.blockedReasons,\n                               cookieLine: blockedCookie.cookieLine,\n                               cookie: blockedCookie.cookie ? Cookie.fromProtocolCookie(blockedCookie.cookie) : null,\n                             })),\n      responseHeaders: this.headersMapToHeadersArray(headers),\n      responseHeadersText: headersText,\n      resourceIPAddressSpace,\n      statusCode,\n      cookiePartitionKey,\n      cookiePartitionKeyOpaque,\n      exemptedResponseCookies: exemptedCookies?.map(exemptedCookie => ({\n                                                      cookie: Cookie.fromProtocolCookie(exemptedCookie.cookie),\n                                                      cookieLine: exemptedCookie.cookieLine,\n                                                      exemptionReason: exemptedCookie.exemptionReason,\n                                                    })),\n    };\n    this.getExtraInfoBuilder(requestId).addResponseExtraInfo(extraResponseInfo);\n  }\n\n  private getExtraInfoBuilder(requestId: string): ExtraInfoBuilder {\n    let builder: ExtraInfoBuilder;\n    if (!this.#requestIdToExtraInfoBuilder.has(requestId)) {\n      builder = new ExtraInfoBuilder();\n      this.#requestIdToExtraInfoBuilder.set(requestId, builder);\n    } else {\n      builder = (this.#requestIdToExtraInfoBuilder.get(requestId) as ExtraInfoBuilder);\n    }\n    return builder;\n  }\n\n  private appendRedirect(\n      requestId: Protocol.Network.RequestId, time: number,\n      redirectURL: Platform.DevToolsPath.UrlString): NetworkRequest {\n    const originalNetworkRequest = this.#requestsById.get(requestId);\n    if (!originalNetworkRequest) {\n      throw new Error(`Could not find original network request for ${requestId}`);\n    }\n    let redirectCount = 0;\n    for (let redirect = originalNetworkRequest.redirectSource(); redirect; redirect = redirect.redirectSource()) {\n      redirectCount++;\n    }\n\n    originalNetworkRequest.markAsRedirect(redirectCount);\n    this.finishNetworkRequest(originalNetworkRequest, time, -1);\n    const newNetworkRequest = NetworkRequest.create(\n        requestId, redirectURL, originalNetworkRequest.documentURL, originalNetworkRequest.frameId,\n        originalNetworkRequest.loaderId, originalNetworkRequest.initiator(),\n        originalNetworkRequest.hasUserGesture() ?? undefined);\n    requestToManagerMap.set(newNetworkRequest, this.#manager);\n    newNetworkRequest.setRedirectSource(originalNetworkRequest);\n    originalNetworkRequest.setRedirectDestination(newNetworkRequest);\n    return newNetworkRequest;\n  }\n\n  private maybeAdoptMainResourceRequest(requestId: string): NetworkRequest|null {\n    const request = MultitargetNetworkManager.instance().inflightMainResourceRequests.get(requestId);\n    if (!request) {\n      return null;\n    }\n    const oldDispatcher = (NetworkManager.forRequest(request) as NetworkManager).dispatcher;\n    oldDispatcher.#requestsById.delete(requestId);\n    oldDispatcher.#requestsByURL.delete(request.url());\n    const loaderId = request.loaderId;\n    if (loaderId) {\n      oldDispatcher.#requestsByLoaderId.delete(loaderId);\n    }\n    const builder = oldDispatcher.#requestIdToExtraInfoBuilder.get(requestId);\n    oldDispatcher.#requestIdToExtraInfoBuilder.delete(requestId);\n    this.#requestsById.set(requestId, request);\n    this.#requestsByURL.set(request.url(), request);\n    if (loaderId) {\n      this.#requestsByLoaderId.set(loaderId, request);\n    }\n    if (builder) {\n      this.#requestIdToExtraInfoBuilder.set(requestId, builder);\n    }\n    requestToManagerMap.set(request, this.#manager);\n    return request;\n  }\n\n  private startNetworkRequest(networkRequest: NetworkRequest, originalRequest: Protocol.Network.Request|null): void {\n    this.#requestsById.set(networkRequest.requestId(), networkRequest);\n    this.#requestsByURL.set(networkRequest.url(), networkRequest);\n    const loaderId = networkRequest.loaderId;\n    if (loaderId) {\n      this.#requestsByLoaderId.set(loaderId, networkRequest);\n    }\n    // The following relies on the fact that loaderIds and requestIds\n    // are globally unique and that the main request has them equal. If\n    // loaderId is an empty string, it indicates a worker request. For the\n    // request to fetch the main worker script, the request ID is the future\n    // worker target ID and, therefore, it is unique.\n    if (networkRequest.loaderId === networkRequest.requestId() || networkRequest.loaderId === '') {\n      MultitargetNetworkManager.instance().inflightMainResourceRequests.set(networkRequest.requestId(), networkRequest);\n    }\n\n    this.#manager.dispatchEventToListeners(Events.RequestStarted, {request: networkRequest, originalRequest});\n  }\n\n  private updateNetworkRequest(networkRequest: NetworkRequest): void {\n    this.#manager.dispatchEventToListeners(Events.RequestUpdated, networkRequest);\n  }\n\n  private finishNetworkRequest(\n      networkRequest: NetworkRequest,\n      finishTime: number,\n      encodedDataLength: number,\n      ): void {\n    networkRequest.endTime = finishTime;\n    networkRequest.finished = true;\n    if (encodedDataLength >= 0) {\n      const redirectSource = networkRequest.redirectSource();\n      if (redirectSource?.signedExchangeInfo()) {\n        networkRequest.setTransferSize(0);\n        redirectSource.setTransferSize(encodedDataLength);\n        this.updateNetworkRequest(redirectSource);\n      } else {\n        networkRequest.setTransferSize(encodedDataLength);\n      }\n    }\n    this.#manager.dispatchEventToListeners(Events.RequestFinished, networkRequest);\n    MultitargetNetworkManager.instance().inflightMainResourceRequests.delete(networkRequest.requestId());\n\n    if (Common.Settings.Settings.instance().moduleSetting('monitoring-xhr-enabled').get() &&\n        networkRequest.resourceType().category() === Common.ResourceType.resourceCategories.XHR) {\n      let message;\n      const failedToLoad = networkRequest.failed || networkRequest.hasErrorStatusCode();\n      if (failedToLoad) {\n        message = i18nString(\n            UIStrings.sFailedLoadingSS,\n            {PH1: networkRequest.resourceType().title(), PH2: networkRequest.requestMethod, PH3: networkRequest.url()});\n      } else {\n        message = i18nString(\n            UIStrings.sFinishedLoadingSS,\n            {PH1: networkRequest.resourceType().title(), PH2: networkRequest.requestMethod, PH3: networkRequest.url()});\n      }\n\n      this.#manager.dispatchEventToListeners(\n          Events.MessageGenerated, {message, requestId: networkRequest.requestId(), warning: false});\n    }\n  }\n\n  clearRequests(): void {\n    for (const [requestId, request] of this.#requestsById) {\n      if (request.finished) {\n        this.#requestsById.delete(requestId);\n      }\n    }\n    for (const [requestURL, request] of this.#requestsByURL) {\n      if (request.finished) {\n        this.#requestsByURL.delete(requestURL);\n      }\n    }\n    for (const [requestLoaderId, request] of this.#requestsByLoaderId) {\n      if (request.finished) {\n        this.#requestsByLoaderId.delete(requestLoaderId);\n      }\n    }\n    for (const [requestId, builder] of this.#requestIdToExtraInfoBuilder) {\n      if (builder.isFinished()) {\n        this.#requestIdToExtraInfoBuilder.delete(requestId);\n      }\n    }\n  }\n\n  webTransportCreated({transportId, url: requestURL, timestamp: time, initiator}:\n                          Protocol.Network.WebTransportCreatedEvent): void {\n    const networkRequest =\n        NetworkRequest.createForSocket(transportId, requestURL as Platform.DevToolsPath.UrlString, initiator);\n    networkRequest.hasNetworkData = true;\n    requestToManagerMap.set(networkRequest, this.#manager);\n    networkRequest.setResourceType(Common.ResourceType.resourceTypes.WebTransport);\n    networkRequest.setIssueTime(time, 0);\n    // TODO(yoichio): Add appropreate events to address abort cases.\n    this.startNetworkRequest(networkRequest, null);\n  }\n\n  webTransportConnectionEstablished({transportId, timestamp: time}:\n                                        Protocol.Network.WebTransportConnectionEstablishedEvent): void {\n    const networkRequest = this.#requestsById.get(transportId);\n    if (!networkRequest) {\n      return;\n    }\n\n    // This dummy deltas are needed to show this request as being\n    // downloaded(blue) given typical WebTransport is kept for a while.\n    // TODO(yoichio): Add appropreate events to fix these dummy datas.\n    // DNS lookup?\n    networkRequest.responseReceivedTime = time;\n    networkRequest.endTime = time + 0.001;\n    this.updateNetworkRequest(networkRequest);\n  }\n\n  webTransportClosed({transportId, timestamp: time}: Protocol.Network.WebTransportClosedEvent): void {\n    const networkRequest = this.#requestsById.get(transportId);\n    if (!networkRequest) {\n      return;\n    }\n\n    networkRequest.endTime = time;\n    this.finishNetworkRequest(networkRequest, time, 0);\n  }\n\n  directTCPSocketCreated(event: Protocol.Network.DirectTCPSocketCreatedEvent): void {\n    const requestURL = this.concatHostPort(event.remoteAddr, event.remotePort);\n    const networkRequest = NetworkRequest.createForSocket(\n        event.identifier, requestURL as Platform.DevToolsPath.UrlString, event.initiator);\n    networkRequest.hasNetworkData = true;\n    networkRequest.setRemoteAddress(event.remoteAddr, event.remotePort);\n    networkRequest.protocol = i18n.i18n.lockedString('tcp');\n\n    networkRequest.statusText = i18nString(UIStrings.directSocketStatusOpening);\n    networkRequest.directSocketInfo = {\n      type: DirectSocketType.TCP,\n      status: DirectSocketStatus.OPENING,\n      createOptions: {\n        remoteAddr: event.remoteAddr,\n        remotePort: event.remotePort,\n        noDelay: event.options.noDelay,\n        keepAliveDelay: event.options.keepAliveDelay,\n        sendBufferSize: event.options.sendBufferSize,\n        receiveBufferSize: event.options.receiveBufferSize,\n        dnsQueryType: event.options.dnsQueryType,\n      }\n    };\n    networkRequest.setResourceType(Common.ResourceType.resourceTypes.DirectSocket);\n    networkRequest.setIssueTime(event.timestamp, event.timestamp);\n\n    requestToManagerMap.set(networkRequest, this.#manager);\n    this.startNetworkRequest(networkRequest, null);\n  }\n\n  directTCPSocketOpened(event: Protocol.Network.DirectTCPSocketOpenedEvent): void {\n    const networkRequest = this.#requestsById.get(event.identifier);\n    if (!networkRequest?.directSocketInfo) {\n      return;\n    }\n    networkRequest.responseReceivedTime = event.timestamp;\n    networkRequest.directSocketInfo.status = DirectSocketStatus.OPEN;\n    networkRequest.statusText = i18nString(UIStrings.directSocketStatusOpen);\n    networkRequest.directSocketInfo.openInfo = {\n      remoteAddr: event.remoteAddr,\n      remotePort: event.remotePort,\n      localAddr: event.localAddr,\n      localPort: event.localPort,\n    };\n    networkRequest.setRemoteAddress(event.remoteAddr, event.remotePort);\n    const requestURL = this.concatHostPort(event.remoteAddr, event.remotePort);\n    networkRequest.setUrl(requestURL as Platform.DevToolsPath.UrlString);\n    this.updateNetworkRequest(networkRequest);\n  }\n\n  directTCPSocketAborted(event: Protocol.Network.DirectTCPSocketAbortedEvent): void {\n    const networkRequest = this.#requestsById.get(event.identifier);\n    if (!networkRequest?.directSocketInfo) {\n      return;\n    }\n    networkRequest.failed = true;\n    networkRequest.directSocketInfo.status = DirectSocketStatus.ABORTED;\n    networkRequest.statusText = i18nString(UIStrings.directSocketStatusAborted);\n    networkRequest.directSocketInfo.errorMessage = event.errorMessage;\n    this.finishNetworkRequest(networkRequest, event.timestamp, 0);\n  }\n\n  directTCPSocketClosed(event: Protocol.Network.DirectTCPSocketClosedEvent): void {\n    const networkRequest = this.#requestsById.get(event.identifier);\n    if (!networkRequest?.directSocketInfo) {\n      return;\n    }\n    networkRequest.statusText = i18nString(UIStrings.directSocketStatusClosed);\n    networkRequest.directSocketInfo.status = DirectSocketStatus.CLOSED;\n    this.finishNetworkRequest(networkRequest, event.timestamp, 0);\n  }\n\n  directTCPSocketChunkSent(event: Protocol.Network.DirectTCPSocketChunkSentEvent): void {\n    const networkRequest = this.#requestsById.get(event.identifier);\n    if (!networkRequest) {\n      return;\n    }\n\n    networkRequest.addDirectSocketChunk({\n      data: event.data,\n      type: DirectSocketChunkType.SEND,\n      timestamp: event.timestamp,\n    });\n    networkRequest.responseReceivedTime = event.timestamp;\n\n    this.updateNetworkRequest(networkRequest);\n  }\n\n  directTCPSocketChunkReceived(event: Protocol.Network.DirectTCPSocketChunkReceivedEvent): void {\n    const networkRequest = this.#requestsById.get(event.identifier);\n    if (!networkRequest) {\n      return;\n    }\n\n    networkRequest.addDirectSocketChunk({\n      data: event.data,\n      type: DirectSocketChunkType.RECEIVE,\n      timestamp: event.timestamp,\n    });\n    networkRequest.responseReceivedTime = event.timestamp;\n\n    this.updateNetworkRequest(networkRequest);\n  }\n\n  directUDPSocketCreated(event: Protocol.Network.DirectUDPSocketCreatedEvent): void {\n    let requestURL = '';\n    let type: DirectSocketType;\n    if (event.options.remoteAddr && event.options.remotePort) {\n      requestURL = this.concatHostPort(event.options.remoteAddr, event.options.remotePort);\n      type = DirectSocketType.UDP_CONNECTED;\n    } else if (event.options.localAddr) {\n      requestURL = this.concatHostPort(event.options.localAddr, event.options.localPort);\n      type = DirectSocketType.UDP_BOUND;\n    } else {\n      // Must be present in a valid command if remoteAddr\n      // is not specified.\n      return;\n    }\n    const networkRequest = NetworkRequest.createForSocket(\n        event.identifier, requestURL as Platform.DevToolsPath.UrlString, event.initiator);\n    networkRequest.hasNetworkData = true;\n    if (event.options.remoteAddr && event.options.remotePort) {\n      networkRequest.setRemoteAddress(event.options.remoteAddr, event.options.remotePort);\n    }\n    networkRequest.protocol = i18n.i18n.lockedString('udp');\n\n    networkRequest.statusText = i18nString(UIStrings.directSocketStatusOpening);\n    networkRequest.directSocketInfo = {\n      type,\n      status: DirectSocketStatus.OPENING,\n      createOptions: {\n        remoteAddr: event.options.remoteAddr,\n        remotePort: event.options.remotePort,\n        localAddr: event.options.localAddr,\n        localPort: event.options.localPort,\n        sendBufferSize: event.options.sendBufferSize,\n        receiveBufferSize: event.options.receiveBufferSize,\n        dnsQueryType: event.options.dnsQueryType,\n        multicastLoopback: event.options.multicastLoopback,\n        multicastTimeToLive: event.options.multicastTimeToLive,\n        multicastAllowAddressSharing: event.options.multicastAllowAddressSharing,\n      },\n      joinedMulticastGroups: new Set(),\n    };\n    networkRequest.setResourceType(Common.ResourceType.resourceTypes.DirectSocket);\n    networkRequest.setIssueTime(event.timestamp, event.timestamp);\n\n    requestToManagerMap.set(networkRequest, this.#manager);\n    this.startNetworkRequest(networkRequest, null);\n  }\n\n  directUDPSocketOpened(event: Protocol.Network.DirectUDPSocketOpenedEvent): void {\n    const networkRequest = this.#requestsById.get(event.identifier);\n    if (!networkRequest?.directSocketInfo) {\n      return;\n    }\n    let requestURL: string;\n    if (networkRequest.directSocketInfo.type === DirectSocketType.UDP_CONNECTED) {\n      if (!event.remoteAddr || !event.remotePort) {\n        // Connected socket must have remoteAdd and remotePort.\n        return;\n      }\n      networkRequest.setRemoteAddress(event.remoteAddr, event.remotePort);\n      requestURL = this.concatHostPort(event.remoteAddr, event.remotePort);\n    } else {\n      requestURL = this.concatHostPort(event.localAddr, event.localPort);\n    }\n\n    networkRequest.setUrl(requestURL as Platform.DevToolsPath.UrlString);\n    networkRequest.responseReceivedTime = event.timestamp;\n    networkRequest.directSocketInfo.status = DirectSocketStatus.OPEN;\n    networkRequest.statusText = i18nString(UIStrings.directSocketStatusOpen);\n    networkRequest.directSocketInfo.openInfo = {\n      remoteAddr: event.remoteAddr,\n      remotePort: event.remotePort,\n      localAddr: event.localAddr,\n      localPort: event.localPort,\n    };\n\n    this.updateNetworkRequest(networkRequest);\n  }\n\n  directUDPSocketAborted(event: Protocol.Network.DirectUDPSocketAbortedEvent): void {\n    const networkRequest = this.#requestsById.get(event.identifier);\n    if (!networkRequest?.directSocketInfo) {\n      return;\n    }\n    networkRequest.failed = true;\n    networkRequest.directSocketInfo.status = DirectSocketStatus.ABORTED;\n    networkRequest.statusText = i18nString(UIStrings.directSocketStatusAborted);\n    networkRequest.directSocketInfo.errorMessage = event.errorMessage;\n    this.finishNetworkRequest(networkRequest, event.timestamp, 0);\n  }\n\n  directUDPSocketClosed(event: Protocol.Network.DirectUDPSocketClosedEvent): void {\n    const networkRequest = this.#requestsById.get(event.identifier);\n    if (!networkRequest?.directSocketInfo) {\n      return;\n    }\n    networkRequest.statusText = i18nString(UIStrings.directSocketStatusClosed);\n    networkRequest.directSocketInfo.status = DirectSocketStatus.CLOSED;\n    this.finishNetworkRequest(networkRequest, event.timestamp, 0);\n  }\n\n  directUDPSocketChunkSent(event: Protocol.Network.DirectUDPSocketChunkSentEvent): void {\n    const networkRequest = this.#requestsById.get(event.identifier);\n    if (!networkRequest) {\n      return;\n    }\n\n    networkRequest.addDirectSocketChunk({\n      data: event.message.data,\n      type: DirectSocketChunkType.SEND,\n      timestamp: event.timestamp,\n      remoteAddress: event.message.remoteAddr,\n      remotePort: event.message.remotePort\n    });\n    networkRequest.responseReceivedTime = event.timestamp;\n\n    this.updateNetworkRequest(networkRequest);\n  }\n\n  directUDPSocketChunkReceived(event: Protocol.Network.DirectUDPSocketChunkReceivedEvent): void {\n    const networkRequest = this.#requestsById.get(event.identifier);\n    if (!networkRequest) {\n      return;\n    }\n\n    networkRequest.addDirectSocketChunk({\n      data: event.message.data,\n      type: DirectSocketChunkType.RECEIVE,\n      timestamp: event.timestamp,\n      remoteAddress: event.message.remoteAddr,\n      remotePort: event.message.remotePort\n    });\n    networkRequest.responseReceivedTime = event.timestamp;\n\n    this.updateNetworkRequest(networkRequest);\n  }\n\n  directUDPSocketJoinedMulticastGroup(event: Protocol.Network.DirectUDPSocketJoinedMulticastGroupEvent): void {\n    const networkRequest = this.#requestsById.get(event.identifier);\n    if (!networkRequest?.directSocketInfo) {\n      return;\n    }\n    if (!networkRequest.directSocketInfo.joinedMulticastGroups) {\n      networkRequest.directSocketInfo.joinedMulticastGroups = new Set();\n    }\n    if (!networkRequest.directSocketInfo.joinedMulticastGroups.has(event.IPAddress)) {\n      networkRequest.directSocketInfo.joinedMulticastGroups.add(event.IPAddress);\n      this.updateNetworkRequest(networkRequest);\n    }\n  }\n\n  directUDPSocketLeftMulticastGroup(event: Protocol.Network.DirectUDPSocketLeftMulticastGroupEvent): void {\n    const networkRequest = this.#requestsById.get(event.identifier);\n    if (!networkRequest?.directSocketInfo?.joinedMulticastGroups) {\n      return;\n    }\n    if (networkRequest.directSocketInfo.joinedMulticastGroups.delete(event.IPAddress)) {\n      this.updateNetworkRequest(networkRequest);\n    }\n  }\n\n  trustTokenOperationDone(event: Protocol.Network.TrustTokenOperationDoneEvent): void {\n    const request = this.#requestsById.get(event.requestId);\n    if (!request) {\n      this.#requestIdToTrustTokenEvent.set(event.requestId, event);\n      return;\n    }\n    request.setTrustTokenOperationDoneEvent(event);\n  }\n\n  reportingApiReportAdded(data: Protocol.Network.ReportingApiReportAddedEvent): void {\n    this.#manager.dispatchEventToListeners(Events.ReportingApiReportAdded, data.report);\n  }\n\n  reportingApiReportUpdated(data: Protocol.Network.ReportingApiReportUpdatedEvent): void {\n    this.#manager.dispatchEventToListeners(Events.ReportingApiReportUpdated, data.report);\n  }\n\n  reportingApiEndpointsChangedForOrigin(data: Protocol.Network.ReportingApiEndpointsChangedForOriginEvent): void {\n    this.#manager.dispatchEventToListeners(Events.ReportingApiEndpointsChangedForOrigin, data);\n  }\n\n  policyUpdated(): void {\n  }\n\n  /**\n   * @deprecated\n   * This method is only kept for usage in a web test.\n   */\n  protected createNetworkRequest(\n      requestId: Protocol.Network.RequestId, frameId: Protocol.Page.FrameId, loaderId: Protocol.Network.LoaderId,\n      url: string, documentURL: string, initiator: Protocol.Network.Initiator|null): NetworkRequest {\n    const request = NetworkRequest.create(\n        requestId, url as Platform.DevToolsPath.UrlString, documentURL as Platform.DevToolsPath.UrlString, frameId,\n        loaderId, initiator);\n    requestToManagerMap.set(request, this.#manager);\n    return request;\n  }\n\n  private concatHostPort(host: string, port?: number): string {\n    if (!port || port === 0) {\n      return host;\n    }\n    return `${host}:${port}`;\n  }\n}\n\nexport type RequestConditionsSetting = {\n  url: string,\n  enabled: boolean,\n}|{\n  urlPattern: URLPatternConstructorString,\n  conditions: ThrottlingConditionKey,\n  enabled: boolean,\n};\n\nexport type URLPatternConstructorString = Platform.Brand.Brand<string, 'URLPatternConstructorString'>;\n\nexport const enum RequestURLPatternValidity {\n  VALID = 'valid',\n  FAILED_TO_PARSE = 'failed-to-parse',\n  HAS_REGEXP_GROUPS = 'has-regexp-groups',\n}\n\nexport class RequestURLPattern {\n  private constructor(readonly constructorString: URLPatternConstructorString, readonly pattern: URLPattern) {\n    if (pattern.hasRegExpGroups) {\n      throw new Error('RegExp groups are not allowed');\n    }\n  }\n\n  static isValidPattern(pattern: string): RequestURLPatternValidity {\n    try {\n      const urlPattern = new URLPattern(pattern);\n      return urlPattern.hasRegExpGroups ? RequestURLPatternValidity.HAS_REGEXP_GROUPS : RequestURLPatternValidity.VALID;\n    } catch {\n      return RequestURLPatternValidity.FAILED_TO_PARSE;\n    }\n  }\n\n  static create(constructorString: URLPatternConstructorString): RequestURLPattern|null {\n    try {\n      const urlPattern = new URLPattern(constructorString);\n      return urlPattern.hasRegExpGroups ? null : new RequestURLPattern(constructorString, urlPattern);\n    } catch {\n      return null;\n    }\n  }\n\n  static upgradeFromWildcard(pattern: string): RequestURLPattern|null {\n    const tryCreate = (constructorString: string): RequestURLPattern|null => {\n      const result = this.create(constructorString as URLPatternConstructorString);\n      if (result?.pattern.protocol === 'localhost' && result?.pattern.hostname === '') {\n        // localhost:1234 parses as a valid pattern, do the right thing here instead\n        return tryCreate(`*://${constructorString}`);\n      }\n      return result;\n    };\n\n    return tryCreate(pattern)  // try as is\n        ??\n        // Try to upgrade patterns created from the network panel, which either blocks the full url (sans\n        // protocol) or just the domain name. In both cases the wildcard patterns had implicit wildcards at the end.\n        // We explicitly add that here, which will match both domain names without path (implicitly setting pathname\n        // to '*') and urls with path (appending * to the pathname).\n        tryCreate(`*://${pattern}*`);\n  }\n}\n\nexport class RequestCondition extends Common.ObjectWrapper.ObjectWrapper<RequestCondition.EventTypes> {\n  #pattern: RequestURLPattern|{wildcardURL: string, upgradedPattern?: RequestURLPattern};\n  #enabled: boolean;\n  #conditions: ThrottlingConditions;\n  #ruleIds = new Set<string>();\n\n  static createFromSetting(setting: RequestConditionsSetting): RequestCondition {\n    if ('urlPattern' in setting) {\n      const pattern = RequestURLPattern.create(setting.urlPattern) ?? {\n        wildcardURL: setting.urlPattern,\n        upgradedPattern: RequestURLPattern.upgradeFromWildcard(setting.urlPattern) ?? undefined,\n      };\n\n      const conditions = getPredefinedOrBlockingCondition(setting.conditions) ??\n          customUserNetworkConditionsSetting().get().find(condition => condition.key === setting.conditions) ??\n          NoThrottlingConditions;\n\n      return new this(pattern, setting.enabled, conditions);\n    }\n\n    const pattern = {\n      wildcardURL: setting.url,\n      upgradedPattern: RequestURLPattern.upgradeFromWildcard(setting.url) ?? undefined\n    };\n    return new this(pattern, setting.enabled, BlockingConditions);\n  }\n\n  static create(pattern: RequestURLPattern, conditions: ThrottlingConditions): RequestCondition {\n    return new this(pattern, /* enabled=*/ true, conditions);\n  }\n\n  private constructor(\n      pattern: RequestURLPattern|{wildcardURL: string, upgradedPattern?: RequestURLPattern}, enabled: boolean,\n      conditions: ThrottlingConditions) {\n    super();\n    this.#pattern = pattern;\n    this.#enabled = enabled;\n    this.#conditions = conditions;\n  }\n\n  get isBlocking(): boolean {\n    return this.conditions === BlockingConditions;\n  }\n\n  get ruleIds(): Set<string> {\n    return this.#ruleIds;\n  }\n\n  get constructorString(): string|undefined {\n    return this.#pattern instanceof RequestURLPattern ? this.#pattern.constructorString :\n                                                        this.#pattern.upgradedPattern?.constructorString;\n  }\n\n  get wildcardURL(): string|undefined {\n    return 'wildcardURL' in this.#pattern ? this.#pattern.wildcardURL : undefined;\n  }\n\n  get constructorStringOrWildcardURL(): string {\n    return this.#pattern instanceof RequestURLPattern ?\n        this.#pattern.constructorString :\n        (this.#pattern.upgradedPattern?.constructorString ?? this.#pattern.wildcardURL);\n  }\n\n  set pattern(pattern: RequestURLPattern|string) {\n    if (typeof pattern === 'string') {\n      // TODO(pfaffe) Remove once the feature flag is no longer required\n      if (Root.Runtime.hostConfig.devToolsIndividualRequestThrottling?.enabled) {\n        throw new Error('Should not use wildcard urls');\n      }\n      this.#pattern = {\n        wildcardURL: pattern,\n        upgradedPattern: RequestURLPattern.upgradeFromWildcard(pattern) ?? undefined\n      };\n    } else {\n      this.#pattern = pattern;\n    }\n    this.dispatchEventToListeners(RequestCondition.Events.REQUEST_CONDITION_CHANGED);\n  }\n\n  get enabled(): boolean {\n    return this.#enabled;\n  }\n\n  set enabled(enabled: boolean) {\n    this.#enabled = enabled;\n    this.dispatchEventToListeners(RequestCondition.Events.REQUEST_CONDITION_CHANGED);\n  }\n\n  get conditions(): ThrottlingConditions {\n    return this.#conditions;\n  }\n\n  set conditions(conditions: ThrottlingConditions) {\n    this.#conditions = conditions;\n    this.#ruleIds = new Set();\n    this.dispatchEventToListeners(RequestCondition.Events.REQUEST_CONDITION_CHANGED);\n  }\n\n  toSetting(): RequestConditionsSetting {\n    const enabled = this.enabled;\n    if (this.#pattern instanceof RequestURLPattern) {\n      return {enabled, urlPattern: this.#pattern.constructorString, conditions: this.#conditions.key};\n    }\n    if (this.#conditions !== BlockingConditions && this.#pattern.upgradedPattern) {\n      return {enabled, urlPattern: this.#pattern.upgradedPattern.constructorString, conditions: this.#conditions.key};\n    }\n    return {enabled, url: this.#pattern.wildcardURL};\n  }\n\n  get originalOrUpgradedURLPattern(): URLPattern|undefined {\n    return this.#pattern instanceof RequestURLPattern ? this.#pattern.pattern : this.#pattern.upgradedPattern?.pattern;\n  }\n}\n\nexport namespace RequestCondition {\n  export const enum Events {\n    REQUEST_CONDITION_CHANGED = 'request-condition-changed',\n  }\n\n  export interface EventTypes {\n    [Events.REQUEST_CONDITION_CHANGED]: void;\n  }\n}\n\nexport class RequestConditions extends Common.ObjectWrapper.ObjectWrapper<RequestConditions.EventTypes> {\n  readonly #setting =\n      Common.Settings.Settings.instance().createSetting<RequestConditionsSetting[]>('network-blocked-patterns', []);\n  readonly #conditionsEnabledSetting =\n      Common.Settings.Settings.instance().moduleSetting<boolean>('request-blocking-enabled');\n  readonly #conditions: RequestCondition[] = [];\n  readonly #requestConditionsById = new Map<string, {\n    conditions: Conditions,\n    urlPattern?: string,\n  }>();\n  #conditionsAppliedForTestPromise: Promise<unknown> = Promise.resolve();\n\n  constructor() {\n    super();\n    for (const condition of this.#setting.get()) {\n      try {\n        this.#conditions.push(RequestCondition.createFromSetting(condition));\n      } catch (e) {\n        console.error('Error loading throttling settings: ', e);\n      }\n    }\n    for (const condition of this.#conditions) {\n      condition.addEventListener(RequestCondition.Events.REQUEST_CONDITION_CHANGED, this.#conditionsChanged, this);\n    }\n    this.#conditionsEnabledSetting.addChangeListener(\n        () => this.dispatchEventToListeners(RequestConditions.Events.REQUEST_CONDITIONS_CHANGED));\n  }\n\n  get count(): number {\n    return this.#conditions.length;\n  }\n\n  get conditionsEnabled(): boolean {\n    return this.#conditionsEnabledSetting.get();\n  }\n\n  set conditionsEnabled(enabled: boolean) {\n    if (this.#conditionsEnabledSetting.get() === enabled) {\n      return;\n    }\n    this.#conditionsEnabledSetting.set(enabled);\n  }\n\n  findCondition(pattern: string): RequestCondition|undefined {\n    if (Root.Runtime.hostConfig.devToolsIndividualRequestThrottling?.enabled) {\n      return this.#conditions.find(condition => condition.constructorString === pattern);\n    }\n    return this.#conditions.find(condition => condition.wildcardURL === pattern);\n  }\n\n  has(url: string): boolean {\n    return Boolean(this.findCondition(url));\n  }\n\n  add(...conditions: RequestCondition[]): void {\n    this.#conditions.push(...conditions);\n    for (const condition of conditions) {\n      condition.addEventListener(RequestCondition.Events.REQUEST_CONDITION_CHANGED, this.#conditionsChanged, this);\n    }\n    this.#conditionsChanged();\n  }\n\n  decreasePriority(condition: RequestCondition): void {\n    const index = this.#conditions.indexOf(condition);\n    if (index < 0 || index >= this.#conditions.length - 1) {\n      return;\n    }\n\n    Platform.ArrayUtilities.swap(this.#conditions, index, index + 1);\n    this.#conditionsChanged();\n  }\n\n  increasePriority(condition: RequestCondition): void {\n    const index = this.#conditions.indexOf(condition);\n    if (index <= 0) {\n      return;\n    }\n\n    Platform.ArrayUtilities.swap(this.#conditions, index - 1, index);\n    this.#conditionsChanged();\n  }\n\n  delete(condition: RequestCondition): void {\n    const index = this.#conditions.indexOf(condition);\n    if (index < 0) {\n      return;\n    }\n    condition.removeEventListener(RequestCondition.Events.REQUEST_CONDITION_CHANGED, this.#conditionsChanged, this);\n    this.#conditions.splice(index, 1);\n    this.#conditionsChanged();\n  }\n\n  clear(): void {\n    this.#conditions.splice(0);\n    this.#conditionsChanged();\n    for (const condition of this.#conditions) {\n      condition.removeEventListener(RequestCondition.Events.REQUEST_CONDITION_CHANGED, this.#conditionsChanged, this);\n    }\n  }\n\n  #conditionsChanged(): void {\n    this.#setting.set(this.#conditions.map(condition => condition.toSetting()));\n    this.dispatchEventToListeners(RequestConditions.Events.REQUEST_CONDITIONS_CHANGED);\n  }\n\n  get conditions(): IteratorObject<RequestCondition> {\n    return this.#conditions.values();\n  }\n\n  applyConditions(offline: boolean, globalConditions: Conditions|null, ...agents: ProtocolProxyApi.NetworkApi[]):\n      boolean {\n    function isNonBlockingCondition(condition: ThrottlingConditions): condition is Conditions {\n      return !('block' in condition);\n    }\n    if (Root.Runtime.hostConfig.devToolsIndividualRequestThrottling?.enabled) {\n      const urlPatterns: Protocol.Network.BlockPattern[] = [];\n      // We store all this info out-of-band to prevent races with changing conditions while the promise is still pending\n      const matchedNetworkConditions: Array<{conditions: Conditions, ruleIds?: Set<string>, urlPattern?: string}> = [];\n      if (this.conditionsEnabled) {\n        for (const condition of this.#conditions) {\n          const urlPattern = condition.constructorString;\n          const conditions = condition.conditions;\n          if (!condition.enabled || !urlPattern || conditions === NoThrottlingConditions) {\n            continue;\n          }\n          const block = !isNonBlockingCondition(conditions);\n          urlPatterns.push({urlPattern, block});\n          if (!block) {\n            const {ruleIds} = condition;\n            matchedNetworkConditions.push({ruleIds, urlPattern, conditions});\n          }\n        }\n\n        if (globalConditions) {\n          matchedNetworkConditions.push({conditions: globalConditions});\n        }\n      }\n\n      const promises: Array<Promise<unknown>> = [];\n\n      for (const agent of agents) {\n        promises.push(agent.invoke_setBlockedURLs({urlPatterns}));\n        promises.push(agent\n                          .invoke_emulateNetworkConditionsByRule({\n                            offline,\n                            matchedNetworkConditions: matchedNetworkConditions.map(\n                                ({urlPattern, conditions}) => ({\n                                  urlPattern: urlPattern ?? '',\n                                  latency: conditions.latency,\n                                  downloadThroughput: conditions.download < 0 ? 0 : conditions.download,\n                                  uploadThroughput: conditions.upload < 0 ? 0 : conditions.upload,\n                                  packetLoss: (conditions.packetLoss ?? 0) < 0 ? 0 : conditions.packetLoss,\n                                  packetQueueLength: conditions.packetQueueLength,\n                                  packetReordering: conditions.packetReordering,\n                                  connectionType: NetworkManager.connectionType(conditions),\n                                }))\n                          })\n                          .then(response => {\n                            if (!response.getError()) {\n                              for (let i = 0; i < response.ruleIds.length; ++i) {\n                                const ruleId = response.ruleIds[i];\n                                const {ruleIds, conditions, urlPattern} = matchedNetworkConditions[i];\n                                if (ruleIds) {\n                                  this.#requestConditionsById.set(ruleId, {urlPattern, conditions});\n                                  matchedNetworkConditions[i].ruleIds?.add(ruleId);\n                                }\n                              }\n                            }\n                          }));\n        promises.push(agent.invoke_overrideNetworkState({\n          offline,\n          latency: globalConditions?.latency ?? 0,\n          downloadThroughput: globalConditions?.download ?? -1,\n          uploadThroughput: globalConditions?.upload ?? -1,\n          connectionType: globalConditions ? NetworkManager.connectionType(globalConditions) :\n                                             Protocol.Network.ConnectionType.None,\n        }));\n      }\n\n      this.#conditionsAppliedForTestPromise = this.#conditionsAppliedForTestPromise.then(() => Promise.all(promises));\n      return urlPatterns.length > 0;\n    }\n\n    const urls = this.conditionsEnabled ?\n        this.#conditions.filter(condition => condition.enabled && condition.wildcardURL)\n            .map(condition => condition.wildcardURL as string) :\n        [];\n\n    for (const agent of agents) {\n      void agent.invoke_setBlockedURLs({urls});\n    }\n    return urls.length > 0;\n  }\n\n  conditionsAppliedForTest(): Promise<unknown> {\n    return this.#conditionsAppliedForTestPromise;\n  }\n\n  conditionsForId(appliedNetworkConditionsId: string): AppliedNetworkConditions|undefined {\n    const requestConditions = this.#requestConditionsById.get(appliedNetworkConditionsId);\n    if (!requestConditions) {\n      return undefined;\n    }\n    const {conditions, urlPattern} = requestConditions;\n    return new AppliedNetworkConditions(conditions, appliedNetworkConditionsId, urlPattern);\n  }\n}\n\nexport namespace RequestConditions {\n  export const enum Events {\n    REQUEST_CONDITIONS_CHANGED = 'request-conditions-changed',\n  }\n  export interface EventTypes {\n    [Events.REQUEST_CONDITIONS_CHANGED]: void;\n  }\n}\n\nexport class AppliedNetworkConditions {\n  constructor(\n      readonly conditions: Conditions, readonly appliedNetworkConditionsId: string, readonly urlPattern?: string) {\n  }\n}\n\nexport class MultitargetNetworkManager extends Common.ObjectWrapper.ObjectWrapper<MultitargetNetworkManager.EventTypes>\n    implements SDKModelObserver<NetworkManager> {\n  readonly #targetManager: TargetManager;\n  #userAgentOverride = '';\n  #userAgentMetadataOverride: Protocol.Emulation.UserAgentMetadata|null = null;\n  #customAcceptedEncodings: Protocol.Network.ContentEncoding[]|null = null;\n  readonly #networkAgents = new Set<ProtocolProxyApi.NetworkApi>();\n  readonly #fetchAgents = new Set<ProtocolProxyApi.FetchApi>();\n  readonly inflightMainResourceRequests = new Map<string, NetworkRequest>();\n  #networkConditions: Conditions = NoThrottlingConditions;\n  #updatingInterceptionPatternsPromise: Promise<void>|null = null;\n  readonly #requestConditions = new RequestConditions();\n  readonly #urlsForRequestInterceptor:\n      Platform.MapUtilities.Multimap<(arg0: InterceptedRequest) => Promise<void>, InterceptionPattern> =\n      new Platform.MapUtilities.Multimap();\n  #extraHeaders?: Protocol.Network.Headers;\n  #customUserAgent?: string;\n  #isBlocking = false;\n\n  constructor(targetManager: TargetManager) {\n    super();\n    this.#targetManager = targetManager;\n\n    // TODO(allada) Remove these and merge it with request interception.\n    const blockedPatternChanged: () => void = () => {\n      this.updateBlockedPatterns();\n      this.dispatchEventToListeners(MultitargetNetworkManager.Events.BLOCKED_PATTERNS_CHANGED);\n    };\n    this.#requestConditions.addEventListener(\n        RequestConditions.Events.REQUEST_CONDITIONS_CHANGED, blockedPatternChanged);\n    this.updateBlockedPatterns();\n\n    this.#targetManager.observeModels(NetworkManager, this);\n  }\n\n  static instance(opts: {\n    forceNew: boolean|null,\n    targetManager?: TargetManager,\n  } = {forceNew: null}): MultitargetNetworkManager {\n    const {forceNew, targetManager} = opts;\n    if (!Root.DevToolsContext.globalInstance().has(MultitargetNetworkManager) || forceNew) {\n      Root.DevToolsContext.globalInstance().set(\n          MultitargetNetworkManager, new MultitargetNetworkManager(targetManager ?? TargetManager.instance()));\n    }\n\n    return Root.DevToolsContext.globalInstance().get(MultitargetNetworkManager);\n  }\n\n  static dispose(): void {\n    Root.DevToolsContext.globalInstance().delete(MultitargetNetworkManager);\n  }\n\n  static patchUserAgentWithChromeVersion(uaString: string): string {\n    // Patches Chrome/ChrOS version from user #agent (\"1.2.3.4\" when user #agent is: \"Chrome/1.2.3.4\").\n    // Otherwise, ignore it. This assumes additional appVersions appear after the Chrome version.\n    const chromeVersion = Root.Runtime.getChromeVersion();\n    if (chromeVersion.length > 0) {\n      // \"1.2.3.4\" becomes \"1.0.100.0\"\n      const additionalAppVersion = chromeVersion.split('.', 1)[0] + '.0.100.0';\n      return Platform.StringUtilities.sprintf(uaString, chromeVersion, additionalAppVersion);\n    }\n    return uaString;\n  }\n\n  static patchUserAgentMetadataWithChromeVersion(userAgentMetadata: Protocol.Emulation.UserAgentMetadata): void {\n    // Patches Chrome/ChrOS version from user #agent metadata (\"1.2.3.4\" when user #agent is: \"Chrome/1.2.3.4\").\n    // Otherwise, ignore it. This assumes additional appVersions appear after the Chrome version.\n    if (!userAgentMetadata.brands) {\n      return;\n    }\n    const chromeVersion = Root.Runtime.getChromeVersion();\n    if (chromeVersion.length === 0) {\n      return;\n    }\n\n    const majorVersion = chromeVersion.split('.', 1)[0];\n    for (const brand of userAgentMetadata.brands) {\n      if (brand.version.includes('%s')) {\n        brand.version = Platform.StringUtilities.sprintf(brand.version, majorVersion);\n      }\n    }\n\n    if (userAgentMetadata.fullVersion) {\n      if (userAgentMetadata.fullVersion.includes('%s')) {\n        userAgentMetadata.fullVersion = Platform.StringUtilities.sprintf(userAgentMetadata.fullVersion, chromeVersion);\n      }\n    }\n  }\n\n  modelAdded(networkManager: NetworkManager): void {\n    const networkAgent = networkManager.target().networkAgent();\n    const fetchAgent = networkManager.target().fetchAgent();\n    if (this.#extraHeaders) {\n      void networkAgent.invoke_setExtraHTTPHeaders({headers: this.#extraHeaders});\n    }\n    if (this.currentUserAgent()) {\n      void networkAgent.invoke_setUserAgentOverride(\n          {userAgent: this.currentUserAgent(), userAgentMetadata: this.#userAgentMetadataOverride || undefined});\n    }\n    this.#requestConditions.applyConditions(\n        this.isOffline(), this.isThrottling() ? this.#networkConditions : null, networkAgent);\n    if (this.isIntercepting()) {\n      void fetchAgent.invoke_enable({patterns: this.#urlsForRequestInterceptor.valuesArray()});\n    }\n    if (this.#customAcceptedEncodings === null) {\n      void networkAgent.invoke_clearAcceptedEncodingsOverride();\n    } else {\n      void networkAgent.invoke_setAcceptedEncodings({encodings: this.#customAcceptedEncodings});\n    }\n    this.#networkAgents.add(networkAgent);\n    this.#fetchAgents.add(fetchAgent);\n    if (this.isThrottling() && !Root.Runtime.hostConfig.devToolsIndividualRequestThrottling?.enabled) {\n      this.updateNetworkConditions(networkAgent);\n    }\n  }\n\n  modelRemoved(networkManager: NetworkManager): void {\n    for (const entry of this.inflightMainResourceRequests) {\n      const manager = NetworkManager.forRequest((entry[1]));\n      if (manager !== networkManager) {\n        continue;\n      }\n      this.inflightMainResourceRequests.delete((entry[0]));\n    }\n    this.#networkAgents.delete(networkManager.target().networkAgent());\n    this.#fetchAgents.delete(networkManager.target().fetchAgent());\n  }\n\n  isThrottling(): boolean {\n    return this.#networkConditions.download >= 0 || this.#networkConditions.upload >= 0 ||\n        this.#networkConditions.latency > 0;\n  }\n\n  isOffline(): boolean {\n    return !this.#networkConditions.download && !this.#networkConditions.upload;\n  }\n\n  setNetworkConditions(conditions: Conditions): void {\n    this.#networkConditions = conditions;\n    if (Root.Runtime.hostConfig.devToolsIndividualRequestThrottling?.enabled) {\n      this.#requestConditions.applyConditions(\n          this.isOffline(), this.isThrottling() ? this.#networkConditions : null, ...this.#networkAgents);\n    } else {\n      for (const agent of this.#networkAgents) {\n        this.updateNetworkConditions(agent);\n      }\n    }\n    this.dispatchEventToListeners(MultitargetNetworkManager.Events.CONDITIONS_CHANGED);\n  }\n\n  networkConditions(): Conditions {\n    return this.#networkConditions;\n  }\n\n  private updateNetworkConditions(networkAgent: ProtocolProxyApi.NetworkApi): void {\n    const conditions = this.#networkConditions;\n    if (!this.isThrottling()) {\n      void networkAgent.invoke_emulateNetworkConditions({\n        offline: false,\n        latency: 0,\n        downloadThroughput: 0,\n        uploadThroughput: 0,\n      });\n    } else {\n      void networkAgent.invoke_emulateNetworkConditions({\n        offline: this.isOffline(),\n        latency: conditions.latency,\n        downloadThroughput: conditions.download < 0 ? 0 : conditions.download,\n        uploadThroughput: conditions.upload < 0 ? 0 : conditions.upload,\n        packetLoss: (conditions.packetLoss ?? 0) < 0 ? 0 : conditions.packetLoss,\n        packetQueueLength: conditions.packetQueueLength,\n        packetReordering: conditions.packetReordering,\n        connectionType: NetworkManager.connectionType(conditions),\n      });\n    }\n  }\n\n  setExtraHTTPHeaders(headers: Protocol.Network.Headers): void {\n    this.#extraHeaders = headers;\n    for (const agent of this.#networkAgents) {\n      void agent.invoke_setExtraHTTPHeaders({headers: this.#extraHeaders});\n    }\n  }\n\n  currentUserAgent(): string {\n    return this.#customUserAgent ? this.#customUserAgent : this.#userAgentOverride;\n  }\n\n  private updateUserAgentOverride(): void {\n    const userAgent = this.currentUserAgent();\n    for (const agent of this.#networkAgents) {\n      void agent.invoke_setUserAgentOverride(\n          {userAgent, userAgentMetadata: this.#userAgentMetadataOverride || undefined});\n    }\n  }\n\n  setUserAgentOverride(userAgent: string, userAgentMetadataOverride: Protocol.Emulation.UserAgentMetadata|null): void {\n    const uaChanged = (this.#userAgentOverride !== userAgent);\n    this.#userAgentOverride = userAgent;\n    if (!this.#customUserAgent) {\n      this.#userAgentMetadataOverride = userAgentMetadataOverride;\n      this.updateUserAgentOverride();\n    } else {\n      this.#userAgentMetadataOverride = null;\n    }\n\n    if (uaChanged) {\n      this.dispatchEventToListeners(MultitargetNetworkManager.Events.USER_AGENT_CHANGED);\n    }\n  }\n\n  setCustomUserAgentOverride(\n      userAgent: string, userAgentMetadataOverride: Protocol.Emulation.UserAgentMetadata|null = null): void {\n    this.#customUserAgent = userAgent;\n    this.#userAgentMetadataOverride = userAgentMetadataOverride;\n    this.updateUserAgentOverride();\n  }\n\n  setCustomAcceptedEncodingsOverride(acceptedEncodings: Protocol.Network.ContentEncoding[]): void {\n    this.#customAcceptedEncodings = acceptedEncodings;\n    this.updateAcceptedEncodingsOverride();\n    this.dispatchEventToListeners(MultitargetNetworkManager.Events.ACCEPTED_ENCODINGS_CHANGED);\n  }\n\n  clearCustomAcceptedEncodingsOverride(): void {\n    this.#customAcceptedEncodings = null;\n    this.updateAcceptedEncodingsOverride();\n    this.dispatchEventToListeners(MultitargetNetworkManager.Events.ACCEPTED_ENCODINGS_CHANGED);\n  }\n\n  isAcceptedEncodingOverrideSet(): boolean {\n    return this.#customAcceptedEncodings !== null;\n  }\n\n  private updateAcceptedEncodingsOverride(): void {\n    const customAcceptedEncodings = this.#customAcceptedEncodings;\n    for (const agent of this.#networkAgents) {\n      if (customAcceptedEncodings === null) {\n        void agent.invoke_clearAcceptedEncodingsOverride();\n      } else {\n        void agent.invoke_setAcceptedEncodings({encodings: customAcceptedEncodings});\n      }\n    }\n  }\n\n  get requestConditions(): RequestConditions {\n    return this.#requestConditions;\n  }\n\n  isBlocking(): boolean {\n    return this.#isBlocking && this.requestConditions.conditionsEnabled;\n  }\n\n  /**\n   * @deprecated Kept for layout tests\n   * TODO(pfaffe) remove\n   */\n  private setBlockingEnabled(enabled: boolean): void {\n    this.requestConditions.conditionsEnabled = enabled;\n  }\n\n  /**\n   * @deprecated Kept for layout tests\n   * TODO(pfaffe) remove\n   */\n  private setBlockedPatterns(patterns: Array<{url: string, enabled: boolean}>): void {\n    this.requestConditions.clear();\n    this.requestConditions.add(...patterns.map(pattern => RequestCondition.createFromSetting(pattern)));\n  }\n\n  private updateBlockedPatterns(): void {\n    this.#isBlocking = this.#requestConditions.applyConditions(\n        this.isOffline(), this.isThrottling() ? this.#networkConditions : null, ...this.#networkAgents);\n  }\n\n  isIntercepting(): boolean {\n    return Boolean(this.#urlsForRequestInterceptor.size);\n  }\n\n  setInterceptionHandlerForPatterns(\n      patterns: InterceptionPattern[], requestInterceptor: (arg0: InterceptedRequest) => Promise<void>): Promise<void> {\n    // Note: requestInterceptors may receive interception #requests for patterns they did not subscribe to.\n    this.#urlsForRequestInterceptor.deleteAll(requestInterceptor);\n    for (const newPattern of patterns) {\n      this.#urlsForRequestInterceptor.set(requestInterceptor, newPattern);\n    }\n    return this.updateInterceptionPatternsOnNextTick();\n  }\n\n  private updateInterceptionPatternsOnNextTick(): Promise<void> {\n    // This is used so we can register and unregister patterns in loops without sending lots of protocol messages.\n    if (!this.#updatingInterceptionPatternsPromise) {\n      this.#updatingInterceptionPatternsPromise = Promise.resolve().then(this.updateInterceptionPatterns.bind(this));\n    }\n    return this.#updatingInterceptionPatternsPromise;\n  }\n\n  private async updateInterceptionPatterns(): Promise<void> {\n    if (!Common.Settings.Settings.instance().moduleSetting('cache-disabled').get()) {\n      Common.Settings.Settings.instance().moduleSetting('cache-disabled').set(true);\n    }\n    this.#updatingInterceptionPatternsPromise = null;\n    const promises = ([] as Array<Promise<unknown>>);\n    for (const agent of this.#fetchAgents) {\n      promises.push(agent.invoke_enable({patterns: this.#urlsForRequestInterceptor.valuesArray()}));\n    }\n    this.dispatchEventToListeners(MultitargetNetworkManager.Events.INTERCEPTORS_CHANGED);\n    await Promise.all(promises);\n  }\n\n  async requestIntercepted(interceptedRequest: InterceptedRequest): Promise<void> {\n    for (const requestInterceptor of this.#urlsForRequestInterceptor.keysArray()) {\n      await requestInterceptor(interceptedRequest);\n      if (interceptedRequest.hasResponded() && interceptedRequest.networkRequest) {\n        this.dispatchEventToListeners(\n            MultitargetNetworkManager.Events.REQUEST_INTERCEPTED, interceptedRequest.networkRequest.requestId());\n        return;\n      }\n    }\n    if (!interceptedRequest.hasResponded()) {\n      interceptedRequest.continueRequestWithoutChange();\n    }\n  }\n\n  clearBrowserCache(): void {\n    for (const agent of this.#networkAgents) {\n      void agent.invoke_clearBrowserCache();\n    }\n  }\n\n  clearBrowserCookies(): void {\n    for (const agent of this.#networkAgents) {\n      void agent.invoke_clearBrowserCookies();\n    }\n  }\n\n  async getCertificate(origin: string): Promise<string[]> {\n    const target = this.#targetManager.primaryPageTarget();\n    if (!target) {\n      return [];\n    }\n    const certificate = await target.networkAgent().invoke_getCertificate({origin});\n    if (!certificate) {\n      return [];\n    }\n    return certificate.tableNames;\n  }\n\n  appliedRequestConditions(requestInternal: NetworkRequest): AppliedNetworkConditions|undefined {\n    if (!requestInternal.appliedNetworkConditionsId) {\n      return undefined;\n    }\n    return this.requestConditions.conditionsForId(requestInternal.appliedNetworkConditionsId);\n  }\n}\n\nexport namespace MultitargetNetworkManager {\n  export const enum Events {\n    BLOCKED_PATTERNS_CHANGED = 'BlockedPatternsChanged',\n    CONDITIONS_CHANGED = 'ConditionsChanged',\n    USER_AGENT_CHANGED = 'UserAgentChanged',\n    INTERCEPTORS_CHANGED = 'InterceptorsChanged',\n    ACCEPTED_ENCODINGS_CHANGED = 'AcceptedEncodingsChanged',\n    REQUEST_INTERCEPTED = 'RequestIntercepted',\n    REQUEST_FULFILLED = 'RequestFulfilled',\n  }\n\n  export interface EventTypes {\n    [Events.BLOCKED_PATTERNS_CHANGED]: void;\n    [Events.CONDITIONS_CHANGED]: void;\n    [Events.USER_AGENT_CHANGED]: void;\n    [Events.INTERCEPTORS_CHANGED]: void;\n    [Events.ACCEPTED_ENCODINGS_CHANGED]: void;\n    [Events.REQUEST_INTERCEPTED]: string;\n    [Events.REQUEST_FULFILLED]: Platform.DevToolsPath.UrlString;\n  }\n}\n\nexport class InterceptedRequest {\n  readonly #fetchAgent: ProtocolProxyApi.FetchApi;\n  #hasResponded = false;\n  request: Protocol.Network.Request;\n  resourceType: Protocol.Network.ResourceType;\n  responseStatusCode: number|undefined;\n  responseHeaders: Protocol.Fetch.HeaderEntry[]|undefined;\n  requestId: Protocol.Fetch.RequestId;\n  networkRequest: NetworkRequest|null;\n\n  constructor(\n      fetchAgent: ProtocolProxyApi.FetchApi,\n      request: Protocol.Network.Request,\n      resourceType: Protocol.Network.ResourceType,\n      requestId: Protocol.Fetch.RequestId,\n      networkRequest: NetworkRequest|null,\n      responseStatusCode?: number,\n      responseHeaders?: Protocol.Fetch.HeaderEntry[],\n  ) {\n    this.#fetchAgent = fetchAgent;\n    this.request = request;\n    this.resourceType = resourceType;\n    this.responseStatusCode = responseStatusCode;\n    this.responseHeaders = responseHeaders;\n    this.requestId = requestId;\n    this.networkRequest = networkRequest;\n  }\n\n  hasResponded(): boolean {\n    return this.#hasResponded;\n  }\n\n  static mergeSetCookieHeaders(\n      originalSetCookieHeaders: Protocol.Fetch.HeaderEntry[],\n      setCookieHeadersFromOverrides: Protocol.Fetch.HeaderEntry[]): Protocol.Fetch.HeaderEntry[] {\n    // Generates a map containing the `set-cookie` headers. Valid `set-cookie`\n    // headers are stored by the cookie name. Malformed `set-cookie` headers are\n    // stored by the whole header value. Duplicates are allowed.\n    const generateHeaderMap = (headers: Protocol.Fetch.HeaderEntry[]): Map<string, string[]> => {\n      const result = new Map<string, string[]>();\n      for (const header of headers) {\n        // The regex matches cookie headers of the form '<header-name>=<header-value>'.\n        // <header-name> is a token as defined in https://www.rfc-editor.org/rfc/rfc9110.html#name-tokens.\n        // The shape of <header-value> is not being validated at all here.\n        const match = header.value.match(/^([a-zA-Z0-9!#$%&'*+.^_`|~-]+=)(.*)$/);\n        if (match) {\n          if (result.has(match[1])) {\n            result.get(match[1])?.push(header.value);\n          } else {\n            result.set(match[1], [header.value]);\n          }\n        } else if (result.has(header.value)) {\n          result.get(header.value)?.push(header.value);\n        } else {\n          result.set(header.value, [header.value]);\n        }\n      }\n      return result;\n    };\n\n    const originalHeadersMap = generateHeaderMap(originalSetCookieHeaders);\n    const overridesHeaderMap = generateHeaderMap(setCookieHeadersFromOverrides);\n\n    // Iterate over original headers. If the same key is found among the\n    // overrides, use those instead.\n    const mergedHeaders: Protocol.Fetch.HeaderEntry[] = [];\n    for (const [key, headerValues] of originalHeadersMap) {\n      if (overridesHeaderMap.has(key)) {\n        for (const headerValue of overridesHeaderMap.get(key) || []) {\n          mergedHeaders.push({name: 'set-cookie', value: headerValue});\n        }\n      } else {\n        for (const headerValue of headerValues) {\n          mergedHeaders.push({name: 'set-cookie', value: headerValue});\n        }\n      }\n    }\n\n    // Finally add all overrides which have not been added yet.\n    for (const [key, headerValues] of overridesHeaderMap) {\n      if (originalHeadersMap.has(key)) {\n        continue;\n      }\n      for (const headerValue of headerValues) {\n        mergedHeaders.push({name: 'set-cookie', value: headerValue});\n      }\n    }\n    return mergedHeaders;\n  }\n\n  async continueRequestWithContent(\n      contentBlob: Blob, encoded: boolean, responseHeaders: Protocol.Fetch.HeaderEntry[],\n      isBodyOverridden: boolean): Promise<void> {\n    this.#hasResponded = true;\n    const body = encoded ? await contentBlob.text() : await Common.Base64.encode(contentBlob).catch(err => {\n      console.error(err);\n      return '';\n    });\n    const responseCode = isBodyOverridden ? 200 : (this.responseStatusCode || 200);\n\n    if (this.networkRequest) {\n      const originalSetCookieHeaders =\n          this.networkRequest?.originalResponseHeaders.filter(header => header.name === 'set-cookie') || [];\n      const setCookieHeadersFromOverrides = responseHeaders.filter(header => header.name === 'set-cookie');\n      this.networkRequest.setCookieHeaders =\n          InterceptedRequest.mergeSetCookieHeaders(originalSetCookieHeaders, setCookieHeadersFromOverrides);\n      this.networkRequest.hasOverriddenContent = isBodyOverridden;\n    }\n\n    void this.#fetchAgent.invoke_fulfillRequest({requestId: this.requestId, responseCode, body, responseHeaders});\n    MultitargetNetworkManager.instance().dispatchEventToListeners(\n        MultitargetNetworkManager.Events.REQUEST_FULFILLED, this.request.url as Platform.DevToolsPath.UrlString);\n  }\n\n  continueRequestWithoutChange(): void {\n    console.assert(!this.#hasResponded);\n    this.#hasResponded = true;\n    void this.#fetchAgent.invoke_continueRequest({requestId: this.requestId});\n  }\n\n  async responseBody(): Promise<TextUtils.ContentData.ContentDataOrError> {\n    const response = await this.#fetchAgent.invoke_getResponseBody({requestId: this.requestId});\n    const error = response.getError();\n    if (error) {\n      return {error};\n    }\n\n    const {mimeType, charset} = this.getMimeTypeAndCharset();\n    return new TextUtils.ContentData.ContentData(\n        response.body, response.base64Encoded, mimeType ?? 'application/octet-stream', charset ?? undefined);\n  }\n\n  isRedirect(): boolean {\n    return this.responseStatusCode !== undefined && this.responseStatusCode >= 300 && this.responseStatusCode < 400;\n  }\n\n  /**\n   * Tries to determine the MIME type and charset for this intercepted request.\n   * Looks at the intercepted response headers first (for Content-Type header), then\n   * checks the `NetworkRequest` if we have one.\n   */\n  getMimeTypeAndCharset(): {mimeType: string|null, charset: string|null} {\n    for (const header of this.responseHeaders ?? []) {\n      if (header.name.toLowerCase() === 'content-type') {\n        return Platform.MimeType.parseContentType(header.value);\n      }\n    }\n\n    const mimeType = this.networkRequest?.mimeType ?? null;\n    const charset = this.networkRequest?.charset() ?? null;\n    return {mimeType, charset};\n  }\n}\n\n/**\n * Helper class to match #requests created from requestWillBeSent with\n * requestWillBeSentExtraInfo and responseReceivedExtraInfo when they have the\n * same requestId due to redirects.\n */\nclass ExtraInfoBuilder {\n  readonly #requests: NetworkRequest[] = [];\n  #responseExtraInfoFlag: Array<boolean|null> = [];\n  #requestExtraInfos: Array<ExtraRequestInfo|null> = [];\n  #responseExtraInfos: Array<ExtraResponseInfo|null> = [];\n  #responseEarlyHintsHeaders: NameValue[] = [];\n  #finished = false;\n\n  addRequest(req: NetworkRequest): void {\n    this.#requests.push(req);\n    this.sync(this.#requests.length - 1);\n  }\n\n  addHasExtraInfo(hasExtraInfo: boolean): void {\n    this.#responseExtraInfoFlag.push(hasExtraInfo);\n    // This comes in response, so it can't come before request or after next\n    // request in the redirect chain.\n    console.assert(this.#requests.length === this.#responseExtraInfoFlag.length, 'request/response count mismatch');\n    if (!hasExtraInfo) {\n      // We may potentially have gotten extra infos from the next redirect\n      // request already. Account for that by inserting null for missing\n      // extra infos at current position.\n      this.#requestExtraInfos.splice(this.#requests.length - 1, 0, null);\n      this.#responseExtraInfos.splice(this.#requests.length - 1, 0, null);\n    }\n    this.sync(this.#requests.length - 1);\n  }\n\n  addRequestExtraInfo(info: ExtraRequestInfo): void {\n    this.#requestExtraInfos.push(info);\n    this.sync(this.#requestExtraInfos.length - 1);\n  }\n\n  addResponseExtraInfo(info: ExtraResponseInfo): void {\n    this.#responseExtraInfos.push(info);\n    this.sync(this.#responseExtraInfos.length - 1);\n  }\n\n  setEarlyHintsHeaders(earlyHintsHeaders: NameValue[]): void {\n    this.#responseEarlyHintsHeaders = earlyHintsHeaders;\n    this.updateFinalRequest();\n  }\n\n  finished(): void {\n    this.#finished = true;\n    // We may have missed responseReceived event in case of failure.\n    // That said, the ExtraInfo events still may be here, so mark them\n    // as present. Event if they are not, this is harmless.\n    // TODO(caseq): consider if we need to report hasExtraInfo in the\n    // loadingFailed event.\n    if (this.#responseExtraInfoFlag.length < this.#requests.length) {\n      this.#responseExtraInfoFlag.push(true);\n      this.sync(this.#responseExtraInfoFlag.length - 1);\n    }\n    console.assert(\n        this.#requests.length === this.#responseExtraInfoFlag.length,\n        'request/response count mismatch when request finished');\n    this.updateFinalRequest();\n  }\n\n  isFinished(): boolean {\n    return this.#finished;\n  }\n\n  private sync(index: number): void {\n    const req = this.#requests[index];\n    if (!req) {\n      return;\n    }\n\n    // No response yet, so we don't know if extra info would\n    // be there, bail out for now.\n    if (index >= this.#responseExtraInfoFlag.length) {\n      return;\n    }\n    if (!this.#responseExtraInfoFlag[index]) {\n      return;\n    }\n\n    const requestExtraInfo = this.#requestExtraInfos[index];\n    if (requestExtraInfo) {\n      req.addExtraRequestInfo(requestExtraInfo);\n      this.#requestExtraInfos[index] = null;\n    }\n\n    const responseExtraInfo = this.#responseExtraInfos[index];\n    if (responseExtraInfo) {\n      req.addExtraResponseInfo(responseExtraInfo);\n      this.#responseExtraInfos[index] = null;\n    }\n  }\n\n  finalRequest(): NetworkRequest|null {\n    if (!this.#finished) {\n      return null;\n    }\n    return this.#requests[this.#requests.length - 1] || null;\n  }\n\n  private updateFinalRequest(): void {\n    if (!this.#finished) {\n      return;\n    }\n    const finalRequest = this.finalRequest();\n    finalRequest?.setEarlyHintsHeaders(this.#responseEarlyHintsHeaders);\n  }\n}\n\nSDKModel.register(NetworkManager, {capabilities: Capability.NETWORK, autostart: true});\n\nexport function networkConditionsEqual(first: ThrottlingConditions, second: ThrottlingConditions): boolean {\n  if ('block' in first || 'block' in second) {\n    if ('block' in first && 'block' in second) {\n      const firstTitle = (typeof first.title === 'function' ? first.title() : first.title);\n      const secondTitle = (typeof second.title === 'function' ? second.title() : second.title);\n      return firstTitle === secondTitle && first.block === second.block;\n    }\n    return false;\n  }\n  // Caution: titles might be different function instances, which produce\n  // the same value.\n  // We prefer to use the i18nTitleKey to prevent against locale changes or\n  // UIString changes that might change the value vs what the user has stored\n  // locally.\n  const firstTitle = first.i18nTitleKey || (typeof first.title === 'function' ? first.title() : first.title);\n  const secondTitle = second.i18nTitleKey || (typeof second.title === 'function' ? second.title() : second.title);\n\n  return second.download === first.download && second.upload === first.upload && second.latency === first.latency &&\n      first.packetLoss === second.packetLoss && first.packetQueueLength === second.packetQueueLength &&\n      first.packetReordering === second.packetReordering && secondTitle === firstTitle;\n}\n\n/**\n * IMPORTANT: this key is used as the value that is persisted so we remember\n * the user's throttling settings\n *\n * This means that it is very important that;\n * 1. Each Conditions that is defined must have a unique key.\n * 2. The keys & values DO NOT CHANGE for a particular condition, else we might break\n *    DevTools when restoring a user's persisted setting.\n *\n * If you do want to change them, you need to handle that in a migration, but\n * please talk to jacktfranklin@ first.\n */\nexport const enum PredefinedThrottlingConditionKey {\n  BLOCKING = 'BLOCKING',\n  NO_THROTTLING = 'NO_THROTTLING',\n  OFFLINE = 'OFFLINE',\n  SPEED_3G = 'SPEED_3G',\n  SPEED_SLOW_4G = 'SPEED_SLOW_4G',\n  SPEED_FAST_4G = 'SPEED_FAST_4G',\n}\n\nexport type UserDefinedThrottlingConditionKey = `USER_CUSTOM_SETTING_${number}`;\nexport type ThrottlingConditionKey = PredefinedThrottlingConditionKey|UserDefinedThrottlingConditionKey;\n\nexport const THROTTLING_CONDITIONS_LOOKUP: ReadonlyMap<PredefinedThrottlingConditionKey, Conditions> = new Map([\n  [PredefinedThrottlingConditionKey.NO_THROTTLING, NoThrottlingConditions],\n  [PredefinedThrottlingConditionKey.OFFLINE, OfflineConditions],\n  [PredefinedThrottlingConditionKey.SPEED_3G, Slow3GConditions],\n  [PredefinedThrottlingConditionKey.SPEED_SLOW_4G, Slow4GConditions],\n  [PredefinedThrottlingConditionKey.SPEED_FAST_4G, Fast4GConditions]\n]);\n\nfunction keyIsPredefined(key: ThrottlingConditionKey): key is PredefinedThrottlingConditionKey {\n  return !key.startsWith('USER_CUSTOM_SETTING_');\n}\nexport function keyIsCustomUser(key: ThrottlingConditionKey): key is UserDefinedThrottlingConditionKey {\n  return key.startsWith('USER_CUSTOM_SETTING_');\n}\n\nexport function getPredefinedCondition(key: ThrottlingConditionKey): Conditions|null {\n  if (!keyIsPredefined(key)) {\n    return null;\n  }\n  return THROTTLING_CONDITIONS_LOOKUP.get(key) ?? null;\n}\n\nexport function getPredefinedOrBlockingCondition(key: ThrottlingConditionKey): ThrottlingConditions|null {\n  return key === PredefinedThrottlingConditionKey.BLOCKING ? BlockingConditions : getPredefinedCondition(key);\n}\n\nexport type ThrottlingConditions = Conditions|{\n  readonly key: ThrottlingConditionKey,\n  block: true,\n  title: string | (() => string),\n};\nexport interface Conditions {\n  readonly key: ThrottlingConditionKey;\n  download: number;\n  upload: number;\n  latency: number;\n  packetLoss?: number;\n  packetQueueLength?: number;\n  packetReordering?: boolean;\n  // TODO(crbug.com/1219425): In the future, it might be worthwhile to\n  // consider avoiding mixing up presentation state (e.g.: displayed\n  // titles) with behavioral state (e.g.: the throttling amounts). In\n  // this particular case, the title (along with other properties)\n  // doubles as both part of group of fields which (loosely) uniquely\n  // identify instances, as well as the literal string displayed in the\n  // UI, which leads to complications around persistance.\n  // TODO(crbug.com/422682525): make this just a function because we use lazy string everywhere.\n  title: string|(() => string);\n  // Instances may be serialized to local storage, so localized titles\n  // should not be irrecoverably baked, just in case the string changes\n  // (or the user switches locales).\n  // TODO(crbug.com/422682525): get rid of this, there is no need to store on\n  // the condition now we do not rely on it to reload a setting from disk.\n  i18nTitleKey?: string;\n  /**\n   * RTT values are multiplied by adjustment factors to make DevTools' emulation more accurate.\n   * This value represents the RTT value *before* the adjustment factor is applied.\n   * @see https://docs.google.com/document/d/10lfVdS1iDWCRKQXPfbxEn4Or99D64mvNlugP1AQuFlE/edit for historical context.\n   */\n  targetLatency?: number;\n}\n\nexport interface Message {\n  message: string;\n  requestId: string;\n  warning: boolean;\n}\n\nexport interface InterceptionPattern {\n  urlPattern: string;\n  requestStage: Protocol.Fetch.RequestStage;\n}\n\nexport type RequestInterceptor = (request: InterceptedRequest) => Promise<void>;\n\nexport interface RequestUpdateDroppedEventData {\n  url: Platform.DevToolsPath.UrlString;\n  frameId: Protocol.Page.FrameId|null;\n  loaderId: Protocol.Network.LoaderId;\n  resourceType: Protocol.Network.ResourceType;\n  mimeType: string;\n  lastModified: Date|null;\n}\n\n/**\n * For the given Round Trip Time (in MilliSeconds), return the best throttling conditions.\n */\nexport function getRecommendedNetworkPreset(rtt: number): Conditions|null {\n  const RTT_COMPARISON_THRESHOLD = 200;\n  const RTT_MINIMUM = 60;\n\n  if (!Number.isFinite(rtt)) {\n    return null;\n  }\n\n  if (rtt < RTT_MINIMUM) {\n    return null;\n  }\n\n  // We pick from the set of presets in the panel but do not want to allow\n  // the \"No Throttling\" option to be picked.\n  const presets = THROTTLING_CONDITIONS_LOOKUP.values()\n                      .filter(condition => {\n                        return condition !== NoThrottlingConditions;\n                      })\n                      .toArray();\n\n  let closestPreset: Conditions|null = null;\n  let smallestDiff = Infinity;\n  for (const preset of presets) {\n    const {targetLatency} = preset;\n    if (!targetLatency) {\n      continue;\n    }\n\n    const diff = Math.abs(targetLatency - rtt);\n    if (diff > RTT_COMPARISON_THRESHOLD) {\n      continue;\n    }\n\n    if (smallestDiff < diff) {\n      continue;\n    }\n\n    closestPreset = preset;\n    smallestDiff = diff;\n  }\n\n  return closestPreset;\n}\n", "// Copyright 2021 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport type * as Protocol from '../../generated/protocol.js';\nimport * as Common from '../common/common.js';\nimport * as Host from '../host/host.js';\nimport * as Platform from '../platform/platform.js';\nimport {assertNotNullOrUndefined} from '../platform/platform.js';\nimport type * as ProtocolClient from '../protocol_client/protocol_client.js';\nimport * as Root from '../root/root.js';\n\nimport {type RegistrationInfo, SDKModel, type SDKModelConstructor} from './SDKModel.js';\nimport {Target, Type as TargetType} from './Target.js';\n\nexport class TargetManager extends Common.ObjectWrapper.ObjectWrapper<EventTypes> {\n  /**\n   * @deprecated\n   *\n   * Intended for {@link SDKModel} classes to be able to retrieve scoped singletons like\n   * the \"PageResourceLoader\" or the \"FrameManager\".\n   *\n   * This is only an intermediate step to migrate towards our \"layering vision\" where\n   * SDKModels don't require things from the next layer.\n   */\n  readonly context: Root.DevToolsContext.DevToolsContext;\n  #targets: Set<Target>;\n  readonly #observers: Set<Observer>;\n  /* eslint-disable @typescript-eslint/no-explicit-any */\n  #modelListeners: Platform.MapUtilities.Multimap<string|symbol|number, {\n    modelClass: SDKModelConstructor,\n    thisObject: Object|undefined,\n    listener: Common.EventTarget.EventListener<any, any>,\n    wrappedListener: Common.EventTarget.EventListener<any, any>,\n  }>;\n  readonly #modelObservers: Platform.MapUtilities.Multimap<SDKModelConstructor, SDKModelObserver<any>>;\n  #scopedObservers: WeakSet<Observer|SDKModelObserver<any>>;\n  /* eslint-enable @typescript-eslint/no-explicit-any */\n  #isSuspended: boolean;\n  #browserTarget: Target|null;\n  #scopeTarget: Target|null;\n  #defaultScopeSet: boolean;\n  readonly #scopeChangeListeners: Set<() => void>;\n  readonly #overrideAutoStartModels?: Set<SDKModelConstructor>;\n\n  /**\n   * @param overrideAutoStartModels If provided, then the `autostart` flag on {@link RegistrationInfo} will be ignored.\n   */\n  constructor(context: Root.DevToolsContext.DevToolsContext, overrideAutoStartModels?: Set<SDKModelConstructor>) {\n    super();\n    this.context = context;\n    this.#targets = new Set();\n    this.#observers = new Set();\n    this.#modelListeners = new Platform.MapUtilities.Multimap();\n    this.#modelObservers = new Platform.MapUtilities.Multimap();\n    this.#isSuspended = false;\n    this.#browserTarget = null;\n    this.#scopeTarget = null;\n    this.#scopedObservers = new WeakSet();\n    this.#defaultScopeSet = false;\n    this.#scopeChangeListeners = new Set();\n    this.#overrideAutoStartModels = overrideAutoStartModels;\n  }\n\n  static instance({forceNew}: {\n    forceNew: boolean,\n  } = {forceNew: false}): TargetManager {\n    if (!Root.DevToolsContext.globalInstance().has(TargetManager) || forceNew) {\n      Root.DevToolsContext.globalInstance().set(\n          TargetManager, new TargetManager(Root.DevToolsContext.globalInstance()));\n    }\n\n    return Root.DevToolsContext.globalInstance().get(TargetManager);\n  }\n\n  static removeInstance(): void {\n    Root.DevToolsContext.globalInstance().delete(TargetManager);\n  }\n\n  onInspectedURLChange(target: Target): void {\n    if (target !== this.#scopeTarget) {\n      return;\n    }\n    Host.InspectorFrontendHost.InspectorFrontendHostInstance.inspectedURLChanged(\n        target.inspectedURL() || Platform.DevToolsPath.EmptyUrlString);\n    this.dispatchEventToListeners(Events.INSPECTED_URL_CHANGED, target);\n  }\n\n  onNameChange(target: Target): void {\n    this.dispatchEventToListeners(Events.NAME_CHANGED, target);\n  }\n\n  async suspendAllTargets(reason?: string): Promise<void> {\n    if (this.#isSuspended) {\n      return;\n    }\n    this.#isSuspended = true;\n    this.dispatchEventToListeners(Events.SUSPEND_STATE_CHANGED);\n    const suspendPromises = Array.from(this.#targets.values(), target => target.suspend(reason));\n    await Promise.all(suspendPromises);\n  }\n\n  async resumeAllTargets(): Promise<void> {\n    if (!this.#isSuspended) {\n      return;\n    }\n    this.#isSuspended = false;\n    this.dispatchEventToListeners(Events.SUSPEND_STATE_CHANGED);\n    const resumePromises = Array.from(this.#targets.values(), target => target.resume());\n    await Promise.all(resumePromises);\n  }\n\n  allTargetsSuspended(): boolean {\n    return this.#isSuspended;\n  }\n\n  models<T extends SDKModel>(modelClass: SDKModelConstructor<T>, opts?: {scoped: boolean}): T[] {\n    const result = [];\n    for (const target of this.#targets) {\n      if (opts?.scoped && !this.isInScope(target)) {\n        continue;\n      }\n      const model = target.model(modelClass);\n      if (!model) {\n        continue;\n      }\n      result.push(model);\n    }\n    return result;\n  }\n\n  inspectedURL(): string {\n    const mainTarget = this.primaryPageTarget();\n    return mainTarget ? mainTarget.inspectedURL() : '';\n  }\n\n  observeModels<T extends SDKModel>(modelClass: SDKModelConstructor<T>, observer: SDKModelObserver<T>, opts?: {\n    scoped: boolean,\n  }): void {\n    const models = this.models(modelClass, opts);\n    this.#modelObservers.set(modelClass, observer);\n    if (opts?.scoped) {\n      this.#scopedObservers.add(observer);\n    }\n    for (const model of models) {\n      observer.modelAdded(model);\n    }\n  }\n\n  unobserveModels<T extends SDKModel>(modelClass: SDKModelConstructor<T>, observer: SDKModelObserver<T>): void {\n    this.#modelObservers.delete(modelClass, observer);\n    this.#scopedObservers.delete(observer);\n  }\n\n  modelAdded(modelClass: SDKModelConstructor, model: SDKModel, inScope: boolean): void {\n    for (const observer of this.#modelObservers.get(modelClass).values()) {\n      if (!this.#scopedObservers.has(observer) || inScope) {\n        observer.modelAdded(model);\n      }\n    }\n  }\n\n  private modelRemoved(modelClass: SDKModelConstructor, model: SDKModel, inScope: boolean): void {\n    for (const observer of this.#modelObservers.get(modelClass).values()) {\n      if (!this.#scopedObservers.has(observer) || inScope) {\n        observer.modelRemoved(model);\n      }\n    }\n  }\n\n  addModelListener<Events, T extends keyof Events>(\n      modelClass: SDKModelConstructor<SDKModel<Events>>, eventType: T,\n      listener: Common.EventTarget.EventListener<Events, T>, thisObject?: Object, opts?: {scoped: boolean}): void {\n    const wrappedListener = (event: Common.EventTarget.EventTargetEvent<Events[T], Events>): void => {\n      if (!opts?.scoped || this.isInScope(event)) {\n        listener.call(thisObject, event);\n      }\n    };\n    for (const model of this.models(modelClass)) {\n      model.addEventListener(eventType, wrappedListener);\n    }\n    this.#modelListeners.set(eventType, {modelClass, thisObject, listener, wrappedListener});\n  }\n\n  removeModelListener<Events, T extends keyof Events>(\n      modelClass: SDKModelConstructor<SDKModel<Events>>, eventType: T,\n      listener: Common.EventTarget.EventListener<Events, T>, thisObject?: Object): void {\n    if (!this.#modelListeners.has(eventType)) {\n      return;\n    }\n    let wrappedListener = null;\n    for (const info of this.#modelListeners.get(eventType)) {\n      if (info.modelClass === modelClass && info.listener === listener && info.thisObject === thisObject) {\n        wrappedListener = info.wrappedListener;\n        this.#modelListeners.delete(eventType, info);\n      }\n    }\n    if (wrappedListener) {\n      for (const model of this.models(modelClass)) {\n        model.removeEventListener(eventType, wrappedListener);\n      }\n    }\n  }\n\n  observeTargets(targetObserver: Observer, opts?: {scoped: boolean}): void {\n    if (this.#observers.has(targetObserver)) {\n      throw new Error('Observer can only be registered once');\n    }\n    if (opts?.scoped) {\n      this.#scopedObservers.add(targetObserver);\n    }\n    for (const target of this.#targets) {\n      if (!opts?.scoped || this.isInScope(target)) {\n        targetObserver.targetAdded(target);\n      }\n    }\n    this.#observers.add(targetObserver);\n  }\n\n  unobserveTargets(targetObserver: Observer): void {\n    this.#observers.delete(targetObserver);\n    this.#scopedObservers.delete(targetObserver);\n  }\n\n  /** @returns The set of models we create unconditionally for new targets in the order in which they should be created */\n  #autoStartModels(): SDKModelConstructor[] {\n    const earlyModels = new Set<SDKModelConstructor>();\n    const models = new Set<SDKModelConstructor>();\n    const shouldAutostart = (model: SDKModelConstructor, info: RegistrationInfo): boolean =>\n        this.#overrideAutoStartModels ? this.#overrideAutoStartModels.has(model) : info.autostart;\n\n    for (const [model, info] of SDKModel.registeredModels) {\n      if (info.early) {\n        earlyModels.add(model);\n      } else if (shouldAutostart(model, info) || this.#modelObservers.has(model)) {\n        models.add(model);\n      }\n    }\n    return [...earlyModels, ...models];\n  }\n\n  createTarget(\n      id: Protocol.Target.TargetID|'main', name: string, type: TargetType, parentTarget: Target|null,\n      sessionId?: string, waitForDebuggerInPage?: boolean, connection?: ProtocolClient.CDPConnection.CDPConnection,\n      targetInfo?: Protocol.Target.TargetInfo): Target {\n    const target = new Target(\n        this, id, name, type, parentTarget, sessionId || '', this.#isSuspended, connection || null, targetInfo);\n    if (waitForDebuggerInPage) {\n      void target.pageAgent().invoke_waitForDebugger();\n    }\n    target.createModels(this.#autoStartModels());\n    this.#targets.add(target);\n\n    const inScope = this.isInScope(target);\n    // Iterate over a copy. #observers might be modified during iteration.\n    for (const observer of [...this.#observers]) {\n      if (!this.#scopedObservers.has(observer) || inScope) {\n        observer.targetAdded(target);\n      }\n    }\n\n    for (const [modelClass, model] of target.models().entries()) {\n      this.modelAdded(modelClass, model, inScope);\n    }\n\n    for (const key of this.#modelListeners.keysArray()) {\n      for (const info of this.#modelListeners.get(key)) {\n        const model = target.model(info.modelClass);\n        if (model) {\n          model.addEventListener(key, info.wrappedListener);\n        }\n      }\n    }\n\n    if ((target === target.outermostTarget() &&\n         (target.type() !== TargetType.FRAME || target === this.primaryPageTarget())) &&\n        !this.#defaultScopeSet) {\n      this.setScopeTarget(target);\n    }\n\n    return target;\n  }\n\n  removeTarget(target: Target): void {\n    if (!this.#targets.has(target)) {\n      return;\n    }\n\n    const inScope = this.isInScope(target);\n    this.#targets.delete(target);\n    for (const modelClass of target.models().keys()) {\n      const model = target.models().get(modelClass);\n      assertNotNullOrUndefined(model);\n      this.modelRemoved(modelClass, model, inScope);\n    }\n\n    // Iterate over a copy. #observers might be modified during iteration.\n    for (const observer of [...this.#observers]) {\n      if (!this.#scopedObservers.has(observer) || inScope) {\n        observer.targetRemoved(target);\n      }\n    }\n\n    for (const key of this.#modelListeners.keysArray()) {\n      for (const info of this.#modelListeners.get(key)) {\n        const model = target.model(info.modelClass);\n        if (model) {\n          model.removeEventListener(key, info.wrappedListener);\n        }\n      }\n    }\n  }\n\n  targets(): Target[] {\n    return [...this.#targets];\n  }\n\n  targetById(id: string): Target|null {\n    // TODO(dgozman): add a map #id -> #target.\n    return this.targets().find(target => target.id() === id) || null;\n  }\n\n  rootTarget(): Target|null {\n    if (this.#targets.size === 0) {\n      return null;\n    }\n    return this.#targets.values().next().value ?? null;\n  }\n\n  primaryPageTarget(): Target|null {\n    let target = this.rootTarget();\n    if (target?.type() === TargetType.TAB) {\n      target =\n          this.targets().find(\n              t => t.parentTarget() === target && t.type() === TargetType.FRAME && !t.targetInfo()?.subtype?.length) ||\n          null;\n    }\n    return target;\n  }\n\n  browserTarget(): Target|null {\n    return this.#browserTarget;\n  }\n\n  async maybeAttachInitialTarget(): Promise<boolean> {\n    if (!Boolean(Root.Runtime.Runtime.queryParam('browserConnection'))) {\n      return false;\n    }\n    if (!this.#browserTarget) {\n      this.#browserTarget = new Target(\n          this, /* #id*/ 'main', /* #name*/ 'browser', TargetType.BROWSER, /* #parentTarget*/ null,\n          /* #sessionId */ '', /* suspended*/ false, /* #connection*/ null, /* targetInfo*/ undefined);\n      this.#browserTarget.createModels(this.#autoStartModels());\n    }\n    const targetId =\n        await Host.InspectorFrontendHost.InspectorFrontendHostInstance.initialTargetId() as Protocol.Target.TargetID;\n    // Do not await for Target.autoAttachRelated to return, as it goes throguh the renderer and we don't want to block early\n    // at front-end initialization if a renderer is stuck. The rest of #target discovery and auto-attach process should happen\n    // asynchronously upon Target.attachedToTarget.\n    void this.#browserTarget.targetAgent().invoke_autoAttachRelated({\n      targetId,\n      waitForDebuggerOnStart: true,\n    });\n    return true;\n  }\n\n  clearAllTargetsForTest(): void {\n    this.#targets.clear();\n  }\n\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  isInScope(arg: SDKModel|Target|Common.EventTarget.EventTargetEvent<any, any>|null): boolean {\n    if (!arg) {\n      return false;\n    }\n    if (isSDKModelEvent(arg)) {\n      arg = arg.source as SDKModel;\n    }\n    if (arg instanceof SDKModel) {\n      arg = arg.target();\n    }\n    while (arg && arg !== this.#scopeTarget) {\n      arg = arg.parentTarget();\n    }\n    return Boolean(arg) && arg === this.#scopeTarget;\n  }\n\n  // Sets a root of a scope substree.\n  // TargetManager API invoked with `scoped: true` will behave as if targets\n  // outside of the scope subtree don't exist. Concretely this means that\n  // target observers, model observers and model listeners won't be invoked for targets outside of the\n  // scope tree. This method will invoke targetRemoved and modelRemoved for\n  // objects in the previous scope, as if they disappear and then will invoke\n  // targetAdded and modelAdded as if they just appeared.\n  // Note that scopeTarget could be null, which will effectively prevent scoped\n  // observes from getting any events.\n  setScopeTarget(scopeTarget: Target|null): void {\n    if (scopeTarget === this.#scopeTarget) {\n      return;\n    }\n    for (const target of this.targets()) {\n      if (!this.isInScope(target)) {\n        continue;\n      }\n      for (const modelClass of this.#modelObservers.keysArray()) {\n        const model = target.models().get(modelClass);\n        if (!model) {\n          continue;\n        }\n        for (const observer of [...this.#modelObservers.get(modelClass)].filter(o => this.#scopedObservers.has(o))) {\n          observer.modelRemoved(model);\n        }\n      }\n\n      // Iterate over a copy. #observers might be modified during iteration.\n      for (const observer of [...this.#observers].filter(o => this.#scopedObservers.has(o))) {\n        observer.targetRemoved(target);\n      }\n    }\n    this.#scopeTarget = scopeTarget;\n    for (const target of this.targets()) {\n      if (!this.isInScope(target)) {\n        continue;\n      }\n\n      for (const observer of [...this.#observers].filter(o => this.#scopedObservers.has(o))) {\n        observer.targetAdded(target);\n      }\n\n      for (const [modelClass, model] of target.models().entries()) {\n        for (const observer of [...this.#modelObservers.get(modelClass)].filter(o => this.#scopedObservers.has(o))) {\n          observer.modelAdded(model);\n        }\n      }\n    }\n    for (const scopeChangeListener of this.#scopeChangeListeners) {\n      scopeChangeListener();\n    }\n    if (scopeTarget?.inspectedURL()) {\n      this.onInspectedURLChange(scopeTarget);\n    }\n  }\n\n  addScopeChangeListener(listener: () => void): void {\n    this.#scopeChangeListeners.add(listener);\n  }\n\n  scopeTarget(): Target|null {\n    return this.#scopeTarget;\n  }\n}\n\nexport const enum Events {\n  AVAILABLE_TARGETS_CHANGED = 'AvailableTargetsChanged',\n  INSPECTED_URL_CHANGED = 'InspectedURLChanged',\n  NAME_CHANGED = 'NameChanged',\n  SUSPEND_STATE_CHANGED = 'SuspendStateChanged',\n}\n\nexport interface EventTypes {\n  [Events.AVAILABLE_TARGETS_CHANGED]: Protocol.Target.TargetInfo[];\n  [Events.INSPECTED_URL_CHANGED]: Target;\n  [Events.NAME_CHANGED]: Target;\n  [Events.SUSPEND_STATE_CHANGED]: void;\n}\n\nexport class Observer {\n  targetAdded(_target: Target): void {\n  }\n  targetRemoved(_target: Target): void {\n  }\n}\n\nexport class SDKModelObserver<T> {\n  modelAdded(_model: T): void {\n  }\n  modelRemoved(_model: T): void {\n  }\n}\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction isSDKModelEvent(arg: Object): arg is Common.EventTarget.EventTargetEvent<any, any> {\n  return 'source' in arg && arg.source instanceof SDKModel;\n}\n", "// Copyright 2021 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport type * as Protocol from '../../generated/protocol.js';\nimport * as Common from '../common/common.js';\nimport * as Platform from '../platform/platform.js';\nimport * as ProtocolClient from '../protocol_client/protocol_client.js';\n\nimport {SDKModel, type SDKModelConstructor} from './SDKModel.js';\nimport type {TargetManager} from './TargetManager.js';\n\nexport class Target extends ProtocolClient.InspectorBackend.TargetBase {\n  readonly #targetManager: TargetManager;\n  #name: string;\n  #inspectedURL: Platform.DevToolsPath.UrlString = Platform.DevToolsPath.EmptyUrlString;\n  #inspectedURLName = '';\n  readonly #capabilitiesMask: number;\n  #type: Type;\n  readonly #parentTarget: Target|null;\n  #id: Protocol.Target.TargetID|'main';\n  #modelByConstructor = new Map<new(arg1: Target) => SDKModel, SDKModel>();\n  #isSuspended: boolean;\n  /**\n   * Generally when a target crashes we don't need to know, with one exception.\n   * If a target crashes during the recording of a performance trace, after the\n   * trace when we try to resume() it, it will fail because it has crashed. This\n   * causes the performance panel to freeze (see crbug.com/333989070). So we\n   * mark the target as crashed so we can exit without trying to resume it. In\n   * `ChildTargetManager` we will mark a target as \"un-crashed\" when we get the\n   * `targetInfoChanged` event. This helps ensure we can deal with cases where\n   * the page crashes, but a reload fixes it and the targets get restored (see\n   * crbug.com/387258086).\n   */\n  #hasCrashed = false;\n  #targetInfo: Protocol.Target.TargetInfo|undefined;\n  #creatingModels?: boolean;\n\n  constructor(\n      targetManager: TargetManager, id: Protocol.Target.TargetID|'main', name: string, type: Type,\n      parentTarget: Target|null, sessionId: string, suspended: boolean,\n      connection: ProtocolClient.CDPConnection.CDPConnection|null, targetInfo?: Protocol.Target.TargetInfo) {\n    super(parentTarget, sessionId, connection);\n    this.#targetManager = targetManager;\n    this.#name = name;\n    this.#capabilitiesMask = 0;\n    switch (type) {\n      case Type.FRAME:\n        this.#capabilitiesMask = Capability.BROWSER | Capability.STORAGE | Capability.DOM | Capability.JS |\n            Capability.LOG | Capability.NETWORK | Capability.TARGET | Capability.TRACING | Capability.EMULATION |\n            Capability.INPUT | Capability.INSPECTOR | Capability.AUDITS | Capability.WEB_AUTHN | Capability.IO |\n            Capability.MEDIA | Capability.EVENT_BREAKPOINTS;\n        if (parentTarget?.type() !== Type.FRAME) {\n          // This matches backend exposing certain capabilities only for the main frame.\n          this.#capabilitiesMask |=\n              Capability.DEVICE_EMULATION | Capability.SCREEN_CAPTURE | Capability.SECURITY | Capability.SERVICE_WORKER;\n          if (Common.ParsedURL.schemeIs(targetInfo?.url as Platform.DevToolsPath.UrlString, 'chrome-extension:')) {\n            this.#capabilitiesMask &= ~Capability.SECURITY;\n          }\n\n          // TODO(dgozman): we report service workers for the whole frame tree on the main frame,\n          // while we should be able to only cover the subtree corresponding to the target.\n        }\n        break;\n      case Type.ServiceWorker:\n        this.#capabilitiesMask = Capability.JS | Capability.LOG | Capability.NETWORK | Capability.TARGET |\n            Capability.INSPECTOR | Capability.IO | Capability.EVENT_BREAKPOINTS;\n        if (parentTarget?.type() !== Type.FRAME) {\n          this.#capabilitiesMask |= Capability.BROWSER | Capability.STORAGE;\n        }\n        break;\n      case Type.SHARED_WORKER:\n        this.#capabilitiesMask = Capability.JS | Capability.LOG | Capability.NETWORK | Capability.TARGET |\n            Capability.IO | Capability.MEDIA | Capability.INSPECTOR | Capability.EVENT_BREAKPOINTS;\n        if (parentTarget?.type() !== Type.FRAME) {\n          this.#capabilitiesMask |= Capability.STORAGE;\n        }\n        break;\n      case Type.SHARED_STORAGE_WORKLET:\n        this.#capabilitiesMask = Capability.JS | Capability.LOG | Capability.INSPECTOR | Capability.EVENT_BREAKPOINTS;\n        break;\n      case Type.Worker:\n        this.#capabilitiesMask = Capability.JS | Capability.LOG | Capability.NETWORK | Capability.TARGET |\n            Capability.IO | Capability.MEDIA | Capability.EMULATION | Capability.EVENT_BREAKPOINTS;\n        if (parentTarget?.type() !== Type.FRAME) {\n          this.#capabilitiesMask |= Capability.STORAGE;\n        }\n        break;\n      case Type.WORKLET:\n        this.#capabilitiesMask = Capability.JS | Capability.LOG | Capability.EVENT_BREAKPOINTS | Capability.NETWORK;\n        break;\n      case Type.NODE:\n        this.#capabilitiesMask = Capability.JS | Capability.NETWORK | Capability.TARGET | Capability.IO;\n        break;\n      case Type.AUCTION_WORKLET:\n        this.#capabilitiesMask = Capability.JS | Capability.EVENT_BREAKPOINTS;\n        break;\n      case Type.BROWSER:\n        this.#capabilitiesMask = Capability.TARGET | Capability.IO;\n        break;\n      case Type.TAB:\n        this.#capabilitiesMask = Capability.TARGET | Capability.TRACING;\n        break;\n      case Type.NODE_WORKER:\n        this.#capabilitiesMask = Capability.JS | Capability.NETWORK | Capability.TARGET | Capability.IO;\n    }\n    this.#type = type;\n    this.#parentTarget = parentTarget;\n    this.#id = id;\n    this.#isSuspended = suspended;\n    this.#targetInfo = targetInfo;\n  }\n\n  /** Creates the models in the order in which they are provided */\n  createModels(models: SDKModelConstructor[]): void {\n    this.#creatingModels = true;\n    for (const model of models) {\n      this.model(model);\n    }\n    this.#creatingModels = false;\n  }\n\n  id(): Protocol.Target.TargetID|'main' {\n    return this.#id;\n  }\n\n  name(): string {\n    return this.#name || this.#inspectedURLName;\n  }\n\n  setName(name: string): void {\n    if (this.#name === name) {\n      return;\n    }\n    this.#name = name;\n    this.#targetManager.onNameChange(this);\n  }\n\n  type(): Type {\n    return this.#type;\n  }\n\n  markAsNodeJSForTest(): void {\n    this.#type = Type.NODE;\n  }\n\n  targetManager(): TargetManager {\n    return this.#targetManager;\n  }\n\n  hasAllCapabilities(capabilitiesMask: number): boolean {\n    // TODO(dgozman): get rid of this method, once we never observe targets with\n    // capability mask.\n    return (this.#capabilitiesMask & capabilitiesMask) === capabilitiesMask;\n  }\n\n  decorateLabel(label: string): string {\n    return (this.#type === Type.Worker || this.#type === Type.ServiceWorker) ? '\\u2699 ' + label : label;\n  }\n\n  parentTarget(): Target|null {\n    return this.#parentTarget;\n  }\n\n  outermostTarget(): Target|null {\n    let lastTarget: Target|null = null;\n    let currentTarget: Target|null = this;\n    do {\n      if (currentTarget.type() !== Type.TAB && currentTarget.type() !== Type.BROWSER) {\n        lastTarget = currentTarget;\n      }\n      currentTarget = currentTarget.parentTarget();\n    } while (currentTarget);\n\n    return lastTarget;\n  }\n\n  override dispose(reason: string): void {\n    super.dispose(reason);\n    this.#targetManager.removeTarget(this);\n    for (const model of this.#modelByConstructor.values()) {\n      model.dispose();\n    }\n  }\n\n  model<T extends SDKModel>(modelClass: new(arg1: Target) => T): T|null {\n    if (!this.#modelByConstructor.get(modelClass)) {\n      const info = SDKModel.registeredModels.get(modelClass);\n      if (info === undefined) {\n        throw new Error('Model class is not registered');\n      }\n      if ((this.#capabilitiesMask & info.capabilities) === info.capabilities) {\n        const model = new modelClass(this);\n        this.#modelByConstructor.set(modelClass, model);\n        if (!this.#creatingModels) {\n          this.#targetManager.modelAdded(modelClass, model, this.#targetManager.isInScope(this));\n        }\n      }\n    }\n    return (this.#modelByConstructor.get(modelClass) as T) || null;\n  }\n\n  models(): Map<new(arg1: Target) => SDKModel, SDKModel> {\n    return this.#modelByConstructor;\n  }\n\n  inspectedURL(): Platform.DevToolsPath.UrlString {\n    return this.#inspectedURL;\n  }\n\n  setInspectedURL(inspectedURL: Platform.DevToolsPath.UrlString): void {\n    this.#inspectedURL = inspectedURL;\n    const parsedURL = Common.ParsedURL.ParsedURL.fromString(inspectedURL);\n    this.#inspectedURLName = parsedURL ? parsedURL.lastPathComponentWithFragment() : '#' + this.#id;\n    this.#targetManager.onInspectedURLChange(this);\n    if (!this.#name) {\n      this.#targetManager.onNameChange(this);\n    }\n  }\n\n  hasCrashed(): boolean {\n    return this.#hasCrashed;\n  }\n\n  setHasCrashed(isCrashed: boolean): void {\n    const wasCrashed = this.#hasCrashed;\n\n    this.#hasCrashed = isCrashed;\n    // If the target has now been restored, check to see if it needs resuming.\n    // This ensures that if a target crashes whilst suspended, it is resumed\n    // when it is recovered.\n    // If the target is not suspended, resume() is a no-op, so it's safe to call.\n    if (wasCrashed && !isCrashed) {\n      void this.resume();\n    }\n  }\n\n  async suspend(reason?: string): Promise<void> {\n    if (this.#isSuspended) {\n      return;\n    }\n    this.#isSuspended = true;\n\n    // If the target has crashed, we will not attempt to suspend all the\n    // models, but we still mark it as suspended so we correctly track the\n    // state.\n    if (this.#hasCrashed) {\n      return;\n    }\n\n    await Promise.all(Array.from(this.models().values(), m => m.preSuspendModel(reason)));\n    await Promise.all(Array.from(this.models().values(), m => m.suspendModel(reason)));\n  }\n\n  async resume(): Promise<void> {\n    if (!this.#isSuspended) {\n      return;\n    }\n    this.#isSuspended = false;\n\n    if (this.#hasCrashed) {\n      return;\n    }\n\n    await Promise.all(Array.from(this.models().values(), m => m.resumeModel()));\n    await Promise.all(Array.from(this.models().values(), m => m.postResumeModel()));\n  }\n\n  suspended(): boolean {\n    return this.#isSuspended;\n  }\n\n  updateTargetInfo(targetInfo: Protocol.Target.TargetInfo): void {\n    this.#targetInfo = targetInfo;\n  }\n\n  targetInfo(): Protocol.Target.TargetInfo|undefined {\n    return this.#targetInfo;\n  }\n}\n\nexport enum Type {\n  FRAME = 'frame',\n  // eslint-disable-next-line @typescript-eslint/naming-convention -- Used by web_tests.\n  ServiceWorker = 'service-worker',\n  // eslint-disable-next-line @typescript-eslint/naming-convention -- Used by web_tests.\n  Worker = 'worker',\n  SHARED_WORKER = 'shared-worker',\n  SHARED_STORAGE_WORKLET = 'shared-storage-worklet',\n  NODE = 'node',\n  BROWSER = 'browser',\n  AUCTION_WORKLET = 'auction-worklet',\n  WORKLET = 'worklet',\n  TAB = 'tab',\n  NODE_WORKER = 'node-worker',\n}\n\nexport const enum Capability {\n  BROWSER = 1 << 0,\n  DOM = 1 << 1,\n  JS = 1 << 2,\n  LOG = 1 << 3,\n  NETWORK = 1 << 4,\n  TARGET = 1 << 5,\n  SCREEN_CAPTURE = 1 << 6,\n  TRACING = 1 << 7,\n  EMULATION = 1 << 8,\n  SECURITY = 1 << 9,\n  INPUT = 1 << 10,\n  INSPECTOR = 1 << 11,\n  DEVICE_EMULATION = 1 << 12,\n  STORAGE = 1 << 13,\n  SERVICE_WORKER = 1 << 14,\n  AUDITS = 1 << 15,\n  WEB_AUTHN = 1 << 16,\n  IO = 1 << 17,\n  MEDIA = 1 << 18,\n  EVENT_BREAKPOINTS = 1 << 19,\n  NONE = 0,\n}\n", "// Copyright 2011 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport type * as ProtocolProxyApi from '../../generated/protocol-proxy-api.js';\nimport * as Protocol from '../../generated/protocol.js';\nimport * as Common from '../common/common.js';\nimport * as i18n from '../i18n/i18n.js';\nimport * as Platform from '../platform/platform.js';\n\nimport {type DeferredDOMNode, DOMModel, type DOMNode} from './DOMModel.js';\nimport {FrameManager} from './FrameManager.js';\nimport {Events as NetworkManagerEvents, NetworkManager, type RequestUpdateDroppedEventData} from './NetworkManager.js';\nimport type {NetworkRequest} from './NetworkRequest.js';\nimport {Resource} from './Resource.js';\nimport {ExecutionContext, RuntimeModel} from './RuntimeModel.js';\nimport {SDKModel} from './SDKModel.js';\nimport {SecurityOriginManager} from './SecurityOriginManager.js';\nimport {StorageKeyManager} from './StorageKeyManager.js';\nimport {Capability, type Target, Type} from './Target.js';\nimport {TargetManager} from './TargetManager.js';\n\nexport class ResourceTreeModel extends SDKModel<EventTypes> {\n  readonly agent: ProtocolProxyApi.PageApi;\n  readonly storageAgent: ProtocolProxyApi.StorageApi;\n  readonly #securityOriginManager: SecurityOriginManager;\n  readonly #storageKeyManager: StorageKeyManager;\n  readonly framesInternal = new Map<string, ResourceTreeFrame>();\n  #cachedResourcesProcessed = false;\n  #pendingReloadOptions: {\n    ignoreCache: (boolean|undefined),\n    scriptToEvaluateOnLoad: (string|undefined),\n  }|null = null;\n  #reloadSuspensionCount = 0;\n  isInterstitialShowing = false;\n  mainFrame: ResourceTreeFrame|null = null;\n  #pendingBackForwardCacheNotUsedEvents = new Set<Protocol.Page.BackForwardCacheNotUsedEvent>();\n\n  constructor(target: Target) {\n    super(target);\n\n    const networkManager = target.model(NetworkManager);\n    if (networkManager) {\n      networkManager.addEventListener(NetworkManagerEvents.RequestFinished, this.onRequestFinished, this);\n      networkManager.addEventListener(NetworkManagerEvents.RequestUpdateDropped, this.onRequestUpdateDropped, this);\n    }\n    this.agent = target.pageAgent();\n    this.storageAgent = target.storageAgent();\n    void this.agent.invoke_enable({});\n    this.#securityOriginManager = (target.model(SecurityOriginManager) as SecurityOriginManager);\n    this.#storageKeyManager = (target.model(StorageKeyManager) as StorageKeyManager);\n    target.registerPageDispatcher(new PageDispatcher(this));\n\n    void this.#buildResourceTree();\n  }\n\n  async #buildResourceTree(): Promise<void> {\n    return await this.agent.invoke_getResourceTree().then(event => {\n      this.processCachedResources(event.getError() ? null : event.frameTree);\n      if (this.mainFrame) {\n        this.processPendingEvents(this.mainFrame);\n      }\n    });\n  }\n\n  static frameForRequest(request: NetworkRequest): ResourceTreeFrame|null {\n    const networkManager = NetworkManager.forRequest(request);\n    const resourceTreeModel = networkManager ? networkManager.target().model(ResourceTreeModel) : null;\n    if (!resourceTreeModel) {\n      return null;\n    }\n    return request.frameId ? resourceTreeModel.frameForId(request.frameId) : null;\n  }\n\n  static frames(): ResourceTreeFrame[] {\n    const result = [];\n    for (const resourceTreeModel of TargetManager.instance().models(ResourceTreeModel)) {\n      result.push(...resourceTreeModel.frames());\n    }\n    return result;\n  }\n\n  static resourceForURL(url: Platform.DevToolsPath.UrlString): Resource|null {\n    for (const resourceTreeModel of TargetManager.instance().models(ResourceTreeModel)) {\n      const mainFrame = resourceTreeModel.mainFrame;\n      // Workers call into this with no #frames available.\n      const result = mainFrame ? mainFrame.resourceForURL(url) : null;\n      if (result) {\n        return result;\n      }\n    }\n    return null;\n  }\n\n  static reloadAllPages(bypassCache?: boolean, scriptToEvaluateOnLoad?: string): void {\n    for (const resourceTreeModel of TargetManager.instance().models(ResourceTreeModel)) {\n      if (resourceTreeModel.target().parentTarget()?.type() !== Type.FRAME) {\n        resourceTreeModel.reloadPage(bypassCache, scriptToEvaluateOnLoad);\n      }\n    }\n  }\n\n  async storageKeyForFrame(frameId: Protocol.Page.FrameId): Promise<string|null> {\n    if (!this.framesInternal.has(frameId)) {\n      return null;\n    }\n\n    // TODO(crbug.com/445966299): Refactor to use `storageAgent().invoke_getStorageKey()` instead.\n    const response = await this.storageAgent.invoke_getStorageKey({frameId});\n    if (response.getError() === 'Frame tree node for given frame not found') {\n      return null;\n    }\n    return response.storageKey;\n  }\n\n  domModel(): DOMModel {\n    return this.target().model(DOMModel) as DOMModel;\n  }\n\n  private processCachedResources(mainFramePayload: Protocol.Page.FrameResourceTree|null): void {\n    // TODO(caseq): the url check below is a mergeable, conservative\n    // workaround for a problem caused by us requesting resources from a\n    // subtarget frame before it has committed. The proper fix is likely\n    // to be too complicated to be safely merged.\n    // See https://crbug.com/1081270 for details.\n    if (mainFramePayload && mainFramePayload.frame.url !== ':') {\n      this.dispatchEventToListeners(Events.WillLoadCachedResources);\n      this.addFramesRecursively(null, mainFramePayload);\n      this.target().setInspectedURL(mainFramePayload.frame.url as Platform.DevToolsPath.UrlString);\n    }\n    this.#cachedResourcesProcessed = true;\n    const runtimeModel = this.target().model(RuntimeModel);\n    if (runtimeModel) {\n      runtimeModel.setExecutionContextComparator(this.executionContextComparator.bind(this));\n      runtimeModel.fireExecutionContextOrderChanged();\n    }\n    this.dispatchEventToListeners(Events.CachedResourcesLoaded, this);\n  }\n\n  cachedResourcesLoaded(): boolean {\n    return this.#cachedResourcesProcessed;\n  }\n\n  private addFrame(frame: ResourceTreeFrame, _aboutToNavigate?: boolean): void {\n    this.framesInternal.set(frame.id, frame);\n    if (frame.isMainFrame()) {\n      this.mainFrame = frame;\n    }\n    this.dispatchEventToListeners(Events.FrameAdded, frame);\n    this.updateSecurityOrigins();\n    void this.updateStorageKeys();\n  }\n\n  frameAttached(\n      frameId: Protocol.Page.FrameId, parentFrameId: Protocol.Page.FrameId|null,\n      stackTrace?: Protocol.Runtime.StackTrace): ResourceTreeFrame|null {\n    const sameTargetParentFrame = parentFrameId ? (this.framesInternal.get(parentFrameId) || null) : null;\n    // Do nothing unless cached resource tree is processed - it will overwrite everything.\n    if (!this.#cachedResourcesProcessed && sameTargetParentFrame) {\n      return null;\n    }\n    if (this.framesInternal.has(frameId)) {\n      return null;\n    }\n\n    const frame = new ResourceTreeFrame(this, sameTargetParentFrame, frameId, null, stackTrace || null);\n    if (parentFrameId && !sameTargetParentFrame) {\n      frame.crossTargetParentFrameId = parentFrameId;\n    }\n    if (frame.isMainFrame() && this.mainFrame) {\n      // Navigation to the new backend process.\n      this.frameDetached(this.mainFrame.id, false);\n    }\n    this.addFrame(frame, true);\n    return frame;\n  }\n\n  frameNavigated(framePayload: Protocol.Page.Frame, type: Protocol.Page.NavigationType|undefined): void {\n    const sameTargetParentFrame =\n        framePayload.parentId ? (this.framesInternal.get(framePayload.parentId) || null) : null;\n    // Do nothing unless cached resource tree is processed - it will overwrite everything.\n    if (!this.#cachedResourcesProcessed && sameTargetParentFrame) {\n      return;\n    }\n    let frame: (ResourceTreeFrame|null) = this.framesInternal.get(framePayload.id) || null;\n    if (!frame) {\n      // Simulate missed \"frameAttached\" for a main frame navigation to the new backend process.\n      frame = this.frameAttached(framePayload.id, framePayload.parentId || null);\n      console.assert(Boolean(frame));\n      if (!frame) {\n        return;\n      }\n    }\n\n    this.dispatchEventToListeners(Events.FrameWillNavigate, frame);\n    frame.navigate(framePayload);\n    if (type) {\n      frame.backForwardCacheDetails.restoredFromCache = type === Protocol.Page.NavigationType.BackForwardCacheRestore;\n    }\n    if (frame.isMainFrame()) {\n      this.target().setInspectedURL(frame.url);\n    }\n    this.dispatchEventToListeners(Events.FrameNavigated, frame);\n\n    if (frame.isPrimaryFrame()) {\n      this.primaryPageChanged(frame, PrimaryPageChangeType.NAVIGATION);\n    }\n\n    // Fill frame with retained resources (the ones loaded using new loader).\n    const resources = frame.resources();\n    for (let i = 0; i < resources.length; ++i) {\n      this.dispatchEventToListeners(Events.ResourceAdded, resources[i]);\n    }\n\n    this.updateSecurityOrigins();\n    void this.updateStorageKeys();\n\n    if (frame.backForwardCacheDetails.restoredFromCache) {\n      FrameManager.instance().modelRemoved(this);\n      FrameManager.instance().modelAdded(this);\n      void this.#buildResourceTree();\n    }\n  }\n\n  primaryPageChanged(frame: ResourceTreeFrame, type: PrimaryPageChangeType): void {\n    this.processPendingEvents(frame);\n    this.dispatchEventToListeners(Events.PrimaryPageChanged, {frame, type});\n    const networkManager = this.target().model(NetworkManager);\n    if (networkManager && frame.isOutermostFrame()) {\n      networkManager.clearRequests();\n    }\n  }\n\n  documentOpened(framePayload: Protocol.Page.Frame): void {\n    this.frameNavigated(framePayload, undefined);\n    const frame = this.framesInternal.get(framePayload.id);\n    if (frame && !frame.getResourcesMap().get(framePayload.url)) {\n      const frameResource = this.createResourceFromFramePayload(\n          framePayload, framePayload.url as Platform.DevToolsPath.UrlString, Common.ResourceType.resourceTypes.Document,\n          framePayload.mimeType, null, null);\n      frameResource.isGenerated = true;\n      frame.addResource(frameResource);\n    }\n  }\n\n  frameDetached(frameId: Protocol.Page.FrameId, isSwap: boolean): void {\n    // Do nothing unless cached resource tree is processed - it will overwrite everything.\n    if (!this.#cachedResourcesProcessed) {\n      return;\n    }\n\n    const frame = this.framesInternal.get(frameId);\n    if (!frame) {\n      return;\n    }\n\n    const sameTargetParentFrame = frame.sameTargetParentFrame();\n    if (sameTargetParentFrame) {\n      sameTargetParentFrame.removeChildFrame(frame, isSwap);\n    } else {\n      frame.remove(isSwap);\n    }\n    this.updateSecurityOrigins();\n    void this.updateStorageKeys();\n  }\n\n  private onRequestFinished(event: Common.EventTarget.EventTargetEvent<NetworkRequest>): void {\n    if (!this.#cachedResourcesProcessed) {\n      return;\n    }\n\n    const request = event.data;\n    if (request.failed) {\n      return;\n    }\n\n    const frame = request.frameId ? this.framesInternal.get(request.frameId) : null;\n    if (frame) {\n      frame.addRequest(request);\n    }\n  }\n\n  private onRequestUpdateDropped(event: Common.EventTarget.EventTargetEvent<RequestUpdateDroppedEventData>): void {\n    if (!this.#cachedResourcesProcessed) {\n      return;\n    }\n\n    const data = event.data;\n    const frameId = data.frameId;\n    if (!frameId) {\n      return;\n    }\n    const frame = this.framesInternal.get(frameId);\n    if (!frame) {\n      return;\n    }\n\n    const url = data.url;\n    if (frame.getResourcesMap().get(url)) {\n      return;\n    }\n\n    const resource = new Resource(\n        this, null, url, frame.url, frameId, data.loaderId, Common.ResourceType.resourceTypes[data.resourceType],\n        data.mimeType, data.lastModified, null);\n    frame.addResource(resource);\n  }\n\n  frameForId(frameId: Protocol.Page.FrameId): ResourceTreeFrame|null {\n    return this.framesInternal.get(frameId) || null;\n  }\n\n  forAllResources(callback: (arg0: Resource) => boolean): boolean {\n    if (this.mainFrame) {\n      return this.mainFrame.callForFrameResources(callback);\n    }\n    return false;\n  }\n\n  frames(): ResourceTreeFrame[] {\n    return [...this.framesInternal.values()];\n  }\n\n  private addFramesRecursively(\n      sameTargetParentFrame: ResourceTreeFrame|null, frameTreePayload: Protocol.Page.FrameResourceTree): void {\n    const framePayload = frameTreePayload.frame;\n    let frame = this.framesInternal.get(framePayload.id);\n    if (!frame) {\n      frame = new ResourceTreeFrame(this, sameTargetParentFrame, framePayload.id, framePayload, null);\n    }\n    if (!sameTargetParentFrame && framePayload.parentId) {\n      frame.crossTargetParentFrameId = framePayload.parentId;\n    }\n    this.addFrame(frame);\n\n    for (const childFrame of frameTreePayload.childFrames || []) {\n      this.addFramesRecursively(frame, childFrame);\n    }\n\n    for (let i = 0; i < frameTreePayload.resources.length; ++i) {\n      const subresource = frameTreePayload.resources[i];\n      const resource = this.createResourceFromFramePayload(\n          framePayload, subresource.url as Platform.DevToolsPath.UrlString,\n          Common.ResourceType.resourceTypes[subresource.type], subresource.mimeType, subresource.lastModified || null,\n          subresource.contentSize || null);\n      frame.addResource(resource);\n    }\n\n    if (!frame.getResourcesMap().get(framePayload.url)) {\n      const frameResource = this.createResourceFromFramePayload(\n          framePayload, framePayload.url as Platform.DevToolsPath.UrlString, Common.ResourceType.resourceTypes.Document,\n          framePayload.mimeType, null, null);\n      frame.addResource(frameResource);\n    }\n  }\n\n  private createResourceFromFramePayload(\n      frame: Protocol.Page.Frame, url: Platform.DevToolsPath.UrlString, type: Common.ResourceType.ResourceType,\n      mimeType: string, lastModifiedTime: number|null, contentSize: number|null): Resource {\n    const lastModified = typeof lastModifiedTime === 'number' ? new Date(lastModifiedTime * 1000) : null;\n    return new Resource(\n        this, null, url, frame.url as Platform.DevToolsPath.UrlString, frame.id, frame.loaderId, type, mimeType,\n        lastModified, contentSize);\n  }\n\n  suspendReload(): void {\n    this.#reloadSuspensionCount++;\n  }\n\n  resumeReload(): void {\n    this.#reloadSuspensionCount--;\n    console.assert(this.#reloadSuspensionCount >= 0, 'Unbalanced call to ResourceTreeModel.resumeReload()');\n    if (!this.#reloadSuspensionCount && this.#pendingReloadOptions) {\n      const {ignoreCache, scriptToEvaluateOnLoad} = this.#pendingReloadOptions;\n      this.reloadPage(ignoreCache, scriptToEvaluateOnLoad);\n    }\n  }\n\n  reloadPage(ignoreCache?: boolean, scriptToEvaluateOnLoad?: string): void {\n    const loaderId = this.mainFrame?.loaderId;\n    if (!loaderId) {\n      return;\n    }\n    // Only dispatch PageReloadRequested upon first reload request to simplify client logic.\n    if (!this.#pendingReloadOptions) {\n      this.dispatchEventToListeners(Events.PageReloadRequested, this);\n    }\n    if (this.#reloadSuspensionCount) {\n      this.#pendingReloadOptions = {ignoreCache, scriptToEvaluateOnLoad};\n      return;\n    }\n    this.#pendingReloadOptions = null;\n    const networkManager = this.target().model(NetworkManager);\n    if (networkManager) {\n      networkManager.clearRequests();\n    }\n    this.dispatchEventToListeners(Events.WillReloadPage);\n    void this.agent.invoke_reload({ignoreCache, scriptToEvaluateOnLoad, loaderId});\n  }\n\n  navigate(url: Platform.DevToolsPath.UrlString): Promise<Protocol.Page.NavigateResponse> {\n    return this.agent.invoke_navigate({url});\n  }\n\n  async navigationHistory(): Promise<{\n    currentIndex: number,\n    entries: Protocol.Page.NavigationEntry[],\n  }|null> {\n    const response = await this.agent.invoke_getNavigationHistory();\n    if (response.getError()) {\n      return null;\n    }\n    return {currentIndex: response.currentIndex, entries: response.entries};\n  }\n\n  navigateToHistoryEntry(entry: Protocol.Page.NavigationEntry): void {\n    void this.agent.invoke_navigateToHistoryEntry({entryId: entry.id});\n  }\n\n  setLifecycleEventsEnabled(enabled: boolean): Promise<Protocol.ProtocolResponseWithError> {\n    return this.agent.invoke_setLifecycleEventsEnabled({enabled});\n  }\n\n  async fetchAppManifest(): Promise<{\n    url: Platform.DevToolsPath.UrlString,\n    data: string|null,\n    errors: Protocol.Page.AppManifestError[],\n  }> {\n    const response = await this.agent.invoke_getAppManifest({});\n    if (response.getError()) {\n      return {url: response.url as Platform.DevToolsPath.UrlString, data: null, errors: []};\n    }\n    return {url: response.url as Platform.DevToolsPath.UrlString, data: response.data || null, errors: response.errors};\n  }\n\n  async getInstallabilityErrors(): Promise<Protocol.Page.InstallabilityError[]> {\n    const response = await this.agent.invoke_getInstallabilityErrors();\n    return response.installabilityErrors || [];\n  }\n\n  async getAppId(): Promise<Protocol.Page.GetAppIdResponse> {\n    return await this.agent.invoke_getAppId();\n  }\n\n  private executionContextComparator(a: ExecutionContext, b: ExecutionContext): number {\n    function framePath(frame: ResourceTreeFrame|null): ResourceTreeFrame[] {\n      let currentFrame: (ResourceTreeFrame|null) = frame;\n      const parents = [];\n      while (currentFrame) {\n        parents.push(currentFrame);\n        currentFrame = currentFrame.sameTargetParentFrame();\n      }\n      return parents.reverse();\n    }\n\n    if (a.target() !== b.target()) {\n      return ExecutionContext.comparator(a, b);\n    }\n\n    const framesA = a.frameId ? framePath(this.frameForId(a.frameId)) : [];\n    const framesB = b.frameId ? framePath(this.frameForId(b.frameId)) : [];\n    let frameA;\n    let frameB;\n    for (let i = 0;; i++) {\n      if (!framesA[i] || !framesB[i] || (framesA[i] !== framesB[i])) {\n        frameA = framesA[i];\n        frameB = framesB[i];\n        break;\n      }\n    }\n    if (!frameA && frameB) {\n      return -1;\n    }\n\n    if (!frameB && frameA) {\n      return 1;\n    }\n\n    if (frameA && frameB) {\n      return frameA.id.localeCompare(frameB.id);\n    }\n\n    return ExecutionContext.comparator(a, b);\n  }\n\n  private getSecurityOriginData(): SecurityOriginData {\n    const securityOrigins = new Set<string>();\n\n    let mainSecurityOrigin: string|null = null;\n    let unreachableMainSecurityOrigin: string|null = null;\n    for (const frame of this.framesInternal.values()) {\n      const origin = frame.securityOrigin;\n      if (!origin) {\n        continue;\n      }\n\n      securityOrigins.add(origin);\n      if (frame.isMainFrame()) {\n        mainSecurityOrigin = origin;\n        if (frame.unreachableUrl()) {\n          const unreachableParsed = new Common.ParsedURL.ParsedURL(frame.unreachableUrl());\n          unreachableMainSecurityOrigin = unreachableParsed.securityOrigin();\n        }\n      }\n    }\n    return {\n      securityOrigins,\n      mainSecurityOrigin,\n      unreachableMainSecurityOrigin,\n    };\n  }\n\n  private async getStorageKeyData(): Promise<StorageKeyData> {\n    const storageKeys = new Set<string>();\n    let mainStorageKey: string|null = null;\n\n    for (const {isMainFrame, storageKey} of await Promise.all([...this.framesInternal.values()].map(\n             f => f.getStorageKey(/* forceFetch */ false).then(k => ({\n                                                                 isMainFrame: f.isMainFrame(),\n                                                                 storageKey: k,\n                                                               }))))) {\n      if (isMainFrame) {\n        mainStorageKey = storageKey;\n      }\n      if (storageKey) {\n        storageKeys.add(storageKey);\n      }\n    }\n\n    return {storageKeys, mainStorageKey};\n  }\n\n  private updateSecurityOrigins(): void {\n    const data = this.getSecurityOriginData();\n    this.#securityOriginManager.setMainSecurityOrigin(\n        data.mainSecurityOrigin || '', data.unreachableMainSecurityOrigin || '');\n    this.#securityOriginManager.updateSecurityOrigins(data.securityOrigins);\n  }\n\n  private async updateStorageKeys(): Promise<void> {\n    const data = await this.getStorageKeyData();\n    this.#storageKeyManager.setMainStorageKey(data.mainStorageKey || '');\n    this.#storageKeyManager.updateStorageKeys(data.storageKeys);\n  }\n\n  async getMainStorageKey(): Promise<string|null> {\n    return this.mainFrame ? await this.mainFrame.getStorageKey(/* forceFetch */ false) : null;\n  }\n\n  getMainSecurityOrigin(): string|null {\n    const data = this.getSecurityOriginData();\n    return data.mainSecurityOrigin || data.unreachableMainSecurityOrigin;\n  }\n\n  onBackForwardCacheNotUsed(event: Protocol.Page.BackForwardCacheNotUsedEvent): void {\n    if (this.mainFrame && this.mainFrame.id === event.frameId && this.mainFrame.loaderId === event.loaderId) {\n      this.mainFrame.setBackForwardCacheDetails(event);\n      this.dispatchEventToListeners(Events.BackForwardCacheDetailsUpdated, this.mainFrame);\n    } else {\n      this.#pendingBackForwardCacheNotUsedEvents.add(event);\n    }\n  }\n\n  processPendingEvents(frame: ResourceTreeFrame): void {\n    if (!frame.isMainFrame()) {\n      return;\n    }\n    for (const event of this.#pendingBackForwardCacheNotUsedEvents) {\n      if (frame.id === event.frameId && frame.loaderId === event.loaderId) {\n        frame.setBackForwardCacheDetails(event);\n        this.#pendingBackForwardCacheNotUsedEvents.delete(event);\n        break;\n      }\n    }\n    // No need to dispatch events here as this method call is followed by a `PrimaryPageChanged` event.\n  }\n}\n\nexport enum Events {\n  /* eslint-disable @typescript-eslint/naming-convention -- Used by web_tests. */\n  FrameAdded = 'FrameAdded',\n  FrameNavigated = 'FrameNavigated',\n  FrameDetached = 'FrameDetached',\n  FrameResized = 'FrameResized',\n  FrameWillNavigate = 'FrameWillNavigate',\n  PrimaryPageChanged = 'PrimaryPageChanged',\n  ResourceAdded = 'ResourceAdded',\n  WillLoadCachedResources = 'WillLoadCachedResources',\n  CachedResourcesLoaded = 'CachedResourcesLoaded',\n  DOMContentLoaded = 'DOMContentLoaded',\n  LifecycleEvent = 'LifecycleEvent',\n  Load = 'Load',\n  PageReloadRequested = 'PageReloadRequested',\n  WillReloadPage = 'WillReloadPage',\n  InterstitialShown = 'InterstitialShown',\n  InterstitialHidden = 'InterstitialHidden',\n  BackForwardCacheDetailsUpdated = 'BackForwardCacheDetailsUpdated',\n  JavaScriptDialogOpening = 'JavaScriptDialogOpening',\n  /* eslint-enable @typescript-eslint/naming-convention */\n}\n\nexport interface EventTypes {\n  [Events.FrameAdded]: ResourceTreeFrame;\n  [Events.FrameNavigated]: ResourceTreeFrame;\n  [Events.FrameDetached]: {frame: ResourceTreeFrame, isSwap: boolean};\n  [Events.FrameResized]: void;\n  [Events.FrameWillNavigate]: ResourceTreeFrame;\n  [Events.PrimaryPageChanged]: {frame: ResourceTreeFrame, type: PrimaryPageChangeType};\n  [Events.ResourceAdded]: Resource;\n  [Events.WillLoadCachedResources]: void;\n  [Events.CachedResourcesLoaded]: ResourceTreeModel;\n  [Events.DOMContentLoaded]: number;\n  [Events.LifecycleEvent]: {frameId: Protocol.Page.FrameId, name: string};\n  [Events.Load]: {resourceTreeModel: ResourceTreeModel, loadTime: number};\n  [Events.PageReloadRequested]: ResourceTreeModel;\n  [Events.WillReloadPage]: void;\n  [Events.InterstitialShown]: void;\n  [Events.InterstitialHidden]: void;\n  [Events.BackForwardCacheDetailsUpdated]: ResourceTreeFrame;\n  [Events.JavaScriptDialogOpening]: Protocol.Page.JavascriptDialogOpeningEvent;\n}\n\nexport class ResourceTreeFrame {\n  #model: ResourceTreeModel;\n  #sameTargetParentFrame: ResourceTreeFrame|null;\n  readonly #id: Protocol.Page.FrameId;\n  crossTargetParentFrameId: string|null = null;\n  #loaderId: Protocol.Network.LoaderId;\n  #name: string|null|undefined;\n  #url: Platform.DevToolsPath.UrlString;\n  #domainAndRegistry: string;\n  #securityOrigin: string|null;\n  #securityOriginDetails?: Protocol.Page.SecurityOriginDetails;\n  #storageKey?: Promise<string|null>;\n  #unreachableUrl: Platform.DevToolsPath.UrlString;\n  #adFrameStatus?: Protocol.Page.AdFrameStatus;\n  #secureContextType: Protocol.Page.SecureContextType|null;\n  #crossOriginIsolatedContextType: Protocol.Page.CrossOriginIsolatedContextType|null;\n  #gatedAPIFeatures: Protocol.Page.GatedAPIFeatures[]|null;\n  #creationStackTrace: Protocol.Runtime.StackTrace|null;\n  #creationStackTraceTarget: Target|null = null;\n  #childFrames = new Set<ResourceTreeFrame>();\n  resourcesMap = new Map<Platform.DevToolsPath.UrlString, Resource>();\n  backForwardCacheDetails: {\n    restoredFromCache: boolean|undefined,\n    explanations: Protocol.Page.BackForwardCacheNotRestoredExplanation[],\n    explanationsTree: Protocol.Page.BackForwardCacheNotRestoredExplanationTree|undefined,\n  } = {\n    restoredFromCache: undefined,\n    explanations: [],\n    explanationsTree: undefined,\n  };\n\n  constructor(\n      model: ResourceTreeModel, parentFrame: ResourceTreeFrame|null, frameId: Protocol.Page.FrameId,\n      payload: Protocol.Page.Frame|null, creationStackTrace: Protocol.Runtime.StackTrace|null) {\n    this.#model = model;\n    this.#sameTargetParentFrame = parentFrame;\n    this.#id = frameId;\n\n    this.#loaderId = payload?.loaderId ?? '' as Protocol.Network.LoaderId;\n    this.#name = payload?.name;\n    this.#url = payload && payload.url as Platform.DevToolsPath.UrlString || Platform.DevToolsPath.EmptyUrlString;\n    this.#domainAndRegistry = (payload?.domainAndRegistry) || '';\n    this.#securityOrigin = payload?.securityOrigin ?? null;\n    this.#securityOriginDetails = payload?.securityOriginDetails;\n    this.#unreachableUrl =\n        (payload && payload.unreachableUrl as Platform.DevToolsPath.UrlString) || Platform.DevToolsPath.EmptyUrlString;\n    this.#adFrameStatus = payload?.adFrameStatus;\n    this.#secureContextType = payload?.secureContextType ?? null;\n    this.#crossOriginIsolatedContextType = payload?.crossOriginIsolatedContextType ?? null;\n    this.#gatedAPIFeatures = payload?.gatedAPIFeatures ?? null;\n\n    this.#creationStackTrace = creationStackTrace;\n\n    if (this.#sameTargetParentFrame) {\n      this.#sameTargetParentFrame.#childFrames.add(this);\n    }\n  }\n\n  isSecureContext(): boolean {\n    return this.#secureContextType !== null && this.#secureContextType.startsWith('Secure');\n  }\n\n  getSecureContextType(): Protocol.Page.SecureContextType|null {\n    return this.#secureContextType;\n  }\n\n  isCrossOriginIsolated(): boolean {\n    return this.#crossOriginIsolatedContextType !== null && this.#crossOriginIsolatedContextType.startsWith('Isolated');\n  }\n\n  getCrossOriginIsolatedContextType(): Protocol.Page.CrossOriginIsolatedContextType|null {\n    return this.#crossOriginIsolatedContextType;\n  }\n\n  getGatedAPIFeatures(): Protocol.Page.GatedAPIFeatures[]|null {\n    return this.#gatedAPIFeatures;\n  }\n\n  getCreationStackTraceData():\n      {creationStackTrace: Protocol.Runtime.StackTrace|null, creationStackTraceTarget: Target} {\n    return {\n      creationStackTrace: this.#creationStackTrace,\n      creationStackTraceTarget: this.#creationStackTraceTarget || this.resourceTreeModel().target(),\n    };\n  }\n\n  navigate(framePayload: Protocol.Page.Frame): void {\n    this.#loaderId = framePayload.loaderId;\n    this.#name = framePayload.name;\n    this.#url = framePayload.url as Platform.DevToolsPath.UrlString;\n    this.#domainAndRegistry = framePayload.domainAndRegistry;\n    this.#securityOrigin = framePayload.securityOrigin;\n    this.#securityOriginDetails = framePayload.securityOriginDetails;\n    void this.getStorageKey(/* forceFetch */ true);\n    this.#unreachableUrl =\n        framePayload.unreachableUrl as Platform.DevToolsPath.UrlString || Platform.DevToolsPath.EmptyUrlString;\n    this.#adFrameStatus = framePayload?.adFrameStatus;\n    this.#secureContextType = framePayload.secureContextType;\n    this.#crossOriginIsolatedContextType = framePayload.crossOriginIsolatedContextType;\n    this.#gatedAPIFeatures = framePayload.gatedAPIFeatures;\n    this.backForwardCacheDetails = {\n      restoredFromCache: undefined,\n      explanations: [],\n      explanationsTree: undefined,\n    };\n\n    const mainResource = this.resourcesMap.get(this.#url);\n    this.resourcesMap.clear();\n    this.removeChildFrames();\n    if (mainResource && mainResource.loaderId === this.#loaderId) {\n      this.addResource(mainResource);\n    }\n  }\n\n  resourceTreeModel(): ResourceTreeModel {\n    return this.#model;\n  }\n\n  get id(): Protocol.Page.FrameId {\n    return this.#id;\n  }\n\n  get name(): string {\n    return this.#name || '';\n  }\n\n  get url(): Platform.DevToolsPath.UrlString {\n    return this.#url;\n  }\n\n  domainAndRegistry(): string {\n    return this.#domainAndRegistry;\n  }\n\n  async getAdScriptAncestry(frameId: Protocol.Page.FrameId): Promise<Protocol.Page.AdScriptAncestry|null> {\n    const res = await this.#model.agent.invoke_getAdScriptAncestry({frameId});\n    return res.adScriptAncestry || null;\n  }\n\n  get securityOrigin(): string|null {\n    return this.#securityOrigin;\n  }\n\n  get securityOriginDetails(): Protocol.Page.SecurityOriginDetails|null {\n    return this.#securityOriginDetails ?? null;\n  }\n\n  getStorageKey(forceFetch: boolean): Promise<string|null> {\n    if (!this.#storageKey || forceFetch) {\n      this.#storageKey = this.#model.storageKeyForFrame(this.#id);\n    }\n    return this.#storageKey;\n  }\n\n  unreachableUrl(): Platform.DevToolsPath.UrlString {\n    return this.#unreachableUrl;\n  }\n\n  get loaderId(): Protocol.Network.LoaderId {\n    return this.#loaderId;\n  }\n\n  adFrameType(): Protocol.Page.AdFrameType {\n    return this.#adFrameStatus?.adFrameType || Protocol.Page.AdFrameType.None;\n  }\n\n  adFrameStatus(): Protocol.Page.AdFrameStatus|undefined {\n    return this.#adFrameStatus;\n  }\n\n  get childFrames(): ResourceTreeFrame[] {\n    return [...this.#childFrames];\n  }\n\n  /**\n   * Returns the parent frame if both #frames are part of the same process/target.\n   */\n  sameTargetParentFrame(): ResourceTreeFrame|null {\n    return this.#sameTargetParentFrame;\n  }\n\n  /**\n   * Returns the parent frame if both #frames are part of different processes/targets (child is an OOPIF).\n   */\n  crossTargetParentFrame(): ResourceTreeFrame|null {\n    if (!this.crossTargetParentFrameId) {\n      return null;\n    }\n    const parentTarget = this.#model.target().parentTarget();\n    if (parentTarget?.type() !== Type.FRAME) {\n      return null;\n    }\n    const parentModel = parentTarget.model(ResourceTreeModel);\n    if (!parentModel) {\n      return null;\n    }\n    // Note that parent #model has already processed cached resources:\n    // - when parent target was created, we issued getResourceTree call;\n    // - strictly after we issued setAutoAttach call;\n    // - both of them were handled in renderer in the same order;\n    // - cached resource tree got processed on parent #model;\n    // - child target was created as a result of setAutoAttach call.\n    return parentModel.framesInternal.get(this.crossTargetParentFrameId) || null;\n  }\n\n  /**\n   * Returns the parent frame. There is only 1 parent and it's either in the\n   * same target or it's cross-target.\n   */\n  parentFrame(): ResourceTreeFrame|null {\n    return this.sameTargetParentFrame() || this.crossTargetParentFrame();\n  }\n\n  /**\n   * Returns true if this is the main frame of its target. A main frame is the root of the frame tree i.e. a frame without\n   * a parent, but the whole frame tree could be embedded in another frame tree (e.g. OOPIFs, fenced frames, portals).\n   * https://chromium.googlesource.com/chromium/src/+/HEAD/docs/frame_trees.md\n   */\n  isMainFrame(): boolean {\n    return !this.#sameTargetParentFrame;\n  }\n\n  /**\n   * Returns true if this is a main frame which is not embedded in another frame tree. With MPArch features such as\n   * back/forward cache or prerender there can be multiple outermost frames.\n   * https://chromium.googlesource.com/chromium/src/+/HEAD/docs/frame_trees.md\n   */\n  isOutermostFrame(): boolean {\n    return this.#model.target().parentTarget()?.type() !== Type.FRAME && !this.#sameTargetParentFrame &&\n        !this.crossTargetParentFrameId;\n  }\n\n  /**\n   * Returns true if this is the primary frame of the browser tab. There can only be one primary frame for each\n   * browser tab. It is the outermost frame being actively displayed in the browser tab.\n   * https://chromium.googlesource.com/chromium/src/+/HEAD/docs/frame_trees.md\n   */\n  isPrimaryFrame(): boolean {\n    return !this.#sameTargetParentFrame && this.#model.target() === TargetManager.instance().primaryPageTarget();\n  }\n\n  removeChildFrame(frame: ResourceTreeFrame, isSwap: boolean): void {\n    this.#childFrames.delete(frame);\n    frame.remove(isSwap);\n  }\n\n  private removeChildFrames(): void {\n    const frames = this.#childFrames;\n    this.#childFrames = new Set();\n    for (const frame of frames) {\n      frame.remove(false);\n    }\n  }\n\n  remove(isSwap: boolean): void {\n    this.removeChildFrames();\n    this.#model.framesInternal.delete(this.id);\n    this.#model.dispatchEventToListeners(Events.FrameDetached, {frame: this, isSwap});\n  }\n\n  addResource(resource: Resource): void {\n    if (this.resourcesMap.get(resource.url) === resource) {\n      // Already in the tree, we just got an extra update.\n      return;\n    }\n    this.resourcesMap.set(resource.url, resource);\n    this.#model.dispatchEventToListeners(Events.ResourceAdded, resource);\n  }\n\n  addRequest(request: NetworkRequest): void {\n    let resource = this.resourcesMap.get(request.url());\n    if (resource?.request === request) {\n      // Already in the tree, we just got an extra update.\n      return;\n    }\n    resource = new Resource(\n        this.#model, request, request.url(), request.documentURL, request.frameId, request.loaderId,\n        request.resourceType(), request.mimeType, null, null);\n    this.resourcesMap.set(resource.url, resource);\n    this.#model.dispatchEventToListeners(Events.ResourceAdded, resource);\n  }\n\n  resources(): Resource[] {\n    return Array.from(this.resourcesMap.values());\n  }\n\n  resourceForURL(url: Platform.DevToolsPath.UrlString): Resource|null {\n    const resource = this.resourcesMap.get(url);\n    if (resource) {\n      return resource;\n    }\n    for (const frame of this.#childFrames) {\n      const resource = frame.resourceForURL(url);\n      if (resource) {\n        return resource;\n      }\n    }\n    return null;\n  }\n\n  callForFrameResources(callback: (arg0: Resource) => boolean): boolean {\n    for (const resource of this.resourcesMap.values()) {\n      if (callback(resource)) {\n        return true;\n      }\n    }\n\n    for (const frame of this.#childFrames) {\n      if (frame.callForFrameResources(callback)) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  displayName(): string {\n    if (this.isOutermostFrame()) {\n      return i18n.i18n.lockedString('top');\n    }\n    const subtitle = new Common.ParsedURL.ParsedURL(this.#url).displayName;\n    if (subtitle) {\n      if (!this.#name) {\n        return subtitle;\n      }\n      return this.#name + ' (' + subtitle + ')';\n    }\n    return i18n.i18n.lockedString('iframe');\n  }\n\n  async getOwnerDeferredDOMNode(): Promise<DeferredDOMNode|null> {\n    const parentFrame = this.parentFrame();\n    if (!parentFrame) {\n      return null;\n    }\n    return await parentFrame.resourceTreeModel().domModel().getOwnerNodeForFrame(this.#id);\n  }\n\n  async getOwnerDOMNodeOrDocument(): Promise<DOMNode|null> {\n    const deferredNode = await this.getOwnerDeferredDOMNode();\n    if (deferredNode) {\n      return await deferredNode.resolvePromise();\n    }\n    if (this.isOutermostFrame()) {\n      return await this.resourceTreeModel().domModel().requestDocument();\n    }\n    return null;\n  }\n\n  async highlight(): Promise<void> {\n    const parentFrame = this.parentFrame();\n    const parentTarget = this.resourceTreeModel().target().parentTarget();\n    const highlightFrameOwner = async(domModel: DOMModel): Promise<void> => {\n      const deferredNode = await domModel.getOwnerNodeForFrame(this.#id);\n      if (deferredNode) {\n        domModel.overlayModel().highlightInOverlay({deferredNode, selectorList: ''}, 'all', true);\n      }\n    };\n\n    if (parentFrame) {\n      return await highlightFrameOwner(parentFrame.resourceTreeModel().domModel());\n    }\n\n    // Fenced frames.\n    if (parentTarget?.type() === Type.FRAME) {\n      const domModel = parentTarget.model(DOMModel);\n      if (domModel) {\n        return await highlightFrameOwner(domModel);\n      }\n    }\n\n    // For the outermost frame there is no owner node. Highlight the whole #document instead.\n    const document = await this.resourceTreeModel().domModel().requestDocument();\n    if (document) {\n      this.resourceTreeModel().domModel().overlayModel().highlightInOverlay(\n          {node: document, selectorList: ''}, 'all', true);\n    }\n  }\n\n  async getPermissionsPolicyState(): Promise<Protocol.Page.PermissionsPolicyFeatureState[]|null> {\n    const response =\n        await this.resourceTreeModel().target().pageAgent().invoke_getPermissionsPolicyState({frameId: this.#id});\n    if (response.getError()) {\n      return null;\n    }\n    return response.states;\n  }\n\n  async getOriginTrials(): Promise<Protocol.Page.OriginTrial[]> {\n    const response = await this.resourceTreeModel().target().pageAgent().invoke_getOriginTrials({frameId: this.#id});\n    if (response.getError()) {\n      return [];\n    }\n    return response.originTrials;\n  }\n\n  setCreationStackTrace(creationStackTraceData: {\n    creationStackTrace: Protocol.Runtime.StackTrace|null,\n    creationStackTraceTarget: Target,\n  }): void {\n    this.#creationStackTrace = creationStackTraceData.creationStackTrace;\n    this.#creationStackTraceTarget = creationStackTraceData.creationStackTraceTarget;\n  }\n\n  setBackForwardCacheDetails(event: Protocol.Page.BackForwardCacheNotUsedEvent): void {\n    this.backForwardCacheDetails.restoredFromCache = false;\n    this.backForwardCacheDetails.explanations = event.notRestoredExplanations;\n    this.backForwardCacheDetails.explanationsTree = event.notRestoredExplanationsTree;\n  }\n\n  getResourcesMap(): Map<string, Resource> {\n    return this.resourcesMap;\n  }\n}\n\nexport class PageDispatcher implements ProtocolProxyApi.PageDispatcher {\n  #resourceTreeModel: ResourceTreeModel;\n  constructor(resourceTreeModel: ResourceTreeModel) {\n    this.#resourceTreeModel = resourceTreeModel;\n  }\n  backForwardCacheNotUsed(params: Protocol.Page.BackForwardCacheNotUsedEvent): void {\n    this.#resourceTreeModel.onBackForwardCacheNotUsed(params);\n  }\n\n  domContentEventFired({timestamp}: Protocol.Page.DomContentEventFiredEvent): void {\n    this.#resourceTreeModel.dispatchEventToListeners(Events.DOMContentLoaded, timestamp);\n  }\n\n  loadEventFired({timestamp}: Protocol.Page.LoadEventFiredEvent): void {\n    this.#resourceTreeModel.dispatchEventToListeners(\n        Events.Load, {resourceTreeModel: this.#resourceTreeModel, loadTime: timestamp});\n  }\n\n  lifecycleEvent({frameId, name}: Protocol.Page.LifecycleEventEvent): void {\n    this.#resourceTreeModel.dispatchEventToListeners(Events.LifecycleEvent, {frameId, name});\n  }\n\n  frameAttached({frameId, parentFrameId, stack}: Protocol.Page.FrameAttachedEvent): void {\n    this.#resourceTreeModel.frameAttached(frameId, parentFrameId, stack);\n  }\n\n  frameNavigated({frame, type}: Protocol.Page.FrameNavigatedEvent): void {\n    this.#resourceTreeModel.frameNavigated(frame, type);\n  }\n\n  documentOpened({frame}: Protocol.Page.DocumentOpenedEvent): void {\n    this.#resourceTreeModel.documentOpened(frame);\n  }\n\n  frameDetached({frameId, reason}: Protocol.Page.FrameDetachedEvent): void {\n    this.#resourceTreeModel.frameDetached(frameId, reason === Protocol.Page.FrameDetachedEventReason.Swap);\n  }\n\n  frameSubtreeWillBeDetached(_params: Protocol.Page.FrameSubtreeWillBeDetachedEvent): void {\n  }\n\n  frameStartedLoading({}: Protocol.Page.FrameStartedLoadingEvent): void {\n  }\n\n  frameStoppedLoading({}: Protocol.Page.FrameStoppedLoadingEvent): void {\n  }\n\n  frameRequestedNavigation({}: Protocol.Page.FrameRequestedNavigationEvent): void {\n  }\n\n  frameScheduledNavigation({}: Protocol.Page.FrameScheduledNavigationEvent): void {\n  }\n\n  frameClearedScheduledNavigation({}: Protocol.Page.FrameClearedScheduledNavigationEvent): void {\n  }\n\n  frameStartedNavigating({}: Protocol.Page.FrameStartedNavigatingEvent): void {\n  }\n\n  navigatedWithinDocument({}: Protocol.Page.NavigatedWithinDocumentEvent): void {\n  }\n\n  frameResized(): void {\n    this.#resourceTreeModel.dispatchEventToListeners(Events.FrameResized);\n  }\n\n  javascriptDialogOpening(event: Protocol.Page.JavascriptDialogOpeningEvent): void {\n    this.#resourceTreeModel.dispatchEventToListeners(Events.JavaScriptDialogOpening, event);\n    if (!event.hasBrowserHandler) {\n      void this.#resourceTreeModel.agent.invoke_handleJavaScriptDialog({accept: false});\n    }\n  }\n\n  javascriptDialogClosed({}: Protocol.Page.JavascriptDialogClosedEvent): void {\n  }\n\n  screencastFrame({}: Protocol.Page.ScreencastFrameEvent): void {\n  }\n\n  screencastVisibilityChanged({}: Protocol.Page.ScreencastVisibilityChangedEvent): void {\n  }\n\n  interstitialShown(): void {\n    this.#resourceTreeModel.isInterstitialShowing = true;\n    this.#resourceTreeModel.dispatchEventToListeners(Events.InterstitialShown);\n  }\n\n  interstitialHidden(): void {\n    this.#resourceTreeModel.isInterstitialShowing = false;\n    this.#resourceTreeModel.dispatchEventToListeners(Events.InterstitialHidden);\n  }\n\n  windowOpen({}: Protocol.Page.WindowOpenEvent): void {\n  }\n\n  compilationCacheProduced({}: Protocol.Page.CompilationCacheProducedEvent): void {\n  }\n\n  fileChooserOpened({}: Protocol.Page.FileChooserOpenedEvent): void {\n  }\n\n  downloadWillBegin({}: Protocol.Page.DownloadWillBeginEvent): void {\n  }\n\n  downloadProgress(): void {\n  }\n}\n\nSDKModel.register(ResourceTreeModel, {capabilities: Capability.DOM, autostart: true, early: true});\nexport interface SecurityOriginData {\n  securityOrigins: Set<string>;\n  mainSecurityOrigin: string|null;\n  unreachableMainSecurityOrigin: string|null;\n}\n\nexport interface StorageKeyData {\n  storageKeys: Set<string>;\n  mainStorageKey: string|null;\n}\n\nexport const enum PrimaryPageChangeType {\n  NAVIGATION = 'Navigation',\n  ACTIVATION = 'Activation',\n}\n", "// Copyright 2021 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\n/*\n * Copyright (C) 2009, 2010 Google Inc. All rights reserved.\n * Copyright (C) 2009 Joseph Pecoraro\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are\n * met:\n *\n *     * Redistributions of source code must retain the above copyright\n * notice, this list of conditions and the following disclaimer.\n *     * Redistributions in binary form must reproduce the above\n * copyright notice, this list of conditions and the following disclaimer\n * in the documentation and/or other materials provided with the\n * distribution.\n *     * Neither the #name of Google Inc. nor the names of its\n * contributors may be used to endorse or promote products derived from\n * this software without specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n * \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n * A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n * OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n * THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n/* eslint-disable @devtools/no-adopted-style-sheets */\n\nimport type * as ProtocolProxyApi from '../../generated/protocol-proxy-api.js';\nimport * as Protocol from '../../generated/protocol.js';\nimport * as Common from '../common/common.js';\nimport * as Platform from '../platform/platform.js';\nimport * as Root from '../root/root.js';\n\nimport {CSSModel} from './CSSModel.js';\nimport {FrameManager} from './FrameManager.js';\nimport {OverlayModel} from './OverlayModel.js';\nimport {RemoteObject} from './RemoteObject.js';\nimport {ResourceTreeModel} from './ResourceTreeModel.js';\nimport {RuntimeModel} from './RuntimeModel.js';\nimport {SDKModel} from './SDKModel.js';\nimport {Capability, type Target} from './Target.js';\nimport {TargetManager} from './TargetManager.js';\n\n/** Keep this list in sync with https://w3c.github.io/aria/#state_prop_def **/\nexport const ARIA_ATTRIBUTES = new Set<string>([\n  'role',\n  'aria-activedescendant',\n  'aria-atomic',\n  'aria-autocomplete',\n  'aria-braillelabel',\n  'aria-brailleroledescription',\n  'aria-busy',\n  'aria-checked',\n  'aria-colcount',\n  'aria-colindex',\n  'aria-colindextext',\n  'aria-colspan',\n  'aria-controls',\n  'aria-current',\n  'aria-describedby',\n  'aria-description',\n  'aria-details',\n  'aria-disabled',\n  'aria-dropeffect',\n  'aria-errormessage',\n  'aria-expanded',\n  'aria-flowto',\n  'aria-grabbed',\n  'aria-haspopup',\n  'aria-hidden',\n  'aria-invalid',\n  'aria-keyshortcuts',\n  'aria-label',\n  'aria-labelledby',\n  'aria-level',\n  'aria-live',\n  'aria-modal',\n  'aria-multiline',\n  'aria-multiselectable',\n  'aria-orientation',\n  'aria-owns',\n  'aria-placeholder',\n  'aria-posinset',\n  'aria-pressed',\n  'aria-readonly',\n  'aria-relevant',\n  'aria-required',\n  'aria-roledescription',\n  'aria-rowcount',\n  'aria-rowindex',\n  'aria-rowindextext',\n  'aria-rowspan',\n  'aria-selected',\n  'aria-setsize',\n  'aria-sort',\n  'aria-valuemax',\n  'aria-valuemin',\n  'aria-valuenow',\n  'aria-valuetext',\n]);\n\nexport class DOMNode {\n  #domModel: DOMModel;\n  #agent: ProtocolProxyApi.DOMApi;\n  ownerDocument!: DOMDocument|null;\n  #isInShadowTree!: boolean;\n  id!: Protocol.DOM.NodeId;\n  index: number|undefined = undefined;\n  #backendNodeId!: Protocol.DOM.BackendNodeId;\n  #nodeType!: number;\n  #nodeName!: string;\n  #localName!: string;\n  nodeValueInternal!: string;\n  #pseudoType!: Protocol.DOM.PseudoType|undefined;\n  #pseudoIdentifier?: string;\n  #shadowRootType!: Protocol.DOM.ShadowRootType|undefined;\n  #frameOwnerFrameId!: Protocol.Page.FrameId|null;\n  #xmlVersion!: string|undefined;\n  #isSVGNode!: boolean;\n  #isScrollable!: boolean;\n  #affectedByStartingStyles!: boolean;\n  #creationStackTrace: Promise<Protocol.Runtime.StackTrace|null>|null = null;\n  #pseudoElements = new Map<string, DOMNode[]>();\n  #distributedNodes: DOMNodeShortcut[] = [];\n  assignedSlot: DOMNodeShortcut|null = null;\n  readonly shadowRootsInternal: DOMNode[] = [];\n  #attributes = new Map<string, Attribute>();\n  #markers = new Map<string, unknown>();\n  #subtreeMarkerCount = 0;\n  childNodeCountInternal!: number;\n  childrenInternal: DOMNode[]|null = null;\n  nextSibling: DOMNode|null = null;\n  previousSibling: DOMNode|null = null;\n  firstChild: DOMNode|null = null;\n  lastChild: DOMNode|null = null;\n  parentNode: DOMNode|null = null;\n  templateContentInternal?: DOMNode;\n  contentDocumentInternal?: DOMDocument;\n  childDocumentPromiseForTesting?: Promise<DOMDocument|null>;\n  #importedDocument?: DOMNode;\n  publicId?: string;\n  systemId?: string;\n  internalSubset?: string;\n  name?: string;\n  value?: string;\n  /**\n   * Set when a DOMNode is retained in a detached sub-tree.\n   */\n  retained = false;\n  /**\n   * Set if a DOMNode is a root of a detached sub-tree.\n   */\n  detached = false;\n  #retainedNodes?: Set<Protocol.DOM.BackendNodeId>;\n  #adoptedStyleSheets: AdoptedStyleSheet[] = [];\n\n  constructor(domModel: DOMModel) {\n    this.#domModel = domModel;\n    this.#agent = this.#domModel.getAgent();\n  }\n\n  static create(\n      domModel: DOMModel, doc: DOMDocument|null, isInShadowTree: boolean, payload: Protocol.DOM.Node,\n      retainedNodes?: Set<Protocol.DOM.BackendNodeId>): DOMNode {\n    const node = new DOMNode(domModel);\n    node.init(doc, isInShadowTree, payload, retainedNodes);\n    return node;\n  }\n\n  init(\n      doc: DOMDocument|null, isInShadowTree: boolean, payload: Protocol.DOM.Node,\n      retainedNodes?: Set<Protocol.DOM.BackendNodeId>): void {\n    this.#agent = this.#domModel.getAgent();\n    this.ownerDocument = doc;\n    this.#isInShadowTree = isInShadowTree;\n\n    this.id = payload.nodeId;\n    this.#backendNodeId = payload.backendNodeId;\n    this.#domModel.registerNode(this);\n    this.#nodeType = payload.nodeType;\n    this.#nodeName = payload.nodeName;\n    this.#localName = payload.localName;\n    this.nodeValueInternal = payload.nodeValue;\n    this.#pseudoType = payload.pseudoType;\n    this.#pseudoIdentifier = payload.pseudoIdentifier;\n    this.#shadowRootType = payload.shadowRootType;\n    this.#frameOwnerFrameId = payload.frameId || null;\n    this.#xmlVersion = payload.xmlVersion;\n    this.#isSVGNode = Boolean(payload.isSVG);\n    this.#isScrollable = Boolean(payload.isScrollable);\n    this.#affectedByStartingStyles = Boolean(payload.affectedByStartingStyles);\n    this.#retainedNodes = retainedNodes;\n\n    if (this.#retainedNodes?.has(this.backendNodeId())) {\n      this.retained = true;\n    }\n\n    if (payload.attributes) {\n      this.setAttributesPayload(payload.attributes);\n    }\n\n    if (payload.adoptedStyleSheets) {\n      this.#adoptedStyleSheets = this.toAdoptedStyleSheets(payload.adoptedStyleSheets);\n    }\n\n    this.childNodeCountInternal = payload.childNodeCount || 0;\n    if (payload.shadowRoots) {\n      for (let i = 0; i < payload.shadowRoots.length; ++i) {\n        const root = payload.shadowRoots[i];\n        const node = DOMNode.create(this.#domModel, this.ownerDocument, true, root, retainedNodes);\n        this.shadowRootsInternal.push(node);\n        node.parentNode = this;\n      }\n    }\n\n    if (payload.templateContent) {\n      this.templateContentInternal =\n          DOMNode.create(this.#domModel, this.ownerDocument, true, payload.templateContent, retainedNodes);\n      this.templateContentInternal.parentNode = this;\n      this.childrenInternal = [];\n    }\n\n    const frameOwnerTags = new Set(['EMBED', 'IFRAME', 'OBJECT', 'FENCEDFRAME']);\n    if (payload.contentDocument) {\n      this.contentDocumentInternal = new DOMDocument(this.#domModel, payload.contentDocument);\n      this.contentDocumentInternal.parentNode = this;\n      this.childrenInternal = [];\n    } else if (payload.frameId && frameOwnerTags.has(payload.nodeName)) {\n      // At this point we know we are in an OOPIF, otherwise `payload.contentDocument` would have been set.\n      this.childDocumentPromiseForTesting = this.requestChildDocument(payload.frameId, this.#domModel.target());\n      this.childrenInternal = [];\n    }\n\n    if (payload.importedDocument) {\n      this.#importedDocument =\n          DOMNode.create(this.#domModel, this.ownerDocument, true, payload.importedDocument, retainedNodes);\n      this.#importedDocument.parentNode = this;\n      this.childrenInternal = [];\n    }\n\n    if (payload.distributedNodes) {\n      this.setDistributedNodePayloads(payload.distributedNodes);\n    }\n\n    if (payload.assignedSlot) {\n      this.setAssignedSlot(payload.assignedSlot);\n    }\n\n    if (payload.children) {\n      this.setChildrenPayload(payload.children);\n    }\n\n    this.setPseudoElements(payload.pseudoElements);\n\n    if (this.#nodeType === Node.ELEMENT_NODE) {\n      // HTML and BODY from internal iframes should not overwrite top-level ones.\n      if (this.ownerDocument && !this.ownerDocument.documentElement && this.#nodeName === 'HTML') {\n        this.ownerDocument.documentElement = this;\n      }\n      if (this.ownerDocument && !this.ownerDocument.body && this.#nodeName === 'BODY') {\n        this.ownerDocument.body = this;\n      }\n    } else if (this.#nodeType === Node.DOCUMENT_TYPE_NODE) {\n      this.publicId = payload.publicId;\n      this.systemId = payload.systemId;\n      this.internalSubset = payload.internalSubset;\n    } else if (this.#nodeType === Node.ATTRIBUTE_NODE) {\n      this.name = payload.name;\n      this.value = payload.value;\n    }\n  }\n\n  private async requestChildDocument(frameId: Protocol.Page.FrameId, notInTarget: Target): Promise<DOMDocument|null> {\n    const frame = await FrameManager.instance().getOrWaitForFrame(frameId, notInTarget);\n    const childModel = frame.resourceTreeModel()?.target().model(DOMModel);\n    return await (childModel?.requestDocument() || null);\n  }\n\n  isAdFrameNode(): boolean {\n    if (this.isIframe() && this.#frameOwnerFrameId) {\n      const frame = FrameManager.instance().getFrame(this.#frameOwnerFrameId);\n      if (!frame) {\n        return false;\n      }\n      return frame.adFrameType() !== Protocol.Page.AdFrameType.None;\n    }\n    return false;\n  }\n\n  isSVGNode(): boolean {\n    return this.#isSVGNode;\n  }\n\n  isScrollable(): boolean {\n    return this.#isScrollable;\n  }\n\n  affectedByStartingStyles(): boolean {\n    return this.#affectedByStartingStyles;\n  }\n\n  isMediaNode(): boolean {\n    return this.#nodeName === 'AUDIO' || this.#nodeName === 'VIDEO';\n  }\n\n  isViewTransitionPseudoNode(): boolean {\n    if (!this.#pseudoType) {\n      return false;\n    }\n\n    return [\n      Protocol.DOM.PseudoType.ViewTransition,\n      Protocol.DOM.PseudoType.ViewTransitionGroup,\n      Protocol.DOM.PseudoType.ViewTransitionGroupChildren,\n      Protocol.DOM.PseudoType.ViewTransitionImagePair,\n      Protocol.DOM.PseudoType.ViewTransitionOld,\n      Protocol.DOM.PseudoType.ViewTransitionNew,\n    ].includes(this.#pseudoType);\n  }\n\n  creationStackTrace(): Promise<Protocol.Runtime.StackTrace|null> {\n    if (this.#creationStackTrace) {\n      return this.#creationStackTrace;\n    }\n\n    const stackTracesPromise = this.#agent.invoke_getNodeStackTraces({nodeId: this.id});\n    this.#creationStackTrace = stackTracesPromise.then(res => res.creation || null);\n    return this.#creationStackTrace;\n  }\n\n  get subtreeMarkerCount(): number {\n    return this.#subtreeMarkerCount;\n  }\n\n  domModel(): DOMModel {\n    return this.#domModel;\n  }\n\n  backendNodeId(): Protocol.DOM.BackendNodeId {\n    return this.#backendNodeId;\n  }\n\n  children(): DOMNode[]|null {\n    return this.childrenInternal ? this.childrenInternal.slice() : null;\n  }\n\n  setChildren(children: DOMNode[]): void {\n    this.childrenInternal = children;\n  }\n\n  setIsScrollable(isScrollable: boolean): void {\n    this.#isScrollable = isScrollable;\n  }\n\n  setAffectedByStartingStyles(affectedByStartingStyles: boolean): void {\n    this.#affectedByStartingStyles = affectedByStartingStyles;\n  }\n\n  hasAttributes(): boolean {\n    return this.#attributes.size > 0;\n  }\n\n  childNodeCount(): number {\n    return this.childNodeCountInternal;\n  }\n\n  setChildNodeCount(childNodeCount: number): void {\n    this.childNodeCountInternal = childNodeCount;\n  }\n\n  shadowRoots(): DOMNode[] {\n    return this.shadowRootsInternal.slice();\n  }\n\n  templateContent(): DOMNode|null {\n    return this.templateContentInternal || null;\n  }\n\n  contentDocument(): DOMDocument|null {\n    return this.contentDocumentInternal || null;\n  }\n\n  setContentDocument(node: DOMDocument): void {\n    this.contentDocumentInternal = node;\n  }\n\n  isIframe(): boolean {\n    return this.#nodeName === 'IFRAME';\n  }\n\n  importedDocument(): DOMNode|null {\n    return this.#importedDocument || null;\n  }\n\n  nodeType(): number {\n    return this.#nodeType;\n  }\n\n  nodeName(): string {\n    return this.#nodeName;\n  }\n\n  pseudoType(): string|undefined {\n    return this.#pseudoType;\n  }\n\n  pseudoIdentifier(): string|undefined {\n    return this.#pseudoIdentifier;\n  }\n\n  hasPseudoElements(): boolean {\n    return this.#pseudoElements.size > 0;\n  }\n\n  pseudoElements(): Map<string, DOMNode[]> {\n    return this.#pseudoElements;\n  }\n\n  checkmarkPseudoElement(): DOMNode|undefined {\n    return this.#pseudoElements.get(Protocol.DOM.PseudoType.Checkmark)?.at(-1);\n  }\n\n  beforePseudoElement(): DOMNode|undefined {\n    return this.#pseudoElements.get(Protocol.DOM.PseudoType.Before)?.at(-1);\n  }\n\n  afterPseudoElement(): DOMNode|undefined {\n    return this.#pseudoElements.get(Protocol.DOM.PseudoType.After)?.at(-1);\n  }\n\n  pickerIconPseudoElement(): DOMNode|undefined {\n    return this.#pseudoElements.get(Protocol.DOM.PseudoType.PickerIcon)?.at(-1);\n  }\n\n  markerPseudoElement(): DOMNode|undefined {\n    return this.#pseudoElements.get(Protocol.DOM.PseudoType.Marker)?.at(-1);\n  }\n\n  backdropPseudoElement(): DOMNode|undefined {\n    return this.#pseudoElements.get(Protocol.DOM.PseudoType.Backdrop)?.at(-1);\n  }\n\n  viewTransitionPseudoElements(): DOMNode[] {\n    return [\n      ...this.#pseudoElements.get(Protocol.DOM.PseudoType.ViewTransition) || [],\n      ...this.#pseudoElements.get(Protocol.DOM.PseudoType.ViewTransitionGroup) || [],\n      ...this.#pseudoElements.get(Protocol.DOM.PseudoType.ViewTransitionGroupChildren) || [],\n      ...this.#pseudoElements.get(Protocol.DOM.PseudoType.ViewTransitionImagePair) || [],\n      ...this.#pseudoElements.get(Protocol.DOM.PseudoType.ViewTransitionOld) || [],\n      ...this.#pseudoElements.get(Protocol.DOM.PseudoType.ViewTransitionNew) || [],\n    ];\n  }\n\n  carouselPseudoElements(): DOMNode[] {\n    return [\n      ...this.#pseudoElements.get(Protocol.DOM.PseudoType.ScrollButton) || [],\n      ...this.#pseudoElements.get(Protocol.DOM.PseudoType.Column) || [],\n      ...this.#pseudoElements.get(Protocol.DOM.PseudoType.ScrollMarker) || [],\n      ...this.#pseudoElements.get(Protocol.DOM.PseudoType.ScrollMarkerGroup) || [],\n    ];\n  }\n\n  hasAssignedSlot(): boolean {\n    return this.assignedSlot !== null;\n  }\n\n  isInsertionPoint(): boolean {\n    return !this.isXMLNode() &&\n        (this.#nodeName === 'SHADOW' || this.#nodeName === 'CONTENT' || this.#nodeName === 'SLOT');\n  }\n\n  distributedNodes(): DOMNodeShortcut[] {\n    return this.#distributedNodes;\n  }\n\n  isInShadowTree(): boolean {\n    return this.#isInShadowTree;\n  }\n\n  getTreeRoot(): DOMNode {\n    return this.isShadowRoot() ? this : (this.ancestorShadowRoot() ?? this.ownerDocument ?? this);\n  }\n\n  ancestorShadowHost(): DOMNode|null {\n    const ancestorShadowRoot = this.ancestorShadowRoot();\n    return ancestorShadowRoot ? ancestorShadowRoot.parentNode : null;\n  }\n\n  ancestorShadowRoot(): DOMNode|null {\n    if (!this.#isInShadowTree) {\n      return null;\n    }\n\n    let current: DOMNode|null = this;\n    while (current && !current.isShadowRoot()) {\n      current = current.parentNode;\n    }\n    return current;\n  }\n\n  ancestorUserAgentShadowRoot(): DOMNode|null {\n    const ancestorShadowRoot = this.ancestorShadowRoot();\n    if (!ancestorShadowRoot) {\n      return null;\n    }\n    return ancestorShadowRoot.shadowRootType() === DOMNode.ShadowRootTypes.UserAgent ? ancestorShadowRoot : null;\n  }\n\n  isShadowRoot(): boolean {\n    return Boolean(this.#shadowRootType);\n  }\n\n  shadowRootType(): string|null {\n    return this.#shadowRootType || null;\n  }\n\n  nodeNameInCorrectCase(): string {\n    const shadowRootType = this.shadowRootType();\n    if (shadowRootType) {\n      return '#shadow-root (' + shadowRootType + ')';\n    }\n\n    // If there is no local #name, it's case sensitive\n    if (!this.localName()) {\n      return this.nodeName();\n    }\n\n    // If the names are different lengths, there is a prefix and it's case sensitive\n    if (this.localName().length !== this.nodeName().length) {\n      return this.nodeName();\n    }\n\n    // Return the localname, which will be case insensitive if its an html node\n    return this.localName();\n  }\n\n  setNodeName(name: string, callback?: ((arg0: string|null, arg1: DOMNode|null) => void)): void {\n    void this.#agent.invoke_setNodeName({nodeId: this.id, name}).then(response => {\n      if (!response.getError()) {\n        this.#domModel.markUndoableState();\n      }\n      if (callback) {\n        callback(response.getError() || null, this.#domModel.nodeForId(response.nodeId));\n      }\n    });\n  }\n\n  localName(): string {\n    return this.#localName;\n  }\n\n  nodeValue(): string {\n    return this.nodeValueInternal;\n  }\n\n  setNodeValueInternal(nodeValue: string): void {\n    this.nodeValueInternal = nodeValue;\n  }\n\n  setNodeValue(value: string, callback?: ((arg0: string|null) => void)): void {\n    void this.#agent.invoke_setNodeValue({nodeId: this.id, value}).then(response => {\n      if (!response.getError()) {\n        this.#domModel.markUndoableState();\n      }\n      if (callback) {\n        callback(response.getError() || null);\n      }\n    });\n  }\n\n  getAttribute(name: string): string|undefined {\n    const attr = this.#attributes.get(name);\n    return attr ? attr.value : undefined;\n  }\n\n  setAttribute(name: string, text: string, callback?: ((arg0: string|null) => void)): void {\n    void this.#agent.invoke_setAttributesAsText({nodeId: this.id, text, name}).then(response => {\n      if (!response.getError()) {\n        this.#domModel.markUndoableState();\n      }\n      if (callback) {\n        callback(response.getError() || null);\n      }\n    });\n  }\n\n  setAttributeValue(name: string, value: string, callback?: ((arg0: string|null) => void)): void {\n    void this.#agent.invoke_setAttributeValue({nodeId: this.id, name, value}).then(response => {\n      if (!response.getError()) {\n        this.#domModel.markUndoableState();\n      }\n      if (callback) {\n        callback(response.getError() || null);\n      }\n    });\n  }\n\n  setAttributeValuePromise(name: string, value: string): Promise<string|null> {\n    return new Promise(fulfill => this.setAttributeValue(name, value, fulfill));\n  }\n\n  attributes(): Attribute[] {\n    return [...this.#attributes.values()];\n  }\n\n  async removeAttribute(name: string): Promise<void> {\n    const response = await this.#agent.invoke_removeAttribute({nodeId: this.id, name});\n    if (response.getError()) {\n      return;\n    }\n    this.#attributes.delete(name);\n    this.#domModel.markUndoableState();\n  }\n\n  getChildNodesPromise(): Promise<DOMNode[]|null> {\n    return new Promise(resolve => {\n      return this.getChildNodes(childNodes => resolve(childNodes));\n    });\n  }\n\n  getChildNodes(callback: (arg0: DOMNode[]|null) => void): void {\n    if (this.childrenInternal) {\n      callback(this.children());\n      return;\n    }\n    void this.#agent.invoke_requestChildNodes({nodeId: this.id}).then(response => {\n      callback(response.getError() ? null : this.children());\n    });\n  }\n\n  async getSubtree(depth: number, pierce: boolean): Promise<DOMNode[]|null> {\n    console.assert(depth > 0, 'Do not fetch an infinite subtree to avoid crashing the renderer for large documents');\n    const response = await this.#agent.invoke_requestChildNodes({nodeId: this.id, depth, pierce});\n    return response.getError() ? null : this.childrenInternal;\n  }\n\n  async getOuterHTML(includeShadowDOM = false): Promise<string|null> {\n    const {outerHTML} = await this.#agent.invoke_getOuterHTML({nodeId: this.id, includeShadowDOM});\n    return outerHTML;\n  }\n\n  setOuterHTML(html: string, callback?: ((arg0: string|null) => void)): void {\n    void this.#agent.invoke_setOuterHTML({nodeId: this.id, outerHTML: html}).then(response => {\n      if (!response.getError()) {\n        this.#domModel.markUndoableState();\n      }\n      if (callback) {\n        callback(response.getError() || null);\n      }\n    });\n  }\n\n  removeNode(callback?: ((arg0: string|null, arg1?: Protocol.DOM.NodeId|undefined) => void)): Promise<void> {\n    return this.#agent.invoke_removeNode({nodeId: this.id}).then(response => {\n      if (!response.getError()) {\n        this.#domModel.markUndoableState();\n      }\n      if (callback) {\n        callback(response.getError() || null);\n      }\n    });\n  }\n\n  path(): string {\n    function getNodeKey(node: DOMNode): number|'u'|'a'|'d'|null {\n      if (!node.#nodeName.length) {\n        return null;\n      }\n      if (node.index !== undefined) {\n        return node.index;\n      }\n      if (!node.parentNode) {\n        return null;\n      }\n      if (node.isShadowRoot()) {\n        return node.shadowRootType() === DOMNode.ShadowRootTypes.UserAgent ? 'u' : 'a';\n      }\n      if (node.nodeType() === Node.DOCUMENT_NODE) {\n        return 'd';\n      }\n      return null;\n    }\n\n    const path = [];\n    let node: (DOMNode|null) = this;\n    while (node) {\n      const key = getNodeKey(node);\n      if (key === null) {\n        break;\n      }\n\n      path.push([key, node.#nodeName]);\n      node = node.parentNode;\n    }\n    path.reverse();\n    return path.join(',');\n  }\n\n  isAncestor(node: DOMNode): boolean {\n    if (!node) {\n      return false;\n    }\n\n    let currentNode: (DOMNode|null) = node.parentNode;\n    while (currentNode) {\n      if (this === currentNode) {\n        return true;\n      }\n      currentNode = currentNode.parentNode;\n    }\n    return false;\n  }\n\n  isDescendant(descendant: DOMNode): boolean {\n    return descendant.isAncestor(this);\n  }\n\n  frameOwnerFrameId(): Protocol.Page.FrameId|null {\n    return this.#frameOwnerFrameId;\n  }\n\n  frameId(): Protocol.Page.FrameId|null {\n    let node: DOMNode = this.parentNode || this;\n    while (!node.#frameOwnerFrameId && node.parentNode) {\n      node = node.parentNode;\n    }\n    return node.#frameOwnerFrameId;\n  }\n\n  setAttributesPayload(attrs: string[]): boolean {\n    let attributesChanged: true|boolean = !this.#attributes || attrs.length !== this.#attributes.size * 2;\n    const oldAttributesMap = this.#attributes || new Map();\n\n    this.#attributes = new Map();\n\n    for (let i = 0; i < attrs.length; i += 2) {\n      const name = attrs[i];\n      const value = attrs[i + 1];\n      this.addAttribute(name, value);\n\n      if (attributesChanged) {\n        continue;\n      }\n\n      const oldAttribute = oldAttributesMap.get(name);\n      if (oldAttribute?.value !== value) {\n        attributesChanged = true;\n      }\n    }\n    return attributesChanged;\n  }\n\n  insertChild(prev: DOMNode|undefined, payload: Protocol.DOM.Node): DOMNode {\n    if (!this.childrenInternal) {\n      throw new Error('DOMNode._children is expected to not be null.');\n    }\n    const node = DOMNode.create(this.#domModel, this.ownerDocument, this.#isInShadowTree, payload, this.#retainedNodes);\n    this.childrenInternal.splice(prev ? this.childrenInternal.indexOf(prev) + 1 : 0, 0, node);\n    this.renumber();\n    return node;\n  }\n\n  removeChild(node: DOMNode): void {\n    const pseudoType = node.pseudoType();\n    if (pseudoType) {\n      const updatedPseudoElements = this.#pseudoElements.get(pseudoType)?.filter(element => element !== node);\n      if (updatedPseudoElements && updatedPseudoElements.length > 0) {\n        this.#pseudoElements.set(pseudoType, updatedPseudoElements);\n      } else {\n        this.#pseudoElements.delete(pseudoType);\n      }\n    } else {\n      const shadowRootIndex = this.shadowRootsInternal.indexOf(node);\n      if (shadowRootIndex !== -1) {\n        this.shadowRootsInternal.splice(shadowRootIndex, 1);\n      } else {\n        if (!this.childrenInternal) {\n          throw new Error('DOMNode._children is expected to not be null.');\n        }\n        if (this.childrenInternal.indexOf(node) === -1) {\n          throw new Error('DOMNode._children is expected to contain the node to be removed.');\n        }\n        this.childrenInternal.splice(this.childrenInternal.indexOf(node), 1);\n      }\n    }\n    node.parentNode = null;\n    this.#subtreeMarkerCount -= node.#subtreeMarkerCount;\n    if (node.#subtreeMarkerCount) {\n      this.#domModel.dispatchEventToListeners(Events.MarkersChanged, this);\n    }\n    this.renumber();\n  }\n\n  setChildrenPayload(payloads: Protocol.DOM.Node[]): void {\n    this.childrenInternal = [];\n    for (let i = 0; i < payloads.length; ++i) {\n      const payload = payloads[i];\n      const node =\n          DOMNode.create(this.#domModel, this.ownerDocument, this.#isInShadowTree, payload, this.#retainedNodes);\n      this.childrenInternal.push(node);\n    }\n    this.renumber();\n  }\n\n  private setPseudoElements(payloads: Protocol.DOM.Node[]|undefined): void {\n    if (!payloads) {\n      return;\n    }\n\n    for (let i = 0; i < payloads.length; ++i) {\n      const node =\n          DOMNode.create(this.#domModel, this.ownerDocument, this.#isInShadowTree, payloads[i], this.#retainedNodes);\n      node.parentNode = this;\n      const pseudoType = node.pseudoType();\n      if (!pseudoType) {\n        throw new Error('DOMNode.pseudoType() is expected to be defined.');\n      }\n      const currentPseudoElements = this.#pseudoElements.get(pseudoType);\n      if (currentPseudoElements) {\n        currentPseudoElements.push(node);\n      } else {\n        this.#pseudoElements.set(pseudoType, [node]);\n      }\n    }\n  }\n\n  private toAdoptedStyleSheets(ids: Protocol.DOM.StyleSheetId[]): AdoptedStyleSheet[] {\n    return ids.map(id => (new AdoptedStyleSheet(id, this.#domModel.cssModel())));\n  }\n\n  setAdoptedStyleSheets(ids: Protocol.DOM.StyleSheetId[]): void {\n    this.#adoptedStyleSheets = this.toAdoptedStyleSheets(ids);\n    this.#domModel.dispatchEventToListeners(Events.AdoptedStyleSheetsModified, this);\n  }\n\n  get adoptedStyleSheetsForNode(): AdoptedStyleSheet[] {\n    return this.#adoptedStyleSheets;\n  }\n\n  setDistributedNodePayloads(payloads: Protocol.DOM.BackendNode[]): void {\n    this.#distributedNodes = [];\n    for (const payload of payloads) {\n      this.#distributedNodes.push(\n          new DOMNodeShortcut(this.#domModel.target(), payload.backendNodeId, payload.nodeType, payload.nodeName));\n    }\n  }\n\n  setAssignedSlot(payload: Protocol.DOM.BackendNode): void {\n    this.assignedSlot =\n        new DOMNodeShortcut(this.#domModel.target(), payload.backendNodeId, payload.nodeType, payload.nodeName);\n  }\n\n  private renumber(): void {\n    if (!this.childrenInternal) {\n      throw new Error('DOMNode._children is expected to not be null.');\n    }\n    this.childNodeCountInternal = this.childrenInternal.length;\n    if (this.childNodeCountInternal === 0) {\n      this.firstChild = null;\n      this.lastChild = null;\n      return;\n    }\n    this.firstChild = this.childrenInternal[0];\n    this.lastChild = this.childrenInternal[this.childNodeCountInternal - 1];\n    for (let i = 0; i < this.childNodeCountInternal; ++i) {\n      const child = this.childrenInternal[i];\n      child.index = i;\n      child.nextSibling = i + 1 < this.childNodeCountInternal ? this.childrenInternal[i + 1] : null;\n      child.previousSibling = i - 1 >= 0 ? this.childrenInternal[i - 1] : null;\n      child.parentNode = this;\n    }\n  }\n\n  private addAttribute(name: string, value: string): void {\n    const attr = {name, value, _node: this};\n    this.#attributes.set(name, attr);\n  }\n\n  setAttributeInternal(name: string, value: string): void {\n    const attr = this.#attributes.get(name);\n    if (attr) {\n      attr.value = value;\n    } else {\n      this.addAttribute(name, value);\n    }\n  }\n\n  removeAttributeInternal(name: string): void {\n    this.#attributes.delete(name);\n  }\n\n  copyTo(targetNode: DOMNode, anchorNode: DOMNode|null, callback?: ((arg0: string|null, arg1: DOMNode|null) => void)):\n      void {\n    void this.#agent\n        .invoke_copyTo(\n            {nodeId: this.id, targetNodeId: targetNode.id, insertBeforeNodeId: anchorNode ? anchorNode.id : undefined})\n        .then(response => {\n          if (!response.getError()) {\n            this.#domModel.markUndoableState();\n          }\n          const pastedNode = this.#domModel.nodeForId(response.nodeId);\n          if (pastedNode) {\n            // For every marker in this.#markers, set a marker in the copied node.\n            for (const [name, value] of this.#markers) {\n              pastedNode.setMarker(name, value);\n            }\n          }\n          if (callback) {\n            callback(response.getError() || null, pastedNode);\n          }\n        });\n  }\n\n  moveTo(targetNode: DOMNode, anchorNode: DOMNode|null, callback?: ((arg0: string|null, arg1: DOMNode|null) => void)):\n      void {\n    void this.#agent\n        .invoke_moveTo(\n            {nodeId: this.id, targetNodeId: targetNode.id, insertBeforeNodeId: anchorNode ? anchorNode.id : undefined})\n        .then(response => {\n          if (!response.getError()) {\n            this.#domModel.markUndoableState();\n          }\n          if (callback) {\n            callback(response.getError() || null, this.#domModel.nodeForId(response.nodeId));\n          }\n        });\n  }\n\n  isXMLNode(): boolean {\n    return Boolean(this.#xmlVersion);\n  }\n\n  setMarker(name: string, value: unknown): void {\n    if (value === null) {\n      if (!this.#markers.has(name)) {\n        return;\n      }\n\n      this.#markers.delete(name);\n      for (let node: (DOMNode|null) = this; node; node = node.parentNode) {\n        --node.#subtreeMarkerCount;\n      }\n      for (let node: (DOMNode|null) = this; node; node = node.parentNode) {\n        this.#domModel.dispatchEventToListeners(Events.MarkersChanged, node);\n      }\n      return;\n    }\n\n    if (this.parentNode && !this.#markers.has(name)) {\n      for (let node: (DOMNode|null) = this; node; node = node.parentNode) {\n        ++node.#subtreeMarkerCount;\n      }\n    }\n    this.#markers.set(name, value);\n    for (let node: (DOMNode|null) = this; node; node = node.parentNode) {\n      this.#domModel.dispatchEventToListeners(Events.MarkersChanged, node);\n    }\n  }\n\n  marker<T>(name: string): T|null {\n    return this.#markers.get(name) as T || null;\n  }\n\n  getMarkerKeysForTest(): string[] {\n    return [...this.#markers.keys()];\n  }\n\n  traverseMarkers(visitor: (arg0: DOMNode, arg1: string) => void): void {\n    function traverse(node: DOMNode): void {\n      if (!node.#subtreeMarkerCount) {\n        return;\n      }\n      for (const marker of node.#markers.keys()) {\n        visitor(node, marker);\n      }\n      if (!node.childrenInternal) {\n        return;\n      }\n      for (const child of node.childrenInternal) {\n        traverse(child);\n      }\n    }\n    traverse(this);\n  }\n\n  resolveURL(url: string): Platform.DevToolsPath.UrlString|null {\n    if (!url) {\n      return url as Platform.DevToolsPath.UrlString;\n    }\n    for (let frameOwnerCandidate: (DOMNode|null) = this; frameOwnerCandidate;\n         frameOwnerCandidate = frameOwnerCandidate.parentNode) {\n      if (frameOwnerCandidate instanceof DOMDocument && frameOwnerCandidate.baseURL) {\n        return Common.ParsedURL.ParsedURL.completeURL(frameOwnerCandidate.baseURL, url);\n      }\n    }\n    return null;\n  }\n\n  highlight(mode?: string): void {\n    this.#domModel.overlayModel().highlightInOverlay({node: this, selectorList: undefined}, mode);\n  }\n\n  highlightForTwoSeconds(): void {\n    this.#domModel.overlayModel().highlightInOverlayForTwoSeconds({node: this, selectorList: undefined});\n  }\n\n  async resolveToObject(objectGroup?: string, executionContextId?: Protocol.Runtime.ExecutionContextId):\n      Promise<RemoteObject|null> {\n    const {object} = await this.#agent.invoke_resolveNode(\n        {nodeId: this.id, backendNodeId: undefined, executionContextId, objectGroup});\n    return object && this.#domModel.runtimeModelInternal.createRemoteObject(object) || null;\n  }\n\n  async boxModel(): Promise<Protocol.DOM.BoxModel|null> {\n    const {model} = await this.#agent.invoke_getBoxModel({nodeId: this.id});\n    return model;\n  }\n\n  async setAsInspectedNode(): Promise<void> {\n    let node: DOMNode|null = this;\n    if (node?.pseudoType()) {\n      node = node.parentNode;\n    }\n    while (node) {\n      let ancestor = node.ancestorUserAgentShadowRoot();\n      if (!ancestor) {\n        break;\n      }\n      ancestor = node.ancestorShadowHost();\n      if (!ancestor) {\n        break;\n      }\n      // User #agent shadow root, keep climbing up.\n      node = ancestor;\n    }\n    if (!node) {\n      throw new Error('In DOMNode.setAsInspectedNode: node is expected to not be null.');\n    }\n    await this.#agent.invoke_setInspectedNode({nodeId: node.id});\n  }\n\n  enclosingElementOrSelf(): DOMNode|null {\n    let node: DOMNode|null = this;\n    if (node && node.nodeType() === Node.TEXT_NODE && node.parentNode) {\n      node = node.parentNode;\n    }\n\n    if (node && node.nodeType() !== Node.ELEMENT_NODE) {\n      node = null;\n    }\n    return node;\n  }\n\n  async callFunction<T, U extends string|number>(fn: (this: HTMLElement, ...args: U[]) => T, args: U[] = []):\n      Promise<{value: T}|null> {\n    const object = await this.resolveToObject();\n    if (!object) {\n      return null;\n    }\n\n    const result = await object.callFunction(fn, args.map(arg => RemoteObject.toCallArgument(arg)));\n    object.release();\n    if (result.wasThrown || !result.object) {\n      return null;\n    }\n    return {\n      value: result.object.value as T,\n    };\n  }\n\n  async scrollIntoView(): Promise<void> {\n    const node = this.enclosingElementOrSelf();\n    if (!node) {\n      return;\n    }\n\n    const result = await node.callFunction(scrollIntoViewInPage);\n    if (!result) {\n      return;\n    }\n\n    node.highlightForTwoSeconds();\n\n    function scrollIntoViewInPage(this: Element): void {\n      this.scrollIntoViewIfNeeded(true);\n    }\n  }\n\n  async focus(): Promise<void> {\n    const node = this.enclosingElementOrSelf();\n    if (!node) {\n      throw new Error('DOMNode.focus expects node to not be null.');\n    }\n    const result = await node.callFunction(focusInPage);\n    if (!result) {\n      return;\n    }\n\n    node.highlightForTwoSeconds();\n    await this.#domModel.target().pageAgent().invoke_bringToFront();\n\n    function focusInPage(this: HTMLElement): void {\n      this.focus();\n    }\n  }\n\n  simpleSelector(): string {\n    const lowerCaseName = this.localName() || this.nodeName().toLowerCase();\n    if (this.nodeType() !== Node.ELEMENT_NODE) {\n      return lowerCaseName;\n    }\n    const type = this.getAttribute('type');\n    const id = this.getAttribute('id');\n    const classes = this.getAttribute('class');\n\n    if (lowerCaseName === 'input' && type && !id && !classes) {\n      return lowerCaseName + '[type=\"' + CSS.escape(type) + '\"]';\n    }\n    if (id) {\n      return lowerCaseName + '#' + CSS.escape(id);\n    }\n    if (classes) {\n      const classList = classes.trim().split(/\\s+/g);\n      return (lowerCaseName === 'div' ? '' : lowerCaseName) + '.' + classList.map(cls => CSS.escape(cls)).join('.');\n    }\n    if (this.pseudoIdentifier()) {\n      return `${lowerCaseName}(${this.pseudoIdentifier()})`;\n    }\n    return lowerCaseName;\n  }\n\n  async getAnchorBySpecifier(specifier?: string): Promise<DOMNode|null> {\n    const response = await this.#agent.invoke_getAnchorElement({\n      nodeId: this.id,\n      anchorSpecifier: specifier,\n    });\n\n    if (response.getError()) {\n      return null;\n    }\n\n    return this.domModel().nodeForId(response.nodeId);\n  }\n\n  classNames(): string[] {\n    const classes = this.getAttribute('class');\n    return classes ? classes.split(/\\s+/) : [];\n  }\n}\n\nexport namespace DOMNode {\n  export enum ShadowRootTypes {\n    /* eslint-disable @typescript-eslint/naming-convention -- Used by web_tests. */\n    UserAgent = 'user-agent',\n    Open = 'open',\n    Closed = 'closed',\n    /* eslint-enable @typescript-eslint/naming-convention */\n  }\n}\n\nexport class DeferredDOMNode {\n  readonly #domModelInternal: DOMModel;\n  readonly #backendNodeIdInternal: Protocol.DOM.BackendNodeId;\n\n  constructor(target: Target, backendNodeId: Protocol.DOM.BackendNodeId) {\n    this.#domModelInternal = (target.model(DOMModel) as DOMModel);\n    this.#backendNodeIdInternal = backendNodeId;\n  }\n\n  resolve(callback: (arg0: DOMNode|null) => void): void {\n    void this.resolvePromise().then(callback);\n  }\n\n  async resolvePromise(): Promise<DOMNode|null> {\n    const nodeIds =\n        await this.#domModelInternal.pushNodesByBackendIdsToFrontend(new Set([this.#backendNodeIdInternal]));\n    return nodeIds?.get(this.#backendNodeIdInternal) || null;\n  }\n\n  backendNodeId(): Protocol.DOM.BackendNodeId {\n    return this.#backendNodeIdInternal;\n  }\n\n  domModel(): DOMModel {\n    return this.#domModelInternal;\n  }\n\n  highlight(): void {\n    this.#domModelInternal.overlayModel().highlightInOverlay({deferredNode: this, selectorList: undefined});\n  }\n}\n\nexport class DOMNodeShortcut {\n  nodeType: number;\n  nodeName: string;\n  deferredNode: DeferredDOMNode;\n  constructor(target: Target, backendNodeId: Protocol.DOM.BackendNodeId, nodeType: number, nodeName: string) {\n    this.nodeType = nodeType;\n    this.nodeName = nodeName;\n    this.deferredNode = new DeferredDOMNode(target, backendNodeId);\n  }\n}\n\nexport class DOMDocument extends DOMNode {\n  body: DOMNode|null;\n  documentElement: DOMNode|null;\n  documentURL: Platform.DevToolsPath.UrlString;\n  baseURL: Platform.DevToolsPath.UrlString;\n  constructor(domModel: DOMModel, payload: Protocol.DOM.Node) {\n    super(domModel);\n    this.body = null;\n    this.documentElement = null;\n    this.init(this, false, payload);\n    this.documentURL = (payload.documentURL || '') as Platform.DevToolsPath.UrlString;\n    this.baseURL = (payload.baseURL || '') as Platform.DevToolsPath.UrlString;\n  }\n}\n\nexport class AdoptedStyleSheet {\n  constructor(readonly id: Protocol.DOM.StyleSheetId, readonly cssModel: CSSModel) {\n  }\n}\n\nexport class DOMModel extends SDKModel<EventTypes> {\n  agent: ProtocolProxyApi.DOMApi;\n  idToDOMNode = new Map<Protocol.DOM.NodeId, DOMNode>();\n  #document: DOMDocument|null = null;\n  readonly #attributeLoadNodeIds = new Set<Protocol.DOM.NodeId>();\n  readonly runtimeModelInternal: RuntimeModel;\n  #lastMutationId!: number;\n  #pendingDocumentRequestPromise: Promise<DOMDocument|null>|null = null;\n  #frameOwnerNode?: DOMNode|null;\n  #loadNodeAttributesTimeout?: number;\n  #searchId?: string;\n  constructor(target: Target) {\n    super(target);\n\n    this.agent = target.domAgent();\n\n    target.registerDOMDispatcher(new DOMDispatcher(this));\n    this.runtimeModelInternal = (target.model(RuntimeModel) as RuntimeModel);\n\n    if (!target.suspended()) {\n      void this.agent.invoke_enable({});\n    }\n\n    if (Root.Runtime.experiments.isEnabled('capture-node-creation-stacks')) {\n      void this.agent.invoke_setNodeStackTracesEnabled({enable: true});\n    }\n  }\n\n  runtimeModel(): RuntimeModel {\n    return this.runtimeModelInternal;\n  }\n\n  cssModel(): CSSModel {\n    return this.target().model(CSSModel) as CSSModel;\n  }\n\n  overlayModel(): OverlayModel {\n    return this.target().model(OverlayModel) as OverlayModel;\n  }\n\n  static cancelSearch(): void {\n    for (const domModel of TargetManager.instance().models(DOMModel)) {\n      domModel.cancelSearch();\n    }\n  }\n\n  private scheduleMutationEvent(node: DOMNode): void {\n    if (!this.hasEventListeners(Events.DOMMutated)) {\n      return;\n    }\n\n    this.#lastMutationId = (this.#lastMutationId || 0) + 1;\n    void Promise.resolve().then(callObserve.bind(this, node, this.#lastMutationId));\n\n    function callObserve(this: DOMModel, node: DOMNode, mutationId: number): void {\n      if (!this.hasEventListeners(Events.DOMMutated) || this.#lastMutationId !== mutationId) {\n        return;\n      }\n\n      this.dispatchEventToListeners(Events.DOMMutated, node);\n    }\n  }\n\n  requestDocument(): Promise<DOMDocument|null> {\n    if (this.#document) {\n      return Promise.resolve(this.#document);\n    }\n    if (!this.#pendingDocumentRequestPromise) {\n      this.#pendingDocumentRequestPromise = this.requestDocumentInternal();\n    }\n    return this.#pendingDocumentRequestPromise;\n  }\n\n  async getOwnerNodeForFrame(frameId: Protocol.Page.FrameId): Promise<DeferredDOMNode|null> {\n    // Returns an error if the frameId does not belong to the current target.\n    const response = await this.agent.invoke_getFrameOwner({frameId});\n    if (response.getError()) {\n      return null;\n    }\n    return new DeferredDOMNode(this.target(), response.backendNodeId);\n  }\n\n  private async requestDocumentInternal(): Promise<DOMDocument|null> {\n    const response = await this.agent.invoke_getDocument({});\n    if (response.getError()) {\n      return null;\n    }\n    const {root: documentPayload} = response;\n    this.#pendingDocumentRequestPromise = null;\n\n    if (documentPayload) {\n      this.setDocument(documentPayload);\n    }\n    if (!this.#document) {\n      console.error('No document');\n      return null;\n    }\n\n    const parentModel = this.parentModel();\n    if (parentModel && !this.#frameOwnerNode) {\n      await parentModel.requestDocument();\n      const mainFrame = this.target().model(ResourceTreeModel)?.mainFrame;\n      if (mainFrame) {\n        const response = await parentModel.agent.invoke_getFrameOwner({frameId: mainFrame.id});\n        if (!response.getError() && response.nodeId) {\n          this.#frameOwnerNode = parentModel.nodeForId(response.nodeId);\n        }\n      }\n    }\n\n    // Document could have been cleared by now.\n    if (this.#frameOwnerNode) {\n      const oldDocument = this.#frameOwnerNode.contentDocument();\n      this.#frameOwnerNode.setContentDocument(this.#document);\n      this.#frameOwnerNode.setChildren([]);\n      if (this.#document) {\n        this.#document.parentNode = this.#frameOwnerNode;\n        this.dispatchEventToListeners(Events.NodeInserted, this.#document);\n      } else if (oldDocument) {\n        this.dispatchEventToListeners(Events.NodeRemoved, {node: oldDocument, parent: this.#frameOwnerNode});\n      }\n    }\n    return this.#document;\n  }\n\n  existingDocument(): DOMDocument|null {\n    return this.#document;\n  }\n\n  async pushNodeToFrontend(objectId: Protocol.Runtime.RemoteObjectId): Promise<DOMNode|null> {\n    await this.requestDocument();\n    const {nodeId} = await this.agent.invoke_requestNode({objectId});\n    return this.nodeForId(nodeId);\n  }\n\n  pushNodeByPathToFrontend(path: string): Promise<Protocol.DOM.NodeId|null> {\n    return this.requestDocument()\n        .then(() => this.agent.invoke_pushNodeByPathToFrontend({path}))\n        .then(({nodeId}) => nodeId);\n  }\n\n  async pushNodesByBackendIdsToFrontend(backendNodeIds: Set<Protocol.DOM.BackendNodeId>):\n      Promise<Map<Protocol.DOM.BackendNodeId, DOMNode|null>|null> {\n    await this.requestDocument();\n    const backendNodeIdsArray = [...backendNodeIds];\n    const {nodeIds} = await this.agent.invoke_pushNodesByBackendIdsToFrontend({backendNodeIds: backendNodeIdsArray});\n    if (!nodeIds) {\n      return null;\n    }\n    const map = new Map<Protocol.DOM.BackendNodeId, DOMNode|null>();\n    for (let i = 0; i < nodeIds.length; ++i) {\n      if (nodeIds[i]) {\n        map.set(backendNodeIdsArray[i], this.nodeForId(nodeIds[i]));\n      }\n    }\n    return map;\n  }\n\n  attributeModified(nodeId: Protocol.DOM.NodeId, name: string, value: string): void {\n    const node = this.idToDOMNode.get(nodeId);\n    if (!node) {\n      return;\n    }\n\n    node.setAttributeInternal(name, value);\n    this.dispatchEventToListeners(Events.AttrModified, {node, name});\n    this.scheduleMutationEvent(node);\n  }\n\n  attributeRemoved(nodeId: Protocol.DOM.NodeId, name: string): void {\n    const node = this.idToDOMNode.get(nodeId);\n    if (!node) {\n      return;\n    }\n    node.removeAttributeInternal(name);\n    this.dispatchEventToListeners(Events.AttrRemoved, {node, name});\n    this.scheduleMutationEvent(node);\n  }\n\n  inlineStyleInvalidated(nodeIds: Protocol.DOM.NodeId[]): void {\n    nodeIds.forEach(nodeId => this.#attributeLoadNodeIds.add(nodeId));\n    if (!this.#loadNodeAttributesTimeout) {\n      this.#loadNodeAttributesTimeout = window.setTimeout(this.loadNodeAttributes.bind(this), 20);\n    }\n  }\n\n  private loadNodeAttributes(): void {\n    this.#loadNodeAttributesTimeout = undefined;\n    for (const nodeId of this.#attributeLoadNodeIds) {\n      void this.agent.invoke_getAttributes({nodeId}).then(({attributes}) => {\n        if (!attributes) {\n          // We are calling loadNodeAttributes asynchronously, it is ok if node is not found.\n          return;\n        }\n        const node = this.idToDOMNode.get(nodeId);\n        if (!node) {\n          return;\n        }\n        if (node.setAttributesPayload(attributes)) {\n          this.dispatchEventToListeners(Events.AttrModified, {node, name: 'style'});\n          this.scheduleMutationEvent(node);\n        }\n      });\n    }\n    this.#attributeLoadNodeIds.clear();\n  }\n\n  characterDataModified(nodeId: Protocol.DOM.NodeId, newValue: string): void {\n    const node = this.idToDOMNode.get(nodeId);\n    if (!node) {\n      console.error('nodeId could not be resolved to a node');\n      return;\n    }\n    node.setNodeValueInternal(newValue);\n    this.dispatchEventToListeners(Events.CharacterDataModified, node);\n    this.scheduleMutationEvent(node);\n  }\n\n  nodeForId(nodeId: Protocol.DOM.NodeId|null): DOMNode|null {\n    return nodeId ? this.idToDOMNode.get(nodeId) || null : null;\n  }\n\n  documentUpdated(): void {\n    // If this frame doesn't have a document now,\n    // it means that its document is not requested yet and\n    // it will be requested when needed. (ex: setChildNodes event is received for the frame owner node)\n    // So, we don't need to request the document if we don't\n    // already have a document.\n    const alreadyHasDocument = Boolean(this.#document);\n    this.setDocument(null);\n    // If we have this.#pendingDocumentRequestPromise in flight,\n    // it will contain most recent result.\n    if (this.parentModel() && alreadyHasDocument && !this.#pendingDocumentRequestPromise) {\n      void this.requestDocument();\n    }\n  }\n\n  private setDocument(payload: Protocol.DOM.Node|null): void {\n    this.idToDOMNode = new Map();\n    if (payload && 'nodeId' in payload) {\n      this.#document = new DOMDocument(this, payload);\n    } else {\n      this.#document = null;\n    }\n    DOMModelUndoStack.instance().dispose(this);\n\n    if (!this.parentModel()) {\n      this.dispatchEventToListeners(Events.DocumentUpdated, this);\n    }\n  }\n\n  setDocumentForTest(document: Protocol.DOM.Node|null): void {\n    this.setDocument(document);\n  }\n\n  private setDetachedRoot(payload: Protocol.DOM.Node): void {\n    if (payload.nodeName === '#document') {\n      new DOMDocument(this, payload);\n    } else {\n      DOMNode.create(this, null, false, payload);\n    }\n  }\n\n  setChildNodes(parentId: Protocol.DOM.NodeId, payloads: Protocol.DOM.Node[]): void {\n    if (!parentId && payloads.length) {\n      this.setDetachedRoot(payloads[0]);\n      return;\n    }\n\n    const parent = this.idToDOMNode.get(parentId);\n    parent?.setChildrenPayload(payloads);\n  }\n\n  childNodeCountUpdated(nodeId: Protocol.DOM.NodeId, newValue: number): void {\n    const node = this.idToDOMNode.get(nodeId);\n    if (!node) {\n      console.error('nodeId could not be resolved to a node');\n      return;\n    }\n    node.setChildNodeCount(newValue);\n    this.dispatchEventToListeners(Events.ChildNodeCountUpdated, node);\n    this.scheduleMutationEvent(node);\n  }\n\n  childNodeInserted(parentId: Protocol.DOM.NodeId, prevId: Protocol.DOM.NodeId, payload: Protocol.DOM.Node): void {\n    const parent = this.idToDOMNode.get(parentId);\n    const prev = this.idToDOMNode.get(prevId);\n    if (!parent) {\n      console.error('parentId could not be resolved to a node');\n      return;\n    }\n    const node = parent.insertChild(prev, payload);\n    this.idToDOMNode.set(node.id, node);\n    this.dispatchEventToListeners(Events.NodeInserted, node);\n    this.scheduleMutationEvent(node);\n  }\n\n  childNodeRemoved(parentId: Protocol.DOM.NodeId, nodeId: Protocol.DOM.NodeId): void {\n    const parent = this.idToDOMNode.get(parentId);\n    const node = this.idToDOMNode.get(nodeId);\n    if (!parent || !node) {\n      console.error('parentId or nodeId could not be resolved to a node');\n      return;\n    }\n    parent.removeChild(node);\n    this.unbind(node);\n    this.dispatchEventToListeners(Events.NodeRemoved, {node, parent});\n    this.scheduleMutationEvent(node);\n  }\n\n  shadowRootPushed(hostId: Protocol.DOM.NodeId, root: Protocol.DOM.Node): void {\n    const host = this.idToDOMNode.get(hostId);\n    if (!host) {\n      return;\n    }\n    const node = DOMNode.create(this, host.ownerDocument, true, root);\n    node.parentNode = host;\n    this.idToDOMNode.set(node.id, node);\n    host.shadowRootsInternal.unshift(node);\n    this.dispatchEventToListeners(Events.NodeInserted, node);\n    this.scheduleMutationEvent(node);\n  }\n\n  shadowRootPopped(hostId: Protocol.DOM.NodeId, rootId: Protocol.DOM.NodeId): void {\n    const host = this.idToDOMNode.get(hostId);\n    if (!host) {\n      return;\n    }\n    const root = this.idToDOMNode.get(rootId);\n    if (!root) {\n      return;\n    }\n    host.removeChild(root);\n    this.unbind(root);\n    this.dispatchEventToListeners(Events.NodeRemoved, {node: root, parent: host});\n    this.scheduleMutationEvent(root);\n  }\n\n  pseudoElementAdded(parentId: Protocol.DOM.NodeId, pseudoElement: Protocol.DOM.Node): void {\n    const parent = this.idToDOMNode.get(parentId);\n    if (!parent) {\n      return;\n    }\n    const node = DOMNode.create(this, parent.ownerDocument, false, pseudoElement);\n    node.parentNode = parent;\n    this.idToDOMNode.set(node.id, node);\n    const pseudoType = node.pseudoType();\n    if (!pseudoType) {\n      throw new Error('DOMModel._pseudoElementAdded expects pseudoType to be defined.');\n    }\n    const currentPseudoElements = parent.pseudoElements().get(pseudoType);\n    if (currentPseudoElements && currentPseudoElements.length > 0) {\n      if (!(pseudoType.startsWith('view-transition') || pseudoType.startsWith('scroll-') || pseudoType === 'column')) {\n        throw new Error(\n            'DOMModel.pseudoElementAdded expects parent to not already have this pseudo type added; only view-transition* and scrolling pseudo elements can coexist under the same parent.' +\n            ` ${currentPseudoElements.length} elements of type ${pseudoType} already exist on parent.`);\n      }\n      currentPseudoElements.push(node);\n    } else {\n      parent.pseudoElements().set(pseudoType, [node]);\n    }\n    this.dispatchEventToListeners(Events.NodeInserted, node);\n    this.scheduleMutationEvent(node);\n  }\n\n  adoptedStyleSheetsModified(parentId: Protocol.DOM.NodeId, styleSheets: Protocol.DOM.StyleSheetId[]): void {\n    const parent = this.idToDOMNode.get(parentId);\n    if (!parent) {\n      return;\n    }\n    parent.setAdoptedStyleSheets(styleSheets);\n  }\n\n  scrollableFlagUpdated(nodeId: Protocol.DOM.NodeId, isScrollable: boolean): void {\n    const node = this.nodeForId(nodeId);\n    if (!node || node.isScrollable() === isScrollable) {\n      return;\n    }\n    node.setIsScrollable(isScrollable);\n    this.dispatchEventToListeners(Events.ScrollableFlagUpdated, {node});\n  }\n\n  affectedByStartingStylesFlagUpdated(nodeId: Protocol.DOM.NodeId, affectedByStartingStyles: boolean): void {\n    const node = this.nodeForId(nodeId);\n    if (!node || node.affectedByStartingStyles() === affectedByStartingStyles) {\n      return;\n    }\n    node.setAffectedByStartingStyles(affectedByStartingStyles);\n    this.dispatchEventToListeners(Events.AffectedByStartingStylesFlagUpdated, {node});\n  }\n\n  topLayerElementsUpdated(): void {\n    this.dispatchEventToListeners(Events.TopLayerElementsChanged);\n  }\n\n  pseudoElementRemoved(parentId: Protocol.DOM.NodeId, pseudoElementId: Protocol.DOM.NodeId): void {\n    const parent = this.idToDOMNode.get(parentId);\n    if (!parent) {\n      return;\n    }\n    const pseudoElement = this.idToDOMNode.get(pseudoElementId);\n    if (!pseudoElement) {\n      return;\n    }\n    parent.removeChild(pseudoElement);\n    this.unbind(pseudoElement);\n    this.dispatchEventToListeners(Events.NodeRemoved, {node: pseudoElement, parent});\n    this.scheduleMutationEvent(pseudoElement);\n  }\n\n  distributedNodesUpdated(insertionPointId: Protocol.DOM.NodeId, distributedNodes: Protocol.DOM.BackendNode[]): void {\n    const insertionPoint = this.idToDOMNode.get(insertionPointId);\n    if (!insertionPoint) {\n      return;\n    }\n    insertionPoint.setDistributedNodePayloads(distributedNodes);\n    this.dispatchEventToListeners(Events.DistributedNodesChanged, insertionPoint);\n    this.scheduleMutationEvent(insertionPoint);\n  }\n\n  private unbind(node: DOMNode): void {\n    this.idToDOMNode.delete(node.id);\n    const children = node.children();\n    for (let i = 0; children && i < children.length; ++i) {\n      this.unbind(children[i]);\n    }\n    for (let i = 0; i < node.shadowRootsInternal.length; ++i) {\n      this.unbind(node.shadowRootsInternal[i]);\n    }\n    const pseudoElements = node.pseudoElements();\n    for (const value of pseudoElements.values()) {\n      for (const pseudoElement of value) {\n        this.unbind(pseudoElement);\n      }\n    }\n    const templateContent = node.templateContent();\n    if (templateContent) {\n      this.unbind(templateContent);\n    }\n  }\n\n  async getNodesByStyle(\n      computedStyles: Array<{\n        name: string,\n        value: string,\n      }>,\n      pierce = false): Promise<Protocol.DOM.NodeId[]> {\n    await this.requestDocument();\n    if (!this.#document) {\n      throw new Error('DOMModel.getNodesByStyle expects to have a document.');\n    }\n    const response =\n        await this.agent.invoke_getNodesForSubtreeByStyle({nodeId: this.#document.id, computedStyles, pierce});\n    if (response.getError()) {\n      throw new Error(response.getError());\n    }\n    return response.nodeIds;\n  }\n\n  async performSearch(query: string, includeUserAgentShadowDOM: boolean): Promise<number> {\n    const response = await this.agent.invoke_performSearch({query, includeUserAgentShadowDOM});\n    if (!response.getError()) {\n      this.#searchId = response.searchId;\n    }\n    return response.getError() ? 0 : response.resultCount;\n  }\n\n  async searchResult(index: number): Promise<DOMNode|null> {\n    if (!this.#searchId) {\n      return null;\n    }\n    const {nodeIds} =\n        await this.agent.invoke_getSearchResults({searchId: this.#searchId, fromIndex: index, toIndex: index + 1});\n    return nodeIds?.length === 1 ? this.nodeForId(nodeIds[0]) : null;\n  }\n\n  private cancelSearch(): void {\n    if (!this.#searchId) {\n      return;\n    }\n    void this.agent.invoke_discardSearchResults({searchId: this.#searchId});\n    this.#searchId = undefined;\n  }\n\n  classNamesPromise(nodeId: Protocol.DOM.NodeId): Promise<string[]> {\n    return this.agent.invoke_collectClassNamesFromSubtree({nodeId}).then(({classNames}) => classNames || []);\n  }\n\n  querySelector(nodeId: Protocol.DOM.NodeId, selector: string): Promise<Protocol.DOM.NodeId|null> {\n    return this.agent.invoke_querySelector({nodeId, selector}).then(({nodeId}) => nodeId);\n  }\n\n  querySelectorAll(nodeId: Protocol.DOM.NodeId, selector: string): Promise<Protocol.DOM.NodeId[]|null> {\n    return this.agent.invoke_querySelectorAll({nodeId, selector}).then(({nodeIds}) => nodeIds);\n  }\n\n  getTopLayerElements(): Promise<Protocol.DOM.NodeId[]|null> {\n    return this.agent.invoke_getTopLayerElements().then(({nodeIds}) => nodeIds);\n  }\n\n  getDetachedDOMNodes(): Promise<Protocol.DOM.DetachedElementInfo[]|null> {\n    return this.agent.invoke_getDetachedDomNodes().then(({detachedNodes}) => detachedNodes);\n  }\n\n  getElementByRelation(nodeId: Protocol.DOM.NodeId, relation: Protocol.DOM.GetElementByRelationRequestRelation):\n      Promise<Protocol.DOM.NodeId|null> {\n    return this.agent.invoke_getElementByRelation({nodeId, relation}).then(({nodeId}) => nodeId);\n  }\n\n  markUndoableState(minorChange?: boolean): void {\n    void DOMModelUndoStack.instance().markUndoableState(this, minorChange || false);\n  }\n\n  async nodeForLocation(x: number, y: number, includeUserAgentShadowDOM: boolean): Promise<DOMNode|null> {\n    const response = await this.agent.invoke_getNodeForLocation({x, y, includeUserAgentShadowDOM});\n    if (response.getError() || !response.nodeId) {\n      return null;\n    }\n    return this.nodeForId(response.nodeId);\n  }\n\n  async getContainerForNode(\n      nodeId: Protocol.DOM.NodeId, containerName?: string, physicalAxes?: Protocol.DOM.PhysicalAxes,\n      logicalAxes?: Protocol.DOM.LogicalAxes, queriesScrollState?: boolean,\n      queriesAnchored?: boolean): Promise<DOMNode|null> {\n    const {nodeId: containerNodeId} = await this.agent.invoke_getContainerForNode(\n        {nodeId, containerName, physicalAxes, logicalAxes, queriesScrollState, queriesAnchored});\n    if (!containerNodeId) {\n      return null;\n    }\n    return this.nodeForId(containerNodeId);\n  }\n\n  pushObjectAsNodeToFrontend(object: RemoteObject): Promise<DOMNode|null> {\n    return object.isNode() && object.objectId ? this.pushNodeToFrontend(object.objectId) : Promise.resolve(null);\n  }\n\n  override suspendModel(): Promise<void> {\n    return this.agent.invoke_disable().then(() => this.setDocument(null));\n  }\n\n  override async resumeModel(): Promise<void> {\n    await this.agent.invoke_enable({});\n  }\n\n  override dispose(): void {\n    DOMModelUndoStack.instance().dispose(this);\n  }\n\n  parentModel(): DOMModel|null {\n    const parentTarget = this.target().parentTarget();\n    return parentTarget ? parentTarget.model(DOMModel) : null;\n  }\n\n  getAgent(): ProtocolProxyApi.DOMApi {\n    return this.agent;\n  }\n\n  registerNode(node: DOMNode): void {\n    this.idToDOMNode.set(node.id, node);\n  }\n}\n\nexport enum Events {\n  /* eslint-disable @typescript-eslint/naming-convention -- Used by web_tests. */\n  AttrModified = 'AttrModified',\n  AttrRemoved = 'AttrRemoved',\n  CharacterDataModified = 'CharacterDataModified',\n  DOMMutated = 'DOMMutated',\n  NodeInserted = 'NodeInserted',\n  NodeRemoved = 'NodeRemoved',\n  DocumentUpdated = 'DocumentUpdated',\n  ChildNodeCountUpdated = 'ChildNodeCountUpdated',\n  DistributedNodesChanged = 'DistributedNodesChanged',\n  MarkersChanged = 'MarkersChanged',\n  TopLayerElementsChanged = 'TopLayerElementsChanged',\n  ScrollableFlagUpdated = 'ScrollableFlagUpdated',\n  AffectedByStartingStylesFlagUpdated = 'AffectedByStartingStylesFlagUpdated',\n  AdoptedStyleSheetsModified = 'AdoptedStyleSheetsModified',\n  /* eslint-enable @typescript-eslint/naming-convention */\n}\n\nexport interface EventTypes {\n  [Events.AttrModified]: {node: DOMNode, name: string};\n  [Events.AttrRemoved]: {node: DOMNode, name: string};\n  [Events.CharacterDataModified]: DOMNode;\n  [Events.DOMMutated]: DOMNode;\n  [Events.NodeInserted]: DOMNode;\n  [Events.NodeRemoved]: {node: DOMNode, parent: DOMNode};\n  [Events.DocumentUpdated]: DOMModel;\n  [Events.ChildNodeCountUpdated]: DOMNode;\n  [Events.DistributedNodesChanged]: DOMNode;\n  [Events.MarkersChanged]: DOMNode;\n  [Events.TopLayerElementsChanged]: void;\n  [Events.ScrollableFlagUpdated]: {node: DOMNode};\n  [Events.AffectedByStartingStylesFlagUpdated]: {node: DOMNode};\n  [Events.AdoptedStyleSheetsModified]: DOMNode;\n}\n\nclass DOMDispatcher implements ProtocolProxyApi.DOMDispatcher {\n  readonly #domModel: DOMModel;\n  constructor(domModel: DOMModel) {\n    this.#domModel = domModel;\n  }\n\n  documentUpdated(): void {\n    this.#domModel.documentUpdated();\n  }\n\n  attributeModified({nodeId, name, value}: Protocol.DOM.AttributeModifiedEvent): void {\n    this.#domModel.attributeModified(nodeId, name, value);\n  }\n\n  attributeRemoved({nodeId, name}: Protocol.DOM.AttributeRemovedEvent): void {\n    this.#domModel.attributeRemoved(nodeId, name);\n  }\n\n  adoptedStyleSheetsModified({nodeId, adoptedStyleSheets}: Protocol.DOM.AdoptedStyleSheetsModifiedEvent): void {\n    this.#domModel.adoptedStyleSheetsModified(nodeId, adoptedStyleSheets);\n  }\n\n  inlineStyleInvalidated({nodeIds}: Protocol.DOM.InlineStyleInvalidatedEvent): void {\n    this.#domModel.inlineStyleInvalidated(nodeIds);\n  }\n\n  characterDataModified({nodeId, characterData}: Protocol.DOM.CharacterDataModifiedEvent): void {\n    this.#domModel.characterDataModified(nodeId, characterData);\n  }\n\n  setChildNodes({parentId, nodes}: Protocol.DOM.SetChildNodesEvent): void {\n    this.#domModel.setChildNodes(parentId, nodes);\n  }\n\n  childNodeCountUpdated({nodeId, childNodeCount}: Protocol.DOM.ChildNodeCountUpdatedEvent): void {\n    this.#domModel.childNodeCountUpdated(nodeId, childNodeCount);\n  }\n\n  childNodeInserted({parentNodeId, previousNodeId, node}: Protocol.DOM.ChildNodeInsertedEvent): void {\n    this.#domModel.childNodeInserted(parentNodeId, previousNodeId, node);\n  }\n\n  childNodeRemoved({parentNodeId, nodeId}: Protocol.DOM.ChildNodeRemovedEvent): void {\n    this.#domModel.childNodeRemoved(parentNodeId, nodeId);\n  }\n\n  shadowRootPushed({hostId, root}: Protocol.DOM.ShadowRootPushedEvent): void {\n    this.#domModel.shadowRootPushed(hostId, root);\n  }\n\n  shadowRootPopped({hostId, rootId}: Protocol.DOM.ShadowRootPoppedEvent): void {\n    this.#domModel.shadowRootPopped(hostId, rootId);\n  }\n\n  pseudoElementAdded({parentId, pseudoElement}: Protocol.DOM.PseudoElementAddedEvent): void {\n    this.#domModel.pseudoElementAdded(parentId, pseudoElement);\n  }\n\n  pseudoElementRemoved({parentId, pseudoElementId}: Protocol.DOM.PseudoElementRemovedEvent): void {\n    this.#domModel.pseudoElementRemoved(parentId, pseudoElementId);\n  }\n\n  distributedNodesUpdated({insertionPointId, distributedNodes}: Protocol.DOM.DistributedNodesUpdatedEvent): void {\n    this.#domModel.distributedNodesUpdated(insertionPointId, distributedNodes);\n  }\n\n  topLayerElementsUpdated(): void {\n    this.#domModel.topLayerElementsUpdated();\n  }\n\n  scrollableFlagUpdated({nodeId, isScrollable}: Protocol.DOM.ScrollableFlagUpdatedEvent): void {\n    this.#domModel.scrollableFlagUpdated(nodeId, isScrollable);\n  }\n\n  affectedByStartingStylesFlagUpdated({nodeId, affectedByStartingStyles}:\n                                          Protocol.DOM.AffectedByStartingStylesFlagUpdatedEvent): void {\n    this.#domModel.affectedByStartingStylesFlagUpdated(nodeId, affectedByStartingStyles);\n  }\n}\n\nlet domModelUndoStackInstance: DOMModelUndoStack|null = null;\n\nexport class DOMModelUndoStack {\n  #stack: DOMModel[];\n  #index: number;\n  #lastModelWithMinorChange: DOMModel|null;\n  constructor() {\n    this.#stack = [];\n    this.#index = 0;\n    this.#lastModelWithMinorChange = null;\n  }\n\n  static instance(opts: {\n    forceNew: boolean|null,\n  } = {forceNew: null}): DOMModelUndoStack {\n    const {forceNew} = opts;\n    if (!domModelUndoStackInstance || forceNew) {\n      domModelUndoStackInstance = new DOMModelUndoStack();\n    }\n\n    return domModelUndoStackInstance;\n  }\n\n  async markUndoableState(model: DOMModel, minorChange: boolean): Promise<void> {\n    // Both minor and major changes get into the #stack, but minor updates are coalesced.\n    // Commit major undoable state in the old model upon model switch.\n    if (this.#lastModelWithMinorChange && model !== this.#lastModelWithMinorChange) {\n      this.#lastModelWithMinorChange.markUndoableState();\n      this.#lastModelWithMinorChange = null;\n    }\n\n    // Previous minor change is already in the #stack.\n    if (minorChange && this.#lastModelWithMinorChange === model) {\n      return;\n    }\n\n    this.#stack = this.#stack.slice(0, this.#index);\n    this.#stack.push(model);\n    this.#index = this.#stack.length;\n\n    // Delay marking as major undoable states in case of minor operations until the\n    // major or model switch.\n    if (minorChange) {\n      this.#lastModelWithMinorChange = model;\n    } else {\n      await model.getAgent().invoke_markUndoableState();\n      this.#lastModelWithMinorChange = null;\n    }\n  }\n\n  async undo(): Promise<void> {\n    if (this.#index === 0) {\n      return await Promise.resolve();\n    }\n    --this.#index;\n    this.#lastModelWithMinorChange = null;\n    await this.#stack[this.#index].getAgent().invoke_undo();\n  }\n\n  async redo(): Promise<void> {\n    if (this.#index >= this.#stack.length) {\n      return await Promise.resolve();\n    }\n    ++this.#index;\n    this.#lastModelWithMinorChange = null;\n    await this.#stack[this.#index - 1].getAgent().invoke_redo();\n  }\n\n  dispose(model: DOMModel): void {\n    let shift = 0;\n    for (let i = 0; i < this.#index; ++i) {\n      if (this.#stack[i] === model) {\n        ++shift;\n      }\n    }\n    Platform.ArrayUtilities.removeElement(this.#stack, model);\n    this.#index -= shift;\n    if (this.#lastModelWithMinorChange === model) {\n      this.#lastModelWithMinorChange = null;\n    }\n  }\n}\n\nSDKModel.register(DOMModel, {capabilities: Capability.DOM, autostart: true});\nexport interface Attribute {\n  name: string;\n  value: string;\n  _node: DOMNode;\n}\n", "// Copyright 2010 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport type * as ProtocolProxyApi from '../../generated/protocol-proxy-api.js';\nimport type * as Protocol from '../../generated/protocol.js';\nimport * as TextUtils from '../../models/text_utils/text_utils.js';\nimport * as Common from '../common/common.js';\nimport * as Host from '../host/host.js';\nimport * as Platform from '../platform/platform.js';\nimport * as Root from '../root/root.js';\n\nimport {CSSFontFace} from './CSSFontFace.js';\nimport {CSSMatchedStyles} from './CSSMatchedStyles.js';\nimport {CSSMedia} from './CSSMedia.js';\nimport {cssMetadata} from './CSSMetadata.js';\nimport {CSSStyleRule} from './CSSRule.js';\nimport {CSSStyleDeclaration, Type} from './CSSStyleDeclaration.js';\nimport {CSSStyleSheetHeader} from './CSSStyleSheetHeader.js';\nimport {DOMModel, type DOMNode} from './DOMModel.js';\nimport {\n  Events as ResourceTreeModelEvents,\n  PrimaryPageChangeType,\n  type ResourceTreeFrame,\n  ResourceTreeModel,\n} from './ResourceTreeModel.js';\nimport {SDKModel} from './SDKModel.js';\nimport {SourceMapManager} from './SourceMapManager.js';\nimport {Capability, type Target} from './Target.js';\n\nexport const enum ColorScheme {\n  LIGHT = 'light',\n  DARK = 'dark',\n}\n\nexport interface LayoutProperties {\n  isFlex: boolean;\n  isGrid: boolean;\n  isSubgrid: boolean;\n  isGridLanes: boolean;\n  isContainer: boolean;\n  hasScroll: boolean;\n}\n\nexport class CSSModel extends SDKModel<EventTypes> {\n  readonly agent: ProtocolProxyApi.CSSApi;\n  readonly #domModel: DOMModel;\n  readonly #fontFaces = new Map<string, CSSFontFace>();\n  readonly #originalStyleSheetText = new Map<CSSStyleSheetHeader, Promise<string|null>>();\n  readonly #resourceTreeModel: ResourceTreeModel|null;\n  readonly #sourceMapManager: SourceMapManager<CSSStyleSheetHeader>;\n  readonly #styleLoader: ComputedStyleLoader;\n  readonly #stylePollingThrottler = new Common.Throttler.Throttler(StylePollingInterval);\n  readonly #styleSheetIdsForURL =\n      new Map<Platform.DevToolsPath.UrlString, Map<string, Set<Protocol.DOM.StyleSheetId>>>();\n  readonly #styleSheetIdToHeader = new Map<Protocol.DOM.StyleSheetId, CSSStyleSheetHeader>();\n  #cachedMatchedCascadeNode: DOMNode|null = null;\n  #cachedMatchedCascadePromise: Promise<CSSMatchedStyles|null>|null = null;\n  #cssPropertyTracker: CSSPropertyTracker|null = null;\n  #isCSSPropertyTrackingEnabled = false;\n  #isEnabled = false;\n  #isRuleUsageTrackingEnabled = false;\n  #isTrackingRequestPending = false;\n  #colorScheme: ColorScheme|undefined;\n\n  constructor(target: Target) {\n    super(target);\n    this.#domModel = (target.model(DOMModel) as DOMModel);\n    this.#sourceMapManager = new SourceMapManager(target);\n    this.agent = target.cssAgent();\n    this.#styleLoader = new ComputedStyleLoader(this);\n    this.#resourceTreeModel = target.model(ResourceTreeModel);\n    if (this.#resourceTreeModel) {\n      this.#resourceTreeModel.addEventListener(\n          ResourceTreeModelEvents.PrimaryPageChanged, this.onPrimaryPageChanged, this);\n    }\n    target.registerCSSDispatcher(new CSSDispatcher(this));\n    if (!target.suspended()) {\n      void this.enable();\n    }\n\n    this.#sourceMapManager.setEnabled(\n        Common.Settings.Settings.instance().moduleSetting<boolean>('css-source-maps-enabled').get());\n    Common.Settings.Settings.instance()\n        .moduleSetting<boolean>('css-source-maps-enabled')\n        .addChangeListener(event => this.#sourceMapManager.setEnabled(event.data));\n  }\n\n  async colorScheme(): Promise<ColorScheme|undefined> {\n    if (!this.#colorScheme) {\n      const colorSchemeResponse = await this.domModel()?.target().runtimeAgent().invoke_evaluate(\n          {expression: 'window.matchMedia && window.matchMedia(\"(prefers-color-scheme: dark)\").matches'});\n      if (colorSchemeResponse && !colorSchemeResponse.exceptionDetails && !colorSchemeResponse.getError()) {\n        this.#colorScheme = colorSchemeResponse.result.value ? ColorScheme.DARK : ColorScheme.LIGHT;\n      }\n    }\n    return this.#colorScheme;\n  }\n\n  async resolveValues(propertyName: string|undefined, nodeId: Protocol.DOM.NodeId, ...values: string[]):\n      Promise<string[]|null> {\n    if (propertyName && cssMetadata().getLonghands(propertyName)?.length) {\n      return null;\n    }\n    const response = await this.agent.invoke_resolveValues({values, nodeId, propertyName});\n    if (response.getError()) {\n      return null;\n    }\n    return response.results;\n  }\n\n  headersForSourceURL(sourceURL: Platform.DevToolsPath.UrlString): CSSStyleSheetHeader[] {\n    const headers = [];\n    for (const headerId of this.getStyleSheetIdsForURL(sourceURL)) {\n      const header = this.styleSheetHeaderForId(headerId);\n      if (header) {\n        headers.push(header);\n      }\n    }\n    return headers;\n  }\n\n  createRawLocationsByURL(\n      sourceURL: Platform.DevToolsPath.UrlString, lineNumber: number,\n      columnNumber: number|undefined = 0): CSSLocation[] {\n    const headers = this.headersForSourceURL(sourceURL);\n    headers.sort(stylesheetComparator);\n    const endIndex = Platform.ArrayUtilities.upperBound(\n        headers, undefined, (_, header) => lineNumber - header.startLine || columnNumber - header.startColumn);\n    if (!endIndex) {\n      return [];\n    }\n    const locations = [];\n    const last = headers[endIndex - 1];\n    for (let index = endIndex - 1;\n         index >= 0 && headers[index].startLine === last.startLine && headers[index].startColumn === last.startColumn;\n         --index) {\n      if (headers[index].containsLocation(lineNumber, columnNumber)) {\n        locations.push(new CSSLocation(headers[index], lineNumber, columnNumber));\n      }\n    }\n\n    return locations;\n    function stylesheetComparator(a: CSSStyleSheetHeader, b: CSSStyleSheetHeader): number {\n      return a.startLine - b.startLine || a.startColumn - b.startColumn || a.id.localeCompare(b.id);\n    }\n  }\n\n  sourceMapManager(): SourceMapManager<CSSStyleSheetHeader> {\n    return this.#sourceMapManager;\n  }\n\n  static readableLayerName(text: string): string {\n    return text || '<anonymous>';\n  }\n\n  static trimSourceURL(text: string): string {\n    let sourceURLIndex = text.lastIndexOf('/*# sourceURL=');\n    if (sourceURLIndex === -1) {\n      sourceURLIndex = text.lastIndexOf('/*@ sourceURL=');\n      if (sourceURLIndex === -1) {\n        return text;\n      }\n    }\n    const sourceURLLineIndex = text.lastIndexOf('\\n', sourceURLIndex);\n    if (sourceURLLineIndex === -1) {\n      return text;\n    }\n    const sourceURLLine = text.substr(sourceURLLineIndex + 1).split('\\n', 1)[0];\n    const sourceURLRegex = /[\\x20\\t]*\\/\\*[#@] sourceURL=[\\x20\\t]*([^\\s]*)[\\x20\\t]*\\*\\/[\\x20\\t]*$/;\n    if (sourceURLLine.search(sourceURLRegex) === -1) {\n      return text;\n    }\n    return text.substr(0, sourceURLLineIndex) + text.substr(sourceURLLineIndex + sourceURLLine.length + 1);\n  }\n\n  domModel(): DOMModel {\n    return this.#domModel;\n  }\n\n  async trackComputedStyleUpdatesForNode(nodeId: Protocol.DOM.NodeId|undefined): Promise<void> {\n    await this.agent.invoke_trackComputedStyleUpdatesForNode({nodeId});\n  }\n\n  async setStyleText(\n      styleSheetId: Protocol.DOM.StyleSheetId, range: TextUtils.TextRange.TextRange, text: string,\n      majorChange: boolean): Promise<boolean> {\n    try {\n      await this.ensureOriginalStyleSheetText(styleSheetId);\n\n      const {styles} =\n          await this.agent.invoke_setStyleTexts({edits: [{styleSheetId, range: range.serializeToObject(), text}]});\n      if (styles?.length !== 1) {\n        return false;\n      }\n\n      this.#domModel.markUndoableState(!majorChange);\n      const edit = new Edit(styleSheetId, range, text, styles[0]);\n      this.fireStyleSheetChanged(styleSheetId, edit);\n      return true;\n    } catch (e) {\n      console.error(e);\n      return false;\n    }\n  }\n\n  async setSelectorText(styleSheetId: Protocol.DOM.StyleSheetId, range: TextUtils.TextRange.TextRange, text: string):\n      Promise<boolean> {\n    Host.userMetrics.actionTaken(Host.UserMetrics.Action.StyleRuleEdited);\n\n    try {\n      await this.ensureOriginalStyleSheetText(styleSheetId);\n      const {selectorList} = await this.agent.invoke_setRuleSelector({styleSheetId, range, selector: text});\n\n      if (!selectorList) {\n        return false;\n      }\n      this.#domModel.markUndoableState();\n      const edit = new Edit(styleSheetId, range, text, selectorList);\n      this.fireStyleSheetChanged(styleSheetId, edit);\n      return true;\n    } catch (e) {\n      console.error(e);\n      return false;\n    }\n  }\n\n  async setPropertyRulePropertyName(\n      styleSheetId: Protocol.DOM.StyleSheetId, range: TextUtils.TextRange.TextRange, text: string): Promise<boolean> {\n    Host.userMetrics.actionTaken(Host.UserMetrics.Action.StyleRuleEdited);\n\n    try {\n      await this.ensureOriginalStyleSheetText(styleSheetId);\n      const {propertyName} =\n          await this.agent.invoke_setPropertyRulePropertyName({styleSheetId, range, propertyName: text});\n\n      if (!propertyName) {\n        return false;\n      }\n      this.#domModel.markUndoableState();\n      const edit = new Edit(styleSheetId, range, text, propertyName);\n      this.fireStyleSheetChanged(styleSheetId, edit);\n      return true;\n    } catch (e) {\n      console.error(e);\n      return false;\n    }\n  }\n\n  async setKeyframeKey(styleSheetId: Protocol.DOM.StyleSheetId, range: TextUtils.TextRange.TextRange, text: string):\n      Promise<boolean> {\n    Host.userMetrics.actionTaken(Host.UserMetrics.Action.StyleRuleEdited);\n\n    try {\n      await this.ensureOriginalStyleSheetText(styleSheetId);\n      const {keyText} = await this.agent.invoke_setKeyframeKey({styleSheetId, range, keyText: text});\n\n      if (!keyText) {\n        return false;\n      }\n      this.#domModel.markUndoableState();\n      const edit = new Edit(styleSheetId, range, text, keyText);\n      this.fireStyleSheetChanged(styleSheetId, edit);\n      return true;\n    } catch (e) {\n      console.error(e);\n      return false;\n    }\n  }\n\n  startCoverage(): Promise<Protocol.ProtocolResponseWithError> {\n    this.#isRuleUsageTrackingEnabled = true;\n    return this.agent.invoke_startRuleUsageTracking();\n  }\n\n  async takeCoverageDelta(): Promise<{\n    timestamp: number,\n    coverage: Protocol.CSS.RuleUsage[],\n  }> {\n    const r = await this.agent.invoke_takeCoverageDelta();\n    const timestamp = (r?.timestamp) || 0;\n    const coverage = (r?.coverage) || [];\n    return {timestamp, coverage};\n  }\n\n  setLocalFontsEnabled(enabled: boolean): Promise<Protocol.ProtocolResponseWithError> {\n    return this.agent.invoke_setLocalFontsEnabled({\n      enabled,\n    });\n  }\n\n  async stopCoverage(): Promise<void> {\n    this.#isRuleUsageTrackingEnabled = false;\n    await this.agent.invoke_stopRuleUsageTracking();\n  }\n\n  async getMediaQueries(): Promise<CSSMedia[]> {\n    const {medias} = await this.agent.invoke_getMediaQueries();\n    return medias ? CSSMedia.parseMediaArrayPayload(this, medias) : [];\n  }\n\n  async getRootLayer(nodeId: Protocol.DOM.NodeId): Promise<Protocol.CSS.CSSLayerData> {\n    const {rootLayer} = await this.agent.invoke_getLayersForNode({nodeId});\n    return rootLayer;\n  }\n\n  isEnabled(): boolean {\n    return this.#isEnabled;\n  }\n\n  private async enable(): Promise<void> {\n    await this.agent.invoke_enable();\n    this.#isEnabled = true;\n    if (this.#isRuleUsageTrackingEnabled) {\n      await this.startCoverage();\n    }\n    this.dispatchEventToListeners(Events.ModelWasEnabled);\n  }\n\n  async getAnimatedStylesForNode(nodeId: Protocol.DOM.NodeId):\n      Promise<Protocol.CSS.GetAnimatedStylesForNodeResponse|null> {\n    const response = await this.agent.invoke_getAnimatedStylesForNode({nodeId});\n    if (response.getError()) {\n      return null;\n    }\n\n    return response;\n  }\n\n  async getMatchedStyles(nodeId: Protocol.DOM.NodeId): Promise<CSSMatchedStyles|null> {\n    const node = this.#domModel.nodeForId(nodeId);\n    if (!node) {\n      return null;\n    }\n\n    const shouldGetAnimatedStyles = Root.Runtime.hostConfig.devToolsAnimationStylesInStylesTab?.enabled;\n    const [matchedStylesResponse, animatedStylesResponse] = await Promise.all([\n      this.agent.invoke_getMatchedStylesForNode({nodeId}),\n      shouldGetAnimatedStyles ? this.agent.invoke_getAnimatedStylesForNode({nodeId}) : undefined,\n    ]);\n\n    if (matchedStylesResponse.getError()) {\n      return null;\n    }\n\n    const payload = {\n      cssModel: this,\n      node,\n      inlinePayload: matchedStylesResponse.inlineStyle || null,\n      attributesPayload: matchedStylesResponse.attributesStyle || null,\n      matchedPayload: matchedStylesResponse.matchedCSSRules || [],\n      pseudoPayload: matchedStylesResponse.pseudoElements || [],\n      inheritedPayload: matchedStylesResponse.inherited || [],\n      inheritedPseudoPayload: matchedStylesResponse.inheritedPseudoElements || [],\n      animationsPayload: matchedStylesResponse.cssKeyframesRules || [],\n      parentLayoutNodeId: matchedStylesResponse.parentLayoutNodeId,\n      positionTryRules: matchedStylesResponse.cssPositionTryRules || [],\n      propertyRules: matchedStylesResponse.cssPropertyRules ?? [],\n      functionRules: matchedStylesResponse.cssFunctionRules ?? [],\n      cssPropertyRegistrations: matchedStylesResponse.cssPropertyRegistrations ?? [],\n      atRules: matchedStylesResponse.cssAtRules ?? [],\n      activePositionFallbackIndex: matchedStylesResponse.activePositionFallbackIndex ?? -1,\n      animationStylesPayload: animatedStylesResponse?.animationStyles || [],\n      inheritedAnimatedPayload: animatedStylesResponse?.inherited || [],\n      transitionsStylePayload: animatedStylesResponse?.transitionsStyle || null,\n    };\n    return await CSSMatchedStyles.create(payload);\n  }\n\n  async getClassNames(styleSheetId: Protocol.DOM.StyleSheetId): Promise<string[]> {\n    const {classNames} = await this.agent.invoke_collectClassNames({styleSheetId});\n    return classNames || [];\n  }\n\n  async getComputedStyle(nodeId: Protocol.DOM.NodeId): Promise<Map<string, string>|null> {\n    if (!this.isEnabled()) {\n      await this.enable();\n    }\n    return await this.#styleLoader.computedStylePromise(nodeId);\n  }\n\n  async getLayoutPropertiesFromComputedStyle(nodeId: Protocol.DOM.NodeId): Promise<LayoutProperties|null> {\n    const styles = await this.getComputedStyle(nodeId);\n    if (!styles) {\n      return null;\n    }\n\n    const display = styles.get('display');\n    const isFlex = display === 'flex' || display === 'inline-flex';\n    const isGrid = display === 'grid' || display === 'inline-grid';\n    const isSubgrid = (isGrid &&\n                       (styles.get('grid-template-columns')?.startsWith('subgrid') ||\n                        styles.get('grid-template-rows')?.startsWith('subgrid'))) ??\n        false;\n    const isGridLanes = display === 'grid-lanes' || display === 'inline-grid-lanes';\n    const containerType = styles.get('container-type');\n    const isContainer = Boolean(containerType) && containerType !== '' && containerType !== 'normal';\n    const hasScroll = Boolean(styles.get('scroll-snap-type')) && styles.get('scroll-snap-type') !== 'none';\n\n    return {\n      isFlex,\n      isGrid,\n      isSubgrid,\n      isGridLanes,\n      isContainer,\n      hasScroll,\n    };\n  }\n\n  async getEnvironmentVariables(): Promise<Record<string, string>> {\n    const response = await this.agent.invoke_getEnvironmentVariables();\n    if (response.getError()) {\n      return {};\n    }\n    return response.environmentVariables;\n  }\n\n  async getBackgroundColors(nodeId: Protocol.DOM.NodeId): Promise<ContrastInfo|null> {\n    const response = await this.agent.invoke_getBackgroundColors({nodeId});\n    if (response.getError()) {\n      return null;\n    }\n\n    return {\n      backgroundColors: response.backgroundColors || null,\n      computedFontSize: response.computedFontSize || '',\n      computedFontWeight: response.computedFontWeight || '',\n    };\n  }\n\n  async getPlatformFonts(nodeId: Protocol.DOM.NodeId): Promise<Protocol.CSS.PlatformFontUsage[]|null> {\n    const {fonts} = await this.agent.invoke_getPlatformFontsForNode({nodeId});\n    return fonts;\n  }\n\n  allStyleSheets(): CSSStyleSheetHeader[] {\n    const values = [...this.#styleSheetIdToHeader.values()];\n    function styleSheetComparator(a: CSSStyleSheetHeader, b: CSSStyleSheetHeader): number {\n      if (a.sourceURL < b.sourceURL) {\n        return -1;\n      }\n      if (a.sourceURL > b.sourceURL) {\n        return 1;\n      }\n      return a.startLine - b.startLine || a.startColumn - b.startColumn;\n    }\n    values.sort(styleSheetComparator);\n\n    return values;\n  }\n\n  async getInlineStyles(nodeId: Protocol.DOM.NodeId): Promise<InlineStyleResult|null> {\n    const response = await this.agent.invoke_getInlineStylesForNode({nodeId});\n\n    if (response.getError() || !response.inlineStyle) {\n      return null;\n    }\n    const inlineStyle = new CSSStyleDeclaration(this, null, response.inlineStyle, Type.Inline);\n    const attributesStyle = response.attributesStyle ?\n        new CSSStyleDeclaration(this, null, response.attributesStyle, Type.Attributes) :\n        null;\n    return new InlineStyleResult(inlineStyle, attributesStyle);\n  }\n\n  forceStartingStyle(node: DOMNode, forced: boolean): boolean {\n    void this.agent.invoke_forceStartingStyle({nodeId: node.id, forced});\n    this.dispatchEventToListeners(Events.StartingStylesStateForced, node);\n    return true;\n  }\n\n  forcePseudoState(node: DOMNode, pseudoClass: string, enable: boolean): boolean {\n    const forcedPseudoClasses = node.marker<string[]>(PseudoStateMarker) || [];\n    const hasPseudoClass = forcedPseudoClasses.includes(pseudoClass);\n    if (enable) {\n      if (hasPseudoClass) {\n        return false;\n      }\n      forcedPseudoClasses.push(pseudoClass);\n      node.setMarker(PseudoStateMarker, forcedPseudoClasses);\n    } else {\n      if (!hasPseudoClass) {\n        return false;\n      }\n      Platform.ArrayUtilities.removeElement(forcedPseudoClasses, pseudoClass);\n      if (forcedPseudoClasses.length) {\n        node.setMarker(PseudoStateMarker, forcedPseudoClasses);\n      } else {\n        node.setMarker(PseudoStateMarker, null);\n      }\n    }\n\n    if (node.id === undefined) {\n      return false;\n    }\n    void this.agent.invoke_forcePseudoState({nodeId: node.id, forcedPseudoClasses});\n    this.dispatchEventToListeners(Events.PseudoStateForced, {node, pseudoClass, enable});\n    return true;\n  }\n\n  pseudoState(node: DOMNode): string[]|null {\n    return node.marker(PseudoStateMarker) || [];\n  }\n\n  async setMediaText(\n      styleSheetId: Protocol.DOM.StyleSheetId, range: TextUtils.TextRange.TextRange,\n      newMediaText: string): Promise<boolean> {\n    Host.userMetrics.actionTaken(Host.UserMetrics.Action.StyleRuleEdited);\n\n    try {\n      await this.ensureOriginalStyleSheetText(styleSheetId);\n      const {media} = await this.agent.invoke_setMediaText({styleSheetId, range, text: newMediaText});\n\n      if (!media) {\n        return false;\n      }\n      this.#domModel.markUndoableState();\n      const edit = new Edit(styleSheetId, range, newMediaText, media);\n      this.fireStyleSheetChanged(styleSheetId, edit);\n      return true;\n    } catch (e) {\n      console.error(e);\n      return false;\n    }\n  }\n\n  async setContainerQueryText(\n      styleSheetId: Protocol.DOM.StyleSheetId, range: TextUtils.TextRange.TextRange,\n      newContainerQueryText: string): Promise<boolean> {\n    Host.userMetrics.actionTaken(Host.UserMetrics.Action.StyleRuleEdited);\n\n    try {\n      await this.ensureOriginalStyleSheetText(styleSheetId);\n      const {containerQuery} =\n          await this.agent.invoke_setContainerQueryText({styleSheetId, range, text: newContainerQueryText});\n\n      if (!containerQuery) {\n        return false;\n      }\n      this.#domModel.markUndoableState();\n      const edit = new Edit(styleSheetId, range, newContainerQueryText, containerQuery);\n      this.fireStyleSheetChanged(styleSheetId, edit);\n      return true;\n    } catch (e) {\n      console.error(e);\n      return false;\n    }\n  }\n\n  async setSupportsText(\n      styleSheetId: Protocol.DOM.StyleSheetId, range: TextUtils.TextRange.TextRange,\n      newSupportsText: string): Promise<boolean> {\n    Host.userMetrics.actionTaken(Host.UserMetrics.Action.StyleRuleEdited);\n\n    try {\n      await this.ensureOriginalStyleSheetText(styleSheetId);\n      const {supports} = await this.agent.invoke_setSupportsText({styleSheetId, range, text: newSupportsText});\n\n      if (!supports) {\n        return false;\n      }\n      this.#domModel.markUndoableState();\n      const edit = new Edit(styleSheetId, range, newSupportsText, supports);\n      this.fireStyleSheetChanged(styleSheetId, edit);\n      return true;\n    } catch (e) {\n      console.error(e);\n      return false;\n    }\n  }\n\n  async setScopeText(\n      styleSheetId: Protocol.DOM.StyleSheetId, range: TextUtils.TextRange.TextRange,\n      newScopeText: string): Promise<boolean> {\n    Host.userMetrics.actionTaken(Host.UserMetrics.Action.StyleRuleEdited);\n\n    try {\n      await this.ensureOriginalStyleSheetText(styleSheetId);\n      const {scope} = await this.agent.invoke_setScopeText({styleSheetId, range, text: newScopeText});\n\n      if (!scope) {\n        return false;\n      }\n      this.#domModel.markUndoableState();\n      const edit = new Edit(styleSheetId, range, newScopeText, scope);\n      this.fireStyleSheetChanged(styleSheetId, edit);\n      return true;\n    } catch (e) {\n      console.error(e);\n      return false;\n    }\n  }\n\n  async addRule(styleSheetId: Protocol.DOM.StyleSheetId, ruleText: string, ruleLocation: TextUtils.TextRange.TextRange):\n      Promise<CSSStyleRule|null> {\n    try {\n      await this.ensureOriginalStyleSheetText(styleSheetId);\n      const {rule} = await this.agent.invoke_addRule({styleSheetId, ruleText, location: ruleLocation});\n\n      if (!rule) {\n        return null;\n      }\n      this.#domModel.markUndoableState();\n      const edit = new Edit(styleSheetId, ruleLocation, ruleText, rule);\n      this.fireStyleSheetChanged(styleSheetId, edit);\n      return new CSSStyleRule(this, rule);\n    } catch (e) {\n      console.error(e);\n      return null;\n    }\n  }\n\n  async requestViaInspectorStylesheet(maybeFrameId?: Protocol.Page.FrameId|null): Promise<CSSStyleSheetHeader|null> {\n    const frameId = maybeFrameId ||\n        (this.#resourceTreeModel && this.#resourceTreeModel.mainFrame ? this.#resourceTreeModel.mainFrame.id : null);\n    const headers = [...this.#styleSheetIdToHeader.values()];\n    const styleSheetHeader = headers.find(header => header.frameId === frameId && header.isViaInspector());\n    if (styleSheetHeader) {\n      return styleSheetHeader;\n    }\n    if (!frameId) {\n      return null;\n    }\n\n    try {\n      return await this.createInspectorStylesheet(frameId);\n    } catch (e) {\n      console.error(e);\n      return null;\n    }\n  }\n\n  async createInspectorStylesheet(frameId: Protocol.Page.FrameId, force = false): Promise<CSSStyleSheetHeader|null> {\n    const result = await this.agent.invoke_createStyleSheet({frameId, force});\n    if (result.getError()) {\n      throw new Error(result.getError());\n    }\n    return this.#styleSheetIdToHeader.get(result.styleSheetId) || null;\n  }\n\n  mediaQueryResultChanged(): void {\n    this.#colorScheme = undefined;\n    this.dispatchEventToListeners(Events.MediaQueryResultChanged);\n  }\n\n  fontsUpdated(fontFace?: Protocol.CSS.FontFace|null): void {\n    if (fontFace) {\n      this.#fontFaces.set(fontFace.src, new CSSFontFace(fontFace));\n    }\n    this.dispatchEventToListeners(Events.FontsUpdated);\n  }\n\n  fontFaces(): CSSFontFace[] {\n    return [...this.#fontFaces.values()];\n  }\n\n  fontFaceForSource(src: string): CSSFontFace|undefined {\n    return this.#fontFaces.get(src);\n  }\n\n  styleSheetHeaderForId(id: Protocol.DOM.StyleSheetId): CSSStyleSheetHeader|null {\n    return this.#styleSheetIdToHeader.get(id) || null;\n  }\n\n  styleSheetHeaders(): CSSStyleSheetHeader[] {\n    return [...this.#styleSheetIdToHeader.values()];\n  }\n\n  fireStyleSheetChanged(styleSheetId: Protocol.DOM.StyleSheetId, edit?: Edit): void {\n    this.dispatchEventToListeners(Events.StyleSheetChanged, {styleSheetId, edit});\n  }\n\n  private ensureOriginalStyleSheetText(styleSheetId: Protocol.DOM.StyleSheetId): Promise<string|null> {\n    const header = this.styleSheetHeaderForId(styleSheetId);\n    if (!header) {\n      return Promise.resolve(null);\n    }\n    let promise = this.#originalStyleSheetText.get(header);\n    if (!promise) {\n      promise = this.getStyleSheetText(header.id);\n      this.#originalStyleSheetText.set(header, promise);\n      this.originalContentRequestedForTest(header);\n    }\n    return promise;\n  }\n\n  private originalContentRequestedForTest(_header: CSSStyleSheetHeader): void {\n  }\n\n  originalStyleSheetText(header: CSSStyleSheetHeader): Promise<string|null> {\n    return this.ensureOriginalStyleSheetText(header.id);\n  }\n\n  getAllStyleSheetHeaders(): Iterable<CSSStyleSheetHeader> {\n    return this.#styleSheetIdToHeader.values();\n  }\n\n  computedStyleUpdated(nodeId: Protocol.DOM.NodeId): void {\n    this.dispatchEventToListeners(Events.ComputedStyleUpdated, {nodeId});\n  }\n\n  styleSheetAdded(header: Protocol.CSS.CSSStyleSheetHeader): void {\n    console.assert(!this.#styleSheetIdToHeader.get(header.styleSheetId));\n    if (header.loadingFailed) {\n      // When the stylesheet fails to load, treat it as a constructed stylesheet. Failed sheets can still be modified\n      // from JS, in which case CSS.styleSheetChanged events are sent. So as to not confuse CSSModel clients we don't\n      // just discard the failed sheet here. Treating the failed sheet as a constructed stylesheet lets us keep track\n      // of it cleanly.\n      header.hasSourceURL = false;\n      header.isConstructed = true;\n      header.isInline = false;\n      header.isMutable = false;\n      header.sourceURL = '';\n      header.sourceMapURL = undefined;\n    }\n    const styleSheetHeader = new CSSStyleSheetHeader(this, header);\n    this.#styleSheetIdToHeader.set(header.styleSheetId, styleSheetHeader);\n    const url = styleSheetHeader.resourceURL();\n    let frameIdToStyleSheetIds = this.#styleSheetIdsForURL.get(url);\n    if (!frameIdToStyleSheetIds) {\n      frameIdToStyleSheetIds = new Map();\n      this.#styleSheetIdsForURL.set(url, frameIdToStyleSheetIds);\n    }\n    if (frameIdToStyleSheetIds) {\n      let styleSheetIds = frameIdToStyleSheetIds.get(styleSheetHeader.frameId);\n      if (!styleSheetIds) {\n        styleSheetIds = new Set();\n        frameIdToStyleSheetIds.set(styleSheetHeader.frameId, styleSheetIds);\n      }\n      styleSheetIds.add(styleSheetHeader.id);\n    }\n    this.#sourceMapManager.attachSourceMap(styleSheetHeader, styleSheetHeader.sourceURL, styleSheetHeader.sourceMapURL);\n    this.dispatchEventToListeners(Events.StyleSheetAdded, styleSheetHeader);\n  }\n\n  styleSheetRemoved(id: Protocol.DOM.StyleSheetId): void {\n    const header = this.#styleSheetIdToHeader.get(id);\n    console.assert(Boolean(header));\n    if (!header) {\n      return;\n    }\n    this.#styleSheetIdToHeader.delete(id);\n    const url = header.resourceURL();\n    const frameIdToStyleSheetIds = this.#styleSheetIdsForURL.get(url);\n    console.assert(\n        Boolean(frameIdToStyleSheetIds), 'No frameId to styleSheetId map is available for given style sheet URL.');\n    if (frameIdToStyleSheetIds) {\n      const stylesheetIds = frameIdToStyleSheetIds.get(header.frameId);\n      if (stylesheetIds) {\n        stylesheetIds.delete(id);\n        if (!stylesheetIds.size) {\n          frameIdToStyleSheetIds.delete(header.frameId);\n          if (!frameIdToStyleSheetIds.size) {\n            this.#styleSheetIdsForURL.delete(url);\n          }\n        }\n      }\n    }\n    this.#originalStyleSheetText.delete(header);\n    this.#sourceMapManager.detachSourceMap(header);\n    this.dispatchEventToListeners(Events.StyleSheetRemoved, header);\n  }\n\n  getStyleSheetIdsForURL(url: Platform.DevToolsPath.UrlString): Protocol.DOM.StyleSheetId[] {\n    const frameIdToStyleSheetIds = this.#styleSheetIdsForURL.get(url);\n    if (!frameIdToStyleSheetIds) {\n      return [];\n    }\n\n    const result = [];\n    for (const styleSheetIds of frameIdToStyleSheetIds.values()) {\n      result.push(...styleSheetIds);\n    }\n    return result;\n  }\n\n  async setStyleSheetText(styleSheetId: Protocol.DOM.StyleSheetId, newText: string, majorChange: boolean):\n      Promise<string|null> {\n    const header = this.#styleSheetIdToHeader.get(styleSheetId);\n    if (!header) {\n      return 'Unknown stylesheet in CSS.setStyleSheetText';\n    }\n    newText = CSSModel.trimSourceURL(newText);\n    if (header.hasSourceURL) {\n      newText += '\\n/*# sourceURL=' + header.sourceURL + ' */';\n    }\n\n    await this.ensureOriginalStyleSheetText(styleSheetId);\n    const response = await this.agent.invoke_setStyleSheetText({styleSheetId: header.id, text: newText});\n    const sourceMapURL = response.sourceMapURL as Platform.DevToolsPath.UrlString;\n\n    this.#sourceMapManager.detachSourceMap(header);\n    header.setSourceMapURL(sourceMapURL);\n    this.#sourceMapManager.attachSourceMap(header, header.sourceURL, header.sourceMapURL);\n    if (sourceMapURL === null) {\n      return 'Error in CSS.setStyleSheetText';\n    }\n    this.#domModel.markUndoableState(!majorChange);\n    this.fireStyleSheetChanged(styleSheetId);\n    return null;\n  }\n\n  async getStyleSheetText(styleSheetId: Protocol.DOM.StyleSheetId): Promise<string|null> {\n    const response = await this.agent.invoke_getStyleSheetText({styleSheetId});\n    if (response.getError()) {\n      return null;\n    }\n    const {text} = response;\n    return text && CSSModel.trimSourceURL(text);\n  }\n\n  private async onPrimaryPageChanged(\n      event: Common.EventTarget.EventTargetEvent<{frame: ResourceTreeFrame, type: PrimaryPageChangeType}>):\n      Promise<void> {\n    // If the main frame was restored from the back-forward cache, the order of CDP\n    // is different from the regular navigations. In this case, events about CSS\n    // stylesheet has already been received and they are mixed with the previous page\n    // stylesheets. Therefore, we re-enable the CSS agent to get fresh events.\n    // For the regular navigations, we can just clear the local data because events about\n    // stylesheets will arrive later.\n    if (event.data.frame.backForwardCacheDetails.restoredFromCache) {\n      await this.suspendModel();\n      await this.resumeModel();\n    } else if (event.data.type !== PrimaryPageChangeType.ACTIVATION) {\n      this.resetStyleSheets();\n      this.resetFontFaces();\n    }\n  }\n\n  private resetStyleSheets(): void {\n    const headers = [...this.#styleSheetIdToHeader.values()];\n    this.#styleSheetIdsForURL.clear();\n    this.#styleSheetIdToHeader.clear();\n    for (const header of headers) {\n      this.#sourceMapManager.detachSourceMap(header);\n      this.dispatchEventToListeners(Events.StyleSheetRemoved, header);\n    }\n  }\n\n  private resetFontFaces(): void {\n    this.#fontFaces.clear();\n  }\n\n  override async suspendModel(): Promise<void> {\n    this.#isEnabled = false;\n    await this.agent.invoke_disable();\n    this.resetStyleSheets();\n    this.resetFontFaces();\n  }\n\n  override async resumeModel(): Promise<void> {\n    return await this.enable();\n  }\n\n  setEffectivePropertyValueForNode(nodeId: Protocol.DOM.NodeId, propertyName: string, value: string): void {\n    void this.agent.invoke_setEffectivePropertyValueForNode({nodeId, propertyName, value});\n  }\n\n  cachedMatchedCascadeForNode(node: DOMNode): Promise<CSSMatchedStyles|null> {\n    if (this.#cachedMatchedCascadeNode !== node) {\n      this.discardCachedMatchedCascade();\n    }\n    this.#cachedMatchedCascadeNode = node;\n    if (!this.#cachedMatchedCascadePromise) {\n      if (node.id) {\n        this.#cachedMatchedCascadePromise = this.getMatchedStyles(node.id);\n      } else {\n        return Promise.resolve(null);\n      }\n    }\n    return this.#cachedMatchedCascadePromise;\n  }\n\n  discardCachedMatchedCascade(): void {\n    this.#cachedMatchedCascadeNode = null;\n    this.#cachedMatchedCascadePromise = null;\n  }\n\n  createCSSPropertyTracker(propertiesToTrack: Protocol.CSS.CSSComputedStyleProperty[]): CSSPropertyTracker {\n    const cssPropertyTracker = new CSSPropertyTracker(this, propertiesToTrack);\n    return cssPropertyTracker;\n  }\n\n  enableCSSPropertyTracker(cssPropertyTracker: CSSPropertyTracker): void {\n    const propertiesToTrack = cssPropertyTracker.getTrackedProperties();\n    if (propertiesToTrack.length === 0) {\n      return;\n    }\n    void this.agent.invoke_trackComputedStyleUpdates({propertiesToTrack});\n    this.#isCSSPropertyTrackingEnabled = true;\n    this.#cssPropertyTracker = cssPropertyTracker;\n    void this.pollComputedStyleUpdates();\n  }\n\n  // Since we only support one tracker at a time, this call effectively disables\n  // style tracking.\n  disableCSSPropertyTracker(): void {\n    this.#isCSSPropertyTrackingEnabled = false;\n    this.#cssPropertyTracker = null;\n    // Sending an empty list to the backend signals the close of style tracking\n    void this.agent.invoke_trackComputedStyleUpdates({propertiesToTrack: []});\n  }\n\n  private async pollComputedStyleUpdates(): Promise<void> {\n    if (this.#isTrackingRequestPending) {\n      return;\n    }\n\n    if (this.#isCSSPropertyTrackingEnabled) {\n      this.#isTrackingRequestPending = true;\n      const result = await this.agent.invoke_takeComputedStyleUpdates();\n      this.#isTrackingRequestPending = false;\n\n      if (result.getError() || !result.nodeIds || !this.#isCSSPropertyTrackingEnabled) {\n        return;\n      }\n\n      if (this.#cssPropertyTracker) {\n        this.#cssPropertyTracker.dispatchEventToListeners(\n            CSSPropertyTrackerEvents.TRACKED_CSS_PROPERTIES_UPDATED,\n            result.nodeIds.map(nodeId => this.#domModel.nodeForId(nodeId)));\n      }\n    }\n\n    if (this.#isCSSPropertyTrackingEnabled) {\n      void this.#stylePollingThrottler.schedule(this.pollComputedStyleUpdates.bind(this));\n    }\n  }\n\n  override dispose(): void {\n    this.disableCSSPropertyTracker();\n    super.dispose();\n    this.dispatchEventToListeners(Events.ModelDisposed, this);\n  }\n\n  getAgent(): ProtocolProxyApi.CSSApi {\n    return this.agent;\n  }\n}\n\nexport enum Events {\n  /* eslint-disable @typescript-eslint/naming-convention -- Used by web_tests. */\n  FontsUpdated = 'FontsUpdated',\n  MediaQueryResultChanged = 'MediaQueryResultChanged',\n  ModelWasEnabled = 'ModelWasEnabled',\n  ModelDisposed = 'ModelDisposed',\n  PseudoStateForced = 'PseudoStateForced',\n  StartingStylesStateForced = 'StartingStylesStateForced',\n  StyleSheetAdded = 'StyleSheetAdded',\n  StyleSheetChanged = 'StyleSheetChanged',\n  StyleSheetRemoved = 'StyleSheetRemoved',\n  ComputedStyleUpdated = 'ComputedStyleUpdated',\n  /* eslint-enable @typescript-eslint/naming-convention */\n}\n\nexport interface StyleSheetChangedEvent {\n  styleSheetId: Protocol.DOM.StyleSheetId;\n  edit?: Edit;\n}\n\nexport interface PseudoStateForcedEvent {\n  node: DOMNode;\n  pseudoClass: string;\n  enable: boolean;\n}\n\nexport interface ComputedStyleUpdatedEvent {\n  nodeId: Protocol.DOM.NodeId;\n}\n\nexport interface EventTypes {\n  [Events.FontsUpdated]: void;\n  [Events.MediaQueryResultChanged]: void;\n  [Events.ModelWasEnabled]: void;\n  [Events.ModelDisposed]: CSSModel;\n  [Events.PseudoStateForced]: PseudoStateForcedEvent;\n  [Events.StartingStylesStateForced]: DOMNode;\n  [Events.StyleSheetAdded]: CSSStyleSheetHeader;\n  [Events.StyleSheetChanged]: StyleSheetChangedEvent;\n  [Events.StyleSheetRemoved]: CSSStyleSheetHeader;\n  [Events.ComputedStyleUpdated]: ComputedStyleUpdatedEvent;\n}\n\nconst PseudoStateMarker = 'pseudo-state-marker';\n\nexport class Edit {\n  styleSheetId: string;\n  oldRange: TextUtils.TextRange.TextRange;\n  newRange: TextUtils.TextRange.TextRange;\n  newText: string;\n  payload: Object|null;\n  constructor(styleSheetId: string, oldRange: TextUtils.TextRange.TextRange, newText: string, payload: Object|null) {\n    this.styleSheetId = styleSheetId;\n    this.oldRange = oldRange;\n    this.newRange = TextUtils.TextRange.TextRange.fromEdit(oldRange, newText);\n    this.newText = newText;\n    this.payload = payload;\n  }\n}\n\nexport class CSSLocation {\n  readonly #cssModel: CSSModel;\n  styleSheetId: Protocol.DOM.StyleSheetId;\n  url: Platform.DevToolsPath.UrlString;\n  lineNumber: number;\n  columnNumber: number;\n  constructor(header: CSSStyleSheetHeader, lineNumber: number, columnNumber?: number) {\n    this.#cssModel = header.cssModel();\n    this.styleSheetId = header.id;\n    this.url = header.resourceURL();\n    this.lineNumber = lineNumber;\n    this.columnNumber = columnNumber || 0;\n  }\n\n  cssModel(): CSSModel {\n    return this.#cssModel;\n  }\n\n  header(): CSSStyleSheetHeader|null {\n    return this.#cssModel.styleSheetHeaderForId(this.styleSheetId);\n  }\n}\n\nclass CSSDispatcher implements ProtocolProxyApi.CSSDispatcher {\n  readonly #cssModel: CSSModel;\n  constructor(cssModel: CSSModel) {\n    this.#cssModel = cssModel;\n  }\n\n  mediaQueryResultChanged(): void {\n    this.#cssModel.mediaQueryResultChanged();\n  }\n\n  fontsUpdated({font}: Protocol.CSS.FontsUpdatedEvent): void {\n    this.#cssModel.fontsUpdated(font);\n  }\n\n  styleSheetChanged({styleSheetId}: Protocol.CSS.StyleSheetChangedEvent): void {\n    this.#cssModel.fireStyleSheetChanged(styleSheetId);\n  }\n\n  styleSheetAdded({header}: Protocol.CSS.StyleSheetAddedEvent): void {\n    this.#cssModel.styleSheetAdded(header);\n  }\n\n  styleSheetRemoved({styleSheetId}: Protocol.CSS.StyleSheetRemovedEvent): void {\n    this.#cssModel.styleSheetRemoved(styleSheetId);\n  }\n\n  computedStyleUpdated({nodeId}: Protocol.CSS.ComputedStyleUpdatedEvent): void {\n    this.#cssModel.computedStyleUpdated(nodeId);\n  }\n}\n\nclass ComputedStyleLoader {\n  #cssModel: CSSModel;\n  #nodeIdToPromise = new Map<number, Promise<Map<string, string>|null>>();\n  constructor(cssModel: CSSModel) {\n    this.#cssModel = cssModel;\n  }\n\n  computedStylePromise(nodeId: Protocol.DOM.NodeId): Promise<Map<string, string>|null> {\n    let promise = this.#nodeIdToPromise.get(nodeId);\n    if (promise) {\n      return promise;\n    }\n    promise = this.#cssModel.getAgent().invoke_getComputedStyleForNode({nodeId}).then(({computedStyle}) => {\n      this.#nodeIdToPromise.delete(nodeId);\n      if (!computedStyle?.length) {\n        return null;\n      }\n      const result = new Map<string, string>();\n      for (const property of computedStyle) {\n        result.set(property.name, property.value);\n      }\n      return result;\n    });\n    this.#nodeIdToPromise.set(nodeId, promise);\n    return promise;\n  }\n}\n\nexport class InlineStyleResult {\n  inlineStyle: CSSStyleDeclaration|null;\n  attributesStyle: CSSStyleDeclaration|null;\n  constructor(inlineStyle: CSSStyleDeclaration|null, attributesStyle: CSSStyleDeclaration|null) {\n    this.inlineStyle = inlineStyle;\n    this.attributesStyle = attributesStyle;\n  }\n}\n\nexport class CSSPropertyTracker extends Common.ObjectWrapper.ObjectWrapper<CSSPropertyTrackerEventTypes> {\n  readonly #cssModel: CSSModel;\n  readonly #properties: Protocol.CSS.CSSComputedStyleProperty[];\n  constructor(cssModel: CSSModel, propertiesToTrack: Protocol.CSS.CSSComputedStyleProperty[]) {\n    super();\n    this.#cssModel = cssModel;\n    this.#properties = propertiesToTrack;\n  }\n\n  start(): void {\n    this.#cssModel.enableCSSPropertyTracker(this);\n  }\n\n  stop(): void {\n    this.#cssModel.disableCSSPropertyTracker();\n  }\n\n  getTrackedProperties(): Protocol.CSS.CSSComputedStyleProperty[] {\n    return this.#properties;\n  }\n}\n\nconst StylePollingInterval = 1000;  // throttling interval for style polling, in milliseconds\n\nexport const enum CSSPropertyTrackerEvents {\n  TRACKED_CSS_PROPERTIES_UPDATED = 'TrackedCSSPropertiesUpdated',\n}\n\nexport interface CSSPropertyTrackerEventTypes {\n  [CSSPropertyTrackerEvents.TRACKED_CSS_PROPERTIES_UPDATED]: Array<DOMNode|null>;\n}\n\nSDKModel.register(CSSModel, {capabilities: Capability.DOM, autostart: true});\nexport interface ContrastInfo {\n  backgroundColors: string[]|null;\n  computedFontSize: string;\n  computedFontWeight: string;\n}\n", "// Copyright 2020 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport type * as Protocol from '../../generated/protocol.js';\nimport type * as Platform from '../platform/platform.js';\n\nexport class CSSFontFace {\n  readonly #fontFamily: string;\n  readonly #fontVariationAxes: Protocol.CSS.FontVariationAxis[];\n  readonly #fontVariationAxesByTag = new Map<string, Protocol.CSS.FontVariationAxis>();\n  readonly #src: Platform.DevToolsPath.UrlString;\n  readonly #fontDisplay: string;\n\n  constructor(payload: Protocol.CSS.FontFace) {\n    this.#fontFamily = payload.fontFamily;\n    this.#fontVariationAxes = payload.fontVariationAxes || [];\n    this.#src = payload.src as Platform.DevToolsPath.UrlString;\n    this.#fontDisplay = payload.fontDisplay;\n    for (const axis of this.#fontVariationAxes) {\n      this.#fontVariationAxesByTag.set(axis.tag, axis);\n    }\n  }\n\n  getFontFamily(): string {\n    return this.#fontFamily;\n  }\n\n  getSrc(): Platform.DevToolsPath.UrlString {\n    return this.#src;\n  }\n\n  getFontDisplay(): string {\n    return this.#fontDisplay;\n  }\n\n  getVariationAxisByTag(tag: string): Protocol.CSS.FontVariationAxis|undefined {\n    return this.#fontVariationAxesByTag.get(tag);\n  }\n}\n", "// Copyright 2016 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as Protocol from '../../generated/protocol.js';\nimport type * as CodeMirror from '../../third_party/codemirror.next/codemirror.next.js';\nimport * as Platform from '../platform/platform.js';\n\nimport {CSSMetadata, cssMetadata, CSSWideKeyword} from './CSSMetadata.js';\nimport type {CSSModel} from './CSSModel.js';\nimport {CSSProperty} from './CSSProperty.js';\nimport * as PropertyParser from './CSSPropertyParser.js';\nimport type {Match, Matcher, SyntaxTree} from './CSSPropertyParser.js';\nimport {\n  AnchorFunctionMatcher,\n  AngleMatcher,\n  AttributeMatcher,\n  AutoBaseMatcher,\n  BaseVariableMatcher,\n  BezierMatcher,\n  BinOpMatcher,\n  ColorMatcher,\n  ColorMixMatcher,\n  CustomFunctionMatcher,\n  defaultValueForCSSType,\n  EnvFunctionMatcher,\n  FlexGridGridLanesMatcher,\n  GridTemplateMatcher,\n  LengthMatcher,\n  LightDarkColorMatcher,\n  LinearGradientMatcher,\n  LinkableNameMatcher,\n  localEvalCSS,\n  MathFunctionMatcher,\n  PositionAnchorMatcher,\n  PositionTryMatcher,\n  RelativeColorChannelMatcher,\n  ShadowMatcher,\n  StringMatcher,\n  URLMatcher,\n  VariableMatcher\n} from './CSSPropertyParserMatchers.js';\nimport {\n  CSSAtRule,\n  CSSFunctionRule,\n  CSSKeyframeRule,\n  CSSKeyframesRule,\n  CSSPositionTryRule,\n  CSSPropertyRule,\n  CSSStyleRule,\n} from './CSSRule.js';\nimport {CSSStyleDeclaration, Type} from './CSSStyleDeclaration.js';\nimport type {DOMNode} from './DOMModel.js';\n\nfunction containsStyle(styles: CSSStyleDeclaration[]|Set<CSSStyleDeclaration>, query: CSSStyleDeclaration): boolean {\n  if (!query.styleSheetId || !query.range) {\n    return false;\n  }\n  for (const style of styles) {\n    if (query.styleSheetId === style.styleSheetId && style.range && query.range.equal(style.range)) {\n      return true;\n    }\n  }\n  return false;\n}\n\nfunction containsCustomProperties(style: CSSStyleDeclaration): boolean {\n  const properties = style.allProperties();\n  return properties.some(property => cssMetadata().isCustomProperty(property.name));\n}\n\nfunction containsInherited(style: CSSStyleDeclaration): boolean {\n  const properties = style.allProperties();\n  for (let i = 0; i < properties.length; ++i) {\n    const property = properties[i];\n    // Does this style contain non-overridden inherited property?\n    if (property.activeInStyle() && cssMetadata().isPropertyInherited(property.name)) {\n      return true;\n    }\n  }\n  return false;\n}\n\nfunction cleanUserAgentPayload(payload: Protocol.CSS.RuleMatch[]): Protocol.CSS.RuleMatch[] {\n  for (const ruleMatch of payload) {\n    cleanUserAgentSelectors(ruleMatch);\n  }\n\n  // Merge UA rules that are sequential and have similar selector/media.\n  const cleanMatchedPayload = [];\n  for (const ruleMatch of payload) {\n    const lastMatch = cleanMatchedPayload[cleanMatchedPayload.length - 1];\n    if (!lastMatch || ruleMatch.rule.origin !== 'user-agent' || lastMatch.rule.origin !== 'user-agent' ||\n        ruleMatch.rule.selectorList.text !== lastMatch.rule.selectorList.text ||\n        mediaText(ruleMatch) !== mediaText(lastMatch)) {\n      cleanMatchedPayload.push(ruleMatch);\n      continue;\n    }\n    mergeRule(ruleMatch, lastMatch);\n  }\n  return cleanMatchedPayload;\n\n  function mergeRule(from: Protocol.CSS.RuleMatch, to: Protocol.CSS.RuleMatch): void {\n    const shorthands = new Map<string, string>();\n    const properties = new Map<string, string>();\n    for (const entry of to.rule.style.shorthandEntries) {\n      shorthands.set(entry.name, entry.value);\n    }\n    for (const entry of to.rule.style.cssProperties) {\n      properties.set(entry.name, entry.value);\n    }\n    for (const entry of from.rule.style.shorthandEntries) {\n      shorthands.set(entry.name, entry.value);\n    }\n    for (const entry of from.rule.style.cssProperties) {\n      properties.set(entry.name, entry.value);\n    }\n    to.rule.style.shorthandEntries = [...shorthands.entries()].map(([name, value]) => ({name, value}));\n    to.rule.style.cssProperties = [...properties.entries()].map(([name, value]) => ({name, value}));\n  }\n\n  function mediaText(ruleMatch: Protocol.CSS.RuleMatch): string|null {\n    if (!ruleMatch.rule.media) {\n      return null;\n    }\n    return ruleMatch.rule.media.map(media => media.text).join(', ');\n  }\n\n  function cleanUserAgentSelectors(ruleMatch: Protocol.CSS.RuleMatch): void {\n    const {matchingSelectors, rule} = ruleMatch;\n    if (rule.origin !== 'user-agent' || !matchingSelectors.length) {\n      return;\n    }\n    rule.selectorList.selectors = rule.selectorList.selectors.filter((_, i) => matchingSelectors.includes(i));\n    rule.selectorList.text = rule.selectorList.selectors.map(item => item.text).join(', ');\n    ruleMatch.matchingSelectors = matchingSelectors.map((_, i) => i);\n  }\n}\n\n/**\n * Return a mapping of the highlight names in the specified RuleMatch to\n * the indices of selectors in that selector list with that highlight name.\n *\n * For example, consider the following ruleset:\n * span::highlight(foo), div, #mySpan::highlight(bar), .highlighted::highlight(foo) {\n *   color: blue;\n * }\n *\n * For a <span id=\"mySpan\" class=\"highlighted\"></span>, a RuleMatch for that span\n * would have matchingSelectors [0, 2, 3] indicating that the span\n * matches all of the highlight selectors.\n *\n * For that RuleMatch, this function would produce the following map:\n * {\n *  \"foo\": [0, 3],\n *  \"bar\": [2]\n * }\n *\n * @param ruleMatch\n * @returns A mapping of highlight names to lists of indices into the selector\n * list associated with ruleMatch. The indices correspond to the selectors in the rule\n * associated with the key's highlight name.\n */\nfunction customHighlightNamesToMatchingSelectorIndices(ruleMatch: Protocol.CSS.RuleMatch): Map<string, number[]> {\n  const highlightNamesToMatchingSelectors = new Map<string, number[]>();\n\n  for (let i = 0; i < ruleMatch.matchingSelectors.length; i++) {\n    const matchingSelectorIndex = ruleMatch.matchingSelectors[i];\n    const selectorText = ruleMatch.rule.selectorList.selectors[matchingSelectorIndex].text;\n    const highlightNameMatch = selectorText.match(/::highlight\\((.*)\\)/);\n    if (highlightNameMatch) {\n      const highlightName = highlightNameMatch[1];\n      const selectorsForName = highlightNamesToMatchingSelectors.get(highlightName);\n      if (selectorsForName) {\n        selectorsForName.push(matchingSelectorIndex);\n      } else {\n        highlightNamesToMatchingSelectors.set(highlightName, [matchingSelectorIndex]);\n      }\n    }\n  }\n  return highlightNamesToMatchingSelectors;\n}\n\nfunction queryMatches(style: CSSStyleDeclaration): boolean {\n  if (!style.parentRule) {\n    return true;\n  }\n  const parentRule = style.parentRule as CSSStyleRule;\n  const queries = [...parentRule.media, ...parentRule.containerQueries, ...parentRule.supports, ...parentRule.scopes];\n  for (const query of queries) {\n    if (!query.active()) {\n      return false;\n    }\n  }\n  return true;\n}\n\nexport interface CSSMatchedStylesPayload {\n  cssModel: CSSModel;\n  node: DOMNode;\n  activePositionFallbackIndex: number;\n  inlinePayload: Protocol.CSS.CSSStyle|null;\n  attributesPayload: Protocol.CSS.CSSStyle|null;\n  matchedPayload: Protocol.CSS.RuleMatch[];\n  pseudoPayload: Protocol.CSS.PseudoElementMatches[];\n  inheritedPayload: Protocol.CSS.InheritedStyleEntry[];\n  inheritedPseudoPayload: Protocol.CSS.InheritedPseudoElementMatches[];\n  animationsPayload: Protocol.CSS.CSSKeyframesRule[];\n  parentLayoutNodeId: Protocol.DOM.NodeId|undefined;\n  positionTryRules: Protocol.CSS.CSSPositionTryRule[];\n  propertyRules: Protocol.CSS.CSSPropertyRule[];\n  cssPropertyRegistrations: Protocol.CSS.CSSPropertyRegistration[];\n  atRules: Protocol.CSS.CSSAtRule[];\n  animationStylesPayload: Protocol.CSS.CSSAnimationStyle[];\n  transitionsStylePayload: Protocol.CSS.CSSStyle|null;\n  inheritedAnimatedPayload: Protocol.CSS.InheritedAnimatedStyleEntry[];\n  functionRules: Protocol.CSS.CSSFunctionRule[];\n}\n\nexport interface CSSType {\n  type: string;\n  isCSSTokens: boolean;\n}\n\nexport class CSSRegisteredProperty {\n  #registration: Protocol.CSS.CSSPropertyRegistration|CSSPropertyRule;\n  #cssModel: CSSModel;\n  #style: CSSStyleDeclaration|undefined;\n  constructor(cssModel: CSSModel, registration: CSSPropertyRule|Protocol.CSS.CSSPropertyRegistration) {\n    this.#cssModel = cssModel;\n    this.#registration = registration;\n  }\n\n  propertyName(): string {\n    return this.#registration instanceof CSSPropertyRule ? this.#registration.propertyName().text :\n                                                           this.#registration.propertyName;\n  }\n\n  initialValue(): string|null {\n    return this.#registration instanceof CSSPropertyRule ? this.#registration.initialValue() :\n                                                           this.#registration.initialValue?.text ?? null;\n  }\n\n  inherits(): boolean {\n    return this.#registration instanceof CSSPropertyRule ? this.#registration.inherits() : this.#registration.inherits;\n  }\n\n  syntax(): string {\n    return this.#registration instanceof CSSPropertyRule ? this.#registration.syntax() :\n                                                           `\"${this.#registration.syntax}\"`;\n  }\n\n  parseValue(matchedStyles: CSSMatchedStyles, computedStyles: Map<string, string>|null):\n      PropertyParser.BottomUpTreeMatching|null {\n    const value = this.initialValue();\n    if (!value) {\n      return null;\n    }\n\n    return PropertyParser.matchDeclaration(\n        this.propertyName(), value, matchedStyles.propertyMatchers(this.style(), computedStyles));\n  }\n\n  #asCSSProperties(): Protocol.CSS.CSSProperty[] {\n    if (this.#registration instanceof CSSPropertyRule) {\n      return [];\n    }\n    const {inherits, initialValue, syntax} = this.#registration;\n    const properties = [\n      {name: 'inherits', value: `${inherits}`},\n      {name: 'syntax', value: `\"${syntax}\"`},\n    ];\n    if (initialValue !== undefined) {\n      properties.push({name: 'initial-value', value: initialValue.text});\n    }\n    return properties;\n  }\n\n  style(): CSSStyleDeclaration {\n    if (!this.#style) {\n      this.#style = this.#registration instanceof CSSPropertyRule ?\n          this.#registration.style :\n          new CSSStyleDeclaration(\n              this.#cssModel, null, {cssProperties: this.#asCSSProperties(), shorthandEntries: []}, Type.Pseudo);\n    }\n    return this.#style;\n  }\n}\n\nexport class CSSMatchedStyles {\n  #cssModel: CSSModel;\n  #node: DOMNode;\n  #addedStyles = new Map<CSSStyleDeclaration, DOMNode>();\n  #matchingSelectors = new Map<number, Map<string, boolean>>();\n  #keyframes: CSSKeyframesRule[] = [];\n  #registeredProperties: CSSRegisteredProperty[];\n  #registeredPropertyMap = new Map<string, CSSRegisteredProperty>();\n  #nodeForStyle = new Map<CSSStyleDeclaration, DOMNode|null>();\n  #inheritedStyles = new Set<CSSStyleDeclaration>();\n  #styleToDOMCascade = new Map<CSSStyleDeclaration, DOMInheritanceCascade>();\n  #parentLayoutNodeId: Protocol.DOM.NodeId|undefined;\n  #positionTryRules: CSSPositionTryRule[];\n  #activePositionFallbackIndex: number;\n  #mainDOMCascade?: DOMInheritanceCascade;\n  #pseudoDOMCascades?: Map<Protocol.DOM.PseudoType, DOMInheritanceCascade>;\n  #customHighlightPseudoDOMCascades?: Map<string, DOMInheritanceCascade>;\n  #functionRules: CSSFunctionRule[];\n  #atRules: CSSAtRule[];\n  #functionRuleMap = new Map<string, CSSFunctionRule>();\n  #environmentVariables: Record<string, string> = {};\n\n  static async create(payload: CSSMatchedStylesPayload): Promise<CSSMatchedStyles> {\n    const cssMatchedStyles = new CSSMatchedStyles(payload);\n    await cssMatchedStyles.init(payload);\n    return cssMatchedStyles;\n  }\n\n  private constructor({\n    cssModel,\n    node,\n    animationsPayload,\n    parentLayoutNodeId,\n    positionTryRules,\n    propertyRules,\n    cssPropertyRegistrations,\n    activePositionFallbackIndex,\n    functionRules,\n    atRules,\n  }: CSSMatchedStylesPayload) {\n    this.#cssModel = cssModel;\n    this.#node = node;\n    this.#registeredProperties = [\n      ...propertyRules.map(rule => new CSSPropertyRule(cssModel, rule)),\n      ...cssPropertyRegistrations,\n    ].map(r => new CSSRegisteredProperty(cssModel, r));\n    if (animationsPayload) {\n      this.#keyframes = animationsPayload.map(rule => new CSSKeyframesRule(cssModel, rule));\n    }\n    this.#positionTryRules = positionTryRules.map(rule => new CSSPositionTryRule(cssModel, rule));\n    this.#parentLayoutNodeId = parentLayoutNodeId;\n    this.#activePositionFallbackIndex = activePositionFallbackIndex;\n    this.#functionRules = functionRules.map(rule => new CSSFunctionRule(cssModel, rule));\n    this.#atRules = atRules.map(rule => new CSSAtRule(cssModel, rule));\n  }\n\n  private async init({\n    matchedPayload,\n    inheritedPayload,\n    inlinePayload,\n    attributesPayload,\n    pseudoPayload,\n    inheritedPseudoPayload,\n    animationStylesPayload,\n    transitionsStylePayload,\n    inheritedAnimatedPayload,\n  }: CSSMatchedStylesPayload): Promise<void> {\n    matchedPayload = cleanUserAgentPayload(matchedPayload);\n    for (const inheritedResult of inheritedPayload) {\n      inheritedResult.matchedCSSRules = cleanUserAgentPayload(inheritedResult.matchedCSSRules);\n    }\n\n    this.#environmentVariables = await this.cssModel().getEnvironmentVariables();\n\n    this.#mainDOMCascade = await this.buildMainCascade(\n        inlinePayload, attributesPayload, matchedPayload, inheritedPayload, animationStylesPayload,\n        transitionsStylePayload, inheritedAnimatedPayload);\n    [this.#pseudoDOMCascades, this.#customHighlightPseudoDOMCascades] =\n        this.buildPseudoCascades(pseudoPayload, inheritedPseudoPayload);\n\n    for (const domCascade of Array.from(this.#customHighlightPseudoDOMCascades.values())\n             .concat(Array.from(this.#pseudoDOMCascades.values()))\n             .concat(this.#mainDOMCascade)) {\n      for (const style of domCascade.styles()) {\n        this.#styleToDOMCascade.set(style, domCascade);\n      }\n    }\n\n    for (const prop of this.#registeredProperties) {\n      this.#registeredPropertyMap.set(prop.propertyName(), prop);\n    }\n\n    for (const rule of this.#functionRules) {\n      this.#functionRuleMap.set(rule.functionName().text, rule);\n    }\n  }\n\n  private async buildMainCascade(\n      inlinePayload: Protocol.CSS.CSSStyle|null,\n      attributesPayload: Protocol.CSS.CSSStyle|null,\n      matchedPayload: Protocol.CSS.RuleMatch[],\n      inheritedPayload: Protocol.CSS.InheritedStyleEntry[],\n      animationStylesPayload: Protocol.CSS.CSSAnimationStyle[],\n      transitionsStylePayload: Protocol.CSS.CSSStyle|null,\n      inheritedAnimatedPayload: Protocol.CSS.InheritedAnimatedStyleEntry[],\n      ): Promise<DOMInheritanceCascade> {\n    const nodeCascades: NodeCascade[] = [];\n\n    const nodeStyles: CSSStyleDeclaration[] = [];\n\n    function addAttributesStyle(this: CSSMatchedStyles): void {\n      if (!attributesPayload) {\n        return;\n      }\n      const style = new CSSStyleDeclaration(this.#cssModel, null, attributesPayload, Type.Attributes);\n      this.#nodeForStyle.set(style, this.#node);\n      nodeStyles.push(style);\n    }\n\n    // Transition styles take precedence over animation styles & inline styles.\n    if (transitionsStylePayload) {\n      const style = new CSSStyleDeclaration(this.#cssModel, null, transitionsStylePayload, Type.Transition);\n      this.#nodeForStyle.set(style, this.#node);\n      nodeStyles.push(style);\n    }\n\n    // Animation styles take precedence over inline styles.\n    for (const animationsStyle of animationStylesPayload) {\n      const style =\n          new CSSStyleDeclaration(this.#cssModel, null, animationsStyle.style, Type.Animation, animationsStyle.name);\n      this.#nodeForStyle.set(style, this.#node);\n      nodeStyles.push(style);\n    }\n\n    // Inline style takes precedence over regular and inherited rules.\n    if (inlinePayload && this.#node.nodeType() === Node.ELEMENT_NODE) {\n      const style = new CSSStyleDeclaration(this.#cssModel, null, inlinePayload, Type.Inline);\n      this.#nodeForStyle.set(style, this.#node);\n      nodeStyles.push(style);\n    }\n\n    // Add rules in reverse order to match the cascade order.\n    let addedAttributesStyle;\n    for (let i = matchedPayload.length - 1; i >= 0; --i) {\n      const rule = new CSSStyleRule(this.#cssModel, matchedPayload[i].rule);\n      if ((rule.isInjected() || rule.isUserAgent()) && !addedAttributesStyle) {\n        // Show element's Style Attributes after all author rules.\n        addedAttributesStyle = true;\n        addAttributesStyle.call(this);\n      }\n      this.#nodeForStyle.set(rule.style, this.#node);\n      nodeStyles.push(rule.style);\n      this.addMatchingSelectors(this.#node, rule, matchedPayload[i].matchingSelectors);\n    }\n\n    if (!addedAttributesStyle) {\n      addAttributesStyle.call(this);\n    }\n    nodeCascades.push(new NodeCascade(this, nodeStyles, this.#node, false /* #isInherited */));\n\n    // Walk the node structure and identify styles with inherited properties.\n    let parentNode: DOMNode|null = this.#node.parentNode;\n    const traverseParentInFlatTree = async(node: DOMNode): Promise<DOMNode|null> => {\n      if (node.hasAssignedSlot()) {\n        return await node.assignedSlot?.deferredNode.resolvePromise() ?? null;\n      }\n\n      return node.parentNode;\n    };\n\n    for (let i = 0; parentNode && inheritedPayload && i < inheritedPayload.length; ++i) {\n      const inheritedStyles = [];\n      const entryPayload = inheritedPayload[i];\n      const inheritedAnimatedEntryPayload = inheritedAnimatedPayload[i];\n      const inheritedInlineStyle = entryPayload.inlineStyle ?\n          new CSSStyleDeclaration(this.#cssModel, null, entryPayload.inlineStyle, Type.Inline) :\n          null;\n      const inheritedTransitionsStyle = inheritedAnimatedEntryPayload?.transitionsStyle ?\n          new CSSStyleDeclaration(\n              this.#cssModel, null, inheritedAnimatedEntryPayload?.transitionsStyle, Type.Transition) :\n          null;\n      const inheritedAnimationStyles =\n          inheritedAnimatedEntryPayload?.animationStyles?.map(\n              animationStyle => new CSSStyleDeclaration(\n                  this.#cssModel, null, animationStyle.style, Type.Animation, animationStyle.name)) ??\n          [];\n      if (inheritedTransitionsStyle && containsInherited(inheritedTransitionsStyle)) {\n        this.#nodeForStyle.set(inheritedTransitionsStyle, parentNode);\n        inheritedStyles.push(inheritedTransitionsStyle);\n        this.#inheritedStyles.add(inheritedTransitionsStyle);\n      }\n\n      for (const inheritedAnimationsStyle of inheritedAnimationStyles) {\n        if (!containsInherited(inheritedAnimationsStyle)) {\n          continue;\n        }\n\n        this.#nodeForStyle.set(inheritedAnimationsStyle, parentNode);\n        inheritedStyles.push(inheritedAnimationsStyle);\n        this.#inheritedStyles.add(inheritedAnimationsStyle);\n      }\n\n      if (inheritedInlineStyle && containsInherited(inheritedInlineStyle)) {\n        this.#nodeForStyle.set(inheritedInlineStyle, parentNode);\n        inheritedStyles.push(inheritedInlineStyle);\n        this.#inheritedStyles.add(inheritedInlineStyle);\n      }\n\n      const inheritedMatchedCSSRules = entryPayload.matchedCSSRules || [];\n      for (let j = inheritedMatchedCSSRules.length - 1; j >= 0; --j) {\n        const inheritedRule = new CSSStyleRule(this.#cssModel, inheritedMatchedCSSRules[j].rule);\n        this.addMatchingSelectors(parentNode, inheritedRule, inheritedMatchedCSSRules[j].matchingSelectors);\n        if (!containsInherited(inheritedRule.style)) {\n          continue;\n        }\n        if (!containsCustomProperties(inheritedRule.style)) {\n          if (containsStyle(nodeStyles, inheritedRule.style) ||\n              containsStyle(this.#inheritedStyles, inheritedRule.style)) {\n            continue;\n          }\n        }\n        this.#nodeForStyle.set(inheritedRule.style, parentNode);\n        inheritedStyles.push(inheritedRule.style);\n        this.#inheritedStyles.add(inheritedRule.style);\n      }\n      const node = parentNode;\n      parentNode = await traverseParentInFlatTree(parentNode);\n      nodeCascades.push(new NodeCascade(this, inheritedStyles, node, true /* #isInherited */));\n    }\n\n    return new DOMInheritanceCascade(this, nodeCascades, this.#registeredProperties);\n  }\n\n  /**\n   * Pseudo rule matches received via the inspector protocol are grouped by pseudo type.\n   * For custom highlight pseudos, we need to instead group the rule matches by highlight\n   * name in order to produce separate cascades for each highlight name. This is necessary\n   * so that styles of ::highlight(foo) are not shown as overriding styles of ::highlight(bar).\n   *\n   * This helper function takes a list of rule matches and generates separate NodeCascades\n   * for each custom highlight name that was matched.\n   */\n  private buildSplitCustomHighlightCascades(\n      rules: Protocol.CSS.RuleMatch[], node: DOMNode, isInherited: boolean,\n      pseudoCascades: Map<string, NodeCascade[]>): void {\n    const splitHighlightRules = new Map<string, CSSStyleDeclaration[]>();\n\n    for (let j = rules.length - 1; j >= 0; --j) {\n      const highlightNamesToMatchingSelectorIndices = customHighlightNamesToMatchingSelectorIndices(rules[j]);\n\n      for (const [highlightName, matchingSelectors] of highlightNamesToMatchingSelectorIndices) {\n        const pseudoRule = new CSSStyleRule(this.#cssModel, rules[j].rule);\n        this.#nodeForStyle.set(pseudoRule.style, node);\n        if (isInherited) {\n          this.#inheritedStyles.add(pseudoRule.style);\n        }\n        this.addMatchingSelectors(node, pseudoRule, matchingSelectors);\n\n        const ruleListForHighlightName = splitHighlightRules.get(highlightName);\n        if (ruleListForHighlightName) {\n          ruleListForHighlightName.push(pseudoRule.style);\n        } else {\n          splitHighlightRules.set(highlightName, [pseudoRule.style]);\n        }\n      }\n    }\n\n    for (const [highlightName, highlightStyles] of splitHighlightRules) {\n      const nodeCascade =\n          new NodeCascade(this, highlightStyles, node, isInherited, true /* #isHighlightPseudoCascade*/);\n      const cascadeListForHighlightName = pseudoCascades.get(highlightName);\n      if (cascadeListForHighlightName) {\n        cascadeListForHighlightName.push(nodeCascade);\n      } else {\n        pseudoCascades.set(highlightName, [nodeCascade]);\n      }\n    }\n  }\n\n  private buildPseudoCascades(\n      pseudoPayload: Protocol.CSS.PseudoElementMatches[],\n      inheritedPseudoPayload: Protocol.CSS.InheritedPseudoElementMatches[]):\n      [Map<Protocol.DOM.PseudoType, DOMInheritanceCascade>, Map<string, DOMInheritanceCascade>] {\n    const pseudoInheritanceCascades = new Map<Protocol.DOM.PseudoType, DOMInheritanceCascade>();\n    const customHighlightPseudoInheritanceCascades = new Map<string, DOMInheritanceCascade>();\n    if (!pseudoPayload) {\n      return [pseudoInheritanceCascades, customHighlightPseudoInheritanceCascades];\n    }\n\n    const pseudoCascades = new Map<Protocol.DOM.PseudoType, NodeCascade[]>();\n    const customHighlightPseudoCascades = new Map<string, NodeCascade[]>();\n    for (let i = 0; i < pseudoPayload.length; ++i) {\n      const entryPayload = pseudoPayload[i];\n      // PseudoElement nodes are not created unless \"content\" css property is set.\n      const pseudoElement = this.#node.pseudoElements().get(entryPayload.pseudoType)?.at(-1) || null;\n      const pseudoStyles = [];\n      const rules = entryPayload.matches || [];\n\n      if (entryPayload.pseudoType === Protocol.DOM.PseudoType.Highlight) {\n        this.buildSplitCustomHighlightCascades(\n            rules, this.#node, false /* #isInherited */, customHighlightPseudoCascades);\n      } else {\n        for (let j = rules.length - 1; j >= 0; --j) {\n          const pseudoRule = new CSSStyleRule(this.#cssModel, rules[j].rule);\n          pseudoStyles.push(pseudoRule.style);\n          const nodeForStyle =\n              cssMetadata().isHighlightPseudoType(entryPayload.pseudoType) ? this.#node : pseudoElement;\n          this.#nodeForStyle.set(pseudoRule.style, nodeForStyle);\n          if (nodeForStyle) {\n            this.addMatchingSelectors(nodeForStyle, pseudoRule, rules[j].matchingSelectors);\n          }\n        }\n        const isHighlightPseudoCascade = cssMetadata().isHighlightPseudoType(entryPayload.pseudoType);\n        const nodeCascade = new NodeCascade(\n            this, pseudoStyles, this.#node, false /* #isInherited */,\n            isHighlightPseudoCascade /* #isHighlightPseudoCascade*/);\n        pseudoCascades.set(entryPayload.pseudoType, [nodeCascade]);\n      }\n    }\n\n    if (inheritedPseudoPayload) {\n      let parentNode: (DOMNode|null) = this.#node.parentNode;\n      for (let i = 0; parentNode && i < inheritedPseudoPayload.length; ++i) {\n        const inheritedPseudoMatches = inheritedPseudoPayload[i].pseudoElements;\n        for (let j = 0; j < inheritedPseudoMatches.length; ++j) {\n          const inheritedEntryPayload = inheritedPseudoMatches[j];\n          const rules = inheritedEntryPayload.matches || [];\n\n          if (inheritedEntryPayload.pseudoType === Protocol.DOM.PseudoType.Highlight) {\n            this.buildSplitCustomHighlightCascades(\n                rules, parentNode, true /* #isInherited */, customHighlightPseudoCascades);\n          } else {\n            const pseudoStyles = [];\n            for (let k = rules.length - 1; k >= 0; --k) {\n              const pseudoRule = new CSSStyleRule(this.#cssModel, rules[k].rule);\n              pseudoStyles.push(pseudoRule.style);\n              this.#nodeForStyle.set(pseudoRule.style, parentNode);\n              this.#inheritedStyles.add(pseudoRule.style);\n              this.addMatchingSelectors(parentNode, pseudoRule, rules[k].matchingSelectors);\n            }\n\n            const isHighlightPseudoCascade = cssMetadata().isHighlightPseudoType(inheritedEntryPayload.pseudoType);\n            const nodeCascade = new NodeCascade(\n                this, pseudoStyles, parentNode, true /* #isInherited */,\n                isHighlightPseudoCascade /* #isHighlightPseudoCascade*/);\n            const cascadeListForPseudoType = pseudoCascades.get(inheritedEntryPayload.pseudoType);\n            if (cascadeListForPseudoType) {\n              cascadeListForPseudoType.push(nodeCascade);\n            } else {\n              pseudoCascades.set(inheritedEntryPayload.pseudoType, [nodeCascade]);\n            }\n          }\n        }\n\n        parentNode = parentNode.parentNode;\n      }\n    }\n\n    // Now that we've built the arrays of NodeCascades for each pseudo type, convert them into\n    // DOMInheritanceCascades.\n    for (const [pseudoType, nodeCascade] of pseudoCascades.entries()) {\n      pseudoInheritanceCascades.set(\n          pseudoType, new DOMInheritanceCascade(this, nodeCascade, this.#registeredProperties));\n    }\n\n    for (const [highlightName, nodeCascade] of customHighlightPseudoCascades.entries()) {\n      customHighlightPseudoInheritanceCascades.set(\n          highlightName, new DOMInheritanceCascade(this, nodeCascade, this.#registeredProperties));\n    }\n\n    return [pseudoInheritanceCascades, customHighlightPseudoInheritanceCascades];\n  }\n\n  private addMatchingSelectors(\n      this: CSSMatchedStyles, node: DOMNode, rule: CSSStyleRule, matchingSelectorIndices: number[]): void {\n    for (const matchingSelectorIndex of matchingSelectorIndices) {\n      const selector = rule.selectors[matchingSelectorIndex];\n      if (selector) {\n        this.setSelectorMatches(node, selector.text, true);\n      }\n    }\n  }\n\n  node(): DOMNode {\n    return this.#node;\n  }\n\n  cssModel(): CSSModel {\n    return this.#cssModel;\n  }\n\n  hasMatchingSelectors(rule: CSSStyleRule): boolean {\n    return (rule.selectors.length === 0 || this.getMatchingSelectors(rule).length > 0) && queryMatches(rule.style);\n  }\n\n  getParentLayoutNodeId(): Protocol.DOM.NodeId|undefined {\n    return this.#parentLayoutNodeId;\n  }\n\n  getMatchingSelectors(rule: CSSStyleRule): number[] {\n    const node = this.nodeForStyle(rule.style);\n    if (!node || typeof node.id !== 'number') {\n      return [];\n    }\n    const map = this.#matchingSelectors.get(node.id);\n    if (!map) {\n      return [];\n    }\n    const result = [];\n    for (let i = 0; i < rule.selectors.length; ++i) {\n      if (map.get(rule.selectors[i].text)) {\n        result.push(i);\n      }\n    }\n    return result;\n  }\n\n  async recomputeMatchingSelectors(rule: CSSStyleRule): Promise<void> {\n    const node = this.nodeForStyle(rule.style);\n    if (!node) {\n      return;\n    }\n    const promises = [];\n    for (const selector of rule.selectors) {\n      promises.push(querySelector.call(this, node, selector.text));\n    }\n    await Promise.all(promises);\n\n    async function querySelector(this: CSSMatchedStyles, node: DOMNode, selectorText: string): Promise<void> {\n      const ownerDocument = node.ownerDocument;\n      if (!ownerDocument) {\n        return;\n      }\n      // We assume that \"matching\" property does not ever change during the\n      // MatchedStyleResult's lifetime.\n      if (typeof node.id === 'number') {\n        const map = this.#matchingSelectors.get(node.id);\n        if (map?.has(selectorText)) {\n          return;\n        }\n      }\n\n      if (typeof ownerDocument.id !== 'number') {\n        return;\n      }\n      const matchingNodeIds = await this.#node.domModel().querySelectorAll(ownerDocument.id, selectorText);\n\n      if (matchingNodeIds) {\n        if (typeof node.id === 'number') {\n          this.setSelectorMatches(node, selectorText, matchingNodeIds.indexOf(node.id) !== -1);\n        } else {\n          this.setSelectorMatches(node, selectorText, false);\n        }\n      }\n    }\n  }\n\n  addNewRule(rule: CSSStyleRule, node: DOMNode): Promise<void> {\n    this.#addedStyles.set(rule.style, node);\n    return this.recomputeMatchingSelectors(rule);\n  }\n\n  private setSelectorMatches(node: DOMNode, selectorText: string, value: boolean): void {\n    if (typeof node.id !== 'number') {\n      return;\n    }\n    let map = this.#matchingSelectors.get(node.id);\n    if (!map) {\n      map = new Map();\n      this.#matchingSelectors.set(node.id, map);\n    }\n    map.set(selectorText, value);\n  }\n\n  nodeStyles(): CSSStyleDeclaration[] {\n    Platform.assertNotNullOrUndefined(this.#mainDOMCascade);\n    return this.#mainDOMCascade.styles();\n  }\n\n  inheritedStyles(): CSSStyleDeclaration[] {\n    return this.#mainDOMCascade?.styles().filter(style => this.isInherited(style)) ?? [];\n  }\n\n  animationStyles(): CSSStyleDeclaration[] {\n    return this.#mainDOMCascade?.styles().filter(style => !this.isInherited(style) && style.type === Type.Animation) ??\n        [];\n  }\n\n  transitionsStyle(): CSSStyleDeclaration|null {\n    return this.#mainDOMCascade?.styles().find(style => !this.isInherited(style) && style.type === Type.Transition) ??\n        null;\n  }\n\n  registeredProperties(): CSSRegisteredProperty[] {\n    return this.#registeredProperties;\n  }\n\n  getRegisteredProperty(name: string): CSSRegisteredProperty|undefined {\n    return this.#registeredPropertyMap.get(name);\n  }\n\n  getRegisteredFunction(name: string): string|undefined {\n    const functionRule = this.#functionRuleMap.get(name);\n    return functionRule ? functionRule.nameWithParameters() : undefined;\n  }\n\n  functionRules(): CSSFunctionRule[] {\n    return this.#functionRules;\n  }\n\n  atRules(): CSSAtRule[] {\n    return this.#atRules;\n  }\n\n  keyframes(): CSSKeyframesRule[] {\n    return this.#keyframes;\n  }\n\n  positionTryRules(): CSSPositionTryRule[] {\n    return this.#positionTryRules;\n  }\n\n  activePositionFallbackIndex(): number {\n    return this.#activePositionFallbackIndex;\n  }\n\n  pseudoStyles(pseudoType: Protocol.DOM.PseudoType): CSSStyleDeclaration[] {\n    Platform.assertNotNullOrUndefined(this.#pseudoDOMCascades);\n    const domCascade = this.#pseudoDOMCascades.get(pseudoType);\n    return domCascade ? domCascade.styles() : [];\n  }\n\n  pseudoTypes(): Set<Protocol.DOM.PseudoType> {\n    Platform.assertNotNullOrUndefined(this.#pseudoDOMCascades);\n    return new Set(this.#pseudoDOMCascades.keys());\n  }\n\n  customHighlightPseudoStyles(highlightName: string): CSSStyleDeclaration[] {\n    Platform.assertNotNullOrUndefined(this.#customHighlightPseudoDOMCascades);\n    const domCascade = this.#customHighlightPseudoDOMCascades.get(highlightName);\n    return domCascade ? domCascade.styles() : [];\n  }\n\n  customHighlightPseudoNames(): Set<string> {\n    Platform.assertNotNullOrUndefined(this.#customHighlightPseudoDOMCascades);\n    return new Set(this.#customHighlightPseudoDOMCascades.keys());\n  }\n\n  nodeForStyle(style: CSSStyleDeclaration): DOMNode|null {\n    return this.#addedStyles.get(style) || this.#nodeForStyle.get(style) || null;\n  }\n\n  availableCSSVariables(style: CSSStyleDeclaration): string[] {\n    const domCascade = this.#styleToDOMCascade.get(style);\n    return domCascade ? domCascade.findAvailableCSSVariables(style) : [];\n  }\n\n  computeCSSVariable(style: CSSStyleDeclaration, variableName: string): CSSVariableValue|null {\n    if (style.parentRule instanceof CSSKeyframeRule) {\n      // The resolution of the variables inside of a CSS keyframe rule depends on where this keyframe rule is used.\n      // So, we need to find the style with active CSS property `animation-name` that equals to the keyframe's name.\n      const keyframeName = style.parentRule.parentRuleName();\n      const activeStyle = this.#mainDOMCascade?.styles().find(searchStyle => {\n        return searchStyle.allProperties().some(\n            property => property.name === 'animation-name' && property.value === keyframeName &&\n                this.#mainDOMCascade?.propertyState(property) === PropertyState.ACTIVE);\n      });\n\n      if (!activeStyle) {\n        return null;\n      }\n\n      style = activeStyle;\n    }\n\n    const domCascade = this.#styleToDOMCascade.get(style);\n    return domCascade ? domCascade.computeCSSVariable(style, variableName) : null;\n  }\n\n  computeAttribute(style: CSSStyleDeclaration, attributeName: string, type: CSSType): string|null {\n    const domCascade = this.#styleToDOMCascade.get(style);\n    return domCascade ? domCascade.computeAttribute(style, attributeName, type) : null;\n  }\n\n  originatingNodeForStyle(style: CSSStyleDeclaration): DOMNode|null {\n    let node: DOMNode|null = this.nodeForStyle(style) ?? this.node();\n\n    // If it's a pseudo-element, we need to find the originating element.\n    while (node?.pseudoType()) {\n      node = node.parentNode;\n    }\n    return node;\n  }\n\n  rawAttributeValueFromStyle(style: CSSStyleDeclaration, attributeName: string): string|null {\n    const node = this.originatingNodeForStyle(style);\n    if (!node) {\n      return null;\n    }\n    return node.getAttribute(attributeName) ?? null;\n  }\n\n  resolveProperty(name: string, ownerStyle: CSSStyleDeclaration): CSSProperty|null {\n    return this.#styleToDOMCascade.get(ownerStyle)?.resolveProperty(name, ownerStyle) ?? null;\n  }\n\n  resolveGlobalKeyword(property: CSSProperty, keyword: CSSWideKeyword): CSSValueSource|null {\n    const resolved = this.#styleToDOMCascade.get(property.ownerStyle)?.resolveGlobalKeyword(property, keyword);\n    return resolved ? new CSSValueSource(resolved) : null;\n  }\n\n  isInherited(style: CSSStyleDeclaration): boolean {\n    return this.#inheritedStyles.has(style);\n  }\n\n  propertyState(property: CSSProperty): PropertyState|null {\n    const domCascade = this.#styleToDOMCascade.get(property.ownerStyle);\n    return domCascade ? domCascade.propertyState(property) : null;\n  }\n\n  resetActiveProperties(): void {\n    Platform.assertNotNullOrUndefined(this.#mainDOMCascade);\n    Platform.assertNotNullOrUndefined(this.#pseudoDOMCascades);\n    Platform.assertNotNullOrUndefined(this.#customHighlightPseudoDOMCascades);\n    this.#mainDOMCascade.reset();\n    for (const domCascade of this.#pseudoDOMCascades.values()) {\n      domCascade.reset();\n    }\n\n    for (const domCascade of this.#customHighlightPseudoDOMCascades.values()) {\n      domCascade.reset();\n    }\n  }\n\n  propertyMatchers(style: CSSStyleDeclaration, computedStyles: Map<string, string>|null): Array<Matcher<Match>> {\n    return [\n      new VariableMatcher(this, style),\n      new ColorMatcher(() => computedStyles?.get('color') ?? null),\n      new ColorMixMatcher(),\n      new URLMatcher(),\n      new AngleMatcher(),\n      new LinkableNameMatcher(),\n      new BezierMatcher(),\n      new StringMatcher(),\n      new ShadowMatcher(),\n      new LightDarkColorMatcher(style),\n      new GridTemplateMatcher(),\n      new LinearGradientMatcher(),\n      new AnchorFunctionMatcher(),\n      new PositionAnchorMatcher(),\n      new FlexGridGridLanesMatcher(),\n      new PositionTryMatcher(),\n      new LengthMatcher(),\n      new MathFunctionMatcher(),\n      new CustomFunctionMatcher(),\n      new AutoBaseMatcher(),\n      new BinOpMatcher(),\n      new RelativeColorChannelMatcher(),\n      new AttributeMatcher(this, style),\n      new EnvFunctionMatcher(this),\n    ];\n  }\n\n  environmentVariable(name: string): string|undefined {\n    return this.#environmentVariables[name];\n  }\n}\n\nclass NodeCascade {\n  #matchedStyles: CSSMatchedStyles;\n  readonly styles: CSSStyleDeclaration[];\n  readonly #isInherited: boolean;\n  readonly #isHighlightPseudoCascade: boolean;\n  readonly propertiesState = new Map<CSSProperty, PropertyState>();\n  readonly activeProperties = new Map<string, CSSProperty>();\n  readonly #node: DOMNode;\n  constructor(\n      matchedStyles: CSSMatchedStyles, styles: CSSStyleDeclaration[], node: DOMNode, isInherited: boolean,\n      isHighlightPseudoCascade = false) {\n    this.#matchedStyles = matchedStyles;\n    this.styles = styles;\n    this.#isInherited = isInherited;\n    this.#isHighlightPseudoCascade = isHighlightPseudoCascade;\n    this.#node = node;\n  }\n\n  computeActiveProperties(): void {\n    this.propertiesState.clear();\n    this.activeProperties.clear();\n\n    for (let i = this.styles.length - 1; i >= 0; i--) {\n      const style = this.styles[i];\n      const rule = style.parentRule;\n      // Compute cascade for CSSStyleRules only.\n      if (rule && !(rule instanceof CSSStyleRule)) {\n        continue;\n      }\n      if (rule && !this.#matchedStyles.hasMatchingSelectors(rule)) {\n        continue;\n      }\n\n      for (const property of style.allProperties()) {\n        // Do not pick non-inherited properties from inherited styles.\n        const metadata = cssMetadata();\n\n        // All properties are inherited for highlight pseudos.\n        if (this.#isInherited && !this.#isHighlightPseudoCascade && !metadata.isPropertyInherited(property.name)) {\n          continue;\n        }\n\n        // When a property does not have a range in an otherwise ranged CSSStyleDeclaration,\n        // we consider it as a non-leading property (see computeLeadingProperties()), and most\n        // of them are computed longhands. We exclude these from activeProperties calculation,\n        // and use parsed longhands instead (see below).\n        if (style.range && !property.range) {\n          continue;\n        }\n\n        if (!property.activeInStyle()) {\n          this.propertiesState.set(property, PropertyState.OVERLOADED);\n          continue;\n        }\n\n        // If the custom property was registered with `inherits: false;`, inherited properties are invalid.\n        if (this.#isInherited) {\n          const registration = this.#matchedStyles.getRegisteredProperty(property.name);\n          if (registration && !registration.inherits()) {\n            this.propertiesState.set(property, PropertyState.OVERLOADED);\n            continue;\n          }\n        }\n\n        const canonicalName = metadata.canonicalPropertyName(property.name);\n        this.updatePropertyState(property, canonicalName);\n        for (const longhand of property.getLonghandProperties()) {\n          if (metadata.isCSSPropertyName(longhand.name)) {\n            this.updatePropertyState(longhand, longhand.name);\n          }\n        }\n      }\n    }\n  }\n\n  #treeScopeDistance(property: CSSProperty): number {\n    if (!property.ownerStyle.parentRule && property.ownerStyle.type !== Type.Inline) {\n      return -1;\n    }\n    const root = this.#node.getTreeRoot();\n    const nodeId = property.ownerStyle.parentRule?.treeScope ?? root?.backendNodeId();\n    if (nodeId === undefined) {\n      return -1;\n    }\n\n    let distance = 0;\n    for (let ancestor: DOMNode|null = this.#node; ancestor; ancestor = ancestor.parentNode) {\n      if (ancestor.backendNodeId() === nodeId) {\n        return distance;\n      }\n      distance++;\n    }\n    return -1;\n  }\n\n  #needsCascadeContextStep(): boolean {\n    if (!this.#node.isInShadowTree()) {\n      return false;\n    }\n\n    if (this.#node.ancestorShadowRoot()?.shadowRootType() === 'user-agent') {\n      // In UA shadow dom, only standards-track pseudo elements override style attributes. -webkit-* and -internal-*\n      // pseudos are still exempt from that to retain legacy behavior.\n      const pseudoElement = this.#node.getAttribute('pseudo');\n      return !pseudoElement?.startsWith('-webkit-') && !pseudoElement?.startsWith('-internal-');\n    }\n\n    return true;\n  }\n\n  private updatePropertyState(propertyWithHigherSpecificity: CSSProperty, canonicalName: string): void {\n    const activeProperty = this.activeProperties.get(canonicalName);\n    if (activeProperty?.important && !propertyWithHigherSpecificity.important ||\n        activeProperty && this.#needsCascadeContextStep() &&\n            this.#treeScopeDistance(activeProperty) > this.#treeScopeDistance(propertyWithHigherSpecificity)) {\n      this.propertiesState.set(propertyWithHigherSpecificity, PropertyState.OVERLOADED);\n      return;\n    }\n\n    if (activeProperty) {\n      this.propertiesState.set(activeProperty, PropertyState.OVERLOADED);\n    }\n    this.propertiesState.set(propertyWithHigherSpecificity, PropertyState.ACTIVE);\n    this.activeProperties.set(canonicalName, propertyWithHigherSpecificity);\n  }\n}\n\nfunction isRegular(declaration: CSSProperty|CSSRegisteredProperty): declaration is CSSProperty {\n  return 'ownerStyle' in declaration;\n}\nexport class CSSValueSource {\n  readonly declaration: CSSProperty|CSSRegisteredProperty;\n  constructor(declaration: CSSProperty|CSSRegisteredProperty) {\n    this.declaration = declaration;\n  }\n\n  get value(): string|null {\n    return isRegular(this.declaration) ? this.declaration.value : this.declaration.initialValue();\n  }\n  get style(): CSSStyleDeclaration {\n    return isRegular(this.declaration) ? this.declaration.ownerStyle : this.declaration.style();\n  }\n  get name(): string {\n    return isRegular(this.declaration) ? this.declaration.name : this.declaration.propertyName();\n  }\n}\n\nexport interface CSSVariableValue {\n  value: string;\n  declaration: CSSValueSource;\n}\n\ninterface CSSAttributeValue {\n  value: string;\n}\n\nclass SCCRecordEntry {\n  private rootDiscoveryTime: number;\n  get isRootEntry(): boolean {\n    return this.rootDiscoveryTime === this.discoveryTime;\n  }\n  updateRoot(neighbor: SCCRecordEntry): void {\n    this.rootDiscoveryTime = Math.min(this.rootDiscoveryTime, neighbor.rootDiscoveryTime);\n  }\n  constructor(readonly nodeCascade: NodeCascade, readonly name: string, private readonly discoveryTime: number) {\n    this.rootDiscoveryTime = discoveryTime;\n  }\n}\n\nclass SCCRecord {\n  #time = 0;\n  #stack: SCCRecordEntry[] = [];\n  #entries = new Map<NodeCascade, Map<string, SCCRecordEntry>>();\n\n  get(nodeCascade: NodeCascade, variable: string): SCCRecordEntry|undefined {\n    return this.#entries.get(nodeCascade)?.get(variable);\n  }\n\n  add(nodeCascade: NodeCascade, variable: string): SCCRecordEntry {\n    const existing = this.get(nodeCascade, variable);\n    if (existing) {\n      return existing;\n    }\n    const entry = new SCCRecordEntry(nodeCascade, variable, this.#time++);\n    this.#stack.push(entry);\n    let map = this.#entries.get(nodeCascade);\n    if (!map) {\n      map = new Map();\n      this.#entries.set(nodeCascade, map);\n    }\n    map.set(variable, entry);\n    return entry;\n  }\n\n  isInInProgressSCC(childRecord: SCCRecordEntry): boolean {\n    return this.#stack.includes(childRecord);\n  }\n\n  finishSCC(root: SCCRecordEntry): SCCRecordEntry[] {\n    const startIndex = this.#stack.lastIndexOf(root);\n    console.assert(startIndex >= 0, 'Root is not an in-progress scc');\n    return this.#stack.splice(startIndex);\n  }\n}\n\nfunction* forEach<T>(array: T[], startAfter?: T): Generator<T> {\n  const startIdx = startAfter !== undefined ? array.indexOf(startAfter) + 1 : 0;\n  for (let i = startIdx; i < array.length; ++i) {\n    yield array[i];\n  }\n}\n\nclass DOMInheritanceCascade {\n  readonly #propertiesState = new Map<CSSProperty, PropertyState>();\n  readonly #availableCSSVariables = new Map<NodeCascade, Map<string, CSSVariableValue|null>>();\n  readonly #computedCSSVariables = new Map<NodeCascade, Map<string, CSSVariableValue|CSSAttributeValue|null>>();\n  readonly #styleToNodeCascade = new Map<CSSStyleDeclaration, NodeCascade>();\n  #initialized = false;\n  readonly #nodeCascades: NodeCascade[];\n  #registeredProperties: CSSRegisteredProperty[];\n  readonly #matchedStyles: CSSMatchedStyles;\n  constructor(\n      matchedStyles: CSSMatchedStyles, nodeCascades: NodeCascade[], registeredProperties: CSSRegisteredProperty[]) {\n    this.#nodeCascades = nodeCascades;\n    this.#matchedStyles = matchedStyles;\n    this.#registeredProperties = registeredProperties;\n\n    for (const nodeCascade of nodeCascades) {\n      for (const style of nodeCascade.styles) {\n        this.#styleToNodeCascade.set(style, nodeCascade);\n      }\n    }\n  }\n\n  findAvailableCSSVariables(style: CSSStyleDeclaration): string[] {\n    const nodeCascade = this.#styleToNodeCascade.get(style);\n    if (!nodeCascade) {\n      return [];\n    }\n    this.ensureInitialized();\n    const availableCSSVariables = this.#availableCSSVariables.get(nodeCascade);\n    if (!availableCSSVariables) {\n      return [];\n    }\n    return Array.from(availableCSSVariables.keys());\n  }\n\n  #findPropertyInPreviousStyle(property: CSSProperty, filter: (property: CSSProperty) => boolean): CSSProperty|null {\n    const cascade = this.#styleToNodeCascade.get(property.ownerStyle);\n    if (!cascade) {\n      return null;\n    }\n\n    for (const style of forEach(cascade.styles, property.ownerStyle)) {\n      const candidate =\n          style.allProperties().findLast(candidate => candidate.name === property.name && filter(candidate));\n      if (candidate) {\n        return candidate;\n      }\n    }\n    return null;\n  }\n\n  resolveProperty(name: string, ownerStyle: CSSStyleDeclaration): CSSProperty|null {\n    const cascade = this.#styleToNodeCascade.get(ownerStyle);\n    if (!cascade) {\n      return null;\n    }\n\n    for (const style of cascade.styles) {\n      const candidate = style.allProperties().findLast(candidate => candidate.name === name);\n      if (candidate) {\n        return candidate;\n      }\n    }\n\n    return this.#findPropertyInParentCascadeIfInherited({name, ownerStyle});\n  }\n\n  #findPropertyInParentCascade(property: {name: string, ownerStyle: CSSStyleDeclaration}): CSSProperty|null {\n    const nodeCascade = this.#styleToNodeCascade.get(property.ownerStyle);\n    if (!nodeCascade) {\n      return null;\n    }\n    for (const cascade of forEach(this.#nodeCascades, nodeCascade)) {\n      for (const style of cascade.styles) {\n        const inheritedProperty =\n            style.allProperties().findLast(inheritedProperty => inheritedProperty.name === property.name);\n        if (inheritedProperty) {\n          return inheritedProperty;\n        }\n      }\n    }\n    return null;\n  }\n\n  #findPropertyInParentCascadeIfInherited(property: {name: string, ownerStyle: CSSStyleDeclaration}): CSSProperty|null {\n    if (!cssMetadata().isPropertyInherited(property.name) ||\n        !(this.#findCustomPropertyRegistration(property.name)?.inherits() ?? true)) {\n      return null;\n    }\n    return this.#findPropertyInParentCascade(property);\n  }\n\n  #findCustomPropertyRegistration(property: string): CSSRegisteredProperty|null {\n    const registration = this.#registeredProperties.find(registration => registration.propertyName() === property);\n    return registration ? registration : null;\n  }\n\n  resolveGlobalKeyword(property: CSSProperty, keyword: CSSWideKeyword): null|CSSProperty|CSSRegisteredProperty {\n    const isPreviousLayer = (other: CSSProperty): boolean => {\n      // If there's no parent rule on then it isn't layered and is thus not in a previous one.\n      if (!(other.ownerStyle.parentRule instanceof CSSStyleRule)) {\n        return false;\n      }\n      // Element-attached style -> author origin counts as a previous layer transition for revert-layer.\n      if (property.ownerStyle.type === Type.Inline) {\n        return true;\n      }\n      // Compare layers\n      if (property.ownerStyle.parentRule instanceof CSSStyleRule &&\n          other.ownerStyle.parentRule?.origin === Protocol.CSS.StyleSheetOrigin.Regular) {\n        return JSON.stringify(other.ownerStyle.parentRule.layers) !==\n            JSON.stringify(property.ownerStyle.parentRule.layers);\n      }\n      return false;\n    };\n\n    switch (keyword) {\n      case CSSWideKeyword.INITIAL:\n        return this.#findCustomPropertyRegistration(property.name);\n      case CSSWideKeyword.INHERIT:\n        return this.#findPropertyInParentCascade(property) ?? this.#findCustomPropertyRegistration(property.name);\n      case CSSWideKeyword.REVERT:\n        return this.#findPropertyInPreviousStyle(\n                   property,\n                   other => other.ownerStyle.parentRule !== null &&\n                       other.ownerStyle.parentRule.origin !==\n                           (property.ownerStyle.parentRule?.origin ?? Protocol.CSS.StyleSheetOrigin.Regular)) ??\n            this.resolveGlobalKeyword(property, CSSWideKeyword.UNSET);\n      case CSSWideKeyword.REVERT_LAYER:\n        return this.#findPropertyInPreviousStyle(property, isPreviousLayer) ??\n            this.resolveGlobalKeyword(property, CSSWideKeyword.REVERT);\n      case CSSWideKeyword.UNSET:\n        return this.#findPropertyInParentCascadeIfInherited(property) ??\n            this.#findCustomPropertyRegistration(property.name);\n    }\n  }\n\n  computeCSSVariable(style: CSSStyleDeclaration, variableName: string): CSSVariableValue|null {\n    this.ensureInitialized();\n    const nodeCascade = this.#styleToNodeCascade.get(style);\n    if (!nodeCascade) {\n      return null;\n    }\n    return this.#computeCSSVariable(nodeCascade, variableName);\n  }\n\n  #computeCSSVariable(nodeCascade: NodeCascade, variableName: string, sccRecord = new SCCRecord()): CSSVariableValue\n      |null {\n    const availableCSSVariables = this.#availableCSSVariables.get(nodeCascade);\n    const computedCSSVariables = this.#computedCSSVariables.get(nodeCascade);\n    if (!computedCSSVariables || !availableCSSVariables?.has(variableName)) {\n      return null;\n    }\n\n    if (computedCSSVariables?.has(variableName)) {\n      return (computedCSSVariables.get(variableName) as CSSVariableValue | null | undefined) || null;\n    }\n\n    let definedValue = availableCSSVariables.get(variableName);\n    if (definedValue === undefined || definedValue === null) {\n      return null;\n    }\n\n    if (definedValue.declaration.declaration instanceof CSSProperty && definedValue.declaration.value &&\n        CSSMetadata.isCSSWideKeyword(definedValue.declaration.value)) {\n      const resolvedProperty =\n          this.resolveGlobalKeyword(definedValue.declaration.declaration, definedValue.declaration.value);\n      if (!resolvedProperty) {\n        return definedValue;\n      }\n      const declaration = new CSSValueSource(resolvedProperty);\n      const {value} = declaration;\n      if (!value) {\n        return definedValue;\n      }\n      definedValue = {declaration, value};\n    }\n\n    const ast = PropertyParser.tokenizeDeclaration(`--${variableName}`, definedValue.value);\n    if (!ast) {\n      return null;\n    }\n\n    return this.#walkTree(\n               nodeCascade, ast, definedValue.declaration.style, variableName, sccRecord, definedValue.declaration) as\n        CSSVariableValue |\n        null;\n  }\n\n  computeAttribute(style: CSSStyleDeclaration, attributeName: string, type: CSSType): string|null {\n    this.ensureInitialized();\n    const nodeCascade = this.#styleToNodeCascade.get(style);\n    if (!nodeCascade) {\n      return null;\n    }\n    return this.#computeAttribute(nodeCascade, style, attributeName, type, new SCCRecord());\n  }\n\n  private attributeValueAsType(style: CSSStyleDeclaration, attributeName: string, type: string): string|null {\n    const rawValue = this.#matchedStyles.rawAttributeValueFromStyle(style, attributeName);\n    if (rawValue === null) {\n      return null;\n    }\n    return localEvalCSS(rawValue, type);\n  }\n\n  private attributeValueWithSubstitutions(\n      nodeCascade: NodeCascade, style: CSSStyleDeclaration, attributeName: string, sccRecord: SCCRecord): string|null {\n    const rawValue = this.#matchedStyles.rawAttributeValueFromStyle(style, attributeName);\n    if (rawValue === null) {\n      return null;\n    }\n    const ast = PropertyParser.tokenizeDeclaration('--property', rawValue);\n    if (!ast) {\n      return null;\n    }\n    return this.#walkTree(nodeCascade, ast, style, `attr(${attributeName})`, sccRecord)?.value ?? null;\n  }\n\n  #computeAttribute(\n      nodeCascade: NodeCascade, style: CSSStyleDeclaration, attributeName: string, type: CSSType,\n      sccRecord = new SCCRecord()): string|null {\n    if (type.isCSSTokens) {\n      const value = this.attributeValueWithSubstitutions(nodeCascade, style, attributeName, sccRecord);\n      if (value !== null && localEvalCSS(value, type.type) !== null) {\n        return value;\n      }\n      return null;\n    }\n    return this.attributeValueAsType(style, attributeName, type.type);\n  }\n\n  #walkTree(\n      outerNodeCascade: NodeCascade, ast: SyntaxTree, parentStyle: CSSStyleDeclaration, substitutionName: string,\n      sccRecord: SCCRecord, declaration?: CSSValueSource): CSSVariableValue|CSSAttributeValue|null {\n    const record = sccRecord.add(outerNodeCascade, substitutionName);\n    const computedCSSVariablesMap = this.#computedCSSVariables;\n    const innerNodeCascade = this.#styleToNodeCascade.get(parentStyle);\n\n    // While computing CSS variable and attribute values we need to detect declaration cycles. Every declaration on the cycle is\n    // invalid. However, var()s outside of the cycle that reference a property on the cycle are not automatically\n    // invalid, but rather use the fallback value. We use a version of Tarjan's algorithm to detect cycles, which are\n    // SCCs on the custom property dependency graph. Computing variable values is DFS. When encountering a previously\n    // unseen variable, we record its discovery time. We keep a stack of visited variables and detect cycles when we\n    // find a reference to a variable already on the stack. For each node we also keep track of the \"root\" of the\n    // corresponding SCC, which is the node in that component with the smallest discovery time. This is determined by\n    // bubbling up the minimum discovery time whenever we close a cycle.\n    const matching = PropertyParser.BottomUpTreeMatching.walk(ast, [\n      new BaseVariableMatcher(match => {\n        const {value, mayFallback} = recurseWithCycleDetection(\n            match.name, nodeCascade => this.#computeCSSVariable(nodeCascade, match.name, sccRecord)?.value ?? null);\n        if (!mayFallback || value !== null) {\n          return value;\n        }\n\n        // Variable reference is not resolved, use the fallback.\n        if (!match.fallback) {\n          return null;\n        }\n        return evaluateFallback(match.fallback, match.matching);\n      }),\n      new EnvFunctionMatcher(this.#matchedStyles),\n      new AttributeMatcher(\n          this.#matchedStyles, parentStyle,\n          match => {\n            const recordName = `attr(${match.name})`;\n            let attributeValue = null;\n            if (!match.isCSSTokens) {\n              const {value, mayFallback} = recurseWithCycleDetection(\n                  recordName, () => this.attributeValueAsType(parentStyle, match.name, match.cssType()));\n              if (value === null && !mayFallback) {\n                return null;\n              }\n              attributeValue = value;\n            } else {\n              const {value, mayFallback} = recurseWithCycleDetection(\n                  recordName,\n                  nodeCascade => this.attributeValueWithSubstitutions(nodeCascade, parentStyle, match.name, sccRecord));\n              if (value === null && !mayFallback) {\n                return null;\n              }\n              if (value !== null && localEvalCSS(value, match.cssType()) !== null) {\n                attributeValue = value;\n              }\n            }\n\n            if (attributeValue !== null) {\n              return attributeValue;\n            }\n            // Variable reference is not resolved, use the fallback.\n            if (!match.fallback || !match.isValidType) {\n              // Except in this case, we use the default value for the type.\n              return defaultValueForCSSType(match.type);\n            }\n            return evaluateFallback(match.fallback, match.matching);\n          })\n    ]);\n    const decl = PropertyParser.ASTUtils.siblings(PropertyParser.ASTUtils.declValue(matching.ast.tree));\n    const declText = decl.length > 0 ? matching.getComputedTextRange(decl[0], decl[decl.length - 1]) : '';\n    const hasUnresolvedSubstitutions =\n        decl.length > 0 && matching.hasUnresolvedSubstitutionsRange(decl[0], decl[decl.length - 1]);\n    const computedText = hasUnresolvedSubstitutions ? null : declText;\n    const outerComputedCSSVariables = computedCSSVariablesMap.get(outerNodeCascade);\n    if (!outerComputedCSSVariables) {\n      return null;\n    }\n\n    if (record.isRootEntry) {\n      // Variables are kept on the stack until all descendents in the same SCC have been visited. That's the case when\n      // completing the recursion on the root of the SCC.\n      const scc = sccRecord.finishSCC(record);\n      if (scc.length > 1) {\n        for (const entry of scc) {\n          console.assert(entry.nodeCascade === outerNodeCascade, 'Circles should be within the cascade');\n          outerComputedCSSVariables.set(entry.name, null);\n        }\n        return null;\n      }\n    }\n    if (computedText === null) {\n      outerComputedCSSVariables.set(substitutionName, null);\n      return null;\n    }\n\n    const cssVariableValue = {value: computedText, declaration};\n    outerComputedCSSVariables.set(substitutionName, cssVariableValue);\n    return cssVariableValue;\n\n    function recurseWithCycleDetection(\n        recordName: string, func: (nc: NodeCascade) => string | null): {value: string|null, mayFallback: boolean} {\n      if (!innerNodeCascade) {\n        return {value: null, mayFallback: false};\n      }\n\n      const childRecord = sccRecord.get(innerNodeCascade, recordName);\n      if (childRecord) {\n        if (sccRecord.isInInProgressSCC(childRecord)) {\n          // Cycle detected, update the root.\n          record.updateRoot(childRecord);\n          return {value: null, mayFallback: false};\n        }\n\n        // We've seen the variable before, so we can look up the text directly.\n        return {\n          value: computedCSSVariablesMap.get(innerNodeCascade)?.get(recordName)?.value ?? null,\n          mayFallback: false\n        };\n      }\n\n      const value = func(innerNodeCascade);\n      // Variable reference is resolved, so return it.\n      const newChildRecord = sccRecord.get(innerNodeCascade, recordName);\n      // The SCC record for the referenced variable may not exist if the var was already computed in a previous\n      // iteration. That means it's in a different SCC.\n      newChildRecord && record.updateRoot(newChildRecord);\n      return {value, mayFallback: true};\n    }\n\n    function evaluateFallback(fallback: CodeMirror.SyntaxNode[], matching: PropertyParser.BottomUpTreeMatching): string|\n        null {\n      if (fallback.length === 0) {\n        return '';\n      }\n      if (matching.hasUnresolvedSubstitutionsRange(fallback[0], fallback[fallback.length - 1])) {\n        return null;\n      }\n      return matching.getComputedTextRange(fallback[0], fallback[fallback.length - 1]);\n    }\n  }\n\n  styles(): CSSStyleDeclaration[] {\n    return Array.from(this.#styleToNodeCascade.keys());\n  }\n\n  propertyState(property: CSSProperty): PropertyState|null {\n    this.ensureInitialized();\n    return this.#propertiesState.get(property) || null;\n  }\n\n  reset(): void {\n    this.#initialized = false;\n    this.#propertiesState.clear();\n    this.#availableCSSVariables.clear();\n    this.#computedCSSVariables.clear();\n  }\n\n  private ensureInitialized(): void {\n    if (this.#initialized) {\n      return;\n    }\n    this.#initialized = true;\n\n    const activeProperties = new Map<string, CSSProperty>();\n    for (const nodeCascade of this.#nodeCascades) {\n      nodeCascade.computeActiveProperties();\n      for (const [property, state] of nodeCascade.propertiesState) {\n        if (state === PropertyState.OVERLOADED) {\n          this.#propertiesState.set(property, PropertyState.OVERLOADED);\n          continue;\n        }\n        const canonicalName = cssMetadata().canonicalPropertyName(property.name);\n        if (activeProperties.has(canonicalName)) {\n          this.#propertiesState.set(property, PropertyState.OVERLOADED);\n          continue;\n        }\n        activeProperties.set(canonicalName, property);\n        this.#propertiesState.set(property, PropertyState.ACTIVE);\n      }\n    }\n    // If every longhand of the shorthand is not active, then the shorthand is not active too.\n    for (const [canonicalName, shorthandProperty] of activeProperties) {\n      const shorthandStyle = shorthandProperty.ownerStyle;\n      const longhands = shorthandProperty.getLonghandProperties();\n      if (!longhands.length) {\n        continue;\n      }\n      let hasActiveLonghands = false;\n      for (const longhand of longhands) {\n        const longhandCanonicalName = cssMetadata().canonicalPropertyName(longhand.name);\n        const longhandActiveProperty = activeProperties.get(longhandCanonicalName);\n        if (!longhandActiveProperty) {\n          continue;\n        }\n        if (longhandActiveProperty.ownerStyle === shorthandStyle) {\n          hasActiveLonghands = true;\n          break;\n        }\n      }\n      if (hasActiveLonghands) {\n        continue;\n      }\n      activeProperties.delete(canonicalName);\n      this.#propertiesState.set(shorthandProperty, PropertyState.OVERLOADED);\n    }\n\n    // Work inheritance chain backwards to compute visible CSS Variables.\n    const accumulatedCSSVariables = new Map<string, CSSVariableValue|null>();\n    for (const rule of this.#registeredProperties) {\n      const initialValue = rule.initialValue();\n      accumulatedCSSVariables.set(\n          rule.propertyName(),\n          initialValue !== null ? {value: initialValue, declaration: new CSSValueSource(rule)} : null);\n    }\n    for (let i = this.#nodeCascades.length - 1; i >= 0; --i) {\n      const nodeCascade = this.#nodeCascades[i];\n      const variableNames = [];\n      for (const entry of nodeCascade.activeProperties.entries()) {\n        const propertyName = entry[0];\n        const property = entry[1];\n        if (propertyName.startsWith('--')) {\n          accumulatedCSSVariables.set(propertyName, {value: property.value, declaration: new CSSValueSource(property)});\n          variableNames.push(propertyName);\n        }\n      }\n      const availableCSSVariablesMap = new Map(accumulatedCSSVariables);\n      const computedVariablesMap = new Map();\n      this.#availableCSSVariables.set(nodeCascade, availableCSSVariablesMap);\n      this.#computedCSSVariables.set(nodeCascade, computedVariablesMap);\n      for (const variableName of variableNames) {\n        const prevValue = accumulatedCSSVariables.get(variableName);\n        accumulatedCSSVariables.delete(variableName);\n        const computedValue = this.#computeCSSVariable(nodeCascade, variableName);\n        if (prevValue && computedValue?.value === prevValue.value) {\n          computedValue.declaration = prevValue.declaration;\n        }\n        accumulatedCSSVariables.set(variableName, computedValue);\n      }\n    }\n  }\n}\n\nexport const enum PropertyState {\n  ACTIVE = 'Active',\n  OVERLOADED = 'Overloaded',\n}\n", "// Copyright 2016 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport type * as Protocol from '../../generated/protocol.js';\nimport * as TextUtils from '../../models/text_utils/text_utils.js';\nimport * as Common from '../common/common.js';\nimport * as HostModule from '../host/host.js';\nimport * as Platform from '../platform/platform.js';\nimport * as Root from '../root/root.js';\n\nimport type {CSSMatchedStyles} from './CSSMatchedStyles.js';\nimport {cssMetadata, GridAreaRowRegex} from './CSSMetadata.js';\nimport type {Edit} from './CSSModel.js';\nimport {\n  type BottomUpTreeMatching,\n  type Match,\n  matchDeclaration,\n  type Matcher,\n  stripComments\n} from './CSSPropertyParser.js';\nimport {CSSWideKeywordMatcher, FontMatcher} from './CSSPropertyParserMatchers.js';\nimport type {CSSStyleDeclaration} from './CSSStyleDeclaration.js';\n\nexport const enum Events {\n  LOCAL_VALUE_UPDATED = 'localValueUpdated',\n}\n\nexport interface EventTypes {\n  [Events.LOCAL_VALUE_UPDATED]: void;\n}\n\nexport class CSSProperty extends Common.ObjectWrapper.ObjectWrapper<EventTypes> {\n  ownerStyle: CSSStyleDeclaration;\n  index: number;\n  name: string;\n  value: string;\n  important: boolean;\n  disabled: boolean;\n  parsedOk: boolean;\n  implicit: boolean;\n  text: string|null|undefined;\n  range: TextUtils.TextRange.TextRange|null;\n  #active = true;\n  #nameRange: TextUtils.TextRange.TextRange|null = null;\n  #valueRange: TextUtils.TextRange.TextRange|null = null;\n  #invalidString?: Common.UIString.LocalizedString;\n  #longhandProperties: CSSProperty[] = [];\n\n  constructor(\n      ownerStyle: CSSStyleDeclaration, index: number, name: string, value: string, important: boolean,\n      disabled: boolean, parsedOk: boolean, implicit: boolean, text?: string|null, range?: Protocol.CSS.SourceRange,\n      longhandProperties?: Protocol.CSS.CSSProperty[]) {\n    super();\n    this.ownerStyle = ownerStyle;\n    this.index = index;\n    this.name = name;\n    this.value = value;\n    this.important = important;\n    this.disabled = disabled;\n    this.parsedOk = parsedOk;\n    this.implicit = implicit;  // A longhand, implicitly set by missing values of shorthand.\n    this.text = text;\n    this.range = range ? TextUtils.TextRange.TextRange.fromObject(range) : null;\n\n    if (longhandProperties && longhandProperties.length > 0) {\n      for (const property of longhandProperties) {\n        this.#longhandProperties.push(\n            new CSSProperty(ownerStyle, ++index, property.name, property.value, important, disabled, parsedOk, true));\n      }\n    } else {\n      // Blink would not parse shorthands containing 'var()' functions:\n      // https://drafts.csswg.org/css-variables/#variables-in-shorthands).\n      // Therefore we manually check if the current property is a shorthand,\n      // and fills its longhand components with empty values.\n      const longhandNames = cssMetadata().getLonghands(name);\n      for (const longhandName of longhandNames || []) {\n        this.#longhandProperties.push(\n            new CSSProperty(ownerStyle, ++index, longhandName, '', important, disabled, parsedOk, true));\n      }\n    }\n  }\n\n  static parsePayload(ownerStyle: CSSStyleDeclaration, index: number, payload: Protocol.CSS.CSSProperty): CSSProperty {\n    // The following default field values are used in the payload:\n    // important: false\n    // parsedOk: true\n    // implicit: false\n    // disabled: false\n    const result = new CSSProperty(\n        ownerStyle, index, payload.name, payload.value, payload.important || false, payload.disabled || false,\n        ('parsedOk' in payload) ? Boolean(payload.parsedOk) : true, Boolean(payload.implicit), payload.text,\n        payload.range, payload.longhandProperties);\n    return result;\n  }\n\n  parseExpression(expression: string, matchedStyles: CSSMatchedStyles, computedStyles: Map<string, string>|null):\n      BottomUpTreeMatching|null {\n    if (!this.parsedOk) {\n      return null;\n    }\n\n    return matchDeclaration(this.name, expression, this.#matchers(matchedStyles, computedStyles));\n  }\n\n  parseValue(matchedStyles: CSSMatchedStyles, computedStyles: Map<string, string>|null): BottomUpTreeMatching|null {\n    if (!this.parsedOk) {\n      return null;\n    }\n\n    return matchDeclaration(this.name, this.value, this.#matchers(matchedStyles, computedStyles));\n  }\n\n  #matchers(matchedStyles: CSSMatchedStyles, computedStyles: Map<string, string>|null): Array<Matcher<Match>> {\n    const matchers = matchedStyles.propertyMatchers(this.ownerStyle, computedStyles);\n\n    matchers.push(new CSSWideKeywordMatcher(this, matchedStyles));\n    if (Root.Runtime.experiments.isEnabled('font-editor')) {\n      matchers.push(new FontMatcher());\n    }\n    return matchers;\n  }\n\n  private ensureRanges(): void {\n    if (this.#nameRange && this.#valueRange) {\n      return;\n    }\n    const range = this.range;\n    const text = this.text ? new TextUtils.Text.Text(this.text) : null;\n    if (!range || !text) {\n      return;\n    }\n\n    const nameIndex = text.value().indexOf(this.name);\n    const valueIndex = text.value().lastIndexOf(this.value);\n    if (nameIndex === -1 || valueIndex === -1 || nameIndex > valueIndex) {\n      return;\n    }\n\n    const nameSourceRange = new TextUtils.TextRange.SourceRange(nameIndex, this.name.length);\n    const valueSourceRange = new TextUtils.TextRange.SourceRange(valueIndex, this.value.length);\n\n    this.#nameRange = rebase(text.toTextRange(nameSourceRange), range.startLine, range.startColumn);\n    this.#valueRange = rebase(text.toTextRange(valueSourceRange), range.startLine, range.startColumn);\n\n    function rebase(oneLineRange: TextUtils.TextRange.TextRange, lineOffset: number, columnOffset: number):\n        TextUtils.TextRange.TextRange {\n      if (oneLineRange.startLine === 0) {\n        oneLineRange.startColumn += columnOffset;\n        oneLineRange.endColumn += columnOffset;\n      }\n      oneLineRange.startLine += lineOffset;\n      oneLineRange.endLine += lineOffset;\n      return oneLineRange;\n    }\n  }\n\n  nameRange(): TextUtils.TextRange.TextRange|null {\n    this.ensureRanges();\n    return this.#nameRange;\n  }\n\n  valueRange(): TextUtils.TextRange.TextRange|null {\n    this.ensureRanges();\n    return this.#valueRange;\n  }\n\n  rebase(edit: Edit): void {\n    if (this.ownerStyle.styleSheetId !== edit.styleSheetId) {\n      return;\n    }\n    if (this.range) {\n      this.range = this.range.rebaseAfterTextEdit(edit.oldRange, edit.newRange);\n    }\n  }\n\n  setActive(active: boolean): void {\n    this.#active = active;\n  }\n\n  get propertyText(): string|null {\n    if (this.text !== undefined) {\n      return this.text;\n    }\n\n    if (this.name === '') {\n      return '';\n    }\n    return this.name + ': ' + this.value + (this.important ? ' !important' : '') + ';';\n  }\n\n  activeInStyle(): boolean {\n    return this.#active;\n  }\n\n  async setText(propertyText: string, majorChange: boolean, overwrite?: boolean): Promise<boolean> {\n    if (!this.ownerStyle) {\n      throw new Error('No ownerStyle for property');\n    }\n\n    if (!this.ownerStyle.styleSheetId) {\n      throw new Error('No owner style id');\n    }\n\n    if (!this.range || !this.ownerStyle.range) {\n      throw new Error('Style not editable');\n    }\n\n    if (majorChange) {\n      HostModule.userMetrics.actionTaken(HostModule.UserMetrics.Action.StyleRuleEdited);\n      if (this.ownerStyle.parentRule?.isKeyframeRule()) {\n        HostModule.userMetrics.actionTaken(HostModule.UserMetrics.Action.StylePropertyInsideKeyframeEdited);\n      }\n\n      if (this.name.startsWith('--')) {\n        HostModule.userMetrics.actionTaken(HostModule.UserMetrics.Action.CustomPropertyEdited);\n      }\n    }\n\n    if (overwrite && propertyText === this.propertyText) {\n      this.ownerStyle.cssModel().domModel().markUndoableState(!majorChange);\n      return true;\n    }\n\n    const range = this.range.relativeTo(this.ownerStyle.range.startLine, this.ownerStyle.range.startColumn);\n    const indentation = this.ownerStyle.cssText ?\n        this.detectIndentation(this.ownerStyle.cssText) :\n        Common.Settings.Settings.instance().moduleSetting('text-editor-indent').get();\n    const endIndentation = this.ownerStyle.cssText ? indentation.substring(0, this.ownerStyle.range.endColumn) : '';\n    const text = new TextUtils.Text.Text(this.ownerStyle.cssText || '');\n    const newStyleText = text.replaceRange(range, Platform.StringUtilities.sprintf(';%s;', propertyText));\n    const styleText = await CSSProperty.formatStyle(newStyleText, indentation, endIndentation);\n    return await this.ownerStyle.setText(styleText, majorChange);\n  }\n\n  static async formatStyle(styleText: string, indentation: string, endIndentation: string): Promise<string> {\n    const doubleIndent = indentation.substring(endIndentation.length) + indentation;\n    if (indentation) {\n      indentation = '\\n' + indentation;\n    }\n    let result = '';\n    let propertyName = '';\n    let propertyText = '';\n    let insideProperty = false;\n    let needsSemi = false;\n    const tokenize = TextUtils.CodeMirrorUtils.createCssTokenizer();\n\n    await tokenize('*{' + styleText + '}', processToken);\n    if (insideProperty) {\n      result += propertyText;\n    }\n    result = result.substring(2, result.length - 1).trimEnd();\n    return result + (indentation ? '\\n' + endIndentation : '');\n\n    function processToken(token: string, tokenType: string|null): void {\n      if (!insideProperty) {\n        const disabledProperty = tokenType?.includes('comment') && isDisabledProperty(token);\n        const isPropertyStart =\n            (tokenType?.includes('def') || tokenType?.includes('string') || tokenType?.includes('meta') ||\n             tokenType?.includes('property') ||\n             (tokenType?.includes('variableName') && tokenType !== ('variableName.function')));\n        if (disabledProperty) {\n          result = result.trimEnd() + indentation + token;\n        } else if (isPropertyStart) {\n          insideProperty = true;\n          propertyText = token;\n        } else if (token !== ';' || needsSemi) {\n          result += token;\n          if (token.trim() && !(tokenType?.includes('comment'))) {\n            needsSemi = token !== ';';\n          }\n        }\n        if (token === '{' && !tokenType) {\n          needsSemi = false;\n        }\n        return;\n      }\n\n      if (token === '}' || token === ';') {\n        // While `propertyText` can generally be trimmed, doing so\n        // breaks valid CSS declarations such as `--foo:  ;` which would\n        // then produce invalid CSS of the form `--foo:;`. This\n        // implementation takes special care to restore a single\n        // whitespace token in this edge case. https://crbug.com/1071296\n        const trimmedPropertyText = propertyText.trim();\n        result = result.trimEnd() + indentation + trimmedPropertyText + (trimmedPropertyText.endsWith(':') ? ' ' : '') +\n            token;\n        needsSemi = false;\n        insideProperty = false;\n        propertyName = '';\n        return;\n      }\n      if (cssMetadata().isGridAreaDefiningProperty(propertyName)) {\n        const rowResult = GridAreaRowRegex.exec(token);\n        if (rowResult?.index === 0 && !propertyText.trimEnd().endsWith(']')) {\n          propertyText = propertyText.trimEnd() + '\\n' + doubleIndent;\n        }\n      }\n      if (!propertyName && token === ':') {\n        propertyName = propertyText;\n      }\n      propertyText += token;\n    }\n\n    function isDisabledProperty(text: string): boolean {\n      const colon = text.indexOf(':');\n      if (colon === -1) {\n        return false;\n      }\n      const propertyName = text.substring(2, colon).trim();\n      return cssMetadata().isCSSPropertyName(propertyName);\n    }\n  }\n\n  private detectIndentation(text: string): string {\n    const lines = text.split('\\n');\n    if (lines.length < 2) {\n      return '';\n    }\n    return TextUtils.TextUtils.Utils.lineIndent(lines[1]);\n  }\n\n  setValue(newValue: string, majorChange: boolean, overwrite: boolean, userCallback?: ((arg0: boolean) => void)): void {\n    const text = this.name + ': ' + newValue + (this.important ? ' !important' : '') + ';';\n    void this.setText(text, majorChange, overwrite).then(userCallback);\n  }\n\n  // Updates the value stored locally and emits an event to signal its update.\n  setLocalValue(value: string): void {\n    this.value = value;\n    this.dispatchEventToListeners(Events.LOCAL_VALUE_UPDATED);\n  }\n\n  async setDisabled(disabled: boolean): Promise<boolean> {\n    if (!this.ownerStyle) {\n      return false;\n    }\n    if (disabled === this.disabled) {\n      return true;\n    }\n    if (!this.text) {\n      return true;\n    }\n    const propertyText = this.text.trim();\n    // Ensure that if we try to enable/disable a property that has no semicolon (which is only legal\n    // in the last position of a css rule), we add it. This ensures that if we then later try\n    // to re-enable/-disable the rule, we end up with legal syntax (if the user adds more properties\n    // after the disabled rule).\n    const appendSemicolonIfMissing = (propertyText: string): string =>\n        propertyText + (propertyText.endsWith(';') ? '' : ';');\n    let text: string;\n    if (disabled) {\n      // We remove comments before wrapping comment tags around propertyText, because otherwise it will\n      // create an unmatched trailing `*/`, making the text invalid. This will result in disabled\n      // CSSProperty losing its original comments, but since escaping comments will result in the parser\n      // to completely ignore and then lose this declaration, this is the best compromise so far.\n      text = '/* ' + appendSemicolonIfMissing(stripComments(propertyText)) + ' */';\n    } else {\n      text = appendSemicolonIfMissing(this.text.substring(2, propertyText.length - 2).trim());\n    }\n    return await this.setText(text, true, true);\n  }\n\n  /**\n   * This stores the warning string when a CSS Property is improperly parsed.\n   */\n  setDisplayedStringForInvalidProperty(invalidString: Common.UIString.LocalizedString): void {\n    this.#invalidString = invalidString;\n  }\n\n  /**\n   * Retrieve the warning string for a screen reader to announce when editing the property.\n   */\n  getInvalidStringForInvalidProperty(): Common.UIString.LocalizedString|undefined {\n    return this.#invalidString;\n  }\n\n  getLonghandProperties(): CSSProperty[] {\n    return this.#longhandProperties;\n  }\n}\n", "// Copyright 2020 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport type * as Platform from '../../core/platform/platform.js';\nimport * as CodeMirror from '../../third_party/codemirror.next/codemirror.next.js';\n\nimport {TextMatcher} from './CSSPropertyParserMatchers.js';\n\nconst globalValues = new Set<string>(['inherit', 'initial', 'unset']);\n\nconst tagRegexp = /[\\x20-\\x7E]{4}/;\nconst numRegexp = /[+-]?(?:\\d*\\.)?\\d+(?:[eE]\\d+)?/;\nconst fontVariationSettingsRegexp =\n    new RegExp(`(?:'(${tagRegexp.source})')|(?:\"(${tagRegexp.source})\")\\\\s+(${numRegexp.source})`);\n\n/**\n * Extracts information about font variation settings assuming\n * value is valid according to the spec: https://drafts.csswg.org/css-fonts-4/#font-variation-settings-def\n */\nexport function parseFontVariationSettings(value: string): Array<{\n  tag: string,\n  value: number,\n}> {\n  if (globalValues.has(value.trim()) || value.trim() === 'normal') {\n    return [];\n  }\n  const results = [];\n  for (const setting of splitByComma(stripComments(value))) {\n    const match = setting.match(fontVariationSettingsRegexp);\n    if (match) {\n      results.push({\n        tag: match[1] || match[2],\n        value: parseFloat(match[3]),\n      });\n    }\n  }\n  return results;\n}\n\n// \"str\" or 'str'\nconst fontFamilyRegexp = /^\"(.+)\"|'(.+)'$/;\n\n/**\n * Extracts font families assuming the value is valid according to\n * the spec: https://drafts.csswg.org/css-fonts-4/#font-family-prop\n */\nexport function parseFontFamily(value: string): string[] {\n  if (globalValues.has(value.trim())) {\n    return [];\n  }\n  const results = [];\n  for (const family of splitByComma(stripComments(value))) {\n    const match = family.match(fontFamilyRegexp);\n    if (match) {\n      // Either the 1st or 2nd group matches if the value is in quotes\n      results.push(match[1] || match[2]);\n    } else {\n      // Value without without quotes.\n      results.push(family);\n    }\n  }\n  return results;\n}\n\n/**\n * Splits a list of values by comma and trims parts\n */\nexport function splitByComma(value: string): string[] {\n  return value.split(',').map(part => part.trim());\n}\n\nexport function stripComments(value: string): string {\n  return value.replaceAll(/(\\/\\*(?:.|\\s)*?\\*\\/)/g, '');\n}\n\nfunction nodeText(node: CodeMirror.SyntaxNode, text: string): string {\n  return nodeTextRange(node, node, text);\n}\nfunction nodeTextRange(from: CodeMirror.SyntaxNode, to: CodeMirror.SyntaxNode, text: string): string {\n  return text.substring(from.from, to.to);\n}\n\nexport class SyntaxTree {\n  readonly propertyValue: string;\n  readonly rule: string;\n  readonly tree: CodeMirror.SyntaxNode;\n  readonly trailingNodes: CodeMirror.SyntaxNode[];\n  readonly propertyName: string|undefined;\n  constructor(\n      propertyValue: string, rule: string, tree: CodeMirror.SyntaxNode, propertyName?: string,\n      trailingNodes: CodeMirror.SyntaxNode[] = []) {\n    this.propertyName = propertyName;\n    this.propertyValue = propertyValue;\n    this.rule = rule;\n    this.tree = tree;\n    this.trailingNodes = trailingNodes;\n  }\n\n  text(node?: CodeMirror.SyntaxNode|null): string {\n    if (node === null) {\n      return '';\n    }\n    return nodeText(node ?? this.tree, this.rule);\n  }\n\n  textRange(from: CodeMirror.SyntaxNode|undefined, to: CodeMirror.SyntaxNode|undefined): string {\n    if (!from || !to) {\n      return '';\n    }\n    return nodeTextRange(from, to, this.rule);\n  }\n\n  subtree(node: CodeMirror.SyntaxNode): SyntaxTree {\n    return new SyntaxTree(this.propertyValue, this.rule, node);\n  }\n}\n\nexport interface SyntaxNodeRef {\n  node: CodeMirror.SyntaxNode;\n}\n\nexport abstract class TreeWalker {\n  readonly ast: SyntaxTree;\n  constructor(ast: SyntaxTree) {\n    this.ast = ast;\n  }\n  static walkExcludingSuccessors<T extends TreeWalker, ArgTs extends unknown[]>(\n      this: {new(ast: SyntaxTree, ...args: ArgTs): T}, propertyValue: SyntaxTree, ...args: ArgTs): T {\n    const instance = new this(propertyValue, ...args);\n    if (propertyValue.tree.name === 'Declaration') {\n      instance.iterateDeclaration(propertyValue.tree);\n    } else {\n      instance.iterateExcludingSuccessors(propertyValue.tree);\n    }\n    return instance;\n  }\n  static walk<T extends TreeWalker, ArgTs extends unknown[]>(\n      this: {new(ast: SyntaxTree, ...args: ArgTs): T}, propertyValue: SyntaxTree, ...args: ArgTs): T {\n    const instance = new this(propertyValue, ...args);\n    if (propertyValue.tree.name === 'Declaration') {\n      instance.iterateDeclaration(propertyValue.tree);\n    } else {\n      instance.iterate(propertyValue.tree);\n    }\n    return instance;\n  }\n\n  iterateDeclaration(tree: CodeMirror.SyntaxNode): void {\n    if (tree.name !== 'Declaration') {\n      return;\n    }\n    if (this.enter(tree)) {\n      for (const sibling of ASTUtils.siblings(ASTUtils.declValue(tree))) {\n        sibling.cursor().iterate(this.enter.bind(this), this.leave.bind(this));\n      }\n    }\n    this.leave(tree);\n  }\n\n  protected iterate(tree: CodeMirror.SyntaxNode): void {\n    // Includes siblings of tree.\n    for (const sibling of ASTUtils.siblings(tree)) {\n      sibling.cursor().iterate(this.enter.bind(this), this.leave.bind(this));\n    }\n  }\n\n  protected iterateExcludingSuccessors(tree: CodeMirror.SyntaxNode): void {\n    tree.cursor().iterate(this.enter.bind(this), this.leave.bind(this));\n  }\n\n  protected enter(_node: SyntaxNodeRef): boolean {\n    return true;\n  }\n\n  protected leave(_node: SyntaxNodeRef): void {\n  }\n}\n\nexport interface Match {\n  readonly text: string;\n  readonly node: CodeMirror.SyntaxNode;\n  computedText?(): string|null;\n}\n\nexport interface Matcher<MatchT extends Match> {\n  readonly matchType: Platform.Constructor.ConstructorOrAbstract<MatchT>;\n  accepts(propertyName: string): boolean;\n  matches(node: CodeMirror.SyntaxNode, matching: BottomUpTreeMatching): MatchT|null;\n}\n\n// eslint-disable-next-line @typescript-eslint/explicit-function-return-type\nexport function matcherBase<MatchT extends Match>(matchT: Platform.Constructor.ConstructorOrAbstract<MatchT>) {\n  class MatcherBase implements Matcher<MatchT> {\n    matchType = matchT;\n    accepts(_propertyName: string): boolean {\n      return true;\n    }\n\n    matches(_node: CodeMirror.SyntaxNode, _matching: BottomUpTreeMatching): MatchT|null {\n      return null;\n    }\n  }\n  return MatcherBase;\n}\n\ntype MatchKey = Platform.Brand.Brand<string, 'MatchKey'>;\nexport class BottomUpTreeMatching extends TreeWalker {\n  readonly #matchers: Array<Matcher<Match>> = [];\n  readonly #matchedNodes = new Map<MatchKey, Match>();\n  readonly computedText: ComputedText;\n\n  #key(node: CodeMirror.SyntaxNode): MatchKey {\n    return `${node.from}:${node.to}` as MatchKey;\n  }\n\n  constructor(ast: SyntaxTree, matchers: Array<Matcher<Match>>) {\n    super(ast);\n    this.computedText = new ComputedText(ast.rule.substring(ast.tree.from));\n    this.#matchers.push(...matchers.filter(m => !ast.propertyName || m.accepts(ast.propertyName)));\n    this.#matchers.push(new TextMatcher());\n  }\n\n  protected override leave({node}: SyntaxNodeRef): void {\n    for (const matcher of this.#matchers) {\n      const match = matcher.matches(node, this);\n      if (match) {\n        this.computedText.push(match, node.from - this.ast.tree.from);\n        this.#matchedNodes.set(this.#key(node), match);\n        break;\n      }\n    }\n  }\n\n  matchText(node: CodeMirror.SyntaxNode): void {\n    const matchers = this.#matchers.splice(0);\n    this.#matchers.push(new TextMatcher());\n    this.iterateExcludingSuccessors(node);\n    this.#matchers.push(...matchers);\n  }\n\n  hasMatches(...matchTypes: Array<Platform.Constructor.Constructor<Match>>): boolean {\n    return Boolean(this.#matchedNodes.values().find(match => matchTypes.some(matchType => match instanceof matchType)));\n  }\n\n  getMatch(node: CodeMirror.SyntaxNode): Match|undefined {\n    return this.#matchedNodes.get(this.#key(node));\n  }\n\n  hasUnresolvedSubstitutions(node: CodeMirror.SyntaxNode): boolean {\n    return this.hasUnresolvedSubstitutionsRange(node, node);\n  }\n\n  hasUnresolvedSubstitutionsRange(from: CodeMirror.SyntaxNode, to: CodeMirror.SyntaxNode): boolean {\n    return this.computedText.hasUnresolvedSubstitutions(from.from - this.ast.tree.from, to.to - this.ast.tree.from);\n  }\n\n  getComputedText(node: CodeMirror.SyntaxNode, substitutionHook?: (match: Match) => string | null): string {\n    return this.getComputedTextRange(node, node, substitutionHook);\n  }\n\n  getLonghandValuesCount(): number {\n    const [from, to] = ASTUtils.range(ASTUtils.siblings(ASTUtils.declValue(this.ast.tree)));\n    if (!from || !to) {\n      return 0;\n    }\n    return this.computedText.countTopLevelValues(from.from - this.ast.tree.from, to.to - this.ast.tree.from);\n  }\n\n  getComputedLonghandName(to: CodeMirror.SyntaxNode): number {\n    const from = ASTUtils.declValue(this.ast.tree) ?? this.ast.tree;\n    return this.computedText.countTopLevelValues(from.from - this.ast.tree.from, to.from - this.ast.tree.from);\n  }\n\n  getComputedPropertyValueText(substitutionHook?: (match: Match) => string | null): string {\n    const [from, to] = ASTUtils.range(ASTUtils.siblings(ASTUtils.declValue(this.ast.tree)));\n    return this.getComputedTextRange(from ?? this.ast.tree, to ?? this.ast.tree, substitutionHook);\n  }\n\n  getComputedTextRange(\n      from: CodeMirror.SyntaxNode|undefined, to: CodeMirror.SyntaxNode|undefined,\n      substitutionHook?: (match: Match) => string | null): string {\n    if (!from || !to) {\n      return '';\n    }\n    return this.computedText.get(from.from - this.ast.tree.from, to.to - this.ast.tree.from, substitutionHook);\n  }\n}\n\ntype MatchWithComputedText = Match&{computedText: NonNullable<Match['computedText']>};\nclass ComputedTextChunk {\n  #cachedComputedText: string|null = null;\n  #topLevelValueCount: number|null = null;\n  constructor(readonly match: MatchWithComputedText, readonly offset: number) {\n  }\n\n  get end(): number {\n    return this.offset + this.length;\n  }\n\n  get length(): number {\n    return this.match.text.length;\n  }\n\n  get computedText(): string|null {\n    if (this.#cachedComputedText === null) {\n      this.#cachedComputedText = this.match.computedText();\n    }\n    return this.#cachedComputedText;\n  }\n\n  // If the match is top-level, i.e. is an outermost sub-expression in the property value, count the number of outermost\n  // sub-expressions after applying any potential substitutions.\n  get topLevelValueCount(): number {\n    if (this.match.node.parent?.name !== 'Declaration') {\n      // Not a top-level match.\n      return 0;\n    }\n    const computedText = this.computedText;\n    if (computedText === '') {\n      // Substitutions elided the match altogether.\n      return 0;\n    }\n    if (this.#topLevelValueCount === null) {\n      // computedText may be null, in which case the match text was not replaced.\n      this.#topLevelValueCount =\n          ASTUtils\n              .siblings(ASTUtils.declValue(tokenizeDeclaration('--p', computedText ?? this.match.text)?.tree ?? null))\n              .length;\n    }\n    return this.#topLevelValueCount;\n  }\n}\n\n/**\n * This class constructs the \"computed\" text from the input property text, i.e., it will strip comments and substitute\n * var() functions if possible. It's intended for use during the bottom-up tree matching process. The original text is\n * not modified. Instead, computed text slices are produced on the fly. During bottom-up matching, the sequence of\n * top-level comments and var() matches will be recorded. This produces an ordered sequence of text pieces that need to\n * be substituted into the original text. When a computed text slice is requested, it is generated by piecing together\n * original and computed slices as required.\n **/\nexport class ComputedText {\n  readonly #chunks: ComputedTextChunk[] = [];\n  readonly text: string;\n  readonly #topLevelValueCounts = new Map<string, number>();\n\n  #sorted = true;\n  constructor(text: string) {\n    this.text = text;\n  }\n\n  clear(): void {\n    this.#chunks.splice(0);\n    this.#topLevelValueCounts.clear();\n  }\n\n  get chunkCount(): number {\n    return this.#chunks.length;\n  }\n\n  #sortIfNecessary(): void {\n    if (this.#sorted) {\n      return;\n    }\n    // Sort intervals by offset, with longer intervals first if the offset is identical.\n    this.#chunks.sort((a, b) => {\n      if (a.offset < b.offset) {\n        return -1;\n      }\n      if (b.offset < a.offset) {\n        return 1;\n      }\n      if (a.end > b.end) {\n        return -1;\n      }\n      if (a.end < b.end) {\n        return 1;\n      }\n      return 0;\n    });\n    this.#sorted = true;\n  }\n\n  // Add another substitutable match. The match will either be appended to the list of existing matches or it will\n  // be substituted for the last match(es) if it encompasses them.\n  push(match: Match, offset: number): void {\n    function hasComputedText(match: Match): match is MatchWithComputedText {\n      return Boolean(match.computedText);\n    }\n    if (!hasComputedText(match) || offset < 0 || offset >= this.text.length) {\n      return;\n    }\n    const chunk = new ComputedTextChunk(match, offset);\n    if (chunk.end > this.text.length) {\n      return;\n    }\n    this.#sorted = false;\n    this.#chunks.push(chunk);\n  }\n\n  * #range(begin: number, end: number): Generator<ComputedTextChunk> {\n    this.#sortIfNecessary();\n    let i = this.#chunks.findIndex(c => c.offset >= begin);\n    while (i >= 0 && i < this.#chunks.length && this.#chunks[i].end > begin && begin < end) {\n      if (this.#chunks[i].end > end) {\n        i++;\n        continue;\n      }\n      yield this.#chunks[i];\n      begin = this.#chunks[i].end;\n      while (begin < end && i < this.#chunks.length && this.#chunks[i].offset < begin) {\n        i++;\n      }\n    }\n  }\n\n  hasUnresolvedSubstitutions(begin: number, end: number): boolean {\n    for (const chunk of this.#range(begin, end)) {\n      if (chunk.computedText === null) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  * #getPieces(begin: number, end: number): Generator<string|ComputedTextChunk> {\n    for (const chunk of this.#range(begin, end)) {\n      const piece = this.text.substring(begin, Math.min(chunk.offset, end));\n      yield piece;\n      if (end >= chunk.end) {\n        yield chunk;\n      }\n      begin = chunk.end;\n    }\n    if (begin < end) {\n      const piece = this.text.substring(begin, end);\n      yield piece;\n    }\n  }\n\n  // Get a slice of the computed text corresponding to the property text in the range [begin, end). The slice may not\n  // start within a substitution chunk, e.g., it's invalid to request the computed text for the property value text\n  // slice \"1px var(--\".\n  get(begin: number, end: number, substitutionHook?: (match: Match) => string | null): string {\n    const pieces: string[] = [];\n    const getText = (piece: string|ComputedTextChunk): string => {\n      if (typeof piece === 'string') {\n        return piece;\n      }\n      const substitution = substitutionHook?.(piece.match) ?? null;\n      if (substitution !== null) {\n        return getText(substitution);\n      }\n      return piece.computedText ?? piece.match.text;\n    };\n\n    for (const piece of this.#getPieces(begin, end)) {\n      const text = getText(piece);\n      if (text.length === 0) {\n        continue;\n      }\n      if (pieces.length > 0 && requiresSpace(pieces[pieces.length - 1], text)) {\n        pieces.push(' ');\n      }\n      pieces.push(text);\n    }\n    return pieces.join('');\n  }\n\n  #countTopLevelValuesInStringPiece(piece: string): number {\n    let count = this.#topLevelValueCounts.get(piece);\n    if (count === undefined) {\n      count = ASTUtils.siblings(ASTUtils.declValue(tokenizeDeclaration('--p', piece)?.tree ?? null)).length;\n      this.#topLevelValueCounts.set(piece, count);\n    }\n    return count;\n  }\n\n  countTopLevelValues(begin: number, end: number): number {\n    const pieces = Array.from(this.#getPieces(begin, end));\n    const counts = pieces.map(\n        chunk =>\n            (chunk instanceof ComputedTextChunk ? chunk.topLevelValueCount :\n                                                  this.#countTopLevelValuesInStringPiece(chunk)));\n    const count = counts.reduce((sum, v) => sum + v, 0);\n    return count;\n  }\n}\n\n/**\n * This function determines whether concatenating two pieces of text requires any spacing in between. For example, there\n * shouldn't be any space between 'var' and '(', but there should be a space between '1px' and 'solid'. The node\n * sequences that make up the pieces of text may contain non-text nodes/trees. Any such element in between the texts is\n * ignored for the spacing requirement.\n **/\nexport function requiresSpace(a: string, b: string): boolean;\nexport function requiresSpace(a: Node[], b: Node[]): boolean;\nexport function requiresSpace(a: Node[]|string|undefined, b: Node[]|string|undefined): boolean {\n  const tail = Array.isArray(a) ? a.findLast(node => node.textContent)?.textContent : a;\n  const head = Array.isArray(b) ? b.find(node => node.textContent)?.textContent : b;\n  const trailingChar = tail ? tail[tail.length - 1] : '';\n  const leadingChar = head ? head[0] : '';\n\n  const noSpaceAfter = ['', '(', '{', '}', ';', '['];\n  const noSpaceBefore = ['', '(', ')', ',', ':', '*', '{', ';', ']'];\n  return !/\\s/.test(trailingChar) && !/\\s/.test(leadingChar) && !noSpaceAfter.includes(trailingChar) &&\n      !noSpaceBefore.includes(leadingChar);\n}\n\nexport const CSSControlMap = Map<string, HTMLElement[]>;\nexport type CSSControlMap = Map<string, HTMLElement[]>;\nexport namespace ASTUtils {\n  export function siblings(node: CodeMirror.SyntaxNode|null): CodeMirror.SyntaxNode[] {\n    const result = [];\n    while (node) {\n      result.push(node);\n      node = node.nextSibling;\n    }\n    return result;\n  }\n\n  export function children(node: CodeMirror.SyntaxNode|null): CodeMirror.SyntaxNode[] {\n    return siblings(node?.firstChild ?? null);\n  }\n\n  export function range(node: CodeMirror.SyntaxNode[]):\n      [CodeMirror.SyntaxNode|undefined, CodeMirror.SyntaxNode|undefined] {\n    return [node[0], node[node.length - 1]];\n  }\n\n  export function declValue(node: CodeMirror.SyntaxNode|null): CodeMirror.SyntaxNode|null {\n    if (node?.name !== 'Declaration') {\n      return null;\n    }\n    return children(node).find(node => node.name === ':')?.nextSibling ?? null;\n  }\n\n  export function* stripComments(nodes: CodeMirror.SyntaxNode[]): Generator<CodeMirror.SyntaxNode> {\n    for (const node of nodes) {\n      if (node.type.name !== 'Comment') {\n        yield node;\n      }\n    }\n  }\n\n  export function split(nodes: CodeMirror.SyntaxNode[]): CodeMirror.SyntaxNode[][] {\n    const result = [];\n    let current = [];\n    for (const node of nodes) {\n      if (node.name === ',') {\n        result.push(current);\n        current = [];\n      } else {\n        current.push(node);\n      }\n    }\n    if (nodes.length > 0) {\n      result.push(current);\n    }\n    return result;\n  }\n\n  export function callArgs(node: CodeMirror.SyntaxNode|null): CodeMirror.SyntaxNode[][] {\n    const args = children(node?.getChild('ArgList') ?? null);\n    const openParen = args.splice(0, 1)[0];\n    const closingParen = args.pop();\n\n    if (openParen?.name !== '(' || closingParen?.name !== ')') {\n      return [];\n    }\n\n    return split(args);\n  }\n\n  export function equals(a: CodeMirror.SyntaxNode, b: CodeMirror.SyntaxNode): boolean {\n    return a.name === b.name && a.from === b.from && a.to === b.to;\n  }\n}\n\nfunction declaration(rule: string): CodeMirror.SyntaxNode|null {\n  const cssParser = CodeMirror.css.cssLanguage.parser;\n  return cssParser.parse(rule).topNode.getChild('RuleSet')?.getChild('Block')?.getChild('Declaration') ?? null;\n}\n\nexport function tokenizeDeclaration(propertyName: string, propertyValue: string): SyntaxTree|null {\n  const name = tokenizePropertyName(propertyName);\n  if (!name) {\n    return null;\n  }\n  const rule = `*{${name}: ${propertyValue};}`;\n  const decl = declaration(rule);\n  if (!decl || decl.type.isError) {\n    return null;\n  }\n\n  const childNodes = ASTUtils.children(decl);\n  if (childNodes.length < 2) {\n    return null;\n  }\n  const [varName, colon, tree] = childNodes;\n  if (!varName || varName.type.isError || !colon || colon.type.isError || tree?.type.isError) {\n    return null;\n  }\n\n  // It's possible that there are nodes following the declaration when there are comments or syntax errors. We want to\n  // render any comments, so pick up any trailing nodes following the declaration excluding the final semicolon and\n  // brace.\n  const trailingNodes = ASTUtils.siblings(decl).slice(1);\n  const [semicolon, brace] = trailingNodes.splice(trailingNodes.length - 2, 2);\n  if (semicolon?.name !== ';' && brace?.name !== '}') {\n    return null;\n  }\n\n  const ast = new SyntaxTree(propertyValue, rule, decl, name, trailingNodes);\n  if (ast.text(varName) !== name || colon.name !== ':') {\n    return null;\n  }\n  return ast;\n}\n\nexport function tokenizePropertyName(name: string): string|null {\n  const rule = `*{${name}: inherit;}`;\n  const decl = declaration(rule);\n  if (!decl || decl.type.isError) {\n    return null;\n  }\n\n  const propertyName = decl.getChild('PropertyName') ?? decl.getChild('VariableName');\n  if (!propertyName) {\n    return null;\n  }\n\n  return nodeText(propertyName, rule);\n}\n\nexport function matchDeclaration(name: string, value: string, matchers: Array<Matcher<Match>>): BottomUpTreeMatching|\n    null {\n  const ast = tokenizeDeclaration(name, value);\n  const matchedResult = ast && BottomUpTreeMatching.walk(ast, matchers);\n  ast?.trailingNodes.forEach(n => matchedResult?.matchText(n));\n  return matchedResult;\n}\n\nexport class TreeSearch extends TreeWalker {\n  #found: CodeMirror.SyntaxNode|null = null;\n  #predicate: (node: CodeMirror.SyntaxNode) => boolean;\n\n  constructor(ast: SyntaxTree, predicate: (node: CodeMirror.SyntaxNode) => boolean) {\n    super(ast);\n    this.#predicate = predicate;\n  }\n\n  protected override enter({node}: SyntaxNodeRef): boolean {\n    if (this.#found) {\n      return false;\n    }\n\n    if (this.#predicate(node)) {\n      this.#found = this.#found ?? node;\n      return false;\n    }\n    return true;\n  }\n\n  static find(ast: SyntaxTree, predicate: (node: CodeMirror.SyntaxNode) => boolean): CodeMirror.SyntaxNode|null {\n    return TreeSearch.walk(ast, predicate).#found;\n  }\n\n  static findAll(ast: SyntaxTree, predicate: (node: CodeMirror.SyntaxNode) => boolean): CodeMirror.SyntaxNode[] {\n    const foundNodes: CodeMirror.SyntaxNode[] = [];\n    TreeSearch.walk(ast, (node: CodeMirror.SyntaxNode) => {\n      if (predicate(node)) {\n        foundNodes.push(node);\n      }\n\n      return false;\n    });\n    return foundNodes;\n  }\n}\n", "// Copyright 2023 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n/* eslint-disable @devtools/no-imperative-dom-api */\n\nimport * as Common from '../../core/common/common.js';\nimport type * as Platform from '../../core/platform/platform.js';\nimport type * as CodeMirror from '../../third_party/codemirror.next/codemirror.next.js';\n\nimport type {CSSMatchedStyles, CSSValueSource, CSSVariableValue} from './CSSMatchedStyles.js';\nimport {\n  CSSMetadata,\n  cssMetadata,\n  type CSSWideKeyword,\n  CubicBezierKeywordValues,\n} from './CSSMetadata.js';\nimport type {CSSProperty} from './CSSProperty.js';\nimport {\n  ASTUtils,\n  type BottomUpTreeMatching,\n  type Match,\n  matchDeclaration,\n  matcherBase,\n  type SyntaxTree,\n  tokenizeDeclaration\n} from './CSSPropertyParser.js';\nimport type {CSSStyleDeclaration} from './CSSStyleDeclaration.js';\n\nexport class BaseVariableMatch implements Match {\n  constructor(\n      readonly text: string,\n      readonly node: CodeMirror.SyntaxNode,\n      readonly name: string,\n      readonly fallback: CodeMirror.SyntaxNode[]|undefined,\n      readonly matching: BottomUpTreeMatching,\n      readonly computedTextCallback: (match: BaseVariableMatch, matching: BottomUpTreeMatching) => string | null,\n  ) {\n  }\n\n  computedText(): string|null {\n    return this.computedTextCallback(this, this.matching);\n  }\n\n  fallbackValue(): string|null {\n    // Fallback can be missing but it can be also be empty: var(--v,)\n    if (!this.fallback) {\n      return null;\n    }\n    if (this.fallback.length === 0) {\n      return '';\n    }\n    if (this.matching.hasUnresolvedSubstitutionsRange(this.fallback[0], this.fallback[this.fallback.length - 1])) {\n      return null;\n    }\n    return this.matching.getComputedTextRange(this.fallback[0], this.fallback[this.fallback.length - 1]);\n  }\n}\n\n// This matcher provides matching for var() functions and basic computedText support. Computed text is resolved by a\n// callback. This matcher is intended to be used directly only in environments where CSSMatchedStyles is not available.\n// A more ergonomic version of this matcher exists in VariableMatcher, which uses CSSMatchedStyles to correctly resolve\n// variable references automatically.\n// clang-format off\nexport class BaseVariableMatcher extends matcherBase(BaseVariableMatch) {\n  // clang-format on\n  readonly #computedTextCallback: (match: BaseVariableMatch, matching: BottomUpTreeMatching) => string | null;\n  constructor(computedTextCallback: (match: BaseVariableMatch, matching: BottomUpTreeMatching) => string | null) {\n    super();\n    this.#computedTextCallback = computedTextCallback;\n  }\n\n  override matches(node: CodeMirror.SyntaxNode, matching: BottomUpTreeMatching): BaseVariableMatch|null {\n    const callee = node.getChild('Callee');\n    if (node.name !== 'CallExpression' || !callee || (matching.ast.text(callee) !== 'var')) {\n      return null;\n    }\n\n    const args = ASTUtils.callArgs(node).map(args => Array.from(ASTUtils.stripComments(args)));\n    if (args.length < 1 || args[0].length !== 1) {\n      return null;\n    }\n    const nameNode = args[0][0];\n    const fallback = args.length === 2 ? args[1] : undefined;\n\n    if (nameNode?.name !== 'VariableName') {\n      return null;\n    }\n\n    const varName = matching.ast.text(nameNode);\n    if (!varName.startsWith('--')) {\n      return null;\n    }\n\n    return new BaseVariableMatch(\n        matching.ast.text(node), node, varName, fallback, matching, this.#computedTextCallback);\n  }\n}\n\nexport class VariableMatch extends BaseVariableMatch {\n  constructor(\n      text: string,\n      node: CodeMirror.SyntaxNode,\n      name: string,\n      fallback: CodeMirror.SyntaxNode[]|undefined,\n      matching: BottomUpTreeMatching,\n      readonly matchedStyles: CSSMatchedStyles,\n      readonly style: CSSStyleDeclaration,\n  ) {\n    super(text, node, name, fallback, matching, () => this.resolveVariable()?.value ?? this.fallbackValue());\n  }\n\n  resolveVariable(): CSSVariableValue|null {\n    return this.matchedStyles.computeCSSVariable(this.style, this.name);\n  }\n}\n\n// clang-format off\nexport class VariableMatcher extends matcherBase(VariableMatch) {\n  // clang-format on\n  constructor(readonly matchedStyles: CSSMatchedStyles, readonly style: CSSStyleDeclaration) {\n    super();\n  }\n\n  override matches(node: CodeMirror.SyntaxNode, matching: BottomUpTreeMatching): VariableMatch|null {\n    const match = new BaseVariableMatcher(() => null).matches(node, matching);\n    return match ?\n        new VariableMatch(\n            match.text, match.node, match.name, match.fallback, match.matching, this.matchedStyles, this.style) :\n        null;\n  }\n}\n\nexport class AttributeMatch extends BaseVariableMatch {\n  constructor(\n      text: string,\n      node: CodeMirror.SyntaxNode,\n      name: string,\n      fallback: CodeMirror.SyntaxNode[]|undefined,\n      matching: BottomUpTreeMatching,\n      readonly type: string|null,\n      readonly isCSSTokens: boolean,\n      readonly isValidType: boolean,\n      readonly rawValue: string|null,\n      readonly substitutionText: string|null,\n      readonly matchedStyles: CSSMatchedStyles,\n      readonly style: CSSStyleDeclaration,\n      computedTextCallback: (match: AttributeMatch, matching: BottomUpTreeMatching) => string | null,\n  ) {\n    super(text, node, name, fallback, matching, (_, matching) => computedTextCallback(this, matching));\n  }\n\n  rawAttributeValue(): string|null {\n    return this.rawValue;\n  }\n\n  cssType(): string {\n    return this.type ?? RAW_STRING_TYPE;\n  }\n\n  resolveAttributeValue(): string|null {\n    return this.matchedStyles.computeAttribute(\n        this.style, this.name, {type: this.cssType(), isCSSTokens: this.isCSSTokens});\n  }\n}\n\nlet cssEvaluationElement: HTMLElement|null = null;\nfunction getCssEvaluationElement(): HTMLElement {\n  const id = 'css-evaluation-element';\n  if (!cssEvaluationElement) {\n    cssEvaluationElement = document.getElementById(id);\n    if (!cssEvaluationElement) {\n      cssEvaluationElement = document.createElement('div');\n      cssEvaluationElement.setAttribute('id', id);\n      cssEvaluationElement.setAttribute('style', 'hidden: true; --evaluation: attr(data-custom-expr type(*))');\n      document.body.appendChild(cssEvaluationElement);\n    }\n  }\n  return cssEvaluationElement;\n}\n\n/**\n * These functions use an element in the frontend to evaluate CSS. The advantage\n * of this is that it is synchronous and doesn't require a CDP method. The\n * disadvantage is it lacks context that would allow substitutions such as\n * `var()` and `calc()` to be resolved correctly, and if the user is doing\n * remote debugging there is a possibility that the CSS behavior is different\n * between the two browser versions. We use it for type checking after\n * substitutions (but not for actual evaluation) and for applying units.\n **/\nexport function localEvalCSS(value: string, type: string): string|null {\n  const element = getCssEvaluationElement();\n  element.setAttribute('data-value', value);\n  element.setAttribute('data-custom-expr', `attr(data-value ${type})`);\n  return element.computedStyleMap().get('--evaluation')?.toString() ?? null;\n}\n\n/**\n * It is important to establish whether a type is valid, because if it is not,\n * the current behavior of blink is to ignore the fallback and parse as a\n * raw string, returning '' if the attribute is not set.\n **/\nexport function isValidCSSType(type: string): boolean {\n  const element = getCssEvaluationElement();\n  element.setAttribute('data-custom-expr', `attr(data-nonexistent ${type}, \"good\")`);\n  return '\"good\"' === (element.computedStyleMap().get('--evaluation')?.toString() ?? null);\n}\n\nexport function defaultValueForCSSType(type: string|null): string|null {\n  const element = getCssEvaluationElement();\n  element.setAttribute('data-custom-expr', `attr(data-nonexistent ${type ?? ''})`);\n  return element.computedStyleMap().get('--evaluation')?.toString() ?? null;\n}\n\nexport const RAW_STRING_TYPE = 'raw-string';\n\n// This matcher provides matching for attr() functions and basic computedText support. Computed text is resolved by a\n// callback.\n// clang-format off\nexport class AttributeMatcher extends matcherBase(AttributeMatch) {\n  // clang-format on\n  constructor(\n      private readonly matchedStyles: CSSMatchedStyles,\n      private readonly style: CSSStyleDeclaration,\n      private readonly computedTextCallback?: (match: AttributeMatch, matching: BottomUpTreeMatching) => string | null,\n\n  ) {\n    super();\n  }\n\n  override matches(node: CodeMirror.SyntaxNode, matching: BottomUpTreeMatching): AttributeMatch|null {\n    const callee = node.getChild('Callee');\n    if (node.name !== 'CallExpression' || !callee || (matching.ast.text(callee) !== 'attr')) {\n      return null;\n    }\n\n    const args = ASTUtils.callArgs(node).map(args => Array.from(ASTUtils.stripComments(args)));\n    if (args.length < 1) {\n      return null;\n    }\n    const nameNode = args[0][0];\n\n    if (args[0].length < 1 || args[0].length > 2 || nameNode?.name !== 'ValueName') {\n      return null;\n    }\n\n    const fallback = args.length === 2 ? args[1] : undefined;\n    let type: string|null = null;\n    let isCSSTokens = false;\n    if (args[0].length === 2) {\n      const typeNode = args[0][1] as CodeMirror.SyntaxNode;\n      type = matching.ast.text(typeNode);\n      if (typeNode.name === 'CallExpression') {\n        if (matching.ast.text(typeNode.getChild('Callee')) !== 'type') {\n          return null;\n        }\n        isCSSTokens = true;\n      } else if (typeNode.name !== 'ValueName' && type !== '%') {\n        return null;\n      }\n    }\n\n    const isValidType = type === null || isValidCSSType(type);\n    isCSSTokens = isCSSTokens && isValidType;\n\n    const attrName = matching.ast.text(nameNode);\n\n    const rawValue = this.matchedStyles.rawAttributeValueFromStyle(this.style, attrName);\n    let substitutionText: string|null = null;\n    if (rawValue !== null) {\n      substitutionText = isCSSTokens ? rawValue : localEvalCSS(rawValue, type ?? RAW_STRING_TYPE);\n    } else if (!fallback) {\n      // In the case of unspecified type, there is a default value\n      substitutionText = defaultValueForCSSType(type);\n    }\n\n    return new AttributeMatch(\n        matching.ast.text(node), node, attrName, fallback, matching, type, isCSSTokens, isValidType, rawValue,\n        substitutionText, this.matchedStyles, this.style, this.computedTextCallback ?? defaultComputeText);\n\n    function defaultComputeText(match: AttributeMatch, _matching: BottomUpTreeMatching): string|null {\n      // Don't fall back if the type is invalid.\n      return match.resolveAttributeValue() ??\n          (isValidType ? match.fallbackValue() : defaultValueForCSSType(match.type));\n    }\n  }\n}\n\nexport class BinOpMatch implements Match {\n  constructor(readonly text: string, readonly node: CodeMirror.SyntaxNode) {\n  }\n}\n\n// clang-format off\nexport class BinOpMatcher extends matcherBase(BinOpMatch) {\n  // clang-format on\n  override accepts(): boolean {\n    return true;\n  }\n  override matches(node: CodeMirror.SyntaxNode, matching: BottomUpTreeMatching): BinOpMatch|null {\n    return node.name === 'BinaryExpression' ? new BinOpMatch(matching.ast.text(node), node) : null;\n  }\n}\n\nexport class TextMatch implements Match {\n  computedText?: () => string;\n  constructor(readonly text: string, readonly node: CodeMirror.SyntaxNode) {\n    if (node.name === 'Comment') {\n      this.computedText = () => '';\n    }\n  }\n  render(): Node[] {\n    const span = document.createElement('span');\n    span.appendChild(document.createTextNode(this.text));\n    return [span];\n  }\n}\n\n// clang-format off\nexport class TextMatcher extends matcherBase(TextMatch) {\n  // clang-format on\n  override accepts(): boolean {\n    return true;\n  }\n  override matches(node: CodeMirror.SyntaxNode, matching: BottomUpTreeMatching): TextMatch|null {\n    if (!node.firstChild || node.name === 'NumberLiteral' /* may have a Unit child */) {\n      // Leaf node, just emit text\n      const text = matching.ast.text(node);\n      if (text.length) {\n        return new TextMatch(text, node);\n      }\n    }\n    return null;\n  }\n}\n\nexport class AngleMatch implements Match {\n  constructor(readonly text: string, readonly node: CodeMirror.SyntaxNode) {\n  }\n\n  computedText(): string {\n    return this.text;\n  }\n}\n\n// clang-format off\nexport class AngleMatcher extends matcherBase(AngleMatch) {\n  // clang-format on\n  override accepts(propertyName: string): boolean {\n    return cssMetadata().isAngleAwareProperty(propertyName);\n  }\n  override matches(node: CodeMirror.SyntaxNode, matching: BottomUpTreeMatching): AngleMatch|null {\n    if (node.name !== 'NumberLiteral') {\n      return null;\n    }\n    const unit = node.getChild('Unit');\n    // TODO(crbug/1138628) handle unitless 0\n    if (!unit || !['deg', 'grad', 'rad', 'turn'].includes(matching.ast.text(unit))) {\n      return null;\n    }\n\n    return new AngleMatch(matching.ast.text(node), node);\n  }\n}\n\nfunction literalToNumber(node: CodeMirror.SyntaxNode, ast: SyntaxTree): number|null {\n  if (node.type.name !== 'NumberLiteral') {\n    return null;\n  }\n  const text = ast.text(node);\n\n  return Number(text.substring(0, text.length - ast.text(node.getChild('Unit')).length));\n}\n\nexport class ColorMixMatch implements Match {\n  constructor(\n      readonly text: string, readonly node: CodeMirror.SyntaxNode, readonly space: CodeMirror.SyntaxNode[],\n      readonly color1: CodeMirror.SyntaxNode[], readonly color2: CodeMirror.SyntaxNode[]) {\n  }\n}\n\n// clang-format off\nexport class ColorMixMatcher extends matcherBase(ColorMixMatch) {\n  // clang-format on\n  override accepts(propertyName: string): boolean {\n    return cssMetadata().isColorAwareProperty(propertyName);\n  }\n  override matches(node: CodeMirror.SyntaxNode, matching: BottomUpTreeMatching): ColorMixMatch|null {\n    if (node.name !== 'CallExpression' || matching.ast.text(node.getChild('Callee')) !== 'color-mix') {\n      return null;\n    }\n\n    const computedValueTree = tokenizeDeclaration('--property', matching.getComputedText(node));\n    if (!computedValueTree) {\n      return null;\n    }\n\n    const value = ASTUtils.declValue(computedValueTree.tree);\n    if (!value) {\n      return null;\n    }\n    const computedValueArgs = ASTUtils.callArgs(value);\n    if (computedValueArgs.length !== 3) {\n      return null;\n    }\n\n    const [space, color1, color2] = computedValueArgs;\n    // Verify that all arguments are there, and that the space starts with a literal `in`.\n    if (space.length < 2 || computedValueTree.text(ASTUtils.stripComments(space).next().value) !== 'in' ||\n        color1.length < 1 || color2.length < 1) {\n      return null;\n    }\n\n    // Verify there's at most one percentage value for each color.\n    const p1 =\n        color1.filter(n => n.type.name === 'NumberLiteral' && computedValueTree.text(n.getChild('Unit')) === '%');\n    const p2 =\n        color2.filter(n => n.type.name === 'NumberLiteral' && computedValueTree.text(n.getChild('Unit')) === '%');\n    if (p1.length > 1 || p2.length > 1) {\n      return null;\n    }\n\n    // Verify that if both colors carry percentages, they aren't both zero (which is an invalid property value).\n    if (p1[0] && p2[0] && (literalToNumber(p1[0], computedValueTree) ?? 0) === 0 &&\n        (literalToNumber(p2[0], computedValueTree) ?? 0) === 0) {\n      return null;\n    }\n\n    const args = ASTUtils.callArgs(node);\n    if (args.length !== 3) {\n      return null;\n    }\n    return new ColorMixMatch(matching.ast.text(node), node, args[0], args[1], args[2]);\n  }\n}\n\n// clang-format off\nexport class URLMatch implements Match {\n  constructor(\n      readonly url: Platform.DevToolsPath.UrlString, readonly text: string, readonly node: CodeMirror.SyntaxNode) {\n  }\n}\n\n// clang-format off\nexport class URLMatcher extends matcherBase(URLMatch) {\n  // clang-format on\n  override matches(node: CodeMirror.SyntaxNode, matching: BottomUpTreeMatching): URLMatch|null {\n    if (node.name !== 'CallLiteral') {\n      return null;\n    }\n    const callee = node.getChild('CallTag');\n    if (!callee || matching.ast.text(callee) !== 'url') {\n      return null;\n    }\n    const [, lparenNode, urlNode, rparenNode] = ASTUtils.siblings(callee);\n    if (matching.ast.text(lparenNode) !== '(' ||\n        (urlNode.name !== 'ParenthesizedContent' && urlNode.name !== 'StringLiteral') ||\n        matching.ast.text(rparenNode) !== ')') {\n      return null;\n    }\n\n    const text = matching.ast.text(urlNode);\n    const url = (urlNode.name === 'StringLiteral' ? text.substr(1, text.length - 2) : text.trim()) as\n        Platform.DevToolsPath.UrlString;\n    return new URLMatch(url, matching.ast.text(node), node);\n  }\n}\n\nexport class LinearGradientMatch implements Match {\n  constructor(readonly text: string, readonly node: CodeMirror.SyntaxNode) {\n  }\n}\n\n// clang-format off\nexport class LinearGradientMatcher extends matcherBase(LinearGradientMatch) {\n  // clang-format on\n  override matches(node: CodeMirror.SyntaxNode, matching: BottomUpTreeMatching): Match|null {\n    const text = matching.ast.text(node);\n    if (node.name === 'CallExpression' && matching.ast.text(node.getChild('Callee')) === 'linear-gradient') {\n      return new LinearGradientMatch(text, node);\n    }\n    return null;\n  }\n  override accepts(propertyName: string): boolean {\n    return ['background', 'background-image', '-webkit-mask-image'].includes(propertyName);\n  }\n}\n\ninterface RelativeColor {\n  colorSpace: Common.Color.Format;\n  baseColor: ColorMatch;\n}\n\nexport class ColorMatch implements Match {\n  computedText: (() => string | null)|undefined;\n  constructor(\n      readonly text: string, readonly node: CodeMirror.SyntaxNode,\n      private readonly currentColorCallback?: () => string | null, readonly relativeColor?: RelativeColor) {\n    this.computedText = currentColorCallback;\n  }\n}\n\n// clang-format off\nexport class ColorMatcher extends matcherBase(ColorMatch) {\n  constructor(private readonly currentColorCallback?: () => string|null) {\n      super();\n  }\n  // clang-format on\n  override accepts(propertyName: string): boolean {\n    return cssMetadata().isColorAwareProperty(propertyName);\n  }\n\n  override matches(node: CodeMirror.SyntaxNode, matching: BottomUpTreeMatching): ColorMatch|null {\n    const text = matching.ast.text(node);\n    if (node.name === 'ColorLiteral') {\n      return new ColorMatch(text, node);\n    }\n    if (node.name === 'ValueName') {\n      if (Common.Color.Nicknames.has(text)) {\n        return new ColorMatch(text, node);\n      }\n      if (text.toLowerCase() === 'currentcolor' && this.currentColorCallback) {\n        const callback = this.currentColorCallback;\n        return new ColorMatch(text, node, () => callback() ?? text);\n      }\n    }\n    if (node.name === 'CallExpression') {\n      const callee = node.getChild('Callee');\n      const colorFunc = matching.ast.text(callee).toLowerCase();\n      if (callee && colorFunc.match(/^(rgba?|hsla?|hwba?|lab|lch|oklab|oklch|color)$/)) {\n        const args = ASTUtils.children(node.getChild('ArgList'));\n        // args are the tokens for the parthesized expression following the function name, so in a well-formed case\n        // should at least contain the open and closing parens.\n        const colorText = args.length >= 2 ? matching.getComputedTextRange(args[0], args[args.length - 1]) : '';\n        // colorText holds the fully substituted parenthesized expression, so colorFunc + colorText is the color\n        // function call.\n        const isRelativeColorSyntax = Boolean(\n            colorText.match(/^[^)]*\\(\\W*from\\W+/) && !matching.hasUnresolvedSubstitutions(node) &&\n            CSS.supports('color', colorFunc + colorText));\n        if (!isRelativeColorSyntax) {\n          return new ColorMatch(text, node);\n        }\n\n        const tokenized = matchDeclaration('--color', '--colorFunc' + colorText, [new ColorMatcher()]);\n        if (!tokenized) {\n          return null;\n        }\n\n        const [colorArgs] = ASTUtils.callArgs(ASTUtils.declValue(tokenized.ast.tree));\n        // getComputedText already removed comments and such, so there must be 5 or 6 args:\n        // rgb(from red c0 c1 c2) or color(from yellow srgb c0 c1 c2)\n        // If any of the C is a calc expression that is a single root node. If the value contains an alpha channel that\n        // is parsed as a BinOp into c2.\n        if (colorArgs.length !== (colorFunc === 'color' ? 6 : 5)) {\n          return null;\n        }\n        const colorSpace = Common.Color.getFormat(colorFunc !== 'color' ? colorFunc : matching.ast.text(colorArgs[2]));\n        if (!colorSpace) {\n          return null;\n        }\n\n        const baseColor = tokenized.getMatch(colorArgs[1]);\n        if (tokenized.ast.text(colorArgs[0]) !== 'from' || !(baseColor instanceof ColorMatch)) {\n          return null;\n        }\n\n        return new ColorMatch(text, node, undefined, {colorSpace, baseColor});\n      }\n    }\n    return null;\n  }\n}\n\nfunction isRelativeColorChannelName(channel: string): channel is Common.Color.ColorChannel {\n  const maybeChannel = channel as Common.Color.ColorChannel;\n  switch (maybeChannel) {\n    case Common.Color.ColorChannel.A:\n    case Common.Color.ColorChannel.ALPHA:\n    case Common.Color.ColorChannel.B:\n    case Common.Color.ColorChannel.C:\n    case Common.Color.ColorChannel.G:\n    case Common.Color.ColorChannel.H:\n    case Common.Color.ColorChannel.L:\n    case Common.Color.ColorChannel.R:\n    case Common.Color.ColorChannel.S:\n    case Common.Color.ColorChannel.W:\n    case Common.Color.ColorChannel.X:\n    case Common.Color.ColorChannel.Y:\n    case Common.Color.ColorChannel.Z:\n      return true;\n  }\n  // This assignment catches missed values in the switch above.\n  const catchFallback: never = maybeChannel;  // eslint-disable-line @typescript-eslint/no-unused-vars\n  return false;\n}\n\nexport class RelativeColorChannelMatch implements Match {\n  constructor(readonly text: Common.Color.ColorChannel, readonly node: CodeMirror.SyntaxNode) {\n  }\n\n  getColorChannelValue(relativeColor: RelativeColor): number|null {\n    const color = Common.Color.parse(relativeColor.baseColor.text)?.as(relativeColor.colorSpace);\n    if (color instanceof Common.Color.ColorFunction) {\n      switch (this.text) {\n        case Common.Color.ColorChannel.R:\n          return color.isXYZ() ? null : color.p0;\n        case Common.Color.ColorChannel.G:\n          return color.isXYZ() ? null : color.p1;\n        case Common.Color.ColorChannel.B:\n          return color.isXYZ() ? null : color.p2;\n        case Common.Color.ColorChannel.X:\n          return color.isXYZ() ? color.p0 : null;\n        case Common.Color.ColorChannel.Y:\n          return color.isXYZ() ? color.p1 : null;\n        case Common.Color.ColorChannel.Z:\n          return color.isXYZ() ? color.p2 : null;\n        case Common.Color.ColorChannel.ALPHA:\n          return color.alpha;\n      }\n    } else if (color instanceof Common.Color.Legacy) {\n      switch (this.text) {\n        case Common.Color.ColorChannel.R:\n          return color.rgba()[0];\n        case Common.Color.ColorChannel.G:\n          return color.rgba()[1];\n        case Common.Color.ColorChannel.B:\n          return color.rgba()[2];\n        case Common.Color.ColorChannel.ALPHA:\n          return color.rgba()[3];\n      }\n    } else if (color && this.text in color) {\n      return color[this.text as keyof typeof color] as number;\n    }\n    return null;\n  }\n\n  computedText(): string {\n    return this.text;\n  }\n}\n\n// clang-format off\nexport class RelativeColorChannelMatcher extends matcherBase(RelativeColorChannelMatch) {\n  // clang-format on\n  override accepts(propertyName: string): boolean {\n    return cssMetadata().isColorAwareProperty(propertyName);\n  }\n\n  override matches(node: CodeMirror.SyntaxNode, matching: BottomUpTreeMatching): RelativeColorChannelMatch|null {\n    const text = matching.ast.text(node);\n    if (node.name === 'ValueName' && isRelativeColorChannelName(text)) {\n      return new RelativeColorChannelMatch(text, node);\n    }\n    return null;\n  }\n}\n\nexport class LightDarkColorMatch implements Match {\n  constructor(\n      readonly text: string, readonly node: CodeMirror.SyntaxNode, readonly light: CodeMirror.SyntaxNode[],\n      readonly dark: CodeMirror.SyntaxNode[], readonly style: CSSStyleDeclaration) {\n  }\n}\n\n// clang-format off\nexport class LightDarkColorMatcher extends matcherBase(LightDarkColorMatch) {\n  // clang-format on\n  constructor(readonly style: CSSStyleDeclaration) {\n    super();\n  }\n  override accepts(propertyName: string): boolean {\n    return cssMetadata().isColorAwareProperty(propertyName);\n  }\n\n  override matches(node: CodeMirror.SyntaxNode, matching: BottomUpTreeMatching): LightDarkColorMatch|null {\n    if (node.name !== 'CallExpression' || matching.ast.text(node.getChild('Callee')) !== 'light-dark') {\n      return null;\n    }\n    const args = ASTUtils.callArgs(node);\n    if (args.length !== 2 || args[0].length === 0 || args[1].length === 0) {\n      return null;\n    }\n    return new LightDarkColorMatch(matching.ast.text(node), node, args[0], args[1], this.style);\n  }\n}\n\nexport class AutoBaseMatch implements Match {\n  constructor(\n      readonly text: string, readonly node: CodeMirror.SyntaxNode, readonly auto: CodeMirror.SyntaxNode[],\n      readonly base: CodeMirror.SyntaxNode[]) {\n  }\n}\n\n// clang-format off\nexport class AutoBaseMatcher extends matcherBase(AutoBaseMatch) {\n  // clang-format on\n  override matches(node: CodeMirror.SyntaxNode, matching: BottomUpTreeMatching): AutoBaseMatch|null {\n    if (node.name !== 'CallExpression' || matching.ast.text(node.getChild('Callee')) !== '-internal-auto-base') {\n      return null;\n    }\n\n    const args = ASTUtils.callArgs(node);\n    if (args.length !== 2 || args[0].length === 0 || args[1].length === 0) {\n      return null;\n    }\n\n    return new AutoBaseMatch(matching.ast.text(node), node, args[0], args[1]);\n  }\n}\n\nexport const enum LinkableNameProperties {\n  ANIMATION = 'animation',\n  ANIMATION_NAME = 'animation-name',\n  FONT_PALETTE = 'font-palette',\n  POSITION_TRY_FALLBACKS = 'position-try-fallbacks',\n  POSITION_TRY = 'position-try',\n}\n\nconst enum AnimationLonghandPart {\n  DIRECTION = 'direction',\n  FILL_MODE = 'fill-mode',\n  PLAY_STATE = 'play-state',\n  ITERATION_COUNT = 'iteration-count',\n  EASING_FUNCTION = 'easing-function',\n}\n\nexport class LinkableNameMatch implements Match {\n  constructor(\n      readonly text: string, readonly node: CodeMirror.SyntaxNode, readonly propertyName: LinkableNameProperties) {\n  }\n}\n\n// clang-format off\nexport class LinkableNameMatcher extends matcherBase(LinkableNameMatch) {\n  // clang-format on\n  private static isLinkableNameProperty(propertyName: string): propertyName is LinkableNameProperties {\n    const names: string[] = [\n      LinkableNameProperties.ANIMATION,\n      LinkableNameProperties.ANIMATION_NAME,\n      LinkableNameProperties.FONT_PALETTE,\n      LinkableNameProperties.POSITION_TRY_FALLBACKS,\n      LinkableNameProperties.POSITION_TRY,\n    ];\n    return names.includes(propertyName);\n  }\n\n  static readonly identifierAnimationLonghandMap = new Map<string, AnimationLonghandPart>(\n      Object.entries({\n        normal: AnimationLonghandPart.DIRECTION,\n        alternate: AnimationLonghandPart.DIRECTION,\n        reverse: AnimationLonghandPart.DIRECTION,\n        'alternate-reverse': AnimationLonghandPart.DIRECTION,\n        none: AnimationLonghandPart.FILL_MODE,\n        forwards: AnimationLonghandPart.FILL_MODE,\n        backwards: AnimationLonghandPart.FILL_MODE,\n        both: AnimationLonghandPart.FILL_MODE,\n        running: AnimationLonghandPart.PLAY_STATE,\n        paused: AnimationLonghandPart.PLAY_STATE,\n        infinite: AnimationLonghandPart.ITERATION_COUNT,\n        linear: AnimationLonghandPart.EASING_FUNCTION,\n        ease: AnimationLonghandPart.EASING_FUNCTION,\n        'ease-in': AnimationLonghandPart.EASING_FUNCTION,\n        'ease-out': AnimationLonghandPart.EASING_FUNCTION,\n        'ease-in-out': AnimationLonghandPart.EASING_FUNCTION,\n        steps: AnimationLonghandPart.EASING_FUNCTION,\n        'step-start': AnimationLonghandPart.EASING_FUNCTION,\n        'step-end': AnimationLonghandPart.EASING_FUNCTION,\n      }),\n  );\n\n  private matchAnimationNameInShorthand(node: CodeMirror.SyntaxNode, matching: BottomUpTreeMatching): LinkableNameMatch|\n      null {\n    // Order is important within each animation definition for distinguishing <keyframes-name> values from other keywords.\n    // When parsing, keywords that are valid for properties other than animation-name\n    // whose values were not found earlier in the shorthand must be accepted for those properties rather than for animation-name.\n    // See the details in: https://w3c.github.io/csswg-drafts/css-animations/#animation.\n    const text = matching.ast.text(node);\n    // This is not a known identifier, so return it as `animation-name`.\n    if (!LinkableNameMatcher.identifierAnimationLonghandMap.has(text)) {\n      return new LinkableNameMatch(text, node, LinkableNameProperties.ANIMATION);\n    }\n    // There can be multiple `animation` declarations splitted by a comma.\n    // So, we find the declaration nodes that are related to the node argument.\n    const declarations = ASTUtils.split(ASTUtils.siblings(ASTUtils.declValue(matching.ast.tree)));\n    const currentDeclarationNodes = declarations.find(\n        declaration => declaration[0].from <= node.from && declaration[declaration.length - 1].to >= node.to);\n    if (!currentDeclarationNodes) {\n      return null;\n    }\n\n    // We reparse here until the node argument since a variable might be\n    // providing a meaningful value such as a timing keyword,\n    // that might change the meaning of the node.\n    const computedText = matching.getComputedTextRange(currentDeclarationNodes[0], node);\n    const tokenized = tokenizeDeclaration('--p', computedText);\n    if (!tokenized) {\n      return null;\n    }\n\n    const identifierCategory =\n        LinkableNameMatcher.identifierAnimationLonghandMap.get(text);  // The category of the node argument\n    for (let itNode: typeof tokenized.tree|null = ASTUtils.declValue(tokenized.tree); itNode?.nextSibling;\n         itNode = itNode.nextSibling) {\n      // Run through all the nodes that come before node argument\n      // and check whether a value in the same category is found.\n      // if so, it means our identifier is an `animation-name` keyword.\n      if (itNode.name === 'ValueName') {\n        const categoryValue = LinkableNameMatcher.identifierAnimationLonghandMap.get(tokenized.text(itNode));\n        if (categoryValue && categoryValue === identifierCategory) {\n          return new LinkableNameMatch(text, node, LinkableNameProperties.ANIMATION);\n        }\n      }\n    }\n\n    return null;\n  }\n\n  override matches(node: CodeMirror.SyntaxNode, matching: BottomUpTreeMatching): LinkableNameMatch|null {\n    const {propertyName} = matching.ast;\n    const text = matching.ast.text(node);\n    const parentNode = node.parent;\n    if (!parentNode) {\n      return null;\n    }\n\n    if (!(propertyName && LinkableNameMatcher.isLinkableNameProperty(propertyName))) {\n      return null;\n    }\n\n    const isParentADeclaration = parentNode.name === 'Declaration';\n    const isInsideVarCall = parentNode.name === 'ArgList' && parentNode.prevSibling?.name === 'Callee' &&\n        matching.ast.text(parentNode.prevSibling) === 'var';\n    const isAParentDeclarationOrVarCall = isParentADeclaration || isInsideVarCall;\n    // `position-try-fallbacks` and `position-try` only accept names with dashed ident.\n    const shouldMatchOnlyVariableName = propertyName === LinkableNameProperties.POSITION_TRY ||\n        propertyName === LinkableNameProperties.POSITION_TRY_FALLBACKS;\n    // We only mark top level nodes or nodes that are inside `var()` expressions as linkable names.\n    if (!propertyName || (node.name !== 'ValueName' && node.name !== 'VariableName') ||\n        !isAParentDeclarationOrVarCall || (node.name === 'ValueName' && shouldMatchOnlyVariableName)) {\n      return null;\n    }\n\n    if (propertyName === 'animation') {\n      return this.matchAnimationNameInShorthand(node, matching);\n    }\n\n    // The assertion here is safe since this matcher only runs for\n    // properties with names inside `LinkableNameProperties` (See the `accepts` function.)\n    return new LinkableNameMatch(text, node, propertyName as LinkableNameProperties);\n  }\n}\n\nexport class BezierMatch implements Match {\n  constructor(readonly text: string, readonly node: CodeMirror.SyntaxNode) {\n  }\n}\n\n// clang-format off\nexport class BezierMatcher extends matcherBase(BezierMatch) {\n  // clang-format on\n  override accepts(propertyName: string): boolean {\n    return cssMetadata().isBezierAwareProperty(propertyName);\n  }\n\n  override matches(node: CodeMirror.SyntaxNode, matching: BottomUpTreeMatching): Match|null {\n    const text = matching.ast.text(node);\n\n    const isCubicBezierKeyword = node.name === 'ValueName' && CubicBezierKeywordValues.has(text);\n    const isCubicBezierOrLinearFunction = node.name === 'CallExpression' &&\n        ['cubic-bezier', 'linear'].includes(matching.ast.text(node.getChild('Callee')));\n\n    if (!isCubicBezierKeyword && !isCubicBezierOrLinearFunction) {\n      return null;\n    }\n    return new BezierMatch(text, node);\n  }\n}\n\nexport class StringMatch implements Match {\n  constructor(readonly text: string, readonly node: CodeMirror.SyntaxNode) {\n  }\n}\n\n// clang-format off\nexport class StringMatcher extends matcherBase(StringMatch) {\n  // clang-format on\n  override matches(node: CodeMirror.SyntaxNode, matching: BottomUpTreeMatching): Match|null {\n    return node.name === 'StringLiteral' ? new StringMatch(matching.ast.text(node), node) : null;\n  }\n}\n\nexport const enum ShadowType {\n  BOX_SHADOW = 'boxShadow',\n  TEXT_SHADOW = 'textShadow',\n}\nexport class ShadowMatch implements Match {\n  constructor(readonly text: string, readonly node: CodeMirror.SyntaxNode, readonly shadowType: ShadowType) {\n  }\n}\n\n// clang-format off\nexport class ShadowMatcher extends matcherBase(ShadowMatch) {\n  // clang-format on\n  override accepts(propertyName: string): boolean {\n    return cssMetadata().isShadowProperty(propertyName);\n  }\n  override matches(node: CodeMirror.SyntaxNode, matching: BottomUpTreeMatching): ShadowMatch|null {\n    if (node.name !== 'Declaration') {\n      return null;\n    }\n    const valueNodes = ASTUtils.siblings(ASTUtils.declValue(node));\n    if (valueNodes.length === 0) {\n      return null;\n    }\n    const valueText = matching.ast.textRange(valueNodes[0], valueNodes[valueNodes.length - 1]);\n    return new ShadowMatch(\n        valueText, node, matching.ast.propertyName === 'text-shadow' ? ShadowType.TEXT_SHADOW : ShadowType.BOX_SHADOW);\n  }\n}\n\nexport class FontMatch implements Match {\n  constructor(readonly text: string, readonly node: CodeMirror.SyntaxNode) {\n  }\n}\n\n// clang-format off\nexport class FontMatcher extends matcherBase(FontMatch) {\n  // clang-format on\n  override accepts(propertyName: string): boolean {\n    return cssMetadata().isFontAwareProperty(propertyName);\n  }\n  override matches(node: CodeMirror.SyntaxNode, matching: BottomUpTreeMatching): Match|null {\n    if (node.name !== 'Declaration') {\n      return null;\n    }\n    const valueNodes = ASTUtils.siblings(ASTUtils.declValue(node));\n    if (valueNodes.length === 0) {\n      return null;\n    }\n    const validNodes = matching.ast.propertyName === 'font-family' ? ['ValueName', 'StringLiteral', 'Comment', ','] :\n                                                                     ['Comment', 'ValueName', 'NumberLiteral'];\n\n    if (valueNodes.some(node => !validNodes.includes(node.name))) {\n      return null;\n    }\n    const valueText = matching.ast.textRange(valueNodes[0], valueNodes[valueNodes.length - 1]);\n    return new FontMatch(valueText, node);\n  }\n}\n\nexport class LengthMatch implements Match {\n  constructor(readonly text: string, readonly node: CodeMirror.SyntaxNode, readonly unit: string) {\n  }\n}\n\n// clang-format off\nexport class LengthMatcher extends matcherBase(LengthMatch) {\n  // clang-format on\n  static readonly LENGTH_UNITS = new Set([\n    'em',    'ex',    'ch',  'cap', 'ic',    'lh',    'rem',   'rex',   'rch',  'rlh',  'ric', 'rcap', 'pt',    'pc',\n    'in',    'cm',    'mm',  'Q',   'vw',    'vh',    'vi',    'vb',    'vmin', 'vmax', 'dvw', 'dvh',  'dvi',   'dvb',\n    'dvmin', 'dvmax', 'svw', 'svh', 'svi',   'svb',   'svmin', 'svmax', 'lvw',  'lvh',  'lvi', 'lvb',  'lvmin', 'lvmax',\n    'cqw',   'cqh',   'cqi', 'cqb', 'cqmin', 'cqmax', 'cqem',  'cqlh',  'cqex', 'cqch', '%'\n  ]);\n  override matches(node: CodeMirror.SyntaxNode, matching: BottomUpTreeMatching): LengthMatch|null {\n    if (node.name !== 'NumberLiteral') {\n      return null;\n    }\n    const unit = matching.ast.text(node.getChild('Unit'));\n    if (!LengthMatcher.LENGTH_UNITS.has(unit)) {\n      return null;\n    }\n    const text = matching.ast.text(node);\n    return new LengthMatch(text, node, unit);\n  }\n}\n\nexport const enum SelectFunction {\n  MIN = 'min',\n  MAX = 'max',\n  CLAMP = 'clamp',\n}\nexport const enum ArithmeticFunction {\n  CALC = 'calc',\n  SIBLING_COUNT = 'sibling-count',\n  SIBLING_INDEX = 'sibling-index',\n}\ntype MathFunction = SelectFunction|ArithmeticFunction;\n\nexport class BaseFunctionMatch<T extends string> implements Match {\n  constructor(\n      readonly text: string, readonly node: CodeMirror.SyntaxNode, readonly func: T,\n      readonly args: CodeMirror.SyntaxNode[][]) {\n  }\n}\n\nexport class MathFunctionMatch extends BaseFunctionMatch<MathFunction> {\n  isArithmeticFunctionCall(): boolean {\n    const func = this.func as ArithmeticFunction;\n    switch (func) {\n      case ArithmeticFunction.CALC:\n      case ArithmeticFunction.SIBLING_COUNT:\n      case ArithmeticFunction.SIBLING_INDEX:\n        return true;\n    }\n    // This assignment catches missed values in the switch above.\n    const catchFallback: never = func;  // eslint-disable-line @typescript-eslint/no-unused-vars\n    return false;\n  }\n}\n\n// clang-format off\nexport class MathFunctionMatcher extends matcherBase(MathFunctionMatch) {\n  // clang-format on\n  private static getFunctionType(callee: string|null): MathFunction|null {\n    const maybeFunc = callee as MathFunction | null;\n    switch (maybeFunc) {\n      case null:\n      case SelectFunction.MIN:\n      case SelectFunction.MAX:\n      case SelectFunction.CLAMP:\n      case ArithmeticFunction.CALC:\n      case ArithmeticFunction.SIBLING_COUNT:\n      case ArithmeticFunction.SIBLING_INDEX:\n        return maybeFunc;\n    }\n    // This assignment catches missed values in the switch above.\n    const catchFallback: never = maybeFunc;  // eslint-disable-line @typescript-eslint/no-unused-vars\n    return null;\n  }\n\n  override matches(node: CodeMirror.SyntaxNode, matching: BottomUpTreeMatching): MathFunctionMatch|null {\n    if (node.name !== 'CallExpression') {\n      return null;\n    }\n    const callee = MathFunctionMatcher.getFunctionType(matching.ast.text(node.getChild('Callee')));\n    if (!callee) {\n      return null;\n    }\n    const args = ASTUtils.callArgs(node);\n    if (args.some(arg => arg.length === 0 || matching.hasUnresolvedSubstitutionsRange(arg[0], arg[arg.length - 1]))) {\n      return null;\n    }\n    const text = matching.ast.text(node);\n    const match = new MathFunctionMatch(text, node, callee, args);\n    if (!match.isArithmeticFunctionCall() && args.length === 0) {\n      return null;\n    }\n    return match;\n  }\n}\n\nexport class CustomFunctionMatch extends BaseFunctionMatch<string> {}\n\n// clang-format off\nexport class CustomFunctionMatcher extends matcherBase(CustomFunctionMatch) {\n  // clang-format on\n\n  override matches(node: CodeMirror.SyntaxNode, matching: BottomUpTreeMatching): CustomFunctionMatch|null {\n    if (node.name !== 'CallExpression') {\n      return null;\n    }\n    const callee = matching.ast.text(node.getChild('VariableName'));\n    if (!callee?.startsWith('--')) {\n      return null;\n    }\n    const args = ASTUtils.callArgs(node);\n    if (args.some(arg => arg.length === 0 || matching.hasUnresolvedSubstitutionsRange(arg[0], arg[arg.length - 1]))) {\n      return null;\n    }\n    const text = matching.ast.text(node);\n    return new CustomFunctionMatch(text, node, callee, args);\n  }\n}\n\nexport const enum LayoutType {\n  FLEX = 'flex',\n  GRID = 'grid',\n  GRID_LANES = 'grid-lanes',\n}\n\nexport class FlexGridGridLanesMatch implements Match {\n  constructor(readonly text: string, readonly node: CodeMirror.SyntaxNode, readonly layoutType: LayoutType) {\n  }\n}\n\n// clang-format off\nexport class FlexGridGridLanesMatcher extends matcherBase(FlexGridGridLanesMatch) {\n  // clang-format on\n  static readonly FLEX = ['flex', 'inline-flex', 'block flex', 'inline flex'];\n  static readonly GRID = ['grid', 'inline-grid', 'block grid', 'inline grid'];\n  static readonly GRID_LANES = ['grid-lanes', 'inline-grid-lanes', 'block grid-lanes', 'inline grid-lanes'];\n  override accepts(propertyName: string): boolean {\n    return propertyName === 'display';\n  }\n\n  override matches(node: CodeMirror.SyntaxNode, matching: BottomUpTreeMatching): FlexGridGridLanesMatch|null {\n    if (node.name !== 'Declaration') {\n      return null;\n    }\n    const valueNodes = ASTUtils.siblings(ASTUtils.declValue(node));\n    if (valueNodes.length < 1) {\n      return null;\n    }\n    const values = valueNodes.filter(node => node.name !== 'Important')\n                       .map(node => matching.getComputedText(node).trim())\n                       .filter(value => value);\n    const text = values.join(' ');\n    if (FlexGridGridLanesMatcher.FLEX.includes(text)) {\n      return new FlexGridGridLanesMatch(matching.ast.text(node), node, LayoutType.FLEX);\n    }\n    if (FlexGridGridLanesMatcher.GRID.includes(text)) {\n      return new FlexGridGridLanesMatch(matching.ast.text(node), node, LayoutType.GRID);\n    }\n    if (FlexGridGridLanesMatcher.GRID_LANES.includes(text)) {\n      return new FlexGridGridLanesMatch(matching.ast.text(node), node, LayoutType.GRID_LANES);\n    }\n    return null;\n  }\n}\n\nexport class GridTemplateMatch implements Match {\n  constructor(readonly text: string, readonly node: CodeMirror.SyntaxNode, readonly lines: CodeMirror.SyntaxNode[][]) {\n  }\n}\n\n// clang-format off\nexport class GridTemplateMatcher extends matcherBase(GridTemplateMatch) {\n  // clang-format on\n  override accepts(propertyName: string): boolean {\n    return cssMetadata().isGridAreaDefiningProperty(propertyName);\n  }\n  override matches(node: CodeMirror.SyntaxNode, matching: BottomUpTreeMatching): GridTemplateMatch|null {\n    if (node.name !== 'Declaration' || matching.hasUnresolvedSubstitutions(node)) {\n      return null;\n    }\n\n    const lines: CodeMirror.SyntaxNode[][] = [];\n    let curLine: CodeMirror.SyntaxNode[] = [];\n    // The following two states are designed to consume different cases of LineNames:\n    // 1. no LineNames in between StringLiterals;\n    // 2. one LineNames in between, which means the LineNames belongs to the current line;\n    // 3. two LineNames in between, which means the second LineNames starts a new line.\n    // `hasLeadingLineNames` tracks if the current row already starts with a LineNames and\n    // with no following StringLiteral yet, which means that the next StringLiteral should\n    // be appended to the same `curLine`, instead of creating a new line.\n    let hasLeadingLineNames = false;\n    // `needClosingLineNames` tracks if the current row can still consume an optional LineNames,\n    // which will decide if we should start a new line or not when a LineNames is encountered.\n    let needClosingLineNames = false;\n    /**\n     * Gather row definitions of [<line-names>? <string> <track-size>? <line-names>?], which\n     * be rendered into separate lines.\n     **/\n    function parseNodes(nodes: CodeMirror.SyntaxNode[], varParsingMode = false): void {\n      for (const curNode of nodes) {\n        if (matching.getMatch(curNode) instanceof BaseVariableMatch) {\n          const computedValueTree = tokenizeDeclaration('--property', matching.getComputedText(curNode));\n          if (!computedValueTree) {\n            continue;\n          }\n          const varNodes = ASTUtils.siblings(ASTUtils.declValue(computedValueTree.tree));\n          if (varNodes.length === 0) {\n            continue;\n          }\n          if ((varNodes[0].name === 'StringLiteral' && !hasLeadingLineNames) ||\n              (varNodes[0].name === 'BracketedValue' && !needClosingLineNames)) {\n            // The variable value either starts with a string, or with a line name that belongs to a new row;\n            // therefore we start a new line with the variable.\n            lines.push(curLine);\n            curLine = [curNode];\n          } else {\n            curLine.push(curNode);\n          }\n          // We parse computed nodes of this variable to correctly advance local states, but\n          // these computed nodes won't be added to the lines.\n          parseNodes(varNodes, true);\n        } else if (curNode.name === 'BinaryExpression') {\n          parseNodes(ASTUtils.siblings(curNode.firstChild));\n        } else if (curNode.name === 'StringLiteral') {\n          if (!varParsingMode) {\n            if (hasLeadingLineNames) {\n              curLine.push(curNode);\n            } else {\n              lines.push(curLine);\n              curLine = [curNode];\n            }\n          }\n          needClosingLineNames = true;\n          hasLeadingLineNames = false;\n        } else if (curNode.name === 'BracketedValue') {\n          if (!varParsingMode) {\n            if (needClosingLineNames) {\n              curLine.push(curNode);\n            } else {\n              lines.push(curLine);\n              curLine = [curNode];\n            }\n          }\n          hasLeadingLineNames = !needClosingLineNames;\n          needClosingLineNames = !needClosingLineNames;\n        } else if (!varParsingMode) {\n          curLine.push(curNode);\n        }\n      }\n    }\n\n    const valueNodes = ASTUtils.siblings(ASTUtils.declValue(node));\n    if (valueNodes.length === 0) {\n      return null;\n    }\n    parseNodes(valueNodes);\n    lines.push(curLine);\n    const valueText = matching.ast.textRange(valueNodes[0], valueNodes[valueNodes.length - 1]);\n    return new GridTemplateMatch(valueText, node, lines.filter(line => line.length > 0));\n  }\n}\nexport class AnchorFunctionMatch implements Match {\n  constructor(readonly text: string, readonly node: CodeMirror.SyntaxNode, readonly functionName: string|null) {\n  }\n}\n\n// clang-format off\nexport class AnchorFunctionMatcher extends matcherBase(AnchorFunctionMatch) {\n  // clang-format on\n  anchorFunction(node: CodeMirror.SyntaxNode, matching: BottomUpTreeMatching): string|null {\n    if (node.name !== 'CallExpression') {\n      return null;\n    }\n    const calleeText = matching.ast.text(node.getChild('Callee'));\n    if (calleeText === 'anchor' || calleeText === 'anchor-size') {\n      return calleeText;\n    }\n    return null;\n  }\n\n  override matches(node: CodeMirror.SyntaxNode, matching: BottomUpTreeMatching): AnchorFunctionMatch|null {\n    if (node.name === 'VariableName') {\n      // Double-dashed anchor reference to be rendered with a link to its matching anchor.\n      let parent = node.parent;\n      if (parent?.name !== 'ArgList') {\n        return null;\n      }\n      parent = parent.parent;\n      if (!parent || !this.anchorFunction(parent, matching)) {\n        return null;\n      }\n      return new AnchorFunctionMatch(matching.ast.text(node), node, null);\n    }\n    const calleeText = this.anchorFunction(node, matching);\n    if (!calleeText) {\n      return null;\n    }\n    // Match if the anchor/anchor-size function implicitly references an anchor.\n    const args = ASTUtils.children(node.getChild('ArgList'));\n    if (calleeText === 'anchor' && args.length <= 2) {\n      return null;\n    }\n    if (args.find(arg => arg.name === 'VariableName')) {\n      // We have an explicit anchor reference, no need to render swatch.\n      return null;\n    }\n    return new AnchorFunctionMatch(matching.ast.text(node), node, calleeText);\n  }\n}\n\n/** For linking `position-anchor: --anchor-name`. **/\nexport class PositionAnchorMatch implements Match {\n  constructor(readonly text: string, readonly matching: BottomUpTreeMatching, readonly node: CodeMirror.SyntaxNode) {\n  }\n}\n\n// clang-format off\nexport class PositionAnchorMatcher extends matcherBase(PositionAnchorMatch) {\n  // clang-format on\n  override accepts(propertyName: string): boolean {\n    return propertyName === 'position-anchor';\n  }\n\n  override matches(node: CodeMirror.SyntaxNode, matching: BottomUpTreeMatching): PositionAnchorMatch|null {\n    if (node.name !== 'VariableName') {\n      return null;\n    }\n\n    const dashedIdentifier = matching.ast.text(node);\n    return new PositionAnchorMatch(dashedIdentifier, matching, node);\n  }\n}\n\nexport class CSSWideKeywordMatch implements Match {\n  constructor(\n      readonly text: CSSWideKeyword, readonly node: CodeMirror.SyntaxNode, readonly property: CSSProperty,\n      readonly matchedStyles: CSSMatchedStyles) {\n  }\n  resolveProperty(): CSSValueSource|null {\n    return this.matchedStyles.resolveGlobalKeyword(this.property, this.text);\n  }\n  computedText?(): string|null {\n    return this.resolveProperty()?.value ?? null;\n  }\n}\n\n// clang-format off\nexport class CSSWideKeywordMatcher extends matcherBase(CSSWideKeywordMatch) {\n  // clang-format on\n  constructor(readonly property: CSSProperty, readonly matchedStyles: CSSMatchedStyles) {\n    super();\n  }\n\n  override matches(node: CodeMirror.SyntaxNode, matching: BottomUpTreeMatching): CSSWideKeywordMatch|null {\n    const parentNode = node.parent;\n    if (node.name !== 'ValueName' || parentNode?.name !== 'Declaration') {\n      return null;\n    }\n\n    if (Array.from(ASTUtils.stripComments(ASTUtils.siblings(ASTUtils.declValue(parentNode))))\n            .some(child => !ASTUtils.equals(child, node))) {\n      return null;\n    }\n\n    const text = matching.ast.text(node);\n    if (!CSSMetadata.isCSSWideKeyword(text)) {\n      return null;\n    }\n\n    return new CSSWideKeywordMatch(text, node, this.property, this.matchedStyles);\n  }\n}\n\nexport class PositionTryMatch implements Match {\n  constructor(\n      readonly text: string, readonly node: CodeMirror.SyntaxNode, readonly preamble: CodeMirror.SyntaxNode[],\n      readonly fallbacks: CodeMirror.SyntaxNode[][]) {\n  }\n}\n\n// clang-format off\nexport class PositionTryMatcher extends matcherBase(PositionTryMatch) {\n  // clang-format on\n  override accepts(propertyName: string): boolean {\n    return propertyName === LinkableNameProperties.POSITION_TRY ||\n        propertyName === LinkableNameProperties.POSITION_TRY_FALLBACKS;\n  }\n\n  override matches(node: CodeMirror.SyntaxNode, matching: BottomUpTreeMatching): PositionTryMatch|null {\n    if (node.name !== 'Declaration') {\n      return null;\n    }\n\n    let preamble: CodeMirror.SyntaxNode[] = [];\n    const valueNodes = ASTUtils.siblings(ASTUtils.declValue(node));\n    const fallbacks = ASTUtils.split(valueNodes);\n    if (matching.ast.propertyName === LinkableNameProperties.POSITION_TRY) {\n      for (const [i, n] of fallbacks[0].entries()) {\n        const computedText = matching.getComputedText(n);\n        if (CSSMetadata.isCSSWideKeyword(computedText)) {\n          return null;\n        }\n        if (CSSMetadata.isPositionTryOrderKeyword(computedText)) {\n          preamble = fallbacks[0].splice(0, i + 1);\n          break;\n        }\n      }\n    }\n\n    const valueText = matching.ast.textRange(valueNodes[0], valueNodes[valueNodes.length - 1]);\n    return new PositionTryMatch(valueText, node, preamble, fallbacks);\n  }\n}\n\nexport class EnvFunctionMatch implements Match {\n  constructor(\n      readonly text: string, readonly node: CodeMirror.SyntaxNode, readonly varName: string,\n      readonly value: string|null, readonly varNameIsValid: boolean) {\n  }\n\n  computedText(): string|null {\n    return this.value;\n  }\n}\n\n// clang-format off\nexport class EnvFunctionMatcher extends matcherBase(EnvFunctionMatch) {\n  // clang-format on\n  constructor(readonly matchedStyles: CSSMatchedStyles) {\n    super();\n  }\n\n  override matches(node: CodeMirror.SyntaxNode, matching: BottomUpTreeMatching): EnvFunctionMatch|null {\n    if (node.name !== 'CallExpression' || matching.ast.text(node.getChild('Callee')) !== 'env') {\n      return null;\n    }\n\n    const [valueNodes, ...fallbackNodes] = ASTUtils.callArgs(node);\n    if (!valueNodes?.length) {\n      return null;\n    }\n\n    const fallbackValue =\n        fallbackNodes.length > 0 ? matching.getComputedTextRange(...ASTUtils.range(fallbackNodes.flat())) : undefined;\n    const varName = matching.getComputedTextRange(...ASTUtils.range(valueNodes)).trim();\n    const value = this.matchedStyles.environmentVariable(varName);\n\n    return new EnvFunctionMatch(matching.ast.text(node), node, varName, value ?? fallbackValue ?? null, Boolean(value));\n  }\n}\n", "// Copyright 2016 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as Protocol from '../../generated/protocol.js';\nimport * as TextUtils from '../../models/text_utils/text_utils.js';\nimport * as Platform from '../platform/platform.js';\n\nimport {CSSContainerQuery} from './CSSContainerQuery.js';\nimport {CSSLayer} from './CSSLayer.js';\nimport {CSSMedia} from './CSSMedia.js';\nimport type {CSSModel, Edit} from './CSSModel.js';\nimport {CSSScope} from './CSSScope.js';\nimport {CSSStartingStyle} from './CSSStartingStyle.js';\nimport {CSSStyleDeclaration, Type} from './CSSStyleDeclaration.js';\nimport type {CSSStyleSheetHeader} from './CSSStyleSheetHeader.js';\nimport {CSSSupports} from './CSSSupports.js';\n\nfunction styleSheetHeaderForRule(\n    cssModel: CSSModel, {styleSheetId}: {styleSheetId?: Protocol.DOM.StyleSheetId}): CSSStyleSheetHeader|null {\n  return styleSheetId && cssModel.styleSheetHeaderForId(styleSheetId) || null;\n}\n\nexport class CSSRule {\n  readonly cssModelInternal: CSSModel;\n  readonly origin: Protocol.CSS.StyleSheetOrigin;\n  readonly style: CSSStyleDeclaration;\n  readonly header: CSSStyleSheetHeader|null;\n  readonly treeScope: Protocol.DOM.BackendNodeId|undefined;\n\n  constructor(cssModel: CSSModel, payload: {\n    style: Protocol.CSS.CSSStyle,\n    origin: Protocol.CSS.StyleSheetOrigin,\n    originTreeScopeNodeId: Protocol.DOM.BackendNodeId|undefined,\n    header: CSSStyleSheetHeader|null,\n  }) {\n    this.header = payload.header;\n    this.cssModelInternal = cssModel;\n    this.origin = payload.origin;\n    this.treeScope = payload.originTreeScopeNodeId;\n    this.style = new CSSStyleDeclaration(this.cssModelInternal, this, payload.style, Type.Regular);\n  }\n\n  get sourceURL(): string|undefined {\n    return this.header?.sourceURL;\n  }\n\n  rebase(edit: Edit): void {\n    if (this.header?.id !== edit.styleSheetId) {\n      return;\n    }\n    this.style.rebase(edit);\n  }\n\n  resourceURL(): Platform.DevToolsPath.UrlString {\n    return this.header?.resourceURL() ?? Platform.DevToolsPath.EmptyUrlString;\n  }\n\n  isUserAgent(): boolean {\n    return this.origin === Protocol.CSS.StyleSheetOrigin.UserAgent;\n  }\n\n  isInjected(): boolean {\n    return this.origin === Protocol.CSS.StyleSheetOrigin.Injected;\n  }\n\n  isViaInspector(): boolean {\n    return this.origin === Protocol.CSS.StyleSheetOrigin.Inspector;\n  }\n\n  isRegular(): boolean {\n    return this.origin === Protocol.CSS.StyleSheetOrigin.Regular;\n  }\n\n  isKeyframeRule(): boolean {\n    return false;\n  }\n\n  cssModel(): CSSModel {\n    return this.cssModelInternal;\n  }\n}\n\nclass CSSValue {\n  text: string;\n  range?: TextUtils.TextRange.TextRange;\n  specificity?: Protocol.CSS.Specificity;\n  constructor(payload: Protocol.CSS.Value) {\n    this.text = payload.text;\n    if (payload.range) {\n      this.range = TextUtils.TextRange.TextRange.fromObject(payload.range);\n    }\n    if (payload.specificity) {\n      this.specificity = payload.specificity;\n    }\n  }\n\n  rebase(edit: Edit): void {\n    if (!this.range) {\n      return;\n    }\n    this.range = this.range.rebaseAfterTextEdit(edit.oldRange, edit.newRange);\n  }\n}\n\nexport class CSSStyleRule extends CSSRule {\n  selectors!: CSSValue[];\n  nestingSelectors?: string[];\n  media: CSSMedia[];\n  containerQueries: CSSContainerQuery[];\n  supports: CSSSupports[];\n  scopes: CSSScope[];\n  layers: CSSLayer[];\n  ruleTypes: Protocol.CSS.CSSRuleType[];\n  startingStyles: CSSStartingStyle[];\n  wasUsed: boolean;\n  constructor(cssModel: CSSModel, payload: Protocol.CSS.CSSRule, wasUsed?: boolean) {\n    super(cssModel, {\n      origin: payload.origin,\n      style: payload.style,\n      header: styleSheetHeaderForRule(cssModel, payload),\n      originTreeScopeNodeId: payload.originTreeScopeNodeId\n    });\n    this.reinitializeSelectors(payload.selectorList);\n    this.nestingSelectors = payload.nestingSelectors;\n    this.media = payload.media ? CSSMedia.parseMediaArrayPayload(cssModel, payload.media) : [];\n    this.containerQueries = payload.containerQueries ?\n        CSSContainerQuery.parseContainerQueriesPayload(cssModel, payload.containerQueries) :\n        [];\n    this.scopes = payload.scopes ? CSSScope.parseScopesPayload(cssModel, payload.scopes) : [];\n    this.supports = payload.supports ? CSSSupports.parseSupportsPayload(cssModel, payload.supports) : [];\n    this.layers = payload.layers ? CSSLayer.parseLayerPayload(cssModel, payload.layers) : [];\n    this.startingStyles =\n        payload.startingStyles ? CSSStartingStyle.parseStartingStylePayload(cssModel, payload.startingStyles) : [];\n    this.ruleTypes = payload.ruleTypes || [];\n    this.wasUsed = wasUsed || false;\n  }\n\n  static createDummyRule(cssModel: CSSModel, selectorText: string): CSSStyleRule {\n    const dummyPayload = {\n      selectorList: {\n        text: '',\n        selectors: [{text: selectorText, value: undefined}],\n      },\n      style: {\n        styleSheetId: '0' as Protocol.DOM.StyleSheetId,\n        range: new TextUtils.TextRange.TextRange(0, 0, 0, 0),\n        shorthandEntries: [],\n        cssProperties: [],\n      },\n      origin: Protocol.CSS.StyleSheetOrigin.Inspector,\n    };\n    return new CSSStyleRule(cssModel, (dummyPayload as Protocol.CSS.CSSRule));\n  }\n\n  private reinitializeSelectors(selectorList: Protocol.CSS.SelectorList): void {\n    this.selectors = [];\n    for (let i = 0; i < selectorList.selectors.length; ++i) {\n      this.selectors.push(new CSSValue(selectorList.selectors[i]));\n    }\n  }\n\n  setSelectorText(newSelector: string): Promise<boolean> {\n    const styleSheetId = this.header?.id;\n    if (!styleSheetId) {\n      throw new Error('No rule stylesheet id');\n    }\n    const range = this.selectorRange();\n    if (!range) {\n      throw new Error('Rule selector is not editable');\n    }\n    return this.cssModelInternal.setSelectorText(styleSheetId, range, newSelector);\n  }\n\n  selectorText(): string {\n    return this.selectors.map(selector => selector.text).join(', ');\n  }\n\n  selectorRange(): TextUtils.TextRange.TextRange|null {\n    // Nested group rules might not contain a selector.\n    // https://www.w3.org/TR/css-nesting-1/#conditionals\n    if (this.selectors.length === 0) {\n      return null;\n    }\n\n    const firstRange = this.selectors[0].range;\n    const lastRange = this.selectors[this.selectors.length - 1].range;\n    if (!firstRange || !lastRange) {\n      return null;\n    }\n    return new TextUtils.TextRange.TextRange(\n        firstRange.startLine, firstRange.startColumn, lastRange.endLine, lastRange.endColumn);\n  }\n\n  lineNumberInSource(selectorIndex: number): number {\n    const selector = this.selectors[selectorIndex];\n    if (!selector?.range || !this.header) {\n      return 0;\n    }\n    return this.header.lineNumberInSource(selector.range.startLine);\n  }\n\n  columnNumberInSource(selectorIndex: number): number|undefined {\n    const selector = this.selectors[selectorIndex];\n    if (!selector?.range || !this.header) {\n      return undefined;\n    }\n    return this.header.columnNumberInSource(selector.range.startLine, selector.range.startColumn);\n  }\n\n  override rebase(edit: Edit): void {\n    if (this.header?.id !== edit.styleSheetId) {\n      return;\n    }\n    const range = this.selectorRange();\n    if (range?.equal(edit.oldRange)) {\n      this.reinitializeSelectors((edit.payload as Protocol.CSS.SelectorList));\n    } else {\n      for (let i = 0; i < this.selectors.length; ++i) {\n        this.selectors[i].rebase(edit);\n      }\n    }\n    this.media.forEach(media => media.rebase(edit));\n    this.containerQueries.forEach(cq => cq.rebase(edit));\n    this.scopes.forEach(scope => scope.rebase(edit));\n    this.supports.forEach(supports => supports.rebase(edit));\n\n    super.rebase(edit);\n  }\n}\n\nexport class CSSPropertyRule extends CSSRule {\n  #name: CSSValue;\n  constructor(cssModel: CSSModel, payload: Protocol.CSS.CSSPropertyRule) {\n    super(cssModel, {\n      origin: payload.origin,\n      style: payload.style,\n      header: styleSheetHeaderForRule(cssModel, payload),\n      originTreeScopeNodeId: undefined,\n    });\n    this.#name = new CSSValue(payload.propertyName);\n  }\n\n  propertyName(): CSSValue {\n    return this.#name;\n  }\n\n  initialValue(): string|null {\n    return this.style.hasActiveProperty('initial-value') ? this.style.getPropertyValue('initial-value') : null;\n  }\n\n  syntax(): string {\n    return this.style.getPropertyValue('syntax');\n  }\n  inherits(): boolean {\n    return this.style.getPropertyValue('inherits') === 'true';\n  }\n  setPropertyName(newPropertyName: string): Promise<boolean> {\n    const styleSheetId = this.header?.id;\n    if (!styleSheetId) {\n      throw new Error('No rule stylesheet id');\n    }\n    const range = this.#name.range;\n    if (!range) {\n      throw new Error('Property name is not editable');\n    }\n    return this.cssModelInternal.setPropertyRulePropertyName(styleSheetId, range, newPropertyName);\n  }\n}\n\nexport class CSSAtRule extends CSSRule {\n  readonly #name: CSSValue|null;\n  readonly #type: string;\n  readonly #subsection: string|null;\n  constructor(cssModel: CSSModel, payload: Protocol.CSS.CSSAtRule) {\n    super(cssModel, {\n      origin: payload.origin,\n      style: payload.style,\n      header: styleSheetHeaderForRule(cssModel, payload),\n      originTreeScopeNodeId: undefined\n    });\n    this.#name = payload.name ? new CSSValue(payload.name) : null;\n    this.#type = payload.type;\n    this.#subsection = payload.subsection ?? null;\n  }\n\n  name(): CSSValue|null {\n    return this.#name;\n  }\n\n  type(): string {\n    return this.#type;\n  }\n\n  subsection(): string|null {\n    return this.#subsection;\n  }\n}\n\nexport class CSSKeyframesRule {\n  readonly #animationName: CSSValue;\n  readonly #keyframes: CSSKeyframeRule[];\n  constructor(cssModel: CSSModel, payload: Protocol.CSS.CSSKeyframesRule) {\n    this.#animationName = new CSSValue(payload.animationName);\n    this.#keyframes =\n        payload.keyframes.map(keyframeRule => new CSSKeyframeRule(cssModel, keyframeRule, this.#animationName.text));\n  }\n\n  name(): CSSValue {\n    return this.#animationName;\n  }\n\n  keyframes(): CSSKeyframeRule[] {\n    return this.#keyframes;\n  }\n}\n\nexport class CSSKeyframeRule extends CSSRule {\n  #keyText!: CSSValue;\n  #parentRuleName: string;\n  constructor(cssModel: CSSModel, payload: Protocol.CSS.CSSKeyframeRule, parentRuleName: string) {\n    super(cssModel, {\n      origin: payload.origin,\n      style: payload.style,\n      header: styleSheetHeaderForRule(cssModel, payload),\n      originTreeScopeNodeId: undefined\n    });\n    this.reinitializeKey(payload.keyText);\n    this.#parentRuleName = parentRuleName;\n  }\n\n  parentRuleName(): string {\n    return this.#parentRuleName;\n  }\n\n  key(): CSSValue {\n    return this.#keyText;\n  }\n\n  private reinitializeKey(payload: Protocol.CSS.Value): void {\n    this.#keyText = new CSSValue(payload);\n  }\n\n  override rebase(edit: Edit): void {\n    if (this.header?.id !== edit.styleSheetId || !this.#keyText.range) {\n      return;\n    }\n    if (edit.oldRange.equal(this.#keyText.range)) {\n      this.reinitializeKey((edit.payload as Protocol.CSS.Value));\n    } else {\n      this.#keyText.rebase(edit);\n    }\n\n    super.rebase(edit);\n  }\n\n  override isKeyframeRule(): boolean {\n    return true;\n  }\n\n  setKeyText(newKeyText: string): Promise<boolean> {\n    const styleSheetId = this.header?.id;\n    if (!styleSheetId) {\n      throw new Error('No rule stylesheet id');\n    }\n    const range = this.#keyText.range;\n    if (!range) {\n      throw new Error('Keyframe key is not editable');\n    }\n    return this.cssModelInternal.setKeyframeKey(styleSheetId, range, newKeyText);\n  }\n}\n\nexport class CSSPositionTryRule extends CSSRule {\n  readonly #name: CSSValue;\n  readonly #active: boolean;\n  constructor(cssModel: CSSModel, payload: Protocol.CSS.CSSPositionTryRule) {\n    super(cssModel, {\n      origin: payload.origin,\n      style: payload.style,\n      header: styleSheetHeaderForRule(cssModel, payload),\n      originTreeScopeNodeId: undefined\n    });\n    this.#name = new CSSValue(payload.name);\n    this.#active = payload.active;\n  }\n\n  name(): CSSValue {\n    return this.#name;\n  }\n\n  active(): boolean {\n    return this.#active;\n  }\n}\n\nexport interface CSSNestedStyleLeaf {\n  style: CSSStyleDeclaration;\n}\n\nexport type CSSNestedStyleCondition = {\n  children: CSSNestedStyle[],\n}&({media: CSSMedia}|{container: CSSContainerQuery}|{supports: CSSSupports});\n\nexport type CSSNestedStyle = CSSNestedStyleLeaf|CSSNestedStyleCondition;\n\nexport class CSSFunctionRule extends CSSRule {\n  readonly #name: CSSValue;\n  readonly #parameters: string[];\n  readonly #children: CSSNestedStyle[];\n  constructor(cssModel: CSSModel, payload: Protocol.CSS.CSSFunctionRule) {\n    super(cssModel, {\n      origin: payload.origin,\n      style: {cssProperties: [], shorthandEntries: []},\n      header: styleSheetHeaderForRule(cssModel, payload),\n      originTreeScopeNodeId: undefined\n    });\n    this.#name = new CSSValue(payload.name);\n    this.#parameters = payload.parameters.map(({name}) => name);\n    this.#children = this.protocolNodesToNestedStyles(payload.children);\n  }\n\n  functionName(): CSSValue {\n    return this.#name;\n  }\n\n  parameters(): string[] {\n    return this.#parameters;\n  }\n\n  children(): CSSNestedStyle[] {\n    return this.#children;\n  }\n\n  nameWithParameters(): string {\n    return `${this.functionName().text}(${this.parameters().join(', ')})`;\n  }\n\n  protocolNodesToNestedStyles(nodes: Protocol.CSS.CSSFunctionNode[]): CSSNestedStyle[] {\n    const result = [];\n    for (const node of nodes) {\n      const nestedStyle = this.protocolNodeToNestedStyle(node);\n      if (nestedStyle) {\n        result.push(nestedStyle);\n      }\n    }\n    return result;\n  }\n\n  protocolNodeToNestedStyle(node: Protocol.CSS.CSSFunctionNode): CSSNestedStyle|undefined {\n    if (node.style) {\n      return {style: new CSSStyleDeclaration(this.cssModelInternal, this, node.style, Type.Regular)};\n    }\n    if (node.condition) {\n      const children = this.protocolNodesToNestedStyles(node.condition.children);\n      if (node.condition.media) {\n        return {children, media: new CSSMedia(this.cssModelInternal, node.condition.media)};\n      }\n      if (node.condition.containerQueries) {\n        return {\n          children,\n          container: new CSSContainerQuery(this.cssModelInternal, node.condition.containerQueries),\n        };\n      }\n      if (node.condition.supports) {\n        return {\n          children,\n          supports: new CSSSupports(this.cssModelInternal, node.condition.supports),\n        };\n      }\n      console.error('A function rule condition must have a media, container, or supports');\n      return;\n    }\n    console.error('A function rule node must have a style or condition');\n    return;\n  }\n}\n", "// Copyright 2021 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport type * as Protocol from '../../generated/protocol.js';\nimport * as TextUtils from '../../models/text_utils/text_utils.js';\n\nimport type {CSSModel} from './CSSModel.js';\nimport {CSSQuery} from './CSSQuery.js';\nimport type {DOMNode} from './DOMModel.js';\n\nexport class CSSContainerQuery extends CSSQuery {\n  name?: string;\n  physicalAxes?: Protocol.DOM.PhysicalAxes;\n  logicalAxes?: Protocol.DOM.LogicalAxes;\n  queriesScrollState?: boolean;\n  queriesAnchored?: boolean;\n\n  static parseContainerQueriesPayload(cssModel: CSSModel, payload: Protocol.CSS.CSSContainerQuery[]):\n      CSSContainerQuery[] {\n    return payload.map(cq => new CSSContainerQuery(cssModel, cq));\n  }\n\n  constructor(cssModel: CSSModel, payload: Protocol.CSS.CSSContainerQuery) {\n    super(cssModel);\n    this.reinitialize(payload);\n  }\n\n  reinitialize(payload: Protocol.CSS.CSSContainerQuery): void {\n    this.text = payload.text;\n    this.range = payload.range ? TextUtils.TextRange.TextRange.fromObject(payload.range) : null;\n    this.styleSheetId = payload.styleSheetId;\n    this.name = payload.name;\n    this.physicalAxes = payload.physicalAxes;\n    this.logicalAxes = payload.logicalAxes;\n    this.queriesScrollState = payload.queriesScrollState;\n    this.queriesAnchored = payload.queriesAnchored;\n  }\n\n  active(): boolean {\n    return true;\n  }\n\n  async getContainerForNode(nodeId: Protocol.DOM.NodeId): Promise<CSSContainerQueryContainer|undefined> {\n    const containerNode = await this.cssModel.domModel().getContainerForNode(\n        nodeId, this.name, this.physicalAxes, this.logicalAxes, this.queriesScrollState, this.queriesAnchored);\n    if (!containerNode) {\n      return;\n    }\n    return new CSSContainerQueryContainer(containerNode);\n  }\n}\n\nexport class CSSContainerQueryContainer {\n  readonly containerNode: DOMNode;\n\n  constructor(containerNode: DOMNode) {\n    this.containerNode = containerNode;\n  }\n\n  async getContainerSizeDetails(): Promise<ContainerQueriedSizeDetails|undefined> {\n    const styles = await this.containerNode.domModel().cssModel().getComputedStyle(this.containerNode.id);\n    if (!styles) {\n      return;\n    }\n    const containerType = styles.get('container-type');\n    const writingMode = styles.get('writing-mode');\n    if (!containerType || !writingMode) {\n      return;\n    }\n\n    const queryAxis = getQueryAxisFromContainerType(`${containerType}`);\n    const physicalAxis = getPhysicalAxisFromQueryAxis(queryAxis, writingMode);\n    let width, height;\n    if (physicalAxis === PhysicalAxis.BOTH || physicalAxis === PhysicalAxis.HORIZONTAL) {\n      width = styles.get('width');\n    }\n    if (physicalAxis === PhysicalAxis.BOTH || physicalAxis === PhysicalAxis.VERTICAL) {\n      height = styles.get('height');\n    }\n\n    return {\n      queryAxis,\n      physicalAxis,\n      width,\n      height,\n    };\n  }\n}\n\nexport const getQueryAxisFromContainerType = (propertyValue: string): QueryAxis => {\n  const segments = propertyValue.split(' ');\n  let isInline = false;\n  for (const segment of segments) {\n    if (segment === 'size') {\n      return QueryAxis.BOTH;\n    }\n    isInline = isInline || segment === 'inline-size';\n  }\n  if (isInline) {\n    return QueryAxis.INLINE;\n  }\n  return QueryAxis.NONE;\n};\n\nexport const getPhysicalAxisFromQueryAxis = (queryAxis: QueryAxis, writingMode: string): PhysicalAxis => {\n  const isVerticalWritingMode = writingMode.startsWith('vertical');\n  switch (queryAxis) {\n    case QueryAxis.NONE:\n      return PhysicalAxis.NONE;\n    case QueryAxis.BOTH:\n      return PhysicalAxis.BOTH;\n    case QueryAxis.INLINE:\n      return isVerticalWritingMode ? PhysicalAxis.VERTICAL : PhysicalAxis.HORIZONTAL;\n    case QueryAxis.BLOCK:\n      return isVerticalWritingMode ? PhysicalAxis.HORIZONTAL : PhysicalAxis.VERTICAL;\n  }\n};\n\nexport interface ContainerQueriedSizeDetails {\n  queryAxis: QueryAxis;\n  physicalAxis: PhysicalAxis;\n  width?: string;\n  height?: string;\n}\n\nexport const enum QueryAxis {\n  NONE = '',\n  INLINE = 'inline-size',\n  BLOCK = 'block-size',\n  BOTH = 'size',\n}\n\nexport const enum PhysicalAxis {\n  NONE = '',\n  HORIZONTAL = 'Horizontal',\n  VERTICAL = 'Vertical',\n  BOTH = 'Both',\n}\n", "// Copyright 2021 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport type * as Protocol from '../../generated/protocol.js';\nimport type * as TextUtils from '../../models/text_utils/text_utils.js';\n\nimport {CSSLocation, type CSSModel, type Edit} from './CSSModel.js';\nimport type {CSSStyleSheetHeader} from './CSSStyleSheetHeader.js';\n\ntype CSSQueryPayload =\n    Protocol.CSS.CSSMedia|Protocol.CSS.CSSContainerQuery|Protocol.CSS.CSSSupports|Protocol.CSS.CSSScope;\n\nexport abstract class CSSQuery {\n  text = '';\n  range?: TextUtils.TextRange.TextRange|null;\n  styleSheetId?: Protocol.DOM.StyleSheetId;\n  protected cssModel: CSSModel;\n\n  constructor(cssModel: CSSModel) {\n    this.cssModel = cssModel;\n  }\n\n  protected abstract reinitialize(payload: CSSQueryPayload): void;\n\n  abstract active(): boolean;\n\n  rebase(edit: Edit): void {\n    if (this.styleSheetId !== edit.styleSheetId || !this.range) {\n      return;\n    }\n    if (edit.oldRange.equal(this.range)) {\n      this.reinitialize(edit.payload as CSSQueryPayload);\n    } else {\n      this.range = this.range.rebaseAfterTextEdit(edit.oldRange, edit.newRange);\n    }\n  }\n\n  equal(other: CSSQuery): boolean {\n    if (!this.styleSheetId || !this.range || !other.range) {\n      return false;\n    }\n    return this.styleSheetId === other.styleSheetId && this.range.equal(other.range);\n  }\n\n  lineNumberInSource(): number|undefined {\n    if (!this.range) {\n      return undefined;\n    }\n    return this.header()?.lineNumberInSource(this.range.startLine);\n  }\n\n  columnNumberInSource(): number|undefined {\n    if (!this.range) {\n      return undefined;\n    }\n    return this.header()?.columnNumberInSource(this.range.startLine, this.range.startColumn);\n  }\n\n  header(): CSSStyleSheetHeader|null {\n    return this.styleSheetId ? this.cssModel.styleSheetHeaderForId(this.styleSheetId) : null;\n  }\n\n  rawLocation(): CSSLocation|null {\n    const header = this.header();\n    if (!header || this.lineNumberInSource() === undefined) {\n      return null;\n    }\n    const lineNumber = Number(this.lineNumberInSource());\n    return new CSSLocation(header, lineNumber, this.columnNumberInSource());\n  }\n}\n", "// Copyright 2022 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport type * as Protocol from '../../generated/protocol.js';\nimport * as TextUtils from '../../models/text_utils/text_utils.js';\n\nimport type {CSSModel} from './CSSModel.js';\nimport {CSSQuery} from './CSSQuery.js';\n\nexport class CSSLayer extends CSSQuery {\n  static parseLayerPayload(cssModel: CSSModel, payload: Protocol.CSS.CSSLayer[]): CSSLayer[] {\n    return payload.map(supports => new CSSLayer(cssModel, supports));\n  }\n\n  constructor(cssModel: CSSModel, payload: Protocol.CSS.CSSLayer) {\n    super(cssModel);\n    this.reinitialize(payload);\n  }\n\n  reinitialize(payload: Protocol.CSS.CSSLayer): void {\n    this.text = payload.text;\n    this.range = payload.range ? TextUtils.TextRange.TextRange.fromObject(payload.range) : null;\n    this.styleSheetId = payload.styleSheetId;\n  }\n\n  active(): boolean {\n    return true;\n  }\n}\n", "// Copyright 2016 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport type * as Protocol from '../../generated/protocol.js';\nimport * as TextUtils from '../../models/text_utils/text_utils.js';\n\nimport type {CSSModel} from './CSSModel.js';\nimport {CSSQuery} from './CSSQuery.js';\n\nexport class CSSMediaQuery {\n  readonly #active: boolean;\n  readonly #expressions: CSSMediaQueryExpression[]|null;\n  constructor(payload: Protocol.CSS.MediaQuery) {\n    this.#active = payload.active;\n    this.#expressions = [];\n    for (let j = 0; j < payload.expressions.length; ++j) {\n      this.#expressions.push(CSSMediaQueryExpression.parsePayload(payload.expressions[j]));\n    }\n  }\n\n  static parsePayload(payload: Protocol.CSS.MediaQuery): CSSMediaQuery {\n    return new CSSMediaQuery(payload);\n  }\n\n  active(): boolean {\n    return this.#active;\n  }\n\n  expressions(): CSSMediaQueryExpression[]|null {\n    return this.#expressions;\n  }\n}\n\nexport class CSSMediaQueryExpression {\n  readonly #value: number;\n  readonly #unit: string;\n  readonly #feature: string;\n  readonly #valueRange: TextUtils.TextRange.TextRange|null;\n  readonly #computedLength: number|null;\n  constructor(payload: Protocol.CSS.MediaQueryExpression) {\n    this.#value = payload.value;\n    this.#unit = payload.unit;\n    this.#feature = payload.feature;\n    this.#valueRange = payload.valueRange ? TextUtils.TextRange.TextRange.fromObject(payload.valueRange) : null;\n    this.#computedLength = payload.computedLength || null;\n  }\n\n  static parsePayload(payload: Protocol.CSS.MediaQueryExpression): CSSMediaQueryExpression {\n    return new CSSMediaQueryExpression(payload);\n  }\n\n  value(): number {\n    return this.#value;\n  }\n\n  unit(): string {\n    return this.#unit;\n  }\n\n  feature(): string {\n    return this.#feature;\n  }\n\n  valueRange(): TextUtils.TextRange.TextRange|null {\n    return this.#valueRange;\n  }\n\n  computedLength(): number|null {\n    return this.#computedLength;\n  }\n}\n\nexport class CSSMedia extends CSSQuery {\n  source?: Protocol.CSS.CSSMediaSource;\n  sourceURL?: string;\n  mediaList?: CSSMediaQuery[]|null;\n\n  static parseMediaArrayPayload(cssModel: CSSModel, payload: Protocol.CSS.CSSMedia[]): CSSMedia[] {\n    return payload.map(mq => new CSSMedia(cssModel, mq));\n  }\n\n  constructor(cssModel: CSSModel, payload: Protocol.CSS.CSSMedia) {\n    super(cssModel);\n    this.reinitialize(payload);\n  }\n\n  reinitialize(payload: Protocol.CSS.CSSMedia): void {\n    this.text = payload.text;\n    this.source = payload.source;\n    this.sourceURL = payload.sourceURL || '';\n    this.range = payload.range ? TextUtils.TextRange.TextRange.fromObject(payload.range) : null;\n    this.styleSheetId = payload.styleSheetId;\n    this.mediaList = null;\n    if (payload.mediaList) {\n      this.mediaList = [];\n      for (let i = 0; i < payload.mediaList.length; ++i) {\n        this.mediaList.push(CSSMediaQuery.parsePayload(payload.mediaList[i]));\n      }\n    }\n  }\n\n  active(): boolean {\n    if (!this.mediaList) {\n      return true;\n    }\n    for (let i = 0; i < this.mediaList.length; ++i) {\n      if (this.mediaList[i].active()) {\n        return true;\n      }\n    }\n    return false;\n  }\n}\n\nexport const Source = {\n  LINKED_SHEET: 'linkedSheet',\n  INLINE_SHEET: 'inlineSheet',\n  MEDIA_RULE: 'mediaRule',\n  IMPORT_RULE: 'importRule',\n};\n", "// Copyright 2022 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport type * as Protocol from '../../generated/protocol.js';\nimport * as TextUtils from '../../models/text_utils/text_utils.js';\n\nimport type {CSSModel} from './CSSModel.js';\nimport {CSSQuery} from './CSSQuery.js';\n\nexport class CSSScope extends CSSQuery {\n  static parseScopesPayload(cssModel: CSSModel, payload: Protocol.CSS.CSSScope[]): CSSScope[] {\n    return payload.map(scope => new CSSScope(cssModel, scope));\n  }\n\n  constructor(cssModel: CSSModel, payload: Protocol.CSS.CSSScope) {\n    super(cssModel);\n    this.reinitialize(payload);\n  }\n\n  reinitialize(payload: Protocol.CSS.CSSScope): void {\n    this.text = payload.text;\n    this.range = payload.range ? TextUtils.TextRange.TextRange.fromObject(payload.range) : null;\n    this.styleSheetId = payload.styleSheetId;\n  }\n\n  active(): boolean {\n    return true;\n  }\n}\n", "// Copyright 2025 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport type * as Protocol from '../../generated/protocol.js';\nimport * as TextUtils from '../../models/text_utils/text_utils.js';\n\nimport type {CSSModel} from './CSSModel.js';\nimport {CSSQuery} from './CSSQuery.js';\n\nexport class CSSStartingStyle extends CSSQuery {\n  static parseStartingStylePayload(cssModel: CSSModel, payload: Protocol.CSS.CSSStartingStyle[]): CSSStartingStyle[] {\n    return payload.map(p => new CSSStartingStyle(cssModel, p));\n  }\n\n  constructor(cssModel: CSSModel, payload: Protocol.CSS.CSSStartingStyle) {\n    super(cssModel);\n    this.reinitialize(payload);\n  }\n\n  reinitialize(payload: Protocol.CSS.CSSStartingStyle): void {\n    this.range = payload.range ? TextUtils.TextRange.TextRange.fromObject(payload.range) : null;\n    this.styleSheetId = payload.styleSheetId;\n  }\n\n  active(): boolean {\n    return true;\n  }\n}\n", "// Copyright 2016 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport type * as Protocol from '../../generated/protocol.js';\nimport * as TextUtils from '../../models/text_utils/text_utils.js';\n\nimport {cssMetadata} from './CSSMetadata.js';\nimport type {CSSModel, Edit} from './CSSModel.js';\nimport {CSSProperty} from './CSSProperty.js';\nimport type {CSSRule} from './CSSRule.js';\nimport type {Target} from './Target.js';\n\nexport class CSSStyleDeclaration {\n  readonly #cssModel: CSSModel;\n  parentRule: CSSRule|null;\n  #allProperties: CSSProperty[] = [];\n  styleSheetId?: Protocol.DOM.StyleSheetId;\n  range: TextUtils.TextRange.TextRange|null = null;\n  cssText?: string;\n  #shorthandValues = new Map<string, string>();\n  #shorthandIsImportant = new Set<string>();\n  #activePropertyMap = new Map<string, CSSProperty>();\n  #leadingProperties: CSSProperty[]|null = null;\n  type: Type;\n  // For CSSStyles coming from animations,\n  // This holds the name of the animation.\n  #animationName?: string;\n  constructor(\n      cssModel: CSSModel, parentRule: CSSRule|null, payload: Protocol.CSS.CSSStyle, type: Type,\n      animationName?: string) {\n    this.#cssModel = cssModel;\n    this.parentRule = parentRule;\n    this.#reinitialize(payload);\n    this.type = type;\n    this.#animationName = animationName;\n  }\n\n  rebase(edit: Edit): void {\n    if (this.styleSheetId !== edit.styleSheetId || !this.range) {\n      return;\n    }\n    if (edit.oldRange.equal(this.range)) {\n      this.#reinitialize((edit.payload as Protocol.CSS.CSSStyle));\n    } else {\n      this.range = this.range.rebaseAfterTextEdit(edit.oldRange, edit.newRange);\n      for (let i = 0; i < this.#allProperties.length; ++i) {\n        this.#allProperties[i].rebase(edit);\n      }\n    }\n  }\n\n  animationName(): string|undefined {\n    return this.#animationName;\n  }\n\n  #reinitialize(payload: Protocol.CSS.CSSStyle): void {\n    this.styleSheetId = payload.styleSheetId;\n    this.range = payload.range ? TextUtils.TextRange.TextRange.fromObject(payload.range) : null;\n\n    const shorthandEntries = payload.shorthandEntries;\n    this.#shorthandValues = new Map();\n    this.#shorthandIsImportant = new Set();\n    for (let i = 0; i < shorthandEntries.length; ++i) {\n      this.#shorthandValues.set(shorthandEntries[i].name, shorthandEntries[i].value);\n      if (shorthandEntries[i].important) {\n        this.#shorthandIsImportant.add(shorthandEntries[i].name);\n      }\n    }\n\n    this.#allProperties = [];\n\n    if (payload.cssText && this.range) {\n      const longhands = [];\n      for (const cssProperty of payload.cssProperties) {\n        const range = cssProperty.range;\n        if (!range) {\n          continue;\n        }\n        const parsedProperty = CSSProperty.parsePayload(this, this.#allProperties.length, cssProperty);\n        this.#allProperties.push(parsedProperty);\n        for (const longhand of parsedProperty.getLonghandProperties()) {\n          longhands.push(longhand);\n        }\n      }\n      for (const longhand of longhands) {\n        longhand.index = this.#allProperties.length;\n        this.#allProperties.push(longhand);\n      }\n    } else {\n      for (const cssProperty of payload.cssProperties) {\n        this.#allProperties.push(CSSProperty.parsePayload(this, this.#allProperties.length, cssProperty));\n      }\n    }\n\n    this.#generateSyntheticPropertiesIfNeeded();\n    this.#computeInactiveProperties();\n\n    // TODO(changhaohan): verify if this #activePropertyMap is still necessary, or if it is\n    // providing different information against the activeness in #allProperties.\n    this.#activePropertyMap = new Map();\n    for (const property of this.#allProperties) {\n      if (!property.activeInStyle()) {\n        continue;\n      }\n      this.#activePropertyMap.set(property.name, property);\n    }\n\n    this.cssText = payload.cssText;\n    this.#leadingProperties = null;\n  }\n\n  #generateSyntheticPropertiesIfNeeded(): void {\n    if (this.range) {\n      return;\n    }\n\n    if (!this.#shorthandValues.size) {\n      return;\n    }\n\n    const propertiesSet = new Set<string>();\n    for (const property of this.#allProperties) {\n      propertiesSet.add(property.name);\n    }\n\n    const generatedProperties = [];\n    // For style-based properties, generate #shorthands with values when possible.\n    for (const property of this.#allProperties) {\n      // For style-based properties, try generating #shorthands.\n      const shorthands = cssMetadata().getShorthands(property.name) || [];\n      for (const shorthand of shorthands) {\n        if (propertiesSet.has(shorthand)) {\n          continue;\n        }  // There already is a shorthand this #longhand falls under.\n        const shorthandValue = this.#shorthandValues.get(shorthand);\n        if (!shorthandValue) {\n          continue;\n        }  // Never generate synthetic #shorthands when no value is available.\n\n        // Generate synthetic shorthand we have a value for.\n        const shorthandImportance = Boolean(this.#shorthandIsImportant.has(shorthand));\n        const shorthandProperty = new CSSProperty(\n            this, this.allProperties().length, shorthand, shorthandValue, shorthandImportance, false, true, false);\n        generatedProperties.push(shorthandProperty);\n        propertiesSet.add(shorthand);\n      }\n    }\n    this.#allProperties = this.#allProperties.concat(generatedProperties);\n  }\n\n  #computeLeadingProperties(): CSSProperty[] {\n    function propertyHasRange(property: CSSProperty): boolean {\n      return Boolean(property.range);\n    }\n\n    if (this.range) {\n      return this.#allProperties.filter(propertyHasRange);\n    }\n\n    const leadingProperties = [];\n    for (const property of this.#allProperties) {\n      const shorthands = cssMetadata().getShorthands(property.name) || [];\n      let belongToAnyShorthand = false;\n      for (const shorthand of shorthands) {\n        if (this.#shorthandValues.get(shorthand)) {\n          belongToAnyShorthand = true;\n          break;\n        }\n      }\n      if (!belongToAnyShorthand) {\n        leadingProperties.push(property);\n      }\n    }\n\n    return leadingProperties;\n  }\n\n  leadingProperties(): CSSProperty[] {\n    if (!this.#leadingProperties) {\n      this.#leadingProperties = this.#computeLeadingProperties();\n    }\n    return this.#leadingProperties;\n  }\n\n  target(): Target {\n    return this.#cssModel.target();\n  }\n\n  cssModel(): CSSModel {\n    return this.#cssModel;\n  }\n\n  #computeInactiveProperties(): void {\n    const activeProperties = new Map<string, CSSProperty>();\n    // The order of the properties are:\n    // 1. regular property, including shorthands\n    // 2. longhand components from shorthands, in the order of their shorthands.\n    const processedLonghands = new Set();\n    for (const property of this.#allProperties) {\n      const metadata = cssMetadata();\n      const canonicalName = metadata.canonicalPropertyName(property.name);\n      if (property.disabled || !property.parsedOk) {\n        if (!property.disabled && metadata.isCustomProperty(property.name)) {\n          // Variable declarations that aren't parsedOk still \"overload\" other previous active declarations.\n          activeProperties.get(canonicalName)?.setActive(false);\n          activeProperties.delete(canonicalName);\n        }\n        property.setActive(false);\n        continue;\n      }\n      if (processedLonghands.has(property)) {\n        continue;\n      }\n      for (const longhand of property.getLonghandProperties()) {\n        const activeLonghand = activeProperties.get(longhand.name);\n        if (!activeLonghand) {\n          activeProperties.set(longhand.name, longhand);\n        } else if (!activeLonghand.important || longhand.important) {\n          activeLonghand.setActive(false);\n          activeProperties.set(longhand.name, longhand);\n        } else {\n          longhand.setActive(false);\n        }\n        processedLonghands.add(longhand);\n      }\n\n      const activeProperty = activeProperties.get(canonicalName);\n      if (!activeProperty) {\n        activeProperties.set(canonicalName, property);\n      } else if (!activeProperty.important || property.important) {\n        activeProperty.setActive(false);\n        activeProperties.set(canonicalName, property);\n      } else {\n        property.setActive(false);\n      }\n    }\n  }\n\n  allProperties(): CSSProperty[] {\n    return this.#allProperties;\n  }\n\n  hasActiveProperty(name: string): boolean {\n    return this.#activePropertyMap.has(name);\n  }\n\n  getPropertyValue(name: string): string {\n    const property = this.#activePropertyMap.get(name);\n    return property ? property.value : '';\n  }\n\n  isPropertyImplicit(name: string): boolean {\n    const property = this.#activePropertyMap.get(name);\n    return property ? property.implicit : false;\n  }\n\n  propertyAt(index: number): CSSProperty|null {\n    return (index < this.allProperties().length) ? this.allProperties()[index] : null;\n  }\n\n  pastLastSourcePropertyIndex(): number {\n    for (let i = this.allProperties().length - 1; i >= 0; --i) {\n      if (this.allProperties()[i].range) {\n        return i + 1;\n      }\n    }\n    return 0;\n  }\n\n  #insertionRange(index: number): TextUtils.TextRange.TextRange {\n    const property = this.propertyAt(index);\n    if (property?.range) {\n      return property.range.collapseToStart();\n    }\n    if (!this.range) {\n      throw new Error('CSSStyleDeclaration.range is null');\n    }\n    return this.range.collapseToEnd();\n  }\n\n  newBlankProperty(index?: number): CSSProperty {\n    index = (typeof index === 'undefined') ? this.pastLastSourcePropertyIndex() : index;\n    const property = new CSSProperty(this, index, '', '', false, false, true, false, '', this.#insertionRange(index));\n    return property;\n  }\n\n  setText(text: string, majorChange: boolean): Promise<boolean> {\n    if (!this.range || !this.styleSheetId) {\n      return Promise.resolve(false);\n    }\n    return this.#cssModel.setStyleText(this.styleSheetId, this.range, text, majorChange);\n  }\n\n  insertPropertyAt(index: number, name: string, value: string, userCallback?: ((arg0: boolean) => void)): void {\n    void this.newBlankProperty(index).setText(name + ': ' + value + ';', false, true).then(userCallback);\n  }\n\n  appendProperty(name: string, value: string, userCallback?: ((arg0: boolean) => void)): void {\n    this.insertPropertyAt(this.allProperties().length, name, value, userCallback);\n  }\n}\n\nexport enum Type {\n  /* eslint-disable @typescript-eslint/naming-convention -- Used by web_tests. */\n  Regular = 'Regular',\n  Inline = 'Inline',\n  Attributes = 'Attributes',\n  Pseudo = 'Pseudo',  // This type is for style declarations generated by devtools\n  Transition = 'Transition',\n  Animation = 'Animation',\n  /* eslint-enable @typescript-eslint/naming-convention */\n}\n", "// Copyright 2022 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport type * as Protocol from '../../generated/protocol.js';\nimport * as TextUtils from '../../models/text_utils/text_utils.js';\n\nimport type {CSSModel} from './CSSModel.js';\nimport {CSSQuery} from './CSSQuery.js';\n\nexport class CSSSupports extends CSSQuery {\n  static parseSupportsPayload(cssModel: CSSModel, payload: Protocol.CSS.CSSSupports[]): CSSSupports[] {\n    return payload.map(supports => new CSSSupports(cssModel, supports));\n  }\n\n  #active = true;\n\n  constructor(cssModel: CSSModel, payload: Protocol.CSS.CSSSupports) {\n    super(cssModel);\n    this.reinitialize(payload);\n  }\n\n  reinitialize(payload: Protocol.CSS.CSSSupports): void {\n    this.text = payload.text;\n    this.range = payload.range ? TextUtils.TextRange.TextRange.fromObject(payload.range) : null;\n    this.styleSheetId = payload.styleSheetId;\n    this.#active = payload.active;\n  }\n\n  active(): boolean {\n    return this.#active;\n  }\n}\n", "// Copyright 2016 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport type * as Protocol from '../../generated/protocol.js';\nimport * as TextUtils from '../../models/text_utils/text_utils.js';\nimport * as Common from '../common/common.js';\nimport * as i18n from '../i18n/i18n.js';\nimport * as Platform from '../platform/platform.js';\n\nimport type {CSSModel} from './CSSModel.js';\nimport {DeferredDOMNode} from './DOMModel.js';\nimport type {FrameAssociated} from './FrameAssociated.js';\nimport type {PageResourceLoadInitiator} from './PageResourceLoader.js';\nimport {ResourceTreeModel} from './ResourceTreeModel.js';\nimport type {DebugId} from './SourceMap.js';\n\nconst UIStrings = {\n  /**\n   * @description Error message for when a CSS file can't be loaded\n   */\n  couldNotFindTheOriginalStyle: 'Could not find the original style sheet.',\n  /**\n   * @description Error message to display when a source CSS file could not be retrieved.\n   */\n  thereWasAnErrorRetrievingThe: 'There was an error retrieving the source styles.',\n} as const;\nconst str_ = i18n.i18n.registerUIStrings('core/sdk/CSSStyleSheetHeader.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\n\nexport class CSSStyleSheetHeader implements TextUtils.ContentProvider.ContentProvider, FrameAssociated {\n  #cssModel: CSSModel;\n  id: Protocol.DOM.StyleSheetId;\n  frameId: Protocol.Page.FrameId;\n  sourceURL: Platform.DevToolsPath.UrlString;\n  hasSourceURL: boolean;\n  origin: Protocol.CSS.StyleSheetOrigin;\n  title: string;\n  disabled: boolean;\n  isInline: boolean;\n  isMutable: boolean;\n  isConstructed: boolean;\n  startLine: number;\n  startColumn: number;\n  endLine: number;\n  endColumn: number;\n  contentLength: number;\n  ownerNode: DeferredDOMNode|undefined;\n  sourceMapURL: Platform.DevToolsPath.UrlString|undefined;\n  readonly loadingFailed: boolean;\n  #originalContentProvider: TextUtils.StaticContentProvider.StaticContentProvider|null;\n\n  constructor(cssModel: CSSModel, payload: Protocol.CSS.CSSStyleSheetHeader) {\n    this.#cssModel = cssModel;\n    this.id = payload.styleSheetId;\n    this.frameId = payload.frameId;\n    this.sourceURL = payload.sourceURL as Platform.DevToolsPath.UrlString;\n    this.hasSourceURL = Boolean(payload.hasSourceURL);\n    this.origin = payload.origin;\n    this.title = payload.title;\n    this.disabled = payload.disabled;\n    this.isInline = payload.isInline;\n    this.isMutable = payload.isMutable;\n    this.isConstructed = payload.isConstructed;\n    this.startLine = payload.startLine;\n    this.startColumn = payload.startColumn;\n    this.endLine = payload.endLine;\n    this.endColumn = payload.endColumn;\n    this.contentLength = payload.length;\n    if (payload.ownerNode) {\n      this.ownerNode = new DeferredDOMNode(cssModel.target(), payload.ownerNode);\n    }\n    this.sourceMapURL = payload.sourceMapURL as Platform.DevToolsPath.UrlString;\n    this.loadingFailed = payload.loadingFailed ?? false;\n    this.#originalContentProvider = null;\n  }\n\n  originalContentProvider(): TextUtils.ContentProvider.ContentProvider {\n    if (!this.#originalContentProvider) {\n      const lazyContent = (async(): Promise<TextUtils.ContentData.ContentDataOrError> => {\n        const originalText = await this.#cssModel.originalStyleSheetText(this);\n        if (originalText === null) {\n          return {error: i18nString(UIStrings.couldNotFindTheOriginalStyle)};\n        }\n        return new TextUtils.ContentData.ContentData(originalText, /* isBase64=*/ false, 'text/css');\n      });\n      this.#originalContentProvider =\n          new TextUtils.StaticContentProvider.StaticContentProvider(this.contentURL(), this.contentType(), lazyContent);\n    }\n    return this.#originalContentProvider;\n  }\n\n  setSourceMapURL(sourceMapURL?: Platform.DevToolsPath.UrlString): void {\n    this.sourceMapURL = sourceMapURL;\n  }\n\n  cssModel(): CSSModel {\n    return this.#cssModel;\n  }\n\n  isAnonymousInlineStyleSheet(): boolean {\n    return !this.resourceURL() && !this.#cssModel.sourceMapManager().sourceMapForClient(this);\n  }\n\n  isConstructedByNew(): boolean {\n    return this.isConstructed && this.sourceURL.length === 0;\n  }\n\n  resourceURL(): Platform.DevToolsPath.UrlString {\n    return this.isViaInspector() ? this.viaInspectorResourceURL() : this.sourceURL;\n  }\n\n  private getFrameURLPath(): string {\n    const model = this.#cssModel.target().model(ResourceTreeModel);\n    console.assert(Boolean(model));\n    if (!model) {\n      return '';\n    }\n    const frame = model.frameForId(this.frameId);\n    if (!frame) {\n      return '';\n    }\n    console.assert(Boolean(frame));\n    const parsedURL = new Common.ParsedURL.ParsedURL(frame.url);\n    let urlPath = parsedURL.host;\n    if (parsedURL.port) {\n      urlPath += ':' + parsedURL.port;\n    }\n    urlPath += parsedURL.folderPathComponents;\n    if (!urlPath.endsWith('/')) {\n      urlPath += '/';\n    }\n    return urlPath;\n  }\n\n  private viaInspectorResourceURL(): Platform.DevToolsPath.UrlString {\n    return `inspector://${this.getFrameURLPath()}inspector-stylesheet#${this.id}` as Platform.DevToolsPath.UrlString;\n  }\n\n  lineNumberInSource(lineNumberInStyleSheet: number): number {\n    return this.startLine + lineNumberInStyleSheet;\n  }\n\n  columnNumberInSource(lineNumberInStyleSheet: number, columnNumberInStyleSheet: number): number|undefined {\n    return (lineNumberInStyleSheet ? 0 : this.startColumn) + columnNumberInStyleSheet;\n  }\n\n  /**\n   * Checks whether the position is in this style sheet. Assumes that the\n   * position's columnNumber is consistent with line endings.\n   */\n  containsLocation(lineNumber: number, columnNumber: number): boolean {\n    const afterStart =\n        (lineNumber === this.startLine && columnNumber >= this.startColumn) || lineNumber > this.startLine;\n    const beforeEnd = lineNumber < this.endLine || (lineNumber === this.endLine && columnNumber <= this.endColumn);\n    return afterStart && beforeEnd;\n  }\n\n  contentURL(): Platform.DevToolsPath.UrlString {\n    return this.resourceURL();\n  }\n\n  contentType(): Common.ResourceType.ResourceType {\n    return Common.ResourceType.resourceTypes.Stylesheet;\n  }\n\n  async requestContentData(): Promise<TextUtils.ContentData.ContentDataOrError> {\n    const cssText = await this.#cssModel.getStyleSheetText(this.id);\n    if (cssText === null) {\n      return {error: i18nString(UIStrings.thereWasAnErrorRetrievingThe)};\n    }\n    return new TextUtils.ContentData.ContentData(cssText, /* isBase64=*/ false, 'text/css');\n  }\n\n  async searchInContent(query: string, caseSensitive: boolean, isRegex: boolean):\n      Promise<TextUtils.ContentProvider.SearchMatch[]> {\n    const contentData = await this.requestContentData();\n    return TextUtils.TextUtils.performSearchInContentData(contentData, query, caseSensitive, isRegex);\n  }\n\n  isViaInspector(): boolean {\n    return this.origin === 'inspector';\n  }\n\n  createPageResourceLoadInitiator(): PageResourceLoadInitiator {\n    return {\n      target: this.#cssModel.target(),\n      frameId: this.frameId,\n      initiatorUrl: this.hasSourceURL ? Platform.DevToolsPath.EmptyUrlString : this.sourceURL,\n    };\n  }\n\n  debugId(): DebugId|null {\n    return null;\n  }\n}\n", "// Copyright 2017 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as Common from '../common/common.js';\nimport * as Platform from '../platform/platform.js';\n\nimport type {FrameAssociated} from './FrameAssociated.js';\nimport {PageResourceLoader, type PageResourceLoadInitiator, type ResourceLoader} from './PageResourceLoader.js';\nimport {type DebugId, parseSourceMap, SourceMap, type SourceMapV3} from './SourceMap.js';\nimport {SourceMapCache} from './SourceMapCache.js';\nimport {type Target, Type} from './Target.js';\n\nexport type SourceMapFactory<T> =\n    (compiledURL: Platform.DevToolsPath.UrlString, sourceMappingURL: Platform.DevToolsPath.UrlString,\n     payload: SourceMapV3, client: T) => SourceMap;\n\nexport class SourceMapManager<T extends FrameAssociated> extends Common.ObjectWrapper.ObjectWrapper<EventTypes<T>> {\n  readonly #target: Target;\n  readonly #factory: SourceMapFactory<T>;\n  #isEnabled = true;\n  readonly #clientData = new Map<T, ClientData>();\n  readonly #sourceMaps = new Map<SourceMap, T>();\n  #attachingClient: T|null = null;\n\n  constructor(target: Target, factory?: SourceMapFactory<T>) {\n    super();\n\n    this.#target = target;\n    this.#factory =\n        factory ?? ((compiledURL, sourceMappingURL, payload) => new SourceMap(compiledURL, sourceMappingURL, payload));\n  }\n\n  setEnabled(isEnabled: boolean): void {\n    if (isEnabled === this.#isEnabled) {\n      return;\n    }\n\n    // We need this copy, because `this.#clientData` is getting modified\n    // in the loop body and trying to iterate over it at the same time\n    // leads to an infinite loop.\n    const clientData = [...this.#clientData.entries()];\n    for (const [client] of clientData) {\n      this.detachSourceMap(client);\n    }\n    this.#isEnabled = isEnabled;\n    for (const [client, {relativeSourceURL, relativeSourceMapURL}] of clientData) {\n      this.attachSourceMap(client, relativeSourceURL, relativeSourceMapURL);\n    }\n  }\n\n  private static getBaseUrl(target: Target|null): Platform.DevToolsPath.UrlString {\n    while (target && target.type() !== Type.FRAME) {\n      target = target.parentTarget();\n    }\n    return target?.inspectedURL() ?? Platform.DevToolsPath.EmptyUrlString;\n  }\n\n  static resolveRelativeSourceURL(target: Target|null, url: Platform.DevToolsPath.UrlString):\n      Platform.DevToolsPath.UrlString {\n    url = Common.ParsedURL.ParsedURL.completeURL(SourceMapManager.getBaseUrl(target), url) ?? url;\n    return url;\n  }\n\n  sourceMapForClient(client: T): SourceMap|undefined {\n    return this.#clientData.get(client)?.sourceMap;\n  }\n\n  // This method actively awaits the source map, if still loading.\n  sourceMapForClientPromise(client: T): Promise<SourceMap|undefined> {\n    const clientData = this.#clientData.get(client);\n    if (!clientData) {\n      return Promise.resolve(undefined);\n    }\n\n    return clientData.sourceMapPromise;\n  }\n\n  clientForSourceMap(sourceMap: SourceMap): T|undefined {\n    return this.#sourceMaps.get(sourceMap);\n  }\n\n  // TODO(bmeurer): We are lying about the type of |relativeSourceURL| here.\n  attachSourceMap(\n      client: T, relativeSourceURL: Platform.DevToolsPath.UrlString, relativeSourceMapURL: string|undefined): void {\n    if (this.#clientData.has(client)) {\n      throw new Error('SourceMap is already attached or being attached to client');\n    }\n    if (!relativeSourceMapURL) {\n      return;\n    }\n\n    let clientData: ClientData|null = {\n      relativeSourceURL,\n      relativeSourceMapURL,\n      sourceMap: undefined,\n      sourceMapPromise: Promise.resolve(undefined),\n    };\n    if (this.#isEnabled) {\n      // The `// #sourceURL=foo` can be a random string, but is generally an absolute path.\n      // Complete it to inspected page url for relative links.\n      const sourceURL = SourceMapManager.resolveRelativeSourceURL(this.#target, relativeSourceURL);\n      const sourceMapURL = Common.ParsedURL.ParsedURL.completeURL(sourceURL, relativeSourceMapURL);\n      if (sourceMapURL) {\n        if (this.#attachingClient) {\n          // This should not happen\n          console.error('Attaching source map may cancel previously attaching source map');\n        }\n        this.#attachingClient = client;\n        this.dispatchEventToListeners(Events.SourceMapWillAttach, {client});\n\n        if (this.#attachingClient === client) {\n          this.#attachingClient = null;\n          const initiator = client.createPageResourceLoadInitiator();\n          // TODO(crbug.com/458180550): Pass PageResourceLoader via constructor.\n          //     The reason we grab it here lazily from the context is that otherwise every\n          //     unit test using `createTarget` would need to set up a `PageResourceLoader`, as\n          //     CSSModel and DebuggerModel are autostarted by default, and they create a\n          //     SourceMapManager in their respective constructors.\n          const resourceLoader = this.#target.targetManager().context.get(PageResourceLoader);\n          clientData.sourceMapPromise =\n              loadSourceMap(resourceLoader, sourceMapURL, client.debugId(), initiator)\n                  .then(\n                      payload => {\n                        const sourceMap = this.#factory(sourceURL, sourceMapURL, payload, client);\n                        if (this.#clientData.get(client) === clientData) {\n                          clientData.sourceMap = sourceMap;\n                          this.#sourceMaps.set(sourceMap, client);\n                          this.dispatchEventToListeners(Events.SourceMapAttached, {client, sourceMap});\n                        }\n                        return sourceMap;\n                      },\n                      () => {\n                        if (this.#clientData.get(client) === clientData) {\n                          this.dispatchEventToListeners(Events.SourceMapFailedToAttach, {client});\n                        }\n                        return undefined;\n                      });\n        } else {\n          // Assume cancelAttachSourceMap was called.\n          if (this.#attachingClient) {\n            // This should not happen\n            console.error('Cancelling source map attach because another source map is attaching');\n          }\n          clientData = null;\n          this.dispatchEventToListeners(Events.SourceMapFailedToAttach, {client});\n        }\n      }\n    }\n    if (clientData) {\n      this.#clientData.set(client, clientData);\n    }\n  }\n\n  cancelAttachSourceMap(client: T): void {\n    if (client === this.#attachingClient) {\n      this.#attachingClient = null;\n      // This should not happen.\n    } else if (this.#attachingClient) {\n      console.error('cancel attach source map requested but a different source map was being attached');\n    } else {\n      console.error('cancel attach source map requested but no source map was being attached');\n    }\n  }\n\n  detachSourceMap(client: T): void {\n    const clientData = this.#clientData.get(client);\n    if (!clientData) {\n      return;\n    }\n    this.#clientData.delete(client);\n    if (!this.#isEnabled) {\n      return;\n    }\n    const {sourceMap} = clientData;\n    if (sourceMap) {\n      this.#sourceMaps.delete(sourceMap);\n      this.dispatchEventToListeners(Events.SourceMapDetached, {client, sourceMap});\n    } else {\n      this.dispatchEventToListeners(Events.SourceMapFailedToAttach, {client});\n    }\n  }\n\n  waitForSourceMapsProcessedForTest(): Promise<unknown> {\n    return Promise.all(this.#sourceMaps.keys().map(sourceMap => sourceMap.scopesFallbackPromiseForTest));\n  }\n}\n\nasync function loadSourceMap(\n    resourceLoader: ResourceLoader, url: Platform.DevToolsPath.UrlString, debugId: DebugId|null,\n    initiator: PageResourceLoadInitiator): Promise<SourceMapV3> {\n  try {\n    if (debugId) {\n      const cachedSourceMap = await SourceMapCache.instance().get(debugId);\n      if (cachedSourceMap) {\n        return cachedSourceMap;\n      }\n    }\n\n    const {content} = await resourceLoader.loadResource(url, initiator);\n    const sourceMap = parseSourceMap(content);\n    if ('debugId' in sourceMap && sourceMap.debugId) {\n      // In case something goes wrong with updating the cache, we still want to use the source map.\n      await SourceMapCache.instance().set(sourceMap.debugId as DebugId, sourceMap).catch();\n    }\n    return sourceMap;\n  } catch (cause) {\n    throw new Error(`Could not load content for ${url}: ${cause.message}`, {cause});\n  }\n}\n\nexport async function tryLoadSourceMap(\n    resourceLoader: ResourceLoader, url: Platform.DevToolsPath.UrlString,\n    initiator: PageResourceLoadInitiator): Promise<SourceMapV3|null> {\n  try {\n    return await loadSourceMap(resourceLoader, url, null, initiator);\n  } catch (cause) {\n    console.error(cause);\n    return null;\n  }\n}\n\ninterface ClientData {\n  relativeSourceURL: Platform.DevToolsPath.UrlString;\n  // Stores the raw sourceMappingURL as provided by V8. These are not guaranteed to\n  // be valid URLs and will be checked and resolved once `attachSourceMap` is called.\n  relativeSourceMapURL: string;\n  sourceMap: SourceMap|undefined;\n  sourceMapPromise: Promise<SourceMap|undefined>;\n}\n\nexport enum Events {\n  /* eslint-disable @typescript-eslint/naming-convention -- Used by web_tests. */\n  SourceMapWillAttach = 'SourceMapWillAttach',\n  SourceMapFailedToAttach = 'SourceMapFailedToAttach',\n  SourceMapAttached = 'SourceMapAttached',\n  SourceMapDetached = 'SourceMapDetached',\n  /* eslint-enable @typescript-eslint/naming-convention */\n}\n\nexport interface EventTypes<T extends FrameAssociated> {\n  [Events.SourceMapWillAttach]: {client: T};\n  [Events.SourceMapFailedToAttach]: {client: T};\n  [Events.SourceMapAttached]: {client: T, sourceMap: SourceMap};\n  [Events.SourceMapDetached]: {client: T, sourceMap: SourceMap};\n}\n", "// Copyright 2020 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport type * as Protocol from '../../generated/protocol.js';\nimport * as Common from '../common/common.js';\nimport * as Host from '../host/host.js';\nimport * as i18n from '../i18n/i18n.js';\nimport type * as Platform from '../platform/platform.js';\nimport * as Root from '../root/root.js';\n\nimport {IOModel} from './IOModel.js';\nimport {MultitargetNetworkManager, NetworkManager} from './NetworkManager.js';\nimport {\n  Events as ResourceTreeModelEvents,\n  PrimaryPageChangeType,\n  type ResourceTreeFrame,\n  ResourceTreeModel,\n} from './ResourceTreeModel.js';\nimport type {Target} from './Target.js';\nimport {TargetManager} from './TargetManager.js';\n\nconst UIStrings = {\n  /**\n   * @description Error message for canceled source map loads\n   */\n  loadCanceledDueToReloadOf: 'Load canceled due to reload of inspected page',\n} as const;\nconst str_ = i18n.i18n.registerUIStrings('core/sdk/PageResourceLoader.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\n\nexport interface ExtensionInitiator {\n  target: null;\n  frameId: null;\n  initiatorUrl: Platform.DevToolsPath.UrlString;\n  extensionId: string;\n}\n\nexport type PageResourceLoadInitiator = {\n  target: null,\n  frameId: Protocol.Page.FrameId,\n  initiatorUrl: Platform.DevToolsPath.UrlString|null,\n}|{\n  target: Target,\n  frameId: Protocol.Page.FrameId | null,\n  initiatorUrl: Platform.DevToolsPath.UrlString | null,\n}|ExtensionInitiator;\n\nfunction isExtensionInitiator(initiator: PageResourceLoadInitiator): initiator is ExtensionInitiator {\n  return 'extensionId' in initiator;\n}\n\nexport interface PageResource {\n  success: boolean|null;\n  errorMessage?: string;\n  initiator: PageResourceLoadInitiator;\n  url: Platform.DevToolsPath.UrlString;\n  size: number|null;\n  duration: number|null;\n}\n\n/** Used for revealing a resource. **/\nexport class ResourceKey {\n  readonly key: string;\n\n  constructor(key: string) {\n    this.key = key;\n  }\n}\n\nexport type UserAgentProvider = Pick<MultitargetNetworkManager, 'currentUserAgent'>;\n\n/**\n * The PageResourceLoader has two responsibilities: loading resources and tracking statistics scoped to targets\n * for the DeveloperResourcesPanel. Many places only require the former, so we expose that functionality via small\n * sub-interface. This makes it easier to test classes that require resource loading.\n */\nexport type ResourceLoader = Pick<PageResourceLoader, 'loadResource'>;\n\ninterface LoadQueueEntry {\n  resolve: () => void;\n  reject: (arg0: Error) => void;\n}\n\n/**\n * The page resource loader is a bottleneck for all DevTools-initiated resource loads. For each such load, it keeps a\n * `PageResource` object around that holds meta information. This can be as the basis for reporting to the user which\n * resources were loaded, and whether there was a load error.\n */\nexport class PageResourceLoader extends Common.ObjectWrapper.ObjectWrapper<EventTypes> implements ResourceLoader {\n  readonly #targetManager: TargetManager;\n  readonly #settings: Common.Settings.Settings;\n  readonly #userAgentProvider: UserAgentProvider;\n  #currentlyLoading = 0;\n  #currentlyLoadingPerTarget = new Map<Protocol.Target.TargetID|'main', number>();\n  readonly #maxConcurrentLoads: number;\n  #pageResources = new Map<string, PageResource>();\n  #queuedLoads: LoadQueueEntry[] = [];\n  readonly #loadOverride: ((arg0: string) => Promise<{\n                             success: boolean,\n                             content: string,\n                             errorDescription: Host.ResourceLoader.LoadErrorDescription,\n                           }>)|null;\n  constructor(\n      targetManager: TargetManager, settings: Common.Settings.Settings, userAgentProvider: UserAgentProvider,\n      loadOverride: ((arg0: string) => Promise<{\n                       success: boolean,\n                       content: string,\n                       errorDescription: Host.ResourceLoader.LoadErrorDescription,\n                     }>)|null,\n      maxConcurrentLoads = 500) {\n    super();\n    this.#targetManager = targetManager;\n    this.#settings = settings;\n    this.#userAgentProvider = userAgentProvider;\n    this.#maxConcurrentLoads = maxConcurrentLoads;\n    this.#targetManager.addModelListener(\n        ResourceTreeModel, ResourceTreeModelEvents.PrimaryPageChanged, this.onPrimaryPageChanged, this);\n    this.#loadOverride = loadOverride;\n  }\n\n  static instance({forceNew, targetManager, settings, userAgentProvider, loadOverride, maxConcurrentLoads}: {\n    forceNew: boolean,\n    loadOverride: (null|((arg0: string) => Promise<{\n                           success: boolean,\n                           content: string,\n                           errorDescription: Host.ResourceLoader.LoadErrorDescription,\n                         }>)),\n    targetManager?: TargetManager,\n    settings?: Common.Settings.Settings,\n    userAgentProvider?: UserAgentProvider,\n    maxConcurrentLoads?: number,\n  } = {\n    forceNew: false,\n    loadOverride: null,\n  }): PageResourceLoader {\n    if (forceNew) {\n      Root.DevToolsContext.globalInstance().set(\n          PageResourceLoader,\n          new PageResourceLoader(\n              targetManager ?? TargetManager.instance(), settings ?? Common.Settings.Settings.instance(),\n              userAgentProvider ?? MultitargetNetworkManager.instance(), loadOverride, maxConcurrentLoads));\n    }\n\n    return Root.DevToolsContext.globalInstance().get(PageResourceLoader);\n  }\n\n  static removeInstance(): void {\n    Root.DevToolsContext.globalInstance().delete(PageResourceLoader);\n  }\n\n  onPrimaryPageChanged(\n      event: Common.EventTarget.EventTargetEvent<{frame: ResourceTreeFrame, type: PrimaryPageChangeType}>): void {\n    const {frame: mainFrame, type} = event.data;\n    if (!mainFrame.isOutermostFrame()) {\n      return;\n    }\n    for (const {reject} of this.#queuedLoads) {\n      reject(new Error(i18nString(UIStrings.loadCanceledDueToReloadOf)));\n    }\n    this.#queuedLoads = [];\n    const mainFrameTarget = mainFrame.resourceTreeModel().target();\n    const keptResources = new Map<string, PageResource>();\n    // If the navigation is a prerender-activation, the pageResources for the destination page have\n    // already been preloaded. In such cases, we therefore don't just discard all pageResources, but\n    // instead make sure to keep the pageResources for the prerendered target.\n    for (const [key, pageResource] of this.#pageResources.entries()) {\n      if ((type === PrimaryPageChangeType.ACTIVATION) && mainFrameTarget === pageResource.initiator.target) {\n        keptResources.set(key, pageResource);\n      }\n    }\n    this.#pageResources = keptResources;\n    this.dispatchEventToListeners(Events.UPDATE);\n  }\n\n  getResourcesLoaded(): Map<string, PageResource> {\n    return this.#pageResources;\n  }\n\n  getScopedResourcesLoaded(): Map<string, PageResource> {\n    return new Map([...this.#pageResources].filter(\n        ([_, pageResource]) => this.#targetManager.isInScope(pageResource.initiator.target) ||\n            isExtensionInitiator(pageResource.initiator)));\n  }\n\n  /**\n   * Loading is the number of currently loading and queued items. Resources is the total number of resources,\n   * including loading and queued resources, but not including resources that are still loading but scheduled\n   * for cancelation.;\n   */\n  getNumberOfResources(): {\n    loading: number,\n    queued: number,\n    resources: number,\n  } {\n    return {loading: this.#currentlyLoading, queued: this.#queuedLoads.length, resources: this.#pageResources.size};\n  }\n\n  getScopedNumberOfResources(): {\n    loading: number,\n    resources: number,\n  } {\n    let loadingCount = 0;\n    for (const [targetId, count] of this.#currentlyLoadingPerTarget) {\n      const target = this.#targetManager.targetById(targetId);\n      if (this.#targetManager.isInScope(target)) {\n        loadingCount += count;\n      }\n    }\n    return {loading: loadingCount, resources: this.getScopedResourcesLoaded().size};\n  }\n\n  private async acquireLoadSlot(target: Target|null): Promise<void> {\n    this.#currentlyLoading++;\n    if (target) {\n      const currentCount = this.#currentlyLoadingPerTarget.get(target.id()) || 0;\n      this.#currentlyLoadingPerTarget.set(target.id(), currentCount + 1);\n    }\n    if (this.#currentlyLoading > this.#maxConcurrentLoads) {\n      const {\n        promise: waitForCapacity,\n        resolve,\n        reject,\n      } = Promise.withResolvers<void>();\n      this.#queuedLoads.push({resolve, reject});\n      await waitForCapacity;\n    }\n  }\n\n  private releaseLoadSlot(target: Target|null): void {\n    this.#currentlyLoading--;\n    if (target) {\n      const currentCount = this.#currentlyLoadingPerTarget.get(target.id());\n      if (currentCount) {\n        this.#currentlyLoadingPerTarget.set(target.id(), currentCount - 1);\n      }\n    }\n    const entry = this.#queuedLoads.shift();\n    if (entry) {\n      entry.resolve();\n    }\n  }\n\n  static makeExtensionKey(url: Platform.DevToolsPath.UrlString, initiator: PageResourceLoadInitiator): string {\n    if (isExtensionInitiator(initiator) && initiator.extensionId) {\n      return `${url}-${initiator.extensionId}`;\n    }\n    throw new Error('Invalid initiator');\n  }\n\n  static makeKey(url: Platform.DevToolsPath.UrlString, initiator: PageResourceLoadInitiator): string {\n    if (initiator.frameId) {\n      return `${url}-${initiator.frameId}`;\n    }\n    if (initiator.target) {\n      return `${url}-${initiator.target.id()}`;\n    }\n    throw new Error('Invalid initiator');\n  }\n\n  resourceLoadedThroughExtension(pageResource: PageResource): void {\n    const key = PageResourceLoader.makeExtensionKey(pageResource.url, pageResource.initiator);\n    this.#pageResources.set(key, pageResource);\n    this.dispatchEventToListeners(Events.UPDATE);\n  }\n\n  loadResource(url: Platform.DevToolsPath.UrlString, initiator: PageResourceLoadInitiator, isBinary: true): Promise<{\n    content: Uint8Array<ArrayBuffer>,\n  }>;\n  loadResource(url: Platform.DevToolsPath.UrlString, initiator: PageResourceLoadInitiator, isBinary?: false): Promise<{\n    content: string,\n  }>;\n  async loadResource(url: Platform.DevToolsPath.UrlString, initiator: PageResourceLoadInitiator, isBinary = false):\n      Promise<{\n        content: string | Uint8Array<ArrayBuffer>,\n      }> {\n    if (isExtensionInitiator(initiator)) {\n      throw new Error('Invalid initiator');\n    }\n    const key = PageResourceLoader.makeKey(url, initiator);\n    const pageResource:\n        PageResource = {success: null, size: null, duration: null, errorMessage: undefined, url, initiator};\n    this.#pageResources.set(key, pageResource);\n    this.dispatchEventToListeners(Events.UPDATE);\n    const startTime = performance.now();\n    try {\n      await this.acquireLoadSlot(initiator.target);\n      const resultPromise = this.dispatchLoad(url, initiator, isBinary);\n      const result = await resultPromise;\n      pageResource.errorMessage = result.errorDescription.message;\n      pageResource.success = result.success;\n      if (result.success) {\n        pageResource.size = result.content.length;\n        return {content: result.content};\n      }\n      throw new Error(result.errorDescription.message);\n    } catch (e) {\n      if (pageResource.errorMessage === undefined) {\n        pageResource.errorMessage = e.message;\n      }\n      if (pageResource.success === null) {\n        pageResource.success = false;\n      }\n      throw e;\n    } finally {\n      pageResource.duration = performance.now() - startTime;\n      this.releaseLoadSlot(initiator.target);\n      this.dispatchEventToListeners(Events.UPDATE);\n    }\n  }\n\n  private async dispatchLoad(\n      url: Platform.DevToolsPath.UrlString, initiator: PageResourceLoadInitiator, isBinary: boolean): Promise<{\n    success: boolean,\n    content: string|Uint8Array<ArrayBuffer>,\n    errorDescription: Host.ResourceLoader.LoadErrorDescription,\n  }> {\n    if (isExtensionInitiator(initiator)) {\n      throw new Error('Invalid initiator');\n    }\n\n    const failureReason: string|null = null;\n    if (this.#loadOverride) {\n      return await this.#loadOverride(url);\n    }\n    const parsedURL = new Common.ParsedURL.ParsedURL(url);\n    const eligibleForLoadFromTarget = this.getLoadThroughTargetSetting().get() && parsedURL &&\n        parsedURL.scheme !== 'file' && parsedURL.scheme !== 'data' && parsedURL.scheme !== 'devtools' &&\n        initiator.target;\n    Host.userMetrics.developerResourceScheme(this.getDeveloperResourceScheme(parsedURL));\n    if (eligibleForLoadFromTarget) {\n      try {\n        Host.userMetrics.developerResourceLoaded(Host.UserMetrics.DeveloperResourceLoaded.LOAD_THROUGH_PAGE_VIA_TARGET);\n        const result = await this.loadFromTarget(initiator.target, initiator.frameId, url, isBinary);\n        return result;\n      } catch (e) {\n        if (e instanceof Error) {\n          Host.userMetrics.developerResourceLoaded(Host.UserMetrics.DeveloperResourceLoaded.LOAD_THROUGH_PAGE_FAILURE);\n          if (e.message.includes('CSP violation')) {\n            return {\n              success: false,\n              content: '',\n              errorDescription:\n                  {statusCode: 0, netError: undefined, netErrorName: undefined, message: e.message, urlValid: undefined}\n            };\n          }\n        }\n      }\n      Host.userMetrics.developerResourceLoaded(Host.UserMetrics.DeveloperResourceLoaded.LOAD_THROUGH_PAGE_FALLBACK);\n    } else {\n      const code = this.getLoadThroughTargetSetting().get() ?\n          Host.UserMetrics.DeveloperResourceLoaded.FALLBACK_PER_PROTOCOL :\n          Host.UserMetrics.DeveloperResourceLoaded.FALLBACK_PER_OVERRIDE;\n      Host.userMetrics.developerResourceLoaded(code);\n    }\n\n    const result = await this.loadFromHostBindings(url);\n    if (eligibleForLoadFromTarget && !result.success) {\n      Host.userMetrics.developerResourceLoaded(Host.UserMetrics.DeveloperResourceLoaded.FALLBACK_FAILURE);\n    }\n    if (failureReason) {\n      // In case we have a success, add a note about why the load through the target failed.\n      result.errorDescription.message =\n          `Fetch through target failed: ${failureReason}; Fallback: ${result.errorDescription.message}`;\n    }\n    return result;\n  }\n\n  private getDeveloperResourceScheme(parsedURL: Common.ParsedURL.ParsedURL|null):\n      Host.UserMetrics.DeveloperResourceScheme {\n    if (!parsedURL || parsedURL.scheme === '') {\n      return Host.UserMetrics.DeveloperResourceScheme.UKNOWN;\n    }\n    const isLocalhost = parsedURL.host === 'localhost' || parsedURL.host.endsWith('.localhost');\n    switch (parsedURL.scheme) {\n      case 'file':\n        return Host.UserMetrics.DeveloperResourceScheme.FILE;\n      case 'data':\n        return Host.UserMetrics.DeveloperResourceScheme.DATA;\n      case 'blob':\n        return Host.UserMetrics.DeveloperResourceScheme.BLOB;\n      case 'http':\n        return isLocalhost ? Host.UserMetrics.DeveloperResourceScheme.HTTP_LOCALHOST :\n                             Host.UserMetrics.DeveloperResourceScheme.HTTP;\n      case 'https':\n        return isLocalhost ? Host.UserMetrics.DeveloperResourceScheme.HTTPS_LOCALHOST :\n                             Host.UserMetrics.DeveloperResourceScheme.HTTPS;\n    }\n    return Host.UserMetrics.DeveloperResourceScheme.OTHER;\n  }\n\n  private async loadFromTarget(\n      target: Target, frameId: Protocol.Page.FrameId|null, url: Platform.DevToolsPath.UrlString,\n      isBinary: boolean): Promise<{\n    success: boolean,\n    content: string|Uint8Array<ArrayBuffer>,\n    errorDescription: {\n      statusCode: number,\n      netError: number|undefined,\n      netErrorName: string|undefined,\n      message: string,\n      urlValid: undefined,\n    },\n  }> {\n    const networkManager = (target.model(NetworkManager) as NetworkManager);\n    const ioModel = (target.model(IOModel) as IOModel);\n    const disableCache = this.#settings.moduleSetting('cache-disabled').get();\n    const resource = await networkManager.loadNetworkResource(frameId, url, {disableCache, includeCredentials: true});\n    try {\n      const content = resource.stream ?\n          (isBinary ? await ioModel.readToBuffer(resource.stream) : await ioModel.readToString(resource.stream)) :\n          '';\n      return {\n        success: resource.success,\n        content,\n        errorDescription: {\n          statusCode: resource.httpStatusCode || 0,\n          netError: resource.netError,\n          netErrorName: resource.netErrorName,\n          message: Host.ResourceLoader.netErrorToMessage(\n                       resource.netError, resource.httpStatusCode, resource.netErrorName) ||\n              '',\n          urlValid: undefined,\n        },\n      };\n    } finally {\n      if (resource.stream) {\n        void ioModel.close(resource.stream);\n      }\n    }\n  }\n\n  private async loadFromHostBindings(url: Platform.DevToolsPath.UrlString): Promise<{\n    success: boolean,\n    content: string,\n    errorDescription: Host.ResourceLoader.LoadErrorDescription,\n  }> {\n    const headers: Record<string, string> = {};\n\n    const currentUserAgent = this.#userAgentProvider.currentUserAgent();\n    if (currentUserAgent) {\n      headers['User-Agent'] = currentUserAgent;\n    }\n\n    if (this.#settings.moduleSetting('cache-disabled').get()) {\n      headers['Cache-Control'] = 'no-cache';\n    }\n\n    const allowRemoteFilePaths = this.#settings.moduleSetting('network.enable-remote-file-loading').get();\n\n    return await new Promise(\n        resolve => Host.ResourceLoader.load(url, headers, (success, _responseHeaders, content, errorDescription) => {\n          resolve({success, content, errorDescription});\n        }, allowRemoteFilePaths));\n  }\n\n  getLoadThroughTargetSetting(): Common.Settings.Setting<boolean> {\n    return this.#settings.createSetting('load-through-target', true);\n  }\n}\n\nexport const enum Events {\n  UPDATE = 'Update',\n}\n\nexport interface EventTypes {\n  [Events.UPDATE]: void;\n}\n", "// Copyright 2020 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport type * as Protocol from '../../generated/protocol.js';\nimport * as Common from '../common/common.js';\n\nimport {RemoteObject} from './RemoteObject.js';\nimport {SDKModel} from './SDKModel.js';\nimport {Capability} from './Target.js';\n\nexport class IOModel extends SDKModel<void> {\n  async read(handle: Protocol.IO.StreamHandle, size?: number, offset?: number): Promise<string|Uint8Array|null> {\n    const result = await this.target().ioAgent().invoke_read({handle, offset, size});\n    if (result.getError()) {\n      throw new Error(result.getError());\n    }\n    if (result.eof) {\n      return null;\n    }\n    if (result.base64Encoded) {\n      return Common.Base64.decode(result.data);\n    }\n    return result.data;\n  }\n\n  async close(handle: Protocol.IO.StreamHandle): Promise<void> {\n    await this.target().ioAgent().invoke_close({handle});\n  }\n\n  async resolveBlob(objectOrObjectId: Protocol.Runtime.RemoteObjectId|RemoteObject): Promise<string> {\n    const objectId = objectOrObjectId instanceof RemoteObject ? objectOrObjectId.objectId : objectOrObjectId;\n    if (!objectId) {\n      throw new Error('Remote object has undefined objectId');\n    }\n    const result = await this.target().ioAgent().invoke_resolveBlob({objectId});\n    if (result.getError()) {\n      throw new Error(result.getError());\n    }\n    return `blob:${result.uuid}`;\n  }\n\n  async readToString(handle: Protocol.IO.StreamHandle): Promise<string> {\n    const strings: string[] = [];\n    const decoder = new TextDecoder();\n    for (;;) {\n      const data = await this.read(handle, 1024 * 1024);\n      if (data === null) {\n        strings.push(decoder.decode());\n        break;\n      }\n      if (data instanceof Uint8Array) {\n        strings.push(decoder.decode(data, {stream: true}));\n      } else {\n        strings.push(data);\n      }\n    }\n    return strings.join('');\n  }\n\n  async readToBuffer(handle: Protocol.IO.StreamHandle): Promise<Uint8Array<ArrayBuffer>> {\n    const items: Uint8Array[] = [];\n    for (;;) {\n      const data = await this.read(handle, 1024 * 1024);\n      if (data === null) {\n        break;\n      }\n      if (data instanceof Uint8Array) {\n        items.push(data);\n      } else {\n        throw new Error('Unexpected stream data type: expected binary, got a string');\n      }\n    }\n    let length = 0;\n    for (const item of items) {\n      length += item.length;\n    }\n    const result = new Uint8Array(length);\n    let offset = 0;\n    for (const item of items) {\n      result.set(item, offset);\n      offset += item.length;\n    }\n    return result;\n  }\n}\n\nSDKModel.register(IOModel, {capabilities: Capability.IO, autostart: true});\n", "// Copyright 2009 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport type * as ProtocolProxyApi from '../../generated/protocol-proxy-api.js';\nimport * as Protocol from '../../generated/protocol.js';\nimport type {DOMPinnedWebIDLProp, DOMPinnedWebIDLType} from '../common/JavaScriptMetaData.js';\n\nimport type {DebuggerModel, FunctionDetails} from './DebuggerModel.js';\nimport type {RuntimeModel} from './RuntimeModel.js';\n\n/** This cannot be an interface due to \"instanceof RemoteObject\" checks in the code. **/\nexport abstract class RemoteObject {\n  static fromLocalObject(value: unknown): RemoteObject {\n    return new LocalJSONObject(value);\n  }\n\n  static type(remoteObject: RemoteObject): string {\n    if (remoteObject === null) {\n      return 'null';\n    }\n\n    const type = typeof remoteObject;\n    if (type !== 'object' && type !== 'function') {\n      return type;\n    }\n\n    return remoteObject.type;\n  }\n\n  static isNullOrUndefined(remoteObject?: RemoteObject): boolean {\n    if (remoteObject === undefined) {\n      return true;\n    }\n    switch (remoteObject.type) {\n      case Protocol.Runtime.RemoteObjectType.Object:\n        return remoteObject.subtype === Protocol.Runtime.RemoteObjectSubtype.Null;\n      case Protocol.Runtime.RemoteObjectType.Undefined:\n        return true;\n      default:\n        return false;\n    }\n  }\n\n  static arrayNameFromDescription(description: string): string {\n    return description.replace(descriptionLengthParenRegex, '').replace(descriptionLengthSquareRegex, '');\n  }\n\n  static arrayLength(object: RemoteObject|Protocol.Runtime.RemoteObject|Protocol.Runtime.ObjectPreview): number {\n    if (object.subtype !== 'array' && object.subtype !== 'typedarray') {\n      return 0;\n    }\n    // Array lengths in V8-generated descriptions switched from square brackets to parentheses.\n    // Both formats are checked in case the front end is dealing with an old version of V8.\n    const parenMatches = object.description?.match(descriptionLengthParenRegex);\n    const squareMatches = object.description?.match(descriptionLengthSquareRegex);\n    return parenMatches ? parseInt(parenMatches[1], 10) : (squareMatches ? parseInt(squareMatches[1], 10) : 0);\n  }\n\n  static arrayBufferByteLength(object: RemoteObject|Protocol.Runtime.RemoteObject|Protocol.Runtime.ObjectPreview):\n      number {\n    if (object.subtype !== 'arraybuffer') {\n      return 0;\n    }\n    const matches = object.description?.match(descriptionLengthParenRegex);\n    return matches ? parseInt(matches[1], 10) : 0;\n  }\n\n  static unserializableDescription(object: unknown): string|null {\n    if (typeof object === 'number') {\n      const description = String(object);\n      if (object === 0 && 1 / object < 0) {\n        return UnserializableNumber.NEGATIVE_ZERO;\n      }\n      if (description === UnserializableNumber.NAN || description === UnserializableNumber.INFINITY ||\n          description === UnserializableNumber.NEGATIVE_INFINITY) {\n        return description;\n      }\n    }\n    if (typeof object === 'bigint') {\n      return object + 'n';\n    }\n    return null;\n  }\n\n  static toCallArgument(object: string|number|bigint|boolean|RemoteObject|Protocol.Runtime.RemoteObject|null|undefined):\n      Protocol.Runtime.CallArgument {\n    const type = typeof object;\n    if (type === 'undefined') {\n      return {};\n    }\n    const unserializableDescription = RemoteObject.unserializableDescription(object);\n    if (type === 'number') {\n      if (unserializableDescription !== null) {\n        return {unserializableValue: unserializableDescription};\n      }\n      return {value: object};\n    }\n    if (type === 'bigint') {\n      return {unserializableValue: unserializableDescription ?? undefined};\n    }\n    if (type === 'string' || type === 'boolean') {\n      return {value: object};\n    }\n\n    if (!object) {\n      return {value: null};\n    }\n\n    // The unserializableValue is a function on RemoteObject's and a simple property on\n    // Protocol.Runtime.RemoteObject's.\n    const objectAsProtocolRemoteObject = (object as Protocol.Runtime.RemoteObject);\n    if (object instanceof RemoteObject) {\n      const unserializableValue = object.unserializableValue();\n      if (unserializableValue !== undefined) {\n        return {unserializableValue};\n      }\n    } else if (objectAsProtocolRemoteObject.unserializableValue !== undefined) {\n      return {unserializableValue: objectAsProtocolRemoteObject.unserializableValue};\n    }\n\n    if (typeof objectAsProtocolRemoteObject.objectId !== 'undefined') {\n      return {objectId: objectAsProtocolRemoteObject.objectId};\n    }\n\n    return {value: objectAsProtocolRemoteObject.value};\n  }\n\n  static async loadFromObjectPerProto(object: RemoteObject, generatePreview: boolean, nonIndexedPropertiesOnly = false):\n      Promise<GetPropertiesResult> {\n    const result = await Promise.all([\n      object.getAllProperties(true /* accessorPropertiesOnly */, generatePreview, nonIndexedPropertiesOnly),\n      object.getOwnProperties(generatePreview, nonIndexedPropertiesOnly),\n    ]);\n    const accessorProperties = result[0].properties;\n    const ownProperties = result[1].properties;\n    const internalProperties = result[1].internalProperties;\n    if (!ownProperties || !accessorProperties) {\n      return {properties: null, internalProperties: null};\n    }\n    const propertiesMap = new Map<string, RemoteObjectProperty>();\n    const propertySymbols = [];\n    for (let i = 0; i < accessorProperties.length; i++) {\n      const property = accessorProperties[i];\n      if (property.symbol) {\n        propertySymbols.push(property);\n      } else if (property.isOwn || property.name !== '__proto__') {\n        // TODO(crbug/1076820): Eventually we should move away from\n        // showing accessor #properties directly on the receiver.\n        propertiesMap.set(property.name, property);\n      }\n    }\n    for (let i = 0; i < ownProperties.length; i++) {\n      const property = ownProperties[i];\n      if (property.isAccessorProperty()) {\n        continue;\n      }\n      if (property.private || property.symbol) {\n        propertySymbols.push(property);\n      } else {\n        propertiesMap.set(property.name, property);\n      }\n    }\n    return {\n      properties: [...propertiesMap.values()].concat(propertySymbols),\n      internalProperties: internalProperties ? internalProperties : null,\n    };\n  }\n\n  customPreview(): Protocol.Runtime.CustomPreview|null {\n    return null;\n  }\n\n  abstract get objectId(): Protocol.Runtime.RemoteObjectId|undefined;\n  abstract get type(): string;\n\n  abstract get subtype(): string|undefined;\n\n  // TODO(crbug.com/1172300) Ignored during the jsdoc to ts migration\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  abstract get value(): any;\n\n  abstract get description(): string|undefined;\n  abstract set description(description: string|undefined);\n\n  abstract get hasChildren(): boolean;\n\n  abstract arrayLength(): number;\n\n  abstract getOwnProperties(generatePreview: boolean, nonIndexedPropertiesOnly?: boolean): Promise<GetPropertiesResult>;\n\n  abstract getAllProperties(\n      accessorPropertiesOnly: boolean, generatePreview: boolean,\n      nonIndexedPropertiesOnly?: boolean): Promise<GetPropertiesResult>;\n\n  unserializableValue(): string|undefined {\n    throw new Error('Not implemented');\n  }\n\n  get preview(): Protocol.Runtime.ObjectPreview|undefined {\n    return undefined;\n  }\n\n  get className(): string|null {\n    return null;\n  }\n\n  callFunction<T, U>(_functionDeclaration: (this: U, ...args: any[]) => T, _args?: Protocol.Runtime.CallArgument[]):\n      Promise<CallFunctionResult> {\n    throw new Error('Not implemented');\n  }\n\n  callFunctionJSON<T, U>(\n      _functionDeclaration: (this: U, ...args: any[]) => T,\n      _args: Protocol.Runtime.CallArgument[]|undefined): Promise<T|null> {\n    throw new Error('Not implemented');\n  }\n\n  arrayBufferByteLength(): number {\n    throw new Error('Not implemented');\n  }\n\n  deleteProperty(_name: Protocol.Runtime.CallArgument): Promise<string|undefined> {\n    throw new Error('Not implemented');\n  }\n\n  setPropertyValue(_name: string|Protocol.Runtime.CallArgument, _value: string): Promise<string|undefined> {\n    throw new Error('Not implemented');\n  }\n\n  release(): void {\n  }\n\n  debuggerModel(): DebuggerModel {\n    throw new Error('DebuggerModel-less object');\n  }\n\n  runtimeModel(): RuntimeModel {\n    throw new Error('RuntimeModel-less object');\n  }\n\n  isNode(): boolean {\n    return false;\n  }\n\n  /**\n   * Checks whether this object can be inspected with the Linear memory inspector.\n   * @returns `true` if this object can be inspected with the Linear memory inspector.\n   */\n  isLinearMemoryInspectable(): boolean {\n    return false;\n  }\n\n  webIdl?: RemoteObjectWebIdlTypeMetadata;\n}\n\nexport class RemoteObjectImpl extends RemoteObject {\n  #runtimeModel: RuntimeModel;\n  readonly #runtimeAgent: ProtocolProxyApi.RuntimeApi;\n  readonly #type: string;\n  readonly #subtype: string|undefined;\n  #objectId: Protocol.Runtime.RemoteObjectId|undefined;\n  #description: string|undefined;\n  #hasChildren: boolean;\n  readonly #preview: Protocol.Runtime.ObjectPreview|undefined;\n  readonly #unserializableValue: string|undefined;\n  readonly #value: typeof RemoteObject.prototype.value;\n  readonly #customPreview: Protocol.Runtime.CustomPreview|null;\n  readonly #className: string|null;\n\n  constructor(\n      runtimeModel: RuntimeModel,\n      objectId: Protocol.Runtime.RemoteObjectId|undefined,\n      type: string,\n      subtype: string|undefined,\n      value: typeof RemoteObject.prototype.value,\n      unserializableValue?: string,\n      description?: string,\n      preview?: Protocol.Runtime.ObjectPreview,\n      customPreview?: Protocol.Runtime.CustomPreview,\n      className?: string,\n  ) {\n    super();\n\n    this.#runtimeModel = runtimeModel;\n    this.#runtimeAgent = runtimeModel.target().runtimeAgent();\n\n    this.#type = type;\n    this.#subtype = subtype;\n    if (objectId) {\n      // handle\n      this.#objectId = objectId;\n      this.#description = description;\n      this.#hasChildren = (type !== 'symbol');\n      this.#preview = preview;\n    } else {\n      this.#description = description;\n      if (!this.description && unserializableValue) {\n        this.#description = unserializableValue;\n      }\n      if (!this.#description && (typeof value !== 'object' || value === null)) {\n        this.#description = String(value);\n      }\n      this.#hasChildren = false;\n      if (typeof unserializableValue === 'string') {\n        this.#unserializableValue = unserializableValue;\n        if (unserializableValue === UnserializableNumber.INFINITY ||\n            unserializableValue === UnserializableNumber.NEGATIVE_INFINITY ||\n            unserializableValue === UnserializableNumber.NEGATIVE_ZERO ||\n            unserializableValue === UnserializableNumber.NAN) {\n          this.#value = Number(unserializableValue);\n        } else if (type === 'bigint' && unserializableValue.endsWith('n')) {\n          this.#value = BigInt(unserializableValue.substring(0, unserializableValue.length - 1));\n        } else {\n          this.#value = unserializableValue;\n        }\n\n      } else {\n        this.#value = value;\n      }\n    }\n    this.#customPreview = customPreview || null;\n    this.#className = typeof className === 'string' ? className : null;\n  }\n\n  override customPreview(): Protocol.Runtime.CustomPreview|null {\n    return this.#customPreview;\n  }\n\n  override get objectId(): Protocol.Runtime.RemoteObjectId|undefined {\n    return this.#objectId;\n  }\n\n  override get type(): string {\n    return this.#type;\n  }\n\n  override get subtype(): string|undefined {\n    return this.#subtype;\n  }\n\n  override get value(): typeof RemoteObject.prototype.value {\n    return this.#value;\n  }\n\n  override unserializableValue(): string|undefined {\n    return this.#unserializableValue;\n  }\n\n  override get description(): string|undefined {\n    return this.#description;\n  }\n\n  override set description(description: string|undefined) {\n    this.#description = description;\n  }\n\n  override get hasChildren(): boolean {\n    return this.#hasChildren;\n  }\n\n  override get preview(): Protocol.Runtime.ObjectPreview|undefined {\n    return this.#preview;\n  }\n\n  override get className(): string|null {\n    return this.#className;\n  }\n\n  override getOwnProperties(generatePreview: boolean, nonIndexedPropertiesOnly = false): Promise<GetPropertiesResult> {\n    return this.doGetProperties(true, false, nonIndexedPropertiesOnly, generatePreview);\n  }\n\n  override getAllProperties(\n      accessorPropertiesOnly: boolean, generatePreview: boolean,\n      nonIndexedPropertiesOnly = false): Promise<GetPropertiesResult> {\n    return this.doGetProperties(false, accessorPropertiesOnly, nonIndexedPropertiesOnly, generatePreview);\n  }\n\n  async createRemoteObject(object: Protocol.Runtime.RemoteObject): Promise<RemoteObject> {\n    return this.#runtimeModel.createRemoteObject(object);\n  }\n\n  async doGetProperties(\n      ownProperties: boolean, accessorPropertiesOnly: boolean, nonIndexedPropertiesOnly: boolean,\n      generatePreview: boolean): Promise<GetPropertiesResult> {\n    if (!this.#objectId) {\n      return {properties: null, internalProperties: null};\n    }\n\n    const response = await this.#runtimeAgent.invoke_getProperties({\n      objectId: this.#objectId,\n      ownProperties,\n      accessorPropertiesOnly,\n      nonIndexedPropertiesOnly,\n      generatePreview,\n    });\n    if (response.getError()) {\n      return {properties: null, internalProperties: null};\n    }\n    if (response.exceptionDetails) {\n      this.#runtimeModel.exceptionThrown(Date.now(), response.exceptionDetails);\n      return {properties: null, internalProperties: null};\n    }\n    const {result: properties = [], internalProperties = [], privateProperties = []} = response;\n    const result = [];\n    for (const property of properties) {\n      const propertyValue = property.value ? await this.createRemoteObject(property.value) : null;\n      const propertySymbol = property.symbol ? this.#runtimeModel.createRemoteObject(property.symbol) : null;\n      const remoteProperty = new RemoteObjectProperty(\n          property.name, propertyValue, Boolean(property.enumerable), Boolean(property.writable),\n          Boolean(property.isOwn), Boolean(property.wasThrown), propertySymbol);\n\n      if (typeof property.value === 'undefined') {\n        if (property.get && property.get.type !== 'undefined') {\n          remoteProperty.getter = this.#runtimeModel.createRemoteObject(property.get);\n        }\n        if (property.set && property.set.type !== 'undefined') {\n          remoteProperty.setter = this.#runtimeModel.createRemoteObject(property.set);\n        }\n      }\n      result.push(remoteProperty);\n    }\n    for (const property of privateProperties) {\n      const propertyValue = property.value ? this.#runtimeModel.createRemoteObject(property.value) : null;\n      const remoteProperty = new RemoteObjectProperty(\n          property.name, propertyValue, true, true, true, false, undefined, false, undefined, true);\n\n      if (typeof property.value === 'undefined') {\n        if (property.get && property.get.type !== 'undefined') {\n          remoteProperty.getter = this.#runtimeModel.createRemoteObject(property.get);\n        }\n        if (property.set && property.set.type !== 'undefined') {\n          remoteProperty.setter = this.#runtimeModel.createRemoteObject(property.set);\n        }\n      }\n      result.push(remoteProperty);\n    }\n\n    const internalPropertiesResult = [];\n    for (const property of internalProperties) {\n      if (!property.value) {\n        continue;\n      }\n      const propertyValue = this.#runtimeModel.createRemoteObject(property.value);\n      internalPropertiesResult.push(\n          new RemoteObjectProperty(property.name, propertyValue, true, false, undefined, undefined, undefined, true));\n    }\n    return {properties: result, internalProperties: internalPropertiesResult};\n  }\n\n  override async setPropertyValue(name: string|Protocol.Runtime.CallArgument, value: string):\n      Promise<string|undefined> {\n    if (!this.#objectId) {\n      return 'Can’t set a property of non-object.';\n    }\n\n    const response = await this.#runtimeAgent.invoke_evaluate({expression: value, silent: true});\n    if (response.getError() || response.exceptionDetails) {\n      return response.getError() ||\n          (response.result.type !== 'string' ? response.result.description : response.result.value as string);\n    }\n\n    if (typeof name === 'string') {\n      name = RemoteObject.toCallArgument(name);\n    }\n\n    const resultPromise = this.doSetObjectPropertyValue(response.result, name);\n\n    if (response.result.objectId) {\n      void this.#runtimeAgent.invoke_releaseObject({objectId: response.result.objectId});\n    }\n\n    return await resultPromise;\n  }\n\n  async doSetObjectPropertyValue(result: Protocol.Runtime.RemoteObject, name: Protocol.Runtime.CallArgument):\n      Promise<string|undefined> {\n    // This assignment may be for a regular (data) property, and for an accessor property (with getter/setter).\n    // Note the sensitive matter about accessor property: the property may be physically defined in some proto object,\n    // but logically it is bound to the object in question. JavaScript passes this object to getters/setters, not the object\n    // where property was defined; so do we.\n    const setPropertyValueFunction = 'function(a, b) { this[a] = b; }';\n\n    const argv = [name, RemoteObject.toCallArgument(result)];\n    const response = await this.#runtimeAgent.invoke_callFunctionOn({\n      objectId: this.#objectId,\n      functionDeclaration: setPropertyValueFunction,\n      arguments: argv,\n      silent: true,\n    });\n    const error = response.getError();\n    return error || response.exceptionDetails ? error || response.result.description : undefined;\n  }\n\n  override async deleteProperty(name: Protocol.Runtime.CallArgument): Promise<string|undefined> {\n    if (!this.#objectId) {\n      return 'Can’t delete a property of non-object.';\n    }\n\n    const deletePropertyFunction = 'function(a) { delete this[a]; return !(a in this); }';\n    const response = await this.#runtimeAgent.invoke_callFunctionOn({\n      objectId: this.#objectId,\n      functionDeclaration: deletePropertyFunction,\n      arguments: [name],\n      silent: true,\n    });\n\n    if (response.getError() || response.exceptionDetails) {\n      return response.getError() || response.result.description;\n    }\n\n    if (!response.result.value) {\n      return 'Failed to delete property.';\n    }\n\n    return undefined;\n  }\n\n  override async callFunction<T, U>(\n      functionDeclaration: (this: U, ...args: any[]) => T,\n      args?: Protocol.Runtime.CallArgument[]): Promise<CallFunctionResult> {\n    const response = await this.#runtimeAgent.invoke_callFunctionOn({\n      objectId: this.#objectId,\n      functionDeclaration: functionDeclaration.toString(),\n      arguments: args,\n      silent: true,\n    });\n    if (response.getError()) {\n      return {object: null, wasThrown: false};\n    }\n    // TODO: release exceptionDetails object\n    return {\n      object: this.#runtimeModel.createRemoteObject(response.result),\n      wasThrown: Boolean(response.exceptionDetails),\n    };\n  }\n\n  override async callFunctionJSON<T, U>(\n      functionDeclaration: (this: U, ...args: any[]) => T,\n      args: Protocol.Runtime.CallArgument[]|undefined): Promise<T|null> {\n    const response = await this.#runtimeAgent.invoke_callFunctionOn({\n      objectId: this.#objectId,\n      functionDeclaration: functionDeclaration.toString(),\n      arguments: args,\n      silent: true,\n      returnByValue: true,\n    });\n    if (response.getError() || response.exceptionDetails) {\n      return null;\n    }\n\n    return response.result.value;\n  }\n\n  override release(): void {\n    if (!this.#objectId) {\n      return;\n    }\n    void this.#runtimeAgent.invoke_releaseObject({objectId: this.#objectId});\n  }\n\n  override arrayLength(): number {\n    return RemoteObject.arrayLength(this);\n  }\n\n  override arrayBufferByteLength(): number {\n    return RemoteObject.arrayBufferByteLength(this);\n  }\n\n  override debuggerModel(): DebuggerModel {\n    return this.#runtimeModel.debuggerModel();\n  }\n\n  override runtimeModel(): RuntimeModel {\n    return this.#runtimeModel;\n  }\n\n  override isNode(): boolean {\n    return Boolean(this.#objectId) && this.type === 'object' && this.subtype === 'node';\n  }\n\n  override isLinearMemoryInspectable(): boolean {\n    return this.type === 'object' && this.subtype !== undefined &&\n        ['webassemblymemory', 'typedarray', 'dataview', 'arraybuffer'].includes(this.subtype);\n  }\n}\n\nexport class ScopeRemoteObject extends RemoteObjectImpl {\n  readonly #scopeRef: ScopeRef;\n  #savedScopeProperties: RemoteObjectProperty[]|undefined;\n\n  constructor(\n      runtimeModel: RuntimeModel, objectId: Protocol.Runtime.RemoteObjectId|undefined, scopeRef: ScopeRef, type: string,\n      subtype: string|undefined, value: typeof RemoteObjectImpl.prototype.value, unserializableValue?: string,\n      description?: string, preview?: Protocol.Runtime.ObjectPreview) {\n    super(runtimeModel, objectId, type, subtype, value, unserializableValue, description, preview);\n    this.#scopeRef = scopeRef;\n    this.#savedScopeProperties = undefined;\n  }\n\n  override async doGetProperties(ownProperties: boolean, accessorPropertiesOnly: boolean, _generatePreview: boolean):\n      Promise<GetPropertiesResult> {\n    if (accessorPropertiesOnly) {\n      return {properties: [], internalProperties: []};\n    }\n\n    if (this.#savedScopeProperties) {\n      // No need to reload scope variables, as the remote object never\n      // changes its #properties. If variable is updated, the #properties\n      // array is patched locally.\n      return {properties: this.#savedScopeProperties.slice(), internalProperties: null};\n    }\n\n    const allProperties = await super.doGetProperties(\n        ownProperties, accessorPropertiesOnly, false /* nonIndexedPropertiesOnly */, true /* generatePreview */);\n    if (Array.isArray(allProperties.properties)) {\n      this.#savedScopeProperties = allProperties.properties.slice();\n    }\n    return allProperties;\n  }\n\n  override async doSetObjectPropertyValue(\n      result: Protocol.Runtime.RemoteObject, argumentName: Protocol.Runtime.CallArgument): Promise<string|undefined> {\n    const name = (argumentName.value as string);\n    const error = await this.debuggerModel().setVariableValue(\n        this.#scopeRef.number, name, RemoteObject.toCallArgument(result), this.#scopeRef.callFrameId);\n    if (error) {\n      return error;\n    }\n    if (this.#savedScopeProperties) {\n      for (const property of this.#savedScopeProperties) {\n        if (property.name === name) {\n          property.value = this.runtimeModel().createRemoteObject(result);\n        }\n      }\n    }\n    return;\n  }\n}\n\nexport class ScopeRef {\n  readonly number: number;\n  readonly callFrameId: Protocol.Debugger.CallFrameId;\n\n  constructor(number: number, callFrameId: Protocol.Debugger.CallFrameId) {\n    this.number = number;\n    this.callFrameId = callFrameId;\n  }\n}\n\nexport class RemoteObjectProperty {\n  name: string;\n  value?: RemoteObject;\n  enumerable: boolean;\n  writable: boolean;\n  isOwn: boolean;\n  wasThrown: boolean;\n  symbol: RemoteObject|undefined;\n  synthetic: boolean;\n  syntheticSetter: ((arg0: string) => Promise<RemoteObject|null>)|undefined;\n\n  private: boolean;\n  getter: RemoteObject|undefined;\n  setter: RemoteObject|undefined;\n\n  webIdl?: RemoteObjectWebIdlPropertyMetadata;\n\n  constructor(\n      name: string, value: RemoteObject|null, enumerable?: boolean, writable?: boolean, isOwn?: boolean,\n      wasThrown?: boolean, symbol?: RemoteObject|null, synthetic?: boolean,\n      syntheticSetter?: ((arg0: string) => Promise<RemoteObject|null>), isPrivate?: boolean) {\n    this.name = name;\n    this.value = value !== null ? value : undefined;\n    this.enumerable = typeof enumerable !== 'undefined' ? enumerable : true;\n    const isNonSyntheticOrSyntheticWritable = !synthetic || Boolean(syntheticSetter);\n    this.writable = typeof writable !== 'undefined' ? writable : isNonSyntheticOrSyntheticWritable;\n    this.isOwn = Boolean(isOwn);\n    this.wasThrown = Boolean(wasThrown);\n    if (symbol) {\n      this.symbol = symbol;\n    }\n    this.synthetic = Boolean(synthetic);\n    if (syntheticSetter) {\n      this.syntheticSetter = syntheticSetter;\n    }\n    this.private = Boolean(isPrivate);\n  }\n\n  async setSyntheticValue(expression: string): Promise<boolean> {\n    if (!this.syntheticSetter) {\n      return false;\n    }\n    const result = await this.syntheticSetter(expression);\n    if (result) {\n      this.value = result;\n    }\n    return Boolean(result);\n  }\n\n  isAccessorProperty(): boolean {\n    return Boolean(this.getter || this.setter);\n  }\n\n  match({includeNullOrUndefinedValues, regex}: {includeNullOrUndefinedValues: boolean, regex: RegExp|null}): boolean {\n    if (regex !== null) {\n      if (!regex.test(this.name) && !regex.test(this.value?.description ?? '')) {\n        return false;\n      }\n    }\n    if (!includeNullOrUndefinedValues) {\n      if (!this.isAccessorProperty() && RemoteObject.isNullOrUndefined(this.value)) {\n        return false;\n      }\n    }\n    return true;\n  }\n\n  cloneWithNewName(newName: string): RemoteObjectProperty {\n    const property = new RemoteObjectProperty(\n        newName, this.value ?? null, this.enumerable, this.writable, this.isOwn, this.wasThrown, this.symbol,\n        this.synthetic, this.syntheticSetter, this.private);\n    property.getter = this.getter;\n    property.setter = this.setter;\n    return property;\n  }\n}\n\n// Below is a wrapper around a local object that implements the RemoteObject interface,\n// which can be used by the UI code (primarily ObjectPropertiesSection).\n// Note that only JSON-compliant objects are currently supported, as there's no provision\n// for traversing prototypes, extracting class names via constructor, handling #properties\n// or functions.\n\nexport class LocalJSONObject extends RemoteObject {\n  #value: typeof RemoteObject.prototype.value;\n  #cachedDescription!: string;\n  #cachedChildren!: RemoteObjectProperty[];\n\n  constructor(value: typeof RemoteObject.prototype.value) {\n    super();\n    this.#value = value;\n  }\n\n  override get objectId(): Protocol.Runtime.RemoteObjectId|undefined {\n    return undefined;\n  }\n\n  override get value(): typeof RemoteObject.prototype.value {\n    return this.#value;\n  }\n\n  override unserializableValue(): string|undefined {\n    const unserializableDescription = RemoteObject.unserializableDescription(this.#value);\n    return unserializableDescription || undefined;\n  }\n\n  override get description(): string {\n    if (this.#cachedDescription) {\n      return this.#cachedDescription;\n    }\n\n    function formatArrayItem(this: LocalJSONObject, property: RemoteObjectProperty): string {\n      return this.formatValue(property.value || null);\n    }\n\n    function formatObjectItem(this: LocalJSONObject, property: RemoteObjectProperty): string {\n      let name: string = property.name;\n      if (/^\\s|\\s$|^$|\\n/.test(name)) {\n        name = '\"' + name.replace(/\\n/g, '\\u21B5') + '\"';\n      }\n      return name + ': ' + this.formatValue(property.value || null);\n    }\n\n    if (this.type === 'object') {\n      switch (this.subtype) {\n        case 'array':\n          this.#cachedDescription = this.concatenate('[', ']', formatArrayItem.bind(this));\n          break;\n        case 'date':\n          this.#cachedDescription = String(this.#value);\n          break;\n        case 'null':\n          this.#cachedDescription = 'null';\n          break;\n        default:\n          this.#cachedDescription = this.concatenate('{', '}', formatObjectItem.bind(this));\n      }\n    } else {\n      this.#cachedDescription = String(this.#value);\n    }\n\n    return this.#cachedDescription;\n  }\n\n  private formatValue(value: RemoteObject|null): string {\n    if (!value) {\n      return 'undefined';\n    }\n    const description = value.description || '';\n    if (value.type === 'string') {\n      return '\"' + description.replace(/\\n/g, '\\u21B5') + '\"';\n    }\n    return description;\n  }\n\n  private concatenate(prefix: string, suffix: string, formatProperty: (arg0: RemoteObjectProperty) => string): string {\n    const previewChars = 100;\n\n    let buffer = prefix;\n    const children = this.children();\n    for (let i = 0; i < children.length; ++i) {\n      const itemDescription = formatProperty(children[i]);\n      if (buffer.length + itemDescription.length > previewChars) {\n        buffer += ',…';\n        break;\n      }\n      if (i) {\n        buffer += ', ';\n      }\n      buffer += itemDescription;\n    }\n    buffer += suffix;\n    return buffer;\n  }\n\n  override get type(): string {\n    return typeof this.#value;\n  }\n\n  override get subtype(): string|undefined {\n    if (this.#value === null) {\n      return 'null';\n    }\n\n    if (Array.isArray(this.#value)) {\n      return 'array';\n    }\n\n    if (this.#value instanceof Date) {\n      return 'date';\n    }\n\n    if (this.#value instanceof Error) {\n      return 'error';\n    }\n\n    return undefined;\n  }\n\n  override get hasChildren(): boolean {\n    if ((typeof this.#value !== 'object') || (this.#value === null)) {\n      return false;\n    }\n    return Boolean(Object.keys(this.#value).length);\n  }\n\n  override async getOwnProperties(_generatePreview: boolean, nonIndexedPropertiesOnly = false):\n      Promise<GetPropertiesResult> {\n    function isArrayIndex(name: string): boolean {\n      const index = Number(name) >>> 0;\n      return String(index) === name;\n    }\n\n    let properties = this.children();\n    if (nonIndexedPropertiesOnly) {\n      properties = properties.filter(property => !isArrayIndex(property.name));\n    }\n    return {properties, internalProperties: null};\n  }\n\n  override async getAllProperties(\n      accessorPropertiesOnly: boolean, generatePreview: boolean,\n      nonIndexedPropertiesOnly = false): Promise<GetPropertiesResult> {\n    if (accessorPropertiesOnly) {\n      return {properties: [], internalProperties: null};\n    }\n    return await this.getOwnProperties(generatePreview, nonIndexedPropertiesOnly);\n  }\n\n  private children(): RemoteObjectProperty[] {\n    if (!this.hasChildren) {\n      return [];\n    }\n    if (!this.#cachedChildren) {\n      this.#cachedChildren = Object.entries(this.#value).map(([name, value]) => {\n        return new RemoteObjectProperty(\n            name, value instanceof RemoteObject ? value : RemoteObject.fromLocalObject(value));\n      });\n    }\n    return this.#cachedChildren;\n  }\n\n  override arrayLength(): number {\n    return Array.isArray(this.#value) ? this.#value.length : 0;\n  }\n\n  override async callFunction<T, U>(\n      functionDeclaration: (this: U, ...args: any[]) => T,\n      args?: Protocol.Runtime.CallArgument[]): Promise<CallFunctionResult> {\n    const target = this.#value as U;\n    const rawArgs = args ? args.map(arg => arg.value) : [];\n\n    let result;\n    let wasThrown = false;\n    try {\n      result = functionDeclaration.apply(target, rawArgs);\n    } catch {\n      wasThrown = true;\n    }\n\n    const object = RemoteObject.fromLocalObject(result);\n\n    return {object, wasThrown};\n  }\n\n  override async callFunctionJSON<T, U>(\n      functionDeclaration: (this: U, ...args: any[]) => T,\n      args: Protocol.Runtime.CallArgument[]|undefined): Promise<T|null> {\n    const target = this.#value as U;\n    const rawArgs = args ? args.map(arg => arg.value) : [];\n\n    let result;\n    try {\n      result = functionDeclaration.apply(target, rawArgs);\n    } catch {\n      result = null;\n    }\n\n    return result;\n  }\n}\n\nexport class RemoteArrayBuffer {\n  readonly #object: RemoteObject;\n  constructor(object: RemoteObject) {\n    if (object.type !== 'object' || object.subtype !== 'arraybuffer') {\n      throw new Error('Object is not an arraybuffer');\n    }\n    this.#object = object;\n  }\n\n  byteLength(): number {\n    return this.#object.arrayBufferByteLength();\n  }\n\n  async bytes(start = 0, end = this.byteLength()): Promise<number[]|null> {\n    if (start < 0 || start >= this.byteLength()) {\n      throw new RangeError('start is out of range');\n    }\n    if (end < start || end > this.byteLength()) {\n      throw new RangeError('end is out of range');\n    }\n    return await this.#object.callFunctionJSON(bytes, [{value: start}, {value: end - start}]);\n\n    function bytes(this: ArrayBuffer, offset: number, length: number): number[] {\n      return [...new Uint8Array(this, offset, length)];\n    }\n  }\n\n  object(): RemoteObject {\n    return this.#object;\n  }\n}\n\nexport class RemoteArray {\n  readonly #object: RemoteObject;\n  constructor(object: RemoteObject) {\n    this.#object = object;\n  }\n\n  static objectAsArray(object: RemoteObject|null): RemoteArray {\n    if (object?.type !== 'object' || (object.subtype !== 'array' && object.subtype !== 'typedarray')) {\n      throw new Error('Object is empty or not an array');\n    }\n    return new RemoteArray(object);\n  }\n\n  static async createFromRemoteObjects(objects: RemoteObject[]): Promise<RemoteArray> {\n    if (!objects.length) {\n      throw new Error('Input array is empty');\n    }\n    const result = await objects[0].callFunction(createArray, objects.map(RemoteObject.toCallArgument));\n    if (result.wasThrown || !result.object) {\n      throw new Error('Call function throws exceptions or returns empty value');\n    }\n    return RemoteArray.objectAsArray(result.object);\n\n    function createArray<T>(...args: T[]): T[] {\n      return args;\n    }\n  }\n\n  async at(index: number): Promise<RemoteObject> {\n    if (index < 0 || index > this.#object.arrayLength()) {\n      throw new Error('Out of range');\n    }\n    const result = await this.#object.callFunction<unknown, unknown[]>(at, [RemoteObject.toCallArgument(index)]);\n    if (result.wasThrown || !result.object) {\n      throw new Error('Exception in callFunction or result value is empty');\n    }\n    return result.object;\n\n    function at<T>(this: T[], index: number): T {\n      return this[index];\n    }\n  }\n\n  length(): number {\n    return this.#object.arrayLength();\n  }\n\n  map<T>(func: (arg0: RemoteObject) => Promise<T>): Promise<T[]> {\n    const promises = [];\n    for (let i = 0; i < this.length(); ++i) {\n      promises.push(this.at(i).then(func));\n    }\n    return Promise.all(promises);\n  }\n\n  object(): RemoteObject {\n    return this.#object;\n  }\n}\n\nexport class RemoteFunction {\n  readonly #object: RemoteObject;\n\n  constructor(object: RemoteObject) {\n    this.#object = object;\n  }\n\n  static objectAsFunction(object: RemoteObject): RemoteFunction {\n    if (object.type !== 'function') {\n      throw new Error('Object is empty or not a function');\n    }\n    return new RemoteFunction(object);\n  }\n\n  async targetFunction(): Promise<RemoteObject> {\n    const ownProperties = await this.#object.getOwnProperties(false /* generatePreview */);\n    const targetFunction = ownProperties.internalProperties?.find(({name}) => name === '[[TargetFunction]]');\n    return targetFunction?.value ?? this.#object;\n  }\n\n  async targetFunctionDetails(): Promise<FunctionDetails|null> {\n    const targetFunction = await this.targetFunction();\n    const functionDetails = await targetFunction.debuggerModel().functionDetailsPromise(targetFunction);\n    if (this.#object !== targetFunction) {\n      targetFunction.release();\n    }\n    return functionDetails;\n  }\n}\n\nexport class RemoteError {\n  readonly #object: RemoteObject;\n\n  #exceptionDetails?: Promise<Protocol.Runtime.ExceptionDetails|undefined>;\n  #cause?: Promise<RemoteObject|undefined>;\n\n  private constructor(object: RemoteObject) {\n    this.#object = object;\n  }\n\n  static objectAsError(object: RemoteObject): RemoteError {\n    if (object.subtype !== 'error') {\n      throw new Error(`Object of type ${object.subtype} is not an error`);\n    }\n    return new RemoteError(object);\n  }\n\n  get errorStack(): string {\n    return this.#object.description ?? '';\n  }\n\n  exceptionDetails(): Promise<Protocol.Runtime.ExceptionDetails|undefined> {\n    if (!this.#exceptionDetails) {\n      this.#exceptionDetails = this.#lookupExceptionDetails();\n    }\n    return this.#exceptionDetails;\n  }\n\n  #lookupExceptionDetails(): Promise<Protocol.Runtime.ExceptionDetails|undefined> {\n    if (this.#object.objectId) {\n      return this.#object.runtimeModel().getExceptionDetails(this.#object.objectId);\n    }\n    return Promise.resolve(undefined);\n  }\n\n  cause(): Promise<RemoteObject|undefined> {\n    if (!this.#cause) {\n      this.#cause = this.#lookupCause();\n    }\n    return this.#cause;\n  }\n\n  async #lookupCause(): Promise<RemoteObject|undefined> {\n    const allProperties =\n        await this.#object.getAllProperties(false /* accessorPropertiesOnly */, false /* generatePreview */);\n    const cause = allProperties.properties?.find(prop => prop.name === 'cause');\n\n    return cause?.value;\n  }\n}\n\nconst descriptionLengthParenRegex = /\\(([0-9]+)\\)/;\nconst descriptionLengthSquareRegex = /\\[([0-9]+)\\]/;\n\nconst enum UnserializableNumber {\n  NEGATIVE_ZERO = ('-0'),\n  NAN = ('NaN'),\n  INFINITY = ('Infinity'),\n  NEGATIVE_INFINITY = ('-Infinity'),\n}\n\nexport interface CallFunctionResult {\n  object: RemoteObject|null;\n  wasThrown?: boolean;\n}\n\nexport interface GetPropertiesResult {\n  properties: RemoteObjectProperty[]|null;\n  internalProperties: RemoteObjectProperty[]|null;\n}\n\nexport interface RemoteObjectWebIdlTypeMetadata {\n  info: DOMPinnedWebIDLType;\n  state: Map<string, string>;\n}\n\nexport interface RemoteObjectWebIdlPropertyMetadata {\n  info: DOMPinnedWebIDLProp;\n  applicable?: boolean;\n}\n\n/**\n * Pair of a linear memory inspectable {@link RemoteObject} and an optional\n * expression, which identifies the variable holding the object in the\n * current scope or the name of the field holding the object.\n *\n * This data structure is used to reveal an object in the Linear Memory\n * Inspector panel.\n */\nexport class LinearMemoryInspectable {\n  /** The linear memory inspectable {@link RemoteObject}. */\n  readonly object: RemoteObject;\n  /** The name of the variable or the field holding the `object`. */\n  readonly expression: string|undefined;\n\n  /**\n   * Wrap `object` and `expression` into a reveable structure.\n   *\n   * @param object A linear memory inspectable {@link RemoteObject}.\n   * @param expression An optional name of the field or variable holding the `object`.\n   */\n  constructor(object: RemoteObject, expression?: string) {\n    if (!object.isLinearMemoryInspectable()) {\n      throw new Error('object must be linear memory inspectable');\n    }\n    this.object = object;\n    this.expression = expression;\n  }\n}\n", "// Copyright 2012 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as TextUtils from '../../models/text_utils/text_utils.js';\nimport * as ScopesCodec from '../../third_party/source-map-scopes-codec/source-map-scopes-codec.js';\nimport * as Common from '../common/common.js';\nimport * as Platform from '../platform/platform.js';\nimport * as Root from '../root/root.js';\n\nimport type {CallFrame, ScopeChainEntry} from './DebuggerModel.js';\nimport {scopeTreeForScript} from './ScopeTreeCache.js';\nimport type {Script} from './Script.js';\nimport {buildOriginalScopes, decodePastaRanges, type NamedFunctionRange} from './SourceMapFunctionRanges.js';\nimport {SourceMapScopesInfo, type TranslatedFrame} from './SourceMapScopesInfo.js';\n\n/**\n * Type of the base source map JSON object, which contains the sources and the mappings at the very least, plus\n * some additional fields.\n *\n * @see {@link SourceMapV3}\n * @see {@link https://docs.google.com/document/d/1U1RGAehQwRypUTovF1KRlpiOFze0b-_2gc6fAH0KY0k Source Map Revision 3 Proposal}\n */\nexport interface SourceMapV3Object {\n  /* eslint-disable @typescript-eslint/naming-convention */\n  version: number;\n  sources: string[];\n  mappings: string;\n\n  file?: string;\n  sourceRoot?: string;\n  sourcesContent?: Array<string|null>;\n\n  names?: string[];\n  ignoreList?: number[];\n  scopes?: string;\n  debugId?: string;\n  x_google_linecount?: number;\n  x_google_ignoreList?: number[];\n  x_com_bloomberg_sourcesFunctionMappings?: string[];\n  /* eslint-enable @typescript-eslint/naming-convention */\n}\n\n/**\n * Type of JSON objects that classify as valid sourcemaps per version 3 of the specification.\n *\n * We support both possible formats, the traditional source map object (represented by the {@link SourceMapV3Object} type),\n * as well as the index map format, which consists of a sequence of sections that each hold source maps objects themselves\n * or URLs to external source map files.\n *\n * @see {@link SourceMapV3Object}\n * @see {@link https://docs.google.com/document/d/1U1RGAehQwRypUTovF1KRlpiOFze0b-_2gc6fAH0KY0k Source Map Revision 3 Proposal}\n */\nexport type SourceMapV3 = SourceMapV3Object|{\n  // clang-format off\n  version: number,\n  sections: Array<{\n    offset: {line: number, column: number},\n    map: SourceMapV3Object,\n  } | {\n    offset: {line: number, column: number},\n    url: string,\n  }>,\n  file?: string,\n  // clang-format on\n};\n\n/**\n * Parses the {@link content} as JSON, ignoring BOM markers in the beginning, and\n * also handling the CORB bypass prefix correctly.\n *\n * @param content the string representation of a sourcemap.\n * @returns the {@link SourceMapV3} representation of the {@link content}.\n */\nexport function parseSourceMap(content: string): SourceMapV3 {\n  if (content.startsWith(')]}')) {\n    content = content.substring(content.indexOf('\\n'));\n  }\n  if (content.charCodeAt(0) === 0xFEFF) {\n    // Strip BOM at the beginning before parsing the JSON.\n    content = content.slice(1);\n  }\n  return JSON.parse(content) as SourceMapV3;\n}\n\nexport type DebugId = Platform.Brand.Brand<string, 'DebugId'>;\n\nexport class SourceMapEntry {\n  readonly lineNumber: number;\n  readonly columnNumber: number;\n  readonly sourceIndex?: number;\n  readonly sourceURL: Platform.DevToolsPath.UrlString|undefined;\n  readonly sourceLineNumber: number;\n  readonly sourceColumnNumber: number;\n  readonly name: string|undefined;\n\n  constructor(\n      lineNumber: number, columnNumber: number, sourceIndex?: number, sourceURL?: Platform.DevToolsPath.UrlString,\n      sourceLineNumber?: number, sourceColumnNumber?: number, name?: string) {\n    this.lineNumber = lineNumber;\n    this.columnNumber = columnNumber;\n    this.sourceIndex = sourceIndex;\n    this.sourceURL = sourceURL;\n    this.sourceLineNumber = (sourceLineNumber as number);\n    this.sourceColumnNumber = (sourceColumnNumber as number);\n    this.name = name;\n  }\n\n  static compare(entry1: SourceMapEntry, entry2: SourceMapEntry): number {\n    if (entry1.lineNumber !== entry2.lineNumber) {\n      return entry1.lineNumber - entry2.lineNumber;\n    }\n    return entry1.columnNumber - entry2.columnNumber;\n  }\n}\n\ninterface SourceInfo {\n  sourceURL: Platform.DevToolsPath.UrlString;\n  content: string|null;\n  ignoreListHint: boolean;\n  reverseMappings: number[]|null;\n}\n\nexport class SourceMap {\n  static retainRawSourceMaps = false;\n\n  #json: SourceMapV3|null;\n  readonly #compiledURL: Platform.DevToolsPath.UrlString;\n  readonly #sourceMappingURL: Platform.DevToolsPath.UrlString;\n  readonly #baseURL: Platform.DevToolsPath.UrlString;\n  #mappings: SourceMapEntry[]|null = null;\n\n  readonly #sourceInfos: SourceInfo[] = [];\n  readonly #sourceInfoByURL = new Map<Platform.DevToolsPath.UrlString, SourceInfo>();\n\n  readonly #script?: Script;\n  #scopesInfo: SourceMapScopesInfo|null = null;\n\n  readonly #debugId?: DebugId;\n\n  scopesFallbackPromiseForTest?: Promise<unknown>;\n\n  /**\n   * Implements Source Map V3 model. See https://github.com/google/closure-compiler/wiki/Source-Maps\n   * for format description.\n   */\n  constructor(\n      compiledURL: Platform.DevToolsPath.UrlString, sourceMappingURL: Platform.DevToolsPath.UrlString,\n      payload: SourceMapV3, script?: Script) {\n    this.#json = payload;\n    this.#script = script;\n    this.#compiledURL = compiledURL;\n    this.#sourceMappingURL = sourceMappingURL;\n    this.#baseURL = (Common.ParsedURL.schemeIs(sourceMappingURL, 'data:')) ? compiledURL : sourceMappingURL;\n    this.#debugId = 'debugId' in payload ? (payload.debugId as DebugId | undefined) : undefined;\n\n    if ('sections' in this.#json) {\n      if (this.#json.sections.find(section => 'url' in section)) {\n        Common.Console.Console.instance().warn(\n            `SourceMap \"${sourceMappingURL}\" contains unsupported \"URL\" field in one of its sections.`);\n      }\n    }\n    this.eachSection(this.parseSources.bind(this));\n  }\n\n  json(): SourceMapV3|null {\n    return this.#json;\n  }\n\n  augmentWithScopes(scriptUrl: Platform.DevToolsPath.UrlString, ranges: NamedFunctionRange[]): void {\n    this.#ensureSourceMapProcessed();\n    if (this.#json && this.#json.version > 3) {\n      throw new Error('Only support augmenting source maps up to version 3.');\n    }\n    // Ensure scriptUrl is associated with sourceMap sources\n    const sourceIdx = this.#sourceIndex(scriptUrl);\n    if (sourceIdx >= 0) {\n      if (!this.#scopesInfo) {\n        // First time seeing this sourcemap, create an new empty scopesInfo object\n        this.#scopesInfo = new SourceMapScopesInfo(this, {scopes: [], ranges: []});\n      }\n      if (!this.#scopesInfo.hasOriginalScopes(sourceIdx)) {\n        const originalScopes = buildOriginalScopes(ranges);\n        this.#scopesInfo.addOriginalScopesAtIndex(sourceIdx, originalScopes);\n      }\n    } else {\n      throw new Error(`Could not find sourceURL ${scriptUrl} in sourceMap`);\n    }\n  }\n\n  #sourceIndex(sourceURL: Platform.DevToolsPath.UrlString): number {\n    return this.#sourceInfos.findIndex(info => info.sourceURL === sourceURL);\n  }\n\n  compiledURL(): Platform.DevToolsPath.UrlString {\n    return this.#compiledURL;\n  }\n\n  url(): Platform.DevToolsPath.UrlString {\n    return this.#sourceMappingURL;\n  }\n\n  debugId(): DebugId|null {\n    return this.#debugId ?? null;\n  }\n\n  sourceURLForSourceIndex(index: number): Platform.DevToolsPath.UrlString|undefined {\n    return this.#sourceInfos[index]?.sourceURL;\n  }\n\n  sourceURLs(): Platform.DevToolsPath.UrlString[] {\n    return [...this.#sourceInfoByURL.keys()];\n  }\n\n  embeddedContentByURL(sourceURL: Platform.DevToolsPath.UrlString): string|null {\n    const entry = this.#sourceInfoByURL.get(sourceURL);\n    if (!entry) {\n      return null;\n    }\n    return entry.content;\n  }\n\n  hasScopeInfo(): boolean {\n    this.#ensureSourceMapProcessed();\n    return this.#scopesInfo !== null && !this.#scopesInfo.isEmpty();\n  }\n\n  findEntry(lineNumber: number, columnNumber: number, inlineFrameIndex?: number): SourceMapEntry|null {\n    this.#ensureSourceMapProcessed();\n    if (inlineFrameIndex && this.#scopesInfo !== null) {\n      // For inlineFrameIndex != 0 we use the callsite info for the corresponding inlining site.\n      // Note that the callsite for \"inlineFrameIndex\" is actually in the previous frame.\n      const {inlinedFunctions} = this.#scopesInfo.findInlinedFunctions(lineNumber, columnNumber);\n      const {callsite} = inlinedFunctions[inlineFrameIndex - 1];\n      if (!callsite) {\n        console.error('Malformed source map. Expected to have a callsite info for index', inlineFrameIndex);\n        return null;\n      }\n      return {\n        lineNumber,\n        columnNumber,\n        sourceIndex: callsite.sourceIndex,\n        sourceURL: this.sourceURLs()[callsite.sourceIndex],\n        sourceLineNumber: callsite.line,\n        sourceColumnNumber: callsite.column,\n        name: undefined,\n      };\n    }\n    const mappings = this.mappings();\n    const index = Platform.ArrayUtilities.upperBound(\n        mappings, undefined, (_, entry) => lineNumber - entry.lineNumber || columnNumber - entry.columnNumber);\n    return index ? mappings[index - 1] : null;\n  }\n\n  findEntryRanges(lineNumber: number, columnNumber: number): {\n    range: TextUtils.TextRange.TextRange,\n    sourceRange: TextUtils.TextRange.TextRange,\n    sourceURL: Platform.DevToolsPath.UrlString,\n  }|null {\n    const mappings = this.mappings();\n    const endIndex = Platform.ArrayUtilities.upperBound(\n        mappings, undefined, (_, entry) => lineNumber - entry.lineNumber || columnNumber - entry.columnNumber);\n    if (!endIndex) {\n      // If the line and column are preceding all the entries, then there is nothing to map.\n      return null;\n    }\n    // startIndex must be within mappings range because endIndex must be not falsy\n    const startIndex = endIndex - 1;\n    const sourceURL = mappings[startIndex].sourceURL;\n    if (!sourceURL) {\n      return null;\n    }\n\n    // Let us compute the range that contains the source position in the compiled code.\n    const endLine = endIndex < mappings.length ? mappings[endIndex].lineNumber : 2 ** 31 - 1;\n    const endColumn = endIndex < mappings.length ? mappings[endIndex].columnNumber : 2 ** 31 - 1;\n    const range = new TextUtils.TextRange.TextRange(\n        mappings[startIndex].lineNumber, mappings[startIndex].columnNumber, endLine, endColumn);\n\n    // Now try to find the corresponding token in the original code.\n    const reverseMappings = this.reversedMappings(sourceURL);\n    const startSourceLine = mappings[startIndex].sourceLineNumber;\n    const startSourceColumn = mappings[startIndex].sourceColumnNumber;\n    const endReverseIndex = Platform.ArrayUtilities.upperBound(\n        reverseMappings, undefined,\n        (_, i) => startSourceLine - mappings[i].sourceLineNumber || startSourceColumn - mappings[i].sourceColumnNumber);\n    if (!endReverseIndex) {\n      return null;\n    }\n    const endSourceLine = endReverseIndex < reverseMappings.length ?\n        mappings[reverseMappings[endReverseIndex]].sourceLineNumber :\n        2 ** 31 - 1;\n    const endSourceColumn = endReverseIndex < reverseMappings.length ?\n        mappings[reverseMappings[endReverseIndex]].sourceColumnNumber :\n        2 ** 31 - 1;\n\n    const sourceRange =\n        new TextUtils.TextRange.TextRange(startSourceLine, startSourceColumn, endSourceLine, endSourceColumn);\n    return {range, sourceRange, sourceURL};\n  }\n\n  sourceLineMapping(sourceURL: Platform.DevToolsPath.UrlString, lineNumber: number, columnNumber: number):\n      SourceMapEntry|null {\n    const mappings = this.mappings();\n    const reverseMappings = this.reversedMappings(sourceURL);\n    const first = Platform.ArrayUtilities.lowerBound(reverseMappings, lineNumber, lineComparator);\n    const last = Platform.ArrayUtilities.upperBound(reverseMappings, lineNumber, lineComparator);\n    if (first >= reverseMappings.length || mappings[reverseMappings[first]].sourceLineNumber !== lineNumber) {\n      return null;\n    }\n    const columnMappings = reverseMappings.slice(first, last);\n    if (!columnMappings.length) {\n      return null;\n    }\n    const index = Platform.ArrayUtilities.lowerBound(\n        columnMappings, columnNumber, (columnNumber, i) => columnNumber - mappings[i].sourceColumnNumber);\n    return index >= columnMappings.length ? mappings[columnMappings[columnMappings.length - 1]] :\n                                            mappings[columnMappings[index]];\n\n    function lineComparator(lineNumber: number, i: number): number {\n      return lineNumber - mappings[i].sourceLineNumber;\n    }\n  }\n\n  private findReverseIndices(sourceURL: Platform.DevToolsPath.UrlString, lineNumber: number, columnNumber: number):\n      number[] {\n    const mappings = this.mappings();\n    const reverseMappings = this.reversedMappings(sourceURL);\n    const endIndex = Platform.ArrayUtilities.upperBound(\n        reverseMappings, undefined,\n        (_, i) => lineNumber - mappings[i].sourceLineNumber || columnNumber - mappings[i].sourceColumnNumber);\n    let startIndex = endIndex;\n    while (startIndex > 0 &&\n           mappings[reverseMappings[startIndex - 1]].sourceLineNumber ===\n               mappings[reverseMappings[endIndex - 1]].sourceLineNumber &&\n           mappings[reverseMappings[startIndex - 1]].sourceColumnNumber ===\n               mappings[reverseMappings[endIndex - 1]].sourceColumnNumber) {\n      --startIndex;\n    }\n\n    return reverseMappings.slice(startIndex, endIndex);\n  }\n\n  findReverseEntries(sourceURL: Platform.DevToolsPath.UrlString, lineNumber: number, columnNumber: number):\n      SourceMapEntry[] {\n    const mappings = this.mappings();\n    return this.findReverseIndices(sourceURL, lineNumber, columnNumber).map(i => mappings[i]);\n  }\n\n  findReverseRanges(sourceURL: Platform.DevToolsPath.UrlString, lineNumber: number, columnNumber: number):\n      TextUtils.TextRange.TextRange[] {\n    const mappings = this.mappings();\n    const indices = this.findReverseIndices(sourceURL, lineNumber, columnNumber);\n    const ranges: TextUtils.TextRange.TextRange[] = [];\n\n    for (let i = 0; i < indices.length; ++i) {\n      const startIndex = indices[i];\n\n      // Merge adjacent ranges.\n      let endIndex = startIndex + 1;\n      while (i + 1 < indices.length && endIndex === indices[i + 1]) {\n        ++endIndex;\n        ++i;\n      }\n\n      // Source maps don't contain end positions for entries, but each entry is assumed to\n      // span until the following entry. This doesn't work however in case of the last\n      // entry, where there's no following entry. We also don't know the number of lines\n      // and columns in the original source code (which might not be available at all), so\n      // for that case we store the maximum signed 32-bit integer, which is definitely going\n      // to be larger than any script we can process and can safely be serialized as part of\n      // the skip list we send to V8 with `Debugger.stepOver` (http://crbug.com/1305956).\n      const startLine = mappings[startIndex].lineNumber;\n      const startColumn = mappings[startIndex].columnNumber;\n      const endLine = endIndex < mappings.length ? mappings[endIndex].lineNumber : 2 ** 31 - 1;\n      const endColumn = endIndex < mappings.length ? mappings[endIndex].columnNumber : 2 ** 31 - 1;\n      ranges.push(new TextUtils.TextRange.TextRange(startLine, startColumn, endLine, endColumn));\n    }\n\n    return ranges;\n  }\n\n  mappings(): SourceMapEntry[] {\n    this.#ensureSourceMapProcessed();\n    return this.#mappings ?? [];\n  }\n\n  /**\n   * If the source map does not contain scope information by itself (e.g. \"scopes proposal\"\n   * or \"pasta\" scopes), then we'll use this getter to calculate basic function name information from\n   * the AST and mappings.\n   */\n  async #buildScopesFallback(): Promise<SourceMapScopesInfo|null> {\n    const scopeTreeAndText = this.#script ? await scopeTreeForScript(this.#script) : null;\n    if (!scopeTreeAndText) {\n      return null;\n    }\n\n    const {scopeTree, text} = scopeTreeAndText;\n    return SourceMapScopesInfo.createFromAst(this, scopeTree, text);\n  }\n\n  private reversedMappings(sourceURL: Platform.DevToolsPath.UrlString): number[] {\n    this.#ensureSourceMapProcessed();\n    return this.#sourceInfoByURL.get(sourceURL)?.reverseMappings ?? [];\n  }\n\n  #ensureSourceMapProcessed(): void {\n    if (this.#mappings === null) {\n      this.#mappings = [];\n      try {\n        this.eachSection(this.parseMap.bind(this));\n        if (!this.hasScopeInfo()) {\n          this.scopesFallbackPromiseForTest = this.#buildScopesFallback().then(info => {\n            this.#scopesInfo = info;\n          });\n        }\n      } catch (e) {\n        console.error('Failed to parse source map', e);\n        this.#mappings = [];\n      }\n\n      // As per spec, mappings are not necessarily sorted.\n      this.mappings().sort(SourceMapEntry.compare);\n\n      this.#computeReverseMappings(this.#mappings);\n    }\n\n    if (!SourceMap.retainRawSourceMaps) {\n      this.#json = null;\n    }\n  }\n\n  #computeReverseMappings(mappings: SourceMapEntry[]): void {\n    const reverseMappingsPerUrl = new Map<Platform.DevToolsPath.UrlString, number[]>();\n    for (let i = 0; i < mappings.length; i++) {\n      const entryUrl = mappings[i]?.sourceURL;\n      if (!entryUrl) {\n        continue;\n      }\n      let reverseMap = reverseMappingsPerUrl.get(entryUrl);\n      if (!reverseMap) {\n        reverseMap = [];\n        reverseMappingsPerUrl.set(entryUrl, reverseMap);\n      }\n      reverseMap.push(i);\n    }\n\n    for (const [url, reverseMap] of reverseMappingsPerUrl.entries()) {\n      const info = this.#sourceInfoByURL.get(url);\n      if (!info) {\n        continue;\n      }\n      reverseMap.sort(sourceMappingComparator);\n      info.reverseMappings = reverseMap;\n    }\n\n    function sourceMappingComparator(indexA: number, indexB: number): number {\n      const a = mappings[indexA];\n      const b = mappings[indexB];\n      return a.sourceLineNumber - b.sourceLineNumber || a.sourceColumnNumber - b.sourceColumnNumber ||\n          a.lineNumber - b.lineNumber || a.columnNumber - b.columnNumber;\n    }\n  }\n\n  private eachSection(callback: (arg0: SourceMapV3Object, arg1: number, arg2: number, arg3: number) => void): void {\n    if (!this.#json) {\n      return;\n    }\n    if ('sections' in this.#json) {\n      let sourcesIndex = 0;\n      for (const section of this.#json.sections) {\n        if ('map' in section) {\n          callback(section.map, sourcesIndex, section.offset.line, section.offset.column);\n          sourcesIndex += section.map.sources.length;\n        }\n      }\n    } else {\n      callback(this.#json, 0, 0, 0);\n    }\n  }\n\n  private parseSources(sourceMap: SourceMapV3Object): void {\n    const sourceRoot = sourceMap.sourceRoot ?? '';\n    const ignoreList = new Set(sourceMap.ignoreList ?? sourceMap.x_google_ignoreList);\n    for (let i = 0; i < sourceMap.sources.length; ++i) {\n      let href = sourceMap.sources[i];\n      // The source map v3 proposal says to prepend the sourceRoot to the source URL\n      // and if the resulting URL is not absolute, then resolve the source URL against\n      // the source map URL. Prepending the sourceRoot (if one exists) is not likely to\n      // be meaningful or useful if the source URL is already absolute though. In this\n      // case, use the source URL as is without prepending the sourceRoot.\n      if (Common.ParsedURL.ParsedURL.isRelativeURL(href)) {\n        if (sourceRoot && !sourceRoot.endsWith('/') && href && !href.startsWith('/')) {\n          href = sourceRoot.concat('/', href);\n        } else {\n          href = sourceRoot.concat(href);\n        }\n      }\n      const url =\n          Common.ParsedURL.ParsedURL.completeURL(this.#baseURL, href) || (href as Platform.DevToolsPath.UrlString);\n      const source = sourceMap.sourcesContent?.[i];\n      const sourceInfo: SourceInfo = {\n        sourceURL: url,\n        content: source ?? null,\n        ignoreListHint: ignoreList.has(i),\n        reverseMappings: null,\n      };\n      this.#sourceInfos.push(sourceInfo);\n      if (!this.#sourceInfoByURL.has(url)) {\n        this.#sourceInfoByURL.set(url, sourceInfo);\n      }\n    }\n  }\n\n  private parseMap(map: SourceMapV3Object, baseSourceIndex: number, baseLineNumber: number, baseColumnNumber: number):\n      void {\n    let sourceIndex = baseSourceIndex;\n    let lineNumber = baseLineNumber;\n    let columnNumber = baseColumnNumber;\n    let sourceLineNumber = 0;\n    let sourceColumnNumber = 0;\n    let nameIndex = 0;\n    const names = map.names ?? [];\n    const tokenIter = new TokenIterator(map.mappings);\n    let sourceURL: Platform.DevToolsPath.UrlString|undefined = this.#sourceInfos[sourceIndex]?.sourceURL;\n\n    while (true) {\n      if (tokenIter.peek() === ',') {\n        tokenIter.next();\n      } else {\n        while (tokenIter.peek() === ';') {\n          lineNumber += 1;\n          columnNumber = 0;\n          tokenIter.next();\n        }\n        if (!tokenIter.hasNext()) {\n          break;\n        }\n      }\n\n      columnNumber += tokenIter.nextVLQ();\n      if (!tokenIter.hasNext() || this.isSeparator(tokenIter.peek())) {\n        this.mappings().push(new SourceMapEntry(lineNumber, columnNumber));\n        continue;\n      }\n\n      const sourceIndexDelta = tokenIter.nextVLQ();\n      if (sourceIndexDelta) {\n        sourceIndex += sourceIndexDelta;\n        sourceURL = this.#sourceInfos[sourceIndex]?.sourceURL;\n      }\n      sourceLineNumber += tokenIter.nextVLQ();\n      sourceColumnNumber += tokenIter.nextVLQ();\n\n      if (!tokenIter.hasNext() || this.isSeparator(tokenIter.peek())) {\n        this.mappings().push(\n            new SourceMapEntry(lineNumber, columnNumber, sourceIndex, sourceURL, sourceLineNumber, sourceColumnNumber));\n        continue;\n      }\n\n      nameIndex += tokenIter.nextVLQ();\n      this.mappings().push(new SourceMapEntry(\n          lineNumber, columnNumber, sourceIndex, sourceURL, sourceLineNumber, sourceColumnNumber, names[nameIndex]));\n    }\n\n    if (Root.Runtime.experiments.isEnabled(Root.Runtime.ExperimentName.USE_SOURCE_MAP_SCOPES)) {\n      if (!this.#scopesInfo) {\n        this.#scopesInfo = new SourceMapScopesInfo(this, {scopes: [], ranges: []});\n      }\n      if (map.scopes) {\n        const {scopes, ranges} = ScopesCodec.decode(\n            map as ScopesCodec.SourceMapJson,\n            {mode: ScopesCodec.DecodeMode.LAX, generatedOffset: {line: baseLineNumber, column: baseColumnNumber}});\n        this.#scopesInfo.addOriginalScopes(scopes);\n        this.#scopesInfo.addGeneratedRanges(ranges);\n      } else if (map.x_com_bloomberg_sourcesFunctionMappings) {\n        const originalScopes = this.parseBloombergScopes(map);\n        this.#scopesInfo.addOriginalScopes(originalScopes);\n      } else {\n        // Keep the OriginalScope[] tree array consistent with sources.\n        this.#scopesInfo.addOriginalScopes(new Array(map.sources.length).fill(null));\n      }\n    }\n  }\n\n  private parseBloombergScopes(map: SourceMapV3Object): Array<ScopesCodec.OriginalScope|null> {\n    const scopeList = map.x_com_bloomberg_sourcesFunctionMappings;\n    if (!scopeList) {\n      throw new Error('Cant decode pasta scopes without x_com_bloomberg_sourcesFunctionMappings field');\n    } else if (scopeList.length !== map.sources.length) {\n      throw new Error(`x_com_bloomberg_sourcesFunctionMappings must have ${map.sources.length} scope trees`);\n    }\n    const names = map.names ?? [];\n\n    return scopeList.map(rawScopes => {\n      if (!rawScopes) {\n        return null;\n      }\n      const ranges = decodePastaRanges(rawScopes, names);\n      return buildOriginalScopes(ranges);\n    });\n  }\n\n  private isSeparator(char: string): boolean {\n    return char === ',' || char === ';';\n  }\n\n  /**\n   * Finds all the reverse mappings that intersect with the given `textRange` within the\n   * source entity identified by the `url`. If the `url` does not have any reverse mappings\n   * within this source map, an empty array is returned.\n   *\n   * @param url the URL of the source entity to query.\n   * @param textRange the range of text within the entity to check, considered `[start,end[`.\n   * @returns the list of ranges in the generated file that map to locations overlapping the\n   *          {@link textRange} in the source file identified by the {@link url}, or `[]`\n   *          if the {@link url} does not identify an entity in this source map.\n   */\n  reverseMapTextRanges(url: Platform.DevToolsPath.UrlString, textRange: TextUtils.TextRange.TextRange):\n      TextUtils.TextRange.TextRange[] {\n    const reverseMappings = this.reversedMappings(url);\n    const mappings = this.mappings();\n    if (reverseMappings.length === 0) {\n      return [];\n    }\n\n    // Determine the first reverse mapping that contains the starting point of the `textRange`.\n    let startReverseIndex =\n        Platform.ArrayUtilities.lowerBound(reverseMappings, textRange, ({startLine, startColumn}, index) => {\n          const {sourceLineNumber, sourceColumnNumber} = mappings[index];\n          return startLine - sourceLineNumber || startColumn - sourceColumnNumber;\n        });\n\n    // Check if the current mapping does not start on the exact start of the `textRange`, and if\n    // so we know that a previous mapping entry (if any) would also overlap. If we reach the end\n    // of the reverse mappings table, we just take the last entry and report that.\n    while (startReverseIndex === reverseMappings.length ||\n           startReverseIndex > 0 &&\n               (mappings[reverseMappings[startReverseIndex]].sourceLineNumber > textRange.startLine ||\n                mappings[reverseMappings[startReverseIndex]].sourceColumnNumber > textRange.startColumn)) {\n      startReverseIndex--;\n    }\n\n    // Determine the last reverse mapping that contains the end point of the `textRange`.\n    let endReverseIndex = startReverseIndex + 1;\n    for (; endReverseIndex < reverseMappings.length; ++endReverseIndex) {\n      const {sourceLineNumber, sourceColumnNumber} = mappings[reverseMappings[endReverseIndex]];\n      if (sourceLineNumber < textRange.endLine ||\n          (sourceLineNumber === textRange.endLine && sourceColumnNumber < textRange.endColumn)) {\n        continue;\n      }\n      break;\n    }\n\n    // Create the ranges...\n    const ranges = [];\n    for (let reverseIndex = startReverseIndex; reverseIndex < endReverseIndex; ++reverseIndex) {\n      const startIndex = reverseMappings[reverseIndex], endIndex = startIndex + 1;\n      const range = TextUtils.TextRange.TextRange.createUnboundedFromLocation(\n          mappings[startIndex].lineNumber, mappings[startIndex].columnNumber);\n      if (endIndex < mappings.length) {\n        range.endLine = mappings[endIndex].lineNumber;\n        range.endColumn = mappings[endIndex].columnNumber;\n      }\n      ranges.push(range);\n    }\n\n    // ...sort them...\n    ranges.sort(TextUtils.TextRange.TextRange.comparator);\n\n    // ...and ensure they are maximally merged.\n    let j = 0;\n    for (let i = 1; i < ranges.length; ++i) {\n      if (ranges[j].immediatelyPrecedes(ranges[i])) {\n        ranges[j].endLine = ranges[i].endLine;\n        ranges[j].endColumn = ranges[i].endColumn;\n      } else {\n        ranges[++j] = ranges[i];\n      }\n    }\n    ranges.length = j + 1;\n\n    return ranges;\n  }\n\n  mapsOrigin(): boolean {\n    const mappings = this.mappings();\n    if (mappings.length > 0) {\n      const firstEntry = mappings[0];\n      return firstEntry?.lineNumber === 0 || firstEntry.columnNumber === 0;\n    }\n    return false;\n  }\n\n  hasIgnoreListHint(sourceURL: Platform.DevToolsPath.UrlString): boolean {\n    return this.#sourceInfoByURL.get(sourceURL)?.ignoreListHint ?? false;\n  }\n\n  /**\n   * Returns a list of ranges in the generated script for original sources that\n   * match a predicate. Each range is a [begin, end) pair, meaning that code at\n   * the beginning location, up to but not including the end location, matches\n   * the predicate.\n   */\n  findRanges(predicate: (sourceURL: Platform.DevToolsPath.UrlString) => boolean, options?: {isStartMatching: boolean}):\n      TextUtils.TextRange.TextRange[] {\n    const mappings = this.mappings();\n    const ranges = [];\n\n    if (!mappings.length) {\n      return [];\n    }\n\n    let current: TextUtils.TextRange.TextRange|null = null;\n\n    // If the first mapping isn't at the beginning of the original source, it's\n    // up to the caller to decide if it should be considered matching the\n    // predicate or not. By default, it's not.\n    if ((mappings[0].lineNumber !== 0 || mappings[0].columnNumber !== 0) && options?.isStartMatching) {\n      current = TextUtils.TextRange.TextRange.createUnboundedFromLocation(0, 0);\n      ranges.push(current);\n    }\n\n    for (const {sourceURL, lineNumber, columnNumber} of mappings) {\n      const ignoreListHint = sourceURL && predicate(sourceURL);\n\n      if (!current && ignoreListHint) {\n        current = TextUtils.TextRange.TextRange.createUnboundedFromLocation(lineNumber, columnNumber);\n        ranges.push(current);\n        continue;\n      }\n      if (current && !ignoreListHint) {\n        current.endLine = lineNumber;\n        current.endColumn = columnNumber;\n        current = null;\n      }\n    }\n\n    return ranges;\n  }\n\n  /**\n   * Determines whether this and the {@link other} `SourceMap` agree on content and ignore-list hint\n   * with respect to the {@link sourceURL}.\n   *\n   * @param sourceURL the URL to test for (might not be provided by either of the sourcemaps).\n   * @param other the other `SourceMap` to check.\n   * @returns `true` if both this and the {@link other} `SourceMap` either both have the ignore-list\n   *          hint for {@link sourceURL} or neither, and if both of them either provide the same\n   *          content for the {@link sourceURL} inline or both provide no `sourcesContent` entry\n   *          for it.\n   */\n  compatibleForURL(sourceURL: Platform.DevToolsPath.UrlString, other: SourceMap): boolean {\n    return this.embeddedContentByURL(sourceURL) === other.embeddedContentByURL(sourceURL) &&\n        this.hasIgnoreListHint(sourceURL) === other.hasIgnoreListHint(sourceURL);\n  }\n\n  expandCallFrame(frame: CallFrame): CallFrame[] {\n    this.#ensureSourceMapProcessed();\n    if (this.#scopesInfo === null) {\n      return [frame];\n    }\n\n    return this.#scopesInfo.expandCallFrame(frame);\n  }\n\n  resolveScopeChain(frame: CallFrame): ScopeChainEntry[]|null {\n    this.#ensureSourceMapProcessed();\n    if (this.#scopesInfo === null) {\n      return null;\n    }\n\n    return this.#scopesInfo.resolveMappedScopeChain(frame);\n  }\n\n  findOriginalFunctionName(position: ScopesCodec.Position): string|null {\n    this.#ensureSourceMapProcessed();\n    return this.#scopesInfo?.findOriginalFunctionName(position) ?? null;\n  }\n\n  findOriginalFunctionScope(position: ScopesCodec.Position):\n      {scope: ScopesCodec.OriginalScope, url?: Platform.DevToolsPath.UrlString}|null {\n    this.#ensureSourceMapProcessed();\n    return this.#scopesInfo?.findOriginalFunctionScope(position) ?? null;\n  }\n\n  isOutlinedFrame(generatedLine: number, generatedColumn: number): boolean {\n    this.#ensureSourceMapProcessed();\n    return this.#scopesInfo?.isOutlinedFrame(generatedLine, generatedColumn) ?? false;\n  }\n\n  hasInlinedFrames(generatedLine: number, generatedColumn: number): boolean {\n    this.#ensureSourceMapProcessed();\n    return this.#scopesInfo?.hasInlinedFrames(generatedLine, generatedColumn) ?? false;\n  }\n\n  translateCallSite(generatedLine: number, generatedColumn: number): TranslatedFrame[] {\n    this.#ensureSourceMapProcessed();\n    return this.#scopesInfo?.translateCallSite(generatedLine, generatedColumn) ?? [];\n  }\n}\n\nconst VLQ_BASE_SHIFT = 5;\nconst VLQ_BASE_MASK = (1 << 5) - 1;\nconst VLQ_CONTINUATION_MASK = 1 << 5;\n\nexport class TokenIterator {\n  readonly #string: string;\n  #position: number;\n\n  constructor(string: string) {\n    this.#string = string;\n    this.#position = 0;\n  }\n\n  next(): string {\n    return this.#string.charAt(this.#position++);\n  }\n\n  /** Returns the unicode value of the next character and advances the iterator  */\n  nextCharCode(): number {\n    return this.#string.charCodeAt(this.#position++);\n  }\n\n  peek(): string {\n    return this.#string.charAt(this.#position);\n  }\n\n  hasNext(): boolean {\n    return this.#position < this.#string.length;\n  }\n\n  nextVLQ(): number {\n    // Read unsigned value.\n    let result = 0;\n    let shift = 0;\n    let digit: number = VLQ_CONTINUATION_MASK;\n    while (digit & VLQ_CONTINUATION_MASK) {\n      if (!this.hasNext()) {\n        throw new Error('Unexpected end of input while decodling VLQ number!');\n      }\n      const charCode = this.nextCharCode();\n      digit = Common.Base64.BASE64_CODES[charCode];\n      if (charCode !== 65 /* 'A' */ && digit === 0) {\n        throw new Error(`Unexpected char '${String.fromCharCode(charCode)}' encountered while decoding`);\n      }\n      result += (digit & VLQ_BASE_MASK) << shift;\n      shift += VLQ_BASE_SHIFT;\n    }\n\n    // Fix the sign.\n    const negative = result & 1;\n    result >>= 1;\n    return negative ? -result : result;\n  }\n\n  /**\n   * @returns the next VLQ number without iterating further. Or returns null if\n   * the iterator is at the end or it's not a valid number.\n   */\n  peekVLQ(): null|number {\n    const pos = this.#position;\n    try {\n      return this.nextVLQ();\n    } catch {\n      return null;\n    } finally {\n      this.#position = pos;  // Reset the iterator.\n    }\n  }\n}\n", "// Copyright 2023 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as Formatter from '../../models/formatter/formatter.js';\nimport * as TextUtils from '../../models/text_utils/text_utils.js';\n\nimport type {Script} from './Script.js';\n\ntype ScopeTreeNode = Formatter.FormatterWorkerPool.ScopeTreeNode;\ntype Text = TextUtils.Text.Text;\n\n/** If a script failed to parse, we stash null in order to prevent unnecessary re-parsing */\nconst scopeTrees = new WeakMap<Script, Promise<{scopeTree: ScopeTreeNode, text: Text}|null>>();\n\n/**\n * Computes and caches the scope tree for `script`.\n *\n * We use {@link Script} as a key to uniquely identify scripts.\n * {@link Script} boils down to \"target\" + \"script ID\". This\n * duplicates work in case of identical script running on multiple targets\n * (e.g. workers).\n *\n * We also return a {@link TextUtils.Text.Text} instance. The scope tree uses offsets\n * and the text allows conversion from/to line/column numbers.\n */\nexport function scopeTreeForScript(script: Script): Promise<{scopeTree: ScopeTreeNode, text: Text}|null> {\n  let promise = scopeTrees.get(script);\n  if (promise === undefined) {\n    promise = script.requestContentData().then(content => {\n      if (TextUtils.ContentData.ContentData.isError(content)) {\n        return null;\n      }\n\n      const sourceType = script.isModule ? 'module' : 'script';\n      return Formatter.FormatterWorkerPool.formatterWorkerPool()\n          .javaScriptScopeTree(content.text, sourceType)\n          .then(scopeTree => scopeTree ? ({scopeTree, text: content.textObj}) : null)\n          .catch(() => null);\n    });\n    scopeTrees.set(script, promise);\n  }\n  // We intentionally return `null` here if the script already failed to parse once.\n  return promise;\n}\n", "// Copyright 2025 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport type * as ScopesCodec from '../../third_party/source-map-scopes-codec/source-map-scopes-codec.js';\n\nimport {TokenIterator} from './SourceMap.js';\n\nexport interface NamedFunctionRange {\n  start: ScopesCodec.Position;\n  end: ScopesCodec.Position;\n  name: string;\n}\n\n/**\n * Turns a list of {@link NamedFunctionRange}s into a single {@link OriginalScope} tree nested\n * according to the start/end position. Each range is turned into a OriginalScope with the `isStackFrame`\n * bit set to denote it as a function and a generic \"Function\" label.\n *\n * We nest all these function scopes underneath a single global scope that always starts at (0, 0) and\n * reaches to the largest end position.\n *\n * `ranges` can be unsorted but will be sorted in-place.\n *\n * @throws if the ranges are not nested properly. Concretely: start < end for each range, and no\n * \"straddling\" (i.e. partially overlapping ranges).\n */\nexport function buildOriginalScopes(ranges: NamedFunctionRange[]): ScopesCodec.OriginalScope {\n  validateStartBeforeEnd(ranges);\n\n  // 1. Sort ranges by ascending start position.\n  //    If two ranges have the same start position, we sort the one\n  //    with the higher end position first, because it's the parent.\n  ranges.sort((a, b) => comparePositions(a.start, b.start) || comparePositions(b.end, a.end));\n\n  const root: ScopesCodec.OriginalScope = {\n    start: {line: 0, column: 0},\n    end: {line: Number.POSITIVE_INFINITY, column: Number.POSITIVE_INFINITY},\n    kind: 'Global',\n    isStackFrame: false,\n    children: [],\n    variables: [],\n  };\n\n  // 2. Build the tree from the ranges.\n  const stack: ScopesCodec.OriginalScope[] = [root];\n  for (const range of ranges) {\n    // Pop all scopes that precede the current entry (to find the right parent).\n    let stackTop = stack.at(-1) as ScopesCodec.OriginalScope;\n    while (true) {\n      if (comparePositions(stackTop.end, range.start) <= 0) {\n        stack.pop();\n        stackTop = stack.at(-1) as ScopesCodec.OriginalScope;\n      } else {\n        break;\n      }\n    }\n\n    /*\n     * Check for partially overlapping ranges:\n     *\n     * --- A\n     *  |  --- B\n     * ---  |\n     *     ---\n     *\n     *i.e.: B.start < A.end < B.end\n     */\n    if (comparePositions(range.start, stackTop.end) < 0 && comparePositions(stackTop.end, range.end) < 0) {\n      throw new Error(`Range ${JSON.stringify(range)} and ${JSON.stringify(stackTop)} partially overlap.`);\n    }\n\n    const scope = createScopeFrom(range);\n    stackTop.children.push(scope);\n    stack.push(scope);\n  }\n\n  // 3. Update root.end.\n  const lastChild = root.children.at(-1);\n  if (lastChild) {\n    root.end = lastChild.end;\n  }\n\n  return root;\n}\n\nfunction validateStartBeforeEnd(ranges: NamedFunctionRange[]): void {\n  for (const range of ranges) {\n    if (comparePositions(range.start, range.end) >= 0) {\n      throw new Error(`Invalid range. End before start: ${JSON.stringify(range)}`);\n    }\n  }\n}\n\nfunction createScopeFrom(range: NamedFunctionRange): ScopesCodec.OriginalScope {\n  return {\n    ...range,\n    kind: 'Function',\n    isStackFrame: true,\n    children: [],\n    variables: [],\n  };\n}\n\n/**\n * Implements decoding of the pasta source map specification.\n *\n * See https://github.com/bloomberg/pasta-sourcemaps/blob/main/spec.md\n */\nexport function decodePastaRanges(encodedRanges: string, names: string[]): NamedFunctionRange[] {\n  const result: NamedFunctionRange[] = [];\n\n  let nameIndex = 0;\n  let startLineNumber = 0;\n  let startColumnNumber = 0;\n  let endLineNumber = 0;\n  let endColumnNumber = 0;\n\n  const tokenIter = new TokenIterator(encodedRanges);\n  let atStart = true;\n  while (tokenIter.hasNext()) {\n    if (atStart) {\n      atStart = false;\n    } else if (tokenIter.peek() === ',') {\n      tokenIter.next();\n    } else {\n      // Unexpected character. Return what we have up until now.\n      break;\n    }\n\n    nameIndex += tokenIter.nextVLQ();\n    startLineNumber = endLineNumber + tokenIter.nextVLQ();\n    startColumnNumber += tokenIter.nextVLQ();\n    endLineNumber = startLineNumber + tokenIter.nextVLQ();\n    endColumnNumber += tokenIter.nextVLQ();\n\n    const name = names[nameIndex];\n    if (name === undefined) {\n      // If the range doesn't have a valid name, ignore it.\n      continue;\n    }\n\n    result.push({\n      start: {line: startLineNumber, column: startColumnNumber},\n      end: {line: endLineNumber, column: endColumnNumber},\n      name,\n    });\n  }\n\n  return result;\n}\n\n/** @returns 0 if both positions are equal, a negative number if a < b and a positive number if a > b */\nfunction comparePositions(a: ScopesCodec.Position, b: ScopesCodec.Position): number {\n  return a.line - b.line || a.column - b.column;\n}\n", "// Copyright 2024 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as Protocol from '../../generated/protocol.js';\nimport * as Formatter from '../../models/formatter/formatter.js';\nimport type * as TextUtils from '../../models/text_utils/text_utils.js';\nimport type * as ScopesCodec from '../../third_party/source-map-scopes-codec/source-map-scopes-codec.js';\nimport type * as Platform from '../platform/platform.js';\n\nimport type {CallFrame, ScopeChainEntry} from './DebuggerModel.js';\nimport type {SourceMap} from './SourceMap.js';\nimport {SourceMapScopeChainEntry} from './SourceMapScopeChainEntry.js';\n\nexport class SourceMapScopesInfo {\n  readonly #sourceMap: SourceMap;\n  readonly #originalScopes: Array<ScopesCodec.OriginalScope|null>;\n  readonly #generatedRanges: ScopesCodec.GeneratedRange[];\n\n  #cachedVariablesAndBindingsPresent: boolean|null = null;\n\n  constructor(sourceMap: SourceMap, scopeInfo: ScopesCodec.ScopeInfo) {\n    this.#sourceMap = sourceMap;\n    this.#originalScopes = scopeInfo.scopes;\n    this.#generatedRanges = scopeInfo.ranges;\n  }\n\n  /**\n   * If the source map does not contain any scopes information, this factory function attempts to create scope information\n   * via the script's AST combined with the mappings.\n   *\n   * We create the generated ranges from the scope tree and for each range we create an original scope that matches the bounds 1:1.\n   */\n  static createFromAst(\n      sourceMap: SourceMap, scopeTree: Formatter.FormatterWorkerPool.ScopeTreeNode,\n      text: TextUtils.Text.Text): SourceMapScopesInfo {\n    const numSourceUrls = sourceMap.sourceURLs().length;\n    const scopeBySourceUrl: ScopesCodec.OriginalScope[] = [];\n    for (let i = 0; i < numSourceUrls; i++) {\n      const scope: ScopesCodec.OriginalScope = {\n        start: {line: 0, column: 0},\n        end: {line: Number.POSITIVE_INFINITY, column: Number.POSITIVE_INFINITY},\n        isStackFrame: false,\n        variables: [],\n        children: [],\n      };\n      scopeBySourceUrl.push(scope);\n    }\n\n    // Convert the entire scopeTree. Returns a root range that encompasses everything,\n    // and inserts scopes by sourceIndex into the above scopeBySourceUrl.\n    const {range} = convertScope(scopeTree, undefined);\n    return new SourceMapScopesInfo(sourceMap, {scopes: scopeBySourceUrl, ranges: [range]});\n\n    /**\n     * Recursively finds the correct place in the tree to insert the new scope.\n     * Maintains the invariant that children are sorted and contained by their parent.\n     */\n    function insertInScope(parent: ScopesCodec.OriginalScope, newScope: ScopesCodec.OriginalScope): void {\n      // Check if the newScope fits strictly inside any of the existing children.\n      for (const child of parent.children) {\n        if (contains(child, newScope)) {\n          insertInScope(child, newScope);\n          return;\n        }\n      }\n\n      // When here, newScope belongs directly in parent.\n      // However, newScope might encompass some of parent's existing children (due\n      // to compiler transform quirks or arbitrary insertion order). We must move\n      // those children inside newScope.\n      const childrenToKeep: ScopesCodec.OriginalScope[] = [];\n      for (const child of parent.children) {\n        if (contains(newScope, child)) {\n          // child is actually inside newScope, so re-parent it.\n          newScope.children.push(child);\n          child.parent = newScope;\n        } else {\n          childrenToKeep.push(child);\n        }\n      }\n\n      // Find the correct index in the remaining children to insert newScope.\n      // We look for the first child that starts after the new scope.\n      const insertIndex = childrenToKeep.findIndex(child => compareScopes(newScope, child) < 0);\n      if (insertIndex === -1) {\n        // If no child starts after, it goes at the end.\n        childrenToKeep.push(newScope);\n      } else {\n        childrenToKeep.splice(insertIndex, 0, newScope);\n      }\n\n      // Update parent's children to only be the ones that don't belong to newScope.\n      parent.children = childrenToKeep;\n      newScope.parent = parent;\n    }\n\n    function contains(outer: ScopesCodec.OriginalScope, inner: ScopesCodec.OriginalScope): boolean {\n      return comparePositions(outer.start, inner.start) <= 0 && comparePositions(outer.end, inner.end) >= 0;\n    }\n\n    function compareScopes(a: ScopesCodec.OriginalScope, b: ScopesCodec.OriginalScope): number {\n      return comparePositions(a.start, b.start);\n    }\n\n    function comparePositions(a: ScopesCodec.Position, b: ScopesCodec.Position): number {\n      if (a.line !== b.line) {\n        return a.line - b.line;\n      }\n      return a.column - b.column;\n    }\n\n    function convertScope(\n        node: Formatter.FormatterWorkerPool.ScopeTreeNode,\n        parentRange: ScopesCodec.GeneratedRange|undefined): {range: ScopesCodec.GeneratedRange} {\n      const start = positionFromOffset(node.start);\n      const end = positionFromOffset(node.end);\n      const startEntry = sourceMap.findEntry(start.line, start.column);\n      const endEntry = sourceMap.findEntry(end.line, end.column);\n      const sourceIndex = startEntry?.sourceIndex;\n      const canMapOriginalPosition = startEntry && endEntry && sourceIndex !== undefined &&\n          startEntry.sourceIndex === endEntry.sourceIndex && startEntry.sourceIndex !== undefined && sourceIndex >= 0 &&\n          sourceIndex < numSourceUrls;\n      const isStackFrame = node.kind === Formatter.FormatterWorkerPool.ScopeKind.FUNCTION ||\n          node.kind === Formatter.FormatterWorkerPool.ScopeKind.ARROW_FUNCTION;\n      // TODO(crbug.com/368222773): Instead of mapping `start`, we should report a number of candidates. e.g. for arrow functions we should\n      //     follow the spec and map the `=>` as the spec says that is where the original name (if any) for arrow functions can be found.\n      const name = node.kind === Formatter.FormatterWorkerPool.ScopeKind.FUNCTION ? startEntry?.name : undefined;\n\n      let scope: ScopesCodec.OriginalScope|undefined;\n      if (canMapOriginalPosition) {\n        scope = {\n          start: {line: startEntry.sourceLineNumber, column: startEntry.sourceColumnNumber},\n          end: {line: endEntry.sourceLineNumber, column: endEntry.sourceColumnNumber},\n          name,\n          isStackFrame,\n          variables: [],\n          children: [],\n        };\n      }\n\n      const range: ScopesCodec.GeneratedRange = {\n        start,\n        end,\n        originalScope: scope,\n        isStackFrame,\n        isHidden: false,\n        values: [],\n        children: [],\n      };\n\n      parentRange?.children.push(range);\n      if (canMapOriginalPosition && scope) {\n        const rootScope = scopeBySourceUrl[sourceIndex];\n        insertInScope(rootScope, scope);\n      }\n\n      node.children.forEach(child => convertScope(child, range));\n\n      return {range};\n    }\n\n    function positionFromOffset(offset: number): ScopesCodec.Position {\n      const location = text.positionFromOffset(offset);\n      return {line: location.lineNumber, column: location.columnNumber};\n    }\n  }\n\n  addOriginalScopes(scopes: Array<ScopesCodec.OriginalScope|null>): void {\n    for (const scope of scopes) {\n      this.#originalScopes.push(scope);\n    }\n  }\n\n  addGeneratedRanges(ranges: ScopesCodec.GeneratedRange[]): void {\n    for (const range of ranges) {\n      this.#generatedRanges.push(range);\n    }\n  }\n\n  hasOriginalScopes(sourceIdx: number): boolean {\n    return Boolean(this.#originalScopes[sourceIdx]);\n  }\n\n  isEmpty(): boolean {\n    return !this.#originalScopes.length && !this.#generatedRanges.length;\n  }\n\n  addOriginalScopesAtIndex(sourceIdx: number, scope: ScopesCodec.OriginalScope): void {\n    if (!this.#originalScopes[sourceIdx]) {\n      this.#originalScopes[sourceIdx] = scope;\n    } else {\n      throw new Error(`Trying to re-augment existing scopes for source at index: ${sourceIdx}`);\n    }\n  }\n\n  /**\n   * @returns true, iff the function surrounding the provided position is marked as \"hidden\".\n   */\n  isOutlinedFrame(generatedLine: number, generatedColumn: number): boolean {\n    const rangeChain = this.#findGeneratedRangeChain(generatedLine, generatedColumn);\n    return this.#isOutlinedFrame(rangeChain);\n  }\n\n  #isOutlinedFrame(rangeChain: ScopesCodec.GeneratedRange[]): boolean {\n    for (let i = rangeChain.length - 1; i >= 0; --i) {\n      if (rangeChain[i].isStackFrame) {\n        return rangeChain[i].isHidden;\n      }\n    }\n    return false;\n  }\n\n  /**\n   * @returns true, iff the range surrounding the provided position contains multiple\n   * inlined original functions.\n   */\n  hasInlinedFrames(generatedLine: number, generatedColumn: number): boolean {\n    const rangeChain = this.#findGeneratedRangeChain(generatedLine, generatedColumn);\n    for (let i = rangeChain.length - 1; i >= 0; --i) {\n      if (rangeChain[i].isStackFrame) {\n        // We stop looking for inlined original functions once we reach the current frame.\n        return false;\n      }\n      if (rangeChain[i].callSite) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  /**\n   * Given a generated position, returns the original name of the surrounding function as well as\n   * all the original function names that got inlined into the surrounding generated function and their\n   * respective callsites in the original code (ordered from inner to outer).\n   *\n   * @returns a list with inlined functions. Every entry in the list has a callsite in the orignal code,\n   * except the last function (since the last function didn't get inlined).\n   */\n  findInlinedFunctions(generatedLine: number, generatedColumn: number): InlineInfo {\n    const rangeChain = this.#findGeneratedRangeChain(generatedLine, generatedColumn);\n    const result: InlineInfo = {\n      inlinedFunctions: [],\n      originalFunctionName: '',\n    };\n\n    // Walk the generated ranges from the innermost containing range outwards as long as we don't\n    // encounter a range that is a scope in the generated code and a function scope originally.\n    for (let i = rangeChain.length - 1; i >= 0; --i) {\n      const range = rangeChain[i];\n\n      if (range.callSite) {\n        // Record the name and call-site if the range corresponds to an inlined function.\n        result.inlinedFunctions.push({\n          name: range.originalScope?.name ?? '',\n          callsite: {...range.callSite, sourceURL: this.#sourceMap.sourceURLForSourceIndex(range.callSite.sourceIndex)}\n        });\n      }\n      if (range.isStackFrame) {\n        // We arrived at an actual generated JS function, don't go further.\n        // The corresponding original scope could not actually be a function\n        // (e.g. a block scope transpiled down to a JS function), but we'll\n        // filter that out later.\n        result.originalFunctionName = range.originalScope?.name ?? '';\n        break;\n      }\n    }\n\n    return result;\n  }\n\n  /**\n   * Takes a V8 provided call frame and expands any inlined frames into virtual call frames.\n   *\n   * For call frames where nothing was inlined, the result contains only a single element,\n   * the provided frame but with the original name.\n   *\n   * For call frames where we are paused in inlined code, this function returns a list of\n   * call frames from \"inner to outer\". This is the call frame at index 0\n   * signifies the top of this stack trace fragment.\n   *\n   * The rest are \"virtual\" call frames and will have an \"inlineFrameIndex\" set in ascending\n   * order, so the condition `result[index] === result[index].inlineFrameIndex` always holds.\n   */\n  expandCallFrame(callFrame: CallFrame): CallFrame[] {\n    const {originalFunctionName, inlinedFunctions} =\n        this.findInlinedFunctions(callFrame.location().lineNumber, callFrame.location().columnNumber);\n    const result: CallFrame[] = [];\n    for (const [index, fn] of inlinedFunctions.entries()) {\n      result.push(callFrame.createVirtualCallFrame(index, fn.name));\n    }\n    result.push(callFrame.createVirtualCallFrame(result.length, originalFunctionName));\n    return result;\n  }\n\n  /**\n   * Given a generated position, this returns all the surrounding generated ranges from outer\n   * to inner.\n   */\n  #findGeneratedRangeChain(line: number, column: number): ScopesCodec.GeneratedRange[] {\n    const result: ScopesCodec.GeneratedRange[] = [];\n\n    (function walkRanges(ranges: ScopesCodec.GeneratedRange[]) {\n      for (const range of ranges) {\n        if (!contains(range, line, column)) {\n          continue;\n        }\n        result.push(range);\n        walkRanges(range.children);\n      }\n    })(this.#generatedRanges);\n\n    return result;\n  }\n\n  /**\n   * @returns true if we have enough info (i.e. variable and binding expressions) to build\n   * a scope view.\n   */\n  hasVariablesAndBindings(): boolean {\n    if (this.#cachedVariablesAndBindingsPresent === null) {\n      this.#cachedVariablesAndBindingsPresent = this.#areVariablesAndBindingsPresent();\n    }\n    return this.#cachedVariablesAndBindingsPresent;\n  }\n\n  #areVariablesAndBindingsPresent(): boolean {\n    // We check whether any original scope has a non-empty list of variables, and\n    // generated ranges with a non-empty binding list.\n\n    function walkTree(nodes: Array<ScopesCodec.OriginalScope|null>|ScopesCodec.GeneratedRange[]): boolean {\n      for (const node of nodes) {\n        if (!node) {\n          continue;\n        }\n\n        if ('variables' in node && node.variables.length > 0) {\n          return true;\n        }\n\n        if ('values' in node && node.values.some(v => v !== null)) {\n          return true;\n        }\n\n        if (walkTree(node.children)) {\n          return true;\n        }\n      }\n      return false;\n    }\n    return walkTree(this.#originalScopes) && walkTree(this.#generatedRanges);\n  }\n\n  /**\n   * Constructs a scope chain based on the CallFrame's paused position.\n   *\n   * The algorithm to obtain the original scope chain is straight-forward:\n   *\n   *   1) Find the inner-most generated range that contains the CallFrame's\n   *      paused position.\n   *\n   *   2) Does the found range have an associated original scope?\n   *\n   *      2a) If no, return null. This is a \"hidden\" range and technically\n   *          we shouldn't be pausing here in the first place. This code doesn't\n   *          correspond to anything in the authored code.\n   *\n   *      2b) If yes, the associated original scope is the inner-most\n   *          original scope in the resulting scope chain.\n   *\n   *   3) Walk the parent chain of the found original scope outwards. This is\n   *      our scope view. For each original scope we also try to find a\n   *      corresponding generated range that contains the CallFrame's\n   *      paused position. We need the generated range to resolve variable\n   *      values.\n   */\n  resolveMappedScopeChain(callFrame: CallFrame): ScopeChainEntry[]|null {\n    const rangeChain = this.#findGeneratedRangeChainForFrame(callFrame);\n    const innerMostOriginalScope = rangeChain.at(-1)?.originalScope;\n    if (innerMostOriginalScope === undefined) {\n      return null;\n    }\n\n    // TODO(crbug.com/40277685): Add a sanity check here where we map the paused position using\n    //         the source map's mappings, find the inner-most original scope with that mapped paused\n    //         position and compare that result with `innerMostOriginalScope`. If they don't match we\n    //         should emit a warning about the broken source map as mappings and scopes are inconsistent\n    //         w.r.t. each other.\n\n    let seenFunctionScope = false;\n    const result: SourceMapScopeChainEntry[] = [];\n    // Walk the original scope chain outwards and try to find the corresponding generated range along the way.\n    for (let originalScope = rangeChain.at(-1)?.originalScope; originalScope; originalScope = originalScope.parent) {\n      const range = rangeChain.findLast(r => r.originalScope === originalScope);\n      const isFunctionScope = originalScope.kind === 'function';\n      const isInnerMostFunction = isFunctionScope && !seenFunctionScope;\n      const returnValue = isInnerMostFunction ? callFrame.returnValue() : null;\n      result.push(\n          new SourceMapScopeChainEntry(callFrame, originalScope, range, isInnerMostFunction, returnValue ?? undefined));\n      seenFunctionScope ||= isFunctionScope;\n    }\n\n    // If we are paused on a return statement, we need to drop inner block scopes. This is because V8 only emits a\n    // single return bytecode and \"gotos\" at the functions' end, where we are now paused.\n    if (callFrame.returnValue() !== null) {\n      while (result.length && result[0].type() !== Protocol.Debugger.ScopeType.Local) {\n        result.shift();\n      }\n    }\n\n    return result;\n  }\n\n  /** Similar to #findGeneratedRangeChain, but takes inlineFrameIndex of virtual call frames into account */\n  #findGeneratedRangeChainForFrame(callFrame: CallFrame): ScopesCodec.GeneratedRange[] {\n    const rangeChain =\n        this.#findGeneratedRangeChain(callFrame.location().lineNumber, callFrame.location().columnNumber);\n    if (callFrame.inlineFrameIndex === 0) {\n      return rangeChain;\n    }\n\n    // Drop ranges in the chain until we reach our desired inlined range.\n    for (let inlineIndex = 0; inlineIndex < callFrame.inlineFrameIndex;) {\n      const range = rangeChain.pop();\n      if (range?.callSite) {\n        ++inlineIndex;\n      }\n    }\n\n    return rangeChain;\n  }\n\n  /**\n   * Returns the authored function name of the function containing the provided generated position.\n   */\n  findOriginalFunctionName(position: ScopesCodec.Position): string|null {\n    const originalInnerMostScope = this.findOriginalFunctionScope(position)?.scope ?? undefined;\n    return this.#findFunctionNameInOriginalScopeChain(originalInnerMostScope);\n  }\n\n  /**\n   * Returns the authored function scope of the function containing the provided generated position.\n   */\n  findOriginalFunctionScope({line, column}: ScopesCodec.Position):\n      {scope: ScopesCodec.OriginalScope, url?: Platform.DevToolsPath.UrlString}|null {\n    // There are 2 approaches:\n    //   1) Find the inner-most generated range containing the provided generated position\n    //      and use it's OriginalScope (then walk it outwards until we hit a function).\n    //   2) Use the mappings to turn the generated position into an original position.\n    //      Then find the inner-most original scope containing that original position.\n    //      Then walk it outwards until we hit a function.\n    //\n    // Both approaches should yield the same result (assuming the mappings are spec compliant\n    // w.r.t. generated ranges). But in the case of \"pasta\" scopes and extension provided\n    // scope info, we only have the OriginalScope parts and mappings without GeneratedRanges.\n\n    let originalInnerMostScope: ScopesCodec.OriginalScope|undefined;\n\n    if (this.#generatedRanges.length > 0) {\n      const rangeChain = this.#findGeneratedRangeChain(line, column);\n      originalInnerMostScope = rangeChain.at(-1)?.originalScope;\n    } else {\n      // No GeneratedRanges. Try to use mappings.\n      const entry = this.#sourceMap.findEntry(line, column);\n      if (entry?.sourceIndex === undefined) {\n        return null;\n      }\n      originalInnerMostScope =\n          this.#findOriginalScopeChain(\n                  {sourceIndex: entry.sourceIndex, line: entry.sourceLineNumber, column: entry.sourceColumnNumber})\n              .at(-1);\n    }\n\n    if (!originalInnerMostScope) {\n      return null;\n    }\n\n    const functionScope = this.#findFunctionScopeInOriginalScopeChain(originalInnerMostScope);\n    if (!functionScope) {\n      return null;\n    }\n\n    // Find the root scope for some given original source, to get the source url.\n    let rootScope: ScopesCodec.OriginalScope = functionScope;\n    while (rootScope.parent) {\n      rootScope = rootScope.parent;\n    }\n    const sourceIndex = this.#originalScopes.indexOf(rootScope);\n    const url = sourceIndex !== -1 ? this.#sourceMap.sourceURLForSourceIndex(sourceIndex) : undefined;\n\n    return functionScope ? {scope: functionScope, url} : null;\n  }\n\n  /**\n   * Given an original position, this returns all the surrounding original scopes from outer\n   * to inner.\n   */\n  #findOriginalScopeChain({sourceIndex, line, column}: ScopesCodec.OriginalPosition): ScopesCodec.OriginalScope[] {\n    const scope = this.#originalScopes[sourceIndex];\n    if (!scope) {\n      return [];\n    }\n\n    const result: ScopesCodec.OriginalScope[] = [];\n    (function walkScopes(scopes: ScopesCodec.OriginalScope[]) {\n      for (const scope of scopes) {\n        if (!contains(scope, line, column)) {\n          continue;\n        }\n        result.push(scope);\n        walkScopes(scope.children);\n      }\n    })([scope]);\n\n    return result;\n  }\n\n  #findFunctionScopeInOriginalScopeChain(innerOriginalScope: ScopesCodec.OriginalScope|undefined):\n      ScopesCodec.OriginalScope|null {\n    for (let originalScope = innerOriginalScope; originalScope; originalScope = originalScope.parent) {\n      if (originalScope.isStackFrame) {\n        return originalScope;\n      }\n    }\n    return null;\n  }\n\n  #findFunctionNameInOriginalScopeChain(innerOriginalScope: ScopesCodec.OriginalScope|undefined): string|null {\n    const functionScope = this.#findFunctionScopeInOriginalScopeChain(innerOriginalScope);\n    if (!functionScope) {\n      return null;\n    }\n\n    return functionScope.name ?? '';\n  }\n\n  /**\n   * Returns one or more original stack frames for this single \"raw frame\" or call-site.\n   *\n   * @returns An empty array if no mapping at the call-site was found, or the resulting frames\n   * in top-to-bottom order in case of inlining.\n   * @throws If this range is marked \"hidden\". Outlining needs to be handled externally as\n   * outlined function segments in stack traces can span across bundles.\n   */\n  translateCallSite(generatedLine: number, generatedColumn: number): TranslatedFrame[] {\n    const rangeChain = this.#findGeneratedRangeChain(generatedLine, generatedColumn);\n    if (this.#isOutlinedFrame(rangeChain)) {\n      throw new Error('SourceMapScopesInfo is unable to translate an outlined function by itself');\n    }\n\n    const mapping = this.#sourceMap.findEntry(generatedLine, generatedColumn);\n    if (mapping?.sourceIndex === undefined) {\n      return [];\n    }\n\n    // The top-most frame is translated the same even if we have inlined functions.\n    const result: TranslatedFrame[] = [{\n      line: mapping.sourceLineNumber,\n      column: mapping.sourceColumnNumber,\n      name: this.findOriginalFunctionName({line: generatedLine, column: generatedColumn}) ?? undefined,\n      url: mapping.sourceURL,\n    }];\n\n    // Walk the range chain inside out until we find a generated function and for each inlined function add a frame.\n    for (let i = rangeChain.length - 1; i >= 0 && !rangeChain[i].isStackFrame; --i) {\n      const range = rangeChain[i];\n      if (!range.callSite) {\n        continue;\n      }\n\n      const originalScopeChain = this.#findOriginalScopeChain(range.callSite);\n      result.push({\n        line: range.callSite.line,\n        column: range.callSite.column,\n        name: this.#findFunctionNameInOriginalScopeChain(originalScopeChain.at(-1)) ?? undefined,\n        url: this.#sourceMap.sourceURLForSourceIndex(range.callSite.sourceIndex),\n      });\n    }\n\n    return result;\n  }\n}\n\n/**\n * Represents a stack frame in original terms. It closely aligns with StackTrace.StackTrace.Frame,\n * but since we can't import that type here we mirror it here somewhat.\n *\n * Equivalent to Pick<StackTrace.StackTrace.Frame, 'line'|'column'|'name'|'url'>.\n */\nexport interface TranslatedFrame {\n  line: number;\n  column: number;\n  name?: string;\n  url?: Platform.DevToolsPath.UrlString;\n}\n\n/**\n * Represents the inlining information for a given generated position.\n *\n * It contains a list of all the inlined original functions at the generated position\n * as well as the original function name of the generated position's surrounding\n * function.\n *\n * The inlined functions are sorted from inner to outer (or top to bottom on the stack).\n */\nexport interface InlineInfo {\n  inlinedFunctions: Array<{\n    name: string,\n    callsite: {\n      line: number,\n      column: number,\n      sourceIndex: number,\n      sourceURL?: Platform.DevToolsPath.UrlString,\n    },\n  }>;\n  originalFunctionName: string;\n}\n\nexport function contains(\n    range: Pick<ScopesCodec.GeneratedRange, 'start'|'end'>, line: number, column: number): boolean {\n  if (range.start.line > line || (range.start.line === line && range.start.column > column)) {\n    return false;\n  }\n\n  if (range.end.line < line || (range.end.line === line && range.end.column <= column)) {\n    return false;\n  }\n\n  return true;\n}\n", "// Copyright 2024 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as Protocol from '../../generated/protocol.js';\nimport type * as ScopesCodec from '../../third_party/source-map-scopes-codec/source-map-scopes-codec.js';\nimport * as i18n from '../i18n/i18n.js';\n\nimport type {CallFrame, LocationRange, ScopeChainEntry} from './DebuggerModel.js';\nimport {type GetPropertiesResult, type RemoteObject, RemoteObjectImpl, RemoteObjectProperty} from './RemoteObject.js';\nimport {contains} from './SourceMapScopesInfo.js';\n\nconst UIStrings = {\n  /**\n   * @description Title of a section in the debugger showing local JavaScript variables.\n   */\n  local: 'Local',\n  /**\n   * @description Text that refers to closure as a programming term\n   */\n  closure: 'Closure',\n  /**\n   * @description Noun that represents a section or block of code in the Debugger Model. Shown in the Sources tab, while paused on a breakpoint.\n   */\n  block: 'Block',\n  /**\n   * @description Title of a section in the debugger showing JavaScript variables from the global scope.\n   */\n  global: 'Global',\n  /**\n   * @description Text in Scope Chain Sidebar Pane of the Sources panel\n   */\n  returnValue: 'Return value',\n} as const;\nconst str_ = i18n.i18n.registerUIStrings('core/sdk/SourceMapScopeChainEntry.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\n\nexport class SourceMapScopeChainEntry implements ScopeChainEntry {\n  readonly #callFrame: CallFrame;\n  readonly #scope: ScopesCodec.OriginalScope;\n  readonly #range?: ScopesCodec.GeneratedRange;\n  readonly #isInnerMostFunction: boolean;\n  readonly #returnValue?: RemoteObject;\n\n  /**\n   * @param isInnerMostFunction If `scope` is the innermost 'function' scope. Only used for labeling as we name the\n   * scope of the paused function 'Local', while other outer 'function' scopes are named 'Closure'.\n   */\n  constructor(\n      callFrame: CallFrame, scope: ScopesCodec.OriginalScope, range: ScopesCodec.GeneratedRange|undefined,\n      isInnerMostFunction: boolean, returnValue: RemoteObject|undefined) {\n    this.#callFrame = callFrame;\n    this.#scope = scope;\n    this.#range = range;\n    this.#isInnerMostFunction = isInnerMostFunction;\n    this.#returnValue = returnValue;\n  }\n\n  extraProperties(): RemoteObjectProperty[] {\n    if (this.#returnValue) {\n      return [new RemoteObjectProperty(\n          i18nString(UIStrings.returnValue), this.#returnValue, undefined, undefined, undefined, undefined, undefined,\n          /* synthetic */ true)];\n    }\n    return [];\n  }\n\n  callFrame(): CallFrame {\n    return this.#callFrame;\n  }\n\n  type(): string {\n    switch (this.#scope.kind) {\n      case 'global':\n        return Protocol.Debugger.ScopeType.Global;\n      case 'function':\n        return this.#isInnerMostFunction ? Protocol.Debugger.ScopeType.Local : Protocol.Debugger.ScopeType.Closure;\n      case 'block':\n        return Protocol.Debugger.ScopeType.Block;\n    }\n    return this.#scope.kind ?? '';\n  }\n\n  typeName(): string {\n    switch (this.#scope.kind) {\n      case 'global':\n        return i18nString(UIStrings.global);\n      case 'function':\n        return this.#isInnerMostFunction ? i18nString(UIStrings.local) : i18nString(UIStrings.closure);\n      case 'block':\n        return i18nString(UIStrings.block);\n    }\n    return this.#scope.kind ?? '';\n  }\n\n  name(): string|undefined {\n    return this.#scope.name;\n  }\n\n  range(): LocationRange|null {\n    return null;\n  }\n\n  object(): RemoteObject {\n    return new SourceMapScopeRemoteObject(this.#callFrame, this.#scope, this.#range);\n  }\n\n  description(): string {\n    return '';\n  }\n\n  icon(): string|undefined {\n    return undefined;\n  }\n}\n\nclass SourceMapScopeRemoteObject extends RemoteObjectImpl {\n  readonly #callFrame: CallFrame;\n  readonly #scope: ScopesCodec.OriginalScope;\n  readonly #range?: ScopesCodec.GeneratedRange;\n\n  constructor(callFrame: CallFrame, scope: ScopesCodec.OriginalScope, range: ScopesCodec.GeneratedRange|undefined) {\n    super(\n        callFrame.debuggerModel.runtimeModel(), /* objectId */ undefined, 'object', /* sub type */ undefined,\n        /* value */ null);\n    this.#callFrame = callFrame;\n    this.#scope = scope;\n    this.#range = range;\n  }\n\n  override async doGetProperties(_ownProperties: boolean, accessorPropertiesOnly: boolean, generatePreview: boolean):\n      Promise<GetPropertiesResult> {\n    if (accessorPropertiesOnly) {\n      return {properties: [], internalProperties: []};\n    }\n\n    const properties: RemoteObjectProperty[] = [];\n    for (const [index, variable] of this.#scope.variables.entries()) {\n      const expression = this.#findExpression(index);\n      if (expression === null) {\n        properties.push(SourceMapScopeRemoteObject.#unavailableProperty(variable));\n        continue;\n      }\n\n      // TODO(crbug.com/40277685): Once we can evaluate expressions in scopes other than the innermost one,\n      //         we need to find the find the CDP scope that matches `this.#range` and evaluate in that.\n      const result = await this.#callFrame.evaluate({expression, generatePreview});\n      if ('error' in result || result.exceptionDetails) {\n        // TODO(crbug.com/40277685): Make these errors user-visible to aid tooling developers.\n        //         E.g. show the error on hover or expose it in the developer resources panel.\n        properties.push(SourceMapScopeRemoteObject.#unavailableProperty(variable));\n      } else {\n        properties.push(new RemoteObjectProperty(\n            variable, result.object, /* enumerable */ false, /* writable */ false, /* isOwn */ true,\n            /* wasThrown */ false));\n      }\n    }\n\n    return {properties, internalProperties: []};\n  }\n\n  /** @returns null if the variable is unavailable at the current paused location */\n  #findExpression(index: number): string|null {\n    if (!this.#range) {\n      return null;\n    }\n\n    const expressionOrSubRanges = this.#range.values[index];\n    if (typeof expressionOrSubRanges === 'string') {\n      return expressionOrSubRanges;\n    }\n    if (expressionOrSubRanges === null) {\n      return null;\n    }\n\n    const pausedPosition = this.#callFrame.location();\n    for (const range of expressionOrSubRanges) {\n      if (contains({start: range.from, end: range.to}, pausedPosition.lineNumber, pausedPosition.columnNumber)) {\n        return range.value ?? null;\n      }\n    }\n    return null;\n  }\n\n  static #unavailableProperty(name: string): RemoteObjectProperty {\n    return new RemoteObjectProperty(\n        name, null, /* enumerable */ false, /* writeable */ false, /* isOwn */ true, /* wasThrown */ false);\n  }\n}\n", "// Copyright 2025 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport type {DebugId, SourceMapV3} from './SourceMap.js';\n\n/** A thin wrapper around the Cache API to store source map JSONs keyed on Debug IDs */\nexport class SourceMapCache {\n  static readonly #INSTANCE = new SourceMapCache('devtools-source-map-cache');\n\n  static instance(): SourceMapCache {\n    if (typeof window === 'undefined') {\n      // TODO(crbug.com/451502260): Move this behind a `HostRuntime` interface.\n      return IN_MEMORY_INSTANCE as unknown as\n          SourceMapCache;  // TS doesn't like that our in-memory class doesn't have the same private fields.\n    }\n    return this.#INSTANCE;\n  }\n\n  static createForTest(name: string): SourceMapCache {\n    return new SourceMapCache(name);\n  }\n\n  readonly #name: string;\n  #cachePromise?: Promise<Cache>;\n\n  private constructor(name: string) {\n    this.#name = name;\n  }\n\n  async set(debugId: DebugId, sourceMap: SourceMapV3): Promise<void> {\n    const cache = await this.#cache();\n    await cache.put(SourceMapCache.#urlForDebugId(debugId), new Response(JSON.stringify(sourceMap)));\n  }\n\n  async get(debugId: DebugId): Promise<SourceMapV3|null> {\n    const cache = await this.#cache();\n    const response = await cache.match(SourceMapCache.#urlForDebugId(debugId));\n    return await response?.json() ?? null;\n  }\n\n  async #cache(): Promise<Cache> {\n    if (this.#cachePromise) {\n      return await this.#cachePromise;\n    }\n\n    this.#cachePromise = window.caches.open(this.#name);\n    return await this.#cachePromise;\n  }\n\n  /** The Cache API only allows URL as keys, so we construct a simple one. Given that we have our own cache, we have no risk of conflicting URLs */\n  static #urlForDebugId(debugId: DebugId): string {\n    return 'http://debug.id/' + encodeURIComponent(debugId);\n  }\n\n  async disposeForTest(): Promise<void> {\n    await window.caches.delete(this.#name);\n  }\n}\n\nconst IN_MEMORY_INSTANCE = new (class implements Pick<SourceMapCache, 'get'|'set'|'disposeForTest'> {\n  readonly #cache = new Map<DebugId, SourceMapV3>();\n\n  async set(debugId: DebugId, sourceMap: SourceMapV3): Promise<void> {\n    this.#cache.set(debugId, sourceMap);\n  }\n\n  async get(debugId: DebugId): Promise<SourceMapV3|null> {\n    return this.#cache.get(debugId) ?? null;\n  }\n\n  async disposeForTest(): Promise<void> {\n    // Do nothing.\n  }\n})();\n", "// Copyright 2020 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport type * as Protocol from '../../generated/protocol.js';\nimport * as Common from '../common/common.js';\n\nimport type {Resource} from './Resource.js';\nimport {Events as ResourceTreeModelEvents, type ResourceTreeFrame, ResourceTreeModel} from './ResourceTreeModel.js';\nimport type {Target} from './Target.js';\nimport {type SDKModelObserver, TargetManager} from './TargetManager.js';\n\nlet frameManagerInstance: FrameManager|null = null;\n\n/**\n * The FrameManager is a central storage for all #frames. It collects #frames from all\n * ResourceTreeModel-instances (one per target), so that #frames can be found by id\n * without needing to know their target.\n */\nexport class FrameManager extends Common.ObjectWrapper.ObjectWrapper<EventTypes> implements\n    SDKModelObserver<ResourceTreeModel> {\n  readonly #eventListeners = new WeakMap<ResourceTreeModel, Common.EventTarget.EventDescriptor[]>();\n\n  // Maps frameIds to #frames and a count of how many ResourceTreeModels contain this frame.\n  // (OOPIFs are usually first attached to a new target and then detached from their old target,\n  // therefore being contained in 2 models for a short period of time.)\n  #frames = new Map<string, {\n    frame: ResourceTreeFrame,\n    count: number,\n  }>();\n\n  readonly #framesForTarget = new Map<Protocol.Target.TargetID|'main', Set<Protocol.Page.FrameId>>();\n  #outermostFrame: ResourceTreeFrame|null = null;\n  #transferringFramesDataCache = new Map<string, {\n    creationStackTrace?: Protocol.Runtime.StackTrace,\n    creationStackTraceTarget?: Target,\n  }>();\n  #awaitedFrames = new Map<string, Array<{resolve: (frame: ResourceTreeFrame) => void, notInTarget?: Target}>>();\n\n  constructor() {\n    super();\n    TargetManager.instance().observeModels(ResourceTreeModel, this);\n  }\n\n  static instance({forceNew}: {\n    forceNew: boolean,\n  } = {forceNew: false}): FrameManager {\n    if (!frameManagerInstance || forceNew) {\n      frameManagerInstance = new FrameManager();\n    }\n    return frameManagerInstance;\n  }\n\n  static removeInstance(): void {\n    frameManagerInstance = null;\n  }\n\n  modelAdded(resourceTreeModel: ResourceTreeModel): void {\n    const addListener = resourceTreeModel.addEventListener(ResourceTreeModelEvents.FrameAdded, this.frameAdded, this);\n    const detachListener =\n        resourceTreeModel.addEventListener(ResourceTreeModelEvents.FrameDetached, this.frameDetached, this);\n    const navigatedListener =\n        resourceTreeModel.addEventListener(ResourceTreeModelEvents.FrameNavigated, this.frameNavigated, this);\n    const resourceAddedListener =\n        resourceTreeModel.addEventListener(ResourceTreeModelEvents.ResourceAdded, this.resourceAdded, this);\n    this.#eventListeners.set(\n        resourceTreeModel, [addListener, detachListener, navigatedListener, resourceAddedListener]);\n    this.#framesForTarget.set(resourceTreeModel.target().id(), new Set());\n  }\n\n  modelRemoved(resourceTreeModel: ResourceTreeModel): void {\n    const listeners = this.#eventListeners.get(resourceTreeModel);\n    if (listeners) {\n      Common.EventTarget.removeEventListeners(listeners);\n    }\n\n    // Iterate over this model's #frames and decrease their count or remove them.\n    // (The ResourceTreeModel does not send FrameDetached events when a model\n    // is removed.)\n    const frameSet = this.#framesForTarget.get(resourceTreeModel.target().id());\n    if (frameSet) {\n      for (const frameId of frameSet) {\n        this.decreaseOrRemoveFrame(frameId);\n      }\n    }\n    this.#framesForTarget.delete(resourceTreeModel.target().id());\n  }\n\n  private frameAdded(event: Common.EventTarget.EventTargetEvent<ResourceTreeFrame>): void {\n    const frame = event.data;\n    const frameData = this.#frames.get(frame.id);\n    // If the frame is already in the map, increase its count, otherwise add it to the map.\n    if (frameData) {\n      // In order to not lose the following attributes of a frame during\n      // an OOPIF transfer we need to copy them to the new frame\n      frame.setCreationStackTrace(frameData.frame.getCreationStackTraceData());\n      this.#frames.set(frame.id, {frame, count: frameData.count + 1});\n    } else {\n      // If the transferring frame's detached event is received before its frame added\n      // event in the new target, the frame's cached attributes are reassigned.\n      const cachedFrameAttributes = this.#transferringFramesDataCache.get(frame.id);\n      if (cachedFrameAttributes?.creationStackTrace && cachedFrameAttributes?.creationStackTraceTarget) {\n        frame.setCreationStackTrace({\n          creationStackTrace: cachedFrameAttributes.creationStackTrace,\n          creationStackTraceTarget: cachedFrameAttributes.creationStackTraceTarget,\n        });\n      }\n      this.#frames.set(frame.id, {frame, count: 1});\n      this.#transferringFramesDataCache.delete(frame.id);\n    }\n    this.resetOutermostFrame();\n\n    // Add the frameId to the the targetId's set of frameIds.\n    const frameSet = this.#framesForTarget.get(frame.resourceTreeModel().target().id());\n    if (frameSet) {\n      frameSet.add(frame.id);\n    }\n\n    this.dispatchEventToListeners(Events.FRAME_ADDED_TO_TARGET, {frame});\n    this.resolveAwaitedFrame(frame);\n  }\n\n  private frameDetached(event: Common.EventTarget.EventTargetEvent<{frame: ResourceTreeFrame, isSwap: boolean}>): void {\n    const {frame, isSwap} = event.data;\n    // Decrease the frame's count or remove it entirely from the map.\n    this.decreaseOrRemoveFrame(frame.id);\n\n    // If the transferring frame's detached event is received before its frame\n    // added event in the new target, we persist some attributes of the frame here\n    // so that later on the frame added event in the new target they can be reassigned.\n    if (isSwap && !this.#frames.get(frame.id)) {\n      const traceData = frame.getCreationStackTraceData();\n      const cachedFrameAttributes = {\n        ...(traceData.creationStackTrace && {creationStackTrace: traceData.creationStackTrace}),\n        ...(traceData.creationStackTrace && {creationStackTraceTarget: traceData.creationStackTraceTarget}),\n      };\n      this.#transferringFramesDataCache.set(frame.id, cachedFrameAttributes);\n    }\n\n    // Remove the frameId from the target's set of frameIds.\n    const frameSet = this.#framesForTarget.get(frame.resourceTreeModel().target().id());\n    if (frameSet) {\n      frameSet.delete(frame.id);\n    }\n  }\n\n  private frameNavigated(event: Common.EventTarget.EventTargetEvent<ResourceTreeFrame>): void {\n    const frame = event.data;\n    this.dispatchEventToListeners(Events.FRAME_NAVIGATED, {frame});\n    if (frame.isOutermostFrame()) {\n      this.dispatchEventToListeners(Events.OUTERMOST_FRAME_NAVIGATED, {frame});\n    }\n  }\n\n  private resourceAdded(event: Common.EventTarget.EventTargetEvent<Resource>): void {\n    this.dispatchEventToListeners(Events.RESOURCE_ADDED, {resource: event.data});\n  }\n\n  private decreaseOrRemoveFrame(frameId: Protocol.Page.FrameId): void {\n    const frameData = this.#frames.get(frameId);\n    if (frameData) {\n      if (frameData.count === 1) {\n        this.#frames.delete(frameId);\n        this.resetOutermostFrame();\n        this.dispatchEventToListeners(Events.FRAME_REMOVED, {frameId});\n      } else {\n        frameData.count--;\n      }\n    }\n  }\n\n  /**\n   * Looks for the outermost frame in `#frames` and sets `#outermostFrame` accordingly.\n   *\n   * Important: This method needs to be called everytime `#frames` is updated.\n   */\n  private resetOutermostFrame(): void {\n    const outermostFrames = this.getAllFrames().filter(frame => frame.isOutermostFrame());\n    this.#outermostFrame = outermostFrames.length > 0 ? outermostFrames[0] : null;\n  }\n\n  /**\n   * Returns the ResourceTreeFrame with a given frameId.\n   * When a frame is being detached a new ResourceTreeFrame but with the same\n   * frameId is created. Consequently getFrame() will return a different\n   * ResourceTreeFrame after detachment. Callers of getFrame() should therefore\n   * immediately use the function return value and not store it for later use.\n   */\n  getFrame(frameId: Protocol.Page.FrameId): ResourceTreeFrame|null {\n    const frameData = this.#frames.get(frameId);\n    if (frameData) {\n      return frameData.frame;\n    }\n    return null;\n  }\n\n  getAllFrames(): ResourceTreeFrame[] {\n    return Array.from(this.#frames.values(), frameData => frameData.frame);\n  }\n\n  getOutermostFrame(): ResourceTreeFrame|null {\n    return this.#outermostFrame;\n  }\n\n  async getOrWaitForFrame(frameId: Protocol.Page.FrameId, notInTarget?: Target): Promise<ResourceTreeFrame> {\n    const frame = this.getFrame(frameId);\n    if (frame && (!notInTarget || notInTarget !== frame.resourceTreeModel().target())) {\n      return frame;\n    }\n    return await new Promise<ResourceTreeFrame>(resolve => {\n      const waiting = this.#awaitedFrames.get(frameId);\n      if (waiting) {\n        waiting.push({notInTarget, resolve});\n      } else {\n        this.#awaitedFrames.set(frameId, [{notInTarget, resolve}]);\n      }\n    });\n  }\n\n  private resolveAwaitedFrame(frame: ResourceTreeFrame): void {\n    const waiting = this.#awaitedFrames.get(frame.id);\n    if (!waiting) {\n      return;\n    }\n    const newWaiting = waiting.filter(({notInTarget, resolve}) => {\n      if (!notInTarget || notInTarget !== frame.resourceTreeModel().target()) {\n        resolve(frame);\n        return false;\n      }\n      return true;\n    });\n    if (newWaiting.length > 0) {\n      this.#awaitedFrames.set(frame.id, newWaiting);\n    } else {\n      this.#awaitedFrames.delete(frame.id);\n    }\n  }\n}\n\nexport const enum Events {\n  // The FrameAddedToTarget event is sent whenever a frame is added to a target.\n  // This means that for OOPIFs it is sent twice: once when it's added to a\n  // parent target and a second time when it's added to its own target.\n  FRAME_ADDED_TO_TARGET = 'FrameAddedToTarget',\n  FRAME_NAVIGATED = 'FrameNavigated',\n  // The FrameRemoved event is only sent when a frame has been detached from\n  // all targets.\n  FRAME_REMOVED = 'FrameRemoved',\n  RESOURCE_ADDED = 'ResourceAdded',\n  OUTERMOST_FRAME_NAVIGATED = 'OutermostFrameNavigated',\n}\n\nexport interface EventTypes {\n  [Events.FRAME_ADDED_TO_TARGET]: {frame: ResourceTreeFrame};\n  [Events.FRAME_NAVIGATED]: {frame: ResourceTreeFrame};\n  [Events.FRAME_REMOVED]: {frameId: Protocol.Page.FrameId};\n  [Events.RESOURCE_ADDED]: {resource: Resource};\n  [Events.OUTERMOST_FRAME_NAVIGATED]: {frame: ResourceTreeFrame};\n}\n", "// Copyright 2017 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport type * as Platform from '../../core/platform/platform.js';\nimport type * as ProtocolProxyApi from '../../generated/protocol-proxy-api.js';\nimport * as Protocol from '../../generated/protocol.js';\nimport * as Common from '../common/common.js';\nimport * as i18n from '../i18n/i18n.js';\nimport * as Root from '../root/root.js';\n\nimport type {CSSModel} from './CSSModel.js';\nimport {DebuggerModel, Events as DebuggerModelEvents} from './DebuggerModel.js';\nimport {DeferredDOMNode, DOMModel, type DOMNode, Events as DOMModelEvents} from './DOMModel.js';\nimport {OverlayPersistentHighlighter} from './OverlayPersistentHighlighter.js';\nimport type {RemoteObject} from './RemoteObject.js';\nimport {SDKModel} from './SDKModel.js';\nimport {Capability, type Target} from './Target.js';\nimport {TargetManager} from './TargetManager.js';\n\nconst UIStrings = {\n  /**\n   * @description Text in Overlay Model\n   */\n  pausedInDebugger: 'Paused in debugger',\n} as const;\nconst str_ = i18n.i18n.registerUIStrings('core/sdk/OverlayModel.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\n\nexport interface HighlightColor {\n  r: number;\n  g: number;\n  b: number;\n  a: number;\n}\n\nexport interface HighlightRect {\n  x: number;\n  y: number;\n  width: number;\n  height: number;\n  color: HighlightColor;\n  outlineColor: HighlightColor;\n}\nexport interface Hinge {\n  width: number;\n  height: number;\n  x: number;\n  y: number;\n  contentColor: HighlightColor;\n  outlineColor: HighlightColor;\n}\n\nexport const enum EmulatedOSType {\n  WINDOWS = 'Windows',\n  MAC = 'Mac',\n  LINUX = 'Linux',\n}\n\ninterface PlatformOverlayDimensions {\n  mac: {x: number, y: number, width: number, height: number};\n  linux: {x: number, y: number, width: number, height: number};\n  windows: {x: number, y: number, width: number, height: number};\n}\n\nconst platformOverlayDimensions: Readonly<PlatformOverlayDimensions> = {\n  mac: {x: 85, y: 0, width: 185, height: 40},\n  linux: {x: 0, y: 0, width: 196, height: 34},\n  windows: {x: 0, y: 0, width: 238, height: 33},\n};\n\nexport class OverlayModel extends SDKModel<EventTypes> implements ProtocolProxyApi.OverlayDispatcher {\n  readonly #domModel: DOMModel;\n  overlayAgent: ProtocolProxyApi.OverlayApi;\n  readonly #debuggerModel: DebuggerModel|null;\n  #inspectModeEnabled = false;\n  #hideHighlightTimeout: number|null = null;\n  #defaultHighlighter: Highlighter;\n  #highlighter: Highlighter;\n  #showPaintRectsSetting: Common.Settings.Setting<boolean>;\n  #showLayoutShiftRegionsSetting: Common.Settings.Setting<boolean>;\n  #showAdHighlightsSetting: Common.Settings.Setting<boolean>;\n  #showDebugBordersSetting: Common.Settings.Setting<boolean>;\n  #showFPSCounterSetting: Common.Settings.Setting<boolean>;\n  #showScrollBottleneckRectsSetting: Common.Settings.Setting<boolean>;\n  #registeredListeners: Common.EventTarget.EventDescriptor[] = [];\n  #showViewportSizeOnResize = true;\n  #persistentHighlighter: OverlayPersistentHighlighter|null;\n  readonly #sourceOrderHighlighter: SourceOrderHighlighter;\n  #sourceOrderModeActive = false;\n  #windowControls: WindowControls;\n\n  constructor(target: Target) {\n    super(target);\n    this.#domModel = (target.model(DOMModel) as DOMModel);\n\n    target.registerOverlayDispatcher(this);\n    this.overlayAgent = target.overlayAgent();\n\n    this.#debuggerModel = target.model(DebuggerModel);\n    if (this.#debuggerModel) {\n      Common.Settings.Settings.instance()\n          .moduleSetting('disable-paused-state-overlay')\n          .addChangeListener(this.updatePausedInDebuggerMessage, this);\n      this.#debuggerModel.addEventListener(\n          DebuggerModelEvents.DebuggerPaused, this.updatePausedInDebuggerMessage, this);\n      this.#debuggerModel.addEventListener(\n          DebuggerModelEvents.DebuggerResumed, this.updatePausedInDebuggerMessage, this);\n      // TODO(dgozman): we should get DebuggerResumed on navigations instead of listening to GlobalObjectCleared.\n      this.#debuggerModel.addEventListener(\n          DebuggerModelEvents.GlobalObjectCleared, this.updatePausedInDebuggerMessage, this);\n    }\n\n    this.#defaultHighlighter = new DefaultHighlighter(this);\n    this.#highlighter = this.#defaultHighlighter;\n\n    this.#showPaintRectsSetting = Common.Settings.Settings.instance().moduleSetting<boolean>('show-paint-rects');\n    this.#showLayoutShiftRegionsSetting =\n        Common.Settings.Settings.instance().moduleSetting<boolean>('show-layout-shift-regions');\n    this.#showAdHighlightsSetting = Common.Settings.Settings.instance().moduleSetting<boolean>('show-ad-highlights');\n    this.#showDebugBordersSetting = Common.Settings.Settings.instance().moduleSetting<boolean>('show-debug-borders');\n    this.#showFPSCounterSetting = Common.Settings.Settings.instance().moduleSetting<boolean>('show-fps-counter');\n    this.#showScrollBottleneckRectsSetting =\n        Common.Settings.Settings.instance().moduleSetting<boolean>('show-scroll-bottleneck-rects');\n\n    if (!target.suspended()) {\n      void this.overlayAgent.invoke_enable();\n      void this.wireAgentToSettings();\n    }\n\n    this.#persistentHighlighter = new OverlayPersistentHighlighter(this, {\n      onGridOverlayStateChanged: ({nodeId, enabled}) =>\n          this.dispatchEventToListeners(Events.PERSISTENT_GRID_OVERLAY_STATE_CHANGED, {nodeId, enabled}),\n      onFlexOverlayStateChanged: ({nodeId, enabled}) =>\n          this.dispatchEventToListeners(Events.PERSISTENT_FLEX_CONTAINER_OVERLAY_STATE_CHANGED, {nodeId, enabled}),\n      onContainerQueryOverlayStateChanged: ({nodeId, enabled}) =>\n          this.dispatchEventToListeners(Events.PERSISTENT_CONTAINER_QUERY_OVERLAY_STATE_CHANGED, {nodeId, enabled}),\n      onScrollSnapOverlayStateChanged: ({nodeId, enabled}) =>\n          this.dispatchEventToListeners(Events.PERSISTENT_SCROLL_SNAP_OVERLAY_STATE_CHANGED, {nodeId, enabled}),\n    });\n    this.#domModel.addEventListener(DOMModelEvents.NodeRemoved, () => {\n      if (!this.#persistentHighlighter) {\n        return;\n      }\n\n      this.#persistentHighlighter.refreshHighlights();\n    });\n\n    this.#domModel.addEventListener(DOMModelEvents.DocumentUpdated, () => {\n      if (!this.#persistentHighlighter) {\n        return;\n      }\n\n      // Hide all the overlays initially after document update\n      this.#persistentHighlighter.hideAllInOverlayWithoutSave();\n\n      if (!target.suspended()) {\n        void this.#persistentHighlighter.restoreHighlightsForDocument();\n      }\n    });\n\n    this.#sourceOrderHighlighter = new SourceOrderHighlighter(this);\n    this.#windowControls = new WindowControls(this.#domModel.cssModel());\n  }\n\n  static highlightObjectAsDOMNode(object: RemoteObject): void {\n    const domModel = object.runtimeModel().target().model(DOMModel);\n    if (domModel) {\n      domModel.overlayModel().highlightInOverlay({object, selectorList: undefined});\n    }\n  }\n\n  static hideDOMNodeHighlight(): void {\n    for (const overlayModel of TargetManager.instance().models(OverlayModel)) {\n      overlayModel.delayedHideHighlight(0);\n    }\n  }\n\n  static async muteHighlight(): Promise<void[]> {\n    return await Promise.all(TargetManager.instance().models(OverlayModel).map(model => model.suspendModel()));\n  }\n\n  static async unmuteHighlight(): Promise<void[]> {\n    return await Promise.all(TargetManager.instance().models(OverlayModel).map(model => model.resumeModel()));\n  }\n\n  static highlightRect(rect: HighlightRect): void {\n    for (const overlayModel of TargetManager.instance().models(OverlayModel)) {\n      void overlayModel.highlightRect(rect);\n    }\n  }\n\n  static clearHighlight(): void {\n    for (const overlayModel of TargetManager.instance().models(OverlayModel)) {\n      void overlayModel.clearHighlight();\n    }\n  }\n\n  getDOMModel(): DOMModel {\n    return this.#domModel;\n  }\n\n  highlightRect({x, y, width, height, color, outlineColor}: HighlightRect):\n      Promise<Protocol.ProtocolResponseWithError> {\n    const highlightColor = color || {r: 255, g: 0, b: 255, a: 0.3};\n    const highlightOutlineColor = outlineColor || {r: 255, g: 0, b: 255, a: 0.5};\n    return this.overlayAgent.invoke_highlightRect(\n        {x, y, width, height, color: highlightColor, outlineColor: highlightOutlineColor});\n  }\n\n  clearHighlight(): Promise<Protocol.ProtocolResponseWithError> {\n    return this.overlayAgent.invoke_hideHighlight();\n  }\n\n  private async wireAgentToSettings(): Promise<void> {\n    this.#registeredListeners = [\n      this.#showPaintRectsSetting.addChangeListener(\n          () => this.overlayAgent.invoke_setShowPaintRects({result: this.#showPaintRectsSetting.get()})),\n      this.#showLayoutShiftRegionsSetting.addChangeListener(\n          () =>\n              this.overlayAgent.invoke_setShowLayoutShiftRegions({result: this.#showLayoutShiftRegionsSetting.get()})),\n      this.#showAdHighlightsSetting.addChangeListener(\n          () => this.overlayAgent.invoke_setShowAdHighlights({show: this.#showAdHighlightsSetting.get()})),\n      this.#showDebugBordersSetting.addChangeListener(\n          () => this.overlayAgent.invoke_setShowDebugBorders({show: this.#showDebugBordersSetting.get()})),\n      this.#showFPSCounterSetting.addChangeListener(\n          () => this.overlayAgent.invoke_setShowFPSCounter({show: this.#showFPSCounterSetting.get()})),\n      this.#showScrollBottleneckRectsSetting.addChangeListener(\n          () => this.overlayAgent.invoke_setShowScrollBottleneckRects(\n              {show: this.#showScrollBottleneckRectsSetting.get()})),\n    ];\n\n    if (this.#showPaintRectsSetting.get()) {\n      void this.overlayAgent.invoke_setShowPaintRects({result: true});\n    }\n    if (this.#showLayoutShiftRegionsSetting.get()) {\n      void this.overlayAgent.invoke_setShowLayoutShiftRegions({result: true});\n    }\n    if (this.#showAdHighlightsSetting.get()) {\n      void this.overlayAgent.invoke_setShowAdHighlights({show: true});\n    }\n    if (this.#showDebugBordersSetting.get()) {\n      void this.overlayAgent.invoke_setShowDebugBorders({show: true});\n    }\n    if (this.#showFPSCounterSetting.get()) {\n      void this.overlayAgent.invoke_setShowFPSCounter({show: true});\n    }\n    if (this.#showScrollBottleneckRectsSetting.get()) {\n      void this.overlayAgent.invoke_setShowScrollBottleneckRects({show: true});\n    }\n    if (this.#debuggerModel && this.#debuggerModel.isPaused()) {\n      this.updatePausedInDebuggerMessage();\n    }\n    await this.overlayAgent.invoke_setShowViewportSizeOnResize({show: this.#showViewportSizeOnResize});\n    this.#persistentHighlighter?.resetOverlay();\n  }\n\n  override async suspendModel(): Promise<void> {\n    Common.EventTarget.removeEventListeners(this.#registeredListeners);\n    await this.overlayAgent.invoke_disable();\n  }\n\n  override async resumeModel(): Promise<void> {\n    await Promise.all([this.overlayAgent.invoke_enable(), this.wireAgentToSettings()]);\n  }\n\n  setShowViewportSizeOnResize(show: boolean): void {\n    if (this.#showViewportSizeOnResize === show) {\n      return;\n    }\n\n    this.#showViewportSizeOnResize = show;\n    if (this.target().suspended()) {\n      return;\n    }\n    void this.overlayAgent.invoke_setShowViewportSizeOnResize({show});\n  }\n\n  private updatePausedInDebuggerMessage(): void {\n    if (this.target().suspended()) {\n      return;\n    }\n    const message = this.#debuggerModel && this.#debuggerModel.isPaused() &&\n            !Common.Settings.Settings.instance().moduleSetting('disable-paused-state-overlay').get() ?\n        i18nString(UIStrings.pausedInDebugger) :\n        undefined;\n    void this.overlayAgent.invoke_setPausedInDebuggerMessage({message});\n  }\n\n  setHighlighter(highlighter: Highlighter|null): void {\n    this.#highlighter = highlighter || this.#defaultHighlighter;\n  }\n\n  async setInspectMode(mode: Protocol.Overlay.InspectMode, showDetailedTooltip: boolean|undefined = true):\n      Promise<void> {\n    await this.#domModel.requestDocument();\n    this.#inspectModeEnabled = mode !== Protocol.Overlay.InspectMode.None;\n    this.dispatchEventToListeners(Events.INSPECT_MODE_WILL_BE_TOGGLED, this);\n    void this.#highlighter.setInspectMode(mode, this.buildHighlightConfig('all', showDetailedTooltip));\n  }\n\n  inspectModeEnabled(): boolean {\n    return this.#inspectModeEnabled;\n  }\n\n  highlightInOverlay(data: HighlightData, mode?: string, showInfo?: boolean): void {\n    if (this.#sourceOrderModeActive) {\n      // Return early if the source order is currently being shown the in the\n      // overlay, so that it is not cleared by the highlight\n      return;\n    }\n    if (this.#hideHighlightTimeout) {\n      clearTimeout(this.#hideHighlightTimeout);\n      this.#hideHighlightTimeout = null;\n    }\n    const highlightConfig = this.buildHighlightConfig(mode);\n    if (typeof showInfo !== 'undefined') {\n      highlightConfig.showInfo = showInfo;\n    }\n    this.#highlighter.highlightInOverlay(data, highlightConfig);\n  }\n\n  highlightInOverlayForTwoSeconds(data: HighlightData): void {\n    this.highlightInOverlay(data);\n    this.delayedHideHighlight(2000);\n  }\n\n  highlightGridInPersistentOverlay(nodeId: Protocol.DOM.NodeId): void {\n    if (!this.#persistentHighlighter) {\n      return;\n    }\n    this.#persistentHighlighter.highlightGridInOverlay(nodeId);\n  }\n\n  isHighlightedGridInPersistentOverlay(nodeId: Protocol.DOM.NodeId): boolean {\n    if (!this.#persistentHighlighter) {\n      return false;\n    }\n    return this.#persistentHighlighter.isGridHighlighted(nodeId);\n  }\n\n  hideGridInPersistentOverlay(nodeId: Protocol.DOM.NodeId): void {\n    if (!this.#persistentHighlighter) {\n      return;\n    }\n    this.#persistentHighlighter.hideGridInOverlay(nodeId);\n  }\n\n  highlightScrollSnapInPersistentOverlay(nodeId: Protocol.DOM.NodeId): void {\n    if (!this.#persistentHighlighter) {\n      return;\n    }\n    this.#persistentHighlighter.highlightScrollSnapInOverlay(nodeId);\n  }\n\n  isHighlightedScrollSnapInPersistentOverlay(nodeId: Protocol.DOM.NodeId): boolean {\n    if (!this.#persistentHighlighter) {\n      return false;\n    }\n    return this.#persistentHighlighter.isScrollSnapHighlighted(nodeId);\n  }\n\n  hideScrollSnapInPersistentOverlay(nodeId: Protocol.DOM.NodeId): void {\n    if (!this.#persistentHighlighter) {\n      return;\n    }\n    this.#persistentHighlighter.hideScrollSnapInOverlay(nodeId);\n  }\n\n  highlightFlexContainerInPersistentOverlay(nodeId: Protocol.DOM.NodeId): void {\n    if (!this.#persistentHighlighter) {\n      return;\n    }\n    this.#persistentHighlighter.highlightFlexInOverlay(nodeId);\n  }\n\n  isHighlightedFlexContainerInPersistentOverlay(nodeId: Protocol.DOM.NodeId): boolean {\n    if (!this.#persistentHighlighter) {\n      return false;\n    }\n    return this.#persistentHighlighter.isFlexHighlighted(nodeId);\n  }\n\n  hideFlexContainerInPersistentOverlay(nodeId: Protocol.DOM.NodeId): void {\n    if (!this.#persistentHighlighter) {\n      return;\n    }\n    this.#persistentHighlighter.hideFlexInOverlay(nodeId);\n  }\n\n  highlightContainerQueryInPersistentOverlay(nodeId: Protocol.DOM.NodeId): void {\n    if (!this.#persistentHighlighter) {\n      return;\n    }\n    this.#persistentHighlighter.highlightContainerQueryInOverlay(nodeId);\n  }\n\n  isHighlightedContainerQueryInPersistentOverlay(nodeId: Protocol.DOM.NodeId): boolean {\n    if (!this.#persistentHighlighter) {\n      return false;\n    }\n    return this.#persistentHighlighter.isContainerQueryHighlighted(nodeId);\n  }\n\n  hideContainerQueryInPersistentOverlay(nodeId: Protocol.DOM.NodeId): void {\n    if (!this.#persistentHighlighter) {\n      return;\n    }\n    this.#persistentHighlighter.hideContainerQueryInOverlay(nodeId);\n  }\n\n  highlightSourceOrderInOverlay(node: DOMNode): void {\n    const sourceOrderConfig = {\n      parentOutlineColor: Common.Color.SourceOrderHighlight.ParentOutline.toProtocolRGBA(),\n      childOutlineColor: Common.Color.SourceOrderHighlight.ChildOutline.toProtocolRGBA(),\n    };\n    this.#sourceOrderHighlighter.highlightSourceOrderInOverlay(node, sourceOrderConfig);\n  }\n\n  colorOfGridInPersistentOverlay(nodeId: Protocol.DOM.NodeId): string|null {\n    if (!this.#persistentHighlighter) {\n      return null;\n    }\n    return this.#persistentHighlighter.colorOfGrid(nodeId).asString(Common.Color.Format.HEX);\n  }\n\n  setColorOfGridInPersistentOverlay(nodeId: Protocol.DOM.NodeId, colorStr: string): void {\n    if (!this.#persistentHighlighter) {\n      return;\n    }\n    const color = Common.Color.parse(colorStr);\n    if (!color) {\n      return;\n    }\n    this.#persistentHighlighter.setColorOfGrid(nodeId, color);\n    this.#persistentHighlighter.resetOverlay();\n  }\n\n  colorOfFlexInPersistentOverlay(nodeId: Protocol.DOM.NodeId): string|null {\n    if (!this.#persistentHighlighter) {\n      return null;\n    }\n    return this.#persistentHighlighter.colorOfFlex(nodeId).asString(Common.Color.Format.HEX);\n  }\n\n  setColorOfFlexInPersistentOverlay(nodeId: Protocol.DOM.NodeId, colorStr: string): void {\n    if (!this.#persistentHighlighter) {\n      return;\n    }\n    const color = Common.Color.parse(colorStr);\n    if (!color) {\n      return;\n    }\n    this.#persistentHighlighter.setColorOfFlex(nodeId, color);\n    this.#persistentHighlighter.resetOverlay();\n  }\n\n  hideSourceOrderInOverlay(): void {\n    this.#sourceOrderHighlighter.hideSourceOrderHighlight();\n  }\n\n  setSourceOrderActive(isActive: boolean): void {\n    this.#sourceOrderModeActive = isActive;\n  }\n\n  private delayedHideHighlight(delay: number): void {\n    if (this.#hideHighlightTimeout === null) {\n      this.#hideHighlightTimeout = window.setTimeout(() => this.highlightInOverlay({clear: true}), delay);\n    }\n  }\n\n  highlightFrame(frameId: Protocol.Page.FrameId): void {\n    if (this.#hideHighlightTimeout) {\n      clearTimeout(this.#hideHighlightTimeout);\n      this.#hideHighlightTimeout = null;\n    }\n    this.#highlighter.highlightFrame(frameId);\n  }\n\n  showHingeForDualScreen(hinge: Hinge|null): void {\n    if (hinge) {\n      const {x, y, width, height, contentColor, outlineColor} = hinge;\n      void this.overlayAgent.invoke_setShowHinge({\n        hingeConfig: {rect: {x, y, width, height}, contentColor, outlineColor},\n      });\n    } else {\n      void this.overlayAgent.invoke_setShowHinge({});\n    }\n  }\n\n  setWindowControlsPlatform(selectedPlatform: EmulatedOSType): void {\n    this.#windowControls.selectedPlatform = selectedPlatform;\n  }\n\n  setWindowControlsThemeColor(themeColor: string): void {\n    this.#windowControls.themeColor = themeColor;\n  }\n\n  getWindowControlsConfig(): Protocol.Overlay.WindowControlsOverlayConfig {\n    return this.#windowControls.config;\n  }\n\n  async toggleWindowControlsToolbar(show: boolean): Promise<void> {\n    const wcoConfigObj = show ? {windowControlsOverlayConfig: this.#windowControls.config} : {};\n\n    const setWindowControlsOverlayOperation = this.overlayAgent.invoke_setShowWindowControlsOverlay(wcoConfigObj);\n    const toggleStylesheetOperation = this.#windowControls.toggleEmulatedOverlay(show);\n\n    await Promise.all([setWindowControlsOverlayOperation, toggleStylesheetOperation]);\n\n    this.setShowViewportSizeOnResize(!show);\n  }\n\n  private buildHighlightConfig(mode: string|undefined = 'all', showDetailedToolip: boolean|undefined = false):\n      Protocol.Overlay.HighlightConfig {\n    const showRulers = Common.Settings.Settings.instance().moduleSetting('show-metrics-rulers').get();\n    const highlightConfig: Protocol.Overlay.HighlightConfig = {\n      showInfo: mode === 'all' || mode === 'container-outline',\n      showRulers,\n      showStyles: showDetailedToolip,\n      showAccessibilityInfo: showDetailedToolip,\n      showExtensionLines: showRulers,\n      gridHighlightConfig: {},\n      flexContainerHighlightConfig: {},\n      flexItemHighlightConfig: {},\n      contrastAlgorithm: Root.Runtime.experiments.isEnabled('apca') ? Protocol.Overlay.ContrastAlgorithm.Apca :\n                                                                      Protocol.Overlay.ContrastAlgorithm.Aa,\n    };\n\n    if (mode === 'all' || mode === 'content') {\n      highlightConfig.contentColor = Common.Color.PageHighlight.Content.toProtocolRGBA();\n    }\n\n    if (mode === 'all' || mode === 'padding') {\n      highlightConfig.paddingColor = Common.Color.PageHighlight.Padding.toProtocolRGBA();\n    }\n\n    if (mode === 'all' || mode === 'border') {\n      highlightConfig.borderColor = Common.Color.PageHighlight.Border.toProtocolRGBA();\n    }\n\n    if (mode === 'all' || mode === 'margin') {\n      highlightConfig.marginColor = Common.Color.PageHighlight.Margin.toProtocolRGBA();\n    }\n\n    if (mode === 'all') {\n      highlightConfig.eventTargetColor = Common.Color.PageHighlight.EventTarget.toProtocolRGBA();\n      highlightConfig.shapeColor = Common.Color.PageHighlight.Shape.toProtocolRGBA();\n      highlightConfig.shapeMarginColor = Common.Color.PageHighlight.ShapeMargin.toProtocolRGBA();\n\n      highlightConfig.gridHighlightConfig = {\n        rowGapColor: Common.Color.PageHighlight.GapBackground.toProtocolRGBA(),\n        rowHatchColor: Common.Color.PageHighlight.GapHatch.toProtocolRGBA(),\n        columnGapColor: Common.Color.PageHighlight.GapBackground.toProtocolRGBA(),\n        columnHatchColor: Common.Color.PageHighlight.GapHatch.toProtocolRGBA(),\n        rowLineColor: Common.Color.PageHighlight.LayoutLine.toProtocolRGBA(),\n        columnLineColor: Common.Color.PageHighlight.LayoutLine.toProtocolRGBA(),\n        rowLineDash: true,\n        columnLineDash: true,\n      };\n\n      highlightConfig.flexContainerHighlightConfig = {\n        containerBorder: {\n          color: Common.Color.PageHighlight.LayoutLine.toProtocolRGBA(),\n          pattern: Protocol.Overlay.LineStylePattern.Dashed,\n        },\n        itemSeparator: {\n          color: Common.Color.PageHighlight.LayoutLine.toProtocolRGBA(),\n          pattern: Protocol.Overlay.LineStylePattern.Dotted,\n        },\n        lineSeparator: {\n          color: Common.Color.PageHighlight.LayoutLine.toProtocolRGBA(),\n          pattern: Protocol.Overlay.LineStylePattern.Dashed,\n        },\n        mainDistributedSpace: {\n          hatchColor: Common.Color.PageHighlight.GapHatch.toProtocolRGBA(),\n          fillColor: Common.Color.PageHighlight.GapBackground.toProtocolRGBA(),\n        },\n        crossDistributedSpace: {\n          hatchColor: Common.Color.PageHighlight.GapHatch.toProtocolRGBA(),\n          fillColor: Common.Color.PageHighlight.GapBackground.toProtocolRGBA(),\n        },\n        rowGapSpace: {\n          hatchColor: Common.Color.PageHighlight.GapHatch.toProtocolRGBA(),\n          fillColor: Common.Color.PageHighlight.GapBackground.toProtocolRGBA(),\n        },\n        columnGapSpace: {\n          hatchColor: Common.Color.PageHighlight.GapHatch.toProtocolRGBA(),\n          fillColor: Common.Color.PageHighlight.GapBackground.toProtocolRGBA(),\n        },\n      };\n\n      highlightConfig.flexItemHighlightConfig = {\n        baseSizeBox: {\n          hatchColor: Common.Color.PageHighlight.GapHatch.toProtocolRGBA(),\n        },\n        baseSizeBorder: {\n          color: Common.Color.PageHighlight.LayoutLine.toProtocolRGBA(),\n          pattern: Protocol.Overlay.LineStylePattern.Dotted,\n        },\n        flexibilityArrow: {\n          color: Common.Color.PageHighlight.LayoutLine.toProtocolRGBA(),\n        },\n      };\n    }\n\n    if (mode.endsWith('gap')) {\n      highlightConfig.gridHighlightConfig = {\n        gridBorderColor: Common.Color.PageHighlight.GridBorder.toProtocolRGBA(),\n        gridBorderDash: true,\n      };\n\n      if (mode === 'gap' || mode === 'row-gap') {\n        highlightConfig.gridHighlightConfig.rowGapColor = Common.Color.PageHighlight.GapBackground.toProtocolRGBA();\n        highlightConfig.gridHighlightConfig.rowHatchColor = Common.Color.PageHighlight.GapHatch.toProtocolRGBA();\n      }\n      if (mode === 'gap' || mode === 'column-gap') {\n        highlightConfig.gridHighlightConfig.columnGapColor = Common.Color.PageHighlight.GapBackground.toProtocolRGBA();\n        highlightConfig.gridHighlightConfig.columnHatchColor = Common.Color.PageHighlight.GapHatch.toProtocolRGBA();\n      }\n    }\n\n    if (mode.endsWith('gap')) {\n      highlightConfig.flexContainerHighlightConfig = {\n        containerBorder: {\n          color: Common.Color.PageHighlight.LayoutLine.toProtocolRGBA(),\n          pattern: Protocol.Overlay.LineStylePattern.Dashed,\n        },\n      };\n\n      if (mode === 'gap' || mode === 'row-gap') {\n        highlightConfig.flexContainerHighlightConfig.rowGapSpace = {\n          hatchColor: Common.Color.PageHighlight.GapHatch.toProtocolRGBA(),\n          fillColor: Common.Color.PageHighlight.GapBackground.toProtocolRGBA(),\n        };\n      }\n      if (mode === 'gap' || mode === 'column-gap') {\n        highlightConfig.flexContainerHighlightConfig.columnGapSpace = {\n          hatchColor: Common.Color.PageHighlight.GapHatch.toProtocolRGBA(),\n          fillColor: Common.Color.PageHighlight.GapBackground.toProtocolRGBA(),\n        };\n      }\n    }\n\n    if (mode === 'grid-areas') {\n      highlightConfig.gridHighlightConfig = {\n        rowLineColor: Common.Color.PageHighlight.LayoutLine.toProtocolRGBA(),\n        columnLineColor: Common.Color.PageHighlight.LayoutLine.toProtocolRGBA(),\n        rowLineDash: true,\n        columnLineDash: true,\n        showAreaNames: true,\n        areaBorderColor: Common.Color.PageHighlight.GridAreaBorder.toProtocolRGBA(),\n      };\n    }\n\n    if (mode === 'grid-template-columns') {\n      highlightConfig.contentColor = Common.Color.PageHighlight.Content.toProtocolRGBA();\n      highlightConfig.gridHighlightConfig = {\n        columnLineColor: Common.Color.PageHighlight.LayoutLine.toProtocolRGBA(),\n        columnLineDash: true,\n      };\n    }\n\n    if (mode === 'grid-template-rows') {\n      highlightConfig.contentColor = Common.Color.PageHighlight.Content.toProtocolRGBA();\n      highlightConfig.gridHighlightConfig = {\n        rowLineColor: Common.Color.PageHighlight.LayoutLine.toProtocolRGBA(),\n        rowLineDash: true,\n      };\n    }\n\n    if (mode === 'justify-content') {\n      highlightConfig.flexContainerHighlightConfig = {\n        containerBorder: {\n          color: Common.Color.PageHighlight.LayoutLine.toProtocolRGBA(),\n          pattern: Protocol.Overlay.LineStylePattern.Dashed,\n        },\n        mainDistributedSpace: {\n          hatchColor: Common.Color.PageHighlight.GapHatch.toProtocolRGBA(),\n          fillColor: Common.Color.PageHighlight.GapBackground.toProtocolRGBA(),\n        },\n      };\n    }\n\n    if (mode === 'align-content') {\n      highlightConfig.flexContainerHighlightConfig = {\n        containerBorder: {\n          color: Common.Color.PageHighlight.LayoutLine.toProtocolRGBA(),\n          pattern: Protocol.Overlay.LineStylePattern.Dashed,\n        },\n        crossDistributedSpace: {\n          hatchColor: Common.Color.PageHighlight.GapHatch.toProtocolRGBA(),\n          fillColor: Common.Color.PageHighlight.GapBackground.toProtocolRGBA(),\n        },\n      };\n    }\n\n    if (mode === 'align-items') {\n      highlightConfig.flexContainerHighlightConfig = {\n        containerBorder: {\n          color: Common.Color.PageHighlight.LayoutLine.toProtocolRGBA(),\n          pattern: Protocol.Overlay.LineStylePattern.Dashed,\n        },\n        lineSeparator: {\n          color: Common.Color.PageHighlight.LayoutLine.toProtocolRGBA(),\n          pattern: Protocol.Overlay.LineStylePattern.Dashed,\n        },\n        crossAlignment: {color: Common.Color.PageHighlight.LayoutLine.toProtocolRGBA()},\n      };\n    }\n\n    if (mode === 'flexibility') {\n      highlightConfig.flexItemHighlightConfig = {\n        baseSizeBox: {\n          hatchColor: Common.Color.PageHighlight.GapHatch.toProtocolRGBA(),\n        },\n        baseSizeBorder: {\n          color: Common.Color.PageHighlight.LayoutLine.toProtocolRGBA(),\n          pattern: Protocol.Overlay.LineStylePattern.Dotted,\n        },\n        flexibilityArrow: {\n          color: Common.Color.PageHighlight.LayoutLine.toProtocolRGBA(),\n        },\n      };\n    }\n\n    if (mode === 'container-outline') {\n      highlightConfig.containerQueryContainerHighlightConfig = {\n        containerBorder: {\n          color: Common.Color.PageHighlight.LayoutLine.toProtocolRGBA(),\n          pattern: Protocol.Overlay.LineStylePattern.Dashed,\n        },\n      };\n    }\n\n    return highlightConfig;\n  }\n\n  nodeHighlightRequested({nodeId}: Protocol.Overlay.NodeHighlightRequestedEvent): void {\n    const node = this.#domModel.nodeForId(nodeId);\n    if (node) {\n      this.dispatchEventToListeners(Events.HIGHLIGHT_NODE_REQUESTED, node);\n    }\n  }\n\n  static setInspectNodeHandler(handler: (arg0: DOMNode) => Promise<void>): void {\n    OverlayModel.inspectNodeHandler = handler;\n  }\n\n  inspectNodeRequested({backendNodeId}: Protocol.Overlay.InspectNodeRequestedEvent): void {\n    const deferredNode = new DeferredDOMNode(this.target(), backendNodeId);\n    if (OverlayModel.inspectNodeHandler) {\n      void deferredNode.resolvePromise().then(node => {\n        if (node && OverlayModel.inspectNodeHandler) {\n          void OverlayModel.inspectNodeHandler(node);\n        }\n      });\n    } else {\n      void Common.Revealer.reveal(deferredNode);\n    }\n    this.dispatchEventToListeners(Events.EXITED_INSPECT_MODE);\n  }\n\n  screenshotRequested({viewport}: Protocol.Overlay.ScreenshotRequestedEvent): void {\n    this.dispatchEventToListeners(Events.SCREENSHOT_REQUESTED, viewport);\n    this.dispatchEventToListeners(Events.EXITED_INSPECT_MODE);\n  }\n\n  inspectModeCanceled(): void {\n    this.dispatchEventToListeners(Events.EXITED_INSPECT_MODE);\n  }\n\n  static inspectNodeHandler: ((node: DOMNode) => Promise<void>)|null = null;\n\n  getOverlayAgent(): ProtocolProxyApi.OverlayApi {\n    return this.overlayAgent;\n  }\n\n  async hasStyleSheetText(url: Platform.DevToolsPath.UrlString): Promise<boolean> {\n    return await this.#windowControls.initializeStyleSheetText(url);\n  }\n}\n\nexport class WindowControls {\n  readonly #cssModel: CSSModel;\n  #originalStylesheetText: string|undefined;\n  #stylesheetId?: Protocol.DOM.StyleSheetId;\n  #currentUrl: Platform.DevToolsPath.UrlString|undefined;\n\n  #config: Protocol.Overlay.WindowControlsOverlayConfig = {\n    showCSS: false,\n    selectedPlatform: EmulatedOSType.WINDOWS,\n    themeColor: '#ffffff',\n  };\n\n  constructor(cssModel: CSSModel) {\n    this.#cssModel = cssModel;\n  }\n\n  get selectedPlatform(): string {\n    return this.#config.selectedPlatform;\n  }\n\n  set selectedPlatform(osType: EmulatedOSType) {\n    this.#config.selectedPlatform = osType;\n  }\n\n  get themeColor(): string {\n    return this.#config.themeColor;\n  }\n\n  set themeColor(color: string) {\n    this.#config.themeColor = color;\n  }\n\n  get config(): Protocol.Overlay.WindowControlsOverlayConfig {\n    return this.#config;\n  }\n\n  async initializeStyleSheetText(url: Platform.DevToolsPath.UrlString): Promise<boolean> {\n    if (this.#originalStylesheetText && url === this.#currentUrl) {\n      return true;\n    }\n\n    const cssSourceUrl = this.#fetchCssSourceUrl(url);\n    if (!cssSourceUrl) {\n      return false;\n    }\n\n    this.#stylesheetId = this.#fetchCurrentStyleSheet(cssSourceUrl);\n    if (!this.#stylesheetId) {\n      return false;\n    }\n\n    const stylesheetText = await this.#cssModel.getStyleSheetText(this.#stylesheetId);\n\n    if (!stylesheetText) {\n      return false;\n    }\n\n    this.#originalStylesheetText = stylesheetText;\n    this.#currentUrl = url;\n\n    return true;\n  }\n\n  async toggleEmulatedOverlay(showOverlay: boolean): Promise<void> {\n    if (!this.#stylesheetId || !this.#originalStylesheetText) {\n      return;\n    }\n    if (showOverlay) {\n      const styleSheetText = WindowControls.#getStyleSheetForPlatform(\n          this.#config.selectedPlatform.toLowerCase(), this.#originalStylesheetText);\n      if (styleSheetText) {\n        await this.#cssModel.setStyleSheetText(this.#stylesheetId, styleSheetText, false);\n      }\n    } else {\n      // Restore the original stylesheet\n      await this.#cssModel.setStyleSheetText(this.#stylesheetId, this.#originalStylesheetText, false);\n    }\n  }\n\n  static #getStyleSheetForPlatform(platform: string, originalStyleSheet: string|undefined): string|undefined {\n    const overlayDimensions = platformOverlayDimensions[platform as keyof PlatformOverlayDimensions];\n    return WindowControls.#transformStyleSheet(\n        overlayDimensions.x, overlayDimensions.y, overlayDimensions.width, overlayDimensions.height,\n        originalStyleSheet);\n  }\n\n  #fetchCssSourceUrl(url: Platform.DevToolsPath.UrlString): Platform.DevToolsPath.UrlString|undefined {\n    const parentURL = Common.ParsedURL.ParsedURL.extractOrigin(url);\n    const cssHeaders = this.#cssModel.styleSheetHeaders();\n    const header = cssHeaders.find(header => header.sourceURL && header.sourceURL.includes(parentURL));\n    return header?.sourceURL;\n  }\n\n  #fetchCurrentStyleSheet(cssSourceUrl: Platform.DevToolsPath.UrlString): Protocol.DOM.StyleSheetId|undefined {\n    const stylesheetIds = this.#cssModel.getStyleSheetIdsForURL(cssSourceUrl);\n    return stylesheetIds.length > 0 ? stylesheetIds[0] : undefined;\n  }\n\n  // The primary objective of this function is to adjust certain CSS environment variables within the existing stylesheet\n  // and provide it as the style sheet for the emulated overlay.\n  static #transformStyleSheet(\n      x: number, y: number, width: number, height: number, originalStyleSheet: string|undefined): string|undefined {\n    if (!originalStyleSheet) {\n      return undefined;\n    }\n    const stylesheetText = originalStyleSheet;\n\n    const updatedStylesheet =\n        stylesheetText.replace(/: env\\(titlebar-area-x(?:,[^)]*)?\\);/g, `: env(titlebar-area-x, ${x}px);`)\n            .replace(/: env\\(titlebar-area-y(?:,[^)]*)?\\);/g, `: env(titlebar-area-y, ${y}px);`)\n            .replace(\n                /: env\\(titlebar-area-width(?:,[^)]*)?\\);/g, `: env(titlebar-area-width, calc(100% - ${width}px));`)\n            .replace(/: env\\(titlebar-area-height(?:,[^)]*)?\\);/g, `: env(titlebar-area-height, ${height}px);`);\n\n    return updatedStylesheet;\n  }\n\n  transformStyleSheetforTesting(\n      x: number, y: number, width: number, height: number, originalStyleSheet: string|undefined): string|undefined {\n    return WindowControls.#transformStyleSheet(x, y, width, height, originalStyleSheet);\n  }\n}\n\nexport const enum Events {\n  INSPECT_MODE_WILL_BE_TOGGLED = 'InspectModeWillBeToggled',\n  EXITED_INSPECT_MODE = 'InspectModeExited',\n  HIGHLIGHT_NODE_REQUESTED = 'HighlightNodeRequested',\n  SCREENSHOT_REQUESTED = 'ScreenshotRequested',\n  PERSISTENT_GRID_OVERLAY_STATE_CHANGED = 'PersistentGridOverlayStateChanged',\n  PERSISTENT_FLEX_CONTAINER_OVERLAY_STATE_CHANGED = 'PersistentFlexContainerOverlayStateChanged',\n  PERSISTENT_SCROLL_SNAP_OVERLAY_STATE_CHANGED = 'PersistentScrollSnapOverlayStateChanged',\n  PERSISTENT_CONTAINER_QUERY_OVERLAY_STATE_CHANGED = 'PersistentContainerQueryOverlayStateChanged',\n}\n\nexport interface ChangedNodeId {\n  nodeId: number;\n  enabled: boolean;\n}\n\nexport interface EventTypes {\n  [Events.INSPECT_MODE_WILL_BE_TOGGLED]: OverlayModel;\n  [Events.EXITED_INSPECT_MODE]: void;\n  [Events.HIGHLIGHT_NODE_REQUESTED]: DOMNode;\n  [Events.SCREENSHOT_REQUESTED]: Protocol.Page.Viewport;\n  [Events.PERSISTENT_GRID_OVERLAY_STATE_CHANGED]: ChangedNodeId;\n  [Events.PERSISTENT_FLEX_CONTAINER_OVERLAY_STATE_CHANGED]: ChangedNodeId;\n  [Events.PERSISTENT_SCROLL_SNAP_OVERLAY_STATE_CHANGED]: ChangedNodeId;\n  [Events.PERSISTENT_CONTAINER_QUERY_OVERLAY_STATE_CHANGED]: ChangedNodeId;\n}\n\nexport interface Highlighter {\n  highlightInOverlay(data: HighlightData, config: Protocol.Overlay.HighlightConfig): void;\n\n  setInspectMode(mode: Protocol.Overlay.InspectMode, config: Protocol.Overlay.HighlightConfig): Promise<void>;\n\n  highlightFrame(frameId: Protocol.Page.FrameId): void;\n}\n\nclass DefaultHighlighter implements Highlighter {\n  readonly #model: OverlayModel;\n  constructor(model: OverlayModel) {\n    this.#model = model;\n  }\n\n  highlightInOverlay(data: HighlightData, highlightConfig: Protocol.Overlay.HighlightConfig): void {\n    const {node, deferredNode, object, selectorList} =\n        {node: undefined, deferredNode: undefined, object: undefined, selectorList: undefined, ...data};\n    const nodeId = node ? node.id : undefined;\n    const backendNodeId = deferredNode ? deferredNode.backendNodeId() : undefined;\n    const objectId = object ? object.objectId : undefined;\n    if (nodeId || backendNodeId || objectId) {\n      void this.#model.target().overlayAgent().invoke_highlightNode(\n          {highlightConfig, nodeId, backendNodeId, objectId, selector: selectorList});\n    } else {\n      void this.#model.target().overlayAgent().invoke_hideHighlight();\n    }\n  }\n\n  async setInspectMode(mode: Protocol.Overlay.InspectMode, highlightConfig: Protocol.Overlay.HighlightConfig):\n      Promise<void> {\n    await this.#model.target().overlayAgent().invoke_setInspectMode({mode, highlightConfig});\n  }\n\n  highlightFrame(frameId: Protocol.Page.FrameId): void {\n    void this.#model.target().overlayAgent().invoke_highlightFrame({\n      frameId,\n      contentColor: Common.Color.PageHighlight.Content.toProtocolRGBA(),\n      contentOutlineColor: Common.Color.PageHighlight.ContentOutline.toProtocolRGBA(),\n    });\n  }\n}\n\nexport class SourceOrderHighlighter {\n  readonly #model: OverlayModel;\n  constructor(model: OverlayModel) {\n    this.#model = model;\n  }\n\n  highlightSourceOrderInOverlay(node: DOMNode, sourceOrderConfig: Protocol.Overlay.SourceOrderConfig): void {\n    this.#model.setSourceOrderActive(true);\n    this.#model.setShowViewportSizeOnResize(false);\n    void this.#model.getOverlayAgent().invoke_highlightSourceOrder({sourceOrderConfig, nodeId: node.id});\n  }\n\n  hideSourceOrderHighlight(): void {\n    this.#model.setSourceOrderActive(false);\n    this.#model.setShowViewportSizeOnResize(true);\n    void this.#model.clearHighlight();\n  }\n}\n\nSDKModel.register(OverlayModel, {capabilities: Capability.DOM, autostart: true});\n\nexport interface HighlightNodeData {\n  node: DOMNode;\n  selectorList?: string;\n}\n\nexport interface HighlightDeferredNode {\n  deferredNode: DeferredDOMNode;\n}\n\nexport interface HighlightObjectData {\n  object: RemoteObject;\n  selectorList?: string;\n}\n\nexport type HighlightData = HighlightNodeData|HighlightDeferredNode|HighlightObjectData|{clear: boolean};\n", "// Copyright 2010 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport type * as ProtocolProxyApi from '../../generated/protocol-proxy-api.js';\nimport * as Protocol from '../../generated/protocol.js';\nimport * as Common from '../common/common.js';\nimport * as i18n from '../i18n/i18n.js';\nimport type * as Platform from '../platform/platform.js';\nimport * as Root from '../root/root.js';\n\nimport type {PageResourceLoadInitiator} from './PageResourceLoader.js';\nimport {type GetPropertiesResult, type RemoteObject, RemoteObjectProperty, ScopeRef} from './RemoteObject.js';\nimport {Events as ResourceTreeModelEvents, ResourceTreeModel} from './ResourceTreeModel.js';\nimport {type EvaluationOptions, type EvaluationResult, type ExecutionContext, RuntimeModel} from './RuntimeModel.js';\nimport {Script} from './Script.js';\nimport {SDKModel} from './SDKModel.js';\nimport {SourceMap} from './SourceMap.js';\nimport {SourceMapManager} from './SourceMapManager.js';\nimport {Capability, type Target} from './Target.js';\n\nconst UIStrings = {\n  /**\n   * @description Title of a section in the debugger showing local JavaScript variables.\n   */\n  local: 'Local',\n  /**\n   * @description Text that refers to closure as a programming term\n   */\n  closure: 'Closure',\n  /**\n   * @description Noun that represents a section or block of code in the Debugger Model. Shown in the Sources tab, while paused on a breakpoint.\n   */\n  block: 'Block',\n  /**\n   * @description Label for a group of JavaScript files\n   */\n  script: 'Script',\n  /**\n   * @description Title of a section in the debugger showing JavaScript variables from the a 'with'\n   *block. Block here means section of code, 'with' refers to a JavaScript programming concept and\n   *is a fixed term.\n   */\n  withBlock: '`With` block',\n  /**\n   * @description Title of a section in the debugger showing JavaScript variables from the a 'catch'\n   *block. Block here means section of code, 'catch' refers to a JavaScript programming concept and\n   *is a fixed term.\n   */\n  catchBlock: '`Catch` block',\n  /**\n   * @description Title of a section in the debugger showing JavaScript variables from the global scope.\n   */\n  global: 'Global',\n  /**\n   * @description Text for a JavaScript module, the programming concept\n   */\n  module: 'Module',\n  /**\n   * @description Text describing the expression scope in WebAssembly\n   */\n  expression: 'Expression',\n  /**\n   * @description Text in Scope Chain Sidebar Pane of the Sources panel\n   */\n  exception: 'Exception',\n  /**\n   * @description Text in Scope Chain Sidebar Pane of the Sources panel\n   */\n  returnValue: 'Return value',\n} as const;\nconst str_ = i18n.i18n.registerUIStrings('core/sdk/DebuggerModel.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\n\nexport function sortAndMergeRanges(locationRanges: Protocol.Debugger.LocationRange[]):\n    Protocol.Debugger.LocationRange[] {\n  function compare(p1: Protocol.Debugger.ScriptPosition, p2: Protocol.Debugger.ScriptPosition): number {\n    return (p1.lineNumber - p2.lineNumber) || (p1.columnNumber - p2.columnNumber);\n  }\n  function overlap(r1: Protocol.Debugger.LocationRange, r2: Protocol.Debugger.LocationRange): boolean {\n    if (r1.scriptId !== r2.scriptId) {\n      return false;\n    }\n    const n = compare(r1.start, r2.start);\n    if (n < 0) {\n      return compare(r1.end, r2.start) >= 0;\n    }\n    if (n > 0) {\n      return compare(r1.start, r2.end) <= 0;\n    }\n    return true;\n  }\n\n  if (locationRanges.length === 0) {\n    return [];\n  }\n  locationRanges.sort((r1, r2) => {\n    if (r1.scriptId < r2.scriptId) {\n      return -1;\n    }\n    if (r1.scriptId > r2.scriptId) {\n      return 1;\n    }\n    return compare(r1.start, r2.start) || compare(r1.end, r2.end);\n  });\n  let prev = locationRanges[0];\n  const merged = [];\n  for (let i = 1; i < locationRanges.length; ++i) {\n    const curr = locationRanges[i];\n    if (overlap(prev, curr)) {\n      if (compare(prev.end, curr.end) <= 0) {\n        prev = {...prev, end: curr.end};\n      }\n    } else {\n      merged.push(prev);\n      prev = curr;\n    }\n  }\n  merged.push(prev);\n  return merged;\n}\n\nexport const enum StepMode {\n  STEP_INTO = 'StepInto',\n  STEP_OUT = 'StepOut',\n  STEP_OVER = 'StepOver',\n}\n\nexport const WASM_SYMBOLS_PRIORITY = [\n  Protocol.Debugger.DebugSymbolsType.ExternalDWARF,\n  Protocol.Debugger.DebugSymbolsType.EmbeddedDWARF,\n  Protocol.Debugger.DebugSymbolsType.SourceMap,\n];\n\nexport class DebuggerModel extends SDKModel<EventTypes> {\n  readonly agent: ProtocolProxyApi.DebuggerApi;\n  #runtimeModel: RuntimeModel;\n  readonly #sourceMapManager: SourceMapManager<Script>;\n  #debuggerPausedDetails: DebuggerPausedDetails|null = null;\n  readonly #scripts = new Map<string, Script>();\n  readonly #scriptsBySourceURL = new Map<string, Script[]>();\n  #discardableScripts: Script[] = [];\n  continueToLocationCallback: ((arg0: DebuggerPausedDetails) => boolean)|null = null;\n  #selectedCallFrame: CallFrame|null = null;\n  #debuggerEnabled = false;\n  #debuggerId: string|null = null;\n  #skipAllPausesTimeout = 0;\n  #beforePausedCallback: ((arg0: DebuggerPausedDetails, stepOver: Location|null) => Promise<boolean>)|null = null;\n  #computeAutoStepRangesCallback: ((arg0: StepMode, arg1: CallFrame) => Promise<Array<{\n                                     start: Location,\n                                     end: Location,\n                                   }>>)|null = null;\n  #expandCallFramesCallback: ((arg0: CallFrame[]) => Promise<CallFrame[]>)|null = null;\n  evaluateOnCallFrameCallback:\n      ((arg0: CallFrame, arg1: EvaluationOptions) => Promise<EvaluationResult|null>)|null = null;\n  #synchronizeBreakpointsCallback: ((script: Script) => Promise<void>)|null = null;\n  // We need to be able to register listeners for individual breakpoints. As such, we dispatch\n  // on breakpoint ids, which are not statically known. The event #payload will always be a `Location`.\n  readonly #breakpointResolvedEventTarget = new Common.ObjectWrapper.ObjectWrapper<Record<string, Location>>();\n  // When stepping over with autostepping enabled, the context denotes the function to which autostepping is restricted\n  // to by way of its functionLocation (as per Debugger.CallFrame).\n  #autoSteppingContext: Location|null = null;\n  #isPausing = false;\n\n  constructor(target: Target) {\n    super(target);\n\n    target.registerDebuggerDispatcher(new DebuggerDispatcher(this));\n    this.agent = target.debuggerAgent();\n    this.#runtimeModel = (target.model(RuntimeModel) as RuntimeModel);\n\n    this.#sourceMapManager = new SourceMapManager(\n        target,\n        (compiledURL, sourceMappingURL, payload, script) =>\n            new SourceMap(compiledURL, sourceMappingURL, payload, script));\n\n    Common.Settings.Settings.instance()\n        .moduleSetting('pause-on-exception-enabled')\n        .addChangeListener(this.pauseOnExceptionStateChanged, this);\n    Common.Settings.Settings.instance()\n        .moduleSetting('pause-on-caught-exception')\n        .addChangeListener(this.pauseOnExceptionStateChanged, this);\n    Common.Settings.Settings.instance()\n        .moduleSetting('pause-on-uncaught-exception')\n        .addChangeListener(this.pauseOnExceptionStateChanged, this);\n    Common.Settings.Settings.instance()\n        .moduleSetting('disable-async-stack-traces')\n        .addChangeListener(this.asyncStackTracesStateChanged, this);\n    Common.Settings.Settings.instance()\n        .moduleSetting('breakpoints-active')\n        .addChangeListener(this.breakpointsActiveChanged, this);\n\n    if (!target.suspended()) {\n      void this.enableDebugger();\n    }\n\n    this.#sourceMapManager.setEnabled(\n        Common.Settings.Settings.instance().moduleSetting('js-source-maps-enabled').get());\n    Common.Settings.Settings.instance()\n        .moduleSetting('js-source-maps-enabled')\n        .addChangeListener(event => this.#sourceMapManager.setEnabled((event.data as boolean)));\n\n    const resourceTreeModel = (target.model(ResourceTreeModel) as ResourceTreeModel);\n    if (resourceTreeModel) {\n      resourceTreeModel.addEventListener(ResourceTreeModelEvents.FrameNavigated, this.onFrameNavigated, this);\n    }\n  }\n\n  static selectSymbolSource(debugSymbols: Protocol.Debugger.DebugSymbols[]|null): Protocol.Debugger.DebugSymbols|null {\n    if (!debugSymbols || debugSymbols.length === 0) {\n      return null;\n    }\n\n    // Provides backwards compatibility to previous CDP version on Protocol.Debugger.DebugSymbols.\n    // TODO(crbug.com/369515221): Remove extra code as soon as old v8 versions used in Node are no longer supported.\n    if ('type' in debugSymbols) {\n      if (debugSymbols.type === 'None') {\n        return null;\n      }\n      return debugSymbols as Protocol.Debugger.DebugSymbols;\n    }\n\n    let debugSymbolsSource = null;\n    const symbolTypes = new Map(debugSymbols.map(symbol => [symbol.type, symbol]));\n    for (const symbol of WASM_SYMBOLS_PRIORITY) {\n      if (symbolTypes.has(symbol)) {\n        debugSymbolsSource = symbolTypes.get(symbol) || null;\n        break;\n      }\n    }\n\n    console.assert(\n        debugSymbolsSource !== null,\n        'Unknown symbol types. Front-end and back-end should be kept in sync regarding Protocol.Debugger.DebugSymbolTypes');\n    if (debugSymbolsSource && debugSymbols.length > 1) {\n      Common.Console.Console.instance().warn(\n          `Multiple debug symbols for script were found. Using ${debugSymbolsSource.type}`);\n    }\n    return debugSymbolsSource;\n  }\n\n  sourceMapManager(): SourceMapManager<Script> {\n    return this.#sourceMapManager;\n  }\n\n  runtimeModel(): RuntimeModel {\n    return this.#runtimeModel;\n  }\n\n  debuggerEnabled(): boolean {\n    return Boolean(this.#debuggerEnabled);\n  }\n\n  debuggerId(): string|null {\n    return this.#debuggerId;\n  }\n\n  private async enableDebugger(): Promise<void> {\n    if (this.#debuggerEnabled) {\n      return;\n    }\n    this.#debuggerEnabled = true;\n\n    // Set a limit for the total size of collected script sources retained by debugger.\n    // 10MB for remote frontends, 100MB for others.\n    const isRemoteFrontend = Root.Runtime.Runtime.queryParam('remoteFrontend') || Root.Runtime.Runtime.queryParam('ws');\n    const maxScriptsCacheSize = isRemoteFrontend ? 10e6 : 100e6;\n    const enablePromise = this.agent.invoke_enable({maxScriptsCacheSize});\n    let instrumentationPromise: Promise<Protocol.Debugger.SetInstrumentationBreakpointResponse>|undefined;\n    if (Root.Runtime.experiments.isEnabled(Root.Runtime.ExperimentName.INSTRUMENTATION_BREAKPOINTS)) {\n      instrumentationPromise = this.agent.invoke_setInstrumentationBreakpoint({\n        instrumentation: Protocol.Debugger.SetInstrumentationBreakpointRequestInstrumentation.BeforeScriptExecution,\n      });\n    }\n    this.pauseOnExceptionStateChanged();\n    void this.asyncStackTracesStateChanged();\n    if (!Common.Settings.Settings.instance().moduleSetting('breakpoints-active').get()) {\n      this.breakpointsActiveChanged();\n    }\n    this.dispatchEventToListeners(Events.DebuggerWasEnabled, this);\n    const [enableResult] = await Promise.all([enablePromise, instrumentationPromise]);\n    this.registerDebugger(enableResult);\n  }\n\n  async syncDebuggerId(): Promise<Protocol.Debugger.EnableResponse> {\n    const isRemoteFrontend = Root.Runtime.Runtime.queryParam('remoteFrontend') || Root.Runtime.Runtime.queryParam('ws');\n    const maxScriptsCacheSize = isRemoteFrontend ? 10e6 : 100e6;\n    const enablePromise = this.agent.invoke_enable({maxScriptsCacheSize});\n    void enablePromise.then(this.registerDebugger.bind(this));\n    return await enablePromise;\n  }\n\n  private onFrameNavigated(): void {\n    if (DebuggerModel.shouldResyncDebuggerId) {\n      return;\n    }\n\n    DebuggerModel.shouldResyncDebuggerId = true;\n  }\n\n  private registerDebugger(response: Protocol.Debugger.EnableResponse): void {\n    if (response.getError()) {\n      this.#debuggerEnabled = false;\n      return;\n    }\n    const {debuggerId} = response;\n    debuggerIdToModel.set(debuggerId, this);\n    this.#debuggerId = debuggerId;\n    this.dispatchEventToListeners(Events.DebuggerIsReadyToPause, this);\n  }\n\n  isReadyToPause(): boolean {\n    return Boolean(this.#debuggerId);\n  }\n\n  static async modelForDebuggerId(debuggerId: string): Promise<DebuggerModel|null> {\n    if (DebuggerModel.shouldResyncDebuggerId) {\n      await DebuggerModel.resyncDebuggerIdForModels();\n      DebuggerModel.shouldResyncDebuggerId = false;\n    }\n    return debuggerIdToModel.get(debuggerId) || null;\n  }\n\n  static async resyncDebuggerIdForModels(): Promise<void> {\n    const dbgModels = debuggerIdToModel.values();\n    for (const dbgModel of dbgModels) {\n      if (dbgModel.debuggerEnabled()) {\n        await dbgModel.syncDebuggerId();\n      }\n    }\n  }\n\n  private async disableDebugger(): Promise<void> {\n    if (!this.#debuggerEnabled) {\n      return;\n    }\n    this.#debuggerEnabled = false;\n\n    await this.asyncStackTracesStateChanged();\n    await this.agent.invoke_disable();\n    this.#isPausing = false;\n    this.globalObjectCleared();\n    this.dispatchEventToListeners(Events.DebuggerWasDisabled, this);\n    if (typeof this.#debuggerId === 'string') {\n      debuggerIdToModel.delete(this.#debuggerId);\n    }\n    this.#debuggerId = null;\n  }\n\n  private skipAllPauses(skip: boolean): void {\n    if (this.#skipAllPausesTimeout) {\n      clearTimeout(this.#skipAllPausesTimeout);\n      this.#skipAllPausesTimeout = 0;\n    }\n    void this.agent.invoke_setSkipAllPauses({skip});\n  }\n\n  skipAllPausesUntilReloadOrTimeout(timeout: number): void {\n    if (this.#skipAllPausesTimeout) {\n      clearTimeout(this.#skipAllPausesTimeout);\n    }\n    void this.agent.invoke_setSkipAllPauses({skip: true});\n    // If reload happens before the timeout, the flag will be already unset and the timeout callback won't change anything.\n    this.#skipAllPausesTimeout = window.setTimeout(this.skipAllPauses.bind(this, false), timeout);\n  }\n\n  private pauseOnExceptionStateChanged(): void {\n    const pauseOnCaughtEnabled = Common.Settings.Settings.instance().moduleSetting('pause-on-caught-exception').get();\n    let state: Protocol.Debugger.SetPauseOnExceptionsRequestState;\n\n    const pauseOnUncaughtEnabled =\n        Common.Settings.Settings.instance().moduleSetting('pause-on-uncaught-exception').get();\n    if (pauseOnCaughtEnabled && pauseOnUncaughtEnabled) {\n      state = Protocol.Debugger.SetPauseOnExceptionsRequestState.All;\n    } else if (pauseOnCaughtEnabled) {\n      state = Protocol.Debugger.SetPauseOnExceptionsRequestState.Caught;\n    } else if (pauseOnUncaughtEnabled) {\n      state = Protocol.Debugger.SetPauseOnExceptionsRequestState.Uncaught;\n    } else {\n      state = Protocol.Debugger.SetPauseOnExceptionsRequestState.None;\n    }\n    void this.agent.invoke_setPauseOnExceptions({state});\n  }\n\n  private asyncStackTracesStateChanged(): Promise<Protocol.ProtocolResponseWithError> {\n    const maxAsyncStackChainDepth = 32;\n    const enabled =\n        !Common.Settings.Settings.instance().moduleSetting('disable-async-stack-traces').get() && this.#debuggerEnabled;\n    const maxDepth = enabled ? maxAsyncStackChainDepth : 0;\n    return this.agent.invoke_setAsyncCallStackDepth({maxDepth});\n  }\n\n  private breakpointsActiveChanged(): void {\n    void this.agent.invoke_setBreakpointsActive(\n        {active: Common.Settings.Settings.instance().moduleSetting('breakpoints-active').get()});\n  }\n\n  setComputeAutoStepRangesCallback(callback: ((arg0: StepMode, arg1: CallFrame) => Promise<LocationRange[]>)|null):\n      void {\n    this.#computeAutoStepRangesCallback = callback;\n  }\n\n  private async computeAutoStepSkipList(mode: StepMode): Promise<Protocol.Debugger.LocationRange[]> {\n    let ranges: LocationRange[] = [];\n    if (this.#computeAutoStepRangesCallback && this.#debuggerPausedDetails &&\n        this.#debuggerPausedDetails.callFrames.length > 0) {\n      const [callFrame] = this.#debuggerPausedDetails.callFrames;\n      ranges = await this.#computeAutoStepRangesCallback.call(null, mode, callFrame);\n    }\n    const skipList = ranges.map(({start, end}) => ({\n                                  scriptId: start.scriptId,\n                                  start: {lineNumber: start.lineNumber, columnNumber: start.columnNumber},\n                                  end: {lineNumber: end.lineNumber, columnNumber: end.columnNumber},\n                                }));\n    return sortAndMergeRanges(skipList);\n  }\n\n  async stepInto(): Promise<void> {\n    const skipList = await this.computeAutoStepSkipList(StepMode.STEP_INTO);\n    void this.agent.invoke_stepInto({breakOnAsyncCall: false, skipList});\n  }\n\n  async stepOver(): Promise<void> {\n    this.#autoSteppingContext = this.#debuggerPausedDetails?.callFrames[0]?.functionLocation() ?? null;\n    const skipList = await this.computeAutoStepSkipList(StepMode.STEP_OVER);\n    void this.agent.invoke_stepOver({skipList});\n  }\n\n  async stepOut(): Promise<void> {\n    const skipList = await this.computeAutoStepSkipList(StepMode.STEP_OUT);\n    if (skipList.length !== 0) {\n      void this.agent.invoke_stepOver({skipList});\n    } else {\n      void this.agent.invoke_stepOut();\n    }\n  }\n\n  scheduleStepIntoAsync(): void {\n    void this.computeAutoStepSkipList(StepMode.STEP_INTO).then(skipList => {\n      void this.agent.invoke_stepInto({breakOnAsyncCall: true, skipList});\n    });\n  }\n\n  resume(): void {\n    void this.agent.invoke_resume({terminateOnResume: false});\n    this.#isPausing = false;\n  }\n\n  pause(): void {\n    this.#isPausing = true;\n    this.skipAllPauses(false);\n    void this.agent.invoke_pause();\n  }\n\n  async setBreakpointByURL(\n      url: Platform.DevToolsPath.UrlString, lineNumber: number, columnNumber?: number,\n      condition?: BackendCondition): Promise<SetBreakpointResult> {\n    // Adjust column if needed.\n    let minColumnNumber = 0;\n    const scripts = this.#scriptsBySourceURL.get(url) || [];\n    for (let i = 0, l = scripts.length; i < l; ++i) {\n      const script = scripts[i];\n      if (lineNumber === script.lineOffset) {\n        minColumnNumber = minColumnNumber ? Math.min(minColumnNumber, script.columnOffset) : script.columnOffset;\n      }\n    }\n    columnNumber = Math.max(columnNumber || 0, minColumnNumber);\n    const response = await this.agent.invoke_setBreakpointByUrl({\n      lineNumber,\n      url,\n      columnNumber,\n      condition,\n    });\n    if (response.getError()) {\n      return {locations: [], breakpointId: null};\n    }\n    let locations: Location[] = [];\n    if (response.locations) {\n      locations = response.locations.map(payload => Location.fromPayload(this, payload));\n    }\n    return {locations, breakpointId: response.breakpointId};\n  }\n\n  async setBreakpointInAnonymousScript(\n      scriptHash: string, lineNumber: number, columnNumber?: number,\n      condition?: BackendCondition): Promise<SetBreakpointResult> {\n    const response = await this.agent.invoke_setBreakpointByUrl({lineNumber, scriptHash, columnNumber, condition});\n    if (response.getError()) {\n      return {locations: [], breakpointId: null};\n    }\n    let locations: Location[] = [];\n    if (response.locations) {\n      locations = response.locations.map(payload => Location.fromPayload(this, payload));\n    }\n    return {locations, breakpointId: response.breakpointId};\n  }\n\n  async removeBreakpoint(breakpointId: Protocol.Debugger.BreakpointId): Promise<void> {\n    await this.agent.invoke_removeBreakpoint({breakpointId});\n  }\n\n  async getPossibleBreakpoints(startLocation: Location, endLocation: Location|null, restrictToFunction: boolean):\n      Promise<BreakLocation[]> {\n    const response = await this.agent.invoke_getPossibleBreakpoints({\n      start: startLocation.payload(),\n      end: endLocation ? endLocation.payload() : undefined,\n      restrictToFunction,\n    });\n    if (response.getError() || !response.locations) {\n      return [];\n    }\n    return response.locations.map(location => BreakLocation.fromPayload(this, location));\n  }\n\n  async fetchAsyncStackTrace(stackId: Protocol.Runtime.StackTraceId): Promise<Protocol.Runtime.StackTrace|null> {\n    const response = await this.agent.invoke_getStackTrace({stackTraceId: stackId});\n    return response.getError() ? null : response.stackTrace;\n  }\n\n  breakpointResolved(breakpointId: string, location: Protocol.Debugger.Location): void {\n    this.#breakpointResolvedEventTarget.dispatchEventToListeners(breakpointId, Location.fromPayload(this, location));\n  }\n\n  globalObjectCleared(): void {\n    this.resetDebuggerPausedDetails();\n    this.reset();\n    // TODO(dgozman): move clients to ExecutionContextDestroyed/ScriptCollected events.\n    this.dispatchEventToListeners(Events.GlobalObjectCleared, this);\n  }\n\n  private reset(): void {\n    for (const script of this.#scripts.values()) {\n      this.#sourceMapManager.detachSourceMap(script);\n    }\n    this.#scripts.clear();\n    this.#scriptsBySourceURL.clear();\n    this.#discardableScripts = [];\n    this.#autoSteppingContext = null;\n  }\n\n  scripts(): Script[] {\n    return Array.from(this.#scripts.values());\n  }\n\n  scriptForId(scriptId: string): Script|null {\n    return this.#scripts.get(scriptId) || null;\n  }\n\n  /**\n   * Returns all `Script` objects with the same provided `sourceURL`. The\n   * resulting array is sorted by time with the newest `Script` in the front.\n   */\n  scriptsForSourceURL(sourceURL: string): Script[] {\n    return this.#scriptsBySourceURL.get(sourceURL) || [];\n  }\n\n  scriptsForExecutionContext(executionContext: ExecutionContext): Script[] {\n    const result = [];\n    for (const script of this.#scripts.values()) {\n      if (script.executionContextId === executionContext.id) {\n        result.push(script);\n      }\n    }\n    return result;\n  }\n\n  get callFrames(): CallFrame[]|null {\n    return this.#debuggerPausedDetails ? this.#debuggerPausedDetails.callFrames : null;\n  }\n\n  debuggerPausedDetails(): DebuggerPausedDetails|null {\n    return this.#debuggerPausedDetails;\n  }\n\n  private async setDebuggerPausedDetails(debuggerPausedDetails: DebuggerPausedDetails): Promise<boolean> {\n    this.#isPausing = false;\n    this.#debuggerPausedDetails = debuggerPausedDetails;\n    if (this.#beforePausedCallback) {\n      if (!await this.#beforePausedCallback.call(null, debuggerPausedDetails, this.#autoSteppingContext)) {\n        return false;\n      }\n    }\n    // If we resolved a location in auto-stepping callback, reset the\n    // auto-step-over context.\n    this.#autoSteppingContext = null;\n    this.dispatchEventToListeners(Events.DebuggerPaused, this);\n    this.setSelectedCallFrame(debuggerPausedDetails.callFrames[0]);\n    return true;\n  }\n\n  private resetDebuggerPausedDetails(): void {\n    this.#isPausing = false;\n    this.#debuggerPausedDetails = null;\n    this.setSelectedCallFrame(null);\n  }\n\n  setBeforePausedCallback(\n      callback: ((arg0: DebuggerPausedDetails, autoSteppingContext: Location|null) => Promise<boolean>)|null): void {\n    this.#beforePausedCallback = callback;\n  }\n\n  setExpandCallFramesCallback(callback: ((arg0: CallFrame[]) => Promise<CallFrame[]>)|null): void {\n    this.#expandCallFramesCallback = callback;\n  }\n\n  setEvaluateOnCallFrameCallback(\n      callback: ((arg0: CallFrame, arg1: EvaluationOptions) => Promise<EvaluationResult|null>)|null): void {\n    this.evaluateOnCallFrameCallback = callback;\n  }\n\n  setSynchronizeBreakpointsCallback(callback: ((script: Script) => Promise<void>)|null): void {\n    this.#synchronizeBreakpointsCallback = callback;\n  }\n\n  async pausedScript(\n      callFrames: Protocol.Debugger.CallFrame[], reason: Protocol.Debugger.PausedEventReason, auxData: Object|undefined,\n      breakpointIds: string[], asyncStackTrace?: Protocol.Runtime.StackTrace,\n      asyncStackTraceId?: Protocol.Runtime.StackTraceId): Promise<void> {\n    if (reason === Protocol.Debugger.PausedEventReason.Instrumentation) {\n      const script = this.scriptForId((auxData as PausedOnInstrumentationData).scriptId);\n      if (this.#synchronizeBreakpointsCallback && script) {\n        await this.#synchronizeBreakpointsCallback(script);\n      }\n      this.resume();\n      return;\n    }\n\n    const pausedDetails =\n        new DebuggerPausedDetails(this, callFrames, reason, auxData, breakpointIds, asyncStackTrace, asyncStackTraceId);\n    await this.#expandCallFrames(pausedDetails);\n\n    if (this.continueToLocationCallback) {\n      const callback = this.continueToLocationCallback;\n      this.continueToLocationCallback = null;\n      if (callback(pausedDetails)) {\n        return;\n      }\n    }\n\n    if (!await this.setDebuggerPausedDetails(pausedDetails)) {\n      if (this.#autoSteppingContext) {\n        void this.stepOver();\n      } else {\n        void this.stepInto();\n      }\n    } else {\n      Common.EventTarget.fireEvent('DevTools.DebuggerPaused');\n    }\n  }\n\n  /** Delegates to the DebuggerLanguagePlugin and potential attached source maps to expand inlined call frames */\n  async #expandCallFrames(pausedDetails: DebuggerPausedDetails): Promise<void> {\n    if (this.#expandCallFramesCallback) {\n      pausedDetails.callFrames = await this.#expandCallFramesCallback.call(null, pausedDetails.callFrames);\n    }\n\n    if (!Root.Runtime.experiments.isEnabled(Root.Runtime.ExperimentName.USE_SOURCE_MAP_SCOPES)) {\n      return;\n    }\n\n    // TODO(crbug.com/40277685): Support attaching/detaching source maps after pausing.\n    // Expanding call frames via source maps here is only suitable for the experiment prototype because\n    // we block until all relevant source maps are loaded.\n    // We should change this so the \"Debugger Plugin\" and \"Source Map\" have a bottle neck where they expand\n    // call frames and that bottleneck should support attaching/detaching source maps while paused.\n    const finalFrames: CallFrame[] = [];\n    for (const frame of pausedDetails.callFrames) {\n      const sourceMap = await this.sourceMapManager().sourceMapForClientPromise(frame.script);\n      if (sourceMap?.hasScopeInfo()) {\n        finalFrames.push(...sourceMap.expandCallFrame(frame));\n      } else {\n        finalFrames.push(frame);\n      }\n    }\n    pausedDetails.callFrames = finalFrames;\n  }\n\n  resumedScript(): void {\n    this.resetDebuggerPausedDetails();\n    this.dispatchEventToListeners(Events.DebuggerResumed, this);\n  }\n\n  parsedScriptSource(\n      scriptId: Protocol.Runtime.ScriptId, sourceURL: Platform.DevToolsPath.UrlString, startLine: number,\n      startColumn: number, endLine: number, endColumn: number,\n      // TODO(crbug.com/1172300) Ignored during the jsdoc to ts migration\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      executionContextId: number, hash: string, executionContextAuxData: any, isLiveEdit: boolean,\n      sourceMapURL: string|undefined, hasSourceURLComment: boolean, hasSyntaxError: boolean, length: number,\n      isModule: boolean|null, originStackTrace: Protocol.Runtime.StackTrace|null, codeOffset: number|null,\n      scriptLanguage: string|null, debugSymbols: Protocol.Debugger.DebugSymbols[]|null,\n      embedderName: Platform.DevToolsPath.UrlString|null, buildId: string|null): Script {\n    const knownScript = this.#scripts.get(scriptId);\n    if (knownScript) {\n      return knownScript;\n    }\n    let isContentScript = false;\n    if (executionContextAuxData && ('isDefault' in executionContextAuxData)) {\n      isContentScript = !executionContextAuxData['isDefault'];\n    }\n\n    const selectedDebugSymbol = DebuggerModel.selectSymbolSource(debugSymbols);\n    const script = new Script(\n        this, scriptId, sourceURL, startLine, startColumn, endLine, endColumn, executionContextId, hash,\n        isContentScript, isLiveEdit, sourceMapURL, hasSourceURLComment, length, isModule, originStackTrace, codeOffset,\n        scriptLanguage, selectedDebugSymbol, embedderName, buildId);\n    this.registerScript(script);\n    this.dispatchEventToListeners(Events.ParsedScriptSource, script);\n\n    if (script.sourceMapURL && !hasSyntaxError) {\n      this.#sourceMapManager.attachSourceMap(script, script.sourceURL, script.sourceMapURL);\n    }\n\n    const isDiscardable = hasSyntaxError && script.isAnonymousScript();\n    if (isDiscardable) {\n      this.#discardableScripts.push(script);\n      this.collectDiscardedScripts();\n    }\n    return script;\n  }\n\n  setSourceMapURL(script: Script, newSourceMapURL: Platform.DevToolsPath.UrlString): void {\n    // Detach any previous source map from the `script` first.\n    this.#sourceMapManager.detachSourceMap(script);\n    script.sourceMapURL = newSourceMapURL;\n    this.#sourceMapManager.attachSourceMap(script, script.sourceURL, script.sourceMapURL);\n  }\n\n  async setDebugInfoURL(script: Script, _externalURL: Platform.DevToolsPath.UrlString): Promise<void> {\n    if (this.#expandCallFramesCallback && this.#debuggerPausedDetails) {\n      this.#debuggerPausedDetails.callFrames =\n          await this.#expandCallFramesCallback.call(null, this.#debuggerPausedDetails.callFrames);\n    }\n    this.dispatchEventToListeners(Events.DebugInfoAttached, script);\n  }\n\n  executionContextDestroyed(executionContext: ExecutionContext): void {\n    for (const script of this.#scripts.values()) {\n      if (script.executionContextId === executionContext.id) {\n        this.#sourceMapManager.detachSourceMap(script);\n      }\n    }\n  }\n\n  private registerScript(script: Script): void {\n    this.#scripts.set(script.scriptId, script);\n    if (script.isAnonymousScript()) {\n      return;\n    }\n\n    let scripts = this.#scriptsBySourceURL.get(script.sourceURL);\n    if (!scripts) {\n      scripts = [];\n      this.#scriptsBySourceURL.set(script.sourceURL, scripts);\n    }\n    // Newer scripts with the same URL should be preferred so we put them in\n    // the front. Consuming code usually will iterate over the array and pick\n    // the first script that works.\n    scripts.unshift(script);\n  }\n\n  private unregisterScript(script: Script): void {\n    console.assert(script.isAnonymousScript());\n    this.#scripts.delete(script.scriptId);\n  }\n\n  private collectDiscardedScripts(): void {\n    if (this.#discardableScripts.length < 1000) {\n      return;\n    }\n    const scriptsToDiscard = this.#discardableScripts.splice(0, 100);\n    for (const script of scriptsToDiscard) {\n      this.unregisterScript(script);\n      this.dispatchEventToListeners(Events.DiscardedAnonymousScriptSource, script);\n    }\n  }\n\n  createRawLocation(script: Script, lineNumber: number, columnNumber: number, inlineFrameIndex?: number): Location {\n    return this.createRawLocationByScriptId(script.scriptId, lineNumber, columnNumber, inlineFrameIndex);\n  }\n\n  createRawLocationByURL(sourceURL: string, lineNumber: number, columnNumber?: number, inlineFrameIndex?: number):\n      Location|null {\n    for (const script of this.#scriptsBySourceURL.get(sourceURL) || []) {\n      if (script.lineOffset > lineNumber ||\n          (script.lineOffset === lineNumber && columnNumber !== undefined && script.columnOffset > columnNumber)) {\n        continue;\n      }\n      if (script.endLine < lineNumber ||\n          (script.endLine === lineNumber && columnNumber !== undefined && script.endColumn <= columnNumber)) {\n        continue;\n      }\n      return new Location(this, script.scriptId, lineNumber, columnNumber, inlineFrameIndex);\n    }\n    return null;\n  }\n\n  createRawLocationByScriptId(\n      scriptId: Protocol.Runtime.ScriptId, lineNumber: number, columnNumber?: number,\n      inlineFrameIndex?: number): Location {\n    return new Location(this, scriptId, lineNumber, columnNumber, inlineFrameIndex);\n  }\n\n  createRawLocationsByStackTrace(stackTrace: Protocol.Runtime.StackTrace): Location[] {\n    const rawLocations: Location[] = [];\n    for (let current: Protocol.Runtime.StackTrace|undefined = stackTrace; current; current = current.parent) {\n      for (const {scriptId, lineNumber, columnNumber} of current.callFrames) {\n        rawLocations.push(this.createRawLocationByScriptId(scriptId, lineNumber, columnNumber));\n      }\n    }\n    return rawLocations;\n  }\n\n  isPaused(): boolean {\n    return Boolean(this.debuggerPausedDetails());\n  }\n\n  isPausing(): boolean {\n    return this.#isPausing;\n  }\n\n  setSelectedCallFrame(callFrame: CallFrame|null): void {\n    if (this.#selectedCallFrame === callFrame) {\n      return;\n    }\n    this.#selectedCallFrame = callFrame;\n    this.dispatchEventToListeners(Events.CallFrameSelected, this);\n  }\n\n  selectedCallFrame(): CallFrame|null {\n    return this.#selectedCallFrame;\n  }\n\n  async evaluateOnSelectedCallFrame(options: EvaluationOptions): Promise<EvaluationResult> {\n    const callFrame = this.selectedCallFrame();\n    if (!callFrame) {\n      throw new Error('No call frame selected');\n    }\n    return await callFrame.evaluate(options);\n  }\n\n  functionDetailsPromise(remoteObject: RemoteObject): Promise<FunctionDetails|null> {\n    return remoteObject.getAllProperties(false /* accessorPropertiesOnly */, false /* generatePreview */)\n        .then(buildDetails.bind(this));\n\n    function buildDetails(this: DebuggerModel, response: GetPropertiesResult): FunctionDetails|null {\n      if (!response) {\n        return null;\n      }\n      let location: (RemoteObject|null|undefined)|null = null;\n      if (response.internalProperties) {\n        for (const prop of response.internalProperties) {\n          if (prop.name === '[[FunctionLocation]]') {\n            location = prop.value;\n          }\n        }\n      }\n      let functionName: RemoteObject|null = null;\n      if (response.properties) {\n        for (const prop of response.properties) {\n          if (prop.name === 'name' && prop.value?.type === 'string') {\n            functionName = prop.value;\n          }\n        }\n      }\n      let debuggerLocation: Location|null = null;\n      if (location) {\n        debuggerLocation = this.createRawLocationByScriptId(\n            location.value.scriptId, location.value.lineNumber, location.value.columnNumber);\n      }\n      return {location: debuggerLocation, functionName: functionName ? functionName.value as string : ''};\n    }\n  }\n\n  async setVariableValue(\n      scopeNumber: number, variableName: string, newValue: Protocol.Runtime.CallArgument,\n      callFrameId: Protocol.Debugger.CallFrameId): Promise<string|undefined> {\n    const response = await this.agent.invoke_setVariableValue({scopeNumber, variableName, newValue, callFrameId});\n    const error = response.getError();\n    return error;\n  }\n\n  addBreakpointListener(\n      breakpointId: string, listener: (arg0: Common.EventTarget.EventTargetEvent<Location>) => void,\n      thisObject?: Object): void {\n    this.#breakpointResolvedEventTarget.addEventListener(breakpointId, listener, thisObject);\n  }\n\n  removeBreakpointListener(\n      breakpointId: string, listener: (arg0: Common.EventTarget.EventTargetEvent<Location>) => void,\n      thisObject?: Object): void {\n    this.#breakpointResolvedEventTarget.removeEventListener(breakpointId, listener, thisObject);\n  }\n\n  async setBlackboxPatterns(patterns: string[], skipAnonymous: boolean): Promise<boolean> {\n    const response = await this.agent.invoke_setBlackboxPatterns({patterns, skipAnonymous});\n    const error = response.getError();\n    return !error;\n  }\n\n  async setBlackboxExecutionContexts(uniqueIds: string[]): Promise<boolean> {\n    const response = await this.agent.invoke_setBlackboxExecutionContexts({uniqueIds});\n    const error = response.getError();\n    return !error;\n  }\n\n  override dispose(): void {\n    if (this.#debuggerId) {\n      debuggerIdToModel.delete(this.#debuggerId);\n    }\n    Common.Settings.Settings.instance()\n        .moduleSetting('pause-on-exception-enabled')\n        .removeChangeListener(this.pauseOnExceptionStateChanged, this);\n    Common.Settings.Settings.instance()\n        .moduleSetting('pause-on-caught-exception')\n        .removeChangeListener(this.pauseOnExceptionStateChanged, this);\n    Common.Settings.Settings.instance()\n        .moduleSetting('disable-async-stack-traces')\n        .removeChangeListener(this.asyncStackTracesStateChanged, this);\n  }\n\n  override async suspendModel(): Promise<void> {\n    await this.disableDebugger();\n  }\n\n  override async resumeModel(): Promise<void> {\n    await this.enableDebugger();\n  }\n\n  private static shouldResyncDebuggerId = false;\n\n  getEvaluateOnCallFrameCallback():\n      ((arg0: CallFrame, arg1: EvaluationOptions) => Promise<EvaluationResult|null>)|null {\n    return this.evaluateOnCallFrameCallback;\n  }\n\n  /**\n   * Iterates the async stack trace parents.\n   *\n   * Retrieving cross-target async stack fragments requires CDP interaction, so this is an async generator.\n   *\n   * Important: This iterator will not yield the \"synchronous\" part of the stack trace, only the async parent chain.\n   */\n  async *\n      iterateAsyncParents(stackTraceOrPausedDetails: Protocol.Runtime.StackTrace|DebuggerPausedDetails):\n          AsyncGenerator<{stackTrace: Protocol.Runtime.StackTrace, target: Target}> {\n    // We make `DebuggerPausedDetails` look like a stack trace. We are only interested in `parent` and `parentId` in any case.\n    let stackTrace: Protocol.Runtime.StackTrace = stackTraceOrPausedDetails instanceof DebuggerPausedDetails ?\n        {\n          callFrames: [],\n          parent: stackTraceOrPausedDetails.asyncStackTrace,\n          parentId: stackTraceOrPausedDetails.asyncStackTraceId\n        } :\n        stackTraceOrPausedDetails;\n    let target = this.target();\n\n    while (true) {\n      if (stackTrace.parent) {\n        stackTrace = stackTrace.parent;\n      } else if (stackTrace.parentId) {\n        const model: DebuggerModel|null = stackTrace.parentId.debuggerId ?\n            await DebuggerModel.modelForDebuggerId(stackTrace.parentId.debuggerId) :\n            this;\n        if (!model) {\n          return;\n        }\n        const maybeStackTrace = await model.fetchAsyncStackTrace(stackTrace.parentId);\n        if (!maybeStackTrace) {\n          return;\n        }\n        stackTrace = maybeStackTrace;\n        target = model.target();\n      } else {\n        return;\n      }\n\n      yield {stackTrace, target};\n    }\n  }\n}\n\nconst debuggerIdToModel = new Map<string, DebuggerModel>();\n\n/**\n * Keep these in sync with WebCore::V8Debugger\n */\nexport enum PauseOnExceptionsState {\n  /* eslint-disable @typescript-eslint/naming-convention -- Used by web_tests. */\n  DontPauseOnExceptions = 'none',\n  PauseOnAllExceptions = 'all',\n  PauseOnCaughtExceptions = 'caught',\n  PauseOnUncaughtExceptions = 'uncaught',\n  /* eslint-enable @typescript-eslint/naming-convention */\n}\n\nexport enum Events {\n  /* eslint-disable @typescript-eslint/naming-convention -- Used by web_tests. */\n  DebuggerWasEnabled = 'DebuggerWasEnabled',\n  DebuggerWasDisabled = 'DebuggerWasDisabled',\n  DebuggerPaused = 'DebuggerPaused',\n  DebuggerResumed = 'DebuggerResumed',\n  DebugInfoAttached = 'DebugInfoAttached',\n  ParsedScriptSource = 'ParsedScriptSource',\n  DiscardedAnonymousScriptSource = 'DiscardedAnonymousScriptSource',\n  GlobalObjectCleared = 'GlobalObjectCleared',\n  CallFrameSelected = 'CallFrameSelected',\n  DebuggerIsReadyToPause = 'DebuggerIsReadyToPause',\n  ScriptSourceWasEdited = 'ScriptSourceWasEdited',\n  /* eslint-enable @typescript-eslint/naming-convention */\n}\n\nexport interface EventTypes {\n  [Events.DebuggerWasEnabled]: DebuggerModel;\n  [Events.DebuggerWasDisabled]: DebuggerModel;\n  [Events.DebuggerPaused]: DebuggerModel;\n  [Events.DebuggerResumed]: DebuggerModel;\n  [Events.ParsedScriptSource]: Script;\n  [Events.DiscardedAnonymousScriptSource]: Script;\n  [Events.GlobalObjectCleared]: DebuggerModel;\n  [Events.CallFrameSelected]: DebuggerModel;\n  [Events.DebuggerIsReadyToPause]: DebuggerModel;\n  [Events.DebugInfoAttached]: Script;\n  [Events.ScriptSourceWasEdited]: {\n    script: Script,\n    status: Protocol.Debugger.SetScriptSourceResponseStatus,\n  };\n}\n\nclass DebuggerDispatcher implements ProtocolProxyApi.DebuggerDispatcher {\n  #debuggerModel: DebuggerModel;\n\n  constructor(debuggerModel: DebuggerModel) {\n    this.#debuggerModel = debuggerModel;\n  }\n\n  paused({callFrames, reason, data, hitBreakpoints, asyncStackTrace, asyncStackTraceId}: Protocol.Debugger.PausedEvent):\n      void {\n    if (!this.#debuggerModel.debuggerEnabled()) {\n      return;\n    }\n    void this.#debuggerModel.pausedScript(\n        callFrames, reason, data, hitBreakpoints || [], asyncStackTrace, asyncStackTraceId);\n  }\n\n  resumed(): void {\n    if (!this.#debuggerModel.debuggerEnabled()) {\n      return;\n    }\n    this.#debuggerModel.resumedScript();\n  }\n\n  scriptParsed({\n    scriptId,\n    url,\n    startLine,\n    startColumn,\n    endLine,\n    endColumn,\n    executionContextId,\n    hash,\n    executionContextAuxData,\n    isLiveEdit,\n    sourceMapURL,\n    hasSourceURL,\n    length,\n    isModule,\n    stackTrace,\n    codeOffset,\n    scriptLanguage,\n    debugSymbols,\n    embedderName,\n    buildId,\n  }: Protocol.Debugger.ScriptParsedEvent): void {\n    if (!this.#debuggerModel.debuggerEnabled()) {\n      return;\n    }\n    this.#debuggerModel.parsedScriptSource(\n        scriptId, url as Platform.DevToolsPath.UrlString, startLine, startColumn, endLine, endColumn,\n        executionContextId, hash, executionContextAuxData, Boolean(isLiveEdit), sourceMapURL, Boolean(hasSourceURL),\n        false, length || 0, isModule || null, stackTrace || null, codeOffset || null, scriptLanguage || null,\n        debugSymbols || null, embedderName as Platform.DevToolsPath.UrlString || null, buildId || null);\n  }\n\n  scriptFailedToParse({\n    scriptId,\n    url,\n    startLine,\n    startColumn,\n    endLine,\n    endColumn,\n    executionContextId,\n    hash,\n    executionContextAuxData,\n    sourceMapURL,\n    hasSourceURL,\n    length,\n    isModule,\n    stackTrace,\n    codeOffset,\n    scriptLanguage,\n    embedderName,\n    buildId,\n  }: Protocol.Debugger.ScriptFailedToParseEvent): void {\n    if (!this.#debuggerModel.debuggerEnabled()) {\n      return;\n    }\n    this.#debuggerModel.parsedScriptSource(\n        scriptId, url as Platform.DevToolsPath.UrlString, startLine, startColumn, endLine, endColumn,\n        executionContextId, hash, executionContextAuxData, false, sourceMapURL, Boolean(hasSourceURL), true,\n        length || 0, isModule || null, stackTrace || null, codeOffset || null, scriptLanguage || null, null,\n        embedderName as Platform.DevToolsPath.UrlString || null, buildId || null);\n  }\n\n  breakpointResolved({breakpointId, location}: Protocol.Debugger.BreakpointResolvedEvent): void {\n    if (!this.#debuggerModel.debuggerEnabled()) {\n      return;\n    }\n    this.#debuggerModel.breakpointResolved(breakpointId, location);\n  }\n}\n\nexport class Location {\n  debuggerModel: DebuggerModel;\n  scriptId: Protocol.Runtime.ScriptId;\n  lineNumber: number;\n  columnNumber: number;\n  inlineFrameIndex: number;\n\n  constructor(\n      debuggerModel: DebuggerModel, scriptId: Protocol.Runtime.ScriptId, lineNumber: number, columnNumber?: number,\n      inlineFrameIndex?: number) {\n    this.debuggerModel = debuggerModel;\n    this.scriptId = scriptId;\n    this.lineNumber = lineNumber;\n    this.columnNumber = columnNumber || 0;\n    this.inlineFrameIndex = inlineFrameIndex || 0;\n  }\n\n  static fromPayload(debuggerModel: DebuggerModel, payload: Protocol.Debugger.Location, inlineFrameIndex?: number):\n      Location {\n    return new Location(debuggerModel, payload.scriptId, payload.lineNumber, payload.columnNumber, inlineFrameIndex);\n  }\n\n  payload(): Protocol.Debugger.Location {\n    return {scriptId: this.scriptId, lineNumber: this.lineNumber, columnNumber: this.columnNumber};\n  }\n\n  script(): Script|null {\n    return this.debuggerModel.scriptForId(this.scriptId);\n  }\n\n  continueToLocation(pausedCallback?: (() => void)): void {\n    if (pausedCallback) {\n      this.debuggerModel.continueToLocationCallback = this.paused.bind(this, pausedCallback);\n    }\n    void this.debuggerModel.agent.invoke_continueToLocation({\n      location: this.payload(),\n      targetCallFrames: Protocol.Debugger.ContinueToLocationRequestTargetCallFrames.Current,\n    });\n  }\n\n  private paused(pausedCallback: () => void|undefined, debuggerPausedDetails: DebuggerPausedDetails): boolean {\n    const location = debuggerPausedDetails.callFrames[0].location();\n    if (location.scriptId === this.scriptId && location.lineNumber === this.lineNumber &&\n        location.columnNumber === this.columnNumber) {\n      pausedCallback();\n      return true;\n    }\n    return false;\n  }\n\n  id(): string {\n    return this.debuggerModel.target().id() + ':' + this.scriptId + ':' + this.lineNumber + ':' + this.columnNumber;\n  }\n}\n\nexport interface LocationRange {\n  start: Location;\n  end: Location;\n}\n\nexport class BreakLocation extends Location {\n  type: Protocol.Debugger.BreakLocationType|undefined;\n  constructor(\n      debuggerModel: DebuggerModel, scriptId: Protocol.Runtime.ScriptId, lineNumber: number, columnNumber?: number,\n      type?: Protocol.Debugger.BreakLocationType) {\n    super(debuggerModel, scriptId, lineNumber, columnNumber);\n    if (type) {\n      this.type = type;\n    }\n  }\n\n  static override fromPayload(debuggerModel: DebuggerModel, payload: Protocol.Debugger.BreakLocation): BreakLocation {\n    return new BreakLocation(debuggerModel, payload.scriptId, payload.lineNumber, payload.columnNumber, payload.type);\n  }\n}\n\nexport interface MissingDebugFiles {\n  resourceUrl: Platform.DevToolsPath.UrlString;\n  initiator: PageResourceLoadInitiator;\n}\n\nexport interface MissingDebugInfoDetails {\n  details: string;\n  resources: MissingDebugFiles[];\n}\n\nexport class CallFrame {\n  debuggerModel: DebuggerModel;\n  readonly script: Script;\n  payload: Protocol.Debugger.CallFrame;\n  readonly #location: Location;\n  readonly #scopeChain: Scope[];\n  readonly #localScope: Scope|null;\n  readonly inlineFrameIndex: number;\n  readonly functionName: string;\n  readonly #functionLocation: Location|undefined;\n  #returnValue: RemoteObject|null;\n  missingDebugInfoDetails: MissingDebugInfoDetails|null;\n  readonly exception: RemoteObject|null;\n\n  readonly canBeRestarted: boolean;\n\n  constructor(\n      debuggerModel: DebuggerModel, script: Script, payload: Protocol.Debugger.CallFrame, inlineFrameIndex?: number,\n      functionName?: string, exception: RemoteObject|null = null) {\n    this.debuggerModel = debuggerModel;\n    this.script = script;\n    this.payload = payload;\n    this.#location = Location.fromPayload(debuggerModel, payload.location, inlineFrameIndex);\n    this.#scopeChain = [];\n    this.#localScope = null;\n    this.inlineFrameIndex = inlineFrameIndex || 0;\n    this.functionName = functionName ?? payload.functionName;\n    this.missingDebugInfoDetails = null;\n    this.canBeRestarted = Boolean(payload.canBeRestarted);\n    this.exception = exception;\n    for (let i = 0; i < payload.scopeChain.length; ++i) {\n      const scope = new Scope(this, i);\n      this.#scopeChain.push(scope);\n      if (scope.type() === Protocol.Debugger.ScopeType.Local) {\n        this.#localScope = scope;\n      }\n    }\n    if (payload.functionLocation) {\n      this.#functionLocation = Location.fromPayload(debuggerModel, payload.functionLocation);\n    }\n    this.#returnValue =\n        payload.returnValue ? this.debuggerModel.runtimeModel().createRemoteObject(payload.returnValue) : null;\n  }\n\n  static fromPayloadArray(\n      debuggerModel: DebuggerModel, callFrames: Protocol.Debugger.CallFrame[],\n      exception: RemoteObject|null): CallFrame[] {\n    const result = [];\n    for (let i = 0; i < callFrames.length; ++i) {\n      const callFrame = callFrames[i];\n      const script = debuggerModel.scriptForId(callFrame.location.scriptId);\n      if (script) {\n        const ex = i === 0 ? exception : null;\n        result.push(new CallFrame(debuggerModel, script, callFrame, undefined, undefined, ex));\n      }\n    }\n    return result;\n  }\n\n  createVirtualCallFrame(inlineFrameIndex: number, name: string): CallFrame {\n    return new CallFrame(this.debuggerModel, this.script, this.payload, inlineFrameIndex, name, this.exception);\n  }\n\n  get id(): Protocol.Debugger.CallFrameId {\n    return this.payload.callFrameId;\n  }\n\n  scopeChain(): Scope[] {\n    return this.#scopeChain;\n  }\n\n  localScope(): Scope|null {\n    return this.#localScope;\n  }\n\n  thisObject(): RemoteObject|null {\n    return this.payload.this ? this.debuggerModel.runtimeModel().createRemoteObject(this.payload.this) : null;\n  }\n\n  returnValue(): RemoteObject|null {\n    return this.#returnValue;\n  }\n\n  async setReturnValue(expression: string): Promise<RemoteObject|null> {\n    if (!this.#returnValue) {\n      return null;\n    }\n\n    const evaluateResponse = await this.debuggerModel.agent.invoke_evaluateOnCallFrame(\n        {callFrameId: this.id, expression, silent: true, objectGroup: 'backtrace'});\n    if (evaluateResponse.getError() || evaluateResponse.exceptionDetails) {\n      return null;\n    }\n    const response = await this.debuggerModel.agent.invoke_setReturnValue({newValue: evaluateResponse.result});\n    if (response.getError()) {\n      return null;\n    }\n    this.#returnValue = this.debuggerModel.runtimeModel().createRemoteObject(evaluateResponse.result);\n    return this.#returnValue;\n  }\n\n  location(): Location {\n    return this.#location;\n  }\n\n  functionLocation(): Location|null {\n    return this.#functionLocation || null;\n  }\n\n  async evaluate(options: EvaluationOptions): Promise<EvaluationResult> {\n    const debuggerModel = this.debuggerModel;\n    const runtimeModel = debuggerModel.runtimeModel();\n\n    const evaluateOnCallFrameCallback = debuggerModel.getEvaluateOnCallFrameCallback();\n    if (evaluateOnCallFrameCallback) {\n      const result = await evaluateOnCallFrameCallback(this, options);\n      if (result) {\n        return result;\n      }\n    }\n\n    const response = await this.debuggerModel.agent.invoke_evaluateOnCallFrame({\n      callFrameId: this.id,\n      expression: options.expression,\n      objectGroup: options.objectGroup,\n      includeCommandLineAPI: options.includeCommandLineAPI,\n      silent: options.silent,\n      returnByValue: options.returnByValue,\n      generatePreview: options.generatePreview,\n      throwOnSideEffect: options.throwOnSideEffect,\n      timeout: options.timeout,\n    });\n    const error = response.getError();\n    if (error) {\n      return {error};\n    }\n    return {object: runtimeModel.createRemoteObject(response.result), exceptionDetails: response.exceptionDetails};\n  }\n\n  async restart(): Promise<void> {\n    console.assert(this.canBeRestarted, 'This frame can not be restarted.');\n    // Note that even if `canBeRestarted` is true, the restart frame call can still fail.\n    // The user can evaluate arbitrary code between pausing and restarting the frame that\n    // could mess with the call stack.\n    await this.debuggerModel.agent.invoke_restartFrame(\n        {callFrameId: this.id, mode: Protocol.Debugger.RestartFrameRequestMode.StepInto});\n  }\n\n  getPayload(): Protocol.Debugger.CallFrame {\n    return this.payload;\n  }\n}\n\nexport interface ScopeChainEntry {\n  callFrame(): CallFrame;\n\n  type(): string;\n\n  typeName(): string;\n\n  name(): string|undefined;\n\n  range(): LocationRange|null;\n\n  object(): RemoteObject;\n\n  description(): string;\n\n  icon(): string|undefined;\n\n  /**\n   * Extra and/or synthetic properties that should be added to the `RemoteObject`\n   * returned by {@link ScopeChainEntry.object}.\n   */\n  extraProperties(): RemoteObjectProperty[];\n}\n\nexport class Scope implements ScopeChainEntry {\n  #callFrame: CallFrame;\n  #payload: Protocol.Debugger.Scope;\n  readonly #type: Protocol.Debugger.ScopeType;\n  readonly #name: string|undefined;\n  #ordinal: number;\n  readonly #locationRange: LocationRange|null;\n  #object: RemoteObject|null = null;\n  constructor(callFrame: CallFrame, ordinal: number) {\n    this.#callFrame = callFrame;\n    this.#payload = callFrame.getPayload().scopeChain[ordinal];\n    this.#type = this.#payload.type;\n    this.#name = this.#payload.name;\n    this.#ordinal = ordinal;\n\n    const start =\n        this.#payload.startLocation ? Location.fromPayload(callFrame.debuggerModel, this.#payload.startLocation) : null;\n    const end =\n        this.#payload.endLocation ? Location.fromPayload(callFrame.debuggerModel, this.#payload.endLocation) : null;\n    if (start && end && start.scriptId === end.scriptId) {\n      this.#locationRange = {start, end};\n    } else {\n      this.#locationRange = null;\n    }\n  }\n\n  callFrame(): CallFrame {\n    return this.#callFrame;\n  }\n\n  type(): string {\n    return this.#type;\n  }\n\n  typeName(): string {\n    switch (this.#type) {\n      case Protocol.Debugger.ScopeType.Local:\n        return i18nString(UIStrings.local);\n      case Protocol.Debugger.ScopeType.Closure:\n        return i18nString(UIStrings.closure);\n      case Protocol.Debugger.ScopeType.Catch:\n        return i18nString(UIStrings.catchBlock);\n      case Protocol.Debugger.ScopeType.Eval:\n        return i18n.i18n.lockedString('Eval');\n      case Protocol.Debugger.ScopeType.Block:\n        return i18nString(UIStrings.block);\n      case Protocol.Debugger.ScopeType.Script:\n        return i18nString(UIStrings.script);\n      case Protocol.Debugger.ScopeType.With:\n        return i18nString(UIStrings.withBlock);\n      case Protocol.Debugger.ScopeType.Global:\n        return i18nString(UIStrings.global);\n      case Protocol.Debugger.ScopeType.Module:\n        return i18nString(UIStrings.module);\n      case Protocol.Debugger.ScopeType.WasmExpressionStack:\n        return i18nString(UIStrings.expression);\n    }\n    return '';\n  }\n\n  name(): string|undefined {\n    return this.#name;\n  }\n\n  range(): LocationRange|null {\n    return this.#locationRange;\n  }\n\n  object(): RemoteObject {\n    if (this.#object) {\n      return this.#object;\n    }\n    const runtimeModel = this.#callFrame.debuggerModel.runtimeModel();\n\n    const declarativeScope =\n        this.#type !== Protocol.Debugger.ScopeType.With && this.#type !== Protocol.Debugger.ScopeType.Global;\n    if (declarativeScope) {\n      this.#object =\n          runtimeModel.createScopeRemoteObject(this.#payload.object, new ScopeRef(this.#ordinal, this.#callFrame.id));\n    } else {\n      this.#object = runtimeModel.createRemoteObject(this.#payload.object);\n    }\n\n    return this.#object;\n  }\n\n  description(): string {\n    const declarativeScope =\n        this.#type !== Protocol.Debugger.ScopeType.With && this.#type !== Protocol.Debugger.ScopeType.Global;\n    return declarativeScope ? '' : (this.#payload.object.description || '');\n  }\n\n  icon(): undefined {\n    return undefined;\n  }\n\n  extraProperties(): RemoteObjectProperty[] {\n    if (this.#ordinal !== 0 || this.#type !== Protocol.Debugger.ScopeType.Local || this.#callFrame.script.isWasm()) {\n      return [];\n    }\n\n    const extraProperties = [];\n    const exception = this.#callFrame.exception;\n    if (exception) {\n      extraProperties.push(new RemoteObjectProperty(\n          i18nString(UIStrings.exception), exception, undefined, undefined, undefined, undefined, undefined,\n          /* synthetic */ true));\n    }\n    const returnValue = this.#callFrame.returnValue();\n    if (returnValue) {\n      extraProperties.push(new RemoteObjectProperty(\n          i18nString(UIStrings.returnValue), returnValue, undefined, undefined, undefined, undefined, undefined,\n          /* synthetic */ true, this.#callFrame.setReturnValue.bind(this.#callFrame)));\n    }\n    return extraProperties;\n  }\n}\n\nexport class DebuggerPausedDetails {\n  debuggerModel: DebuggerModel;\n  callFrames: CallFrame[];\n  reason: Protocol.Debugger.PausedEventReason;\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  auxData: Record<string, any>|undefined;\n  breakpointIds: string[];\n  asyncStackTrace: Protocol.Runtime.StackTrace|undefined;\n  asyncStackTraceId: Protocol.Runtime.StackTraceId|undefined;\n  constructor(\n      debuggerModel: DebuggerModel,\n      callFrames: Protocol.Debugger.CallFrame[],\n      reason: Protocol.Debugger.PausedEventReason,\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      auxData: Record<string, any>|undefined,\n      breakpointIds: string[],\n      asyncStackTrace?: Protocol.Runtime.StackTrace,\n      asyncStackTraceId?: Protocol.Runtime.StackTraceId,\n  ) {\n    this.debuggerModel = debuggerModel;\n    this.reason = reason;\n    this.auxData = auxData;\n    this.breakpointIds = breakpointIds;\n    if (asyncStackTrace) {\n      this.asyncStackTrace = this.cleanRedundantFrames(asyncStackTrace);\n    }\n    this.asyncStackTraceId = asyncStackTraceId;\n    this.callFrames = CallFrame.fromPayloadArray(debuggerModel, callFrames, this.exception());\n  }\n\n  private exception(): RemoteObject|null {\n    if (this.reason !== Protocol.Debugger.PausedEventReason.Exception &&\n        this.reason !== Protocol.Debugger.PausedEventReason.PromiseRejection) {\n      return null;\n    }\n    return this.debuggerModel.runtimeModel().createRemoteObject((this.auxData as Protocol.Runtime.RemoteObject));\n  }\n\n  private cleanRedundantFrames(asyncStackTrace: Protocol.Runtime.StackTrace): Protocol.Runtime.StackTrace {\n    let stack: (Protocol.Runtime.StackTrace|undefined)|Protocol.Runtime.StackTrace = asyncStackTrace;\n    let previous: Protocol.Runtime.StackTrace|null = null;\n    while (stack) {\n      if (previous && !stack.callFrames.length) {\n        previous.parent = stack.parent;\n      } else {\n        previous = stack;\n      }\n      stack = stack.parent;\n    }\n    return asyncStackTrace;\n  }\n}\n\nSDKModel.register(DebuggerModel, {capabilities: Capability.JS, autostart: true});\n\nexport interface FunctionDetails {\n  location: Location|null;\n  functionName: string;\n}\nexport interface SetBreakpointResult {\n  breakpointId: Protocol.Debugger.BreakpointId|null;\n  locations: Location[];\n}\n\ninterface PausedOnInstrumentationData {\n  scriptId: Protocol.Runtime.ScriptId;\n}\n\nexport interface EventListenerPausedDetailsAuxData {\n  eventName: string;\n  targetName?: string;\n  webglErrorName?: string;\n  directiveText?: string;\n}\n\nexport const enum BreakpointType {\n  LOGPOINT = 'LOGPOINT',\n  CONDITIONAL_BREAKPOINT = 'CONDITIONAL_BREAKPOINT',\n  REGULAR_BREAKPOINT = 'REGULAR_BREAKPOINT',\n}\n\n/**\n * A breakpoint condition as sent to V8. This helps distinguish\n * the breakpoint condition as it is entered by the user.\n */\nexport type BackendCondition = Platform.Brand.Brand<string, 'BackendCondition'>;\n\nexport const LOGPOINT_SOURCE_URL = 'debugger://logpoint';\nexport const COND_BREAKPOINT_SOURCE_URL = 'debugger://breakpoint';\n", "// Copyright 2012 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport type * as ProtocolProxyApi from '../../generated/protocol-proxy-api.js';\nimport type * as Protocol from '../../generated/protocol.js';\nimport * as Common from '../common/common.js';\nimport * as Host from '../host/host.js';\nimport type * as Platform from '../platform/platform.js';\n\nimport {DebuggerModel, type FunctionDetails} from './DebuggerModel.js';\nimport {HeapProfilerModel} from './HeapProfilerModel.js';\nimport {\n  RemoteFunction,\n  RemoteObject,\n  RemoteObjectImpl,\n  RemoteObjectProperty,\n  type ScopeRef,\n  ScopeRemoteObject,\n} from './RemoteObject.js';\nimport {SDKModel} from './SDKModel.js';\nimport {Capability, type Target, Type} from './Target.js';\n\nexport class RuntimeModel extends SDKModel<EventTypes> {\n  readonly agent: ProtocolProxyApi.RuntimeApi;\n  readonly #executionContextById = new Map<number, ExecutionContext>();\n  #executionContextComparator: (arg0: ExecutionContext, arg1: ExecutionContext) => number = ExecutionContext.comparator;\n  constructor(target: Target) {\n    super(target);\n\n    this.agent = target.runtimeAgent();\n    this.target().registerRuntimeDispatcher(new RuntimeDispatcher(this));\n    void this.agent.invoke_enable();\n\n    if (Common.Settings.Settings.instance().moduleSetting('custom-formatters').get()) {\n      void this.agent.invoke_setCustomObjectFormatterEnabled({enabled: true});\n    }\n\n    Common.Settings.Settings.instance()\n        .moduleSetting('custom-formatters')\n        .addChangeListener(this.customFormattersStateChanged.bind(this));\n  }\n\n  static isSideEffectFailure(response: Protocol.Runtime.EvaluateResponse|EvaluationResult): boolean {\n    const exceptionDetails = 'exceptionDetails' in response && response.exceptionDetails;\n    return Boolean(\n        exceptionDetails &&\n        exceptionDetails.exception?.description?.startsWith('EvalError: Possible side-effect in debug-evaluate'));\n  }\n\n  debuggerModel(): DebuggerModel {\n    return this.target().model(DebuggerModel) as DebuggerModel;\n  }\n\n  heapProfilerModel(): HeapProfilerModel {\n    return this.target().model(HeapProfilerModel) as HeapProfilerModel;\n  }\n\n  executionContexts(): ExecutionContext[] {\n    return [...this.#executionContextById.values()].sort(this.executionContextComparator());\n  }\n\n  setExecutionContextComparator(comparator: (arg0: ExecutionContext, arg1: ExecutionContext) => number): void {\n    this.#executionContextComparator = comparator;\n  }\n\n  /**\n   * comparator\n   */\n  executionContextComparator(): (arg0: ExecutionContext, arg1: ExecutionContext) => number {\n    return this.#executionContextComparator;\n  }\n\n  defaultExecutionContext(): ExecutionContext|null {\n    for (const context of this.executionContexts()) {\n      if (context.isDefault) {\n        return context;\n      }\n    }\n    return null;\n  }\n\n  executionContext(id: number): ExecutionContext|null {\n    return this.#executionContextById.get(id) || null;\n  }\n\n  executionContextCreated(context: Protocol.Runtime.ExecutionContextDescription): void {\n    const data = context.auxData || {isDefault: true};\n    const executionContext = new ExecutionContext(\n        this, context.id, context.uniqueId, context.name, context.origin as Platform.DevToolsPath.UrlString,\n        data['isDefault'], data['frameId']);\n    this.#executionContextById.set(executionContext.id, executionContext);\n    this.dispatchEventToListeners(Events.ExecutionContextCreated, executionContext);\n  }\n\n  executionContextDestroyed(executionContextId: number): void {\n    const executionContext = this.#executionContextById.get(executionContextId);\n    if (!executionContext) {\n      return;\n    }\n    this.debuggerModel().executionContextDestroyed(executionContext);\n    this.#executionContextById.delete(executionContextId);\n    this.dispatchEventToListeners(Events.ExecutionContextDestroyed, executionContext);\n  }\n\n  fireExecutionContextOrderChanged(): void {\n    this.dispatchEventToListeners(Events.ExecutionContextOrderChanged, this);\n  }\n\n  executionContextsCleared(): void {\n    this.debuggerModel().globalObjectCleared();\n    const contexts = this.executionContexts();\n    this.#executionContextById.clear();\n    for (let i = 0; i < contexts.length; ++i) {\n      this.dispatchEventToListeners(Events.ExecutionContextDestroyed, contexts[i]);\n    }\n  }\n\n  createRemoteObject(payload: Protocol.Runtime.RemoteObject): RemoteObject {\n    console.assert(typeof payload === 'object', 'Remote object payload should only be an object');\n    return new RemoteObjectImpl(\n        this, payload.objectId, payload.type, payload.subtype, payload.value, payload.unserializableValue,\n        payload.description, payload.preview, payload.customPreview, payload.className);\n  }\n\n  createScopeRemoteObject(payload: Protocol.Runtime.RemoteObject, scopeRef: ScopeRef): RemoteObject {\n    return new ScopeRemoteObject(\n        this, payload.objectId, scopeRef, payload.type, payload.subtype, payload.value, payload.unserializableValue,\n        payload.description, payload.preview);\n  }\n\n  createRemoteObjectFromPrimitiveValue(value: string|number|bigint|boolean|undefined): RemoteObject {\n    const type = typeof value;\n    let unserializableValue: string|undefined = undefined;\n    const unserializableDescription = RemoteObject.unserializableDescription(value);\n    if (unserializableDescription !== null) {\n      unserializableValue = (unserializableDescription);\n    }\n    if (typeof unserializableValue !== 'undefined') {\n      value = undefined;\n    }\n    return new RemoteObjectImpl(this, undefined, type, undefined, value, unserializableValue);\n  }\n\n  createRemotePropertyFromPrimitiveValue(name: string, value: string|number|boolean): RemoteObjectProperty {\n    return new RemoteObjectProperty(name, this.createRemoteObjectFromPrimitiveValue(value));\n  }\n\n  discardConsoleEntries(): void {\n    void this.agent.invoke_discardConsoleEntries();\n  }\n\n  releaseObjectGroup(objectGroup: string): void {\n    void this.agent.invoke_releaseObjectGroup({objectGroup});\n  }\n\n  releaseEvaluationResult(result: EvaluationResult): void {\n    if ('object' in result && result.object) {\n      result.object.release();\n    }\n    if ('exceptionDetails' in result && result.exceptionDetails?.exception) {\n      const exception = result.exceptionDetails.exception;\n      const exceptionObject = this.createRemoteObject({type: exception.type, objectId: exception.objectId});\n      exceptionObject.release();\n    }\n  }\n\n  runIfWaitingForDebugger(): void {\n    void this.agent.invoke_runIfWaitingForDebugger();\n  }\n\n  private customFormattersStateChanged({data: enabled}: Common.EventTarget.EventTargetEvent<boolean>): void {\n    void this.agent.invoke_setCustomObjectFormatterEnabled({enabled});\n  }\n\n  async compileScript(\n      expression: string, sourceURL: string, persistScript: boolean,\n      executionContextId: Protocol.Runtime.ExecutionContextId): Promise<CompileScriptResult|null> {\n    const response = await this.agent.invoke_compileScript({\n      expression,\n      sourceURL,\n      persistScript,\n      executionContextId,\n    });\n\n    if (response.getError()) {\n      console.error(response.getError());\n      return null;\n    }\n    return {scriptId: response.scriptId, exceptionDetails: response.exceptionDetails};\n  }\n\n  async runScript(\n      scriptId: Protocol.Runtime.ScriptId, executionContextId: Protocol.Runtime.ExecutionContextId,\n      objectGroup?: string, silent?: boolean, includeCommandLineAPI?: boolean, returnByValue?: boolean,\n      generatePreview?: boolean, awaitPromise?: boolean): Promise<EvaluationResult> {\n    const response = await this.agent.invoke_runScript({\n      scriptId,\n      executionContextId,\n      objectGroup,\n      silent,\n      includeCommandLineAPI,\n      returnByValue,\n      generatePreview,\n      awaitPromise,\n    });\n\n    const error = response.getError();\n    if (error) {\n      console.error(error);\n      return {error};\n    }\n    return {object: this.createRemoteObject(response.result), exceptionDetails: response.exceptionDetails};\n  }\n\n  async queryObjects(prototype: RemoteObject): Promise<QueryObjectResult> {\n    if (!prototype.objectId) {\n      return {error: 'Prototype should be an Object.'};\n    }\n    const response =\n        await this.agent.invoke_queryObjects({prototypeObjectId: prototype.objectId, objectGroup: 'console'});\n    const error = response.getError();\n    if (error) {\n      console.error(error);\n      return {error};\n    }\n    return {objects: this.createRemoteObject(response.objects)};\n  }\n\n  async isolateId(): Promise<string> {\n    const response = await this.agent.invoke_getIsolateId();\n    if (response.getError() || !response.id) {\n      return this.target().id();\n    }\n    return response.id;\n  }\n\n  async heapUsage(): Promise<{\n    usedSize: number,\n    totalSize: number,\n    // Available after V8 13.4. Node.js has not yet been released with this version of V8 yet.\n    embedderHeapUsedSize?: number,\n    backingStorageSize?: number,\n  }|null> {\n    const result = await this.agent.invoke_getHeapUsage();\n    return result.getError() ? null : result;\n  }\n\n  inspectRequested(payload: Protocol.Runtime.RemoteObject, hints: unknown, executionContextId?: number): void {\n    const object = this.createRemoteObject(payload);\n\n    if (hints !== null && typeof hints === 'object') {\n      if ('copyToClipboard' in hints && Boolean(hints.copyToClipboard)) {\n        this.copyRequested(object);\n        return;\n      }\n\n      if ('queryObjects' in hints && hints.queryObjects) {\n        void this.queryObjectsRequested(object, executionContextId);\n        return;\n      }\n    }\n\n    if (object.isNode()) {\n      void Common.Revealer.reveal(object).then(object.release.bind(object));\n      return;\n    }\n\n    if (object.type === 'function') {\n      void RemoteFunction.objectAsFunction(object).targetFunctionDetails().then(didGetDetails);\n      return;\n    }\n\n    function didGetDetails(response: FunctionDetails|null): void {\n      object.release();\n      if (!response?.location) {\n        return;\n      }\n      void Common.Revealer.reveal(response.location);\n    }\n    object.release();\n  }\n\n  async addBinding(event: Protocol.Runtime.AddBindingRequest): Promise<Protocol.ProtocolResponseWithError> {\n    return await this.agent.invoke_addBinding(event);\n  }\n\n  async removeBinding(request: Protocol.Runtime.RemoveBindingRequest): Promise<Protocol.ProtocolResponseWithError> {\n    return await this.agent.invoke_removeBinding(request);\n  }\n\n  bindingCalled(event: Protocol.Runtime.BindingCalledEvent): void {\n    this.dispatchEventToListeners(Events.BindingCalled, event);\n  }\n\n  private copyRequested(object: RemoteObject): void {\n    if (!object.objectId) {\n      Host.InspectorFrontendHost.InspectorFrontendHostInstance.copyText(\n          object.unserializableValue() || (object.value as string));\n      return;\n    }\n\n    const indent = Common.Settings.Settings.instance().moduleSetting('text-editor-indent').get();\n    void object\n        .callFunctionJSON(toStringForClipboard, [{\n                            value: {\n                              subtype: object.subtype,\n                              indent,\n                            },\n                          }])\n        .then(Host.InspectorFrontendHost.InspectorFrontendHostInstance.copyText.bind(\n            Host.InspectorFrontendHost.InspectorFrontendHostInstance));\n\n    function toStringForClipboard(this: Object, data: {\n      subtype: string,\n      indent: string,\n    }): string|undefined {\n      const subtype = data.subtype;\n      const indent = data.indent;\n\n      if (subtype === 'node') {\n        return this instanceof Element ? this.outerHTML : undefined;\n      }\n      if (subtype && typeof this === 'undefined') {\n        return String(subtype);\n      }\n      try {\n        return JSON.stringify(this, null, indent);\n      } catch {\n        return String(this);\n      }\n    }\n  }\n\n  private async queryObjectsRequested(object: RemoteObject, executionContextId?: number): Promise<void> {\n    const result = await this.queryObjects(object);\n    object.release();\n    if ('error' in result) {\n      Common.Console.Console.instance().error(result.error);\n      return;\n    }\n    this.dispatchEventToListeners(Events.QueryObjectRequested, {objects: result.objects, executionContextId});\n  }\n\n  static simpleTextFromException(exceptionDetails: Protocol.Runtime.ExceptionDetails): string {\n    let text = exceptionDetails.text;\n    if (exceptionDetails.exception?.description) {\n      let description: string = exceptionDetails.exception.description;\n      if (description.indexOf('\\n') !== -1) {\n        description = description.substring(0, description.indexOf('\\n'));\n      }\n      text += ' ' + description;\n    }\n    return text;\n  }\n\n  exceptionThrown(timestamp: number, exceptionDetails: Protocol.Runtime.ExceptionDetails): void {\n    const exceptionWithTimestamp = {timestamp, details: exceptionDetails};\n    this.dispatchEventToListeners(Events.ExceptionThrown, exceptionWithTimestamp);\n  }\n\n  exceptionRevoked(exceptionId: number): void {\n    this.dispatchEventToListeners(Events.ExceptionRevoked, exceptionId);\n  }\n\n  consoleAPICalled(\n      type: Protocol.Runtime.ConsoleAPICalledEventType, args: Protocol.Runtime.RemoteObject[],\n      executionContextId: number, timestamp: number, stackTrace?: Protocol.Runtime.StackTrace, context?: string): void {\n    const consoleAPICall = {\n      type,\n      args,\n      executionContextId,\n      timestamp,\n      stackTrace,\n      context,\n    };\n    this.dispatchEventToListeners(Events.ConsoleAPICalled, consoleAPICall);\n  }\n\n  executionContextIdForScriptId(scriptId: string): number {\n    const script = this.debuggerModel().scriptForId(scriptId);\n    return script ? script.executionContextId : 0;\n  }\n\n  executionContextForStackTrace(stackTrace: Protocol.Runtime.StackTrace): number {\n    let currentStackTrace: (Protocol.Runtime.StackTrace|null)|Protocol.Runtime.StackTrace = stackTrace;\n    while (currentStackTrace && !currentStackTrace.callFrames.length) {\n      currentStackTrace = currentStackTrace.parent || null;\n    }\n    if (!currentStackTrace?.callFrames.length) {\n      return 0;\n    }\n    return this.executionContextIdForScriptId(currentStackTrace.callFrames[0].scriptId);\n  }\n\n  terminateExecution(): Promise<Protocol.ProtocolResponseWithError> {\n    return this.agent.invoke_terminateExecution();\n  }\n\n  async getExceptionDetails(errorObjectId: Protocol.Runtime.RemoteObjectId):\n      Promise<Protocol.Runtime.ExceptionDetails|undefined> {\n    const response = await this.agent.invoke_getExceptionDetails({errorObjectId});\n    if (response.getError()) {\n      // This CDP method errors if called with non-Error object ids. Swallow that.\n      return undefined;\n    }\n    return response.exceptionDetails;\n  }\n}\n\nexport enum Events {\n  /* eslint-disable @typescript-eslint/naming-convention -- Used by web_tests. */\n  BindingCalled = 'BindingCalled',\n  ExecutionContextCreated = 'ExecutionContextCreated',\n  ExecutionContextDestroyed = 'ExecutionContextDestroyed',\n  ExecutionContextChanged = 'ExecutionContextChanged',\n  ExecutionContextOrderChanged = 'ExecutionContextOrderChanged',\n  ExceptionThrown = 'ExceptionThrown',\n  ExceptionRevoked = 'ExceptionRevoked',\n  ConsoleAPICalled = 'ConsoleAPICalled',\n  QueryObjectRequested = 'QueryObjectRequested',\n  /* eslint-enable @typescript-eslint/naming-convention */\n}\n\nexport interface ConsoleAPICall {\n  type: Protocol.Runtime.ConsoleAPICalledEventType;\n  args: Protocol.Runtime.RemoteObject[];\n  executionContextId: number;\n  timestamp: number;\n  stackTrace?: Protocol.Runtime.StackTrace;\n  context?: string;\n}\n\nexport interface ExceptionWithTimestamp {\n  timestamp: number;\n  details: Protocol.Runtime.ExceptionDetails;\n}\n\nexport interface QueryObjectRequestedEvent {\n  objects: RemoteObject;\n  executionContextId?: number;\n}\n\nexport interface EventTypes {\n  [Events.BindingCalled]: Protocol.Runtime.BindingCalledEvent;\n  [Events.ExecutionContextCreated]: ExecutionContext;\n  [Events.ExecutionContextDestroyed]: ExecutionContext;\n  [Events.ExecutionContextChanged]: ExecutionContext;\n  [Events.ExecutionContextOrderChanged]: RuntimeModel;\n  [Events.ExceptionThrown]: ExceptionWithTimestamp;\n  [Events.ExceptionRevoked]: number;\n  [Events.ConsoleAPICalled]: ConsoleAPICall;\n  [Events.QueryObjectRequested]: QueryObjectRequestedEvent;\n}\n\nclass RuntimeDispatcher implements ProtocolProxyApi.RuntimeDispatcher {\n  readonly #runtimeModel: RuntimeModel;\n  constructor(runtimeModel: RuntimeModel) {\n    this.#runtimeModel = runtimeModel;\n  }\n\n  executionContextCreated({context}: Protocol.Runtime.ExecutionContextCreatedEvent): void {\n    this.#runtimeModel.executionContextCreated(context);\n  }\n\n  executionContextDestroyed({executionContextId}: Protocol.Runtime.ExecutionContextDestroyedEvent): void {\n    this.#runtimeModel.executionContextDestroyed(executionContextId);\n  }\n\n  executionContextsCleared(): void {\n    this.#runtimeModel.executionContextsCleared();\n  }\n\n  exceptionThrown({timestamp, exceptionDetails}: Protocol.Runtime.ExceptionThrownEvent): void {\n    this.#runtimeModel.exceptionThrown(timestamp, exceptionDetails);\n  }\n\n  exceptionRevoked({exceptionId}: Protocol.Runtime.ExceptionRevokedEvent): void {\n    this.#runtimeModel.exceptionRevoked(exceptionId);\n  }\n\n  consoleAPICalled({type, args, executionContextId, timestamp, stackTrace, context}:\n                       Protocol.Runtime.ConsoleAPICalledEvent): void {\n    this.#runtimeModel.consoleAPICalled(type, args, executionContextId, timestamp, stackTrace, context);\n  }\n\n  inspectRequested({object, hints, executionContextId}: Protocol.Runtime.InspectRequestedEvent): void {\n    this.#runtimeModel.inspectRequested(object, hints, executionContextId);\n  }\n\n  bindingCalled(event: Protocol.Runtime.BindingCalledEvent): void {\n    this.#runtimeModel.bindingCalled(event);\n  }\n}\n\nexport class ExecutionContext {\n  id: Protocol.Runtime.ExecutionContextId;\n  uniqueId: string;\n  name: string;\n  #label: string|null;\n  origin: Platform.DevToolsPath.UrlString;\n  isDefault: boolean;\n  runtimeModel: RuntimeModel;\n  debuggerModel: DebuggerModel;\n  frameId: Protocol.Page.FrameId|undefined;\n  constructor(\n      runtimeModel: RuntimeModel, id: Protocol.Runtime.ExecutionContextId, uniqueId: string, name: string,\n      origin: Platform.DevToolsPath.UrlString, isDefault: boolean, frameId?: Protocol.Page.FrameId) {\n    this.id = id;\n    this.uniqueId = uniqueId;\n    this.name = name;\n    this.#label = null;\n    this.origin = origin;\n    this.isDefault = isDefault;\n    this.runtimeModel = runtimeModel;\n    this.debuggerModel = runtimeModel.debuggerModel();\n    this.frameId = frameId;\n    this.#setLabel('');\n  }\n\n  target(): Target {\n    return this.runtimeModel.target();\n  }\n\n  static comparator(a: ExecutionContext, b: ExecutionContext): number {\n    function targetWeight(target: Target): number {\n      if (target.parentTarget()?.type() !== Type.FRAME) {\n        return 5;\n      }\n      if (target.type() === Type.FRAME) {\n        return 4;\n      }\n      if (target.type() === Type.ServiceWorker) {\n        return 3;\n      }\n      if (target.type() === Type.Worker || target.type() === Type.SHARED_WORKER) {\n        return 2;\n      }\n      return 1;\n    }\n\n    function targetPath(target: Target): Target[] {\n      let currentTarget: (Target|null)|Target = target;\n      const parents = [];\n      while (currentTarget) {\n        parents.push(currentTarget);\n        currentTarget = currentTarget.parentTarget();\n      }\n      return parents.reverse();\n    }\n\n    const tagetsA = targetPath(a.target());\n    const targetsB = targetPath(b.target());\n    let targetA;\n    let targetB;\n    for (let i = 0;; i++) {\n      if (!tagetsA[i] || !targetsB[i] || (tagetsA[i] !== targetsB[i])) {\n        targetA = tagetsA[i];\n        targetB = targetsB[i];\n        break;\n      }\n    }\n    if (!targetA && targetB) {\n      return -1;\n    }\n\n    if (!targetB && targetA) {\n      return 1;\n    }\n\n    if (targetA && targetB) {\n      const weightDiff = targetWeight(targetA) - targetWeight(targetB);\n      if (weightDiff) {\n        return -weightDiff;\n      }\n      return targetA.id().localeCompare(targetB.id());\n    }\n\n    // Main world context should always go first.\n    if (a.isDefault) {\n      return -1;\n    }\n    if (b.isDefault) {\n      return +1;\n    }\n    return a.name.localeCompare(b.name);\n  }\n\n  async evaluate(options: EvaluationOptions, userGesture: boolean, awaitPromise: boolean): Promise<EvaluationResult> {\n    // FIXME: It will be moved to separate ExecutionContext.\n    if (this.debuggerModel.selectedCallFrame()) {\n      return await this.debuggerModel.evaluateOnSelectedCallFrame(options);\n    }\n    return await this.evaluateGlobal(options, userGesture, awaitPromise);\n  }\n\n  globalObject(objectGroup: string, generatePreview: boolean): Promise<EvaluationResult> {\n    const evaluationOptions = {\n      expression: 'this',\n      objectGroup,\n      includeCommandLineAPI: false,\n      silent: true,\n      returnByValue: false,\n      generatePreview,\n    };\n    return this.evaluateGlobal((evaluationOptions as EvaluationOptions), false, false);\n  }\n\n  async callFunctionOn(options: CallFunctionOptions): Promise<EvaluationResult> {\n    const response = await this.runtimeModel.agent.invoke_callFunctionOn({\n      functionDeclaration: options.functionDeclaration,\n      returnByValue: options.returnByValue,\n      userGesture: options.userGesture,\n      awaitPromise: options.awaitPromise,\n      throwOnSideEffect: options.throwOnSideEffect,\n      arguments: options.arguments,\n      // Old back-ends don't know about uniqueContextId (and also don't generate\n      // one), so fall back to contextId in that case (https://crbug.com/1192621).\n      ...(this.uniqueId ? {uniqueContextId: this.uniqueId} : {contextId: this.id}),\n    });\n\n    const error = response.getError();\n    if (error) {\n      return {error};\n    }\n    return {object: this.runtimeModel.createRemoteObject(response.result), exceptionDetails: response.exceptionDetails};\n  }\n\n  private async evaluateGlobal(options: EvaluationOptions, userGesture: boolean, awaitPromise: boolean):\n      Promise<EvaluationResult> {\n    if (!options.expression) {\n      // There is no expression, so the completion should happen against global properties.\n      options.expression = 'this';\n    }\n\n    const response = await this.runtimeModel.agent.invoke_evaluate({\n      expression: options.expression,\n      objectGroup: options.objectGroup,\n      includeCommandLineAPI: options.includeCommandLineAPI,\n      silent: options.silent,\n      returnByValue: options.returnByValue,\n      generatePreview: options.generatePreview,\n      userGesture,\n      awaitPromise,\n      throwOnSideEffect: options.throwOnSideEffect,\n      timeout: options.timeout,\n      disableBreaks: options.disableBreaks,\n      replMode: options.replMode,\n      allowUnsafeEvalBlockedByCSP: options.allowUnsafeEvalBlockedByCSP,\n      // Old back-ends don't know about uniqueContextId (and also don't generate\n      // one), so fall back to contextId in that case (https://crbug.com/1192621).\n      ...(this.uniqueId ? {uniqueContextId: this.uniqueId} : {contextId: this.id}),\n    });\n\n    const error = response.getError();\n    if (error) {\n      console.error(error);\n      return {error};\n    }\n    return {object: this.runtimeModel.createRemoteObject(response.result), exceptionDetails: response.exceptionDetails};\n  }\n\n  async globalLexicalScopeNames(): Promise<string[]|null> {\n    const response = await this.runtimeModel.agent.invoke_globalLexicalScopeNames({executionContextId: this.id});\n    return response.getError() ? [] : response.names;\n  }\n\n  label(): string|null {\n    return this.#label;\n  }\n\n  setLabel(label: string): void {\n    this.#setLabel(label);\n    this.runtimeModel.dispatchEventToListeners(Events.ExecutionContextChanged, this);\n  }\n\n  #setLabel(label: string): void {\n    if (label) {\n      this.#label = label;\n      return;\n    }\n    if (this.name) {\n      this.#label = this.name;\n      return;\n    }\n    const parsedUrl = Common.ParsedURL.ParsedURL.fromString(this.origin);\n    this.#label = parsedUrl ? parsedUrl.lastPathComponentWithFragment() : '';\n  }\n}\n\nSDKModel.register(RuntimeModel, {capabilities: Capability.JS, autostart: true});\n\nexport type EvaluationResult = {\n  object: RemoteObject,\n  exceptionDetails?: Protocol.Runtime.ExceptionDetails,\n}|{\n  error: string,\n};\n\nexport interface CompileScriptResult {\n  scriptId?: string;\n  exceptionDetails?: Protocol.Runtime.ExceptionDetails;\n}\n\nexport interface EvaluationOptions {\n  expression: string;\n  objectGroup?: string;\n  includeCommandLineAPI?: boolean;\n  silent?: boolean;\n  returnByValue?: boolean;\n  generatePreview?: boolean;\n  throwOnSideEffect?: boolean;\n  timeout?: number;\n  disableBreaks?: boolean;\n  replMode?: boolean;\n  allowUnsafeEvalBlockedByCSP?: boolean;\n  contextId?: number;\n}\n\nexport interface CallFunctionOptions {\n  functionDeclaration: string;\n  returnByValue?: boolean;\n  throwOnSideEffect?: boolean;\n  allowUnsafeEvalBlockedByCSP?: boolean;\n  arguments: Protocol.Runtime.CallArgument[];\n  userGesture: boolean;\n  awaitPromise: boolean;\n}\n\nexport type QueryObjectResult = {\n  objects: RemoteObject,\n}|{error: string};\n", "// Copyright 2020 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport type * as ProtocolProxyApi from '../../generated/protocol-proxy-api.js';\nimport type * as Protocol from '../../generated/protocol.js';\nimport type * as Platform from '../platform/platform.js';\n\nimport type {DebuggerModel} from './DebuggerModel.js';\nimport type {RemoteObject} from './RemoteObject.js';\nimport {RuntimeModel} from './RuntimeModel.js';\nimport {SDKModel} from './SDKModel.js';\nimport {Capability, type Target} from './Target.js';\n\nexport class HeapProfilerModel extends SDKModel<EventTypes> {\n  #enabled: boolean;\n  readonly #heapProfilerAgent: ProtocolProxyApi.HeapProfilerApi;\n  readonly #runtimeModel: RuntimeModel;\n  #samplingProfilerDepth: number;\n\n  constructor(target: Target) {\n    super(target);\n    target.registerHeapProfilerDispatcher(new HeapProfilerDispatcher(this));\n    this.#enabled = false;\n    this.#heapProfilerAgent = target.heapProfilerAgent();\n    this.#runtimeModel = (target.model(RuntimeModel) as RuntimeModel);\n    this.#samplingProfilerDepth = 0;\n  }\n\n  debuggerModel(): DebuggerModel {\n    return this.#runtimeModel.debuggerModel();\n  }\n\n  runtimeModel(): RuntimeModel {\n    return this.#runtimeModel;\n  }\n\n  async enable(): Promise<void> {\n    if (this.#enabled) {\n      return;\n    }\n\n    this.#enabled = true;\n    await this.#heapProfilerAgent.invoke_enable();\n  }\n\n  async startSampling(samplingRateInBytes?: number): Promise<boolean> {\n    if (this.#samplingProfilerDepth++) {\n      return false;\n    }\n    const defaultSamplingIntervalInBytes = 16384;\n    const response = await this.#heapProfilerAgent.invoke_startSampling(\n        {samplingInterval: samplingRateInBytes || defaultSamplingIntervalInBytes});\n    return Boolean(response.getError());\n  }\n\n  async stopSampling(): Promise<Protocol.HeapProfiler.SamplingHeapProfile|null> {\n    if (!this.#samplingProfilerDepth) {\n      throw new Error('Sampling profiler is not running.');\n    }\n    if (--this.#samplingProfilerDepth) {\n      return await this.getSamplingProfile();\n    }\n    const response = await this.#heapProfilerAgent.invoke_stopSampling();\n    if (response.getError()) {\n      return null;\n    }\n    return response.profile;\n  }\n\n  async getSamplingProfile(): Promise<Protocol.HeapProfiler.SamplingHeapProfile|null> {\n    const response = await this.#heapProfilerAgent.invoke_getSamplingProfile();\n    if (response.getError()) {\n      return null;\n    }\n    return response.profile;\n  }\n\n  async collectGarbage(): Promise<boolean> {\n    const response = await this.#heapProfilerAgent.invoke_collectGarbage();\n    return Boolean(response.getError());\n  }\n\n  async snapshotObjectIdForObjectId(objectId: Protocol.Runtime.RemoteObjectId): Promise<string|null> {\n    const response = await this.#heapProfilerAgent.invoke_getHeapObjectId({objectId});\n    if (response.getError()) {\n      return null;\n    }\n    return response.heapSnapshotObjectId;\n  }\n\n  async objectForSnapshotObjectId(\n      snapshotObjectId: Protocol.HeapProfiler.HeapSnapshotObjectId,\n      objectGroupName: string): Promise<RemoteObject|null> {\n    const result = await this.#heapProfilerAgent.invoke_getObjectByHeapObjectId(\n        {objectId: snapshotObjectId, objectGroup: objectGroupName});\n    if (result.getError()) {\n      return null;\n    }\n    return this.#runtimeModel.createRemoteObject(result.result);\n  }\n\n  async addInspectedHeapObject(snapshotObjectId: Protocol.HeapProfiler.HeapSnapshotObjectId): Promise<boolean> {\n    const response = await this.#heapProfilerAgent.invoke_addInspectedHeapObject({heapObjectId: snapshotObjectId});\n    return Boolean(response.getError());\n  }\n\n  async takeHeapSnapshot(heapSnapshotOptions: Protocol.HeapProfiler.TakeHeapSnapshotRequest): Promise<void> {\n    await this.#heapProfilerAgent.invoke_takeHeapSnapshot(heapSnapshotOptions);\n  }\n\n  async startTrackingHeapObjects(recordAllocationStacks: boolean): Promise<boolean> {\n    const response =\n        await this.#heapProfilerAgent.invoke_startTrackingHeapObjects({trackAllocations: recordAllocationStacks});\n    return Boolean(response.getError());\n  }\n\n  async stopTrackingHeapObjects(reportProgress: boolean): Promise<boolean> {\n    const response = await this.#heapProfilerAgent.invoke_stopTrackingHeapObjects({reportProgress});\n    return Boolean(response.getError());\n  }\n\n  heapStatsUpdate(samples: number[]): void {\n    this.dispatchEventToListeners(Events.HEAP_STATS_UPDATED, samples);\n  }\n\n  lastSeenObjectId(lastSeenObjectId: number, timestamp: number): void {\n    this.dispatchEventToListeners(Events.LAST_SEEN_OBJECT_ID, {lastSeenObjectId, timestamp});\n  }\n\n  addHeapSnapshotChunk(chunk: string): void {\n    this.dispatchEventToListeners(Events.ADD_HEAP_SNAPSHOT_CHUNK, chunk);\n  }\n\n  reportHeapSnapshotProgress(done: number, total: number, finished?: boolean): void {\n    this.dispatchEventToListeners(Events.REPORT_HEAP_SNAPSHOT_PROGRESS, {done, total, finished});\n  }\n\n  resetProfiles(): void {\n    this.dispatchEventToListeners(Events.RESET_PROFILES, this);\n  }\n}\n\nexport const enum Events {\n  HEAP_STATS_UPDATED = 'HeapStatsUpdate',\n  LAST_SEEN_OBJECT_ID = 'LastSeenObjectId',\n  ADD_HEAP_SNAPSHOT_CHUNK = 'AddHeapSnapshotChunk',\n  REPORT_HEAP_SNAPSHOT_PROGRESS = 'ReportHeapSnapshotProgress',\n  RESET_PROFILES = 'ResetProfiles',\n}\n\n/**\n * An array of triplets. Each triplet describes a fragment. The first number is the fragment\n * index, the second number is a total count of objects for the fragment, the third number is\n * a total size of the objects for the fragment.\n */\nexport type HeapStatsUpdateSamples = number[];\n\nexport interface LastSeenObjectId {\n  lastSeenObjectId: number;\n  timestamp: number;\n}\n\nexport interface HeapSnapshotProgress {\n  done: number;\n  total: number;\n  finished?: boolean;\n}\n\nexport interface EventTypes {\n  [Events.HEAP_STATS_UPDATED]: HeapStatsUpdateSamples;\n  [Events.LAST_SEEN_OBJECT_ID]: LastSeenObjectId;\n  [Events.ADD_HEAP_SNAPSHOT_CHUNK]: string;\n  [Events.REPORT_HEAP_SNAPSHOT_PROGRESS]: HeapSnapshotProgress;\n  [Events.RESET_PROFILES]: HeapProfilerModel;\n}\n\nexport interface NativeProfilerCallFrame {\n  functionName: string;\n  url: Platform.DevToolsPath.UrlString;\n  scriptId?: string;\n  lineNumber?: number;\n  columnNumber?: number;\n}\n\nexport interface CommonHeapProfileNode {\n  callFrame: NativeProfilerCallFrame;\n  selfSize: number;\n  id?: number;\n  children: CommonHeapProfileNode[];\n}\n\nexport interface CommonHeapProfile {\n  head: CommonHeapProfileNode;\n  modules: Protocol.Memory.Module[];\n}\n\nclass HeapProfilerDispatcher implements ProtocolProxyApi.HeapProfilerDispatcher {\n  readonly #heapProfilerModel: HeapProfilerModel;\n  constructor(model: HeapProfilerModel) {\n    this.#heapProfilerModel = model;\n  }\n\n  heapStatsUpdate({statsUpdate}: Protocol.HeapProfiler.HeapStatsUpdateEvent): void {\n    this.#heapProfilerModel.heapStatsUpdate(statsUpdate);\n  }\n\n  lastSeenObjectId({lastSeenObjectId, timestamp}: Protocol.HeapProfiler.LastSeenObjectIdEvent): void {\n    this.#heapProfilerModel.lastSeenObjectId(lastSeenObjectId, timestamp);\n  }\n\n  addHeapSnapshotChunk({chunk}: Protocol.HeapProfiler.AddHeapSnapshotChunkEvent): void {\n    this.#heapProfilerModel.addHeapSnapshotChunk(chunk);\n  }\n\n  reportHeapSnapshotProgress({done, total, finished}: Protocol.HeapProfiler.ReportHeapSnapshotProgressEvent): void {\n    this.#heapProfilerModel.reportHeapSnapshotProgress(done, total, finished);\n  }\n\n  resetProfiles(): void {\n    this.#heapProfilerModel.resetProfiles();\n  }\n}\n\nSDKModel.register(HeapProfilerModel, {capabilities: Capability.JS, autostart: false});\n", "// Copyright 2021 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\n/*\n * Copyright (C) 2008 Apple Inc. All Rights Reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions\n * are met:\n * 1. Redistributions of source code must retain the above copyright\n *    notice, this list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright\n *    notice, this list of conditions and the following disclaimer in the\n *    documentation and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY APPLE INC. ``AS IS'' AND ANY\n * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR\n * PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL APPLE INC. OR\n * CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,\n * EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,\n * PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\n * PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY\n * OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\nimport * as Platform from '../../core/platform/platform.js';\nimport * as Protocol from '../../generated/protocol.js';\nimport * as TextUtils from '../../models/text_utils/text_utils.js';\nimport * as Common from '../common/common.js';\nimport * as i18n from '../i18n/i18n.js';\n\nimport {\n  COND_BREAKPOINT_SOURCE_URL,\n  type DebuggerModel,\n  Events,\n  Location,\n  LOGPOINT_SOURCE_URL,\n} from './DebuggerModel.js';\nimport type {FrameAssociated} from './FrameAssociated.js';\nimport type {PageResourceLoadInitiator} from './PageResourceLoader.js';\nimport {ResourceTreeModel} from './ResourceTreeModel.js';\nimport type {ExecutionContext} from './RuntimeModel.js';\nimport type {DebugId, SourceMap} from './SourceMap.js';\nimport type {Target} from './Target.js';\n\nconst UIStrings = {\n  /**\n   * @description Error message for when a script can't be loaded which had been previously\n   */\n  scriptRemovedOrDeleted: 'Script removed or deleted.',\n  /**\n   * @description Error message when failing to load a script source text\n   */\n  unableToFetchScriptSource: 'Unable to fetch script source.',\n} as const;\nconst str_ = i18n.i18n.registerUIStrings('core/sdk/Script.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\n\nlet scriptCacheInstance: {\n  cache: Map<string, WeakRef<Promise<TextUtils.ContentData.ContentDataOrError>>>,\n  registry: FinalizationRegistry<string>,\n}|null = null;\n\nexport class Script implements TextUtils.ContentProvider.ContentProvider, FrameAssociated {\n  debuggerModel: DebuggerModel;\n  scriptId: Protocol.Runtime.ScriptId;\n  /**\n   * The URL of the script. When `hasSourceURL` is true, this value comes from a `//# sourceURL=` directive. Otherwise,\n   * it's the original `src` URL from which the script was loaded.\n   */\n  sourceURL: Platform.DevToolsPath.UrlString;\n  lineOffset: number;\n  columnOffset: number;\n  endLine: number;\n  endColumn: number;\n  executionContextId: number;\n  hash: string;\n  readonly #isContentScript: boolean;\n  readonly #isLiveEdit: boolean;\n  sourceMapURL?: string;\n  debugSymbols: Protocol.Debugger.DebugSymbols|null;\n  hasSourceURL: boolean;\n  contentLength: number;\n  originStackTrace: Protocol.Runtime.StackTrace|null;\n  readonly #codeOffset: number|null;\n  readonly #language: string|null;\n  #contentPromise: Promise<TextUtils.ContentData.ContentDataOrError>|null;\n  readonly #embedderName: Platform.DevToolsPath.UrlString|null;\n  readonly isModule: boolean|null;\n  readonly buildId: string|null;\n  constructor(\n      debuggerModel: DebuggerModel, scriptId: Protocol.Runtime.ScriptId, sourceURL: Platform.DevToolsPath.UrlString,\n      startLine: number, startColumn: number, endLine: number, endColumn: number, executionContextId: number,\n      hash: string, isContentScript: boolean, isLiveEdit: boolean, sourceMapURL: string|undefined,\n      hasSourceURL: boolean, length: number, isModule: boolean|null, originStackTrace: Protocol.Runtime.StackTrace|null,\n      codeOffset: number|null, scriptLanguage: string|null, debugSymbols: Protocol.Debugger.DebugSymbols|null,\n      embedderName: Platform.DevToolsPath.UrlString|null, buildId: string|null) {\n    this.debuggerModel = debuggerModel;\n    this.scriptId = scriptId;\n    this.sourceURL = sourceURL;\n    this.lineOffset = startLine;\n    this.columnOffset = startColumn;\n    this.endLine = endLine;\n    this.endColumn = endColumn;\n    this.isModule = isModule;\n    this.buildId = buildId;\n\n    this.executionContextId = executionContextId;\n    this.hash = hash;\n    this.#isContentScript = isContentScript;\n    this.#isLiveEdit = isLiveEdit;\n    this.sourceMapURL = sourceMapURL;\n    this.debugSymbols = debugSymbols;\n    this.hasSourceURL = hasSourceURL;\n    this.contentLength = length;\n    this.originStackTrace = originStackTrace;\n    this.#codeOffset = codeOffset;\n    this.#language = scriptLanguage;\n    this.#contentPromise = null;\n    this.#embedderName = embedderName;\n  }\n\n  embedderName(): Platform.DevToolsPath.UrlString|null {\n    return this.#embedderName;\n  }\n\n  target(): Target {\n    return this.debuggerModel.target();\n  }\n\n  private static trimSourceURLComment(source: string): string {\n    let sourceURLIndex = source.lastIndexOf('//# sourceURL=');\n    if (sourceURLIndex === -1) {\n      sourceURLIndex = source.lastIndexOf('//@ sourceURL=');\n      if (sourceURLIndex === -1) {\n        return source;\n      }\n    }\n    const sourceURLLineIndex = source.lastIndexOf('\\n', sourceURLIndex);\n    if (sourceURLLineIndex === -1) {\n      return source;\n    }\n    const sourceURLLine = source.substr(sourceURLLineIndex + 1);\n    if (!sourceURLLine.match(sourceURLRegex)) {\n      return source;\n    }\n    return source.substr(0, sourceURLLineIndex);\n  }\n\n  isContentScript(): boolean {\n    return this.#isContentScript;\n  }\n\n  codeOffset(): number|null {\n    return this.#codeOffset;\n  }\n\n  isJavaScript(): boolean {\n    return this.#language === Protocol.Debugger.ScriptLanguage.JavaScript;\n  }\n\n  isWasm(): boolean {\n    return this.#language === Protocol.Debugger.ScriptLanguage.WebAssembly;\n  }\n\n  scriptLanguage(): string|null {\n    return this.#language;\n  }\n\n  executionContext(): ExecutionContext|null {\n    return this.debuggerModel.runtimeModel().executionContext(this.executionContextId);\n  }\n\n  isLiveEdit(): boolean {\n    return this.#isLiveEdit;\n  }\n\n  contentURL(): Platform.DevToolsPath.UrlString {\n    return this.sourceURL;\n  }\n\n  contentType(): Common.ResourceType.ResourceType {\n    return Common.ResourceType.resourceTypes.Script;\n  }\n\n  private async loadTextContent(): Promise<TextUtils.ContentData.ContentData> {\n    const result = await this.debuggerModel.target().debuggerAgent().invoke_getScriptSource({scriptId: this.scriptId});\n    if (result.getError()) {\n      throw new Error(result.getError());\n    }\n    const {scriptSource, bytecode} = result;\n    if (bytecode) {\n      return new TextUtils.ContentData.ContentData(bytecode, /* isBase64 */ true, 'application/wasm');\n    }\n    let content: string = scriptSource || '';\n    if (this.hasSourceURL && Common.ParsedURL.schemeIs(this.sourceURL, 'snippet:')) {\n      // TODO(crbug.com/1330846): Find a better way to establish the snippet automapping binding then adding\n      // a sourceURL comment before evaluation and removing it here.\n      content = Script.trimSourceURLComment(content);\n    }\n    return new TextUtils.ContentData.ContentData(content, /* isBase64 */ false, 'text/javascript');\n  }\n\n  private async loadWasmContent(): Promise<TextUtils.ContentData.ContentDataOrError> {\n    if (!this.isWasm()) {\n      throw new Error('Not a wasm script');\n    }\n    const result =\n        await this.debuggerModel.target().debuggerAgent().invoke_disassembleWasmModule({scriptId: this.scriptId});\n\n    if (result.getError()) {\n      // Fall through to text content loading if v8-based disassembly fails. This is to ensure backwards compatibility with\n      // older v8 versions.\n      const contentData = await this.loadTextContent();\n      return await disassembleWasm(contentData.base64);\n    }\n\n    const {streamId, functionBodyOffsets, chunk: {lines, bytecodeOffsets}} = result;\n    const lineChunks = [];\n    const bytecodeOffsetChunks = [];\n    let totalLength = lines.reduce<number>((sum, line) => sum + line.length + 1, 0);\n    const truncationMessage = '<truncated>';\n    // This is a magic number used in code mirror which, when exceeded, sends it into an infinite loop.\n    const cmSizeLimit = 1000000000 - truncationMessage.length;\n    if (streamId) {\n      while (true) {\n        const result = await this.debuggerModel.target().debuggerAgent().invoke_nextWasmDisassemblyChunk({streamId});\n\n        if (result.getError()) {\n          throw new Error(result.getError());\n        }\n\n        const {chunk: {lines: linesChunk, bytecodeOffsets: bytecodeOffsetsChunk}} = result;\n        totalLength += linesChunk.reduce<number>((sum, line) => sum + line.length + 1, 0);\n        if (linesChunk.length === 0) {\n          break;\n        }\n        if (totalLength >= cmSizeLimit) {\n          lineChunks.push([truncationMessage]);\n          bytecodeOffsetChunks.push([0]);\n          break;\n        }\n\n        lineChunks.push(linesChunk);\n        bytecodeOffsetChunks.push(bytecodeOffsetsChunk);\n      }\n    }\n    const functionBodyRanges: Array<{start: number, end: number}> = [];\n    // functionBodyOffsets contains a sequence of pairs of start and end offsets\n    for (let i = 0; i < functionBodyOffsets.length; i += 2) {\n      functionBodyRanges.push({start: functionBodyOffsets[i], end: functionBodyOffsets[i + 1]});\n    }\n    return new TextUtils.WasmDisassembly.WasmDisassembly(\n        lines.concat(...lineChunks), bytecodeOffsets.concat(...bytecodeOffsetChunks), functionBodyRanges);\n  }\n\n  requestContentData(): Promise<TextUtils.ContentData.ContentDataOrError> {\n    if (!this.#contentPromise) {\n      const fileSizeToCache = 65535;  // We won't bother cacheing files under 64K\n      if (this.hash && !this.#isLiveEdit && this.contentLength > fileSizeToCache) {\n        // For large files that aren't live edits and have a hash, we keep a content-addressed cache\n        // so we don't need to load multiple copies or disassemble wasm modules multiple times.\n        if (!scriptCacheInstance) {\n          // Initialize script cache singleton. Add a finalizer for removing keys from the map.\n          scriptCacheInstance = {\n            cache: new Map(),\n            registry: new FinalizationRegistry(hashCode => scriptCacheInstance?.cache.delete(hashCode)),\n          };\n        }\n        // This key should be sufficient to identify scripts that are known to have the same content.\n        const fullHash = [\n          this.#language,\n          this.contentLength,\n          this.lineOffset,\n          this.columnOffset,\n          this.endLine,\n          this.endColumn,\n          this.#codeOffset,\n          this.hash,\n        ].join(':');\n        const cachedContentPromise = scriptCacheInstance.cache.get(fullHash)?.deref();\n        if (cachedContentPromise) {\n          this.#contentPromise = cachedContentPromise;\n        } else {\n          this.#contentPromise = this.#requestContent();\n          scriptCacheInstance.cache.set(fullHash, new WeakRef(this.#contentPromise));\n          scriptCacheInstance.registry.register(this.#contentPromise, fullHash);\n        }\n      } else {\n        this.#contentPromise = this.#requestContent();\n      }\n    }\n    return this.#contentPromise;\n  }\n\n  async #requestContent(): Promise<TextUtils.ContentData.ContentDataOrError> {\n    if (!this.scriptId) {\n      return {error: i18nString(UIStrings.scriptRemovedOrDeleted)};\n    }\n    try {\n      return this.isWasm() ? await this.loadWasmContent() : await this.loadTextContent();\n    } catch {\n      // TODO(bmeurer): Propagate errors as exceptions / rejections.\n      return {error: i18nString(UIStrings.unableToFetchScriptSource)};\n    }\n  }\n\n  async getWasmBytecode(): Promise<ArrayBuffer> {\n    const base64 = await this.debuggerModel.target().debuggerAgent().invoke_getWasmBytecode({scriptId: this.scriptId});\n    const response = await fetch(`data:application/wasm;base64,${base64.bytecode}`);\n    return await response.arrayBuffer();\n  }\n\n  originalContentProvider(): TextUtils.ContentProvider.ContentProvider {\n    return new TextUtils.StaticContentProvider.StaticContentProvider(\n        this.contentURL(), this.contentType(), () => this.requestContentData());\n  }\n\n  async searchInContent(query: string, caseSensitive: boolean, isRegex: boolean):\n      Promise<TextUtils.ContentProvider.SearchMatch[]> {\n    if (!this.scriptId) {\n      return [];\n    }\n\n    const matches = await this.debuggerModel.target().debuggerAgent().invoke_searchInContent(\n        {scriptId: this.scriptId, query, caseSensitive, isRegex});\n    return TextUtils.TextUtils.performSearchInSearchMatches(matches.result || [], query, caseSensitive, isRegex);\n  }\n\n  private appendSourceURLCommentIfNeeded(source: string): string {\n    if (!this.hasSourceURL) {\n      return source;\n    }\n    return source + '\\n //# sourceURL=' + this.sourceURL;\n  }\n\n  async editSource(newSource: string): Promise<{\n    changed: boolean,\n    status: Protocol.Debugger.SetScriptSourceResponseStatus,\n    exceptionDetails?: Protocol.Runtime.ExceptionDetails,\n  }> {\n    newSource = Script.trimSourceURLComment(newSource);\n    // We append correct #sourceURL to script for consistency only. It's not actually needed for things to work correctly.\n    newSource = this.appendSourceURLCommentIfNeeded(newSource);\n\n    const oldSource = TextUtils.ContentData.ContentData.textOr(await this.requestContentData(), null);\n    if (oldSource === newSource) {\n      return {changed: false, status: Protocol.Debugger.SetScriptSourceResponseStatus.Ok};\n    }\n    const response = await this.debuggerModel.target().debuggerAgent().invoke_setScriptSource(\n        {scriptId: this.scriptId, scriptSource: newSource, allowTopFrameEditing: true});\n    if (response.getError()) {\n      // Something went seriously wrong, like the V8 inspector no longer knowing about this script without\n      // shutting down the Debugger agent etc.\n      throw new Error(`Script#editSource failed for script with id ${this.scriptId}: ${response.getError()}`);\n    }\n\n    if (!response.getError() && response.status === Protocol.Debugger.SetScriptSourceResponseStatus.Ok) {\n      this.#contentPromise =\n          Promise.resolve(new TextUtils.ContentData.ContentData(newSource, /* isBase64 */ false, 'text/javascript'));\n    }\n\n    this.debuggerModel.dispatchEventToListeners(Events.ScriptSourceWasEdited, {script: this, status: response.status});\n    return {changed: true, status: response.status, exceptionDetails: response.exceptionDetails};\n  }\n\n  rawLocation(lineNumber: number, columnNumber: number): Location|null {\n    if (this.containsLocation(lineNumber, columnNumber)) {\n      return new Location(this.debuggerModel, this.scriptId, lineNumber, columnNumber);\n    }\n    return null;\n  }\n\n  isInlineScript(): boolean {\n    const startsAtZero = !this.lineOffset && !this.columnOffset;\n    return !this.isWasm() && Boolean(this.sourceURL) && !startsAtZero;\n  }\n\n  isAnonymousScript(): boolean {\n    return !this.sourceURL;\n  }\n\n  async setBlackboxedRanges(positions: Protocol.Debugger.ScriptPosition[]): Promise<boolean> {\n    const response = await this.debuggerModel.target().debuggerAgent().invoke_setBlackboxedRanges(\n        {scriptId: this.scriptId, positions});\n    return !response.getError();\n  }\n\n  containsLocation(lineNumber: number, columnNumber: number): boolean {\n    const afterStart =\n        (lineNumber === this.lineOffset && columnNumber >= this.columnOffset) || lineNumber > this.lineOffset;\n    const beforeEnd = lineNumber < this.endLine || (lineNumber === this.endLine && columnNumber <= this.endColumn);\n    return afterStart && beforeEnd;\n  }\n\n  get frameId(): Protocol.Page.FrameId {\n    // TODO(crbug.com/1172300) Ignored during the jsdoc to ts migration\n    // @ts-expect-error\n    if (typeof this[frameIdSymbol] !== 'string') {\n      // TODO(crbug.com/1172300) Ignored during the jsdoc to ts migration\n      // @ts-expect-error\n      this[frameIdSymbol] = frameIdForScript(this);\n    }\n    // TODO(crbug.com/1172300) Ignored during the jsdoc to ts migration\n    // @ts-expect-error\n    return this[frameIdSymbol];\n  }\n\n  /**\n   * @returns true, iff this script originates from a breakpoint/logpoint condition\n   */\n  get isBreakpointCondition(): boolean {\n    return [COND_BREAKPOINT_SOURCE_URL, LOGPOINT_SOURCE_URL].includes(this.sourceURL);\n  }\n\n  /**\n   * @returns the currently attached source map for this Script or `undefined` if there is none or it\n   * hasn't loaded yet.\n   */\n  sourceMap(): SourceMap|undefined {\n    return this.debuggerModel.sourceMapManager().sourceMapForClient(this);\n  }\n\n  createPageResourceLoadInitiator(): PageResourceLoadInitiator {\n    return {target: this.target(), frameId: this.frameId, initiatorUrl: this.embedderName()};\n  }\n\n  debugId(): DebugId|null {\n    return this.buildId as (DebugId | null);\n  }\n\n  /**\n   * Translates the `rawLocation` from line and column number in terms of what V8 understands\n   * to a script relative location. Specifically this means that for inline `<script>`'s\n   * without a `//# sourceURL=` annotation, the line and column offset of the script\n   * content is subtracted to make the location within the script independent of the\n   * location of the `<script>` tag within the surrounding document.\n   *\n   * @param rawLocation the raw location in terms of what V8 understands.\n   * @returns the script relative line and column number for the {@link rawLocation}.\n   */\n  rawLocationToRelativeLocation(rawLocation: {lineNumber: number, columnNumber: number}):\n      {lineNumber: number, columnNumber: number};\n  rawLocationToRelativeLocation(rawLocation: {lineNumber: number, columnNumber: number|undefined}):\n      {lineNumber: number, columnNumber: number|undefined};\n  rawLocationToRelativeLocation(rawLocation: {lineNumber: number, columnNumber: number|undefined}):\n      {lineNumber: number, columnNumber: number|undefined} {\n    let {lineNumber, columnNumber} = rawLocation;\n    if (!this.hasSourceURL && this.isInlineScript()) {\n      lineNumber -= this.lineOffset;\n      if (lineNumber === 0 && columnNumber !== undefined) {\n        columnNumber -= this.columnOffset;\n      }\n    }\n    return {lineNumber, columnNumber};\n  }\n\n  /**\n   * Translates the `relativeLocation` from script relative line and column number to\n   * the raw location in terms of what V8 understands. Specifically this means that for\n   * inline `<script>`'s without a `//# sourceURL=` annotation, the line and column offset\n   * of the script content is added to make the location relative to the start of the\n   * surrounding document.\n   *\n   * @param relativeLocation the script relative location.\n   * @returns the raw location in terms of what V8 understands for the {@link relativeLocation}.\n   */\n  relativeLocationToRawLocation(relativeLocation: {lineNumber: number, columnNumber: number}):\n      {lineNumber: number, columnNumber: number};\n  relativeLocationToRawLocation(relativeLocation: {lineNumber: number, columnNumber: number|undefined}):\n      {lineNumber: number, columnNumber: number|undefined};\n  relativeLocationToRawLocation(relativeLocation: {lineNumber: number, columnNumber: number|undefined}):\n      {lineNumber: number, columnNumber: number|undefined} {\n    let {lineNumber, columnNumber} = relativeLocation;\n    if (!this.hasSourceURL && this.isInlineScript()) {\n      if (lineNumber === 0 && columnNumber !== undefined) {\n        columnNumber += this.columnOffset;\n      }\n      lineNumber += this.lineOffset;\n    }\n    return {lineNumber, columnNumber};\n  }\n}\n\nconst frameIdSymbol = Symbol('frameid');\n\nfunction frameIdForScript(script: Script): Protocol.Page.FrameId|null {\n  const executionContext = script.executionContext();\n  if (executionContext) {\n    return executionContext.frameId || null;\n  }\n  // This is to overcome compilation cache which doesn't get reset.\n  const resourceTreeModel = script.debuggerModel.target().model(ResourceTreeModel);\n  if (!resourceTreeModel?.mainFrame) {\n    return null;\n  }\n  return resourceTreeModel.mainFrame.id;\n}\n\nexport const sourceURLRegex = /^[\\x20\\t]*\\/\\/[@#] sourceURL=\\s*(\\S*?)\\s*$/;\n\nexport async function disassembleWasm(content: string): Promise<TextUtils.WasmDisassembly.WasmDisassembly> {\n  const worker = Platform.HostRuntime.HOST_RUNTIME.createWorker(\n      new URL('../../entrypoints/wasmparser_worker/wasmparser_worker-entrypoint.js', import.meta.url).toString());\n  const promise = new Promise<TextUtils.WasmDisassembly.WasmDisassembly>((resolve, reject) => {\n    worker.onmessage = ({data}) => {\n      if ('method' in data) {\n        switch (data.method) {\n          case 'disassemble':\n            if ('error' in data) {\n              reject(data.error);\n            } else if ('result' in data) {\n              const {lines, offsets, functionBodyOffsets} = data.result;\n              resolve(new TextUtils.WasmDisassembly.WasmDisassembly(lines, offsets, functionBodyOffsets));\n            }\n            break;\n        }\n      }\n    };\n    worker.onerror = reject;\n  });\n\n  worker.postMessage({method: 'disassemble', params: {content}});\n\n  try {\n    return await promise;  // The await is important here or we terminate the worker too early.\n  } finally {\n    worker.terminate();\n  }\n}\n", "// Copyright 2020 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as Protocol from '../../generated/protocol.js';\nimport * as Common from '../common/common.js';\nimport * as Platform from '../platform/platform.js';\n\nimport type {DOMModel} from './DOMModel.js';\nimport {OverlayColorGenerator} from './OverlayColorGenerator.js';\n\nexport const enum HighlightType {\n  FLEX = 'FLEX',\n  GRID = 'GRID',\n  SCROLL_SNAP = 'SCROLL_SNAP',\n  CONTAINER_QUERY = 'CONTAINER_QUERY',\n  ISOLATED_ELEMENT = 'ISOLATED_ELEMENT',\n}\n\nexport interface PersistentHighlightSettingItem {\n  url: Platform.DevToolsPath.UrlString;\n  path: string;\n  type: HighlightType;\n}\n\nexport interface PersistentHighlighterCallbacks {\n  onGridOverlayStateChanged: ({nodeId, enabled}: {nodeId: Protocol.DOM.NodeId, enabled: boolean}) => void;\n  onFlexOverlayStateChanged: ({nodeId, enabled}: {nodeId: Protocol.DOM.NodeId, enabled: boolean}) => void;\n  onScrollSnapOverlayStateChanged: ({nodeId, enabled}: {nodeId: Protocol.DOM.NodeId, enabled: boolean}) => void;\n  onContainerQueryOverlayStateChanged: ({nodeId, enabled}: {nodeId: Protocol.DOM.NodeId, enabled: boolean}) => void;\n}\n\nexport class OverlayPersistentHighlighter {\n  readonly #model: OverlayModel;\n  readonly #colors = new Map<Protocol.DOM.NodeId, Common.Color.Color>();\n  readonly #persistentHighlightSetting =\n      Common.Settings.Settings.instance().createLocalSetting<PersistentHighlightSettingItem[]>(\n          'persistent-highlight-setting', []);\n  #gridHighlights = new Map<Protocol.DOM.NodeId, Protocol.Overlay.GridHighlightConfig>();\n  #scrollSnapHighlights = new Map<Protocol.DOM.NodeId, Protocol.Overlay.ScrollSnapContainerHighlightConfig>();\n  #flexHighlights = new Map<Protocol.DOM.NodeId, Protocol.Overlay.FlexContainerHighlightConfig>();\n  #containerQueryHighlights = new Map<Protocol.DOM.NodeId, Protocol.Overlay.ContainerQueryContainerHighlightConfig>();\n  #isolatedElementHighlights = new Map<Protocol.DOM.NodeId, Protocol.Overlay.IsolationModeHighlightConfig>();\n  #gridColorGenerator = new OverlayColorGenerator();\n  #flexColorGenerator = new OverlayColorGenerator();\n\n  /**\n   * @see `front_end/core/sdk/sdk-meta.ts`\n   */\n  readonly #showGridLineLabelsSetting =\n      Common.Settings.Settings.instance().moduleSetting<string>('show-grid-line-labels');\n  readonly #extendGridLinesSetting = Common.Settings.Settings.instance().moduleSetting<boolean>('extend-grid-lines');\n  readonly #showGridAreasSetting = Common.Settings.Settings.instance().moduleSetting<boolean>('show-grid-areas');\n  readonly #showGridTrackSizesSetting =\n      Common.Settings.Settings.instance().moduleSetting<boolean>('show-grid-track-sizes');\n\n  readonly #callbacks: PersistentHighlighterCallbacks;\n  constructor(model: OverlayModel, callbacks: PersistentHighlighterCallbacks) {\n    this.#model = model;\n    this.#callbacks = callbacks;\n\n    this.#showGridLineLabelsSetting.addChangeListener(this.onSettingChange, this);\n    this.#extendGridLinesSetting.addChangeListener(this.onSettingChange, this);\n    this.#showGridAreasSetting.addChangeListener(this.onSettingChange, this);\n    this.#showGridTrackSizesSetting.addChangeListener(this.onSettingChange, this);\n  }\n\n  private onSettingChange(): void {\n    this.resetOverlay();\n  }\n\n  private buildGridHighlightConfig(nodeId: Protocol.DOM.NodeId): Protocol.Overlay.GridHighlightConfig {\n    const mainColor = this.colorOfGrid(nodeId).asLegacyColor();\n    const background = mainColor.setAlpha(0.1).asLegacyColor();\n    const gapBackground = mainColor.setAlpha(0.3).asLegacyColor();\n    const gapHatch = mainColor.setAlpha(0.8).asLegacyColor();\n\n    const showGridExtensionLines = this.#extendGridLinesSetting.get();\n    const showPositiveLineNumbers = this.#showGridLineLabelsSetting.get() === 'lineNumbers';\n    const showNegativeLineNumbers = showPositiveLineNumbers;\n    const showLineNames = this.#showGridLineLabelsSetting.get() === 'lineNames';\n    return {\n      rowGapColor: gapBackground.toProtocolRGBA(),\n      rowHatchColor: gapHatch.toProtocolRGBA(),\n      columnGapColor: gapBackground.toProtocolRGBA(),\n      columnHatchColor: gapHatch.toProtocolRGBA(),\n      gridBorderColor: mainColor.toProtocolRGBA(),\n      gridBorderDash: false,\n      rowLineColor: mainColor.toProtocolRGBA(),\n      columnLineColor: mainColor.toProtocolRGBA(),\n      rowLineDash: true,\n      columnLineDash: true,\n      showGridExtensionLines,\n      showPositiveLineNumbers,\n      showNegativeLineNumbers,\n      showLineNames,\n      showAreaNames: this.#showGridAreasSetting.get(),\n      showTrackSizes: this.#showGridTrackSizesSetting.get(),\n      areaBorderColor: mainColor.toProtocolRGBA(),\n      gridBackgroundColor: background.toProtocolRGBA(),\n    };\n  }\n\n  private buildFlexContainerHighlightConfig(nodeId: Protocol.DOM.NodeId):\n      Protocol.Overlay.FlexContainerHighlightConfig {\n    const mainColor = this.colorOfFlex(nodeId).asLegacyColor();\n    return {\n      containerBorder: {color: mainColor.toProtocolRGBA(), pattern: Protocol.Overlay.LineStylePattern.Dashed},\n      itemSeparator: {color: mainColor.toProtocolRGBA(), pattern: Protocol.Overlay.LineStylePattern.Dotted},\n      lineSeparator: {color: mainColor.toProtocolRGBA(), pattern: Protocol.Overlay.LineStylePattern.Dashed},\n      mainDistributedSpace: {hatchColor: mainColor.toProtocolRGBA()},\n      crossDistributedSpace: {hatchColor: mainColor.toProtocolRGBA()},\n    };\n  }\n\n  private buildScrollSnapContainerHighlightConfig(_nodeId: number):\n      Protocol.Overlay.ScrollSnapContainerHighlightConfig {\n    return {\n      snapAreaBorder: {\n        color: Common.Color.PageHighlight.GridBorder.toProtocolRGBA(),\n        pattern: Protocol.Overlay.LineStylePattern.Dashed,\n      },\n      snapportBorder: {color: Common.Color.PageHighlight.GridBorder.toProtocolRGBA()},\n      scrollMarginColor: Common.Color.PageHighlight.Margin.toProtocolRGBA(),\n      scrollPaddingColor: Common.Color.PageHighlight.Padding.toProtocolRGBA(),\n    };\n  }\n\n  highlightGridInOverlay(nodeId: Protocol.DOM.NodeId): void {\n    this.#gridHighlights.set(nodeId, this.buildGridHighlightConfig(nodeId));\n    this.updateHighlightsInOverlay();\n    this.savePersistentHighlightSetting();\n    this.#callbacks.onGridOverlayStateChanged({nodeId, enabled: true});\n  }\n\n  isGridHighlighted(nodeId: Protocol.DOM.NodeId): boolean {\n    return this.#gridHighlights.has(nodeId);\n  }\n\n  colorOfGrid(nodeId: Protocol.DOM.NodeId): Common.Color.Color {\n    let color = this.#colors.get(nodeId);\n    if (!color) {\n      color = this.#gridColorGenerator.next();\n      this.#colors.set(nodeId, color);\n    }\n\n    return color;\n  }\n\n  setColorOfGrid(nodeId: Protocol.DOM.NodeId, color: Common.Color.Color): void {\n    this.#colors.set(nodeId, color);\n  }\n\n  hideGridInOverlay(nodeId: Protocol.DOM.NodeId): void {\n    if (this.#gridHighlights.has(nodeId)) {\n      this.#gridHighlights.delete(nodeId);\n      this.updateHighlightsInOverlay();\n      this.savePersistentHighlightSetting();\n      this.#callbacks.onGridOverlayStateChanged({nodeId, enabled: false});\n    }\n  }\n\n  highlightScrollSnapInOverlay(nodeId: Protocol.DOM.NodeId): void {\n    this.#scrollSnapHighlights.set(nodeId, this.buildScrollSnapContainerHighlightConfig(nodeId));\n    this.updateHighlightsInOverlay();\n    this.#callbacks.onScrollSnapOverlayStateChanged({nodeId, enabled: true});\n    this.savePersistentHighlightSetting();\n  }\n\n  isScrollSnapHighlighted(nodeId: Protocol.DOM.NodeId): boolean {\n    return this.#scrollSnapHighlights.has(nodeId);\n  }\n\n  hideScrollSnapInOverlay(nodeId: Protocol.DOM.NodeId): void {\n    if (this.#scrollSnapHighlights.has(nodeId)) {\n      this.#scrollSnapHighlights.delete(nodeId);\n      this.updateHighlightsInOverlay();\n      this.#callbacks.onScrollSnapOverlayStateChanged({nodeId, enabled: false});\n      this.savePersistentHighlightSetting();\n    }\n  }\n\n  highlightFlexInOverlay(nodeId: Protocol.DOM.NodeId): void {\n    this.#flexHighlights.set(nodeId, this.buildFlexContainerHighlightConfig(nodeId));\n    this.updateHighlightsInOverlay();\n    this.savePersistentHighlightSetting();\n    this.#callbacks.onFlexOverlayStateChanged({nodeId, enabled: true});\n  }\n\n  isFlexHighlighted(nodeId: Protocol.DOM.NodeId): boolean {\n    return this.#flexHighlights.has(nodeId);\n  }\n\n  colorOfFlex(nodeId: Protocol.DOM.NodeId): Common.Color.Color {\n    let color = this.#colors.get(nodeId);\n    if (!color) {\n      color = this.#flexColorGenerator.next();\n      this.#colors.set(nodeId, color);\n    }\n\n    return color;\n  }\n\n  setColorOfFlex(nodeId: Protocol.DOM.NodeId, color: Common.Color.Color): void {\n    this.#colors.set(nodeId, color);\n  }\n\n  hideFlexInOverlay(nodeId: Protocol.DOM.NodeId): void {\n    if (this.#flexHighlights.has(nodeId)) {\n      this.#flexHighlights.delete(nodeId);\n      this.updateHighlightsInOverlay();\n      this.savePersistentHighlightSetting();\n      this.#callbacks.onFlexOverlayStateChanged({nodeId, enabled: false});\n    }\n  }\n\n  highlightContainerQueryInOverlay(nodeId: Protocol.DOM.NodeId): void {\n    this.#containerQueryHighlights.set(nodeId, this.buildContainerQueryContainerHighlightConfig());\n    this.updateHighlightsInOverlay();\n    this.savePersistentHighlightSetting();\n    this.#callbacks.onContainerQueryOverlayStateChanged({nodeId, enabled: true});\n  }\n\n  hideContainerQueryInOverlay(nodeId: Protocol.DOM.NodeId): void {\n    if (this.#containerQueryHighlights.has(nodeId)) {\n      this.#containerQueryHighlights.delete(nodeId);\n      this.updateHighlightsInOverlay();\n      this.savePersistentHighlightSetting();\n      this.#callbacks.onContainerQueryOverlayStateChanged({nodeId, enabled: false});\n    }\n  }\n\n  isContainerQueryHighlighted(nodeId: Protocol.DOM.NodeId): boolean {\n    return this.#containerQueryHighlights.has(nodeId);\n  }\n\n  private buildContainerQueryContainerHighlightConfig(): Protocol.Overlay.ContainerQueryContainerHighlightConfig {\n    return {\n      containerBorder: {\n        color: Common.Color.PageHighlight.LayoutLine.toProtocolRGBA(),\n        pattern: Protocol.Overlay.LineStylePattern.Dashed,\n      },\n      descendantBorder: {\n        color: Common.Color.PageHighlight.LayoutLine.toProtocolRGBA(),\n        pattern: Protocol.Overlay.LineStylePattern.Dashed,\n      },\n    };\n  }\n\n  highlightIsolatedElementInOverlay(nodeId: Protocol.DOM.NodeId): void {\n    this.#isolatedElementHighlights.set(nodeId, this.buildIsolationModeHighlightConfig());\n    this.updateHighlightsInOverlay();\n    this.savePersistentHighlightSetting();\n  }\n\n  hideIsolatedElementInOverlay(nodeId: Protocol.DOM.NodeId): void {\n    if (this.#isolatedElementHighlights.has(nodeId)) {\n      this.#isolatedElementHighlights.delete(nodeId);\n      this.updateHighlightsInOverlay();\n      this.savePersistentHighlightSetting();\n    }\n  }\n\n  isIsolatedElementHighlighted(nodeId: Protocol.DOM.NodeId): boolean {\n    return this.#isolatedElementHighlights.has(nodeId);\n  }\n\n  private buildIsolationModeHighlightConfig(): Protocol.Overlay.IsolationModeHighlightConfig {\n    return {\n      resizerColor: Common.Color.IsolationModeHighlight.Resizer.toProtocolRGBA(),\n      resizerHandleColor: Common.Color.IsolationModeHighlight.ResizerHandle.toProtocolRGBA(),\n      maskColor: Common.Color.IsolationModeHighlight.Mask.toProtocolRGBA(),\n    };\n  }\n\n  hideAllInOverlayWithoutSave(): void {\n    this.#flexHighlights.clear();\n    this.#gridHighlights.clear();\n    this.#scrollSnapHighlights.clear();\n    this.#containerQueryHighlights.clear();\n    this.#isolatedElementHighlights.clear();\n    this.updateHighlightsInOverlay();\n  }\n\n  refreshHighlights(): void {\n    const gridsNeedUpdate = this.updateHighlightsForDeletedNodes(this.#gridHighlights);\n    const flexboxesNeedUpdate = this.updateHighlightsForDeletedNodes(this.#flexHighlights);\n    const scrollSnapsNeedUpdate = this.updateHighlightsForDeletedNodes(this.#scrollSnapHighlights);\n    const containerQueriesNeedUpdate = this.updateHighlightsForDeletedNodes(this.#containerQueryHighlights);\n    const isolatedElementsNeedUpdate = this.updateHighlightsForDeletedNodes(this.#isolatedElementHighlights);\n    if (flexboxesNeedUpdate || gridsNeedUpdate || scrollSnapsNeedUpdate || containerQueriesNeedUpdate ||\n        isolatedElementsNeedUpdate) {\n      this.updateHighlightsInOverlay();\n      this.savePersistentHighlightSetting();\n    }\n  }\n\n  private updateHighlightsForDeletedNodes(highlights: Map<Protocol.DOM.NodeId, unknown>): boolean {\n    let needsUpdate = false;\n    for (const nodeId of highlights.keys()) {\n      if (this.#model.getDOMModel().nodeForId(nodeId) === null) {\n        highlights.delete(nodeId);\n        needsUpdate = true;\n      }\n    }\n    return needsUpdate;\n  }\n\n  resetOverlay(): void {\n    for (const nodeId of this.#gridHighlights.keys()) {\n      this.#gridHighlights.set(nodeId, this.buildGridHighlightConfig(nodeId));\n    }\n    for (const nodeId of this.#flexHighlights.keys()) {\n      this.#flexHighlights.set(nodeId, this.buildFlexContainerHighlightConfig(nodeId));\n    }\n    for (const nodeId of this.#scrollSnapHighlights.keys()) {\n      this.#scrollSnapHighlights.set(nodeId, this.buildScrollSnapContainerHighlightConfig(nodeId));\n    }\n    for (const nodeId of this.#containerQueryHighlights.keys()) {\n      this.#containerQueryHighlights.set(nodeId, this.buildContainerQueryContainerHighlightConfig());\n    }\n    for (const nodeId of this.#isolatedElementHighlights.keys()) {\n      this.#isolatedElementHighlights.set(nodeId, this.buildIsolationModeHighlightConfig());\n    }\n    this.updateHighlightsInOverlay();\n  }\n\n  private updateHighlightsInOverlay(): void {\n    const hasNodesToHighlight = this.#gridHighlights.size > 0 || this.#flexHighlights.size > 0 ||\n        this.#containerQueryHighlights.size > 0 || this.#isolatedElementHighlights.size > 0;\n    this.#model.setShowViewportSizeOnResize(!hasNodesToHighlight);\n    this.updateGridHighlightsInOverlay();\n    this.updateFlexHighlightsInOverlay();\n    this.updateScrollSnapHighlightsInOverlay();\n    this.updateContainerQueryHighlightsInOverlay();\n    this.updateIsolatedElementHighlightsInOverlay();\n  }\n\n  private updateGridHighlightsInOverlay(): void {\n    const overlayModel = this.#model;\n    const gridNodeHighlightConfigs = [];\n    for (const [nodeId, gridHighlightConfig] of this.#gridHighlights.entries()) {\n      gridNodeHighlightConfigs.push({nodeId, gridHighlightConfig});\n    }\n    overlayModel.target().overlayAgent().invoke_setShowGridOverlays({gridNodeHighlightConfigs});\n  }\n\n  private updateFlexHighlightsInOverlay(): void {\n    const overlayModel = this.#model;\n    const flexNodeHighlightConfigs = [];\n    for (const [nodeId, flexContainerHighlightConfig] of this.#flexHighlights.entries()) {\n      flexNodeHighlightConfigs.push({nodeId, flexContainerHighlightConfig});\n    }\n    overlayModel.target().overlayAgent().invoke_setShowFlexOverlays({flexNodeHighlightConfigs});\n  }\n\n  private updateScrollSnapHighlightsInOverlay(): void {\n    const overlayModel = this.#model;\n    const scrollSnapHighlightConfigs = [];\n    for (const [nodeId, scrollSnapContainerHighlightConfig] of this.#scrollSnapHighlights.entries()) {\n      scrollSnapHighlightConfigs.push({nodeId, scrollSnapContainerHighlightConfig});\n    }\n    overlayModel.target().overlayAgent().invoke_setShowScrollSnapOverlays({scrollSnapHighlightConfigs});\n  }\n\n  updateContainerQueryHighlightsInOverlay(): void {\n    const overlayModel = this.#model;\n    const containerQueryHighlightConfigs = [];\n    for (const [nodeId, containerQueryContainerHighlightConfig] of this.#containerQueryHighlights.entries()) {\n      containerQueryHighlightConfigs.push({nodeId, containerQueryContainerHighlightConfig});\n    }\n    overlayModel.target().overlayAgent().invoke_setShowContainerQueryOverlays({containerQueryHighlightConfigs});\n  }\n\n  updateIsolatedElementHighlightsInOverlay(): void {\n    const overlayModel = this.#model;\n    const isolatedElementHighlightConfigs = [];\n    for (const [nodeId, isolationModeHighlightConfig] of this.#isolatedElementHighlights.entries()) {\n      isolatedElementHighlightConfigs.push({nodeId, isolationModeHighlightConfig});\n    }\n    overlayModel.target().overlayAgent().invoke_setShowIsolatedElements({isolatedElementHighlightConfigs});\n  }\n\n  async restoreHighlightsForDocument(): Promise<void> {\n    this.#flexHighlights = new Map();\n    this.#gridHighlights = new Map();\n    this.#scrollSnapHighlights = new Map();\n    this.#containerQueryHighlights = new Map();\n    this.#isolatedElementHighlights = new Map();\n\n    // this.currentURL() is empty when the page is reloaded because the\n    // new document has not been requested yet and the old one has been\n    // removed. Therefore, we need to request the document and wait for it.\n    // Note that requestDocument() caches the document so that it is requested\n    // only once.\n    const document = await this.#model.getDOMModel().requestDocument();\n    const currentURL = document ? document.documentURL : Platform.DevToolsPath.EmptyUrlString;\n    await Promise.all(this.#persistentHighlightSetting.get().map(async persistentHighlight => {\n      if (persistentHighlight.url === currentURL) {\n        return await this.#model.getDOMModel().pushNodeByPathToFrontend(persistentHighlight.path).then(nodeId => {\n          const node = this.#model.getDOMModel().nodeForId(nodeId);\n          if (!node) {\n            return;\n          }\n\n          switch (persistentHighlight.type) {\n            case HighlightType.GRID:\n              this.#gridHighlights.set(node.id, this.buildGridHighlightConfig(node.id));\n              this.#callbacks.onGridOverlayStateChanged({nodeId: node.id, enabled: true});\n              break;\n            case HighlightType.FLEX:\n              this.#flexHighlights.set(node.id, this.buildFlexContainerHighlightConfig(node.id));\n              this.#callbacks.onFlexOverlayStateChanged({nodeId: node.id, enabled: true});\n              break;\n            case HighlightType.CONTAINER_QUERY:\n              this.#containerQueryHighlights.set(node.id, this.buildContainerQueryContainerHighlightConfig());\n              this.#callbacks.onContainerQueryOverlayStateChanged({nodeId: node.id, enabled: true});\n              break;\n            case HighlightType.SCROLL_SNAP:\n              this.#scrollSnapHighlights.set(node.id, this.buildScrollSnapContainerHighlightConfig(node.id));\n              this.#callbacks.onScrollSnapOverlayStateChanged({nodeId: node.id, enabled: true});\n              break;\n            case HighlightType.ISOLATED_ELEMENT:\n              this.#isolatedElementHighlights.set(node.id, this.buildIsolationModeHighlightConfig());\n              break;\n          }\n        });\n      }\n    }));\n\n    this.updateHighlightsInOverlay();\n  }\n\n  private currentUrl(): Platform.DevToolsPath.UrlString {\n    const domDocument = this.#model.getDOMModel().existingDocument();\n    return domDocument ? domDocument.documentURL : Platform.DevToolsPath.EmptyUrlString;\n  }\n\n  private getPersistentHighlightSettingForOneType(highlights: Map<Protocol.DOM.NodeId, unknown>, type: HighlightType):\n      PersistentHighlightSettingItem[] {\n    const persistentHighlights: PersistentHighlightSettingItem[] = [];\n    for (const nodeId of highlights.keys()) {\n      const node = this.#model.getDOMModel().nodeForId(nodeId);\n      if (node) {\n        persistentHighlights.push({url: this.currentUrl(), path: node.path(), type});\n      }\n    }\n\n    return persistentHighlights;\n  }\n\n  private savePersistentHighlightSetting(): void {\n    const currentURL = this.currentUrl();\n\n    // Keep the highlights that are not related to this document.\n    const highlightsInOtherDocuments =\n        this.#persistentHighlightSetting.get().filter((persistentSetting: {\n                                                        url: Platform.DevToolsPath.UrlString,\n                                                      }) => persistentSetting.url !== currentURL);\n\n    const persistentHighlights = [\n      ...highlightsInOtherDocuments,\n      ...this.getPersistentHighlightSettingForOneType(this.#gridHighlights, HighlightType.GRID),\n      ...this.getPersistentHighlightSettingForOneType(this.#flexHighlights, HighlightType.FLEX),\n      ...this.getPersistentHighlightSettingForOneType(this.#containerQueryHighlights, HighlightType.CONTAINER_QUERY),\n      ...this.getPersistentHighlightSettingForOneType(this.#scrollSnapHighlights, HighlightType.SCROLL_SNAP),\n      ...this.getPersistentHighlightSettingForOneType(this.#isolatedElementHighlights, HighlightType.ISOLATED_ELEMENT),\n    ];\n\n    this.#persistentHighlightSetting.set(persistentHighlights);\n  }\n}\n\nexport interface OverlayAgent {\n  /* eslint-disable @typescript-eslint/naming-convention */\n  invoke_setShowGridOverlays(param: {\n    gridNodeHighlightConfigs: Array<{\n      nodeId: number,\n      gridHighlightConfig: Protocol.Overlay.GridHighlightConfig,\n    }>,\n  }): void;\n\n  invoke_setShowFlexOverlays(param: {\n    flexNodeHighlightConfigs: Array<{\n      nodeId: number,\n      flexContainerHighlightConfig: Protocol.Overlay.FlexContainerHighlightConfig,\n    }>,\n  }): void;\n\n  invoke_setShowScrollSnapOverlays(param: {\n    scrollSnapHighlightConfigs: Array<{\n      nodeId: number,\n    }>,\n  }): void;\n\n  invoke_setShowContainerQueryOverlays(param: {\n    containerQueryHighlightConfigs: Array<{\n      nodeId: number,\n      containerQueryContainerHighlightConfig: Protocol.Overlay.ContainerQueryContainerHighlightConfig,\n    }>,\n  }): void;\n\n  invoke_setShowIsolatedElements(param: {\n    isolatedElementHighlightConfigs: Array<{\n      nodeId: number,\n      isolationModeHighlightConfig: Protocol.Overlay.IsolationModeHighlightConfig,\n    }>,\n  }): void;\n  /* eslint-enable @typescript-eslint/naming-convention */\n}\n\nexport interface Target {\n  overlayAgent(): OverlayAgent;\n}\n\nexport interface OverlayModel {\n  getDOMModel(): DOMModel;\n\n  target(): Target;\n\n  setShowViewportSizeOnResize(value: boolean): void;\n}\n", "// Copyright 2020 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as Common from '../common/common.js';\n\n/**\n * Used to cycle through a list of predetermined #colors for the overlays.\n * This helps users differentiate between overlays when several are shown at the\n * same time.\n */\nexport class OverlayColorGenerator {\n  readonly #colors: Common.Color.Color[];\n  #index: number;\n  constructor() {\n    const format = Common.Color.Format.RGBA;\n    this.#colors = [\n      // F59794\n      new Common.Color.Legacy([0.9607843137254902, 0.592156862745098, 0.5803921568627451, 1], format),\n      // F0BF4C\n      new Common.Color.Legacy([0.9411764705882353, 0.7490196078431373, 0.2980392156862745, 1], format),\n      // D4ED31\n      new Common.Color.Legacy([0.8313725490196079, 0.9294117647058824, 0.19215686274509805, 1], format),\n      // 9EEB47\n      new Common.Color.Legacy([0.6196078431372549, 0.9215686274509803, 0.2784313725490196, 1], format),\n      // 5BD1D7\n      new Common.Color.Legacy([0.3568627450980392, 0.8196078431372549, 0.8431372549019608, 1], format),\n      // BCCEFB\n      new Common.Color.Legacy([0.7372549019607844, 0.807843137254902, 0.984313725490196, 1], format),\n      // C6BEEE\n      new Common.Color.Legacy([0.7764705882352941, 0.7450980392156863, 0.9333333333333333, 1], format),\n      // D094EA\n      new Common.Color.Legacy([0.8156862745098039, 0.5803921568627451, 0.9176470588235294, 1], format),\n      // EB94CF\n      new Common.Color.Legacy([0.9215686274509803, 0.5803921568627451, 0.8117647058823529, 1], format),\n    ];\n    this.#index = 0;\n  }\n\n  /**\n   * Generate the next color in the spectrum\n   */\n  next(): Common.Color.Color {\n    const color = this.#colors[this.#index];\n    this.#index++;\n    if (this.#index >= this.#colors.length) {\n      this.#index = 0;\n    }\n\n    return color;\n  }\n}\n", "// Copyright 2021 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\n/*\n * Copyright (C) 2007, 2008 Apple Inc.  All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions\n * are met:\n *\n * 1.  Redistributions of source code must retain the above copyright\n *     notice, this list of conditions and the following disclaimer.\n * 2.  Redistributions in binary form must reproduce the above copyright\n *     notice, this list of conditions and the following disclaimer in the\n *     documentation and/or other materials provided with the distribution.\n * 3.  Neither the name of Apple Computer, Inc. (\"Apple\") nor the names of\n *     its contributors may be used to endorse or promote products derived\n *     from this software without specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY APPLE AND ITS CONTRIBUTORS \"AS IS\" AND ANY\n * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL APPLE OR ITS CONTRIBUTORS BE LIABLE FOR ANY\n * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF\n * THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\nimport type * as Protocol from '../../generated/protocol.js';\nimport * as TextUtils from '../../models/text_utils/text_utils.js';\nimport * as Common from '../common/common.js';\nimport * as Platform from '../platform/platform.js';\n\nimport type {NetworkRequest} from './NetworkRequest.js';\nimport type {ResourceTreeFrame, ResourceTreeModel} from './ResourceTreeModel.js';\n\nexport class Resource implements TextUtils.ContentProvider.ContentProvider {\n  readonly #resourceTreeModel: ResourceTreeModel;\n  #request: NetworkRequest|null;\n  #url!: Platform.DevToolsPath.UrlString;\n  readonly #documentURL: Platform.DevToolsPath.UrlString;\n  readonly #frameId: Protocol.Page.FrameId|null;\n  readonly #loaderId: Protocol.Network.LoaderId|null;\n  readonly #type: Common.ResourceType.ResourceType;\n  #mimeType: string;\n  #isGenerated: boolean;\n  #lastModified: Date|null;\n  readonly #contentSize: number|null;\n  #parsedURL?: Common.ParsedURL.ParsedURL;\n  #contentData: TextUtils.ContentData.ContentData|null = null;\n  /**\n   * There is always at most one CDP \"getResourceContent\" call in-flight. But once it's done\n   * we'll hit the backend again in case we failed.\n   */\n  #pendingContentData: Promise<TextUtils.ContentData.ContentDataOrError>|null = null;\n\n  constructor(\n      resourceTreeModel: ResourceTreeModel, request: NetworkRequest|null, url: Platform.DevToolsPath.UrlString,\n      documentURL: Platform.DevToolsPath.UrlString, frameId: Protocol.Page.FrameId|null,\n      loaderId: Protocol.Network.LoaderId|null, type: Common.ResourceType.ResourceType, mimeType: string,\n      lastModified: Date|null, contentSize: number|null) {\n    this.#resourceTreeModel = resourceTreeModel;\n    this.#request = request;\n    this.url = url;\n\n    this.#documentURL = documentURL;\n    this.#frameId = frameId;\n    this.#loaderId = loaderId;\n    this.#type = type || Common.ResourceType.resourceTypes.Other;\n    this.#mimeType = mimeType;\n    this.#isGenerated = false;\n\n    this.#lastModified = lastModified && Platform.DateUtilities.isValid(lastModified) ? lastModified : null;\n    this.#contentSize = contentSize;\n  }\n\n  lastModified(): Date|null {\n    if (this.#lastModified || !this.#request) {\n      return this.#lastModified;\n    }\n    const lastModifiedHeader = this.#request.responseLastModified();\n    const date = lastModifiedHeader ? new Date(lastModifiedHeader) : null;\n    this.#lastModified = date && Platform.DateUtilities.isValid(date) ? date : null;\n    return this.#lastModified;\n  }\n\n  contentSize(): number|null {\n    if (typeof this.#contentSize === 'number' || !this.#request) {\n      return this.#contentSize;\n    }\n    return this.#request.resourceSize;\n  }\n\n  get request(): NetworkRequest|null {\n    return this.#request;\n  }\n\n  get url(): Platform.DevToolsPath.UrlString {\n    return this.#url;\n  }\n\n  set url(x: Platform.DevToolsPath.UrlString) {\n    this.#url = x;\n    this.#parsedURL = new Common.ParsedURL.ParsedURL(x);\n  }\n\n  get parsedURL(): Common.ParsedURL.ParsedURL|undefined {\n    return this.#parsedURL;\n  }\n\n  get documentURL(): Platform.DevToolsPath.UrlString {\n    return this.#documentURL;\n  }\n\n  get frameId(): Protocol.Page.FrameId|null {\n    return this.#frameId;\n  }\n\n  get loaderId(): Protocol.Network.LoaderId|null {\n    return this.#loaderId;\n  }\n\n  get displayName(): string {\n    return this.#parsedURL ? this.#parsedURL.displayName : '';\n  }\n\n  resourceType(): Common.ResourceType.ResourceType {\n    return this.#request ? this.#request.resourceType() : this.#type;\n  }\n\n  get mimeType(): string {\n    return this.#request ? this.#request.mimeType : this.#mimeType;\n  }\n\n  get content(): string|null {\n    if (this.#contentData?.isTextContent) {\n      return this.#contentData.text;\n    }\n    return this.#contentData?.base64 ?? null;\n  }\n\n  get isGenerated(): boolean {\n    return this.#isGenerated;\n  }\n\n  set isGenerated(val: boolean) {\n    this.#isGenerated = val;\n  }\n\n  contentURL(): Platform.DevToolsPath.UrlString {\n    return this.#url;\n  }\n\n  contentType(): Common.ResourceType.ResourceType {\n    if (this.resourceType() === Common.ResourceType.resourceTypes.Document &&\n        this.mimeType.indexOf('javascript') !== -1) {\n      return Common.ResourceType.resourceTypes.Script;\n    }\n    return this.resourceType();\n  }\n\n  async requestContentData(): Promise<TextUtils.ContentData.ContentDataOrError> {\n    if (this.#contentData) {\n      return this.#contentData;\n    }\n    if (this.#pendingContentData) {\n      return await this.#pendingContentData;\n    }\n    this.#pendingContentData = this.innerRequestContent().then(contentData => {\n      // If an error happended we don't set `this.#contentData` so future `requestContentData` will\n      // attempt again to hit the backend for this Resource.\n      if (!TextUtils.ContentData.ContentData.isError(contentData)) {\n        this.#contentData = contentData;\n      }\n      this.#pendingContentData = null;\n      return contentData;\n    });\n    return await this.#pendingContentData;\n  }\n\n  canonicalMimeType(): string {\n    return this.contentType().canonicalMimeType() || this.mimeType;\n  }\n\n  async searchInContent(query: string, caseSensitive: boolean, isRegex: boolean):\n      Promise<TextUtils.ContentProvider.SearchMatch[]> {\n    if (!this.frameId) {\n      return [];\n    }\n    if (this.request) {\n      return await this.request.searchInContent(query, caseSensitive, isRegex);\n    }\n    const result = await this.#resourceTreeModel.target().pageAgent().invoke_searchInResource(\n        {frameId: this.frameId, url: this.url, query, caseSensitive, isRegex});\n    return TextUtils.TextUtils.performSearchInSearchMatches(result.result || [], query, caseSensitive, isRegex);\n  }\n\n  async populateImageSource(image: HTMLImageElement): Promise<void> {\n    const contentData = await this.requestContentData();\n    if (TextUtils.ContentData.ContentData.isError(contentData)) {\n      return;\n    }\n    image.src = contentData.asDataUrl() ?? this.#url;\n  }\n\n  private async innerRequestContent(): Promise<TextUtils.ContentData.ContentDataOrError> {\n    if (this.request) {\n      // The `contentData` promise only resolves once the request is done.\n      return await this.request.requestContentData();\n    }\n\n    const response = await this.#resourceTreeModel.target().pageAgent().invoke_getResourceContent(\n        {frameId: this.frameId as Protocol.Page.FrameId, url: this.url});\n    const error = response.getError();\n    if (error) {\n      return {error};\n    }\n    return new TextUtils.ContentData.ContentData(response.content, response.base64Encoded, this.mimeType);\n  }\n\n  frame(): ResourceTreeFrame|null {\n    return this.#frameId ? this.#resourceTreeModel.frameForId(this.#frameId) : null;\n  }\n\n  statusCode(): number {\n    return this.#request ? this.#request.statusCode : 0;\n  }\n}\n", "// Copyright 2016 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport {SDKModel} from './SDKModel.js';\nimport {Capability} from './Target.js';\n\nexport class SecurityOriginManager extends SDKModel<EventTypes> {\n  // if a URL is unreachable, the browser will jump to an error page at\n  // 'chrome-error://chromewebdata/', and |this.#mainSecurityOriginInternal| stores\n  // its origin. In this situation, the original unreachable URL's security\n  // origin will be stored in |this.#unreachableMainSecurityOriginInternal|.\n  #mainSecurityOrigin = '';\n  #unreachableMainSecurityOrigin: string|null = '';\n  #securityOrigins = new Set<string>();\n\n  updateSecurityOrigins(securityOrigins: Set<string>): void {\n    const oldOrigins = this.#securityOrigins;\n    this.#securityOrigins = securityOrigins;\n\n    for (const origin of oldOrigins) {\n      if (!this.#securityOrigins.has(origin)) {\n        this.dispatchEventToListeners(Events.SecurityOriginRemoved, origin);\n      }\n    }\n\n    for (const origin of this.#securityOrigins) {\n      if (!oldOrigins.has(origin)) {\n        this.dispatchEventToListeners(Events.SecurityOriginAdded, origin);\n      }\n    }\n  }\n\n  securityOrigins(): string[] {\n    return [...this.#securityOrigins];\n  }\n\n  mainSecurityOrigin(): string {\n    return this.#mainSecurityOrigin;\n  }\n\n  unreachableMainSecurityOrigin(): string|null {\n    return this.#unreachableMainSecurityOrigin;\n  }\n\n  setMainSecurityOrigin(securityOrigin: string, unreachableSecurityOrigin: string): void {\n    this.#mainSecurityOrigin = securityOrigin;\n    this.#unreachableMainSecurityOrigin = unreachableSecurityOrigin || null;\n    this.dispatchEventToListeners(Events.MainSecurityOriginChanged, {\n      mainSecurityOrigin: this.#mainSecurityOrigin,\n      unreachableMainSecurityOrigin: this.#unreachableMainSecurityOrigin,\n    });\n  }\n}\n\nexport enum Events {\n  /* eslint-disable @typescript-eslint/naming-convention -- Used by web_tests. */\n  SecurityOriginAdded = 'SecurityOriginAdded',\n  SecurityOriginRemoved = 'SecurityOriginRemoved',\n  MainSecurityOriginChanged = 'MainSecurityOriginChanged',\n  /* eslint-enable @typescript-eslint/naming-convention */\n}\n\nexport interface MainSecurityOriginChangedEvent {\n  mainSecurityOrigin: string;\n  unreachableMainSecurityOrigin: string|null;\n}\n\nexport interface EventTypes {\n  [Events.SecurityOriginAdded]: string;\n  [Events.SecurityOriginRemoved]: string;\n  [Events.MainSecurityOriginChanged]: MainSecurityOriginChangedEvent;\n}\n\n// TODO(jarhar): this is the one of the two usages of Capability.None. Do something about it!\nSDKModel.register(SecurityOriginManager, {capabilities: Capability.NONE, autostart: false});\n", "// Copyright 2022 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as Common from '../common/common.js';\nimport type * as Platform from '../platform/platform.js';\n\nimport {SDKModel} from './SDKModel.js';\nimport {Capability, type Target} from './Target.js';\n\nexport class StorageKeyManager extends SDKModel<EventTypes> {\n  #mainStorageKey: string;\n  #storageKeys: Set<string>;\n  constructor(target: Target) {\n    super(target);\n\n    this.#mainStorageKey = '';\n    this.#storageKeys = new Set();\n  }\n\n  updateStorageKeys(storageKeys: Set<string>): void {\n    const oldStorageKeys = this.#storageKeys;\n    this.#storageKeys = storageKeys;\n\n    for (const storageKey of oldStorageKeys) {\n      if (!this.#storageKeys.has(storageKey)) {\n        this.dispatchEventToListeners(Events.STORAGE_KEY_REMOVED, storageKey);\n      }\n    }\n\n    for (const storageKey of this.#storageKeys) {\n      if (!oldStorageKeys.has(storageKey)) {\n        this.dispatchEventToListeners(Events.STORAGE_KEY_ADDED, storageKey);\n      }\n    }\n  }\n\n  storageKeys(): string[] {\n    return [...this.#storageKeys];\n  }\n\n  mainStorageKey(): string {\n    return this.#mainStorageKey;\n  }\n\n  setMainStorageKey(storageKey: string): void {\n    this.#mainStorageKey = storageKey;\n    this.dispatchEventToListeners(Events.MAIN_STORAGE_KEY_CHANGED, {\n      mainStorageKey: this.#mainStorageKey,\n    });\n  }\n}\n\nexport function parseStorageKey(storageKeyString: string): StorageKey {\n  // Based on the canonical implementation of StorageKey::Deserialize in\n  // third_party/blink/common/storage_key/storage_key.cc\n  const components = storageKeyString.split('^');\n  const origin = Common.ParsedURL.ParsedURL.extractOrigin(components[0] as Platform.DevToolsPath.UrlString);\n  const storageKey = {origin, components: new Map<StorageKeyComponent, string>()};\n  for (let i = 1; i < components.length; ++i) {\n    storageKey.components.set(components[i].charAt(0) as StorageKeyComponent, components[i].substring(1));\n  }\n  return storageKey;\n}\n\nexport const enum StorageKeyComponent {\n  TOP_LEVEL_SITE = '0',\n  NONCE_HIGH = '1',\n  NONCE_LOW = '2',\n  ANCESTOR_CHAIN_BIT = '3',\n  TOP_LEVEL_SITE_OPAQUE_NONCE_HIGH = '4',\n  TOP_LEVEL_SITE_OPAQUE_NONCE_LOW = '5',\n  TOP_LEVEL_SITE_OPAQUE_NONCE_PRECURSOR = '6',\n}\n\nexport interface StorageKey {\n  origin: Platform.DevToolsPath.UrlString;\n  components: Map<StorageKeyComponent, string>;\n}\n\nexport const enum Events {\n  STORAGE_KEY_ADDED = 'StorageKeyAdded',\n  STORAGE_KEY_REMOVED = 'StorageKeyRemoved',\n  MAIN_STORAGE_KEY_CHANGED = 'MainStorageKeyChanged',\n}\n\nexport interface MainStorageKeyChangedEvent {\n  mainStorageKey: string;\n}\n\nexport interface EventTypes {\n  [Events.STORAGE_KEY_ADDED]: string;\n  [Events.STORAGE_KEY_REMOVED]: string;\n  [Events.MAIN_STORAGE_KEY_CHANGED]: MainStorageKeyChangedEvent;\n}\n\n// TODO(jarhar): this is the one of the two usages of Capability.None. Do something about it!\nSDKModel.register(StorageKeyManager, {capabilities: Capability.NONE, autostart: false});\n", "// Copyright 2010 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\n// Ideally, we would rely on platform support for parsing a cookie, since\n// this would save us from any potential inconsistency. However, exposing\n// platform cookie parsing logic would require quite a bit of additional\n// plumbing, and at least some platforms lack support for parsing Cookie,\n// which is in a format slightly different from Set-Cookie and is normally\n// only required on the server side.\n\nimport {Attribute, Cookie, Type} from './Cookie.js';\n\nexport class CookieParser {\n  readonly #domain: string|undefined;\n  #cookies: Cookie[];\n  #input!: string|undefined;\n  #originalInputLength: number;\n  #lastCookie?: Cookie|null;\n  #lastCookieLine?: string;\n  #lastCookiePosition?: number;\n  constructor(domain?: string) {\n    if (domain) {\n      // Handle #domain according to\n      // https://tools.ietf.org/html/draft-ietf-httpbis-rfc6265bis-03#section-5.3.3\n      this.#domain = domain.toLowerCase().replace(/^\\./, '');\n    }\n\n    this.#cookies = [];\n\n    this.#originalInputLength = 0;\n  }\n\n  static parseSetCookie(header: string|undefined, domain?: string): Cookie[]|null {\n    return (new CookieParser(domain)).parseSetCookie(header);\n  }\n\n  getCookieAttribute(header: string|undefined): Attribute|null {\n    if (!header) {\n      return null;\n    }\n\n    switch (header.toLowerCase()) {\n      case 'domain':\n        return Attribute.DOMAIN;\n      case 'expires':\n        return Attribute.EXPIRES;\n      case 'max-age':\n        return Attribute.MAX_AGE;\n      case 'httponly':\n        return Attribute.HTTP_ONLY;\n      case 'name':\n        return Attribute.NAME;\n      case 'path':\n        return Attribute.PATH;\n      case 'samesite':\n        return Attribute.SAME_SITE;\n      case 'secure':\n        return Attribute.SECURE;\n      case 'value':\n        return Attribute.VALUE;\n      case 'priority':\n        return Attribute.PRIORITY;\n      case 'sourceport':\n        return Attribute.SOURCE_PORT;\n      case 'sourcescheme':\n        return Attribute.SOURCE_SCHEME;\n      case 'partitioned':\n        return Attribute.PARTITIONED;\n      default:\n        console.error('Failed getting cookie attribute: ' + header);\n        return null;\n    }\n  }\n\n  cookies(): Cookie[] {\n    return this.#cookies;\n  }\n\n  parseSetCookie(setCookieHeader: string|undefined): Cookie[]|null {\n    if (!this.initialize(setCookieHeader)) {\n      return null;\n    }\n    for (let kv = this.extractKeyValue(); kv; kv = this.extractKeyValue()) {\n      if (this.#lastCookie) {\n        this.#lastCookie.addAttribute(this.getCookieAttribute(kv.key), kv.value);\n      } else {\n        this.addCookie(kv, Type.RESPONSE);\n      }\n      if (this.advanceAndCheckCookieDelimiter()) {\n        this.flushCookie();\n      }\n    }\n    this.flushCookie();\n    return this.#cookies;\n  }\n\n  private initialize(headerValue: string|undefined): boolean {\n    this.#input = headerValue;\n\n    if (typeof headerValue !== 'string') {\n      return false;\n    }\n\n    this.#cookies = [];\n    this.#lastCookie = null;\n    this.#lastCookieLine = '';\n    this.#originalInputLength = (this.#input as string).length;\n    return true;\n  }\n\n  private flushCookie(): void {\n    if (this.#lastCookie) {\n      // if we have a last cookie we know that these valeus all exist, hence the typecasts\n      this.#lastCookie.setSize(\n          this.#originalInputLength - (this.#input as string).length - (this.#lastCookiePosition as number));\n      this.#lastCookie.setCookieLine((this.#lastCookieLine as string).replace('\\n', ''));\n    }\n    this.#lastCookie = null;\n    this.#lastCookieLine = '';\n  }\n\n  private extractKeyValue(): KeyValue|null {\n    if (!this.#input || !this.#input.length) {\n      return null;\n    }\n    // Note: RFCs offer an option for quoted values that may contain commas and semicolons.\n    // Many browsers/platforms do not support this, however (see http://webkit.org/b/16699\n    // and http://crbug.com/12361). The logic below matches latest versions of IE, Firefox,\n    // Chrome and Safari on some old platforms. The latest version of Safari supports quoted\n    // cookie values, though.\n    const keyValueMatch = /^[ \\t]*([^=;\\n]+)[ \\t]*(?:=[ \\t]*([^;\\n]*))?/.exec(this.#input);\n    if (!keyValueMatch) {\n      console.error('Failed parsing cookie header before: ' + this.#input);\n      return null;\n    }\n\n    const result = new KeyValue(\n        keyValueMatch[1]?.trim(), keyValueMatch[2]?.trim(), (this.#originalInputLength) - this.#input.length);\n    this.#lastCookieLine += keyValueMatch[0];\n    this.#input = this.#input.slice(keyValueMatch[0].length);\n    return result;\n  }\n\n  private advanceAndCheckCookieDelimiter(): boolean {\n    if (!this.#input) {\n      return false;\n    }\n\n    const match = /^\\s*[\\n;]\\s*/.exec(this.#input);\n    if (!match) {\n      return false;\n    }\n    this.#lastCookieLine += match[0];\n    this.#input = this.#input.slice(match[0].length);\n    return match[0].match('\\n') !== null;\n  }\n\n  private addCookie(keyValue: KeyValue, type: Type): void {\n    if (this.#lastCookie) {\n      this.#lastCookie.setSize(keyValue.position - (this.#lastCookiePosition as number));\n    }\n\n    // Mozilla bug 169091: Mozilla, IE and Chrome treat single token (w/o \"=\") as\n    // specifying a value for a cookie with empty name.\n    this.#lastCookie = typeof keyValue.value === 'string' ? new Cookie(keyValue.key, keyValue.value, type) :\n                                                            new Cookie('', keyValue.key, type);\n    if (this.#domain) {\n      this.#lastCookie.addAttribute(Attribute.DOMAIN, this.#domain);\n    }\n    this.#lastCookiePosition = keyValue.position;\n    this.#cookies.push(this.#lastCookie);\n  }\n}\n\nclass KeyValue {\n  key: string;\n  value: string|undefined;\n  position: number;\n  constructor(key: string, value: string|undefined, position: number) {\n    this.key = key;\n    this.value = value;\n    this.position = position;\n  }\n}\n", "// Copyright 2023 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as i18n from '../i18n/i18n.js';\n\n/**\n * Reason phrase sources\n * See https://www.rfc-editor.org/rfc/rfc9110.html#name-status-codes\n **/\nexport function getStatusText(statusCode: number): string {\n  const statusTextLookup: Record<number, string> = {\n    100: 'Continue',\n    101: 'Switching Protocols',\n    102: 'Processing',\n    103: 'Early Hints',\n    200: 'OK',\n    201: 'Created',\n    202: 'Accepted',\n    203: 'Non-Authoritative Information',\n    204: 'No Content',\n    205: 'Reset Content',\n    206: 'Partial Content',\n    207: 'Multi-Status',\n    208: 'Already Reported',\n    226: 'IM Used',\n    300: 'Multiple Choices',\n    301: 'Moved Permanently',\n    302: 'Found',\n    303: 'See Other',\n    304: 'Not Modified',\n    305: 'Use Proxy',\n    307: 'Temporary Redirect',\n    308: 'Permanent Redirect',\n    400: 'Bad Request',\n    401: 'Unauthorized',\n    402: 'Payment Required',\n    403: 'Forbidden',\n    404: 'Not Found',\n    405: 'Method Not Allowed',\n    406: 'Not Acceptable',\n    407: 'Proxy Authentication Required',\n    408: 'Request Timeout',\n    409: 'Conflict',\n    410: 'Gone',\n    411: 'Length Required',\n    412: 'Precondition Failed',\n    413: 'Content Too Large',\n    414: 'URI Too Long',\n    415: 'Unsupported Media Type',\n    416: 'Range Not Satisfiable',\n    417: 'Expectation Failed',\n    418: 'I\\'m a teapot',\n    421: 'Misdirected Request',\n    422: 'Unprocessable Content',\n    423: 'Locked',\n    424: 'Failed Dependency',\n    425: 'Too Early',\n    426: 'Upgrade Required',\n    428: 'Precondition Required',\n    429: 'Too Many Requests',\n    431: 'Request Header Fields Too Large',\n    451: 'Unavailable For Legal Reasons',\n    500: 'Internal Server Error',\n    501: 'Not Implemented',\n    502: 'Bad Gateway',\n    503: 'Service Unavailable',\n    504: 'Gateway Timeout',\n    505: 'HTTP Version Not Supported',\n    506: 'Variant Also Negotiates',\n    507: 'Insufficient Storage',\n    508: 'Loop Detected',\n    510: 'Not Extended',\n    511: 'Network Authentication Required',\n  };\n  return i18n.i18n.lockedString(statusTextLookup[statusCode] ?? '');\n}\n", "// Copyright 2024 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as TextUtils from '../../models/text_utils/text_utils.js';\n\nimport {Events, type EventSourceMessage, type NetworkRequest} from './NetworkRequest.js';\nimport {ServerSentEventsParser} from './ServerSentEventsProtocol.js';\n\n/**\n * Server sent events only arrive via CDP (Explicit Network.eventSourceMessageReceived) when\n * the page uses \"EventSource\" in the code.\n *\n * If the page manually uses 'fetch' or XHR we have to do the protocol parsing\n * ourselves.\n *\n * `ServerSentEvents` is a small helper class that manages this distinction for a specific\n * request, stores the event data and sends out \"EventSourceMessageAdded\" events for a request.\n */\nexport class ServerSentEvents {\n  readonly #request: NetworkRequest;\n  readonly #parser?: ServerSentEventsParser;\n\n  // In the case where we parse the events ourselves we use the time of the last 'dataReceived'\n  // event for all the events that come out of the corresponding chunk of data.\n  #lastDataReceivedTime = 0;\n\n  readonly #eventSourceMessages: EventSourceMessage[] = [];\n\n  constructor(request: NetworkRequest, parseFromStreamedData: boolean) {\n    this.#request = request;\n\n    // Only setup parsing if we don't get the events over CDP directly.\n    if (parseFromStreamedData) {\n      this.#lastDataReceivedTime = request.pseudoWallTime(request.startTime);\n      this.#parser = new ServerSentEventsParser(this.#onParserEvent.bind(this), request.charset() ?? undefined);\n\n      // Get the streaming content and add the already received bytes if someone else started\n      // the streaming earlier.\n      void this.#request.requestStreamingContent().then(streamingContentData => {\n        if (!TextUtils.StreamingContentData.isError(streamingContentData)) {\n          void this.#parser?.addBase64Chunk(streamingContentData.content().base64);\n          streamingContentData.addEventListener(\n              TextUtils.StreamingContentData.Events.CHUNK_ADDED, ({data: {chunk}}) => {\n                this.#lastDataReceivedTime = request.pseudoWallTime(request.endTime);\n                void this.#parser?.addBase64Chunk(chunk);\n              });\n        }\n      });\n    }\n  }\n\n  get eventSourceMessages(): readonly EventSourceMessage[] {\n    return this.#eventSourceMessages;\n  }\n\n  /** Forwarded Network.eventSourceMessage received */\n  onProtocolEventSourceMessageReceived(eventName: string, data: string, eventId: string, time: number): void {\n    this.#recordMessageAndDispatchEvent({\n      eventName,\n      eventId,\n      data,\n      time,\n    });\n  }\n\n  #onParserEvent(eventName: string, data: string, eventId: string): void {\n    this.#recordMessageAndDispatchEvent({\n      eventName,\n      eventId,\n      data,\n      time: this.#lastDataReceivedTime,\n    });\n  }\n\n  #recordMessageAndDispatchEvent(message: EventSourceMessage): void {\n    this.#eventSourceMessages.push(message);\n    this.#request.dispatchEventToListeners(Events.EVENT_SOURCE_MESSAGE_ADDED, message);\n  }\n}\n", "// Copyright 2023 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport type * as Protocol from '../../generated/protocol.js';\n\n/**\n * Implements Server-Sent-Events protocl parsing as described by\n * https://html.spec.whatwg.org/multipage/server-sent-events.html#parsing-an-event-stream\n *\n * Webpages can use SSE over fetch/XHR and not go through EventSource. DevTools\n * only receives the raw binary data in this case, which means we have to decode\n * and parse the event stream ourselves here.\n *\n * Implementation mostly ported over from blink\n * third_party/blink/renderer/modules/eventsource/event_source_parser.cc.\n */\nexport class ServerSentEventsParser {\n  #onEventCallback: (eventType: string, data: string, eventId: string) => void;\n  #decoder: Base64TextDecoder;\n\n  // Parser state.\n  #isRecognizingCrLf = false;\n  #line = '';\n  #id = '';\n  #data = '';\n  #eventType = '';\n\n  constructor(callback: (eventType: string, data: string, eventId: string) => void, encodingLabel?: string) {\n    this.#onEventCallback = callback;\n    this.#decoder = new Base64TextDecoder(this.#onTextChunk.bind(this), encodingLabel);\n  }\n\n  async addBase64Chunk(raw: Protocol.binary): Promise<void> {\n    await this.#decoder.addBase64Chunk(raw);\n  }\n\n  addTextChunk(chunk: string): void {\n    this.#onTextChunk(chunk);\n  }\n\n  #onTextChunk(chunk: string): void {\n    // A line consists of \"this.#line\" plus a slice of \"chunk[start:<next new cr/lf>]\".\n    let start = 0;\n    for (let i = 0; i < chunk.length; ++i) {\n      if (this.#isRecognizingCrLf && chunk[i] === '\\n') {\n        // We found the latter part of \"\\r\\n\".\n        this.#isRecognizingCrLf = false;\n        ++start;\n        continue;\n      }\n      this.#isRecognizingCrLf = false;\n      if (chunk[i] === '\\r' || chunk[i] === '\\n') {\n        this.#line += chunk.substring(start, i);\n        this.#parseLine();\n        this.#line = '';\n        start = i + 1;\n        this.#isRecognizingCrLf = chunk[i] === '\\r';\n      }\n    }\n    this.#line += chunk.substring(start);\n  }\n\n  #parseLine(): void {\n    if (this.#line.length === 0) {\n      // We dispatch an event when seeing an empty line.\n      if (this.#data.length > 0) {\n        const data = this.#data.slice(0, -1);  // Remove the last newline.\n        this.#onEventCallback(this.#eventType || 'message', data, this.#id);\n        this.#data = '';\n      }\n      this.#eventType = '';\n      return;\n    }\n\n    let fieldNameEnd = this.#line.indexOf(':');\n    let fieldValueStart;\n    if (fieldNameEnd < 0) {\n      fieldNameEnd = this.#line.length;\n      fieldValueStart = fieldNameEnd;\n    } else {\n      fieldValueStart = fieldNameEnd + 1;\n      if (fieldValueStart < this.#line.length && this.#line[fieldValueStart] === ' ') {\n        // Skip a single space preceeding the value.\n        ++fieldValueStart;\n      }\n    }\n    const fieldName = this.#line.substring(0, fieldNameEnd);\n    if (fieldName === 'event') {\n      this.#eventType = this.#line.substring(fieldValueStart);\n      return;\n    }\n    if (fieldName === 'data') {\n      this.#data += this.#line.substring(fieldValueStart);\n      this.#data += '\\n';\n    }\n    if (fieldName === 'id') {\n      // We should do a check here whether the id field contains \"\\0\" and ignore it.\n      this.#id = this.#line.substring(fieldValueStart);\n    }\n    // Ignore all other fields. Also ignore \"retry\", we won't forward that to the backend.\n  }\n}\n\n/**\n * Small helper class that can decode a stream of base64 encoded bytes. Specify the\n * text encoding for the raw bytes via constructor. Default is utf-8.\n */\nclass Base64TextDecoder {\n  #decoder: TextDecoderStream;\n  #writer: WritableStreamDefaultWriter;\n\n  constructor(onTextChunk: (chunk: string) => void, encodingLabel?: string) {\n    this.#decoder = new TextDecoderStream(encodingLabel);\n    this.#writer = this.#decoder.writable.getWriter();\n    void this.#decoder.readable.pipeTo(new WritableStream({write: onTextChunk}));\n  }\n\n  async addBase64Chunk(chunk: Protocol.binary): Promise<void> {\n    const binString = window.atob(chunk);\n    const bytes = Uint8Array.from(binString, m => m.codePointAt(0) as number);\n\n    await this.#writer.ready;\n    await this.#writer.write(bytes);\n  }\n}\n", "// Copyright 2016 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as Common from '../common/common.js';\nimport * as i18n from '../i18n/i18n.js';\n\nimport type {NameValue} from './NetworkRequest.js';\n\nconst UIStrings = {\n  /**\n   * @description Text in Server Timing\n   * @example {sql-lookup} PH1\n   */\n  deprecatedSyntaxFoundPleaseUse:\n      'Deprecated syntax found for metric \"{PH1}\". Please use: <name>;dur=<duration>;desc=<description>',\n  /**\n   * @description Text in Server Timing\n   * @example {https} PH1\n   */\n  duplicateParameterSIgnored: 'Duplicate parameter \"{PH1}\" ignored.',\n  /**\n   * @description Text in Server Timing\n   * @example {https} PH1\n   */\n  noValueFoundForParameterS: 'No value found for parameter \"{PH1}\".',\n  /**\n   * @description Text in Server Timing\n   * @example {https} PH1\n   */\n  unrecognizedParameterS: 'Unrecognized parameter \"{PH1}\".',\n  /**\n   * @description Text in Server Timing\n   */\n  extraneousTrailingCharacters: 'Extraneous trailing characters.',\n  /**\n   * @description Text in Server Timing\n   * @example {https} PH1\n   * @example {2.0} PH2\n   */\n  unableToParseSValueS: 'Unable to parse \"{PH1}\" value \"{PH2}\".',\n} as const;\nconst str_ = i18n.i18n.registerUIStrings('core/sdk/ServerTiming.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\n\n/**\n * Represents an authored single server timing metric. https://w3c.github.io/server-timing/#the-server-timing-header-field\n */\nexport interface ServerTimingMetric {\n  /** The name of the metric, a single token */\n  name: string;\n  /** A human-readable description of the metric. */\n  desc?: string;\n  /** The duration; milliseconds is recommended. https://w3c.github.io/server-timing/#duration-attribute. */\n  dur?: number;\n}\n\nexport const cloudflarePrefix = '(cf) ';\nexport const cloudinaryPrefix = '(cld) ';\n\nexport class ServerTiming {\n  metric: string;\n  value: number|null;\n  description: string|null;\n\n  constructor(metric: string, value: number|null, description: string|null) {\n    this.metric = metric;\n    this.value = value;\n    this.description = description;\n  }\n\n  static parseHeaders(headers: NameValue[]): ServerTiming[]|null {\n    const rawServerTimingHeaders = headers.filter(item => item.name.toLowerCase() === 'server-timing');\n    if (!rawServerTimingHeaders.length) {\n      return null;\n    }\n\n    const serverTimings = rawServerTimingHeaders.reduce<ServerTiming[]>((timings, header) => {\n      const timing = this.createFromHeaderValue(header.value);\n      timings.push(...timing.map(function(entry) {\n        return new ServerTiming(entry.name, entry.dur ?? null, entry.desc ?? '');\n      }));\n      return timings;\n    }, []);\n    return serverTimings;\n  }\n\n  static createFromHeaderValue(valueString: string): ServerTimingMetric[] {\n    function trimLeadingWhiteSpace(): void {\n      valueString = valueString.replace(/^\\s*/, '');\n    }\n    function consumeDelimiter(char: string): boolean {\n      console.assert(char.length === 1);\n      trimLeadingWhiteSpace();\n      if (valueString.charAt(0) !== char) {\n        return false;\n      }\n\n      valueString = valueString.substring(1);\n      return true;\n    }\n    function consumeToken(): string|null {\n      // https://tools.ietf.org/html/rfc7230#appendix-B\n      const result = /^(?:\\s*)([\\w!#$%&'*+\\-.^`|~]+)(?:\\s*)(.*)/.exec(valueString);\n      if (!result) {\n        return null;\n      }\n\n      valueString = result[2];\n      return result[1];\n    }\n    function consumeTokenOrQuotedString(): string|null {\n      trimLeadingWhiteSpace();\n      if (valueString.charAt(0) === '\"') {\n        return consumeQuotedString();\n      }\n\n      return consumeToken();\n    }\n    function consumeQuotedString(): string|null {\n      console.assert(valueString.charAt(0) === '\"');\n      valueString = valueString.substring(1);  // remove leading DQUOTE\n\n      let value = '';\n      while (valueString.length) {\n        // split into two parts:\n        //  -everything before the first \" or \\\n        //  -everything else\n        const result = /^([^\"\\\\]*)(.*)/.exec(valueString);\n        if (!result) {\n          return null;  // not a valid quoted-string\n        }\n        value += result[1];\n        if (result[2].charAt(0) === '\"') {\n          // we have found our closing \"\n          valueString = result[2].substring(1);  // strip off everything after the closing \"\n          return value;                          // we are done here\n        }\n\n        console.assert(result[2].charAt(0) === '\\\\');\n        // special rules for \\ found in quoted-string (https://tools.ietf.org/html/rfc7230#section-3.2.6)\n        value += result[2].charAt(1);          // grab the character AFTER the \\ (if there was one)\n        valueString = result[2].substring(2);  // strip off \\ and next character\n      }\n\n      return null;  // not a valid quoted-string\n    }\n    function consumeExtraneous(): void {\n      const result = /([,;].*)/.exec(valueString);\n      if (result) {\n        valueString = result[1];\n      }\n    }\n\n    const result: ServerTimingMetric[] = [];\n    let name;\n    while ((name = consumeToken()) !== null) {\n      const entry: ServerTimingMetric = {name};\n\n      if (valueString.charAt(0) === '=') {\n        this.showWarning(i18nString(UIStrings.deprecatedSyntaxFoundPleaseUse, {PH1: name}));\n      }\n\n      while (consumeDelimiter(';')) {\n        let paramName;\n        if ((paramName = consumeToken()) === null) {\n          continue;\n        }\n\n        paramName = paramName.toLowerCase();\n        const parseParameter = this.getParserForParameter(paramName);\n        let paramValue: (string|null)|null = null;\n        if (consumeDelimiter('=')) {\n          // always parse the value, even if we don't recognize the parameter #name\n          paramValue = consumeTokenOrQuotedString();\n          consumeExtraneous();\n        }\n\n        if (parseParameter) {\n          // paramName is valid\n          if (entry.hasOwnProperty(paramName)) {\n            this.showWarning(i18nString(UIStrings.duplicateParameterSIgnored, {PH1: paramName}));\n            continue;\n          }\n\n          if (paramValue === null) {\n            this.showWarning(i18nString(UIStrings.noValueFoundForParameterS, {PH1: paramName}));\n          }\n\n          parseParameter.call(this, entry, paramValue);\n        } else {\n          // paramName is not valid\n          // TODO(paulirish): consider showing other included params, like `start`: https://github.com/w3c/server-timing/issues/43\n          this.showWarning(i18nString(UIStrings.unrecognizedParameterS, {PH1: paramName}));\n        }\n      }\n\n      result.push(entry);\n\n      // Special parsing for cloudflare's bespoke format. https://blog.cloudflare.com/new-standards/#measuring-impact\n      // We extract the individual items of the cfL4 server-timing for clear presentation\n      if (entry.name === 'cfL4' && entry.desc) {\n        new URLSearchParams(entry.desc).entries().forEach(([key, val]) => {\n          result.push({name: `${cloudflarePrefix}${key}`, desc: val});\n        });\n      }\n\n      // Special parsing for cloudinary's bespoke format. https://cloudinary.com/blog/inside_the_black_box_with_server_timing#what_details_are_you_sharing_\n      // The format has changed since this blog post\n      if (entry.name === 'content-info' && entry.desc) {\n        new URLSearchParams(entry.desc.replace(/,/g, '&')).entries().forEach(([key, val]) => {\n          result.push({name: `${cloudinaryPrefix}${key}`, desc: val});\n        });\n      }\n\n      if (!consumeDelimiter(',')) {\n        break;\n      }\n    }\n\n    if (valueString.length) {\n      this.showWarning(i18nString(UIStrings.extraneousTrailingCharacters));\n    }\n    return result;\n  }\n\n  static getParserForParameter(paramName: string): ((arg0: ServerTimingMetric, arg1: string|null) => void)|null {\n    switch (paramName) {\n      case 'dur': {\n        function durParser(entry: ServerTimingMetric, paramValue: string|null): void {\n          entry.dur = 0;\n          if (paramValue !== null) {\n            const duration = parseFloat(paramValue);\n            if (isNaN(duration)) {\n              ServerTiming.showWarning(i18nString(UIStrings.unableToParseSValueS, {PH1: paramName, PH2: paramValue}));\n              return;\n            }\n            entry.dur = duration;\n          }\n        }\n        return durParser;\n      }\n\n      case 'desc': {\n        function descParser(entry: ServerTimingMetric, paramValue: string|null): void {\n          entry.desc = paramValue || '';\n        }\n        return descParser;\n      }\n\n      default: {\n        return null;\n      }\n    }\n  }\n\n  static showWarning(msg: string): void {\n    Common.Console.Console.instance().warn(`ServerTiming: ${msg}`);\n  }\n}\n", "// Copyright 2014 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport type * as ProtocolProxyApi from '../../generated/protocol-proxy-api.js';\nimport type * as Protocol from '../../generated/protocol.js';\n\nimport {DeferredDOMNode, type DOMNode} from './DOMModel.js';\nimport {SDKModel} from './SDKModel.js';\nimport {Capability, type Target} from './Target.js';\n\nexport const enum CoreAxPropertyName {\n  NAME = 'name',\n  DESCRIPTION = 'description',\n  VALUE = 'value',\n  ROLE = 'role',\n}\n\nexport interface CoreOrProtocolAxProperty {\n  name: CoreAxPropertyName|Protocol.Accessibility.AXPropertyName;\n  value: Protocol.Accessibility.AXValue;\n}\n\nexport class AccessibilityNode {\n  readonly #accessibilityModel: AccessibilityModel;\n  readonly #id: Protocol.Accessibility.AXNodeId;\n  readonly #backendDOMNodeId: Protocol.DOM.BackendNodeId|null;\n  readonly #deferredDOMNode: DeferredDOMNode|null;\n  readonly #ignored: boolean;\n  readonly #ignoredReasons: Protocol.Accessibility.AXProperty[]|undefined;\n  readonly #role: Protocol.Accessibility.AXValue|null;\n  readonly #name: Protocol.Accessibility.AXValue|null;\n  readonly #description: Protocol.Accessibility.AXValue|null;\n  readonly #value: Protocol.Accessibility.AXValue|null;\n  readonly #properties: Protocol.Accessibility.AXProperty[]|null;\n  readonly #parentId: Protocol.Accessibility.AXNodeId|null;\n  readonly #frameId: Protocol.Page.FrameId|null;\n  readonly #childIds: Protocol.Accessibility.AXNodeId[]|null;\n\n  constructor(accessibilityModel: AccessibilityModel, payload: Protocol.Accessibility.AXNode) {\n    this.#accessibilityModel = accessibilityModel;\n\n    this.#id = payload.nodeId;\n    accessibilityModel.setAXNodeForAXId(this.#id, this);\n    if (payload.backendDOMNodeId) {\n      accessibilityModel.setAXNodeForBackendDOMNodeId(payload.backendDOMNodeId, this);\n      this.#backendDOMNodeId = payload.backendDOMNodeId;\n      this.#deferredDOMNode = new DeferredDOMNode(accessibilityModel.target(), payload.backendDOMNodeId);\n    } else {\n      this.#backendDOMNodeId = null;\n      this.#deferredDOMNode = null;\n    }\n    this.#ignored = payload.ignored;\n    if (this.#ignored && 'ignoredReasons' in payload) {\n      this.#ignoredReasons = payload.ignoredReasons;\n    }\n\n    this.#role = payload.role || null;\n    this.#name = payload.name || null;\n    this.#description = payload.description || null;\n    this.#value = payload.value || null;\n    this.#properties = payload.properties || null;\n    this.#childIds = [...new Set(payload.childIds)];\n    this.#parentId = payload.parentId || null;\n    if (payload.frameId && !payload.parentId) {\n      this.#frameId = payload.frameId;\n      accessibilityModel.setRootAXNodeForFrameId(payload.frameId, this);\n    } else {\n      this.#frameId = null;\n    }\n  }\n\n  id(): Protocol.Accessibility.AXNodeId {\n    return this.#id;\n  }\n\n  accessibilityModel(): AccessibilityModel {\n    return this.#accessibilityModel;\n  }\n\n  ignored(): boolean {\n    return this.#ignored;\n  }\n\n  ignoredReasons(): Protocol.Accessibility.AXProperty[]|null {\n    return this.#ignoredReasons || null;\n  }\n\n  role(): Protocol.Accessibility.AXValue|null {\n    return this.#role || null;\n  }\n\n  coreProperties(): CoreOrProtocolAxProperty[] {\n    const properties: CoreOrProtocolAxProperty[] = [];\n\n    if (this.#name) {\n      properties.push({name: CoreAxPropertyName.NAME, value: this.#name});\n    }\n    if (this.#description) {\n      properties.push({name: CoreAxPropertyName.DESCRIPTION, value: this.#description});\n    }\n    if (this.#value) {\n      properties.push({name: CoreAxPropertyName.VALUE, value: this.#value});\n    }\n\n    return properties;\n  }\n\n  name(): Protocol.Accessibility.AXValue|null {\n    return this.#name || null;\n  }\n\n  description(): Protocol.Accessibility.AXValue|null {\n    return this.#description || null;\n  }\n\n  value(): Protocol.Accessibility.AXValue|null {\n    return this.#value || null;\n  }\n\n  properties(): Protocol.Accessibility.AXProperty[]|null {\n    return this.#properties || null;\n  }\n\n  parentNode(): AccessibilityNode|null {\n    if (this.#parentId) {\n      return this.#accessibilityModel.axNodeForId(this.#parentId);\n    }\n    return null;\n  }\n\n  isDOMNode(): boolean {\n    return Boolean(this.#backendDOMNodeId);\n  }\n\n  backendDOMNodeId(): Protocol.DOM.BackendNodeId|null {\n    return this.#backendDOMNodeId;\n  }\n\n  deferredDOMNode(): DeferredDOMNode|null {\n    return this.#deferredDOMNode;\n  }\n\n  highlightDOMNode(): void {\n    const deferredNode = this.deferredDOMNode();\n    if (!deferredNode) {\n      return;\n    }\n    // Highlight node in page.\n    deferredNode.highlight();\n  }\n\n  children(): AccessibilityNode[] {\n    if (!this.#childIds) {\n      return [];\n    }\n\n    const children = [];\n    for (const childId of this.#childIds) {\n      const child = this.#accessibilityModel.axNodeForId(childId);\n      if (child) {\n        children.push(child);\n      }\n    }\n\n    return children;\n  }\n\n  numChildren(): number {\n    if (!this.#childIds) {\n      return 0;\n    }\n    return this.#childIds.length;\n  }\n\n  hasOnlyUnloadedChildren(): boolean {\n    if (!this.#childIds || !this.#childIds.length) {\n      return false;\n    }\n    return this.#childIds.every(id => this.#accessibilityModel.axNodeForId(id) === null);\n  }\n\n  hasUnloadedChildren(): boolean {\n    if (!this.#childIds || !this.#childIds.length) {\n      return false;\n    }\n    return this.#childIds.some(id => this.#accessibilityModel.axNodeForId(id) === null);\n  }\n  // Only the root node gets a frameId, so nodes have to walk up the tree to find their frameId.\n  getFrameId(): Protocol.Page.FrameId|null {\n    return this.#frameId || this.parentNode()?.getFrameId() || null;\n  }\n}\n\nexport const enum Events {\n  TREE_UPDATED = 'TreeUpdated',\n}\n\nexport interface EventTypes {\n  [Events.TREE_UPDATED]: {root?: AccessibilityNode};\n}\n\nexport class AccessibilityModel extends SDKModel<EventTypes> implements ProtocolProxyApi.AccessibilityDispatcher {\n  agent: ProtocolProxyApi.AccessibilityApi;\n  #axIdToAXNode = new Map<string, AccessibilityNode>();\n  #backendDOMNodeIdToAXNode = new Map<Protocol.DOM.BackendNodeId, AccessibilityNode>();\n  #frameIdToAXNode = new Map<Protocol.Page.FrameId, AccessibilityNode>();\n  #pendingChildRequests = new Map<string, Promise<Protocol.Accessibility.GetChildAXNodesResponse>>();\n  #root: AccessibilityNode|null = null;\n\n  constructor(target: Target) {\n    super(target);\n    target.registerAccessibilityDispatcher(this);\n    this.agent = target.accessibilityAgent();\n    void this.resumeModel();\n  }\n\n  clear(): void {\n    this.#root = null;\n    this.#axIdToAXNode.clear();\n    this.#backendDOMNodeIdToAXNode.clear();\n    this.#frameIdToAXNode.clear();\n  }\n\n  override async resumeModel(): Promise<void> {\n    await this.agent.invoke_enable();\n  }\n\n  override async suspendModel(): Promise<void> {\n    await this.agent.invoke_disable();\n  }\n\n  async requestPartialAXTree(node: DOMNode): Promise<void> {\n    const {nodes} = await this.agent.invoke_getPartialAXTree({nodeId: node.id, fetchRelatives: true});\n    if (!nodes) {\n      return;\n    }\n    const axNodes = [];\n    for (const payload of nodes) {\n      axNodes.push(new AccessibilityNode(this, payload));\n    }\n  }\n\n  loadComplete({root}: Protocol.Accessibility.LoadCompleteEvent): void {\n    this.clear();\n    this.#root = new AccessibilityNode(this, root);\n    this.dispatchEventToListeners(Events.TREE_UPDATED, {root: this.#root});\n  }\n\n  nodesUpdated({nodes}: Protocol.Accessibility.NodesUpdatedEvent): void {\n    this.createNodesFromPayload(nodes);\n    this.dispatchEventToListeners(Events.TREE_UPDATED, {});\n    return;\n  }\n\n  private createNodesFromPayload(payloadNodes: Protocol.Accessibility.AXNode[]): AccessibilityNode[] {\n    const accessibilityNodes = payloadNodes.map(node => {\n      const sdkNode = new AccessibilityNode(this, node);\n      return sdkNode;\n    });\n\n    return accessibilityNodes;\n  }\n\n  async requestRootNode(frameId?: Protocol.Page.FrameId): Promise<AccessibilityNode|undefined> {\n    if (frameId && this.#frameIdToAXNode.has(frameId)) {\n      return this.#frameIdToAXNode.get(frameId);\n    }\n    if (!frameId && this.#root) {\n      return this.#root;\n    }\n    const {node} = await this.agent.invoke_getRootAXNode({frameId});\n    if (!node) {\n      return;\n    }\n    return this.createNodesFromPayload([node])[0];\n  }\n\n  async requestAXChildren(nodeId: Protocol.Accessibility.AXNodeId, frameId?: Protocol.Page.FrameId):\n      Promise<AccessibilityNode[]> {\n    const parent = this.#axIdToAXNode.get(nodeId);\n    if (!parent) {\n      throw new Error('Cannot request children before parent');\n    }\n    if (!parent.hasUnloadedChildren()) {\n      return parent.children();\n    }\n\n    const request = this.#pendingChildRequests.get(nodeId);\n    if (request) {\n      await request;\n    } else {\n      const request = this.agent.invoke_getChildAXNodes({id: nodeId, frameId});\n      this.#pendingChildRequests.set(nodeId, request);\n      const result = await request;\n      if (!result.getError()) {\n        this.createNodesFromPayload(result.nodes);\n        this.#pendingChildRequests.delete(nodeId);\n      }\n    }\n    return parent.children();\n  }\n\n  async requestAndLoadSubTreeToNode(node: DOMNode): Promise<AccessibilityNode[]|null> {\n    // Node may have already been loaded, so don't bother requesting it again.\n    const result = [];\n    let ancestor = this.axNodeForDOMNode(node);\n    while (ancestor) {\n      result.push(ancestor);\n      const parent = ancestor.parentNode();\n      if (!parent) {\n        return result;\n      }\n      ancestor = parent;\n    }\n    const {nodes} = await this.agent.invoke_getAXNodeAndAncestors({backendNodeId: node.backendNodeId()});\n    if (!nodes) {\n      return null;\n    }\n    const ancestors = this.createNodesFromPayload(nodes);\n\n    return ancestors;\n  }\n\n  axNodeForId(axId: Protocol.Accessibility.AXNodeId): AccessibilityNode|null {\n    return this.#axIdToAXNode.get(axId) || null;\n  }\n\n  setRootAXNodeForFrameId(frameId: Protocol.Page.FrameId, axNode: AccessibilityNode): void {\n    this.#frameIdToAXNode.set(frameId, axNode);\n  }\n\n  setAXNodeForAXId(axId: string, axNode: AccessibilityNode): void {\n    this.#axIdToAXNode.set(axId, axNode);\n  }\n\n  axNodeForDOMNode(domNode: DOMNode|null): AccessibilityNode|null {\n    if (!domNode) {\n      return null;\n    }\n    return this.#backendDOMNodeIdToAXNode.get(domNode.backendNodeId()) ?? null;\n  }\n\n  setAXNodeForBackendDOMNodeId(backendDOMNodeId: Protocol.DOM.BackendNodeId, axNode: AccessibilityNode): void {\n    this.#backendDOMNodeIdToAXNode.set(backendDOMNodeId, axNode);\n  }\n\n  getAgent(): ProtocolProxyApi.AccessibilityApi {\n    return this.agent;\n  }\n}\n\nSDKModel.register(AccessibilityModel, {capabilities: Capability.DOM, autostart: false});\n", "// Copyright 2014 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as Common from '../../core/common/common.js';\nimport type * as ProtocolProxyApi from '../../generated/protocol-proxy-api.js';\nimport * as Protocol from '../../generated/protocol.js';\n\nimport {DeferredDOMNode, type DOMNode} from './DOMModel.js';\nimport {RemoteObject} from './RemoteObject.js';\nimport {Events as ResourceTreeModelEvents, ResourceTreeModel} from './ResourceTreeModel.js';\nimport {Events as RuntimeModelEvents, type EventTypes as RuntimeModelEventTypes, RuntimeModel} from './RuntimeModel.js';\nimport {SDKModel} from './SDKModel.js';\nimport {Capability, type Target} from './Target.js';\n\nconst DEVTOOLS_ANIMATIONS_WORLD_NAME = 'devtools_animations';\nconst REPORT_SCROLL_POSITION_BINDING_NAME = '__devtools_report_scroll_position__';\n\nconst getScrollListenerNameInPage = (id: number): string => `__devtools_scroll_listener_${id}__`;\n\ntype ScrollListener = (param: {scrollLeft: number, scrollTop: number}) => void;\ntype BindingListener =\n    (ev: Common.EventTarget.EventTargetEvent<Protocol.Runtime.BindingCalledEvent, RuntimeModelEventTypes>) => void;\n\nasync function resolveToObjectInWorld(domNode: DOMNode, worldName: string): Promise<RemoteObject|null> {\n  const resourceTreeModel = domNode.domModel().target().model(ResourceTreeModel) as ResourceTreeModel;\n  const pageAgent = domNode.domModel().target().pageAgent();\n  for (const frame of resourceTreeModel.frames()) {\n    // This returns previously created world if it exists for the frame.\n    const {executionContextId} = await pageAgent.invoke_createIsolatedWorld({frameId: frame.id, worldName});\n    const object = await domNode.resolveToObject(undefined, executionContextId);\n    if (object) {\n      return object;\n    }\n  }\n  return null;\n}\n\n/**\n * Provides an extension over `DOMNode` that gives it additional\n * capabilities for animation debugging, mainly:\n * - getting a node's scroll information (scroll offsets and scroll range).\n * - updating a node's scroll offset.\n * - tracking the node's scroll offsets with event listeners.\n *\n * It works by running functions on the target page, see `DOMNode`s `callFunction` method\n * for more details on how a function is called on the target page.\n *\n * For listening to events on the target page and getting notified on the devtools frontend\n * side, we're adding a binding to the page `__devtools_report_scroll_position__` in a world `devtools_animation`\n * we've created. Then, we're setting scroll listeners of the `node` in the same world which calls the binding\n * itself with the scroll offsets.\n */\nexport class AnimationDOMNode {\n  #domNode: DOMNode;\n  #scrollListenersById = new Map<number, ScrollListener>();\n  #scrollBindingListener?: BindingListener;\n\n  static lastAddedListenerId = 0;\n\n  constructor(domNode: DOMNode) {\n    this.#domNode = domNode;\n  }\n\n  async #addReportScrollPositionBinding(): Promise<void> {\n    // The binding is already added so we don't need to add it again.\n    if (this.#scrollBindingListener) {\n      return;\n    }\n\n    this.#scrollBindingListener = ev => {\n      const {name, payload} = ev.data;\n      if (name !== REPORT_SCROLL_POSITION_BINDING_NAME) {\n        return;\n      }\n\n      const {scrollTop, scrollLeft, id} = JSON.parse(payload) as {scrollTop: number, scrollLeft: number, id: number};\n      const scrollListener = this.#scrollListenersById.get(id);\n      if (!scrollListener) {\n        return;\n      }\n\n      scrollListener({scrollTop, scrollLeft});\n    };\n\n    const runtimeModel = this.#domNode.domModel().target().model(RuntimeModel) as RuntimeModel;\n    await runtimeModel.addBinding({\n      name: REPORT_SCROLL_POSITION_BINDING_NAME,\n      executionContextName: DEVTOOLS_ANIMATIONS_WORLD_NAME,\n    });\n    runtimeModel.addEventListener(RuntimeModelEvents.BindingCalled, this.#scrollBindingListener);\n  }\n\n  async #removeReportScrollPositionBinding(): Promise<void> {\n    // There isn't any binding added yet.\n    if (!this.#scrollBindingListener) {\n      return;\n    }\n\n    const runtimeModel = this.#domNode.domModel().target().model(RuntimeModel) as RuntimeModel;\n    await runtimeModel.removeBinding({\n      name: REPORT_SCROLL_POSITION_BINDING_NAME,\n    });\n    runtimeModel.removeEventListener(RuntimeModelEvents.BindingCalled, this.#scrollBindingListener);\n    this.#scrollBindingListener = undefined;\n  }\n\n  async addScrollEventListener(onScroll: ({scrollLeft, scrollTop}: {scrollLeft: number, scrollTop: number}) => void):\n      Promise<number|null> {\n    AnimationDOMNode.lastAddedListenerId++;\n    const id = AnimationDOMNode.lastAddedListenerId;\n    this.#scrollListenersById.set(id, onScroll);\n    // Add the binding for reporting scroll events from the page if it doesn't exist.\n    if (!this.#scrollBindingListener) {\n      await this.#addReportScrollPositionBinding();\n    }\n\n    const object = await resolveToObjectInWorld(this.#domNode, DEVTOOLS_ANIMATIONS_WORLD_NAME);\n    if (!object) {\n      return null;\n    }\n\n    await object.callFunction(scrollListenerInPage, [\n      id,\n      REPORT_SCROLL_POSITION_BINDING_NAME,\n      getScrollListenerNameInPage(id),\n    ].map(arg => RemoteObject.toCallArgument(arg)));\n    object.release();\n    return id;\n\n    function scrollListenerInPage(\n        this: HTMLElement|Document, id: number, reportScrollPositionBindingName: string,\n        scrollListenerNameInPage: string): void {\n      if ('scrollingElement' in this && !this.scrollingElement) {\n        return;\n      }\n\n      const scrollingElement = ('scrollingElement' in this ? this.scrollingElement : this) as HTMLElement;\n      // @ts-expect-error We're setting a custom field on `Element` or `Document` for retaining the function on the page.\n      this[scrollListenerNameInPage] = () => {\n        // @ts-expect-error `reportScrollPosition` binding is injected to the page before calling the function.\n        globalThis[reportScrollPositionBindingName](\n            JSON.stringify({scrollTop: scrollingElement.scrollTop, scrollLeft: scrollingElement.scrollLeft, id}));\n      };\n\n      // @ts-expect-error We've already defined the function used below.\n      this.addEventListener('scroll', this[scrollListenerNameInPage], true);\n    }\n  }\n\n  async removeScrollEventListener(id: number): Promise<void> {\n    const object = await resolveToObjectInWorld(this.#domNode, DEVTOOLS_ANIMATIONS_WORLD_NAME);\n    if (!object) {\n      return;\n    }\n\n    await object.callFunction(\n        removeScrollListenerInPage, [getScrollListenerNameInPage(id)].map(arg => RemoteObject.toCallArgument(arg)));\n    object.release();\n\n    this.#scrollListenersById.delete(id);\n    // There aren't any scroll listeners remained on the page\n    // so we remove the binding.\n    if (this.#scrollListenersById.size === 0) {\n      await this.#removeReportScrollPositionBinding();\n    }\n\n    function removeScrollListenerInPage(this: HTMLElement|Document, scrollListenerNameInPage: string): void {\n      // @ts-expect-error We've already set this custom field while adding scroll listener.\n      this.removeEventListener('scroll', this[scrollListenerNameInPage]);\n      // @ts-expect-error We've already set this custom field while adding scroll listener.\n      delete this[scrollListenerNameInPage];\n    }\n  }\n\n  async scrollTop(): Promise<number|null> {\n    return await this.#domNode.callFunction(scrollTopInPage).then(res => res?.value ?? null);\n\n    function scrollTopInPage(this: Element|Document): number {\n      if ('scrollingElement' in this) {\n        if (!this.scrollingElement) {\n          return 0;\n        }\n\n        return this.scrollingElement.scrollTop;\n      }\n      return this.scrollTop;\n    }\n  }\n\n  async scrollLeft(): Promise<number|null> {\n    return await this.#domNode.callFunction(scrollLeftInPage).then(res => res?.value ?? null);\n\n    function scrollLeftInPage(this: Element|Document): number {\n      if ('scrollingElement' in this) {\n        if (!this.scrollingElement) {\n          return 0;\n        }\n\n        return this.scrollingElement.scrollLeft;\n      }\n      return this.scrollLeft;\n    }\n  }\n\n  async setScrollTop(offset: number): Promise<void> {\n    await this.#domNode.callFunction(setScrollTopInPage, [offset]);\n\n    function setScrollTopInPage(this: Element|Document, offsetInPage: number): void {\n      if ('scrollingElement' in this) {\n        if (!this.scrollingElement) {\n          return;\n        }\n\n        this.scrollingElement.scrollTop = offsetInPage;\n      } else {\n        this.scrollTop = offsetInPage;\n      }\n    }\n  }\n\n  async setScrollLeft(offset: number): Promise<void> {\n    await this.#domNode.callFunction(setScrollLeftInPage, [offset]);\n\n    function setScrollLeftInPage(this: Element|Document, offsetInPage: number): void {\n      if ('scrollingElement' in this) {\n        if (!this.scrollingElement) {\n          return;\n        }\n\n        this.scrollingElement.scrollLeft = offsetInPage;\n      } else {\n        this.scrollLeft = offsetInPage;\n      }\n    }\n  }\n\n  async verticalScrollRange(): Promise<number|null> {\n    return await this.#domNode.callFunction(verticalScrollRangeInPage).then(res => res?.value ?? null);\n\n    function verticalScrollRangeInPage(this: Element|Document): number {\n      if ('scrollingElement' in this) {\n        if (!this.scrollingElement) {\n          return 0;\n        }\n\n        return this.scrollingElement.scrollHeight - this.scrollingElement.clientHeight;\n      }\n\n      return this.scrollHeight - this.clientHeight;\n    }\n  }\n\n  async horizontalScrollRange(): Promise<number|null> {\n    return await this.#domNode.callFunction(horizontalScrollRangeInPage).then(res => res?.value ?? null);\n\n    function horizontalScrollRangeInPage(this: Element|Document): number {\n      if ('scrollingElement' in this) {\n        if (!this.scrollingElement) {\n          return 0;\n        }\n\n        return this.scrollingElement.scrollWidth - this.scrollingElement.clientWidth;\n      }\n\n      return this.scrollWidth - this.clientWidth;\n    }\n  }\n}\n\nfunction shouldGroupAnimations(firstAnimation: AnimationImpl, anim: AnimationImpl): boolean {\n  const firstAnimationTimeline = firstAnimation.viewOrScrollTimeline();\n  const animationTimeline = anim.viewOrScrollTimeline();\n  if (firstAnimationTimeline) {\n    // This is a SDA group so check whether the animation's\n    // scroll container and scroll axis is the same with the first animation.\n    return Boolean(\n        animationTimeline && firstAnimationTimeline.sourceNodeId === animationTimeline.sourceNodeId &&\n        firstAnimationTimeline.axis === animationTimeline.axis);\n  }\n  // This is a non-SDA group so check whether the coming animation\n  // is a time based one too and if so, compare their start times.\n  return !animationTimeline && firstAnimation.startTime() === anim.startTime();\n}\n\nexport class AnimationModel extends SDKModel<EventTypes> {\n  readonly runtimeModel: RuntimeModel;\n  readonly agent: ProtocolProxyApi.AnimationApi;\n  #animationsById = new Map<string, AnimationImpl>();\n  readonly animationGroups = new Map<string, AnimationGroup>();\n  #pendingAnimations = new Set<string>();\n  playbackRate = 1;\n  #flushPendingAnimations: () => void;\n\n  constructor(target: Target) {\n    super(target);\n    this.runtimeModel = (target.model(RuntimeModel) as RuntimeModel);\n    this.agent = target.animationAgent();\n    target.registerAnimationDispatcher(new AnimationDispatcher(this));\n\n    if (!target.suspended()) {\n      void this.agent.invoke_enable();\n    }\n\n    const resourceTreeModel = (target.model(ResourceTreeModel) as ResourceTreeModel);\n    resourceTreeModel.addEventListener(ResourceTreeModelEvents.PrimaryPageChanged, this.reset, this);\n\n    this.#flushPendingAnimations = Common.Debouncer.debounce(() => {\n      while (this.#pendingAnimations.size) {\n        this.matchExistingGroups(this.createGroupFromPendingAnimations());\n      }\n    }, 100);\n  }\n\n  private reset(): void {\n    this.#animationsById.clear();\n    this.animationGroups.clear();\n    this.#pendingAnimations.clear();\n    this.dispatchEventToListeners(Events.ModelReset);\n  }\n\n  async devicePixelRatio(): Promise<number> {\n    const evaluateResult = await this.target().runtimeAgent().invoke_evaluate({expression: 'window.devicePixelRatio'});\n    if (evaluateResult?.result.type === 'number') {\n      return evaluateResult?.result.value as number ?? 1;\n    }\n\n    return 1;\n  }\n\n  async getAnimationGroupForAnimation(name: string, nodeId: Protocol.DOM.NodeId): Promise<AnimationGroup|null> {\n    for (const animationGroup of this.animationGroups.values()) {\n      for (const animation of animationGroup.animations()) {\n        if (animation.name() === name) {\n          const animationNode = await animation.source().node();\n          if (animationNode?.id === nodeId) {\n            return animationGroup;\n          }\n        }\n      }\n    }\n\n    return null;\n  }\n\n  animationCanceled(id: string): void {\n    this.#pendingAnimations.delete(id);\n  }\n\n  async animationUpdated(payload: Protocol.Animation.Animation): Promise<void> {\n    let foundAnimationGroup: AnimationGroup|undefined;\n    let foundAnimation: AnimationImpl|undefined;\n    for (const animationGroup of this.animationGroups.values()) {\n      foundAnimation = animationGroup.animations().find(animation => animation.id() === payload.id);\n      if (foundAnimation) {\n        foundAnimationGroup = animationGroup;\n        break;\n      }\n    }\n\n    if (!foundAnimation || !foundAnimationGroup) {\n      return;\n    }\n\n    await foundAnimation.setPayload(payload);\n    this.dispatchEventToListeners(Events.AnimationGroupUpdated, foundAnimationGroup);\n  }\n\n  async animationStarted(payload: Protocol.Animation.Animation): Promise<void> {\n    // We are not interested in animations without effect or target.\n    if (!payload.source?.backendNodeId) {\n      return;\n    }\n\n    const animation = await AnimationImpl.parsePayload(this, payload);\n    // Ignore Web Animations custom effects & groups.\n    const keyframesRule = animation.source().keyframesRule();\n    if (animation.type() === 'WebAnimation' && keyframesRule?.keyframes().length === 0) {\n      this.#pendingAnimations.delete(animation.id());\n    } else {\n      this.#animationsById.set(animation.id(), animation);\n      this.#pendingAnimations.add(animation.id());\n    }\n\n    this.#flushPendingAnimations();\n  }\n\n  private matchExistingGroups(incomingGroup: AnimationGroup): boolean {\n    let matchedGroup: AnimationGroup|null = null;\n    for (const group of this.animationGroups.values()) {\n      if (group.matches(incomingGroup)) {\n        matchedGroup = group;\n        group.rebaseTo(incomingGroup);\n        break;\n      }\n\n      if (group.shouldInclude(incomingGroup)) {\n        matchedGroup = group;\n        group.appendAnimations(incomingGroup.animations());\n        break;\n      }\n    }\n\n    if (!matchedGroup) {\n      this.animationGroups.set(incomingGroup.id(), incomingGroup);\n      this.dispatchEventToListeners(Events.AnimationGroupStarted, incomingGroup);\n    } else {\n      this.dispatchEventToListeners(Events.AnimationGroupUpdated, matchedGroup);\n    }\n    return Boolean(matchedGroup);\n  }\n\n  private createGroupFromPendingAnimations(): AnimationGroup {\n    console.assert(this.#pendingAnimations.size > 0);\n    const firstAnimationId = this.#pendingAnimations.values().next().value as string;\n    this.#pendingAnimations.delete(firstAnimationId);\n\n    const firstAnimation = this.#animationsById.get(firstAnimationId);\n    if (!firstAnimation) {\n      throw new Error('Unable to locate first animation');\n    }\n\n    const groupedAnimations = [firstAnimation];\n    const remainingAnimations = new Set<string>();\n\n    for (const id of this.#pendingAnimations) {\n      const anim = this.#animationsById.get(id) as AnimationImpl;\n      if (shouldGroupAnimations(firstAnimation, anim)) {\n        groupedAnimations.push(anim);\n      } else {\n        remainingAnimations.add(id);\n      }\n    }\n\n    this.#pendingAnimations = remainingAnimations;\n    // Show the first starting animation at the top of the animations of the animation group.\n    groupedAnimations.sort((anim1, anim2) => anim1.startTime() - anim2.startTime());\n    return new AnimationGroup(this, firstAnimationId, groupedAnimations);\n  }\n\n  setPlaybackRate(playbackRate: number): void {\n    this.playbackRate = playbackRate;\n    void this.agent.invoke_setPlaybackRate({playbackRate});\n  }\n\n  async releaseAllAnimations(): Promise<void> {\n    const animationIds = [...this.animationGroups.values()].flatMap(\n        animationGroup => animationGroup.animations().map(animation => animation.id()));\n    await this.agent.invoke_releaseAnimations({animations: animationIds});\n  }\n\n  releaseAnimations(animations: string[]): void {\n    void this.agent.invoke_releaseAnimations({animations});\n  }\n\n  override async suspendModel(): Promise<void> {\n    await this.agent.invoke_disable().then(() => this.reset());\n  }\n\n  override async resumeModel(): Promise<void> {\n    await this.agent.invoke_enable();\n  }\n}\n\nexport enum Events {\n  /* eslint-disable @typescript-eslint/naming-convention -- Used by web_tests. */\n  AnimationGroupStarted = 'AnimationGroupStarted',\n  AnimationGroupUpdated = 'AnimationGroupUpdated',\n  ModelReset = 'ModelReset',\n  /* eslint-enable @typescript-eslint/naming-convention */\n}\n\nexport interface EventTypes {\n  [Events.AnimationGroupStarted]: AnimationGroup;\n  [Events.AnimationGroupUpdated]: AnimationGroup;\n  [Events.ModelReset]: void;\n}\n\nexport class AnimationImpl {\n  readonly #animationModel: AnimationModel;\n  #payload!: Protocol.Animation\n      .Animation;  // Assertion is safe because only way to create `AnimationImpl` is to use `parsePayload` which calls `setPayload` and sets the value.\n  #source!:\n      AnimationEffect;  // Assertion is safe because only way to create `AnimationImpl` is to use `parsePayload` which calls `setPayload` and sets the value.\n  #playState?: string;\n\n  private constructor(animationModel: AnimationModel) {\n    this.#animationModel = animationModel;\n  }\n\n  static async parsePayload(animationModel: AnimationModel, payload: Protocol.Animation.Animation):\n      Promise<AnimationImpl> {\n    const animation = new AnimationImpl(animationModel);\n    await animation.setPayload(payload);\n    return animation;\n  }\n\n  async setPayload(payload: Protocol.Animation.Animation): Promise<void> {\n    // TODO(b/40929569): Remove normalizing by devicePixelRatio after the attached bug is resolved.\n    if (payload.viewOrScrollTimeline) {\n      const devicePixelRatio = await this.#animationModel.devicePixelRatio();\n      if (payload.viewOrScrollTimeline.startOffset) {\n        payload.viewOrScrollTimeline.startOffset /= devicePixelRatio;\n      }\n\n      if (payload.viewOrScrollTimeline.endOffset) {\n        payload.viewOrScrollTimeline.endOffset /= devicePixelRatio;\n      }\n    }\n\n    this.#payload = payload;\n    if (this.#source && payload.source) {\n      this.#source.setPayload(payload.source);\n    } else if (!this.#source && payload.source) {\n      this.#source = new AnimationEffect(this.#animationModel, payload.source);\n    }\n  }\n\n  // `startTime` and `duration` is represented as the\n  // percentage of the view timeline range that starts at `startOffset`px\n  // from the scroll container and ends at `endOffset`px of the scroll container.\n  // This takes a percentage of the timeline range and returns the absolute\n  // pixels values as a scroll offset of the scroll container.\n  private percentageToPixels(percentage: number, viewOrScrollTimeline: Protocol.Animation.ViewOrScrollTimeline):\n      number {\n    const {startOffset, endOffset} = viewOrScrollTimeline;\n    if (startOffset === undefined || endOffset === undefined) {\n      // We don't expect this situation to occur since after an animation is started\n      // we expect the scroll offsets to be resolved and provided correctly. If `startOffset`\n      // or `endOffset` is not provided in a viewOrScrollTimeline; we can assume that there is a bug here\n      // so it's fine to throw an error.\n      throw new Error('startOffset or endOffset does not exist in viewOrScrollTimeline');\n    }\n\n    return (endOffset - startOffset) * (percentage / 100);\n  }\n\n  viewOrScrollTimeline(): Protocol.Animation.ViewOrScrollTimeline|undefined {\n    return this.#payload.viewOrScrollTimeline;\n  }\n\n  id(): string {\n    return this.#payload.id;\n  }\n\n  name(): string {\n    return this.#payload.name;\n  }\n\n  paused(): boolean {\n    return this.#payload.pausedState;\n  }\n\n  playState(): string {\n    return this.#playState || this.#payload.playState;\n  }\n\n  playbackRate(): number {\n    return this.#payload.playbackRate;\n  }\n\n  // For scroll driven animations, it returns the pixel offset in the scroll container\n  // For time animations, it returns milliseconds.\n  startTime(): number {\n    const viewOrScrollTimeline = this.viewOrScrollTimeline();\n    if (viewOrScrollTimeline) {\n      return this.percentageToPixels(\n                 this.playbackRate() > 0 ? this.#payload.startTime : 100 - this.#payload.startTime,\n                 viewOrScrollTimeline) +\n          (this.viewOrScrollTimeline()?.startOffset ?? 0);\n    }\n\n    return this.#payload.startTime;\n  }\n\n  // For scroll driven animations, it returns the duration in pixels (i.e. after how many pixels of scroll the animation is going to end)\n  // For time animations, it returns milliseconds.\n  iterationDuration(): number {\n    const viewOrScrollTimeline = this.viewOrScrollTimeline();\n    if (viewOrScrollTimeline) {\n      return this.percentageToPixels(this.source().duration(), viewOrScrollTimeline);\n    }\n\n    return this.source().duration();\n  }\n\n  // For scroll driven animations, it returns the duration in pixels (i.e. after how many pixels of scroll the animation is going to end)\n  // For time animations, it returns milliseconds.\n  endTime(): number {\n    if (!this.source().iterations) {\n      return Infinity;\n    }\n\n    if (this.viewOrScrollTimeline()) {\n      return this.startTime() + this.iterationDuration() * this.source().iterations();\n    }\n\n    return this.startTime() + this.source().delay() + this.source().duration() * this.source().iterations() +\n        this.source().endDelay();\n  }\n\n  // For scroll driven animations, it returns the duration in pixels (i.e. after how many pixels of scroll the animation is going to end)\n  // For time animations, it returns milliseconds.\n  finiteDuration(): number {\n    const iterations = Math.min(this.source().iterations(), 3);\n    if (this.viewOrScrollTimeline()) {\n      return this.iterationDuration() * iterations;\n    }\n\n    return this.source().delay() + this.source().duration() * iterations;\n  }\n\n  // For scroll driven animations, it returns the duration in pixels (i.e. after how many pixels of scroll the animation is going to end)\n  // For time animations, it returns milliseconds.\n  currentTime(): number {\n    const viewOrScrollTimeline = this.viewOrScrollTimeline();\n    if (viewOrScrollTimeline) {\n      return this.percentageToPixels(this.#payload.currentTime, viewOrScrollTimeline);\n    }\n\n    return this.#payload.currentTime;\n  }\n\n  source(): AnimationEffect {\n    return this.#source;\n  }\n\n  type(): Protocol.Animation.AnimationType {\n    return this.#payload.type;\n  }\n\n  overlaps(animation: AnimationImpl): boolean {\n    // Infinite animations\n    if (!this.source().iterations() || !animation.source().iterations()) {\n      return true;\n    }\n\n    const firstAnimation = this.startTime() < animation.startTime() ? this : animation;\n    const secondAnimation = firstAnimation === this ? animation : this;\n    return firstAnimation.endTime() >= secondAnimation.startTime();\n  }\n\n  // Utility method for returning `delay` for time based animations\n  // and `startTime` in pixels for scroll driven animations. It is used to\n  // find the exact starting time of the first keyframe for both cases.\n  delayOrStartTime(): number {\n    if (this.viewOrScrollTimeline()) {\n      return this.startTime();\n    }\n\n    return this.source().delay();\n  }\n\n  setTiming(duration: number, delay: number): void {\n    void this.#source.node().then(node => {\n      if (!node) {\n        throw new Error('Unable to find node');\n      }\n      this.updateNodeStyle(duration, delay, node);\n    });\n    this.#source.durationInternal = duration;\n    this.#source.delayInternal = delay;\n    void this.#animationModel.agent.invoke_setTiming({animationId: this.id(), duration, delay});\n  }\n\n  private updateNodeStyle(duration: number, delay: number, node: DOMNode): void {\n    let animationPrefix;\n    if (this.type() === Protocol.Animation.AnimationType.CSSTransition) {\n      animationPrefix = 'transition-';\n    } else if (this.type() === Protocol.Animation.AnimationType.CSSAnimation) {\n      animationPrefix = 'animation-';\n    } else {\n      return;\n    }\n\n    if (!node.id) {\n      throw new Error('Node has no id');\n    }\n\n    const cssModel = node.domModel().cssModel();\n    cssModel.setEffectivePropertyValueForNode(node.id, animationPrefix + 'duration', duration + 'ms');\n    cssModel.setEffectivePropertyValueForNode(node.id, animationPrefix + 'delay', delay + 'ms');\n  }\n\n  async remoteObjectPromise(): Promise<RemoteObject|null> {\n    const payload = await this.#animationModel.agent.invoke_resolveAnimation({animationId: this.id()});\n    if (!payload) {\n      return null;\n    }\n\n    return this.#animationModel.runtimeModel.createRemoteObject(payload.remoteObject);\n  }\n\n  cssId(): string {\n    return this.#payload.cssId || '';\n  }\n}\n\nexport class AnimationEffect {\n  #animationModel: AnimationModel;\n  #payload!: Protocol.Animation\n      .AnimationEffect;       // Assertion is safe because `setPayload` call in `constructor` sets the value.\n  delayInternal!: number;     // Assertion is safe because `setPayload` call in `constructor` sets the value.\n  durationInternal!: number;  // Assertion is safe because `setPayload` call in `constructor` sets the value.\n  #keyframesRule: KeyframesRule|undefined;\n  #deferredNode?: DeferredDOMNode;\n  constructor(animationModel: AnimationModel, payload: Protocol.Animation.AnimationEffect) {\n    this.#animationModel = animationModel;\n    this.setPayload(payload);\n  }\n\n  setPayload(payload: Protocol.Animation.AnimationEffect): void {\n    this.#payload = payload;\n    if (!this.#keyframesRule && payload.keyframesRule) {\n      this.#keyframesRule = new KeyframesRule(payload.keyframesRule);\n    } else if (this.#keyframesRule && payload.keyframesRule) {\n      this.#keyframesRule.setPayload(payload.keyframesRule);\n    }\n\n    this.delayInternal = payload.delay;\n    this.durationInternal = payload.duration;\n  }\n\n  delay(): number {\n    return this.delayInternal;\n  }\n\n  endDelay(): number {\n    return this.#payload.endDelay;\n  }\n\n  iterations(): number {\n    // Animations with zero duration, zero delays and infinite iterations can't be shown.\n    if (!this.delay() && !this.endDelay() && !this.duration()) {\n      return 0;\n    }\n    return this.#payload.iterations || Infinity;\n  }\n\n  duration(): number {\n    return this.durationInternal;\n  }\n\n  direction(): string {\n    return this.#payload.direction;\n  }\n\n  fill(): string {\n    return this.#payload.fill;\n  }\n\n  node(): Promise<DOMNode|null> {\n    if (!this.#deferredNode) {\n      this.#deferredNode = new DeferredDOMNode(this.#animationModel.target(), this.backendNodeId());\n    }\n    return this.#deferredNode.resolvePromise();\n  }\n\n  deferredNode(): DeferredDOMNode {\n    return new DeferredDOMNode(this.#animationModel.target(), this.backendNodeId());\n  }\n\n  backendNodeId(): Protocol.DOM.BackendNodeId {\n    return this.#payload.backendNodeId as Protocol.DOM.BackendNodeId;\n  }\n\n  keyframesRule(): KeyframesRule|null {\n    return this.#keyframesRule || null;\n  }\n\n  easing(): string {\n    return this.#payload.easing;\n  }\n}\n\nexport class KeyframesRule {\n  #payload!: Protocol.Animation\n      .KeyframesRule;            // Assertion is safe because `setPayload` call in `constructor` sets the value.;\n  #keyframes!: KeyframeStyle[];  // Assertion is safe because `setPayload` call in `constructor` sets the value.;\n  constructor(payload: Protocol.Animation.KeyframesRule) {\n    this.setPayload(payload);\n  }\n\n  setPayload(payload: Protocol.Animation.KeyframesRule): void {\n    this.#payload = payload;\n    if (!this.#keyframes) {\n      this.#keyframes = this.#payload.keyframes.map(keyframeStyle => new KeyframeStyle(keyframeStyle));\n    } else {\n      this.#payload.keyframes.forEach((keyframeStyle, index) => {\n        this.#keyframes[index]?.setPayload(keyframeStyle);\n      });\n    }\n  }\n\n  name(): string|undefined {\n    return this.#payload.name;\n  }\n\n  keyframes(): KeyframeStyle[] {\n    return this.#keyframes;\n  }\n}\n\nexport class KeyframeStyle {\n  #payload!:\n      Protocol.Animation.KeyframeStyle;  // Assertion is safe because `setPayload` call in `constructor` sets the value.\n  #offset!: string;                      // Assertion is safe because `setPayload` call in `constructor` sets the value.\n  constructor(payload: Protocol.Animation.KeyframeStyle) {\n    this.setPayload(payload);\n  }\n\n  setPayload(payload: Protocol.Animation.KeyframeStyle): void {\n    this.#payload = payload;\n    this.#offset = payload.offset;\n  }\n\n  offset(): string {\n    return this.#offset;\n  }\n\n  setOffset(offset: number): void {\n    this.#offset = offset * 100 + '%';\n  }\n\n  offsetAsNumber(): number {\n    return parseFloat(this.#offset) / 100;\n  }\n\n  easing(): string {\n    return this.#payload.easing;\n  }\n}\n\nexport class AnimationGroup {\n  readonly #animationModel: AnimationModel;\n  readonly #id: string;\n  #scrollNode: AnimationDOMNode|undefined;\n  #animations: AnimationImpl[];\n  #paused = false;\n  constructor(animationModel: AnimationModel, id: string, animations: AnimationImpl[]) {\n    this.#animationModel = animationModel;\n    this.#id = id;\n    this.#animations = animations;\n  }\n\n  isScrollDriven(): boolean {\n    return Boolean(this.#animations[0]?.viewOrScrollTimeline());\n  }\n\n  id(): string {\n    return this.#id;\n  }\n\n  animations(): AnimationImpl[] {\n    return this.#animations;\n  }\n\n  release(): void {\n    this.#animationModel.animationGroups.delete(this.id());\n    this.#animationModel.releaseAnimations(this.animationIds());\n  }\n\n  private animationIds(): string[] {\n    function extractId(animation: AnimationImpl): string {\n      return animation.id();\n    }\n\n    return this.#animations.map(extractId);\n  }\n\n  startTime(): number {\n    return this.#animations[0].startTime();\n  }\n\n  // For scroll driven animations, it returns the duration in pixels (i.e. after how many pixels of scroll the animation is going to end)\n  // For time animations, it returns milliseconds.\n  groupDuration(): number {\n    let duration = 0;\n    for (const anim of this.#animations) {\n      duration = Math.max(duration, anim.delayOrStartTime() + anim.iterationDuration());\n    }\n    return duration;\n  }\n\n  // For scroll driven animations, it returns the duration in pixels (i.e. after how many pixels of scroll the animation is going to end)\n  // For time animations, it returns milliseconds.\n  finiteDuration(): number {\n    let maxDuration = 0;\n    for (let i = 0; i < this.#animations.length; ++i) {\n      maxDuration = Math.max(maxDuration, this.#animations[i].finiteDuration());\n    }\n    return maxDuration;\n  }\n\n  scrollOrientation(): Protocol.DOM.ScrollOrientation|null {\n    const timeline = this.#animations[0]?.viewOrScrollTimeline();\n    if (!timeline) {\n      return null;\n    }\n\n    return timeline.axis;\n  }\n\n  async scrollNode(): Promise<AnimationDOMNode|null> {\n    if (this.#scrollNode) {\n      return this.#scrollNode;\n    }\n\n    if (!this.isScrollDriven()) {\n      return null;\n    }\n\n    const sourceNodeId = this.#animations[0]?.viewOrScrollTimeline()?.sourceNodeId;\n    if (!sourceNodeId) {\n      return null;\n    }\n\n    const deferredScrollNode = new DeferredDOMNode(this.#animationModel.target(), sourceNodeId);\n    const scrollNode = await deferredScrollNode.resolvePromise();\n    if (!scrollNode) {\n      return null;\n    }\n\n    this.#scrollNode = new AnimationDOMNode(scrollNode);\n    return this.#scrollNode;\n  }\n\n  seekTo(currentTime: number): void {\n    void this.#animationModel.agent.invoke_seekAnimations({animations: this.animationIds(), currentTime});\n  }\n\n  paused(): boolean {\n    return this.#paused;\n  }\n\n  togglePause(paused: boolean): void {\n    if (paused === this.#paused) {\n      return;\n    }\n    this.#paused = paused;\n    void this.#animationModel.agent.invoke_setPaused({animations: this.animationIds(), paused});\n  }\n\n  currentTimePromise(): Promise<number> {\n    let longestAnim: AnimationImpl|null = null;\n    for (const anim of this.#animations) {\n      if (!longestAnim || anim.endTime() > longestAnim.endTime()) {\n        longestAnim = anim;\n      }\n    }\n    if (!longestAnim) {\n      throw new Error('No longest animation found');\n    }\n\n    return this.#animationModel.agent.invoke_getCurrentTime({id: longestAnim.id()})\n        .then(({currentTime}) => currentTime || 0);\n  }\n\n  matches(group: AnimationGroup): boolean {\n    function extractId(anim: AnimationImpl): string {\n      const timelineId = (anim.viewOrScrollTimeline()?.sourceNodeId ?? '') + (anim.viewOrScrollTimeline()?.axis ?? '');\n      const regularId =\n          anim.type() === Protocol.Animation.AnimationType.WebAnimation ? anim.type() + anim.id() : anim.cssId();\n\n      return regularId + timelineId;\n    }\n\n    if (this.#animations.length !== group.#animations.length) {\n      return false;\n    }\n    const left = this.#animations.map(extractId).sort();\n    const right = group.#animations.map(extractId).sort();\n    for (let i = 0; i < left.length; i++) {\n      if (left[i] !== right[i]) {\n        return false;\n      }\n    }\n    return true;\n  }\n\n  shouldInclude(group: AnimationGroup): boolean {\n    // We want to include the animations coming from the incoming group\n    // inside this group if they were to be grouped if the events came at the same time.\n    const [firstIncomingAnimation] = group.#animations;\n    const [firstAnimation] = this.#animations;\n    return shouldGroupAnimations(firstAnimation, firstIncomingAnimation);\n  }\n\n  appendAnimations(animations: AnimationImpl[]): void {\n    this.#animations.push(...animations);\n  }\n\n  rebaseTo(group: AnimationGroup): void {\n    this.#animationModel.releaseAnimations(this.animationIds());\n    this.#animations = group.#animations;\n    this.#scrollNode = undefined;\n  }\n}\n\nexport class AnimationDispatcher implements ProtocolProxyApi.AnimationDispatcher {\n  readonly #animationModel: AnimationModel;\n  constructor(animationModel: AnimationModel) {\n    this.#animationModel = animationModel;\n  }\n\n  animationCreated(_event: Protocol.Animation.AnimationCreatedEvent): void {\n    // Previously this event was used to batch the animations into groups\n    // and we were waiting for animationStarted events to be sent for\n    // all the created animations and until then we weren't creating any\n    // groups. This was allowing us to not miss any animations that were\n    // going to be in the same group. However, now we're not using this event\n    // to do batching and instead:\n    // * We debounce the flush calls so that if the animationStarted events\n    // for the same animation group come in different times; we create one\n    // group for them.\n    // * Even though an animation group is created and rendered for some animations\n    // that have the same startTime (or same timeline & scroll axis for SDAs), now\n    // whenever an `animationStarted` event comes we check whether there is a group\n    // we can add the related animation. If so, we add it and emit `animationGroupUpdated`\n    // event. So that, all the animations that were supposed to be in the same group\n    // will be in the same group.\n  }\n\n  animationCanceled({id}: Protocol.Animation.AnimationCanceledEvent): void {\n    this.#animationModel.animationCanceled(id);\n  }\n\n  animationStarted({animation}: Protocol.Animation.AnimationStartedEvent): void {\n    void this.#animationModel.animationStarted(animation);\n  }\n\n  animationUpdated({animation}: Protocol.Animation.AnimationUpdatedEvent): void {\n    void this.#animationModel.animationUpdated(animation);\n  }\n}\n\nSDKModel.register(AnimationModel, {capabilities: Capability.DOM, autostart: true});\nexport interface Request {\n  endTime: number;\n}\n", "// Copyright 2023 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as Common from '../../core/common/common.js';\nimport type * as ProtocolProxyApi from '../../generated/protocol-proxy-api.js';\nimport type * as Protocol from '../../generated/protocol.js';\nimport * as Host from '../host/host.js';\n\nimport {SDKModel} from './SDKModel.js';\nimport {Capability, type Target} from './Target.js';\n\nexport class AutofillModel extends SDKModel<EventTypes> implements ProtocolProxyApi.AutofillDispatcher {\n  readonly agent: ProtocolProxyApi.AutofillApi;\n  #enabled?: boolean;\n  #showTestAddressesInAutofillMenu: Common.Settings.Setting<boolean>;\n\n  constructor(target: Target) {\n    super(target);\n\n    this.agent = target.autofillAgent();\n    this.#showTestAddressesInAutofillMenu =\n        Common.Settings.Settings.instance().createSetting('show-test-addresses-in-autofill-menu-on-event', false);\n    this.#showTestAddressesInAutofillMenu.addChangeListener(this.#setTestAddresses, this);\n    target.registerAutofillDispatcher(this);\n    this.enable();\n  }\n\n  override dispose(): void {\n    this.#showTestAddressesInAutofillMenu.removeChangeListener(this.#setTestAddresses, this);\n    super.dispose();\n  }\n\n  #setTestAddresses(): void {\n    void this.agent.invoke_setAddresses(\n        {\n          addresses: this.#showTestAddressesInAutofillMenu.get() ?\n              [\n                {\n                  fields: [\n                    {name: 'ADDRESS_HOME_COUNTRY', value: 'US'},\n                    {name: 'NAME_FULL', value: 'Jon Stewart Doe'},\n                    {name: 'NAME_FIRST', value: 'Jon'},\n                    {name: 'NAME_MIDDLE', value: 'Stewart'},\n                    {name: 'NAME_LAST', value: 'Doe'},\n                    {name: 'COMPANY_NAME', value: 'Fake Company'},\n                    {name: 'ADDRESS_HOME_LINE1', value: '1600 Fake Street'},\n                    {name: 'ADDRESS_HOME_LINE2', value: 'Apartment 1'},\n                    {name: 'ADDRESS_HOME_ZIP', value: '94043'},\n                    {name: 'ADDRESS_HOME_CITY', value: 'Mountain View'},\n                    {name: 'ADDRESS_HOME_STATE', value: 'CA'},\n                    {name: 'EMAIL_ADDRESS', value: 'test@example.us'},\n                    {name: 'PHONE_HOME_WHOLE_NUMBER', value: '+16019521325'},\n                  ],\n                },\n                {\n                  fields: [\n                    {name: 'ADDRESS_HOME_COUNTRY', value: 'BR'},\n                    {name: 'NAME_FULL', value: 'João Souza Silva'},\n                    {name: 'NAME_FIRST', value: 'João'},\n                    {name: 'NAME_LAST', value: 'Souza Silva'},\n                    {name: 'NAME_LAST_FIRST', value: 'Souza'},\n                    {name: 'NAME_LAST_SECOND', value: 'Silva'},\n                    {name: 'COMPANY_NAME', value: 'Empresa Falsa'},\n                    {name: 'ADDRESS_HOME_STREET_ADDRESS', value: 'Rua Inexistente, 2000\\nAndar 2, Apartamento 1'},\n                    {name: 'ADDRESS_HOME_STREET_LOCATION', value: 'Rua Inexistente, 2000'},\n                    {name: 'ADDRESS_HOME_STREET_NAME', value: 'Rua Inexistente'},\n                    {name: 'ADDRESS_HOME_HOUSE_NUMBER', value: '2000'},\n                    {name: 'ADDRESS_HOME_SUBPREMISE', value: 'Andar 2, Apartamento 1'},\n                    {name: 'ADDRESS_HOME_APT_NUM', value: '1'},\n                    {name: 'ADDRESS_HOME_FLOOR', value: '2'},\n                    {name: 'ADDRESS_HOME_APT', value: 'Apartamento 1'},\n                    {name: 'ADDRESS_HOME_APT_TYPE', value: 'Apartamento'},\n                    {name: 'ADDRESS_HOME_APT_NUM', value: '1'},\n                    {name: 'ADDRESS_HOME_DEPENDENT_LOCALITY', value: 'Santa Efigênia'},\n                    {name: 'ADDRESS_HOME_LANDMARK', value: 'Próximo à estação Santa Efigênia'},\n                    {name: 'ADDRESS_HOME_OVERFLOW', value: 'Andar 2, Apartamento 1'},\n                    {name: 'ADDRESS_HOME_ZIP', value: '30260-080'},\n                    {name: 'ADDRESS_HOME_CITY', value: 'Belo Horizonte'},\n                    {name: 'ADDRESS_HOME_STATE', value: 'MG'},\n                    {name: 'EMAIL_ADDRESS', value: 'teste@exemplo.us'},\n                    {name: 'PHONE_HOME_WHOLE_NUMBER', value: '+553121286800'},\n                  ],\n                },\n                {\n                  fields: [\n                    {name: 'ADDRESS_HOME_COUNTRY', value: 'MX'},\n                    {name: 'NAME_FULL', value: 'Juan Francisco García Flores'},\n                    {name: 'NAME_FIRST', value: 'Juan Francisco'},\n                    {name: 'NAME_LAST', value: 'García Flores'},\n                    {name: 'NAME_LAST_FIRST', value: 'García'},\n                    {name: 'NAME_LAST_SECOND', value: 'Flores'},\n                    {name: 'COMPANY_NAME', value: 'Empresa Falsa'},\n                    {\n                      name: 'ADDRESS_HOME_STREET_ADDRESS',\n                      value:\n                          'C. Falsa 445\\nPiso 2, Apartamento 1\\nEntre calle Volcán y calle Montes Blancos, cerca de la estación de metro',\n                    },\n                    {name: 'ADDRESS_HOME_STREET_LOCATION', value: 'C. Falsa 445'},\n                    {name: 'ADDRESS_HOME_STREET_NAME', value: 'C. Falsa'},\n                    {name: 'ADDRESS_HOME_HOUSE_NUMBER', value: '445'},\n                    {name: 'ADDRESS_HOME_SUBPREMISE', value: 'Piso 2, Apartamento 1'},\n                    {name: 'ADDRESS_HOME_FLOOR', value: '2'},\n                    {name: 'ADDRESS_HOME_APT', value: 'Apartamento 1'},\n                    {name: 'ADDRESS_HOME_APT_TYPE', value: 'Apartamento'},\n                    {name: 'ADDRESS_HOME_APT_NUM', value: '1'},\n                    {name: 'ADDRESS_HOME_DEPENDENT_LOCALITY', value: 'Lomas de Chapultepec'},\n                    {\n                      name: 'ADDRESS_HOME_OVERFLOW',\n                      value: 'Entre calle Volcán y calle Montes Celestes, cerca de la estación de metro',\n                    },\n                    {\n                      name: 'ADDRESS_HOME_BETWEEN_STREETS_OR_LANDMARK',\n                      value: 'Entre calle Volcán y calle Montes Blancos, cerca de la estación de metro',\n                    },\n                    {name: 'ADDRESS_HOME_LANDMARK', value: 'Cerca de la estación de metro'},\n                    {name: 'ADDRESS_HOME_BETWEEN_STREETS', value: 'Entre calle Volcán y calle Montes Blancos'},\n                    {name: 'ADDRESS_HOME_BETWEEN_STREETS_1', value: 'calle Volcán'},\n                    {name: 'ADDRESS_HOME_BETWEEN_STREETS_2', value: 'calle Montes Blancos'},\n                    {name: 'ADDRESS_HOME_ADMIN_LEVEL2', value: 'Miguel Hidalgo'},\n                    {name: 'ADDRESS_HOME_ZIP', value: '11001'},\n                    {name: 'ADDRESS_HOME_CITY', value: 'Ciudad de México'},\n                    {name: 'ADDRESS_HOME_STATE', value: 'Distrito Federal'},\n                    {name: 'EMAIL_ADDRESS', value: 'ejemplo@ejemplo.mx'},\n                    {name: 'PHONE_HOME_WHOLE_NUMBER', value: '+525553428400'},\n                  ],\n                },\n                {\n                  fields: [\n                    {name: 'ADDRESS_HOME_COUNTRY', value: 'DE'},\n                    {name: 'NAME_FULL', value: 'Gottfried Wilhelm Leibniz'},\n                    {name: 'NAME_FIRST', value: 'Gottfried'},\n                    {name: 'NAME_MIDDLE', value: 'Wilhelm'},\n                    {name: 'NAME_LAST', value: 'Leibniz'},\n                    {name: 'COMPANY_NAME', value: 'Erfundenes Unternehmen'},\n                    {name: 'ADDRESS_HOME_LINE1', value: 'Erfundene Straße 33'},\n                    {name: 'ADDRESS_HOME_LINE2', value: 'Wohnung 1'},\n                    {name: 'ADDRESS_HOME_ZIP', value: '80732'},\n                    {name: 'ADDRESS_HOME_CITY', value: 'München'},\n                    {name: 'EMAIL_ADDRESS', value: 'test@beispiel.de'},\n                    {name: 'PHONE_HOME_WHOLE_NUMBER', value: '+4930303986300'},\n                  ],\n                },\n              ] :\n              [],\n        });\n  }\n\n  enable(): void {\n    if (this.#enabled || Host.InspectorFrontendHost.isUnderTest()) {\n      return;\n    }\n    void this.agent.invoke_enable();\n    this.#setTestAddresses();\n    this.#enabled = true;\n  }\n\n  disable(): void {\n    if (!this.#enabled || Host.InspectorFrontendHost.isUnderTest()) {\n      return;\n    }\n    this.#enabled = false;\n    void this.agent.invoke_disable();\n  }\n\n  addressFormFilled(addressFormFilledEvent: Protocol.Autofill.AddressFormFilledEvent): void {\n    this.dispatchEventToListeners(Events.ADDRESS_FORM_FILLED, {autofillModel: this, event: addressFormFilledEvent});\n  }\n}\n\nSDKModel.register(AutofillModel, {capabilities: Capability.DOM, autostart: true});\n\nexport const enum Events {\n  ADDRESS_FORM_FILLED = 'AddressFormFilled',\n}\n\nexport interface AddressFormFilledEvent {\n  autofillModel: AutofillModel;\n  event: Protocol.Autofill.AddressFormFilledEvent;\n}\n\nexport interface EventTypes {\n  [Events.ADDRESS_FORM_FILLED]: AddressFormFilledEvent;\n}\n", "// Copyright 2021 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nexport const enum Category {\n  ANIMATION = 'animation',\n  AUCTION_WORKLET = 'auction-worklet',\n  CANVAS = 'canvas',\n  CLIPBOARD = 'clipboard',\n  CONTROL = 'control',\n  DEVICE = 'device',\n  DOM_MUTATION = 'dom-mutation',\n  DRAG_DROP = 'drag-drop',\n  GEOLOCATION = 'geolocation',\n  KEYBOARD = 'keyboard',\n  LOAD = 'load',\n  MEDIA = 'media',\n  MOUSE = 'mouse',\n  NOTIFICATION = 'notification',\n  PARSE = 'parse',\n  PICTURE_IN_PICTURE = 'picture-in-picture',\n  POINTER = 'pointer',\n  SCRIPT = 'script',\n  SHARED_STORAGE_WORKLET = 'shared-storage-worklet',\n  TIMER = 'timer',\n  TOUCH = 'touch',\n  TRUSTED_TYPE_VIOLATION = 'trusted-type-violation',\n  WEB_AUDIO = 'web-audio',\n  WINDOW = 'window',\n  WORKER = 'worker',\n  XHR = 'xhr',\n}\n\nexport class CategorizedBreakpoint {\n  /**\n   * The name of this breakpoint as passed to 'setInstrumentationBreakpoint',\n   * 'setEventListenerBreakpoint' and 'setBreakOnCSPViolation'.\n   *\n   * Note that the backend adds a 'listener:' and 'instrumentation:' prefix\n   * to this name in the 'Debugger.paused' CDP event.\n   */\n  readonly name: string;\n\n  readonly #category: Category;\n  #enabled: boolean;\n\n  constructor(category: Category, name: string) {\n    this.#category = category;\n    this.name = name;\n    this.#enabled = false;\n  }\n\n  category(): Category {\n    return this.#category;\n  }\n\n  enabled(): boolean {\n    return this.#enabled;\n  }\n\n  setEnabled(enabled: boolean): void {\n    this.#enabled = enabled;\n  }\n}\n", "// Copyright 2018 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as i18n from '../../core/i18n/i18n.js';\nimport type * as ProtocolProxyApi from '../../generated/protocol-proxy-api.js';\nimport type * as Protocol from '../../generated/protocol.js';\nimport * as Common from '../common/common.js';\nimport * as Host from '../host/host.js';\n\nimport {PrimaryPageChangeType, ResourceTreeModel} from './ResourceTreeModel.js';\nimport {SDKModel} from './SDKModel.js';\nimport {SecurityOriginManager} from './SecurityOriginManager.js';\nimport {StorageKeyManager} from './StorageKeyManager.js';\nimport {Capability, type Target, Type} from './Target.js';\nimport {Events as TargetManagerEvents, type TargetManager} from './TargetManager.js';\n\nconst UIStrings = {\n  /**\n   * @description Text that refers to the main target. The main target is the primary webpage that\n   * DevTools is connected to. This text is used in various places in the UI as a label/name to inform\n   * the user which target/webpage they are currently connected to, as DevTools may connect to multiple\n   * targets at the same time in some scenarios.\n   */\n  main: 'Main',\n} as const;\nconst str_ = i18n.i18n.registerUIStrings('core/sdk/ChildTargetManager.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\n\nexport class ChildTargetManager extends SDKModel<EventTypes> implements ProtocolProxyApi.TargetDispatcher {\n  readonly #targetManager: TargetManager;\n  #parentTarget: Target;\n  readonly #targetAgent: ProtocolProxyApi.TargetApi;\n  readonly #targetInfos = new Map<Protocol.Target.TargetID, Protocol.Target.TargetInfo>();\n  readonly #childTargetsBySessionId = new Map<Protocol.Target.SessionID, Target>();\n  readonly #childTargetsById = new Map<Protocol.Target.TargetID|'main', Target>();\n  #parentTargetId: Protocol.Target.TargetID|null = null;\n\n  constructor(parentTarget: Target) {\n    super(parentTarget);\n    this.#targetManager = parentTarget.targetManager();\n    this.#parentTarget = parentTarget;\n    this.#targetAgent = parentTarget.targetAgent();\n    parentTarget.registerTargetDispatcher(this);\n    const browserTarget = this.#targetManager.browserTarget();\n    if (browserTarget) {\n      if (browserTarget !== parentTarget) {\n        void browserTarget.targetAgent().invoke_autoAttachRelated(\n            {targetId: parentTarget.id() as Protocol.Target.TargetID, waitForDebuggerOnStart: true});\n      }\n    } else if (parentTarget.type() === Type.NODE) {\n      void this.#targetAgent.invoke_setAutoAttach({autoAttach: true, waitForDebuggerOnStart: true, flatten: false});\n    } else {\n      void this.#targetAgent.invoke_setAutoAttach({autoAttach: true, waitForDebuggerOnStart: true, flatten: true});\n    }\n\n    if (parentTarget.parentTarget()?.type() !== Type.FRAME && !Host.InspectorFrontendHost.isUnderTest()) {\n      void this.#targetAgent.invoke_setDiscoverTargets({discover: true});\n      void this.#targetAgent.invoke_setRemoteLocations({locations: [{host: 'localhost', port: 9229}]});\n    }\n  }\n\n  static install(attachCallback?: ((arg0: {\n                                     target: Target,\n                                     waitingForDebugger: boolean,\n                                   }) => Promise<void>)): void {\n    ChildTargetManager.attachCallback = attachCallback;\n    SDKModel.register(ChildTargetManager, {capabilities: Capability.TARGET, autostart: true});\n  }\n\n  childTargets(): Target[] {\n    return Array.from(this.#childTargetsBySessionId.values());\n  }\n\n  override async suspendModel(): Promise<void> {\n    await this.#targetAgent.invoke_setAutoAttach({autoAttach: true, waitForDebuggerOnStart: false, flatten: true});\n  }\n\n  override async resumeModel(): Promise<void> {\n    await this.#targetAgent.invoke_setAutoAttach({autoAttach: true, waitForDebuggerOnStart: true, flatten: true});\n  }\n\n  override dispose(): void {\n    for (const sessionId of this.#childTargetsBySessionId.keys()) {\n      this.detachedFromTarget({sessionId, targetId: undefined});\n    }\n  }\n\n  targetCreated({targetInfo}: Protocol.Target.TargetCreatedEvent): void {\n    this.#targetInfos.set(targetInfo.targetId, targetInfo);\n    this.fireAvailableTargetsChanged();\n    this.dispatchEventToListeners(Events.TARGET_CREATED, targetInfo);\n  }\n\n  targetInfoChanged({targetInfo}: Protocol.Target.TargetInfoChangedEvent): void {\n    this.#targetInfos.set(targetInfo.targetId, targetInfo);\n    const target = this.#childTargetsById.get(targetInfo.targetId);\n    if (target) {\n      void target.setHasCrashed(false);\n      if (target.targetInfo()?.subtype === 'prerender' && !targetInfo.subtype) {\n        const resourceTreeModel = target.model(ResourceTreeModel);\n        target.updateTargetInfo(targetInfo);\n        if (resourceTreeModel?.mainFrame) {\n          resourceTreeModel.primaryPageChanged(resourceTreeModel.mainFrame, PrimaryPageChangeType.ACTIVATION);\n        }\n        target.setName(i18nString(UIStrings.main));\n      } else {\n        target.updateTargetInfo(targetInfo);\n      }\n    }\n    this.fireAvailableTargetsChanged();\n    this.dispatchEventToListeners(Events.TARGET_INFO_CHANGED, targetInfo);\n  }\n\n  targetDestroyed({targetId}: Protocol.Target.TargetDestroyedEvent): void {\n    this.#targetInfos.delete(targetId);\n    this.fireAvailableTargetsChanged();\n    this.dispatchEventToListeners(Events.TARGET_DESTROYED, targetId);\n  }\n\n  targetCrashed({targetId}: Protocol.Target.TargetCrashedEvent): void {\n    const target = this.#childTargetsById.get(targetId);\n    if (target) {\n      target.setHasCrashed(true);\n    }\n  }\n\n  private fireAvailableTargetsChanged(): void {\n    this.#targetManager.dispatchEventToListeners(\n        TargetManagerEvents.AVAILABLE_TARGETS_CHANGED, [...this.#targetInfos.values()]);\n  }\n\n  async getParentTargetId(): Promise<Protocol.Target.TargetID> {\n    if (!this.#parentTargetId) {\n      this.#parentTargetId = (await this.#parentTarget.targetAgent().invoke_getTargetInfo({})).targetInfo.targetId;\n    }\n    return this.#parentTargetId;\n  }\n\n  async getTargetInfo(): Promise<Protocol.Target.TargetInfo> {\n    return (await this.#parentTarget.targetAgent().invoke_getTargetInfo({})).targetInfo;\n  }\n\n  async attachedToTarget({sessionId, targetInfo, waitingForDebugger}: Protocol.Target.AttachedToTargetEvent):\n      Promise<void> {\n    if (this.#parentTargetId === targetInfo.targetId) {\n      return;\n    }\n    let type = Type.BROWSER;\n    let targetName = '';\n    if (targetInfo.type === 'worker' && targetInfo.title && targetInfo.title !== targetInfo.url) {\n      targetName = targetInfo.title;\n    } else if (!['page', 'iframe', 'webview'].includes(targetInfo.type)) {\n      const KNOWN_FRAME_PATTERNS = [\n        '^chrome://print/$',\n        '^chrome://file-manager/',\n        '^chrome://feedback/',\n        '^chrome://.*\\\\.top-chrome/$',\n        '^chrome://view-cert/$',\n        '^devtools://',\n      ];\n      if (KNOWN_FRAME_PATTERNS.some(p => targetInfo.url.match(p))) {\n        type = Type.FRAME;\n      } else {\n        const parsedURL = Common.ParsedURL.ParsedURL.fromString(targetInfo.url);\n        targetName =\n            parsedURL ? parsedURL.lastPathComponentWithFragment() : '#' + (++ChildTargetManager.lastAnonymousTargetId);\n      }\n    }\n\n    if (targetInfo.type === 'iframe' || targetInfo.type === 'webview') {\n      type = Type.FRAME;\n    } else if (targetInfo.type === 'background_page' || targetInfo.type === 'app' || targetInfo.type === 'popup_page') {\n      type = Type.FRAME;\n    } else if (targetInfo.type === 'page') {\n      type = Type.FRAME;\n    } else if (targetInfo.type === 'browser_ui') {\n      type = Type.FRAME;\n    } else if (targetInfo.type === 'worker') {\n      type = Type.Worker;\n    } else if (targetInfo.type === 'worklet') {\n      type = Type.WORKLET;\n    } else if (targetInfo.type === 'shared_worker') {\n      type = Type.SHARED_WORKER;\n    } else if (targetInfo.type === 'shared_storage_worklet') {\n      type = Type.SHARED_STORAGE_WORKLET;\n    } else if (targetInfo.type === 'service_worker') {\n      type = Type.ServiceWorker;\n    } else if (targetInfo.type === 'auction_worklet') {\n      type = Type.AUCTION_WORKLET;\n    } else if (targetInfo.type === 'node_worker') {\n      type = Type.NODE_WORKER;\n    }\n    const target = this.#targetManager.createTarget(\n        targetInfo.targetId, targetName, type, this.#parentTarget, sessionId, undefined, undefined, targetInfo);\n    this.#childTargetsBySessionId.set(sessionId, target);\n    this.#childTargetsById.set(target.id(), target);\n\n    if (ChildTargetManager.attachCallback) {\n      await ChildTargetManager.attachCallback({target, waitingForDebugger});\n    }\n\n    // [crbug/1423096] Invoking this on a worker session that is not waiting for the debugger can force the worker\n    // to resume even if there is another session waiting for the debugger.\n    if (waitingForDebugger) {\n      void target.runtimeAgent().invoke_runIfWaitingForDebugger();\n    }\n\n    // For top-level workers (those not attached to a frame), we need to\n    // initialize their storage context manually. The `Capability.STORAGE` is\n    // only granted in `Target.ts` to workers that are not parented by a frame,\n    // which makes this check safe. Frame-associated workers have their storage\n    // managed by ResourceTreeModel.\n    if (type !== Type.FRAME && target.hasAllCapabilities(Capability.STORAGE)) {\n      await this.initializeStorage(target);\n    }\n  }\n\n  private async initializeStorage(target: Target): Promise<void> {\n    const storageAgent = target.storageAgent();\n    const response = await storageAgent.invoke_getStorageKey({});\n\n    const storageKey = response.storageKey;\n    if (response.getError() || !storageKey) {\n      console.error(`Failed to get storage key for target ${target.id()}: ${response.getError()}`);\n      return;\n    }\n\n    const storageKeyManager = target.model(StorageKeyManager);\n    if (storageKeyManager) {\n      storageKeyManager.setMainStorageKey(storageKey);\n      storageKeyManager.updateStorageKeys(new Set([storageKey]));\n    }\n\n    const securityOriginManager = target.model(SecurityOriginManager);\n    if (securityOriginManager) {\n      const origin = new URL(storageKey).origin;\n      securityOriginManager.setMainSecurityOrigin(origin, '');\n      securityOriginManager.updateSecurityOrigins(new Set([origin]));\n    }\n  }\n\n  detachedFromTarget({sessionId}: Protocol.Target.DetachedFromTargetEvent): void {\n    const target = this.#childTargetsBySessionId.get(sessionId);\n    if (target) {\n      target.dispose('target terminated');\n      this.#childTargetsBySessionId.delete(sessionId);\n      this.#childTargetsById.delete(target.id());\n    }\n  }\n\n  receivedMessageFromTarget({}: Protocol.Target.ReceivedMessageFromTargetEvent): void {\n    // We use flatten protocol.\n  }\n\n  targetInfos(): Protocol.Target.TargetInfo[] {\n    return Array.from(this.#targetInfos.values());\n  }\n\n  private static lastAnonymousTargetId = 0;\n\n  private static attachCallback?: ((arg0: {\n                                     target: Target,\n                                     waitingForDebugger: boolean,\n                                   }) => Promise<void>);\n}\n\nexport const enum Events {\n  TARGET_CREATED = 'TargetCreated',\n  TARGET_DESTROYED = 'TargetDestroyed',\n  TARGET_INFO_CHANGED = 'TargetInfoChanged',\n}\n\nexport interface EventTypes {\n  [Events.TARGET_CREATED]: Protocol.Target.TargetInfo;\n  [Events.TARGET_DESTROYED]: Protocol.Target.TargetID;\n  [Events.TARGET_INFO_CHANGED]: Protocol.Target.TargetInfo;\n}\n", "// Copyright 2011 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as TextUtils from '../../models/text_utils/text_utils.js';\nimport type * as Common from '../common/common.js';\nimport * as i18n from '../i18n/i18n.js';\nimport type * as Platform from '../platform/platform.js';\n\nimport {PageResourceLoader, type PageResourceLoadInitiator} from './PageResourceLoader.js';\n\nconst UIStrings = {\n  /**\n   * @description Error message when failing to fetch a resource referenced in a source map\n   * @example {https://example.com/sourcemap.map} PH1\n   * @example {An error occurred} PH2\n   */\n  couldNotLoadContentForSS: 'Could not load content for {PH1} ({PH2})',\n} as const;\n\nconst str_ = i18n.i18n.registerUIStrings('core/sdk/CompilerSourceMappingContentProvider.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\n\nexport class CompilerSourceMappingContentProvider implements TextUtils.ContentProvider.ContentProvider {\n  readonly #sourceURL: Platform.DevToolsPath.UrlString;\n  readonly #contentType: Common.ResourceType.ResourceType;\n  readonly #initiator: PageResourceLoadInitiator;\n\n  constructor(\n      sourceURL: Platform.DevToolsPath.UrlString, contentType: Common.ResourceType.ResourceType,\n      initiator: PageResourceLoadInitiator) {\n    this.#sourceURL = sourceURL;\n    this.#contentType = contentType;\n    this.#initiator = initiator;\n  }\n\n  contentURL(): Platform.DevToolsPath.UrlString {\n    return this.#sourceURL;\n  }\n\n  contentType(): Common.ResourceType.ResourceType {\n    return this.#contentType;\n  }\n\n  async requestContentData(): Promise<TextUtils.ContentData.ContentDataOrError> {\n    try {\n      const {content} = await PageResourceLoader.instance().loadResource(this.#sourceURL, this.#initiator);\n      return new TextUtils.ContentData.ContentData(\n          content, /* isBase64=*/ false, this.#contentType.canonicalMimeType());\n    } catch (e) {\n      const error = i18nString(UIStrings.couldNotLoadContentForSS, {PH1: this.#sourceURL, PH2: e.message});\n      console.error(error);\n      return {error};\n    }\n  }\n\n  async searchInContent(query: string, caseSensitive: boolean, isRegex: boolean):\n      Promise<TextUtils.ContentProvider.SearchMatch[]> {\n    const contentData = await this.requestContentData();\n    return TextUtils.TextUtils.performSearchInContentData(contentData, query, caseSensitive, isRegex);\n  }\n}\n", "// Copyright 2015 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as i18n from '../../core/i18n/i18n.js';\nimport * as Common from '../common/common.js';\nimport * as Host from '../host/host.js';\nimport type * as Platform from '../platform/platform.js';\nimport * as ProtocolClient from '../protocol_client/protocol_client.js';\nimport * as Root from '../root/root.js';\n\nimport {RehydratingConnectionTransport} from './RehydratingConnection.js';\n\nconst UIStrings = {\n  /**\n   * @description Text on the remote debugging window to indicate the connection is lost\n   */\n  websocketDisconnected: 'WebSocket disconnected',\n} as const;\nconst str_ = i18n.i18n.registerUIStrings('core/sdk/Connections.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\nexport class MainConnection implements ProtocolClient.ConnectionTransport.ConnectionTransport {\n  onMessage: ((arg0: Object|string) => void)|null = null;\n  #onDisconnect: ((arg0: string) => void)|null = null;\n  #messageBuffer = '';\n  #messageSize = 0;\n  readonly #eventListeners: Common.EventTarget.EventDescriptor[];\n  constructor() {\n    this.#eventListeners = [\n      Host.InspectorFrontendHost.InspectorFrontendHostInstance.events.addEventListener(\n          Host.InspectorFrontendHostAPI.Events.DispatchMessage, this.dispatchMessage, this),\n      Host.InspectorFrontendHost.InspectorFrontendHostInstance.events.addEventListener(\n          Host.InspectorFrontendHostAPI.Events.DispatchMessageChunk, this.dispatchMessageChunk, this),\n    ];\n  }\n\n  setOnMessage(onMessage: (arg0: Object|string) => void): void {\n    this.onMessage = onMessage;\n  }\n\n  setOnDisconnect(onDisconnect: (arg0: string) => void): void {\n    this.#onDisconnect = onDisconnect;\n  }\n\n  sendRawMessage(message: string): void {\n    if (this.onMessage) {\n      Host.InspectorFrontendHost.InspectorFrontendHostInstance.sendMessageToBackend(message);\n    }\n  }\n\n  private dispatchMessage(event: Common.EventTarget.EventTargetEvent<string>): void {\n    if (this.onMessage) {\n      this.onMessage.call(null, event.data);\n    }\n  }\n\n  private dispatchMessageChunk(\n      event: Common.EventTarget.EventTargetEvent<Host.InspectorFrontendHostAPI.DispatchMessageChunkEvent>): void {\n    const {messageChunk, messageSize} = event.data;\n    if (messageSize) {\n      this.#messageBuffer = '';\n      this.#messageSize = messageSize;\n    }\n    this.#messageBuffer += messageChunk;\n    if (this.#messageBuffer.length === this.#messageSize && this.onMessage) {\n      this.onMessage.call(null, this.#messageBuffer);\n      this.#messageBuffer = '';\n      this.#messageSize = 0;\n    }\n  }\n\n  async disconnect(): Promise<void> {\n    const onDisconnect = this.#onDisconnect;\n    Common.EventTarget.removeEventListeners(this.#eventListeners);\n    this.#onDisconnect = null;\n    this.onMessage = null;\n\n    if (onDisconnect) {\n      onDisconnect.call(null, 'force disconnect');\n    }\n  }\n}\n\nexport class WebSocketTransport implements ProtocolClient.ConnectionTransport.ConnectionTransport {\n  #socket: WebSocket|null;\n  onMessage: ((arg0: Object|string) => void)|null = null;\n  #onDisconnect: ((arg0: string) => void)|null = null;\n  #onWebSocketDisconnect: ((message: Platform.UIString.LocalizedString) => void)|null;\n  #connected = false;\n  #messages: string[] = [];\n  constructor(\n      url: Platform.DevToolsPath.UrlString,\n      onWebSocketDisconnect: (message: Platform.UIString.LocalizedString) => void) {\n    this.#socket = new WebSocket(url);\n    this.#socket.onerror = this.onError.bind(this);\n    this.#socket.onopen = this.onOpen.bind(this);\n    this.#socket.onmessage = (messageEvent: MessageEvent<string>): void => {\n      if (this.onMessage) {\n        this.onMessage.call(null, messageEvent.data);\n      }\n    };\n    this.#socket.onclose = this.onClose.bind(this);\n\n    this.#onWebSocketDisconnect = onWebSocketDisconnect;\n  }\n\n  setOnMessage(onMessage: (arg0: Object|string) => void): void {\n    this.onMessage = onMessage;\n  }\n\n  setOnDisconnect(onDisconnect: (arg0: string) => void): void {\n    this.#onDisconnect = onDisconnect;\n  }\n\n  private onError(): void {\n    if (this.#onWebSocketDisconnect) {\n      this.#onWebSocketDisconnect.call(null, i18nString(UIStrings.websocketDisconnected));\n    }\n    if (this.#onDisconnect) {\n      // This is called if error occurred while connecting.\n      this.#onDisconnect.call(null, 'connection failed');\n    }\n    this.close();\n  }\n\n  private onOpen(): void {\n    this.#connected = true;\n    if (this.#socket) {\n      this.#socket.onerror = console.error;\n      for (const message of this.#messages) {\n        this.#socket.send(message);\n      }\n    }\n    this.#messages = [];\n  }\n\n  private onClose(): void {\n    if (this.#onWebSocketDisconnect) {\n      this.#onWebSocketDisconnect.call(null, i18nString(UIStrings.websocketDisconnected));\n    }\n    if (this.#onDisconnect) {\n      this.#onDisconnect.call(null, 'websocket closed');\n    }\n    this.close();\n  }\n\n  private close(callback?: (() => void)): void {\n    if (this.#socket) {\n      this.#socket.onerror = null;\n      this.#socket.onopen = null;\n      this.#socket.onclose = callback || null;\n      this.#socket.onmessage = null;\n      this.#socket.close();\n      this.#socket = null;\n    }\n    this.#onWebSocketDisconnect = null;\n  }\n\n  sendRawMessage(message: string): void {\n    if (this.#connected && this.#socket) {\n      this.#socket.send(message);\n    } else {\n      this.#messages.push(message);\n    }\n  }\n\n  disconnect(): Promise<void> {\n    return new Promise(fulfill => {\n      this.close(() => {\n        if (this.#onDisconnect) {\n          this.#onDisconnect.call(null, 'force disconnect');\n        }\n        fulfill();\n      });\n    });\n  }\n}\n\nexport class StubTransport implements ProtocolClient.ConnectionTransport.ConnectionTransport {\n  onMessage: ((arg0: Object|string) => void)|null = null;\n  #onDisconnect: ((arg0: string) => void)|null = null;\n\n  setOnMessage(onMessage: (arg0: Object|string) => void): void {\n    this.onMessage = onMessage;\n  }\n\n  setOnDisconnect(onDisconnect: (arg0: string) => void): void {\n    this.#onDisconnect = onDisconnect;\n  }\n\n  sendRawMessage(message: string): void {\n    window.setTimeout(this.respondWithError.bind(this, message), 0);\n  }\n\n  private respondWithError(message: string): void {\n    const messageObject = JSON.parse(message);\n    const error = {\n      message: 'This is a stub connection, can\\'t dispatch message.',\n      code: ProtocolClient.CDPConnection.CDPErrorStatus.DEVTOOLS_STUB_ERROR,\n      data: messageObject,\n    };\n    if (this.onMessage) {\n      this.onMessage.call(null, {id: messageObject.id, error});\n    }\n  }\n\n  async disconnect(): Promise<void> {\n    if (this.#onDisconnect) {\n      this.#onDisconnect.call(null, 'force disconnect');\n    }\n    this.#onDisconnect = null;\n    this.onMessage = null;\n  }\n}\n\nexport async function initMainConnection(\n    createRootTarget: () => Promise<void>,\n    onConnectionLost: (message: Platform.UIString.LocalizedString) => void): Promise<void> {\n  ProtocolClient.ConnectionTransport.ConnectionTransport.setFactory(createMainTransport.bind(null, onConnectionLost));\n  await createRootTarget();\n  Host.InspectorFrontendHost.InspectorFrontendHostInstance.connectionReady();\n}\n\nfunction createMainTransport(onConnectionLost: (message: Platform.UIString.LocalizedString) => void):\n    ProtocolClient.ConnectionTransport.ConnectionTransport {\n  if (Root.Runtime.Runtime.isTraceApp()) {\n    return new RehydratingConnectionTransport(onConnectionLost);\n  }\n\n  const wsParam = Root.Runtime.Runtime.queryParam('ws');\n  const wssParam = Root.Runtime.Runtime.queryParam('wss');\n  if (wsParam || wssParam) {\n    const ws = (wsParam ? `ws://${wsParam}` : `wss://${wssParam}`) as Platform.DevToolsPath.UrlString;\n    return new WebSocketTransport(ws, onConnectionLost);\n  }\n\n  const notEmbeddedOrWs = Host.InspectorFrontendHost.InspectorFrontendHostInstance.isHostedMode();\n  if (notEmbeddedOrWs) {\n    // eg., hosted mode (e.g. `http://localhost:9222/devtools/inspector.html`) without a WebSocket URL,\n    return new StubTransport();\n  }\n\n  return new MainConnection();\n}\n", "// Copyright 2024 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\n/**\n * This file is the implementation of a protocol `Connection` object\n *  which is central to the rehydrated devtools feature. The premise of\n * this feature is that the enhanced traces will contain enough\n * information to power this class with all metadata needed. This class\n * then interacts with rehydrated devtools in a way that produces the\n * equivalent result as live debugging session.\n *\n * It's much more of a state machine than the other Connection\n * implementations, which simply interact with a network protocol in\n * one way or another.\n *\n * Note on the methodology to derive runtime/debugger domain behavior below:\n * We can use protocol monitor in the devtools to look at how dt-fe\n * communicates with the backend, and it's also how majority of the behavior\n * in the rehydrated sesion was derived at the first place. In the event of\n * adding more support and capability to rehydrated session, developers will\n * want to look at protocol monitor to imitate the behavior in a real session\n *\n */\n\nimport type * as Protocol from '../../generated/protocol.js';\nimport * as Common from '../common/common.js';\nimport * as i18n from '../i18n/i18n.js';\nimport type * as Platform from '../platform/platform.js';\nimport type * as ProtocolClient from '../protocol_client/protocol_client.js';\nimport * as Root from '../root/root.js';\n\nimport * as EnhancedTraces from './EnhancedTracesParser.js';\nimport type {\n  ProtocolMessage, RehydratingExecutionContext, RehydratingResource, RehydratingScript, RehydratingTarget,\n  ServerMessage} from './RehydratingObject.js';\nimport {TraceObject} from './TraceObject.js';\n\nconst UIStrings = {\n  /**\n   * @description Text that appears when no source text is available for the given script\n   */\n  noSourceText: 'No source text available',\n  /**\n   * @description Text to indicate rehydrating connection cannot find host window\n   */\n  noHostWindow: 'Can not find host window',\n  /**\n   * @description Text to indicate that there is an error loading the log\n   */\n  errorLoadingLog: 'Error loading log',\n} as const;\nconst str_ = i18n.i18n.registerUIStrings('core/sdk/RehydratingConnection.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\n\nexport interface RehydratingConnectionInterface {\n  postToFrontend: (arg: ServerMessage) => void;\n}\n\nexport const enum RehydratingConnectionState {\n  UNINITIALIZED = 1,\n  INITIALIZED = 2,\n  REHYDRATED = 3,\n}\n\nexport class RehydratingConnectionTransport implements ProtocolClient.ConnectionTransport.ConnectionTransport {\n  rehydratingConnectionState: RehydratingConnectionState = RehydratingConnectionState.UNINITIALIZED;\n  onDisconnect: ((arg0: string) => void)|null = null;\n  onMessage: ((arg0: Object) => void)|null = null;\n  trace: TraceObject|null = null;\n  sessions = new Map<number, RehydratingSessionBase>();\n  #onConnectionLost: (message: Platform.UIString.LocalizedString) => void;\n  #rehydratingWindow = window;\n  #onReceiveHostWindowPayloadBound = this.onReceiveHostWindowPayload.bind(this);\n\n  constructor(onConnectionLost: (message: Platform.UIString.LocalizedString) => void) {\n    this.#onConnectionLost = onConnectionLost;\n    if (!this.#maybeHandleLoadingFromUrl()) {\n      this.#setupMessagePassing();\n    }\n  }\n\n  /** Returns true if found a trace URL. */\n  #maybeHandleLoadingFromUrl(): boolean {\n    let traceUrl = Root.Runtime.Runtime.queryParam('traceURL');\n\n    if (!traceUrl) {\n      // For compatibility, handle the older loadTimelineFromURL.\n      const timelineUrl = Root.Runtime.Runtime.queryParam('loadTimelineFromURL');\n      if (timelineUrl) {\n        // It was double-URI encoded for some reason.\n        traceUrl = decodeURIComponent(timelineUrl);\n      }\n    }\n\n    if (traceUrl) {\n      void fetch(traceUrl).then(r => r.arrayBuffer()).then(b => Common.Gzip.arrayBufferToString(b)).then(traceJson => {\n        const trace = new TraceObject(JSON.parse(traceJson));\n        void this.startHydration(trace);\n      });\n      return true;\n    }\n\n    return false;\n  }\n\n  #setupMessagePassing(): void {\n    this.#rehydratingWindow.addEventListener('message', this.#onReceiveHostWindowPayloadBound);\n    if (this.#rehydratingWindow.opener) {\n      this.#rehydratingWindow.opener.postMessage({type: 'REHYDRATING_WINDOW_READY'});\n    } else if (this.#rehydratingWindow !== window.top) {\n      this.#rehydratingWindow.parent.postMessage({type: 'REHYDRATING_IFRAME_READY'}, '*');\n    } else {\n      this.#onConnectionLost(i18nString(UIStrings.noHostWindow));\n    }\n  }\n\n  /**\n   * This is a callback for rehydrated session to receive payload from host window. Payload includes but not limited to\n   * the trace event and all necessary data to power a rehydrated session.\n   */\n  onReceiveHostWindowPayload(event: MessageEvent): void {\n    if (event.data.type === 'REHYDRATING_TRACE_FILE') {\n      const traceJson = event.data.traceJson as string;\n      let trace;\n      try {\n        trace = new TraceObject(JSON.parse(traceJson));\n      } catch {\n        this.#onConnectionLost(i18nString(UIStrings.errorLoadingLog));\n        return;\n      }\n      void this.startHydration(trace);\n    }\n    this.#rehydratingWindow.removeEventListener('message', this.#onReceiveHostWindowPayloadBound);\n  }\n\n  async startHydration(trace: TraceObject): Promise<boolean> {\n    // OnMessage should've been set before hydration, and the connection should\n    // be initialized and not hydrated already.\n    if (!this.onMessage || this.rehydratingConnectionState !== RehydratingConnectionState.INITIALIZED) {\n      return false;\n    }\n\n    if (!('traceEvents' in trace)) {\n      console.error('RehydratingConnection failed to initialize due to missing trace events in payload');\n      return false;\n    }\n\n    this.trace = trace;\n    const enhancedTracesParser = new EnhancedTraces.EnhancedTracesParser(trace);\n    const hydratingData = enhancedTracesParser.data();\n\n    let sessionId = 0;\n    // Set up default rehydrating session.\n    this.sessions.set(sessionId, new RehydratingSessionBase(this));\n    for (const hydratingDataPerTarget of hydratingData) {\n      const target = hydratingDataPerTarget.target;\n      const executionContexts = hydratingDataPerTarget.executionContexts;\n      const scripts = hydratingDataPerTarget.scripts;\n      const resources = hydratingDataPerTarget.resources;\n      this.postToFrontend({\n        method: 'Target.targetCreated',\n        params: {\n          targetInfo: {\n            targetId: target.targetId,\n            type: target.type,\n            title: target.url,\n            url: target.url,\n            attached: false,\n            canAccessOpener: false,\n          },\n        },\n      });\n\n      sessionId += 1;\n      const session = new RehydratingSession(sessionId, target, executionContexts, scripts, resources, this);\n      this.sessions.set(sessionId, session);\n      session.declareSessionAttachedToTarget();\n    }\n    await this.#onRehydrated();\n    return true;\n  }\n\n  async #onRehydrated(): Promise<void> {\n    if (!this.trace) {\n      return;\n    }\n\n    this.rehydratingConnectionState = RehydratingConnectionState.REHYDRATED;\n    // Use revealer to load trace into performance panel\n    await Common.Revealer.reveal(this.trace);\n  }\n\n  setOnMessage(onMessage: (arg0: Object|string) => void): void {\n    this.onMessage = onMessage;\n    this.rehydratingConnectionState = RehydratingConnectionState.INITIALIZED;\n  }\n\n  setOnDisconnect(onDisconnect: (arg0: string) => void): void {\n    this.onDisconnect = onDisconnect;\n  }\n\n  // The function \"sendRawMessage\" is typically devtools front-end\n  // sending message to the backend via CDP. In this case, given that Rehydrating\n  // connection is an emulation of devtool back-end, sendRawMessage here\n  // is in fact rehydrating connection directly handling and acting on the\n  // receieved message.\n  sendRawMessage(message: string|object): void {\n    if (typeof message === 'string') {\n      message = JSON.parse(message);\n    }\n    const data = message as ProtocolMessage;\n    if (typeof data.sessionId !== 'undefined') {\n      const session = this.sessions.get(data.sessionId);\n      if (session) {\n        session.handleFrontendMessageAsFakeCDPAgent(data);\n      } else {\n        console.error('Invalid SessionId: ' + data.sessionId);\n      }\n    } else {\n      this.sessions.get(0)?.handleFrontendMessageAsFakeCDPAgent(data);\n    }\n  }\n\n  // Posting rehydrating connection's message/response\n  // to devtools frontend through debugger protocol.\n  postToFrontend(arg: ServerMessage): void {\n    if (this.onMessage) {\n      this.onMessage(arg);\n    } else {\n      // onMessage should be set before the connection is rehydrated\n      console.error('onMessage was not initialized');\n    }\n  }\n\n  disconnect(): Promise<void> {\n    return Promise.reject();\n  }\n}\n\n/** Default rehydrating session with default responses. **/\nclass RehydratingSessionBase {\n  connection: RehydratingConnectionInterface|null = null;\n\n  constructor(connection: RehydratingConnectionInterface) {\n    this.connection = connection;\n  }\n\n  sendMessageToFrontend(payload: ServerMessage): void {\n    // The frontend doesn't expect CDP responses within the same synchronous event loop, so it breaks unexpectedly.\n    //  Any async boundary will do, so we use setTimeout.\n    setTimeout(() => {\n      this.connection?.postToFrontend(payload);\n    });\n  }\n\n  handleFrontendMessageAsFakeCDPAgent(data: ProtocolMessage): void {\n    // Send default response in default session.\n    this.sendMessageToFrontend({\n      id: data.id,\n      result: {},\n    });\n  }\n}\n\nexport class RehydratingSession extends RehydratingSessionBase {\n  sessionId: number;\n  target: RehydratingTarget;\n  executionContexts: RehydratingExecutionContext[] = [];\n  scripts: RehydratingScript[] = [];\n  resources: RehydratingResource[] = [];\n\n  constructor(\n      sessionId: number, target: RehydratingTarget, executionContexts: RehydratingExecutionContext[],\n      scripts: RehydratingScript[], resources: RehydratingResource[], connection: RehydratingConnectionInterface) {\n    super(connection);\n    this.sessionId = sessionId;\n    this.target = target;\n    this.executionContexts = executionContexts;\n    this.scripts = scripts;\n    this.resources = resources;\n  }\n\n  override sendMessageToFrontend(payload: ServerMessage, attachSessionId = true): void {\n    // Attach the session's Id to the message.\n    if (this.sessionId !== 0 && attachSessionId) {\n      payload.sessionId = this.sessionId;\n    }\n    super.sendMessageToFrontend(payload);\n  }\n\n  override handleFrontendMessageAsFakeCDPAgent(data: ProtocolMessage): void {\n    switch (data.method) {\n      case 'Runtime.enable':\n        this.handleRuntimeEnabled(data.id);\n        break;\n      case 'Debugger.enable':\n        this.handleDebuggerEnable(data.id);\n        break;\n      case 'CSS.enable':\n        this.sendMessageToFrontend({\n          id: data.id,\n          result: {},\n        });\n        break;\n      case 'Debugger.getScriptSource':\n        if (data.params) {\n          const params = data.params as Protocol.Debugger.GetScriptSourceRequest;\n          this.handleDebuggerGetScriptSource(data.id, params.scriptId);\n        }\n        break;\n      case 'Page.getResourceTree':\n        this.handleGetResourceTree(data.id);\n        break;\n      case 'Page.getResourceContent': {\n        const request = data.params as unknown as Protocol.Page.GetResourceContentRequest;\n        this.handleGetResourceContent(request.frameId, request.url, data.id);\n        break;\n      }\n      case 'CSS.getStyleSheetText': {\n        const request = data.params as unknown as Protocol.CSS.GetStyleSheetTextRequest;\n        this.handleGetStyleSheetText(request.styleSheetId, data.id);\n        break;\n      }\n      default:\n        this.sendMessageToFrontend({\n          id: data.id,\n          result: {},\n        });\n        break;\n    }\n  }\n\n  declareSessionAttachedToTarget(): void {\n    this.sendMessageToFrontend(\n        {\n          method: 'Target.attachedToTarget',\n          params: {\n            sessionId: this.sessionId,\n            waitingForDebugger: false,\n            targetInfo: {\n              targetId: this.target.targetId,\n              type: this.target.type,\n              title: this.target.url,\n              url: this.target.url,\n              attached: true,\n              canAccessOpener: false,\n            },\n          },\n        },\n        /* attachSessionId */ false);\n  }\n\n  // Runtime.Enable indicates that Runtime domain is flushing the event to communicate\n  // the current state with the backend. In rehydrating connection, we made up the artificial\n  // execution context to support the rehydrated session.\n  private handleRuntimeEnabled(id: number): void {\n    for (const executionContext of this.executionContexts) {\n      executionContext.name = executionContext.origin;\n      this.sendMessageToFrontend({\n        method: 'Runtime.executionContextCreated',\n        params: {\n          context: executionContext,\n        },\n      });\n    }\n\n    this.sendMessageToFrontend({\n      id,\n      result: {},\n    });\n  }\n\n  private handleDebuggerGetScriptSource(id: number, scriptId: Protocol.Runtime.ScriptId): void {\n    const script = this.scripts.find(script => script.scriptId === scriptId);\n    if (!script) {\n      console.error('No script for id: ' + scriptId);\n      return;\n    }\n    this.sendMessageToFrontend({\n      id,\n      result: {\n        scriptSource: typeof script.sourceText === 'undefined' ? i18nString(UIStrings.noSourceText) : script.sourceText,\n      },\n    });\n  }\n\n  // Debugger.Enable indicates that Debugger domain is flushing the event to communicate\n  // the current state with the backend. In rehydrating connection, we made up the artificial\n  // script parsed event to communicate the current script state and respond with a mock\n  // debugger id.\n  private handleDebuggerEnable(id: number): void {\n    const htmlResourceUrls = new Set(this.resources.filter(r => r.mimeType === 'text/html').map(r => r.url));\n\n    for (const script of this.scripts) {\n      // Handle inline scripts.\n      if (htmlResourceUrls.has(script.url)) {\n        script.embedderName = script.url;\n        // We don't have the actual embedded offset from this trace event. Non-zero\n        // values are important though: that is what `Script.isInlineScript()`\n        // checks. Otherwise these scripts would try to show individually within the\n        // Sources panel.\n        script.startColumn = 1;\n        script.startLine = 1;\n        script.endColumn = 1;\n        script.endLine = 1;\n      }\n\n      this.sendMessageToFrontend({\n        method: 'Debugger.scriptParsed',\n        params: script,\n      });\n    }\n\n    const mockDebuggerId = '7777777777777777777.8888888888888888888';\n    this.sendMessageToFrontend({\n      id,\n      result: {\n        debuggerId: mockDebuggerId,\n      },\n    });\n  }\n\n  private handleGetResourceTree(id: number): void {\n    const resources = this.resources.filter(r => r.mimeType === 'text/html' || r.mimeType === 'text/css');\n    if (!resources.length) {\n      return;\n    }\n\n    const frameTree = {\n      frame: {\n        id: this.target.targetId,\n        url: this.target.url,\n      },\n      childFrames: [],\n      resources: resources.map(r => ({\n                                 url: r.url,\n                                 type: r.mimeType === 'text/html' ? 'Document' : 'Stylesheet',\n                                 mimeType: r.mimeType,\n                                 contentSize: r.content.length,\n                               })),\n    };\n\n    this.sendMessageToFrontend({\n      id,\n      result: {\n        frameTree,\n      },\n    });\n\n    const stylesheets = this.resources.filter(r => r.mimeType === 'text/css');\n    for (const stylesheet of stylesheets) {\n      this.sendMessageToFrontend({\n        method: 'CSS.styleSheetAdded',\n        params: {\n          header: {\n            styleSheetId: `sheet.${stylesheet.frame}.${stylesheet.url}`,\n            frameId: stylesheet.frame,\n            sourceURL: stylesheet.url,\n          },\n        },\n      });\n    }\n  }\n\n  private handleGetResourceContent(frame: string, url: string, id: number): void {\n    const resource = this.resources.find(r => r.frame === frame && r.url === url);\n    if (!resource) {\n      return;\n    }\n\n    this.sendMessageToFrontend({\n      id,\n      result: {\n        content: resource.content,\n        base64Encoded: false,\n      },\n    });\n  }\n\n  private handleGetStyleSheetText(stylesheetId: string, id: number): void {\n    const resource = this.resources.find(r => `sheet.${r.frame}.${r.url}` === stylesheetId);\n    if (!resource) {\n      return;\n    }\n\n    this.sendMessageToFrontend({\n      id,\n      result: {\n        text: resource.content,\n      },\n    });\n  }\n}\n", "// Copyright 2024 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport type * as Protocol from '../../generated/protocol.js';\nimport * as Common from '../common/common.js';\nimport type * as Platform from '../platform/platform.js';\nimport {UserVisibleError} from '../platform/platform.js';\n\nimport type {\n  HydratingDataPerTarget, RehydratingExecutionContext, RehydratingResource, RehydratingScript, RehydratingTarget} from\n  './RehydratingObject.js';\nimport type {SourceMapV3} from './SourceMap.js';\nimport type {TraceObject} from './TraceObject.js';\n\ninterface EventBase {\n  cat: string;\n  pid: number;\n  args: {data: object};\n  name: string;\n}\n\n/**\n * While called 'TargetRundown', this event is emitted for each script that is compiled or evaluated.\n * Within EnhancedTraceParser, this event is used to construct targets and execution contexts (and to associate scripts to frames).\n *\n * See `inspector_target_rundown_event::Data` https://source.chromium.org/chromium/chromium/src/+/main:third_party/blink/renderer/core/inspector/inspector_trace_events.cc;l=1189-1232;drc=48d6f7175422b2c969c14258f9f8d5b196c28d18\n */\nexport interface RundownScriptCompiled extends EventBase {\n  cat: 'disabled-by-default-devtools.target-rundown';\n  name: 'ScriptCompiled'|'ModuleEvaluated';\n  args: {\n    data: {\n      frame: Protocol.Page.FrameId,\n      frameType: 'page'|'iframe',\n      url: string,\n      /**\n       * Older traces were a number, but this is an unsigned 64 bit value, so that was a bug.\n       * New traces use string instead. See https://crbug.com/447654178.\n       */\n      isolate: string|number,\n      /** AKA V8ContextToken. https://source.chromium.org/chromium/chromium/src/+/main:third_party/blink/renderer/core/inspector/inspector_trace_events.cc;l=1229;drc=3c88f61e18b043e70c225d8d57c77832a85e7f58 */\n      v8context: string,\n      origin: string,\n      scriptId: number,\n      /** script->World().isMainWorld() */\n      isDefault?: boolean,\n      contextType?: 'default'|'isolated'|'worker',\n    },\n  };\n}\n/**\n * When profiling starts, all currently loaded scripts are emitted via this event.\n *\n * See `Script::TraceScriptRundown()` https://source.chromium.org/chromium/chromium/src/+/main:v8/src/objects/script.cc;l=184-220;drc=328f6c467b940f322544567740c9c871064d045c\n */\nexport interface RundownScript extends EventBase {\n  cat: 'disabled-by-default-devtools.v8-source-rundown';\n  name: 'ScriptCatchup';\n  args: {\n    data: {\n      /**\n       * Older traces were a number, but this is an unsigned 64 bit value, so that was a bug.\n       * New traces use string instead. See https://crbug.com/447654178.\n       */\n      isolate: string|number,\n      executionContextId: Protocol.Runtime.ExecutionContextId,\n      scriptId: number,\n      isModule: boolean,\n      /** aka HasSourceURLComment */\n      hasSourceUrl: boolean,\n      // These don't actually get set in v8.\n      url?: string,\n      hash?: string,\n      /** value of the sourceURL comment. */\n      sourceUrl?: string,\n      /* value of the sourceMappingURL comment */\n      sourceMapUrl?: string,\n      /** If true, the source map url was a data URL, so the `sourceMapUrl` was removed. */\n      sourceMapUrlElided?: boolean,\n      startLine?: number,\n      startColumn?: number,\n      endLine?: number,\n      endColumn?: number,\n    },\n  };\n}\n\nexport interface RundownScriptSource extends EventBase {\n  cat: 'disabled-by-default-devtools.v8-source-rundown-sources';\n  name: 'ScriptCatchup'|'LargeScriptCatchup'|'TooLargeScriptCatchup';\n  args: {\n    data: {\n      isolate: number,\n      scriptId: number,\n      length?: number,\n      sourceText?: string,\n    },\n  };\n}\n\ninterface TracingStartedInBrowser extends EventBase {\n  cat: 'disabled-by-default-devtools.timeline';\n  args: {\n    data: {\n      frames: [{\n        frame: Protocol.Page.FrameId,\n        isInPrimaryMainFrame: boolean,\n        isOutermostMainFrame: boolean,\n        parent: Protocol.Page.FrameId,\n        processId: number,\n        url: string,\n        pid: number,\n      }],\n    },\n  };\n}\n\ninterface FunctionCall extends EventBase {\n  cat: 'devtools.timeline';\n  args: {\n    data: {\n      frame: Protocol.Page.FrameId,\n      scriptId: Protocol.Runtime.ScriptId,\n      /**\n       * Older traces were a number, but this is an unsigned 64 bit value, so that was a bug.\n       * New traces use string instead. See https://crbug.com/447654178.\n       */\n      isolate?: string|number,\n    },\n  };\n}\n\nexport class EnhancedTracesParser {\n  #trace: TraceObject;\n  #scriptRundownEvents: RundownScript[] = [];\n  #scriptToV8Context: Map<string, string> = new Map<string, string>();\n  #scriptToFrame: Map<string, Protocol.Page.FrameId> = new Map<string, Protocol.Page.FrameId>();\n  #scriptToScriptSource: Map<string, string> = new Map<string, string>();\n  #largeScriptToScriptSource: Map<string, string[]> = new Map<string, string[]>();\n  #scriptToSourceLength: Map<string, number> = new Map<string, number>();\n  #targets: RehydratingTarget[] = [];\n  #executionContexts: RehydratingExecutionContext[] = [];\n  #scripts: RehydratingScript[] = [];\n  #resources: RehydratingResource[] = [];\n  static readonly enhancedTraceVersion: number = 1;\n\n  constructor(trace: TraceObject) {\n    this.#trace = trace;\n\n    // Initialize with the trace provided.\n    try {\n      this.parseEnhancedTrace();\n    } catch (e) {\n      throw new UserVisibleError.UserVisibleError(e);\n    }\n  }\n\n  parseEnhancedTrace(): void {\n    for (const event of this.#trace.traceEvents) {\n      if (this.isTracingStartedInBrowser(event)) {\n        // constructs all targets by devtools.timeline TracingStartedInBrowser\n        const data = event.args?.data;\n        for (const frame of data.frames) {\n          if (frame.url === 'about:blank') {\n            continue;\n          }\n          if (!frame.isInPrimaryMainFrame) {\n            continue;\n          }\n\n          const frameId = frame.frame as string as Protocol.Target.TargetID;\n          if (!this.#targets.find(target => target.targetId === frameId)) {\n            const frameType = frame.isOutermostMainFrame ? 'page' : 'iframe';\n            this.#targets.push({\n              targetId: frameId,\n              type: frameType,\n              pid: frame.processId,\n              url: frame.url,\n            });\n          }\n        }\n      } else if (this.isFunctionCallEvent(event)) {\n        // constructs all script to frame mapping with devtools.timeline FunctionCall\n        const data = event.args?.data;\n        if (data.isolate) {\n          this.#scriptToFrame.set(this.getScriptIsolateId(data.isolate, data.scriptId), data.frame);\n        }\n      } else if (this.isRundownScriptCompiled(event)) {\n        // Set up script to v8 context mapping\n        const data = event.args?.data;\n        this.#scriptToV8Context.set(this.getScriptIsolateId(data.isolate, data.scriptId), data.v8context);\n        this.#scriptToFrame.set(this.getScriptIsolateId(data.isolate, data.scriptId), data.frame);\n        // All the targets should've been added by the TracingStartedInBrowser event, but just in case we're missing some there\n        const frameId = data.frame as string as Protocol.Target.TargetID;\n        if (!this.#targets.find(target => target.targetId === frameId)) {\n          this.#targets.push({\n            targetId: frameId,\n            type: data.frameType,\n            isolate: String(data.isolate),\n            pid: event.pid,\n            url: data.url,\n          });\n        }\n        // Add execution context, need to put back execution context id with info from other traces\n        if (!this.#executionContexts.find(executionContext => executionContext.v8Context === data.v8context)) {\n          this.#executionContexts.push({\n            id: -1 as Protocol.Runtime.ExecutionContextId,\n            origin: data.origin,\n            v8Context: data.v8context,\n            auxData: {\n              frameId: data.frame,\n              isDefault: data.isDefault,\n              type: data.contextType,\n            },\n            isolate: String(data.isolate),\n            name: data.origin,\n            uniqueId: `${data.v8context}-${data.isolate}`,\n          });\n        }\n      } else if (this.isRundownScript(event)) {\n        this.#scriptRundownEvents.push(event);\n        const data = event.args.data;\n        // Add script\n        if (!this.#scripts.find(\n                script => script.scriptId === String(data.scriptId) && script.isolate === String(data.isolate))) {\n          this.#scripts.push({\n            scriptId: String(data.scriptId) as Protocol.Runtime.ScriptId,\n            isolate: String(data.isolate),\n            buildId: '',\n            executionContextId: data.executionContextId,\n            startLine: data.startLine ?? 0,\n            startColumn: data.startColumn ?? 0,\n            endLine: data.endLine ?? 0,\n            endColumn: data.endColumn ?? 0,\n            hash: data.hash ?? '',\n            isModule: data.isModule,\n            url: data.url ?? '',\n            hasSourceURL: data.hasSourceUrl,\n            sourceURL: data.sourceUrl ?? '',\n            sourceMapURL: data.sourceMapUrl,\n            pid: event.pid,\n          });\n        }\n      } else if (this.isRundownScriptSource(event)) {\n        // Set up script to source text and length mapping\n        const data = event.args.data;\n        const scriptIsolateId = this.getScriptIsolateId(data.isolate, data.scriptId);\n        if ('splitIndex' in data && 'splitCount' in data) {\n          if (!this.#largeScriptToScriptSource.has(scriptIsolateId)) {\n            this.#largeScriptToScriptSource.set(scriptIsolateId, new Array(data.splitCount).fill('') as string[]);\n          }\n          const splittedSource = this.#largeScriptToScriptSource.get(scriptIsolateId);\n          if (splittedSource && data.sourceText) {\n            splittedSource[data.splitIndex as number] = data.sourceText;\n          }\n        } else {\n          if (data.sourceText) {\n            this.#scriptToScriptSource.set(scriptIsolateId, data.sourceText);\n          }\n          if (data.length) {\n            this.#scriptToSourceLength.set(scriptIsolateId, data.length);\n          }\n        }\n      }\n    }\n  }\n\n  data(): HydratingDataPerTarget[] {\n    // Put back execution context id\n    const v8ContextToExecutionContextId: Map<string, Protocol.Runtime.ExecutionContextId> =\n        new Map<string, Protocol.Runtime.ExecutionContextId>();\n    this.#scriptRundownEvents.forEach(scriptRundownEvent => {\n      const data = scriptRundownEvent.args.data;\n      const v8Context = this.#scriptToV8Context.get(this.getScriptIsolateId(data.isolate, data.scriptId));\n      if (v8Context) {\n        v8ContextToExecutionContextId.set(v8Context, data.executionContextId);\n      }\n    });\n    this.#executionContexts.forEach(executionContext => {\n      if (executionContext.v8Context) {\n        const id = v8ContextToExecutionContextId.get(executionContext.v8Context);\n        if (id) {\n          executionContext.id = id;\n        }\n      }\n    });\n\n    // Put back script source text and length\n    this.#scripts.forEach(script => {\n      const scriptIsolateId = this.getScriptIsolateId(script.isolate, script.scriptId);\n      if (this.#scriptToScriptSource.has(scriptIsolateId)) {\n        script.sourceText = this.#scriptToScriptSource.get(scriptIsolateId);\n        script.length = this.#scriptToSourceLength.get(scriptIsolateId);\n      } else if (this.#largeScriptToScriptSource.has(scriptIsolateId)) {\n        const splittedSources = this.#largeScriptToScriptSource.get(scriptIsolateId);\n        if (splittedSources) {\n          script.sourceText = splittedSources.join('');\n          script.length = script.sourceText.length;\n        }\n      }\n      // put in the aux data\n      const linkedExecutionContext = this.#executionContexts.find(\n          context => context.id === script.executionContextId && context.isolate === script.isolate);\n      if (linkedExecutionContext) {\n        script.executionContextAuxData = linkedExecutionContext.auxData;\n        // If a script successfully mapped to an execution context and aux data, link script to frame\n        if (script.executionContextAuxData?.frameId) {\n          this.#scriptToFrame.set(scriptIsolateId, script.executionContextAuxData?.frameId);\n        }\n      }\n    });\n\n    for (const script of this.#scripts) {\n      // Resolve the source map from the provided metadata.\n      // If no map is found for a given source map url, no source map is passed to the debugger model.\n      // Encoded as a data url so that the debugger model makes no network request.\n      // NOTE: consider passing directly as object and hacking `parsedScriptSource` in DebuggerModel.ts to handle\n      // this fake event. Would avoid a lot of wasteful (de)serialization. Maybe add SDK.Script.hydratedSourceMap.\n      this.resolveSourceMap(script);\n    }\n\n    this.#resources = this.#trace.metadata.resources ?? [];\n\n    return this.groupContextsAndScriptsUnderTarget(\n        this.#targets, this.#executionContexts, this.#scripts, this.#resources);\n  }\n\n  private resolveSourceMap(script: RehydratingScript): void {\n    if (script.sourceMapURL?.startsWith('data:')) {\n      return;\n    }\n\n    const sourceMap = this.getSourceMapFromMetadata(script);\n    if (!sourceMap) {\n      return;\n    }\n\n    // Note: this encoding + re-parsing overhead cost ~10ms per 1MB of JSON on my\n    // Mac M1 Pro.\n    // See https://crrev.com/c/6490409/comments/f294c12a_69781e24\n    const payload = encodeURIComponent(JSON.stringify(sourceMap));\n    script.sourceMapURL = `data:application/json;charset=utf-8,${payload}`;\n  }\n\n  private getSourceMapFromMetadata(script: RehydratingScript): SourceMapV3|undefined {\n    const {hasSourceURL, sourceURL, url, sourceMapURL, isolate, scriptId} = script;\n\n    if (!sourceMapURL || !this.#trace.metadata.sourceMaps) {\n      return;\n    }\n\n    const frame =\n        this.#scriptToFrame.get(this.getScriptIsolateId(isolate, scriptId)) as string as Protocol.Target.TargetID;\n    if (!frame) {\n      return;\n    }\n\n    const target = this.#targets.find(t => t.targetId === frame);\n    if (!target) {\n      return;\n    }\n\n    let resolvedSourceUrl = url;\n    if (hasSourceURL && sourceURL) {\n      const targetUrl = target.url as Platform.DevToolsPath.UrlString;\n      resolvedSourceUrl = Common.ParsedURL.ParsedURL.completeURL(targetUrl, sourceURL) ?? sourceURL;\n    }\n\n    // Resolve the source map url. The value given by v8 may be relative, so resolve it here.\n    // This process should match the one in `SourceMapManager.attachSourceMap`.\n    const resolvedSourceMapUrl =\n        Common.ParsedURL.ParsedURL.completeURL(resolvedSourceUrl as Platform.DevToolsPath.UrlString, sourceMapURL);\n    if (!resolvedSourceMapUrl) {\n      return;\n    }\n\n    const {sourceMap} = this.#trace.metadata.sourceMaps.find(m => m.sourceMapUrl === resolvedSourceMapUrl) ?? {};\n    return sourceMap;\n  }\n\n  private getScriptIsolateId(isolate: number|string, scriptId: Protocol.Runtime.ScriptId|number): string {\n    return `${scriptId}@${isolate}`;\n  }\n\n  private getExecutionContextIsolateId(isolate: number|string, executionContextId: Protocol.Runtime.ExecutionContextId):\n      string {\n    return `${executionContextId}@${isolate}`;\n  }\n\n  private isTraceEvent(event: unknown): event is EventBase {\n    return 'cat' in (event as EventBase) && 'pid' in (event as EventBase) && 'args' in (event as EventBase) &&\n        'data' in (event as EventBase).args;\n  }\n\n  private isRundownScriptCompiled(event: unknown): event is RundownScriptCompiled {\n    return this.isTraceEvent(event) && event.cat === 'disabled-by-default-devtools.target-rundown';\n  }\n\n  private isRundownScript(event: unknown): event is RundownScript {\n    return this.isTraceEvent(event) && event.cat === 'disabled-by-default-devtools.v8-source-rundown';\n  }\n\n  private isRundownScriptSource(event: unknown): event is RundownScriptSource {\n    return this.isTraceEvent(event) && event.cat === 'disabled-by-default-devtools.v8-source-rundown-sources';\n  }\n\n  private isTracingStartedInBrowser(event: unknown): event is TracingStartedInBrowser {\n    return this.isTraceEvent(event) && event.cat === 'disabled-by-default-devtools.timeline' &&\n        event.name === 'TracingStartedInBrowser';\n  }\n\n  private isFunctionCallEvent(event: unknown): event is FunctionCall {\n    return this.isTraceEvent(event) && event.cat === 'devtools.timeline' && event.name === 'FunctionCall';\n  }\n\n  private groupContextsAndScriptsUnderTarget(\n      targets: RehydratingTarget[], executionContexts: RehydratingExecutionContext[], scripts: RehydratingScript[],\n      resources: RehydratingResource[]): HydratingDataPerTarget[] {\n    const data: HydratingDataPerTarget[] = [];\n    const targetIds = new Set<Protocol.Target.TargetID>();\n    const targetToExecutionContexts: Map<string, RehydratingExecutionContext[]> =\n        new Map<Protocol.Target.TargetID, RehydratingExecutionContext[]>();\n    // We want to keep track of how each execution context is linked to targets so we may use this\n    // information to link scripts with no target to a target\n    const executionContextIsolateToTarget: Map<string, Protocol.Target.TargetID> =\n        new Map<string, Protocol.Target.TargetID>();\n    const targetToScripts: Map<Protocol.Target.TargetID, RehydratingScript[]> =\n        new Map<Protocol.Target.TargetID, RehydratingScript[]>();\n    const orphanScripts: RehydratingScript[] = [];\n    const targetToResources: Map<Protocol.Target.TargetID, RehydratingResource[]> =\n        new Map<Protocol.Target.TargetID, RehydratingResource[]>();\n\n    // Initialize all the mapping needed\n    for (const target of targets) {\n      targetIds.add(target.targetId);\n      targetToExecutionContexts.set(target.targetId, []);\n      targetToScripts.set(target.targetId, []);\n      targetToResources.set(target.targetId, []);\n    }\n\n    // Put all of the known execution contexts under respective targets\n    for (const executionContext of executionContexts) {\n      const frameId = executionContext.auxData?.frameId as string as Protocol.Target.TargetID;\n      if (frameId && targetIds.has(frameId)) {\n        targetToExecutionContexts.get(frameId)?.push(executionContext);\n        executionContextIsolateToTarget.set(\n            this.getExecutionContextIsolateId(executionContext.isolate, executionContext.id), frameId);\n      } else {\n        console.error('Execution context can\\'t be linked to a target', executionContext);\n      }\n    }\n\n    // Put all of the scripts under respective targets with collected information\n    for (const script of scripts) {\n      const scriptExecutionContextIsolateId =\n          this.getExecutionContextIsolateId(script.isolate, script.executionContextId);\n      const scriptFrameId = script.executionContextAuxData?.frameId as string as Protocol.Target.TargetID;\n      if (script.executionContextAuxData?.frameId && targetIds.has(scriptFrameId)) {\n        targetToScripts.get(scriptFrameId)?.push(script);\n        executionContextIsolateToTarget.set(scriptExecutionContextIsolateId, scriptFrameId);\n      } else if (this.#scriptToFrame.has(this.getScriptIsolateId(script.isolate, script.scriptId))) {\n        const targetId = this.#scriptToFrame.get(this.getScriptIsolateId(script.isolate, script.scriptId)) as string as\n            Protocol.Target.TargetID;\n        if (targetId) {\n          targetToScripts.get(targetId)?.push(script);\n          executionContextIsolateToTarget.set(scriptExecutionContextIsolateId, targetId);\n        }\n      } else {\n        // These scripts are not linked to any target\n        orphanScripts.push(script);\n      }\n    }\n\n    // If a script is not linked to a target, use executionContext@isolate to link to a target\n    // Using PID is the last resort\n    for (const orphanScript of orphanScripts) {\n      const orphanScriptExecutionContextIsolateId =\n          this.getExecutionContextIsolateId(orphanScript.isolate, orphanScript.executionContextId);\n      const frameId = executionContextIsolateToTarget.get(orphanScriptExecutionContextIsolateId);\n\n      if (frameId) {\n        // Found a link via execution context, use it.\n        targetToScripts.get(frameId)?.push(orphanScript);\n      } else if (orphanScript.pid) {\n        const target = targets.find(target => target.pid === orphanScript.pid);\n        if (target) {\n          targetToScripts.get(target.targetId)?.push(orphanScript);\n        }\n      } else {\n        console.error('Script can\\'t be linked to any target', orphanScript);\n      }\n    }\n\n    for (const resource of resources) {\n      const frameId = resource.frame as Protocol.Target.TargetID;\n      if (targetIds.has(frameId)) {\n        targetToResources.get(frameId)?.push(resource);\n      }\n    }\n\n    // Now all the scripts are linked to a target, we want to make sure all the scripts are pointing to a valid\n    // execution context. If not, we will create an artificial execution context for the script\n    for (const target of targets) {\n      const targetId = target.targetId;\n      const executionContexts = targetToExecutionContexts.get(targetId) || [];\n      const scripts = targetToScripts.get(targetId) || [];\n      const resources = targetToResources.get(targetId) || [];\n      for (const script of scripts) {\n        if (!executionContexts.find(context => context.id === script.executionContextId)) {\n          const artificialContext: RehydratingExecutionContext = {\n            id: script.executionContextId,\n            origin: '',\n            v8Context: '',\n            name: '',\n            auxData: {\n              frameId: targetId as string as Protocol.Page.FrameId,\n              isDefault: false,\n              type: 'type',\n            },\n            isolate: script.isolate,\n            uniqueId: `${targetId}-${script.isolate}`,\n          };\n          executionContexts.push(artificialContext);\n        }\n      }\n\n      // Finally, we put all the information into the data structure we want to return as.\n      data.push({target, executionContexts, scripts, resources});\n    }\n\n    return data;\n  }\n}\n", "// Copyright 2024 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as Common from '../../core/common/common.js';\nimport type * as Platform from '../../core/platform/platform.js';\nimport type * as Protocol from '../../generated/protocol.js';\n\nimport type {NetworkRequest} from './NetworkRequest.js';\nimport type {RehydratingResource} from './RehydratingObject.js';\nimport {ResourceTreeModel} from './ResourceTreeModel.js';\nimport type {SourceMapV3} from './SourceMap.js';\n\n/** A thin wrapper class, mostly to enable instanceof-based revealing of traces to open in Timeline. **/\nexport class TraceObject {\n  readonly traceEvents: Protocol.Tracing.DataCollectedEvent['value'];\n  readonly metadata: {\n    sourceMaps?: Array<{sourceMapUrl: string, sourceMap: SourceMapV3, url: string}>,\n    resources?: RehydratingResource[],\n  };\n  constructor(payload: Protocol.Tracing.DataCollectedEvent['value']|TraceObject, meta?: Object) {\n    if (Array.isArray(payload)) {\n      this.traceEvents = payload;\n      this.metadata = meta ?? {};\n    } else {\n      this.traceEvents = payload.traceEvents;\n      this.metadata = payload.metadata;\n    }\n  }\n}\n\n/** Another thin wrapper class to enable revealing individual trace events (aka entries) in Timeline panel. **/\nexport class RevealableEvent {\n  // Only Trace.Types.Events.Event are passed in, but we can't depend on that type from SDK\n  /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n  constructor(public event: any) {\n  }\n}\n\n/**\n * Another wrapper class for revealing network requests in Network panel. The reason is the `Open in Network panel`\n * option is handled by the context menu provider, which will add this option for all supporting types. And there are a\n * lot of context menu providers that support `SDK.NetworkRequest.NetworkRequest`, for example `Override content` by\n * PersistenceActions, but we so far just want the one to reveal in network panel, so add a new class which will only be\n * supported by Network panel.\n *\n * Also we want to have a different behavior(select the network request) from the `SDK.NetworkRequest.NetworkRequest`\n * (highlight the network request once).\n */\nexport class RevealableNetworkRequest {\n  constructor(public networkRequest: NetworkRequest) {\n  }\n\n  // Only Trace.Types.Events.SyntheticNetworkRequest are passed in, but we can't depend on that type from SDK\n  static create(event: unknown): RevealableNetworkRequest|null {\n    const syntheticNetworkRequest = event;\n    // @ts-expect-error We don't have type checking here to confirm these events have .args.data.url.\n    const url = syntheticNetworkRequest.args.data.url as Platform.DevToolsPath.UrlString;\n    const urlWithoutHash = Common.ParsedURL.ParsedURL.urlWithoutHash(url) as Platform.DevToolsPath.UrlString;\n\n    const resource = ResourceTreeModel.resourceForURL(url) ?? ResourceTreeModel.resourceForURL(urlWithoutHash);\n    const sdkNetworkRequest = resource?.request;\n    return sdkNetworkRequest ? new RevealableNetworkRequest(sdkNetworkRequest) : null;\n  }\n}\n", "// Copyright 2011 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as Protocol from '../../generated/protocol.js';\nimport * as Common from '../common/common.js';\nimport * as Host from '../host/host.js';\nimport * as i18n from '../i18n/i18n.js';\nimport * as Platform from '../platform/platform.js';\n\nimport {FrontendMessageType} from './ConsoleModelTypes.js';\nimport {CPUProfilerModel, type EventData, Events as CPUProfilerModelEvents} from './CPUProfilerModel.js';\nimport {\n  BreakpointType,\n  COND_BREAKPOINT_SOURCE_URL,\n  Events as DebuggerModelEvents,\n  type Location,\n  LOGPOINT_SOURCE_URL,\n} from './DebuggerModel.js';\nimport {LogModel} from './LogModel.js';\nimport {RemoteObject} from './RemoteObject.js';\nimport {\n  Events as ResourceTreeModelEvents,\n  type PrimaryPageChangeType,\n  type ResourceTreeFrame,\n  ResourceTreeModel,\n} from './ResourceTreeModel.js';\nimport {\n  type ConsoleAPICall,\n  Events as RuntimeModelEvents,\n  type ExceptionWithTimestamp,\n  type ExecutionContext,\n  type QueryObjectRequestedEvent,\n  RuntimeModel,\n} from './RuntimeModel.js';\nimport {SDKModel} from './SDKModel.js';\nimport {Capability, type Target, Type} from './Target.js';\nimport {TargetManager} from './TargetManager.js';\n\nexport {FrontendMessageType} from './ConsoleModelTypes.js';\n\nconst UIStrings = {\n  /**\n   * @description Text shown when the main frame (page) of the website was navigated to a different URL.\n   * @example {https://example.com} PH1\n   */\n  navigatedToS: 'Navigated to {PH1}',\n  /**\n   * @description Text shown when the main frame (page) of the website was navigated to a different URL\n   * and the page was restored from back/forward cache (https://web.dev/bfcache/).\n   * @example {https://example.com} PH1\n   */\n  bfcacheNavigation: 'Navigation to {PH1} was restored from back/forward cache (see https://web.dev/bfcache/)',\n  /**\n   * @description Text shown in the console when a performance profile (with the given name) was started.\n   * @example {title} PH1\n   */\n  profileSStarted: 'Profile \\'\\'{PH1}\\'\\' started.',\n  /**\n   * @description Text shown in the console when a performance profile (with the given name) was stopped.\n   * @example {name} PH1\n   */\n  profileSFinished: 'Profile \\'\\'{PH1}\\'\\' finished.',\n  /**\n   * @description Error message shown in the console after the user tries to save a JavaScript value to a temporary variable.\n   */\n  failedToSaveToTempVariable: 'Failed to save to temp variable.',\n} as const;\n\nconst str_ = i18n.i18n.registerUIStrings('core/sdk/ConsoleModel.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\n\nexport class ConsoleModel extends SDKModel<EventTypes> {\n  #messages: ConsoleMessage[] = [];\n  readonly #messagesByTimestamp = new Platform.MapUtilities.Multimap<number, ConsoleMessage>();\n  readonly #messageByExceptionId = new Map<RuntimeModel, Map<number, ConsoleMessage>>();\n  #warnings = 0;\n  #errors = 0;\n  #violations = 0;\n  #pageLoadSequenceNumber = 0;\n  readonly #targetListeners = new WeakMap<Target, Common.EventTarget.EventDescriptor[]>();\n\n  constructor(target: Target) {\n    super(target);\n\n    const resourceTreeModel = target.model(ResourceTreeModel);\n    if (!resourceTreeModel || resourceTreeModel.cachedResourcesLoaded()) {\n      this.initTarget(target);\n      return;\n    }\n\n    const eventListener = resourceTreeModel.addEventListener(ResourceTreeModelEvents.CachedResourcesLoaded, () => {\n      Common.EventTarget.removeEventListeners([eventListener]);\n      this.initTarget(target);\n    });\n  }\n\n  private initTarget(target: Target): void {\n    const eventListeners = [];\n\n    const cpuProfilerModel = target.model(CPUProfilerModel);\n    if (cpuProfilerModel) {\n      eventListeners.push(cpuProfilerModel.addEventListener(\n          CPUProfilerModelEvents.CONSOLE_PROFILE_STARTED, this.consoleProfileStarted.bind(this, cpuProfilerModel)));\n      eventListeners.push(cpuProfilerModel.addEventListener(\n          CPUProfilerModelEvents.CONSOLE_PROFILE_FINISHED, this.consoleProfileFinished.bind(this, cpuProfilerModel)));\n    }\n\n    const resourceTreeModel = target.model(ResourceTreeModel);\n    if (resourceTreeModel && target.parentTarget()?.type() !== Type.FRAME) {\n      eventListeners.push(resourceTreeModel.addEventListener(\n          ResourceTreeModelEvents.PrimaryPageChanged, this.primaryPageChanged, this));\n    }\n\n    const runtimeModel = target.model(RuntimeModel);\n    if (runtimeModel) {\n      eventListeners.push(runtimeModel.addEventListener(\n          RuntimeModelEvents.ExceptionThrown, this.exceptionThrown.bind(this, runtimeModel)));\n      eventListeners.push(runtimeModel.addEventListener(\n          RuntimeModelEvents.ExceptionRevoked, this.exceptionRevoked.bind(this, runtimeModel)));\n      eventListeners.push(runtimeModel.addEventListener(\n          RuntimeModelEvents.ConsoleAPICalled, this.consoleAPICalled.bind(this, runtimeModel)));\n      if (target.parentTarget()?.type() !== Type.FRAME) {\n        eventListeners.push(runtimeModel.debuggerModel().addEventListener(\n            DebuggerModelEvents.GlobalObjectCleared, this.clearIfNecessary, this));\n      }\n      eventListeners.push(runtimeModel.addEventListener(\n          RuntimeModelEvents.QueryObjectRequested, this.queryObjectRequested.bind(this, runtimeModel)));\n    }\n\n    this.#targetListeners.set(target, eventListeners);\n  }\n\n  targetRemoved(target: Target): void {\n    const runtimeModel = target.model(RuntimeModel);\n    if (runtimeModel) {\n      this.#messageByExceptionId.delete(runtimeModel);\n    }\n    Common.EventTarget.removeEventListeners(this.#targetListeners.get(target) || []);\n  }\n\n  async evaluateCommandInConsole(\n      executionContext: ExecutionContext, originatingMessage: ConsoleMessage, expression: string,\n      useCommandLineAPI: boolean): Promise<void> {\n    const result = await executionContext.evaluate(\n        {\n          expression,\n          objectGroup: 'console',\n          includeCommandLineAPI: useCommandLineAPI,\n          silent: false,\n          returnByValue: false,\n          generatePreview: true,\n          replMode: true,\n          allowUnsafeEvalBlockedByCSP: false,\n        },\n        Common.Settings.Settings.instance().moduleSetting('console-user-activation-eval').get(),\n        /* awaitPromise */ false);\n    Host.userMetrics.actionTaken(Host.UserMetrics.Action.ConsoleEvaluated);\n    if ('error' in result) {\n      return;\n    }\n    await Common.Console.Console.instance().showPromise();\n    this.dispatchEventToListeners(\n        Events.CommandEvaluated,\n        {result: result.object, commandMessage: originatingMessage, exceptionDetails: result.exceptionDetails});\n  }\n\n  addCommandMessage(executionContext: ExecutionContext, text: string): ConsoleMessage {\n    const commandMessage = new ConsoleMessage(\n        executionContext.runtimeModel, Protocol.Log.LogEntrySource.Javascript, null, text,\n        {type: FrontendMessageType.Command});\n    commandMessage.setExecutionContextId(executionContext.id);\n    this.addMessage(commandMessage);\n    return commandMessage;\n  }\n\n  addMessage(msg: ConsoleMessage): void {\n    msg.setPageLoadSequenceNumber(this.#pageLoadSequenceNumber);\n    if (msg.source === Common.Console.FrontendMessageSource.ConsoleAPI &&\n        msg.type === Protocol.Runtime.ConsoleAPICalledEventType.Clear) {\n      this.clearIfNecessary();\n    }\n\n    this.#messages.push(msg);\n    this.#messagesByTimestamp.set(msg.timestamp, msg);\n    const runtimeModel = msg.runtimeModel();\n    const exceptionId = msg.getExceptionId();\n    if (exceptionId && runtimeModel) {\n      let modelMap = this.#messageByExceptionId.get(runtimeModel);\n      if (!modelMap) {\n        modelMap = new Map();\n        this.#messageByExceptionId.set(runtimeModel, modelMap);\n      }\n      modelMap.set(exceptionId, msg);\n    }\n    this.incrementErrorWarningCount(msg);\n    this.dispatchEventToListeners(Events.MessageAdded, msg);\n  }\n\n  private exceptionThrown(\n      runtimeModel: RuntimeModel, event: Common.EventTarget.EventTargetEvent<ExceptionWithTimestamp>): void {\n    const exceptionWithTimestamp = event.data;\n    const affectedResources = extractExceptionMetaData(exceptionWithTimestamp.details.exceptionMetaData);\n    const consoleMessage = ConsoleMessage.fromException(\n        runtimeModel, exceptionWithTimestamp.details, undefined, exceptionWithTimestamp.timestamp, undefined,\n        affectedResources);\n    consoleMessage.setExceptionId(exceptionWithTimestamp.details.exceptionId);\n    this.addMessage(consoleMessage);\n  }\n\n  private exceptionRevoked(runtimeModel: RuntimeModel, event: Common.EventTarget.EventTargetEvent<number>): void {\n    const exceptionId = event.data;\n    const modelMap = this.#messageByExceptionId.get(runtimeModel);\n    const exceptionMessage = modelMap ? modelMap.get(exceptionId) : null;\n    if (!exceptionMessage) {\n      return;\n    }\n    this.#errors--;\n    exceptionMessage.level = Protocol.Log.LogEntryLevel.Verbose;\n    this.dispatchEventToListeners(Events.MessageUpdated, exceptionMessage);\n  }\n\n  private consoleAPICalled(runtimeModel: RuntimeModel, event: Common.EventTarget.EventTargetEvent<ConsoleAPICall>):\n      void {\n    const call = event.data;\n    let level: Protocol.Log.LogEntryLevel = Protocol.Log.LogEntryLevel.Info;\n    if (call.type === Protocol.Runtime.ConsoleAPICalledEventType.Debug) {\n      level = Protocol.Log.LogEntryLevel.Verbose;\n    } else if (\n        call.type === Protocol.Runtime.ConsoleAPICalledEventType.Error ||\n        call.type === Protocol.Runtime.ConsoleAPICalledEventType.Assert) {\n      level = Protocol.Log.LogEntryLevel.Error;\n    } else if (call.type === Protocol.Runtime.ConsoleAPICalledEventType.Warning) {\n      level = Protocol.Log.LogEntryLevel.Warning;\n    } else if (\n        call.type === Protocol.Runtime.ConsoleAPICalledEventType.Info ||\n        call.type === Protocol.Runtime.ConsoleAPICalledEventType.Log) {\n      level = Protocol.Log.LogEntryLevel.Info;\n    }\n    let message = '';\n    if (call.args.length && call.args[0].unserializableValue) {\n      message = call.args[0].unserializableValue;\n    } else if (\n        call.args.length &&\n        ((typeof call.args[0].value !== 'object' && typeof call.args[0].value !== 'undefined') ||\n         call.args[0].value === null)) {\n      message = String(call.args[0].value);\n    } else if (call.args.length && call.args[0].description) {\n      message = call.args[0].description;\n    }\n    const callFrame = call.stackTrace?.callFrames.length ? call.stackTrace.callFrames[0] : null;\n    const details = {\n      type: call.type,\n      url: callFrame?.url as Platform.DevToolsPath.UrlString | undefined,\n      line: callFrame?.lineNumber,\n      column: callFrame?.columnNumber,\n      parameters: call.args,\n      stackTrace: call.stackTrace,\n      timestamp: call.timestamp,\n      executionContextId: call.executionContextId,\n      context: call.context,\n    };\n    const consoleMessage =\n        new ConsoleMessage(runtimeModel, Common.Console.FrontendMessageSource.ConsoleAPI, level, (message), details);\n    for (const msg of this.#messagesByTimestamp.get(consoleMessage.timestamp).values()) {\n      if (consoleMessage.isEqual(msg)) {\n        return;\n      }\n    }\n    this.addMessage(consoleMessage);\n  }\n\n  private queryObjectRequested(\n      runtimeModel: RuntimeModel, event: Common.EventTarget.EventTargetEvent<QueryObjectRequestedEvent>): void {\n    const {objects, executionContextId} = event.data;\n    const details = {\n      type: FrontendMessageType.QueryObjectResult,\n      parameters: [objects],\n      executionContextId,\n    };\n    const consoleMessage = new ConsoleMessage(\n        runtimeModel, Common.Console.FrontendMessageSource.ConsoleAPI, Protocol.Log.LogEntryLevel.Info, '', details);\n    this.addMessage(consoleMessage);\n  }\n\n  private clearIfNecessary(): void {\n    if (!Common.Settings.Settings.instance().moduleSetting('preserve-console-log').get()) {\n      this.clear();\n    }\n    ++this.#pageLoadSequenceNumber;\n  }\n\n  private primaryPageChanged(\n      event: Common.EventTarget.EventTargetEvent<{frame: ResourceTreeFrame, type: PrimaryPageChangeType}>): void {\n    if (Common.Settings.Settings.instance().moduleSetting('preserve-console-log').get()) {\n      const {frame} = event.data;\n      if (frame.backForwardCacheDetails.restoredFromCache) {\n        Common.Console.Console.instance().log(i18nString(UIStrings.bfcacheNavigation, {PH1: frame.url}));\n      } else {\n        Common.Console.Console.instance().log(i18nString(UIStrings.navigatedToS, {PH1: frame.url}));\n      }\n    }\n  }\n\n  private consoleProfileStarted(\n      cpuProfilerModel: CPUProfilerModel, event: Common.EventTarget.EventTargetEvent<EventData>): void {\n    const {data} = event;\n    this.addConsoleProfileMessage(\n        cpuProfilerModel, Protocol.Runtime.ConsoleAPICalledEventType.Profile, data.scriptLocation,\n        i18nString(UIStrings.profileSStarted, {PH1: data.title}));\n  }\n\n  private consoleProfileFinished(\n      cpuProfilerModel: CPUProfilerModel, event: Common.EventTarget.EventTargetEvent<EventData>): void {\n    const {data} = event;\n    this.addConsoleProfileMessage(\n        cpuProfilerModel, Protocol.Runtime.ConsoleAPICalledEventType.ProfileEnd, data.scriptLocation,\n        i18nString(UIStrings.profileSFinished, {PH1: data.title}));\n  }\n\n  private addConsoleProfileMessage(\n      cpuProfilerModel: CPUProfilerModel, type: MessageType, scriptLocation: Location, messageText: string): void {\n    const script = scriptLocation.script();\n    const callFrames = [{\n      functionName: '',\n      scriptId: scriptLocation.scriptId,\n      url: script ? script.contentURL() : '',\n      lineNumber: scriptLocation.lineNumber,\n      columnNumber: scriptLocation.columnNumber || 0,\n    }];\n    this.addMessage(new ConsoleMessage(\n        cpuProfilerModel.runtimeModel(), Common.Console.FrontendMessageSource.ConsoleAPI,\n        Protocol.Log.LogEntryLevel.Info, messageText, {type, stackTrace: {callFrames}}));\n  }\n\n  private incrementErrorWarningCount(msg: ConsoleMessage): void {\n    if (msg.source === Protocol.Log.LogEntrySource.Violation) {\n      this.#violations++;\n      return;\n    }\n    switch (msg.level) {\n      case Protocol.Log.LogEntryLevel.Warning:\n        this.#warnings++;\n        break;\n      case Protocol.Log.LogEntryLevel.Error:\n        this.#errors++;\n        break;\n    }\n  }\n\n  messages(): ConsoleMessage[] {\n    return this.#messages;\n  }\n\n  // messages[] are not ordered by timestamp.\n  static allMessagesUnordered(): ConsoleMessage[] {\n    const messages = [];\n    for (const target of TargetManager.instance().targets()) {\n      const targetMessages = target.model(ConsoleModel)?.messages() || [];\n      messages.push(...targetMessages);\n    }\n    return messages;\n  }\n\n  static requestClearMessages(): void {\n    for (const logModel of TargetManager.instance().models(LogModel)) {\n      logModel.requestClear();\n    }\n    for (const runtimeModel of TargetManager.instance().models(RuntimeModel)) {\n      runtimeModel.discardConsoleEntries();\n      // Runtime.discardConsoleEntries implies Runtime.releaseObjectGroup('console').\n      runtimeModel.releaseObjectGroup('live-expression');\n    }\n    for (const target of TargetManager.instance().targets()) {\n      target.model(ConsoleModel)?.clear();\n    }\n  }\n\n  private clear(): void {\n    this.#messages = [];\n    this.#messagesByTimestamp.clear();\n    this.#messageByExceptionId.clear();\n    this.#errors = 0;\n    this.#warnings = 0;\n    this.#violations = 0;\n    this.dispatchEventToListeners(Events.ConsoleCleared);\n  }\n\n  errors(): number {\n    return this.#errors;\n  }\n\n  static allErrors(): number {\n    let errors = 0;\n    for (const target of TargetManager.instance().targets()) {\n      errors += target.model(ConsoleModel)?.errors() || 0;\n    }\n    return errors;\n  }\n\n  warnings(): number {\n    return this.#warnings;\n  }\n\n  static allWarnings(): number {\n    let warnings = 0;\n    for (const target of TargetManager.instance().targets()) {\n      warnings += target.model(ConsoleModel)?.warnings() || 0;\n    }\n    return warnings;\n  }\n\n  violations(): number {\n    return this.#violations;\n  }\n\n  async saveToTempVariable(currentExecutionContext: ExecutionContext|null, remoteObject: RemoteObject|null):\n      Promise<void> {\n    if (!remoteObject || !currentExecutionContext) {\n      failedToSave(null);\n      return;\n    }\n    const executionContext = (currentExecutionContext);\n\n    const result = await executionContext.globalObject(/* objectGroup */ '', /* generatePreview */ false);\n    if ('error' in result || Boolean(result.exceptionDetails) || !result.object) {\n      failedToSave('object' in result && result.object || null);\n      return;\n    }\n\n    const globalObject = result.object;\n    const callFunctionResult =\n        await globalObject.callFunction(saveVariable, [RemoteObject.toCallArgument(remoteObject)]);\n    globalObject.release();\n    if (callFunctionResult.wasThrown || callFunctionResult.object?.type !== 'string') {\n      failedToSave(callFunctionResult.object || null);\n    } else {\n      const text = (callFunctionResult.object.value as string);\n      const message = this.addCommandMessage(executionContext, text);\n      void this.evaluateCommandInConsole(executionContext, message, text, /* useCommandLineAPI */ false);\n    }\n    if (callFunctionResult.object) {\n      callFunctionResult.object.release();\n    }\n\n    function saveVariable(this: Window, value: Protocol.Runtime.CallArgument): string {\n      const prefix = 'temp';\n      let index = 1;\n      while ((prefix + index) in this) {\n        ++index;\n      }\n      const name = prefix + index;\n      // @ts-expect-error Assignment to global object\n      this[name] = value;\n      return name;\n    }\n\n    function failedToSave(result: RemoteObject|null): void {\n      let message = i18nString(UIStrings.failedToSaveToTempVariable);\n      if (result) {\n        message = (message + ' ' + result.description as Common.UIString.LocalizedString);\n      }\n      Common.Console.Console.instance().error(message);\n    }\n  }\n}\n\nexport enum Events {\n  /* eslint-disable @typescript-eslint/naming-convention -- Used by web_tests. */\n  ConsoleCleared = 'ConsoleCleared',\n  MessageAdded = 'MessageAdded',\n  MessageUpdated = 'MessageUpdated',\n  CommandEvaluated = 'CommandEvaluated',\n  /* eslint-enable @typescript-eslint/naming-convention */\n}\n\nexport interface CommandEvaluatedEvent {\n  result: RemoteObject;\n  commandMessage: ConsoleMessage;\n  exceptionDetails?: Protocol.Runtime.ExceptionDetails|undefined;\n}\n\nexport interface EventTypes {\n  [Events.ConsoleCleared]: void;\n  [Events.MessageAdded]: ConsoleMessage;\n  [Events.MessageUpdated]: ConsoleMessage;\n  [Events.CommandEvaluated]: CommandEvaluatedEvent;\n}\n\nexport interface AffectedResources {\n  requestId?: Protocol.Network.RequestId;\n  issueId?: Protocol.Audits.IssueId;\n}\n\nfunction extractExceptionMetaData(metaData?: {\n  requestId?: Protocol.Network.RequestId,\n  issueId?: Protocol.Audits.IssueId,\n}): AffectedResources|undefined {\n  if (!metaData) {\n    return undefined;\n  }\n  return {requestId: metaData.requestId || undefined, issueId: metaData.issueId || undefined};\n}\n\nfunction areAffectedResourcesEquivalent(a?: AffectedResources, b?: AffectedResources): boolean {\n  // Not considering issueId, as that would prevent de-duplication of console #messages.\n  return a?.requestId === b?.requestId;\n}\n\nfunction areStackTracesEquivalent(\n    stackTrace1?: Protocol.Runtime.StackTrace, stackTrace2?: Protocol.Runtime.StackTrace): boolean {\n  if (!stackTrace1 !== !stackTrace2) {\n    return false;\n  }\n  if (!stackTrace1 || !stackTrace2) {\n    return true;\n  }\n  const callFrames1 = stackTrace1.callFrames;\n  const callFrames2 = stackTrace2.callFrames;\n  if (callFrames1.length !== callFrames2.length) {\n    return false;\n  }\n  for (let i = 0, n = callFrames1.length; i < n; ++i) {\n    if (callFrames1[i].scriptId !== callFrames2[i].scriptId ||\n        callFrames1[i].functionName !== callFrames2[i].functionName ||\n        callFrames1[i].lineNumber !== callFrames2[i].lineNumber ||\n        callFrames1[i].columnNumber !== callFrames2[i].columnNumber) {\n      return false;\n    }\n  }\n  return areStackTracesEquivalent(stackTrace1.parent, stackTrace2.parent);\n}\n\nexport interface ConsoleMessageDetails {\n  type?: MessageType;\n  url?: Platform.DevToolsPath.UrlString;\n  line?: number;\n  column?: number;\n  parameters?: Array<string|RemoteObject|Protocol.Runtime.RemoteObject>;\n  stackTrace?: Protocol.Runtime.StackTrace;\n  timestamp?: number;\n  executionContextId?: number;\n  scriptId?: Protocol.Runtime.ScriptId;\n  workerId?: string;\n  context?: string;\n  affectedResources?: AffectedResources;\n  category?: Protocol.Log.LogEntryCategory;\n  isCookieReportIssue?: boolean;\n}\n\nexport class ConsoleMessage {\n  readonly #runtimeModel: RuntimeModel|null;\n  source: MessageSource;\n  level: Protocol.Log.LogEntryLevel|null;\n  messageText: string;\n  readonly type: MessageType;\n  url: Platform.DevToolsPath.UrlString|undefined;\n  line: number;\n  column: number;\n  parameters: Array<string|RemoteObject|Protocol.Runtime.RemoteObject>|undefined;\n  stackTrace: Protocol.Runtime.StackTrace|undefined;\n  timestamp: number;\n  #executionContextId: number;\n  scriptId?: Protocol.Runtime.ScriptId;\n  workerId?: string;\n  context?: string;\n  #originatingConsoleMessage: ConsoleMessage|null = null;\n  #pageLoadSequenceNumber?: number = undefined;\n  #exceptionId?: number = undefined;\n  #affectedResources?: AffectedResources;\n  category?: Protocol.Log.LogEntryCategory;\n  isCookieReportIssue = false;\n\n  /**\n   * The parent frame of the `console.log` call of logpoints or conditional breakpoints\n   * if they called `console.*` explicitly. The parent frame is where V8 paused\n   * and consequently where the logpoint is set.\n   *\n   * Is `null` for page console.logs, commands, command results, etc.\n   */\n  readonly stackFrameWithBreakpoint: Protocol.Runtime.CallFrame|null = null;\n  readonly #originatingBreakpointType: BreakpointType|null = null;\n\n  constructor(\n      runtimeModel: RuntimeModel|null, source: MessageSource, level: Protocol.Log.LogEntryLevel|null,\n      messageText: string, details?: ConsoleMessageDetails) {\n    this.#runtimeModel = runtimeModel;\n    this.source = source;\n    this.level = (level);\n    this.messageText = messageText;\n    this.type = details?.type || Protocol.Runtime.ConsoleAPICalledEventType.Log;\n    this.url = details?.url;\n    this.line = details?.line || 0;\n    this.column = details?.column || 0;\n    this.parameters = details?.parameters;\n    this.stackTrace = details?.stackTrace;\n    this.timestamp = details?.timestamp || Date.now();\n    this.#executionContextId = details?.executionContextId || 0;\n    this.scriptId = details?.scriptId;\n    this.workerId = details?.workerId;\n    this.#affectedResources = details?.affectedResources;\n    this.category = details?.category;\n    this.isCookieReportIssue = Boolean(details?.isCookieReportIssue);\n\n    if (!this.#executionContextId && this.#runtimeModel) {\n      if (this.scriptId) {\n        this.#executionContextId = this.#runtimeModel.executionContextIdForScriptId(this.scriptId);\n      } else if (this.stackTrace) {\n        this.#executionContextId = this.#runtimeModel.executionContextForStackTrace(this.stackTrace);\n      }\n    }\n\n    if (details?.context) {\n      const match = details?.context.match(/[^#]*/);\n      this.context = match?.[0];\n    }\n\n    if (this.stackTrace) {\n      const {callFrame, type} = ConsoleMessage.#stackFrameWithBreakpoint(this.stackTrace);\n      this.stackFrameWithBreakpoint = callFrame;\n      this.#originatingBreakpointType = type;\n    }\n  }\n\n  getAffectedResources(): AffectedResources|undefined {\n    return this.#affectedResources;\n  }\n\n  setPageLoadSequenceNumber(pageLoadSequenceNumber: number): void {\n    this.#pageLoadSequenceNumber = pageLoadSequenceNumber;\n  }\n\n  static fromException(\n      runtimeModel: RuntimeModel, exceptionDetails: Protocol.Runtime.ExceptionDetails,\n      messageType?: Protocol.Runtime.ConsoleAPICalledEventType|FrontendMessageType, timestamp?: number,\n      forceUrl?: Platform.DevToolsPath.UrlString, affectedResources?: AffectedResources): ConsoleMessage {\n    const details = {\n      type: messageType,\n      url: forceUrl || exceptionDetails.url as Platform.DevToolsPath.UrlString,\n      line: exceptionDetails.lineNumber,\n      column: exceptionDetails.columnNumber,\n      parameters: exceptionDetails.exception ?\n          [RemoteObject.fromLocalObject(exceptionDetails.text), exceptionDetails.exception] :\n          undefined,\n      stackTrace: exceptionDetails.stackTrace,\n      timestamp,\n      executionContextId: exceptionDetails.executionContextId,\n      scriptId: exceptionDetails.scriptId,\n      affectedResources,\n    };\n    return new ConsoleMessage(\n        runtimeModel, Protocol.Log.LogEntrySource.Javascript, Protocol.Log.LogEntryLevel.Error,\n        RuntimeModel.simpleTextFromException(exceptionDetails), details);\n  }\n\n  runtimeModel(): RuntimeModel|null {\n    return this.#runtimeModel;\n  }\n\n  target(): Target|null {\n    return this.#runtimeModel ? this.#runtimeModel.target() : null;\n  }\n\n  setOriginatingMessage(originatingMessage: ConsoleMessage): void {\n    this.#originatingConsoleMessage = originatingMessage;\n    this.#executionContextId = originatingMessage.#executionContextId;\n  }\n\n  originatingMessage(): ConsoleMessage|null {\n    return this.#originatingConsoleMessage;\n  }\n\n  setExecutionContextId(executionContextId: number): void {\n    this.#executionContextId = executionContextId;\n  }\n\n  getExecutionContextId(): number {\n    return this.#executionContextId;\n  }\n\n  getExceptionId(): number|undefined {\n    return this.#exceptionId;\n  }\n\n  setExceptionId(exceptionId: number): void {\n    this.#exceptionId = exceptionId;\n  }\n\n  isGroupMessage(): boolean {\n    return this.type === Protocol.Runtime.ConsoleAPICalledEventType.StartGroup ||\n        this.type === Protocol.Runtime.ConsoleAPICalledEventType.StartGroupCollapsed ||\n        this.type === Protocol.Runtime.ConsoleAPICalledEventType.EndGroup;\n  }\n\n  isGroupStartMessage(): boolean {\n    return this.type === Protocol.Runtime.ConsoleAPICalledEventType.StartGroup ||\n        this.type === Protocol.Runtime.ConsoleAPICalledEventType.StartGroupCollapsed;\n  }\n\n  isErrorOrWarning(): boolean {\n    return (this.level === Protocol.Log.LogEntryLevel.Warning || this.level === Protocol.Log.LogEntryLevel.Error);\n  }\n\n  isGroupable(): boolean {\n    const isUngroupableError = this.level === Protocol.Log.LogEntryLevel.Error &&\n        (this.source === Protocol.Log.LogEntrySource.Javascript || this.source === Protocol.Log.LogEntrySource.Network);\n    return (\n        this.source !== Common.Console.FrontendMessageSource.ConsoleAPI && this.type !== FrontendMessageType.Command &&\n        this.type !== FrontendMessageType.Result && this.type !== FrontendMessageType.System && !isUngroupableError);\n  }\n\n  groupCategoryKey(): string {\n    return [this.source, this.level, this.type, this.#pageLoadSequenceNumber].join(':');\n  }\n\n  isEqual(msg: ConsoleMessage|null): boolean {\n    if (!msg) {\n      return false;\n    }\n\n    if (this.parameters) {\n      if (!msg.parameters || this.parameters.length !== msg.parameters.length) {\n        return false;\n      }\n\n      for (let i = 0; i < msg.parameters.length; ++i) {\n        const msgParam = msg.parameters[i];\n        const param = this.parameters[i];\n        if (typeof msgParam === 'string' || typeof param === 'string') {\n          // TODO(chromium:1136435): Remove this case.\n          return false;\n        }\n        if (msgParam.type === 'object' && msgParam.subtype !== 'error') {\n          if (!msgParam.objectId || msgParam.objectId !== param.objectId || msg.timestamp !== this.timestamp) {\n            return false;\n          }\n        }\n        if (param.type !== msgParam.type || param.value !== msgParam.value ||\n            param.description !== msgParam.description) {\n          return false;\n        }\n      }\n    }\n\n    return (this.runtimeModel() === msg.runtimeModel()) && (this.source === msg.source) && (this.type === msg.type) &&\n        (this.level === msg.level) && (this.line === msg.line) && (this.url === msg.url) &&\n        (this.scriptId === msg.scriptId) && (this.messageText === msg.messageText) &&\n        (this.#executionContextId === msg.#executionContextId) &&\n        areAffectedResourcesEquivalent(this.#affectedResources, msg.#affectedResources) &&\n        areStackTracesEquivalent(this.stackTrace, msg.stackTrace);\n  }\n\n  get originatesFromLogpoint(): boolean {\n    return this.#originatingBreakpointType === BreakpointType.LOGPOINT;\n  }\n\n  /** @returns true, iff this was a console.* call in a conditional breakpoint */\n  get originatesFromConditionalBreakpoint(): boolean {\n    return this.#originatingBreakpointType === BreakpointType.CONDITIONAL_BREAKPOINT;\n  }\n\n  static #stackFrameWithBreakpoint({callFrames}: Protocol.Runtime.StackTrace):\n      {callFrame: Protocol.Runtime.CallFrame|null, type: BreakpointType|null} {\n    // Note that breakpoint condition code could in theory call into user JS and back into\n    // \"condition-defined\" functions. This means that the top-most\n    // stack frame is not necessarily the `console.log` call, but there could be other things\n    // on top. We want the LAST marker frame in the stack.\n    // We search FROM THE TOP for the last marked stack frame and\n    // return it's parent (successor).\n    const markerSourceUrls = [COND_BREAKPOINT_SOURCE_URL, LOGPOINT_SOURCE_URL];\n    const lastBreakpointFrameIndex = callFrames.findLastIndex(({url}) => markerSourceUrls.includes(url));\n    if (lastBreakpointFrameIndex === -1 || lastBreakpointFrameIndex === callFrames.length - 1) {\n      // We either didn't find any breakpoint or we didn't capture enough stack\n      // frames and the breakpoint condition is the bottom-most frame.\n      return {callFrame: null, type: null};\n    }\n\n    const type = callFrames[lastBreakpointFrameIndex].url === LOGPOINT_SOURCE_URL ?\n        BreakpointType.LOGPOINT :\n        BreakpointType.CONDITIONAL_BREAKPOINT;\n    return {callFrame: callFrames[lastBreakpointFrameIndex + 1], type};\n  }\n}\n\nSDKModel.register(ConsoleModel, {capabilities: Capability.JS, autostart: true});\n\nexport type MessageSource = Protocol.Log.LogEntrySource|Common.Console.FrontendMessageSource;\nexport type MessageLevel = Protocol.Log.LogEntryLevel;\nexport type MessageType = Protocol.Runtime.ConsoleAPICalledEventType|FrontendMessageType;\n\nexport const MessageSourceDisplayName = new Map<MessageSource, string>(([\n  [Protocol.Log.LogEntrySource.XML, 'xml'],\n  [Protocol.Log.LogEntrySource.Javascript, 'javascript'],\n  [Protocol.Log.LogEntrySource.Network, 'network'],\n  [Common.Console.FrontendMessageSource.ConsoleAPI, 'console-api'],\n  [Protocol.Log.LogEntrySource.Storage, 'storage'],\n  [Protocol.Log.LogEntrySource.Appcache, 'appcache'],\n  [Protocol.Log.LogEntrySource.Rendering, 'rendering'],\n  [Common.Console.FrontendMessageSource.CSS, 'css'],\n  [Protocol.Log.LogEntrySource.Security, 'security'],\n  [Protocol.Log.LogEntrySource.Deprecation, 'deprecation'],\n  [Protocol.Log.LogEntrySource.Worker, 'worker'],\n  [Protocol.Log.LogEntrySource.Violation, 'violation'],\n  [Protocol.Log.LogEntrySource.Intervention, 'intervention'],\n  [Protocol.Log.LogEntrySource.Recommendation, 'recommendation'],\n  [Protocol.Log.LogEntrySource.Other, 'other'],\n  [Common.Console.FrontendMessageSource.ISSUE_PANEL, 'issue-panel'],\n]));\n", "// Copyright 2020 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\n// We need these enums here as enum values of enums defined in closure land\n// are typed as string, and hence provide for weaker type-checking.\n\nexport enum FrontendMessageType {\n  /* eslint-disable @typescript-eslint/naming-convention -- Used by web_tests. */\n  Result = 'result',\n  Command = 'command',\n  System = 'system',\n  QueryObjectResult = 'queryObjectResult',\n  /* eslint-enable @typescript-eslint/naming-convention */\n}\n", "// Copyright 2014 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport type * as ProtocolProxyApi from '../../generated/protocol-proxy-api.js';\nimport type * as Protocol from '../../generated/protocol.js';\nimport * as i18n from '../i18n/i18n.js';\n\nimport {DebuggerModel, Location} from './DebuggerModel.js';\nimport type {RuntimeModel} from './RuntimeModel.js';\nimport {SDKModel} from './SDKModel.js';\nimport {Capability, type Target} from './Target.js';\n\nconst UIStrings = {\n  /**\n   * @description Name of a profile. Placeholder is either a user-supplied name or a number automatically assigned to the profile.\n   * @example {2} PH1\n   */\n  profileD: 'Profile {PH1}',\n} as const;\nconst str_ = i18n.i18n.registerUIStrings('core/sdk/CPUProfilerModel.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\n\nexport class CPUProfilerModel extends SDKModel<EventTypes> implements ProtocolProxyApi.ProfilerDispatcher {\n  #nextAnonymousConsoleProfileNumber: number;\n  #anonymousConsoleProfileIdToTitle: Map<string, string>;\n  readonly #profilerAgent: ProtocolProxyApi.ProfilerApi;\n  #preciseCoverageDeltaUpdateCallback: ((arg0: number, arg2: Protocol.Profiler.ScriptCoverage[]) => Promise<void>)|null;\n  readonly #debuggerModel: DebuggerModel;\n  readonly registeredConsoleProfileMessages: ProfileFinishedData[] = [];\n\n  constructor(target: Target) {\n    super(target);\n    this.#nextAnonymousConsoleProfileNumber = 1;\n    this.#anonymousConsoleProfileIdToTitle = new Map();\n    this.#profilerAgent = target.profilerAgent();\n    this.#preciseCoverageDeltaUpdateCallback = null;\n    target.registerProfilerDispatcher(this);\n    void this.#profilerAgent.invoke_enable();\n    this.#debuggerModel = (target.model(DebuggerModel) as DebuggerModel);\n  }\n\n  runtimeModel(): RuntimeModel {\n    return this.#debuggerModel.runtimeModel();\n  }\n\n  debuggerModel(): DebuggerModel {\n    return this.#debuggerModel;\n  }\n\n  consoleProfileStarted({id, location, title}: Protocol.Profiler.ConsoleProfileStartedEvent): void {\n    if (!title) {\n      title = i18nString(UIStrings.profileD, {PH1: this.#nextAnonymousConsoleProfileNumber++});\n      this.#anonymousConsoleProfileIdToTitle.set(id, title);\n    }\n    const eventData = this.createEventDataFrom(id, location, title);\n    this.dispatchEventToListeners(Events.CONSOLE_PROFILE_STARTED, eventData);\n  }\n\n  consoleProfileFinished({id, location, profile, title}: Protocol.Profiler.ConsoleProfileFinishedEvent): void {\n    if (!title) {\n      title = this.#anonymousConsoleProfileIdToTitle.get(id);\n      this.#anonymousConsoleProfileIdToTitle.delete(id);\n    }\n    const eventData: ProfileFinishedData = {\n      ...this.createEventDataFrom(id, location, title),\n      cpuProfile: profile,\n    };\n    this.registeredConsoleProfileMessages.push(eventData);\n    this.dispatchEventToListeners(Events.CONSOLE_PROFILE_FINISHED, eventData);\n  }\n\n  private createEventDataFrom(id: string, scriptLocation: Protocol.Debugger.Location, title?: string): EventData {\n    const debuggerLocation = Location.fromPayload(this.#debuggerModel, scriptLocation);\n    const globalId = this.target().id() + '.' + id;\n    return {\n      id: globalId,\n      scriptLocation: debuggerLocation,\n      title: title || '',\n      cpuProfilerModel: this,\n    };\n  }\n\n  startRecording(): Promise<unknown> {\n    const intervalUs = 100;\n    void this.#profilerAgent.invoke_setSamplingInterval({interval: intervalUs});\n    return this.#profilerAgent.invoke_start();\n  }\n\n  stopRecording(): Promise<Protocol.Profiler.Profile|null> {\n    return this.#profilerAgent.invoke_stop().then(response => response.profile || null);\n  }\n\n  startPreciseCoverage(\n      jsCoveragePerBlock: boolean,\n      preciseCoverageDeltaUpdateCallback: ((arg0: number, arg2: Protocol.Profiler.ScriptCoverage[]) => Promise<void>)|\n      null): Promise<unknown> {\n    const callCount = false;\n    this.#preciseCoverageDeltaUpdateCallback = preciseCoverageDeltaUpdateCallback;\n    const allowUpdatesTriggeredByBackend = true;\n    return this.#profilerAgent.invoke_startPreciseCoverage(\n        {callCount, detailed: jsCoveragePerBlock, allowTriggeredUpdates: allowUpdatesTriggeredByBackend});\n  }\n\n  async takePreciseCoverage(): Promise<{\n    timestamp: number,\n    coverage: Protocol.Profiler.ScriptCoverage[],\n  }> {\n    const r = await this.#profilerAgent.invoke_takePreciseCoverage();\n    const timestamp = (r?.timestamp) || 0;\n    const coverage = (r?.result) || [];\n    return {timestamp, coverage};\n  }\n\n  stopPreciseCoverage(): Promise<unknown> {\n    this.#preciseCoverageDeltaUpdateCallback = null;\n    return this.#profilerAgent.invoke_stopPreciseCoverage();\n  }\n\n  preciseCoverageDeltaUpdate({timestamp, result}: Protocol.Profiler.PreciseCoverageDeltaUpdateEvent): void {\n    if (this.#preciseCoverageDeltaUpdateCallback) {\n      void this.#preciseCoverageDeltaUpdateCallback(timestamp, result);\n    }\n  }\n}\n\nexport const enum Events {\n  CONSOLE_PROFILE_STARTED = 'ConsoleProfileStarted',\n  CONSOLE_PROFILE_FINISHED = 'ConsoleProfileFinished',\n}\n\nexport interface EventTypes {\n  [Events.CONSOLE_PROFILE_STARTED]: EventData;\n  [Events.CONSOLE_PROFILE_FINISHED]: ProfileFinishedData;\n}\n\nSDKModel.register(CPUProfilerModel, {capabilities: Capability.JS, autostart: true});\n\nexport interface EventData {\n  id: string;\n  scriptLocation: Location;\n  title: string;\n  cpuProfilerModel: CPUProfilerModel;\n}\n\nexport interface ProfileFinishedData extends EventData {\n  cpuProfile: Protocol.Profiler.Profile;\n}\n", "// Copyright 2017 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport type * as ProtocolProxyApi from '../../generated/protocol-proxy-api.js';\nimport * as Protocol from '../../generated/protocol.js';\nimport * as Host from '../host/host.js';\n\nimport {SDKModel} from './SDKModel.js';\nimport {Capability, type Target} from './Target.js';\n\nexport class LogModel extends SDKModel<EventTypes> implements ProtocolProxyApi.LogDispatcher {\n  readonly #logAgent: ProtocolProxyApi.LogApi;\n  constructor(target: Target) {\n    super(target);\n    target.registerLogDispatcher(this);\n    this.#logAgent = target.logAgent();\n    void this.#logAgent.invoke_enable();\n    if (!Host.InspectorFrontendHost.isUnderTest()) {\n      void this.#logAgent.invoke_startViolationsReport({\n        config: [\n          {name: Protocol.Log.ViolationSettingName.LongTask, threshold: 200},\n          {name: Protocol.Log.ViolationSettingName.LongLayout, threshold: 30},\n          {name: Protocol.Log.ViolationSettingName.BlockedEvent, threshold: 100},\n          {name: Protocol.Log.ViolationSettingName.BlockedParser, threshold: -1},\n          {name: Protocol.Log.ViolationSettingName.Handler, threshold: 150},\n          {name: Protocol.Log.ViolationSettingName.RecurringHandler, threshold: 50},\n          {name: Protocol.Log.ViolationSettingName.DiscouragedAPIUse, threshold: -1},\n        ],\n      });\n    }\n  }\n\n  entryAdded({entry}: Protocol.Log.EntryAddedEvent): void {\n    this.dispatchEventToListeners(Events.ENTRY_ADDED, {logModel: this, entry});\n  }\n\n  requestClear(): void {\n    void this.#logAgent.invoke_clear();\n  }\n}\n\nexport const enum Events {\n  ENTRY_ADDED = 'EntryAdded',\n}\n\nexport interface EntryAddedEvent {\n  logModel: LogModel;\n  entry: Protocol.Log.LogEntry;\n}\n\nexport interface EventTypes {\n  [Events.ENTRY_ADDED]: EntryAddedEvent;\n}\n\nSDKModel.register(LogModel, {capabilities: Capability.LOG, autostart: true});\n", "// Copyright 2017 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as Common from '../../core/common/common.js';\nimport * as i18n from '../i18n/i18n.js';\n\nimport {EmulationModel} from './EmulationModel.js';\nimport {type SDKModelObserver, TargetManager} from './TargetManager.js';\n\nconst UIStrings = {\n  /**\n   * @description Text label for a menu item indicating that no throttling is applied.\n   */\n  noThrottling: 'No throttling',\n  /**\n   * @description Text label for a menu item indicating that a specific slowdown multiplier is applied.\n   * @example {2} PH1\n   */\n  dSlowdown: '{PH1}× slowdown',\n  /**\n   * @description Text label for a menu item indicating an average mobile device.\n   */\n  calibratedMidTierMobile: 'Mid-tier mobile',\n  /**\n   * @description Text label for a menu item indicating a below-average mobile device.\n   */\n  calibratedLowTierMobile: 'Low-tier mobile',\n  /**\n   * @description Text label indicating why an option is not available, because the user's device is not fast enough to emulate a device.\n   */\n  calibrationErrorDeviceTooWeak: 'Device is not powerful enough',\n} as const;\nconst str_ = i18n.i18n.registerUIStrings('core/sdk/CPUThrottlingManager.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\nconst i18nLazyString = i18n.i18n.getLazilyComputedLocalizedString.bind(undefined, str_);\n\nlet throttlingManagerInstance: CPUThrottlingManager;\n\nexport class CPUThrottlingManager extends Common.ObjectWrapper.ObjectWrapper<EventTypes> implements\n    SDKModelObserver<EmulationModel> {\n  #cpuThrottlingOption: CPUThrottlingOption;\n  #calibratedThrottlingSetting: Common.Settings.Setting<CalibratedCPUThrottling>;\n  #hardwareConcurrency?: number;\n  #pendingMainTargetPromise?: (r: number) => void;\n\n  private constructor() {\n    super();\n    this.#cpuThrottlingOption = NoThrottlingOption;\n    this.#calibratedThrottlingSetting = Common.Settings.Settings.instance().createSetting<CalibratedCPUThrottling>(\n        'calibrated-cpu-throttling', {}, Common.Settings.SettingStorageType.GLOBAL);\n    this.#calibratedThrottlingSetting.addChangeListener(this.#onCalibratedSettingChanged, this);\n    TargetManager.instance().observeModels(EmulationModel, this);\n  }\n\n  static instance(opts: {forceNew: boolean|null} = {forceNew: null}): CPUThrottlingManager {\n    const {forceNew} = opts;\n    if (!throttlingManagerInstance || forceNew) {\n      throttlingManagerInstance = new CPUThrottlingManager();\n    }\n\n    return throttlingManagerInstance;\n  }\n\n  cpuThrottlingRate(): number {\n    return this.#cpuThrottlingOption.rate();\n  }\n\n  cpuThrottlingOption(): CPUThrottlingOption {\n    return this.#cpuThrottlingOption;\n  }\n\n  #onCalibratedSettingChanged(): void {\n    // If a calibrated option is selected, need to propagate new rate.\n    const currentOption = this.#cpuThrottlingOption;\n    if (!currentOption.calibratedDeviceType) {\n      return;\n    }\n\n    const rate = this.#cpuThrottlingOption.rate();\n    if (rate === 0) {\n      // This calibrated option is no longer valid.\n      this.setCPUThrottlingOption(NoThrottlingOption);\n      return;\n    }\n\n    for (const emulationModel of TargetManager.instance().models(EmulationModel)) {\n      void emulationModel.setCPUThrottlingRate(rate);\n    }\n    this.dispatchEventToListeners(Events.RATE_CHANGED, rate);\n  }\n\n  setCPUThrottlingOption(option: CPUThrottlingOption): void {\n    if (option === this.#cpuThrottlingOption) {\n      return;\n    }\n\n    this.#cpuThrottlingOption = option;\n    for (const emulationModel of TargetManager.instance().models(EmulationModel)) {\n      void emulationModel.setCPUThrottlingRate(this.#cpuThrottlingOption.rate());\n    }\n    this.dispatchEventToListeners(Events.RATE_CHANGED, this.#cpuThrottlingOption.rate());\n  }\n\n  setHardwareConcurrency(concurrency: number): void {\n    this.#hardwareConcurrency = concurrency;\n    for (const emulationModel of TargetManager.instance().models(EmulationModel)) {\n      void emulationModel.setHardwareConcurrency(concurrency);\n    }\n    this.dispatchEventToListeners(Events.HARDWARE_CONCURRENCY_CHANGED, this.#hardwareConcurrency);\n  }\n\n  hasPrimaryPageTargetSet(): boolean {\n    // In some environments, such as Node, trying to check if we have a page\n    // target may error. So if we get any errors here at all, assume that we do\n    // not have a target.\n    try {\n      return TargetManager.instance().primaryPageTarget() !== null;\n    } catch {\n      return false;\n    }\n  }\n\n  async getHardwareConcurrency(): Promise<number> {\n    const target = TargetManager.instance().primaryPageTarget();\n    const existingCallback = this.#pendingMainTargetPromise;\n\n    // If the main target hasn't attached yet, block callers until it appears.\n    if (!target) {\n      if (existingCallback) {\n        return await new Promise(r => {\n          this.#pendingMainTargetPromise = (result: number) => {\n            r(result);\n            existingCallback(result);\n          };\n        });\n      }\n      return await new Promise(r => {\n        this.#pendingMainTargetPromise = r;\n      });\n    }\n\n    const evalResult = await target.runtimeAgent().invoke_evaluate(\n        {expression: 'navigator.hardwareConcurrency', returnByValue: true, silent: true, throwOnSideEffect: true});\n    const error = evalResult.getError();\n    if (error) {\n      throw new Error(error);\n    }\n    const {result, exceptionDetails} = evalResult;\n    if (exceptionDetails) {\n      throw new Error(exceptionDetails.text);\n    }\n    return result.value;\n  }\n\n  modelAdded(emulationModel: EmulationModel): void {\n    if (this.#cpuThrottlingOption !== NoThrottlingOption) {\n      void emulationModel.setCPUThrottlingRate(this.#cpuThrottlingOption.rate());\n    }\n    if (this.#hardwareConcurrency !== undefined) {\n      void emulationModel.setHardwareConcurrency(this.#hardwareConcurrency);\n    }\n\n    // If there are any callers blocked on a getHardwareConcurrency call, let's wake them now.\n    if (this.#pendingMainTargetPromise) {\n      const existingCallback = this.#pendingMainTargetPromise;\n      this.#pendingMainTargetPromise = undefined;\n      void this.getHardwareConcurrency().then(existingCallback);\n    }\n  }\n\n  modelRemoved(_emulationModel: EmulationModel): void {\n    // Implemented as a requirement for being a SDKModelObserver.\n  }\n}\n\nexport const enum Events {\n  RATE_CHANGED = 'RateChanged',\n  HARDWARE_CONCURRENCY_CHANGED = 'HardwareConcurrencyChanged',\n}\n\nexport interface EventTypes {\n  [Events.RATE_CHANGED]: number;\n  [Events.HARDWARE_CONCURRENCY_CHANGED]: number;\n}\n\nexport enum CPUThrottlingRates {\n  NO_THROTTLING = 1,\n  MID_TIER_MOBILE = 4,\n  LOW_TIER_MOBILE = 6,\n  EXTRA_SLOW = 20,\n\n  // eslint-disable-next-line @typescript-eslint/naming-convention -- Used by web_tests.\n  MidTierMobile = MID_TIER_MOBILE,\n  // eslint-disable-next-line @typescript-eslint/naming-convention -- Used by web_tests.\n  LowEndMobile = LOW_TIER_MOBILE,\n}\n\nexport type CalibratedDeviceType = 'low-tier-mobile'|'mid-tier-mobile';\n\nexport interface CPUThrottlingOption {\n  title: () => string;\n  rate: () => number;\n  calibratedDeviceType?: CalibratedDeviceType;\n  jslogContext: string;\n}\n\nfunction makeFixedPresetThrottlingOption(rate: CPUThrottlingRates): CPUThrottlingOption {\n  return {\n    title: rate === 1 ? i18nLazyString(UIStrings.noThrottling) : i18nLazyString(UIStrings.dSlowdown, {PH1: rate}),\n    rate: () => rate,\n    jslogContext: rate === 1 ? 'cpu-no-throttling' : `cpu-throttled-${rate}`,\n  };\n}\n\nexport const NoThrottlingOption = makeFixedPresetThrottlingOption(CPUThrottlingRates.NO_THROTTLING);\nexport const MidTierThrottlingOption = makeFixedPresetThrottlingOption(CPUThrottlingRates.MID_TIER_MOBILE);\nexport const LowTierThrottlingOption = makeFixedPresetThrottlingOption(CPUThrottlingRates.LOW_TIER_MOBILE);\nexport const ExtraSlowThrottlingOption = makeFixedPresetThrottlingOption(CPUThrottlingRates.EXTRA_SLOW);\n\nfunction makeCalibratedThrottlingOption(calibratedDeviceType: CalibratedDeviceType): CPUThrottlingOption {\n  const getSettingValue = (): number|CalibrationError|null => {\n    const setting = Common.Settings.Settings.instance().createSetting<CalibratedCPUThrottling>(\n        'calibrated-cpu-throttling', {}, Common.Settings.SettingStorageType.GLOBAL);\n    const value = setting.get();\n    if (calibratedDeviceType === 'low-tier-mobile') {\n      return value.low ?? null;\n    }\n    if (calibratedDeviceType === 'mid-tier-mobile') {\n      return value.mid ?? null;\n    }\n    return null;\n  };\n\n  return {\n    title(): string {\n      const typeString = calibratedDeviceType === 'low-tier-mobile' ? i18nString(UIStrings.calibratedLowTierMobile) :\n                                                                      i18nString(UIStrings.calibratedMidTierMobile);\n\n      const value = getSettingValue();\n      if (typeof value === 'number') {\n        return `${typeString} – ${value.toFixed(1)}×`;\n      }\n\n      return typeString;\n    },\n    rate(): number {\n      const value = getSettingValue();\n      if (typeof value === 'number') {\n        return value;\n      }\n      return 0;\n    },\n    calibratedDeviceType,\n    jslogContext: `cpu-throttled-calibrated-${calibratedDeviceType}`,\n  };\n}\n\nexport const CalibratedLowTierMobileThrottlingOption = makeCalibratedThrottlingOption('low-tier-mobile');\nexport const CalibratedMidTierMobileThrottlingOption = makeCalibratedThrottlingOption('mid-tier-mobile');\n\nexport interface CalibratedCPUThrottling {\n  /** Either the CPU multiplier, or an error code for why it could not be determined. */\n  low?: number|CalibrationError;\n  mid?: number|CalibrationError;\n}\n\nexport enum CalibrationError {\n  DEVICE_TOO_WEAK = 'DEVICE_TOO_WEAK',\n}\n\nexport function calibrationErrorToString(error: CalibrationError): string {\n  if (error === CalibrationError.DEVICE_TOO_WEAK) {\n    return i18nString(UIStrings.calibrationErrorDeviceTooWeak);\n  }\n\n  return error;\n}\n", "// Copyright 2017 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport type * as ProtocolProxyApi from '../../generated/protocol-proxy-api.js';\nimport * as Protocol from '../../generated/protocol.js';\nimport * as Common from '../common/common.js';\n\nimport {CSSModel} from './CSSModel.js';\nimport {MultitargetNetworkManager} from './NetworkManager.js';\nimport {Events, OverlayModel} from './OverlayModel.js';\nimport {SDKModel} from './SDKModel.js';\nimport {Capability, type Target} from './Target.js';\n\nexport const enum DataSaverOverride {\n  UNSET = 'unset',\n  ENABLED = 'enabled',\n  DISABLED = 'disabled',\n}\n\nexport class EmulationModel extends SDKModel<void> {\n  readonly #emulationAgent: ProtocolProxyApi.EmulationApi;\n  readonly #deviceOrientationAgent: ProtocolProxyApi.DeviceOrientationApi;\n  #cssModel: CSSModel|null;\n  readonly #overlayModel: OverlayModel|null;\n  readonly #mediaConfiguration: Map<string, string>;\n  #cpuPressureEnabled: boolean;\n  #touchEnabled: boolean;\n  #touchMobile: boolean;\n  #touchEmulationAllowed: boolean;\n  #customTouchEnabled: boolean;\n  #touchConfiguration: {\n    enabled: boolean,\n    configuration: Protocol.Emulation.SetEmitTouchEventsForMouseRequestConfiguration,\n  };\n\n  constructor(target: Target) {\n    super(target);\n    this.#emulationAgent = target.emulationAgent();\n    this.#deviceOrientationAgent = target.deviceOrientationAgent();\n    this.#cssModel = target.model(CSSModel);\n    this.#overlayModel = target.model(OverlayModel);\n    if (this.#overlayModel) {\n      this.#overlayModel.addEventListener(Events.INSPECT_MODE_WILL_BE_TOGGLED, () => {\n        void this.updateTouch();\n      }, this);\n    }\n\n    const disableJavascriptSetting = Common.Settings.Settings.instance().moduleSetting('java-script-disabled');\n    disableJavascriptSetting.addChangeListener(\n        async () =>\n            await this.#emulationAgent.invoke_setScriptExecutionDisabled({value: disableJavascriptSetting.get()}));\n    if (disableJavascriptSetting.get()) {\n      void this.#emulationAgent.invoke_setScriptExecutionDisabled({value: true});\n    }\n\n    const touchSetting = Common.Settings.Settings.instance().moduleSetting('emulation.touch');\n    touchSetting.addChangeListener(() => {\n      const settingValue = touchSetting.get();\n\n      void this.overrideEmulateTouch(settingValue === 'force');\n    });\n\n    const idleDetectionSetting = Common.Settings.Settings.instance().moduleSetting('emulation.idle-detection');\n    idleDetectionSetting.addChangeListener(async () => {\n      const settingValue = idleDetectionSetting.get();\n      if (settingValue === 'none') {\n        await this.clearIdleOverride();\n        return;\n      }\n\n      const emulationParams = (JSON.parse(settingValue) as {\n        isUserActive: boolean,\n        isScreenUnlocked: boolean,\n      });\n      await this.setIdleOverride(emulationParams);\n    });\n\n    const cpuPressureDetectionSetting = Common.Settings.Settings.instance().moduleSetting('emulation.cpu-pressure');\n    cpuPressureDetectionSetting.addChangeListener(async () => {\n      const settingValue = cpuPressureDetectionSetting.get();\n\n      if (settingValue === 'none') {\n        await this.setPressureSourceOverrideEnabled(false);\n        this.#cpuPressureEnabled = false;\n        return;\n      }\n\n      if (!this.#cpuPressureEnabled) {\n        this.#cpuPressureEnabled = true;\n        await this.setPressureSourceOverrideEnabled(true);\n      }\n\n      await this.setPressureStateOverride(settingValue);\n    });\n\n    const mediaTypeSetting = Common.Settings.Settings.instance().moduleSetting<string>('emulated-css-media');\n    const mediaFeatureColorGamutSetting =\n        Common.Settings.Settings.instance().moduleSetting<string>('emulated-css-media-feature-color-gamut');\n    const mediaFeaturePrefersColorSchemeSetting =\n        Common.Settings.Settings.instance().moduleSetting<string>('emulated-css-media-feature-prefers-color-scheme');\n    const mediaFeatureForcedColorsSetting =\n        Common.Settings.Settings.instance().moduleSetting('emulated-css-media-feature-forced-colors');\n    const mediaFeaturePrefersContrastSetting =\n        Common.Settings.Settings.instance().moduleSetting<string>('emulated-css-media-feature-prefers-contrast');\n    const mediaFeaturePrefersReducedDataSetting =\n        Common.Settings.Settings.instance().moduleSetting<string>('emulated-css-media-feature-prefers-reduced-data');\n    const mediaFeaturePrefersReducedTransparencySetting = Common.Settings.Settings.instance().moduleSetting<string>(\n        'emulated-css-media-feature-prefers-reduced-transparency');\n    const mediaFeaturePrefersReducedMotionSetting =\n        Common.Settings.Settings.instance().moduleSetting<string>('emulated-css-media-feature-prefers-reduced-motion');\n    // Note: this uses a different format than what the CDP API expects,\n    // because we want to update these values per media type/feature\n    // without having to search the `features` array (inefficient) or\n    // hardcoding the indices (not readable/maintainable).\n    this.#mediaConfiguration = new Map([\n      ['type', mediaTypeSetting.get()],\n      ['color-gamut', mediaFeatureColorGamutSetting.get()],\n      ['prefers-color-scheme', mediaFeaturePrefersColorSchemeSetting.get()],\n      ['forced-colors', mediaFeatureForcedColorsSetting.get()],\n      ['prefers-contrast', mediaFeaturePrefersContrastSetting.get()],\n      ['prefers-reduced-data', mediaFeaturePrefersReducedDataSetting.get()],\n      ['prefers-reduced-motion', mediaFeaturePrefersReducedMotionSetting.get()],\n      ['prefers-reduced-transparency', mediaFeaturePrefersReducedTransparencySetting.get()],\n    ]);\n    mediaTypeSetting.addChangeListener(() => {\n      this.#mediaConfiguration.set('type', mediaTypeSetting.get());\n      void this.updateCssMedia();\n    });\n    mediaFeatureColorGamutSetting.addChangeListener(() => {\n      this.#mediaConfiguration.set('color-gamut', mediaFeatureColorGamutSetting.get());\n      void this.updateCssMedia();\n    });\n    mediaFeaturePrefersColorSchemeSetting.addChangeListener(() => {\n      this.#mediaConfiguration.set('prefers-color-scheme', mediaFeaturePrefersColorSchemeSetting.get());\n      void this.updateCssMedia();\n    });\n    mediaFeatureForcedColorsSetting.addChangeListener(() => {\n      this.#mediaConfiguration.set('forced-colors', mediaFeatureForcedColorsSetting.get());\n      void this.updateCssMedia();\n    });\n    mediaFeaturePrefersContrastSetting.addChangeListener(() => {\n      this.#mediaConfiguration.set('prefers-contrast', mediaFeaturePrefersContrastSetting.get());\n      void this.updateCssMedia();\n    });\n    mediaFeaturePrefersReducedDataSetting.addChangeListener(() => {\n      this.#mediaConfiguration.set('prefers-reduced-data', mediaFeaturePrefersReducedDataSetting.get());\n      void this.updateCssMedia();\n    });\n    mediaFeaturePrefersReducedMotionSetting.addChangeListener(() => {\n      this.#mediaConfiguration.set('prefers-reduced-motion', mediaFeaturePrefersReducedMotionSetting.get());\n      void this.updateCssMedia();\n    });\n    mediaFeaturePrefersReducedTransparencySetting.addChangeListener(() => {\n      this.#mediaConfiguration.set('prefers-reduced-transparency', mediaFeaturePrefersReducedTransparencySetting.get());\n      void this.updateCssMedia();\n    });\n    void this.updateCssMedia();\n\n    const autoDarkModeSetting = Common.Settings.Settings.instance().moduleSetting('emulate-auto-dark-mode');\n    autoDarkModeSetting.addChangeListener(() => {\n      const enabled = autoDarkModeSetting.get();\n      mediaFeaturePrefersColorSchemeSetting.setDisabled(enabled);\n      mediaFeaturePrefersColorSchemeSetting.set(enabled ? 'dark' : '');\n      void this.emulateAutoDarkMode(enabled);\n    });\n    if (autoDarkModeSetting.get()) {\n      mediaFeaturePrefersColorSchemeSetting.setDisabled(true);\n      mediaFeaturePrefersColorSchemeSetting.set('dark');\n      void this.emulateAutoDarkMode(true);\n    }\n\n    const visionDeficiencySetting = Common.Settings.Settings.instance().moduleSetting('emulated-vision-deficiency');\n    visionDeficiencySetting.addChangeListener(() => this.emulateVisionDeficiency(visionDeficiencySetting.get()));\n    if (visionDeficiencySetting.get()) {\n      void this.emulateVisionDeficiency(visionDeficiencySetting.get());\n    }\n\n    const osTextScaleSetting = Common.Settings.Settings.instance().moduleSetting('emulated-os-text-scale');\n    osTextScaleSetting.addChangeListener(() => {\n      void this.emulateOSTextScale(parseFloat(osTextScaleSetting.get()) || undefined);\n    });\n    if (osTextScaleSetting.get()) {\n      void this.emulateOSTextScale(parseFloat(osTextScaleSetting.get()) || undefined);\n    }\n\n    const localFontsDisabledSetting = Common.Settings.Settings.instance().moduleSetting('local-fonts-disabled');\n    localFontsDisabledSetting.addChangeListener(() => this.setLocalFontsDisabled(localFontsDisabledSetting.get()));\n    if (localFontsDisabledSetting.get()) {\n      this.setLocalFontsDisabled(localFontsDisabledSetting.get());\n    }\n\n    const avifFormatDisabledSetting = Common.Settings.Settings.instance().moduleSetting('avif-format-disabled');\n    const webpFormatDisabledSetting = Common.Settings.Settings.instance().moduleSetting('webp-format-disabled');\n\n    const updateDisabledImageFormats = (): void => {\n      const types = [];\n      if (avifFormatDisabledSetting.get()) {\n        types.push(Protocol.Emulation.DisabledImageType.Avif);\n      }\n      if (webpFormatDisabledSetting.get()) {\n        types.push(Protocol.Emulation.DisabledImageType.Webp);\n      }\n      this.setDisabledImageTypes(types);\n    };\n\n    avifFormatDisabledSetting.addChangeListener(updateDisabledImageFormats);\n    webpFormatDisabledSetting.addChangeListener(updateDisabledImageFormats);\n\n    if (avifFormatDisabledSetting.get() || webpFormatDisabledSetting.get()) {\n      updateDisabledImageFormats();\n    }\n\n    this.#cpuPressureEnabled = false;\n    this.#touchEmulationAllowed = true;\n    this.#touchEnabled = false;\n    this.#touchMobile = false;\n    this.#customTouchEnabled = false;\n    this.#touchConfiguration = {\n      enabled: false,\n      configuration: Protocol.Emulation.SetEmitTouchEventsForMouseRequestConfiguration.Mobile,\n    };\n  }\n\n  setTouchEmulationAllowed(touchEmulationAllowed: boolean): void {\n    this.#touchEmulationAllowed = touchEmulationAllowed;\n  }\n\n  supportsDeviceEmulation(): boolean {\n    return this.target().hasAllCapabilities(Capability.DEVICE_EMULATION);\n  }\n\n  async resetPageScaleFactor(): Promise<void> {\n    await this.#emulationAgent.invoke_resetPageScaleFactor();\n  }\n\n  async emulateDevice(metrics: Protocol.Page.SetDeviceMetricsOverrideRequest|null): Promise<void> {\n    if (metrics) {\n      await this.#emulationAgent.invoke_setDeviceMetricsOverride(metrics);\n    } else {\n      await this.#emulationAgent.invoke_clearDeviceMetricsOverride();\n    }\n  }\n\n  overlayModel(): OverlayModel|null {\n    return this.#overlayModel;\n  }\n\n  async setPressureSourceOverrideEnabled(enabled: boolean): Promise<void> {\n    await this.#emulationAgent.invoke_setPressureSourceOverrideEnabled(\n        {source: Protocol.Emulation.PressureSource.Cpu, enabled});\n  }\n\n  async setPressureStateOverride(pressureState: string): Promise<void> {\n    await this.#emulationAgent.invoke_setPressureStateOverride({\n      source: Protocol.Emulation.PressureSource.Cpu,\n      state: pressureState as Protocol.Emulation.PressureState,\n    });\n  }\n\n  async emulateLocation(location: Location|null): Promise<void> {\n    if (!location) {\n      await Promise.all([\n        this.#emulationAgent.invoke_clearGeolocationOverride(),\n        this.#emulationAgent.invoke_setTimezoneOverride({timezoneId: ''}),\n        this.#emulationAgent.invoke_setLocaleOverride({locale: ''}),\n        this.#emulationAgent.invoke_setUserAgentOverride(\n            {userAgent: MultitargetNetworkManager.instance().currentUserAgent()}),\n      ]);\n    } else if (location.unavailable) {\n      await Promise.all([\n        this.#emulationAgent.invoke_setGeolocationOverride({}),\n        this.#emulationAgent.invoke_setTimezoneOverride({timezoneId: ''}),\n        this.#emulationAgent.invoke_setLocaleOverride({locale: ''}),\n        this.#emulationAgent.invoke_setUserAgentOverride(\n            {userAgent: MultitargetNetworkManager.instance().currentUserAgent()}),\n      ]);\n    } else {\n      function processEmulationResult(errorType: string, result: Protocol.ProtocolResponseWithError): Promise<void> {\n        const errorMessage = result.getError();\n        if (errorMessage) {\n          return Promise.reject({\n            type: errorType,\n            message: errorMessage,\n          });\n        }\n        return Promise.resolve();\n      }\n\n      await Promise.all([\n        this.#emulationAgent\n            .invoke_setGeolocationOverride({\n              latitude: location.latitude,\n              longitude: location.longitude,\n              accuracy: location.accuracy,\n            })\n            .then(result => processEmulationResult('emulation-set-location', result)),\n        this.#emulationAgent\n            .invoke_setTimezoneOverride({\n              timezoneId: location.timezoneId,\n            })\n            .then(result => processEmulationResult('emulation-set-timezone', result)),\n        this.#emulationAgent\n            .invoke_setLocaleOverride({\n              locale: location.locale,\n            })\n            .then(result => processEmulationResult('emulation-set-locale', result)),\n        this.#emulationAgent\n            .invoke_setUserAgentOverride({\n              userAgent: MultitargetNetworkManager.instance().currentUserAgent(),\n              acceptLanguage: location.locale,\n            })\n            .then(result => processEmulationResult('emulation-set-user-agent', result)),\n      ]);\n    }\n  }\n\n  async emulateDeviceOrientation(deviceOrientation: DeviceOrientation|null): Promise<void> {\n    if (deviceOrientation) {\n      await this.#deviceOrientationAgent.invoke_setDeviceOrientationOverride(\n          {alpha: deviceOrientation.alpha, beta: deviceOrientation.beta, gamma: deviceOrientation.gamma});\n    } else {\n      await this.#deviceOrientationAgent.invoke_clearDeviceOrientationOverride();\n    }\n  }\n\n  async setIdleOverride(emulationParams: {\n    isUserActive: boolean,\n    isScreenUnlocked: boolean,\n  }): Promise<void> {\n    await this.#emulationAgent.invoke_setIdleOverride(emulationParams);\n  }\n\n  async clearIdleOverride(): Promise<void> {\n    await this.#emulationAgent.invoke_clearIdleOverride();\n  }\n\n  private async emulateCSSMedia(type: string, features: Array<{\n                                  name: string,\n                                  value: string,\n                                }>): Promise<void> {\n    await this.#emulationAgent.invoke_setEmulatedMedia({media: type, features});\n    if (this.#cssModel) {\n      this.#cssModel.mediaQueryResultChanged();\n    }\n  }\n\n  private async emulateAutoDarkMode(enabled: boolean): Promise<void> {\n    if (enabled) {\n      this.#mediaConfiguration.set('prefers-color-scheme', 'dark');\n      await this.updateCssMedia();\n    }\n    // We never send `enabled: false` since that would explicitly disable\n    // autodark mode. We either enable it or clear any existing override.\n    await this.#emulationAgent.invoke_setAutoDarkModeOverride({enabled: enabled || undefined});\n  }\n\n  private async emulateVisionDeficiency(type: Protocol.Emulation.SetEmulatedVisionDeficiencyRequestType):\n      Promise<void> {\n    await this.#emulationAgent.invoke_setEmulatedVisionDeficiency({type});\n  }\n\n  private async emulateOSTextScale(scale: number|undefined): Promise<void> {\n    await this.#emulationAgent.invoke_setEmulatedOSTextScale({scale: scale || undefined});\n  }\n\n  private setLocalFontsDisabled(disabled: boolean): void {\n    if (!this.#cssModel) {\n      return;\n    }\n    void this.#cssModel.setLocalFontsEnabled(!disabled);\n  }\n\n  private setDisabledImageTypes(imageTypes: Protocol.Emulation.DisabledImageType[]): void {\n    void this.#emulationAgent.invoke_setDisabledImageTypes({imageTypes});\n  }\n\n  async setDataSaverOverride(dataSaverOverride: DataSaverOverride): Promise<void> {\n    const dataSaverEnabled = dataSaverOverride === DataSaverOverride.UNSET ? undefined :\n        dataSaverOverride === DataSaverOverride.ENABLED                    ? true :\n                                                                             false;\n    await this.#emulationAgent.invoke_setDataSaverOverride({dataSaverEnabled});\n  }\n\n  async setCPUThrottlingRate(rate: number): Promise<void> {\n    await this.#emulationAgent.invoke_setCPUThrottlingRate({rate});\n  }\n\n  async setHardwareConcurrency(hardwareConcurrency: number): Promise<void> {\n    if (hardwareConcurrency < 1) {\n      throw new Error('hardwareConcurrency must be a positive value');\n    }\n    await this.#emulationAgent.invoke_setHardwareConcurrencyOverride({hardwareConcurrency});\n  }\n\n  async emulateTouch(enabled: boolean, mobile: boolean): Promise<void> {\n    this.#touchEnabled = enabled && this.#touchEmulationAllowed;\n    this.#touchMobile = mobile && this.#touchEmulationAllowed;\n    await this.updateTouch();\n  }\n\n  async overrideEmulateTouch(enabled: boolean): Promise<void> {\n    this.#customTouchEnabled = enabled && this.#touchEmulationAllowed;\n    await this.updateTouch();\n  }\n\n  private async updateTouch(): Promise<void> {\n    let configuration = {\n      enabled: this.#touchEnabled,\n      configuration: this.#touchMobile ? Protocol.Emulation.SetEmitTouchEventsForMouseRequestConfiguration.Mobile :\n                                         Protocol.Emulation.SetEmitTouchEventsForMouseRequestConfiguration.Desktop,\n    };\n    if (this.#customTouchEnabled) {\n      configuration = {\n        enabled: true,\n        configuration: Protocol.Emulation.SetEmitTouchEventsForMouseRequestConfiguration.Mobile,\n      };\n    }\n\n    if (this.#overlayModel && this.#overlayModel.inspectModeEnabled()) {\n      configuration = {\n        enabled: false,\n        configuration: Protocol.Emulation.SetEmitTouchEventsForMouseRequestConfiguration.Mobile,\n      };\n    }\n\n    if (!this.#touchConfiguration.enabled && !configuration.enabled) {\n      return;\n    }\n    if (this.#touchConfiguration.enabled && configuration.enabled &&\n        this.#touchConfiguration.configuration === configuration.configuration) {\n      return;\n    }\n\n    this.#touchConfiguration = configuration;\n    await this.#emulationAgent.invoke_setTouchEmulationEnabled({enabled: configuration.enabled, maxTouchPoints: 1});\n    await this.#emulationAgent.invoke_setEmitTouchEventsForMouse(\n        {enabled: configuration.enabled, configuration: configuration.configuration});\n  }\n\n  private async updateCssMedia(): Promise<void> {\n    // See the note above, where this.#mediaConfiguration is defined.\n    const type = this.#mediaConfiguration.get('type') ?? '';\n    const features = [\n      {\n        name: 'color-gamut',\n        value: this.#mediaConfiguration.get('color-gamut') ?? '',\n      },\n      {\n        name: 'prefers-color-scheme',\n        value: this.#mediaConfiguration.get('prefers-color-scheme') ?? '',\n      },\n      {\n        name: 'forced-colors',\n        value: this.#mediaConfiguration.get('forced-colors') ?? '',\n      },\n      {\n        name: 'prefers-contrast',\n        value: this.#mediaConfiguration.get('prefers-contrast') ?? '',\n      },\n      {\n        name: 'prefers-reduced-data',\n        value: this.#mediaConfiguration.get('prefers-reduced-data') ?? '',\n      },\n      {\n        name: 'prefers-reduced-motion',\n        value: this.#mediaConfiguration.get('prefers-reduced-motion') ?? '',\n      },\n      {\n        name: 'prefers-reduced-transparency',\n        value: this.#mediaConfiguration.get('prefers-reduced-transparency') ?? '',\n      },\n    ];\n    return await this.emulateCSSMedia(type, features);\n  }\n}\n\nexport class Location {\n  static readonly DEFAULT_ACCURACY = 150;\n  latitude: number;\n  longitude: number;\n  timezoneId: string;\n  locale: string;\n  accuracy: number;\n  unavailable: boolean;\n\n  constructor(\n      latitude: number, longitude: number, timezoneId: string, locale: string, accuracy: number, unavailable: boolean) {\n    this.latitude = latitude;\n    this.longitude = longitude;\n    this.timezoneId = timezoneId;\n    this.locale = locale;\n    this.accuracy = accuracy;\n    this.unavailable = unavailable;\n  }\n\n  static parseSetting(value: string): Location {\n    if (value) {\n      const [position, timezoneId, locale, unavailable, ...maybeAccuracy] = value.split(':');\n      const accuracy = maybeAccuracy.length ? Number(maybeAccuracy[0]) : Location.DEFAULT_ACCURACY;\n      const [latitude, longitude] = position.split('@');\n      return new Location(\n          parseFloat(latitude), parseFloat(longitude), timezoneId, locale, accuracy, Boolean(unavailable));\n    }\n    return new Location(0, 0, '', '', Location.DEFAULT_ACCURACY, false);\n  }\n\n  static parseUserInput(\n      latitudeString: string, longitudeString: string, timezoneId: string, locale: string,\n      accuracyString: string): Location|null {\n    if (!latitudeString && !longitudeString && !accuracyString) {\n      return null;\n    }\n\n    const isLatitudeValid = Location.latitudeValidator(latitudeString);\n    const isLongitudeValid = Location.longitudeValidator(longitudeString);\n    const {valid: isAccuracyValid} = Location.accuracyValidator(accuracyString);\n\n    if (!isLatitudeValid && !isLongitudeValid && !isAccuracyValid) {\n      return null;\n    }\n\n    const latitude = isLatitudeValid ? parseFloat(latitudeString) : -1;\n    const longitude = isLongitudeValid ? parseFloat(longitudeString) : -1;\n    const accuracy = isAccuracyValid ? parseFloat(accuracyString) : Location.DEFAULT_ACCURACY;\n    return new Location(latitude, longitude, timezoneId, locale, accuracy, false);\n  }\n\n  static latitudeValidator(value: string): boolean {\n    const numValue = parseFloat(value);\n    return /^([+-]?[\\d]+(\\.\\d+)?|[+-]?\\.\\d+)$/.test(value) && numValue >= -90 && numValue <= 90;\n  }\n\n  static longitudeValidator(value: string): boolean {\n    const numValue = parseFloat(value);\n    return /^([+-]?[\\d]+(\\.\\d+)?|[+-]?\\.\\d+)$/.test(value) && numValue >= -180 && numValue <= 180;\n  }\n\n  static timezoneIdValidator(value: string): boolean {\n    // Chromium uses ICU's timezone implementation, which is very\n    // liberal in what it accepts. ICU does not simply use an allowlist\n    // but instead tries to make sense of the input, even for\n    // weird-looking timezone IDs. There's not much point in validating\n    // the input other than checking if it contains at least one alphabet.\n    // The empty string resets the override, and is accepted as well.\n    return value === '' || /[a-zA-Z]/.test(value);\n  }\n\n  static localeValidator(value: string): boolean {\n    // Similarly to timezone IDs, there's not much point in validating\n    // input locales other than checking if it contains at least two\n    // alphabetic characters.\n    // https://unicode.org/reports/tr35/#Unicode_language_identifier\n    // The empty string resets the override, and is accepted as\n    // well.\n    return value === '' || /[a-zA-Z]{2}/.test(value);\n  }\n\n  static accuracyValidator(value: string): {\n    valid: boolean,\n    errorMessage: (string|undefined),\n  } {\n    if (!value) {\n      return {valid: true, errorMessage: undefined};\n    }\n    const numValue = parseFloat(value);\n    const valid = /^([+-]?[\\d]+(\\.\\d+)?|[+-]?\\.\\d+)$/.test(value) && numValue >= 0;\n    return {valid, errorMessage: undefined};\n  }\n\n  toSetting(): string {\n    return `${this.latitude}@${this.longitude}:${this.timezoneId}:${this.locale}:${this.unavailable || ''}:${\n        this.accuracy || ''}`;\n  }\n}\n\nexport class DeviceOrientation {\n  alpha: number;\n  beta: number;\n  gamma: number;\n\n  constructor(alpha: number, beta: number, gamma: number) {\n    this.alpha = alpha;\n    this.beta = beta;\n    this.gamma = gamma;\n  }\n\n  static parseSetting(value: string): DeviceOrientation {\n    if (value) {\n      const jsonObject = JSON.parse(value);\n      return new DeviceOrientation(jsonObject.alpha, jsonObject.beta, jsonObject.gamma);\n    }\n    return new DeviceOrientation(0, 0, 0);\n  }\n\n  static parseUserInput(alphaString: string, betaString: string, gammaString: string): DeviceOrientation|null {\n    if (!alphaString && !betaString && !gammaString) {\n      return null;\n    }\n\n    const isAlphaValid = DeviceOrientation.alphaAngleValidator(alphaString);\n    const isBetaValid = DeviceOrientation.betaAngleValidator(betaString);\n    const isGammaValid = DeviceOrientation.gammaAngleValidator(gammaString);\n\n    if (!isAlphaValid && !isBetaValid && !isGammaValid) {\n      return null;\n    }\n\n    const alpha = isAlphaValid ? parseFloat(alphaString) : -1;\n    const beta = isBetaValid ? parseFloat(betaString) : -1;\n    const gamma = isGammaValid ? parseFloat(gammaString) : -1;\n\n    return new DeviceOrientation(alpha, beta, gamma);\n  }\n\n  static angleRangeValidator(value: string, interval: {\n    minimum: number,\n    maximum: number,\n  }): boolean {\n    const numValue = parseFloat(value);\n    return /^([+-]?[\\d]+(\\.\\d+)?|[+-]?\\.\\d+)$/.test(value) && numValue >= interval.minimum &&\n        numValue < interval.maximum;\n  }\n\n  static alphaAngleValidator(value: string): boolean {\n    // https://w3c.github.io/deviceorientation/#device-orientation-model\n    // Alpha must be within the [0, 360) interval.\n    return DeviceOrientation.angleRangeValidator(value, {minimum: 0, maximum: 360});\n  }\n\n  static betaAngleValidator(value: string): boolean {\n    // https://w3c.github.io/deviceorientation/#device-orientation-model\n    // Beta must be within the [-180, 180) interval.\n    return DeviceOrientation.angleRangeValidator(value, {minimum: -180, maximum: 180});\n  }\n\n  static gammaAngleValidator(value: string): boolean {\n    // https://w3c.github.io/deviceorientation/#device-orientation-model\n    // Gamma must be within the [-90, 90) interval.\n    return DeviceOrientation.angleRangeValidator(value, {minimum: -90, maximum: 90});\n  }\n\n  toSetting(): string {\n    return JSON.stringify(this);\n  }\n}\n\nSDKModel.register(EmulationModel, {capabilities: Capability.EMULATION, autostart: true});\n", "// Copyright 2017 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport type * as ProtocolProxyApi from '../../generated/protocol-proxy-api.js';\nimport * as Protocol from '../../generated/protocol.js';\nimport * as Common from '../common/common.js';\nimport * as Platform from '../platform/platform.js';\n\nimport {CategorizedBreakpoint, Category} from './CategorizedBreakpoint.js';\nimport type {EventListenerPausedDetailsAuxData, Location} from './DebuggerModel.js';\nimport {DOMModel, type DOMNode, Events as DOMModelEvents} from './DOMModel.js';\nimport {RemoteObject} from './RemoteObject.js';\nimport {RuntimeModel} from './RuntimeModel.js';\nimport {SDKModel} from './SDKModel.js';\nimport {Capability, type Target} from './Target.js';\nimport {type SDKModelObserver, TargetManager} from './TargetManager.js';\n\nexport class DOMDebuggerModel extends SDKModel<EventTypes> {\n  readonly agent: ProtocolProxyApi.DOMDebuggerApi;\n  readonly #runtimeModel: RuntimeModel;\n  #domModel: DOMModel;\n  #domBreakpoints: DOMBreakpoint[];\n  readonly #domBreakpointsSetting: Common.Settings.Setting<Array<{\n    url: Platform.DevToolsPath.UrlString,\n    path: string,\n    type: Protocol.DOMDebugger.DOMBreakpointType,\n    enabled: boolean,\n  }>>;\n  suspended = false;\n\n  constructor(target: Target) {\n    super(target);\n    this.agent = target.domdebuggerAgent();\n    this.#runtimeModel = (target.model(RuntimeModel) as RuntimeModel);\n    this.#domModel = (target.model(DOMModel) as DOMModel);\n    this.#domModel.addEventListener(DOMModelEvents.DocumentUpdated, this.documentUpdated, this);\n    this.#domModel.addEventListener(DOMModelEvents.NodeRemoved, this.nodeRemoved, this);\n\n    this.#domBreakpoints = [];\n    this.#domBreakpointsSetting = Common.Settings.Settings.instance().createLocalSetting('dom-breakpoints', []);\n    if (this.#domModel.existingDocument()) {\n      void this.documentUpdated();\n    }\n  }\n\n  runtimeModel(): RuntimeModel {\n    return this.#runtimeModel;\n  }\n\n  override async suspendModel(): Promise<void> {\n    this.suspended = true;\n  }\n\n  override async resumeModel(): Promise<void> {\n    this.suspended = false;\n  }\n\n  async eventListeners(remoteObject: RemoteObject): Promise<EventListener[]> {\n    console.assert(remoteObject.runtimeModel() === this.#runtimeModel);\n    if (!remoteObject.objectId) {\n      return [];\n    }\n\n    const listeners = await this.agent.invoke_getEventListeners({objectId: remoteObject.objectId});\n    const eventListeners = [];\n    for (const payload of listeners.listeners || []) {\n      const location = this.#runtimeModel.debuggerModel().createRawLocationByScriptId(\n          payload.scriptId, payload.lineNumber, payload.columnNumber);\n      if (!location) {\n        continue;\n      }\n      eventListeners.push(new EventListener(\n          this, remoteObject, payload.type, payload.useCapture, payload.passive, payload.once,\n          payload.handler ? this.#runtimeModel.createRemoteObject(payload.handler) : null,\n          payload.originalHandler ? this.#runtimeModel.createRemoteObject(payload.originalHandler) : null, location,\n          null));\n    }\n    return eventListeners;\n  }\n\n  retrieveDOMBreakpoints(): void {\n    void this.#domModel.requestDocument();\n  }\n\n  domBreakpoints(): DOMBreakpoint[] {\n    return this.#domBreakpoints.slice();\n  }\n\n  hasDOMBreakpoint(node: DOMNode, type: Protocol.DOMDebugger.DOMBreakpointType): boolean {\n    return this.#domBreakpoints.some(breakpoint => (breakpoint.node === node && breakpoint.type === type));\n  }\n\n  setDOMBreakpoint(node: DOMNode, type: Protocol.DOMDebugger.DOMBreakpointType): DOMBreakpoint {\n    for (const breakpoint of this.#domBreakpoints) {\n      if (breakpoint.node === node && breakpoint.type === type) {\n        this.toggleDOMBreakpoint(breakpoint, true);\n        return breakpoint;\n      }\n    }\n    const breakpoint = new DOMBreakpoint(this, node, type, true);\n    this.#domBreakpoints.push(breakpoint);\n    this.enableDOMBreakpoint(breakpoint);\n    this.saveDOMBreakpoints();\n    this.dispatchEventToListeners(Events.DOM_BREAKPOINT_ADDED, breakpoint);\n    return breakpoint;\n  }\n\n  removeDOMBreakpoint(node: DOMNode, type: Protocol.DOMDebugger.DOMBreakpointType): void {\n    this.removeDOMBreakpoints(breakpoint => breakpoint.node === node && breakpoint.type === type);\n  }\n\n  removeAllDOMBreakpoints(): void {\n    this.removeDOMBreakpoints(_breakpoint => true);\n  }\n\n  toggleDOMBreakpoint(breakpoint: DOMBreakpoint, enabled: boolean): void {\n    if (enabled === breakpoint.enabled) {\n      return;\n    }\n    breakpoint.enabled = enabled;\n    if (enabled) {\n      this.enableDOMBreakpoint(breakpoint);\n    } else {\n      this.disableDOMBreakpoint(breakpoint);\n    }\n    this.saveDOMBreakpoints();\n    this.dispatchEventToListeners(Events.DOM_BREAKPOINT_TOGGLED, breakpoint);\n  }\n\n  private enableDOMBreakpoint(breakpoint: DOMBreakpoint): void {\n    if (breakpoint.node.id) {\n      void this.agent.invoke_setDOMBreakpoint({nodeId: breakpoint.node.id, type: breakpoint.type});\n      breakpoint.node.setMarker(Marker, true);\n    }\n  }\n\n  private disableDOMBreakpoint(breakpoint: DOMBreakpoint): void {\n    if (breakpoint.node.id) {\n      void this.agent.invoke_removeDOMBreakpoint({nodeId: breakpoint.node.id, type: breakpoint.type});\n      breakpoint.node.setMarker(Marker, this.nodeHasBreakpoints(breakpoint.node) ? true : null);\n    }\n  }\n\n  private nodeHasBreakpoints(node: DOMNode): boolean {\n    for (const breakpoint of this.#domBreakpoints) {\n      if (breakpoint.node === node && breakpoint.enabled) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  resolveDOMBreakpointData(auxData: {\n    type: Protocol.DOMDebugger.DOMBreakpointType,\n    nodeId: Protocol.DOM.NodeId,\n    targetNodeId: Protocol.DOM.NodeId,\n    insertion: boolean,\n  }): {\n    type: Protocol.DOMDebugger.DOMBreakpointType,\n    node: DOMNode,\n    targetNode: DOMNode|null,\n    insertion: boolean,\n  }|null {\n    const type = auxData['type'];\n    const node = this.#domModel.nodeForId(auxData['nodeId']);\n    if (!type || !node) {\n      return null;\n    }\n    let targetNode: (DOMNode|null)|null = null;\n    let insertion = false;\n    if (type === Protocol.DOMDebugger.DOMBreakpointType.SubtreeModified) {\n      insertion = auxData['insertion'] || false;\n      targetNode = this.#domModel.nodeForId(auxData['targetNodeId']);\n    }\n    return {type, node, targetNode, insertion};\n  }\n\n  private currentURL(): Platform.DevToolsPath.UrlString {\n    const domDocument = this.#domModel.existingDocument();\n    return domDocument ? domDocument.documentURL : Platform.DevToolsPath.EmptyUrlString;\n  }\n\n  private async documentUpdated(): Promise<void> {\n    if (this.suspended) {\n      return;\n    }\n    const removed = this.#domBreakpoints;\n    this.#domBreakpoints = [];\n    this.dispatchEventToListeners(Events.DOM_BREAKPOINTS_REMOVED, removed);\n\n    // this.currentURL() is empty when the page is reloaded because the\n    // new document has not been requested yet and the old one has been\n    // removed. Therefore, we need to request the document and wait for it.\n    // Note that requestDocument() caches the document so that it is requested\n    // only once.\n    const document = await this.#domModel.requestDocument();\n    const currentURL = document ? document.documentURL : Platform.DevToolsPath.EmptyUrlString;\n    for (const breakpoint of this.#domBreakpointsSetting.get()) {\n      if (breakpoint.url === currentURL) {\n        void this.#domModel.pushNodeByPathToFrontend(breakpoint.path).then(appendBreakpoint.bind(this, breakpoint));\n      }\n    }\n\n    function appendBreakpoint(\n        this: DOMDebuggerModel, breakpoint: {\n          type: Protocol.DOMDebugger.DOMBreakpointType,\n          enabled: boolean,\n        },\n        nodeId: Protocol.DOM.NodeId|null): void {\n      const node = nodeId ? this.#domModel.nodeForId(nodeId) : null;\n      if (!node) {\n        return;\n      }\n\n      // Before creating a new DOMBreakpoint, we need to ensure there's no\n      // existing breakpoint with the same node and breakpoint type, else we would create\n      // multiple DOMBreakpoints of the same type and for the same node.\n      for (const existingBreakpoint of this.#domBreakpoints) {\n        if (existingBreakpoint.node === node && existingBreakpoint.type === breakpoint.type) {\n          return;\n        }\n      }\n\n      const domBreakpoint = new DOMBreakpoint(this, node, breakpoint.type, breakpoint.enabled);\n      this.#domBreakpoints.push(domBreakpoint);\n      if (breakpoint.enabled) {\n        this.enableDOMBreakpoint(domBreakpoint);\n      }\n      this.dispatchEventToListeners(Events.DOM_BREAKPOINT_ADDED, domBreakpoint);\n    }\n  }\n\n  private removeDOMBreakpoints(filter: (arg0: DOMBreakpoint) => boolean): void {\n    const removed = [];\n    const left = [];\n    for (const breakpoint of this.#domBreakpoints) {\n      if (filter(breakpoint)) {\n        removed.push(breakpoint);\n        if (breakpoint.enabled) {\n          breakpoint.enabled = false;\n          this.disableDOMBreakpoint(breakpoint);\n        }\n      } else {\n        left.push(breakpoint);\n      }\n    }\n\n    if (!removed.length) {\n      return;\n    }\n    this.#domBreakpoints = left;\n    this.saveDOMBreakpoints();\n    this.dispatchEventToListeners(Events.DOM_BREAKPOINTS_REMOVED, removed);\n  }\n\n  private nodeRemoved(event: Common.EventTarget.EventTargetEvent<{node: DOMNode, parent: DOMNode}>): void {\n    if (this.suspended) {\n      return;\n    }\n    const {node} = event.data;\n    const children = node.children() || [];\n    this.removeDOMBreakpoints(breakpoint => breakpoint.node === node || children.indexOf(breakpoint.node) !== -1);\n  }\n\n  private saveDOMBreakpoints(): void {\n    const currentURL = this.currentURL();\n    const breakpoints = this.#domBreakpointsSetting.get().filter((breakpoint: {\n                                                                   url: Platform.DevToolsPath.UrlString,\n                                                                 }) => breakpoint.url !== currentURL);\n    for (const breakpoint of this.#domBreakpoints) {\n      breakpoints.push(\n          {url: currentURL, path: breakpoint.node.path(), type: breakpoint.type, enabled: breakpoint.enabled});\n    }\n    this.#domBreakpointsSetting.set(breakpoints);\n  }\n}\n\nexport const enum Events {\n  DOM_BREAKPOINT_ADDED = 'DOMBreakpointAdded',\n  DOM_BREAKPOINT_TOGGLED = 'DOMBreakpointToggled',\n  DOM_BREAKPOINTS_REMOVED = 'DOMBreakpointsRemoved',\n}\n\nexport interface EventTypes {\n  [Events.DOM_BREAKPOINT_ADDED]: DOMBreakpoint;\n  [Events.DOM_BREAKPOINT_TOGGLED]: DOMBreakpoint;\n  [Events.DOM_BREAKPOINTS_REMOVED]: DOMBreakpoint[];\n}\n\nconst Marker = 'breakpoint-marker';\n\nexport class DOMBreakpoint {\n  domDebuggerModel: DOMDebuggerModel;\n  node: DOMNode;\n  type: Protocol.DOMDebugger.DOMBreakpointType;\n  enabled: boolean;\n\n  constructor(\n      domDebuggerModel: DOMDebuggerModel, node: DOMNode, type: Protocol.DOMDebugger.DOMBreakpointType,\n      enabled: boolean) {\n    this.domDebuggerModel = domDebuggerModel;\n    this.node = node;\n    this.type = type;\n    this.enabled = enabled;\n  }\n}\n\nexport class EventListener {\n  readonly #domDebuggerModel: DOMDebuggerModel;\n  readonly #eventTarget: RemoteObject;\n  readonly #type: string;\n  readonly #useCapture: boolean;\n  readonly #passive: boolean;\n  readonly #once: boolean;\n  readonly #handler: RemoteObject|null;\n  readonly #originalHandler: RemoteObject|null;\n  readonly #location: Location;\n  readonly #sourceURL: Platform.DevToolsPath.UrlString;\n  readonly #customRemoveFunction: RemoteObject|null;\n  #origin: string;\n\n  constructor(\n      domDebuggerModel: DOMDebuggerModel, eventTarget: RemoteObject, type: string, useCapture: boolean,\n      passive: boolean, once: boolean, handler: RemoteObject|null, originalHandler: RemoteObject|null,\n      location: Location, customRemoveFunction: RemoteObject|null, origin?: string) {\n    this.#domDebuggerModel = domDebuggerModel;\n    this.#eventTarget = eventTarget;\n    this.#type = type;\n    this.#useCapture = useCapture;\n    this.#passive = passive;\n    this.#once = once;\n    this.#handler = handler;\n    this.#originalHandler = originalHandler || handler;\n    this.#location = location;\n    const script = location.script();\n    this.#sourceURL = script ? script.contentURL() : Platform.DevToolsPath.EmptyUrlString;\n    this.#customRemoveFunction = customRemoveFunction;\n    this.#origin = origin || EventListener.Origin.RAW;\n  }\n\n  domDebuggerModel(): DOMDebuggerModel {\n    return this.#domDebuggerModel;\n  }\n\n  type(): string {\n    return this.#type;\n  }\n\n  useCapture(): boolean {\n    return this.#useCapture;\n  }\n\n  passive(): boolean {\n    return this.#passive;\n  }\n\n  once(): boolean {\n    return this.#once;\n  }\n\n  handler(): RemoteObject|null {\n    return this.#handler;\n  }\n\n  location(): Location {\n    return this.#location;\n  }\n\n  sourceURL(): Platform.DevToolsPath.UrlString {\n    return this.#sourceURL;\n  }\n\n  originalHandler(): RemoteObject|null {\n    return this.#originalHandler;\n  }\n\n  canRemove(): boolean {\n    return Boolean(this.#customRemoveFunction) || this.#origin !== EventListener.Origin.FRAMEWORK_USER;\n  }\n\n  remove(): Promise<void> {\n    if (!this.canRemove()) {\n      return Promise.resolve(undefined);\n    }\n\n    if (this.#origin !== EventListener.Origin.FRAMEWORK_USER) {\n      function removeListener(\n          this: {\n            removeEventListener: (arg0: string, arg1: () => void, arg2: boolean) => void,\n          },\n          type: string, listener: () => void, useCapture: boolean): void {\n        this.removeEventListener(type, listener, useCapture);\n        // @ts-expect-error:\n        if (this['on' + type]) {\n          // @ts-expect-error:\n          this['on' + type] = undefined;\n        }\n      }\n\n      return this.#eventTarget\n          .callFunction(\n              removeListener,\n              [\n                RemoteObject.toCallArgument(this.#type),\n                RemoteObject.toCallArgument(this.#originalHandler),\n                RemoteObject.toCallArgument(this.#useCapture),\n              ])\n          .then(() => undefined);\n    }\n\n    if (this.#customRemoveFunction) {\n      function callCustomRemove(\n          this: (arg0: string, arg1: () => void, arg2: boolean, arg3: boolean) => void, type: string,\n          listener: () => void, useCapture: boolean, passive: boolean): void {\n        this.call(null, type, listener, useCapture, passive);\n      }\n\n      return this.#customRemoveFunction\n          .callFunction(\n              callCustomRemove,\n              [\n                RemoteObject.toCallArgument(this.#type),\n                RemoteObject.toCallArgument(this.#originalHandler),\n                RemoteObject.toCallArgument(this.#useCapture),\n                RemoteObject.toCallArgument(this.#passive),\n              ])\n          .then(() => undefined);\n    }\n    return Promise.resolve(undefined);\n  }\n\n  canTogglePassive(): boolean {\n    return this.#origin !== EventListener.Origin.FRAMEWORK_USER;\n  }\n\n  togglePassive(): Promise<undefined> {\n    return this.#eventTarget\n        .callFunction(\n            callTogglePassive,\n            [\n              RemoteObject.toCallArgument(this.#type),\n              RemoteObject.toCallArgument(this.#originalHandler),\n              RemoteObject.toCallArgument(this.#useCapture),\n              RemoteObject.toCallArgument(this.#passive),\n            ])\n        .then(() => undefined);\n\n    function callTogglePassive(\n        this: {\n          addEventListener: (arg0: string, arg1: () => void, arg2: {\n            capture: boolean,\n            passive: boolean,\n          }) => void,\n          removeEventListener: (arg0: string, arg1: () => void, arg2: {\n            capture: boolean,\n          }) => void,\n        },\n        type: string, listener: () => void, useCapture: boolean, passive: boolean): void {\n      this.removeEventListener(type, listener, {capture: useCapture});\n      this.addEventListener(type, listener, {capture: useCapture, passive: !passive});\n    }\n  }\n\n  origin(): string {\n    return this.#origin;\n  }\n\n  markAsFramework(): void {\n    this.#origin = EventListener.Origin.FRAMEWORK;\n  }\n\n  isScrollBlockingType(): boolean {\n    return this.#type === 'touchstart' || this.#type === 'touchmove' || this.#type === 'mousewheel' ||\n        this.#type === 'wheel';\n  }\n}\n\nexport namespace EventListener {\n  export const enum Origin {\n    RAW = 'Raw',\n    FRAMEWORK = 'Framework',\n    FRAMEWORK_USER = 'FrameworkUser',\n  }\n}\n\nexport class CSPViolationBreakpoint extends CategorizedBreakpoint {\n  readonly #type: Protocol.DOMDebugger.CSPViolationType;\n  constructor(category: Category, type: Protocol.DOMDebugger.CSPViolationType) {\n    super(category, type);\n    this.#type = type;\n  }\n\n  type(): Protocol.DOMDebugger.CSPViolationType {\n    return this.#type;\n  }\n}\n\nexport class DOMEventListenerBreakpoint extends CategorizedBreakpoint {\n  readonly eventTargetNames: string[];\n  constructor(eventName: string, eventTargetNames: string[], category: Category) {\n    super(category, eventName);\n    this.eventTargetNames = eventTargetNames;\n  }\n\n  override setEnabled(enabled: boolean): void {\n    if (this.enabled() === enabled) {\n      return;\n    }\n    super.setEnabled(enabled);\n    for (const model of TargetManager.instance().models(DOMDebuggerModel)) {\n      this.updateOnModel(model);\n    }\n  }\n\n  updateOnModel(model: DOMDebuggerModel): void {\n    for (const eventTargetName of this.eventTargetNames) {\n      if (this.enabled()) {\n        void model.agent.invoke_setEventListenerBreakpoint({eventName: this.name, targetName: eventTargetName});\n      } else {\n        void model.agent.invoke_removeEventListenerBreakpoint({eventName: this.name, targetName: eventTargetName});\n      }\n    }\n  }\n\n  static readonly listener = 'listener:';\n}\n\nlet domDebuggerManagerInstance: DOMDebuggerManager;\n\nexport class DOMDebuggerManager implements SDKModelObserver<DOMDebuggerModel> {\n  readonly #xhrBreakpointsSetting: Common.Settings.Setting<Array<{url: string, enabled: boolean}>>;\n  readonly #xhrBreakpoints = new Map<string, boolean>();\n\n  readonly #cspViolationsToBreakOn: CSPViolationBreakpoint[] = [];\n  readonly #eventListenerBreakpoints: DOMEventListenerBreakpoint[] = [];\n\n  constructor() {\n    this.#xhrBreakpointsSetting = Common.Settings.Settings.instance().createLocalSetting('xhr-breakpoints', []);\n    for (const breakpoint of this.#xhrBreakpointsSetting.get()) {\n      this.#xhrBreakpoints.set(breakpoint.url, breakpoint.enabled);\n    }\n\n    this.#cspViolationsToBreakOn.push(new CSPViolationBreakpoint(\n        Category.TRUSTED_TYPE_VIOLATION, Protocol.DOMDebugger.CSPViolationType.TrustedtypeSinkViolation));\n    this.#cspViolationsToBreakOn.push(new CSPViolationBreakpoint(\n        Category.TRUSTED_TYPE_VIOLATION, Protocol.DOMDebugger.CSPViolationType.TrustedtypePolicyViolation));\n\n    this.createEventListenerBreakpoints(\n        Category.MEDIA,\n        [\n          'play',      'pause',          'playing',    'canplay',    'canplaythrough', 'seeking',\n          'seeked',    'timeupdate',     'ended',      'ratechange', 'durationchange', 'volumechange',\n          'loadstart', 'progress',       'suspend',    'abort',      'error',          'emptied',\n          'stalled',   'loadedmetadata', 'loadeddata', 'waiting',\n        ],\n        ['audio', 'video']);\n    this.createEventListenerBreakpoints(\n        Category.PICTURE_IN_PICTURE, ['enterpictureinpicture', 'leavepictureinpicture'], ['video']);\n    this.createEventListenerBreakpoints(Category.PICTURE_IN_PICTURE, ['resize'], ['PictureInPictureWindow']);\n    this.createEventListenerBreakpoints(Category.PICTURE_IN_PICTURE, ['enter'], ['documentPictureInPicture']);\n    this.createEventListenerBreakpoints(\n        Category.CLIPBOARD, ['copy', 'cut', 'paste', 'beforecopy', 'beforecut', 'beforepaste'], ['*']);\n    this.createEventListenerBreakpoints(\n        Category.CONTROL,\n        [\n          'resize',\n          'scroll',\n          'scrollend',\n          'scrollsnapchange',\n          'scrollsnapchanging',\n          'zoom',\n          'focus',\n          'blur',\n          'select',\n          'change',\n          'submit',\n          'reset',\n        ],\n        ['*']);\n    this.createEventListenerBreakpoints(Category.DEVICE, ['deviceorientation', 'devicemotion'], ['*']);\n    this.createEventListenerBreakpoints(\n        Category.DOM_MUTATION,\n        [\n          'DOMActivate',\n          'DOMFocusIn',\n          'DOMFocusOut',\n          'DOMAttrModified',\n          'DOMCharacterDataModified',\n          'DOMNodeInserted',\n          'DOMNodeInsertedIntoDocument',\n          'DOMNodeRemoved',\n          'DOMNodeRemovedFromDocument',\n          'DOMSubtreeModified',\n          'DOMContentLoaded',\n        ],\n        ['*']);\n    this.createEventListenerBreakpoints(\n        Category.DRAG_DROP, ['drag', 'dragstart', 'dragend', 'dragenter', 'dragover', 'dragleave', 'drop'], ['*']);\n\n    this.createEventListenerBreakpoints(Category.KEYBOARD, ['keydown', 'keyup', 'keypress', 'input'], ['*']);\n    this.createEventListenerBreakpoints(\n        Category.LOAD,\n        [\n          'load',\n          'beforeunload',\n          'unload',\n          'abort',\n          'error',\n          'hashchange',\n          'popstate',\n          'navigate',\n          'navigatesuccess',\n          'navigateerror',\n          'currentchange',\n          'navigateto',\n          'navigatefrom',\n          'finish',\n          'dispose',\n        ],\n        ['*']);\n    this.createEventListenerBreakpoints(\n        Category.MOUSE,\n        [\n          'auxclick',\n          'click',\n          'dblclick',\n          'mousedown',\n          'mouseup',\n          'mouseover',\n          'mousemove',\n          'mouseout',\n          'mouseenter',\n          'mouseleave',\n          'mousewheel',\n          'wheel',\n          'contextmenu',\n        ],\n        ['*']);\n    this.createEventListenerBreakpoints(\n        Category.POINTER,\n        [\n          'pointerover',\n          'pointerout',\n          'pointerenter',\n          'pointerleave',\n          'pointerdown',\n          'pointerup',\n          'pointermove',\n          'pointercancel',\n          'gotpointercapture',\n          'lostpointercapture',\n          'pointerrawupdate',\n        ],\n        ['*']);\n    this.createEventListenerBreakpoints(Category.TOUCH, ['touchstart', 'touchmove', 'touchend', 'touchcancel'], ['*']);\n    this.createEventListenerBreakpoints(Category.WORKER, ['message', 'messageerror'], ['*']);\n    this.createEventListenerBreakpoints(\n        Category.XHR, ['readystatechange', 'load', 'loadstart', 'loadend', 'abort', 'error', 'progress', 'timeout'],\n        ['xmlhttprequest', 'xmlhttprequestupload']);\n\n    TargetManager.instance().observeModels(DOMDebuggerModel, this);\n  }\n\n  static instance(opts: {\n    forceNew: boolean|null,\n  } = {forceNew: null}): DOMDebuggerManager {\n    const {forceNew} = opts;\n    if (!domDebuggerManagerInstance || forceNew) {\n      domDebuggerManagerInstance = new DOMDebuggerManager();\n    }\n\n    return domDebuggerManagerInstance;\n  }\n\n  cspViolationBreakpoints(): CSPViolationBreakpoint[] {\n    return this.#cspViolationsToBreakOn.slice();\n  }\n\n  private createEventListenerBreakpoints(category: Category, eventNames: string[], eventTargetNames: string[]): void {\n    for (const eventName of eventNames) {\n      this.#eventListenerBreakpoints.push(new DOMEventListenerBreakpoint(eventName, eventTargetNames, category));\n    }\n  }\n\n  resolveEventListenerBreakpoint({eventName, targetName}: EventListenerPausedDetailsAuxData): DOMEventListenerBreakpoint\n      |null {\n    const listenerPrefix = 'listener:';\n    if (eventName.startsWith(listenerPrefix)) {\n      eventName = eventName.substring(listenerPrefix.length);\n    } else {\n      return null;\n    }\n    targetName = (targetName || '*').toLowerCase();\n    let result: DOMEventListenerBreakpoint|null = null;\n    for (const breakpoint of this.#eventListenerBreakpoints) {\n      if (eventName && breakpoint.name === eventName && breakpoint.eventTargetNames.indexOf(targetName) !== -1) {\n        result = breakpoint;\n      }\n      if (!result && eventName && breakpoint.name === eventName && breakpoint.eventTargetNames.indexOf('*') !== -1) {\n        result = breakpoint;\n      }\n    }\n    return result;\n  }\n\n  eventListenerBreakpoints(): DOMEventListenerBreakpoint[] {\n    return this.#eventListenerBreakpoints.slice();\n  }\n\n  updateCSPViolationBreakpoints(): void {\n    const violationTypes = this.#cspViolationsToBreakOn.filter(v => v.enabled()).map(v => v.type());\n    for (const model of TargetManager.instance().models(DOMDebuggerModel)) {\n      this.updateCSPViolationBreakpointsForModel(model, violationTypes);\n    }\n  }\n\n  private updateCSPViolationBreakpointsForModel(\n      model: DOMDebuggerModel, violationTypes: Protocol.DOMDebugger.CSPViolationType[]): void {\n    void model.agent.invoke_setBreakOnCSPViolation({violationTypes});\n  }\n\n  xhrBreakpoints(): Map<string, boolean> {\n    return this.#xhrBreakpoints;\n  }\n\n  private saveXHRBreakpoints(): void {\n    const breakpoints = [];\n    for (const url of this.#xhrBreakpoints.keys()) {\n      breakpoints.push({url, enabled: this.#xhrBreakpoints.get(url) || false});\n    }\n    this.#xhrBreakpointsSetting.set(breakpoints);\n  }\n\n  addXHRBreakpoint(url: string, enabled: boolean): void {\n    this.#xhrBreakpoints.set(url, enabled);\n    if (enabled) {\n      for (const model of TargetManager.instance().models(DOMDebuggerModel)) {\n        void model.agent.invoke_setXHRBreakpoint({url});\n      }\n    }\n    this.saveXHRBreakpoints();\n  }\n\n  removeXHRBreakpoint(url: string): void {\n    const enabled = this.#xhrBreakpoints.get(url);\n    this.#xhrBreakpoints.delete(url);\n    if (enabled) {\n      for (const model of TargetManager.instance().models(DOMDebuggerModel)) {\n        void model.agent.invoke_removeXHRBreakpoint({url});\n      }\n    }\n    this.saveXHRBreakpoints();\n  }\n\n  toggleXHRBreakpoint(url: string, enabled: boolean): void {\n    this.#xhrBreakpoints.set(url, enabled);\n    for (const model of TargetManager.instance().models(DOMDebuggerModel)) {\n      if (enabled) {\n        void model.agent.invoke_setXHRBreakpoint({url});\n      } else {\n        void model.agent.invoke_removeXHRBreakpoint({url});\n      }\n    }\n    this.saveXHRBreakpoints();\n  }\n\n  modelAdded(domDebuggerModel: DOMDebuggerModel): void {\n    for (const url of this.#xhrBreakpoints.keys()) {\n      if (this.#xhrBreakpoints.get(url)) {\n        void domDebuggerModel.agent.invoke_setXHRBreakpoint({url});\n      }\n    }\n    for (const breakpoint of this.#eventListenerBreakpoints) {\n      if (breakpoint.enabled()) {\n        breakpoint.updateOnModel(domDebuggerModel);\n      }\n    }\n    const violationTypes = this.#cspViolationsToBreakOn.filter(v => v.enabled()).map(v => v.type());\n    this.updateCSPViolationBreakpointsForModel(domDebuggerModel, violationTypes);\n  }\n\n  modelRemoved(_domDebuggerModel: DOMDebuggerModel): void {\n  }\n}\n\nSDKModel.register(DOMDebuggerModel, {capabilities: Capability.DOM, autostart: false});\n", "// Copyright 2021 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport type * as ProtocolProxyApi from '../../generated/protocol-proxy-api.js';\n\nimport {CategorizedBreakpoint, Category} from './CategorizedBreakpoint.js';\nimport type {EventListenerPausedDetailsAuxData} from './DebuggerModel.js';\nimport {SDKModel} from './SDKModel.js';\nimport {Capability, type Target} from './Target.js';\nimport {type SDKModelObserver, TargetManager} from './TargetManager.js';\n\nexport const enum InstrumentationNames {\n  BEFORE_BIDDER_WORKLET_BIDDING_START = 'beforeBidderWorkletBiddingStart',\n  BEFORE_BIDDER_WORKLET_REPORTING_START = 'beforeBidderWorkletReportingStart',\n  BEFORE_SELLER_WORKLET_SCORING_START = 'beforeSellerWorkletScoringStart',\n  BEFORE_SELLER_WORKLET_REPORTING_START = 'beforeSellerWorkletReportingStart',\n  SET_TIMEOUT = 'setTimeout',\n  CLEAR_TIMEOUT = 'clearTimeout',\n  SET_TIMEOUT_CALLBACK = 'setTimeout.callback',\n  SET_INTERVAL = 'setInterval',\n  CLEAR_INTERVAL = 'clearInterval',\n  SET_INTERVAL_CALLBACK = 'setInterval.callback',\n  SCRIPT_FIRST_STATEMENT = 'scriptFirstStatement',\n  SCRIPT_BLOCKED_BY_CSP = 'scriptBlockedByCSP',\n  SHARED_STORAGE_WORKLET_SCRIPT_FIRST_STATEMENT = 'sharedStorageWorkletScriptFirstStatement',\n  REQUEST_ANIMATION_FRAME = 'requestAnimationFrame',\n  CANCEL_ANIMATION_FRAME = 'cancelAnimationFrame',\n  REQUEST_ANIMATION_FRAME_CALLBACK = 'requestAnimationFrame.callback',\n  WEBGL_ERROR_FIRED = 'webglErrorFired',\n  WEBGL_WARNING_FIRED = 'webglWarningFired',\n  ELEMENT_SET_INNER_HTML = 'Element.setInnerHTML',\n  CANVAS_CONTEXT_CREATED = 'canvasContextCreated',\n  GEOLOCATION_GET_CURRENT_POSITION = 'Geolocation.getCurrentPosition',\n  GEOLOCATION_WATCH_POSITION = 'Geolocation.watchPosition',\n  NOTIFICATION_REQUEST_PERMISSION = 'Notification.requestPermission',\n  DOM_WINDOW_CLOSE = 'DOMWindow.close',\n  DOCUMENT_WRITE = 'Document.write',\n  AUDIO_CONTEXT_CREATED = 'audioContextCreated',\n  AUDIO_CONTEXT_CLOSED = 'audioContextClosed',\n  AUDIO_CONTEXT_RESUMED = 'audioContextResumed',\n  AUDIO_CONTEXT_SUSPENDED = 'audioContextSuspended',\n}\n\nexport class EventBreakpointsModel extends SDKModel<void> {\n  readonly agent: ProtocolProxyApi.EventBreakpointsApi;\n\n  constructor(target: Target) {\n    super(target);\n    this.agent = target.eventBreakpointsAgent();\n  }\n}\n\n/**\n * This implementation (as opposed to similar class in DOMDebuggerModel) is for\n * instrumentation breakpoints in targets that run JS but do not have a DOM.\n **/\nclass EventListenerBreakpoint extends CategorizedBreakpoint {\n  override setEnabled(enabled: boolean): void {\n    if (this.enabled() === enabled) {\n      return;\n    }\n    super.setEnabled(enabled);\n    for (const model of TargetManager.instance().models(EventBreakpointsModel)) {\n      this.updateOnModel(model);\n    }\n  }\n\n  updateOnModel(model: EventBreakpointsModel): void {\n    if (this.enabled()) {\n      void model.agent.invoke_setInstrumentationBreakpoint({eventName: this.name});\n    } else {\n      void model.agent.invoke_removeInstrumentationBreakpoint({eventName: this.name});\n    }\n  }\n\n  static readonly instrumentationPrefix = 'instrumentation:';\n}\n\nlet eventBreakpointManagerInstance: EventBreakpointsManager;\n\nexport class EventBreakpointsManager implements SDKModelObserver<EventBreakpointsModel> {\n  readonly #eventListenerBreakpoints: EventListenerBreakpoint[] = [];\n\n  constructor() {\n    this.createInstrumentationBreakpoints(Category.AUCTION_WORKLET, [\n      InstrumentationNames.BEFORE_BIDDER_WORKLET_BIDDING_START,\n      InstrumentationNames.BEFORE_BIDDER_WORKLET_REPORTING_START,\n      InstrumentationNames.BEFORE_SELLER_WORKLET_SCORING_START,\n      InstrumentationNames.BEFORE_SELLER_WORKLET_REPORTING_START,\n    ]);\n    this.createInstrumentationBreakpoints(Category.ANIMATION, [\n      InstrumentationNames.REQUEST_ANIMATION_FRAME,\n      InstrumentationNames.CANCEL_ANIMATION_FRAME,\n      InstrumentationNames.REQUEST_ANIMATION_FRAME_CALLBACK,\n    ]);\n    this.createInstrumentationBreakpoints(Category.CANVAS, [\n      InstrumentationNames.CANVAS_CONTEXT_CREATED,\n      InstrumentationNames.WEBGL_ERROR_FIRED,\n      InstrumentationNames.WEBGL_WARNING_FIRED,\n    ]);\n    this.createInstrumentationBreakpoints(Category.GEOLOCATION, [\n      InstrumentationNames.GEOLOCATION_GET_CURRENT_POSITION,\n      InstrumentationNames.GEOLOCATION_WATCH_POSITION,\n    ]);\n    this.createInstrumentationBreakpoints(Category.NOTIFICATION, [\n      InstrumentationNames.NOTIFICATION_REQUEST_PERMISSION,\n    ]);\n    this.createInstrumentationBreakpoints(Category.PARSE, [\n      InstrumentationNames.ELEMENT_SET_INNER_HTML,\n      InstrumentationNames.DOCUMENT_WRITE,\n    ]);\n    this.createInstrumentationBreakpoints(Category.SCRIPT, [\n      InstrumentationNames.SCRIPT_FIRST_STATEMENT,\n      InstrumentationNames.SCRIPT_BLOCKED_BY_CSP,\n    ]);\n    this.createInstrumentationBreakpoints(Category.SHARED_STORAGE_WORKLET, [\n      InstrumentationNames.SHARED_STORAGE_WORKLET_SCRIPT_FIRST_STATEMENT,\n    ]);\n    this.createInstrumentationBreakpoints(Category.TIMER, [\n      InstrumentationNames.SET_TIMEOUT,\n      InstrumentationNames.CLEAR_TIMEOUT,\n      InstrumentationNames.SET_TIMEOUT_CALLBACK,\n      InstrumentationNames.SET_INTERVAL,\n      InstrumentationNames.CLEAR_INTERVAL,\n      InstrumentationNames.SET_INTERVAL_CALLBACK,\n    ]);\n    this.createInstrumentationBreakpoints(Category.WINDOW, [\n      InstrumentationNames.DOM_WINDOW_CLOSE,\n    ]);\n    this.createInstrumentationBreakpoints(Category.WEB_AUDIO, [\n      InstrumentationNames.AUDIO_CONTEXT_CREATED,\n      InstrumentationNames.AUDIO_CONTEXT_CLOSED,\n      InstrumentationNames.AUDIO_CONTEXT_RESUMED,\n      InstrumentationNames.AUDIO_CONTEXT_SUSPENDED,\n    ]);\n\n    TargetManager.instance().observeModels(EventBreakpointsModel, this);\n  }\n\n  static instance(opts: {\n    forceNew: boolean|null,\n  } = {forceNew: null}): EventBreakpointsManager {\n    const {forceNew} = opts;\n    if (!eventBreakpointManagerInstance || forceNew) {\n      eventBreakpointManagerInstance = new EventBreakpointsManager();\n    }\n\n    return eventBreakpointManagerInstance;\n  }\n\n  private createInstrumentationBreakpoints(category: Category, instrumentationNames: InstrumentationNames[]): void {\n    for (const instrumentationName of instrumentationNames) {\n      this.#eventListenerBreakpoints.push(new EventListenerBreakpoint(category, instrumentationName));\n    }\n  }\n\n  eventListenerBreakpoints(): EventListenerBreakpoint[] {\n    return this.#eventListenerBreakpoints.slice();\n  }\n\n  resolveEventListenerBreakpoint({eventName}: EventListenerPausedDetailsAuxData): EventListenerBreakpoint|null {\n    if (!eventName.startsWith(EventListenerBreakpoint.instrumentationPrefix)) {\n      return null;\n    }\n\n    const instrumentationName = eventName.substring(EventListenerBreakpoint.instrumentationPrefix.length);\n    return this.#eventListenerBreakpoints.find(b => b.name === instrumentationName) || null;\n  }\n\n  modelAdded(eventBreakpointModel: EventBreakpointsModel): void {\n    for (const breakpoint of this.#eventListenerBreakpoints) {\n      if (breakpoint.enabled()) {\n        breakpoint.updateOnModel(eventBreakpointModel);\n      }\n    }\n  }\n\n  modelRemoved(_eventBreakpointModel: EventBreakpointsModel): void {\n  }\n}\n\nSDKModel.register(EventBreakpointsModel, {capabilities: Capability.EVENT_BREAKPOINTS, autostart: false});\n", "// Copyright 2020 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport type {PageResourceLoadInitiator} from './PageResourceLoader.js';\nimport type {DebugId} from './SourceMap.js';\n\nexport interface FrameAssociated {\n  createPageResourceLoadInitiator(): PageResourceLoadInitiator;\n  debugId(): DebugId|null;\n}\n", "// Copyright 2019 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as Common from '../common/common.js';\n\nimport type {HeapProfilerModel} from './HeapProfilerModel.js';\nimport {RuntimeModel} from './RuntimeModel.js';\nimport {type SDKModelObserver, TargetManager} from './TargetManager.js';\n\nlet isolateManagerInstance: IsolateManager;\n\nexport class IsolateManager extends Common.ObjectWrapper.ObjectWrapper<EventTypes> implements\n    SDKModelObserver<RuntimeModel> {\n  readonly #isolates = new Map<string, Isolate>();\n  /**\n   * Contains null while the isolateId is being retrieved.\n   */\n  #isolateIdByModel = new Map<RuntimeModel, string|null>();\n  #observers = new Set<Observer>();\n  #pollId = 0;\n\n  constructor() {\n    super();\n\n    TargetManager.instance().observeModels(RuntimeModel, this);\n  }\n\n  static instance({forceNew}: {\n    forceNew: boolean,\n  } = {forceNew: false}): IsolateManager {\n    if (!isolateManagerInstance || forceNew) {\n      isolateManagerInstance = new IsolateManager();\n    }\n\n    return isolateManagerInstance;\n  }\n\n  observeIsolates(observer: Observer): void {\n    if (this.#observers.has(observer)) {\n      throw new Error('Observer can only be registered once');\n    }\n    if (!this.#observers.size) {\n      void this.poll();\n    }\n    this.#observers.add(observer);\n    for (const isolate of this.#isolates.values()) {\n      observer.isolateAdded(isolate);\n    }\n  }\n\n  modelAdded(model: RuntimeModel): void {\n    void this.#modelAdded(model);\n  }\n\n  async #modelAdded(model: RuntimeModel): Promise<void> {\n    this.#isolateIdByModel.set(model, null);\n    const isolateId = await model.isolateId();\n    if (!this.#isolateIdByModel.has(model)) {\n      // The model has been removed during await.\n      return;\n    }\n    if (!isolateId) {\n      this.#isolateIdByModel.delete(model);\n      return;\n    }\n    this.#isolateIdByModel.set(model, isolateId);\n    let isolate = this.#isolates.get(isolateId);\n    if (!isolate) {\n      isolate = new Isolate(isolateId);\n      this.#isolates.set(isolateId, isolate);\n    }\n    isolate.models().add(model);\n    if (isolate.models().size === 1) {\n      for (const observer of this.#observers) {\n        observer.isolateAdded(isolate);\n      }\n    } else {\n      for (const observer of this.#observers) {\n        observer.isolateChanged(isolate);\n      }\n    }\n  }\n\n  modelRemoved(model: RuntimeModel): void {\n    const isolateId = this.#isolateIdByModel.get(model);\n    this.#isolateIdByModel.delete(model);\n    if (!isolateId) {\n      return;\n    }\n    const isolate = this.#isolates.get(isolateId);\n    if (!isolate) {\n      return;\n    }\n    isolate.models().delete(model);\n    if (isolate.models().size) {\n      for (const observer of this.#observers) {\n        observer.isolateChanged(isolate);\n      }\n      return;\n    }\n    for (const observer of this.#observers) {\n      observer.isolateRemoved(isolate);\n    }\n    this.#isolates.delete(isolateId);\n  }\n\n  isolateByModel(model: RuntimeModel): Isolate|null {\n    return this.#isolates.get(this.#isolateIdByModel.get(model) || '') || null;\n  }\n\n  isolates(): Iterable<Isolate> {\n    return this.#isolates.values();\n  }\n\n  private async poll(): Promise<void> {\n    const pollId = this.#pollId;\n    while (pollId === this.#pollId) {\n      await Promise.all(Array.from(this.isolates(), isolate => isolate.update()));\n      await new Promise(r => window.setTimeout(r, PollIntervalMs));\n    }\n  }\n}\n\nexport interface Observer {\n  isolateAdded(isolate: Isolate): void;\n\n  isolateRemoved(isolate: Isolate): void;\n  isolateChanged(isolate: Isolate): void;\n}\n\nexport const enum Events {\n  MEMORY_CHANGED = 'MemoryChanged',\n}\n\nexport interface EventTypes {\n  [Events.MEMORY_CHANGED]: Isolate;\n}\n\nexport const MemoryTrendWindowMs = 120e3;\nconst PollIntervalMs = 2e3;\n\nexport class Isolate {\n  readonly #id: string;\n  readonly #models: Set<RuntimeModel>;\n  #usedHeapSize: number;\n  readonly #memoryTrend: MemoryTrend;\n\n  constructor(id: string) {\n    this.#id = id;\n    this.#models = new Set();\n    this.#usedHeapSize = 0;\n    const count = MemoryTrendWindowMs / PollIntervalMs;\n    this.#memoryTrend = new MemoryTrend(count);\n  }\n\n  id(): string {\n    return this.#id;\n  }\n\n  models(): Set<RuntimeModel> {\n    return this.#models;\n  }\n\n  runtimeModel(): RuntimeModel|null {\n    return this.#models.values().next().value || null;\n  }\n\n  heapProfilerModel(): HeapProfilerModel|null {\n    const runtimeModel = this.runtimeModel();\n    return runtimeModel?.heapProfilerModel() ?? null;\n  }\n\n  async update(): Promise<void> {\n    const model = this.runtimeModel();\n    const usage = model && await model.heapUsage();\n    if (!usage) {\n      return;\n    }\n    this.#usedHeapSize = usage.usedSize + (usage.embedderHeapUsedSize ?? 0) + (usage.backingStorageSize ?? 0);\n    this.#memoryTrend.add(this.#usedHeapSize);\n    IsolateManager.instance().dispatchEventToListeners(Events.MEMORY_CHANGED, this);\n  }\n\n  samplesCount(): number {\n    return this.#memoryTrend.count();\n  }\n\n  usedHeapSize(): number {\n    return this.#usedHeapSize;\n  }\n\n  /**\n   * bytes per millisecond\n   */\n  usedHeapSizeGrowRate(): number {\n    return this.#memoryTrend.fitSlope();\n  }\n}\n\nexport class MemoryTrend {\n  #maxCount: number;\n  #base!: number;\n  #index!: number;\n  #x!: number[];\n  #y!: number[];\n  #sx!: number;\n  #sy!: number;\n  #sxx!: number;\n  #sxy!: number;\n  constructor(maxCount: number) {\n    this.#maxCount = maxCount | 0;\n    this.reset();\n  }\n\n  reset(): void {\n    this.#base = Date.now();\n    this.#index = 0;\n    this.#x = [];\n    this.#y = [];\n    this.#sx = 0;\n    this.#sy = 0;\n    this.#sxx = 0;\n    this.#sxy = 0;\n  }\n\n  count(): number {\n    return this.#x.length;\n  }\n\n  add(heapSize: number, timestamp?: number): void {\n    const x = typeof timestamp === 'number' ? timestamp : Date.now() - this.#base;\n    const y = heapSize;\n    if (this.#x.length === this.#maxCount) {\n      // Turns into a cyclic buffer once it reaches the |#maxCount|.\n      const x0 = this.#x[this.#index];\n      const y0 = this.#y[this.#index];\n      this.#sx -= x0;\n      this.#sy -= y0;\n      this.#sxx -= x0 * x0;\n      this.#sxy -= x0 * y0;\n    }\n    this.#sx += x;\n    this.#sy += y;\n    this.#sxx += x * x;\n    this.#sxy += x * y;\n    this.#x[this.#index] = x;\n    this.#y[this.#index] = y;\n    this.#index = (this.#index + 1) % this.#maxCount;\n  }\n\n  fitSlope(): number {\n    // We use the linear regression model to find the slope.\n    const n = this.count();\n    return n < 2 ? 0 : (this.#sxy - this.#sx * this.#sy / n) / (this.#sxx - this.#sx * this.#sx / n);\n  }\n}\n", "// Copyright 2019 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport type * as ProtocolProxyApi from '../../generated/protocol-proxy-api.js';\nimport type * as Protocol from '../../generated/protocol.js';\n\nimport {SDKModel} from './SDKModel.js';\nimport {\n  Capability,\n  type Target,\n} from './Target.js';\n\n/**\n * The `IssuesModel` is a thin dispatch that does not store issues, but only creates the representation\n * class (usually derived from `Issue`) and passes the instances on via a dispatched event.\n * We chose this approach here because the lifetime of the Model is tied to the target, but DevTools\n * wants to preserve issues for targets (e.g. iframes) that are already gone as well.\n */\nexport class IssuesModel extends SDKModel<EventTypes> implements ProtocolProxyApi.AuditsDispatcher {\n  #disposed = false;\n  #enabled = false;\n\n  constructor(target: Target) {\n    super(target);\n    void this.ensureEnabled();\n  }\n\n  private async ensureEnabled(): Promise<void> {\n    if (this.#enabled) {\n      return;\n    }\n\n    this.#enabled = true;\n    this.target().registerAuditsDispatcher(this);\n    const auditsAgent = this.target().auditsAgent();\n    await auditsAgent.invoke_enable();\n  }\n\n  issueAdded(issueAddedEvent: Protocol.Audits.IssueAddedEvent): void {\n    this.dispatchEventToListeners(Events.ISSUE_ADDED, {issuesModel: this, inspectorIssue: issueAddedEvent.issue});\n  }\n\n  override dispose(): void {\n    super.dispose();\n    this.#disposed = true;\n  }\n\n  getTargetIfNotDisposed(): Target|null {\n    if (!this.#disposed) {\n      return this.target();\n    }\n    return null;\n  }\n}\n\nexport const enum Events {\n  ISSUE_ADDED = 'IssueAdded',\n}\n\nexport interface IssueAddedEvent {\n  issuesModel: IssuesModel;\n  inspectorIssue: Protocol.Audits.InspectorIssue;\n}\n\nexport interface EventTypes {\n  [Events.ISSUE_ADDED]: IssueAddedEvent;\n}\n\nSDKModel.register(IssuesModel, {capabilities: Capability.AUDITS, autostart: true});\n", "// Copyright 2016 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport type * as Protocol from '../../generated/protocol.js';\n\nimport {DOMModel, type DOMNode} from './DOMModel.js';\nimport type {SnapshotWithRect} from './PaintProfiler.js';\nimport type {Target} from './Target.js';\n\nexport interface Layer {\n  id(): string;\n  parentId(): string|null;\n  parent(): Layer|null;\n  isRoot(): boolean;\n  children(): Layer[];\n  addChild(child: Layer): void;\n  node(): DOMNode|null;\n  nodeForSelfOrAncestor(): DOMNode|null;\n  offsetX(): number;\n  offsetY(): number;\n  width(): number;\n  height(): number;\n  transform(): number[]|null;\n  quad(): number[];\n  anchorPoint(): number[];\n  invisible(): boolean;\n  paintCount(): number;\n  lastPaintRect(): Protocol.DOM.Rect|null;\n  scrollRects(): Protocol.LayerTree.ScrollRect[];\n  stickyPositionConstraint(): StickyPositionConstraint|null;\n  gpuMemoryUsage(): number;\n  requestCompositingReasons(): Promise<string[]>;\n  requestCompositingReasonIds(): Promise<string[]>;\n  drawsContent(): boolean;\n  snapshots(): Array<Promise<SnapshotWithRect|null>>;\n}\n\nexport namespace Layer {\n  export const enum ScrollRectType {\n    NON_FAST_SCROLLABLE = 'NonFastScrollable',\n    TOUCH_EVENT_HANDLER = 'TouchEventHandler',\n    WHEEL_EVENT_HANDLER = 'WheelEventHandler',\n    REPAINTS_ON_SCROLL = 'RepaintsOnScroll',\n    MAIN_THREAD_SCROLL_REASON = 'MainThreadScrollingReason',\n  }\n}\n\nexport class StickyPositionConstraint {\n  readonly #stickyBoxRect: Protocol.DOM.Rect;\n  readonly #containingBlockRect: Protocol.DOM.Rect;\n  readonly #nearestLayerShiftingStickyBox: Layer|null;\n  readonly #nearestLayerShiftingContainingBlock: Layer|null;\n\n  constructor(layerTree: LayerTreeBase|null, constraint: Protocol.LayerTree.StickyPositionConstraint) {\n    this.#stickyBoxRect = constraint.stickyBoxRect;\n    this.#containingBlockRect = constraint.containingBlockRect;\n    this.#nearestLayerShiftingStickyBox = null;\n    if (layerTree && constraint.nearestLayerShiftingStickyBox) {\n      this.#nearestLayerShiftingStickyBox = layerTree.layerById(constraint.nearestLayerShiftingStickyBox);\n    }\n\n    this.#nearestLayerShiftingContainingBlock = null;\n    if (layerTree && constraint.nearestLayerShiftingContainingBlock) {\n      this.#nearestLayerShiftingContainingBlock = layerTree.layerById(constraint.nearestLayerShiftingContainingBlock);\n    }\n  }\n\n  stickyBoxRect(): Protocol.DOM.Rect {\n    return this.#stickyBoxRect;\n  }\n\n  containingBlockRect(): Protocol.DOM.Rect {\n    return this.#containingBlockRect;\n  }\n\n  nearestLayerShiftingStickyBox(): Layer|null {\n    return this.#nearestLayerShiftingStickyBox;\n  }\n\n  nearestLayerShiftingContainingBlock(): Layer|null {\n    return this.#nearestLayerShiftingContainingBlock;\n  }\n}\n\nexport class LayerTreeBase {\n  readonly #target: Target|null;\n  #domModel: DOMModel|null;\n  layersById = new Map<string|number, Layer>();\n  #root: Layer|null = null;\n  #contentRoot: Layer|null = null;\n  readonly #backendNodeIdToNode = new Map<Protocol.DOM.BackendNodeId, DOMNode|null>();\n  #viewportSize?: {\n    width: number,\n    height: number,\n  };\n\n  constructor(target: Target|null) {\n    this.#target = target;\n    this.#domModel = target ? target.model(DOMModel) : null;\n  }\n\n  target(): Target|null {\n    return this.#target;\n  }\n\n  root(): Layer|null {\n    return this.#root;\n  }\n\n  setRoot(root: Layer|null): void {\n    this.#root = root;\n  }\n\n  contentRoot(): Layer|null {\n    return this.#contentRoot;\n  }\n\n  setContentRoot(contentRoot: Layer|null): void {\n    this.#contentRoot = contentRoot;\n  }\n\n  forEachLayer<T>(callback: (arg0: Layer) => T, root?: Layer|null): T|boolean {\n    if (!root) {\n      root = this.root();\n      if (!root) {\n        return false;\n      }\n    }\n    return callback(root) || root.children().some(this.forEachLayer.bind(this, callback));\n  }\n\n  layerById(id: string): Layer|null {\n    return this.layersById.get(id) || null;\n  }\n\n  async resolveBackendNodeIds(requestedNodeIds: Set<Protocol.DOM.BackendNodeId>): Promise<void> {\n    if (!requestedNodeIds.size || !this.#domModel) {\n      return;\n    }\n\n    const nodesMap = await this.#domModel.pushNodesByBackendIdsToFrontend(requestedNodeIds);\n\n    if (!nodesMap) {\n      return;\n    }\n    for (const nodeId of nodesMap.keys()) {\n      this.#backendNodeIdToNode.set(nodeId, nodesMap.get(nodeId) || null);\n    }\n  }\n\n  backendNodeIdToNode(): Map<Protocol.DOM.BackendNodeId, DOMNode|null> {\n    return this.#backendNodeIdToNode;\n  }\n\n  setViewportSize(viewportSize: {\n    width: number,\n    height: number,\n  }): void {\n    this.#viewportSize = viewportSize;\n  }\n\n  viewportSize(): {\n    width: number,\n    height: number,\n  }|undefined {\n    return this.#viewportSize;\n  }\n}\n", "// Copyright 2021 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport type * as Platform from '../platform/platform.js';\n\nimport type {NetworkRequest} from './NetworkRequest.js';\n\nexport class PageLoad {\n  id: number;\n  url: Platform.DevToolsPath.UrlString;\n  startTime: number;\n  loadTime!: number;\n  contentLoadTime!: number;\n  mainRequest: NetworkRequest;\n\n  constructor(mainRequest: NetworkRequest) {\n    this.id = ++PageLoad.lastIdentifier;\n    this.url = mainRequest.url();\n    this.startTime = mainRequest.startTime;\n    this.mainRequest = mainRequest;\n  }\n\n  static forRequest(request: NetworkRequest): PageLoad|null {\n    return pageLoadForRequest.get(request) || null;\n  }\n\n  bindRequest(request: NetworkRequest): void {\n    pageLoadForRequest.set(request, this);\n  }\n\n  private static lastIdentifier = 0;\n}\n\nconst pageLoadForRequest = new WeakMap<NetworkRequest, PageLoad>();\n", "// Copyright 2013 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport type * as ProtocolProxyApi from '../../generated/protocol-proxy-api.js';\nimport type * as Protocol from '../../generated/protocol.js';\n\nimport {SDKModel} from './SDKModel.js';\nimport {Capability, type Target} from './Target.js';\n\nexport class PaintProfilerModel extends SDKModel<void> {\n  readonly layerTreeAgent: ProtocolProxyApi.LayerTreeApi;\n\n  constructor(target: Target) {\n    super(target);\n    this.layerTreeAgent = target.layerTreeAgent();\n  }\n\n  async loadSnapshotFromFragments(tiles: Protocol.LayerTree.PictureTile[]): Promise<PaintProfilerSnapshot|null> {\n    const {snapshotId} = await this.layerTreeAgent.invoke_loadSnapshot({tiles});\n    return snapshotId ? new PaintProfilerSnapshot(this, snapshotId) : null;\n  }\n\n  loadSnapshot(encodedPicture: Protocol.binary): Promise<PaintProfilerSnapshot|null> {\n    const fragment = {x: 0, y: 0, picture: encodedPicture};\n    return this.loadSnapshotFromFragments([fragment]);\n  }\n\n  async makeSnapshot(layerId: Protocol.LayerTree.LayerId): Promise<PaintProfilerSnapshot|null> {\n    const {snapshotId} = await this.layerTreeAgent.invoke_makeSnapshot({layerId});\n    return snapshotId ? new PaintProfilerSnapshot(this, snapshotId) : null;\n  }\n}\n\nexport class PaintProfilerSnapshot {\n  readonly #paintProfilerModel: PaintProfilerModel;\n  readonly #id: Protocol.LayerTree.SnapshotId;\n  #refCount: number;\n\n  constructor(paintProfilerModel: PaintProfilerModel, snapshotId: Protocol.LayerTree.SnapshotId) {\n    this.#paintProfilerModel = paintProfilerModel;\n    this.#id = snapshotId;\n    this.#refCount = 1;\n  }\n\n  release(): void {\n    console.assert(this.#refCount > 0, 'release is already called on the object');\n    if (!--this.#refCount) {\n      void this.#paintProfilerModel.layerTreeAgent.invoke_releaseSnapshot({snapshotId: this.#id});\n    }\n  }\n\n  addReference(): void {\n    ++this.#refCount;\n    console.assert(this.#refCount > 0, 'Referencing a dead object');\n  }\n\n  async replay(scale?: number, fromStep?: number, toStep?: number): Promise<string|null> {\n    const response = await this.#paintProfilerModel.layerTreeAgent.invoke_replaySnapshot(\n        {snapshotId: this.#id, fromStep, toStep, scale: scale || 1.0});\n    return response.dataURL;\n  }\n\n  async profile(clipRect: Protocol.DOM.Rect|null): Promise<Protocol.LayerTree.PaintProfile[]> {\n    const response = await this.#paintProfilerModel.layerTreeAgent.invoke_profileSnapshot(\n        {snapshotId: this.#id, minRepeatCount: 5, minDuration: 1, clipRect: clipRect || undefined});\n\n    return response.timings;\n  }\n\n  async commandLog(): Promise<PaintProfilerLogItem[]|null> {\n    const response = await this.#paintProfilerModel.layerTreeAgent.invoke_snapshotCommandLog({snapshotId: this.#id});\n\n    return response.commandLog ? response.commandLog.map((entry, index) => new PaintProfilerLogItem(entry, index)) :\n                                 null;\n  }\n}\n\nexport class PaintProfilerLogItem {\n  method: string;\n  params: RawPaintProfilerLogItemParams|null;\n  commandIndex: number;\n\n  constructor(rawEntry: RawPaintProfilerLogItem, commandIndex: number) {\n    this.method = rawEntry.method;\n    this.params = rawEntry.params;\n    this.commandIndex = commandIndex;\n  }\n}\n\nSDKModel.register(PaintProfilerModel, {capabilities: Capability.DOM, autostart: false});\n\nexport type RawPaintProfilerLogItemParamValue = string|{[key: string]: RawPaintProfilerLogItemParamValue};\nexport type RawPaintProfilerLogItemParams = Record<string, RawPaintProfilerLogItemParamValue>;\n\nexport interface SnapshotWithRect {\n  rect: Protocol.DOM.Rect;\n  snapshot: PaintProfilerSnapshot;\n}\n\nexport interface PictureFragment {\n  x: number;\n  y: number;\n  picture: string;\n}\n\nexport interface RawPaintProfilerLogItem {\n  method: string;\n  params: RawPaintProfilerLogItemParams|null;\n}\n", "// Copyright 2017 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport type * as ProtocolProxyApi from '../../generated/protocol-proxy-api.js';\nimport * as Platform from '../platform/platform.js';\n\nimport {SDKModel} from './SDKModel.js';\nimport {Capability, type Target} from './Target.js';\n\nexport class PerformanceMetricsModel extends SDKModel<void> {\n  readonly #agent: ProtocolProxyApi.PerformanceApi;\n  readonly #metricModes = new Map<string, MetricMode>([\n    ['TaskDuration', MetricMode.CUMULATIVE_TIME],\n    ['ScriptDuration', MetricMode.CUMULATIVE_TIME],\n    ['LayoutDuration', MetricMode.CUMULATIVE_TIME],\n    ['RecalcStyleDuration', MetricMode.CUMULATIVE_TIME],\n    ['LayoutCount', MetricMode.CUMULATIVE_COUNT],\n    ['RecalcStyleCount', MetricMode.CUMULATIVE_COUNT],\n  ]);\n  readonly #metricData = new Map<string, {\n    lastValue: (number | undefined),\n    lastTimestamp: (number|undefined),\n  }>();\n\n  constructor(target: Target) {\n    super(target);\n    this.#agent = target.performanceAgent();\n  }\n\n  enable(): Promise<Object> {\n    return this.#agent.invoke_enable({});\n  }\n\n  disable(): Promise<Object> {\n    return this.#agent.invoke_disable();\n  }\n\n  async requestMetrics(): Promise<{\n    metrics: Map<string, number>,\n    timestamp: number,\n  }> {\n    const rawMetrics = await this.#agent.invoke_getMetrics() || [];\n    const metrics = new Map<string, number>();\n    const timestamp = performance.now();\n    for (const metric of rawMetrics.metrics) {\n      let data = this.#metricData.get(metric.name);\n      if (!data) {\n        data = {lastValue: undefined, lastTimestamp: undefined};\n        this.#metricData.set(metric.name, data);\n      }\n      let value;\n      switch (this.#metricModes.get(metric.name)) {\n        case MetricMode.CUMULATIVE_TIME:\n          value = (data.lastTimestamp && data.lastValue) ?\n              Platform.NumberUtilities.clamp(\n                  (metric.value - data.lastValue) * 1000 / (timestamp - data.lastTimestamp), 0, 1) :\n              0;\n          data.lastValue = metric.value;\n          data.lastTimestamp = timestamp;\n          break;\n        case MetricMode.CUMULATIVE_COUNT:\n          value = (data.lastTimestamp && data.lastValue) ?\n              Math.max(0, (metric.value - data.lastValue) * 1000 / (timestamp - data.lastTimestamp)) :\n              0;\n          data.lastValue = metric.value;\n          data.lastTimestamp = timestamp;\n          break;\n        default:\n          value = metric.value;\n          break;\n      }\n      metrics.set(metric.name, value);\n    }\n    return {metrics, timestamp};\n  }\n}\n\nconst enum MetricMode {\n  CUMULATIVE_TIME = 'CumulativeTime',\n  CUMULATIVE_COUNT = 'CumulativeCount',\n}\n\nSDKModel.register(PerformanceMetricsModel, {capabilities: Capability.DOM, autostart: false});\n", "// Copyright 2023 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport type * as ProtocolProxyApi from '../../generated/protocol-proxy-api.js';\nimport * as Protocol from '../../generated/protocol.js';\nimport type * as Common from '../common/common.js';\nimport {MapWithDefault} from '../common/MapWithDefault.js';\nimport {assertNotNullOrUndefined} from '../platform/platform.js';\n\nimport {\n  Events as ResourceTreeModelEvents,\n  PrimaryPageChangeType,\n  type ResourceTreeFrame,\n  ResourceTreeModel,\n} from './ResourceTreeModel.js';\nimport {SDKModel} from './SDKModel.js';\nimport {Capability, type Target} from './Target.js';\nimport {TargetManager} from './TargetManager.js';\n\nexport interface WithId<I, V> {\n  id: I;\n  value: V;\n}\n\n/**\n * Holds preloading related information.\n *\n * - SpeculationRule rule sets\n * - Preloading attempts\n * - Relationship between rule sets and preloading attempts\n **/\nexport class PreloadingModel extends SDKModel<EventTypes> {\n  private agent: ProtocolProxyApi.PreloadApi;\n  private loaderIds: Protocol.Network.LoaderId[] = [];\n  private targetJustAttached = true;\n  private lastPrimaryPageModel: PreloadingModel|null = null;\n  private documents: Map<Protocol.Network.LoaderId, DocumentPreloadingData> =\n      new Map<Protocol.Network.LoaderId, DocumentPreloadingData>();\n\n  constructor(target: Target) {\n    super(target);\n\n    target.registerPreloadDispatcher(new PreloadDispatcher(this));\n\n    this.agent = target.preloadAgent();\n    void this.agent.invoke_enable();\n\n    const targetInfo = target.targetInfo();\n    if (targetInfo?.subtype === 'prerender') {\n      this.lastPrimaryPageModel = TargetManager.instance().primaryPageTarget()?.model(PreloadingModel) || null;\n    }\n\n    TargetManager.instance().addModelListener(\n        ResourceTreeModel, ResourceTreeModelEvents.PrimaryPageChanged, this.onPrimaryPageChanged, this);\n  }\n\n  override dispose(): void {\n    super.dispose();\n\n    TargetManager.instance().removeModelListener(\n        ResourceTreeModel, ResourceTreeModelEvents.PrimaryPageChanged, this.onPrimaryPageChanged, this);\n\n    void this.agent.invoke_disable();\n  }\n\n  private ensureDocumentPreloadingData(loaderId: Protocol.Network.LoaderId): void {\n    if (this.documents.get(loaderId) === undefined) {\n      this.documents.set(loaderId, new DocumentPreloadingData());\n    }\n  }\n\n  private currentLoaderId(): Protocol.Network.LoaderId|null {\n    // Target is just attached and didn't received CDP events that we can infer loaderId.\n    if (this.targetJustAttached) {\n      return null;\n    }\n\n    if (this.loaderIds.length === 0) {\n      throw new Error('unreachable');\n    }\n\n    return this.loaderIds[this.loaderIds.length - 1];\n  }\n\n  private currentDocument(): DocumentPreloadingData|null {\n    const loaderId = this.currentLoaderId();\n    return loaderId === null ? null : this.documents.get(loaderId) || null;\n  }\n\n  // Returns a rule set of the current page.\n  //\n  // Returns reference. Don't save returned values.\n  // Returned value may or may not be updated as the time grows.\n  getRuleSetById(id: Protocol.Preload.RuleSetId): Protocol.Preload.RuleSet|null {\n    return this.currentDocument()?.ruleSets.getById(id) || null;\n  }\n\n  // Returns rule sets of the current page.\n  //\n  // Returns array of pairs of id and reference. Don't save returned references.\n  // Returned values may or may not be updated as the time grows.\n  getAllRuleSets(): Array<WithId<Protocol.Preload.RuleSetId, Protocol.Preload.RuleSet>> {\n    return this.currentDocument()?.ruleSets.getAll() || [];\n  }\n\n  getPreloadCountsByRuleSetId(): Map<Protocol.Preload.RuleSetId|null, Map<PreloadingStatus, number>> {\n    const countsByRuleSetId = new Map<Protocol.Preload.RuleSetId|null, Map<PreloadingStatus, number>>();\n\n    for (const {value} of this.getRepresentativePreloadingAttempts(null)) {\n      for (const ruleSetId of [null, ...value.ruleSetIds]) {\n        if (countsByRuleSetId.get(ruleSetId) === undefined) {\n          countsByRuleSetId.set(ruleSetId, new Map<PreloadingStatus, number>());\n        }\n\n        const countsByStatus = countsByRuleSetId.get(ruleSetId);\n        assertNotNullOrUndefined(countsByStatus);\n        const i = countsByStatus.get(value.status) || 0;\n        countsByStatus.set(value.status, i + 1);\n      }\n    }\n\n    return countsByRuleSetId;\n  }\n\n  // Returns a preloading attempt of the current page.\n  //\n  // Returns reference. Don't save returned values.\n  // Returned value may or may not be updated as the time grows.\n  getPreloadingAttemptById(id: PreloadingAttemptId): PreloadingAttempt|null {\n    const document = this.currentDocument();\n    if (document === null) {\n      return null;\n    }\n\n    return document.preloadingAttempts.getById(id, document.sources) || null;\n  }\n\n  // Returs preloading attempts of the current page that triggered by the rule set with `ruleSetId`.\n  // `ruleSetId === null` means \"do not filter\".\n  //\n  // Returns array of pairs of id and reference. Don't save returned references.\n  // Returned values may or may not be updated as the time grows.\n  getRepresentativePreloadingAttempts(ruleSetId: Protocol.Preload.RuleSetId|null):\n      Array<WithId<PreloadingAttemptId, PreloadingAttempt>> {\n    const document = this.currentDocument();\n    if (document === null) {\n      return [];\n    }\n\n    return document.preloadingAttempts.getAllRepresentative(ruleSetId, document.sources);\n  }\n\n  // Returs preloading attempts of the previousPgae.\n  //\n  // Returns array of pairs of id and reference. Don't save returned references.\n  // Returned values may or may not be updated as the time grows.\n  getRepresentativePreloadingAttemptsOfPreviousPage(): Array<WithId<PreloadingAttemptId, PreloadingAttempt>> {\n    if (this.loaderIds.length <= 1) {\n      return [];\n    }\n\n    const document = this.documents.get(this.loaderIds[this.loaderIds.length - 2]);\n    if (document === undefined) {\n      return [];\n    }\n\n    return document.preloadingAttempts.getAllRepresentative(null, document.sources);\n  }\n\n  // Precondition: `pipelineId` should exists.\n  // Postcondition: The return value is not empty.\n  private getPipelineById(pipelineId: Protocol.Preload.PreloadPipelineId):\n      Map<Protocol.Preload.SpeculationAction, PreloadingAttempt>|null {\n    const document = this.currentDocument();\n    if (document === null) {\n      return null;\n    }\n\n    return document.preloadingAttempts.getPipeline(pipelineId, document.sources);\n  }\n\n  // Returns attemtps that are sit in the same preload pipeline.\n  getPipeline(attempt: PreloadingAttempt): PreloadPipeline {\n    let pipelineNullable = null;\n    if (attempt.pipelineId !== null) {\n      pipelineNullable = this.getPipelineById(attempt.pipelineId);\n    }\n    if (pipelineNullable === null) {\n      const pipeline = new Map();\n      pipeline.set(attempt.action, attempt);\n      return new PreloadPipeline(pipeline);\n    }\n    return new PreloadPipeline(pipelineNullable);\n  }\n\n  private onPrimaryPageChanged(\n      event: Common.EventTarget.EventTargetEvent<{frame: ResourceTreeFrame, type: PrimaryPageChangeType}>): void {\n    const {frame, type} = event.data;\n\n    // Model of prerendered page's target will hands over. Do nothing for the initiator page.\n    if (this.lastPrimaryPageModel === null && type === PrimaryPageChangeType.ACTIVATION) {\n      return;\n    }\n\n    if (this.lastPrimaryPageModel !== null && type !== PrimaryPageChangeType.ACTIVATION) {\n      return;\n    }\n\n    if (this.lastPrimaryPageModel !== null && type === PrimaryPageChangeType.ACTIVATION) {\n      // Hand over from the model of the last primary page.\n      this.loaderIds = this.lastPrimaryPageModel.loaderIds;\n      for (const [loaderId, prev] of this.lastPrimaryPageModel.documents.entries()) {\n        this.ensureDocumentPreloadingData(loaderId);\n        this.documents.get(loaderId)?.mergePrevious(prev);\n      }\n    }\n\n    this.lastPrimaryPageModel = null;\n\n    // Note that at this timing ResourceTreeFrame.loaderId is ensured to\n    // be non empty and Protocol.Network.LoaderId because it is filled\n    // by ResourceTreeFrame.navigate.\n    const currentLoaderId = frame.loaderId;\n\n    // Holds histories for two pages at most.\n    this.loaderIds.push(currentLoaderId);\n    this.loaderIds = this.loaderIds.slice(-2);\n    this.ensureDocumentPreloadingData(currentLoaderId);\n    for (const loaderId of this.documents.keys()) {\n      if (!this.loaderIds.includes(loaderId)) {\n        this.documents.delete(loaderId);\n      }\n    }\n\n    this.dispatchEventToListeners(Events.MODEL_UPDATED);\n  }\n\n  onRuleSetUpdated(event: Protocol.Preload.RuleSetUpdatedEvent): void {\n    const ruleSet = event.ruleSet;\n\n    const loaderId = ruleSet.loaderId;\n\n    // Infer current loaderId if DevTools is opned at the current page.\n    if (this.currentLoaderId() === null) {\n      this.loaderIds = [loaderId];\n      this.targetJustAttached = false;\n    }\n\n    this.ensureDocumentPreloadingData(loaderId);\n    this.documents.get(loaderId)?.ruleSets.upsert(ruleSet);\n    this.dispatchEventToListeners(Events.MODEL_UPDATED);\n  }\n\n  onRuleSetRemoved(event: Protocol.Preload.RuleSetRemovedEvent): void {\n    const id = event.id;\n\n    for (const document of this.documents.values()) {\n      document.ruleSets.delete(id);\n    }\n    this.dispatchEventToListeners(Events.MODEL_UPDATED);\n  }\n\n  onPreloadingAttemptSourcesUpdated(event: Protocol.Preload.PreloadingAttemptSourcesUpdatedEvent): void {\n    const loaderId = event.loaderId;\n    this.ensureDocumentPreloadingData(loaderId);\n\n    const document = this.documents.get(loaderId);\n    if (document === undefined) {\n      return;\n    }\n\n    document.sources.update(event.preloadingAttemptSources);\n    document.preloadingAttempts.maybeRegisterNotTriggered(document.sources);\n    document.preloadingAttempts.cleanUpRemovedAttempts(document.sources);\n    this.dispatchEventToListeners(Events.MODEL_UPDATED);\n  }\n\n  onPrefetchStatusUpdated(event: Protocol.Preload.PrefetchStatusUpdatedEvent): void {\n    // We ignore this event to avoid reinserting an attempt after it was removed by\n    // onPreloadingAttemptSourcesUpdated.\n    if (event.prefetchStatus === Protocol.Preload.PrefetchStatus.PrefetchEvictedAfterCandidateRemoved) {\n      return;\n    }\n\n    const loaderId = event.key.loaderId;\n    this.ensureDocumentPreloadingData(loaderId);\n    const attempt: PrefetchAttemptInternal = {\n      action: Protocol.Preload.SpeculationAction.Prefetch,\n      key: event.key,\n      pipelineId: event.pipelineId,\n      status: convertPreloadingStatus(event.status),\n      prefetchStatus: event.prefetchStatus || null,\n      requestId: event.requestId,\n    };\n    this.documents.get(loaderId)?.preloadingAttempts.upsert(attempt);\n    this.dispatchEventToListeners(Events.MODEL_UPDATED);\n  }\n\n  onPrerenderStatusUpdated(event: Protocol.Preload.PrerenderStatusUpdatedEvent): void {\n    const loaderId = event.key.loaderId;\n    this.ensureDocumentPreloadingData(loaderId);\n    let attempt: PrerenderAttemptInternal|PrerenderUntilScriptAttemptInternal;\n    switch (event.key.action) {\n      case Protocol.Preload.SpeculationAction.Prerender:\n        attempt = {\n          action: event.key.action,\n          key: event.key,\n          pipelineId: event.pipelineId,\n          status: convertPreloadingStatus(event.status),\n          prerenderStatus: event.prerenderStatus || null,\n          disallowedMojoInterface: event.disallowedMojoInterface || null,\n          mismatchedHeaders: event.mismatchedHeaders || null,\n        };\n        break;\n      case Protocol.Preload.SpeculationAction.PrerenderUntilScript:\n        attempt = {\n          action: event.key.action,\n          key: event.key,\n          pipelineId: event.pipelineId,\n          status: convertPreloadingStatus(event.status),\n          prerenderStatus: event.prerenderStatus || null,\n          disallowedMojoInterface: event.disallowedMojoInterface || null,\n          mismatchedHeaders: event.mismatchedHeaders || null,\n        };\n        break;\n      default:\n        throw new Error(`unreachable: event.key.action: ${event.key.action}`);\n    }\n    this.documents.get(loaderId)?.preloadingAttempts.upsert(attempt);\n    this.dispatchEventToListeners(Events.MODEL_UPDATED);\n  }\n\n  onPreloadEnabledStateUpdated(event: Protocol.Preload.PreloadEnabledStateUpdatedEvent): void {\n    this.dispatchEventToListeners(Events.WARNINGS_UPDATED, event);\n  }\n}\n\nSDKModel.register(PreloadingModel, {capabilities: Capability.DOM, autostart: false});\n\nexport const enum Events {\n  MODEL_UPDATED = 'ModelUpdated',\n  WARNINGS_UPDATED = 'WarningsUpdated',\n}\n\nexport interface EventTypes {\n  [Events.MODEL_UPDATED]: void;\n  [Events.WARNINGS_UPDATED]: Protocol.Preload.PreloadEnabledStateUpdatedEvent;\n}\n\nclass PreloadDispatcher implements ProtocolProxyApi.PreloadDispatcher {\n  private model: PreloadingModel;\n\n  constructor(model: PreloadingModel) {\n    this.model = model;\n  }\n\n  ruleSetUpdated(event: Protocol.Preload.RuleSetUpdatedEvent): void {\n    this.model.onRuleSetUpdated(event);\n  }\n\n  ruleSetRemoved(event: Protocol.Preload.RuleSetRemovedEvent): void {\n    this.model.onRuleSetRemoved(event);\n  }\n\n  preloadingAttemptSourcesUpdated(event: Protocol.Preload.PreloadingAttemptSourcesUpdatedEvent): void {\n    this.model.onPreloadingAttemptSourcesUpdated(event);\n  }\n\n  prefetchStatusUpdated(event: Protocol.Preload.PrefetchStatusUpdatedEvent): void {\n    this.model.onPrefetchStatusUpdated(event);\n  }\n\n  prerenderStatusUpdated(event: Protocol.Preload.PrerenderStatusUpdatedEvent): void {\n    this.model.onPrerenderStatusUpdated(event);\n  }\n\n  preloadEnabledStateUpdated(event: Protocol.Preload.PreloadEnabledStateUpdatedEvent): void {\n    void this.model.onPreloadEnabledStateUpdated(event);\n  }\n}\n\nclass DocumentPreloadingData {\n  ruleSets: RuleSetRegistry = new RuleSetRegistry();\n  preloadingAttempts: PreloadingAttemptRegistry = new PreloadingAttemptRegistry();\n  sources: SourceRegistry = new SourceRegistry();\n\n  mergePrevious(prev: DocumentPreloadingData): void {\n    // Note that CDP events Preload.ruleSetUpdated/Deleted and\n    // Preload.preloadingAttemptSourcesUpdated with a loaderId are emitted to target that bounded to\n    // a document with the loaderId. On the other hand, prerendering activation changes targets\n    // of Preload.prefetch/prerenderStatusUpdated, i.e. activated page receives those events for\n    // triggering outcome \"Success\".\n    if (!this.ruleSets.isEmpty() || !this.sources.isEmpty()) {\n      throw new Error('unreachable');\n    }\n\n    this.ruleSets = prev.ruleSets;\n    this.preloadingAttempts.mergePrevious(prev.preloadingAttempts);\n    this.sources = prev.sources;\n  }\n}\n\nclass RuleSetRegistry {\n  private map: Map<Protocol.Preload.RuleSetId, Protocol.Preload.RuleSet> =\n      new Map<Protocol.Preload.RuleSetId, Protocol.Preload.RuleSet>();\n\n  isEmpty(): boolean {\n    return this.map.size === 0;\n  }\n\n  // Returns reference. Don't save returned values.\n  // Returned values may or may not be updated as the time grows.\n  getById(id: Protocol.Preload.RuleSetId): Protocol.Preload.RuleSet|null {\n    return this.map.get(id) || null;\n  }\n\n  // Returns reference. Don't save returned values.\n  // Returned values may or may not be updated as the time grows.\n  getAll(): Array<WithId<Protocol.Preload.RuleSetId, Protocol.Preload.RuleSet>> {\n    return Array.from(this.map.entries()).map(([id, value]) => ({id, value}));\n  }\n\n  upsert(ruleSet: Protocol.Preload.RuleSet): void {\n    this.map.set(ruleSet.id, ruleSet);\n  }\n\n  delete(id: Protocol.Preload.RuleSetId): void {\n    this.map.delete(id);\n  }\n}\n\n/**\n * Protocol.Preload.PreloadingStatus|'NotTriggered'\n *\n * A renderer sends SpeculationCandidate to the browser process and the\n * browser process checks eligibilities, and starts PreloadingAttempt.\n *\n * In the frontend, \"NotTriggered\" is used to denote that a\n * PreloadingAttempt is waiting for at trigger event (eg:\n * mousedown/mouseover). All PreloadingAttempts will start off as\n * \"NotTriggered\", but \"eager\" preloading attempts (attempts not\n * actually waiting for any trigger) will be processed by the browser\n * immediately, and will not stay in this state for long.\n *\n * TODO(https://crbug.com/1384419): Add NotEligible.\n **/\nexport const enum PreloadingStatus {\n  NOT_TRIGGERED = 'NotTriggered',\n  PENDING = 'Pending',\n  RUNNING = 'Running',\n  READY = 'Ready',\n  SUCCESS = 'Success',\n  FAILURE = 'Failure',\n  NOT_SUPPORTED = 'NotSupported',\n}\n\nfunction convertPreloadingStatus(status: Protocol.Preload.PreloadingStatus): PreloadingStatus {\n  switch (status) {\n    case Protocol.Preload.PreloadingStatus.Pending:\n      return PreloadingStatus.PENDING;\n    case Protocol.Preload.PreloadingStatus.Running:\n      return PreloadingStatus.RUNNING;\n    case Protocol.Preload.PreloadingStatus.Ready:\n      return PreloadingStatus.READY;\n    case Protocol.Preload.PreloadingStatus.Success:\n      return PreloadingStatus.SUCCESS;\n    case Protocol.Preload.PreloadingStatus.Failure:\n      return PreloadingStatus.FAILURE;\n    case Protocol.Preload.PreloadingStatus.NotSupported:\n      return PreloadingStatus.NOT_SUPPORTED;\n  }\n\n  throw new Error('unreachable');\n}\n\nexport type PreloadingAttemptId = string;\n\nexport type PreloadingAttempt = PrefetchAttempt|PrerenderAttempt|PrerenderUntilScriptAttempt;\n\nexport interface PrefetchAttempt {\n  action: Protocol.Preload.SpeculationAction.Prefetch;\n  key: Protocol.Preload.PreloadingAttemptKey;\n  pipelineId: Protocol.Preload.PreloadPipelineId|null;\n  status: PreloadingStatus;\n  prefetchStatus: Protocol.Preload.PrefetchStatus|null;\n  requestId: Protocol.Network.RequestId;\n  ruleSetIds: Protocol.Preload.RuleSetId[];\n  nodeIds: Protocol.DOM.BackendNodeId[];\n}\n\nexport interface PrerenderAttempt {\n  action: Protocol.Preload.SpeculationAction.Prerender;\n  key: Protocol.Preload.PreloadingAttemptKey;\n  pipelineId: Protocol.Preload.PreloadPipelineId|null;\n  status: PreloadingStatus;\n  prerenderStatus: Protocol.Preload.PrerenderFinalStatus|null;\n  disallowedMojoInterface: string|null;\n  mismatchedHeaders: Protocol.Preload.PrerenderMismatchedHeaders[]|null;\n  ruleSetIds: Protocol.Preload.RuleSetId[];\n  nodeIds: Protocol.DOM.BackendNodeId[];\n}\n\nexport interface PrerenderUntilScriptAttempt {\n  action: Protocol.Preload.SpeculationAction.PrerenderUntilScript;\n  key: Protocol.Preload.PreloadingAttemptKey;\n  pipelineId: Protocol.Preload.PreloadPipelineId|null;\n  status: PreloadingStatus;\n  prerenderStatus: Protocol.Preload.PrerenderFinalStatus|null;\n  disallowedMojoInterface: string|null;\n  mismatchedHeaders: Protocol.Preload.PrerenderMismatchedHeaders[]|null;\n  ruleSetIds: Protocol.Preload.RuleSetId[];\n  nodeIds: Protocol.DOM.BackendNodeId[];\n}\n\nexport type PreloadingAttemptInternal =\n    PrefetchAttemptInternal|PrerenderAttemptInternal|PrerenderUntilScriptAttemptInternal;\n\nexport interface PrefetchAttemptInternal {\n  action: Protocol.Preload.SpeculationAction.Prefetch;\n  key: Protocol.Preload.PreloadingAttemptKey;\n  pipelineId: Protocol.Preload.PreloadPipelineId|null;\n  status: PreloadingStatus;\n  prefetchStatus: Protocol.Preload.PrefetchStatus|null;\n  requestId: Protocol.Network.RequestId;\n}\n\nexport interface PrerenderAttemptInternal {\n  action: Protocol.Preload.SpeculationAction.Prerender;\n  key: Protocol.Preload.PreloadingAttemptKey;\n  pipelineId: Protocol.Preload.PreloadPipelineId|null;\n  status: PreloadingStatus;\n  prerenderStatus: Protocol.Preload.PrerenderFinalStatus|null;\n  disallowedMojoInterface: string|null;\n  mismatchedHeaders: Protocol.Preload.PrerenderMismatchedHeaders[]|null;\n}\n\nexport interface PrerenderUntilScriptAttemptInternal {\n  action: Protocol.Preload.SpeculationAction.PrerenderUntilScript;\n  key: Protocol.Preload.PreloadingAttemptKey;\n  pipelineId: Protocol.Preload.PreloadPipelineId|null;\n  status: PreloadingStatus;\n  prerenderStatus: Protocol.Preload.PrerenderFinalStatus|null;\n  disallowedMojoInterface: string|null;\n  mismatchedHeaders: Protocol.Preload.PrerenderMismatchedHeaders[]|null;\n}\n\nfunction makePreloadingAttemptId(key: Protocol.Preload.PreloadingAttemptKey): PreloadingAttemptId {\n  let action;\n  switch (key.action) {\n    case Protocol.Preload.SpeculationAction.Prefetch:\n      action = 'Prefetch';\n      break;\n    case Protocol.Preload.SpeculationAction.Prerender:\n      action = 'Prerender';\n      break;\n    case Protocol.Preload.SpeculationAction.PrerenderUntilScript:\n      action = 'PrerenderUntilScript';\n      break;\n  }\n\n  let targetHint;\n  switch (key.targetHint) {\n    case undefined:\n      targetHint = 'undefined';\n      break;\n    case Protocol.Preload.SpeculationTargetHint.Blank:\n      targetHint = 'Blank';\n      break;\n    case Protocol.Preload.SpeculationTargetHint.Self:\n      targetHint = 'Self';\n      break;\n  }\n\n  return `${key.loaderId}:${action}:${key.url}:${targetHint}`;\n}\n\nexport class PreloadPipeline {\n  private inner: Map<Protocol.Preload.SpeculationAction, PreloadingAttempt>;\n\n  constructor(inner: Map<Protocol.Preload.SpeculationAction, PreloadingAttempt>) {\n    if (inner.size === 0) {\n      throw new Error('unreachable');\n    }\n\n    this.inner = inner;\n  }\n\n  static newFromAttemptsForTesting(attempts: PreloadingAttempt[]): PreloadPipeline {\n    const inner = new Map();\n    for (const attempt of attempts) {\n      inner.set(attempt.action, attempt);\n    }\n    return new PreloadPipeline(inner);\n  }\n\n  getOriginallyTriggered(): PreloadingAttempt {\n    const attempt = this.getPrerender() || this.getPrerenderUntilScript() || this.getPrefetch();\n    assertNotNullOrUndefined(attempt);\n    return attempt;\n  }\n\n  getPrefetch(): PreloadingAttempt|null {\n    return this.inner.get(Protocol.Preload.SpeculationAction.Prefetch) || null;\n  }\n\n  getPrerender(): PreloadingAttempt|null {\n    return this.inner.get(Protocol.Preload.SpeculationAction.Prerender) || null;\n  }\n\n  getPrerenderUntilScript(): PreloadingAttempt|null {\n    return this.inner.get(Protocol.Preload.SpeculationAction.PrerenderUntilScript) || null;\n  }\n\n  // Returns attempts in the order: prefetch < prerender_until_script < prerender.\n  // Currently unused.\n  getAttempts(): PreloadingAttempt[] {\n    const ret = [];\n\n    const prefetch = this.getPrefetch();\n    if (prefetch !== null) {\n      ret.push(prefetch);\n    }\n\n    const prerender = this.getPrerender();\n    if (prerender !== null) {\n      ret.push(prerender);\n    }\n\n    const prerenderUntilScript = this.getPrerenderUntilScript();\n    if (prerenderUntilScript !== null) {\n      ret.push(prerenderUntilScript);\n    }\n\n    if (ret.length === 0) {\n      throw new Error('unreachable');\n    }\n\n    return ret;\n  }\n}\n\nclass PreloadingAttemptRegistry {\n  private map: Map<PreloadingAttemptId, PreloadingAttemptInternal> =\n      new Map<PreloadingAttemptId, PreloadingAttemptInternal>();\n  private pipelines:\n      MapWithDefault<Protocol.Preload.PreloadPipelineId, Map<Protocol.Preload.SpeculationAction, PreloadingAttemptId>> =\n          new MapWithDefault<\n              Protocol.Preload.PreloadPipelineId, Map<Protocol.Preload.SpeculationAction, PreloadingAttemptId>>();\n\n  private enrich(attempt: PreloadingAttemptInternal, source: Protocol.Preload.PreloadingAttemptSource|null):\n      PreloadingAttempt {\n    let ruleSetIds: Protocol.Preload.RuleSetId[] = [];\n    let nodeIds: Protocol.DOM.BackendNodeId[] = [];\n    if (source !== null) {\n      ruleSetIds = source.ruleSetIds;\n      nodeIds = source.nodeIds;\n    }\n\n    return {\n      ...attempt,\n      ruleSetIds,\n      nodeIds,\n    };\n  }\n\n  // Returns true iff the attempt is triggered by a SpecRules, not automatically derived.\n  //\n  // In some cases, browsers automatically triggers preloads. For example, Chrome triggers prefetch\n  // ahead of prerender to prevent multiple fetches in case that the prerender failed due to, e.g.\n  // use of forbidden mojo APIs. Also, a prerender-until-script attempt triggers prefetch as well,\n  // and can upgrade to prerender. Such prefetch, prerender-until-script, and prerender sit in the\n  // same preload pipeline.\n  //\n  // We regard them as not representative and only show the representative ones to represent\n  // pipelines.\n  private isAttemptRepresentative(attempt: PreloadingAttempt): boolean {\n    function getSortKey(action: Protocol.Preload.SpeculationAction): number {\n      switch (action) {\n        case Protocol.Preload.SpeculationAction.Prefetch:\n          return 0;\n        case Protocol.Preload.SpeculationAction.PrerenderUntilScript:\n          return 1;\n        case Protocol.Preload.SpeculationAction.Prerender:\n          return 2;\n      }\n    }\n\n    // Attempt with status `NOT_TRIGGERED` is a representative of a pipeline.\n    if (attempt.pipelineId === null) {\n      return true;\n    }\n\n    // Attempt with the strongest action in pipeline is a representative of a pipeline.\n    // Order: prefetch < prerender.\n    const pipeline = this.pipelines.get(attempt.pipelineId);\n    assertNotNullOrUndefined(pipeline);\n    if (pipeline.size === 0) {\n      throw new Error('unreachable');\n    }\n    return [...pipeline.keys()].every(action => getSortKey(action) <= getSortKey(attempt.action));\n  }\n\n  // Returns reference. Don't save returned values.\n  // Returned values may or may not be updated as the time grows.\n  getById(id: PreloadingAttemptId, sources: SourceRegistry): PreloadingAttempt|null {\n    const attempt = this.map.get(id) || null;\n    if (attempt === null) {\n      return null;\n    }\n\n    return this.enrich(attempt, sources.getById(id));\n  }\n\n  // Returns representative preloading attempts that triggered by the rule set with `ruleSetId`.\n  // `ruleSetId === null` means \"do not filter\".\n  //\n  // Returns reference. Don't save returned values.\n  // Returned values may or may not be updated as the time grows.\n  getAllRepresentative(ruleSetId: Protocol.Preload.RuleSetId|null, sources: SourceRegistry):\n      Array<WithId<PreloadingAttemptId, PreloadingAttempt>> {\n    return [...this.map.entries()]\n        .map(([id, value]) => ({id, value: this.enrich(value, sources.getById(id))}))\n        .filter(({value}) => !ruleSetId || value.ruleSetIds.includes(ruleSetId))\n        .filter(({value}) => this.isAttemptRepresentative(value));\n  }\n\n  getPipeline(pipelineId: Protocol.Preload.PreloadPipelineId, sources: SourceRegistry):\n      Map<Protocol.Preload.SpeculationAction, PreloadingAttempt>|null {\n    const pipeline = this.pipelines.get(pipelineId);\n\n    if (pipeline === undefined || pipeline.size === 0) {\n      return null;\n    }\n\n    const map: Record<PreloadingAttemptId, PreloadingAttemptInternal> = {};\n    for (const [id, attempt] of this.map.entries()) {\n      map[id] = attempt;\n    }\n    return new Map(pipeline.entries().map(([action, id]) => {\n      const attempt = this.getById(id, sources);\n      assertNotNullOrUndefined(attempt);\n      return [action, attempt];\n    }));\n  }\n\n  upsert(attempt: PreloadingAttemptInternal): void {\n    const id = makePreloadingAttemptId(attempt.key);\n\n    this.map.set(id, attempt);\n\n    if (attempt.pipelineId !== null) {\n      this.pipelines.getOrInsertComputed(attempt.pipelineId, () => new Map()).set(attempt.action, id);\n    }\n  }\n\n  private reconstructPipelines(): void {\n    this.pipelines.clear();\n\n    for (const [id, attempt] of this.map.entries()) {\n      if (attempt.pipelineId === null) {\n        continue;\n      }\n\n      const pipeline = this.pipelines.getOrInsertComputed(attempt.pipelineId, () => new Map());\n      pipeline.set(attempt.action, id);\n    }\n  }\n\n  // Speculation rules emits a CDP event Preload.preloadingAttemptSourcesUpdated\n  // and an IPC SpeculationHost::UpdateSpeculationCandidates. The latter emits\n  // Preload.prefetch/prerenderAttemptUpdated for each preload attempt triggered.\n  // In general, \"Not triggered to triggered\" period is short (resp. long) for\n  // eager (resp. non-eager) preloads. For not yet emitted ones, we fill\n  // \"Not triggered\" preload attempts and show them.\n  maybeRegisterNotTriggered(sources: SourceRegistry): void {\n    for (const [id, {key}] of sources.entries()) {\n      if (this.map.get(id) !== undefined) {\n        continue;\n      }\n\n      let attempt: PreloadingAttemptInternal;\n      switch (key.action) {\n        case Protocol.Preload.SpeculationAction.Prefetch:\n          attempt = {\n            action: Protocol.Preload.SpeculationAction.Prefetch,\n            key,\n            pipelineId: null,\n            status: PreloadingStatus.NOT_TRIGGERED,\n            prefetchStatus: null,\n            // Fill invalid request id.\n            requestId: '' as Protocol.Network.RequestId,\n          };\n          break;\n        case Protocol.Preload.SpeculationAction.Prerender:\n          attempt = {\n            action: Protocol.Preload.SpeculationAction.Prerender,\n            key,\n            pipelineId: null,\n            status: PreloadingStatus.NOT_TRIGGERED,\n            prerenderStatus: null,\n            disallowedMojoInterface: null,\n            mismatchedHeaders: null,\n          };\n          break;\n        case Protocol.Preload.SpeculationAction.PrerenderUntilScript:\n          attempt = {\n            action: Protocol.Preload.SpeculationAction.PrerenderUntilScript,\n            key,\n            pipelineId: null,\n            status: PreloadingStatus.NOT_TRIGGERED,\n            prerenderStatus: null,\n            disallowedMojoInterface: null,\n            mismatchedHeaders: null,\n          };\n          break;\n      }\n      this.map.set(id, attempt);\n    }\n  }\n\n  // Removes keys in `this.map` that are not in `sources`. This is used to\n  // remove attempts that no longer have a matching speculation rule.\n  cleanUpRemovedAttempts(sources: SourceRegistry): void {\n    const keysToRemove = Array.from(this.map.keys()).filter(key => !sources.getById(key));\n    for (const key of keysToRemove) {\n      this.map.delete(key);\n    }\n\n    this.reconstructPipelines();\n  }\n\n  mergePrevious(prev: PreloadingAttemptRegistry): void {\n    for (const [id, attempt] of this.map.entries()) {\n      prev.map.set(id, attempt);\n    }\n\n    this.map = prev.map;\n\n    this.reconstructPipelines();\n  }\n}\n\nclass SourceRegistry {\n  private map: Map<PreloadingAttemptId, Protocol.Preload.PreloadingAttemptSource> =\n      new Map<PreloadingAttemptId, Protocol.Preload.PreloadingAttemptSource>();\n\n  entries(): IterableIterator<[PreloadingAttemptId, Protocol.Preload.PreloadingAttemptSource]> {\n    return this.map.entries();\n  }\n\n  isEmpty(): boolean {\n    return this.map.size === 0;\n  }\n\n  getById(id: PreloadingAttemptId): Protocol.Preload.PreloadingAttemptSource|null {\n    return this.map.get(id) || null;\n  }\n\n  update(sources: Protocol.Preload.PreloadingAttemptSource[]): void {\n    this.map = new Map(sources.map(s => [makePreloadingAttemptId(s.key), s]));\n  }\n}\n", "// Copyright 2024 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\n/**\n * Polyfill of https://github.com/tc39/proposal-upsert with a subclass.\n *\n * TODO: Once the proposal is merged, just replace `MapWithDefault` with `Map` and remove it.\n **/\nexport class MapWithDefault<K, V> extends Map<K, V> {\n  getOrInsert(key: K, defaultValue: V): V {\n    if (!this.has(key)) {\n      this.set(key, defaultValue);\n    }\n\n    return this.get(key) as V;\n  }\n\n  getOrInsertComputed(key: K, callbackFunction: (key: K) => V): V {\n    if (!this.has(key)) {\n      this.set(key, callbackFunction(key));\n    }\n\n    return this.get(key) as V;\n  }\n}\n", "// Copyright 2017 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport type * as ProtocolProxyApi from '../../generated/protocol-proxy-api.js';\nimport type * as Protocol from '../../generated/protocol.js';\n\nimport {OverlayModel} from './OverlayModel.js';\nimport {SDKModel} from './SDKModel.js';\nimport {Capability, type Target} from './Target.js';\n\nexport const enum ScreenshotMode {\n  FROM_VIEWPORT = 'fromViewport',\n  FROM_CLIP = 'fromClip',\n  FULLPAGE = 'fullpage',\n}\n\n/**\n * This structure holds a specific `startScreencast` request's parameters\n * and its callbacks so that they can be re-started if needed.\n **/\ninterface ScreencastOperation {\n  id: number;\n  request: {\n    format: Protocol.Page.StartScreencastRequestFormat,\n    quality: number,\n    maxWidth: number|undefined,\n    maxHeight: number|undefined,\n    everyNthFrame: number|undefined,\n  };\n  callbacks: {\n    onScreencastFrame: ScreencastFrameCallback,\n    onScreencastVisibilityChanged: ScreencastVisibilityChangedCallback,\n  };\n}\n\ntype ScreencastFrameCallback = ((arg0: Protocol.binary, arg1: Protocol.Page.ScreencastFrameMetadata) => void);\ntype ScreencastVisibilityChangedCallback = ((arg0: boolean) => void);\n\n/**\n * Manages concurrent screencast requests by queuing and prioritizing.\n *\n * When startScreencast is invoked:\n * - If a screencast is currently active, the existing screencast's parameters and callbacks are\n * saved in the #screencastOperations array.\n * - The active screencast is then stopped.\n * - A new screencast is initiated using the parameters and callbacks from the current startScreencast call.\n *\n * When stopScreencast is invoked:\n * - The currently active screencast is stopped.\n * - The #screencastOperations is checked for interrupted screencast operations.\n * - If any operations are found, the latest one is started\n * using its saved parameters and callbacks.\n *\n * This ensures that:\n * - Only one screencast is active at a time.\n * - Interrupted screencasts are resumed after the current screencast is stopped.\n * This ensures animation previews, which use screencasting, don't disrupt ongoing remote debugging sessions. Without this mechanism, stopping a preview screencast would terminate the debugging screencast, freezing the ScreencastView.\n **/\nexport class ScreenCaptureModel extends SDKModel<void> implements ProtocolProxyApi.PageDispatcher {\n  readonly #agent: ProtocolProxyApi.PageApi;\n  #nextScreencastOperationId = 1;\n  #screencastOperations: ScreencastOperation[] = [];\n  constructor(target: Target) {\n    super(target);\n    this.#agent = target.pageAgent();\n    target.registerPageDispatcher(this);\n  }\n\n  async startScreencast(\n      format: Protocol.Page.StartScreencastRequestFormat, quality: number, maxWidth: number|undefined,\n      maxHeight: number|undefined, everyNthFrame: number|undefined, onFrame: ScreencastFrameCallback,\n      onVisibilityChanged: ScreencastVisibilityChangedCallback): Promise<number> {\n    const currentRequest = this.#screencastOperations.at(-1);\n    if (currentRequest) {\n      // If there already is a screencast operation in progress, we need to stop it now and handle the\n      // incoming request. Once that request is stopped, we'll return back to handling the stopped operation.\n      await this.#agent.invoke_stopScreencast();\n    }\n\n    const operation = {\n      id: this.#nextScreencastOperationId++,\n      request: {\n        format,\n        quality,\n        maxWidth,\n        maxHeight,\n        everyNthFrame,\n      },\n      callbacks: {\n        onScreencastFrame: onFrame,\n        onScreencastVisibilityChanged: onVisibilityChanged,\n      }\n    };\n    this.#screencastOperations.push(operation);\n    void this.#agent.invoke_startScreencast({format, quality, maxWidth, maxHeight, everyNthFrame});\n\n    return operation.id;\n  }\n\n  stopScreencast(id: number): void {\n    const operationToStop = this.#screencastOperations.pop();\n    if (!operationToStop) {\n      throw new Error('There is no screencast operation to stop.');\n    }\n\n    if (operationToStop.id !== id) {\n      throw new Error('Trying to stop a screencast operation that is not being served right now.');\n    }\n    void this.#agent.invoke_stopScreencast();\n\n    // The latest operation is concluded, let's return back to the previous request now, if it exists.\n    const nextOperation = this.#screencastOperations.at(-1);\n    if (nextOperation) {\n      void this.#agent.invoke_startScreencast({\n        format: nextOperation.request.format,\n        quality: nextOperation.request.quality,\n        maxWidth: nextOperation.request.maxWidth,\n        maxHeight: nextOperation.request.maxHeight,\n        everyNthFrame: nextOperation.request.everyNthFrame,\n      });\n    }\n  }\n\n  async captureScreenshot(\n      format: Protocol.Page.CaptureScreenshotRequestFormat, quality: number, mode: ScreenshotMode,\n      clip?: Protocol.Page.Viewport): Promise<string|null> {\n    const properties: Protocol.Page.CaptureScreenshotRequest = {\n      format,\n      quality,\n      fromSurface: true,\n    };\n    switch (mode) {\n      case ScreenshotMode.FROM_CLIP:\n        properties.captureBeyondViewport = true;\n        properties.clip = clip;\n        break;\n      case ScreenshotMode.FULLPAGE:\n        properties.captureBeyondViewport = true;\n        break;\n      case ScreenshotMode.FROM_VIEWPORT:\n        properties.captureBeyondViewport = false;\n        break;\n      default:\n        throw new Error('Unexpected or unspecified screnshotMode');\n    }\n\n    await OverlayModel.muteHighlight();\n    const result = await this.#agent.invoke_captureScreenshot(properties);\n    await OverlayModel.unmuteHighlight();\n    return result.data;\n  }\n\n  screencastFrame({data, metadata, sessionId}: Protocol.Page.ScreencastFrameEvent): void {\n    void this.#agent.invoke_screencastFrameAck({sessionId});\n\n    const currentRequest = this.#screencastOperations.at(-1);\n    if (currentRequest) {\n      currentRequest.callbacks.onScreencastFrame.call(null, data, metadata);\n    }\n  }\n\n  screencastVisibilityChanged({visible}: Protocol.Page.ScreencastVisibilityChangedEvent): void {\n    const currentRequest = this.#screencastOperations.at(-1);\n    if (currentRequest) {\n      currentRequest.callbacks.onScreencastVisibilityChanged.call(null, visible);\n    }\n  }\n\n  backForwardCacheNotUsed(_params: Protocol.Page.BackForwardCacheNotUsedEvent): void {\n  }\n\n  domContentEventFired(_params: Protocol.Page.DomContentEventFiredEvent): void {\n  }\n\n  loadEventFired(_params: Protocol.Page.LoadEventFiredEvent): void {\n  }\n\n  lifecycleEvent(_params: Protocol.Page.LifecycleEventEvent): void {\n  }\n\n  navigatedWithinDocument(_params: Protocol.Page.NavigatedWithinDocumentEvent): void {\n  }\n\n  frameAttached(_params: Protocol.Page.FrameAttachedEvent): void {\n  }\n\n  frameNavigated(_params: Protocol.Page.FrameNavigatedEvent): void {\n  }\n\n  documentOpened(_params: Protocol.Page.DocumentOpenedEvent): void {\n  }\n\n  frameDetached(_params: Protocol.Page.FrameDetachedEvent): void {\n  }\n\n  frameStartedLoading(_params: Protocol.Page.FrameStartedLoadingEvent): void {\n  }\n\n  frameStoppedLoading(_params: Protocol.Page.FrameStoppedLoadingEvent): void {\n  }\n\n  frameRequestedNavigation(_params: Protocol.Page.FrameRequestedNavigationEvent): void {\n  }\n\n  frameStartedNavigating(_params: Protocol.Page.FrameStartedNavigatingEvent): void {\n  }\n\n  frameSubtreeWillBeDetached(_params: Protocol.Page.FrameSubtreeWillBeDetachedEvent): void {\n  }\n\n  frameScheduledNavigation(_params: Protocol.Page.FrameScheduledNavigationEvent): void {\n  }\n\n  frameClearedScheduledNavigation(_params: Protocol.Page.FrameClearedScheduledNavigationEvent): void {\n  }\n\n  frameResized(): void {\n  }\n\n  javascriptDialogOpening(_params: Protocol.Page.JavascriptDialogOpeningEvent): void {\n  }\n\n  javascriptDialogClosed(_params: Protocol.Page.JavascriptDialogClosedEvent): void {\n  }\n\n  interstitialShown(): void {\n  }\n\n  interstitialHidden(): void {\n  }\n\n  windowOpen(_params: Protocol.Page.WindowOpenEvent): void {\n  }\n\n  fileChooserOpened(_params: Protocol.Page.FileChooserOpenedEvent): void {\n  }\n\n  compilationCacheProduced(_params: Protocol.Page.CompilationCacheProducedEvent): void {\n  }\n\n  downloadWillBegin(_params: Protocol.Page.DownloadWillBeginEvent): void {\n  }\n\n  downloadProgress(): void {\n  }\n\n  prefetchStatusUpdated(_params: Protocol.Preload.PrefetchStatusUpdatedEvent): void {\n  }\n\n  prerenderStatusUpdated(_params: Protocol.Preload.PrerenderStatusUpdatedEvent): void {\n  }\n}\n\nSDKModel.register(ScreenCaptureModel, {capabilities: Capability.SCREEN_CAPTURE, autostart: false});\n", "// Copyright 2014 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport type * as ProtocolProxyApi from '../../generated/protocol-proxy-api.js';\nimport type * as Protocol from '../../generated/protocol.js';\nimport * as Common from '../common/common.js';\nimport * as i18n from '../i18n/i18n.js';\nimport type * as Platform from '../platform/platform.js';\n\nimport type {NameValue} from './NetworkRequest.js';\nimport {SDKModel} from './SDKModel.js';\nimport {type BucketEvent, Events as StorageBucketsModelEvents, StorageBucketsModel} from './StorageBucketsModel.js';\nimport {Capability, type Target} from './Target.js';\n\nconst UIStrings = {\n  /**\n   * @description Text in Service Worker Cache Model\n   * @example {https://cache} PH1\n   * @example {error message} PH2\n   */\n  serviceworkercacheagentError: '`ServiceWorkerCacheAgent` error deleting cache entry {PH1} in cache: {PH2}',\n} as const;\nconst str_ = i18n.i18n.registerUIStrings('core/sdk/ServiceWorkerCacheModel.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\n\nexport class ServiceWorkerCacheModel extends SDKModel<EventTypes> implements ProtocolProxyApi.StorageDispatcher {\n  readonly cacheAgent: ProtocolProxyApi.CacheStorageApi;\n  readonly #storageAgent: ProtocolProxyApi.StorageApi;\n  readonly #storageBucketModel: StorageBucketsModel;\n\n  readonly #caches = new Map<string, Cache>();\n  readonly #storageKeysTracked = new Set<string>();\n  readonly #storageBucketsUpdated = new Set<Protocol.Storage.StorageBucket>();\n  readonly #throttler = new Common.Throttler.Throttler(2000);\n  #enabled = false;\n\n  // Used by tests to remove the Throttler timeout.\n  #scheduleAsSoonAsPossible = false;\n\n  /**\n   * Invariant: This #model can only be constructed on a ServiceWorker target.\n   */\n  constructor(target: Target) {\n    super(target);\n    target.registerStorageDispatcher(this);\n\n    this.cacheAgent = target.cacheStorageAgent();\n    this.#storageAgent = target.storageAgent();\n    this.#storageBucketModel = (target.model(StorageBucketsModel) as StorageBucketsModel);\n  }\n\n  enable(): void {\n    if (this.#enabled) {\n      return;\n    }\n\n    this.#storageBucketModel.addEventListener(StorageBucketsModelEvents.BUCKET_ADDED, this.storageBucketAdded, this);\n    this.#storageBucketModel.addEventListener(\n        StorageBucketsModelEvents.BUCKET_REMOVED, this.storageBucketRemoved, this);\n\n    for (const storageBucket of this.#storageBucketModel.getBuckets()) {\n      this.addStorageBucket(storageBucket.bucket);\n    }\n    this.#enabled = true;\n  }\n\n  clearForStorageKey(storageKey: string): void {\n    for (const [opaqueId, cache] of this.#caches.entries()) {\n      if (cache.storageKey === storageKey) {\n        this.#caches.delete((opaqueId));\n        this.cacheRemoved((cache));\n      }\n    }\n    for (const storageBucket of this.#storageBucketModel.getBucketsForStorageKey(storageKey)) {\n      void this.loadCacheNames(storageBucket.bucket);\n    }\n  }\n\n  refreshCacheNames(): void {\n    for (const cache of this.#caches.values()) {\n      this.cacheRemoved(cache);\n    }\n    this.#caches.clear();\n    const storageBuckets = this.#storageBucketModel.getBuckets();\n    for (const storageBucket of storageBuckets) {\n      void this.loadCacheNames(storageBucket.bucket);\n    }\n  }\n\n  async deleteCache(cache: Cache): Promise<void> {\n    const response = await this.cacheAgent.invoke_deleteCache({cacheId: cache.cacheId});\n    if (response.getError()) {\n      console.error(`ServiceWorkerCacheAgent error deleting cache ${cache.toString()}: ${response.getError()}`);\n      return;\n    }\n    this.#caches.delete(cache.cacheId);\n    this.cacheRemoved(cache);\n  }\n\n  async deleteCacheEntry(cache: Cache, request: string): Promise<void> {\n    const response = await this.cacheAgent.invoke_deleteEntry({cacheId: cache.cacheId, request});\n    if (response.getError()) {\n      Common.Console.Console.instance().error(i18nString(\n          UIStrings.serviceworkercacheagentError, {PH1: cache.toString(), PH2: String(response.getError())}));\n      return;\n    }\n  }\n\n  loadCacheData(\n      cache: Cache, skipCount: number, pageSize: number, pathFilter: string,\n      callback: (arg0: Protocol.CacheStorage.DataEntry[], arg1: number) => void): void {\n    void this.requestEntries(cache, skipCount, pageSize, pathFilter, callback);\n  }\n\n  loadAllCacheData(\n      cache: Cache, pathFilter: string,\n      callback: (arg0: Protocol.CacheStorage.DataEntry[], arg1: number) => void): void {\n    void this.requestAllEntries(cache, pathFilter, callback);\n  }\n\n  caches(): Cache[] {\n    return [...this.#caches.values()];\n  }\n\n  override dispose(): void {\n    for (const cache of this.#caches.values()) {\n      this.cacheRemoved(cache);\n    }\n    this.#caches.clear();\n    if (this.#enabled) {\n      this.#storageBucketModel.removeEventListener(\n          StorageBucketsModelEvents.BUCKET_ADDED, this.storageBucketAdded, this);\n      this.#storageBucketModel.removeEventListener(\n          StorageBucketsModelEvents.BUCKET_REMOVED, this.storageBucketRemoved, this);\n    }\n  }\n\n  private addStorageBucket(storageBucket: Protocol.Storage.StorageBucket): void {\n    void this.loadCacheNames(storageBucket);\n    if (!this.#storageKeysTracked.has(storageBucket.storageKey)) {\n      this.#storageKeysTracked.add(storageBucket.storageKey);\n      void this.#storageAgent.invoke_trackCacheStorageForStorageKey({storageKey: storageBucket.storageKey});\n    }\n  }\n\n  private removeStorageBucket(storageBucket: Protocol.Storage.StorageBucket): void {\n    let storageKeyCount = 0;\n    for (const [opaqueId, cache] of this.#caches.entries()) {\n      if (storageBucket.storageKey === cache.storageKey) {\n        storageKeyCount++;\n      }\n      if (cache.inBucket(storageBucket)) {\n        storageKeyCount--;\n        this.#caches.delete((opaqueId));\n        this.cacheRemoved((cache));\n      }\n    }\n    if (storageKeyCount === 0) {\n      this.#storageKeysTracked.delete(storageBucket.storageKey);\n      void this.#storageAgent.invoke_untrackCacheStorageForStorageKey({storageKey: storageBucket.storageKey});\n    }\n  }\n\n  private async loadCacheNames(storageBucket: Protocol.Storage.StorageBucket): Promise<void> {\n    const response = await this.cacheAgent.invoke_requestCacheNames({storageBucket});\n    if (response.getError()) {\n      return;\n    }\n    this.updateCacheNames(storageBucket, response.caches);\n  }\n\n  private updateCacheNames(storageBucket: Protocol.Storage.StorageBucket, cachesJson: Protocol.CacheStorage.Cache[]):\n      void {\n    function deleteAndSaveOldCaches(this: ServiceWorkerCacheModel, cache: Cache): void {\n      if (cache.inBucket(storageBucket) && !updatingCachesIds.has(cache.cacheId)) {\n        oldCaches.set(cache.cacheId, cache);\n        this.#caches.delete(cache.cacheId);\n      }\n    }\n\n    const updatingCachesIds = new Set<string>();\n    const newCaches = new Map<string, Cache>();\n    const oldCaches = new Map<string, Cache>();\n\n    for (const cacheJson of cachesJson) {\n      const storageBucket = cacheJson.storageBucket ??\n          this.#storageBucketModel.getDefaultBucketForStorageKey(cacheJson.storageKey)?.bucket;\n      if (!storageBucket) {\n        continue;\n      }\n      const cache = new Cache(this, storageBucket, cacheJson.cacheName, cacheJson.cacheId);\n      updatingCachesIds.add(cache.cacheId);\n      if (this.#caches.has(cache.cacheId)) {\n        continue;\n      }\n      newCaches.set(cache.cacheId, cache);\n      this.#caches.set(cache.cacheId, cache);\n    }\n    this.#caches.forEach(deleteAndSaveOldCaches, this);\n    newCaches.forEach(this.cacheAdded, this);\n    oldCaches.forEach(this.cacheRemoved, this);\n  }\n\n  private storageBucketAdded({data: {bucketInfo: {bucket}}}: Common.EventTarget.EventTargetEvent<BucketEvent>): void {\n    this.addStorageBucket(bucket);\n  }\n\n  private storageBucketRemoved({data: {bucketInfo: {bucket}}}: Common.EventTarget.EventTargetEvent<BucketEvent>): void {\n    this.removeStorageBucket(bucket);\n  }\n\n  private cacheAdded(cache: Cache): void {\n    this.dispatchEventToListeners(Events.CACHE_ADDED, {model: this, cache});\n  }\n\n  private cacheRemoved(cache: Cache): void {\n    this.dispatchEventToListeners(Events.CACHE_REMOVED, {model: this, cache});\n  }\n\n  private async requestEntries(\n      cache: Cache, skipCount: number, pageSize: number, pathFilter: string,\n      callback: (arg0: Protocol.CacheStorage.DataEntry[], arg1: number) => void): Promise<void> {\n    const response =\n        await this.cacheAgent.invoke_requestEntries({cacheId: cache.cacheId, skipCount, pageSize, pathFilter});\n    if (response.getError()) {\n      console.error('ServiceWorkerCacheAgent error while requesting entries: ', response.getError());\n      return;\n    }\n    callback(response.cacheDataEntries, response.returnCount);\n  }\n\n  private async requestAllEntries(\n      cache: Cache, pathFilter: string,\n      callback: (arg0: Protocol.CacheStorage.DataEntry[], arg1: number) => void): Promise<void> {\n    const response = await this.cacheAgent.invoke_requestEntries({cacheId: cache.cacheId, pathFilter});\n    if (response.getError()) {\n      console.error('ServiceWorkerCacheAgent error while requesting entries: ', response.getError());\n      return;\n    }\n    callback(response.cacheDataEntries, response.returnCount);\n  }\n\n  cacheStorageListUpdated({bucketId}: Protocol.Storage.CacheStorageListUpdatedEvent): void {\n    const storageBucket = this.#storageBucketModel.getBucketById(bucketId)?.bucket;\n    if (storageBucket) {\n      this.#storageBucketsUpdated.add(storageBucket);\n\n      void this.#throttler.schedule(\n          () => {\n            const promises =\n                Array.from(this.#storageBucketsUpdated, storageBucket => this.loadCacheNames(storageBucket));\n            this.#storageBucketsUpdated.clear();\n            return Promise.all(promises);\n          },\n          this.#scheduleAsSoonAsPossible ? Common.Throttler.Scheduling.AS_SOON_AS_POSSIBLE :\n                                           Common.Throttler.Scheduling.DEFAULT);\n    }\n  }\n\n  cacheStorageContentUpdated({bucketId, cacheName}: Protocol.Storage.CacheStorageContentUpdatedEvent): void {\n    const storageBucket = this.#storageBucketModel.getBucketById(bucketId)?.bucket;\n    if (storageBucket) {\n      this.dispatchEventToListeners(Events.CACHE_STORAGE_CONTENT_UPDATED, {storageBucket, cacheName});\n    }\n  }\n\n  attributionReportingTriggerRegistered(_event: Protocol.Storage.AttributionReportingTriggerRegisteredEvent): void {\n  }\n\n  indexedDBListUpdated(_event: Protocol.Storage.IndexedDBListUpdatedEvent): void {\n  }\n\n  indexedDBContentUpdated(_event: Protocol.Storage.IndexedDBContentUpdatedEvent): void {\n  }\n\n  interestGroupAuctionEventOccurred(_event: Protocol.Storage.InterestGroupAuctionEventOccurredEvent): void {\n  }\n\n  interestGroupAccessed(_event: Protocol.Storage.InterestGroupAccessedEvent): void {\n  }\n\n  interestGroupAuctionNetworkRequestCreated(_event: Protocol.Storage.InterestGroupAuctionNetworkRequestCreatedEvent):\n      void {\n  }\n\n  sharedStorageAccessed(_event: Protocol.Storage.SharedStorageAccessedEvent): void {\n  }\n\n  sharedStorageWorkletOperationExecutionFinished(\n      _event: Protocol.Storage.SharedStorageWorkletOperationExecutionFinishedEvent): void {\n  }\n\n  storageBucketCreatedOrUpdated(_event: Protocol.Storage.StorageBucketCreatedOrUpdatedEvent): void {\n  }\n\n  storageBucketDeleted(_event: Protocol.Storage.StorageBucketDeletedEvent): void {\n  }\n\n  setThrottlerSchedulesAsSoonAsPossibleForTest(): void {\n    this.#scheduleAsSoonAsPossible = true;\n  }\n\n  attributionReportingSourceRegistered(_event: Protocol.Storage.AttributionReportingSourceRegisteredEvent): void {\n  }\n\n  attributionReportingReportSent(_event: Protocol.Storage.AttributionReportingReportSentEvent): void {\n  }\n\n  attributionReportingVerboseDebugReportSent(_event: Protocol.Storage.AttributionReportingVerboseDebugReportSentEvent):\n      void {\n  }\n}\n\nexport const enum Events {\n  CACHE_ADDED = 'CacheAdded',\n  CACHE_REMOVED = 'CacheRemoved',\n  CACHE_STORAGE_CONTENT_UPDATED = 'CacheStorageContentUpdated',\n}\n\nexport interface CacheEvent {\n  model: ServiceWorkerCacheModel;\n  cache: Cache;\n}\n\nexport interface CacheStorageContentUpdatedEvent {\n  storageBucket: Protocol.Storage.StorageBucket;\n  cacheName: string;\n}\n\nexport interface EventTypes {\n  [Events.CACHE_ADDED]: CacheEvent;\n  [Events.CACHE_REMOVED]: CacheEvent;\n  [Events.CACHE_STORAGE_CONTENT_UPDATED]: CacheStorageContentUpdatedEvent;\n}\n\nexport class Cache {\n  readonly #model: ServiceWorkerCacheModel;\n  storageKey: string;\n  storageBucket: Protocol.Storage.StorageBucket;\n  cacheName: string;\n  cacheId: Protocol.CacheStorage.CacheId;\n\n  constructor(\n      model: ServiceWorkerCacheModel, storageBucket: Protocol.Storage.StorageBucket, cacheName: string,\n      cacheId: Protocol.CacheStorage.CacheId) {\n    this.#model = model;\n    this.storageBucket = storageBucket;\n    this.storageKey = storageBucket.storageKey;\n    this.cacheName = cacheName;\n    this.cacheId = cacheId;\n  }\n\n  inBucket(storageBucket: Protocol.Storage.StorageBucket): boolean {\n    return this.storageKey === storageBucket.storageKey && this.storageBucket.name === storageBucket.name;\n  }\n\n  equals(cache: Cache): boolean {\n    return this.cacheId === cache.cacheId;\n  }\n\n  toString(): string {\n    return this.storageKey + this.cacheName;\n  }\n\n  async requestCachedResponse(url: Platform.DevToolsPath.UrlString, requestHeaders: NameValue[]):\n      Promise<Protocol.CacheStorage.CachedResponse|null> {\n    const response = await this.#model.cacheAgent.invoke_requestCachedResponse(\n        {cacheId: this.cacheId, requestURL: url, requestHeaders});\n    if (response.getError()) {\n      return null;\n    }\n    return response.response;\n  }\n}\n\nSDKModel.register(ServiceWorkerCacheModel, {capabilities: Capability.STORAGE, autostart: false});\n", "// Copyright 2023 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport type * as ProtocolProxyApi from '../../generated/protocol-proxy-api.js';\nimport type * as Protocol from '../../generated/protocol.js';\nimport type * as Common from '../common/common.js';\n\nimport {SDKModel} from './SDKModel.js';\nimport {Events as StorageKeyManagerEvents, StorageKeyManager} from './StorageKeyManager.js';\nimport {Capability, type Target} from './Target.js';\n\nexport class StorageBucketsModel extends SDKModel<EventTypes> implements ProtocolProxyApi.StorageDispatcher {\n  private enabled = false;\n  readonly storageAgent: ProtocolProxyApi.StorageApi;\n  private readonly storageKeyManager: StorageKeyManager|null;\n  private bucketsById = new Map<string, Protocol.Storage.StorageBucketInfo>();\n  private trackedStorageKeys = new Set<string>();\n\n  constructor(target: Target) {\n    super(target);\n    target.registerStorageDispatcher(this);\n    this.storageAgent = target.storageAgent();\n    this.storageKeyManager = target.model(StorageKeyManager);\n  }\n\n  getBuckets(): Set<Protocol.Storage.StorageBucketInfo> {\n    return new Set(this.bucketsById.values());\n  }\n\n  getBucketsForStorageKey(storageKey: string): Set<Protocol.Storage.StorageBucketInfo> {\n    const buckets = [...this.bucketsById.values()];\n    return new Set(buckets.filter(({bucket}) => bucket.storageKey === storageKey));\n  }\n\n  getDefaultBucketForStorageKey(storageKey: string): Protocol.Storage.StorageBucketInfo|null {\n    const buckets = [...this.bucketsById.values()];\n    return buckets.find(({bucket}) => bucket.storageKey === storageKey && bucket.name === undefined) ?? null;\n  }\n\n  getBucketById(bucketId: string): Protocol.Storage.StorageBucketInfo|null {\n    return this.bucketsById.get(bucketId) ?? null;\n  }\n\n  getBucketByName(storageKey: string, bucketName?: string): Protocol.Storage.StorageBucketInfo|null {\n    if (!bucketName) {\n      return this.getDefaultBucketForStorageKey(storageKey);\n    }\n    const buckets = [...this.bucketsById.values()];\n    return buckets.find(({bucket}) => bucket.storageKey === storageKey && bucket.name === bucketName) ?? null;\n  }\n\n  deleteBucket(bucket: Protocol.Storage.StorageBucket): void {\n    void this.storageAgent.invoke_deleteStorageBucket({bucket});\n  }\n\n  enable(): void {\n    if (this.enabled) {\n      return;\n    }\n\n    if (this.storageKeyManager) {\n      this.storageKeyManager.addEventListener(StorageKeyManagerEvents.STORAGE_KEY_ADDED, this.storageKeyAdded, this);\n      this.storageKeyManager.addEventListener(\n          StorageKeyManagerEvents.STORAGE_KEY_REMOVED, this.storageKeyRemoved, this);\n      for (const storageKey of this.storageKeyManager.storageKeys()) {\n        this.addStorageKey(storageKey);\n      }\n    }\n\n    this.enabled = true;\n  }\n\n  private storageKeyAdded(event: Common.EventTarget.EventTargetEvent<string>): void {\n    this.addStorageKey(event.data);\n  }\n  private storageKeyRemoved(event: Common.EventTarget.EventTargetEvent<string>): void {\n    this.removeStorageKey(event.data);\n  }\n\n  private addStorageKey(storageKey: string): void {\n    if (this.trackedStorageKeys.has(storageKey)) {\n      throw new Error('Can\\'t call addStorageKey for a storage key if it has already been added.');\n    }\n\n    this.trackedStorageKeys.add(storageKey);\n    void this.storageAgent.invoke_setStorageBucketTracking({storageKey, enable: true});\n  }\n\n  private removeStorageKey(storageKey: string): void {\n    if (!this.trackedStorageKeys.has(storageKey)) {\n      throw new Error('Can\\'t call removeStorageKey for a storage key if it hasn\\'t already been added.');\n    }\n    const bucketsForStorageKey = this.getBucketsForStorageKey(storageKey);\n    for (const bucket of bucketsForStorageKey) {\n      this.bucketRemoved(bucket);\n    }\n    this.trackedStorageKeys.delete(storageKey);\n    void this.storageAgent.invoke_setStorageBucketTracking({storageKey, enable: false});\n  }\n\n  private bucketAdded(bucketInfo: Protocol.Storage.StorageBucketInfo): void {\n    this.bucketsById.set(bucketInfo.id, bucketInfo);\n    this.dispatchEventToListeners(Events.BUCKET_ADDED, {model: this, bucketInfo});\n  }\n\n  private bucketRemoved(bucketInfo: Protocol.Storage.StorageBucketInfo): void {\n    this.bucketsById.delete(bucketInfo.id);\n    this.dispatchEventToListeners(Events.BUCKET_REMOVED, {model: this, bucketInfo});\n  }\n\n  private bucketChanged(bucketInfo: Protocol.Storage.StorageBucketInfo): void {\n    this.dispatchEventToListeners(Events.BUCKET_CHANGED, {model: this, bucketInfo});\n  }\n\n  private bucketInfosAreEqual(\n      bucketInfo1: Protocol.Storage.StorageBucketInfo, bucketInfo2: Protocol.Storage.StorageBucketInfo): boolean {\n    return bucketInfo1.bucket.storageKey === bucketInfo2.bucket.storageKey && bucketInfo1.id === bucketInfo2.id &&\n        bucketInfo1.bucket.name === bucketInfo2.bucket.name && bucketInfo1.expiration === bucketInfo2.expiration &&\n        bucketInfo1.quota === bucketInfo2.quota && bucketInfo1.persistent === bucketInfo2.persistent &&\n        bucketInfo1.durability === bucketInfo2.durability;\n  }\n\n  storageBucketCreatedOrUpdated({bucketInfo}: Protocol.Storage.StorageBucketCreatedOrUpdatedEvent): void {\n    const curBucket = this.getBucketById(bucketInfo.id);\n    if (curBucket) {\n      if (!this.bucketInfosAreEqual(curBucket, bucketInfo)) {\n        this.bucketChanged(bucketInfo);\n      }\n    } else {\n      this.bucketAdded(bucketInfo);\n    }\n  }\n\n  storageBucketDeleted({bucketId}: Protocol.Storage.StorageBucketDeletedEvent): void {\n    const curBucket = this.getBucketById(bucketId);\n    if (curBucket) {\n      this.bucketRemoved(curBucket);\n    } else {\n      throw new Error(\n          `Received an event that Storage Bucket '${bucketId}' was deleted, but it wasn't in the StorageBucketsModel.`);\n    }\n  }\n\n  attributionReportingTriggerRegistered(_event: Protocol.Storage.AttributionReportingTriggerRegisteredEvent): void {\n  }\n\n  interestGroupAccessed(_event: Protocol.Storage.InterestGroupAccessedEvent): void {\n  }\n\n  interestGroupAuctionEventOccurred(_event: Protocol.Storage.InterestGroupAuctionEventOccurredEvent): void {\n  }\n\n  interestGroupAuctionNetworkRequestCreated(_event: Protocol.Storage.InterestGroupAuctionNetworkRequestCreatedEvent):\n      void {\n  }\n\n  indexedDBListUpdated(_event: Protocol.Storage.IndexedDBListUpdatedEvent): void {\n  }\n\n  indexedDBContentUpdated(_event: Protocol.Storage.IndexedDBContentUpdatedEvent): void {\n  }\n\n  cacheStorageListUpdated(_event: Protocol.Storage.CacheStorageListUpdatedEvent): void {\n  }\n\n  cacheStorageContentUpdated(_event: Protocol.Storage.CacheStorageContentUpdatedEvent): void {\n  }\n\n  sharedStorageAccessed(_event: Protocol.Storage.SharedStorageAccessedEvent): void {\n  }\n\n  sharedStorageWorkletOperationExecutionFinished(\n      _event: Protocol.Storage.SharedStorageWorkletOperationExecutionFinishedEvent): void {\n  }\n\n  attributionReportingSourceRegistered(_event: Protocol.Storage.AttributionReportingSourceRegisteredEvent): void {\n  }\n  attributionReportingReportSent(_event: Protocol.Storage.AttributionReportingReportSentEvent): void {\n  }\n\n  attributionReportingVerboseDebugReportSent(_event: Protocol.Storage.AttributionReportingVerboseDebugReportSentEvent):\n      void {\n  }\n}\n\nSDKModel.register(StorageBucketsModel, {capabilities: Capability.STORAGE, autostart: false});\n\nexport const enum Events {\n  BUCKET_ADDED = 'BucketAdded',\n  BUCKET_REMOVED = 'BucketRemoved',\n  BUCKET_CHANGED = 'BucketChanged',\n}\n\nexport interface BucketEvent {\n  model: StorageBucketsModel;\n  bucketInfo: Protocol.Storage.StorageBucketInfo;\n}\n\nexport interface EventTypes {\n  [Events.BUCKET_ADDED]: BucketEvent;\n  [Events.BUCKET_REMOVED]: BucketEvent;\n  [Events.BUCKET_CHANGED]: BucketEvent;\n}\n", "// Copyright 2011 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport type * as ProtocolProxyApi from '../../generated/protocol-proxy-api.js';\nimport * as Protocol from '../../generated/protocol.js';\nimport * as Common from '../common/common.js';\nimport * as i18n from '../i18n/i18n.js';\nimport type * as Platform from '../platform/platform.js';\n\nimport {Events as RuntimeModelEvents, type ExecutionContext, RuntimeModel} from './RuntimeModel.js';\nimport {SDKModel} from './SDKModel.js';\nimport {Capability, type Target, Type} from './Target.js';\nimport {TargetManager} from './TargetManager.js';\n\nconst UIStrings = {\n  /**\n   * @description Service worker running status displayed in the Service Workers view in the Application panel\n   */\n  running: 'running',\n  /**\n   * @description Service worker running status displayed in the Service Workers view in the Application panel\n   */\n  starting: 'starting',\n  /**\n   * @description Service worker running status displayed in the Service Workers view in the Application panel\n   */\n  stopped: 'stopped',\n  /**\n   * @description Service worker running status displayed in the Service Workers view in the Application panel\n   */\n  stopping: 'stopping',\n  /**\n   * @description Service worker version status displayed in the Threads view of the Debugging side pane in the Sources panel\n   */\n  activated: 'activated',\n  /**\n   * @description Service worker version status displayed in the Threads view of the Debugging side pane in the Sources panel\n   */\n  activating: 'activating',\n  /**\n   * @description Service worker version status displayed in the Threads view of the Debugging side pane in the Sources panel\n   */\n  installed: 'installed',\n  /**\n   * @description Service worker version status displayed in the Threads view of the Debugging side pane in the Sources panel\n   */\n  installing: 'installing',\n  /**\n   * @description Service worker version status displayed in the Threads view of the Debugging side pane in the Sources panel\n   */\n  new: 'new',\n  /**\n   * @description Service worker version status displayed in the Threads view of the Debugging side pane in the Sources panel\n   */\n  redundant: 'redundant',\n  /**\n   * @description Service worker version status displayed in the Threads view of the Debugging side pane in the Sources panel\n   * @example {sw.js} PH1\n   * @example {117} PH2\n   * @example {activated} PH3\n   */\n  sSS: '{PH1} #{PH2} ({PH3})',\n} as const;\nconst str_ = i18n.i18n.registerUIStrings('core/sdk/ServiceWorkerManager.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\nconst i18nLazyString = i18n.i18n.getLazilyComputedLocalizedString.bind(undefined, str_);\n\nexport class ServiceWorkerManager extends SDKModel<EventTypes> {\n  readonly #agent: ProtocolProxyApi.ServiceWorkerApi;\n  readonly #registrations = new Map<string, ServiceWorkerRegistration>();\n  #enabled = false;\n  readonly #forceUpdateSetting: Common.Settings.Setting<boolean>;\n\n  constructor(target: Target) {\n    super(target);\n    target.registerServiceWorkerDispatcher(new ServiceWorkerDispatcher(this));\n    this.#agent = target.serviceWorkerAgent();\n    void this.enable();\n    this.#forceUpdateSetting =\n        Common.Settings.Settings.instance().createSetting('service-worker-update-on-reload', false);\n    if (this.#forceUpdateSetting.get()) {\n      this.forceUpdateSettingChanged();\n    }\n    this.#forceUpdateSetting.addChangeListener(this.forceUpdateSettingChanged, this);\n    new ServiceWorkerContextNamer(target, this);\n  }\n\n  async enable(): Promise<void> {\n    if (this.#enabled) {\n      return;\n    }\n    this.#enabled = true;\n    await this.#agent.invoke_enable();\n  }\n\n  async disable(): Promise<void> {\n    if (!this.#enabled) {\n      return;\n    }\n    this.#enabled = false;\n    this.#registrations.clear();\n    await this.#agent.invoke_enable();\n  }\n\n  registrations(): Map<string, ServiceWorkerRegistration> {\n    return this.#registrations;\n  }\n\n  findVersion(versionId: string): ServiceWorkerVersion|null {\n    for (const registration of this.registrations().values()) {\n      const version = registration.versions.get(versionId);\n      if (version) {\n        return version;\n      }\n    }\n    return null;\n  }\n\n  deleteRegistration(registrationId: string): void {\n    const registration = this.#registrations.get(registrationId);\n    if (!registration) {\n      return;\n    }\n    if (registration.isRedundant()) {\n      this.#registrations.delete(registrationId);\n      this.dispatchEventToListeners(Events.REGISTRATION_DELETED, registration);\n      return;\n    }\n    registration.deleting = true;\n    for (const version of registration.versions.values()) {\n      void this.stopWorker(version.id);\n    }\n    void this.unregister(registration.scopeURL);\n  }\n\n  async updateRegistration(registrationId: string): Promise<void> {\n    const registration = this.#registrations.get(registrationId);\n    if (!registration) {\n      return;\n    }\n    await this.#agent.invoke_updateRegistration({scopeURL: registration.scopeURL});\n  }\n\n  async deliverPushMessage(registrationId: Protocol.ServiceWorker.RegistrationID, data: string): Promise<void> {\n    const registration = this.#registrations.get(registrationId);\n    if (!registration) {\n      return;\n    }\n    const origin = Common.ParsedURL.ParsedURL.extractOrigin(registration.scopeURL);\n    await this.#agent.invoke_deliverPushMessage({origin, registrationId, data});\n  }\n\n  async dispatchSyncEvent(registrationId: Protocol.ServiceWorker.RegistrationID, tag: string, lastChance: boolean):\n      Promise<void> {\n    const registration = this.#registrations.get(registrationId);\n    if (!registration) {\n      return;\n    }\n    const origin = Common.ParsedURL.ParsedURL.extractOrigin(registration.scopeURL);\n    await this.#agent.invoke_dispatchSyncEvent({origin, registrationId, tag, lastChance});\n  }\n\n  async dispatchPeriodicSyncEvent(registrationId: Protocol.ServiceWorker.RegistrationID, tag: string): Promise<void> {\n    const registration = this.#registrations.get(registrationId);\n    if (!registration) {\n      return;\n    }\n    const origin = Common.ParsedURL.ParsedURL.extractOrigin(registration.scopeURL);\n    await this.#agent.invoke_dispatchPeriodicSyncEvent({origin, registrationId, tag});\n  }\n\n  private async unregister(scopeURL: string): Promise<void> {\n    await this.#agent.invoke_unregister({scopeURL});\n  }\n\n  async startWorker(scopeURL: string): Promise<void> {\n    await this.#agent.invoke_startWorker({scopeURL});\n  }\n\n  async skipWaiting(scopeURL: string): Promise<void> {\n    await this.#agent.invoke_skipWaiting({scopeURL});\n  }\n\n  async stopWorker(versionId: string): Promise<void> {\n    await this.#agent.invoke_stopWorker({versionId});\n  }\n\n  workerRegistrationUpdated(registrations: Protocol.ServiceWorker.ServiceWorkerRegistration[]): void {\n    for (const payload of registrations) {\n      let registration = this.#registrations.get(payload.registrationId);\n      if (!registration) {\n        registration = new ServiceWorkerRegistration(payload);\n        this.#registrations.set(payload.registrationId, registration);\n        this.dispatchEventToListeners(Events.REGISTRATION_UPDATED, registration);\n        continue;\n      }\n      registration.update(payload);\n\n      if (registration.shouldBeRemoved()) {\n        this.#registrations.delete(registration.id);\n        this.dispatchEventToListeners(Events.REGISTRATION_DELETED, registration);\n      } else {\n        this.dispatchEventToListeners(Events.REGISTRATION_UPDATED, registration);\n      }\n    }\n  }\n\n  workerVersionUpdated(versions: Protocol.ServiceWorker.ServiceWorkerVersion[]): void {\n    const registrations = new Set<ServiceWorkerRegistration>();\n    for (const payload of versions) {\n      const registration = this.#registrations.get(payload.registrationId);\n      if (!registration) {\n        continue;\n      }\n      registration.updateVersion(payload);\n      registrations.add(registration);\n    }\n    for (const registration of registrations) {\n      if (registration.shouldBeRemoved()) {\n        this.#registrations.delete(registration.id);\n        this.dispatchEventToListeners(Events.REGISTRATION_DELETED, registration);\n      } else {\n        this.dispatchEventToListeners(Events.REGISTRATION_UPDATED, registration);\n      }\n    }\n  }\n\n  workerErrorReported(payload: Protocol.ServiceWorker.ServiceWorkerErrorMessage): void {\n    const registration = this.#registrations.get(payload.registrationId);\n    if (!registration) {\n      return;\n    }\n    registration.errors.push(payload);\n    this.dispatchEventToListeners(Events.REGISTRATION_ERROR_ADDED, {registration, error: payload});\n  }\n\n  private forceUpdateSettingChanged(): void {\n    const forceUpdateOnPageLoad = this.#forceUpdateSetting.get();\n    void this.#agent.invoke_setForceUpdateOnPageLoad({forceUpdateOnPageLoad});\n  }\n}\n\nexport const enum Events {\n  REGISTRATION_UPDATED = 'RegistrationUpdated',\n  REGISTRATION_ERROR_ADDED = 'RegistrationErrorAdded',\n  REGISTRATION_DELETED = 'RegistrationDeleted',\n}\n\nexport interface RegistrationErrorAddedEvent {\n  registration: ServiceWorkerRegistration;\n  error: Protocol.ServiceWorker.ServiceWorkerErrorMessage;\n}\n\nexport interface EventTypes {\n  [Events.REGISTRATION_UPDATED]: ServiceWorkerRegistration;\n  [Events.REGISTRATION_ERROR_ADDED]: RegistrationErrorAddedEvent;\n  [Events.REGISTRATION_DELETED]: ServiceWorkerRegistration;\n}\n\nclass ServiceWorkerDispatcher implements ProtocolProxyApi.ServiceWorkerDispatcher {\n  readonly #manager: ServiceWorkerManager;\n  constructor(manager: ServiceWorkerManager) {\n    this.#manager = manager;\n  }\n\n  workerRegistrationUpdated({registrations}: Protocol.ServiceWorker.WorkerRegistrationUpdatedEvent): void {\n    this.#manager.workerRegistrationUpdated(registrations);\n  }\n\n  workerVersionUpdated({versions}: Protocol.ServiceWorker.WorkerVersionUpdatedEvent): void {\n    this.#manager.workerVersionUpdated(versions);\n  }\n\n  workerErrorReported({errorMessage}: Protocol.ServiceWorker.WorkerErrorReportedEvent): void {\n    this.#manager.workerErrorReported(errorMessage);\n  }\n}\n\n/**\n * For every version, we keep a history of ServiceWorkerVersionState. Every time\n * a version is updated we will add a new state at the head of the history chain.\n * This history tells us information such as what the current state is, or when\n * the version becomes installed.\n */\nexport class ServiceWorkerVersionState {\n  runningStatus: Protocol.ServiceWorker.ServiceWorkerVersionRunningStatus;\n  status: Protocol.ServiceWorker.ServiceWorkerVersionStatus;\n  lastUpdatedTimestamp: number;\n  previousState: ServiceWorkerVersionState|null;\n  constructor(\n      runningStatus: Protocol.ServiceWorker.ServiceWorkerVersionRunningStatus,\n      status: Protocol.ServiceWorker.ServiceWorkerVersionStatus, previousState: ServiceWorkerVersionState|null,\n      timestamp: number) {\n    this.runningStatus = runningStatus;\n    this.status = status;\n    this.lastUpdatedTimestamp = timestamp;\n    this.previousState = previousState;\n  }\n}\n\nexport class ServiceWorkerRouterRule {\n  condition: string;\n  source: string;\n  id: number;\n  constructor(condition: string, source: string, id: number) {\n    this.condition = condition;\n    this.source = source;\n    this.id = id;\n  }\n}\n\nexport class ServiceWorkerVersion {\n  id!: string;\n  scriptURL!: Platform.DevToolsPath.UrlString;\n  parsedURL!: Common.ParsedURL.ParsedURL;\n  securityOrigin!: string;\n  scriptLastModified!: number|undefined;\n  scriptResponseTime!: number|undefined;\n  controlledClients!: Protocol.Target.TargetID[];\n  targetId!: string|null;\n  routerRules!: ServiceWorkerRouterRule[]|null;\n  currentState!: ServiceWorkerVersionState;\n  registration: ServiceWorkerRegistration;\n  constructor(registration: ServiceWorkerRegistration, payload: Protocol.ServiceWorker.ServiceWorkerVersion) {\n    this.registration = registration;\n    this.update(payload);\n  }\n\n  update(payload: Protocol.ServiceWorker.ServiceWorkerVersion): void {\n    this.id = payload.versionId;\n    this.scriptURL = payload.scriptURL as Platform.DevToolsPath.UrlString;\n    const parsedURL = new Common.ParsedURL.ParsedURL(payload.scriptURL);\n    this.securityOrigin = parsedURL.securityOrigin();\n    this.currentState =\n        new ServiceWorkerVersionState(payload.runningStatus, payload.status, this.currentState, Date.now());\n    this.scriptLastModified = payload.scriptLastModified;\n    this.scriptResponseTime = payload.scriptResponseTime;\n    if (payload.controlledClients) {\n      this.controlledClients = payload.controlledClients.slice();\n    } else {\n      this.controlledClients = [];\n    }\n    this.targetId = payload.targetId || null;\n    this.routerRules = null;\n    if (payload.routerRules) {\n      this.routerRules = this.parseJSONRules(payload.routerRules);\n    }\n  }\n\n  isStartable(): boolean {\n    return !this.registration.isDeleted && this.isActivated() && this.isStopped();\n  }\n\n  isStoppedAndRedundant(): boolean {\n    return this.runningStatus === Protocol.ServiceWorker.ServiceWorkerVersionRunningStatus.Stopped &&\n        this.status === Protocol.ServiceWorker.ServiceWorkerVersionStatus.Redundant;\n  }\n\n  isStopped(): boolean {\n    return this.runningStatus === Protocol.ServiceWorker.ServiceWorkerVersionRunningStatus.Stopped;\n  }\n\n  isStarting(): boolean {\n    return this.runningStatus === Protocol.ServiceWorker.ServiceWorkerVersionRunningStatus.Starting;\n  }\n\n  isRunning(): boolean {\n    return this.runningStatus === Protocol.ServiceWorker.ServiceWorkerVersionRunningStatus.Running;\n  }\n\n  isStopping(): boolean {\n    return this.runningStatus === Protocol.ServiceWorker.ServiceWorkerVersionRunningStatus.Stopping;\n  }\n\n  isNew(): boolean {\n    return this.status === Protocol.ServiceWorker.ServiceWorkerVersionStatus.New;\n  }\n\n  isInstalling(): boolean {\n    return this.status === Protocol.ServiceWorker.ServiceWorkerVersionStatus.Installing;\n  }\n\n  isInstalled(): boolean {\n    return this.status === Protocol.ServiceWorker.ServiceWorkerVersionStatus.Installed;\n  }\n\n  isActivating(): boolean {\n    return this.status === Protocol.ServiceWorker.ServiceWorkerVersionStatus.Activating;\n  }\n\n  isActivated(): boolean {\n    return this.status === Protocol.ServiceWorker.ServiceWorkerVersionStatus.Activated;\n  }\n\n  isRedundant(): boolean {\n    return this.status === Protocol.ServiceWorker.ServiceWorkerVersionStatus.Redundant;\n  }\n\n  get status(): Protocol.ServiceWorker.ServiceWorkerVersionStatus {\n    return this.currentState.status;\n  }\n\n  get runningStatus(): Protocol.ServiceWorker.ServiceWorkerVersionRunningStatus {\n    return this.currentState.runningStatus;\n  }\n\n  mode(): string {\n    if (this.isNew() || this.isInstalling()) {\n      return ServiceWorkerVersion.Modes.INSTALLING;\n    }\n    if (this.isInstalled()) {\n      return ServiceWorkerVersion.Modes.WAITING;\n    }\n    if (this.isActivating() || this.isActivated()) {\n      return ServiceWorkerVersion.Modes.ACTIVE;\n    }\n    return ServiceWorkerVersion.Modes.REDUNDANT;\n  }\n\n  private parseJSONRules(input: string): ServiceWorkerRouterRule[]|null {\n    try {\n      const parsedObject = JSON.parse(input);\n      if (!Array.isArray(parsedObject)) {\n        console.error('Parse error: `routerRules` in ServiceWorkerVersion should be an array');\n        return null;\n      }\n      const routerRules: ServiceWorkerRouterRule[] = [];\n      for (const parsedRule of parsedObject) {\n        const {condition, source, id} = parsedRule;\n        if (condition === undefined || source === undefined || id === undefined) {\n          console.error('Parse error: Missing some fields of `routerRules` in ServiceWorkerVersion');\n          return null;\n        }\n        routerRules.push(new ServiceWorkerRouterRule(JSON.stringify(condition), JSON.stringify(source), id));\n      }\n      return routerRules;\n    } catch {\n      console.error('Parse error: Invalid `routerRules` in ServiceWorkerVersion');\n      return null;\n    }\n  }\n}\n\nexport namespace ServiceWorkerVersion {\n  export const RunningStatus = {\n    [Protocol.ServiceWorker.ServiceWorkerVersionRunningStatus.Running]: i18nLazyString(UIStrings.running),\n    [Protocol.ServiceWorker.ServiceWorkerVersionRunningStatus.Starting]: i18nLazyString(UIStrings.starting),\n    [Protocol.ServiceWorker.ServiceWorkerVersionRunningStatus.Stopped]: i18nLazyString(UIStrings.stopped),\n    [Protocol.ServiceWorker.ServiceWorkerVersionRunningStatus.Stopping]: i18nLazyString(UIStrings.stopping),\n  };\n\n  export const Status = {\n    [Protocol.ServiceWorker.ServiceWorkerVersionStatus.Activated]: i18nLazyString(UIStrings.activated),\n    [Protocol.ServiceWorker.ServiceWorkerVersionStatus.Activating]: i18nLazyString(UIStrings.activating),\n    [Protocol.ServiceWorker.ServiceWorkerVersionStatus.Installed]: i18nLazyString(UIStrings.installed),\n    [Protocol.ServiceWorker.ServiceWorkerVersionStatus.Installing]: i18nLazyString(UIStrings.installing),\n    [Protocol.ServiceWorker.ServiceWorkerVersionStatus.New]: i18nLazyString(UIStrings.new),\n    [Protocol.ServiceWorker.ServiceWorkerVersionStatus.Redundant]: i18nLazyString(UIStrings.redundant),\n  };\n\n  export const enum Modes {\n    INSTALLING = 'installing',\n    WAITING = 'waiting',\n    ACTIVE = 'active',\n    REDUNDANT = 'redundant',\n  }\n}\n\nexport class ServiceWorkerRegistration {\n  #fingerprint!: symbol;\n  id!: Protocol.ServiceWorker.RegistrationID;\n  scopeURL!: Platform.DevToolsPath.UrlString;\n  securityOrigin!: Platform.DevToolsPath.UrlString;\n  isDeleted!: boolean;\n  versions = new Map<string, ServiceWorkerVersion>();\n  deleting = false;\n  errors: Protocol.ServiceWorker.ServiceWorkerErrorMessage[] = [];\n\n  constructor(payload: Protocol.ServiceWorker.ServiceWorkerRegistration) {\n    this.update(payload);\n  }\n\n  update(payload: Protocol.ServiceWorker.ServiceWorkerRegistration): void {\n    this.#fingerprint = Symbol('fingerprint');\n    this.id = payload.registrationId;\n    this.scopeURL = payload.scopeURL as Platform.DevToolsPath.UrlString;\n    const parsedURL = new Common.ParsedURL.ParsedURL(payload.scopeURL);\n    this.securityOrigin = parsedURL.securityOrigin();\n    this.isDeleted = payload.isDeleted;\n  }\n\n  fingerprint(): symbol {\n    return this.#fingerprint;\n  }\n\n  versionsByMode(): Map<string, ServiceWorkerVersion> {\n    const result = new Map<string, ServiceWorkerVersion>();\n    for (const version of this.versions.values()) {\n      result.set(version.mode(), version);\n    }\n    return result;\n  }\n\n  updateVersion(payload: Protocol.ServiceWorker.ServiceWorkerVersion): ServiceWorkerVersion {\n    this.#fingerprint = Symbol('fingerprint');\n    let version = this.versions.get(payload.versionId);\n    if (!version) {\n      version = new ServiceWorkerVersion(this, payload);\n      this.versions.set(payload.versionId, version);\n      return version;\n    }\n    version.update(payload);\n    return version;\n  }\n\n  isRedundant(): boolean {\n    for (const version of this.versions.values()) {\n      if (!version.isStoppedAndRedundant()) {\n        return false;\n      }\n    }\n    return true;\n  }\n\n  shouldBeRemoved(): boolean {\n    return this.isRedundant() && (!this.errors.length || this.deleting);\n  }\n\n  canBeRemoved(): boolean {\n    return this.isDeleted || this.deleting;\n  }\n}\n\nclass ServiceWorkerContextNamer {\n  readonly #target: Target;\n  readonly #serviceWorkerManager: ServiceWorkerManager;\n  readonly #versionByTargetId = new Map<string, ServiceWorkerVersion>();\n\n  constructor(target: Target, serviceWorkerManager: ServiceWorkerManager) {\n    this.#target = target;\n    this.#serviceWorkerManager = serviceWorkerManager;\n    serviceWorkerManager.addEventListener(Events.REGISTRATION_UPDATED, this.registrationsUpdated, this);\n    serviceWorkerManager.addEventListener(Events.REGISTRATION_DELETED, this.registrationsUpdated, this);\n    TargetManager.instance().addModelListener(\n        RuntimeModel, RuntimeModelEvents.ExecutionContextCreated, this.executionContextCreated, this);\n  }\n\n  private registrationsUpdated(): void {\n    this.#versionByTargetId.clear();\n    const registrations = this.#serviceWorkerManager.registrations().values();\n    for (const registration of registrations) {\n      for (const version of registration.versions.values()) {\n        if (version.targetId) {\n          this.#versionByTargetId.set(version.targetId, version);\n        }\n      }\n    }\n    this.updateAllContextLabels();\n  }\n\n  private executionContextCreated(event: Common.EventTarget.EventTargetEvent<ExecutionContext>): void {\n    const executionContext = event.data;\n    const serviceWorkerTargetId = this.serviceWorkerTargetId(executionContext.target());\n    if (!serviceWorkerTargetId) {\n      return;\n    }\n    this.updateContextLabel(executionContext, this.#versionByTargetId.get(serviceWorkerTargetId) || null);\n  }\n\n  private serviceWorkerTargetId(target: Target): string|null {\n    if (target.parentTarget() !== this.#target || target.type() !== Type.ServiceWorker) {\n      return null;\n    }\n    return target.id();\n  }\n\n  private updateAllContextLabels(): void {\n    for (const target of TargetManager.instance().targets()) {\n      const serviceWorkerTargetId = this.serviceWorkerTargetId(target);\n      if (!serviceWorkerTargetId) {\n        continue;\n      }\n      const version = this.#versionByTargetId.get(serviceWorkerTargetId) || null;\n      const runtimeModel = target.model(RuntimeModel);\n      const executionContexts = runtimeModel ? runtimeModel.executionContexts() : [];\n      for (const context of executionContexts) {\n        this.updateContextLabel(context, version);\n      }\n    }\n  }\n\n  private updateContextLabel(context: ExecutionContext, version: ServiceWorkerVersion|null): void {\n    if (!version) {\n      context.setLabel('');\n      return;\n    }\n    const parsedUrl = Common.ParsedURL.ParsedURL.fromString(context.origin);\n    const label = parsedUrl ? parsedUrl.lastPathComponentWithFragment() : context.name;\n    const localizedStatus = ServiceWorkerVersion.Status[version.status];\n    context.setLabel(i18nString(UIStrings.sSS, {PH1: label, PH2: version.id, PH3: localizedStatus()}));\n  }\n}\n\nSDKModel.register(ServiceWorkerManager, {capabilities: Capability.SERVICE_WORKER, autostart: true});\n", "// Copyright 2020 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport type * as ProtocolProxyApi from '../../generated/protocol-proxy-api.js';\nimport type * as Protocol from '../../generated/protocol.js';\n\nimport {SDKModel} from './SDKModel.js';\nimport {Capability, type Target} from './Target.js';\n\nexport const enum Events {\n  CREDENTIAL_ADDED = 'CredentialAdded',\n  CREDENTIAL_ASSERTED = 'CredentialAsserted',\n  CREDENTIAL_DELETED = 'CredentialDeleted',\n  CREDENTIAL_UPDATED = 'CredentialUpdated',\n}\n\nexport interface EventTypes {\n  [Events.CREDENTIAL_ADDED]: Protocol.WebAuthn.CredentialAddedEvent;\n  [Events.CREDENTIAL_ASSERTED]: Protocol.WebAuthn.CredentialAssertedEvent;\n  [Events.CREDENTIAL_DELETED]: Protocol.WebAuthn.CredentialDeletedEvent;\n  [Events.CREDENTIAL_UPDATED]: Protocol.WebAuthn.CredentialUpdatedEvent;\n}\n\nexport class WebAuthnModel extends SDKModel<EventTypes> {\n  readonly #agent: ProtocolProxyApi.WebAuthnApi;\n  constructor(target: Target) {\n    super(target);\n    this.#agent = target.webAuthnAgent();\n    target.registerWebAuthnDispatcher(new WebAuthnDispatcher(this));\n  }\n\n  setVirtualAuthEnvEnabled(enable: boolean): Promise<Object> {\n    if (enable) {\n      return this.#agent.invoke_enable({enableUI: true});\n    }\n    return this.#agent.invoke_disable();\n  }\n\n  async addAuthenticator(options: Protocol.WebAuthn.VirtualAuthenticatorOptions):\n      Promise<Protocol.WebAuthn.AuthenticatorId> {\n    const response = await this.#agent.invoke_addVirtualAuthenticator({options});\n    return response.authenticatorId;\n  }\n\n  async removeAuthenticator(authenticatorId: Protocol.WebAuthn.AuthenticatorId): Promise<void> {\n    await this.#agent.invoke_removeVirtualAuthenticator({authenticatorId});\n  }\n\n  async setAutomaticPresenceSimulation(authenticatorId: Protocol.WebAuthn.AuthenticatorId, enabled: boolean):\n      Promise<void> {\n    await this.#agent.invoke_setAutomaticPresenceSimulation({authenticatorId, enabled});\n  }\n\n  async getCredentials(authenticatorId: Protocol.WebAuthn.AuthenticatorId): Promise<Protocol.WebAuthn.Credential[]> {\n    const response = await this.#agent.invoke_getCredentials({authenticatorId});\n    return response.credentials;\n  }\n\n  async removeCredential(authenticatorId: Protocol.WebAuthn.AuthenticatorId, credentialId: string): Promise<void> {\n    await this.#agent.invoke_removeCredential({authenticatorId, credentialId});\n  }\n\n  credentialAdded(params: Protocol.WebAuthn.CredentialAddedEvent): void {\n    this.dispatchEventToListeners(Events.CREDENTIAL_ADDED, params);\n  }\n\n  credentialAsserted(params: Protocol.WebAuthn.CredentialAssertedEvent): void {\n    this.dispatchEventToListeners(Events.CREDENTIAL_ASSERTED, params);\n  }\n\n  credentialDeleted(params: Protocol.WebAuthn.CredentialDeletedEvent): void {\n    this.dispatchEventToListeners(Events.CREDENTIAL_DELETED, params);\n  }\n\n  credentialUpdated(params: Protocol.WebAuthn.CredentialUpdatedEvent): void {\n    this.dispatchEventToListeners(Events.CREDENTIAL_UPDATED, params);\n  }\n}\n\nclass WebAuthnDispatcher implements ProtocolProxyApi.WebAuthnDispatcher {\n  readonly #model: WebAuthnModel;\n  constructor(model: WebAuthnModel) {\n    this.#model = model;\n  }\n\n  credentialAdded(params: Protocol.WebAuthn.CredentialAddedEvent): void {\n    this.#model.credentialAdded(params);\n  }\n\n  credentialAsserted(params: Protocol.WebAuthn.CredentialAssertedEvent): void {\n    this.#model.credentialAsserted(params);\n  }\n\n  credentialDeleted(params: Protocol.WebAuthn.CredentialDeletedEvent): void {\n    this.#model.credentialDeleted(params);\n  }\n\n  credentialUpdated(params: Protocol.WebAuthn.CredentialUpdatedEvent): void {\n    this.#model.credentialUpdated(params);\n  }\n}\n\nSDKModel.register(WebAuthnModel, {capabilities: Capability.WEB_AUTHN, autostart: false});\n"],
  "mappings": ";;;;;;;AAAA;;;;AAIA,YAAY,YAAY;AAYxB,IAAM,mBAAmB,oBAAI,IAAG;AAK1B,IAAO,WAAP,cAA6C,qBAAc,cAAqB;EAC3E;EAET,YAAY,QAAc;AACxB,UAAK;AACL,SAAK,UAAU;EACjB;EAEA,SAAM;AACJ,WAAO,KAAK;EACd;;;;;EAMA,MAAM,gBAAgB,SAAgB;EACtC;EAEA,MAAM,aAAa,SAAgB;EACnC;EAEA,MAAM,cAAW;EACjB;;;;;EAMA,MAAM,kBAAe;EACrB;EAEA,UAAO;EACP;EAEA,OAAO,SAAS,YAAiC,kBAAkC;AACjF,QAAI,iBAAiB,SAAS,CAAC,iBAAiB,WAAW;AACzD,YAAM,IAAI,MAAM,2BAA2B,WAAW,IAAI,qCAAqC;IACjG;AACA,qBAAiB,IAAI,YAAY,gBAAgB;EACnD;EAEA,WAAW,mBAAgB;AACzB,WAAO;EACT;;;;ACjEF;;;;;;;;;;;;;;;ACKO,IAAM,sBAAsB;EAClC;IACC,aAAa;MACZ;MACA;MACA;;IAED,QAAQ;;EAET;IACC,aAAa;IACb,QAAQ;;EAET;IACC,QAAQ;;EAET;IACC,aAAa;IACb,QAAQ;;EAET;IACC,YAAY;MACX;MACA;MACA;MACA;MACA;;IAED,QAAQ;;EAET;IACC,YAAY;MACX;MACA;;IAED,QAAQ;;EAET;IACC,YAAY;MACX;MACA;;IAED,QAAQ;;EAET;IACC,QAAQ;;EAET;IACC,QAAQ;;EAET;IACC,YAAY;MACX;MACA;;IAED,QAAQ;;EAET;IACC,YAAY;MACX;MACA;MACA;MACA;;IAED,QAAQ;;EAET;IACC,QAAQ;;EAET;IACC,aAAa;MACZ;;IAED,QAAQ;;EAET;IACC,aAAa;MACZ;;IAED,QAAQ;;EAET;IACC,aAAa;MACZ;;IAED,QAAQ;;EAET;IACC,aAAa;IACb,QAAQ;;EAET;IACC,YAAY;MACX;MACA;MACA;MACA;MACA;;IAED,QAAQ;;EAET;IACC,YAAY;MACX;;IAED,QAAQ;;EAET;IACC,aAAa;IACb,QAAQ;;EAET;IACC,aAAa;MACZ;MACA;MACA;MACA;MACA;;IAED,QAAQ;;EAET;IACC,QAAQ;;EAET;IACC,QAAQ;;EAET;IACC,QAAQ;;EAET;IACC,QAAQ;;EAET;IACC,QAAQ;;EAET;IACC,QAAQ;;EAET;IACC,QAAQ;;EAET;IACC,QAAQ;;EAET;IACC,QAAQ;;EAET;IACC,aAAa;IACb,YAAY;MACX;MACA;;IAED,QAAQ;;EAET;IACC,aAAa;IACb,QAAQ;;EAET;IACC,aAAa;IACb,QAAQ;;EAET;IACC,aAAa;IACb,QAAQ;;EAET;IACC,aAAa;IACb,QAAQ;;EAET;IACC,aAAa;IACb,QAAQ;;EAET;IACC,aAAa;IACb,QAAQ;;EAET;IACC,aAAa;IACb,YAAY;MACX;MACA;MACA;MACA;;IAED,QAAQ;;EAET;IACC,aAAa;IACb,aAAa;MACZ;MACA;;IAED,QAAQ;;EAET;IACC,aAAa;IACb,QAAQ;;EAET;IACC,aAAa;IACb,QAAQ;;EAET;IACC,QAAQ;;EAET;IACC,QAAQ;;EAET;IACC,QAAQ;;EAET;IACC,YAAY;MACX;MACA;MACA;;IAED,QAAQ;;EAET;IACC,aAAa;IACb,YAAY;MACX;MACA;MACA;;IAED,QAAQ;;EAET;IACC,aAAa;IACb,QAAQ;;EAET;IACC,aAAa;IACb,YAAY;MACX;MACA;;IAED,QAAQ;;EAET;IACC,QAAQ;;EAET;IACC,QAAQ;;EAET;IACC,QAAQ;;EAET;IACC,QAAQ;;EAET;IACC,YAAY;MACX;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;;IAED,QAAQ;;EAET;IACC,aAAa;MACZ;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;;IAED,QAAQ;;EAET;IACC,YAAY;MACX;;IAED,QAAQ;;EAET;IACC,YAAY;MACX;MACA;;IAED,QAAQ;;EAET;IACC,aAAa;MACZ;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;;IAED,QAAQ;;EAET;IACC,YAAY;MACX;MACA;MACA;;IAED,QAAQ;;EAET;IACC,QAAQ;;EAET;IACC,YAAY;MACX;MACA;MACA;MACA;;IAED,QAAQ;;EAET;IACC,QAAQ;;EAET;IACC,YAAY;MACX;MACA;MACA;MACA;;IAED,QAAQ;;EAET;IACC,YAAY;MACX;;IAED,QAAQ;;EAET;IACC,YAAY;MACX;;IAED,QAAQ;;EAET;IACC,YAAY;MACX;MACA;;IAED,QAAQ;;EAET;IACC,aAAa;MACZ;MACA;;IAED,QAAQ;;EAET;IACC,QAAQ;;EAET;IACC,QAAQ;;EAET;IACC,YAAY;MACX;MACA;;IAED,QAAQ;;EAET;IACC,YAAY;MACX;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;;IAED,QAAQ;;EAET;IACC,YAAY;MACX;;IAED,QAAQ;;EAET;IACC,YAAY;MACX;MACA;MACA;;IAED,QAAQ;;EAET;IACC,QAAQ;;EAET;IACC,QAAQ;;EAET;IACC,YAAY;MACX;;IAED,QAAQ;;EAET;IACC,YAAY;MACX;;IAED,QAAQ;;EAET;IACC,YAAY;MACX;MACA;;IAED,QAAQ;;EAET;IACC,aAAa;MACZ;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;;IAED,QAAQ;;EAET;IACC,YAAY;MACX;MACA;MACA;;IAED,QAAQ;;EAET;IACC,YAAY;MACX;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;;IAED,QAAQ;;EAET;IACC,YAAY;MACX;MACA;MACA;MACA;;IAED,QAAQ;;EAET;IACC,YAAY;MACX;;IAED,QAAQ;;EAET;IACC,YAAY;MACX;MACA;;IAED,QAAQ;;EAET;IACC,YAAY;MACX;MACA;MACA;;IAED,QAAQ;;EAET;IACC,aAAa;MACZ;MACA;;IAED,QAAQ;;EAET;IACC,QAAQ;;EAET;IACC,QAAQ;;EAET;IACC,QAAQ;;EAET;IACC,YAAY;MACX;MACA;MACA;;IAED,QAAQ;;EAET;IACC,QAAQ;;EAET;IACC,YAAY;MACX;MACA;MACA;;IAED,QAAQ;;EAET;IACC,YAAY;MACX;MACA;MACA;;IAED,QAAQ;;EAET;IACC,aAAa;IACb,YAAY;MACX;MACA;;IAED,QAAQ;;EAET;IACC,YAAY;MACX;;IAED,QAAQ;;EAET;IACC,aAAa;MACZ;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;;IAED,QAAQ;;EAET;IACC,aAAa;MACZ;MACA;MACA;MACA;MACA;MACA;;IAED,QAAQ;;EAET;IACC,aAAa;MACZ;MACA;;IAED,QAAQ;;EAET;IACC,aAAa;MACZ;MACA;MACA;;IAED,QAAQ;;EAET;IACC,QAAQ;;EAET;IACC,QAAQ;;EAET;IACC,QAAQ;;EAET;IACC,aAAa;MACZ;MACA;MACA;;IAED,QAAQ;;EAET;IACC,QAAQ;;EAET;IACC,QAAQ;;EAET;IACC,QAAQ;;EAET;IACC,aAAa;MACZ;MACA;;IAED,QAAQ;;EAET;IACC,aAAa;MACZ;MACA;;IAED,QAAQ;;EAET;IACC,aAAa;MACZ;MACA;MACA;;IAED,QAAQ;;EAET;IACC,YAAY;MACX;;IAED,QAAQ;;EAET;IACC,QAAQ;;EAET;IACC,QAAQ;;EAET;IACC,YAAY;MACX;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;;IAED,QAAQ;;EAET;IACC,YAAY;MACX;MACA;MACA;;IAED,QAAQ;;EAET;IACC,aAAa;IACb,YAAY;MACX;MACA;;IAED,QAAQ;;EAET;IACC,aAAa;MACZ;MACA;MACA;MACA;;IAED,QAAQ;;EAET;IACC,QAAQ;;EAET;IACC,QAAQ;;EAET;IACC,aAAa;MACZ;MACA;MACA;MACA;MACA;;IAED,QAAQ;;EAET;IACC,QAAQ;;EAET;IACC,YAAY;MACX;MACA;MACA;MACA;;IAED,QAAQ;;EAET;IACC,QAAQ;;EAET;IACC,YAAY;MACX;;IAED,QAAQ;;EAET;IACC,YAAY;MACX;;IAED,QAAQ;;EAET;IACC,aAAa;MACZ;MACA;MACA;MACA;MACA;MACA;;IAED,QAAQ;;EAET;IACC,aAAa;MACZ;MACA;;IAED,QAAQ;;EAET;IACC,aAAa;MACZ;MACA;MACA;;IAED,QAAQ;;EAET;IACC,QAAQ;;EAET;IACC,QAAQ;;EAET;IACC,QAAQ;;EAET;IACC,aAAa;MACZ;MACA;MACA;;IAED,QAAQ;;EAET;IACC,QAAQ;;EAET;IACC,QAAQ;;EAET;IACC,QAAQ;;EAET;IACC,aAAa;MACZ;MACA;;IAED,QAAQ;;EAET;IACC,aAAa;MACZ;MACA;;IAED,QAAQ;;EAET;IACC,aAAa;MACZ;MACA;MACA;;IAED,QAAQ;;EAET;IACC,YAAY;MACX;;IAED,QAAQ;;EAET;IACC,YAAY;MACX;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;;IAED,QAAQ;;EAET;IACC,YAAY;MACX;MACA;MACA;;IAED,QAAQ;;EAET;IACC,aAAa;MACZ;MACA;MACA;MACA;;IAED,QAAQ;;EAET;IACC,aAAa;MACZ;MACA;MACA;;IAED,QAAQ;;EAET;IACC,YAAY;MACX;;IAED,QAAQ;;EAET;IACC,YAAY;MACX;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;;IAED,QAAQ;;EAET;IACC,YAAY;MACX;MACA;MACA;;IAED,QAAQ;;EAET;IACC,YAAY;MACX;;IAED,QAAQ;;EAET;IACC,aAAa;IACb,aAAa;MACZ;MACA;;IAED,QAAQ;;EAET;IACC,QAAQ;;EAET;IACC,QAAQ;;EAET;IACC,YAAY;MACX;;IAED,aAAa;MACZ;MACA;MACA;MACA;;IAED,QAAQ;;EAET;IACC,aAAa;MACZ;MACA;MACA;;IAED,QAAQ;;EAET;IACC,YAAY;MACX;;IAED,QAAQ;;EAET;IACC,QAAQ;;EAET;IACC,QAAQ;;EAET;IACC,YAAY;MACX;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;;IAED,QAAQ;;EAET;IACC,YAAY;MACX;MACA;MACA;;IAED,QAAQ;;EAET;IACC,aAAa;MACZ;MACA;MACA;MACA;;IAED,QAAQ;;EAET;IACC,YAAY;MACX;;IAED,QAAQ;;EAET;IACC,YAAY;MACX;MACA;;IAED,QAAQ;;EAET;IACC,YAAY;MACX;;IAED,QAAQ;;EAET;IACC,YAAY;MACX;MACA;;IAED,QAAQ;;EAET;IACC,YAAY;MACX;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;;IAED,QAAQ;;EAET;IACC,YAAY;MACX;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;;IAED,QAAQ;;EAET;IACC,YAAY;MACX;MACA;MACA;MACA;;IAED,QAAQ;;EAET;IACC,YAAY;MACX;MACA;MACA;;IAED,QAAQ;;EAET;IACC,aAAa;IACb,YAAY;MACX;MACA;;IAED,QAAQ;;EAET;IACC,aAAa;IACb,YAAY;MACX;MACA;;IAED,QAAQ;;EAET;IACC,aAAa;IACb,YAAY;MACX;MACA;;IAED,QAAQ;;EAET;IACC,aAAa;IACb,YAAY;MACX;MACA;MACA;MACA;;IAED,QAAQ;;EAET;IACC,YAAY;MACX;MACA;MACA;MACA;MACA;MACA;;IAED,QAAQ;;EAET;IACC,YAAY;MACX;;IAED,QAAQ;;EAET;IACC,YAAY;MACX;MACA;MACA;MACA;MACA;MACA;MACA;MACA;;IAED,QAAQ;;EAET;IACC,aAAa;IACb,YAAY;MACX;MACA;;IAED,QAAQ;;EAET;IACC,aAAa;IACb,YAAY;MACX;;IAED,QAAQ;;EAET;IACC,aAAa;IACb,YAAY;MACX;MACA;MACA;;IAED,QAAQ;;EAET;IACC,aAAa;IACb,YAAY;MACX;MACA;MACA;;IAED,QAAQ;;EAET;IACC,aAAa;IACb,YAAY;MACX;MACA;MACA;;IAED,QAAQ;;EAET;IACC,aAAa;IACb,QAAQ;;EAET;IACC,YAAY;MACX;;IAED,QAAQ;;EAET;IACC,YAAY;MACX;MACA;;IAED,QAAQ;;EAET;IACC,YAAY;MACX;;IAED,QAAQ;;EAET;IACC,YAAY;MACX;;IAED,QAAQ;;EAET;IACC,aAAa;MACZ;MACA;MACA;;IAED,QAAQ;;EAET;IACC,aAAa;IACb,YAAY;MACX;MACA;MACA;;IAED,QAAQ;;EAET;IACC,YAAY;MACX;;IAED,QAAQ;;EAET;IACC,aAAa;IACb,QAAQ;;EAET;IACC,aAAa;IACb,QAAQ;;EAET;IACC,aAAa;MACZ;MACA;MACA;MACA;;IAED,QAAQ;;EAET;IACC,aAAa;IACb,QAAQ;;EAET;IACC,aAAa;IACb,QAAQ;;EAET;IACC,YAAY;MACX;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;;IAED,QAAQ;;EAET;IACC,aAAa;IACb,YAAY;MACX;MACA;MACA;MACA;;IAED,QAAQ;;EAET;IACC,YAAY;MACX;MACA;MACA;;IAED,QAAQ;;EAET;IACC,YAAY;MACX;MACA;;IAED,QAAQ;;EAET;IACC,YAAY;MACX;;IAED,QAAQ;;EAET;IACC,YAAY;MACX;MACA;MACA;;IAED,QAAQ;;EAET;IACC,aAAa;MACZ;MACA;MACA;MACA;;IAED,QAAQ;;EAET;IACC,YAAY;MACX;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;;IAED,QAAQ;;EAET;IACC,QAAQ;;EAET;IACC,YAAY;MACX;;IAED,QAAQ;;EAET;IACC,QAAQ;;EAET;IACC,aAAa;MACZ;MACA;;IAED,QAAQ;;EAET;IACC,YAAY;MACX;;IAED,QAAQ;;EAET;IACC,aAAa;MACZ;MACA;;IAED,QAAQ;;EAET;IACC,YAAY;MACX;;IAED,QAAQ;;EAET;IACC,YAAY;MACX;MACA;MACA;MACA;MACA;;IAED,QAAQ;;EAET;IACC,QAAQ;;EAET;IACC,YAAY;MACX;MACA;MACA;;IAED,QAAQ;;EAET;IACC,YAAY;MACX;MACA;MACA;;IAED,QAAQ;;EAET;IACC,aAAa;MACZ;MACA;;IAED,QAAQ;;EAET;IACC,aAAa;MACZ;MACA;;IAED,QAAQ;;EAET;IACC,YAAY;MACX;MACA;MACA;MACA;MACA;MACA;;IAED,QAAQ;;EAET;IACC,YAAY;MACX;MACA;MACA;MACA;MACA;MACA;;IAED,QAAQ;;EAET;IACC,aAAa;MACZ;MACA;;IAED,QAAQ;;EAET;IACC,QAAQ;;EAET;IACC,QAAQ;;EAET;IACC,aAAa;MACZ;MACA;;IAED,QAAQ;;EAET;IACC,aAAa;MACZ;MACA;;IAED,QAAQ;;EAET;IACC,aAAa;MACZ;MACA;;IAED,QAAQ;;EAET;IACC,aAAa;MACZ;MACA;;IAED,QAAQ;;EAET;IACC,aAAa;MACZ;MACA;MACA;MACA;;IAED,QAAQ;;EAET;IACC,QAAQ;;EAET;IACC,QAAQ;;EAET;IACC,YAAY;MACX;MACA;MACA;MACA;MACA;MACA;;IAED,QAAQ;;EAET;IACC,YAAY;MACX;MACA;MACA;MACA;MACA;MACA;;IAED,QAAQ;;EAET;IACC,aAAa;MACZ;MACA;;IAED,QAAQ;;EAET;IACC,YAAY;MACX;;IAED,aAAa;MACZ;MACA;MACA;MACA;MACA;MACA;MACA;MACA;;IAED,QAAQ;;EAET;IACC,YAAY;MACX;;IAED,QAAQ;;EAET;IACC,YAAY;MACX;;IAED,QAAQ;;EAET;IACC,YAAY;MACX;;IAED,QAAQ;;EAET;IACC,aAAa;IACb,YAAY;MACX;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;;IAED,QAAQ;;EAET;IACC,QAAQ;;EAET;IACC,QAAQ;;EAET;IACC,YAAY;MACX;;IAED,QAAQ;;EAET;IACC,QAAQ;;EAET;IACC,aAAa;IACb,YAAY;MACX;MACA;;IAED,QAAQ;;EAET;IACC,YAAY;MACX;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;;IAED,QAAQ;;EAET;IACC,aAAa;IACb,YAAY;MACX;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;;IAED,QAAQ;;EAET;IACC,aAAa;IACb,YAAY;MACX;MACA;MACA;;IAED,QAAQ;;EAET;IACC,aAAa;IACb,YAAY;MACX;MACA;;IAED,QAAQ;;EAET;IACC,QAAQ;;EAET;IACC,YAAY;MACX;MACA;;IAED,QAAQ;;EAET;IACC,aAAa;IACb,QAAQ;;EAET;IACC,aAAa;IACb,QAAQ;;EAET;IACC,aAAa;IACb,YAAY;MACX;MACA;;IAED,QAAQ;;EAET;IACC,YAAY;MACX;;IAED,QAAQ;;EAET;IACC,aAAa;MACZ;MACA;MACA;;IAED,QAAQ;;EAET;IACC,YAAY;MACX;MACA;MACA;MACA;MACA;;IAED,QAAQ;;EAET;IACC,YAAY;MACX;MACA;MACA;MACA;;IAED,QAAQ;;EAET;IACC,aAAa;MACZ;MACA;;IAED,QAAQ;;EAET;IACC,QAAQ;;EAET;IACC,QAAQ;;EAET;IACC,YAAY;MACX;MACA;MACA;MACA;;IAED,QAAQ;;EAET;IACC,YAAY;MACX;MACA;MACA;MACA;MACA;;IAED,QAAQ;;EAET;IACC,YAAY;MACX;;IAED,QAAQ;;EAET;IACC,QAAQ;;EAET;IACC,aAAa;IACb,aAAa;MACZ;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;;IAED,QAAQ;;EAET;IACC,QAAQ;;EAET;IACC,aAAa;IACb,QAAQ;;EAET;IACC,aAAa;IACb,YAAY;MACX;;IAED,QAAQ;;EAET;IACC,aAAa;IACb,YAAY;MACX;MACA;MACA;;IAED,QAAQ;;EAET;IACC,aAAa;IACb,YAAY;MACX;;IAED,QAAQ;;EAET;IACC,aAAa;IACb,YAAY;MACX;MACA;;IAED,QAAQ;;EAET;IACC,aAAa;IACb,YAAY;MACX;MACA;MACA;;IAED,QAAQ;;EAET;IACC,aAAa;IACb,YAAY;MACX;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;;IAED,QAAQ;;EAET;IACC,aAAa;IACb,YAAY;MACX;MACA;MACA;MACA;MACA;MACA;MACA;;IAED,QAAQ;;EAET;IACC,aAAa;IACb,YAAY;MACX;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;;IAED,QAAQ;;EAET;IACC,aAAa;IACb,YAAY;MACX;MACA;MACA;;IAED,QAAQ;;EAET;IACC,aAAa;IACb,aAAa;MACZ;MACA;MACA;;IAED,QAAQ;;EAET;IACC,aAAa;IACb,YAAY;MACX;MACA;;IAED,QAAQ;;EAET;IACC,aAAa;IACb,YAAY;MACX;MACA;;IAED,QAAQ;;EAET;IACC,aAAa;IACb,YAAY;MACX;MACA;;IAED,QAAQ;;EAET;IACC,aAAa;IACb,aAAa;MACZ;MACA;MACA;MACA;MACA;MACA;MACA;;IAED,QAAQ;;EAET;IACC,aAAa;IACb,YAAY;MACX;;IAED,QAAQ;;EAET;IACC,aAAa;IACb,YAAY;MACX;MACA;MACA;MACA;MACA;MACA;MACA;;IAED,QAAQ;;EAET;IACC,aAAa;IACb,YAAY;MACX;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;;IAED,QAAQ;;EAET;IACC,aAAa;IACb,YAAY;MACX;MACA;MACA;MACA;;IAED,QAAQ;;EAET;IACC,aAAa;IACb,YAAY;MACX;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;;IAED,QAAQ;;EAET;IACC,aAAa;IACb,YAAY;MACX;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;;IAED,QAAQ;;EAET;IACC,aAAa;IACb,YAAY;MACX;MACA;MACA;;IAED,QAAQ;;EAET;IACC,aAAa;IACb,YAAY;MACX;;IAED,QAAQ;;EAET;IACC,aAAa;IACb,YAAY;MACX;MACA;MACA;MACA;;IAED,QAAQ;;EAET;IACC,aAAa;IACb,YAAY;MACX;MACA;MACA;;IAED,QAAQ;;EAET;IACC,aAAa;MACZ;MACA;;IAED,QAAQ;;EAET;IACC,aAAa;IACb,YAAY;MACX;MACA;;IAED,QAAQ;;EAET;IACC,aAAa;MACZ;MACA;MACA;MACA;MACA;MACA;;IAED,QAAQ;;EAET;IACC,aAAa;MACZ;MACA;MACA;MACA;;IAED,QAAQ;;EAET;IACC,YAAY;MACX;MACA;MACA;;IAED,QAAQ;;EAET;IACC,YAAY;MACX;MACA;;IAED,QAAQ;;EAET;IACC,YAAY;MACX;MACA;MACA;;IAED,QAAQ;;EAET;IACC,aAAa;MACZ;MACA;;IAED,QAAQ;;EAET;IACC,YAAY;MACX;;IAED,QAAQ;;EAET;IACC,YAAY;MACX;;IAED,QAAQ;;EAET;IACC,aAAa;MACZ;MACA;MACA;MACA;;IAED,QAAQ;;EAET;IACC,YAAY;MACX;MACA;MACA;MACA;;IAED,QAAQ;;EAET;IACC,YAAY;MACX;MACA;;IAED,QAAQ;;EAET;IACC,aAAa;MACZ;MACA;;IAED,QAAQ;;EAET;IACC,aAAa;MACZ;MACA;;IAED,QAAQ;;EAET;IACC,YAAY;MACX;;IAED,QAAQ;;EAET;IACC,YAAY;MACX;;IAED,QAAQ;;EAET;IACC,aAAa;MACZ;MACA;MACA;;IAED,QAAQ;;EAET;IACC,YAAY;MACX;;IAED,QAAQ;;EAET;IACC,YAAY;MACX;;IAED,QAAQ;;EAET;IACC,YAAY;MACX;;IAED,QAAQ;;EAET;IACC,YAAY;MACX;MACA;MACA;MACA;;IAED,QAAQ;;EAET;IACC,aAAa;IACb,QAAQ;;EAET;IACC,aAAa;IACb,YAAY;MACX;;IAED,QAAQ;;EAET;IACC,aAAa;IACb,YAAY;MACX;MACA;MACA;;IAED,QAAQ;;EAET;IACC,aAAa;IACb,QAAQ;;EAET;IACC,aAAa;IACb,YAAY;MACX;MACA;MACA;MACA;MACA;;IAED,QAAQ;;EAET;IACC,QAAQ;;EAET;IACC,aAAa;IACb,YAAY;MACX;MACA;MACA;;IAED,QAAQ;;EAET;IACC,QAAQ;;EAET;IACC,YAAY;MACX;;IAED,QAAQ;;EAET;IACC,aAAa;MACZ;MACA;MACA;MACA;;IAED,QAAQ;;EAET;IACC,aAAa;MACZ;MACA;;IAED,QAAQ;;EAET;IACC,QAAQ;;EAET;IACC,QAAQ;;EAET;IACC,aAAa;MACZ;MACA;;IAED,QAAQ;;EAET;IACC,QAAQ;;EAET;IACC,QAAQ;;EAET;IACC,aAAa;IACb,YAAY;MACX;MACA;;IAED,QAAQ;;EAET;IACC,aAAa;MACZ;MACA;;IAED,QAAQ;;EAET;IACC,QAAQ;;EAET;IACC,QAAQ;;EAET;IACC,aAAa;IACb,YAAY;MACX;MACA;;IAED,QAAQ;;EAET;IACC,YAAY;MACX;MACA;;IAED,QAAQ;;EAET;IACC,YAAY;MACX;MACA;;IAED,QAAQ;;EAET;IACC,QAAQ;;EAET;IACC,QAAQ;;EAET;IACC,QAAQ;;EAET;IACC,YAAY;MACX;;IAED,QAAQ;;EAET;IACC,aAAa;IACb,YAAY;MACX;;IAED,QAAQ;;EAET;IACC,YAAY;MACX;;IAED,QAAQ;;EAET;IACC,aAAa;IACb,YAAY;MACX;MACA;MACA;MACA;MACA;MACA;;IAED,QAAQ;;EAET;IACC,aAAa;MACZ;MACA;MACA;;IAED,QAAQ;;EAET;IACC,QAAQ;;EAET;IACC,aAAa;IACb,YAAY;MACX;;IAED,QAAQ;;EAET;IACC,aAAa;IACb,aAAa;MACZ;MACA;MACA;;IAED,QAAQ;;EAET;IACC,aAAa;IACb,YAAY;MACX;;IAED,QAAQ;;EAET;IACC,aAAa;IACb,YAAY;MACX;MACA;;IAED,QAAQ;;EAET;IACC,aAAa;IACb,YAAY;MACX;MACA;MACA;MACA;MACA;MACA;MACA;;IAED,QAAQ;;EAET;IACC,aAAa;MACZ;MACA;MACA;MACA;;IAED,QAAQ;;EAET;IACC,aAAa;MACZ;MACA;;IAED,QAAQ;;EAET;IACC,YAAY;MACX;;IAED,QAAQ;;EAET;IACC,YAAY;MACX;;IAED,QAAQ;;EAET;IACC,YAAY;MACX;;IAED,QAAQ;;EAET;IACC,aAAa;MACZ;MACA;;IAED,QAAQ;;EAET;IACC,YAAY;MACX;;IAED,QAAQ;;EAET;IACC,YAAY;MACX;;IAED,QAAQ;;EAET;IACC,YAAY;MACX;;IAED,QAAQ;;EAET;IACC,YAAY;MACX;;IAED,QAAQ;;EAET;IACC,YAAY;MACX;;IAED,QAAQ;;EAET;IACC,aAAa;IACb,aAAa;MACZ;MACA;MACA;;IAED,QAAQ;;EAET;IACC,aAAa;IACb,YAAY;MACX;;IAED,QAAQ;;EAET;IACC,aAAa;IACb,YAAY;MACX;;IAED,QAAQ;;EAET;IACC,aAAa;IACb,YAAY;MACX;;IAED,QAAQ;;EAET;IACC,aAAa;MACZ;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;;IAED,QAAQ;;EAET;IACC,QAAQ;;EAET;IACC,YAAY;MACX;MACA;MACA;MACA;;IAED,QAAQ;;EAET;IACC,QAAQ;;EAET;IACC,YAAY;MACX;MACA;MACA;;IAED,QAAQ;;EAET;IACC,QAAQ;;EAET;IACC,aAAa;MACZ;MACA;;IAED,QAAQ;;EAET;IACC,QAAQ;;EAET;IACC,QAAQ;;EAET;IACC,YAAY;MACX;MACA;;IAED,QAAQ;;EAET;IACC,aAAa;IACb,QAAQ;;EAET;IACC,aAAa;IACb,YAAY;MACX;MACA;;IAED,QAAQ;;EAET;IACC,aAAa;IACb,YAAY;MACX;MACA;;IAED,QAAQ;;EAET;IACC,YAAY;MACX;;IAED,QAAQ;;EAET;IACC,YAAY;MACX;;IAED,QAAQ;;EAET;IACC,YAAY;MACX;;IAED,QAAQ;;EAET;IACC,YAAY;MACX;;IAED,QAAQ;;EAET;IACC,YAAY;MACX;;IAED,QAAQ;;EAET;IACC,QAAQ;;EAET;IACC,QAAQ;;EAET;IACC,QAAQ;;EAET;IACC,QAAQ;;EAET;IACC,YAAY;MACX;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;;IAED,QAAQ;;EAET;IACC,QAAQ;;EAET;IACC,QAAQ;;EAET;IACC,YAAY;MACX;MACA;MACA;MACA;MACA;;IAED,QAAQ;;EAET;IACC,QAAQ;;EAET;IACC,YAAY;MACX;;IAED,QAAQ;;EAET;IACC,aAAa;MACZ;MACA;MACA;MACA;MACA;;IAED,QAAQ;;EAET;IACC,YAAY;MACX;;IAED,QAAQ;;EAET;IACC,QAAQ;;EAET;IACC,YAAY;MACX;;IAED,QAAQ;;EAET;IACC,YAAY;MACX;MACA;;IAED,QAAQ;;EAET;IACC,YAAY;MACX;MACA;;IAED,QAAQ;;EAET;IACC,QAAQ;;EAET;IACC,QAAQ;;EAET;IACC,YAAY;MACX;MACA;;IAED,QAAQ;;EAET;IACC,aAAa;IACb,QAAQ;;EAET;IACC,aAAa;MACZ;MACA;MACA;;IAED,QAAQ;;EAET;IACC,YAAY;MACX;;IAED,QAAQ;;EAET;IACC,QAAQ;;EAET;IACC,YAAY;MACX;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;;IAED,QAAQ;;EAET;IACC,YAAY;MACX;MACA;MACA;;IAED,QAAQ;;EAET;IACC,aAAa;MACZ;MACA;;IAED,QAAQ;;EAET;IACC,aAAa;IACb,YAAY;MACX;MACA;MACA;;IAED,QAAQ;;EAET;IACC,QAAQ;;EAET;IACC,YAAY;MACX;MACA;MACA;;IAED,QAAQ;;EAET;IACC,QAAQ;;EAET;IACC,aAAa;IACb,YAAY;MACX;MACA;MACA;;IAED,QAAQ;;EAET;IACC,YAAY;MACX;MACA;MACA;MACA;MACA;MACA;;IAED,QAAQ;;EAET;IACC,YAAY;MACX;MACA;MACA;MACA;MACA;MACA;;IAED,QAAQ;;EAET;IACC,YAAY;MACX;MACA;;IAED,QAAQ;;EAET;IACC,QAAQ;;EAET;IACC,YAAY;MACX;;IAED,QAAQ;;EAET;IACC,aAAa;MACZ;MACA;;IAED,QAAQ;;EAET;IACC,QAAQ;;EAET;IACC,QAAQ;;EAET;IACC,YAAY;MACX;MACA;MACA;;IAED,QAAQ;;EAET;IACC,YAAY;MACX;MACA;MACA;;IAED,QAAQ;;EAET;IACC,YAAY;MACX;;IAED,QAAQ;;EAET;IACC,QAAQ;;EAET;IACC,aAAa;MACZ;MACA;MACA;MACA;;IAED,QAAQ;;EAET;IACC,aAAa;MACZ;MACA;;IAED,QAAQ;;EAET;IACC,QAAQ;;EAET;IACC,QAAQ;;EAET;IACC,QAAQ;;EAET;IACC,aAAa;MACZ;MACA;;IAED,QAAQ;;EAET;IACC,QAAQ;;EAET;IACC,QAAQ;;EAET;IACC,QAAQ;;EAET;IACC,QAAQ;;EAET;IACC,QAAQ;;EAET;IACC,YAAY;MACX;;IAED,QAAQ;;EAET;IACC,aAAa;MACZ;;IAED,QAAQ;;EAET;IACC,aAAa;MACZ;;IAED,QAAQ;;EAET;IACC,aAAa;MACZ;;IAED,QAAQ;;EAET;IACC,QAAQ;;EAET;IACC,aAAa;IACb,YAAY;MACX;MACA;MACA;MACA;;IAED,QAAQ;;EAET;IACC,YAAY;MACX;;IAED,QAAQ;;EAET;IACC,QAAQ;;EAET;IACC,aAAa;MACZ;MACA;;IAED,QAAQ;;EAET;IACC,aAAa;MACZ;MACA;;IAED,QAAQ;;EAET;IACC,aAAa;MACZ;MACA;;IAED,QAAQ;;EAET;IACC,aAAa;IACb,YAAY;MACX;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;;IAED,QAAQ;;EAET;IACC,YAAY;MACX;MACA;MACA;MACA;MACA;;IAED,QAAQ;;EAET;IACC,YAAY;MACX;MACA;;IAED,QAAQ;;EAET;IACC,YAAY;MACX;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;;IAED,QAAQ;;EAET;IACC,aAAa;MACZ;MACA;;IAED,QAAQ;;EAET;IACC,YAAY;MACX;MACA;MACA;MACA;;IAED,QAAQ;;EAET;IACC,YAAY;MACX;MACA;MACA;MACA;MACA;;IAED,QAAQ;;EAET;IACC,YAAY;MACX;MACA;MACA;;IAED,QAAQ;;EAET;IACC,QAAQ;;EAET;IACC,aAAa;IACb,YAAY;MACX;MACA;;IAED,QAAQ;;EAET;IACC,aAAa;IACb,YAAY;MACX;MACA;;IAED,QAAQ;;EAET;IACC,QAAQ;;EAET;IACC,QAAQ;;EAET;IACC,YAAY;MACX;MACA;MACA;MACA;MACA;MACA;MACA;;IAED,QAAQ;;EAET;IACC,QAAQ;;EAET;IACC,YAAY;MACX;MACA;MACA;MACA;MACA;MACA;;IAED,QAAQ;;EAET;IACC,QAAQ;;EAET;IACC,YAAY;MACX;;IAED,QAAQ;;EAET;IACC,QAAQ;;EAET;IACC,YAAY;MACX;;IAED,QAAQ;;EAET;IACC,aAAa;MACZ;MACA;MACA;;IAED,QAAQ;;EAET;IACC,aAAa;IACb,YAAY;MACX;MACA;MACA;;IAED,QAAQ;;EAET;IACC,YAAY;MACX;;IAED,QAAQ;;EAET;IACC,aAAa;IACb,QAAQ;;EAET;IACC,aAAa;IACb,QAAQ;;EAET;IACC,aAAa;MACZ;MACA;MACA;MACA;;IAED,QAAQ;;EAET;IACC,aAAa;IACb,QAAQ;;EAET;IACC,aAAa;IACb,QAAQ;;EAET;IACC,YAAY;MACX;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;;IAED,QAAQ;;EAET;IACC,aAAa;IACb,YAAY;MACX;MACA;MACA;MACA;;IAED,QAAQ;;EAET;IACC,YAAY;MACX;MACA;MACA;;IAED,QAAQ;;EAET;IACC,aAAa;IACb,YAAY;MACX;MACA;MACA;MACA;;IAED,QAAQ;;EAET;IACC,aAAa;IACb,YAAY;MACX;MACA;;IAED,QAAQ;;EAET;IACC,aAAa;IACb,YAAY;MACX;MACA;;IAED,QAAQ;;EAET;IACC,aAAa;MACZ;MACA;MACA;MACA;MACA;MACA;;IAED,QAAQ;;EAET;IACC,aAAa;MACZ;MACA;;IAED,QAAQ;;EAET;IACC,aAAa;MACZ;MACA;;IAED,QAAQ;;EAET;IACC,aAAa;MACZ;MACA;MACA;MACA;MACA;MACA;MACA;MACA;;IAED,QAAQ;;EAET;IACC,aAAa;MACZ;MACA;;IAED,QAAQ;;EAET;IACC,aAAa;MACZ;MACA;;IAED,QAAQ;;EAET;IACC,YAAY;MACX;;IAED,QAAQ;;EAET;IACC,YAAY;MACX;;IAED,QAAQ;;EAET;IACC,QAAQ;;EAET;IACC,YAAY;MACX;MACA;;IAED,QAAQ;;EAET;IACC,YAAY;MACX;MACA;;IAED,QAAQ;;EAET;IACC,aAAa;MACZ;MACA;MACA;MACA;;IAED,QAAQ;;EAET;IACC,aAAa;MACZ;MACA;;IAED,QAAQ;;EAET;IACC,QAAQ;;EAET;IACC,QAAQ;;EAET;IACC,QAAQ;;EAET;IACC,aAAa;MACZ;MACA;;IAED,QAAQ;;EAET;IACC,QAAQ;;EAET;IACC,QAAQ;;EAET;IACC,QAAQ;;EAET;IACC,QAAQ;;EAET;IACC,QAAQ;;EAET;IACC,QAAQ;;EAET;IACC,aAAa;MACZ;MACA;MACA;MACA;;IAED,QAAQ;;EAET;IACC,aAAa;MACZ;MACA;;IAED,QAAQ;;EAET;IACC,YAAY;MACX;;IAED,QAAQ;;EAET;IACC,YAAY;MACX;;IAED,QAAQ;;EAET;IACC,YAAY;MACX;;IAED,QAAQ;;EAET;IACC,aAAa;MACZ;MACA;;IAED,QAAQ;;EAET;IACC,YAAY;MACX;;IAED,QAAQ;;EAET;IACC,YAAY;MACX;;IAED,QAAQ;;EAET;IACC,YAAY;MACX;;IAED,QAAQ;;EAET;IACC,YAAY;MACX;;IAED,QAAQ;;EAET;IACC,YAAY;MACX;;IAED,QAAQ;;EAET;IACC,YAAY;MACX;MACA;MACA;MACA;;IAED,QAAQ;;EAET;IACC,YAAY;MACX;MACA;;IAED,QAAQ;;EAET;IACC,YAAY;MACX;MACA;MACA;MACA;MACA;MACA;MACA;MACA;;IAED,QAAQ;;EAET;IACC,YAAY;MACX;MACA;;IAED,QAAQ;;EAET;IACC,aAAa;MACZ;MACA;;IAED,QAAQ;;EAET;IACC,QAAQ;;EAET;IACC,QAAQ;;EAET;IACC,aAAa;IACb,YAAY;MACX;;IAED,QAAQ;;EAET;IACC,aAAa;IACb,YAAY;MACX;MACA;MACA;;IAED,QAAQ;;EAET;IACC,aAAa;IACb,YAAY;MACX;MACA;MACA;;IAED,QAAQ;;EAET;IACC,QAAQ;;EAET;IACC,YAAY;MACX;;IAED,QAAQ;;EAET;IACC,YAAY;MACX;;IAED,QAAQ;;EAET;IACC,aAAa;IACb,YAAY;MACX;MACA;MACA;MACA;;IAED,QAAQ;;EAET;IACC,QAAQ;;EAET;IACC,QAAQ;;EAET;IACC,aAAa;IACb,YAAY;MACX;MACA;MACA;MACA;MACA;MACA;;IAED,QAAQ;;EAET;IACC,QAAQ;;EAET;IACC,QAAQ;;EAET;IACC,YAAY;MACX;;IAED,QAAQ;;EAET;IACC,QAAQ;;EAET;IACC,aAAa;IACb,QAAQ;;EAET;IACC,aAAa;IACb,YAAY;MACX;;IAED,QAAQ;;EAET;IACC,aAAa;IACb,QAAQ;;EAET;IACC,aAAa;IACb,YAAY;MACX;MACA;MACA;;IAED,QAAQ;;EAET;IACC,aAAa;IACb,YAAY;MACX;MACA;MACA;;IAED,QAAQ;;EAET;IACC,aAAa;IACb,QAAQ;;EAET;IACC,aAAa;IACb,QAAQ;;EAET;IACC,aAAa;IACb,QAAQ;;EAET;IACC,QAAQ;;EAET;IACC,QAAQ;;EAET;IACC,QAAQ;;EAET;IACC,QAAQ;;EAET;IACC,aAAa;IACb,QAAQ;;EAET;IACC,YAAY;MACX;MACA;;IAED,QAAQ;;EAET;IACC,aAAa;IACb,YAAY;MACX;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;;IAED,QAAQ;;EAET;IACC,aAAa;IACb,YAAY;MACX;MACA;MACA;MACA;MACA;MACA;MACA;MACA;;IAED,QAAQ;;EAET;IACC,aAAa;IACb,YAAY;MACX;MACA;MACA;;IAED,QAAQ;;EAET;IACC,aAAa;IACb,YAAY;MACX;MACA;;IAED,QAAQ;;EAET;IACC,aAAa;MACZ;MACA;;IAED,QAAQ;;EAET;IACC,aAAa;IACb,QAAQ;;EAET;IACC,YAAY;MACX;MACA;MACA;MACA;;IAED,QAAQ;;EAET;IACC,aAAa;IACb,YAAY;MACX;MACA;;IAED,QAAQ;;EAET;IACC,aAAa;MACZ;MACA;MACA;MACA;;IAED,QAAQ;;EAET;IACC,YAAY;MACX;;IAED,QAAQ;;EAET;IACC,YAAY;MACX;MACA;MACA;MACA;MACA;MACA;MACA;;IAED,QAAQ;;EAET;IACC,aAAa;IACb,YAAY;MACX;MACA;;IAED,QAAQ;;EAET;IACC,YAAY;MACX;MACA;MACA;MACA;MACA;;IAED,QAAQ;;EAET;IACC,aAAa;IACb,YAAY;MACX;MACA;;IAED,QAAQ;;EAET;IACC,aAAa;IACb,aAAa;MACZ;MACA;;IAED,QAAQ;;EAET;IACC,aAAa;IACb,YAAY;MACX;;IAED,QAAQ;;EAET;IACC,aAAa;IACb,QAAQ;;EAET;IACC,aAAa;IACb,QAAQ;;EAET;IACC,QAAQ;;EAET;IACC,aAAa;IACb,QAAQ;;EAET;IACC,aAAa;IACb,YAAY;MACX;MACA;MACA;MACA;;IAED,QAAQ;;EAET;IACC,aAAa;IACb,YAAY;MACX;MACA;MACA;;IAED,QAAQ;;EAET;IACC,YAAY;MACX;MACA;;IAED,QAAQ;;EAET;IACC,aAAa;IACb,YAAY;MACX;MACA;MACA;MACA;;IAED,QAAQ;;EAET;IACC,aAAa;IACb,YAAY;MACX;;IAED,QAAQ;;EAET;IACC,QAAQ;;EAET;IACC,aAAa;IACb,YAAY;MACX;MACA;;IAED,QAAQ;;EAET;IACC,aAAa;IACb,aAAa;MACZ;MACA;;IAED,QAAQ;;EAET;IACC,aAAa;IACb,YAAY;MACX;MACA;MACA;MACA;;IAED,QAAQ;;EAET;IACC,aAAa;IACb,YAAY;MACX;MACA;MACA;MACA;MACA;MACA;;IAED,QAAQ;;EAET;IACC,aAAa;IACb,YAAY;MACX;;IAED,QAAQ;;EAET;IACC,aAAa;IACb,YAAY;MACX;MACA;MACA;MACA;MACA;;IAED,QAAQ;;EAET;IACC,aAAa;IACb,aAAa;MACZ;MACA;;IAED,QAAQ;;EAET;IACC,aAAa;IACb,YAAY;MACX;MACA;;IAED,QAAQ;;EAET;IACC,aAAa;IACb,YAAY;MACX;MACA;MACA;MACA;;IAED,QAAQ;;EAET;IACC,QAAQ;;EAET;IACC,aAAa;MACZ;MACA;MACA;MACA;MACA;MACA;;IAED,QAAQ;;EAET;IACC,QAAQ;;EAET;IACC,QAAQ;;EAET;IACC,QAAQ;;EAET;IACC,QAAQ;;EAET;IACC,QAAQ;;EAET;IACC,YAAY;MACX;MACA;;IAED,QAAQ;;EAET;IACC,YAAY;MACX;;IAED,QAAQ;;EAET;IACC,YAAY;MACX;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;;IAED,QAAQ;;EAET;IACC,YAAY;MACX;;IAED,QAAQ;;EAET;IACC,YAAY;MACX;MACA;MACA;MACA;MACA;;IAED,QAAQ;;EAET;IACC,QAAQ;;EAET;IACC,YAAY;MACX;MACA;;IAED,QAAQ;;EAET;IACC,aAAa;MACZ;MACA;MACA;MACA;MACA;;IAED,QAAQ;;EAET;IACC,YAAY;MACX;MACA;;IAED,QAAQ;;EAET;IACC,QAAQ;;EAET;IACC,QAAQ;;EAET;IACC,YAAY;MACX;;IAED,QAAQ;;EAET;IACC,YAAY;MACX;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;;IAED,QAAQ;;EAET;IACC,QAAQ;;EAET;IACC,QAAQ;;EAET;IACC,YAAY;MACX;MACA;MACA;MACA;MACA;MACA;;IAED,QAAQ;;EAET;IACC,QAAQ;;EAET;IACC,aAAa;IACb,YAAY;MACX;MACA;MACA;MACA;MACA;;IAED,QAAQ;;EAET;IACC,YAAY;MACX;MACA;;IAED,QAAQ;;EAET;IACC,YAAY;MACX;MACA;MACA;MACA;MACA;MACA;;IAED,QAAQ;;EAET;IACC,aAAa;MACZ;MACA;MACA;;IAED,QAAQ;;EAET;IACC,QAAQ;;EAET;IACC,QAAQ;;EAET;IACC,QAAQ;;EAET;IACC,YAAY;MACX;;IAED,QAAQ;;EAET;IACC,YAAY;MACX;MACA;MACA;;IAED,QAAQ;;EAET;IACC,YAAY;MACX;MACA;;IAED,QAAQ;;EAET;IACC,aAAa;IACb,YAAY;MACX;MACA;MACA;;IAED,QAAQ;;EAET;IACC,aAAa;IACb,aAAa;MACZ;MACA;;IAED,QAAQ;;EAET;IACC,aAAa;IACb,YAAY;MACX;MACA;MACA;MACA;;IAED,QAAQ;;EAET;IACC,aAAa;IACb,QAAQ;;EAET;IACC,YAAY;MACX;MACA;MACA;MACA;;IAED,QAAQ;;EAET;IACC,YAAY;MACX;;IAED,QAAQ;;EAET;IACC,aAAa;IACb,YAAY;MACX;MACA;MACA;MACA;MACA;;IAED,QAAQ;;EAET;IACC,aAAa;IACb,YAAY;MACX;;IAED,QAAQ;;EAET;IACC,aAAa;IACb,YAAY;MACX;MACA;MACA;MACA;MACA;;IAED,QAAQ;;EAET;IACC,QAAQ;;EAET;IACC,QAAQ;;EAET;IACC,YAAY;MACX;;IAED,QAAQ;;EAET;IACC,QAAQ;;;AAGH,IAAM,0BAA0B;EACtC,qBAAqB;IACpB,UAAU;MACT;MACA;MACA;MACA;MACA;;;EAGF,gCAAgC;IAC/B,UAAU;MACT;MACA;;;EAGF,yBAAyB;IACxB,UAAU;MACT;MACA;;;EAGF,sBAAsB;IACrB,UAAU;MACT;MACA;;;EAGF,oBAAoB;IACnB,UAAU;MACT;MACA;MACA;MACA;;;EAGF,sBAAsB;IACrB,UAAU;MACT;MACA;MACA;MACA;MACA;;;EAGF,sBAAsB;IACrB,UAAU;MACT;;;EAGF,wBAAwB;IACvB,UAAU;MACT;MACA;;;EAGF,yBAAyB;IACxB,UAAU;MACT;MACA;MACA;MACA;;;EAGF,qBAAqB;IACpB,UAAU;MACT;MACA;MACA;;;EAGF,uBAAuB;IACtB,UAAU;MACT;MACA;MACA;;;EAGF,gBAAgB;IACf,UAAU;MACT;MACA;;;EAGF,sBAAsB;IACrB,UAAU;MACT;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;;;EAGF,eAAe;IACd,UAAU;MACT;;;EAGF,gBAAgB;IACf,UAAU;MACT;MACA;;;EAGF,yBAAyB;IACxB,UAAU;MACT;MACA;MACA;;;EAGF,uBAAuB;IACtB,UAAU;MACT;MACA;MACA;MACA;;;EAGF,uBAAuB;IACtB,UAAU;MACT;MACA;MACA;MACA;;;EAGF,6BAA6B;IAC5B,UAAU;MACT;;;EAGF,kBAAkB;IACjB,UAAU;MACT;;;EAGF,wBAAwB;IACvB,UAAU;MACT;MACA;;;EAGF,sBAAsB;IACrB,UAAU;MACT;MACA;;;EAGF,6BAA6B;IAC5B,UAAU;MACT;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;;;EAGF,qBAAqB;IACpB,UAAU;MACT;;;EAGF,cAAc;IACb,UAAU;MACT;MACA;MACA;;;EAGF,gBAAgB;IACf,UAAU;MACT;;;EAGF,mBAAmB;IAClB,UAAU;MACT;;;EAGF,uBAAuB;IACtB,UAAU;MACT;MACA;;;EAGF,yBAAyB;IACxB,UAAU;MACT;MACA;MACA;;;EAGF,yBAAyB;IACxB,UAAU;MACT;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;;;EAGF,mBAAmB;IAClB,UAAU;MACT;MACA;MACA;MACA;;;EAGF,oBAAoB;IACnB,UAAU;MACT;;;EAGF,oBAAoB;IACnB,UAAU;MACT;MACA;;;EAGF,qBAAqB;IACpB,UAAU;MACT;MACA;MACA;;;EAGF,mBAAmB;IAClB,UAAU;MACT;MACA;MACA;;;EAGF,kBAAkB;IACjB,UAAU;MACT;MACA;MACA;;;EAGF,mBAAmB;IAClB,UAAU;MACT;MACA;MACA;;;EAGF,kBAAkB;IACjB,UAAU;MACT;MACA;;;EAGF,cAAc;IACb,UAAU;MACT;;;EAGF,uBAAuB;IACtB,UAAU;MACT;;;EAGF,uBAAuB;IACtB,UAAU;MACT;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;;;EAGF,uBAAuB;IACtB,UAAU;MACT;MACA;MACA;;;EAGF,mBAAmB;IAClB,UAAU;MACT;MACA;;;EAGF,uBAAuB;IACtB,UAAU;MACT;MACA;MACA;MACA;;;EAGF,uBAAuB;IACtB,UAAU;MACT;;;EAGF,sBAAsB;IACrB,UAAU;MACT;;;EAGF,qBAAqB;IACpB,UAAU;MACT;;;EAGF,qBAAqB;IACpB,UAAU;MACT;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;;;EAGF,qBAAqB;IACpB,UAAU;MACT;MACA;MACA;;;EAGF,sBAAsB;IACrB,UAAU;MACT;;;EAGF,sBAAsB;IACrB,UAAU;MACT;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;;;EAGF,sBAAsB;IACrB,UAAU;MACT;MACA;MACA;;;EAGF,gBAAgB;IACf,UAAU;MACT;;;EAGF,gBAAgB;IACf,UAAU;MACT;;;EAGF,oBAAoB;IACnB,UAAU;MACT;;;EAGF,oBAAoB;IACnB,UAAU;MACT;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;;;EAGF,oBAAoB;IACnB,UAAU;MACT;MACA;MACA;;;EAGF,UAAU;IACT,UAAU;MACT;;;EAGF,wBAAwB;IACvB,UAAU;MACT;MACA;;;EAGF,cAAc;IACb,UAAU;MACT;;;EAGF,cAAc;IACb,UAAU;MACT;MACA;;;EAGF,eAAe;IACd,UAAU;MACT;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;;;EAGF,gBAAgB;IACf,UAAU;MACT;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;;;EAGF,gBAAgB;IACf,UAAU;MACT;MACA;MACA;MACA;;;EAGF,sBAAsB;IACrB,UAAU;MACT;MACA;MACA;;;EAGF,gBAAgB;IACf,UAAU;MACT;MACA;;;EAGF,mBAAmB;IAClB,UAAU;MACT;MACA;;;EAGF,eAAe;IACd,UAAU;MACT;MACA;;;EAGF,eAAe;IACd,UAAU;MACT;MACA;MACA;MACA;;;EAGF,SAAS;IACR,UAAU;MACT;MACA;MACA;MACA;MACA;MACA;;;EAGF,QAAQ;IACP,UAAU;MACT;;;EAGF,aAAa;IACZ,UAAU;MACT;MACA;MACA;MACA;MACA;MACA;MACA;MACA;;;EAGF,aAAa;IACZ,UAAU;MACT;MACA;;;EAGF,SAAS;IACR,UAAU;MACT;;;EAGF,uBAAuB;IACtB,UAAU;MACT;MACA;MACA;;;EAGF,+BAA+B;IAC9B,UAAU;MACT;MACA;MACA;;;EAGF,mBAAmB;IAClB,UAAU;MACT;MACA;MACA;;;EAGF,gBAAgB;IACf,UAAU;MACT;;;EAGF,eAAe;IACd,UAAU;MACT;MACA;;;EAGF,cAAc;IACb,UAAU;MACT;;;EAGF,iBAAiB;IAChB,UAAU;MACT;;;EAGF,qBAAqB;IACpB,UAAU;MACT;MACA;MACA;;;EAGF,qBAAqB;IACpB,UAAU;MACT;;;EAGF,qBAAqB;IACpB,UAAU;MACT;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;;;EAGF,gCAAgC;IAC/B,UAAU;MACT;MACA;MACA;MACA;;;EAGF,qBAAqB;IACpB,UAAU;MACT;MACA;MACA;;;EAGF,eAAe;IACd,UAAU;MACT;MACA;;;EAGF,gBAAgB;IACf,UAAU;MACT;;;EAGF,eAAe;IACd,UAAU;MACT;MACA;MACA;;;EAGF,WAAW;IACV,UAAU;MACT;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;;;EAGF,4BAA4B;IAC3B,UAAU;MACT;;;EAGF,2BAA2B;IAC1B,UAAU;MACT;;;EAGF,kBAAkB;IACjB,UAAU;MACT;;;EAGF,kBAAkB;IACjB,UAAU;MACT;MACA;MACA;MACA;MACA;;;EAGF,sBAAsB;IACrB,UAAU;MACT;MACA;MACA;;;EAGF,YAAY;IACX,UAAU;MACT;MACA;MACA;;;EAGF,4BAA4B;IAC3B,UAAU;MACT;MACA;MACA;MACA;MACA;MACA;;;EAGF,6BAA6B;IAC5B,UAAU;MACT;MACA;MACA;MACA;MACA;MACA;;;EAGF,yBAAyB;IACxB,UAAU;MACT;MACA;MACA;MACA;MACA;MACA;;;EAGF,0BAA0B;IACzB,UAAU;MACT;MACA;MACA;MACA;MACA;MACA;;;EAGF,WAAW;IACV,UAAU;MACT;;;EAGF,qBAAqB;IACpB,UAAU;MACT;;;EAGF,iBAAiB;IAChB,UAAU;MACT;;;EAGF,eAAe;IACd,UAAU;MACT;;;EAGF,UAAU;IACT,UAAU;MACT;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;;;EAGF,KAAK;IACJ,UAAU;MACT;;;EAGF,aAAa;IACZ,UAAU;MACT;MACA;;;EAGF,WAAW;IACV,UAAU;MACT;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;;;EAGF,qBAAqB;IACpB,UAAU;MACT;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;;;EAGF,uBAAuB;IACtB,UAAU;MACT;MACA;MACA;;;EAGF,eAAe;IACd,UAAU;MACT;MACA;;;EAGF,gBAAgB;IACf,UAAU;MACT;MACA;;;EAGF,aAAa;IACZ,UAAU;MACT;MACA;;;EAGF,UAAU;IACT,UAAU;MACT;;;EAGF,cAAc;IACb,UAAU;MACT;MACA;MACA;MACA;MACA;;;EAGF,kBAAkB;IACjB,UAAU;MACT;MACA;MACA;MACA;;;EAGF,aAAa;IACZ,UAAU;MACT;MACA;MACA;MACA;;;EAGF,SAAS;IACR,UAAU;MACT;MACA;MACA;MACA;MACA;;;EAGF,eAAe;IACd,UAAU;MACT;;;EAGF,yBAAyB;IACxB,UAAU;MACT;;;EAGF,gBAAgB;IACf,UAAU;MACT;MACA;MACA;;;EAGF,0BAA0B;IACzB,UAAU;MACT;;;EAGF,uBAAuB;IACtB,UAAU;MACT;MACA;;;EAGF,gBAAgB;IACf,UAAU;MACT;MACA;MACA;;;EAGF,aAAa;IACZ,UAAU;MACT;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;;;EAGF,oBAAoB;IACnB,UAAU;MACT;MACA;MACA;MACA;MACA;MACA;MACA;;;EAGF,gBAAgB;IACf,UAAU;MACT;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;;;EAGF,cAAc;IACb,UAAU;MACT;MACA;MACA;;;EAGF,6BAA6B;IAC5B,UAAU;MACT;MACA;;;EAGF,wBAAwB;IACvB,UAAU;MACT;MACA;;;EAGF,yBAAyB;IACxB,UAAU;MACT;MACA;;;EAGF,2BAA2B;IAC1B,UAAU;MACT;;;EAGF,qBAAqB;IACpB,UAAU;MACT;MACA;MACA;MACA;MACA;MACA;MACA;;;EAGF,2BAA2B;IAC1B,UAAU;MACT;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;;;EAGF,sBAAsB;IACrB,UAAU;MACT;MACA;MACA;MACA;;;EAGF,0BAA0B;IACzB,UAAU;MACT;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;;;EAGF,wBAAwB;IACvB,UAAU;MACT;MACA;MA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A;MACA;;;EAGF,mBAAmB;IAClB,UAAU;MACT;MACA;MACA;;;EAGF,wBAAwB;IACvB,UAAU;MACT;MACA;MACA;;;EAGF,iBAAiB;IAChB,UAAU;MACT;MACA;MACA;;;EAGF,cAAc;IACb,UAAU;MACT;MACA;MACA;MACA;MACA;MACA;;;EAGF,cAAc;IACb,UAAU;MACT;MACA;MACA;MACA;MACA;MACA;;;EAGF,WAAW;IACV,UAAU;MACT;MACA;;;EAGF,mBAAmB;IAClB,UAAU;MACT;;;EAGF,yBAAyB;IACxB,UAAU;MACT;MACA;MACA;;;EAGF,yBAAyB;IACxB,UAAU;MACT;MACA;MACA;;;EAGF,uBAAuB;IACtB,UAAU;MACT;;;EAGF,QAAQ;IACP,UAAU;MACT;;;EAGF,eAAe;IACd,UAAU;MACT;MACA;MACA;MACA;;;EAGF,eAAe;IACd,UAAU;MACT;;;EAGF,kBAAkB;IACjB,UAAU;MACT;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;;;EAGF,YAAY;IACX,UAAU;MACT;MACA;MACA;MACA;MACA;;;EAGF,mBAAmB;IAClB,UAAU;MACT;MACA;;;EAGF,iBAAiB;IAChB,UAAU;MACT;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;;;EAGF,0BAA0B;IACzB,UAAU;MACT;MACA;MACA;MACA;;;EAGF,sBAAsB;IACrB,UAAU;MACT;MACA;MACA;MACA;MACA;;;EAGF,uBAAuB;IACtB,UAAU;MACT;MACA;MACA;;;EAGF,sBAAsB;IACrB,UAAU;MACT;MACA;;;EAGF,UAAU;IACT,UAAU;MACT;MACA;;;EAGF,gBAAgB;IACf,UAAU;MACT;MACA;MACA;MACA;MACA;MACA;MACA;;;EAGF,UAAU;IACT,UAAU;MACT;MACA;MACA;MACA;MACA;MACA;;;EAGF,SAAS;IACR,UAAU;MACT;;;EAGF,WAAW;IACV,UAAU;MACT;;;EAGF,kBAAkB;IACjB,UAAU;MACT;MACA;MACA;;;EAGF,kBAAkB;IACjB,UAAU;MACT;;;EAGF,kBAAkB;IACjB,UAAU;MACT;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;;;EAGF,6BAA6B;IAC5B,UAAU;MACT;MACA;MACA;MACA;;;EAGF,kBAAkB;IACjB,UAAU;MACT;MACA;MACA;;;EAGF,cAAc;IACb,UAAU;MACT;MACA;MACA;MACA;;;EAGF,iBAAiB;IAChB,UAAU;MACT;MACA;;;EAGF,iBAAiB;IAChB,UAAU;MACT;MACA;;;EAGF,MAAM;IACL,UAAU;MACT;;;EAGF,MAAM;IACL,UAAU;MACT;;;EAGF,mBAAmB;IAClB,UAAU;MACT;MACA;;;EAGF,yBAAyB;IACxB,UAAU;MACT;MACA;;;EAGF,4BAA4B;IAC3B,UAAU;MACT;;;EAGF,8BAA8B;IAC7B,UAAU;MACT;;;EAGF,yBAAyB;IACxB,UAAU;MACT;;;EAGF,6BAA6B;IAC5B,UAAU;MACT;;;EAGF,+BAA+B;IAC9B,UAAU;MACT;;;EAGF,uBAAuB;IACtB,UAAU;MACT;;;EAGF,wBAAwB;IACvB,UAAU;MACT;;;EAGF,sBAAsB;IACrB,UAAU;MACT;;;EAGF,qBAAqB;IACpB,UAAU;MACT;MACA;MACA;MACA;;;EAGF,oBAAoB;IACnB,UAAU;MACT;MACA;;;EAGF,oBAAoB;IACnB,UAAU;MACT;MACA;MACA;MACA;MACA;MACA;MACA;MACA;;;EAGF,uBAAuB;IACtB,UAAU;MACT;MACA;;;EAGF,mBAAmB;IAClB,UAAU;MACT;;;EAGF,oBAAoB;IACnB,UAAU;MACT;MACA;MACA;;;EAGF,mBAAmB;IAClB,UAAU;MACT;MACA;MACA;;;EAGF,gBAAgB;IACf,UAAU;MACT;;;EAGF,iBAAiB;IAChB,UAAU;MACT;;;EAGF,mBAAmB;IAClB,UAAU;MACT;MACA;MACA;MACA;;;EAGF,SAAS;IACR,UAAU;MACT;MACA;MACA;MACA;MACA;MACA;;;EAGF,cAAc;IACb,UAAU;MACT;;;EAGF,oBAAoB;IACnB,UAAU;MACT;;;EAGF,kBAAkB;IACjB,UAAU;MACT;MACA;MACA;;;EAGF,mBAAmB;IAClB,UAAU;MACT;MACA;MACA;;;EAGF,gBAAgB;IACf,UAAU;MACT;MACA;;;EAGF,cAAc;IACb,UAAU;MACT;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;;;EAGF,mBAAmB;IAClB,UAAU;MACT;MACA;MACA;MACA;MACA;MACA;MACA;MACA;;;EAGF,eAAe;IACd,UAAU;MACT;MACA;MACA;;;EAGF,kBAAkB;IACjB,UAAU;MACT;MACA;;;EAGF,iBAAiB;IAChB,UAAU;MACT;MACA;MACA;MACA;;;EAGF,wBAAwB;IACvB,UAAU;MACT;MACA;;;EAGF,yBAAyB;IACxB,UAAU;MACT;;;EAGF,wBAAwB;IACvB,UAAU;MACT;MACA;MACA;MACA;MACA;MACA;MACA;;;EAGF,4BAA4B;IAC3B,UAAU;MACT;MACA;;;EAGF,yBAAyB;IACxB,UAAU;MACT;MACA;MACA;MACA;MACA;;;EAGF,6BAA6B;IAC5B,UAAU;MACT;MACA;;;EAGF,uBAAuB;IACtB,UAAU;MACT;;;EAGF,gBAAgB;IACf,UAAU;MACT;MACA;MACA;MACA;;;EAGF,oBAAoB;IACnB,UAAU;MACT;MACA;MACA;;;EAGF,iBAAiB;IAChB,UAAU;MACT;MACA;;;EAGF,kBAAkB;IACjB,UAAU;MACT;MACA;MACA;MACA;;;EAGF,eAAe;IACd,UAAU;MACT;;;EAGF,oBAAoB;IACnB,UAAU;MACT;MACA;;;EAGF,qBAAqB;IACpB,UAAU;MACT;MACA;MACA;MACA;;;EAGF,kBAAkB;IACjB,UAAU;MACT;MACA;MACA;MACA;MACA;MACA;;;EAGF,yBAAyB;IACxB,UAAU;MACT;;;EAGF,2BAA2B;IAC1B,UAAU;MACT;MACA;MACA;MACA;MACA;;;EAGF,kBAAkB;IACjB,UAAU;MACT;MACA;;;EAGF,mBAAmB;IAClB,UAAU;MACT;MACA;MACA;MACA;;;EAGF,2BAA2B;IAC1B,UAAU;MACT;MACA;;;EAGF,OAAO;IACN,UAAU;MACT;;;EAGF,gBAAgB;IACf,UAAU;MACT;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;;;EAGF,aAAa;IACZ,UAAU;MACT;;;EAGF,iBAAiB;IAChB,UAAU;MACT;MACA;MACA;MACA;MACA;;;EAGF,mBAAmB;IAClB,UAAU;MACT;MACA;;;EAGF,uBAAuB;IACtB,UAAU;MACT;MACA;;;EAGF,uBAAuB;IACtB,UAAU;MACT;;;EAGF,8BAA8B;IAC7B,UAAU;MACT;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;;;EAGF,gBAAgB;IACf,UAAU;MACT;MACA;MACA;MACA;MACA;MACA;;;EAGF,eAAe;IACd,UAAU;MACT;MACA;MACA;MACA;MACA;;;EAGF,iBAAiB;IAChB,UAAU;MACT;MACA;;;EAGF,kBAAkB;IACjB,UAAU;MACT;MACA;MACA;MACA;MACA;MACA;;;EAGF,yBAAyB;IACxB,UAAU;MACT;;;EAGF,yBAAyB;IACxB,UAAU;MACT;MACA;MACA;;;EAGF,wBAAwB;IACvB,UAAU;MACT;MACA;;;EAGF,cAAc;IACb,UAAU;MACT;MACA;MACA;;;EAGF,wBAAwB;IACvB,UAAU;MACT;MACA;MACA;MACA;;;EAGF,SAAS;IACR,UAAU;MACT;MACA;MACA;MACA;;;EAGF,eAAe;IACd,UAAU;MACT;;;EAGF,cAAc;IACb,UAAU;MACT;MACA;MACA;MACA;MACA;;;EAGF,gBAAgB;IACf,UAAU;MACT;;;EAGF,gBAAgB;IACf,UAAU;MACT;MACA;MACA;MACA;MACA;;;EAGF,WAAW;IACV,UAAU;MACT;;;;AAII,IAAM,sBAAsB,oBAAI,IAAI;EAC1C;IACC;IACA;;EAED;IACC;IACA;;EAED;IACC;IACA;;EAED;IACC;IACA;;EAED;IACC;IACA;;EAED;IACC;IACA;;EAED;IACC;IACA;;EAED;IACC;IACA;;EAED;IACC;IACA;;EAED;IACC;IACA;;EAED;IACC;IACA;;EAED;IACC;IACA;;EAED;IACC;IACA;;EAED;IACC;IACA;;EAED;IACC;IACA;;EAED;IACC;IACA;;EAED;IACC;IACA;;EAED;IACC;IACA;;EAED;IACC;IACA;;EAED;IACC;IACA;;EAED;IACC;IACA;;EAED;IACC;IACA;;EAED;IACC;IACA;;EAED;IACC;IACA;;EAED;IACC;IACA;;EAED;IACC;IACA;;EAED;IACC;IACA;;EAED;IACC;IACA;;EAED;IACC;IACA;;EAED;IACC;IACA;;EAED;IACC;IACA;;EAED;IACC;IACA;;EAED;IACC;IACA;;EAED;IACC;IACA;;EAED;IACC;IACA;;EAED;IACC;IACA;;EAED;IACC;IACA;;EAED;IACC;IACA;;EAED;IACC;IACA;;EAED;IACC;IACA;;EAED;IACC;IACA;;EAED;IACC;IACA;;EAED;IACC;IACA;;EAED;IACC;IACA;;EAED;IACC;IACA;;EAED;IACC;IACA;;EAED;IACC;IACA;;EAED;IACC;IACA;;EAED;IACC;IACA;;EAED;IACC;IACA;;EAED;IACC;IACA;;EAED;IACC;IACA;;EAED;IACC;IACA;;EAED;IACC;IACA;;EAED;IACC;IACA;;EAED;IACC;IACA;;EAED;IACC;IACA;;EAED;IACC;IACA;;EAED;IACC;IACA;;EAED;IACC;IACA;;EAED;IACC;IACA;;EAED;IACC;IACA;;EAED;IACC;IACA;;EAED;IACC;IACA;;EAED;IACC;IACA;;EAED;IACC;IACA;;EAED;IACC;IACA;;EAED;IACC;IACA;;EAED;IACC;IACA;;EAED;IACC;IACA;;EAED;IACC;IACA;;EAED;IACC;IACA;;EAED;IACC;IACA;;EAED;IACC;IACA;;EAED;IACC;IACA;;EAED;IACC;IACA;;EAED;IACC;IACA;;EAED;IACC;IACA;;EAED;IACC;IACA;;EAED;IACC;IACA;;EAED;IACC;IACA;;EAED;IACC;IACA;;EAED;IACC;IACA;;EAED;IACC;IACA;;EAED;IACC;IACA;;EAED;IACC;IACA;;EAED;IACC;IACA;;EAED;IACC;IACA;;EAED;IACC;IACA;;EAED;IACC;IACA;;EAED;IACC;IACA;;EAED;IACC;IACA;;EAED;IACC;IACA;;EAED;IACC;IACA;;EAED;I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MACA;MACA;MACA;MACA;MACA;KACD;;EAEH;IACE;IACA,oBAAI,IAAI;MACN;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;KACD;;EAEH;IACE;IACA,oBAAI,IAAI;MACN;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;KACD;;EAEH;IACE;IACA,oBAAI,IAAI;MACN;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;KACD;;EAEH;IACE;IACA,oBAAI,IAAI;MACN;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;KACD;;EAEH;IACE;IACA,oBAAI,IAAI;MACN;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;KACD;;EAEH;IACE;IACA,oBAAI,IAAI;MACN;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;KACD;;EAEH;IACE;IACA,oBAAI,IAAI;MACN;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;KACD;;EAEH;IACE;IACA,oBAAI,IAAI;MACN;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;KACD;;EAEH,CAAC,sBAAsB,oBAAI,IAAI,CAAC,QAAQ,UAAU,SAAS,OAAO,QAAQ,CAAC,CAAC;EAC5E,CAAC,oBAAoB,oBAAI,IAAI,CAAC,QAAQ,UAAU,SAAS,OAAO,QAAQ,CAAC,CAAC;EAC1E,CAAC,8BAA8B,oBAAI,IAAI,CAAC,gBAAgB,OAAO,CAAC,CAAC;EACjE,CAAC,6BAA6B,oBAAI,IAAI,CAAC,gBAAgB,OAAO,CAAC,CAAC;EAChE,CAAC,+BAA+B,oBAAI,IAAI,CAAC,WAAW,QAAQ,CAAC,CAAC;EAC9D,CAAC,8BAA8B,oBAAI,IAAI,CAAC,UAAU,OAAO,CAAC,CAAC;EAC3D,CAAC,+BAA+B,oBAAI,IAAI,CAAC,UAAU,OAAO,CAAC,CAAC;EAC5D,CAAC,+BAA+B,oBAAI,IAAI,CAA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",
  "names": ["Common", "TextUtils", "Common", "i18n", "Platform", "Common", "Platform", "Root", "Events", "Common", "Platform", "Root", "Common", "Platform", "Common", "Type", "Events", "pattern", "firstTitle", "secondTitle", "Events", "Common", "i18n", "Platform", "Events", "Common", "Platform", "Root", "Events", "TextUtils", "Common", "Host", "Platform", "Root", "Platform", "TextUtils", "Common", "Platform", "Root", "Common", "args", "matching", "declaration", "node", "match", "ASTUtils", "node", "stripComments", "propertyName", "propertyText", "TextUtils", "Platform", "TextUtils", "TextUtils", "TextUtils", "TextUtils", "TextUtils", "Type", "TextUtils", "generatedProperties", "Type", "TextUtils", "Type", "Type", "node", "declaration", "candidate", "inheritedProperty", "registration", "matching", "TextUtils", "Common", "i18n", "Platform", "UIStrings", "str_", "i18nString", "Events", "Common", "Platform", "Common", "Host", "i18n", "Root", "Common", "index", "UIStrings", "str_", "i18nString", "Events", "result", "TextUtils", "Common", "Platform", "Root", "TextUtils", "Formatter", "i18n", "UIStrings", "str_", "i18nString", "contains", "comparePositions", "range", "scope", "columnNumber", "lineNumber", "_a", "Events", "Events", "sourceURLRegex", "Type", "Common", "Events", "Common", "i18n", "Root", "Events", "Common", "i18n", "Root", "Events", "Common", "Host", "Events", "indent", "Platform", "TextUtils", "Common", "i18n", "UIStrings", "str_", "i18nString", "result", "Events", "UIStrings", "str_", "i18nString", "Events", "PauseOnExceptionsState", "Common", "Platform", "Common", "document", "UIStrings", "str_", "i18nString", "Events", "header", "node", "Events", "DOMNode", "ShadowRootTypes", "response", "document", "nodeId", "TextUtils", "Common", "Platform", "Events", "Events", "Common", "Events", "resource", "document", "Events", "i18n", "TextUtils", "Common", "i18n", "UIStrings", "str_", "i18nString", "result", "UIStrings", "str_", "i18nString", "formData", "Events", "WebSocketFrameType", "DirectSocketType", "DirectSocketStatus", "DirectSocketChunkType", "request", "Events", "Common", "Events", "id", "Common", "Host", "i18n", "Common", "Host", "UIStrings", "str_", "i18nString", "TextUtils", "i18n", "UIStrings", "str_", "i18nString", "i18n", "Common", "Host", "ProtocolClient", "Root", "Common", "i18n", "Root", "Common", "target", "executionContexts", "scripts", "resources", "Common", "UIStrings", "str_", "i18nString", "script", "UIStrings", "str_", "i18nString", "Events", "Common", "Host", "i18n", "Platform", "FrontendMessageType", "i18n", "UIStrings", "str_", "i18nString", "Host", "UIStrings", "str_", "i18nString", "Events", "result", "Common", "i18n", "Location", "Common", "Location", "UIStrings", "str_", "i18nString", "i18nLazyString", "result", "CPUThrottlingRates", "CalibrationError", "Common", "Platform", "Events", "breakpoint", "document", "Common", "Platform", "assertNotNullOrUndefined", "Events", "assertNotNullOrUndefined", "document", "Common", "i18n", "UIStrings", "str_", "i18nString", "storageBucket", "Common", "i18n", "UIStrings", "str_", "i18nString", "i18nLazyString", "ServiceWorkerVersion", "Events"]
}
