{"version":3,"file":"JavaScriptFormatter.js","sourceRoot":"","sources":["../../../../../../front_end/entrypoints/formatter_worker/JavaScriptFormatter.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright 2011 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as Acorn from '../../third_party/acorn/acorn.js';\n\nimport {AcornTokenizer, ECMA_VERSION, type TokenOrComment} from './AcornTokenizer.js';\nimport {ESTreeWalker} from './ESTreeWalker.js';\nimport type {FormattedContentBuilder} from './FormattedContentBuilder.js';\n\nexport class JavaScriptFormatter {\n  readonly #builder: FormattedContentBuilder;\n  #tokenizer!: AcornTokenizer;\n  #content!: string;\n  #fromOffset!: number;\n  #lastLineNumber!: number;\n  #toOffset?: number;\n  constructor(builder: FormattedContentBuilder) {\n    this.#builder = builder;\n  }\n\n  format(text: string, _lineEndings: number[], fromOffset: number, toOffset: number): void {\n    this.#fromOffset = fromOffset;\n    this.#toOffset = toOffset;\n    this.#content = text.substring(this.#fromOffset, this.#toOffset);\n    this.#lastLineNumber = 0;\n    const tokens: Array<Acorn.Token|Acorn.Comment> = [];\n    const ast = Acorn.parse(this.#content, {\n      ranges: false,\n      preserveParens: true,\n      allowAwaitOutsideFunction: true,\n      allowImportExportEverywhere: true,\n      ecmaVersion: ECMA_VERSION,\n      allowHashBang: true,\n      onToken: tokens as Acorn.Token[],\n      onComment: tokens as Acorn.Comment[],\n    });\n    this.#tokenizer = new AcornTokenizer(this.#content, tokens);\n    const walker = new ESTreeWalker(this.#beforeVisit.bind(this), this.#afterVisit.bind(this));\n    // @ts-expect-error Technically, the acorn Node type is a subclass of Acorn.ESTree.Node.\n    // However, the acorn package currently exports its type without specifying\n    // this relationship. So while this is allowed on runtime, we can't properly\n    // typecheck it.\n    walker.walk(ast);\n  }\n\n  #push(token: Acorn.Token|Acorn.Comment|null, format: string): void {\n    for (let i = 0; i < format.length; ++i) {\n      if (format[i] === 's') {\n        this.#builder.addSoftSpace();\n      } else if (format[i] === 'S') {\n        this.#builder.addHardSpace();\n      } else if (format[i] === 'n') {\n        this.#builder.addNewLine();\n      } else if (format[i] === '>') {\n        this.#builder.increaseNestingLevel();\n      } else if (format[i] === '<') {\n        this.#builder.decreaseNestingLevel();\n      } else if (format[i] === 't') {\n        if (this.#tokenizer.tokenLineStart() - this.#lastLineNumber > 1) {\n          this.#builder.addNewLine(true);\n        }\n        this.#lastLineNumber = this.#tokenizer.tokenLineEnd();\n        if (token) {\n          this.#builder.addToken(this.#content.substring(token.start, token.end), this.#fromOffset + token.start);\n        }\n      }\n    }\n  }\n\n  #beforeVisit(node: Acorn.ESTree.Node): undefined {\n    if (!node.parent) {\n      return;\n    }\n    if (node.type === 'TemplateLiteral') {\n      this.#builder.setEnforceSpaceBetweenWords(false);\n    }\n    let token;\n    while ((token = this.#tokenizer.peekToken()) && token.start < node.start) {\n      const token = (this.#tokenizer.nextToken() as TokenOrComment);\n      // @ts-expect-error Same reason as above about Acorn types and ESTree types\n      const format = this.#formatToken(node.parent, token);\n      this.#push(token, format);\n    }\n  }\n\n  #afterVisit(node: Acorn.ESTree.Node): void {\n    // ${expressions} within a template literal need space enforced.\n    const restore = this.#builder.setEnforceSpaceBetweenWords(node.type !== 'TemplateElement');\n    let token;\n    while ((token = this.#tokenizer.peekToken()) && token.start < node.end) {\n      const token = (this.#tokenizer.nextToken() as TokenOrComment);\n      const format = this.#formatToken(node, token);\n      this.#push(token, format);\n    }\n    this.#push(null, this.#finishNode(node));\n    this.#builder.setEnforceSpaceBetweenWords(restore || node.type === 'TemplateLiteral');\n  }\n\n  #inForLoopHeader(node: Acorn.ESTree.Node): boolean {\n    const parent = node.parent;\n    if (!parent) {\n      return false;\n    }\n    if (parent.type === 'ForStatement') {\n      const parentNode = (parent as Acorn.ESTree.ForStatement);\n      return node === parentNode.init || node === parentNode.test || node === parentNode.update;\n    }\n    if (parent.type === 'ForInStatement' || parent.type === 'ForOfStatement') {\n      const parentNode = (parent as Acorn.ESTree.ForInStatement | Acorn.ESTree.ForOfStatement);\n      return node === parentNode.left || node === parentNode.right;\n    }\n    return false;\n  }\n\n  #formatToken(node: Acorn.ESTree.Node, tokenOrComment: TokenOrComment): string {\n    const AT = AcornTokenizer;\n    if (AT.lineComment(tokenOrComment)) {\n      return 'tn';\n    }\n    if (AT.blockComment(tokenOrComment)) {\n      return 'tn';\n    }\n    const token = (tokenOrComment as Acorn.Token);\n    const nodeType = node.type;\n    if (nodeType === 'ContinueStatement' || nodeType === 'BreakStatement') {\n      return node.label && AT.keyword(token) ? 'ts' : 't';\n    }\n    if (nodeType === 'Identifier') {\n      return 't';\n    }\n    if (nodeType === 'PrivateIdentifier') {\n      return 't';\n    }\n    if (nodeType === 'ReturnStatement') {\n      if (AT.punctuator(token, ';')) {\n        return 't';\n      }\n      return node.argument ? 'ts' : 't';\n    }\n    if (nodeType === 'AwaitExpression') {\n      if (AT.punctuator(token, ';')) {\n        return 't';\n      }\n      return node.argument ? 'ts' : 't';\n    }\n    if (nodeType === 'Property') {\n      if (AT.punctuator(token, ':')) {\n        return 'ts';\n      }\n      return 't';\n    }\n    if (nodeType === 'ArrayExpression') {\n      if (AT.punctuator(token, ',')) {\n        return 'ts';\n      }\n      return 't';\n    }\n    if (nodeType === 'LabeledStatement') {\n      if (AT.punctuator(token, ':')) {\n        return 'ts';\n      }\n    } else if (\n        nodeType === 'LogicalExpression' || nodeType === 'AssignmentExpression' || nodeType === 'BinaryExpression') {\n      if (AT.punctuator(token) && !AT.punctuator(token, '()')) {\n        return 'sts';\n      }\n    } else if (nodeType === 'ConditionalExpression') {\n      if (AT.punctuator(token, '?:')) {\n        return 'sts';\n      }\n    } else if (nodeType === 'VariableDeclarator') {\n      if (AT.punctuator(token, '=')) {\n        return 'sts';\n      }\n    } else if (nodeType === 'ObjectPattern') {\n      if (node.parent?.type === 'VariableDeclarator' && AT.punctuator(token, '{')) {\n        return 'st';\n      }\n      if (AT.punctuator(token, ',')) {\n        return 'ts';\n      }\n    } else if (nodeType === 'FunctionDeclaration') {\n      if (AT.punctuator(token, ',)')) {\n        return 'ts';\n      }\n    } else if (nodeType === 'FunctionExpression') {\n      if (AT.punctuator(token, ',)')) {\n        return 'ts';\n      }\n      if (AT.keyword(token, 'function')) {\n        return node.id ? 'ts' : 't';\n      }\n    } else if (nodeType === 'ArrowFunctionExpression') {\n      if (AT.punctuator(token, ',)')) {\n        return 'ts';\n      }\n      if (AT.punctuator(token, '(')) {\n        return 'st';\n      }\n      if (AT.arrowIdentifier(token, '=>')) {\n        return 'sts';\n      }\n    } else if (nodeType === 'WithStatement') {\n      if (AT.punctuator(token, ')')) {\n        return node.body?.type === 'BlockStatement' ? 'ts' : 'tn>';\n      }\n    } else if (nodeType === 'SwitchStatement') {\n      if (AT.punctuator(token, '{')) {\n        return 'tn>';\n      }\n      if (AT.punctuator(token, '}')) {\n        return 'n<tn';\n      }\n      if (AT.punctuator(token, ')')) {\n        return 'ts';\n      }\n    } else if (nodeType === 'SwitchCase') {\n      if (AT.keyword(token, 'case')) {\n        return 'n<ts';\n      }\n      if (AT.keyword(token, 'default')) {\n        return 'n<t';\n      }\n      if (AT.punctuator(token, ':')) {\n        return 'tn>';\n      }\n    } else if (nodeType === 'VariableDeclaration') {\n      if (AT.punctuator(token, ',')) {\n        let allVariablesInitialized = true;\n        const declarations = (node.declarations as Acorn.ESTree.Node[]);\n        for (let i = 0; i < declarations.length; ++i) {\n          // @ts-expect-error We are doing a subtype check, without properly checking whether\n          // it exists. We can't fix that, unless we use proper typechecking\n          allVariablesInitialized = allVariablesInitialized && Boolean(declarations[i].init);\n        }\n        return !this.#inForLoopHeader(node) && allVariablesInitialized ? 'nSSts' : 'ts';\n      }\n    } else if (nodeType === 'PropertyDefinition') {\n      if (AT.punctuator(token, '=')) {\n        return 'sts';\n      }\n      if (AT.punctuator(token, ';')) {\n        return 'tn';\n      }\n    } else if (nodeType === 'BlockStatement') {\n      if (AT.punctuator(token, '{')) {\n        return node.body.length ? 'tn>' : 't';\n      }\n      if (AT.punctuator(token, '}')) {\n        return node.body.length ? 'n<t' : 't';\n      }\n    } else if (nodeType === 'CatchClause') {\n      if (AT.punctuator(token, ')')) {\n        return 'ts';\n      }\n    } else if (nodeType === 'ObjectExpression') {\n      if (!node.properties.length) {\n        return 't';\n      }\n      if (AT.punctuator(token, '{')) {\n        return 'tn>';\n      }\n      if (AT.punctuator(token, '}')) {\n        return 'n<t';\n      }\n      if (AT.punctuator(token, ',')) {\n        return 'tn';\n      }\n    } else if (nodeType === 'IfStatement') {\n      if (AT.punctuator(token, ')')) {\n        return node.consequent?.type === 'BlockStatement' ? 'ts' : 'tn>';\n      }\n\n      if (AT.keyword(token, 'else')) {\n        const preFormat = node.consequent?.type === 'BlockStatement' ? 'st' : 'n<t';\n        let postFormat = 'n>';\n        if (node.alternate && (node.alternate.type === 'BlockStatement' || node.alternate.type === 'IfStatement')) {\n          postFormat = 's';\n        }\n        return preFormat + postFormat;\n      }\n    } else if (nodeType === 'CallExpression') {\n      if (AT.punctuator(token, ',')) {\n        return 'ts';\n      }\n    } else if (nodeType === 'SequenceExpression' && AT.punctuator(token, ',')) {\n      return node.parent?.type === 'SwitchCase' ? 'ts' : 'tn';\n    } else if (nodeType === 'ForStatement' || nodeType === 'ForOfStatement' || nodeType === 'ForInStatement') {\n      if (AT.punctuator(token, ';')) {\n        return 'ts';\n      }\n      if (AT.keyword(token, 'in') || AT.identifier(token, 'of')) {\n        return 'sts';\n      }\n\n      if (AT.punctuator(token, ')')) {\n        return node.body?.type === 'BlockStatement' ? 'ts' : 'tn>';\n      }\n    } else if (nodeType === 'WhileStatement') {\n      if (AT.punctuator(token, ')')) {\n        return node.body?.type === 'BlockStatement' ? 'ts' : 'tn>';\n      }\n    } else if (nodeType === 'DoWhileStatement') {\n      const blockBody = node.body?.type === 'BlockStatement';\n      if (AT.keyword(token, 'do')) {\n        return blockBody ? 'ts' : 'tn>';\n      }\n      if (AT.keyword(token, 'while')) {\n        return blockBody ? 'sts' : 'n<ts';\n      }\n      if (AT.punctuator(token, ';')) {\n        return 'tn';\n      }\n    } else if (nodeType === 'ClassBody') {\n      if (AT.punctuator(token, '{')) {\n        return 'stn>';\n      }\n      if (AT.punctuator(token, '}')) {\n        return '<ntn';\n      }\n      return 't';\n    } else if (nodeType === 'YieldExpression') {\n      return 't';\n    } else if (nodeType === 'Super') {\n      return 't';\n    } else if (nodeType === 'ImportExpression') {\n      return 't';\n    } else if (nodeType === 'ExportAllDeclaration') {\n      if (AT.punctuator(token, '*')) {\n        return 'sts';\n      }\n      return 't';\n    } else if (nodeType === 'ExportNamedDeclaration' || nodeType === 'ImportDeclaration') {\n      if (AT.punctuator(token, '{')) {\n        return 'st';\n      }\n      if (AT.punctuator(token, ',')) {\n        return 'ts';\n      }\n      if (AT.punctuator(token, '}')) {\n        return node.source ? 'ts' : 't';\n      }\n      if (AT.punctuator(token, '*')) {\n        return 'sts';\n      }\n      return 't';\n    } else if (nodeType === 'MemberExpression') {\n      if (node.object.type === 'Literal' && typeof (node.object.value) === 'number') {\n        return 'st';\n      }\n      return 't';\n    }\n    return AT.keyword(token) && !AT.keyword(token, 'this') ? 'ts' : 't';\n  }\n\n  #finishNode(node: Acorn.ESTree.Node): string {\n    const nodeType = node.type;\n    if (nodeType === 'WithStatement') {\n      if (node.body && node.body.type !== 'BlockStatement') {\n        return 'n<';\n      }\n    } else if (nodeType === 'VariableDeclaration') {\n      if (!this.#inForLoopHeader(node)) {\n        return 'n';\n      }\n    } else if (nodeType === 'ForStatement' || nodeType === 'ForOfStatement' || nodeType === 'ForInStatement') {\n      if (node.body && node.body.type !== 'BlockStatement') {\n        return 'n<';\n      }\n    } else if (nodeType === 'BlockStatement') {\n      if (node.parent?.type === 'IfStatement') {\n        const parentNode = (node.parent as Acorn.ESTree.IfStatement);\n        if (parentNode.alternate && parentNode.consequent === node) {\n          return '';\n        }\n      }\n      if (node.parent?.type === 'FunctionExpression' && node.parent.parent?.type === 'Property') {\n        return '';\n      }\n      if (node.parent?.type === 'FunctionExpression' && node.parent.parent?.type === 'VariableDeclarator') {\n        return '';\n      }\n      if (node.parent?.type === 'FunctionExpression' && node.parent.parent?.type === 'CallExpression') {\n        return '';\n      }\n      if (node.parent?.type === 'DoWhileStatement') {\n        return '';\n      }\n      if (node.parent?.type === 'TryStatement') {\n        const parentNode = (node.parent as Acorn.ESTree.TryStatement);\n        if (parentNode.block === node) {\n          return 's';\n        }\n      }\n      if (node.parent?.type === 'CatchClause') {\n        const parentNode = (node.parent as Acorn.ESTree.CatchClause);\n        // @ts-expect-error We are doing a subtype check, without properly checking whether\n        // it exists. We can't fix that, unless we use proper typechecking\n        if (parentNode.parent?.finalizer) {\n          return 's';\n        }\n      }\n      return 'n';\n    } else if (nodeType === 'WhileStatement') {\n      if (node.body && node.body.type !== 'BlockStatement') {\n        return 'n<';\n      }\n    } else if (nodeType === 'IfStatement') {\n      if (node.alternate) {\n        if (node.alternate.type !== 'BlockStatement' && node.alternate.type !== 'IfStatement') {\n          return '<';\n        }\n      } else if (node.consequent) {\n        if (node.consequent.type !== 'BlockStatement') {\n          return '<';\n        }\n      }\n    } else if (\n        nodeType === 'BreakStatement' || nodeType === 'ContinueStatement' || nodeType === 'ThrowStatement' ||\n        nodeType === 'ReturnStatement' || nodeType === 'ExpressionStatement') {\n      return 'n';\n    } else if (\n        nodeType === 'ImportDeclaration' || nodeType === 'ExportAllDeclaration' ||\n        nodeType === 'ExportDefaultDeclaration' || nodeType === 'ExportNamedDeclaration') {\n      return 'n';\n    }\n    return '';\n  }\n}\n"]}