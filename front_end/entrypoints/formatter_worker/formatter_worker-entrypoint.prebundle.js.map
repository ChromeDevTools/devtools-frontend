{"version":3,"file":"formatter_worker-entrypoint.prebundle.js","sourceRoot":"","sources":["formatter_worker-entrypoint.prebundle.ts"],"names":[],"mappings":"AAAA,sCAAsC;AACtC,yEAAyE;AACzE,6BAA6B;AAE7B,OAAO,KAAK,QAAQ,MAAM,iCAAiC,CAAC;AAE5D,OAAO,KAAK,eAAe,MAAM,uBAAuB,CAAC;AAGzD,QAAQ,CAAC,WAAW,CAAC,YAAY,CAAC,WAAW,CAAC,SAAS,GAAG,UAAS,KAAK;IACtE,MAAM,MAAM,GAAqB,KAAK,CAAC,IAAI,CAAC,MAAM,CAAC;IACnD,MAAM,MAAM,GAMR,KAAK,CAAC,IAAI,CAAC,MAAM,CAAC;IACtB,IAAI,CAAC,MAAM,EAAE,CAAC;QACZ,OAAO;IACT,CAAC;IAED,QAAQ,MAAM,EAAE,CAAC;QACf;YACE,QAAQ,CAAC,WAAW,CAAC,YAAY,CAAC,WAAW,CAAC,WAAW,CACrD,eAAe,CAAC,eAAe,CAAC,MAAM,CAAC,MAAM,CAAC,QAAQ,EAAE,MAAM,CAAC,OAAO,EAAE,MAAM,CAAC,YAAY,CAAC,CAAC,CAAC;YAClG,MAAM;QACR;YACE,eAAe,CAAC,aAAa,CAAC,QAAQ,CAAC,MAAM,CAAC,OAAO,EAAE,IAAI,CAAC,WAAW,CAAC,CAAC;YACzE,MAAM;QACR,wEAA2C,CAAC,CAAC,CAAC;YAC5C,QAAQ,CAAC,WAAW,CAAC,YAAY,CAAC,WAAW,CAAC,WAAW,CACrD,eAAe,CAAC,UAAU,CAAC,oBAAoB,CAAC,MAAM,CAAC,OAAO,EAAE,MAAM,CAAC,OAAO,CAAC,CAAC,CAAC;YACrF,MAAM;QACR,CAAC;QACD,uEAA2C,CAAC,CAAC,CAAC;YAC5C,QAAQ,CAAC,WAAW,CAAC,YAAY,CAAC,WAAW,CAAC,WAAW,CACrD,eAAe,CAAC,WAAW,CAAC,WAAW,CAAC,MAAM,CAAC,OAAO,EAAE,MAAM,CAAC,UAAU,CAAC,EAAE,MAAM,EAAE,CAAC,CAAC;YAC1F,MAAM;QACR,CAAC;QACD;YACE,QAAQ,CAAC,WAAW,CAAC,MAAM,EAAE,0BAA0B,MAAM,EAAE,CAAC,CAAC;IACrE,CAAC;AACH,CAAC,CAAC;AAEF,QAAQ,CAAC,WAAW,CAAC,YAAY,CAAC,WAAW,CAAC,WAAW,CAAC,aAAa,CAAC,CAAC","sourcesContent":["// Copyright 2019 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as Platform from '../../core/platform/platform.js';\n\nimport * as FormatterWorker from './formatter_worker.js';\nimport {FormatterActions} from './FormatterActions.js';\n\nPlatform.HostRuntime.HOST_RUNTIME.workerScope.onmessage = function(event): void {\n  const method: FormatterActions = event.data.method;\n  const params: {\n    indentString: string,\n    content: string,\n    mimeType: string,\n    mapping: Map<string, string|null>,\n    sourceType: 'module'|'script',\n  } = event.data.params;\n  if (!method) {\n    return;\n  }\n\n  switch (method) {\n    case FormatterActions.FORMAT:\n      Platform.HostRuntime.HOST_RUNTIME.workerScope.postMessage(\n          FormatterWorker.FormatterWorker.format(params.mimeType, params.content, params.indentString));\n      break;\n    case FormatterActions.PARSE_CSS:\n      FormatterWorker.CSSRuleParser.parseCSS(params.content, self.postMessage);\n      break;\n    case FormatterActions.JAVASCRIPT_SUBSTITUTE: {\n      Platform.HostRuntime.HOST_RUNTIME.workerScope.postMessage(\n          FormatterWorker.Substitute.substituteExpression(params.content, params.mapping));\n      break;\n    }\n    case FormatterActions.JAVASCRIPT_SCOPE_TREE: {\n      Platform.HostRuntime.HOST_RUNTIME.workerScope.postMessage(\n          FormatterWorker.ScopeParser.parseScopes(params.content, params.sourceType)?.export());\n      break;\n    }\n    default:\n      Platform.assertNever(method, `Unsupport method name: ${method}`);\n  }\n};\n\nPlatform.HostRuntime.HOST_RUNTIME.workerScope.postMessage('workerReady');\n"]}