{"version":3,"file":"MainImpl.js","sourceRoot":"","sources":["../../../../../../front_end/entrypoints/main/MainImpl.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright 2021 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n/* eslint-disable @devtools/no-imperative-dom-api */\n/* eslint-disable @devtools/no-lit-render-outside-of-view */\n\n/*\n * Copyright (C) 2006, 2007, 2008 Apple Inc.  All rights reserved.\n * Copyright (C) 2007 Matt Lilek (pewtermoose@gmail.com).\n * Copyright (C) 2009 Joseph Pecoraro\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions\n * are met:\n *\n * 1.  Redistributions of source code must retain the above copyright\n *     notice, this list of conditions and the following disclaimer.\n * 2.  Redistributions in binary form must reproduce the above copyright\n *     notice, this list of conditions and the following disclaimer in the\n *     documentation and/or other materials provided with the distribution.\n * 3.  Neither the name of Apple Computer, Inc. (\"Apple\") nor the names of\n *     its contributors may be used to endorse or promote products derived\n *     from this software without specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY APPLE AND ITS CONTRIBUTORS \"AS IS\" AND ANY\n * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL APPLE OR ITS CONTRIBUTORS BE LIABLE FOR ANY\n * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF\n * THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\nimport * as Common from '../../core/common/common.js';\nimport * as Host from '../../core/host/host.js';\nimport * as i18n from '../../core/i18n/i18n.js';\nimport * as Platform from '../../core/platform/platform.js';\nimport * as ProtocolClient from '../../core/protocol_client/protocol_client.js';\nimport * as Root from '../../core/root/root.js';\nimport * as SDK from '../../core/sdk/sdk.js';\nimport * as Foundation from '../../foundation/foundation.js';\nimport * as AiAssistanceModel from '../../models/ai_assistance/ai_assistance.js';\nimport * as AutofillManager from '../../models/autofill_manager/autofill_manager.js';\nimport * as Badges from '../../models/badges/badges.js';\nimport * as Bindings from '../../models/bindings/bindings.js';\nimport * as Breakpoints from '../../models/breakpoints/breakpoints.js';\nimport * as CrUXManager from '../../models/crux-manager/crux-manager.js';\nimport * as IssuesManager from '../../models/issues_manager/issues_manager.js';\nimport * as LiveMetrics from '../../models/live-metrics/live-metrics.js';\nimport * as Logs from '../../models/logs/logs.js';\nimport * as Persistence from '../../models/persistence/persistence.js';\nimport * as ProjectSettings from '../../models/project_settings/project_settings.js';\nimport * as Workspace from '../../models/workspace/workspace.js';\nimport * as PanelCommon from '../../panels/common/common.js';\nimport * as Snippets from '../../panels/snippets/snippets.js';\nimport * as Buttons from '../../ui/components/buttons/buttons.js';\nimport * as Snackbar from '../../ui/components/snackbars/snackbars.js';\nimport * as Components from '../../ui/legacy/components/utils/utils.js';\nimport * as UI from '../../ui/legacy/legacy.js';\nimport * as ThemeSupport from '../../ui/legacy/theme_support/theme_support.js';\nimport {html, render} from '../../ui/lit/lit.js';\nimport * as VisualLogging from '../../ui/visual_logging/visual_logging.js';\n\nimport {ExecutionContextSelector} from './ExecutionContextSelector.js';\n\nconst UIStrings = {\n  /**\n   * @description Title of item in main\n   */\n  customizeAndControlDevtools: 'Customize and control DevTools',\n  /**\n   * @description Title element text content in Main\n   */\n  dockSide: 'Dock side',\n  /**\n   * @description Title element title in Main\n   * @example {Ctrl+Shift+D} PH1\n   */\n  placementOfDevtoolsRelativeToThe: 'Placement of DevTools relative to the page. ({PH1} to restore last position)',\n  /**\n   * @description Text to undock the DevTools\n   */\n  undockIntoSeparateWindow: 'Undock into separate window',\n  /**\n   * @description Text to dock the DevTools to the bottom of the browser tab\n   */\n  dockToBottom: 'Dock to bottom',\n  /**\n   * @description Text to dock the DevTools to the right of the browser tab\n   */\n  dockToRight: 'Dock to right',\n  /**\n   * @description Text to dock the DevTools to the left of the browser tab\n   */\n  dockToLeft: 'Dock to left',\n  /**\n   * @description Text in Main\n   */\n  focusDebuggee: 'Focus page',\n  /**\n   * @description Text in Main\n   */\n  hideConsoleDrawer: 'Hide console drawer',\n  /**\n   * @description Text in Main\n   */\n  showConsoleDrawer: 'Show console drawer',\n  /**\n   * @description A context menu item in the Main\n   */\n  moreTools: 'More tools',\n  /**\n   * @description Text for the viewing the help options\n   */\n  help: 'Help',\n  /**\n   * @description Text describing how to navigate the dock side menu\n   */\n  dockSideNavigation: 'Use left and right arrow keys to navigate the options',\n  /**\n   * @description Notification shown to the user whenever DevTools receives an external request.\n   */\n  externalRequestReceived: '`DevTools` received an external request',\n} as const;\nconst str_ = i18n.i18n.registerUIStrings('entrypoints/main/MainImpl.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\n\nlet loadedPanelCommonModule: typeof PanelCommon|undefined;\nexport class MainImpl {\n  #readyForTestPromise = Promise.withResolvers<void>();\n  #veStartPromise!: Promise<void>;\n  #universe!: Foundation.Universe.Universe;\n\n  constructor() {\n    MainImpl.instanceForTest = this;\n    void this.#loaded();\n  }\n\n  static time(label: string): void {\n    if (Host.InspectorFrontendHost.isUnderTest()) {\n      return;\n    }\n    console.time(label);\n  }\n\n  static timeEnd(label: string): void {\n    if (Host.InspectorFrontendHost.isUnderTest()) {\n      return;\n    }\n    console.timeEnd(label);\n  }\n\n  async #loaded(): Promise<void> {\n    console.timeStamp('Main._loaded');\n    Root.Runtime.Runtime.setPlatform(Host.Platform.platform());\n    const [config, prefs] = await Promise.all([\n      new Promise<Root.Runtime.HostConfig>(resolve => {\n        Host.InspectorFrontendHost.InspectorFrontendHostInstance.getHostConfig(resolve);\n      }),\n      new Promise<Record<string, string>>(\n          resolve => Host.InspectorFrontendHost.InspectorFrontendHostInstance.getPreferences(resolve)),\n    ]);\n\n    console.timeStamp('Main._gotPreferences');\n    this.#initializeGlobalsForLayoutTests();\n    Object.assign(Root.Runtime.hostConfig, config);\n\n    const creationOptions: Foundation.Universe.CreationOptions = {\n      settingsCreationOptions: {\n        ...this.createSettingsStorage(prefs),\n        settingRegistrations: Common.SettingRegistration.getRegisteredSettings(),\n        logSettingAccess: VisualLogging.logSettingAccess,\n        runSettingsMigration: !Host.InspectorFrontendHost.isUnderTest(),\n      },\n    };\n    this.#universe = new Foundation.Universe.Universe(creationOptions);\n    Root.DevToolsContext.setGlobalInstance(this.#universe.context);\n\n    await this.requestAndRegisterLocaleData();\n\n    Host.userMetrics.syncSetting(Common.Settings.Settings.instance().moduleSetting<boolean>('sync-preferences').get());\n    const veLogging = config.devToolsVeLogging;\n\n    // Used by e2e to put VE Logs into \"test mode\".\n    const veLogsTestMode = Common.Settings.Settings.instance().createSetting('veLogsTestMode', false).get();\n\n    if (veLogging?.enabled) {\n      // Note: as of https://crrev.com/c/6734500 landing, veLogging.testing is hard-coded to false.\n      // But the e2e tests (test/conductor/frontend_tab.ts) use this to enable this flag for e2e tests.\n      // TODO(crbug.com/432411398): remove the host config for VE logs + find a better way to set this up in e2e tests.\n      if (veLogging?.testing || veLogsTestMode) {\n        VisualLogging.setVeDebugLoggingEnabled(true, VisualLogging.DebugLoggingFormat.TEST);\n        const options = {\n          processingThrottler: new Common.Throttler.Throttler(0),\n          keyboardLogThrottler: new Common.Throttler.Throttler(10),\n          hoverLogThrottler: new Common.Throttler.Throttler(50),\n          dragLogThrottler: new Common.Throttler.Throttler(50),\n          clickLogThrottler: new Common.Throttler.Throttler(10),\n          resizeLogThrottler: new Common.Throttler.Throttler(10),\n        };\n        this.#veStartPromise = VisualLogging.startLogging(options);\n      } else {\n        this.#veStartPromise = VisualLogging.startLogging();\n      }\n    }\n\n    void this.#createAppUI();\n  }\n\n  #initializeGlobalsForLayoutTests(): void {\n    // @ts-expect-error e2e test global\n    self.Extensions ||= {};\n    // @ts-expect-error e2e test global\n    self.Host ||= {};\n    // @ts-expect-error e2e test global\n    self.Host.userMetrics ||= Host.userMetrics;\n    // @ts-expect-error e2e test global\n    self.Host.UserMetrics ||= Host.UserMetrics;\n    // @ts-expect-error e2e test global\n    self.ProtocolClient ||= {};\n    // @ts-expect-error e2e test global\n    self.ProtocolClient.test ||= ProtocolClient.InspectorBackend.test;\n  }\n\n  async requestAndRegisterLocaleData(): Promise<void> {\n    const settingLanguage = Common.Settings.Settings.instance().moduleSetting<string>('language').get();\n    const devToolsLocale = i18n.DevToolsLocale.DevToolsLocale.instance({\n      create: true,\n      data: {\n        navigatorLanguage: navigator.language,\n        settingLanguage,\n        lookupClosestDevToolsLocale: i18n.i18n.lookupClosestSupportedDevToolsLocale,\n      },\n    });\n    // Record the intended locale, regardless whether we are able to fetch it or not.\n    Host.userMetrics.language(devToolsLocale.locale);\n\n    if (devToolsLocale.locale !== 'en-US') {\n      // Always load en-US locale data as a fallback. This is important, newly added\n      // strings won't have a translation. If fetching en-US.json fails, something\n      // is seriously wrong and the exception should bubble up.\n      await i18n.i18n.fetchAndRegisterLocaleData('en-US');\n    }\n\n    try {\n      await i18n.i18n.fetchAndRegisterLocaleData(devToolsLocale.locale);\n    } catch (error) {\n      console.warn(\n          `Unable to fetch & register locale data for '${devToolsLocale.locale}', falling back to 'en-US'. Cause: `,\n          error);\n      // Loading the actual locale data failed, tell DevTools to use 'en-US'.\n      devToolsLocale.forceFallbackLocale();\n    }\n  }\n\n  createSettingsStorage(prefs: Record<string, string>): {\n    syncedStorage: Common.Settings.SettingsStorage,\n    globalStorage: Common.Settings.SettingsStorage,\n    localStorage: Common.Settings.SettingsStorage,\n  } {\n    this.#initializeExperiments();\n    let storagePrefix = '';\n    if (Host.Platform.isCustomDevtoolsFrontend()) {\n      storagePrefix = '__custom__';\n    } else if (\n        !Root.Runtime.Runtime.queryParam('can_dock') && Boolean(Root.Runtime.Runtime.queryParam('debugFrontend')) &&\n        !Host.InspectorFrontendHost.isUnderTest()) {\n      storagePrefix = '__bundled__';\n    }\n\n    let localStorage;\n    if (!Host.InspectorFrontendHost.isUnderTest() && window.localStorage) {\n      const localbackingStore: Common.Settings.SettingsBackingStore = {\n        ...Common.Settings.NOOP_STORAGE,\n        clear: () => window.localStorage.clear(),\n      };\n      localStorage = new Common.Settings.SettingsStorage(window.localStorage, localbackingStore, storagePrefix);\n    } else {\n      localStorage = new Common.Settings.SettingsStorage({}, Common.Settings.NOOP_STORAGE, storagePrefix);\n    }\n\n    const hostUnsyncedStorage: Common.Settings.SettingsBackingStore = {\n      register: (name: string) =>\n          Host.InspectorFrontendHost.InspectorFrontendHostInstance.registerPreference(name, {synced: false}),\n      set: Host.InspectorFrontendHost.InspectorFrontendHostInstance.setPreference,\n      get: (name: string) => {\n        return new Promise(resolve => {\n          Host.InspectorFrontendHost.InspectorFrontendHostInstance.getPreference(name, resolve);\n        });\n      },\n      remove: Host.InspectorFrontendHost.InspectorFrontendHostInstance.removePreference,\n      clear: Host.InspectorFrontendHost.InspectorFrontendHostInstance.clearPreferences,\n    };\n    const hostSyncedStorage: Common.Settings.SettingsBackingStore = {\n      ...hostUnsyncedStorage,\n      register: (name: string) =>\n          Host.InspectorFrontendHost.InspectorFrontendHostInstance.registerPreference(name, {synced: true}),\n    };\n    // `prefs` is retrieved via `getPreferences` host binding and contains both synced and unsynced settings.\n    // As such, we use `prefs` to initialize both the synced and the global storage. This is fine as an individual\n    // setting can't change storage buckets during a single DevTools session.\n    const syncedStorage = new Common.Settings.SettingsStorage(prefs, hostSyncedStorage, storagePrefix);\n    const globalStorage = new Common.Settings.SettingsStorage(prefs, hostUnsyncedStorage, storagePrefix);\n\n    return {syncedStorage, globalStorage, localStorage};\n  }\n\n  #initializeExperiments(): void {\n    Root.Runtime.experiments.register('capture-node-creation-stacks', 'Capture node creation stacks');\n    Root.Runtime.experiments.register('live-heap-profile', 'Live heap profile', true);\n    Root.Runtime.experiments.register(\n        'protocol-monitor', 'Protocol Monitor', undefined,\n        'https://developer.chrome.com/blog/new-in-devtools-92/#protocol-monitor');\n    Root.Runtime.experiments.register('sampling-heap-profiler-timeline', 'Sampling heap profiler timeline', true);\n    Root.Runtime.experiments.register(\n        'show-option-tp-expose-internals-in-heap-snapshot', 'Show option to expose internals in heap snapshots');\n\n    // Timeline\n    Root.Runtime.experiments.register(\n        'timeline-invalidation-tracking', 'Performance panel: invalidation tracking', true);\n    Root.Runtime.experiments.register('timeline-show-all-events', 'Performance panel: show all events', true);\n    Root.Runtime.experiments.register(\n        'timeline-v8-runtime-call-stats', 'Performance panel: V8 runtime call stats', true);\n    Root.Runtime.experiments.register(\n        Root.Runtime.ExperimentName.TIMELINE_DEBUG_MODE,\n        'Performance panel: Enable debug mode (trace event details, etc)', true);\n\n    // Debugging\n    Root.Runtime.experiments.register('instrumentation-breakpoints', 'Enable instrumentation breakpoints', true);\n    Root.Runtime.experiments.register('use-source-map-scopes', 'Use scope information from source maps', true);\n\n    // Advanced Perceptual Contrast Algorithm.\n    Root.Runtime.experiments.register(\n        'apca',\n        'Enable new Advanced Perceptual Contrast Algorithm (APCA) replacing previous contrast ratio and AA/AAA guidelines',\n        undefined, 'https://developer.chrome.com/blog/new-in-devtools-89/#apca');\n\n    // Full Accessibility Tree\n    Root.Runtime.experiments.register(\n        'full-accessibility-tree', 'Enable full accessibility tree view in the Elements panel', undefined,\n        'https://developer.chrome.com/blog/new-in-devtools-90/#accessibility-tree',\n        'https://g.co/devtools/a11y-tree-feedback');\n\n    // Font Editor\n    Root.Runtime.experiments.register(\n        'font-editor', 'Enable new font editor within the Styles tab', undefined,\n        'https://developer.chrome.com/blog/new-in-devtools-89/#font');\n\n    // Contrast issues reported via the Issues panel.\n    Root.Runtime.experiments.register(\n        'contrast-issues', 'Enable automatic contrast issue reporting via the Issues panel', undefined,\n        'https://developer.chrome.com/blog/new-in-devtools-90/#low-contrast');\n\n    // New cookie features.\n    Root.Runtime.experiments.register('experimental-cookie-features', 'Enable experimental cookie features');\n\n    // Change grouping of sources panel to use Authored/Deployed trees\n    Root.Runtime.experiments.register(\n        Root.Runtime.ExperimentName.AUTHORED_DEPLOYED_GROUPING, 'Group sources into authored and deployed trees',\n        undefined, 'https://goo.gle/authored-deployed', 'https://goo.gle/authored-deployed-feedback');\n\n    // Hide third party code (as determined by ignore lists or source maps)\n    Root.Runtime.experiments.register(\n        Root.Runtime.ExperimentName.JUST_MY_CODE, 'Hide ignore-listed code in Sources tree view');\n\n    Root.Runtime.experiments.register(\n        Root.Runtime.ExperimentName.TIMELINE_SHOW_POST_MESSAGE_EVENTS,\n        'Performance panel: show postMessage dispatch and handling flows',\n    );\n\n    Root.Runtime.experiments.enableExperimentsByDefault([\n      Root.Runtime.ExperimentName.FULL_ACCESSIBILITY_TREE,\n      ...(Root.Runtime.Runtime.queryParam('isChromeForTesting') ? ['protocol-monitor'] : []),\n    ]);\n\n    Root.Runtime.experiments.cleanUpStaleExperiments();\n    const enabledExperiments = Root.Runtime.Runtime.queryParam('enabledExperiments');\n    if (enabledExperiments) {\n      Root.Runtime.experiments.setServerEnabledExperiments(enabledExperiments.split(';'));\n    }\n    Root.Runtime.experiments.enableExperimentsTransiently([]);\n\n    if (Host.InspectorFrontendHost.isUnderTest()) {\n      const testParam = Root.Runtime.Runtime.queryParam('test');\n      if (testParam?.includes('live-line-level-heap-profile.js')) {\n        Root.Runtime.experiments.enableForTest('live-heap-profile');\n      }\n    }\n\n    for (const experiment of Root.Runtime.experiments.allConfigurableExperiments()) {\n      if (experiment.isEnabled()) {\n        Host.userMetrics.experimentEnabledAtLaunch(experiment.name);\n      } else {\n        Host.userMetrics.experimentDisabledAtLaunch(experiment.name);\n      }\n    }\n  }\n  async #createAppUI(): Promise<void> {\n    MainImpl.time('Main._createAppUI');\n\n    // Request filesystems early, we won't create connections until callback is fired. Things will happen in parallel.\n    const isolatedFileSystemManager = Persistence.IsolatedFileSystemManager.IsolatedFileSystemManager.instance();\n    isolatedFileSystemManager.addEventListener(\n        Persistence.IsolatedFileSystemManager.Events.FileSystemError,\n        event => Snackbar.Snackbar.Snackbar.show({message: event.data}));\n\n    const defaultThemeSetting = 'systemPreferred';\n    const themeSetting = Common.Settings.Settings.instance().createSetting('ui-theme', defaultThemeSetting);\n    UI.UIUtils.initializeUIUtils(document);\n\n    // Initialize theme support and apply it.\n    if (!ThemeSupport.ThemeSupport.hasInstance()) {\n      ThemeSupport.ThemeSupport.instance({forceNew: true, setting: themeSetting});\n    }\n\n    UI.UIUtils.addPlatformClass(document.documentElement);\n    UI.UIUtils.installComponentRootStyles(document.body);\n\n    this.#addMainEventListeners(document);\n\n    const canDock = Boolean(Root.Runtime.Runtime.queryParam('can_dock'));\n    UI.ZoomManager.ZoomManager.instance(\n        {forceNew: true, win: window, frontendHost: Host.InspectorFrontendHost.InspectorFrontendHostInstance});\n    UI.ContextMenu.ContextMenu.initialize();\n    UI.ContextMenu.ContextMenu.installHandler(document);\n    UI.ViewManager.ViewManager.instance({forceNew: true, universe: this.#universe});\n\n    // These instances need to be created early so they don't miss any events about requests/issues/etc.\n    Logs.NetworkLog.NetworkLog.instance();\n    SDK.FrameManager.FrameManager.instance();\n    Logs.LogManager.LogManager.instance();\n    IssuesManager.IssuesManager.IssuesManager.instance({\n      forceNew: true,\n      ensureFirst: true,\n      showThirdPartyIssuesSetting: IssuesManager.Issue.getShowThirdPartyIssuesSetting(),\n      hideIssueSetting: IssuesManager.IssuesManager.getHideIssueByCodeSetting(),\n    });\n    IssuesManager.ContrastCheckTrigger.ContrastCheckTrigger.instance();\n\n    UI.DockController.DockController.instance({forceNew: true, canDock});\n    SDK.DOMDebuggerModel.DOMDebuggerManager.instance({forceNew: true});\n    const targetManager = SDK.TargetManager.TargetManager.instance();\n    targetManager.addEventListener(\n        SDK.TargetManager.Events.SUSPEND_STATE_CHANGED, this.#onSuspendStateChanged.bind(this));\n\n    Workspace.FileManager.FileManager.instance({forceNew: true});\n\n    Bindings.NetworkProject.NetworkProjectManager.instance();\n    new Bindings.PresentationConsoleMessageHelper.PresentationConsoleMessageManager();\n    targetManager.setScopeTarget(targetManager.primaryPageTarget());\n    UI.Context.Context.instance().addFlavorChangeListener(SDK.Target.Target, ({data}) => {\n      const outermostTarget = data?.outermostTarget();\n      targetManager.setScopeTarget(outermostTarget);\n    });\n    Breakpoints.BreakpointManager.BreakpointManager.instance({\n      forceNew: true,\n      workspace: Workspace.Workspace.WorkspaceImpl.instance(),\n      targetManager,\n      debuggerWorkspaceBinding: Bindings.DebuggerWorkspaceBinding.DebuggerWorkspaceBinding.instance(),\n    });\n    // @ts-expect-error e2e test global\n    self.Extensions.extensionServer = PanelCommon.ExtensionServer.ExtensionServer.instance({forceNew: true});\n\n    new Persistence.FileSystemWorkspaceBinding.FileSystemWorkspaceBinding(\n        isolatedFileSystemManager, Workspace.Workspace.WorkspaceImpl.instance());\n    isolatedFileSystemManager.addPlatformFileSystem(\n        'snippet://' as Platform.DevToolsPath.UrlString, new Snippets.ScriptSnippetFileSystem.SnippetFileSystem());\n\n    const persistenceImpl = Persistence.Persistence.PersistenceImpl.instance({\n      forceNew: true,\n      workspace: Workspace.Workspace.WorkspaceImpl.instance(),\n      breakpointManager: Breakpoints.BreakpointManager.BreakpointManager.instance(),\n    });\n    const linkDecorator = new PanelCommon.PersistenceUtils.LinkDecorator(persistenceImpl);\n    Components.Linkifier.Linkifier.setLinkDecorator(linkDecorator);\n    Persistence.NetworkPersistenceManager.NetworkPersistenceManager.instance(\n        {forceNew: true, workspace: Workspace.Workspace.WorkspaceImpl.instance()});\n\n    new ExecutionContextSelector(targetManager, UI.Context.Context.instance());\n\n    const projectSettingsModel = ProjectSettings.ProjectSettingsModel.ProjectSettingsModel.instance({\n      forceNew: true,\n      hostConfig: Root.Runtime.hostConfig,\n      pageResourceLoader: SDK.PageResourceLoader.PageResourceLoader.instance(),\n      targetManager,\n    });\n\n    const automaticFileSystemManager = Persistence.AutomaticFileSystemManager.AutomaticFileSystemManager.instance({\n      forceNew: true,\n      inspectorFrontendHost: Host.InspectorFrontendHost.InspectorFrontendHostInstance,\n      projectSettingsModel,\n    });\n    Persistence.AutomaticFileSystemWorkspaceBinding.AutomaticFileSystemWorkspaceBinding.instance({\n      forceNew: true,\n      automaticFileSystemManager,\n      isolatedFileSystemManager,\n      workspace: Workspace.Workspace.WorkspaceImpl.instance(),\n    });\n\n    AutofillManager.AutofillManager.AutofillManager.instance();\n\n    LiveMetrics.LiveMetrics.instance();\n    CrUXManager.CrUXManager.instance();\n\n    AiAssistanceModel.BuiltInAi.BuiltInAi.instance();\n\n    new PauseListener();\n\n    const actionRegistryInstance = UI.ActionRegistry.ActionRegistry.instance({forceNew: true});\n    // Required for legacy a11y layout tests\n    UI.ShortcutRegistry.ShortcutRegistry.instance({forceNew: true, actionRegistry: actionRegistryInstance});\n    this.#registerMessageSinkListener();\n\n    // Initialize `GDPClient` and `UserBadges` for Google Developer Program integration\n    if (Host.GdpClient.isGdpProfilesAvailable()) {\n      void Host.GdpClient.GdpClient.instance().getProfile().then(getProfileResponse => {\n        if (!getProfileResponse) {\n          return;\n        }\n\n        const {profile, isEligible} = getProfileResponse;\n        const hasProfile = Boolean(profile);\n        const contextString = hasProfile ? 'has-profile' :\n            isEligible                   ? 'no-profile-and-eligible' :\n                                           'no-profile-and-not-eligible';\n        void VisualLogging.logFunctionCall('gdp-client-initialize', contextString);\n      });\n      void Badges.UserBadges.instance().initialize();\n      Badges.UserBadges.instance().addEventListener(Badges.Events.BADGE_TRIGGERED, async ev => {\n        loadedPanelCommonModule ??= await import('../../panels/common/common.js') as typeof PanelCommon;\n        const badgeNotification = new loadedPanelCommonModule.BadgeNotification();\n        void badgeNotification.present(ev.data);\n      });\n    }\n\n    const conversationHandler = AiAssistanceModel.ConversationHandler.ConversationHandler.instance();\n    conversationHandler.addEventListener(\n        AiAssistanceModel.ConversationHandler.ConversationHandlerEvents.EXTERNAL_REQUEST_RECEIVED,\n        () => Snackbar.Snackbar.Snackbar.show({message: i18nString(UIStrings.externalRequestReceived)}));\n    conversationHandler.addEventListener(\n        AiAssistanceModel.ConversationHandler.ConversationHandlerEvents.EXTERNAL_CONVERSATION_STARTED,\n        event => void VisualLogging.logFunctionCall(`start-conversation-${event.data}`, 'external'));\n\n    MainImpl.timeEnd('Main._createAppUI');\n\n    const appProvider = Common.AppProvider.getRegisteredAppProviders()[0];\n    if (!appProvider) {\n      throw new Error('Unable to boot DevTools, as the appprovider is missing');\n    }\n    await this.#showAppUI(await appProvider.loadAppProvider());\n  }\n\n  async #showAppUI(appProvider: Object): Promise<void> {\n    MainImpl.time('Main._showAppUI');\n    const app = (appProvider as Common.AppProvider.AppProvider).createApp();\n    // It is important to kick controller lifetime after apps are instantiated.\n    UI.DockController.DockController.instance().initialize();\n    ThemeSupport.ThemeSupport.instance().fetchColorsAndApplyHostTheme();\n    app.presentUI(document);\n\n    if (UI.ActionRegistry.ActionRegistry.instance().hasAction('elements.toggle-element-search')) {\n      const toggleSearchNodeAction =\n          UI.ActionRegistry.ActionRegistry.instance().getAction('elements.toggle-element-search');\n      // TODO: we should not access actions from other modules.\n      Host.InspectorFrontendHost.InspectorFrontendHostInstance.events.addEventListener(\n          Host.InspectorFrontendHostAPI.Events.EnterInspectElementMode, () => {\n            void toggleSearchNodeAction.execute();\n          }, this);\n    }\n    Host.InspectorFrontendHost.InspectorFrontendHostInstance.events.addEventListener(\n        Host.InspectorFrontendHostAPI.Events.RevealSourceLine, this.#revealSourceLine, this);\n\n    const inspectorView = UI.InspectorView.InspectorView.instance();\n    Persistence.NetworkPersistenceManager.NetworkPersistenceManager.instance().addEventListener(\n        Persistence.NetworkPersistenceManager.Events.LOCAL_OVERRIDES_REQUESTED, event => {\n          inspectorView.displaySelectOverrideFolderInfobar(event.data);\n        });\n    await inspectorView.createToolbars();\n    Host.InspectorFrontendHost.InspectorFrontendHostInstance.loadCompleted();\n\n    // Initialize elements for the live announcer functionality for a11y.\n    UI.ARIAUtils.LiveAnnouncer.initializeAnnouncerElements();\n    UI.DockController.DockController.instance().announceDockLocation();\n\n    // Allow UI cycles to repaint prior to creating connection.\n    window.setTimeout(this.#initializeTarget.bind(this), 0);\n    MainImpl.timeEnd('Main._showAppUI');\n  }\n\n  async #initializeTarget(): Promise<void> {\n    MainImpl.time('Main._initializeTarget');\n\n    // We rely on having the early initialization runnables registered in Common when an app loads its\n    // modules, so that we don't have to exhaustively check the app DevTools is running as to\n    // start the applicable runnables.\n    for (const runnableInstanceFunction of Common.Runnable.earlyInitializationRunnables()) {\n      await runnableInstanceFunction().run();\n    }\n    await this.#veStartPromise;\n    // Used for browser tests.\n    Host.InspectorFrontendHost.InspectorFrontendHostInstance.readyForTest();\n    this.#readyForTestPromise.resolve();\n    // Asynchronously run the extensions.\n    window.setTimeout(this.#lateInitialization.bind(this), 100);\n    await this.#maybeInstallVeInspectionBinding();\n\n    MainImpl.timeEnd('Main._initializeTarget');\n  }\n\n  async #maybeInstallVeInspectionBinding(): Promise<void> {\n    const primaryPageTarget = SDK.TargetManager.TargetManager.instance().primaryPageTarget();\n    const url = primaryPageTarget?.targetInfo()?.url;\n    const origin = url ? Common.ParsedURL.ParsedURL.extractOrigin(url as Platform.DevToolsPath.UrlString) : undefined;\n\n    const binding = '__devtools_ve_inspection_binding__';\n    if (primaryPageTarget && await VisualLogging.isUnderInspection(origin)) {\n      const runtimeModel = primaryPageTarget.model(SDK.RuntimeModel.RuntimeModel);\n      await runtimeModel?.addBinding({name: binding});\n      runtimeModel?.addEventListener(SDK.RuntimeModel.Events.BindingCalled, event => {\n        if (event.data.name === binding) {\n          if (event.data.payload === 'true' || event.data.payload === 'false') {\n            VisualLogging.setVeDebuggingEnabled(event.data.payload === 'true', (query: string) => {\n              VisualLogging.setVeDebuggingEnabled(false);\n              void runtimeModel?.defaultExecutionContext()?.evaluate(\n                  {\n                    expression: `window.inspect(${JSON.stringify(query)})`,\n                    includeCommandLineAPI: false,\n                    silent: true,\n                    returnByValue: false,\n                    generatePreview: false,\n                  },\n                  /* userGesture */ false,\n                  /* awaitPromise */ false);\n            });\n          } else {\n            VisualLogging.setHighlightedVe(event.data.payload === 'null' ? null : event.data.payload);\n          }\n        }\n      });\n    }\n  }\n\n  async #lateInitialization(): Promise<void> {\n    MainImpl.time('Main._lateInitialization');\n    PanelCommon.ExtensionServer.ExtensionServer.instance().initializeExtensions();\n    const promises: Array<Promise<void>> =\n        Common.Runnable.lateInitializationRunnables().map(async lateInitializationLoader => {\n          const runnable = await lateInitializationLoader();\n          return await runnable.run();\n        });\n    if (Root.Runtime.experiments.isEnabled('live-heap-profile')) {\n      const PerfUI = await import('../../ui/legacy/components/perf_ui/perf_ui.js');\n      const setting = 'memory-live-heap-profile';\n      if (Common.Settings.Settings.instance().moduleSetting(setting).get()) {\n        promises.push(PerfUI.LiveHeapProfile.LiveHeapProfile.instance().run());\n      } else {\n        const changeListener = async(event: Common.EventTarget.EventTargetEvent<unknown>): Promise<void> => {\n          if (!event.data) {\n            return;\n          }\n          Common.Settings.Settings.instance().moduleSetting(setting).removeChangeListener(changeListener);\n          void PerfUI.LiveHeapProfile.LiveHeapProfile.instance().run();\n        };\n        Common.Settings.Settings.instance().moduleSetting(setting).addChangeListener(changeListener);\n      }\n    }\n\n    MainImpl.timeEnd('Main._lateInitialization');\n  }\n\n  readyForTest(): Promise<void> {\n    return this.#readyForTestPromise.promise;\n  }\n\n  #registerMessageSinkListener(): void {\n    Common.Console.Console.instance().addEventListener(Common.Console.Events.MESSAGE_ADDED, messageAdded);\n\n    function messageAdded({data: message}: Common.EventTarget.EventTargetEvent<Common.Console.Message>): void {\n      if (message.show) {\n        Common.Console.Console.instance().show();\n      }\n    }\n  }\n\n  #revealSourceLine(event: Common.EventTarget.EventTargetEvent<Host.InspectorFrontendHostAPI.RevealSourceLineEvent>):\n      void {\n    const {url, lineNumber, columnNumber} = event.data;\n    const uiSourceCode = Workspace.Workspace.WorkspaceImpl.instance().uiSourceCodeForURL(url);\n    if (uiSourceCode) {\n      void Common.Revealer.reveal(uiSourceCode.uiLocation(lineNumber, columnNumber));\n      return;\n    }\n\n    function listener(event: Common.EventTarget.EventTargetEvent<Workspace.UISourceCode.UISourceCode>): void {\n      const uiSourceCode = event.data;\n      if (uiSourceCode.url() === url) {\n        void Common.Revealer.reveal(uiSourceCode.uiLocation(lineNumber, columnNumber));\n        Workspace.Workspace.WorkspaceImpl.instance().removeEventListener(\n            Workspace.Workspace.Events.UISourceCodeAdded, listener);\n      }\n    }\n\n    Workspace.Workspace.WorkspaceImpl.instance().addEventListener(\n        Workspace.Workspace.Events.UISourceCodeAdded, listener);\n  }\n\n  #postDocumentKeyDown(event: Event): void {\n    if (!event.handled) {\n      UI.ShortcutRegistry.ShortcutRegistry.instance().handleShortcut((event as KeyboardEvent));\n    }\n  }\n\n  #redispatchClipboardEvent(event: Event): void {\n    const eventCopy = new CustomEvent('clipboard-' + event.type, {bubbles: true});\n    // @ts-expect-error Used in ElementsTreeOutline\n    eventCopy['original'] = event;\n    const document = event.target && (event.target as HTMLElement).ownerDocument;\n    const target = document ? UI.DOMUtilities.deepActiveElement(document) : null;\n    if (target) {\n      target.dispatchEvent(eventCopy);\n    }\n    if (eventCopy.handled) {\n      event.preventDefault();\n    }\n  }\n\n  #contextMenuEventFired(event: Event): void {\n    if (event.handled || (event.target as HTMLElement).classList.contains('popup-glasspane')) {\n      event.preventDefault();\n    }\n  }\n\n  #addMainEventListeners(document: Document): void {\n    document.addEventListener('keydown', this.#postDocumentKeyDown.bind(this), false);\n    document.addEventListener('beforecopy', this.#redispatchClipboardEvent.bind(this), true);\n    document.addEventListener('copy', this.#redispatchClipboardEvent.bind(this), false);\n    document.addEventListener('cut', this.#redispatchClipboardEvent.bind(this), false);\n    document.addEventListener('paste', this.#redispatchClipboardEvent.bind(this), false);\n    document.addEventListener('contextmenu', this.#contextMenuEventFired.bind(this), true);\n  }\n\n  #onSuspendStateChanged(): void {\n    const suspended = SDK.TargetManager.TargetManager.instance().allTargetsSuspended();\n    UI.InspectorView.InspectorView.instance().onSuspendStateChanged(suspended);\n  }\n\n  static instanceForTest: MainImpl|null = null;\n}\n\n// @ts-expect-error Exported for Tests.js\nglobalThis.Main = globalThis.Main || {};\n// @ts-expect-error Exported for Tests.js\nglobalThis.Main.Main = MainImpl;\n\nexport class ZoomActionDelegate implements UI.ActionRegistration.ActionDelegate {\n  handleAction(_context: UI.Context.Context, actionId: string): boolean {\n    if (Host.InspectorFrontendHost.InspectorFrontendHostInstance.isHostedMode()) {\n      return false;\n    }\n\n    switch (actionId) {\n      case 'main.zoom-in':\n        Host.InspectorFrontendHost.InspectorFrontendHostInstance.zoomIn();\n        return true;\n      case 'main.zoom-out':\n        Host.InspectorFrontendHost.InspectorFrontendHostInstance.zoomOut();\n        return true;\n      case 'main.zoom-reset':\n        Host.InspectorFrontendHost.InspectorFrontendHostInstance.resetZoom();\n        return true;\n    }\n    return false;\n  }\n}\n\nexport class SearchActionDelegate implements UI.ActionRegistration.ActionDelegate {\n  handleAction(_context: UI.Context.Context, actionId: string): boolean {\n    let searchableView = UI.SearchableView.SearchableView.fromElement(\n        UI.DOMUtilities.deepActiveElement(document),\n    );\n    if (!searchableView) {\n      const currentPanel = (UI.InspectorView.InspectorView.instance().currentPanelDeprecated() as UI.Panel.Panel);\n      if (currentPanel?.searchableView) {\n        searchableView = currentPanel.searchableView();\n      }\n      if (!searchableView) {\n        return false;\n      }\n    }\n    switch (actionId) {\n      case 'main.search-in-panel.find':\n        return searchableView.handleFindShortcut();\n      case 'main.search-in-panel.cancel':\n        return searchableView.handleCancelSearchShortcut();\n      case 'main.search-in-panel.find-next':\n        return searchableView.handleFindNextShortcut();\n      case 'main.search-in-panel.find-previous':\n        return searchableView.handleFindPreviousShortcut();\n    }\n    return false;\n  }\n}\nlet mainMenuItemInstance: MainMenuItem;\n\nexport class MainMenuItem implements UI.Toolbar.Provider {\n  readonly #item: UI.Toolbar.ToolbarMenuButton;\n  constructor() {\n    this.#item = new UI.Toolbar.ToolbarMenuButton(\n        this.#handleContextMenu.bind(this), /* isIconDropdown */ true, /* useSoftMenu */ true, 'main-menu',\n        'dots-vertical');\n    this.#item.element.classList.add('main-menu');\n    this.#item.setTitle(i18nString(UIStrings.customizeAndControlDevtools));\n  }\n\n  static instance(opts: {\n    forceNew: boolean|null,\n  } = {forceNew: null}): MainMenuItem {\n    const {forceNew} = opts;\n    if (!mainMenuItemInstance || forceNew) {\n      mainMenuItemInstance = new MainMenuItem();\n    }\n\n    return mainMenuItemInstance;\n  }\n\n  item(): UI.Toolbar.ToolbarItem|null {\n    return this.#item;\n  }\n\n  #handleContextMenu(contextMenu: UI.ContextMenu.ContextMenu): void {\n    const dockController = UI.DockController.DockController.instance();\n    if (dockController.canDock()) {\n      const dockItemElement = document.createElement('div');\n      dockItemElement.classList.add('flex-auto', 'flex-centered', 'location-menu');\n      dockItemElement.setAttribute(\n          'jslog', `${VisualLogging.item('dock-side').track({keydown: 'ArrowDown|ArrowLeft|ArrowRight'})}`);\n      dockItemElement.tabIndex = -1;\n      UI.ARIAUtils.setLabel(dockItemElement, UIStrings.dockSide + UIStrings.dockSideNavigation);\n      const [toggleDockSideShortcut] =\n          UI.ShortcutRegistry.ShortcutRegistry.instance().shortcutsForAction('main.toggle-dock');\n\n      // clang-format off\n      render(html`\n        <span class=\"dockside-title\"\n              title=${i18nString(UIStrings.placementOfDevtoolsRelativeToThe, {PH1: toggleDockSideShortcut.title()})}>\n          ${i18nString(UIStrings.dockSide)}\n        </span>\n        <devtools-toolbar @mousedown=${(event: Event) => event.consume()}>\n          <devtools-button class=\"toolbar-button\"\n                           jslog=${VisualLogging.toggle().track({click: true}).context('current-dock-state-undock')}\n                           title=${i18nString(UIStrings.undockIntoSeparateWindow)}\n                           aria-label=${i18nString(UIStrings.undockIntoSeparateWindow)}\n                           .iconName=${'dock-window'}\n                           .toggled=${dockController.dockSide() === UI.DockController.DockState.UNDOCKED}\n                           .toggledIconName=${'dock-window'}\n                           .toggleType=${Buttons.Button.ToggleType.PRIMARY}\n                           .variant=${Buttons.Button.Variant.ICON_TOGGLE}\n                           @click=${setDockSide.bind(null, UI.DockController.DockState.UNDOCKED)}></devtools-button>\n          <devtools-button class=\"toolbar-button\"\n                           jslog=${VisualLogging.toggle().track({click: true}).context('current-dock-state-left')}\n                           title=${i18nString(UIStrings.dockToLeft)}\n                           aria-label=${i18nString(UIStrings.dockToLeft)}\n                           .iconName=${'dock-left'}\n                           .toggled=${dockController.dockSide() === UI.DockController.DockState.LEFT}\n                           .toggledIconName=${'dock-left'}\n                           .toggleType=${Buttons.Button.ToggleType.PRIMARY}\n                           .variant=${Buttons.Button.Variant.ICON_TOGGLE}\n                           @click=${setDockSide.bind(null, UI.DockController.DockState.LEFT)}></devtools-button>\n          <devtools-button class=\"toolbar-button\"\n                           jslog=${VisualLogging.toggle().track({click: true}).context('current-dock-state-bottom')}\n                           title=${i18nString(UIStrings.dockToBottom)}\n                           aria-label=${i18nString(UIStrings.dockToBottom)}\n                           .iconName=${'dock-bottom'}\n                           .toggled=${dockController.dockSide() === UI.DockController.DockState.BOTTOM}\n                           .toggledIconName=${'dock-bottom'}\n                           .toggleType=${Buttons.Button.ToggleType.PRIMARY}\n                           .variant=${Buttons.Button.Variant.ICON_TOGGLE}\n                           @click=${setDockSide.bind(null, UI.DockController.DockState.BOTTOM)}></devtools-button>\n          <devtools-button class=\"toolbar-button\"\n                           jslog=${VisualLogging.toggle().track({click: true}).context('current-dock-state-right')}\n                           title=${i18nString(UIStrings.dockToRight)}\n                           aria-label=${i18nString(UIStrings.dockToRight)}\n                           .iconName=${'dock-right'}\n                           .toggled=${dockController.dockSide() === UI.DockController.DockState.RIGHT}\n                           .toggledIconName=${'dock-right'}\n                           .toggleType=${Buttons.Button.ToggleType.PRIMARY}\n                           .variant=${Buttons.Button.Variant.ICON_TOGGLE}\n                           @click=${setDockSide.bind(null, UI.DockController.DockState.RIGHT)}></devtools-button>\n        </devtools-toolbar>\n      `, dockItemElement, {host: this});\n      // clang-format on\n\n      dockItemElement.addEventListener('keydown', event => {\n        let dir = 0;\n        if (event.key === 'ArrowLeft') {\n          dir = -1;\n        } else if (event.key === 'ArrowRight') {\n          dir = 1;\n        } else if (event.key === 'ArrowDown') {\n          const contextMenuElement = dockItemElement.closest('.soft-context-menu');\n          contextMenuElement?.dispatchEvent(new KeyboardEvent('keydown', {key: 'ArrowDown'}));\n          return;\n        } else {\n          return;\n        }\n\n        const buttons = Array.from(dockItemElement.querySelectorAll('devtools-button'));\n        let index = buttons.findIndex(button => button.hasFocus());\n        index = Platform.NumberUtilities.clamp(index + dir, 0, buttons.length - 1);\n        buttons[index].focus();\n        event.consume(true);\n      });\n      contextMenu.headerSection().appendCustomItem(dockItemElement, 'dock-side');\n    }\n\n    const button = this.#item.element;\n\n    function setDockSide(side: UI.DockController.DockState): void {\n      void dockController.once(UI.DockController.Events.AFTER_DOCK_SIDE_CHANGED).then(() => button.focus());\n      dockController.setDockSide(side);\n      contextMenu.discard();\n    }\n\n    contextMenu.defaultSection().appendAction('freestyler.main-menu', undefined, /* optional */ true);\n\n    if (dockController.dockSide() === UI.DockController.DockState.UNDOCKED) {\n      const mainTarget = SDK.TargetManager.TargetManager.instance().primaryPageTarget();\n      if (mainTarget && mainTarget.type() === SDK.Target.Type.FRAME) {\n        contextMenu.defaultSection().appendAction('inspector-main.focus-debuggee', i18nString(UIStrings.focusDebuggee));\n      }\n    }\n\n    contextMenu.defaultSection().appendAction(\n        'main.toggle-drawer',\n        UI.InspectorView.InspectorView.instance().drawerVisible() ? i18nString(UIStrings.hideConsoleDrawer) :\n                                                                    i18nString(UIStrings.showConsoleDrawer));\n    contextMenu.appendItemsAtLocation('mainMenu');\n    const moreTools =\n        contextMenu.defaultSection().appendSubMenuItem(i18nString(UIStrings.moreTools), false, 'more-tools');\n    const viewExtensions = UI.ViewManager.ViewManager.instance().getRegisteredViewExtensions();\n    viewExtensions.sort((extension1, extension2) => {\n      const title1 = extension1.title();\n      const title2 = extension2.title();\n      return title1.localeCompare(title2);\n    });\n\n    for (const viewExtension of viewExtensions) {\n      const location = viewExtension.location();\n      const persistence = viewExtension.persistence();\n      const title = viewExtension.title();\n      const id = viewExtension.viewId();\n      const promotionId = viewExtension.featurePromotionId();\n\n      if (id === 'issues-pane') {\n        moreTools.defaultSection().appendItem(title, () => {\n          Host.userMetrics.issuesPanelOpenedFrom(Host.UserMetrics.IssueOpener.HAMBURGER_MENU);\n          void UI.ViewManager.ViewManager.instance().showView('issues-pane', /* userGesture */ true);\n        }, {jslogContext: id});\n        continue;\n      }\n\n      if (persistence !== 'closeable') {\n        continue;\n      }\n      if (location !== 'drawer-view' && location !== 'panel') {\n        continue;\n      }\n\n      let additionalElement = undefined;\n      if (promotionId) {\n        additionalElement = UI.UIUtils.maybeCreateNewBadge(promotionId);\n      }\n\n      moreTools.defaultSection().appendItem(title, () => {\n        void UI.ViewManager.ViewManager.instance().showView(id, true, false);\n      }, {additionalElement, isPreviewFeature: viewExtension.isPreviewFeature(), jslogContext: id});\n    }\n\n    const helpSubMenu = contextMenu.footerSection().appendSubMenuItem(i18nString(UIStrings.help), false, 'help');\n    helpSubMenu.appendItemsAtLocation('mainMenuHelp');\n  }\n}\n\nlet settingsButtonProviderInstance: SettingsButtonProvider;\n\nexport class SettingsButtonProvider implements UI.Toolbar.Provider {\n  readonly #settingsButton: UI.Toolbar.ToolbarButton;\n  private constructor() {\n    this.#settingsButton = UI.Toolbar.Toolbar.createActionButton('settings.show');\n  }\n\n  static instance(opts: {\n    forceNew: boolean|null,\n  } = {forceNew: null}): SettingsButtonProvider {\n    const {forceNew} = opts;\n    if (!settingsButtonProviderInstance || forceNew) {\n      settingsButtonProviderInstance = new SettingsButtonProvider();\n    }\n\n    return settingsButtonProviderInstance;\n  }\n\n  item(): UI.Toolbar.ToolbarItem|null {\n    return this.#settingsButton;\n  }\n}\n\nexport class PauseListener {\n  constructor() {\n    SDK.TargetManager.TargetManager.instance().addModelListener(\n        SDK.DebuggerModel.DebuggerModel, SDK.DebuggerModel.Events.DebuggerPaused, this.#debuggerPaused, this);\n  }\n\n  #debuggerPaused(event: Common.EventTarget.EventTargetEvent<SDK.DebuggerModel.DebuggerModel>): void {\n    SDK.TargetManager.TargetManager.instance().removeModelListener(\n        SDK.DebuggerModel.DebuggerModel, SDK.DebuggerModel.Events.DebuggerPaused, this.#debuggerPaused, this);\n    const debuggerModel = event.data;\n    const debuggerPausedDetails = debuggerModel.debuggerPausedDetails();\n    UI.Context.Context.instance().setFlavor(SDK.Target.Target, debuggerModel.target());\n    void Common.Revealer.reveal(debuggerPausedDetails);\n  }\n}\n\n/** Unused but mentioned at https://chromedevtools.github.io/devtools-protocol/#:~:text=use%20Main.MainImpl.-,sendOverProtocol,-()%20in%20the **/\nexport function sendOverProtocol(\n    method: ProtocolClient.InspectorBackend.QualifiedName, params: Object|null): Promise<unknown[]|null> {\n  return new Promise((resolve, reject) => {\n    const sendRawMessage = ProtocolClient.InspectorBackend.test.sendRawMessage;\n    if (!sendRawMessage) {\n      return reject('Unable to send message to test client');\n    }\n    sendRawMessage(method, params, (err, ...results) => {\n      if (err) {\n        return reject(err);\n      }\n      return resolve(results);\n    });\n  });\n}\n\nexport class ReloadActionDelegate implements UI.ActionRegistration.ActionDelegate {\n  handleAction(_context: UI.Context.Context, actionId: string): boolean {\n    switch (actionId) {\n      case 'main.debug-reload':\n        Components.Reload.reload();\n\n        return true;\n    }\n    return false;\n  }\n}\n\ntype ExternalRequestInput = {\n  kind: 'LIVE_STYLE_DEBUGGER',\n  args: {prompt: string, selector: string},\n}|{\n  kind: 'PERFORMANCE_RELOAD_GATHER_INSIGHTS',\n}|{\n  kind: 'PERFORMANCE_ANALYZE',\n  args: {prompt: string},\n}|{\n  kind: 'NETWORK_DEBUGGER',\n  args: {requestUrl: string, prompt: string},\n};\n\n/**\n * For backwards-compatibility we iterate over the generator and drop the\n * intermediate results. The final response is transformed to its legacy type.\n * Instead of sending responses of type error, errors are throws.\n **/\nexport async function handleExternalRequest(input: ExternalRequestInput):\n    Promise<{response: string, devToolsLogs: object[]}> {\n  const generator = await handleExternalRequestGenerator(input);\n  let result: IteratorResult<\n      AiAssistanceModel.AiAgent.ExternalRequestResponse, AiAssistanceModel.AiAgent.ExternalRequestResponse>;\n  do {\n    result = await generator.next();\n  } while (!result.done);\n  const response = result.value;\n  if (response.type === AiAssistanceModel.AiAgent.ExternalRequestResponseType.ERROR) {\n    throw new Error(response.message);\n  }\n  if (response.type === AiAssistanceModel.AiAgent.ExternalRequestResponseType.ANSWER) {\n    return {\n      response: response.message,\n      devToolsLogs: response.devToolsLogs,\n    };\n  }\n  throw new Error('Received no response of type answer or type error');\n}\n\n// @ts-expect-error\nglobalThis.handleExternalRequest = handleExternalRequest;\n\nexport async function handleExternalRequestGenerator(input: ExternalRequestInput): Promise<AsyncGenerator<\n    AiAssistanceModel.AiAgent.ExternalRequestResponse, AiAssistanceModel.AiAgent.ExternalRequestResponse>> {\n  switch (input.kind) {\n    case 'PERFORMANCE_RELOAD_GATHER_INSIGHTS': {\n      const TimelinePanel = await import('../../panels/timeline/timeline.js');\n      return TimelinePanel.TimelinePanel.TimelinePanel.handleExternalRecordRequest();\n    }\n    case 'PERFORMANCE_ANALYZE': {\n      const TimelinePanel = await import('../../panels/timeline/timeline.js');\n      return await TimelinePanel.TimelinePanel.TimelinePanel.handleExternalAnalyzeRequest(input.args.prompt);\n    }\n    case 'NETWORK_DEBUGGER': {\n      const AiAssistanceModel = await import('../../models/ai_assistance/ai_assistance.js');\n      const conversationHandler = AiAssistanceModel.ConversationHandler.ConversationHandler.instance();\n      return await conversationHandler.handleExternalRequest({\n        conversationType: AiAssistanceModel.AiHistoryStorage.ConversationType.NETWORK,\n        prompt: input.args.prompt,\n        requestUrl: input.args.requestUrl,\n      });\n    }\n    case 'LIVE_STYLE_DEBUGGER': {\n      const AiAssistanceModel = await import('../../models/ai_assistance/ai_assistance.js');\n      const conversationHandler = AiAssistanceModel.ConversationHandler.ConversationHandler.instance();\n      return await conversationHandler.handleExternalRequest({\n        conversationType: AiAssistanceModel.AiHistoryStorage.ConversationType.STYLING,\n        prompt: input.args.prompt,\n        selector: input.args.selector,\n      });\n    }\n  }\n  // eslint-disable-next-line require-yield\n  return (async function*(): AsyncGenerator<\n          AiAssistanceModel.AiAgent.ExternalRequestResponse, AiAssistanceModel.AiAgent.ExternalRequestResponse> {\n    return {\n      type: AiAssistanceModel.AiAgent.ExternalRequestResponseType.ERROR,\n      // @ts-expect-error\n      message: `Debugging with an agent of type '${input.kind}' is not implemented yet.`,\n    };\n  })();\n}\n\n// @ts-expect-error\nglobalThis.handleExternalRequestGenerator = handleExternalRequestGenerator;\n"]}