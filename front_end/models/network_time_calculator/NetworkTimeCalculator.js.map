{"version":3,"file":"NetworkTimeCalculator.js","sourceRoot":"","sources":["../../../../../../front_end/models/network_time_calculator/NetworkTimeCalculator.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright 2021 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\n/*\n * Copyright (C) 2007, 2008 Apple Inc.  All rights reserved.\n * Copyright (C) 2008, 2009 Anthony Ricaud <rik@webkit.org>\n * Copyright (C) 2011 Google Inc. All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions\n * are met:\n *\n * 1.  Redistributions of source code must retain the above copyright\n *     notice, this list of conditions and the following disclaimer.\n * 2.  Redistributions in binary form must reproduce the above copyright\n *     notice, this list of conditions and the following disclaimer in the\n *     documentation and/or other materials provided with the distribution.\n * 3.  Neither the name of Apple Computer, Inc. (\"Apple\") nor the names of\n *     its contributors may be used to endorse or promote products derived\n *     from this software without specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY APPLE AND ITS CONTRIBUTORS \"AS IS\" AND ANY\n * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL APPLE OR ITS CONTRIBUTORS BE LIABLE FOR ANY\n * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF\n * THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\nimport * as Common from '../../core/common/common.js';\nimport * as i18n from '../../core/i18n/i18n.js';\nimport type * as SDK from '../../core/sdk/sdk.js';\n\nimport type {Calculator} from './Calculator.js';\n\nconst UIStrings = {\n  /**\n   * @description Latency download total format in Network Time Calculator of the Network panel\n   * @example {20ms} PH1\n   * @example {20ms} PH2\n   * @example {40ms} PH3\n   */\n  sLatencySDownloadSTotal: '{PH1} latency, {PH2} download ({PH3} total)',\n  /**\n   * @description Latency format in Network Time Calculator of the Network panel\n   * @example {20ms} PH1\n   */\n  sLatency: '{PH1} latency',\n  /**\n   * @description Duration of the download in ms/s shown for a completed network request.\n   * @example {5ms} PH1\n   */\n  sDownload: '{PH1} download',\n  /**\n   * @description From service worker format in Network Time Calculator of the Network panel\n   * @example {20ms latency} PH1\n   */\n  sFromServiceworker: '{PH1} (from `ServiceWorker`)',\n  /**\n   * @description From cache format in Network Time Calculator of the Network panel\n   * @example {20ms latency} PH1\n   */\n  sFromCache: '{PH1} (from cache)',\n} as const;\nconst str_ = i18n.i18n.registerUIStrings('models/network_time_calculator/NetworkTimeCalculator.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\n\nexport interface Label {\n  left: string;\n  right: string;\n  tooltip?: string;\n}\n\nexport class NetworkTimeBoundary {\n  minimum: number;\n  maximum: number;\n  constructor(minimum: number, maximum: number) {\n    this.minimum = minimum;\n    this.maximum = maximum;\n  }\n\n  equals(other: NetworkTimeBoundary): boolean {\n    return (this.minimum === other.minimum) && (this.maximum === other.maximum);\n  }\n}\n\nexport class NetworkTimeCalculator extends Common.ObjectWrapper.ObjectWrapper<EventTypes> implements Calculator {\n  #minimumBoundary = -1;\n  #maximumBoundary = -1;\n  readonly #boundaryChangedEventThrottler = new Common.Throttler.Throttler(0);\n  #window: NetworkTimeBoundary|null = null;\n  #workingArea?: number;\n\n  startAtZero: boolean;\n\n  constructor(startAtZero: boolean) {\n    super();\n    this.startAtZero = startAtZero;\n  }\n\n  setWindow(window: NetworkTimeBoundary|null): void {\n    this.#window = window;\n    this.boundaryChanged();\n  }\n\n  computePosition(time: number): number {\n    return (time - this.minimumBoundary()) / this.boundarySpan() * (this.#workingArea || 0);\n  }\n\n  formatValue(value: number, precision?: number): string {\n    return i18n.TimeUtilities.secondsToString(value, Boolean(precision));\n  }\n\n  minimumBoundary(): number {\n    return this.#window ? this.#window.minimum : this.#minimumBoundary;\n  }\n\n  zeroTime(): number {\n    return this.#minimumBoundary;\n  }\n\n  maximumBoundary(): number {\n    return this.#window ? this.#window.maximum : this.#maximumBoundary;\n  }\n\n  boundary(): NetworkTimeBoundary {\n    return new NetworkTimeBoundary(this.minimumBoundary(), this.maximumBoundary());\n  }\n\n  boundarySpan(): number {\n    return this.maximumBoundary() - this.minimumBoundary();\n  }\n\n  reset(): void {\n    this.#minimumBoundary = -1;\n    this.#maximumBoundary = -1;\n    this.boundaryChanged();\n  }\n\n  value(): number {\n    return 0;\n  }\n\n  setDisplayWidth(clientWidth: number): void {\n    this.#workingArea = clientWidth;\n  }\n\n  computeBarGraphPercentages(request: SDK.NetworkRequest.NetworkRequest): {\n    start: number,\n    middle: number,\n    end: number,\n  } {\n    let start;\n    let middle;\n    let end;\n    if (request.startTime !== -1) {\n      start = ((request.startTime - this.minimumBoundary()) / this.boundarySpan()) * 100;\n    } else {\n      start = 0;\n    }\n\n    if (request.responseReceivedTime !== -1) {\n      middle = ((request.responseReceivedTime - this.minimumBoundary()) / this.boundarySpan()) * 100;\n    } else {\n      middle = (this.startAtZero ? start : 100);\n    }\n\n    if (request.endTime !== -1) {\n      end = ((request.endTime - this.minimumBoundary()) / this.boundarySpan()) * 100;\n    } else {\n      end = (this.startAtZero ? middle : 100);\n    }\n\n    if (this.startAtZero) {\n      end -= start;\n      middle -= start;\n      start = 0;\n    }\n\n    return {start, middle, end};\n  }\n\n  boundaryChanged(): void {\n    void this.#boundaryChangedEventThrottler.schedule(async () => {\n      this.dispatchEventToListeners(Events.BOUNDARIES_CHANGED);\n    });\n  }\n\n  updateBoundariesForEventTime(eventTime: number): void {\n    if (eventTime === -1 || this.startAtZero) {\n      return;\n    }\n\n    if (this.#maximumBoundary === undefined || eventTime > this.#maximumBoundary) {\n      this.#maximumBoundary = eventTime;\n      this.boundaryChanged();\n    }\n  }\n\n  computeBarGraphLabels(request: SDK.NetworkRequest.NetworkRequest): Label {\n    let rightLabel = '';\n    if (request.responseReceivedTime !== -1 && request.endTime !== -1) {\n      rightLabel = i18n.TimeUtilities.secondsToString(request.endTime - request.responseReceivedTime);\n    }\n\n    const hasLatency = request.latency > 0;\n    const leftLabel = hasLatency ? i18n.TimeUtilities.secondsToString(request.latency) : rightLabel;\n\n    if (request.timing) {\n      return {left: leftLabel, right: rightLabel, tooltip: undefined};\n    }\n\n    let tooltip;\n    if (hasLatency && rightLabel) {\n      const total = i18n.TimeUtilities.secondsToString(request.duration);\n      tooltip = i18nString(UIStrings.sLatencySDownloadSTotal, {PH1: leftLabel, PH2: rightLabel, PH3: total});\n    } else if (hasLatency) {\n      tooltip = i18nString(UIStrings.sLatency, {PH1: leftLabel});\n    } else if (rightLabel) {\n      tooltip = i18nString(UIStrings.sDownload, {PH1: rightLabel});\n    }\n\n    if (request.fetchedViaServiceWorker) {\n      tooltip = i18nString(UIStrings.sFromServiceworker, {PH1: String(tooltip)});\n    } else if (request.cached()) {\n      tooltip = i18nString(UIStrings.sFromCache, {PH1: String(tooltip)});\n    }\n    return {left: leftLabel, right: rightLabel, tooltip};\n  }\n\n  updateBoundaries(request: SDK.NetworkRequest.NetworkRequest): void {\n    const lowerBound = this.lowerBound(request);\n    const upperBound = this.upperBound(request);\n    let changed = false;\n    if (lowerBound !== -1 || this.startAtZero) {\n      changed = this.extendBoundariesToIncludeTimestamp(this.startAtZero ? 0 : lowerBound);\n    }\n    if (upperBound !== -1) {\n      changed = this.extendBoundariesToIncludeTimestamp(upperBound) || changed;\n    }\n    if (changed) {\n      this.boundaryChanged();\n    }\n  }\n\n  extendBoundariesToIncludeTimestamp(timestamp: number): boolean {\n    const previousMinimumBoundary = this.#minimumBoundary;\n    const previousMaximumBoundary = this.#maximumBoundary;\n    const minOffset = MINIMUM_SPREAD;\n    if (this.#minimumBoundary === -1 || this.#maximumBoundary === -1) {\n      this.#minimumBoundary = timestamp;\n      this.#maximumBoundary = timestamp + minOffset;\n    } else {\n      this.#minimumBoundary = Math.min(timestamp, this.#minimumBoundary);\n      this.#maximumBoundary = Math.max(timestamp, this.#minimumBoundary + minOffset, this.#maximumBoundary);\n    }\n    return previousMinimumBoundary !== this.#minimumBoundary || previousMaximumBoundary !== this.#maximumBoundary;\n  }\n\n  lowerBound(_request: SDK.NetworkRequest.NetworkRequest): number {\n    return 0;\n  }\n\n  upperBound(_request: SDK.NetworkRequest.NetworkRequest): number {\n    return 0;\n  }\n}\n\nconst MINIMUM_SPREAD = 0.1;\n\nexport const enum Events {\n  BOUNDARIES_CHANGED = 'BoundariesChanged',\n}\n\nexport interface EventTypes {\n  [Events.BOUNDARIES_CHANGED]: void;\n}\n\nexport class NetworkTransferTimeCalculator extends NetworkTimeCalculator {\n  constructor() {\n    super(false);\n  }\n\n  override formatValue(value: number, precision?: number): string {\n    return i18n.TimeUtilities.secondsToString(value - this.zeroTime(), Boolean(precision));\n  }\n\n  override lowerBound(request: SDK.NetworkRequest.NetworkRequest): number {\n    return request.issueTime();\n  }\n\n  override upperBound(request: SDK.NetworkRequest.NetworkRequest): number {\n    return request.endTime;\n  }\n}\n\nexport class NetworkTransferDurationCalculator extends NetworkTimeCalculator {\n  constructor() {\n    super(true);\n  }\n\n  override formatValue(value: number, precision?: number): string {\n    return i18n.TimeUtilities.secondsToString(value, Boolean(precision));\n  }\n\n  override upperBound(request: SDK.NetworkRequest.NetworkRequest): number {\n    return request.duration;\n  }\n}\n"]}