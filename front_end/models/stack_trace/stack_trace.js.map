{
  "version": 3,
  "sources": ["../../../../../../front_end/models/stack_trace/StackTrace.ts"],
  "sourcesContent": ["// Copyright 2025 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport type * as Common from '../../core/common/common.js';\nimport type * as SDK from '../../core/sdk/sdk.js';\nimport type * as Workspace from '../workspace/workspace.js';\n\nexport type StackTrace = BaseStackTrace<Fragment>;\nexport type DebuggableStackTrace = BaseStackTrace<DebuggableFragment>;\n\nexport interface BaseStackTrace<SyncFragmentT extends Fragment> extends Common.EventTarget.EventTarget<EventTypes> {\n  readonly syncFragment: SyncFragmentT;\n  readonly asyncFragments: readonly AsyncFragment[];\n}\n\nexport interface Fragment {\n  readonly frames: readonly Frame[];\n}\n\nexport interface AsyncFragment extends Fragment {\n  readonly description: string;\n}\n\nexport interface DebuggableFragment {\n  readonly frames: readonly DebuggableFrame[];\n}\n\nexport interface Frame {\n  readonly url?: string;\n  readonly uiSourceCode?: Workspace.UISourceCode.UISourceCode;\n  readonly name?: string;\n  readonly line: number;\n  readonly column: number;\n\n  readonly missingDebugInfo?: MissingDebugInfo;\n}\n\nexport interface DebuggableFrame extends Frame {\n  readonly sdkFrame: SDK.DebuggerModel.CallFrame;\n}\n\nexport const enum MissingDebugInfoType {\n  /** No debug information at all for the call frame */\n  NO_INFO = 'NO_INFO',\n\n  /** Some debug information available, but it references files with debug information we were not able to retrieve */\n  PARTIAL_INFO = 'PARTIAL_INFO',\n}\n\nexport type MissingDebugInfo = {\n  type: MissingDebugInfoType.NO_INFO,\n}|{\n  type: MissingDebugInfoType.PARTIAL_INFO,\n  missingDebugFiles: SDK.DebuggerModel.MissingDebugFiles[],\n};\n\nexport const enum Events {\n  UPDATED = 'UPDATED',\n}\n\nexport interface EventTypes {\n  [Events.UPDATED]: void;\n}\n\n/**\n * A small wrapper around a DebuggableFrame usable as a UI.Context flavor.\n * This is necessary as DebuggableFrame are just interfaces and the impl classes are hidden.\n *\n * Moreover, re-translation creates a new DebuggableFrame instance even though the\n * translation result stays the same, in which case we don't need a new instance for the flavor.\n */\nexport class DebuggableFrameFlavor {\n  static #last?: DebuggableFrameFlavor;\n\n  readonly frame: DebuggableFrame;\n\n  // TODO(crbug.com/465879478): Remove once this is no longer part of SDK.CallFrame.\n  //     We need to stash this separately because DebuggerModel sets this on CallFrame after the\n  //     fact so we can't just check it in the `equals` below.\n  readonly #missingDebugInfo: SDK.DebuggerModel.MissingDebugInfo|null;\n\n  /** Use the static {@link for}. Only public to satisfy the `setFlavor` Ctor type  */\n  constructor(frame: DebuggableFrame) {\n    this.frame = frame;\n    this.#missingDebugInfo = frame.sdkFrame.missingDebugInfoDetails;\n  }\n\n  get sdkFrame(): SDK.DebuggerModel.CallFrame {\n    return this.frame.sdkFrame;\n  }\n\n  /** @returns the same instance of DebuggableFrameFlavor for repeated calls with the same (i.e. deep equal) DebuggableFrame */\n  static for(frame: DebuggableFrame): DebuggableFrameFlavor {\n    function equals(a: DebuggableFrame, b: DebuggableFrame): boolean {\n      return a.url === b.url && a.uiSourceCode === b.uiSourceCode && a.name === b.name && a.line === b.line &&\n          a.column === b.column && a.sdkFrame === b.sdkFrame;\n    }\n\n    if (!DebuggableFrameFlavor.#last || !equals(DebuggableFrameFlavor.#last.frame, frame) ||\n        DebuggableFrameFlavor.#last.#missingDebugInfo !== frame.sdkFrame.missingDebugInfoDetails) {\n      DebuggableFrameFlavor.#last = new DebuggableFrameFlavor(frame);\n    }\n    return DebuggableFrameFlavor.#last;\n  }\n}\n"],
  "mappings": ";;;;;;;AAAA;;;;AAwEM,IAAO,wBAAP,MAAO,uBAAqB;EAChC,OAAO;EAEE;;;;EAKA;;EAGT,YAAY,OAAsB;AAChC,SAAK,QAAQ;AACb,SAAK,oBAAoB,MAAM,SAAS;EAC1C;EAEA,IAAI,WAAQ;AACV,WAAO,KAAK,MAAM;EACpB;;EAGA,OAAO,IAAI,OAAsB;AAC/B,aAAS,OAAO,GAAoB,GAAkB;AACpD,aAAO,EAAE,QAAQ,EAAE,OAAO,EAAE,iBAAiB,EAAE,gBAAgB,EAAE,SAAS,EAAE,QAAQ,EAAE,SAAS,EAAE,QAC7F,EAAE,WAAW,EAAE,UAAU,EAAE,aAAa,EAAE;IAChD;AAEA,QAAI,CAAC,uBAAsB,SAAS,CAAC,OAAO,uBAAsB,MAAM,OAAO,KAAK,KAChF,uBAAsB,MAAM,sBAAsB,MAAM,SAAS,yBAAyB;AAC5F,6BAAsB,QAAQ,IAAI,uBAAsB,KAAK;IAC/D;AACA,WAAO,uBAAsB;EAC/B;;",
  "names": []
}
