{"version":3,"file":"SelectWorkspaceDialog.js","sourceRoot":"","sources":["../../../../../../front_end/panels/ai_assistance/SelectWorkspaceDialog.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright 2025 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as Common from '../../core/common/common.js';\nimport * as Host from '../../core/host/host.js';\nimport * as i18n from '../../core/i18n/i18n.js';\nimport type * as Platform from '../../core/platform/platform.js';\nimport * as Root from '../../core/root/root.js';\nimport * as Geometry from '../../models/geometry/geometry.js';\nimport * as Persistence from '../../models/persistence/persistence.js';\nimport * as Workspace from '../../models/workspace/workspace.js';\nimport * as Buttons from '../../ui/components/buttons/buttons.js';\nimport * as UI from '../../ui/legacy/legacy.js';\nimport {html, nothing, render} from '../../ui/lit/lit.js';\nimport * as VisualLogging from '../../ui/visual_logging/visual_logging.js';\n\nimport selectWorkspaceDialogStyles from './selectWorkspaceDialog.css.js';\n\n/*\n* Strings that don't need to be translated at this time.\n*/\nconst UIStringsNotTranslate = {\n  /**\n   * @description Heading of dialog box which asks user to select a workspace folder.\n   */\n  selectFolder: 'Select folder',\n  /**\n   * @description Heading of dialog box which asks user to select a workspace folder for a11y clients.\n   */\n  selectFolderAccessibleLabel: 'Select a folder to apply changes',\n  /**\n   * @description Button text for canceling workspace selection.\n   */\n  cancel: 'Cancel',\n  /**\n   * @description Button text for confirming the selected workspace folder.\n   */\n  select: 'Select',\n  /**\n   * @description Button text for adding a workspace folder.\n   */\n  addFolder: 'Add folder',\n  /**\n   * @description Explanation for selecting the correct workspace folder.\n   */\n  selectProjectRoot:\n      'Source code from the selected folder is sent to Google. This data may be seen by human reviewers to improve this feature.',\n  /**\n   * @description Explanation for selecting the correct workspace folder when enterprise logging is off.\n   */\n  selectProjectRootNoLogging:\n      'Source code from the selected folder is sent to Google. This data will not be used to improve Googleâ€™s AI models. Your organization may change these settings at any time.',\n} as const;\n\nconst lockedString = i18n.i18n.lockedString;\n\ninterface Folder {\n  name: string;\n  path: string;\n  project?: Workspace.Workspace.Project;\n  automaticFileSystem?: Persistence.AutomaticFileSystemManager.AutomaticFileSystem;\n}\n\ninterface ViewInput {\n  folders: Folder[];\n  selectedIndex: number;\n  selectProjectRootText: Platform.UIString.LocalizedString;\n  showAutomaticWorkspaceNudge: boolean;\n  onProjectSelected: (index: number) => void;\n  onSelectButtonClick: () => void;\n  onCancelButtonClick: () => void;\n  onAddFolderButtonClick: () => void;\n  onListItemKeyDown: (event: KeyboardEvent) => void;\n}\n\ntype View = (input: ViewInput, output: undefined, target: HTMLElement) => void;\n\nexport const SELECT_WORKSPACE_DIALOG_DEFAULT_VIEW: View = (input, _output, target): void => {\n  const hasFolders = input.folders.length > 0;\n  // clang-format off\n  render(\n    html`\n      <style>${selectWorkspaceDialogStyles}</style>\n      <h2 class=\"dialog-header\">${lockedString(UIStringsNotTranslate.selectFolder)}</h2>\n      <div class=\"main-content\">\n        <div class=\"select-project-root\">${input.selectProjectRootText}</div>\n        ${input.showAutomaticWorkspaceNudge ? html`\n          <!-- Hardcoding, because there is no 'getFormatLocalizedString' equivalent for 'lockedString' -->\n          <div>\n            Tip: provide a\n            <x-link\n              class=\"devtools-link\"\n              href=\"https://goo.gle/devtools-automatic-workspace-folders\"\n              jslog=${VisualLogging.link().track({click: true, keydown:'Enter|Space'}).context('automatic-workspaces-documentation')}\n            >com.chrome.devtools.json</x-link>\n            file to automatically connect your project to DevTools.\n          </div>\n        ` : nothing}\n      </div>\n      ${hasFolders ? html`\n        <ul role=\"listbox\" aria-label=${lockedString(UIStringsNotTranslate.selectFolder)}\n          aria-activedescendant=${input.folders.length > 0 ? `option-${input.selectedIndex}` : ''}>\n          ${input.folders.map((folder, index) => {\n            const optionId = `option-${index}`;\n            return html`\n              <li\n                id=${optionId}\n                @mousedown=${() => input.onProjectSelected(index)}\n                @keydown=${input.onListItemKeyDown}\n                class=${index === input.selectedIndex ? 'selected' : ''}\n                aria-selected=${index === input.selectedIndex ? 'true' : 'false'}\n                title=${folder.path}\n                role=\"option\"\n                tabindex=${index === input.selectedIndex ? '0' : '-1'}\n              >\n                <devtools-icon class=\"folder-icon\" name=\"folder\"></devtools-icon>\n                <span class=\"ellipsis\">${folder.name}</span>\n              </li>`;\n          })}\n        </ul>\n      ` : nothing}\n      <div class=\"buttons\">\n        <devtools-button\n          title=${lockedString(UIStringsNotTranslate.cancel)}\n          aria-label=\"Cancel\"\n          .jslogContext=${'cancel'}\n          @click=${input.onCancelButtonClick}\n          .variant=${Buttons.Button.Variant.OUTLINED}>${lockedString(UIStringsNotTranslate.cancel)}</devtools-button>\n        <devtools-button\n          class=\"add-folder-button\"\n          title=${lockedString(UIStringsNotTranslate.addFolder)}\n          aria-label=\"Add folder\"\n          .iconName=${'plus'}\n          .jslogContext=${'add-folder'}\n          @click=${input.onAddFolderButtonClick}\n          .variant=${hasFolders ? Buttons.Button.Variant.TONAL : Buttons.Button.Variant.PRIMARY}>${lockedString(UIStringsNotTranslate.addFolder)}</devtools-button>\n        ${hasFolders ? html`\n          <devtools-button\n            title=${lockedString(UIStringsNotTranslate.select)}\n            aria-label=\"Select\"\n            @click=${input.onSelectButtonClick}\n            .jslogContext=${'select'}\n            .variant=${Buttons.Button.Variant.PRIMARY}>${lockedString(UIStringsNotTranslate.select)}</devtools-button>\n        ` : nothing}\n      </div>\n    `,\n    target\n  );\n  // clang-format on\n};\n\nexport class SelectWorkspaceDialog extends UI.Widget.VBox {\n  #view: View;\n  #workspace = Workspace.Workspace.WorkspaceImpl.instance();\n  #selectedIndex = 0;\n  #onProjectSelected: (project: Workspace.Workspace.Project) => void;\n  #dialog: UI.Dialog.Dialog;\n  #automaticFileSystemManager = Persistence.AutomaticFileSystemManager.AutomaticFileSystemManager.instance();\n  #folders: Folder[] = [];\n\n  constructor(\n      options: {\n        dialog: UI.Dialog.Dialog,\n        onProjectSelected: (project: Workspace.Workspace.Project) => void,\n        currentProject?: Workspace.Workspace.Project,\n      },\n      view?: View) {\n    super();\n    this.#onProjectSelected = options.onProjectSelected;\n    this.#dialog = options.dialog;\n    this.#updateProjectsAndFolders();\n\n    if (options.currentProject) {\n      this.#selectedIndex = Math.max(0, this.#folders.findIndex(folder => folder.project === options.currentProject));\n    }\n\n    this.#view = view ?? SELECT_WORKSPACE_DIALOG_DEFAULT_VIEW;\n    this.requestUpdate();\n    void this.updateComplete.then(() => {\n      this.contentElement?.querySelector<HTMLUListElement>('.selected')?.focus();\n    });\n  }\n\n  override wasShown(): void {\n    super.wasShown();\n    this.#workspace.addEventListener(Workspace.Workspace.Events.ProjectAdded, this.#onProjectAdded, this);\n    this.#workspace.addEventListener(Workspace.Workspace.Events.ProjectRemoved, this.#onProjectRemoved, this);\n  }\n\n  override willHide(): void {\n    super.willHide();\n    this.#workspace.removeEventListener(Workspace.Workspace.Events.ProjectAdded, this.#onProjectAdded, this);\n    this.#workspace.removeEventListener(Workspace.Workspace.Events.ProjectRemoved, this.#onProjectRemoved, this);\n  }\n\n  #onListItemKeyDown(event: KeyboardEvent): void {\n    switch (event.key) {\n      case 'ArrowDown': {\n        event.preventDefault();\n        this.#selectedIndex = Math.min(this.#selectedIndex + 1, this.#folders.length - 1);\n        const targetItem = this.contentElement.querySelectorAll('li')[this.#selectedIndex];\n        targetItem?.scrollIntoView({block: 'nearest', inline: 'nearest'});\n        targetItem?.focus({preventScroll: true});\n        this.requestUpdate();\n        break;\n      }\n      case 'ArrowUp': {\n        event.preventDefault();\n        this.#selectedIndex = Math.max(this.#selectedIndex - 1, 0);\n        const targetItem = this.contentElement.querySelectorAll('li')[this.#selectedIndex];\n        targetItem?.scrollIntoView({block: 'nearest', inline: 'nearest'});\n        targetItem?.focus({preventScroll: true});\n        this.requestUpdate();\n        break;\n      }\n      case 'Enter':\n        event.preventDefault();\n        this.#onSelectButtonClick();\n        break;\n    }\n  }\n\n  #onSelectButtonClick(): void {\n    const selectedFolder = this.#folders[this.#selectedIndex];\n    if (selectedFolder.project) {\n      this.#dialog.hide();\n      this.#onProjectSelected(selectedFolder.project);\n    } else {\n      void this.#connectToAutomaticFilesystem();\n    }\n  }\n\n  override performUpdate(): void {\n    const noLogging = Root.Runtime.hostConfig.aidaAvailability?.enterprisePolicyValue ===\n        Root.Runtime.GenAiEnterprisePolicyValue.ALLOW_WITHOUT_LOGGING;\n\n    const viewInput = {\n      folders: this.#folders,\n      selectedIndex: this.#selectedIndex,\n      selectProjectRootText: noLogging ? lockedString(UIStringsNotTranslate.selectProjectRootNoLogging) :\n                                         lockedString(UIStringsNotTranslate.selectProjectRoot),\n      showAutomaticWorkspaceNudge: this.#automaticFileSystemManager.automaticFileSystem === null &&\n          this.#automaticFileSystemManager.availability === 'available',\n      onProjectSelected: (index: number) => {\n        this.#selectedIndex = index;\n        this.requestUpdate();\n      },\n      onSelectButtonClick: this.#onSelectButtonClick.bind(this),\n      onCancelButtonClick: () => {\n        this.#dialog.hide();\n      },\n      onAddFolderButtonClick: () => {\n        void this.#addFileSystem();\n      },\n      onListItemKeyDown: this.#onListItemKeyDown.bind(this),\n    };\n\n    this.#view(viewInput, undefined, this.contentElement);\n  }\n\n  async #addFileSystem(): Promise<void> {\n    await Persistence.IsolatedFileSystemManager.IsolatedFileSystemManager.instance().addFileSystem();\n    this.contentElement?.querySelector('[aria-label=\"Select\"]')?.shadowRoot?.querySelector('button')?.focus();\n  }\n\n  async #connectToAutomaticFilesystem(): Promise<void> {\n    const success = await this.#automaticFileSystemManager.connectAutomaticFileSystem(/* addIfMissing= */ true);\n    // In the success-case, we will receive a 'ProjectAdded' event and handle it in '#onProjectAdded'.\n    // Only the failure-case is handled here.\n    if (!success) {\n      this.#dialog.hide();\n    }\n  }\n\n  #updateProjectsAndFolders(): void {\n    this.#folders = [];\n    const automaticFileSystem = this.#automaticFileSystemManager.automaticFileSystem;\n\n    // The automatic workspace folder is always added in first position.\n    if (automaticFileSystem) {\n      this.#folders.push({\n        name: Common.ParsedURL.ParsedURL.extractName(automaticFileSystem.root),\n        path: automaticFileSystem.root,\n        automaticFileSystem,\n      });\n    }\n\n    const projects = this.#workspace.projectsForType(Workspace.Workspace.projectTypes.FileSystem)\n                         .filter(\n                             project => project instanceof Persistence.FileSystemWorkspaceBinding.FileSystem &&\n                                 project.fileSystem().type() ===\n                                     Persistence.PlatformFileSystem.PlatformFileSystemType.WORKSPACE_PROJECT);\n    for (const project of projects) {\n      // Deduplication prevents a connected automatic workspace folder from being listed twice.\n      if (automaticFileSystem && project === this.#workspace.projectForFileSystemRoot(automaticFileSystem.root)) {\n        this.#folders[0].project = project;\n        continue;\n      }\n\n      this.#folders.push({\n        name: Common.ParsedURL.ParsedURL.encodedPathToRawPathString(\n            project.displayName() as Platform.DevToolsPath.EncodedPathString),\n        path: Common.ParsedURL.ParsedURL.urlToRawPathString(\n            project.id() as Platform.DevToolsPath.UrlString, Host.Platform.isWin()),\n        project,\n      });\n    }\n  }\n\n  #onProjectAdded(event: Common.EventTarget.EventTargetEvent<Workspace.Workspace.Project>): void {\n    const addedProject = event.data;\n\n    // After connecting to an automatic workspace folder, wait for the 'projectAdded' event,\n    // then close the dialog and continue with the selected project.\n    const automaticFileSystem = this.#automaticFileSystemManager.automaticFileSystem;\n    if (automaticFileSystem && addedProject === this.#workspace.projectForFileSystemRoot(automaticFileSystem.root)) {\n      this.#dialog.hide();\n      this.#onProjectSelected(addedProject);\n      return;\n    }\n\n    this.#updateProjectsAndFolders();\n    const projectIndex = this.#folders.findIndex(folder => folder.project === addedProject);\n    if (projectIndex !== -1) {\n      this.#selectedIndex = projectIndex;\n    }\n    this.requestUpdate();\n    void this.updateComplete.then(() => {\n      this.contentElement?.querySelector('.selected')?.scrollIntoView();\n    });\n  }\n\n  #onProjectRemoved(): void {\n    const selectedProject = (this.#selectedIndex >= 0 && this.#selectedIndex < this.#folders.length) ?\n        this.#folders[this.#selectedIndex].project :\n        null;\n    this.#updateProjectsAndFolders();\n\n    if (selectedProject) {\n      const projectIndex = this.#folders.findIndex(folder => folder.project === selectedProject);\n\n      // If the previously selected project still exists, select it again.\n      // If the previously selected project has been removed, select the project which is now in its\n      // position. If the previously selected and now removed project was in last position, select\n      // the project which is now in last position.\n      this.#selectedIndex =\n          projectIndex === -1 ? Math.min(this.#folders.length - 1, this.#selectedIndex) : projectIndex;\n    } else {\n      this.#selectedIndex = 0;\n    }\n    this.requestUpdate();\n  }\n\n  static show(\n      onProjectSelected: (project: Workspace.Workspace.Project) => void,\n      currentProject?: Workspace.Workspace.Project): void {\n    const dialog = new UI.Dialog.Dialog('select-workspace');\n    dialog.setAriaLabel(UIStringsNotTranslate.selectFolderAccessibleLabel);\n    dialog.setMaxContentSize(new Geometry.Size(384, 340));\n    dialog.setSizeBehavior(UI.GlassPane.SizeBehavior.SET_EXACT_WIDTH_MAX_HEIGHT);\n    dialog.setDimmed(true);\n\n    new SelectWorkspaceDialog({dialog, onProjectSelected, currentProject}).show(dialog.contentElement);\n    dialog.show();\n  }\n}\n"]}