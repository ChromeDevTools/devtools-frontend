{"version":3,"file":"ChatView.js","sourceRoot":"","sources":["../../../../../../../front_end/panels/ai_assistance/components/ChatView.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright 2024 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\n/* eslint-disable @devtools/no-lit-render-outside-of-view */\n\nimport '../../../ui/components/spinners/spinners.js';\n\nimport * as Host from '../../../core/host/host.js';\nimport * as i18n from '../../../core/i18n/i18n.js';\nimport type * as Platform from '../../../core/platform/platform.js';\nimport type * as AiAssistanceModel from '../../../models/ai_assistance/ai_assistance.js';\nimport * as Buttons from '../../../ui/components/buttons/buttons.js';\nimport type {MarkdownLitRenderer} from '../../../ui/components/markdown_view/MarkdownView.js';\nimport * as UI from '../../../ui/legacy/legacy.js';\nimport * as Lit from '../../../ui/lit/lit.js';\nimport {PatchWidget} from '../PatchWidget.js';\n\nimport {ChatInput} from './ChatInput.js';\nimport {ChatMessage, type Message, type ModelChatMessage} from './ChatMessage.js';\nimport chatViewStyles from './chatView.css.js';\n\nexport {ChatInput, type ImageInputData} from './ChatInput.js';\n\nconst {html, Directives: {ref, repeat, createRef}} = Lit;\n\n/*\n* Strings that don't need to be translated at this time.\n*/\nconst UIStringsNotTranslate = {\n  /**\n   * @description Text for the empty state of the AI assistance panel.\n   */\n  emptyStateText: 'How can I help you?',\n} as const;\n\nconst lockedString = i18n.i18n.lockedString;\n\nconst SCROLL_ROUNDING_OFFSET = 1;\n\nexport interface Props {\n  onTextSubmit:\n      (text: string, imageInput?: Host.AidaClient.Part,\n       multimodalInputType?: AiAssistanceModel.AiAgent.MultimodalInputType) => void;\n  onInspectElementClick: () => void;\n  onFeedbackSubmit: (rpcId: Host.AidaClient.RpcGlobalId, rate: Host.AidaClient.Rating, feedback?: string) => void;\n  onCancelClick: () => void;\n  onContextClick: () => void;\n  onNewConversation: () => void;\n  onCopyResponseClick: (message: ModelChatMessage) => void;\n  changeManager: AiAssistanceModel.ChangeManager.ChangeManager;\n  inspectElementToggled: boolean;\n  messages: Message[];\n  selectedContext: AiAssistanceModel.AiAgent.ConversationContext<unknown>|null;\n  isLoading: boolean;\n  canShowFeedbackForm: boolean;\n  userInfo: Pick<Host.InspectorFrontendHostAPI.SyncInformation, 'accountImage'|'accountFullName'>;\n  conversationType: AiAssistanceModel.AiHistoryStorage.ConversationType;\n  isReadOnly: boolean;\n  blockedByCrossOrigin: boolean;\n  changeSummary?: string;\n  multimodalInputEnabled?: boolean;\n  isTextInputDisabled: boolean;\n  emptyStateSuggestions: AiAssistanceModel.AiAgent.ConversationSuggestion[];\n  inputPlaceholder: Platform.UIString.LocalizedString;\n  disclaimerText: Platform.UIString.LocalizedString;\n  isArtifactsSidebarOpen: boolean;\n  uploadImageInputEnabled?: boolean;\n  markdownRenderer: MarkdownLitRenderer;\n  additionalFloatyContext: UI.Floaty.FloatyContextSelection[];\n}\n\nexport class ChatView extends HTMLElement {\n  readonly #shadow = this.attachShadow({mode: 'open'});\n  #scrollTop?: number;\n  #props: Props;\n  #messagesContainerElement?: Element;\n  #mainElementRef = createRef<HTMLElement>();\n  #messagesContainerResizeObserver = new ResizeObserver(() => this.#handleMessagesContainerResize());\n  /**\n   * Indicates whether the chat scroll position should be pinned to the bottom.\n   *\n   * This is true when:\n   *   - The scroll is at the very bottom, allowing new messages to push the scroll down automatically.\n   *   - The panel is initially rendered and the user hasn't scrolled yet.\n   *\n   * It is set to false when the user scrolls up to view previous messages.\n   */\n  #pinScrollToBottom = true;\n  /**\n   * Indicates whether the scroll event originated from code\n   * or a user action. When set to `true`, `handleScroll` will ignore the event,\n   * allowing it to only handle user-driven scrolls and correctly decide\n   * whether to pin the content to the bottom.\n   */\n  #isProgrammaticScroll = false;\n  #inputRef = createRef<UI.Widget.WidgetElement<ChatInput>>();\n\n  constructor(props: Props) {\n    super();\n    this.#props = props;\n  }\n\n  set props(props: Props) {\n    this.#props = props;\n    this.#render();\n  }\n\n  connectedCallback(): void {\n    this.#render();\n\n    if (this.#messagesContainerElement) {\n      this.#messagesContainerResizeObserver.observe(this.#messagesContainerElement);\n    }\n  }\n\n  disconnectedCallback(): void {\n    this.#messagesContainerResizeObserver.disconnect();\n  }\n\n  focusTextInput(): void {\n    const textArea = this.#shadow.querySelector('.chat-input') as HTMLTextAreaElement;\n    if (!textArea) {\n      return;\n    }\n\n    textArea.focus();\n  }\n\n  restoreScrollPosition(): void {\n    if (this.#scrollTop === undefined) {\n      return;\n    }\n\n    if (!this.#mainElementRef?.value) {\n      return;\n    }\n\n    this.#setMainElementScrollTop(this.#scrollTop);\n  }\n\n  scrollToBottom(): void {\n    if (!this.#mainElementRef?.value) {\n      return;\n    }\n\n    this.#setMainElementScrollTop(this.#mainElementRef.value.scrollHeight);\n  }\n\n  #handleMessagesContainerResize(): void {\n    if (!this.#pinScrollToBottom) {\n      return;\n    }\n\n    if (!this.#mainElementRef?.value) {\n      return;\n    }\n\n    if (this.#pinScrollToBottom) {\n      this.#setMainElementScrollTop(this.#mainElementRef.value.scrollHeight);\n    }\n  }\n\n  #setMainElementScrollTop(scrollTop: number): void {\n    if (!this.#mainElementRef?.value) {\n      return;\n    }\n\n    this.#scrollTop = scrollTop;\n    this.#isProgrammaticScroll = true;\n    this.#mainElementRef.value.scrollTop = scrollTop;\n  }\n\n  #handleMessageContainerRef(el: Element|undefined): void {\n    this.#messagesContainerElement = el;\n\n    if (el) {\n      this.#messagesContainerResizeObserver.observe(el);\n    } else {\n      this.#pinScrollToBottom = true;\n      this.#messagesContainerResizeObserver.disconnect();\n    }\n  }\n\n  #handleScroll = (ev: Event): void => {\n    if (!ev.target || !(ev.target instanceof HTMLElement)) {\n      return;\n    }\n\n    // Do not handle scroll events caused by programmatically\n    // updating the scroll position. We want to know whether user\n    // did scroll the container from the user interface.\n    if (this.#isProgrammaticScroll) {\n      this.#isProgrammaticScroll = false;\n      return;\n    }\n\n    this.#scrollTop = ev.target.scrollTop;\n    this.#pinScrollToBottom =\n        ev.target.scrollTop + ev.target.clientHeight + SCROLL_ROUNDING_OFFSET > ev.target.scrollHeight;\n  };\n\n  #handleSuggestionClick = (suggestion: string): void => {\n    this.#inputRef.value?.getWidget()?.setInputValue(suggestion);\n    this.#render();\n    this.focusTextInput();\n    Host.userMetrics.actionTaken(Host.UserMetrics.Action.AiAssistanceDynamicSuggestionClicked);\n  };\n\n  #render(): void {\n    const inputWidgetClasses = Lit.Directives.classMap({\n      'chat-input-widget': true,\n      sticky: !this.#props.isReadOnly,\n    });\n\n    // clang-format off\n    Lit.render(html`\n      <style>${chatViewStyles}</style>\n      <div class=\"chat-ui\">\n        <main @scroll=${this.#handleScroll} ${ref(this.#mainElementRef)}>\n          ${this.#props.messages.length > 0 ? html`\n            <div class=\"messages-container\" ${ref(this.#handleMessageContainerRef)}>\n              ${repeat(this.#props.messages, message =>\n                html`<devtools-widget .widgetConfig=${UI.Widget.widgetConfig(ChatMessage, {\n                  message,\n                  isLoading: this.#props.isLoading,\n                  isReadOnly: this.#props.isReadOnly,\n                  canShowFeedbackForm: this.#props.canShowFeedbackForm,\n                  userInfo: this.#props.userInfo,\n                  markdownRenderer: this.#props.markdownRenderer,\n                  isLastMessage: this.#props.messages.at(-1) === message,\n                  onSuggestionClick: this.#handleSuggestionClick,\n                  onFeedbackSubmit: this.#props.onFeedbackSubmit,\n                  onCopyResponseClick: this.#props.onCopyResponseClick,\n                })}></devtools-widget>`\n              )}\n              ${this.#props.isLoading ? Lit.nothing : html`<devtools-widget\n                .widgetConfig=${UI.Widget.widgetConfig(PatchWidget, {\n                  changeSummary: this.#props.changeSummary ?? '',\n                  changeManager: this.#props.changeManager,\n                })}\n              ></devtools-widget>`}\n            </div>\n          ` : html`\n            <div class=\"empty-state-container\">\n              <div class=\"header\">\n                <div class=\"icon\">\n                  <devtools-icon\n                    name=\"smart-assistant\"\n                  ></devtools-icon>\n                </div>\n                <h1>${lockedString(UIStringsNotTranslate.emptyStateText)}</h1>\n              </div>\n              <div class=\"empty-state-content\">\n                ${this.#props.emptyStateSuggestions.map(({title, jslogContext}) => {\n                  return html`<devtools-button\n                    class=\"suggestion\"\n                    @click=${() => this.#handleSuggestionClick(title)}\n                    .data=${\n                      {\n                        variant: Buttons.Button.Variant.OUTLINED,\n                        size: Buttons.Button.Size.REGULAR,\n                        title,\n                        jslogContext: jslogContext ?? 'suggestion',\n                        disabled: this.#props.isTextInputDisabled,\n                      } as Buttons.Button.ButtonData\n                    }\n                  >${title}</devtools-button>`;\n                })}\n              </div>\n            </div>\n          `}\n          <devtools-widget class=${inputWidgetClasses} .widgetConfig=${UI.Widget.widgetConfig(ChatInput, {\n            isLoading: this.#props.isLoading,\n            blockedByCrossOrigin: this.#props.blockedByCrossOrigin,\n            isTextInputDisabled: this.#props.isTextInputDisabled,\n            inputPlaceholder: this.#props.inputPlaceholder,\n            disclaimerText: this.#props.disclaimerText,\n            selectedContext: this.#props.selectedContext,\n            inspectElementToggled: this.#props.inspectElementToggled,\n            multimodalInputEnabled: this.#props.multimodalInputEnabled ?? false,\n            conversationType: this.#props.conversationType,\n            uploadImageInputEnabled: this.#props.uploadImageInputEnabled ?? false,\n            isReadOnly: this.#props.isReadOnly,\n            additionalFloatyContext: this.#props.additionalFloatyContext,\n            onContextClick: this.#props.onContextClick,\n            onInspectElementClick: this.#props.onInspectElementClick,\n            onTextSubmit: (\n                text: string, imageInput?: Host.AidaClient.Part,\n                multimodalInputType?: AiAssistanceModel.AiAgent.MultimodalInputType) => {\n              this.#props.onTextSubmit(text, imageInput, multimodalInputType);\n              this.#render();\n            },\n            onCancelClick: this.#props.onCancelClick,\n            onNewConversation: this.#props.onNewConversation,\n          })} ${ref(this.#inputRef)}></devtools-widget>\n        </main>\n      </div>\n    `, this.#shadow, {host: this});\n    // clang-format on\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    'devtools-ai-chat-view': ChatView;\n  }\n}\n\ncustomElements.define('devtools-ai-chat-view', ChatView);\n"]}