{"version":3,"file":"UserActionRow.js","sourceRoot":"","sources":["../../../../../../../front_end/panels/ai_assistance/components/UserActionRow.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright 2024 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport '../../../ui/components/markdown_view/markdown_view.js';\n\nimport * as Common from '../../../core/common/common.js';\nimport * as Host from '../../../core/host/host.js';\nimport * as i18n from '../../../core/i18n/i18n.js';\nimport type * as Platform from '../../../core/platform/platform.js';\nimport * as AiAssistanceModel from '../../../models/ai_assistance/ai_assistance.js';\nimport * as Marked from '../../../third_party/marked/marked.js';\nimport * as Buttons from '../../../ui/components/buttons/buttons.js';\nimport * as Input from '../../../ui/components/input/input.js';\nimport type * as MarkdownView from '../../../ui/components/markdown_view/markdown_view.js';\nimport type {MarkdownLitRenderer} from '../../../ui/components/markdown_view/MarkdownView.js';\nimport * as UIHelpers from '../../../ui/helpers/helpers.js';\nimport * as UI from '../../../ui/legacy/legacy.js';\nimport * as Lit from '../../../ui/lit/lit.js';\nimport * as VisualLogging from '../../../ui/visual_logging/visual_logging.js';\n\nimport userActionRowStyles from './userActionRow.css.js';\n\nconst {html, Directives: {ref, ifDefined}} = Lit;\nconst lockedString = i18n.i18n.lockedString;\n\nconst REPORT_URL = 'https://crbug.com/364805393' as Platform.DevToolsPath.UrlString;\nconst SCROLL_ROUNDING_OFFSET = 1;\n\n/*\n* Strings that don't need to be translated at this time.\n*/\nconst UIStringsNotTranslate = {\n\n  /**\n   * @description The title of the button that allows submitting positive\n   * feedback about the response for AI assistance.\n   */\n  thumbsUp: 'Good response',\n  /**\n   * @description The title of the button that allows submitting negative\n   * feedback about the response for AI assistance.\n   */\n  thumbsDown: 'Bad response',\n  /**\n   * @description The placeholder text for the feedback input.\n   */\n  provideFeedbackPlaceholder: 'Provide additional feedback',\n  /**\n   * @description The disclaimer text that tells the user what will be shared\n   * and what will be stored.\n   */\n  disclaimer: 'Submitted feedback will also include your conversation',\n  /**\n   * @description The button text for the action of submitting feedback.\n   */\n  submit: 'Submit',\n  /**\n   * @description The header of the feedback form asking.\n   */\n  whyThisRating: 'Why did you choose this rating? (optional)',\n  /**\n   * @description The button text for the action that hides the feedback form.\n   */\n  close: 'Close',\n  /**\n   * @description The title of the button that opens a page to report a legal\n   * issue with the AI assistance message.\n   */\n  report: 'Report legal issue',\n  /**\n   * @description The title of the button for scrolling to see next suggestions\n   */\n  scrollToNext: 'Scroll to next suggestions',\n  /**\n   * @description The title of the button for scrolling to see previous suggestions\n   */\n  scrollToPrevious: 'Scroll to previous suggestions',\n  /**\n   * @description The title of the button that copies the AI-generated response to the clipboard.\n   */\n  copyResponse: 'Copy response',\n  /**\n   * @description The error message when the request to the LLM failed for some reason.\n   */\n  systemError:\n      'Something unforeseen happened and I can no longer continue. Try your request again and see if that resolves the issue. If this keeps happening, update Chrome to the latest version.',\n  /**\n   * @description The error message when the LLM gets stuck in a loop (max steps reached).\n   */\n  maxStepsError: 'Seems like I am stuck with the investigation. It would be better if you start over.',\n  /**\n   * @description Displayed when the user stop the response\n   */\n  stoppedResponse: 'You stopped this response',\n  /**\n   * @description Prompt for user to confirm code execution that may affect the page.\n   */\n  sideEffectConfirmationDescription: 'This code may modify page content. Continue?',\n  /**\n   * @description Button text that confirm code execution that may affect the page.\n   */\n  positiveSideEffectConfirmation: 'Continue',\n  /**\n   * @description Button text that cancels code execution that may affect the page.\n   */\n  negativeSideEffectConfirmation: 'Cancel',\n  /**\n   * @description The generic name of the AI agent (do not translate)\n   */\n  ai: 'AI',\n  /**\n   * @description The fallback text when we can't find the user full name\n   */\n  you: 'You',\n  /**\n   * @description The fallback text when a step has no title yet\n   */\n  investigating: 'Investigating',\n  /**\n   * @description Prefix to the title of each thinking step of a user action is required to continue\n   */\n  paused: 'Paused',\n  /**\n   * @description Heading text for the code block that shows the executed code.\n   */\n  codeExecuted: 'Code executed',\n  /**\n   * @description Heading text for the code block that shows the code to be executed after side effect confirmation.\n   */\n  codeToExecute: 'Code to execute',\n  /**\n   * @description Heading text for the code block that shows the returned data.\n   */\n  dataReturned: 'Data returned',\n  /**\n   * @description Aria label for the check mark icon to be read by screen reader\n   */\n  completed: 'Completed',\n  /**\n   * @description Aria label for the cancel icon to be read by screen reader\n   */\n  canceled: 'Canceled',\n  /**\n   * @description Alt text for the image input (displayed in the chat messages) that has been sent to the model.\n   */\n  imageInputSentToTheModel: 'Image input sent to the model',\n  /**\n   * @description Alt text for the account avatar.\n   */\n  accountAvatar: 'Account avatar',\n  /**\n   * @description Title for the x-link which wraps the image input rendered in chat messages.\n   */\n  openImageInNewTab: 'Open image in a new tab',\n  /**\n   * @description Alt text for image when it is not available.\n   */\n  imageUnavailable: 'Image unavailable',\n} as const;\n\nexport interface Step {\n  isLoading: boolean;\n  thought?: string;\n  title?: string;\n  code?: string;\n  output?: string;\n  canceled?: boolean;\n  sideEffect?: ConfirmSideEffectDialog;\n  contextDetails?: [AiAssistanceModel.AiAgent.ContextDetail, ...AiAssistanceModel.AiAgent.ContextDetail[]];\n}\n\nexport interface ConfirmSideEffectDialog {\n  onAnswer: (result: boolean) => void;\n}\n\nexport const enum ChatMessageEntity {\n  MODEL = 'model',\n  USER = 'user',\n}\n\nexport interface AnswerPart {\n  type: 'answer';\n  text: string;\n  suggestions?: [string, ...string[]];\n}\n\nexport interface StepPart {\n  type: 'step';\n  step: Step;\n}\n\nexport type ModelMessagePart = AnswerPart|StepPart;\n\nexport interface UserChatMessage {\n  entity: ChatMessageEntity.USER;\n  text: string;\n  imageInput?: Host.AidaClient.Part;\n}\n\nexport interface ModelChatMessage {\n  entity: ChatMessageEntity.MODEL;\n  parts: ModelMessagePart[];\n  error?: AiAssistanceModel.AiAgent.ErrorType;\n  rpcId?: Host.AidaClient.RpcGlobalId;\n}\n\nexport type ChatMessage = UserChatMessage|ModelChatMessage;\n\nexport interface RatingViewInput {\n  currentRating?: Host.AidaClient.Rating;\n  onRatingClick: (rating: Host.AidaClient.Rating) => void;\n  showRateButtons: boolean;\n}\n\nexport interface ActionViewInput {\n  onReportClick: () => void;\n  onCopyResponseClick: () => void;\n}\n\nexport interface SuggestionViewInput {\n  suggestions?: [string, ...string[]];\n  scrollSuggestionsScrollContainer: (direction: 'left'|'right') => void;\n  onSuggestionsScrollOrResize: () => void;\n  onSuggestionClick: (suggestion: string) => void;\n}\n\nexport interface FeedbackFormViewInput {\n  isShowingFeedbackForm: boolean;\n  onSubmit: (event: SubmitEvent) => void;\n  onClose: () => void;\n  onInputChange: (input: string) => void;\n  isSubmitButtonDisabled: boolean;\n}\n\nexport type UserActionRowViewInput =\n    MessageInput&RatingViewInput&ActionViewInput&SuggestionViewInput&FeedbackFormViewInput;\n\nexport interface ViewOutput {\n  suggestionsLeftScrollButtonContainer?: Element;\n  suggestionsScrollContainer?: Element;\n  suggestionsRightScrollButtonContainer?: Element;\n}\n\nexport interface MessageInput {\n  suggestions?: [string, ...string[]];\n  message: ChatMessage;\n  isLoading: boolean;\n  isReadOnly: boolean;\n  isLastMessage: boolean;\n  canShowFeedbackForm: boolean;\n  userInfo: Pick<Host.InspectorFrontendHostAPI.SyncInformation, 'accountImage'|'accountFullName'>;\n  markdownRenderer: MarkdownLitRenderer;\n  onSuggestionClick: (suggestion: string) => void;\n  onFeedbackSubmit: (rpcId: Host.AidaClient.RpcGlobalId, rate: Host.AidaClient.Rating, feedback?: string) => void;\n  onCopyResponseClick: (message: ModelChatMessage) => void;\n}\n\nexport const DEFAULT_VIEW = (input: UserActionRowViewInput, output: ViewOutput, target: HTMLElement): void => {\n  const message = input.message;\n  if (message.entity === ChatMessageEntity.USER) {\n    const name = input.userInfo.accountFullName || lockedString(UIStringsNotTranslate.you);\n    const image = input.userInfo.accountImage ?\n        html`<img src=\"data:image/png;base64, ${input.userInfo.accountImage}\" alt=${\n            UIStringsNotTranslate.accountAvatar} />` :\n        html`<devtools-icon\n          name=\"profile\"\n        ></devtools-icon>`;\n    const imageInput = message.imageInput && 'inlineData' in message.imageInput ?\n        renderImageChatMessage(message.imageInput.inlineData) :\n        Lit.nothing;\n    // clang-format off\n    Lit.render(html`\n      <style>${Input.textInputStyles}</style>\n      <style>${userActionRowStyles}</style>\n      <section\n        class=\"chat-message query ${input.isLastMessage ? 'is-last-message' : ''}\"\n        jslog=${VisualLogging.section('question')}\n      >\n        <div class=\"message-info\">\n          ${image}\n          <div class=\"message-name\">\n            <h2>${name}</h2>\n          </div>\n        </div>\n        ${imageInput}\n        <div class=\"message-content\">${renderTextAsMarkdown(message.text, input.markdownRenderer)}</div>\n      </section>\n    `, target);\n    // clang-format on\n    return;\n  }\n\n  // clang-format off\n  Lit.render(html`\n    <style>${Input.textInputStyles}</style>\n    <style>${userActionRowStyles}</style>\n    <section\n      class=\"chat-message answer ${input.isLastMessage ? 'is-last-message' : ''}\"\n      jslog=${VisualLogging.section('answer')}\n    >\n      <div class=\"message-info\">\n        <devtools-icon name=\"smart-assistant\"></devtools-icon>\n        <div class=\"message-name\">\n          <h2>${lockedString(UIStringsNotTranslate.ai)}</h2>\n        </div>\n      </div>\n      ${Lit.Directives.repeat(\n        message.parts,\n        (_, index) => index,\n        (part, index) => {\n          const isLastPart = index === message.parts.length - 1;\n          if (part.type === 'answer') {\n            return html`<p>${renderTextAsMarkdown(part.text, input.markdownRenderer, { animate: !input.isReadOnly && input.isLoading && isLastPart && input.isLastMessage })}</p>`;\n          }\n          return renderStep({\n            step: part.step,\n            isLoading: input.isLoading,\n            markdownRenderer: input.markdownRenderer,\n            isLast: isLastPart,\n          });\n        },\n      )}\n      ${renderError(message)}\n      ${input.isLastMessage && !input.isLoading ? renderActions(input, output) : Lit.nothing}\n    </section>\n  `, target);\n  // clang-format on\n};\n\nexport type View = typeof DEFAULT_VIEW;\n\nfunction renderTextAsMarkdown(text: string, markdownRenderer: MarkdownLitRenderer, {animate, ref: refFn}: {\n  animate?: boolean,\n  ref?: (element?: Element) => void,\n} = {}): Lit.TemplateResult {\n  let tokens = [];\n  try {\n    tokens = Marked.Marked.lexer(text);\n    for (const token of tokens) {\n      // Try to render all the tokens to make sure that\n      // they all have a template defined for them. If there\n      // isn't any template defined for a token, we'll fallback\n      // to rendering the text as plain text instead of markdown.\n      markdownRenderer.renderToken(token);\n    }\n  } catch {\n    // The tokens were not parsed correctly or\n    // one of the tokens are not supported, so we\n    // continue to render this as text.\n    return html`${text}`;\n  }\n\n  // clang-format off\n  return html`<devtools-markdown-view\n    .data=${{tokens, renderer: markdownRenderer, animationEnabled: animate} as MarkdownView.MarkdownView.MarkdownViewData}\n    ${refFn ? ref(refFn) : Lit.nothing}>\n  </devtools-markdown-view>`;\n  // clang-format on\n}\n\nfunction renderTitle(step: Step): Lit.LitTemplate {\n  const paused =\n      step.sideEffect ? html`<span class=\"paused\">${lockedString(UIStringsNotTranslate.paused)}: </span>` : Lit.nothing;\n  const actionTitle = step.title ?? `${lockedString(UIStringsNotTranslate.investigating)}â€¦`;\n\n  return html`<span class=\"title\">${paused}${actionTitle}</span>`;\n}\n\nfunction renderStepCode(step: Step): Lit.LitTemplate {\n  if (!step.code && !step.output) {\n    return Lit.nothing;\n  }\n\n  // If there is no \"output\" yet, it means we didn't execute the code yet (e.g. maybe it is still waiting for confirmation from the user)\n  // thus we show \"Code to execute\" text rather than \"Code executed\" text on the heading of the code block.\n  const codeHeadingText = (step.output && !step.canceled) ? lockedString(UIStringsNotTranslate.codeExecuted) :\n                                                            lockedString(UIStringsNotTranslate.codeToExecute);\n\n  // If there is output, we don't show notice on this code block and instead show\n  // it in the data returned code block.\n  // clang-format off\n  const code = step.code ? html`<div class=\"action-result\">\n      <devtools-code-block\n        .code=${step.code.trim()}\n        .codeLang=${'js'}\n        .displayNotice=${!Boolean(step.output)}\n        .header=${codeHeadingText}\n        .showCopyButton=${true}\n      ></devtools-code-block>\n  </div>` :\n                           Lit.nothing;\n  const output = step.output ? html`<div class=\"js-code-output\">\n    <devtools-code-block\n      .code=${step.output}\n      .codeLang=${'js'}\n      .displayNotice=${true}\n      .header=${lockedString(UIStringsNotTranslate.dataReturned)}\n      .showCopyButton=${false}\n    ></devtools-code-block>\n  </div>` :\n                               Lit.nothing;\n\n  return html`<div class=\"step-code\">${code}${output}</div>`;\n  // clang-format on\n}\n\nfunction renderStepDetails({\n  step,\n  markdownRenderer,\n  isLast,\n}: {\n  step: Step,\n  markdownRenderer: MarkdownLitRenderer,\n  isLast: boolean,\n}): Lit.LitTemplate {\n  const sideEffects = isLast && step.sideEffect ? renderSideEffectConfirmationUi(step) : Lit.nothing;\n  const thought = step.thought ? html`<p>${renderTextAsMarkdown(step.thought, markdownRenderer)}</p>` : Lit.nothing;\n\n  // clang-format off\n  const contextDetails = step.contextDetails ?\n  html`${Lit.Directives.repeat(\n    step.contextDetails,\n      contextDetail => {\n        return html`<div class=\"context-details\">\n      <devtools-code-block\n        .code=${contextDetail.text}\n        .codeLang=${contextDetail.codeLang || ''}\n        .displayNotice=${false}\n        .header=${contextDetail.title}\n        .showCopyButton=${true}\n      ></devtools-code-block>\n    </div>`;\n      },\n    )}` : Lit.nothing;\n\n  return html`<div class=\"step-details\">\n    ${thought}\n    ${renderStepCode(step)}\n    ${sideEffects}\n    ${contextDetails}\n  </div>`;\n  // clang-format on\n}\n\nfunction renderStepBadge({step, isLoading, isLast}: {\n  step: Step,\n  isLoading: boolean,\n  isLast: boolean,\n}): Lit.LitTemplate {\n  if (isLoading && isLast && !step.sideEffect) {\n    return html`<devtools-spinner></devtools-spinner>`;\n  }\n\n  let iconName = 'checkmark';\n  let ariaLabel: string|undefined = lockedString(UIStringsNotTranslate.completed);\n  let role: 'button'|undefined = 'button';\n  if (isLast && step.sideEffect) {\n    role = undefined;\n    ariaLabel = undefined;\n    iconName = 'pause-circle';\n  } else if (step.canceled) {\n    ariaLabel = lockedString(UIStringsNotTranslate.canceled);\n    iconName = 'cross';\n  }\n\n  return html`<devtools-icon\n      class=\"indicator\"\n      role=${ifDefined(role)}\n      aria-label=${ifDefined(ariaLabel)}\n      .name=${iconName}\n    ></devtools-icon>`;\n}\n\nfunction renderStep({step, isLoading, markdownRenderer, isLast}: {\n  step: Step,\n  isLoading: boolean,\n  markdownRenderer: MarkdownLitRenderer,\n  isLast: boolean,\n}): Lit.LitTemplate {\n  const stepClasses = Lit.Directives.classMap({\n    step: true,\n    empty: !step.thought && !step.code && !step.contextDetails && !step.sideEffect,\n    paused: Boolean(step.sideEffect),\n    canceled: Boolean(step.canceled),\n  });\n  // clang-format off\n  return html`\n    <details class=${stepClasses}\n      jslog=${VisualLogging.section('step')}\n      .open=${Boolean(step.sideEffect)}>\n      <summary>\n        <div class=\"summary\">\n          ${renderStepBadge({ step, isLoading, isLast })}\n          ${renderTitle(step)}\n          <devtools-icon\n            class=\"arrow\"\n            name=\"chevron-down\"\n          ></devtools-icon>\n        </div>\n      </summary>\n      ${renderStepDetails({step, markdownRenderer, isLast})}\n    </details>`;\n  // clang-format on\n}\n\nfunction renderSideEffectConfirmationUi(step: Step): Lit.LitTemplate {\n  if (!step.sideEffect) {\n    return Lit.nothing;\n  }\n\n  // clang-format off\n  return html`<div\n    class=\"side-effect-confirmation\"\n    jslog=${VisualLogging.section('side-effect-confirmation')}\n  >\n    <p>${lockedString(UIStringsNotTranslate.sideEffectConfirmationDescription)}</p>\n    <div class=\"side-effect-buttons-container\">\n      <devtools-button\n        .data=${\n          {\n            variant: Buttons.Button.Variant.OUTLINED,\n            jslogContext: 'decline-execute-code',\n          } as Buttons.Button.ButtonData\n        }\n        @click=${() => step.sideEffect?.onAnswer(false)}\n      >${lockedString(\n        UIStringsNotTranslate.negativeSideEffectConfirmation,\n      )}</devtools-button>\n      <devtools-button\n        .data=${\n          {\n            variant: Buttons.Button.Variant.PRIMARY,\n            jslogContext: 'accept-execute-code',\n            iconName: 'play',\n          } as Buttons.Button.ButtonData\n        }\n        @click=${() => step.sideEffect?.onAnswer(true)}\n      >${\n          lockedString(UIStringsNotTranslate.positiveSideEffectConfirmation)\n      }</devtools-button>\n    </div>\n  </div>`;\n  // clang-format on\n}\n\nfunction renderError(message: ModelChatMessage): Lit.LitTemplate {\n  if (message.error) {\n    let errorMessage;\n    switch (message.error) {\n      case AiAssistanceModel.AiAgent.ErrorType.UNKNOWN:\n      case AiAssistanceModel.AiAgent.ErrorType.BLOCK:\n        errorMessage = UIStringsNotTranslate.systemError;\n        break;\n      case AiAssistanceModel.AiAgent.ErrorType.MAX_STEPS:\n        errorMessage = UIStringsNotTranslate.maxStepsError;\n        break;\n      case AiAssistanceModel.AiAgent.ErrorType.ABORT:\n        return html`<p class=\"aborted\" jslog=${VisualLogging.section('aborted')}>${\n            lockedString(UIStringsNotTranslate.stoppedResponse)}</p>`;\n    }\n\n    return html`<p class=\"error\" jslog=${VisualLogging.section('error')}>${lockedString(errorMessage)}</p>`;\n  }\n\n  return Lit.nothing;\n}\n\nfunction renderImageChatMessage(inlineData: Host.AidaClient.MediaBlob): Lit.LitTemplate {\n  if (inlineData.data === AiAssistanceModel.AiConversation.NOT_FOUND_IMAGE_DATA) {\n    // clang-format off\n    return html`<div class=\"unavailable-image\" title=${UIStringsNotTranslate.imageUnavailable}>\n      <devtools-icon name='file-image'></devtools-icon>\n    </div>`;\n    // clang-format on\n  }\n  const imageUrl = `data:${inlineData.mimeType};base64,${inlineData.data}`;\n  // clang-format off\n    return html`<x-link\n      class=\"image-link\" title=${UIStringsNotTranslate.openImageInNewTab}\n      href=${imageUrl}\n    >\n      <img src=${imageUrl} alt=${UIStringsNotTranslate.imageInputSentToTheModel} />\n    </x-link>`;\n  // clang-format on\n}\n\nfunction renderActions(input: UserActionRowViewInput, output: ViewOutput): Lit.LitTemplate {\n  // clang-format off\n  return html`\n    <div class=\"ai-assistance-feedback-row\">\n      <div class=\"action-buttons\">\n        ${input.showRateButtons ? html`\n          <devtools-button\n            .data=${{\n              variant: Buttons.Button.Variant.ICON,\n              size: Buttons.Button.Size.SMALL,\n              iconName: 'thumb-up',\n              toggledIconName: 'thumb-up-filled',\n              toggled: input.currentRating === Host.AidaClient.Rating.POSITIVE,\n              toggleType: Buttons.Button.ToggleType.PRIMARY,\n              title: lockedString(UIStringsNotTranslate.thumbsUp),\n              jslogContext: 'thumbs-up',\n            } as Buttons.Button.ButtonData}\n            @click=${() => input.onRatingClick(Host.AidaClient.Rating.POSITIVE)}\n          ></devtools-button>\n          <devtools-button\n            .data=${{\n              variant: Buttons.Button.Variant.ICON,\n              size: Buttons.Button.Size.SMALL,\n              iconName: 'thumb-down',\n              toggledIconName: 'thumb-down-filled',\n              toggled: input.currentRating === Host.AidaClient.Rating.NEGATIVE,\n              toggleType: Buttons.Button.ToggleType.PRIMARY,\n              title: lockedString(UIStringsNotTranslate.thumbsDown),\n              jslogContext: 'thumbs-down',\n            } as Buttons.Button.ButtonData}\n            @click=${() => input.onRatingClick(Host.AidaClient.Rating.NEGATIVE)}\n          ></devtools-button>\n          <div class=\"vertical-separator\"></div>\n        `: Lit.nothing}\n        <devtools-button\n          .data=${\n            {\n              variant: Buttons.Button.Variant.ICON,\n              size: Buttons.Button.Size.SMALL,\n              title: lockedString(UIStringsNotTranslate.report),\n              iconName: 'report',\n              jslogContext: 'report',\n            } as Buttons.Button.ButtonData\n          }\n          @click=${input.onReportClick}\n        ></devtools-button>\n        <div class=\"vertical-separator\"></div>\n          <devtools-button\n            .data=${{\n              variant: Buttons.Button.Variant.ICON,\n              size: Buttons.Button.Size.SMALL,\n              title: lockedString(UIStringsNotTranslate.copyResponse),\n              iconName: 'copy',\n              jslogContext: 'copy-ai-response',\n            } as Buttons.Button.ButtonData}\n            aria-label=${lockedString(UIStringsNotTranslate.copyResponse)}\n            @click=${input.onCopyResponseClick}></devtools-button>\n      </div>\n      ${input.suggestions ? html`<div class=\"suggestions-container\">\n        <div class=\"scroll-button-container left hidden\" ${ref(element => { output.suggestionsLeftScrollButtonContainer = element; } )}>\n          <devtools-button\n            class='scroll-button'\n            .data=${{\n              variant: Buttons.Button.Variant.ICON,\n              size: Buttons.Button.Size.SMALL,\n              iconName: 'chevron-left',\n              title: lockedString(UIStringsNotTranslate.scrollToPrevious),\n              jslogContext: 'chevron-left',\n            } as Buttons.Button.ButtonData}\n            @click=${() => input.scrollSuggestionsScrollContainer('left')}\n          ></devtools-button>\n        </div>\n        <div class=\"suggestions-scroll-container\" @scroll=${input.onSuggestionsScrollOrResize} ${ref(element => { output.suggestionsScrollContainer = element; })}>\n          ${input.suggestions.map(suggestion => html`<devtools-button\n            class='suggestion'\n            .data=${{\n              variant: Buttons.Button.Variant.OUTLINED,\n              title: suggestion,\n              jslogContext: 'suggestion',\n            } as Buttons.Button.ButtonData}\n            @click=${() => input.onSuggestionClick(suggestion)}\n          >${suggestion}</devtools-button>`)}\n        </div>\n        <div class=\"scroll-button-container right hidden\" ${ref(element => { output.suggestionsRightScrollButtonContainer = element; })}>\n          <devtools-button\n            class='scroll-button'\n            .data=${{\n              variant: Buttons.Button.Variant.ICON,\n              size: Buttons.Button.Size.SMALL,\n              iconName: 'chevron-right',\n              title: lockedString(UIStringsNotTranslate.scrollToNext),\n              jslogContext: 'chevron-right',\n            } as Buttons.Button.ButtonData}\n            @click=${() => input.scrollSuggestionsScrollContainer('right')}\n          ></devtools-button>\n        </div>\n      </div>` : Lit.nothing}\n    </div>\n    ${input.isShowingFeedbackForm ? html`\n      <form class=\"feedback-form\" @submit=${input.onSubmit}>\n        <div class=\"feedback-header\">\n          <h4 class=\"feedback-title\">${lockedString(\n              UIStringsNotTranslate.whyThisRating,\n          )}</h4>\n          <devtools-button\n            aria-label=${lockedString(UIStringsNotTranslate.close)}\n            @click=${input.onClose}\n            .data=${\n              {\n                variant: Buttons.Button.Variant.ICON,\n                iconName: 'cross',\n                size: Buttons.Button.Size.SMALL,\n                title: lockedString(UIStringsNotTranslate.close),\n                jslogContext: 'close',\n              } as Buttons.Button.ButtonData\n            }\n          ></devtools-button>\n        </div>\n        <input\n          type=\"text\"\n          class=\"devtools-text-input feedback-input\"\n          @input=${(event: KeyboardEvent) => input.onInputChange((event.target as HTMLInputElement).value)}\n          placeholder=${lockedString(\n          UIStringsNotTranslate.provideFeedbackPlaceholder,\n          )}\n          jslog=${VisualLogging.textField('feedback').track({ keydown: 'Enter' })}\n        >\n        <span class=\"feedback-disclaimer\">${\n          lockedString(UIStringsNotTranslate.disclaimer)\n        }</span>\n        <div>\n          <devtools-button\n          aria-label=${lockedString(UIStringsNotTranslate.submit)}\n          .data=${\n            {\n                type: 'submit',\n                disabled: input.isSubmitButtonDisabled,\n                variant: Buttons.Button.Variant.OUTLINED,\n                size: Buttons.Button.Size.SMALL,\n                title: lockedString(UIStringsNotTranslate.submit),\n                jslogContext: 'send',\n              } as Buttons.Button.ButtonData\n            }\n          >${\n            lockedString(UIStringsNotTranslate.submit)\n          }</devtools-button>\n        </div>\n      </div>\n    </form>\n    ` : Lit.nothing}\n  `;\n  // clang-format on\n}\n\nexport class UserActionRow extends UI.Widget.Widget {\n  message: ChatMessage = {entity: ChatMessageEntity.USER, text: ''};\n  isLoading = false;\n  isReadOnly = false;\n  canShowFeedbackForm = false;\n  isLastMessage = false;\n  userInfo: Pick<Host.InspectorFrontendHostAPI.SyncInformation, 'accountImage'|'accountFullName'> = {};\n  markdownRenderer!: MarkdownLitRenderer;\n  onSuggestionClick: (suggestion: string) => void = () => {};\n  onFeedbackSubmit:\n      (rpcId: Host.AidaClient.RpcGlobalId, rate: Host.AidaClient.Rating, feedback?: string) => void = () => {};\n  onCopyResponseClick: (message: ModelChatMessage) => void = () => {};\n\n  #suggestionsResizeObserver = new ResizeObserver(() => this.#handleSuggestionsScrollOrResize());\n  #suggestionsEvaluateLayoutThrottler = new Common.Throttler.Throttler(50);\n\n  #feedbackValue = '';\n  #currentRating: Host.AidaClient.Rating|undefined;\n  #isShowingFeedbackForm = false;\n  #isSubmitButtonDisabled = true;\n\n  #view: View;\n  #viewOutput: ViewOutput = {};\n\n  constructor(element?: HTMLElement, view?: View) {\n    super(element);\n    this.#view = view ?? DEFAULT_VIEW;\n  }\n\n  override wasShown(): void {\n    super.wasShown();\n    void this.performUpdate();\n    this.#evaluateSuggestionsLayout();\n\n    if (this.#viewOutput.suggestionsScrollContainer) {\n      this.#suggestionsResizeObserver.observe(this.#viewOutput.suggestionsScrollContainer);\n    }\n  }\n\n  override performUpdate(): Promise<void>|void {\n    this.#view(\n        {\n          message: this.message,\n          isLoading: this.isLoading,\n          isReadOnly: this.isReadOnly,\n          canShowFeedbackForm: this.canShowFeedbackForm,\n          userInfo: this.userInfo,\n          markdownRenderer: this.markdownRenderer,\n          isLastMessage: this.isLastMessage,\n          onSuggestionClick: this.onSuggestionClick,\n          onRatingClick: this.#handleRateClick.bind(this),\n          onReportClick: () => UIHelpers.openInNewTab(REPORT_URL),\n          onCopyResponseClick: () => {\n            if (this.message.entity === ChatMessageEntity.MODEL) {\n              this.onCopyResponseClick(this.message);\n            }\n          },\n          scrollSuggestionsScrollContainer: this.#scrollSuggestionsScrollContainer.bind(this),\n          onSuggestionsScrollOrResize: this.#handleSuggestionsScrollOrResize.bind(this),\n          onSubmit: this.#handleSubmit.bind(this),\n          onClose: this.#handleClose.bind(this),\n          onInputChange: this.#handleInputChange.bind(this),\n          isSubmitButtonDisabled: this.#isSubmitButtonDisabled,\n          // Props for actions logic\n          showRateButtons: this.message.entity === ChatMessageEntity.MODEL && !!this.message.rpcId,\n          suggestions: (this.message.entity === ChatMessageEntity.MODEL && !this.isReadOnly &&\n                        this.message.parts.at(-1)?.type === 'answer') ?\n              (this.message.parts.at(-1) as AnswerPart).suggestions :\n              undefined,\n          currentRating: this.#currentRating,\n          isShowingFeedbackForm: this.#isShowingFeedbackForm,\n          onFeedbackSubmit: this.onFeedbackSubmit,\n        },\n        this.#viewOutput, this.contentElement);\n  }\n\n  #handleInputChange(value: string): void {\n    this.#feedbackValue = value;\n    const disableSubmit = !value;\n    if (disableSubmit !== this.#isSubmitButtonDisabled) {\n      this.#isSubmitButtonDisabled = disableSubmit;\n      void this.performUpdate();\n    }\n  }\n\n  #evaluateSuggestionsLayout = (): void => {\n    const suggestionsScrollContainer = this.#viewOutput.suggestionsScrollContainer;\n    const leftScrollButtonContainer = this.#viewOutput.suggestionsLeftScrollButtonContainer;\n    const rightScrollButtonContainer = this.#viewOutput.suggestionsRightScrollButtonContainer;\n    if (!suggestionsScrollContainer || !leftScrollButtonContainer || !rightScrollButtonContainer) {\n      return;\n    }\n\n    const shouldShowLeftButton = suggestionsScrollContainer.scrollLeft > SCROLL_ROUNDING_OFFSET;\n    const shouldShowRightButton = suggestionsScrollContainer.scrollLeft +\n            (suggestionsScrollContainer as HTMLElement).offsetWidth + SCROLL_ROUNDING_OFFSET <\n        suggestionsScrollContainer.scrollWidth;\n    leftScrollButtonContainer.classList.toggle('hidden', !shouldShowLeftButton);\n    rightScrollButtonContainer.classList.toggle('hidden', !shouldShowRightButton);\n  };\n\n  override willHide(): void {\n    super.willHide();\n    this.#suggestionsResizeObserver.disconnect();\n  }\n\n  #handleSuggestionsScrollOrResize(): void {\n    void this.#suggestionsEvaluateLayoutThrottler.schedule(() => {\n      this.#evaluateSuggestionsLayout();\n      return Promise.resolve();\n    });\n  }\n\n  #scrollSuggestionsScrollContainer(direction: 'left'|'right'): void {\n    const suggestionsScrollContainer = this.#viewOutput.suggestionsScrollContainer;\n    if (!suggestionsScrollContainer) {\n      return;\n    }\n\n    suggestionsScrollContainer.scroll({\n      top: 0,\n      left: direction === 'left' ? suggestionsScrollContainer.scrollLeft - suggestionsScrollContainer.clientWidth :\n                                   suggestionsScrollContainer.scrollLeft + suggestionsScrollContainer.clientWidth,\n      behavior: 'smooth',\n    });\n  }\n\n  #handleRateClick(rating: Host.AidaClient.Rating): void {\n    if (this.#currentRating === rating) {\n      this.#currentRating = undefined;\n      this.#isShowingFeedbackForm = false;\n      this.#isSubmitButtonDisabled = true;\n      // This effectively reset the user rating\n      if (this.message.entity === ChatMessageEntity.MODEL && this.message.rpcId) {\n        this.onFeedbackSubmit(this.message.rpcId, Host.AidaClient.Rating.SENTIMENT_UNSPECIFIED);\n      }\n      void this.performUpdate();\n      return;\n    }\n\n    this.#currentRating = rating;\n    this.#isShowingFeedbackForm = this.canShowFeedbackForm;\n    if (this.message.entity === ChatMessageEntity.MODEL && this.message.rpcId) {\n      this.onFeedbackSubmit(this.message.rpcId, rating);\n    }\n    void this.performUpdate();\n  }\n\n  #handleClose(): void {\n    this.#isShowingFeedbackForm = false;\n    this.#isSubmitButtonDisabled = true;\n    void this.performUpdate();\n  }\n\n  #handleSubmit(ev: SubmitEvent): void {\n    ev.preventDefault();\n    const input = this.#feedbackValue;\n    if (!this.#currentRating || !input) {\n      return;\n    }\n    if (this.message.entity === ChatMessageEntity.MODEL && this.message.rpcId) {\n      this.onFeedbackSubmit(this.message.rpcId, this.#currentRating, input);\n    }\n    this.#isShowingFeedbackForm = false;\n    this.#isSubmitButtonDisabled = true;\n    void this.performUpdate();\n  }\n}\n"]}