{"version":3,"file":"ApplicationPanelTreeElement.js","sourceRoot":"","sources":["../../../../../../front_end/panels/application/ApplicationPanelTreeElement.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright 2020 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as Common from '../../core/common/common.js';\nimport type * as Platform from '../../core/platform/platform.js';\nimport * as UI from '../../ui/legacy/legacy.js';\n\nimport type {ResourcesPanel} from './ResourcesPanel.js';\n\nexport class ApplicationPanelTreeElement extends UI.TreeOutline.TreeElement {\n  protected readonly resourcesPanel: ResourcesPanel;\n\n  constructor(resourcesPanel: ResourcesPanel, title: string, expandable: boolean, jslogContext: string) {\n    super(title, expandable, jslogContext);\n    this.resourcesPanel = resourcesPanel;\n    UI.ARIAUtils.setLabel(this.listItemElement, title);\n    this.listItemElement.tabIndex = -1;\n  }\n\n  override deselect(): void {\n    super.deselect();\n    this.listItemElement.tabIndex = -1;\n  }\n\n  get itemURL(): Platform.DevToolsPath.UrlString {\n    throw new Error('Unimplemented Method');\n  }\n\n  override onselect(selectedByUser: boolean|undefined): boolean {\n    if (!selectedByUser) {\n      return false;\n    }\n\n    const path: Platform.DevToolsPath.UrlString[] = [];\n    for (let el: UI.TreeOutline.TreeElement|null = this; el; el = el.parent) {\n      const url = el instanceof ApplicationPanelTreeElement && el.itemURL;\n      if (!url) {\n        break;\n      }\n      path.push(url);\n    }\n    this.resourcesPanel.setLastSelectedItemPath(path);\n\n    return false;\n  }\n\n  showView(view: UI.Widget.Widget|null): void {\n    this.resourcesPanel.showView(view);\n  }\n}\n\nexport class ExpandableApplicationPanelTreeElement extends ApplicationPanelTreeElement {\n  protected readonly expandedSetting: Common.Settings.Setting<boolean>;\n  protected readonly categoryName: string;\n  protected categoryLink: Platform.DevToolsPath.UrlString|null;\n\n  // These strings are used for the empty state in each top most tree element\n  // in the Application Panel.\n  protected emptyCategoryHeadline: string;\n  protected categoryDescription: string;\n\n  constructor(\n      resourcesPanel: ResourcesPanel, categoryName: string, emptyCategoryHeadline: string, categoryDescription: string,\n      settingsKey: string, settingsDefault = false) {\n    super(resourcesPanel, categoryName, false, settingsKey);\n    this.expandedSetting =\n        Common.Settings.Settings.instance().createSetting('resources-' + settingsKey + '-expanded', settingsDefault);\n    this.categoryName = categoryName;\n    this.categoryLink = null;\n    this.emptyCategoryHeadline = emptyCategoryHeadline;\n    this.categoryDescription = categoryDescription;\n  }\n\n  override get itemURL(): Platform.DevToolsPath.UrlString {\n    return 'category://' + this.categoryName as Platform.DevToolsPath.UrlString;\n  }\n\n  setLink(link: Platform.DevToolsPath.UrlString): void {\n    this.categoryLink = link;\n  }\n\n  override onselect(selectedByUser: boolean|undefined): boolean {\n    super.onselect(selectedByUser);\n    this.updateCategoryView();\n    return false;\n  }\n\n  private updateCategoryView(): void {\n    const headline = this.childCount() === 0 ? this.emptyCategoryHeadline : this.categoryName;\n    this.resourcesPanel.showCategoryView(this.categoryName, headline, this.categoryDescription, this.categoryLink);\n  }\n\n  override appendChild(\n      child: UI.TreeOutline.TreeElement,\n      comparator?: ((arg0: UI.TreeOutline.TreeElement, arg1: UI.TreeOutline.TreeElement) => number)|undefined): void {\n    super.appendChild(child, comparator);\n    // Only update if relevant (changing from 0 to 1 child).\n    if (this.selected && this.childCount() === 1) {\n      this.updateCategoryView();\n    }\n  }\n\n  override removeChild(child: UI.TreeOutline.TreeElement): void {\n    super.removeChild(child);\n    // Only update if relevant (changing to 0 children).\n    if (this.selected && this.childCount() === 0) {\n      this.updateCategoryView();\n    }\n  }\n\n  override onattach(): void {\n    super.onattach();\n    if (this.expandedSetting.get()) {\n      this.expand();\n    }\n  }\n\n  override onexpand(): void {\n    this.expandedSetting.set(true);\n  }\n\n  override oncollapse(): void {\n    this.expandedSetting.set(false);\n  }\n}\n"]}