{"version":3,"file":"CookieItemsView.js","sourceRoot":"","sources":["../../../../../../front_end/panels/application/CookieItemsView.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright 2021 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n/* eslint-disable @devtools/no-imperative-dom-api */\n\n/*\n * Copyright (C) 2009 Apple Inc.  All rights reserved.\n * Copyright (C) 2009 Joseph Pecoraro\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions\n * are met:\n *\n * 1.  Redistributions of source code must retain the above copyright\n *     notice, this list of conditions and the following disclaimer.\n * 2.  Redistributions in binary form must reproduce the above copyright\n *     notice, this list of conditions and the following disclaimer in the\n *     documentation and/or other materials provided with the distribution.\n * 3.  Neither the name of Apple Computer, Inc. (\"Apple\") nor the names of\n *     its contributors may be used to endorse or promote products derived\n *     from this software without specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY APPLE AND ITS CONTRIBUTORS \"AS IS\" AND ANY\n * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL APPLE OR ITS CONTRIBUTORS BE LIABLE FOR ANY\n * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF\n * THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\nimport * as Common from '../../core/common/common.js';\nimport * as i18n from '../../core/i18n/i18n.js';\nimport * as SDK from '../../core/sdk/sdk.js';\nimport * as IssuesManager from '../../models/issues_manager/issues_manager.js';\nimport * as CookieTable from '../../ui/legacy/components/cookie_table/cookie_table.js';\nimport * as UI from '../../ui/legacy/legacy.js';\nimport * as VisualLogging from '../../ui/visual_logging/visual_logging.js';\n\nimport cookieItemsViewStyles from './cookieItemsView.css.js';\nimport {StorageItemsToolbar} from './StorageItemsToolbar.js';\n\nconst UIStrings = {\n  /**\n   * @description Label for checkbox to show URL-decoded cookie values\n   */\n  showUrlDecoded: 'Show URL-decoded',\n  /**\n   * @description Text in Cookie Items View of the Application panel to indicate that no cookie has been selected for preview\n   */\n  noCookieSelected: 'No cookie selected',\n  /**\n   * @description Text in Cookie Items View of the Application panel\n   */\n  selectACookieToPreviewItsValue: 'Select a cookie to preview its value',\n  /**\n   * @description Text for filter in Cookies View of the Application panel\n   */\n  onlyShowCookiesWithAnIssue: 'Only show cookies with an issue',\n  /**\n   * @description Title for filter in the Cookies View of the Application panel\n   */\n  onlyShowCookiesWhichHaveAn: 'Only show cookies that have an associated issue',\n  /**\n   * @description Label to only delete the cookies that are visible after filtering\n   */\n  clearFilteredCookies: 'Clear filtered cookies',\n  /**\n   * @description Label to delete all cookies\n   */\n  clearAllCookies: 'Clear all cookies',\n  /**\n   * @description Alert message for screen reader to announce # of cookies in the table\n   * @example {5} PH1\n   */\n  numberOfCookiesShownInTableS: 'Number of cookies shown in table: {PH1}',\n} as const;\nconst str_ = i18n.i18n.registerUIStrings('panels/application/CookieItemsView.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\nclass CookiePreviewWidget extends UI.Widget.VBox {\n  private cookie: SDK.Cookie.Cookie|null;\n  private showDecodedSetting: Common.Settings.Setting<boolean>;\n  private toggle: UI.UIUtils.CheckboxLabel;\n  private value: HTMLDivElement;\n\n  constructor() {\n    super({jslog: `${VisualLogging.section('cookie-preview')}`});\n    this.setMinimumSize(230, 45);\n    this.cookie = null;\n    this.showDecodedSetting = Common.Settings.Settings.instance().createSetting('cookie-view-show-decoded', false);\n\n    const header = document.createElement('div');\n    header.classList.add('cookie-preview-widget-header');\n    const span = document.createElement('span');\n    span.classList.add('cookie-preview-widget-header-label');\n    span.textContent = 'Cookie Value';\n    header.appendChild(span);\n    this.contentElement.appendChild(header);\n\n    const toggle = UI.UIUtils.CheckboxLabel.create(\n        i18nString(UIStrings.showUrlDecoded), this.showDecodedSetting.get(), undefined, 'show-url-decoded');\n    toggle.title = i18nString(UIStrings.showUrlDecoded);\n    toggle.classList.add('cookie-preview-widget-toggle');\n    toggle.addEventListener('click', () => this.showDecoded(!this.showDecodedSetting.get()));\n    header.appendChild(toggle);\n    this.toggle = toggle;\n\n    const value = document.createElement('div');\n    value.classList.add('cookie-preview-widget-cookie-value');\n    value.textContent = '';\n    value.addEventListener('dblclick', this.handleDblClickOnCookieValue.bind(this));\n    this.value = value;\n\n    this.contentElement.classList.add('cookie-preview-widget');\n    this.contentElement.appendChild(value);\n  }\n\n  showDecoded(decoded: boolean): void {\n    if (!this.cookie) {\n      return;\n    }\n    this.showDecodedSetting.set(decoded);\n    this.toggle.checked = decoded;\n    this.updatePreview();\n  }\n\n  private updatePreview(): void {\n    if (this.cookie) {\n      this.value.textContent =\n          this.showDecodedSetting.get() ? decodeURIComponent(this.cookie.value()) : this.cookie.value();\n    } else {\n      this.value.textContent = '';\n    }\n  }\n\n  setCookie(cookie: SDK.Cookie.Cookie): void {\n    this.cookie = cookie;\n    this.updatePreview();\n  }\n\n  /**\n   * Select all text even if there a spaces in it\n   */\n  handleDblClickOnCookieValue(event: Event): void {\n    event.preventDefault();\n    const range = document.createRange();\n    range.selectNode(this.value);\n    const selection = window.getSelection();\n    if (!selection) {\n      return;\n    }\n    selection.removeAllRanges();\n    selection.addRange(range);\n  }\n}\n\nexport class CookieItemsView extends UI.Widget.VBox {\n  private model: SDK.CookieModel.CookieModel;\n  private cookieDomain: string;\n  private cookiesTable: CookieTable.CookiesTable.CookiesTable;\n  private readonly splitWidget: UI.SplitWidget.SplitWidget;\n  private readonly previewPanel: UI.Widget.VBox;\n  private readonly previewWidget: CookiePreviewWidget;\n  private readonly emptyWidget: UI.EmptyWidget.EmptyWidget;\n  private onlyIssuesFilterUI: UI.Toolbar.ToolbarCheckbox;\n  private allCookies: SDK.Cookie.Cookie[];\n  private shownCookies: SDK.Cookie.Cookie[];\n  private selectedCookie: SDK.Cookie.Cookie|null;\n  #toolbar: StorageItemsToolbar;\n  constructor(model: SDK.CookieModel.CookieModel, cookieDomain: string) {\n    super({jslog: `${VisualLogging.pane('cookies-data')}`});\n    this.registerRequiredCSS(cookieItemsViewStyles);\n\n    this.element.classList.add('storage-view');\n\n    this.model = model;\n    this.cookieDomain = cookieDomain;\n\n    this.#toolbar = new StorageItemsToolbar();\n    this.#toolbar.element.classList.add('flex-none');\n    this.#toolbar.show(this.element);\n\n    this.cookiesTable = new CookieTable.CookiesTable.CookiesTable(\n        /* renderInline */ false, this.saveCookie.bind(this), this.refreshItems.bind(this),\n        this.handleCookieSelected.bind(this), this.deleteCookie.bind(this));\n\n    this.cookiesTable.setMinimumSize(0, 50);\n\n    this.splitWidget = new UI.SplitWidget.SplitWidget(\n        /* isVertical: */ false, /* secondIsSidebar: */ true, 'cookie-items-split-view-state');\n    this.splitWidget.show(this.element);\n\n    this.previewPanel = new UI.Widget.VBox();\n    this.previewPanel.element.setAttribute('jslog', `${VisualLogging.pane('preview').track({resize: true})}`);\n    const resizer = this.previewPanel.element.createChild('div', 'preview-panel-resizer');\n\n    this.splitWidget.setMainWidget(this.cookiesTable);\n    this.splitWidget.setSidebarWidget(this.previewPanel);\n    this.splitWidget.installResizer(resizer);\n\n    this.previewWidget = new CookiePreviewWidget();\n    this.emptyWidget = new UI.EmptyWidget.EmptyWidget(\n        i18nString(UIStrings.noCookieSelected), i18nString(UIStrings.selectACookieToPreviewItsValue));\n    this.emptyWidget.show(this.previewPanel.contentElement);\n\n    this.onlyIssuesFilterUI = new UI.Toolbar.ToolbarCheckbox(\n        i18nString(UIStrings.onlyShowCookiesWithAnIssue), i18nString(UIStrings.onlyShowCookiesWhichHaveAn), () => {\n          this.updateWithCookies(this.allCookies);\n        }, 'only-show-cookies-with-issues');\n    this.#toolbar.appendToolbarItem(this.onlyIssuesFilterUI);\n\n    this.allCookies = [];\n    this.shownCookies = [];\n    this.selectedCookie = null;\n\n    this.setCookiesDomain(model, cookieDomain);\n\n    this.#toolbar.addEventListener(StorageItemsToolbar.Events.DELETE_SELECTED, this.deleteSelectedItem, this);\n    this.#toolbar.addEventListener(StorageItemsToolbar.Events.DELETE_ALL, this.deleteAllItems, this);\n    this.#toolbar.addEventListener(StorageItemsToolbar.Events.REFRESH, this.refreshItems, this);\n  }\n\n  setCookiesDomain(model: SDK.CookieModel.CookieModel, domain: string): void {\n    this.model.removeEventListener(SDK.CookieModel.Events.COOKIE_LIST_UPDATED, this.onCookieListUpdate, this);\n    this.model = model;\n    this.cookieDomain = domain;\n    this.refreshItems();\n    this.model.addEventListener(SDK.CookieModel.Events.COOKIE_LIST_UPDATED, this.onCookieListUpdate, this);\n  }\n\n  override wasShown(): void {\n    super.wasShown();\n    this.refreshItems();\n  }\n\n  private showPreview(cookie: SDK.Cookie.Cookie|null): void {\n    if (cookie === this.selectedCookie) {\n      return;\n    }\n    this.selectedCookie = cookie;\n\n    if (!cookie) {\n      this.previewWidget.detach();\n      this.emptyWidget.show(this.previewPanel.contentElement);\n    } else {\n      this.emptyWidget.detach();\n      this.previewWidget.setCookie(cookie);\n      this.previewWidget.show(this.previewPanel.contentElement);\n    }\n  }\n\n  private handleCookieSelected(): void {\n    const cookie = this.cookiesTable.selectedCookie();\n    this.#toolbar.setCanDeleteSelected(Boolean(cookie));\n\n    this.showPreview(cookie);\n  }\n\n  private async saveCookie(newCookie: SDK.Cookie.Cookie, oldCookie: SDK.Cookie.Cookie|null): Promise<boolean> {\n    if (oldCookie && newCookie.key() !== oldCookie.key()) {\n      await this.model.deleteCookie(oldCookie);\n    }\n    return await this.model.saveCookie(newCookie);\n  }\n\n  private deleteCookie(cookie: SDK.Cookie.Cookie, callback: () => void): void {\n    void this.model.deleteCookie(cookie).then(callback);\n  }\n\n  private updateWithCookies(allCookies: SDK.Cookie.Cookie[]): void {\n    this.allCookies = allCookies;\n\n    const parsedURL = Common.ParsedURL.ParsedURL.fromString(this.cookieDomain);\n    const host = parsedURL ? parsedURL.host : '';\n    this.cookiesTable.setCookieDomain(host);\n\n    this.shownCookies = this.filter(allCookies, cookie => `${cookie.name()} ${cookie.value()} ${cookie.domain()}`);\n    if (this.#toolbar.hasFilter()) {\n      this.#toolbar.setDeleteAllTitle(i18nString(UIStrings.clearFilteredCookies));\n      this.#toolbar.setDeleteAllGlyph('filter-clear');\n    } else {\n      this.#toolbar.setDeleteAllTitle(i18nString(UIStrings.clearAllCookies));\n      this.#toolbar.setDeleteAllGlyph('clear-list');\n    }\n    this.cookiesTable.setCookies(this.shownCookies, this.model.getCookieToBlockedReasonsMap());\n    UI.ARIAUtils.LiveAnnouncer.alert(\n        i18nString(UIStrings.numberOfCookiesShownInTableS, {PH1: this.shownCookies.length}));\n    this.#toolbar.setCanFilter(true);\n    this.#toolbar.setCanDeleteAll(this.shownCookies.length > 0);\n    this.#toolbar.setCanDeleteSelected(Boolean(this.cookiesTable.selectedCookie()));\n\n    if (!this.cookiesTable.selectedCookie()) {\n      this.showPreview(null);\n    }\n  }\n\n  filter<T>(items: T[], keyFunction: (arg0: T) => string): T[] {\n    const predicate = (object: T|null): boolean => {\n      if (!this.onlyIssuesFilterUI.checked()) {\n        return true;\n      }\n      if (object instanceof SDK.Cookie.Cookie) {\n        return IssuesManager.RelatedIssue.hasIssues(object);\n      }\n      return false;\n    };\n    return items.filter(item => this.#toolbar.filterRegex?.test(keyFunction(item)) ?? true).filter(predicate);\n  }\n\n  /**\n   * This will only delete the currently visible cookies.\n   */\n  deleteAllItems(): void {\n    this.showPreview(null);\n    void this.model.deleteCookies(this.shownCookies);\n  }\n\n  deleteSelectedItem(): void {\n    const selectedCookie = this.cookiesTable.selectedCookie();\n    if (selectedCookie) {\n      this.showPreview(null);\n      void this.model.deleteCookie(selectedCookie);\n    }\n  }\n\n  private onCookieListUpdate(): void {\n    void this.model.getCookiesForDomain(this.cookieDomain).then(this.updateWithCookies.bind(this));\n  }\n\n  refreshItems(): void {\n    void this.model.getCookiesForDomain(this.cookieDomain, true).then(this.updateWithCookies.bind(this));\n  }\n}\n"]}