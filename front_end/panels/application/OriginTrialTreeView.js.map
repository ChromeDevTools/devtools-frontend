{"version":3,"file":"OriginTrialTreeView.js","sourceRoot":"","sources":["../../../../../../front_end/panels/application/OriginTrialTreeView.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright 2021 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport '../../ui/components/icon_button/icon_button.js';\nimport '../../ui/legacy/legacy.js';\nimport '../../ui/components/adorners/adorners.js';\n\nimport * as i18n from '../../core/i18n/i18n.js';\nimport * as Protocol from '../../generated/protocol.js';\nimport type * as TreeOutline from '../../ui/components/tree_outline/tree_outline.js';\nimport * as UI from '../../ui/legacy/legacy.js';\nimport {Directives, html, type LitTemplate, nothing, render, type TemplateResult} from '../../ui/lit/lit.js';\n\nimport originTrialTokenRowsStyles from './originTrialTokenRows.css.js';\nimport originTrialTreeViewStyles from './originTrialTreeView.css.js';\n\nconst {classMap} = Directives;\nconst {widgetConfig} = UI.Widget;\n\nconst UIStrings = {\n  /**\n   * @description Label for the 'origin' field in a parsed Origin Trial Token.\n   */\n  origin: 'Origin',\n  /**\n   * @description Label for `trialName` field in a parsed Origin Trial Token.\n   * This field is only shown when token has unknown trial name as the token\n   * will be put into 'UNKNOWN' group.\n   */\n  trialName: 'Trial Name',\n  /**\n   * @description Label for `expiryTime` field in a parsed Origin Trial Token.\n   */\n  expiryTime: 'Expiry Time',\n  /**\n   * @description Label for `usageRestriction` field in a parsed Origin Trial Token.\n   */\n  usageRestriction: 'Usage Restriction',\n  /**\n   * @description Label for `isThirdParty` field in a parsed Origin Trial Token.\n   */\n  isThirdParty: 'Third Party',\n  /**\n   * @description Label for a field containing info about an Origin Trial Token's `matchSubDomains` field.\n   *An Origin Trial Token contains an origin URL. The `matchSubDomains` field describes whether the token\n   *only applies to the origin URL or to all subdomains of the origin URL as well.\n   *The field contains either 'true' or 'false'.\n   */\n  matchSubDomains: 'Subdomain Matching',\n  /**\n   * @description Label for the raw(= encoded / not human-readable) Origin Trial Token.\n   */\n  rawTokenText: 'Raw Token',\n  /**\n   * @description Label for `status` field in an Origin Trial Token.\n   */\n  status: 'Token Status',\n  /**\n   * @description Label for tokenWithStatus node.\n   */\n  token: 'Token',\n  /**\n   * @description Label for a badge showing the number of Origin Trial Tokens. This number is always greater than 1.\n   * @example {2} PH1\n   */\n  tokens: '{PH1} tokens',\n  /**\n   * @description Label shown when there are no Origin Trial Tokens in the Frame view of the Application panel.\n   */\n  noTrialTokens: 'No trial tokens',\n} as const;\nconst str_ = i18n.i18n.registerUIStrings('panels/application/OriginTrialTreeView.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\n\ntype TreeNode<DataType> = TreeOutline.TreeOutlineUtils.TreeNode<DataType>;\n\n/**\n * The Origin Trial Tree has 4 levels of content:\n * - Origin Trial (has multiple Origin Trial tokens)\n * - Origin Trial Token (has only 1 raw token text)\n * - Fields in Origin Trial Token\n * - Raw Origin Trial Token text (folded because the content is long)\n **/\nexport type OriginTrialTreeNodeData = Protocol.Page.OriginTrial|Protocol.Page.OriginTrialTokenWithStatus|string;\n\nfunction renderOriginTrialTree(originTrial: Protocol.Page.OriginTrial): LitTemplate {\n  const success = originTrial.status === Protocol.Page.OriginTrialStatus.Enabled;\n  // clang-format off\n  return html`\n    <li role=\"treeitem\">\n      ${originTrial.trialName}\n      <devtools-adorner class=\"badge-${success ? 'success' : 'error'}\">\n        ${originTrial.status}\n      </devtools-adorner>\n      ${originTrial.tokensWithStatus.length > 1 ?  html`\n        <devtools-adorner class=\"badge-secondary\">\n          ${i18nString(UIStrings.tokens, {PH1: originTrial.tokensWithStatus.length})}\n        </devtools-adorner>`\n        : nothing}\n      <ul role=\"group\" hidden>\n        ${originTrial.tokensWithStatus.length > 1 ?\n          originTrial.tokensWithStatus.map(renderTokenNode) :\n          renderTokenDetailsNodes(originTrial.tokensWithStatus[0])}\n      </ul>\n    </li>`;\n  // clang-format on\n}\n\nfunction renderTokenNode(token: Protocol.Page.OriginTrialTokenWithStatus): LitTemplate {\n  const success = token.status === Protocol.Page.OriginTrialTokenStatus.Success;\n  // Only display token status for convenience when the node is not expanded.\n  // clang-format off\n  return html`\n    <li role=\"treeitem\">\n      ${i18nString(UIStrings.token)}\n      <devtools-adorner class=\"token-status-badge badge-${success ? 'success' : 'error'}\">\n        ${token.status}\n      </devtools-adorner>\n      <ul role=\"group\" hidden>\n        ${renderTokenDetailsNodes(token)}\n      </ul>\n    </li>`;\n}\n\ninterface TokenField {\n  name: string;\n  value: {text: string, hasError?: boolean};\n}\n\nfunction renderTokenDetails(token: Protocol.Page.OriginTrialTokenWithStatus): TemplateResult {\n  return html`\n    <li role=\"treeitem\">\n      <devtools-widget .widgetConfig=${widgetConfig(OriginTrialTokenRows, {data: token})}>\n      </devtools-widget>\n    </li>`;\n}\n\nfunction renderTokenDetailsNodes(token: Protocol.Page.OriginTrialTokenWithStatus):\n    TemplateResult {\n  // clang-format off\n  return html`\n    ${renderTokenDetails(token)}\n    ${renderRawTokenTextNode(token.rawTokenText)}\n  `;\n  // clang-format on\n}\n\nfunction renderRawTokenTextNode(tokenText: string): LitTemplate {\n  // clang-format off\n  return html`\n    <li role=\"treeitem\">\n      ${i18nString(UIStrings.rawTokenText)}\n      <ul role=\"group\" hidden>\n        <li role=\"treeitem\">\n          <div style=\"overflow-wrap: break-word;\">\n            ${tokenText}\n          </div>\n        </li>\n      </ul>\n    </li>`;\n  // clang-format on\n}\n\nexport interface OriginTrialTokenRowsData {\n  node: TreeNode<OriginTrialTreeNodeData>;\n}\n\ninterface RowsViewInput {\n  tokenWithStatus: Protocol.Page.OriginTrialTokenWithStatus;\n  parsedTokenDetails: TokenField[];\n}\n\ntype RowsView = (input: RowsViewInput, output: undefined, target: HTMLElement) => void;\n\nconst ROWS_DEFAULT_VIEW: RowsView = (input, _output, target) => {\n  const success = input.tokenWithStatus.status === Protocol.Page.OriginTrialTokenStatus.Success;\n  // clang-format off\n  render(html`\n    <style>\n      ${originTrialTokenRowsStyles}\n      ${originTrialTreeViewStyles}\n    </style>\n    <div class=\"content\">\n      <div class=\"key\">${i18nString(UIStrings.status)}</div>\n      <div class=\"value\">\n        <devtools-adorner class=\"badge-${success ? 'success' : 'error'}\">\n          ${input.tokenWithStatus.status}\n        </devtools-adorner>\n      </div>\n      ${input.parsedTokenDetails.map((field: TokenField) => html`\n        <div class=\"key\">${field.name}</div>\n        <div class=\"value\">\n          <div class=${classMap({'error-text': Boolean(field.value.hasError)})}>\n            ${field.value.text}\n          </div>\n        </div>\n      `)}\n    </div>`, target);\n  // clang-format on\n};\n\nexport class OriginTrialTokenRows extends UI.Widget.Widget {\n  #view: RowsView;\n  #tokenWithStatus: Protocol.Page.OriginTrialTokenWithStatus|null = null;\n  #parsedTokenDetails: TokenField[] = [];\n  #dateFormatter: Intl.DateTimeFormat = new Intl.DateTimeFormat(\n      i18n.DevToolsLocale.DevToolsLocale.instance().locale,\n      {dateStyle: 'long', timeStyle: 'long'},\n  );\n\n  constructor(element?: HTMLElement, view: RowsView = ROWS_DEFAULT_VIEW) {\n    super(element, {useShadowDom: true});\n    this.#view = view;\n  }\n\n  set data(data: Protocol.Page.OriginTrialTokenWithStatus) {\n    this.#tokenWithStatus = data;\n    this.#setTokenFields();\n  }\n\n  connectedCallback(): void {\n    this.requestUpdate();\n  }\n\n  #setTokenFields(): void {\n    if (!this.#tokenWithStatus?.parsedToken) {\n      return;\n    }\n    this.#parsedTokenDetails = [\n      {\n        name: i18nString(UIStrings.origin),\n        value: {\n          text: this.#tokenWithStatus.parsedToken.origin,\n          hasError: this.#tokenWithStatus.status === Protocol.Page.OriginTrialTokenStatus.WrongOrigin,\n        },\n      },\n      {\n        name: i18nString(UIStrings.expiryTime),\n        value: {\n          text: this.#dateFormatter.format(this.#tokenWithStatus.parsedToken.expiryTime * 1000),\n          hasError: this.#tokenWithStatus.status === Protocol.Page.OriginTrialTokenStatus.Expired\n        },\n      },\n      {\n        name: i18nString(UIStrings.usageRestriction),\n        value: {text: this.#tokenWithStatus.parsedToken.usageRestriction},\n      },\n      {\n        name: i18nString(UIStrings.isThirdParty),\n        value: {text: this.#tokenWithStatus.parsedToken.isThirdParty.toString()},\n      },\n      {\n        name: i18nString(UIStrings.matchSubDomains),\n        value: {text: this.#tokenWithStatus.parsedToken.matchSubDomains.toString()},\n      },\n    ];\n\n    if (this.#tokenWithStatus.status === Protocol.Page.OriginTrialTokenStatus.UnknownTrial) {\n      this.#parsedTokenDetails = [\n        {\n          name: i18nString(UIStrings.trialName),\n          value: {text: this.#tokenWithStatus.parsedToken.trialName},\n        },\n        ...this.#parsedTokenDetails,\n      ];\n    }\n    this.requestUpdate();\n  }\n\n  override performUpdate(): void {\n    if (!this.#tokenWithStatus) {\n      return;\n    }\n\n    const viewInput: RowsViewInput = {\n      tokenWithStatus: this.#tokenWithStatus,\n      parsedTokenDetails: this.#parsedTokenDetails,\n    };\n    this.#view(viewInput, undefined, this.contentElement);\n  }\n}\n\nexport interface OriginTrialTreeViewData {\n  trials: Protocol.Page.OriginTrial[];\n}\n\ntype View = (input: OriginTrialTreeViewData, output: undefined, target: HTMLElement) => void;\n\nconst DEFAULT_VIEW: View = (input, _output, target) => {\n  if (!input.trials.length) {\n    // clang-format off\n    render(html`\n      <span class=\"status-badge\">\n        <devtools-icon class=\"medium\" name=\"clear\"></devtools-icon>\n        <span>${i18nString(UIStrings.noTrialTokens)}</span>\n      </span>`, target);\n    // clang-format on\n    return;\n  }\n\n  // clang-format off\n  render(html`\n    <style>${originTrialTreeViewStyles}</style>\n    <devtools-tree .template=${html`\n      <style>${originTrialTreeViewStyles}</style>\n      <ul role=\"tree\">\n        ${input.trials.map(renderOriginTrialTree)}\n      </ul>\n    `}>\n    </devtools-tree>\n  `, target);\n  // clang-format on\n};\n\nexport class OriginTrialTreeView extends UI.Widget.Widget {\n  #data: OriginTrialTreeViewData = {trials: []};\n  #view: View;\n\n  constructor(element?: HTMLElement, view: View = DEFAULT_VIEW) {\n    super(element, {useShadowDom: true});\n    this.#view = view;\n  }\n\n  set data(data: OriginTrialTreeViewData) {\n    this.#data = data;\n    this.requestUpdate();\n  }\n\n  override performUpdate(): void {\n    this.#view(this.#data, undefined, this.contentElement);\n  }\n}\n"]}