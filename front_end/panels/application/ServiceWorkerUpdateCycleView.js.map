{"version":3,"file":"ServiceWorkerUpdateCycleView.js","sourceRoot":"","sources":["../../../../../../front_end/panels/application/ServiceWorkerUpdateCycleView.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright 2021 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n/* eslint-disable @devtools/no-imperative-dom-api */\n\nimport * as i18n from '../../core/i18n/i18n.js';\nimport * as SDK from '../../core/sdk/sdk.js';\nimport * as Protocol from '../../generated/protocol.js';\nimport * as UI from '../../ui/legacy/legacy.js';\nimport * as VisualLogging from '../../ui/visual_logging/visual_logging.js';\n\nconst UIStrings = {\n  /**\n   * @description Text in Indexed DBViews of the Application panel\n   */\n  version: 'Version',\n  /**\n   * @description Table heading for Service Workers update information. Update is a noun.\n   */\n  updateActivity: 'Update Activity',\n  /**\n   * @description Title for the timeline tab.\n   */\n  timeline: 'Timeline',\n  /**\n   * @description Text in Service Workers Update Life Cycle\n   * @example {2} PH1\n   */\n  startTimeS: 'Start time: {PH1}',\n  /**\n   * @description Text for end time of an event\n   * @example {2} PH1\n   */\n  endTimeS: 'End time: {PH1}',\n} as const;\nconst str_ = i18n.i18n.registerUIStrings('panels/application/ServiceWorkerUpdateCycleView.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\nexport class ServiceWorkerUpdateCycleView {\n  private registration: SDK.ServiceWorkerManager.ServiceWorkerRegistration;\n  private rows: HTMLTableRowElement[];\n  private selectedRowIndex: number;\n  tableElement: HTMLElement;\n  constructor(registration: SDK.ServiceWorkerManager.ServiceWorkerRegistration) {\n    this.registration = registration;\n    this.rows = [];\n    this.selectedRowIndex = -1;\n    this.tableElement = document.createElement('table');\n    this.createTimingTable();\n  }\n\n  calculateServiceWorkerUpdateRanges(): ServiceWorkerUpdateRange[] {\n    function addRange(ranges: ServiceWorkerUpdateRange[], range: ServiceWorkerUpdateRange): void {\n      if (range.start < Number.MAX_VALUE && range.start <= range.end) {\n        ranges.push(range);\n      }\n    }\n\n    /**\n     * Add ranges representing Install, Wait or Activate of a sw version represented by id.\n     */\n    function addNormalizedRanges(\n        ranges: ServiceWorkerUpdateRange[], id: string, startInstallTime: number, endInstallTime: number,\n        startActivateTime: number, endActivateTime: number,\n        status: Protocol.ServiceWorker.ServiceWorkerVersionStatus): void {\n      addRange(ranges, {id, phase: ServiceWorkerUpdateNames.INSTALL, start: startInstallTime, end: endInstallTime});\n      if (status === Protocol.ServiceWorker.ServiceWorkerVersionStatus.Activating ||\n          status === Protocol.ServiceWorker.ServiceWorkerVersionStatus.Activated ||\n          status === Protocol.ServiceWorker.ServiceWorkerVersionStatus.Redundant) {\n        addRange(ranges, {\n          id,\n          phase: ServiceWorkerUpdateNames.WAIT,\n          start: endInstallTime,\n          end: startActivateTime,\n        });\n        addRange(\n            ranges, {id, phase: ServiceWorkerUpdateNames.ACTIVATE, start: startActivateTime, end: endActivateTime});\n      }\n    }\n\n    function rangesForVersion(version: SDK.ServiceWorkerManager.ServiceWorkerVersion): ServiceWorkerUpdateRange[] {\n      let state: SDK.ServiceWorkerManager.ServiceWorkerVersionState|null = version.currentState;\n      let endActivateTime = 0;\n      let beginActivateTime = 0;\n      let endInstallTime = 0;\n      let beginInstallTime = 0;\n      const currentStatus = state.status;\n      if (currentStatus === Protocol.ServiceWorker.ServiceWorkerVersionStatus.New) {\n        return [];\n      }\n\n      while (state) {\n        // find the earliest timestamp of different stage on record.\n        if (state.status === Protocol.ServiceWorker.ServiceWorkerVersionStatus.Activated) {\n          endActivateTime = state.lastUpdatedTimestamp;\n        } else if (state.status === Protocol.ServiceWorker.ServiceWorkerVersionStatus.Activating) {\n          if (endActivateTime === 0) {\n            endActivateTime = state.lastUpdatedTimestamp;\n          }\n          beginActivateTime = state.lastUpdatedTimestamp;\n        } else if (state.status === Protocol.ServiceWorker.ServiceWorkerVersionStatus.Installed) {\n          endInstallTime = state.lastUpdatedTimestamp;\n        } else if (state.status === Protocol.ServiceWorker.ServiceWorkerVersionStatus.Installing) {\n          if (endInstallTime === 0) {\n            endInstallTime = state.lastUpdatedTimestamp;\n          }\n          beginInstallTime = state.lastUpdatedTimestamp;\n        }\n        state = state.previousState;\n      }\n      const ranges: ServiceWorkerUpdateRange[] = [];\n      addNormalizedRanges(\n          ranges, version.id, beginInstallTime, endInstallTime, beginActivateTime, endActivateTime, currentStatus);\n      return ranges;\n    }\n\n    const versions = this.registration.versionsByMode();\n    const modes = [\n      SDK.ServiceWorkerManager.ServiceWorkerVersion.Modes.ACTIVE,\n      SDK.ServiceWorkerManager.ServiceWorkerVersion.Modes.WAITING,\n      SDK.ServiceWorkerManager.ServiceWorkerVersion.Modes.INSTALLING,\n      SDK.ServiceWorkerManager.ServiceWorkerVersion.Modes.REDUNDANT,\n    ];\n\n    for (const mode of modes) {\n      const version = versions.get(mode);\n      if (version) {\n        const ranges = rangesForVersion(version);\n        return ranges;\n      }\n    }\n\n    return [];\n  }\n\n  private createTimingTable(): void {\n    this.tableElement.classList.add('service-worker-update-timing-table');\n    this.tableElement.setAttribute('jslog', `${VisualLogging.tree('update-timing-table')}`);\n    const timeRanges = this.calculateServiceWorkerUpdateRanges();\n    this.updateTimingTable(timeRanges);\n  }\n\n  private createTimingTableHead(): void {\n    const serverHeader = this.tableElement.createChild('tr', 'service-worker-update-timing-table-header');\n    UI.UIUtils.createTextChild(serverHeader.createChild('td'), i18nString(UIStrings.version));\n    UI.UIUtils.createTextChild(serverHeader.createChild('td'), i18nString(UIStrings.updateActivity));\n    UI.UIUtils.createTextChild(serverHeader.createChild('td'), i18nString(UIStrings.timeline));\n  }\n\n  private removeRows(): void {\n    const rows = this.tableElement.getElementsByTagName('tr');\n    while (rows[0]) {\n      if (rows[0].parentNode) {\n        rows[0].parentNode.removeChild(rows[0]);\n      }\n    }\n    this.rows = [];\n  }\n\n  private updateTimingTable(timeRanges: ServiceWorkerUpdateRange[]): void {\n    this.selectedRowIndex = -1;\n    this.removeRows();\n    this.createTimingTableHead();\n    const timeRangeArray = timeRanges;\n    if (timeRangeArray.length === 0) {\n      return;\n    }\n\n    const startTimes = timeRangeArray.map(r => r.start);\n    const endTimes = timeRangeArray.map(r => r.end);\n    const startTime = startTimes.reduce((a, b) => Math.min(a, b));\n    const endTime = endTimes.reduce((a, b) => Math.max(a, b));\n    const scale = 100 / (endTime - startTime);\n\n    for (const range of timeRangeArray) {\n      const phaseName = range.phase;\n\n      const left = (scale * (range.start - startTime));\n      const right = (scale * (endTime - range.end));\n\n      const tr = this.tableElement.createChild('tr', 'service-worker-update-timeline');\n      tr.setAttribute('jslog', `${VisualLogging.treeItem('update-timeline').track({\n                        click: true,\n                        keydown: 'ArrowLeft|ArrowRight|ArrowUp|ArrowDown|Enter|Space',\n                      })}`);\n      this.rows.push(tr);\n      const timingBarVersionElement = tr.createChild('td');\n      UI.UIUtils.createTextChild(timingBarVersionElement, '#' + range.id);\n      timingBarVersionElement.classList.add('service-worker-update-timing-bar-clickable');\n      timingBarVersionElement.setAttribute('tabindex', '0');\n      timingBarVersionElement.setAttribute('role', 'switch');\n      timingBarVersionElement.addEventListener('focus', (event: Event) => {\n        this.onFocus(event);\n      });\n      timingBarVersionElement.setAttribute('jslog', `${VisualLogging.expand('timing-info').track({click: true})}`);\n      UI.ARIAUtils.setChecked(timingBarVersionElement, false);\n      const timingBarTitleElement = tr.createChild('td');\n      UI.UIUtils.createTextChild(timingBarTitleElement, phaseName);\n      const barContainer = tr.createChild('td').createChild('div', 'service-worker-update-timing-row');\n\n      const bar = barContainer.createChild('span', 'service-worker-update-timing-bar ' + phaseName.toLowerCase());\n\n      bar.style.left = left + '%';\n      bar.style.right = right + '%';\n      bar.textContent = '\\u200B';  // Important for 0-time items to have 0 width.\n\n      this.constructUpdateDetails(tr, range);\n    }\n  }\n\n  /**\n   * Detailed information about an update phase. Currently starting and ending time.\n   */\n  private constructUpdateDetails(tr: HTMLElement, range: ServiceWorkerUpdateRange): void {\n    const startRow = this.tableElement.createChild('tr', 'service-worker-update-timing-bar-details');\n    startRow.classList.add('service-worker-update-timing-bar-details-collapsed');\n    const startTimeItem = startRow.createChild('td');\n    startTimeItem.colSpan = 3;\n    const startTime = (new Date(range.start)).toISOString();\n    UI.UIUtils.createTextChild(startTimeItem.createChild('span'), i18nString(UIStrings.startTimeS, {PH1: startTime}));\n    startRow.tabIndex = 0;\n\n    const endRow = this.tableElement.createChild('tr', 'service-worker-update-timing-bar-details');\n    endRow.classList.add('service-worker-update-timing-bar-details-collapsed');\n    const endTimeItem = endRow.createChild('td');\n    endTimeItem.colSpan = 3;\n    const endTime = (new Date(range.end)).toISOString();\n    UI.UIUtils.createTextChild(endTimeItem.createChild('span'), i18nString(UIStrings.endTimeS, {PH1: endTime}));\n    endRow.tabIndex = 0;\n\n    tr.addEventListener('keydown', (event: Event) => {\n      this.onKeydown(event, startRow, endRow);\n    });\n\n    tr.addEventListener('click', (event: Event) => {\n      this.onClick(event, startRow, endRow);\n    });\n  }\n\n  private toggle(startRow: Element, endRow: Element, target: Element, expanded: boolean): void {\n    if (target.classList.contains('service-worker-update-timing-bar-clickable')) {\n      startRow.classList.toggle('service-worker-update-timing-bar-details-collapsed');\n      startRow.classList.toggle('service-worker-update-timing-bar-details-expanded');\n      endRow.classList.toggle('service-worker-update-timing-bar-details-collapsed');\n      endRow.classList.toggle('service-worker-update-timing-bar-details-expanded');\n      UI.ARIAUtils.setChecked(target, !expanded);\n    }\n  }\n\n  private onFocus(event: Event): void {\n    const target = event.target as HTMLElement | null;\n    if (!target) {\n      return;\n    }\n    const tr = target.parentElement as HTMLTableRowElement | null;\n    if (!tr) {\n      return;\n    }\n\n    this.selectedRowIndex = this.rows.indexOf(tr);\n  }\n\n  private onKeydown(event: Event, startRow: HTMLElement, endRow: HTMLElement): void {\n    if (!event.target) {\n      return;\n    }\n    const target: HTMLElement = event.target as HTMLElement;\n    const keyboardEvent = event as KeyboardEvent;\n    const expanded = target.getAttribute('aria-checked') === 'true';\n\n    if (keyboardEvent.key === 'Enter' || keyboardEvent.key === ' ') {\n      this.toggle(startRow, endRow, target, expanded);\n      event.preventDefault();\n      return;\n    }\n    if ((!expanded && keyboardEvent.key === 'ArrowRight') || (expanded && keyboardEvent.key === 'ArrowLeft')) {\n      this.toggle(startRow, endRow, target, expanded);\n      event.preventDefault();\n      return;\n    }\n    if (keyboardEvent.key === 'ArrowDown') {\n      if (this.selectedRowIndex >= 0) {\n        this.selectNextRow();\n      } else {\n        this.selectFirstRow();\n      }\n      event.preventDefault();\n    }\n    if (keyboardEvent.key === 'ArrowUp') {\n      if (this.selectedRowIndex >= 0) {\n        this.selectPreviousRow();\n      } else {\n        this.selectLastRow();\n      }\n      event.preventDefault();\n    }\n  }\n\n  private focusRow(row: HTMLTableRowElement): void {\n    row.cells[0].focus();\n  }\n\n  private blurRow(row: HTMLTableRowElement): void {\n    row.cells[0].blur();\n  }\n\n  private selectFirstRow(): void {\n    if (this.rows.length === 0) {\n      return;\n    }\n    this.selectedRowIndex = 0;\n    this.focusRow(this.rows[0]);\n  }\n\n  private selectLastRow(): void {\n    if (this.rows.length === 0) {\n      return;\n    }\n    this.selectedRowIndex = this.rows.length - 1;\n    this.focusRow(this.rows[this.selectedRowIndex]);\n  }\n\n  private selectNextRow(): void {\n    if (this.rows.length === 0) {\n      return;\n    }\n    const previousRowIndex = this.selectedRowIndex;\n    this.selectedRowIndex++;\n    if (this.selectedRowIndex >= this.rows.length) {\n      this.selectedRowIndex = 0;\n    }\n    this.blurRow(this.rows[previousRowIndex]);\n    this.focusRow(this.rows[this.selectedRowIndex]);\n  }\n\n  private selectPreviousRow(): void {\n    if (this.rows.length === 0) {\n      return;\n    }\n    const previousRowIndex = this.selectedRowIndex;\n    this.selectedRowIndex--;\n    if (this.selectedRowIndex < 0) {\n      this.selectedRowIndex = this.rows.length - 1;\n    }\n    this.blurRow(this.rows[previousRowIndex]);\n    this.focusRow(this.rows[this.selectedRowIndex]);\n  }\n\n  private onClick(event: Event, startRow: Element, endRow: Element): void {\n    const tr = event.target as Element;\n    if (!tr) {\n      return;\n    }\n\n    const expanded = tr.getAttribute('aria-checked') === 'true';\n    this.toggle(startRow, endRow, tr, expanded);\n    event.preventDefault();\n  }\n\n  refresh(): void {\n    const timeRanges = this.calculateServiceWorkerUpdateRanges();\n    this.updateTimingTable(timeRanges);\n  }\n}\n\nexport const enum ServiceWorkerUpdateNames {\n  INSTALL = 'Install',\n  WAIT = 'Wait',\n  ACTIVATE = 'Activate',\n}\n\nexport interface ServiceWorkerUpdateRange {\n  id: string;\n  phase: ServiceWorkerUpdateNames;\n  start: number;\n  end: number;\n}\n"]}