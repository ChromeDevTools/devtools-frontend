{"version":3,"file":"SharedStorageListTreeElement.js","sourceRoot":"","sources":["../../../../../../front_end/panels/application/SharedStorageListTreeElement.ts"],"names":[],"mappings":"AAAA,sCAAsC;AACtC,yEAAyE;AACzE,6BAA6B;AAE7B,OAAO,KAAK,MAAM,MAAM,6BAA6B,CAAC;AACtD,OAAO,KAAK,IAAI,MAAM,yBAAyB,CAAC;AAGhD,OAAO,EAAC,UAAU,EAAC,MAAM,qBAAqB,CAAC;AAE/C,OAAO,EAAC,2BAA2B,EAAC,MAAM,kCAAkC,CAAC;AAE7E,OAAO,EAAC,uBAAuB,EAAC,MAAM,8BAA8B,CAAC;AAErE,MAAM,SAAS,GAAG;IAChB;;OAEG;IACH,aAAa,EAAE,gBAAgB;CACvB,CAAC;AACX,MAAM,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC,iBAAiB,CAAC,oDAAoD,EAAE,SAAS,CAAC,CAAC;AAC1G,MAAM,UAAU,GAAG,IAAI,CAAC,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,SAAS,EAAE,IAAI,CAAC,CAAC;AAEtE,MAAM,OAAO,4BAA6B,SAAQ,2BAA2B;IAClE,gBAAgB,CAAmC;IACnD,IAAI,CAA0B;IAEvC,YAAY,cAA8B,EAAE,uBAAuB,GAAG,KAAK;QACzE,KAAK,CAAC,cAAc,EAAE,UAAU,CAAC,SAAS,CAAC,aAAa,CAAC,EAAE,KAAK,EAAE,gBAAgB,CAAC,CAAC;QACpF,IAAI,CAAC,gBAAgB;YACjB,MAAM,CAAC,QAAQ,CAAC,QAAQ,CAAC,QAAQ,EAAE,CAAC,aAAa,CAAC,mCAAmC,EAAE,uBAAuB,CAAC,CAAC;QACpH,MAAM,iBAAiB,GAAG,UAAU,CAAC,UAAU,CAAC,CAAC;QACjD,IAAI,CAAC,eAAe,CAAC,CAAC,iBAAiB,CAAC,CAAC,CAAC;QAC1C,IAAI,CAAC,IAAI,GAAG,IAAI,uBAAuB,EAAE,CAAC;IAC5C,CAAC;IAED,IAAa,OAAO;QAClB,OAAO,mBAAsD,CAAC;IAChE,CAAC;IAEQ,QAAQ,CAAC,cAAiC;QACjD,KAAK,CAAC,QAAQ,CAAC,cAAc,CAAC,CAAC;QAC/B,IAAI,CAAC,cAAc,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QACxC,OAAO,KAAK,CAAC;IACf,CAAC;IAEQ,QAAQ;QACf,KAAK,CAAC,QAAQ,EAAE,CAAC;QACjB,IAAI,IAAI,CAAC,gBAAgB,CAAC,GAAG,EAAE,EAAE,CAAC;YAChC,IAAI,CAAC,MAAM,EAAE,CAAC;QAChB,CAAC;IACH,CAAC;IAEQ,QAAQ;QACf,IAAI,CAAC,gBAAgB,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;IAClC,CAAC;IAEQ,UAAU;QACjB,IAAI,CAAC,gBAAgB,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;IACnC,CAAC;IAED,QAAQ,CAAC,KAAkD;QACzD,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC;IAC5B,CAAC;CACF","sourcesContent":["// Copyright 2022 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as Common from '../../core/common/common.js';\nimport * as i18n from '../../core/i18n/i18n.js';\nimport type * as Platform from '../../core/platform/platform.js';\nimport type * as Protocol from '../../generated/protocol.js';\nimport {createIcon} from '../../ui/kit/kit.js';\n\nimport {ApplicationPanelTreeElement} from './ApplicationPanelTreeElement.js';\nimport type {ResourcesPanel} from './ResourcesPanel.js';\nimport {SharedStorageEventsView} from './SharedStorageEventsView.js';\n\nconst UIStrings = {\n  /**\n   * @description Text in SharedStorage Category View of the Application panel\n   */\n  sharedStorage: 'Shared storage',\n} as const;\nconst str_ = i18n.i18n.registerUIStrings('panels/application/SharedStorageListTreeElement.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\n\nexport class SharedStorageListTreeElement extends ApplicationPanelTreeElement {\n  readonly #expandedSetting: Common.Settings.Setting<boolean>;\n  readonly view: SharedStorageEventsView;\n\n  constructor(resourcesPanel: ResourcesPanel, expandedSettingsDefault = false) {\n    super(resourcesPanel, i18nString(UIStrings.sharedStorage), false, 'shared-storage');\n    this.#expandedSetting =\n        Common.Settings.Settings.instance().createSetting('resources-shared-storage-expanded', expandedSettingsDefault);\n    const sharedStorageIcon = createIcon('database');\n    this.setLeadingIcons([sharedStorageIcon]);\n    this.view = new SharedStorageEventsView();\n  }\n\n  override get itemURL(): Platform.DevToolsPath.UrlString {\n    return 'shared-storage://' as Platform.DevToolsPath.UrlString;\n  }\n\n  override onselect(selectedByUser: boolean|undefined): boolean {\n    super.onselect(selectedByUser);\n    this.resourcesPanel.showView(this.view);\n    return false;\n  }\n\n  override onattach(): void {\n    super.onattach();\n    if (this.#expandedSetting.get()) {\n      this.expand();\n    }\n  }\n\n  override onexpand(): void {\n    this.#expandedSetting.set(true);\n  }\n\n  override oncollapse(): void {\n    this.#expandedSetting.set(false);\n  }\n\n  addEvent(event: Protocol.Storage.SharedStorageAccessedEvent): void {\n    this.view.addEvent(event);\n  }\n}\n"]}