{"version":3,"file":"BackForwardCacheView.js","sourceRoot":"","sources":["../../../../../../../front_end/panels/application/components/BackForwardCacheView.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright 2021 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport '../../../ui/components/expandable_list/expandable_list.js';\nimport '../../../ui/components/report_view/report_view.js';\nimport '../../../ui/legacy/legacy.js';\nimport '../../../ui/kit/kit.js';\n\nimport * as Common from '../../../core/common/common.js';\nimport * as i18n from '../../../core/i18n/i18n.js';\nimport type * as Platform from '../../../core/platform/platform.js';\nimport * as SDK from '../../../core/sdk/sdk.js';\nimport * as Protocol from '../../../generated/protocol.js';\nimport * as Buttons from '../../../ui/components/buttons/buttons.js';\nimport type * as ExpandableList from '../../../ui/components/expandable_list/expandable_list.js';\nimport type * as ReportView from '../../../ui/components/report_view/report_view.js';\nimport * as Components from '../../../ui/legacy/components/utils/utils.js';\nimport * as UI from '../../../ui/legacy/legacy.js';\nimport {html, type LitTemplate, nothing, render, type TemplateResult} from '../../../ui/lit/lit.js';\nimport * as VisualLogging from '../../../ui/visual_logging/visual_logging.js';\n\nimport {NotRestoredReasonDescription} from './BackForwardCacheStrings.js';\nimport backForwardCacheViewStyles from './backForwardCacheView.css.js';\n\nconst UIStrings = {\n  /**\n   * @description Title text in back/forward cache view of the Application panel\n   */\n  mainFrame: 'Main Frame',\n  /**\n   * @description Title text in back/forward cache view of the Application panel\n   */\n  backForwardCacheTitle: 'Back/forward cache',\n  /**\n   * @description Status text for the status of the main frame\n   */\n  unavailable: 'unavailable',\n  /**\n   * @description Entry name text in the back/forward cache view of the Application panel\n   */\n  url: 'URL',\n  /**\n   * @description Status text for the status of the back/forward cache status\n   */\n  unknown: 'Unknown Status',\n  /**\n   * @description Status text for the status of the back/forward cache status indicating that\n   * the back/forward cache was not used and a normal navigation occurred instead.\n   */\n  normalNavigation:\n      'Not served from back/forward cache: to trigger back/forward cache, use Chrome\\'s back/forward buttons, or use the test button below to automatically navigate away and back.',\n  /**\n   * @description Status text for the status of the back/forward cache status indicating that\n   * the back/forward cache was used to restore the page instead of reloading it.\n   */\n  restoredFromBFCache: 'Successfully served from back/forward cache.',\n  /**\n   * @description Label for a list of reasons which prevent the page from being eligible for\n   * back/forward cache. These reasons are actionable i.e. they can be cleaned up to make the\n   * page eligible for back/forward cache.\n   */\n  pageSupportNeeded: 'Actionable',\n  /**\n   * @description Label for the completion of the back/forward cache test\n   */\n  testCompleted: 'Back/forward cache test completed.',\n  /**\n   * @description Explanation for actionable items which prevent the page from being eligible\n   * for back/forward cache.\n   */\n  pageSupportNeededExplanation:\n      'These reasons are actionable i.e. they can be cleaned up to make the page eligible for back/forward cache.',\n  /**\n   * @description Label for a list of reasons which prevent the page from being eligible for\n   * back/forward cache. These reasons are circumstantial / not actionable i.e. they cannot be\n   * cleaned up by developers to make the page eligible for back/forward cache.\n   */\n  circumstantial: 'Not Actionable',\n  /**\n   * @description Explanation for circumstantial/non-actionable items which prevent the page from being eligible\n   * for back/forward cache.\n   */\n  circumstantialExplanation:\n      'These reasons are not actionable i.e. caching was prevented by something outside of the direct control of the page.',\n  /**\n   * @description Label for a list of reasons which prevent the page from being eligible for\n   * back/forward cache. These reasons are pending support by chrome i.e. in a future version\n   * of chrome they will not prevent back/forward cache usage anymore.\n   */\n  supportPending: 'Pending Support',\n  /**\n   * @description Label for the button to test whether BFCache is available for the page\n   */\n  runTest: 'Test back/forward cache',\n  /**\n   * @description Label for the disabled button while the test is running\n   */\n  runningTest: 'Running test',\n  /**\n   * @description Link Text about explanation of back/forward cache\n   */\n  learnMore: 'Learn more: back/forward cache eligibility',\n  /**\n   * @description Link Text about unload handler\n   */\n  neverUseUnload: 'Learn more: Never use unload handler',\n  /**\n   * @description Explanation for 'pending support' items which prevent the page from being eligible\n   * for back/forward cache.\n   */\n  supportPendingExplanation:\n      'Chrome support for these reasons is pending i.e. they will not prevent the page from being eligible for back/forward cache in a future version of Chrome.',\n  /**\n   * @description Text that precedes displaying a link to the extension which blocked the page from being eligible for back/forward cache.\n   */\n  blockingExtensionId: 'Extension id: ',\n  /**\n   * @description Label for the 'Frames' section of the back/forward cache view, which shows a frame tree of the\n   * page with reasons why the frames can't be cached.\n   */\n  framesTitle: 'Frames',\n  /**\n   * @description Top level summary of the total number of issues found in a single frame.\n   */\n  issuesInSingleFrame: '{n, plural, =1 {# issue found in 1 frame.} other {# issues found in 1 frame.}}',\n  /**\n   * @description Top level summary of the total number of issues found and the number of frames they were found in.\n   * 'm' is never less than 2.\n   * @example {3} m\n   */\n  issuesInMultipleFrames: '{n, plural, =1 {# issue found in {m} frames.} other {# issues found in {m} frames.}}',\n  /**\n   * @description Shows the number of frames with a particular issue.\n   */\n  framesPerIssue: '{n, plural, =1 {# frame} other {# frames}}',\n  /**\n   * @description Title for a frame in the frame tree that doesn't have a URL. Placeholder indicates which number frame with a blank URL it is.\n   * @example {3} PH1\n   */\n  blankURLTitle: 'Blank URL [{PH1}]',\n  /**\n   * @description Shows the number of files with a particular issue.\n   */\n  filesPerIssue: '{n, plural, =1 {# file} other {# files}}',\n} as const;\n\nconst str_ = i18n.i18n.registerUIStrings('panels/application/components/BackForwardCacheView.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\nconst {widgetConfig} = UI.Widget;\n\nconst enum ScreenStatusType {\n  RUNNING = 'Running',\n  RESULT = 'Result',\n}\n\nfunction renderMainFrameInformation(\n    frame: SDK.ResourceTreeModel.ResourceTreeFrame|null,\n    frameTreeData: {node: FrameTreeNodeData, frameCount: number, issueCount: number}|undefined,\n    reasonToFramesMap: Map<Protocol.Page.BackForwardCacheNotRestoredReason, string[]>, screenStatus: ScreenStatusType,\n    navigateAwayAndBack: () => Promise<void>): TemplateResult {\n  if (!frame) {\n    // clang-format of\n    return html`\n      <devtools-report-key>\n        ${i18nString(UIStrings.mainFrame)}\n      </devtools-report-key>\n      <devtools-report-value>\n        ${i18nString(UIStrings.unavailable)}\n      </devtools-report-value>`;\n    // clang-format on\n  }\n  const isTestRunning = (screenStatus === ScreenStatusType.RUNNING);\n  // Prevent running BFCache test on the DevTools window itself via DevTools on DevTools\n  const isTestingForbidden = Common.ParsedURL.schemeIs(frame.url, 'devtools:');\n  // clang-format off\n  return html`\n    ${renderBackForwardCacheStatus(frame.backForwardCacheDetails.restoredFromCache)}\n    <devtools-report-key>${i18nString(UIStrings.url)}</devtools-report-key>\n    <devtools-report-value>${frame.url}</devtools-report-value>\n    ${maybeRenderFrameTree(frameTreeData)}\n    <devtools-report-section>\n      <devtools-button\n        aria-label=${i18nString(UIStrings.runTest)}\n        .disabled=${isTestRunning || isTestingForbidden}\n        .spinner=${isTestRunning}\n        .variant=${Buttons.Button.Variant.PRIMARY}\n        @click=${navigateAwayAndBack}\n        jslog=${VisualLogging.action('back-forward-cache.run-test').track({click: true})}>\n        ${isTestRunning ? html`\n          ${i18nString(UIStrings.runningTest)}`:`\n          ${i18nString(UIStrings.runTest)}\n        `}\n      </devtools-button>\n    </devtools-report-section>\n    <devtools-report-divider>\n    </devtools-report-divider>\n    ${maybeRenderExplanations(frame.backForwardCacheDetails.explanations,\n        frame.backForwardCacheDetails.explanationsTree,\n        reasonToFramesMap)}\n    <devtools-report-section>\n      <x-link href=\"https://web.dev/bfcache/\" class=\"link\"\n      jslog=${VisualLogging.action('learn-more.eligibility').track({click: true})}>\n        ${i18nString(UIStrings.learnMore)}\n      </x-link>\n    </devtools-report-section>`;\n  // clang-format on\n}\n\nfunction maybeRenderFrameTree(\n    frameTreeData: {node: FrameTreeNodeData, frameCount: number, issueCount: number}|undefined): LitTemplate {\n  if (!frameTreeData || (frameTreeData.frameCount === 0 && frameTreeData.issueCount === 0)) {\n    return nothing;\n  }\n\n  function renderFrameTreeNode(node: FrameTreeNodeData): TemplateResult {\n    // clang-format off\n    return html`\n      <li role=\"treeitem\" class=\"text-ellipsis\">\n        ${node.iconName ? html`\n          <devtools-icon class=\"inline-icon extra-large\" .name=${node.iconName} style=\"margin-bottom: -3px;\">\n          </devtools-icon>\n        ` : nothing}\n        ${node.text}\n        ${node.children?.length ? html`\n          <ul role=\"group\" hidden>\n            ${node.children.map(child => renderFrameTreeNode(child))}\n          </ul>` : nothing}\n      </li>`;\n    // clang-format on\n  }\n\n  let title = '';\n  // The translation pipeline does not support nested plurals. We avoid this\n  // here by pulling out the logic for one of the plurals into code instead.\n  if (frameTreeData.frameCount === 1) {\n    title = i18nString(UIStrings.issuesInSingleFrame, {n: frameTreeData.issueCount});\n  } else {\n    title = i18nString(UIStrings.issuesInMultipleFrames, {n: frameTreeData.issueCount, m: frameTreeData.frameCount});\n  }\n  // clang-format off\n  return html`\n    <devtools-report-key jslog=${VisualLogging.section('frames')}>${i18nString(UIStrings.framesTitle)}</devtools-report-key>\n    <devtools-report-value>\n      <devtools-tree .template=${html`\n        <ul role=\"tree\">\n          <li role=\"treeitem\" class=\"text-ellipsis\">\n            ${title}\n            <ul role=\"group\">\n              ${renderFrameTreeNode(frameTreeData.node)}\n            </ul>\n          </li>\n        </ul>\n      `}>\n      </devtools-tree>\n    </devtools-report-value>`;\n  // clang-format on\n}\n\nfunction renderBackForwardCacheStatus(status: boolean|undefined): TemplateResult {\n  switch (status) {\n    case true:\n      // clang-format off\n      return html`\n        <devtools-report-section autofocus tabindex=\"-1\">\n          <div class=\"status extra-large\">\n            <devtools-icon class=\"inline-icon extra-large\" name=\"check-circle\" style=\"color: var(--icon-checkmark-green);\">\n            </devtools-icon>\n          </div>\n          ${i18nString(UIStrings.restoredFromBFCache)}\n        </devtools-report-section>`;\n      // clang-format on\n    case false:\n      // clang-format off\n      return html`\n        <devtools-report-section autofocus tabindex=\"-1\">\n          <div class=\"status\">\n            <devtools-icon class=\"inline-icon extra-large\" name=\"clear\">\n            </devtools-icon>\n          </div>\n          ${i18nString(UIStrings.normalNavigation)}\n        </devtools-report-section>`;\n      // clang-format on\n  }\n  // clang-format off\n  return html`\n    <devtools-report-section autofocus tabindex=\"-1\">\n      ${i18nString(UIStrings.unknown)}\n    </devtools-report-section>`;\n  // clang-format on\n}\n\nfunction maybeRenderExplanations(\n    explanations: Protocol.Page.BackForwardCacheNotRestoredExplanation[],\n    explanationTree: Protocol.Page.BackForwardCacheNotRestoredExplanationTree|undefined,\n    reasonToFramesMap: Map<Protocol.Page.BackForwardCacheNotRestoredReason, string[]>): LitTemplate {\n  if (explanations.length === 0) {\n    return nothing;\n  }\n\n  const pageSupportNeeded = explanations.filter(\n      explanation => explanation.type === Protocol.Page.BackForwardCacheNotRestoredReasonType.PageSupportNeeded);\n  const supportPending = explanations.filter(\n      explanation => explanation.type === Protocol.Page.BackForwardCacheNotRestoredReasonType.SupportPending);\n  const circumstantial = explanations.filter(\n      explanation => explanation.type === Protocol.Page.BackForwardCacheNotRestoredReasonType.Circumstantial);\n\n  // Disabled until https://crbug.com/1079231 is fixed.\n  // clang-format off\n  return html`\n    ${renderExplanations(i18nString(UIStrings.pageSupportNeeded), i18nString(UIStrings.pageSupportNeededExplanation), pageSupportNeeded, reasonToFramesMap)}\n    ${renderExplanations(i18nString(UIStrings.supportPending), i18nString(UIStrings.supportPendingExplanation), supportPending, reasonToFramesMap)}\n    ${renderExplanations(i18nString(UIStrings.circumstantial), i18nString(UIStrings.circumstantialExplanation), circumstantial, reasonToFramesMap)}`;\n  // clang-format on\n}\n\nfunction renderExplanations(\n    category: Platform.UIString.LocalizedString, explainerText: Platform.UIString.LocalizedString,\n    explanations: Protocol.Page.BackForwardCacheNotRestoredExplanation[],\n    reasonToFramesMap: Map<Protocol.Page.BackForwardCacheNotRestoredReason, string[]>): TemplateResult {\n  // Disabled until https://crbug.com/1079231 is fixed.\n  // clang-format off\n  return html`\n    ${explanations.length > 0 ? html`\n      <devtools-report-section-header>\n        ${category}\n        <div class=\"help-outline-icon\">\n          <devtools-icon class=\"inline-icon medium\" name=\"help\" title=${explainerText}>\n          </devtools-icon>\n        </div>\n      </devtools-report-section-header>\n      ${explanations.map(explanation => renderReason(explanation, reasonToFramesMap.get(explanation.reason)))}\n    ` : nothing}`;\n  // clang-format on\n}\n\nfunction maybeRenderReasonContext(explanation: Protocol.Page.BackForwardCacheNotRestoredExplanation): LitTemplate {\n  if (explanation.reason ===\n          Protocol.Page.BackForwardCacheNotRestoredReason.EmbedderExtensionSentMessageToCachedFrame &&\n      explanation.context) {\n    const link = 'chrome://extensions/?id=' + explanation.context as Platform.DevToolsPath.UrlString;\n    // clang-format off\n    return html`${i18nString(UIStrings.blockingExtensionId)}\n      <devtools-link .href=${link}>${explanation.context}</devtools-link>`;\n    // clang-format on\n  }\n  return nothing;\n}\n\nfunction renderFramesPerReason(frames: string[]|undefined): LitTemplate {\n  if (frames === undefined || frames.length === 0) {\n    return nothing;\n  }\n  const rows = [html`<div>${i18nString(UIStrings.framesPerIssue, {n: frames.length})}</div>`];\n  rows.push(...frames.map(url => html`<div class=\"text-ellipsis\" title=${url}\n    jslog=${VisualLogging.treeItem()}>${url}</div>`));\n  return html`\n      <div class=\"details-list\"\n      jslog=${VisualLogging.tree('frames-per-issue')}>\n        <devtools-expandable-list .data=${{\n    rows,\n    title: i18nString(UIStrings.framesPerIssue, {n: frames.length}),\n  } as ExpandableList.ExpandableList.ExpandableListData}\n        jslog=${VisualLogging.treeItem()}></devtools-expandable-list>\n      </div>\n    `;\n}\n\nfunction maybeRenderDeepLinkToUnload(explanation: Protocol.Page.BackForwardCacheNotRestoredExplanation): LitTemplate {\n  if (explanation.reason === Protocol.Page.BackForwardCacheNotRestoredReason.UnloadHandlerExistsInMainFrame ||\n      explanation.reason === Protocol.Page.BackForwardCacheNotRestoredReason.UnloadHandlerExistsInSubFrame) {\n    return html`\n        <x-link href=\"https://web.dev/bfcache/#never-use-the-unload-event\" class=\"link\"\n        jslog=${VisualLogging.action('learn-more.never-use-unload').track({\n      click: true,\n    })}>\n          ${i18nString(UIStrings.neverUseUnload)}\n        </x-link>`;\n  }\n  return nothing;\n}\n\nfunction maybeRenderJavaScriptDetails(details: Protocol.Page.BackForwardCacheBlockingDetails[]|undefined): LitTemplate {\n  if (details === undefined || details.length === 0) {\n    return nothing;\n  }\n  const maxLengthForDisplayedURLs = 50;\n  const rows = [html`<div>${i18nString(UIStrings.filesPerIssue, {n: details.length})}</div>`];\n  rows.push(...details.map(detail => html`\n          <devtools-widget .widgetConfig=${widgetConfig(Components.Linkifier.ScriptLocationLink, {\n                             sourceURL: detail.url as Platform.DevToolsPath.UrlString,\n                             lineNumber: detail.lineNumber,\n                             options: {\n                               columnNumber: detail.columnNumber,\n                               showColumnNumber: true,\n                               inlineFrameIndex: 0,\n                               maxLength: maxLengthForDisplayedURLs,\n                             }\n                           })}></devtools-widget>`));\n  return html`\n      <div class=\"details-list\">\n        <devtools-expandable-list .data=${\n      {rows} as ExpandableList.ExpandableList.ExpandableListData}></devtools-expandable-list>\n      </div>\n    `;\n}\n\nfunction renderReason(\n    explanation: Protocol.Page.BackForwardCacheNotRestoredExplanation, frames: string[]|undefined): TemplateResult {\n  // clang-format off\n  return html`\n    <devtools-report-section>\n      ${(explanation.reason in NotRestoredReasonDescription) ?\n        html`\n          <div class=\"circled-exclamation-icon\">\n            <devtools-icon class=\"inline-icon medium\" style=\"color: var(--icon-warning)\" name=\"warning\">\n            </devtools-icon>\n          </div>\n          <div>\n            ${NotRestoredReasonDescription[explanation.reason].name()}\n            ${maybeRenderDeepLinkToUnload(explanation)}\n            ${maybeRenderReasonContext(explanation)}\n          </div>` :\n          nothing}\n    </devtools-report-section>\n    <div class=\"gray-text\">\n      ${explanation.reason}\n    </div>\n    ${maybeRenderJavaScriptDetails(explanation.details)}\n    ${renderFramesPerReason(frames)}`;\n  // clang-format on\n}\n\ninterface ViewInput {\n  frame: SDK.ResourceTreeModel.ResourceTreeFrame|null;\n  frameTreeData: {node: FrameTreeNodeData, frameCount: number, issueCount: number}|undefined;\n  reasonToFramesMap: Map<Protocol.Page.BackForwardCacheNotRestoredReason, string[]>;\n  screenStatus: ScreenStatusType;\n  navigateAwayAndBack: () => Promise<void>;\n}\n\ntype View = (input: ViewInput, output: undefined, target: HTMLElement) => void;\n\nconst DEFAULT_VIEW: View = (input, output, target) => {\n  // Disabled until https://crbug.com/1079231 is fixed.\n  // clang-format off\n  render(html`\n    <style>${backForwardCacheViewStyles}</style>\n    <devtools-report .data=${\n        {reportTitle: i18nString(UIStrings.backForwardCacheTitle)} as ReportView.ReportView.ReportData\n    } jslog=${VisualLogging.pane('back-forward-cache')}>\n\n      ${renderMainFrameInformation(input.frame, input.frameTreeData, input.reasonToFramesMap, input.screenStatus, input.navigateAwayAndBack)}\n    </devtools-report>\n  `, target);\n  // clang-format on\n};\n\nexport class BackForwardCacheView extends UI.Widget.Widget {\n  #screenStatus = ScreenStatusType.RESULT;\n  #historyIndex = 0;\n  #view: View;\n\n  constructor(view = DEFAULT_VIEW) {\n    super({useShadowDom: true, delegatesFocus: true});\n    this.#view = view;\n    this.#getMainResourceTreeModel()?.addEventListener(\n        SDK.ResourceTreeModel.Events.PrimaryPageChanged, this.requestUpdate, this);\n    this.#getMainResourceTreeModel()?.addEventListener(\n        SDK.ResourceTreeModel.Events.BackForwardCacheDetailsUpdated, this.requestUpdate, this);\n    this.requestUpdate();\n  }\n\n  #getMainResourceTreeModel(): SDK.ResourceTreeModel.ResourceTreeModel|null {\n    const mainTarget = SDK.TargetManager.TargetManager.instance().primaryPageTarget();\n    return mainTarget?.model(SDK.ResourceTreeModel.ResourceTreeModel) || null;\n  }\n\n  #getMainFrame(): SDK.ResourceTreeModel.ResourceTreeFrame|null {\n    return this.#getMainResourceTreeModel()?.mainFrame || null;\n  }\n\n  override async performUpdate(): Promise<void> {\n    const reasonToFramesMap = new Map<Protocol.Page.BackForwardCacheNotRestoredReason, string[]>();\n    const frame = this.#getMainFrame();\n    const explanationTree = frame?.backForwardCacheDetails?.explanationsTree;\n    if (explanationTree) {\n      this.#buildReasonToFramesMap(explanationTree, {blankCount: 1}, reasonToFramesMap);\n    }\n    const frameTreeData = this.#buildFrameTreeDataRecursive(explanationTree, {blankCount: 1});\n    // Override the icon for the outermost frame.\n    frameTreeData.node.iconName = 'frame';\n    const viewInput: ViewInput = {\n      frame,\n      frameTreeData,\n      reasonToFramesMap,\n      screenStatus: this.#screenStatus,\n      navigateAwayAndBack: this.#navigateAwayAndBack.bind(this),\n    };\n    this.#view(viewInput, undefined, this.contentElement);\n  }\n\n  #renderBackForwardCacheTestResult(): void {\n    SDK.TargetManager.TargetManager.instance().removeModelListener(\n        SDK.ResourceTreeModel.ResourceTreeModel, SDK.ResourceTreeModel.Events.FrameNavigated,\n        this.#renderBackForwardCacheTestResult, this);\n    this.#screenStatus = ScreenStatusType.RESULT;\n    this.requestUpdate();\n    void this.updateComplete.then(() => {\n      UI.ARIAUtils.LiveAnnouncer.alert(i18nString(UIStrings.testCompleted));\n      this.contentElement.focus();\n    });\n  }\n\n  async #onNavigatedAway(): Promise<void> {\n    SDK.TargetManager.TargetManager.instance().removeModelListener(\n        SDK.ResourceTreeModel.ResourceTreeModel, SDK.ResourceTreeModel.Events.FrameNavigated, this.#onNavigatedAway,\n        this);\n    await this.#waitAndGoBackInHistory(50);\n  }\n\n  async #waitAndGoBackInHistory(delay: number): Promise<void> {\n    const mainTarget = SDK.TargetManager.TargetManager.instance().primaryPageTarget();\n    const resourceTreeModel = mainTarget?.model(SDK.ResourceTreeModel.ResourceTreeModel);\n    const historyResults = await resourceTreeModel?.navigationHistory();\n    if (!resourceTreeModel || !historyResults) {\n      return;\n    }\n    // The navigation history can be delayed. If this is the case we wait and\n    // check again later. Otherwise it would be possible to press the 'Test\n    // BFCache' button again too soon, leading to the browser stepping back in\n    // history without returning to the correct page.\n    if (historyResults.currentIndex === this.#historyIndex) {\n      window.setTimeout(this.#waitAndGoBackInHistory.bind(this, delay * 2), delay);\n    } else {\n      SDK.TargetManager.TargetManager.instance().addModelListener(\n          SDK.ResourceTreeModel.ResourceTreeModel, SDK.ResourceTreeModel.Events.FrameNavigated,\n          this.#renderBackForwardCacheTestResult, this);\n      resourceTreeModel.navigateToHistoryEntry(historyResults.entries[historyResults.currentIndex - 1]);\n    }\n  }\n\n  async #navigateAwayAndBack(): Promise<void> {\n    // Checking BFCache Compatibility\n\n    const mainTarget = SDK.TargetManager.TargetManager.instance().primaryPageTarget();\n    const resourceTreeModel = mainTarget?.model(SDK.ResourceTreeModel.ResourceTreeModel);\n    const historyResults = await resourceTreeModel?.navigationHistory();\n    if (!resourceTreeModel || !historyResults) {\n      return;\n    }\n    this.#historyIndex = historyResults.currentIndex;\n    this.#screenStatus = ScreenStatusType.RUNNING;\n    this.requestUpdate();\n\n    // This event listener is removed inside of onNavigatedAway().\n    SDK.TargetManager.TargetManager.instance().addModelListener(\n        SDK.ResourceTreeModel.ResourceTreeModel, SDK.ResourceTreeModel.Events.FrameNavigated, this.#onNavigatedAway,\n        this);\n\n    // We can know whether the current page can use BFCache\n    // as the browser navigates to another unrelated page and goes back to the current page.\n    // We chose \"chrome://terms\" because it must be cross-site.\n    // Ideally, We want to have our own testing page like \"chrome: //bfcache-test\".\n    void resourceTreeModel.navigate('chrome://terms' as Platform.DevToolsPath.UrlString);\n  }\n\n  // Builds a subtree of the frame tree, conaining only frames with BFCache issues and their ancestors.\n  // Returns the root node, the number of frames in the subtree, and the number of issues in the subtree.\n  #buildFrameTreeDataRecursive(\n      explanationTree: Protocol.Page.BackForwardCacheNotRestoredExplanationTree|undefined,\n      nextBlankURLCount: {blankCount: number}): {node: FrameTreeNodeData, frameCount: number, issueCount: number} {\n    if (!explanationTree) {\n      return {node: {text: ''}, frameCount: 0, issueCount: 0};\n    }\n    let frameCount = 1;\n    let issueCount = 0;\n    const children: FrameTreeNodeData[] = [];\n\n    let nodeUrlText = '';\n    if (explanationTree.url.length) {\n      nodeUrlText = explanationTree.url;\n    } else {\n      nodeUrlText = i18nString(UIStrings.blankURLTitle, {PH1: nextBlankURLCount.blankCount});\n      nextBlankURLCount.blankCount += 1;\n    }\n\n    for (const explanation of explanationTree.explanations) {\n      const child = {text: explanation.reason};\n      issueCount += 1;\n      children.push(child);\n    }\n    for (const child of explanationTree.children) {\n      const frameTreeData = this.#buildFrameTreeDataRecursive(child, nextBlankURLCount);\n      if (frameTreeData.issueCount > 0) {\n        children.push(frameTreeData.node);\n        issueCount += frameTreeData.issueCount;\n        frameCount += frameTreeData.frameCount;\n      }\n    }\n\n    let node: FrameTreeNodeData = {\n      text: `(${issueCount}) ${nodeUrlText}`,\n    };\n    if (children.length) {\n      node = {...node, children};\n      node.iconName = 'iframe';\n    } else if (!explanationTree.url.length) {\n      // If the current node increased the blank count, but it has no children and\n      // is therefore not shown, decrement the blank count again.\n      nextBlankURLCount.blankCount -= 1;\n    }\n    return {node, frameCount, issueCount};\n  }\n\n  #buildReasonToFramesMap(\n      explanationTree: Protocol.Page.BackForwardCacheNotRestoredExplanationTree,\n      nextBlankURLCount: {blankCount: number},\n      outputMap: Map<Protocol.Page.BackForwardCacheNotRestoredReason, string[]>): void {\n    let url = explanationTree.url;\n    if (url.length === 0) {\n      url = i18nString(UIStrings.blankURLTitle, {PH1: nextBlankURLCount.blankCount});\n      nextBlankURLCount.blankCount += 1;\n    }\n    explanationTree.explanations.forEach(explanation => {\n      let frames: string[]|undefined = outputMap.get(explanation.reason);\n      if (frames === undefined) {\n        frames = [url];\n        outputMap.set(explanation.reason, frames);\n      } else {\n        frames.push(url);\n      }\n    });\n    explanationTree.children.map(child => {\n      this.#buildReasonToFramesMap(child, nextBlankURLCount, outputMap);\n    });\n  }\n}\n\ninterface FrameTreeNodeData {\n  text: string;\n  iconName?: string;\n  children?: FrameTreeNodeData[];\n}\n"]}