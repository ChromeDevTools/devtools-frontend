{"version":3,"file":"ServiceWorkerRouterView.js","sourceRoot":"","sources":["../../../../../../../front_end/panels/application/components/ServiceWorkerRouterView.ts"],"names":[],"mappings":"AAAA,sCAAsC;AACtC,yEAAyE;AACzE,6BAA6B;AAG7B,OAAO,KAAK,EAAE,MAAM,8BAA8B,CAAC;AACnD,OAAO,EAAC,IAAI,EAAE,MAAM,EAAsB,MAAM,wBAAwB,CAAC;AAEzE,OAAO,6BAA6B,MAAM,kCAAkC,CAAC;AAE7E,SAAS,gBAAgB,CAAC,IAAsD;IAC9E,OAAO,IAAI,CAAA;;kCAEqB,IAAI,CAAC,EAAE;;;;oCAIL,IAAI,CAAC,SAAS;;;;oCAId,IAAI,CAAC,MAAM;;;UAGrC,CAAC;AACX,CAAC;AAQD,MAAM,YAAY,GAAS,CAAC,KAAK,EAAE,OAAO,EAAE,MAAM,EAAE,EAAE;IACpD,mBAAmB;IACnB,MAAM,CAAC,IAAI,CAAA;aACA,6BAA6B;;QAElC,KAAK,CAAC,KAAK,CAAC,GAAG,CAAC,gBAAgB,CAAC;UAC/B,EAAE,MAAM,CAAC,CAAC;IAClB,kBAAkB;AACpB,CAAC,CAAC;AAEF,MAAM,OAAO,uBAAwB,SAAQ,EAAE,CAAC,MAAM,CAAC,MAAM;IAC3D,MAAM,GAAuD,EAAE,CAAC;IAChE,KAAK,CAAO;IAEZ,YAAY,OAAqB,EAAE,IAAI,GAAG,YAAY;QACpD,KAAK,CAAC,OAAO,EAAE,EAAC,YAAY,EAAE,IAAI,EAAC,CAAC,CAAC;QACrC,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC;IACpB,CAAC;IAED,IAAI,KAAK,CAAC,KAAyD;QACjE,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC;QACpB,IAAI,IAAI,CAAC,MAAM,CAAC,MAAM,GAAG,CAAC,EAAE,CAAC;YAC3B,IAAI,CAAC,aAAa,EAAE,CAAC;QACvB,CAAC;IACH,CAAC;IAED,IAAI,KAAK;QACP,OAAO,IAAI,CAAC,MAAM,CAAC;IACrB,CAAC;IAEQ,aAAa;QACpB,IAAI,CAAC,KAAK,CAAC,EAAC,KAAK,EAAE,IAAI,CAAC,MAAM,EAAC,EAAE,SAAS,EAAE,IAAI,CAAC,cAAc,CAAC,CAAC;IACnE,CAAC;CACF","sourcesContent":["// Copyright 2023 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport type * as SDK from '../../../core/sdk/sdk.js';\nimport * as UI from '../../../ui/legacy/legacy.js';\nimport {html, render, type TemplateResult} from '../../../ui/lit/lit.js';\n\nimport serviceWorkerRouterViewStyles from './serviceWorkerRouterView.css.js';\n\nfunction renderRouterRule(rule: SDK.ServiceWorkerManager.ServiceWorkerRouterRule): TemplateResult {\n  return html`\n    <li class=\"router-rule\">\n      <div class=\"rule-id\">Rule ${rule.id}</div>\n      <ul class=\"item\">\n        <li class=\"condition\">\n          <div class=\"rule-type\">Condition</div>\n          <div class=\"rule-value\">${rule.condition}</div>\n        </li>\n        <li class=\"source\">\n          <div class=\"rule-type\">Source</div>\n          <div class=\"rule-value\">${rule.source}</div>\n        </li>\n      </ul>\n    </li>`;\n}\n\ninterface ViewInterface {\n  rules: SDK.ServiceWorkerManager.ServiceWorkerRouterRule[];\n}\n\ntype View = (input: ViewInterface, output: undefined, target: HTMLElement) => void;\n\nconst DEFAULT_VIEW: View = (input, _output, target) => {\n  // clang-format off\n  render(html`\n    <style>${serviceWorkerRouterViewStyles}</style>\n    <ul class=\"router-rules\">\n      ${input.rules.map(renderRouterRule)}\n    </ul>`, target);\n  // clang-format on\n};\n\nexport class ServiceWorkerRouterView extends UI.Widget.Widget {\n  #rules: SDK.ServiceWorkerManager.ServiceWorkerRouterRule[] = [];\n  #view: View;\n\n  constructor(element?: HTMLElement, view = DEFAULT_VIEW) {\n    super(element, {useShadowDom: true});\n    this.#view = view;\n  }\n\n  set rules(rules: SDK.ServiceWorkerManager.ServiceWorkerRouterRule[]) {\n    this.#rules = rules;\n    if (this.#rules.length > 0) {\n      this.requestUpdate();\n    }\n  }\n\n  get rules(): SDK.ServiceWorkerManager.ServiceWorkerRouterRule[] {\n    return this.#rules;\n  }\n\n  override performUpdate(): void {\n    this.#view({rules: this.#rules}, undefined, this.contentElement);\n  }\n}\n"]}