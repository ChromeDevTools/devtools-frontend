{
  "version": 3,
  "sources": ["common.prebundle.ts", "common.css.js", "../../../../../../front_end/panels/common/AiCodeCompletionTeaser.ts", "aiCodeCompletionTeaser.css.js", "../../../../../../front_end/panels/common/FreDialog.ts", "freDialog.css.js", "../../../../../../front_end/panels/common/GdpSignUpDialog.ts", "gdpSignUpDialog.css.js", "../../../../../../front_end/panels/common/AiCodeCompletionDisclaimer.ts", "aiCodeCompletionDisclaimer.css.js", "../../../../../../front_end/panels/common/AiCodeCompletionSummaryToolbar.ts", "aiCodeCompletionSummaryToolbar.css.js", "../../../../../../front_end/panels/common/BadgeNotification.ts", "badgeNotification.css.js", "../../../../../../front_end/panels/common/ExtensionPanel.ts", "../../../../../../front_end/panels/common/ExtensionView.ts", "../../../../../../front_end/panels/common/ExtensionServer.ts", "../../../../../../front_end/panels/common/PersistenceUtils.ts", "../../../../../../front_end/panels/common/DOMLinkifier.ts", "domLinkifier.css.js"],
  "sourcesContent": ["// Copyright 2025 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\n/* eslint-disable @devtools/no-imperative-dom-api */\n\nimport * as Host from '../../core/host/host.js';\nimport * as i18n from '../../core/i18n/i18n.js';\nimport type * as Platform from '../../core/platform/platform.js';\nimport * as Geometry from '../../models/geometry/geometry.js';\nimport * as Buttons from '../../ui/components/buttons/buttons.js';\nimport * as UI from '../../ui/legacy/legacy.js';\n\nimport commonStyles from './common.css.js';\n\nconst UIStrings = {\n  /**\n   * @description Text for the cancel button in the dialog.\n   */\n  cancel: 'Cancel',\n  /**\n   * @description Text for the allow button in the \"type to allow\" dialog.\n   */\n  allow: 'Allow',\n} as const;\n\nconst str_ = i18n.i18n.registerUIStrings('panels/common/common.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\n\nexport class TypeToAllowDialog {\n  static async show(options: {\n    jslogContext: {\n      dialog: string,\n      input: string,\n    },\n    header: Platform.UIString.LocalizedString,\n    message: Platform.UIString.LocalizedString,\n    typePhrase: Platform.UIString.LocalizedString,\n    inputPlaceholder: Platform.UIString.LocalizedString,\n  }): Promise<boolean> {\n    const dialog = new UI.Dialog.Dialog(options.jslogContext.dialog);\n    dialog.setMaxContentSize(new Geometry.Size(504, 340));\n    dialog.setSizeBehavior(UI.GlassPane.SizeBehavior.SET_EXACT_WIDTH_MAX_HEIGHT);\n    dialog.setDimmed(true);\n    const shadowRoot = UI.UIUtils.createShadowRootWithCoreStyles(dialog.contentElement, {cssFile: commonStyles});\n    const content = shadowRoot.createChild('div', 'type-to-allow-dialog');\n\n    const result = await new Promise<boolean>(resolve => {\n      const header = content.createChild('div', 'header');\n      header.createChild('div', 'title').textContent = options.header;\n\n      const closeButton = header.createChild('dt-close-button', 'dialog-close-button');\n      closeButton.setTabbable(true);\n      self.onInvokeElement(closeButton, event => {\n        dialog.hide();\n        event.consume(true);\n        resolve(false);\n      });\n      closeButton.setSize(Buttons.Button.Size.SMALL);\n\n      content.createChild('div', 'message').textContent = options.message;\n\n      const input = UI.UIUtils.createInput('text-input', 'text', options.jslogContext.input);\n      input.placeholder = options.inputPlaceholder;\n      content.appendChild(input);\n\n      const buttonsBar = content.createChild('div', 'button');\n      const cancelButton =\n          UI.UIUtils.createTextButton(i18nString(UIStrings.cancel), () => resolve(false), {jslogContext: 'cancel'});\n\n      const allowButton = UI.UIUtils.createTextButton(i18nString(UIStrings.allow), () => {\n        resolve(input.value === options.typePhrase);\n      }, {jslogContext: 'confirm', variant: Buttons.Button.Variant.PRIMARY});\n      allowButton.disabled = true;\n\n      buttonsBar.appendChild(allowButton);\n      buttonsBar.appendChild(cancelButton);\n\n      input.addEventListener('input', () => {\n        allowButton.disabled = !Boolean(input.value);\n      }, false);\n      input.addEventListener('paste', e => e.preventDefault());\n      input.addEventListener('drop', e => e.preventDefault());\n\n      dialog.setOutsideClickCallback(event => {\n        event.consume();\n        resolve(false);\n      });\n      dialog.show();\n      Host.userMetrics.actionTaken(Host.UserMetrics.Action.SelfXssWarningDialogShown);\n    });\n    dialog.hide();\n    return result;\n  }\n}\n\nexport {AiCodeCompletionTeaser} from './AiCodeCompletionTeaser.js';\nexport {FreDialog} from './FreDialog.js';\nexport {GdpSignUpDialog} from './GdpSignUpDialog.js';\nexport {AiCodeCompletionDisclaimer} from './AiCodeCompletionDisclaimer.js';\nexport {AiCodeCompletionSummaryToolbar} from './AiCodeCompletionSummaryToolbar.js';\nexport * from './BadgeNotification.js';\nexport * as ExtensionPanel from './ExtensionPanel.js';\nexport * as ExtensionServer from './ExtensionServer.js';\nexport * as ExtensionView from './ExtensionView.js';\nexport * as PersistenceUtils from './PersistenceUtils.js';\nexport * as DOMLinkifier from './DOMLinkifier.js';\n", "// Copyright 2025 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n// IMPORTANT: this file is auto generated. Please do not edit this file.\n/* istanbul ignore file */\nexport default `/*\n * Copyright 2025 The Chromium Authors\n * Use of this source code is governed by a BSD-style license that can be\n * found in the LICENSE file.\n */\n\n.type-to-allow-dialog {\n  width: 100%;\n\n  .header {\n    display: flex;\n    justify-content: space-between;\n    font: var(--sys-typescale-body2-medium);\n    margin: var(--sys-size-5) var(--sys-size-5) var(--sys-size-5) var(--sys-size-8);\n  }\n\n  .title {\n    padding-top: var(--sys-size-3);\n  }\n\n  .dialog-close-button {\n    margin: var(--sys-size-3);\n    z-index: 1;\n  }\n\n  .message,\n  .text-input {\n    margin: 0 var(--sys-size-8);\n  }\n\n  .text-input {\n    margin-top: var(--sys-size-5);\n  }\n\n  .button {\n    text-align: right;\n    margin: var(--sys-size-6) var(--sys-size-8) var(--sys-size-8) var(--sys-size-8);\n    gap: var(--sys-size-5);\n    display: flex;\n    flex-direction: row-reverse;\n    justify-content: flex-start;\n  }\n\n  .button button {\n    min-width: var(--sys-size-19);\n  }\n}\n\n/*# sourceURL=${import.meta.resolve('./common.css')} */`;", "// Copyright 2025 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as Common from '../../core/common/common.js';\nimport * as Host from '../../core/host/host.js';\nimport * as i18n from '../../core/i18n/i18n.js';\nimport * as Root from '../../core/root/root.js';\nimport * as Snackbars from '../../ui/components/snackbars/snackbars.js';\nimport * as UI from '../../ui/legacy/legacy.js';\nimport {html, nothing, render} from '../../ui/lit/lit.js';\nimport * as VisualLogging from '../../ui/visual_logging/visual_logging.js';\n\nimport styles from './aiCodeCompletionTeaser.css.js';\nimport {FreDialog} from './FreDialog.js';\n\nconst UIStringsNotTranslate = {\n  /**\n   * @description Text for `ctrl` key.\n   */\n  ctrl: 'ctrl',\n  /**\n   * @description Text for `cmd` key.\n   */\n  cmd: 'cmd',\n  /**\n   * @description Text for `i` key.\n   */\n  i: 'i',\n  /**\n   * @description Text for `x` key.\n   */\n  x: 'x',\n  /**\n   * @description Text for dismissing teaser.\n   */\n  dontShowAgain: 'Don\\'t show again',\n  /**\n   * @description Text for teaser to turn on code suggestions.\n   */\n  toTurnOnCodeSuggestions: 'to turn on code suggestions.',\n  /**\n   * @description Text for snackbar notification on dismissing the teaser.\n   */\n  turnOnCodeSuggestionsAtAnyTimeInSettings: 'Turn on code suggestions at any time in Settings',\n  /**\n   * @description Text for snackbar action button to manage settings.\n   */\n  manage: 'Manage',\n  /**\n   * @description The footer disclaimer that links to more information\n   * about the AI feature.\n   */\n  learnMore: 'Learn more about AI code completion',\n  /**\n   * @description Header text for the AI-powered suggestions disclaimer dialog.\n   */\n  freDisclaimerHeader: 'Code faster with AI-powered suggestions',\n  /**\n   * @description First disclaimer item text for the fre dialog.\n   */\n  freDisclaimerTextAiWontAlwaysGetItRight: 'This feature uses AI and won’t always get it right',\n  /**\n   * @description Second disclaimer item text for the fre dialog.\n   */\n  freDisclaimerTextPrivacy:\n      'To generate code suggestions, your console input, the history of your current console session, the currently inspected CSS, and the contents of the currently open file are shared with Google. This data may be seen by human reviewers to improve this feature.',\n  /**\n   * @description Second disclaimer item text for the fre dialog when enterprise logging is off.\n   */\n  freDisclaimerTextPrivacyNoLogging:\n      'To generate code suggestions, your console input, the history of your current console session, the currently inspected CSS, and the contents of the currently open file are shared with Google. This data will not be used to improve Google’s AI models. Your organization may change these settings at any time.',\n  /**\n   * @description Third disclaimer item text for the fre dialog.\n   */\n  freDisclaimerTextUseWithCaution: 'Use generated code snippets with caution',\n  /**\n   *@description Text for ARIA label for the teaser.\n   */\n  press: 'Press',\n  /**\n   *@description Text for ARIA label for the teaser.\n   */\n  toDisableCodeSuggestions: 'to disable code suggestions.',\n} as const;\n\nconst lockedString = i18n.i18n.lockedString;\nconst CODE_SNIPPET_WARNING_URL = 'https://support.google.com/legal/answer/13505487';\nconst PROMOTION_ID = 'ai-code-completion';\n\nexport interface ViewInput {\n  aidaAvailability?: Host.AidaClient.AidaAccessPreconditions;\n  onAction: (event: Event) => void;\n  onDismiss: (event: Event) => void;\n}\n\nexport type View = (input: ViewInput, output: object, target: HTMLElement) => void;\n\nexport const DEFAULT_VIEW: View = (input, _output, target) => {\n  if (input.aidaAvailability !== Host.AidaClient.AidaAccessPreconditions.AVAILABLE) {\n    render(nothing, target);\n    return;\n  }\n  const cmdOrCtrl =\n      Host.Platform.isMac() ? lockedString(UIStringsNotTranslate.cmd) : lockedString(UIStringsNotTranslate.ctrl);\n  const teaserAriaLabel = lockedString(UIStringsNotTranslate.press) + ' ' + cmdOrCtrl + ' ' +\n      lockedString(UIStringsNotTranslate.i) + ' ' + lockedString(UIStringsNotTranslate.toTurnOnCodeSuggestions) + ' ' +\n      lockedString(UIStringsNotTranslate.press) + ' ' + cmdOrCtrl + ' ' + lockedString(UIStringsNotTranslate.x) + ' ' +\n      lockedString(UIStringsNotTranslate.toDisableCodeSuggestions);\n  const newBadge = UI.UIUtils.maybeCreateNewBadge(PROMOTION_ID);\n  const newBadgeTemplate = newBadge ? html`&nbsp;${newBadge}` : nothing;\n  // clang-format off\n  render(\n        html`\n          <style>${styles}</style>\n          <style>@scope to (devtools-widget > *) { ${UI.inspectorCommonStyles} }</style>\n          <div class=\"ai-code-completion-teaser-screen-reader-only\">${teaserAriaLabel}</div>\n          <div class=\"ai-code-completion-teaser\" aria-hidden=\"true\">\n            <span class=\"ai-code-completion-teaser-action\">\n              <span>${cmdOrCtrl}</span>\n              <span>${lockedString(UIStringsNotTranslate.i)}</span>\n            </span>\n            </span>&nbsp;${lockedString(UIStringsNotTranslate.toTurnOnCodeSuggestions)}&nbsp;\n            <span role=\"button\" class=\"ai-code-completion-teaser-dismiss\" @click=${input.onDismiss}\n              jslog=${VisualLogging.action('ai-code-completion-teaser.dismiss').track({click: true})}>\n                ${lockedString(UIStringsNotTranslate.dontShowAgain)}\n            </span>\n            ${newBadgeTemplate}\n          </div>\n        `, target\n      );\n  // clang-format on\n};\n\ninterface AiCodeCompletionTeaserConfig {\n  onDetach: () => void;\n}\n\nexport class AiCodeCompletionTeaser extends UI.Widget.Widget {\n  readonly #view: View;\n\n  #aidaAvailability?: Host.AidaClient.AidaAccessPreconditions;\n  #boundOnAidaAvailabilityChange: () => Promise<void>;\n  #boundOnAiCodeCompletionSettingChanged: () => void;\n  #onDetach: () => void;\n\n  // Whether the user completed first run experience dialog or not.\n  #aiCodeCompletionFreCompletedSetting =\n      Common.Settings.Settings.instance().createSetting('ai-code-completion-enabled', false);\n  // Whether the user dismissed the teaser or not.\n  #aiCodeCompletionTeaserDismissedSetting =\n      Common.Settings.Settings.instance().createSetting('ai-code-completion-teaser-dismissed', false);\n\n  #noLogging: boolean;  // Whether the enterprise setting is `ALLOW_WITHOUT_LOGGING` or not.\n\n  constructor(config: AiCodeCompletionTeaserConfig, view?: View) {\n    super();\n    this.markAsExternallyManaged();\n    this.#onDetach = config.onDetach;\n    this.#view = view ?? DEFAULT_VIEW;\n    this.#boundOnAidaAvailabilityChange = this.#onAidaAvailabilityChange.bind(this);\n    this.#boundOnAiCodeCompletionSettingChanged = this.#onAiCodeCompletionSettingChanged.bind(this);\n    this.#noLogging = Root.Runtime.hostConfig.aidaAvailability?.enterprisePolicyValue ===\n        Root.Runtime.GenAiEnterprisePolicyValue.ALLOW_WITHOUT_LOGGING;\n    this.requestUpdate();\n  }\n\n  #showReminderSnackbar(): void {\n    Snackbars.Snackbar.Snackbar.show({\n      message: lockedString(UIStringsNotTranslate.turnOnCodeSuggestionsAtAnyTimeInSettings),\n      actionProperties: {\n        label: lockedString(UIStringsNotTranslate.manage),\n        onClick: () => {\n          void UI.ViewManager.ViewManager.instance().showView('chrome-ai');\n        },\n      },\n      closable: true,\n    });\n  }\n\n  async #onAidaAvailabilityChange(): Promise<void> {\n    const currentAidaAvailability = await Host.AidaClient.AidaClient.checkAccessPreconditions();\n    if (currentAidaAvailability !== this.#aidaAvailability) {\n      this.#aidaAvailability = currentAidaAvailability;\n      this.requestUpdate();\n    }\n  }\n\n  #onAiCodeCompletionSettingChanged(): void {\n    if (this.#aiCodeCompletionFreCompletedSetting.get() || this.#aiCodeCompletionTeaserDismissedSetting.get()) {\n      this.detach();\n    }\n  }\n\n  onAction = async(event: Event): Promise<void> => {\n    event.preventDefault();\n    const result = await FreDialog.show({\n      header: {iconName: 'smart-assistant', text: lockedString(UIStringsNotTranslate.freDisclaimerHeader)},\n      reminderItems: [\n        {\n          iconName: 'psychiatry',\n          content: lockedString(UIStringsNotTranslate.freDisclaimerTextAiWontAlwaysGetItRight),\n        },\n        {\n          iconName: 'google',\n          content: this.#noLogging ? lockedString(UIStringsNotTranslate.freDisclaimerTextPrivacyNoLogging) :\n                                     lockedString(UIStringsNotTranslate.freDisclaimerTextPrivacy),\n        },\n        {\n          iconName: 'warning',\n          // clang-format off\n          content: html`<x-link\n            href=${CODE_SNIPPET_WARNING_URL}\n            class=\"link devtools-link\"\n            jslog=${VisualLogging.link('code-snippets-explainer.ai-code-completion-teaser').track({\n              click: true\n            })}\n          >${lockedString(UIStringsNotTranslate.freDisclaimerTextUseWithCaution)}</x-link>`,\n          // clang-format on\n        }\n      ],\n      onLearnMoreClick: () => {\n        void UI.ViewManager.ViewManager.instance().showView('chrome-ai');\n      },\n      ariaLabel: lockedString(UIStringsNotTranslate.freDisclaimerHeader),\n      learnMoreButtonAriaLabel: lockedString(UIStringsNotTranslate.learnMore),\n    });\n\n    if (result) {\n      this.#aiCodeCompletionFreCompletedSetting.set(true);\n      this.detach();\n    } else {\n      this.requestUpdate();\n    }\n  };\n\n  onDismiss = (event: Event): void => {\n    event.preventDefault();\n    this.#aiCodeCompletionTeaserDismissedSetting.set(true);\n    this.#showReminderSnackbar();\n    this.detach();\n  };\n\n  override performUpdate(): void {\n    const output = {};\n    this.#view(\n        {\n          aidaAvailability: this.#aidaAvailability,\n          onAction: this.onAction,\n          onDismiss: this.onDismiss,\n        },\n        output, this.contentElement);\n  }\n\n  override wasShown(): void {\n    super.wasShown();\n    Host.AidaClient.HostConfigTracker.instance().addEventListener(\n        Host.AidaClient.Events.AIDA_AVAILABILITY_CHANGED, this.#boundOnAidaAvailabilityChange);\n    this.#aiCodeCompletionFreCompletedSetting.addChangeListener(this.#boundOnAiCodeCompletionSettingChanged);\n    this.#aiCodeCompletionTeaserDismissedSetting.addChangeListener(this.#boundOnAiCodeCompletionSettingChanged);\n    void this.#onAidaAvailabilityChange();\n  }\n\n  override willHide(): void {\n    super.willHide();\n    Host.AidaClient.HostConfigTracker.instance().removeEventListener(\n        Host.AidaClient.Events.AIDA_AVAILABILITY_CHANGED, this.#boundOnAidaAvailabilityChange);\n    this.#aiCodeCompletionFreCompletedSetting.removeChangeListener(this.#boundOnAiCodeCompletionSettingChanged);\n    this.#aiCodeCompletionTeaserDismissedSetting.removeChangeListener(this.#boundOnAiCodeCompletionSettingChanged);\n  }\n\n  override onDetach(): void {\n    this.#onDetach();\n  }\n}\n", "// Copyright 2025 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n// IMPORTANT: this file is auto generated. Please do not edit this file.\n/* istanbul ignore file */\nexport default `/*\n * Copyright 2025 The Chromium Authors\n * Use of this source code is governed by a BSD-style license that can be\n * found in the LICENSE file.\n */\n\n@scope to (devtools-widget > *) {\n    .ai-code-completion-teaser-screen-reader-only {\n        position: absolute;\n        overflow: hidden;\n        clip-path: rect(0 0 0 0);\n        height: var(--sys-size-1);\n        width: var(--sys-size-1);\n        margin: -1 * var(--sys-size-1);;\n        padding: 0;\n        border: 0;\n    }\n\n    .ai-code-completion-teaser {\n        padding-left: var(--sys-size-3);\n        line-height: var(--sys-size-7);\n        pointer-events: all;\n        align-items: center;\n        font-style: italic;\n\n        .ai-code-completion-teaser-dismiss {\n            text-decoration: underline;\n            cursor: pointer;\n        }\n\n        .ai-code-completion-teaser-action {\n            display: inline-flex;\n            gap: var(--sys-size-2);\n\n            span {\n                border: var(--sys-size-1) solid var(--sys-color-neutral-outline);\n                border-radius: var(--sys-shape-corner-extra-small);\n                padding: 0 var(--sys-size-3);\n            }\n        }\n\n        .new-badge {\n            font-style: normal;\n            display: inline-block;\n        }\n    }\n}\n\n/*# sourceURL=${import.meta.resolve('./aiCodeCompletionTeaser.css')} */`;", "// Copyright 2025 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n/* eslint-disable @devtools/no-lit-render-outside-of-view */\n\nimport * as i18n from '../../core/i18n/i18n.js';\nimport type * as Platform from '../../core/platform/platform.js';\nimport * as Buttons from '../../ui/components/buttons/buttons.js';\nimport * as UI from '../../ui/legacy/legacy.js';\nimport * as Lit from '../../ui/lit/lit.js';\n\nimport styles from './freDialog.css.js';\n\nconst {html, Directives: {ifDefined}} = Lit;\n\nconst UIStrings = {\n  /**\n   * @description Header text for the feature reminder dialog.\n   */\n  thingsToConsider: 'Things to consider',\n  /**\n   * @description Text for the learn more button in the feature reminder dialog.\n   */\n  learnMore: 'Learn more',\n  /**\n   * @description Text for the cancel button in the feature reminder dialog.\n   */\n  cancel: 'Cancel',\n  /**\n   * @description Text for the got it button in the feature reminder dialog.\n   */\n  gotIt: 'Got it',\n} as const;\n\nconst str_ = i18n.i18n.registerUIStrings('panels/common/FreDialog.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\n\nexport class FreDialog {\n  static show({header, reminderItems, onLearnMoreClick, ariaLabel, learnMoreButtonText, learnMoreButtonAriaLabel}: {\n    header: {\n      iconName: string,\n      text: Platform.UIString.LocalizedString,\n    },\n    reminderItems: Array<{\n      iconName: string,\n      content: Platform.UIString.LocalizedString|Lit.LitTemplate,\n    }>,\n    onLearnMoreClick: () => void,\n    ariaLabel?: string,\n    learnMoreButtonText?: string,\n    learnMoreButtonAriaLabel?: string,\n  }): Promise<boolean> {\n    const dialog = new UI.Dialog.Dialog();\n    if (ariaLabel) {\n      dialog.setAriaLabel(ariaLabel);\n    }\n    const result = Promise.withResolvers<boolean>();\n    // clang-format off\n    Lit.render(html`\n      <div class=\"fre-disclaimer\">\n        <style>\n          ${styles}\n        </style>\n        <header>\n          <div class=\"header-icon-container\">\n            <devtools-icon name=${header.iconName}></devtools-icon>\n          </div>\n          <h2 tabindex=\"-1\">\n            ${header.text}\n          </h2>\n        </header>\n        <main class=\"reminder-container\">\n          <h3>${i18nString(UIStrings.thingsToConsider)}</h3>\n          ${reminderItems.map(reminderItem => html`\n            <div class=\"reminder-item\">\n              <devtools-icon class=\"reminder-icon\" name=${reminderItem.iconName}></devtools-icon>\n              <span>${reminderItem.content}</span>\n            </div>\n          `)}\n        </main>\n        <footer>\n          <devtools-button\n            @click=${onLearnMoreClick}\n            .jslogContext=${'fre-disclaimer.learn-more'}\n            .variant=${Buttons.Button.Variant.OUTLINED}\n            .title=${learnMoreButtonAriaLabel ?? i18nString(UIStrings.learnMore)}\n            aria-label=${ifDefined(learnMoreButtonAriaLabel)}>\n            ${learnMoreButtonText ?? i18nString(UIStrings.learnMore)}\n          </devtools-button>\n          <div class=\"right-buttons\">\n            <devtools-button\n              @click=${() => {\n                // The order of operations are important here as hiding the dialog by\n                // itself causes the promise to be resolved with `false` in `onHideCallback`.\n                result.resolve(false);\n                dialog.hide();\n              }}\n              .jslogContext=${'fre-disclaimer.cancel'}\n              .variant=${Buttons.Button.Variant.TONAL}>\n              ${i18nString(UIStrings.cancel)}\n            </devtools-button>\n            <devtools-button\n              @click=${() => {\n                // The order of operations are important here as hiding the dialog by\n                // itself causes the promise to be resolved with `false` in `onHideCallback`.\n                result.resolve(true);\n                dialog.hide();\n              }}\n              .jslogContext=${'fre-disclaimer.continue'}\n              .variant=${Buttons.Button.Variant.PRIMARY}>\n              ${i18nString(UIStrings.gotIt)}\n            </devtools-button>\n          </div>\n        </footer>\n      </div>`, dialog.contentElement);\n    // clang-format on\n\n    dialog.setOutsideClickCallback(ev => {\n      ev.consume(true);  // true = preventDefault()\n      dialog.hide();\n      result.resolve(false);\n    });\n\n    // This ensures that if the dialog gets hidden for any unexpected reason,\n    // or if the user goes to another panel and comes back, that we resolve\n    // rather than leave the promise dangling.\n    dialog.setOnHideCallback(() => {\n      result.resolve(false);\n    });\n\n    dialog.setSizeBehavior(UI.GlassPane.SizeBehavior.MEASURE_CONTENT);\n    dialog.setDimmed(true);\n    dialog.show();\n\n    return result.promise;\n  }\n\n  private constructor() {\n  }\n}\n", "// Copyright 2025 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n// IMPORTANT: this file is auto generated. Please do not edit this file.\n/* istanbul ignore file */\nexport default `/*\n * Copyright 2025 The Chromium Authors\n * Use of this source code is governed by a BSD-style license that can be\n * found in the LICENSE file.\n */\n\n\n.fre-disclaimer {\n  width: var(--sys-size-33);\n  padding: var(--sys-size-9);\n\n  header {\n    display: flex;\n    gap: var(--sys-size-8);\n    margin-bottom: var(--sys-size-6);\n    align-items: center;\n\n    h2 {\n      margin: 0;\n      color: var(--sys-color-on-surface);\n      font: var(--sys-typescale-headline5);\n    }\n\n    .header-icon-container {\n      background: linear-gradient(\n        135deg,\n        var(--sys-color-gradient-primary),\n        var(--sys-color-gradient-tertiary)\n      );\n      border-radius: var(--sys-size-4);\n      min-height: var(--sys-size-14);\n      min-width: var(--sys-size-14);\n      display: flex;\n      align-items: center;\n      justify-content: center;\n\n      devtools-icon {\n        width: var(--sys-size-9);\n        height: var(--sys-size-9);\n      }\n    }\n  }\n\n  .reminder-container {\n    border-radius: var(--sys-size-6);\n    background-color: var(--sys-color-surface4);\n    padding: var(--sys-size-9);\n\n    h3 {\n      color: var(--sys-color-on-surface);\n      font: var(--sys-typescale-body4-medium);\n      margin: 0;\n    }\n\n    .reminder-item {\n      display: flex;\n      flex-direction: row;\n      align-items: center;\n      gap: var(--sys-size-5);\n      margin-top: var(--sys-size-6);\n      font: var(--sys-typescale-body5-regular);\n\n      devtools-icon.reminder-icon {\n        width: var(--sys-size-8);\n        height: var(--sys-size-8);\n      }\n\n      .link {\n        color: var(--sys-color-primary);\n        text-decoration-line: underline;\n      }\n    }\n  }\n\n  footer {\n    display: flex;\n    flex-direction: row;\n    align-items: center;\n    justify-content: space-between;\n    margin-top: var(--sys-size-8);\n    min-width: var(--sys-size-28);\n\n    .right-buttons {\n      display: flex;\n      gap: var(--sys-size-5);\n    }\n  }\n}\n\n/*# sourceURL=${import.meta.resolve('./freDialog.css')} */`;", "// Copyright 2025 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\nimport '../../ui/components/switch/switch.js';\n\nimport * as Common from '../../core/common/common.js';\nimport * as Host from '../../core/host/host.js';\nimport * as i18n from '../../core/i18n/i18n.js';\nimport type * as Platform from '../../core/platform/platform.js';\nimport * as Badges from '../../models/badges/badges.js';\nimport * as Geometry from '../../models/geometry/geometry.js';\nimport * as Buttons from '../../ui/components/buttons/buttons.js';\nimport * as Snackbars from '../../ui/components/snackbars/snackbars.js';\nimport type * as Switch from '../../ui/components/switch/switch.js';\nimport * as UIHelpers from '../../ui/helpers/helpers.js';\nimport * as uiI18n from '../../ui/i18n/i18n.js';\nimport * as UI from '../../ui/legacy/legacy.js';\nimport {html, render} from '../../ui/lit/lit.js';\n\nimport styles from './gdpSignUpDialog.css.js';\n\nconst UIStrings = {\n  /**\n   * @description Aria label for the Google Developer Program sign up dialog\n   */\n  gdpDialogAriaLabel: 'Google Developer Program sign up dialog',\n  /**\n   *\n   * @description Button text for canceling GDP sign up.\n   */\n  cancel: 'Cancel',\n  /**\n   * @description Button text for confirming GDP sign up.\n   */\n  signUp: 'Sign up',\n  /**\n   * @description Title for the first section of the GDP sign up dialog.\n   */\n  designedForSuccess: 'Designed for your success',\n  /**\n   * @description Body for the first section of the GDP sign up dialog.\n   */\n  designedForSuccessBody: 'Grow your skills, build with AI, and earn badges you can showcase in your developer profile',\n  /**\n   * @description Title for the second section of the GDP sign up dialog.\n   */\n  keepUpdated: 'Keep me updated',\n  /**\n   * @description Body for the second section of the GDP sign up dialog.\n   */\n  keepUpdatedBody: 'The latest DevTools features, event invites, and tailored insights land directly in your inbox',\n  /**\n   * @description Title for the third section of the GDP sign up dialog.\n   */\n  tailorProfile: 'Tailor your profile',\n  /**\n   * @description Body for the third section of the GDP sign up dialog.\n   */\n  tailorProfileBody:\n      'The name on your Google Account and your interests will be used in your Google Developer Profile. Your name may appear where you contribute and can be changed at any time.',\n  /**\n   * @description Body for the third section of the GDP sign up dialog.\n   * @example {Content Policy} PH1\n   * @example {Terms of Service} PH2\n   * @example {Privacy Policy} PH3\n   */\n  tailorProfileBodyDisclaimer:\n      'By creating a Developer Profile, you agree to the {PH1}. Google’s {PH2} and {PH3} apply to your use of this service.',\n  /**\n   * @description Button text for learning more about the Google Developer Program.\n   */\n  learnMore: 'Learn more',\n  /**\n   * @description Accessible text for learning more about the Google Developer Program.\n   */\n  learnMoreAccessibleText: 'Learn more about the Google Developer Program',\n  /**\n   * @description Link text for Content Policy.\n   */\n  contentPolicy: 'Content Policy',\n  /**\n   * @description Link text for Terms of Service.\n   */\n  termsOfService: 'Terms of Service',\n  /**\n   * @description Link text for Privacy Policy.\n   */\n  privacyPolicy: 'Privacy Policy',\n  /**\n   * @description Error message shown in a snackbar when GDP sign up fails.\n   */\n  signUpFailed: 'Your Google Developer Program profile couldn’t be created. Please try again later.'\n} as const;\n\nconst str_ = i18n.i18n.registerUIStrings('panels/common/GdpSignUpDialog.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\n\nconst TERMS_OF_SERVICE_URL = 'https://policies.google.com/terms';\nconst PRIVACY_POLICY_URL = 'https://policies.google.com/privacy';\nconst CONTENT_POLICY_URL = 'https://developers.google.com/profile/content-policy';\nconst GDP_PROGRAM_URL = 'https://developers.google.com/program';\n\ninterface ViewInput {\n  onSignUpClick: () => void;\n  onCancelClick: () => void;\n  keepMeUpdated: boolean;\n  onKeepMeUpdatedChange: (value: boolean) => void;\n  isSigningUp: boolean;\n}\n\ntype View = (input: ViewInput, output: undefined, target: HTMLElement) => void;\n\nexport const DEFAULT_VIEW: View = (input, _output, target): void => {\n  // clang-format off\n  render(\n    html`\n      <style>${styles}</style>\n      <div class=\"gdp-sign-up-dialog-header\" role=\"img\" aria-label=\"Google Developer Program\"></div>\n      <div class=\"main-content\">\n        <div class=\"section\">\n          <div class=\"icon-container\">\n            <devtools-icon name=\"trophy\"></devtools-icon>\n          </div>\n          <div class=\"text-container\">\n            <h2 class=\"section-title\">${i18nString(UIStrings.designedForSuccess)}</h2>\n            <div class=\"section-text\">${i18nString(UIStrings.designedForSuccessBody)}</div>\n          </div>\n        </div>\n        <div class=\"section\">\n          <div class=\"icon-container\">\n            <devtools-icon name=\"mark-email-unread\"></devtools-icon>\n          </div>\n          <div class=\"text-container\">\n            <h2 class=\"section-title\">${i18nString(UIStrings.keepUpdated)}</h2>\n            <div class=\"section-text\">${i18nString(UIStrings.keepUpdatedBody)}</div>\n          </div>\n          <div class=\"switch-container\">\n            <devtools-switch\n            .checked=${input.keepMeUpdated}\n            .jslogContext=${'keep-me-updated'}\n            .label=${i18nString(UIStrings.keepUpdated)}\n            @switchchange=${(e: Switch.Switch.SwitchChangeEvent) => input.onKeepMeUpdatedChange(e.checked)}\n          >\n            </devtools-switch>\n          </div>\n          </div>\n        <div class=\"section\">\n          <div class=\"icon-container\">\n            <devtools-icon name=\"google\"></devtools-icon>\n          </div>\n          <div class=\"text-container\">\n            <h2 class=\"section-title\">${i18nString(UIStrings.tailorProfile)}</h2>\n            <div class=\"section-text\">\n              <div>${i18nString(UIStrings.tailorProfileBody)}</div><br/>\n              <div>${uiI18n.getFormatLocalizedString(str_, UIStrings.tailorProfileBodyDisclaimer, {\n      PH1: UI.XLink.XLink.create(CONTENT_POLICY_URL, i18nString(UIStrings.contentPolicy), 'link', undefined, 'content-policy'),\n      PH2: UI.XLink.XLink.create(TERMS_OF_SERVICE_URL, i18nString(UIStrings.termsOfService), 'link',\n        undefined, 'terms-of-service'),\n      PH3: UI.XLink.XLink.create(PRIVACY_POLICY_URL, i18nString(UIStrings.privacyPolicy), 'link',\n        undefined, 'privacy-policy'),\n    })}</div>\n            </div>\n          </div>\n        </div>\n      </div>\n      <div class=\"buttons\">\n        <devtools-button\n          aria-label=${i18nString(UIStrings.learnMoreAccessibleText)}\n          .title=${i18nString(UIStrings.learnMoreAccessibleText)}\n          .variant=${Buttons.Button.Variant.OUTLINED}\n          .jslogContext=${'learn-more'}\n          @click=${() => UIHelpers.openInNewTab(GDP_PROGRAM_URL as Platform.DevToolsPath.UrlString)}>${i18nString(UIStrings.learnMore)}</devtools-button>\n        <div class=\"right-buttons\">\n          <devtools-button\n            .variant=${Buttons.Button.Variant.TONAL}\n            .jslogContext=${'cancel'}\n            @click=${input.onCancelClick}>${i18nString(UIStrings.cancel)}</devtools-button>\n          <devtools-button\n            .variant=${Buttons.Button.Variant.PRIMARY}\n            .jslogContext=${'sign-up'}\n            .spinner=${input.isSigningUp}\n            .disabled=${input.isSigningUp}\n            @click=${input.onSignUpClick}>${i18nString(UIStrings.signUp)}</devtools-button>\n        </div>\n      </div>\n    `,\n    target\n  );\n  // clang-format on\n};\n\nexport class GdpSignUpDialog extends UI.Widget.VBox {\n  #view: View;\n  #dialog: UI.Dialog.Dialog;\n  #keepMeUpdated = false;\n  #isSigningUp = false;\n  #onSuccess?: () => void;\n  #onCancel?: () => void;\n\n  constructor(\n      options: {\n        dialog: UI.Dialog.Dialog,\n        onSuccess?: () => void,\n        onCancel?: () => void,\n      },\n      view?: View) {\n    super();\n    this.#dialog = options.dialog;\n    this.#onSuccess = options.onSuccess;\n    this.#onCancel = options.onCancel;\n    this.#view = view ?? DEFAULT_VIEW;\n    this.requestUpdate();\n  }\n\n  async #onSignUpClick(): Promise<void> {\n    this.#isSigningUp = true;\n    this.requestUpdate();\n\n    const syncInfo = await new Promise<Host.InspectorFrontendHostAPI.SyncInformation>(\n        resolve => Host.InspectorFrontendHost.InspectorFrontendHostInstance.getSyncInformation(resolve));\n    const user = syncInfo.accountFullName ?? '';\n    const emailPreference =\n        this.#keepMeUpdated ? Host.GdpClient.EmailPreference.ENABLED : Host.GdpClient.EmailPreference.DISABLED;\n    const result = await Host.GdpClient.GdpClient.instance().createProfile({user, emailPreference});\n    if (result) {\n      Common.Settings.Settings.instance().moduleSetting('receive-gdp-badges').set(true);\n      await Badges.UserBadges.instance().initialize();\n      Badges.UserBadges.instance().recordAction(Badges.BadgeAction.GDP_SIGN_UP_COMPLETE);\n      this.#onSuccess?.();\n      this.#dialog.hide();\n    } else {\n      Snackbars.Snackbar.Snackbar.show({message: i18nString(UIStrings.signUpFailed)}, this.#dialog.contentElement);\n      this.#isSigningUp = false;\n      this.requestUpdate();\n    }\n  }\n\n  override performUpdate(): void {\n    const viewInput = {\n      onSignUpClick: this.#onSignUpClick.bind(this),\n      onCancelClick: () => {\n        this.#dialog.hide();\n        this.#onCancel?.();\n      },\n      keepMeUpdated: this.#keepMeUpdated,\n      onKeepMeUpdatedChange: (value: boolean) => {\n        this.#keepMeUpdated = value;\n        this.requestUpdate();\n      },\n      isSigningUp: this.#isSigningUp,\n    };\n\n    this.#view(viewInput, undefined, this.contentElement);\n  }\n\n  static show({onSuccess, onCancel}: {onSuccess?: () => void, onCancel?: () => void} = {}): void {\n    const dialog = new UI.Dialog.Dialog('gdp-sign-up-dialog');\n    dialog.setAriaLabel(i18nString(UIStrings.gdpDialogAriaLabel));\n    dialog.setMaxContentSize(new Geometry.Size(384, 500));\n    dialog.setSizeBehavior(UI.GlassPane.SizeBehavior.SET_EXACT_WIDTH_MAX_HEIGHT);\n    dialog.setDimmed(true);\n\n    new GdpSignUpDialog({dialog, onSuccess, onCancel}).show(dialog.contentElement);\n    dialog.show(undefined, /* stack */ true);\n  }\n}\n", "// Copyright 2025 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n// IMPORTANT: this file is auto generated. Please do not edit this file.\n/* istanbul ignore file */\nexport default `/*\n * Copyright 2025 The Chromium Authors\n * Use of this source code is governed by a BSD-style license that can be\n * found in the LICENSE file.\n */\n\n@scope to (devtools-widget > *) {\n    :scope {\n        width: 100%;\n        box-shadow: none;\n        padding: var(--sys-size-8);\n    }\n\n    .gdp-sign-up-dialog-header {\n        background-image: var(--image-file-gdp-logo-light);\n        height: 20px;\n        background-repeat: no-repeat;\n        background-size: contain;\n        margin: 0;\n\n        &:focus-visible {\n            outline: 2px solid var(--sys-color-state-focus-ring);\n        }\n    }\n\n    :host-context(.theme-with-dark-background) & .gdp-sign-up-dialog-header {\n        background-image: var(--image-file-gdp-logo-dark);\n    }\n\n    .main-content {\n        display: flex;\n        flex-direction: column;\n        margin: var(--sys-size-6) 0;\n        gap: var(--sys-size-3);\n    }\n\n    .section {\n        display: flex;\n        gap: var(--sys-size-6);\n        padding: 12px 16px 12px 12px;\n        background-color: var(--sys-color-surface4);\n        align-self: stretch;\n    }\n\n    .icon-container {\n        flex-shrink: 0;\n    }\n\n    .section:first-child {\n        border-top-left-radius: var(--sys-shape-corner-medium-small);\n        border-top-right-radius: var(--sys-shape-corner-medium-small);\n    }\n\n    .section:last-child {\n        border-bottom-left-radius: var(--sys-shape-corner-medium-small);\n        border-bottom-right-radius: var(--sys-shape-corner-medium-small);\n    }\n\n    .section .icon-container devtools-icon {\n        width: var(--sys-size-8);\n        height: var(--sys-size-8);\n    }\n\n    .text-container {\n        display: flex;\n        flex-direction: column;\n    }\n\n    .section-title {\n        margin: 0;\n        font: var(--sys-typescale-body4-medium);\n        color: var(--sys-color-on-surface);\n    }\n\n    .section-text {\n        font: var(--sys-typescale-body4-regular);\n        color: var(--sys-color-on-surface-subtle);\n        line-height: 18px;\n    }\n\n    .switch-container {\n        display: flex;\n        align-items: center;\n        flex-shrink: 0;\n    }\n\n    .buttons {\n        display: flex;\n        justify-content: space-between;\n        align-items: center;\n    }\n\n    .right-buttons {\n        display: flex;\n        gap: var(--sys-size-5);\n    }\n}\n\n/*# sourceURL=${import.meta.resolve('./gdpSignUpDialog.css')} */`;", "// Copyright 2025 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport '../../ui/components/spinners/spinners.js';\nimport '../../ui/components/tooltips/tooltips.js';\n\nimport * as Host from '../../core/host/host.js';\nimport * as i18n from '../../core/i18n/i18n.js';\nimport * as Root from '../../core/root/root.js';\nimport * as UI from '../../ui/legacy/legacy.js';\nimport {Directives, html, nothing, render} from '../../ui/lit/lit.js';\nimport * as VisualLogging from '../../ui/visual_logging/visual_logging.js';\n\nimport styles from './aiCodeCompletionDisclaimer.css.js';\n\nconst UIStringsNotTranslate = {\n  /**\n   * @description Disclaimer text for AI code completion\n   */\n  relevantData: 'Relevant data',\n  /**\n   * @description Disclaimer text for AI code completion\n   */\n  isSentToGoogle: 'is sent to Google',\n  /**\n   * @description Text for tooltip shown on hovering over \"Relevant Data\" in the disclaimer text for AI code completion.\n   */\n  tooltipDisclaimerTextForAiCodeCompletion:\n      'To generate code suggestions, your console input and the history of your current console session are shared with Google. This data may be seen by human reviewers to improve this feature.',\n  /**\n   * @description Text for tooltip shown on hovering over \"Relevant Data\" in the disclaimer text for AI code completion.\n   */\n  tooltipDisclaimerTextForAiCodeCompletionNoLogging:\n      'To generate code suggestions, your console input and the history of your current console session are shared with Google. This data will not be used to improve Google’s AI models.',\n  /**\n   * Text for tooltip shown on hovering over spinner.\n   */\n  tooltipTextForSpinner: 'Shows when data is being sent to Google to generate code suggestions',\n  /**\n   * @description Text for tooltip button which redirects to AI settings\n   */\n  manageInSettings: 'Manage in settings',\n  /**\n   *@description Text announced when request is sent to AIDA and the spinner is loading\n   */\n  dataIsBeingSentToGoogle: 'Data is being sent to Google',\n} as const;\n\nconst lockedString = i18n.i18n.lockedString;\n\nexport interface ViewInput {\n  disclaimerTooltipId?: string;\n  spinnerTooltipId?: string;\n  noLogging: boolean;\n  aidaAvailability?: Host.AidaClient.AidaAccessPreconditions;\n  onManageInSettingsTooltipClick: () => void;\n}\n\nexport interface ViewOutput {\n  hideTooltip?: () => void;\n  setLoading?: (isLoading: boolean) => void;\n}\n\nexport type View = (input: ViewInput, output: ViewOutput, target: HTMLElement) => void;\n\nexport const DEFAULT_SUMMARY_TOOLBAR_VIEW: View =\n    (input, output, target) => {\n      if (input.aidaAvailability !== Host.AidaClient.AidaAccessPreconditions.AVAILABLE || !input.disclaimerTooltipId ||\n          !input.spinnerTooltipId) {\n        render(nothing, target);\n        return;\n      }\n      // clang-format off\n  render(\n    html`\n        <style>${styles}</style>\n        <div class=\"ai-code-completion-disclaimer\"><devtools-spinner\n          .active=${false}\n          ${Directives.ref(el => {\n            if (el instanceof HTMLElement) {\n              output.setLoading = (isLoading: boolean) => {\n                el.toggleAttribute('active', isLoading);\n              };\n            }\n          })}\n          aria-details=${input.spinnerTooltipId}\n          aria-describedby=${input.spinnerTooltipId}></devtools-spinner>\n          <devtools-tooltip\n              id=${input.spinnerTooltipId}\n              variant=\"rich\"\n              jslogContext=\"ai-code-completion-spinner-tooltip\">\n          <div class=\"disclaimer-tooltip-container\"><div class=\"tooltip-text\">\n            ${lockedString(UIStringsNotTranslate.tooltipTextForSpinner)}\n          </div></div></devtools-tooltip>\n          <span\n              tabIndex=\"0\"\n              class=\"link\"\n              role=\"link\"\n              jslog=${VisualLogging.link('open-ai-settings').track({\n                click: true,\n              })}\n              aria-details=${input.disclaimerTooltipId}\n              aria-describedby=${input.disclaimerTooltipId}\n              @click=${() => {\n                void UI.ViewManager.ViewManager.instance().showView('chrome-ai');\n              }}\n          >${lockedString(UIStringsNotTranslate.relevantData)}</span>${lockedString(UIStringsNotTranslate.isSentToGoogle)}\n          <devtools-tooltip\n              id=${input.disclaimerTooltipId}\n              variant=\"rich\"\n              jslogContext=\"ai-code-completion-disclaimer\"\n              ${Directives.ref(el => {\n                if (el instanceof HTMLElement) {\n                  output.hideTooltip = () => {\n                    el.hidePopover();\n                  };\n                }\n              })}>\n            <div class=\"disclaimer-tooltip-container\"><div class=\"tooltip-text\">\n                ${input.noLogging ? lockedString(UIStringsNotTranslate.tooltipDisclaimerTextForAiCodeCompletionNoLogging) : lockedString(UIStringsNotTranslate.tooltipDisclaimerTextForAiCodeCompletion)}\n                </div>\n                <span\n                    tabIndex=\"0\"\n                    class=\"link\"\n                    role=\"link\"\n                    jslog=${VisualLogging.link('open-ai-settings').track({\n                      click: true,\n                    })}\n                    @click=${input.onManageInSettingsTooltipClick}\n                >${lockedString(UIStringsNotTranslate.manageInSettings)}</span></div></devtools-tooltip>\n          </div>\n        `, target);\n      // clang-format on\n    };\n\nconst MINIMUM_LOADING_STATE_TIMEOUT = 1000;\n\nexport class AiCodeCompletionDisclaimer extends UI.Widget.Widget {\n  readonly #view: View;\n  #viewOutput: ViewOutput = {};\n\n  #spinnerTooltipId?: string;\n  #disclaimerTooltipId?: string;\n  #noLogging: boolean;  // Whether the enterprise setting is `ALLOW_WITHOUT_LOGGING` or not.\n  #loading = false;\n  #loadingStartTime = 0;\n  #spinnerLoadingTimeout: number|undefined;\n\n  #aidaAvailability?: Host.AidaClient.AidaAccessPreconditions;\n  #boundOnAidaAvailabilityChange: () => Promise<void>;\n\n  constructor(element?: HTMLElement, view: View = DEFAULT_SUMMARY_TOOLBAR_VIEW) {\n    super(element);\n    this.markAsExternallyManaged();\n    this.#noLogging = Root.Runtime.hostConfig.aidaAvailability?.enterprisePolicyValue ===\n        Root.Runtime.GenAiEnterprisePolicyValue.ALLOW_WITHOUT_LOGGING;\n    this.#boundOnAidaAvailabilityChange = this.#onAidaAvailabilityChange.bind(this);\n    this.#view = view;\n  }\n\n  set disclaimerTooltipId(disclaimerTooltipId: string) {\n    this.#disclaimerTooltipId = disclaimerTooltipId;\n    this.requestUpdate();\n  }\n\n  set spinnerTooltipId(spinnerTooltipId: string) {\n    this.#spinnerTooltipId = spinnerTooltipId;\n    this.requestUpdate();\n  }\n\n  set loading(loading: boolean) {\n    if (!loading && !this.#loading) {\n      return;\n    }\n\n    if (loading) {\n      if (!this.#loading) {\n        this.#viewOutput.setLoading?.(true);\n        UI.ARIAUtils.LiveAnnouncer.status(lockedString(UIStringsNotTranslate.dataIsBeingSentToGoogle));\n      }\n      if (this.#spinnerLoadingTimeout) {\n        clearTimeout(this.#spinnerLoadingTimeout);\n        this.#spinnerLoadingTimeout = undefined;\n      }\n      this.#loadingStartTime = performance.now();\n      this.#loading = true;\n    } else {\n      this.#loading = false;\n      const duration = performance.now() - this.#loadingStartTime;\n      const remainingTime = Math.max(MINIMUM_LOADING_STATE_TIMEOUT - duration, 0);\n      this.#spinnerLoadingTimeout = window.setTimeout(() => {\n        this.#viewOutput.setLoading?.(false);\n        this.#spinnerLoadingTimeout = undefined;\n      }, remainingTime);\n    }\n  }\n\n  async #onAidaAvailabilityChange(): Promise<void> {\n    const currentAidaAvailability = await Host.AidaClient.AidaClient.checkAccessPreconditions();\n    if (currentAidaAvailability !== this.#aidaAvailability) {\n      this.#aidaAvailability = currentAidaAvailability;\n      this.requestUpdate();\n    }\n  }\n\n  #onManageInSettingsTooltipClick(): void {\n    this.#viewOutput.hideTooltip?.();\n    void UI.ViewManager.ViewManager.instance().showView('chrome-ai');\n  }\n\n  override performUpdate(): void {\n    this.#view(\n        {\n          disclaimerTooltipId: this.#disclaimerTooltipId,\n          spinnerTooltipId: this.#spinnerTooltipId,\n          noLogging: this.#noLogging,\n          aidaAvailability: this.#aidaAvailability,\n          onManageInSettingsTooltipClick: this.#onManageInSettingsTooltipClick.bind(this),\n        },\n        this.#viewOutput, this.contentElement);\n  }\n\n  override wasShown(): void {\n    super.wasShown();\n    Host.AidaClient.HostConfigTracker.instance().addEventListener(\n        Host.AidaClient.Events.AIDA_AVAILABILITY_CHANGED, this.#boundOnAidaAvailabilityChange);\n    void this.#onAidaAvailabilityChange();\n  }\n\n  override willHide(): void {\n    super.willHide();\n    Host.AidaClient.HostConfigTracker.instance().removeEventListener(\n        Host.AidaClient.Events.AIDA_AVAILABILITY_CHANGED, this.#boundOnAidaAvailabilityChange);\n  }\n}\n", "// Copyright 2025 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n// IMPORTANT: this file is auto generated. Please do not edit this file.\n/* istanbul ignore file */\nexport default `/*\n * Copyright 2025 The Chromium Authors\n * Use of this source code is governed by a BSD-style license that can be\n * found in the LICENSE file.\n */\n\n@scope to (devtools-widget > *) {\n    /* stylelint-disable-next-line no-invalid-position-declaration */\n    display: flex;\n\n    .ai-code-completion-disclaimer {\n        gap: 5px;\n        display: flex;\n        flex-shrink: 0;\n\n        span.link {\n            color: var(--sys-color-on-surface-subtle);\n\n            &:focus-visible {\n                outline: var(--sys-size-2) solid var(--sys-color-state-focus-ring);\n                outline-offset: 0;\n                border-radius: var(--sys-shape-corner-extra-small);\n            }\n        }\n\n        devtools-spinner {\n            margin-top: var(--sys-size-2);\n            padding: var(--sys-size-1);\n            height: var(--sys-size-6);\n            width: var(--sys-size-6);\n        }\n\n        devtools-tooltip:popover-open {\n            display: flex;\n            flex-direction: column;\n            align-items: center;\n\n            .disclaimer-tooltip-container {\n                padding: var(--sys-size-4) 0;\n                max-width: var(--sys-size-30);\n                white-space: normal;\n\n                .tooltip-text {\n                    color: var(--sys-color-on-surface-subtle);\n                    padding: 0 var(--sys-size-5);\n                    align-items: flex-start;\n                    gap: 10px;\n                }\n\n                .link {\n                    margin: var(--sys-size-5) var(--sys-size-8) 0 var(--sys-size-5);\n                    display: inline-block;\n                }\n            }\n        }\n    }\n}\n\n/*# sourceURL=${import.meta.resolve('./aiCodeCompletionDisclaimer.css')} */`;", "// Copyright 2025 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport '../../ui/components/spinners/spinners.js';\nimport '../../ui/components/tooltips/tooltips.js';\n\nimport * as Host from '../../core/host/host.js';\nimport * as i18n from '../../core/i18n/i18n.js';\nimport * as UI from '../../ui/legacy/legacy.js';\nimport {Directives, html, nothing, render} from '../../ui/lit/lit.js';\nimport * as VisualLogging from '../../ui/visual_logging/visual_logging.js';\n\nimport {AiCodeCompletionDisclaimer} from './AiCodeCompletionDisclaimer.js';\nimport styles from './aiCodeCompletionSummaryToolbar.css.js';\n\nconst UIStringsNotTranslate = {\n  /**\n   * @description Text for recitation notice\n   */\n  generatedCodeMayBeSubjectToALicense: 'Generated code may be subject to a license.',\n  /**\n   * @description Text for citations\n   */\n  viewSources: 'View Sources',\n} as const;\n\nconst lockedString = i18n.i18n.lockedString;\n\nexport interface AiCodeCompletionSummaryToolbarProps {\n  citationsTooltipId: string;\n  disclaimerTooltipId?: string;\n  spinnerTooltipId?: string;\n  hasTopBorder?: boolean;\n}\n\nexport interface ViewInput {\n  disclaimerTooltipId?: string;\n  spinnerTooltipId?: string;\n  citations?: Set<string>;\n  citationsTooltipId: string;\n  loading: boolean;\n  hasTopBorder: boolean;\n  aidaAvailability?: Host.AidaClient.AidaAccessPreconditions;\n}\n\nexport type View = (input: ViewInput, output: undefined, target: HTMLElement) => void;\n\nexport const DEFAULT_SUMMARY_TOOLBAR_VIEW: View = (input, _output, target) => {\n  if (input.aidaAvailability !== Host.AidaClient.AidaAccessPreconditions.AVAILABLE) {\n    render(nothing, target);\n    return;\n  }\n  const toolbarClasses = Directives.classMap({\n    'ai-code-completion-summary-toolbar': true,\n    'has-disclaimer': Boolean(input.disclaimerTooltipId),\n    'has-recitation-notice': Boolean(input.citations && input.citations.size > 0),\n    'has-top-border': input.hasTopBorder,\n  });\n\n  // clang-format off\n  const disclaimer = input.disclaimerTooltipId && input.spinnerTooltipId ?\n    html`<devtools-widget\n            .widgetConfig=${UI.Widget.widgetConfig(AiCodeCompletionDisclaimer, {\n      disclaimerTooltipId: input.disclaimerTooltipId,\n      spinnerTooltipId: input.spinnerTooltipId,\n      loading: input.loading,\n    })} class=\"disclaimer-widget\"></devtools-widget>` : nothing;\n\n  const recitationNotice = input.citations && input.citations.size > 0 ?\n    html`<div class=\"ai-code-completion-recitation-notice\">\n                ${lockedString(UIStringsNotTranslate.generatedCodeMayBeSubjectToALicense)}\n                <span class=\"link\"\n                    role=\"link\"\n                    aria-details=${input.citationsTooltipId}\n                    aria-describedby=${input.citationsTooltipId}\n                    tabIndex=\"0\">\n                  ${lockedString(UIStringsNotTranslate.viewSources)}&nbsp;${lockedString('(' + input.citations.size + ')')}\n                </span>\n                <devtools-tooltip\n                    id=${input.citationsTooltipId}\n                    variant=\"rich\"\n                    jslogContext=\"ai-code-completion-citations\"\n                ><div class=\"citations-tooltip-container\">\n                    ${Directives.repeat(input.citations, citation => html`<x-link\n                        tabIndex=\"0\"\n                        href=${citation}\n                        jslog=${VisualLogging.link('ai-code-completion-citations.citation-link').track({\n      click: true\n    })}>${citation}</x-link>`)}</div></devtools-tooltip>\n            </div>` : nothing;\n\n  render(\n    html`\n        <style>${styles}</style>\n        <div class=${toolbarClasses}>\n          ${disclaimer}\n          ${recitationNotice}\n        </div>\n        `, target);\n  // clang-format on\n};\n\nexport class AiCodeCompletionSummaryToolbar extends UI.Widget.Widget {\n  readonly #view: View;\n\n  #disclaimerTooltipId?: string;\n  #spinnerTooltipId?: string;\n  #citationsTooltipId: string;\n  #citations = new Set<string>();\n  #loading = false;\n  #hasTopBorder = false;\n\n  #aidaAvailability?: Host.AidaClient.AidaAccessPreconditions;\n  #boundOnAidaAvailabilityChange: () => Promise<void>;\n\n  constructor(props: AiCodeCompletionSummaryToolbarProps, view?: View) {\n    super();\n    this.#disclaimerTooltipId = props.disclaimerTooltipId;\n    this.#spinnerTooltipId = props.spinnerTooltipId;\n    this.#citationsTooltipId = props.citationsTooltipId;\n    this.#hasTopBorder = props.hasTopBorder ?? false;\n    this.#boundOnAidaAvailabilityChange = this.#onAidaAvailabilityChange.bind(this);\n    this.#view = view ?? DEFAULT_SUMMARY_TOOLBAR_VIEW;\n    this.requestUpdate();\n  }\n\n  async #onAidaAvailabilityChange(): Promise<void> {\n    const currentAidaAvailability = await Host.AidaClient.AidaClient.checkAccessPreconditions();\n    if (currentAidaAvailability !== this.#aidaAvailability) {\n      this.#aidaAvailability = currentAidaAvailability;\n      this.requestUpdate();\n    }\n  }\n\n  setLoading(loading: boolean): void {\n    this.#loading = loading;\n    this.requestUpdate();\n  }\n\n  updateCitations(citations: string[]): void {\n    citations.forEach(citation => this.#citations.add(citation));\n    this.requestUpdate();\n  }\n\n  clearCitations(): void {\n    this.#citations.clear();\n    this.requestUpdate();\n  }\n\n  override performUpdate(): void {\n    this.#view(\n        {\n          disclaimerTooltipId: this.#disclaimerTooltipId,\n          spinnerTooltipId: this.#spinnerTooltipId,\n          citations: this.#citations,\n          citationsTooltipId: this.#citationsTooltipId,\n          loading: this.#loading,\n          hasTopBorder: this.#hasTopBorder,\n          aidaAvailability: this.#aidaAvailability,\n        },\n        undefined, this.contentElement);\n  }\n\n  override wasShown(): void {\n    super.wasShown();\n    Host.AidaClient.HostConfigTracker.instance().addEventListener(\n        Host.AidaClient.Events.AIDA_AVAILABILITY_CHANGED, this.#boundOnAidaAvailabilityChange);\n    void this.#onAidaAvailabilityChange();\n  }\n\n  override willHide(): void {\n    super.willHide();\n    Host.AidaClient.HostConfigTracker.instance().removeEventListener(\n        Host.AidaClient.Events.AIDA_AVAILABILITY_CHANGED, this.#boundOnAidaAvailabilityChange);\n  }\n}\n", "// Copyright 2025 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n// IMPORTANT: this file is auto generated. Please do not edit this file.\n/* istanbul ignore file */\nexport default `/*\n * Copyright 2025 The Chromium Authors\n * Use of this source code is governed by a BSD-style license that can be\n * found in the LICENSE file.\n */\n\n@scope to (devtools-widget > *) {\n  .ai-code-completion-summary-toolbar {\n    display: flex;\n    height: 26px;\n    background-color: var(--sys-color-cdt-base-container);\n    padding: var(--sys-size-2) var(--sys-size-5);\n    align-items: center;\n    gap: var(--sys-size-5);\n    flex-shrink: 0;\n    color: var(--sys-color-on-surface-subtle);\n\n    &:not(.has-top-border) {\n      border-top: var(--sys-size-1) solid var(--sys-color-divider);\n    }\n\n    devtools-widget.disclaimer-widget {\n      flex: none;\n    }\n\n    span.link {\n      color: var(--sys-color-on-surface-subtle);\n      /* Inside the code mirror editor, the cursor and text-decoration styling need to be provided explicitly */\n      cursor: pointer;\n      text-decoration: underline;\n\n      &:focus-visible {\n        outline: var(--sys-size-2) solid var(--sys-color-state-focus-ring);\n        outline-offset: 0;\n        border-radius: var(--sys-shape-corner-extra-small);\n      }\n    }\n\n    .ai-code-completion-recitation-notice {\n      white-space: nowrap;\n\n      span.link {\n        padding-left: var(--sys-size-3);\n      }\n    }\n\n    &.has-disclaimer .ai-code-completion-recitation-notice {\n      padding-left: var(--sys-size-5);\n      border-left: var(--sys-size-1) solid var(--sys-color-divider);\n    }\n\n    @media (width < 545px) {\n      &.has-disclaimer.has-recitation-notice {\n        height: 46px;\n        flex-direction: column;\n        align-items: flex-start;\n\n        .ai-code-completion-disclaimer {\n          height: 26px;\n          margin-bottom: -3px;\n          margin-top: var(--sys-size-2);\n          flex-shrink: 1;\n        }\n\n        .ai-code-completion-recitation-notice {\n          height: 26px;\n          padding-left: 0;\n          border-left: 0;\n          margin-top: -3px;\n        }\n      }\n    }\n\n    devtools-tooltip:popover-open {\n        display: flex;\n        flex-direction: column;\n        align-items: center;\n\n        .citations-tooltip-container {\n            display: inline-flex;\n            padding: var(--sys-size-4) var(--sys-size-5);\n            flex-direction: column;\n            align-items: flex-start;\n            justify-content: center;\n            gap: var(--sys-size-2);\n            white-space: normal;\n\n            x-link {\n                color: var(--sys-color-primary);\n                text-decoration: underline;\n\n              &:focus-visible {\n                outline: var(--sys-size-2) solid var(--sys-color-state-focus-ring);\n                outline-offset: 0;\n                border-radius: var(--sys-shape-corner-extra-small);\n              }\n          }\n      }\n    }\n  }\n}\n\n/*# sourceURL=${import.meta.resolve('./aiCodeCompletionSummaryToolbar.css')} */`;", "// Copyright 2025 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as Common from '../../core/common/common.js';\nimport * as Host from '../../core/host/host.js';\nimport * as i18n from '../../core/i18n/i18n.js';\nimport * as Badges from '../../models/badges/badges.js';\nimport * as Buttons from '../../ui/components/buttons/buttons.js';\nimport * as UIHelpers from '../../ui/helpers/helpers.js';\nimport * as uiI18n from '../../ui/i18n/i18n.js';\nimport * as UI from '../../ui/legacy/legacy.js';\nimport * as Lit from '../../ui/lit/lit.js';\nimport * as VisualLogging from '../../ui/visual_logging/visual_logging.js';\n\nimport badgeNotificationStyles from './badgeNotification.css.js';\nimport * as GdpSignUpDialog from './GdpSignUpDialog.js';\n\nconst {html, render} = Lit;\n\nconst UIStrings = {\n  /**\n   * @description Title for close button\n   */\n  close: 'Close',\n  /**\n   * @description Activity based badge award notification text\n   * @example {Badge Title} PH1\n   */\n  activityBasedBadgeAwardMessage: 'You earned the {PH1} badge! It’s been added to your Developer Profile.',\n  /**\n   * @description Action title for navigating to the badge settings in Google Developer Profile section\n   */\n  manageSettings: 'Manage settings',\n  /**\n   * @description Action title for opening the Google Developer Program profile page of the user in a new tab\n   */\n  viewProfile: 'View profile',\n  /**\n   * @description Starter badge award notification text when the user has a Google Developer Program profile but did not enable receiving badges in DevTools yet\n   * @example {Badge Title} PH1\n   * @example {Google Developer Program link} PH2\n   */\n  starterBadgeAwardMessageSettingDisabled: 'You earned the {PH1} badge for the {PH2}! Turn on badges to claim it.',\n  /**\n   * @description Starter badge award notification text when the user does not have a Google Developer Program profile.\n   * @example {Badge Title} PH1\n   * @example {Google Developer Program link} PH2\n   */\n  starterBadgeAwardMessageNoGdpProfile:\n      'You earned the {PH1} badge for the {PH2}! Create a profile to claim your badge.',\n  /**\n   * @description Action title for snoozing the starter badge.\n   */\n  remindMeLater: 'Remind me later',\n  /**\n   * @description Action title for enabling the \"Receive badges\" setting\n   */\n  receiveBadges: 'Turn on badges',\n  /**\n   * @description Action title for creating a Google Developer Program profle\n   */\n  createProfile: 'Create profile',\n} as const;\n\nconst str_ = i18n.i18n.registerUIStrings('panels/common/BadgeNotification.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\nconst i18nFormatString = uiI18n.getFormatLocalizedString.bind(undefined, str_);\nconst lockedString = i18n.i18n.lockedString;\n\nconst LEFT_OFFSET = 5;\nconst BOTTOM_OFFSET = 5;\nconst AUTO_CLOSE_TIME_IN_MS = 30000;\n\nexport interface BadgeNotificationAction {\n  label: string;\n  jslogContext: string;\n  title?: string;\n  onClick: () => void;\n}\n\nexport interface BadgeNotificationProperties {\n  message: HTMLElement|string;\n  jslogContext: string;\n  imageUri: string;\n  actions: BadgeNotificationAction[];\n  isStarterBadge: boolean;\n}\n\nexport interface ViewInput extends BadgeNotificationProperties {\n  onDismissClick: () => void;\n}\n\n// clang-format off\nconst DEFAULT_VIEW = (input: ViewInput, _output: undefined, target: HTMLElement): void => {\n  const actionButtons = input.actions.map(property => {\n    return html`<devtools-button\n        class=\"notification-button\"\n        @click=${() => property.onClick()}\n        jslog=${VisualLogging.action(property.jslogContext).track({click: true})}\n        .variant=${Buttons.Button.Variant.TEXT}\n        .title=${property.title ?? ''}\n        .inverseColorTheme=${true}\n    >${property.label}</devtools-button>`;\n  });\n\n  const crossButton = html`<devtools-button\n        class=\"dismiss notification-button\"\n        @click=${input.onDismissClick}\n        jslog=${VisualLogging.action('badge-notification.dismiss').track({click: true})}\n        aria-label=${i18nString(UIStrings.close)}\n        .iconName=${'cross'}\n        .variant=${Buttons.Button.Variant.ICON}\n        .title=${i18nString(UIStrings.close)}\n        .inverseColorTheme=${true}\n    ></devtools-button>`;\n\n  render(html`\n    <style>${badgeNotificationStyles}</style>\n    <div class=\"container\" jslog=${VisualLogging.dialog('badge-notification')}>\n      <div class=\"badge-container\" jslog=${VisualLogging.item(input.jslogContext)}>\n        <img class=\"badge-image\" role=\"presentation\" src=${input.imageUri}>\n      </div>\n      <div class=\"action-and-text-container\">\n        <div class=\"label-container\">\n            <div class=\"message\">${input.message}</div>\n            ${crossButton}\n        </div>\n        <div class=\"long-action-container\">${actionButtons}</div>\n      </div>\n    </div>\n  `, target);\n};\n// clang-format on\n\ntype View = typeof DEFAULT_VIEW;\n\nfunction revealBadgeSettings(): void {\n  void Common.Revealer.reveal(Common.Settings.moduleSetting('receive-gdp-badges'));\n}\n\nexport class BadgeNotification extends UI.Widget.Widget {\n  jslogContext = '';\n  message: HTMLElement|string = '';\n  imageUri = '';\n  actions: BadgeNotificationAction[] = [];\n  isStarterBadge = false;\n\n  #autoCloseTimeout?: number;\n  #view: View;\n  constructor(element?: HTMLElement, view: View = DEFAULT_VIEW) {\n    super(element);\n    this.#view = view;\n\n    // eslint-disable-next-line\n    this.contentElement.role = 'alert';\n    this.markAsRoot();\n  }\n\n  async present(badge: Badges.Badge): Promise<void> {\n    if (badge.isStarterBadge) {\n      await this.#presentStarterBadge(badge);\n    } else {\n      this.#presentActivityBasedBadge(badge);\n    }\n  }\n\n  #positionNotification(): void {\n    const boundingRect = this.contentElement.getBoundingClientRect();\n    const container = UI.UIUtils.getDevToolsBoundingElement();\n    this.contentElement.positionAt(\n        LEFT_OFFSET, container.clientHeight - boundingRect.height - BOTTOM_OFFSET, container);\n  }\n\n  #show(properties: BadgeNotificationProperties): void {\n    this.message = properties.message;\n    this.imageUri = properties.imageUri;\n    this.actions = properties.actions;\n    this.isStarterBadge = properties.isStarterBadge;\n    this.jslogContext = properties.jslogContext;\n    this.requestUpdate();\n    this.show(document.body);\n\n    void this.updateComplete.then(() => {\n      this.#positionNotification();\n    });\n\n    if (this.#autoCloseTimeout) {\n      window.clearTimeout(this.#autoCloseTimeout);\n    }\n    this.#autoCloseTimeout = window.setTimeout(this.#onAutoClose, AUTO_CLOSE_TIME_IN_MS);\n  }\n\n  async #presentStarterBadge(badge: Badges.Badge): Promise<void> {\n    const getProfileResponse = await Host.GdpClient.GdpClient.instance().getProfile();\n    // The `getProfile` call failed and returned a `null`.\n    // For that case, we don't show anything.\n    if (!getProfileResponse) {\n      return;\n    }\n\n    const hasGdpProfile = Boolean(getProfileResponse.profile);\n    const receiveBadgesSettingEnabled = Badges.UserBadges.instance().isReceiveBadgesSettingEnabled();\n    const googleDeveloperProgramLink = UI.XLink.XLink.create(\n        'https://developers.google.com/program', lockedString('Google Developer Program'), 'badge-link', undefined,\n        'program-link');\n\n    // If the user already has a GDP profile and the receive badges setting enabled,\n    // starter badge behaves as if it's an activity based badge.\n    if (hasGdpProfile && receiveBadgesSettingEnabled) {\n      this.#presentActivityBasedBadge(badge);\n      return;\n    }\n\n    // If the user already has a GDP profile and the receive badges setting disabled,\n    // starter badge behaves as a nudge for opting into receiving badges.\n    if (hasGdpProfile && !receiveBadgesSettingEnabled) {\n      this.#show({\n        message: i18nFormatString(\n            UIStrings.starterBadgeAwardMessageSettingDisabled, {PH1: badge.title, PH2: googleDeveloperProgramLink}),\n        jslogContext: badge.jslogContext,\n        actions: [\n          {\n            label: i18nString(UIStrings.remindMeLater),\n            jslogContext: 'remind-me-later',\n            onClick: () => {\n              this.detach();\n              Badges.UserBadges.instance().snoozeStarterBadge();\n            },\n          },\n          {\n            label: i18nString(UIStrings.receiveBadges),\n            jslogContext: 'receive-badges',\n            onClick: () => {\n              this.detach();\n              revealBadgeSettings();\n            }\n          }\n        ],\n        imageUri: badge.imageUri,\n        isStarterBadge: true,\n      });\n      return;\n    }\n\n    // The user does not have a GDP profile, starter badge acts as a nudge for creating a GDP profile.\n    this.#show({\n      message: i18nFormatString(\n          UIStrings.starterBadgeAwardMessageNoGdpProfile, {PH1: badge.title, PH2: googleDeveloperProgramLink}),\n      jslogContext: badge.jslogContext,\n      actions: [\n        {\n          label: i18nString(UIStrings.remindMeLater),\n          jslogContext: 'remind-me-later',\n          onClick: () => {\n            this.detach();\n            Badges.UserBadges.instance().snoozeStarterBadge();\n          },\n        },\n        {\n          label: i18nString(UIStrings.createProfile),\n          jslogContext: 'create-profile',\n          onClick: () => {\n            this.detach();\n            GdpSignUpDialog.GdpSignUpDialog.show({\n              // We want to consider cancelling from the starter badge as a \"snooze\" for starter badge.\n              onCancel: () => Badges.UserBadges.instance().snoozeStarterBadge(),\n            });\n          }\n        }\n      ],\n      imageUri: badge.imageUri,\n      isStarterBadge: true,\n    });\n  }\n\n  #presentActivityBasedBadge(badge: Badges.Badge): void {\n    this.#show({\n      message: i18nString(UIStrings.activityBasedBadgeAwardMessage, {PH1: badge.title}),\n      jslogContext: badge.jslogContext,\n      actions: [\n        {\n          label: i18nString(UIStrings.manageSettings),\n          jslogContext: 'manage-settings',\n          onClick: () => {\n            this.detach();\n            revealBadgeSettings();\n          },\n        },\n        {\n          label: i18nString(UIStrings.viewProfile),\n          jslogContext: 'view-profile',\n          onClick: () => {\n            UIHelpers.openInNewTab(Host.GdpClient.GOOGLE_DEVELOPER_PROGRAM_PROFILE_LINK);\n          }\n        }\n      ],\n      imageUri: badge.imageUri,\n      isStarterBadge: badge.isStarterBadge,\n    });\n  }\n\n  override onDetach(): void {\n    window.clearTimeout(this.#autoCloseTimeout);\n  }\n\n  #onDismissClick = (): void => {\n    this.detach();\n\n    if (this.isStarterBadge) {\n      Badges.UserBadges.instance().dismissStarterBadge();\n    }\n  };\n\n  #onAutoClose = (): void => {\n    this.detach();\n\n    if (this.isStarterBadge) {\n      Badges.UserBadges.instance().snoozeStarterBadge();\n    }\n  };\n\n  override wasShown(): void {\n    super.wasShown();\n    this.requestUpdate();\n  }\n\n  override performUpdate(): void {\n    const viewInput: ViewInput = {\n      message: this.message,\n      imageUri: this.imageUri,\n      actions: this.actions,\n      isStarterBadge: this.isStarterBadge,\n      onDismissClick: this.#onDismissClick,\n      jslogContext: this.jslogContext,\n    };\n    this.#view(viewInput, undefined, this.contentElement);\n  }\n}\n", "// Copyright 2025 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n// IMPORTANT: this file is auto generated. Please do not edit this file.\n/* istanbul ignore file */\nexport default `/*\n * Copyright 2025 The Chromium Authors\n * Use of this source code is governed by a BSD-style license that can be\n * found in the LICENSE file.\n */\n\n@scope to (devtools-widget > *) {\n  :scope {\n    position: fixed;\n    z-index: 9999;\n    /* subtract var(--sys-size-5) * 2 so that there is equal space on the left and on the right in small screens */\n    max-width: calc(100% - 2 * var(--sys-size-5));\n  }\n\n  .container {\n    display: flex;\n    align-items: center;\n    overflow: hidden;\n    width: 485px;\n    background: var(--sys-color-inverse-surface);\n    box-shadow: var(--sys-elevation-level3);\n    border-radius: var(--sys-shape-corner-small);\n    font: var(--sys-typescale-body4-regular);\n    animation: slideIn 100ms cubic-bezier(0, 0, 0.3, 1);\n    box-sizing: border-box;\n    max-width: 100%;\n    padding: var(--sys-size-5) var(--sys-size-6) var(--sys-size-6) var(--sys-size-6);\n  }\n\n  .action-and-text-container {\n    display: flex;\n    flex-direction: column;\n    gap: var(--sys-size-3);\n  }\n\n  .long-action-container {\n    margin-left: auto;\n    /*\n    * Buttons have a 24px total height, which includes padding for the hover area.\n    * We apply a -3px vertical margin to compensate for this extra space.\n    * This ensures the component aligns based on the visual text height,\n    * not the full clickable bounding box.\n    */\n    margin-block: -3px;\n  }\n\n  .label-container {\n    display: flex;\n    width: 100%;\n    align-items: center;\n    padding-block: var(--sys-size-3);\n    line-height: 18px;\n  }\n\n  .badge-container {\n    margin-right: 10px;\n    min-width: 64px;\n    height: 64px;\n  }\n\n  .badge-image {\n    width: 100%;\n    height: 100%;\n    border-radius: var(--sys-shape-corner-full);\n  }\n\n  .badge-link {\n    color: var(--sys-color-inverse-primary);\n  }\n\n  .message {\n    width: 100%;\n    color: var(--sys-color-inverse-on-surface);\n    flex: 1 0 0;\n    text-wrap: pretty;\n    user-select: text;\n  }\n\n  devtools-button.dismiss {\n    padding: 3px;\n  }\n}\n\n@keyframes slideIn {\n  from {\n    transform: translateY(var(--sys-size-5));\n    opacity: 0%;\n  }\n\n  to {\n    opacity: 100%;\n  }\n}\n\n/*# sourceURL=${import.meta.resolve('./badgeNotification.css')} */`;", "// Copyright 2012 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n/* eslint-disable @devtools/no-imperative-dom-api */\n\nimport * as Platform from '../../core/platform/platform.js';\nimport * as _ProtocolClient from '../../core/protocol_client/protocol_client.js';  // eslint-disable-line @typescript-eslint/no-unused-vars\nimport * as SDK from '../../core/sdk/sdk.js';\nimport * as Extensions from '../../models/extensions/extensions.js';\nimport * as UI from '../../ui/legacy/legacy.js';\n\nimport type {ExtensionServer} from './ExtensionServer.js';\nimport {ExtensionNotifierView, ExtensionView} from './ExtensionView.js';\n\nexport class ExtensionPanel extends UI.Panel.Panel implements UI.SearchableView.Searchable {\n  private readonly server: ExtensionServer;\n  private readonly id: string;\n  private readonly panelToolbar: UI.Toolbar.Toolbar;\n  readonly #searchableView: UI.SearchableView.SearchableView;\n\n  constructor(server: ExtensionServer, panelName: string, id: string, pageURL: string) {\n    super(panelName);\n    this.server = server;\n    this.id = id;\n    this.setHideOnDetach();\n    this.panelToolbar = this.element.createChild('devtools-toolbar', 'hidden');\n\n    this.#searchableView = new UI.SearchableView.SearchableView(this, null);\n    this.#searchableView.show(this.element);\n\n    const extensionView = new ExtensionView(server, this.id, pageURL, 'extension');\n    extensionView.show(this.#searchableView.element);\n  }\n\n  addToolbarItem(item: UI.Toolbar.ToolbarItem): void {\n    this.panelToolbar.classList.remove('hidden');\n    this.panelToolbar.appendToolbarItem(item);\n  }\n\n  onSearchCanceled(): void {\n    this.server.notifySearchAction(this.id, Extensions.ExtensionAPI.PrivateAPI.Panels.SearchAction.CancelSearch);\n    this.#searchableView.updateSearchMatchesCount(0);\n  }\n\n  override searchableView(): UI.SearchableView.SearchableView {\n    return this.#searchableView;\n  }\n\n  performSearch(searchConfig: UI.SearchableView.SearchConfig, _shouldJump: boolean, _jumpBackwards?: boolean): void {\n    const query = searchConfig.query;\n    this.server.notifySearchAction(\n        this.id, Extensions.ExtensionAPI.PrivateAPI.Panels.SearchAction.PerformSearch, query);\n  }\n\n  jumpToNextSearchResult(): void {\n    this.server.notifySearchAction(this.id, Extensions.ExtensionAPI.PrivateAPI.Panels.SearchAction.NextSearchResult);\n  }\n\n  jumpToPreviousSearchResult(): void {\n    this.server.notifySearchAction(\n        this.id, Extensions.ExtensionAPI.PrivateAPI.Panels.SearchAction.PreviousSearchResult);\n  }\n\n  supportsCaseSensitiveSearch(): boolean {\n    return false;\n  }\n\n  supportsWholeWordSearch(): boolean {\n    return false;\n  }\n\n  supportsRegexSearch(): boolean {\n    return false;\n  }\n}\n\nexport class ExtensionButton {\n  private readonly id: string;\n  readonly #toolbarButton: UI.Toolbar.ToolbarButton;\n  constructor(server: ExtensionServer, id: string, iconURL: string, tooltip?: string, disabled?: boolean) {\n    this.id = id;\n\n    this.#toolbarButton = new UI.Toolbar.ToolbarButton('', '');\n    this.#toolbarButton.addEventListener(\n        UI.Toolbar.ToolbarButton.Events.CLICK, server.notifyButtonClicked.bind(server, this.id));\n    this.update(iconURL, tooltip, disabled);\n  }\n\n  update(iconURL?: string, tooltip?: string, disabled?: boolean): void {\n    if (typeof iconURL === 'string') {\n      this.#toolbarButton.setBackgroundImage(iconURL);\n    }\n    if (typeof tooltip === 'string') {\n      this.#toolbarButton.setTitle(tooltip);\n    }\n    if (typeof disabled === 'boolean') {\n      this.#toolbarButton.setEnabled(!disabled);\n    }\n  }\n\n  toolbarButton(): UI.Toolbar.ToolbarButton {\n    return this.#toolbarButton;\n  }\n}\n\nexport class ExtensionSidebarPane extends UI.View.SimpleView {\n  readonly #panelName: string;\n  private server: ExtensionServer;\n  #id: string;\n  private extensionView?: ExtensionView;\n  private objectPropertiesView?: ExtensionNotifierView;\n  constructor(server: ExtensionServer, panelName: string, title: Platform.UIString.LocalizedString, id: string) {\n    // For backwards compatibility we use the Kebab case version of the `title`\n    // as `viewId` for sidebar panes created by extensions.\n    const viewId = Platform.StringUtilities.toKebabCase(title);\n    super({title, viewId});\n    this.element.classList.add('fill');\n    this.#panelName = panelName;\n    this.server = server;\n    this.#id = id;\n  }\n\n  id(): string {\n    return this.#id;\n  }\n\n  panelName(): string {\n    return this.#panelName;\n  }\n\n  setObject(object: Object, title: string|undefined, callback: (arg0?: (string|null)|undefined) => void): void {\n    this.createObjectPropertiesView();\n    this.#setObject(SDK.RemoteObject.RemoteObject.fromLocalObject(object), title, callback);\n  }\n\n  setExpression(\n      expression: string, title: string|undefined, evaluateOptions: Object|undefined, securityOrigin: string,\n      callback: (arg0?: (string|null)|undefined) => void): void {\n    this.createObjectPropertiesView();\n    this.server.evaluate(\n        expression, true, false, evaluateOptions, securityOrigin, this.onEvaluate.bind(this, title, callback));\n  }\n\n  setPage(url: Platform.DevToolsPath.UrlString): void {\n    if (this.objectPropertiesView) {\n      this.objectPropertiesView.detach();\n      delete this.objectPropertiesView;\n    }\n    if (this.extensionView) {\n      this.extensionView.detach(true);\n    }\n\n    this.extensionView = new ExtensionView(this.server, this.#id, url, 'extension fill');\n    this.extensionView.show(this.element);\n\n    if (!this.element.style.height) {\n      this.setHeight('150px');\n    }\n  }\n\n  setHeight(height: string): void {\n    this.element.style.height = height;\n  }\n\n  private onEvaluate(\n      title: string|undefined, callback: (arg0?: (string|null)|undefined) => void, error: string|null,\n      result: SDK.RemoteObject.RemoteObject|null, _wasThrown?: boolean): void {\n    if (error) {\n      callback(error.toString());\n    } else if (!result) {\n      callback();\n    } else {\n      this.#setObject(result, title, callback);\n    }\n  }\n\n  private createObjectPropertiesView(): void {\n    if (this.objectPropertiesView) {\n      return;\n    }\n    if (this.extensionView) {\n      this.extensionView.detach(true);\n      delete this.extensionView;\n    }\n    this.objectPropertiesView = new ExtensionNotifierView(this.server, this.#id);\n    this.objectPropertiesView.show(this.element);\n  }\n\n  #setObject(\n      object: SDK.RemoteObject.RemoteObject, title: string|undefined,\n      callback: (arg0?: (string|null)|undefined) => void): void {\n    const objectPropertiesView = this.objectPropertiesView;\n    // This may only happen if setPage() was called while we were evaluating the expression.\n    if (!objectPropertiesView) {\n      callback('operation cancelled');\n      return;\n    }\n    objectPropertiesView.element.removeChildren();\n    void UI.UIUtils.Renderer.render(object, {title, editable: false, expand: true}).then(result => {\n      if (!result) {\n        callback();\n        return;\n      }\n      objectPropertiesView.element.appendChild(result.element);\n      callback();\n    });\n  }\n}\n", "// Copyright 2012 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as UI from '../../ui/legacy/legacy.js';\nimport * as Lit from '../../ui/lit/lit.js';\n\nimport type {ExtensionServer} from './ExtensionServer.js';\n\nconst {render, html, Directives: {ref}} = Lit;\n\ninterface ViewInput {\n  src: string;\n  className: string;\n  onLoad: () => void;\n}\n\ninterface ViewOutput {\n  iframe?: HTMLIFrameElement;\n}\n\nconst DEFAULT_VIEW = (input: ViewInput, output: ViewOutput, target: HTMLElement): void => {\n  // clang-format off\n  render(html`<iframe\n    ${ref(element => {output.iframe = element as HTMLIFrameElement; })}\n    src=${input.src}\n    class=${input.className}\n    @load=${input.onLoad}></iframe>`, target);\n  // clang-format on\n};\n\nexport class ExtensionView extends UI.Widget.Widget {\n  #server: ExtensionServer;\n  #id: string;\n  #src: string;\n  #className: string;\n\n  #iframe?: HTMLIFrameElement;\n  #frameIndex?: number;\n\n  #view: typeof DEFAULT_VIEW;\n  constructor(server: ExtensionServer, id: string, src: string, className: string, view = DEFAULT_VIEW) {\n    super();\n    this.#view = view;\n    this.#server = server;\n    this.#src = src;\n    this.#className = className;\n    this.#id = id;\n    this.setHideOnDetach();  // Override\n    void this.performUpdate();\n  }\n\n  override performUpdate(): Promise<void>|void {\n    const output: ViewOutput = {};\n    this.#view(\n        {\n          src: this.#src,\n          className: this.#className,\n          onLoad: this.onLoad.bind(this),\n        },\n        output, this.element);\n    if (output.iframe) {\n      this.#iframe = output.iframe;\n    }\n  }\n\n  override wasShown(): void {\n    super.wasShown();\n    if (typeof this.#frameIndex === 'number') {\n      this.#server.notifyViewShown(this.#id, this.#frameIndex);\n    }\n  }\n\n  override willHide(): void {\n    super.willHide();\n    if (typeof this.#frameIndex === 'number') {\n      this.#server.notifyViewHidden(this.#id);\n    }\n  }\n\n  private onLoad(): void {\n    if (!this.#iframe) {\n      return;\n    }\n    const frames = window.frames;\n    this.#frameIndex = Array.prototype.indexOf.call(frames, this.#iframe.contentWindow);\n    if (this.isShowing()) {\n      this.#server.notifyViewShown(this.#id, this.#frameIndex);\n    }\n  }\n}\n\nexport class ExtensionNotifierView extends UI.Widget.VBox {\n  private readonly server: ExtensionServer;\n  private readonly id: string;\n  constructor(server: ExtensionServer, id: string) {\n    super();\n\n    this.server = server;\n    this.id = id;\n  }\n\n  override wasShown(): void {\n    super.wasShown();\n    this.server.notifyViewShown(this.id);\n  }\n\n  override willHide(): void {\n    super.willHide();\n    this.server.notifyViewHidden(this.id);\n  }\n}\n", "// Copyright 2011 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\n// TODO(crbug.com/1172300) Ignored during the jsdoc to ts migration\n/* eslint-disable @typescript-eslint/naming-convention */\n/* eslint-disable @devtools/no-imperative-dom-api */\n\nimport type {Chrome} from '../../../extension-api/ExtensionAPI.js';\nimport * as Common from '../../core/common/common.js';\nimport * as Host from '../../core/host/host.js';\nimport * as i18n from '../../core/i18n/i18n.js';\nimport * as Platform from '../../core/platform/platform.js';\nimport * as _ProtocolClient from '../../core/protocol_client/protocol_client.js';  // eslint-disable-line @typescript-eslint/no-unused-vars\nimport * as SDK from '../../core/sdk/sdk.js';\nimport type * as Protocol from '../../generated/protocol.js';\nimport * as Bindings from '../../models/bindings/bindings.js';\nimport * as Extensions from '../../models/extensions/extensions.js';\nimport * as HAR from '../../models/har/har.js';\nimport * as Logs from '../../models/logs/logs.js';\nimport * as TextUtils from '../../models/text_utils/text_utils.js';\nimport * as Workspace from '../../models/workspace/workspace.js';\nimport * as Components from '../../ui/legacy/components/utils/utils.js';\nimport * as UI from '../../ui/legacy/legacy.js';\nimport * as ThemeSupport from '../../ui/legacy/theme_support/theme_support.js';\n\nimport {ExtensionButton, ExtensionPanel, ExtensionSidebarPane} from './ExtensionPanel.js';\n\nconst extensionOrigins = new WeakMap<MessagePort, Platform.DevToolsPath.UrlString>();\nconst kPermittedSchemes = ['http:', 'https:', 'file:', 'data:', 'chrome-extension:', 'about:'];\n\ndeclare global {\n  interface Window {\n    DevToolsAPI?: {getInspectedTabId?(): string|undefined, getOriginsForbiddenForExtensions?(): string[]};\n  }\n}\n\nlet extensionServerInstance: ExtensionServer|null;\n\nexport class HostsPolicy {\n  static create(policy?: Host.InspectorFrontendHostAPI.ExtensionHostsPolicy): HostsPolicy|null {\n    const runtimeAllowedHosts = [];\n    const runtimeBlockedHosts = [];\n    if (policy) {\n      for (const pattern of policy.runtimeAllowedHosts) {\n        const parsedPattern = Extensions.HostUrlPattern.HostUrlPattern.parse(pattern);\n        if (!parsedPattern) {\n          return null;\n        }\n        runtimeAllowedHosts.push(parsedPattern);\n      }\n      for (const pattern of policy.runtimeBlockedHosts) {\n        const parsedPattern = Extensions.HostUrlPattern.HostUrlPattern.parse(pattern);\n        if (!parsedPattern) {\n          return null;\n        }\n        runtimeBlockedHosts.push(parsedPattern);\n      }\n    }\n    return new HostsPolicy(runtimeAllowedHosts, runtimeBlockedHosts);\n  }\n  private constructor(\n      readonly runtimeAllowedHosts: Extensions.HostUrlPattern.HostUrlPattern[],\n      readonly runtimeBlockedHosts: Extensions.HostUrlPattern.HostUrlPattern[]) {\n  }\n\n  isAllowedOnURL(inspectedURL?: Platform.DevToolsPath.UrlString): boolean {\n    if (!inspectedURL) {\n      // If there aren't any blocked hosts retain the old behavior and don't worry about the inspectedURL\n      return this.runtimeBlockedHosts.length === 0;\n    }\n    if (this.runtimeBlockedHosts.some(pattern => pattern.matchesUrl(inspectedURL)) &&\n        !this.runtimeAllowedHosts.some(pattern => pattern.matchesUrl(inspectedURL))) {\n      return false;\n    }\n    return true;\n  }\n}\n\nclass RegisteredExtension {\n  openResourceScheme: null|string = null;\n  constructor(readonly name: string, readonly hostsPolicy: HostsPolicy, readonly allowFileAccess: boolean) {\n  }\n\n  isAllowedOnTarget(inspectedURL?: Platform.DevToolsPath.UrlString): boolean {\n    if (!inspectedURL) {\n      inspectedURL = SDK.TargetManager.TargetManager.instance().primaryPageTarget()?.inspectedURL();\n    }\n\n    if (!inspectedURL) {\n      return false;\n    }\n\n    if (this.openResourceScheme && inspectedURL.startsWith(this.openResourceScheme)) {\n      return true;\n    }\n\n    if (!ExtensionServer.canInspectURL(inspectedURL)) {\n      return false;\n    }\n\n    if (!this.hostsPolicy.isAllowedOnURL(inspectedURL)) {\n      return false;\n    }\n\n    if (!this.allowFileAccess) {\n      let parsedURL;\n      try {\n        parsedURL = new URL(inspectedURL);\n      } catch {\n        return false;\n      }\n      return parsedURL.protocol !== 'file:';\n    }\n\n    return true;\n  }\n}\n\nexport class RevealableNetworkRequestFilter {\n  constructor(readonly filter: string|undefined) {\n  }\n}\n\nexport class ExtensionServer extends Common.ObjectWrapper.ObjectWrapper<EventTypes> {\n  private readonly clientObjects: Map<string, unknown>;\n  private readonly handlers:\n      Map<string,\n          (message: Extensions.ExtensionAPI.PrivateAPI.ExtensionServerRequestMessage, port: MessagePort) => unknown>;\n  private readonly subscribers: Map<string, Set<MessagePort>>;\n  private readonly subscriptionStartHandlers: Map<string, () => unknown>;\n  private readonly subscriptionStopHandlers: Map<string, () => unknown>;\n  private readonly extraHeaders: Map<string, Map<string, unknown>>;\n  private requests: Map<number, TextUtils.ContentProvider.ContentProvider>;\n  private readonly requestIds: Map<TextUtils.ContentProvider.ContentProvider, number>;\n  private lastRequestId: number;\n  private registeredExtensions: Map<string, RegisteredExtension>;\n  private status: ExtensionStatus;\n  readonly #sidebarPanes: ExtensionSidebarPane[];\n  private extensionsEnabled: boolean;\n  private inspectedTabId?: string;\n  private readonly extensionAPITestHook?: (server: unknown, api: unknown) => unknown;\n  private themeChangeHandlers = new Map<string, MessagePort>();\n  readonly #pendingExtensions: Host.InspectorFrontendHostAPI.ExtensionDescriptor[] = [];\n\n  private constructor() {\n    super();\n    this.clientObjects = new Map();\n    this.handlers = new Map();\n    this.subscribers = new Map();\n    this.subscriptionStartHandlers = new Map();\n    this.subscriptionStopHandlers = new Map();\n    this.extraHeaders = new Map();\n    this.requests = new Map();\n    this.requestIds = new Map();\n    this.lastRequestId = 0;\n    this.registeredExtensions = new Map();\n    this.status = new ExtensionStatus();\n    this.#sidebarPanes = [];\n    // TODO(caseq): properly unload extensions when we disable them.\n    this.extensionsEnabled = true;\n\n    this.registerHandler(\n        Extensions.ExtensionAPI.PrivateAPI.Commands.AddRequestHeaders, this.onAddRequestHeaders.bind(this));\n    this.registerHandler(Extensions.ExtensionAPI.PrivateAPI.Commands.CreatePanel, this.onCreatePanel.bind(this));\n    this.registerHandler(\n        Extensions.ExtensionAPI.PrivateAPI.Commands.CreateSidebarPane, this.onCreateSidebarPane.bind(this));\n    this.registerHandler(\n        Extensions.ExtensionAPI.PrivateAPI.Commands.CreateToolbarButton, this.onCreateToolbarButton.bind(this));\n    this.registerHandler(\n        Extensions.ExtensionAPI.PrivateAPI.Commands.EvaluateOnInspectedPage, this.onEvaluateOnInspectedPage.bind(this));\n    this.registerHandler(\n        Extensions.ExtensionAPI.PrivateAPI.Commands.ForwardKeyboardEvent, this.onForwardKeyboardEvent.bind(this));\n    this.registerHandler(Extensions.ExtensionAPI.PrivateAPI.Commands.GetHAR, this.onGetHAR.bind(this));\n    this.registerHandler(\n        Extensions.ExtensionAPI.PrivateAPI.Commands.GetPageResources, this.onGetPageResources.bind(this));\n    this.registerHandler(\n        Extensions.ExtensionAPI.PrivateAPI.Commands.GetRequestContent, this.onGetRequestContent.bind(this));\n    this.registerHandler(\n        Extensions.ExtensionAPI.PrivateAPI.Commands.GetResourceContent, this.onGetResourceContent.bind(this));\n    this.registerHandler(Extensions.ExtensionAPI.PrivateAPI.Commands.Reload, this.onReload.bind(this));\n    this.registerHandler(\n        Extensions.ExtensionAPI.PrivateAPI.Commands.SetOpenResourceHandler, this.onSetOpenResourceHandler.bind(this));\n    this.registerHandler(\n        Extensions.ExtensionAPI.PrivateAPI.Commands.SetThemeChangeHandler, this.onSetThemeChangeHandler.bind(this));\n    this.registerHandler(\n        Extensions.ExtensionAPI.PrivateAPI.Commands.SetResourceContent, this.onSetResourceContent.bind(this));\n    this.registerHandler(\n        Extensions.ExtensionAPI.PrivateAPI.Commands.AttachSourceMapToResource,\n        this.onAttachSourceMapToResource.bind(this));\n    this.registerHandler(\n        Extensions.ExtensionAPI.PrivateAPI.Commands.SetSidebarHeight, this.onSetSidebarHeight.bind(this));\n    this.registerHandler(\n        Extensions.ExtensionAPI.PrivateAPI.Commands.SetSidebarContent, this.onSetSidebarContent.bind(this));\n    this.registerHandler(Extensions.ExtensionAPI.PrivateAPI.Commands.SetSidebarPage, this.onSetSidebarPage.bind(this));\n    this.registerHandler(Extensions.ExtensionAPI.PrivateAPI.Commands.ShowPanel, this.onShowPanel.bind(this));\n    this.registerHandler(Extensions.ExtensionAPI.PrivateAPI.Commands.Subscribe, this.onSubscribe.bind(this));\n    this.registerHandler(Extensions.ExtensionAPI.PrivateAPI.Commands.OpenResource, this.onOpenResource.bind(this));\n    this.registerHandler(Extensions.ExtensionAPI.PrivateAPI.Commands.Unsubscribe, this.onUnsubscribe.bind(this));\n    this.registerHandler(Extensions.ExtensionAPI.PrivateAPI.Commands.UpdateButton, this.onUpdateButton.bind(this));\n    this.registerHandler(\n        Extensions.ExtensionAPI.PrivateAPI.Commands.RegisterLanguageExtensionPlugin,\n        this.registerLanguageExtensionEndpoint.bind(this));\n    this.registerHandler(\n        Extensions.ExtensionAPI.PrivateAPI.Commands.GetWasmLinearMemory, this.onGetWasmLinearMemory.bind(this));\n    this.registerHandler(Extensions.ExtensionAPI.PrivateAPI.Commands.GetWasmGlobal, this.onGetWasmGlobal.bind(this));\n    this.registerHandler(Extensions.ExtensionAPI.PrivateAPI.Commands.GetWasmLocal, this.onGetWasmLocal.bind(this));\n    this.registerHandler(Extensions.ExtensionAPI.PrivateAPI.Commands.GetWasmOp, this.onGetWasmOp.bind(this));\n    this.registerHandler(\n        Extensions.ExtensionAPI.PrivateAPI.Commands.RegisterRecorderExtensionPlugin,\n        this.registerRecorderExtensionEndpoint.bind(this));\n    this.registerHandler(\n        Extensions.ExtensionAPI.PrivateAPI.Commands.ReportResourceLoad, this.onReportResourceLoad.bind(this));\n    this.registerHandler(\n        Extensions.ExtensionAPI.PrivateAPI.Commands.SetFunctionRangesForScript,\n        this.onSetFunctionRangesForScript.bind(this));\n    this.registerHandler(\n        Extensions.ExtensionAPI.PrivateAPI.Commands.CreateRecorderView, this.onCreateRecorderView.bind(this));\n    this.registerHandler(\n        Extensions.ExtensionAPI.PrivateAPI.Commands.ShowRecorderView, this.onShowRecorderView.bind(this));\n    this.registerHandler(\n        Extensions.ExtensionAPI.PrivateAPI.Commands.ShowNetworkPanel, this.onShowNetworkPanel.bind(this));\n    window.addEventListener('message', this.onWindowMessage, false);  // Only for main window.\n\n    const existingTabId = window.DevToolsAPI?.getInspectedTabId?.();\n\n    if (existingTabId) {\n      this.setInspectedTabId({data: existingTabId});\n    }\n    Host.InspectorFrontendHost.InspectorFrontendHostInstance.events.addEventListener(\n        Host.InspectorFrontendHostAPI.Events.SetInspectedTabId, this.setInspectedTabId, this);\n\n    this.initExtensions();\n\n    ThemeSupport.ThemeSupport.instance().addEventListener(ThemeSupport.ThemeChangeEvent.eventName, this.#onThemeChange);\n  }\n\n  get isEnabledForTest(): boolean {\n    return this.extensionsEnabled;\n  }\n\n  dispose(): void {\n    ThemeSupport.ThemeSupport.instance().removeEventListener(\n        ThemeSupport.ThemeChangeEvent.eventName, this.#onThemeChange);\n\n    // Set up by this.initExtensions in the constructor.\n    SDK.TargetManager.TargetManager.instance().removeEventListener(\n        SDK.TargetManager.Events.INSPECTED_URL_CHANGED, this.inspectedURLChanged, this);\n\n    Host.InspectorFrontendHost.InspectorFrontendHostInstance.events.removeEventListener(\n        Host.InspectorFrontendHostAPI.Events.SetInspectedTabId, this.setInspectedTabId, this);\n\n    window.removeEventListener('message', this.onWindowMessage, false);\n  }\n\n  #onThemeChange = (): void => {\n    const themeName = ThemeSupport.ThemeSupport.instance().themeName();\n    for (const port of this.themeChangeHandlers.values()) {\n      port.postMessage({command: Extensions.ExtensionAPI.PrivateAPI.Events.ThemeChange, themeName});\n    }\n  };\n\n  static instance(opts: {\n    forceNew: boolean|null,\n  } = {forceNew: null}): ExtensionServer {\n    const {forceNew} = opts;\n    if (!extensionServerInstance || forceNew) {\n      extensionServerInstance?.dispose();\n      extensionServerInstance = new ExtensionServer();\n    }\n\n    return extensionServerInstance;\n  }\n\n  initializeExtensions(): void {\n    // Defer initialization until DevTools is fully loaded.\n    if (this.inspectedTabId !== null) {\n      Host.InspectorFrontendHost.InspectorFrontendHostInstance.setAddExtensionCallback(this.addExtension.bind(this));\n    }\n  }\n\n  hasExtensions(): boolean {\n    return Boolean(this.registeredExtensions.size);\n  }\n\n  notifySearchAction(panelId: string, action: string, searchString?: string): void {\n    this.postNotification(Extensions.ExtensionAPI.PrivateAPI.Events.PanelSearch + panelId, [action, searchString]);\n  }\n\n  notifyViewShown(identifier: string, frameIndex?: number): void {\n    this.postNotification(Extensions.ExtensionAPI.PrivateAPI.Events.ViewShown + identifier, [frameIndex]);\n  }\n\n  notifyViewHidden(identifier: string): void {\n    this.postNotification(Extensions.ExtensionAPI.PrivateAPI.Events.ViewHidden + identifier, []);\n  }\n\n  notifyButtonClicked(identifier: string): void {\n    this.postNotification(Extensions.ExtensionAPI.PrivateAPI.Events.ButtonClicked + identifier, []);\n  }\n\n  profilingStarted(): void {\n    this.postNotification(Extensions.ExtensionAPI.PrivateAPI.Events.ProfilingStarted, []);\n  }\n\n  profilingStopped(): void {\n    this.postNotification(Extensions.ExtensionAPI.PrivateAPI.Events.ProfilingStopped, []);\n  }\n\n  private registerLanguageExtensionEndpoint(\n      message: Extensions.ExtensionAPI.PrivateAPI.ExtensionServerRequestMessage, _shared_port: MessagePort): Record {\n    if (message.command !== Extensions.ExtensionAPI.PrivateAPI.Commands.RegisterLanguageExtensionPlugin) {\n      return this.status.E_BADARG(\n          'command', `expected ${Extensions.ExtensionAPI.PrivateAPI.Commands.RegisterLanguageExtensionPlugin}`);\n    }\n    const {pluginManager} = Bindings.DebuggerWorkspaceBinding.DebuggerWorkspaceBinding.instance();\n    const {pluginName, port, supportedScriptTypes: {language, symbol_types}} = message;\n    const symbol_types_array =\n        (Array.isArray(symbol_types) && symbol_types.every(e => typeof e === 'string') ? symbol_types : []);\n    const extensionOrigin = this.getExtensionOrigin(_shared_port);\n    const registration = this.registeredExtensions.get(extensionOrigin);\n    if (!registration) {\n      throw new Error('Received a message from an unregistered extension');\n    }\n    const endpoint = new Extensions.LanguageExtensionEndpoint.LanguageExtensionEndpoint(\n        registration.allowFileAccess, extensionOrigin, pluginName, {language, symbol_types: symbol_types_array}, port);\n    pluginManager.addPlugin(endpoint);\n    return this.status.OK();\n  }\n\n  private async loadWasmValue<T>(\n      expectValue: boolean, convert: (result: Protocol.Runtime.RemoteObject) => Record | T, expression: string,\n      stopId: unknown): Promise<Record|T> {\n    const {pluginManager} = Bindings.DebuggerWorkspaceBinding.DebuggerWorkspaceBinding.instance();\n    const callFrame = pluginManager.callFrameForStopId(stopId as Bindings.DebuggerLanguagePlugins.StopId);\n    if (!callFrame) {\n      return this.status.E_BADARG('stopId', 'Unknown stop id');\n    }\n    const result = await callFrame.debuggerModel.agent.invoke_evaluateOnCallFrame({\n      callFrameId: callFrame.id,\n      expression,\n      silent: true,\n      returnByValue: !expectValue,\n      generatePreview: expectValue,\n      throwOnSideEffect: true,\n    });\n\n    if (!result.exceptionDetails && !result.getError()) {\n      return convert(result.result);\n    }\n\n    return this.status.E_FAILED('Failed');\n  }\n\n  private async onGetWasmLinearMemory(message: Extensions.ExtensionAPI.PrivateAPI.ExtensionServerRequestMessage):\n      Promise<Record|number[]> {\n    if (message.command !== Extensions.ExtensionAPI.PrivateAPI.Commands.GetWasmLinearMemory) {\n      return this.status.E_BADARG(\n          'command', `expected ${Extensions.ExtensionAPI.PrivateAPI.Commands.GetWasmLinearMemory}`);\n    }\n    return await this.loadWasmValue<number[]>(\n        false, result => result.value,\n        `[].slice.call(new Uint8Array(memories[0].buffer, ${Number(message.offset)}, ${Number(message.length)}))`,\n        message.stopId);\n  }\n\n  private convertWasmValue(valueClass: 'local'|'global'|'operand', index: number):\n      (obj: Protocol.Runtime.RemoteObject) => Chrome.DevTools.WasmValue | undefined | Record {\n    return obj => {\n      if (obj.type === 'undefined') {\n        return;\n      }\n      if (obj.type !== 'object' || obj.subtype !== 'wasmvalue') {\n        return this.status.E_FAILED('Bad object type');\n      }\n      const type = obj?.description;\n      const value: string = obj.preview?.properties?.find(o => o.name === 'value')?.value ?? '';\n      switch (type) {\n        case 'i32':\n        case 'f32':\n        case 'f64':\n          return {type, value: Number(value)};\n        case 'i64':\n          return {type, value: BigInt(value.replace(/n$/, ''))};\n        case 'v128':\n          return {type, value};\n        default:\n          return {type: 'reftype', valueClass, index};\n      }\n    };\n  }\n\n  private async onGetWasmGlobal(message: Extensions.ExtensionAPI.PrivateAPI.ExtensionServerRequestMessage):\n      Promise<Record|Chrome.DevTools.WasmValue> {\n    if (message.command !== Extensions.ExtensionAPI.PrivateAPI.Commands.GetWasmGlobal) {\n      return this.status.E_BADARG('command', `expected ${Extensions.ExtensionAPI.PrivateAPI.Commands.GetWasmGlobal}`);\n    }\n    const global = Number(message.global);\n    const result = await this.loadWasmValue<Chrome.DevTools.WasmValue|undefined>(\n        true, this.convertWasmValue('global', global), `globals[${global}]`, message.stopId);\n    return result ?? this.status.E_BADARG('global', `No global with index ${global}`);\n  }\n\n  private async onGetWasmLocal(message: Extensions.ExtensionAPI.PrivateAPI.ExtensionServerRequestMessage):\n      Promise<Record|Chrome.DevTools.WasmValue> {\n    if (message.command !== Extensions.ExtensionAPI.PrivateAPI.Commands.GetWasmLocal) {\n      return this.status.E_BADARG('command', `expected ${Extensions.ExtensionAPI.PrivateAPI.Commands.GetWasmLocal}`);\n    }\n    const local = Number(message.local);\n    const result = await this.loadWasmValue<Chrome.DevTools.WasmValue|undefined>(\n        true, this.convertWasmValue('local', local), `locals[${local}]`, message.stopId);\n    return result ?? this.status.E_BADARG('local', `No local with index ${local}`);\n  }\n\n  private async onGetWasmOp(message: Extensions.ExtensionAPI.PrivateAPI.ExtensionServerRequestMessage):\n      Promise<Record|Chrome.DevTools.WasmValue> {\n    if (message.command !== Extensions.ExtensionAPI.PrivateAPI.Commands.GetWasmOp) {\n      return this.status.E_BADARG('command', `expected ${Extensions.ExtensionAPI.PrivateAPI.Commands.GetWasmOp}`);\n    }\n    const op = Number(message.op);\n    const result = await this.loadWasmValue<Chrome.DevTools.WasmValue|undefined>(\n        true, this.convertWasmValue('operand', op), `stack[${op}]`, message.stopId);\n    return result ?? this.status.E_BADARG('op', `No operand with index ${op}`);\n  }\n\n  private registerRecorderExtensionEndpoint(\n      message: Extensions.ExtensionAPI.PrivateAPI.ExtensionServerRequestMessage, _shared_port: MessagePort): Record {\n    if (message.command !== Extensions.ExtensionAPI.PrivateAPI.Commands.RegisterRecorderExtensionPlugin) {\n      return this.status.E_BADARG(\n          'command', `expected ${Extensions.ExtensionAPI.PrivateAPI.Commands.RegisterRecorderExtensionPlugin}`);\n    }\n    const {pluginName, mediaType, port, capabilities} = message;\n    Extensions.RecorderPluginManager.RecorderPluginManager.instance().addPlugin(\n        new Extensions.RecorderExtensionEndpoint.RecorderExtensionEndpoint(pluginName, port, capabilities, mediaType));\n    return this.status.OK();\n  }\n\n  private onReportResourceLoad(message: Extensions.ExtensionAPI.PrivateAPI.ExtensionServerRequestMessage): Record {\n    if (message.command !== Extensions.ExtensionAPI.PrivateAPI.Commands.ReportResourceLoad) {\n      return this.status.E_BADARG(\n          'command', `expected ${Extensions.ExtensionAPI.PrivateAPI.Commands.ReportResourceLoad}`);\n    }\n    const {resourceUrl, extensionId, status} = message;\n    const url = resourceUrl as Platform.DevToolsPath.UrlString;\n    const initiator: SDK.PageResourceLoader.ExtensionInitiator =\n        {target: null, frameId: null, initiatorUrl: extensionId as Platform.DevToolsPath.UrlString, extensionId};\n\n    const pageResource: SDK.PageResourceLoader.PageResource = {\n      url,\n      initiator,\n      errorMessage: status.errorMessage,\n      success: status.success ?? null,\n      size: status.size ?? null,\n      duration: null,\n    };\n    SDK.PageResourceLoader.PageResourceLoader.instance().resourceLoadedThroughExtension(pageResource);\n    return this.status.OK();\n  }\n\n  private onSetFunctionRangesForScript(\n      message: Extensions.ExtensionAPI.PrivateAPI.ExtensionServerRequestMessage, port: MessagePort): Record {\n    if (message.command !== Extensions.ExtensionAPI.PrivateAPI.Commands.SetFunctionRangesForScript) {\n      return this.status.E_BADARG(\n          'command', `expected ${Extensions.ExtensionAPI.PrivateAPI.Commands.SetFunctionRangesForScript}`);\n    }\n    const {scriptUrl, ranges} = message;\n    if (!scriptUrl || !ranges?.length) {\n      return this.status.E_BADARG('command', 'expected valid scriptUrl and non-empty NamedFunctionRanges');\n    }\n    const resource = this.lookupAllowedUISourceCode(scriptUrl as Platform.DevToolsPath.UrlString, port);\n    if ('error' in resource) {\n      return resource.error;\n    }\n    const {uiSourceCode} = resource;\n    if (!uiSourceCode.contentType().isScript() || !uiSourceCode.contentType().isFromSourceMap()) {\n      return this.status.E_BADARG('command', `expected a source map script resource for url: ${scriptUrl}`);\n    }\n    try {\n      Bindings.DebuggerWorkspaceBinding.DebuggerWorkspaceBinding.instance().setFunctionRanges(uiSourceCode, ranges);\n    } catch (e) {\n      return this.status.E_FAILED(e);\n    }\n    return this.status.OK();\n  }\n\n  private onShowRecorderView(message: Extensions.ExtensionAPI.PrivateAPI.ExtensionServerRequestMessage): Record\n      |undefined {\n    if (message.command !== Extensions.ExtensionAPI.PrivateAPI.Commands.ShowRecorderView) {\n      return this.status.E_BADARG(\n          'command', `expected ${Extensions.ExtensionAPI.PrivateAPI.Commands.ShowRecorderView}`);\n    }\n    Extensions.RecorderPluginManager.RecorderPluginManager.instance().showView(message.id);\n    return undefined;\n  }\n\n  private onShowNetworkPanel(message: Extensions.ExtensionAPI.PrivateAPI.ExtensionServerRequestMessage): Record\n      |undefined {\n    if (message.command !== Extensions.ExtensionAPI.PrivateAPI.Commands.ShowNetworkPanel) {\n      return this.status.E_BADARG(\n          'command', `expected ${Extensions.ExtensionAPI.PrivateAPI.Commands.ShowNetworkPanel}`);\n    }\n    void Common.Revealer.reveal(new RevealableNetworkRequestFilter(message.filter));\n    return this.status.OK();\n  }\n\n  private onCreateRecorderView(\n      message: Extensions.ExtensionAPI.PrivateAPI.ExtensionServerRequestMessage, port: MessagePort): Record {\n    if (message.command !== Extensions.ExtensionAPI.PrivateAPI.Commands.CreateRecorderView) {\n      return this.status.E_BADARG(\n          'command', `expected ${Extensions.ExtensionAPI.PrivateAPI.Commands.CreateRecorderView}`);\n    }\n    const id = message.id;\n    // The ids are generated on the client API side and must be unique, so the check below\n    // shouldn't be hit unless someone is bypassing the API.\n    if (this.clientObjects.has(id)) {\n      return this.status.E_EXISTS(id);\n    }\n\n    const pagePath = ExtensionServer.expandResourcePath(this.getExtensionOrigin(port), message.pagePath);\n    if (pagePath === undefined) {\n      return this.status.E_BADARG('pagePath', 'Resources paths cannot point to non-extension resources');\n    }\n    const onShown = (): void => this.notifyViewShown(id);\n    const onHidden = (): void => this.notifyViewHidden(id);\n    Extensions.RecorderPluginManager.RecorderPluginManager.instance().registerView({\n      id,\n      pagePath,\n      title: message.title,\n      onShown,\n      onHidden,\n    });\n    return this.status.OK();\n  }\n\n  private inspectedURLChanged(event: Common.EventTarget.EventTargetEvent<SDK.Target.Target>): void {\n    if (!ExtensionServer.canInspectURL(event.data.inspectedURL())) {\n      this.disableExtensions();\n      return;\n    }\n    if (event.data !== SDK.TargetManager.TargetManager.instance().primaryPageTarget()) {\n      return;\n    }\n    this.requests = new Map();\n    this.enableExtensions();\n    const url = event.data.inspectedURL();\n    this.postNotification(Extensions.ExtensionAPI.PrivateAPI.Events.InspectedURLChanged, [url]);\n    const extensions = this.#pendingExtensions.splice(0);\n    extensions.forEach(e => this.addExtension(e));\n  }\n\n  hasSubscribers(type: string): boolean {\n    return this.subscribers.has(type);\n  }\n\n  private postNotification(type: string, args: unknown[], filter?: (extension: RegisteredExtension) => boolean): void {\n    if (!this.extensionsEnabled) {\n      return;\n    }\n    const subscribers = this.subscribers.get(type);\n    if (!subscribers) {\n      return;\n    }\n    const message = {command: 'notify-' + type, arguments: args};\n    for (const subscriber of subscribers) {\n      if (!this.extensionEnabled(subscriber)) {\n        continue;\n      }\n      if (filter) {\n        const origin = extensionOrigins.get(subscriber);\n        const extension = origin && this.registeredExtensions.get(origin);\n        if (!extension || !filter(extension)) {\n          continue;\n        }\n      }\n      subscriber.postMessage(message);\n    }\n  }\n\n  private onSubscribe(message: Extensions.ExtensionAPI.PrivateAPI.ExtensionServerRequestMessage, port: MessagePort):\n      Record|undefined {\n    if (message.command !== Extensions.ExtensionAPI.PrivateAPI.Commands.Subscribe) {\n      return this.status.E_BADARG('command', `expected ${Extensions.ExtensionAPI.PrivateAPI.Commands.Subscribe}`);\n    }\n    const subscribers = this.subscribers.get(message.type);\n    if (subscribers) {\n      subscribers.add(port);\n    } else {\n      this.subscribers.set(message.type, new Set([port]));\n      const handler = this.subscriptionStartHandlers.get(message.type);\n      if (handler) {\n        handler();\n      }\n    }\n    return undefined;\n  }\n\n  private onUnsubscribe(message: Extensions.ExtensionAPI.PrivateAPI.ExtensionServerRequestMessage, port: MessagePort):\n      Record|undefined {\n    if (message.command !== Extensions.ExtensionAPI.PrivateAPI.Commands.Unsubscribe) {\n      return this.status.E_BADARG('command', `expected ${Extensions.ExtensionAPI.PrivateAPI.Commands.Unsubscribe}`);\n    }\n    const subscribers = this.subscribers.get(message.type);\n    if (!subscribers) {\n      return;\n    }\n    subscribers.delete(port);\n    if (!subscribers.size) {\n      this.subscribers.delete(message.type);\n      const handler = this.subscriptionStopHandlers.get(message.type);\n      if (handler) {\n        handler();\n      }\n    }\n    return undefined;\n  }\n\n  private onAddRequestHeaders(message: Extensions.ExtensionAPI.PrivateAPI.ExtensionServerRequestMessage): Record\n      |undefined {\n    if (message.command !== Extensions.ExtensionAPI.PrivateAPI.Commands.AddRequestHeaders) {\n      return this.status.E_BADARG(\n          'command', `expected ${Extensions.ExtensionAPI.PrivateAPI.Commands.AddRequestHeaders}`);\n    }\n    const id = message.extensionId;\n    if (typeof id !== 'string') {\n      return this.status.E_BADARGTYPE('extensionId', typeof id, 'string');\n    }\n    let extensionHeaders = this.extraHeaders.get(id);\n    if (!extensionHeaders) {\n      extensionHeaders = new Map();\n      this.extraHeaders.set(id, extensionHeaders);\n    }\n    for (const name in message.headers) {\n      extensionHeaders.set(name, message.headers[name]);\n    }\n    const allHeaders = ({} as Protocol.Network.Headers);\n    for (const headers of this.extraHeaders.values()) {\n      for (const [name, value] of headers) {\n        if (name !== '__proto__' && typeof value === 'string') {\n          allHeaders[name] = value;\n        }\n      }\n    }\n\n    SDK.NetworkManager.MultitargetNetworkManager.instance().setExtraHTTPHeaders(allHeaders);\n    return undefined;\n  }\n\n  private getExtensionOrigin(port: MessagePort): Platform.DevToolsPath.UrlString {\n    const origin = extensionOrigins.get(port);\n    if (!origin) {\n      throw new Error('Received a message from an unregistered extension');\n    }\n    return origin;\n  }\n\n  private onCreatePanel(message: Extensions.ExtensionAPI.PrivateAPI.ExtensionServerRequestMessage, port: MessagePort):\n      Record {\n    if (message.command !== Extensions.ExtensionAPI.PrivateAPI.Commands.CreatePanel) {\n      return this.status.E_BADARG('command', `expected ${Extensions.ExtensionAPI.PrivateAPI.Commands.CreatePanel}`);\n    }\n    const id = message.id;\n    // The ids are generated on the client API side and must be unique, so the check below\n    // shouldn't be hit unless someone is bypassing the API.\n    if (this.clientObjects.has(id) || UI.InspectorView.InspectorView.instance().hasPanel(id)) {\n      return this.status.E_EXISTS(id);\n    }\n\n    const page = ExtensionServer.expandResourcePath(this.getExtensionOrigin(port), message.page);\n    if (page === undefined) {\n      return this.status.E_BADARG('page', 'Resources paths cannot point to non-extension resources');\n    }\n    let persistentId = this.getExtensionOrigin(port) + message.title;\n    persistentId = persistentId.replace(/\\s|:\\d+/g, '');\n    const panelView = new ExtensionServerPanelView(\n        persistentId, i18n.i18n.lockedString(message.title), new ExtensionPanel(this, persistentId, id, page));\n    this.clientObjects.set(id, panelView);\n    UI.InspectorView.InspectorView.instance().addPanel(panelView);\n    return this.status.OK();\n  }\n\n  private onShowPanel(message: Extensions.ExtensionAPI.PrivateAPI.ExtensionServerRequestMessage): Record|undefined {\n    if (message.command !== Extensions.ExtensionAPI.PrivateAPI.Commands.ShowPanel) {\n      return this.status.E_BADARG('command', `expected ${Extensions.ExtensionAPI.PrivateAPI.Commands.ShowPanel}`);\n    }\n\n    let panelViewId = message.id;\n    const panelView = this.clientObjects.get(message.id);\n    if (panelView && panelView instanceof ExtensionServerPanelView) {\n      panelViewId = panelView.viewId();\n    }\n    void UI.InspectorView.InspectorView.instance().showPanel(panelViewId);\n    return undefined;\n  }\n\n  private onCreateToolbarButton(\n      message: Extensions.ExtensionAPI.PrivateAPI.ExtensionServerRequestMessage, port: MessagePort): Record {\n    if (message.command !== Extensions.ExtensionAPI.PrivateAPI.Commands.CreateToolbarButton) {\n      return this.status.E_BADARG(\n          'command', `expected ${Extensions.ExtensionAPI.PrivateAPI.Commands.CreateToolbarButton}`);\n    }\n    const panelView = this.clientObjects.get(message.panel);\n    if (!panelView || !(panelView instanceof ExtensionServerPanelView)) {\n      return this.status.E_NOTFOUND(message.panel);\n    }\n    const resourcePath = ExtensionServer.expandResourcePath(this.getExtensionOrigin(port), message.icon);\n    if (resourcePath === undefined) {\n      return this.status.E_BADARG('icon', 'Resources paths cannot point to non-extension resources');\n    }\n    const button = new ExtensionButton(this, message.id, resourcePath, message.tooltip, message.disabled);\n    this.clientObjects.set(message.id, button);\n\n    void panelView.widget().then(appendButton);\n\n    function appendButton(panel: UI.Widget.Widget): void {\n      (panel as ExtensionPanel).addToolbarItem(button.toolbarButton());\n    }\n\n    return this.status.OK();\n  }\n\n  private onUpdateButton(message: Extensions.ExtensionAPI.PrivateAPI.ExtensionServerRequestMessage, port: MessagePort):\n      Record {\n    if (message.command !== Extensions.ExtensionAPI.PrivateAPI.Commands.UpdateButton) {\n      return this.status.E_BADARG('command', `expected ${Extensions.ExtensionAPI.PrivateAPI.Commands.UpdateButton}`);\n    }\n    const button = this.clientObjects.get(message.id);\n    if (!button || !(button instanceof ExtensionButton)) {\n      return this.status.E_NOTFOUND(message.id);\n    }\n    const resourcePath =\n        message.icon && ExtensionServer.expandResourcePath(this.getExtensionOrigin(port), message.icon);\n    if (message.icon && resourcePath === undefined) {\n      return this.status.E_BADARG('icon', 'Resources paths cannot point to non-extension resources');\n    }\n    button.update(resourcePath, message.tooltip, message.disabled);\n    return this.status.OK();\n  }\n\n  private onCreateSidebarPane(message: Extensions.ExtensionAPI.PrivateAPI.ExtensionServerRequestMessage): Record {\n    if (message.command !== Extensions.ExtensionAPI.PrivateAPI.Commands.CreateSidebarPane) {\n      return this.status.E_BADARG(\n          'command', `expected ${Extensions.ExtensionAPI.PrivateAPI.Commands.CreateSidebarPane}`);\n    }\n    const id = message.id;\n    const sidebar = new ExtensionSidebarPane(this, message.panel, i18n.i18n.lockedString(message.title), id);\n    this.#sidebarPanes.push(sidebar);\n    this.clientObjects.set(id, sidebar);\n    this.dispatchEventToListeners(Events.SidebarPaneAdded, sidebar);\n\n    return this.status.OK();\n  }\n\n  sidebarPanes(): ExtensionSidebarPane[] {\n    return this.#sidebarPanes;\n  }\n\n  private onSetSidebarHeight(message: Extensions.ExtensionAPI.PrivateAPI.ExtensionServerRequestMessage): Record {\n    if (message.command !== Extensions.ExtensionAPI.PrivateAPI.Commands.SetSidebarHeight) {\n      return this.status.E_BADARG(\n          'command', `expected ${Extensions.ExtensionAPI.PrivateAPI.Commands.SetSidebarHeight}`);\n    }\n    const sidebar = this.clientObjects.get(message.id);\n    if (!sidebar || !(sidebar instanceof ExtensionSidebarPane)) {\n      return this.status.E_NOTFOUND(message.id);\n    }\n    sidebar.setHeight(message.height);\n    return this.status.OK();\n  }\n\n  private onSetSidebarContent(\n      message: Extensions.ExtensionAPI.PrivateAPI.ExtensionServerRequestMessage, port: MessagePort): Record|undefined {\n    if (message.command !== Extensions.ExtensionAPI.PrivateAPI.Commands.SetSidebarContent) {\n      return this.status.E_BADARG(\n          'command', `expected ${Extensions.ExtensionAPI.PrivateAPI.Commands.SetSidebarContent}`);\n    }\n    const {requestId, id, rootTitle, expression, evaluateOptions, evaluateOnPage} = message;\n    const sidebar = this.clientObjects.get(id);\n    if (!sidebar || !(sidebar instanceof ExtensionSidebarPane)) {\n      return this.status.E_NOTFOUND(message.id);\n    }\n\n    function callback(this: ExtensionServer, error: unknown): void {\n      const result = error ? this.status.E_FAILED(error) : this.status.OK();\n      this.dispatchCallback(requestId, port, result);\n    }\n    if (evaluateOnPage) {\n      sidebar.setExpression(expression, rootTitle, evaluateOptions, this.getExtensionOrigin(port), callback.bind(this));\n      return undefined;\n    }\n    sidebar.setObject(message.expression, message.rootTitle, callback.bind(this));\n    return undefined;\n  }\n\n  private onSetSidebarPage(\n      message: Extensions.ExtensionAPI.PrivateAPI.ExtensionServerRequestMessage, port: MessagePort): Record|undefined {\n    if (message.command !== Extensions.ExtensionAPI.PrivateAPI.Commands.SetSidebarPage) {\n      return this.status.E_BADARG('command', `expected ${Extensions.ExtensionAPI.PrivateAPI.Commands.SetSidebarPage}`);\n    }\n    const sidebar = this.clientObjects.get(message.id);\n    if (!sidebar || !(sidebar instanceof ExtensionSidebarPane)) {\n      return this.status.E_NOTFOUND(message.id);\n    }\n    const resourcePath = ExtensionServer.expandResourcePath(this.getExtensionOrigin(port), message.page);\n    if (resourcePath === undefined) {\n      return this.status.E_BADARG('page', 'Resources paths cannot point to non-extension resources');\n    }\n    sidebar.setPage(resourcePath);\n    return undefined;\n  }\n\n  private onOpenResource(message: Extensions.ExtensionAPI.PrivateAPI.ExtensionServerRequestMessage): Record {\n    if (message.command !== Extensions.ExtensionAPI.PrivateAPI.Commands.OpenResource) {\n      return this.status.E_BADARG('command', `expected ${Extensions.ExtensionAPI.PrivateAPI.Commands.OpenResource}`);\n    }\n    const uiSourceCode = Workspace.Workspace.WorkspaceImpl.instance().uiSourceCodeForURL(message.url);\n    if (uiSourceCode) {\n      void Common.Revealer.reveal(uiSourceCode.uiLocation(message.lineNumber, message.columnNumber));\n      return this.status.OK();\n    }\n\n    const resource = Bindings.ResourceUtils.resourceForURL(message.url);\n    if (resource) {\n      void Common.Revealer.reveal(resource);\n      return this.status.OK();\n    }\n\n    const request = Logs.NetworkLog.NetworkLog.instance().requestForURL(message.url);\n    if (request) {\n      void Common.Revealer.reveal(request);\n      return this.status.OK();\n    }\n\n    return this.status.E_NOTFOUND(message.url);\n  }\n\n  private onSetOpenResourceHandler(\n      message: Extensions.ExtensionAPI.PrivateAPI.ExtensionServerRequestMessage, port: MessagePort): Record|undefined {\n    if (message.command !== Extensions.ExtensionAPI.PrivateAPI.Commands.SetOpenResourceHandler) {\n      return this.status.E_BADARG(\n          'command', `expected ${Extensions.ExtensionAPI.PrivateAPI.Commands.SetOpenResourceHandler}`);\n    }\n    const extension = this.registeredExtensions.get(this.getExtensionOrigin(port));\n    if (!extension) {\n      throw new Error('Received a message from an unregistered extension');\n    }\n    if (message.urlScheme) {\n      extension.openResourceScheme = message.urlScheme;\n    }\n    const extensionOrigin = this.getExtensionOrigin(port);\n    const {name} = extension;\n    const registration = {\n      title: name,\n      origin: extensionOrigin,\n      scheme: message.urlScheme,\n      handler: this.handleOpenURL.bind(this, port),\n      shouldHandleOpenResource: (url: Platform.DevToolsPath.UrlString, schemes: Set<string>) =>\n          Components.Linkifier.Linkifier.shouldHandleOpenResource(extension.openResourceScheme, url, schemes),\n    };\n    if (message.handlerPresent) {\n      Components.Linkifier.Linkifier.registerLinkHandler(registration);\n    } else {\n      Components.Linkifier.Linkifier.unregisterLinkHandler(registration);\n    }\n    return undefined;\n  }\n\n  private onSetThemeChangeHandler(\n      message: Extensions.ExtensionAPI.PrivateAPI.ExtensionServerRequestMessage, port: MessagePort): Record|undefined {\n    if (message.command !== Extensions.ExtensionAPI.PrivateAPI.Commands.SetThemeChangeHandler) {\n      return this.status.E_BADARG(\n          'command', `expected ${Extensions.ExtensionAPI.PrivateAPI.Commands.SetThemeChangeHandler}`);\n    }\n    const extensionOrigin = this.getExtensionOrigin(port);\n    const extension = this.registeredExtensions.get(extensionOrigin);\n    if (!extension) {\n      throw new Error('Received a message from an unregistered extension');\n    }\n\n    if (message.handlerPresent) {\n      this.themeChangeHandlers.set(extensionOrigin, port);\n    } else {\n      this.themeChangeHandlers.delete(extensionOrigin);\n    }\n    return undefined;\n  }\n\n  private handleOpenURL(\n      port: MessagePort, contentProviderOrUrl: TextUtils.ContentProvider.ContentProvider|string, lineNumber?: number,\n      columnNumber?: number): void {\n    let resource: {url: string, type: string};\n    let isAllowed: boolean;\n    if (typeof contentProviderOrUrl !== 'string') {\n      resource = this.makeResource(contentProviderOrUrl);\n      isAllowed = this.extensionAllowedOnContentProvider(contentProviderOrUrl, port);\n    } else {\n      const url = contentProviderOrUrl as Platform.DevToolsPath.UrlString;\n      resource = {url, type: Common.ResourceType.resourceTypes.Other.name()};\n      isAllowed = this.extensionAllowedOnURL(url, port);\n    }\n\n    if (isAllowed) {\n      port.postMessage({\n        command: 'open-resource',\n        resource,\n        lineNumber: lineNumber ? lineNumber + 1 : undefined,\n        columnNumber: columnNumber ? columnNumber + 1 : undefined,\n      });\n    }\n  }\n\n  private extensionAllowedOnURL(url: Platform.DevToolsPath.UrlString, port: MessagePort): boolean {\n    const origin = extensionOrigins.get(port);\n    const extension = origin && this.registeredExtensions.get(origin);\n    return Boolean(extension?.isAllowedOnTarget(url));\n  }\n\n  /**\n   * Slightly more permissive as {@link extensionAllowedOnURL}: This method also permits\n   * UISourceCodes that originate from a {@link SDK.Script.Script} with a sourceURL magic comment as\n   * long as the corresponding target is permitted.\n   */\n  private extensionAllowedOnContentProvider(\n      contentProvider: TextUtils.ContentProvider.ContentProvider, port: MessagePort): boolean {\n    if (!(contentProvider instanceof Workspace.UISourceCode.UISourceCode)) {\n      return this.extensionAllowedOnURL(contentProvider.contentURL(), port);\n    }\n\n    if (contentProvider.contentType() !== Common.ResourceType.resourceTypes.Script) {\n      // We only check sourceURL magic comments for scripts (excluding ones coming from source maps).\n      return this.extensionAllowedOnURL(contentProvider.contentURL(), port);\n    }\n\n    const scripts =\n        Bindings.DebuggerWorkspaceBinding.DebuggerWorkspaceBinding.instance().scriptsForUISourceCode(contentProvider);\n    if (scripts.length === 0) {\n      return this.extensionAllowedOnURL(contentProvider.contentURL(), port);\n    }\n\n    return scripts.every(script => {\n      if (script.hasSourceURL) {\n        return this.extensionAllowedOnTarget(script.target(), port);\n      }\n      return this.extensionAllowedOnURL(script.contentURL(), port);\n    });\n  }\n\n  /**\n   * This method prefers returning 'Permission denied' errors if restricted resources are not found,\n   * rather then NOTFOUND. This prevents extensions from being able to fish for restricted resources.\n   */\n  private lookupAllowedUISourceCode(url: Platform.DevToolsPath.UrlString, port: MessagePort):\n      {uiSourceCode: Workspace.UISourceCode.UISourceCode}|{\n    error: Record,\n  }\n  {\n    const uiSourceCode = Workspace.Workspace.WorkspaceImpl.instance().uiSourceCodeForURL(url);\n    if (!uiSourceCode && !this.extensionAllowedOnURL(url, port)) {\n      return {error: this.status.E_FAILED('Permission denied')};\n    }\n    if (!uiSourceCode) {\n      return {error: this.status.E_NOTFOUND(url)};\n    }\n    if (!this.extensionAllowedOnContentProvider(uiSourceCode, port)) {\n      return {error: this.status.E_FAILED('Permission denied')};\n    }\n    return {uiSourceCode};\n  }\n\n  private extensionAllowedOnTarget(target: SDK.Target.Target, port: MessagePort): boolean {\n    return this.extensionAllowedOnURL(target.inspectedURL(), port);\n  }\n\n  private onReload(message: Extensions.ExtensionAPI.PrivateAPI.ExtensionServerRequestMessage, port: MessagePort):\n      Record {\n    if (message.command !== Extensions.ExtensionAPI.PrivateAPI.Commands.Reload) {\n      return this.status.E_BADARG('command', `expected ${Extensions.ExtensionAPI.PrivateAPI.Commands.Reload}`);\n    }\n    const options = (message.options || {});\n\n    SDK.NetworkManager.MultitargetNetworkManager.instance().setUserAgentOverride(\n        typeof options.userAgent === 'string' ? options.userAgent : '', null);\n    let injectedScript;\n    if (options.injectedScript) {\n      injectedScript = '(function(){' + options.injectedScript + '})()';\n    }\n    const target = SDK.TargetManager.TargetManager.instance().primaryPageTarget();\n    if (!target) {\n      return this.status.OK();\n    }\n    const resourceTreeModel = target.model(SDK.ResourceTreeModel.ResourceTreeModel);\n    if (!this.extensionAllowedOnTarget(target, port)) {\n      return this.status.E_FAILED('Permission denied');\n    }\n    resourceTreeModel?.reloadPage(Boolean(options.ignoreCache), injectedScript);\n    return this.status.OK();\n  }\n\n  private onEvaluateOnInspectedPage(\n      message: Extensions.ExtensionAPI.PrivateAPI.ExtensionServerRequestMessage, port: MessagePort): Record|undefined {\n    if (message.command !== Extensions.ExtensionAPI.PrivateAPI.Commands.EvaluateOnInspectedPage) {\n      return this.status.E_BADARG(\n          'command', `expected ${Extensions.ExtensionAPI.PrivateAPI.Commands.EvaluateOnInspectedPage}`);\n    }\n\n    const {requestId, expression, evaluateOptions} = message;\n    function callback(\n        this: ExtensionServer, error: string|null, object: SDK.RemoteObject.RemoteObject|null,\n        wasThrown: boolean): void {\n      let result;\n      if (error || !object) {\n        result = this.status.E_PROTOCOLERROR(error?.toString());\n      } else if (wasThrown) {\n        result = {isException: true, value: object.description};\n      } else {\n        result = {value: object.value};\n      }\n\n      this.dispatchCallback(requestId, port, result);\n    }\n    return this.evaluate(expression, true, true, evaluateOptions, this.getExtensionOrigin(port), callback.bind(this));\n  }\n\n  private async onGetHAR(message: Extensions.ExtensionAPI.PrivateAPI.ExtensionServerRequestMessage, port: MessagePort):\n      Promise<Record|HAR.Log.LogDTO> {\n    if (message.command !== Extensions.ExtensionAPI.PrivateAPI.Commands.GetHAR) {\n      return this.status.E_BADARG('command', `expected ${Extensions.ExtensionAPI.PrivateAPI.Commands.GetHAR}`);\n    }\n    const requests =\n        Logs.NetworkLog.NetworkLog.instance().requests().filter(r => this.extensionAllowedOnURL(r.url(), port));\n    const harLog = await HAR.Log.Log.build(requests, {sanitize: false});\n    for (let i = 0; i < harLog.entries.length; ++i) {\n      // @ts-expect-error\n      harLog.entries[i]._requestId = this.requestId(requests[i]);\n    }\n    return harLog;\n  }\n\n  private makeResource(contentProvider: TextUtils.ContentProvider.ContentProvider):\n      {url: string, type: string, buildId?: string} {\n    let buildId: string|undefined = undefined;\n    if (contentProvider instanceof Workspace.UISourceCode.UISourceCode) {\n      // We use the first buildId we find searching in all Script objects that correspond to this UISourceCode.\n      buildId = Bindings.DebuggerWorkspaceBinding.DebuggerWorkspaceBinding.instance()\n                    .scriptsForUISourceCode(contentProvider)\n                    .find(script => Boolean(script.buildId))\n                    ?.buildId ??\n          undefined;\n    }\n    return {url: contentProvider.contentURL(), type: contentProvider.contentType().name(), buildId};\n  }\n\n  private onGetPageResources(_message: unknown, port: MessagePort): Array<{url: string, type: string}> {\n    const resources = new Map<unknown, {\n      url: string,\n      type: string,\n    }>();\n    function pushResourceData(\n        this: ExtensionServer, contentProvider: TextUtils.ContentProvider.ContentProvider): boolean {\n      if (!resources.has(contentProvider.contentURL()) &&\n          this.extensionAllowedOnContentProvider(contentProvider, port)) {\n        resources.set(contentProvider.contentURL(), this.makeResource(contentProvider));\n      }\n      return false;\n    }\n    let uiSourceCodes = Workspace.Workspace.WorkspaceImpl.instance().uiSourceCodesForProjectType(\n        Workspace.Workspace.projectTypes.Network);\n    uiSourceCodes = uiSourceCodes.concat(Workspace.Workspace.WorkspaceImpl.instance().uiSourceCodesForProjectType(\n        Workspace.Workspace.projectTypes.ContentScripts));\n    uiSourceCodes.forEach(pushResourceData.bind(this));\n    for (const resourceTreeModel of SDK.TargetManager.TargetManager.instance().models(\n             SDK.ResourceTreeModel.ResourceTreeModel)) {\n      if (this.extensionAllowedOnTarget(resourceTreeModel.target(), port)) {\n        resourceTreeModel.forAllResources(pushResourceData.bind(this));\n      }\n    }\n\n    return [...resources.values()];\n  }\n\n  private async getResourceContent(\n      contentProvider: TextUtils.ContentProvider.ContentProvider,\n      message: Extensions.ExtensionAPI.PrivateAPI.ExtensionServerRequestMessage, port: MessagePort): Promise<void> {\n    if (!this.extensionAllowedOnContentProvider(contentProvider, port)) {\n      this.dispatchCallback(message.requestId, port, this.status.E_FAILED('Permission denied'));\n      return undefined;\n    }\n    const contentData = await contentProvider.requestContentData();\n    if (TextUtils.ContentData.ContentData.isError(contentData)) {\n      this.dispatchCallback(message.requestId, port, {encoding: '', content: null});\n      return;\n    }\n    const encoding = !contentData.isTextContent ? 'base64' : '';\n    const content = contentData.isTextContent ? contentData.text : contentData.base64;\n    this.dispatchCallback(message.requestId, port, {encoding, content});\n  }\n\n  private onGetRequestContent(\n      message: Extensions.ExtensionAPI.PrivateAPI.ExtensionServerRequestMessage, port: MessagePort): Record|undefined {\n    if (message.command !== Extensions.ExtensionAPI.PrivateAPI.Commands.GetRequestContent) {\n      return this.status.E_BADARG(\n          'command', `expected ${Extensions.ExtensionAPI.PrivateAPI.Commands.GetRequestContent}`);\n    }\n    const request = this.requestById(message.id);\n    if (!request) {\n      return this.status.E_NOTFOUND(message.id);\n    }\n    void this.getResourceContent(request, message, port);\n    return undefined;\n  }\n\n  private onGetResourceContent(\n      message: Extensions.ExtensionAPI.PrivateAPI.ExtensionServerRequestMessage, port: MessagePort): Record|undefined {\n    if (message.command !== Extensions.ExtensionAPI.PrivateAPI.Commands.GetResourceContent) {\n      return this.status.E_BADARG(\n          'command', `expected ${Extensions.ExtensionAPI.PrivateAPI.Commands.GetResourceContent}`);\n    }\n    const url = message.url as Platform.DevToolsPath.UrlString;\n    const contentProvider = Workspace.Workspace.WorkspaceImpl.instance().uiSourceCodeForURL(url) ||\n        Bindings.ResourceUtils.resourceForURL(url);\n    if (!contentProvider) {\n      return this.status.E_NOTFOUND(url);\n    }\n    void this.getResourceContent(contentProvider, message, port);\n    return undefined;\n  }\n\n  private onAttachSourceMapToResource(\n      message: Extensions.ExtensionAPI.PrivateAPI.ExtensionServerRequestMessage, port: MessagePort): Record|undefined {\n    if (message.command !== Extensions.ExtensionAPI.PrivateAPI.Commands.AttachSourceMapToResource) {\n      return this.status.E_BADARG(\n          'command', `expected ${Extensions.ExtensionAPI.PrivateAPI.Commands.GetResourceContent}`);\n    }\n\n    if (!message.sourceMapURL) {\n      return this.status.E_FAILED('Expected a source map URL but got null');\n    }\n\n    const resource = this.lookupAllowedUISourceCode(message.contentUrl as Platform.DevToolsPath.UrlString, port);\n    if ('error' in resource) {\n      return resource.error;\n    }\n\n    const debuggerBindingsInstance = Bindings.DebuggerWorkspaceBinding.DebuggerWorkspaceBinding.instance();\n    const scriptFiles = debuggerBindingsInstance.scriptsForUISourceCode(resource.uiSourceCode);\n    if (scriptFiles.length > 0) {\n      for (const script of scriptFiles) {\n        const resourceFile = debuggerBindingsInstance.scriptFile(resource.uiSourceCode, script.debuggerModel);\n        resourceFile?.addSourceMapURL(message.sourceMapURL as Platform.DevToolsPath.UrlString);\n      }\n    }\n\n    return this.status.OK();\n  }\n\n  private onSetResourceContent(\n      message: Extensions.ExtensionAPI.PrivateAPI.ExtensionServerRequestMessage, port: MessagePort): Record|undefined {\n    if (message.command !== Extensions.ExtensionAPI.PrivateAPI.Commands.SetResourceContent) {\n      return this.status.E_BADARG(\n          'command', `expected ${Extensions.ExtensionAPI.PrivateAPI.Commands.SetResourceContent}`);\n    }\n\n    const {url, requestId, content, commit} = message;\n    function callbackWrapper(this: ExtensionServer, error: string|null): void {\n      const response = error ? this.status.E_FAILED(error) : this.status.OK();\n      this.dispatchCallback(requestId, port, response);\n    }\n\n    const resource = this.lookupAllowedUISourceCode(url as Platform.DevToolsPath.UrlString, port);\n    if ('error' in resource) {\n      return resource.error;\n    }\n    const {uiSourceCode} = resource;\n    if (!uiSourceCode.contentType().isDocumentOrScriptOrStyleSheet()) {\n      const resource = SDK.ResourceTreeModel.ResourceTreeModel.resourceForURL(url as Platform.DevToolsPath.UrlString);\n      if (!resource) {\n        return this.status.E_NOTFOUND(url);\n      }\n      return this.status.E_NOTSUPPORTED('Resource is not editable');\n    }\n    uiSourceCode.setWorkingCopy(content);\n    if (commit) {\n      uiSourceCode.commitWorkingCopy();\n    }\n    callbackWrapper.call(this, null);\n    return undefined;\n  }\n\n  private requestId(request: TextUtils.ContentProvider.ContentProvider): number {\n    const requestId = this.requestIds.get(request);\n    if (requestId === undefined) {\n      const newId = ++this.lastRequestId;\n      this.requestIds.set(request, newId);\n      this.requests.set(newId, request);\n      return newId;\n    }\n    return requestId;\n  }\n\n  private requestById(id: number): TextUtils.ContentProvider.ContentProvider|undefined {\n    return this.requests.get(id);\n  }\n\n  private onForwardKeyboardEvent(message: Extensions.ExtensionAPI.PrivateAPI.ExtensionServerRequestMessage): Record\n      |undefined {\n    if (message.command !== Extensions.ExtensionAPI.PrivateAPI.Commands.ForwardKeyboardEvent) {\n      return this.status.E_BADARG(\n          'command', `expected ${Extensions.ExtensionAPI.PrivateAPI.Commands.ForwardKeyboardEvent}`);\n    }\n    message.entries.forEach(handleEventEntry);\n\n    function handleEventEntry(entry: KeyboardEventInit&{eventType: string}): void {\n      // Fool around closure compiler -- it has its own notion of both KeyboardEvent constructor\n      // and initKeyboardEvent methods and overriding these in externs.js does not have effect.\n      const event = new window.KeyboardEvent(entry.eventType, {\n        key: entry.key,\n        code: entry.code,\n        keyCode: entry.keyCode,\n        location: entry.location,\n        ctrlKey: entry.ctrlKey,\n        altKey: entry.altKey,\n        shiftKey: entry.shiftKey,\n        metaKey: entry.metaKey,\n      });\n\n      // @ts-expect-error\n      event.__keyCode = keyCodeForEntry(entry);\n      document.dispatchEvent(event);\n    }\n\n    function keyCodeForEntry(entry: KeyboardEventInit): unknown {\n      let keyCode = entry.keyCode;\n      if (!keyCode) {\n        // This is required only for synthetic events (e.g. dispatched in tests).\n        if (entry.key === Platform.KeyboardUtilities.ESCAPE_KEY) {\n          keyCode = 27;\n        }\n      }\n      return keyCode || 0;\n    }\n    return undefined;\n  }\n\n  private dispatchCallback(requestId: unknown, port: MessagePort, result: unknown): void {\n    if (requestId) {\n      port.postMessage({command: 'callback', requestId, result});\n    }\n  }\n\n  private initExtensions(): void {\n    this.registerAutosubscriptionHandler(\n        Extensions.ExtensionAPI.PrivateAPI.Events.ResourceAdded, Workspace.Workspace.WorkspaceImpl.instance(),\n        Workspace.Workspace.Events.UISourceCodeAdded, this.notifyResourceAdded);\n    this.registerAutosubscriptionTargetManagerHandler(\n        Extensions.ExtensionAPI.PrivateAPI.Events.NetworkRequestFinished, SDK.NetworkManager.NetworkManager,\n        SDK.NetworkManager.Events.RequestFinished, this.notifyRequestFinished);\n\n    function onElementsSubscriptionStarted(this: ExtensionServer): void {\n      UI.Context.Context.instance().addFlavorChangeListener(\n          SDK.DOMModel.DOMNode, this.notifyElementsSelectionChanged, this);\n    }\n\n    function onElementsSubscriptionStopped(this: ExtensionServer): void {\n      UI.Context.Context.instance().removeFlavorChangeListener(\n          SDK.DOMModel.DOMNode, this.notifyElementsSelectionChanged, this);\n    }\n\n    this.registerSubscriptionHandler(\n        Extensions.ExtensionAPI.PrivateAPI.Events.PanelObjectSelected + 'elements',\n        onElementsSubscriptionStarted.bind(this), onElementsSubscriptionStopped.bind(this));\n    this.registerResourceContentCommittedHandler(this.notifyUISourceCodeContentCommitted);\n\n    SDK.TargetManager.TargetManager.instance().addEventListener(\n        SDK.TargetManager.Events.INSPECTED_URL_CHANGED, this.inspectedURLChanged, this);\n  }\n\n  private notifyResourceAdded(event: Common.EventTarget.EventTargetEvent<Workspace.UISourceCode.UISourceCode>): void {\n    const uiSourceCode = event.data;\n    this.postNotification(\n        Extensions.ExtensionAPI.PrivateAPI.Events.ResourceAdded, [this.makeResource(uiSourceCode)],\n        extension => extension.isAllowedOnTarget(uiSourceCode.url()));\n  }\n\n  private notifyUISourceCodeContentCommitted(\n      event: Common.EventTarget.EventTargetEvent<Workspace.Workspace.WorkingCopyCommittedEvent>): void {\n    const {uiSourceCode, content} = event.data;\n    this.postNotification(\n        Extensions.ExtensionAPI.PrivateAPI.Events.ResourceContentCommitted, [this.makeResource(uiSourceCode), content],\n        extension => extension.isAllowedOnTarget(uiSourceCode.url()));\n  }\n\n  private async notifyRequestFinished(event: Common.EventTarget.EventTargetEvent<SDK.NetworkRequest.NetworkRequest>):\n      Promise<void> {\n    const request = event.data;\n    const entry = await HAR.Log.Entry.build(request, {sanitize: false});\n    this.postNotification(\n        Extensions.ExtensionAPI.PrivateAPI.Events.NetworkRequestFinished, [this.requestId(request), entry],\n        extension => extension.isAllowedOnTarget(entry.request.url));\n  }\n\n  private notifyElementsSelectionChanged(): void {\n    this.postNotification(Extensions.ExtensionAPI.PrivateAPI.Events.PanelObjectSelected + 'elements', []);\n  }\n\n  sourceSelectionChanged(url: Platform.DevToolsPath.UrlString, range: TextUtils.TextRange.TextRange): void {\n    this.postNotification(\n        Extensions.ExtensionAPI.PrivateAPI.Events.PanelObjectSelected + 'sources', [{\n          startLine: range.startLine,\n          startColumn: range.startColumn,\n          endLine: range.endLine,\n          endColumn: range.endColumn,\n          url,\n        }],\n        extension => extension.isAllowedOnTarget(url));\n  }\n\n  private setInspectedTabId(event: Common.EventTarget.EventTargetEvent<string>): void {\n    const oldId = this.inspectedTabId;\n    this.inspectedTabId = event.data;\n    if (oldId === null) {\n      // Run deferred init\n      this.initializeExtensions();\n    }\n  }\n\n  addExtensionFrame({startPage, name}: Host.InspectorFrontendHostAPI.ExtensionDescriptor): void {\n    const iframe = document.createElement('iframe');\n    iframe.src = startPage;\n    iframe.dataset.devtoolsExtension = name;\n    iframe.style.display = 'none';\n    document.body.appendChild(iframe);  // Only for main window.\n  }\n\n  addExtension(extensionInfo: Host.InspectorFrontendHostAPI.ExtensionDescriptor): boolean|undefined {\n    const startPage = extensionInfo.startPage;\n\n    const inspectedURL = SDK.TargetManager.TargetManager.instance().primaryPageTarget()?.inspectedURL() ?? '';\n    if (inspectedURL === '') {\n      this.#pendingExtensions.push(extensionInfo);\n      return;\n    }\n    if (!ExtensionServer.canInspectURL(inspectedURL)) {\n      this.disableExtensions();\n    }\n    if (!this.extensionsEnabled) {\n      this.#pendingExtensions.push(extensionInfo);\n      return;\n    }\n    const hostsPolicy = HostsPolicy.create(extensionInfo.hostsPolicy);\n    if (!hostsPolicy) {\n      return;\n    }\n    try {\n      const startPageURL = new URL((startPage));\n      const extensionOrigin = startPageURL.origin;\n      const name = extensionInfo.name || `Extension ${extensionOrigin}`;\n      const extensionRegistration = new RegisteredExtension(name, hostsPolicy, Boolean(extensionInfo.allowFileAccess));\n      if (!extensionRegistration.isAllowedOnTarget(inspectedURL)) {\n        this.#pendingExtensions.push(extensionInfo);\n        return;\n      }\n      if (!this.registeredExtensions.get(extensionOrigin)) {\n        // See ExtensionAPI.js for details.\n        const injectedAPI = self.buildExtensionAPIInjectedScript(\n            extensionInfo, this.inspectedTabId as string, ThemeSupport.ThemeSupport.instance().themeName(),\n            UI.ShortcutRegistry.ShortcutRegistry.instance().globalShortcutKeys(),\n            ExtensionServer.instance().extensionAPITestHook);\n        Host.InspectorFrontendHost.InspectorFrontendHostInstance.setInjectedScriptForOrigin(\n            extensionOrigin, injectedAPI);\n        this.registeredExtensions.set(extensionOrigin, extensionRegistration);\n      }\n      this.addExtensionFrame(extensionInfo);\n    } catch (e) {\n      console.error('Failed to initialize extension ' + startPage + ':' + e);\n      return false;\n    }\n    return true;\n  }\n\n  private registerExtension(origin: Platform.DevToolsPath.UrlString, port: MessagePort): void {\n    if (!this.registeredExtensions.has(origin)) {\n      if (origin !== window.location.origin) {  // Just ignore inspector frames.\n        console.error('Ignoring unauthorized client request from ' + origin);\n      }\n      return;\n    }\n    extensionOrigins.set(port, origin);\n    port.addEventListener('message', this.onmessage.bind(this), false);\n    port.start();\n  }\n\n  private onWindowMessage = (event: MessageEvent): void => {\n    if (event.data === 'registerExtension') {\n      this.registerExtension(event.origin as Platform.DevToolsPath.UrlString, event.ports[0]);\n    }\n  };\n\n  private extensionEnabled(port: MessagePort): boolean {\n    if (!this.extensionsEnabled) {\n      return false;\n    }\n    const origin = extensionOrigins.get(port);\n    if (!origin) {\n      return false;\n    }\n    const extension = this.registeredExtensions.get(origin);\n    if (!extension) {\n      return false;\n    }\n    return extension.isAllowedOnTarget();\n  }\n\n  private async onmessage(event: MessageEvent): Promise<void> {\n    const message = event.data;\n    let result;\n\n    const port = event.currentTarget as MessagePort;\n    const handler = this.handlers.get(message.command);\n\n    if (!handler) {\n      result = this.status.E_NOTSUPPORTED(message.command);\n    } else if (!this.extensionEnabled(port)) {\n      result = this.status.E_FAILED('Permission denied');\n    } else {\n      result = await handler(message, event.target as MessagePort);\n    }\n\n    if (result && message.requestId) {\n      this.dispatchCallback(message.requestId, event.target as MessagePort, result);\n    }\n  }\n\n  private registerHandler(\n      command: string,\n      callback:\n          (message: Extensions.ExtensionAPI.PrivateAPI.ExtensionServerRequestMessage, port: MessagePort) => unknown):\n      void {\n    console.assert(Boolean(command));\n    this.handlers.set(command, callback);\n  }\n\n  private registerSubscriptionHandler(\n      eventTopic: string, onSubscribeFirst: () => unknown, onUnsubscribeLast: () => unknown): void {\n    this.subscriptionStartHandlers.set(eventTopic, onSubscribeFirst);\n    this.subscriptionStopHandlers.set(eventTopic, onUnsubscribeLast);\n  }\n\n  private registerAutosubscriptionHandler<Events, T extends keyof Events>(\n      eventTopic: string, eventTarget: Common.EventTarget.EventTarget<Events>, frontendEventType: T,\n      handler: Common.EventTarget.EventListener<Events, T>): void {\n    this.registerSubscriptionHandler(\n        eventTopic, () => eventTarget.addEventListener(frontendEventType, handler, this),\n        () => eventTarget.removeEventListener(frontendEventType, handler, this));\n  }\n\n  private registerAutosubscriptionTargetManagerHandler<Events, T extends keyof Events>(\n      eventTopic: string, modelClass: new(arg1: SDK.Target.Target) => SDK.SDKModel.SDKModel<Events>,\n      frontendEventType: T, handler: Common.EventTarget.EventListener<Events, T>): void {\n    this.registerSubscriptionHandler(\n        eventTopic,\n        () => SDK.TargetManager.TargetManager.instance().addModelListener(modelClass, frontendEventType, handler, this),\n        () => SDK.TargetManager.TargetManager.instance().removeModelListener(\n            modelClass, frontendEventType, handler, this));\n  }\n\n  private registerResourceContentCommittedHandler(\n      handler: (arg0: Common.EventTarget.EventTargetEvent<Workspace.Workspace.WorkingCopyCommittedEvent>) => unknown):\n      void {\n    function addFirstEventListener(this: ExtensionServer): void {\n      Workspace.Workspace.WorkspaceImpl.instance().addEventListener(\n          Workspace.Workspace.Events.WorkingCopyCommittedByUser, handler, this);\n      Workspace.Workspace.WorkspaceImpl.instance().setHasResourceContentTrackingExtensions(true);\n    }\n\n    function removeLastEventListener(this: ExtensionServer): void {\n      Workspace.Workspace.WorkspaceImpl.instance().setHasResourceContentTrackingExtensions(false);\n      Workspace.Workspace.WorkspaceImpl.instance().removeEventListener(\n          Workspace.Workspace.Events.WorkingCopyCommittedByUser, handler, this);\n    }\n\n    this.registerSubscriptionHandler(\n        Extensions.ExtensionAPI.PrivateAPI.Events.ResourceContentCommitted, addFirstEventListener.bind(this),\n        removeLastEventListener.bind(this));\n  }\n\n  static expandResourcePath(extensionOrigin: Platform.DevToolsPath.UrlString, resourcePath: string):\n      Platform.DevToolsPath.UrlString|undefined {\n    const strippedOrigin = new URL(extensionOrigin).origin;\n    const resourceURL = new URL(Common.ParsedURL.normalizePath(resourcePath), strippedOrigin);\n    if (resourceURL.origin !== strippedOrigin) {\n      return undefined;\n    }\n    return resourceURL.href as Platform.DevToolsPath.UrlString;\n  }\n\n  evaluate(\n      expression: string, exposeCommandLineAPI: boolean, returnByValue: boolean,\n      options: Extensions.ExtensionAPI.PrivateAPI.EvaluateOptions|undefined, securityOrigin: string,\n      callback: (arg0: string|null, arg1: SDK.RemoteObject.RemoteObject|null, arg2: boolean) => unknown): Record\n      |undefined {\n    let context;\n\n    function resolveURLToFrame(url: Platform.DevToolsPath.UrlString): SDK.ResourceTreeModel.ResourceTreeFrame|null {\n      let found = null;\n      function hasMatchingURL(frame: SDK.ResourceTreeModel.ResourceTreeFrame): SDK.ResourceTreeModel.ResourceTreeFrame|\n          null {\n        found = (frame.url === url) ? frame : null;\n        return found;\n      }\n      SDK.ResourceTreeModel.ResourceTreeModel.frames().some(hasMatchingURL);\n      return found;\n    }\n\n    options = options || {};\n    let frame;\n    if (options.frameURL) {\n      frame = resolveURLToFrame(options.frameURL as Platform.DevToolsPath.UrlString);\n    } else {\n      const target = SDK.TargetManager.TargetManager.instance().primaryPageTarget();\n      const resourceTreeModel = target?.model(SDK.ResourceTreeModel.ResourceTreeModel);\n      frame = resourceTreeModel?.mainFrame;\n    }\n    if (!frame) {\n      if (options.frameURL) {\n        console.warn('evaluate: there is no frame with URL ' + options.frameURL);\n      } else {\n        console.warn('evaluate: the main frame is not yet available');\n      }\n      return this.status.E_NOTFOUND(options.frameURL || '<top>');\n    }\n    // We shouldn't get here if the outermost frame can't be inspected by an extension, but\n    // let's double check for subframes.\n    const extension = this.registeredExtensions.get(securityOrigin);\n    if (!extension?.isAllowedOnTarget(frame.url)) {\n      return this.status.E_FAILED('Permission denied');\n    }\n\n    let contextSecurityOrigin;\n    if (options.useContentScriptContext) {\n      contextSecurityOrigin = securityOrigin;\n    } else if (options.scriptExecutionContext) {\n      contextSecurityOrigin = options.scriptExecutionContext;\n    }\n\n    const runtimeModel = frame.resourceTreeModel().target().model(SDK.RuntimeModel.RuntimeModel);\n    const executionContexts = runtimeModel ? runtimeModel.executionContexts() : [];\n    if (contextSecurityOrigin) {\n      for (let i = 0; i < executionContexts.length; ++i) {\n        const executionContext = executionContexts[i];\n        if (executionContext.frameId === frame.id && executionContext.origin === contextSecurityOrigin &&\n            !executionContext.isDefault) {\n          context = executionContext;\n        }\n      }\n      if (!context) {\n        console.warn('The JavaScript context ' + contextSecurityOrigin + ' was not found in the frame ' + frame.url);\n        return this.status.E_NOTFOUND(contextSecurityOrigin);\n      }\n    } else {\n      for (let i = 0; i < executionContexts.length; ++i) {\n        const executionContext = executionContexts[i];\n        if (executionContext.frameId === frame.id && executionContext.isDefault) {\n          context = executionContext;\n        }\n      }\n      if (!context) {\n        return this.status.E_FAILED(frame.url + ' has no execution context');\n      }\n    }\n    if (!extension?.isAllowedOnTarget(context.origin)) {\n      return this.status.E_FAILED('Permission denied');\n    }\n\n    void context\n        .evaluate(\n            {\n              expression,\n              objectGroup: 'extension',\n              includeCommandLineAPI: exposeCommandLineAPI,\n              silent: true,\n              returnByValue,\n              generatePreview: false,\n            },\n            /* userGesture */ false, /* awaitPromise */ false)\n        .then(onEvaluate);\n\n    function onEvaluate(result: SDK.RuntimeModel.EvaluationResult): void {\n      if ('error' in result) {\n        callback(result.error, null, false);\n        return;\n      }\n      callback(null, result.object || null, Boolean(result.exceptionDetails));\n    }\n    return undefined;\n  }\n\n  static canInspectURL(url: Platform.DevToolsPath.UrlString): boolean {\n    let parsedURL;\n    // This is only to work around invalid URLs we're occasionally getting from some tests.\n    // TODO(caseq): make sure tests supply valid URLs or we specifically handle invalid ones.\n    try {\n      parsedURL = new URL(url);\n    } catch {\n      return false;\n    }\n\n    if (!kPermittedSchemes.includes(parsedURL.protocol)) {\n      return false;\n    }\n\n    if ((window.DevToolsAPI?.getOriginsForbiddenForExtensions?.() || []).includes(parsedURL.origin)) {\n      return false;\n    }\n\n    if (this.#isUrlFromChromeWebStore(parsedURL)) {\n      return false;\n    }\n\n    return true;\n  }\n\n  /**\n   * Tests whether a given URL is from the Chrome web store to prevent the extension server from\n   * being injected. This is treated as separate from the `getOriginsForbiddenForExtensions` API because\n   * DevTools might not be being run from a native origin and we still want to lock down this specific\n   * origin from DevTools extensions.\n   *\n   * @param parsedURL The URL to check\n   * @returns `true` if the URL corresponds to the Chrome web store; otherwise `false`\n   */\n  static #isUrlFromChromeWebStore(parsedURL: URL): boolean {\n    if (parsedURL.protocol.startsWith('http') && parsedURL.hostname.match(/^chrome\\.google\\.com\\.?$/) &&\n        parsedURL.pathname.startsWith('/webstore')) {\n      return true;\n    }\n    if (parsedURL.protocol.startsWith('http') && parsedURL.hostname.match(/^chromewebstore\\.google\\.com\\.?$/)) {\n      return true;\n    }\n\n    return false;\n  }\n\n  private disableExtensions(): void {\n    this.extensionsEnabled = false;\n  }\n\n  private enableExtensions(): void {\n    this.extensionsEnabled = true;\n  }\n}\n\nexport const enum Events {\n  SidebarPaneAdded = 'SidebarPaneAdded',\n}\n\nexport interface EventTypes {\n  [Events.SidebarPaneAdded]: ExtensionSidebarPane;\n}\n\nclass ExtensionServerPanelView extends UI.View.SimpleView {\n  private readonly name: string;\n  private readonly panel: UI.Panel.Panel;\n\n  constructor(name: string, title: Platform.UIString.LocalizedString, panel: UI.Panel.Panel) {\n    // The `viewId` here is to satisfy the `SimpleView` constructor needs, but isn't actually\n    // used anywhere, since we override the `viewId()` method below.  Ideally we'd pass the\n    // `name` as `viewId` to the constructor, but that doesn't work, since the `name` is not\n    // necessarily in Kebab case.\n    const viewId = Platform.StringUtilities.toKebabCase(title);\n    super({title, viewId});\n    this.name = name;\n    this.panel = panel;\n  }\n\n  override viewId(): string {\n    return this.name;\n  }\n\n  override widget(): Promise<UI.Widget.Widget> {\n    return Promise.resolve(this.panel) as Promise<UI.Widget.Widget>;\n  }\n}\n\nexport class ExtensionStatus {\n  OK: (...args: unknown[]) => Record;\n  E_EXISTS: (...args: unknown[]) => Record;\n  E_BADARG: (...args: unknown[]) => Record;\n  E_BADARGTYPE: (...args: unknown[]) => Record;\n  E_NOTFOUND: (...args: unknown[]) => Record;\n  E_NOTSUPPORTED: (...args: unknown[]) => Record;\n  E_PROTOCOLERROR: (...args: unknown[]) => Record;\n  E_FAILED: (...args: unknown[]) => Record;\n\n  constructor() {\n    function makeStatus(code: string, description: string, ...details: unknown[]): Record {\n      const status: Record = {code, description, details};\n      if (code !== 'OK') {\n        status.isError = true;\n        console.error('Extension server error: ' + Platform.StringUtilities.sprintf(description, ...details));\n      }\n      return status;\n    }\n\n    this.OK = makeStatus.bind(null, 'OK', 'OK');\n    this.E_EXISTS = makeStatus.bind(null, 'E_EXISTS', 'Object already exists: %s');\n    this.E_BADARG = makeStatus.bind(null, 'E_BADARG', 'Invalid argument %s: %s');\n    this.E_BADARGTYPE = makeStatus.bind(null, 'E_BADARGTYPE', 'Invalid type for argument %s: got %s, expected %s');\n    this.E_NOTFOUND = makeStatus.bind(null, 'E_NOTFOUND', 'Object not found: %s');\n    this.E_NOTSUPPORTED = makeStatus.bind(null, 'E_NOTSUPPORTED', 'Object does not support requested operation: %s');\n    this.E_PROTOCOLERROR = makeStatus.bind(null, 'E_PROTOCOLERROR', 'Inspector protocol error: %s');\n    this.E_FAILED = makeStatus.bind(null, 'E_FAILED', 'Operation failed: %s');\n  }\n}\nexport interface Record {\n  code: string;\n  description: string;\n  details: unknown[];\n  isError?: boolean;\n}\n", "// Copyright 2016 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n/* eslint-disable @devtools/no-imperative-dom-api */\n\nimport * as Common from '../../core/common/common.js';\nimport * as i18n from '../../core/i18n/i18n.js';\nimport * as Platform from '../../core/platform/platform.js';\nimport * as Persistence from '../../models/persistence/persistence.js';\nimport * as Workspace from '../../models/workspace/workspace.js';\nimport * as IconButton from '../../ui/components/icon_button/icon_button.js';\nimport * as Components from '../../ui/legacy/components/utils/utils.js';\nimport * as UI from '../../ui/legacy/legacy.js';\n\nconst UIStrings = {\n  /**\n   * @description Text in Persistence Utils of the Workspace settings in Settings\n   * @example {example.url} PH1\n   */\n  linkedToSourceMapS: 'Linked to source map: {PH1}',\n  /**\n   * @description Text to show something is linked to another\n   * @example {example.url} PH1\n   */\n  linkedToS: 'Linked to {PH1}',\n} as const;\nconst str_ = i18n.i18n.registerUIStrings('panels/common/PersistenceUtils.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\nexport class PersistenceUtils {\n  static tooltipForUISourceCode(uiSourceCode: Workspace.UISourceCode.UISourceCode): string {\n    const binding = Persistence.Persistence.PersistenceImpl.instance().binding(uiSourceCode);\n    if (!binding) {\n      return '';\n    }\n    if (uiSourceCode === binding.network) {\n      return Persistence.FileSystemWorkspaceBinding.FileSystemWorkspaceBinding.tooltipForUISourceCode(\n          binding.fileSystem);\n    }\n    if (binding.network.contentType().isFromSourceMap()) {\n      return i18nString(\n          UIStrings.linkedToSourceMapS, {PH1: Platform.StringUtilities.trimMiddle(binding.network.url(), 150)});\n    }\n    return i18nString(UIStrings.linkedToS, {PH1: Platform.StringUtilities.trimMiddle(binding.network.url(), 150)});\n  }\n\n  static iconForUISourceCode(uiSourceCode: Workspace.UISourceCode.UISourceCode): IconButton.Icon.Icon|null {\n    const binding = Persistence.Persistence.PersistenceImpl.instance().binding(uiSourceCode);\n    if (binding) {\n      if (!Common.ParsedURL.schemeIs(binding.fileSystem.url(), 'file:')) {\n        return null;\n      }\n      const icon = new IconButton.Icon.Icon();\n      icon.name = 'document';\n      icon.classList.add('small');\n      UI.Tooltip.Tooltip.install(icon, PersistenceUtils.tooltipForUISourceCode(binding.network));\n      if (Persistence.NetworkPersistenceManager.NetworkPersistenceManager.instance().project() ===\n          binding.fileSystem.project()) {\n        icon.classList.add('dot', 'purple');\n      } else {\n        icon.classList.add('dot', 'green');\n      }\n      return icon;\n    }\n\n    if (uiSourceCode.project().type() !== Workspace.Workspace.projectTypes.FileSystem ||\n        !Common.ParsedURL.schemeIs(uiSourceCode.url(), 'file:')) {\n      return null;\n    }\n\n    if (Persistence.NetworkPersistenceManager.NetworkPersistenceManager.instance().isActiveHeaderOverrides(\n            uiSourceCode)) {\n      const icon = new IconButton.Icon.Icon();\n      icon.name = 'document';\n      icon.classList.add('small');\n      icon.classList.add('dot', 'purple');\n      return icon;\n    }\n\n    const icon = new IconButton.Icon.Icon();\n    icon.name = 'document';\n    icon.classList.add('small');\n    UI.Tooltip.Tooltip.install(icon, PersistenceUtils.tooltipForUISourceCode(uiSourceCode));\n    return icon;\n  }\n}\n\nexport class LinkDecorator extends Common.ObjectWrapper.ObjectWrapper<Components.Linkifier.LinkDecorator.EventTypes>\n    implements Components.Linkifier.LinkDecorator {\n  constructor(persistence: Persistence.Persistence.PersistenceImpl) {\n    super();\n    persistence.addEventListener(Persistence.Persistence.Events.BindingCreated, this.bindingChanged, this);\n    persistence.addEventListener(Persistence.Persistence.Events.BindingRemoved, this.bindingChanged, this);\n  }\n\n  private bindingChanged(event: Common.EventTarget.EventTargetEvent<Persistence.Persistence.PersistenceBinding>): void {\n    const binding = event.data;\n    this.dispatchEventToListeners(Components.Linkifier.LinkDecorator.Events.LINK_ICON_CHANGED, binding.network);\n  }\n\n  linkIcon(uiSourceCode: Workspace.UISourceCode.UISourceCode): IconButton.Icon.Icon|null {\n    return PersistenceUtils.iconForUISourceCode(uiSourceCode);\n  }\n}\n", "// Copyright 2018 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as Common from '../../core/common/common.js';\nimport * as i18n from '../../core/i18n/i18n.js';\nimport * as SDK from '../../core/sdk/sdk.js';\nimport * as UI from '../../ui/legacy/legacy.js';\nimport {Directives, html, nothing, render} from '../../ui/lit/lit.js';\nimport * as VisualLogging from '../../ui/visual_logging/visual_logging.js';\n\nimport domLinkifierStyles from './domLinkifier.css.js';\n\nconst {classMap} = Directives;\n\nconst UIStrings = {\n  /**\n   * @description Text displayed when trying to create a link to a node in the UI, but the node\n   * location could not be found so we display this placeholder instead. Node refers to a DOM node.\n   * This should be translated if appropriate.\n   */\n  node: '<node>',\n} as const;\nconst str_ = i18n.i18n.registerUIStrings('panels/common/DOMLinkifier.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\n\nexport interface Options {\n  tooltip?: string;\n  preventKeyboardFocus?: boolean;\n  textContent?: string;\n  // Dynamic links include hyperlinks and anchorlinks -- links that navigate the content.\n  isDynamicLink?: boolean;\n  hiddenClassList?: string[];\n  disabled?: boolean;\n}\n\ninterface ViewInput {\n  dynamic?: boolean;\n  disabled?: boolean;\n  preventKeyboardFocus?: boolean;\n  tagName?: string;\n  id?: string;\n  classes: string[];\n  pseudo?: string;\n  onClick: () => void;\n  onMouseOver: () => void;\n  onMouseLeave: () => void;\n}\n\nexport type View = (input: ViewInput, output: object, target: HTMLElement) => void;\n\nconst DEFAULT_VIEW: View = (input, _output, target: HTMLElement) => {\n  // clang-format off\n  render(html`${(input.tagName || input.pseudo) ?  html`\n    <style>${domLinkifierStyles}</style>\n    <span class=\"monospace\">\n      <button class=\"node-link text-button link-style ${classMap({\n            'dynamic-link': Boolean(input.dynamic),\n            disabled: Boolean(input.disabled)\n          })}\"\n          jslog=${VisualLogging.link('node').track({click: true, keydown: 'Enter'})}\n          tabindex=${input.preventKeyboardFocus ? -1 : 0}\n          @click=${input.onClick}\n          @mouseover=${input.onMouseOver}\n          @mouseleave=${input.onMouseLeave}\n          title=${[\n            input.tagName ?? '',\n            input.id ? `#${input.id}` : '',\n            ...input.classes.map(c => `.${c}`),\n            input.pseudo ? `::${input.pseudo}` : '',\n          ].join(' ')}>${\n         [\n          input.tagName ? html`<span class=\"node-label-name\">${input.tagName}</span>` : nothing,\n          input.id ? html`<span class=\"node-label-id\">#${input.id}</span>` : nothing,\n          ...input.classes.map(className => html`<span class=\"extra node-label-class\">.${className}</span>`),\n          input.pseudo ? html`<span class=\"extra node-label-pseudo\">${input.pseudo}</span>` : nothing,\n        ]\n      }</button>\n    </span>` : i18nString(UIStrings.node)}`, target);\n  // clang-format on\n};\n\nexport class DOMNodeLink extends UI.Widget.Widget {\n  #node: SDK.DOMModel.DOMNode|undefined = undefined;\n  #options: Options|undefined = undefined;\n  #view: View;\n\n  constructor(element?: HTMLElement, node?: SDK.DOMModel.DOMNode, options?: Options, view = DEFAULT_VIEW) {\n    super(element, {useShadowDom: true});\n    this.element.classList.remove('vbox');\n    this.#node = node;\n    this.#options = options;\n    this.#view = view;\n    this.performUpdate();\n  }\n\n  set node(node: SDK.DOMModel.DOMNode|undefined) {\n    this.#node = node;\n    this.performUpdate();\n  }\n\n  set options(options: Options|undefined) {\n    this.#options = options;\n    this.performUpdate();\n  }\n\n  override performUpdate(): void {\n    const options = this.#options ?? {\n      tooltip: undefined,\n      preventKeyboardFocus: undefined,\n      textContent: undefined,\n      isDynamicLink: false,\n      disabled: false,\n    };\n    const viewInput: ViewInput = {\n      dynamic: options.isDynamicLink,\n      disabled: options.disabled,\n      preventKeyboardFocus: options.preventKeyboardFocus,\n      classes: [],\n      onClick: () => {\n        void Common.Revealer.reveal(this.#node);\n        void this.#node?.scrollIntoView();\n        return false;\n      },\n      onMouseOver: () => {\n        this.#node?.highlight?.();\n      },\n      onMouseLeave: () => {\n        SDK.OverlayModel.OverlayModel.hideDOMNodeHighlight();\n      },\n    };\n    if (!this.#node) {\n      this.#view(viewInput, {}, this.contentElement);\n      return;\n    }\n\n    let node = this.#node;\n    const isPseudo = node.nodeType() === Node.ELEMENT_NODE && node.pseudoType();\n    if (isPseudo && node.parentNode) {\n      node = node.parentNode;\n    }\n\n    // Special case rendering the node links for view transition pseudo elements.\n    // We don't include the ancestor name in the node link because\n    // they always have the same ancestor. See crbug.com/340633630.\n    if (node.isViewTransitionPseudoNode()) {\n      viewInput.pseudo = `::${this.#node.pseudoType()}(${this.#node.pseudoIdentifier()})`;\n      this.#view(viewInput, {}, this.contentElement);\n      return;\n    }\n\n    if (options.textContent) {\n      viewInput.tagName = options.textContent;\n      this.#view(viewInput, {}, this.contentElement);\n      return;\n    }\n\n    viewInput.tagName = node.nodeNameInCorrectCase();\n\n    const idAttribute = node.getAttribute('id');\n    if (idAttribute) {\n      viewInput.id = idAttribute;\n    }\n\n    const classAttribute = node.getAttribute('class');\n    if (classAttribute) {\n      const classes = classAttribute.split(/\\s+/);\n      if (classes.length) {\n        const foundClasses = new Set<string>();\n        for (let i = 0; i < classes.length; ++i) {\n          const className = classes[i];\n          if (className && !options.hiddenClassList?.includes(className) && !foundClasses.has(className)) {\n            foundClasses.add(className);\n          }\n        }\n        viewInput.classes = [...foundClasses];\n      }\n    }\n    if (isPseudo) {\n      const pseudoIdentifier = this.#node.pseudoIdentifier();\n      let pseudoText = '::' + this.#node.pseudoType();\n      if (pseudoIdentifier) {\n        pseudoText += `(${pseudoIdentifier})`;\n      }\n      viewInput.pseudo = pseudoText;\n    }\n    this.#view(viewInput, {}, this.contentElement);\n  }\n}\n\ninterface DeferredViewInput {\n  preventKeyboardFocus?: boolean;\n  onClick: () => void;\n}\n\ntype DeferredView = (input: DeferredViewInput, output: object, target: HTMLElement) => void;\n\nconst DEFERRED_DEFAULT_VIEW: DeferredView = (input, _output, target: HTMLElement) => {\n  // clang-format off\n  render(html`\n      <style>${domLinkifierStyles}</style>\n      <button class=\"node-link text-button link-style\"\n          jslog=${VisualLogging.link('node').track({click: true})}\n          tabindex=${input.preventKeyboardFocus ? -1 : 0}\n          @click=${input.onClick}\n          @mousedown=${(e: Event) => e.consume()}>\n        <slot></slot>\n      </button>`, target);\n  // clang-format on\n};\n\nexport class DeferredDOMNodeLink extends UI.Widget.Widget {\n  #deferredNode: SDK.DOMModel.DeferredDOMNode|undefined = undefined;\n  #options: Options|undefined = undefined;\n  #view: DeferredView;\n\n  constructor(\n      element?: HTMLElement, deferredNode?: SDK.DOMModel.DeferredDOMNode, options?: Options,\n      view: DeferredView = DEFERRED_DEFAULT_VIEW) {\n    super(element, {useShadowDom: true});\n    this.element.classList.remove('vbox');\n    this.#deferredNode = deferredNode;\n    this.#options = options;\n    this.#view = view;\n    this.performUpdate();\n  }\n\n  override performUpdate(): void {\n    const viewInput = {\n      preventKeyboardFocus: this.#options?.preventKeyboardFocus,\n      onClick: () => {\n        this.#deferredNode?.resolve?.(node => {\n          void Common.Revealer.reveal(node);\n          void node?.scrollIntoView();\n        });\n      },\n    };\n    this.#view(viewInput, {}, this.contentElement);\n  }\n}\n\nlet linkifierInstance: Linkifier;\n\nexport class Linkifier {\n  static instance(opts: {\n    forceNew: boolean|null,\n  } = {forceNew: null}): Linkifier {\n    const {forceNew} = opts;\n    if (!linkifierInstance || forceNew) {\n      linkifierInstance = new Linkifier();\n    }\n\n    return linkifierInstance;\n  }\n  linkify(node: SDK.DOMModel.DOMNode|SDK.DOMModel.DeferredDOMNode, options?: Options): HTMLElement {\n    if (node instanceof SDK.DOMModel.DOMNode) {\n      const link = document.createElement('devtools-widget') as UI.Widget.WidgetElement<DOMNodeLink>;\n      link.widgetConfig = UI.Widget.widgetConfig(e => new DOMNodeLink(e, node, options));\n      return link;\n    }\n    if (node instanceof SDK.DOMModel.DeferredDOMNode) {\n      const link = document.createElement('devtools-widget') as UI.Widget.WidgetElement<DeferredDOMNodeLink>;\n      link.widgetConfig = UI.Widget.widgetConfig(e => new DeferredDOMNodeLink(e, node, options));\n      return link;\n    }\n    throw new Error('Can\\'t linkify non-node');\n  }\n}\n", "// Copyright 2025 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n// IMPORTANT: this file is auto generated. Please do not edit this file.\n/* istanbul ignore file */\nexport default `/*\n * Copyright 2018 The Chromium Authors\n * Use of this source code is governed by a BSD-style license that can be\n * found in the LICENSE file.\n */\n\n@scope to (devtools-widget > *) {\n  :scope {\n    display: inline;\n  }\n\n  .node-link {\n    cursor: pointer;\n    display: inline;\n    pointer-events: auto;\n    outline-offset: 2px;\n\n    /* If the element has lots of classes, don't let the label get too wide */\n    text-overflow: ellipsis;\n    overflow: hidden;\n    max-width: min(100%, 550px);\n\n    &:focus-visible {\n      outline-width: unset;\n    }\n\n    &.dynamic-link:hover {\n      text-decoration: underline;\n    }\n  }\n\n  .node-link.disabled {\n    .node-label-name,\n    .node-label-class,\n    .node-label-pseudo,\n    .node-label-name .dynamic-link,\n    .node-label-id {\n      color: var(--sys-color-state-disabled);\n    }\n  }\n\n  .node-label-name {\n    color: var(--sys-color-token-tag);\n\n    .dynamic-link & {\n      color: var(--text-link);\n    }\n  }\n\n  .node-label-class,\n  .node-label-pseudo {\n    color: var(--sys-color-token-attribute);\n  }\n}\n\n/*# sourceURL=${import.meta.resolve('./domLinkifier.css')} */`;"],
  "mappings": ";;;;;;;AAMA,YAAYA,WAAU;AACtB,YAAYC,YAAU;AAEtB,YAAYC,eAAc;AAC1B,YAAYC,cAAa;AACzB,YAAYC,UAAQ;;;ACNpB,IAAO,qBAAQ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAgDC,YAAY,QAAQ,cAAc,CAAC;;;ACjDnD,YAAY,YAAY;AACxB,YAAY,UAAU;AACtB,YAAYC,WAAU;AACtB,YAAY,UAAU;AACtB,YAAY,eAAe;AAC3B,YAAYC,SAAQ;AACpB,SAAQ,QAAAC,OAAM,SAAS,UAAAC,eAAa;AACpC,YAAY,mBAAmB;;;ACN/B,IAAO,qCAAQ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAgDC,YAAY,QAAQ,8BAA8B,CAAC;;;AChDnE,YAAY,UAAU;AAEtB,YAAY,aAAa;AACzB,YAAY,QAAQ;AACpB,YAAY,SAAS;;;ACJrB,IAAO,wBAAQ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAyFC,YAAY,QAAQ,iBAAiB,CAAC;;;ADjFtD,IAAM,EAAC,MAAM,YAAY,EAAC,UAAS,EAAC,IAAI;AAExC,IAAM,YAAY;;;;EAIhB,kBAAkB;;;;EAIlB,WAAW;;;;EAIX,QAAQ;;;;EAIR,OAAO;;AAGT,IAAM,OAAY,UAAK,kBAAkB,8BAA8B,SAAS;AAChF,IAAM,aAAkB,UAAK,mBAAmB,KAAK,QAAW,IAAI;AAE9D,IAAO,YAAP,MAAgB;EACpB,OAAO,KAAK,EAAC,QAAQ,eAAe,kBAAkB,WAAW,qBAAqB,yBAAwB,GAa7G;AACC,UAAMC,UAAS,IAAO,UAAO,OAAM;AACnC,QAAI,WAAW;AACb,MAAAA,QAAO,aAAa,SAAS;IAC/B;AACA,UAAM,SAAS,QAAQ,cAAa;AAEpC,IAAI,WAAO;;;YAGH,qBAAM;;;;kCAIgB,OAAO,QAAQ;;;cAGnC,OAAO,IAAI;;;;gBAIT,WAAW,UAAU,gBAAgB,CAAC;YAC1C,cAAc,IAAI,kBAAgB;;0DAEY,aAAa,QAAQ;sBACzD,aAAa,OAAO;;WAE/B,CAAC;;;;qBAIS,gBAAgB;4BACT,2BAA2B;uBAChC,UAA+B;qBACjC,4BAA4B,WAAW,UAAU,SAAS,CAAC;yBACvD,UAAU,wBAAwB,CAAC;cAC9C,uBAAuB,WAAW,UAAU,SAAS,CAAC;;;;uBAI7C,MAAK;AAGZ,aAAO,QAAQ,KAAK;AACpB,MAAAA,QAAO,KAAI;IACb,CAAC;8BACe,uBAAuB;yBAC5B,OAA4B;gBACrC,WAAW,UAAU,MAAM,CAAC;;;uBAGrB,MAAK;AAGZ,aAAO,QAAQ,IAAI;AACnB,MAAAA,QAAO,KAAI;IACb,CAAC;8BACe,yBAAyB;yBAC9B,SAA8B;gBACvC,WAAW,UAAU,KAAK,CAAC;;;;eAI5BA,QAAO,cAAc;AAGhC,IAAAA,QAAO,wBAAwB,QAAK;AAClC,SAAG,QAAQ,IAAI;AACf,MAAAA,QAAO,KAAI;AACX,aAAO,QAAQ,KAAK;IACtB,CAAC;AAKD,IAAAA,QAAO,kBAAkB,MAAK;AAC5B,aAAO,QAAQ,KAAK;IACtB,CAAC;AAED,IAAAA,QAAO;MAAe;;IAAA;AACtB,IAAAA,QAAO,UAAU,IAAI;AACrB,IAAAA,QAAO,KAAI;AAEX,WAAO,OAAO;EAChB;EAEA,cAAA;EACA;;;;AF1HF,IAAM,wBAAwB;;;;EAI5B,MAAM;;;;EAIN,KAAK;;;;EAIL,GAAG;;;;EAIH,GAAG;;;;EAIH,eAAe;;;;EAIf,yBAAyB;;;;EAIzB,0CAA0C;;;;EAI1C,QAAQ;;;;;EAKR,WAAW;;;;EAIX,qBAAqB;;;;EAIrB,yCAAyC;;;;EAIzC,0BACI;;;;EAIJ,mCACI;;;;EAIJ,iCAAiC;;;;EAIjC,OAAO;;;;EAIP,0BAA0B;;AAG5B,IAAM,eAAoB,WAAK;AAC/B,IAAM,2BAA2B;AACjC,IAAM,eAAe;AAUd,IAAM,eAAqB,CAAC,OAAO,SAAS,WAAU;AAC3D,MAAI,MAAM,qBAAgB,aAAwD;AAChF,IAAAC,QAAO,SAAS,MAAM;AACtB;EACF;AACA,QAAM,YACG,cAAS,MAAK,IAAK,aAAa,sBAAsB,GAAG,IAAI,aAAa,sBAAsB,IAAI;AAC7G,QAAM,kBAAkB,aAAa,sBAAsB,KAAK,IAAI,MAAM,YAAY,MAClF,aAAa,sBAAsB,CAAC,IAAI,MAAM,aAAa,sBAAsB,uBAAuB,IAAI,MAC5G,aAAa,sBAAsB,KAAK,IAAI,MAAM,YAAY,MAAM,aAAa,sBAAsB,CAAC,IAAI,MAC5G,aAAa,sBAAsB,wBAAwB;AAC/D,QAAM,WAAc,YAAQ,oBAAoB,YAAY;AAC5D,QAAM,mBAAmB,WAAWC,cAAa,QAAQ,KAAK;AAE9D,EAAAD,QACMC;mBACW,kCAAM;qDAC+B,yBAAqB;sEACP,eAAe;;;sBAG/D,SAAS;sBACT,aAAa,sBAAsB,CAAC,CAAC;;2BAEhC,aAAa,sBAAsB,uBAAuB,CAAC;mFACH,MAAM,SAAS;sBAC9D,qBAAO,mCAAmC,EAAE,MAAM,EAAC,OAAO,KAAI,CAAC,CAAC;kBAClF,aAAa,sBAAsB,aAAa,CAAC;;cAErD,gBAAgB;;WAEnB,MAAM;AAGjB;AAMM,IAAO,yBAAP,cAAyC,WAAO,OAAM;EACjD;EAET;EACA;EACA;EACA;;EAGA,uCACW,gBAAS,SAAS,SAAQ,EAAG,cAAc,8BAA8B,KAAK;;EAEzF,0CACW,gBAAS,SAAS,SAAQ,EAAG,cAAc,uCAAuC,KAAK;EAElG;;EAEA,YAAY,QAAsC,MAAW;AAC3D,UAAK;AACL,SAAK,wBAAuB;AAC5B,SAAK,YAAY,OAAO;AACxB,SAAK,QAAQ,QAAQ;AACrB,SAAK,iCAAiC,KAAK,0BAA0B,KAAK,IAAI;AAC9E,SAAK,yCAAyC,KAAK,kCAAkC,KAAK,IAAI;AAC9F,SAAK,aAAkB,aAAQ,WAAW,kBAAkB,0BACnD,aAAQ,2BAA2B;AAC5C,SAAK,cAAa;EACpB;EAEA,wBAAqB;AACnB,IAAU,mBAAS,SAAS,KAAK;MAC/B,SAAS,aAAa,sBAAsB,wCAAwC;MACpF,kBAAkB;QAChB,OAAO,aAAa,sBAAsB,MAAM;QAChD,SAAS,MAAK;AACZ,eAAQ,gBAAY,YAAY,SAAQ,EAAG,SAAS,WAAW;QACjE;;MAEF,UAAU;KACX;EACH;EAEA,MAAM,4BAAyB;AAC7B,UAAM,0BAA0B,MAAW,gBAAW,WAAW,yBAAwB;AACzF,QAAI,4BAA4B,KAAK,mBAAmB;AACtD,WAAK,oBAAoB;AACzB,WAAK,cAAa;IACpB;EACF;EAEA,oCAAiC;AAC/B,QAAI,KAAK,qCAAqC,IAAG,KAAM,KAAK,wCAAwC,IAAG,GAAI;AACzG,WAAK,OAAM;IACb;EACF;EAEA,WAAW,OAAM,UAA+B;AAC9C,UAAM,eAAc;AACpB,UAAM,SAAS,MAAM,UAAU,KAAK;MAClC,QAAQ,EAAC,UAAU,mBAAmB,MAAM,aAAa,sBAAsB,mBAAmB,EAAC;MACnG,eAAe;QACb;UACE,UAAU;UACV,SAAS,aAAa,sBAAsB,uCAAuC;;QAErF;UACE,UAAU;UACV,SAAS,KAAK,aAAa,aAAa,sBAAsB,iCAAiC,IACpE,aAAa,sBAAsB,wBAAwB;;QAExF;UACE,UAAU;;UAEV,SAASA;mBACA,wBAAwB;;oBAET,mBAAK,mDAAmD,EAAE,MAAM;YACpF,OAAO;WACR,CAAC;aACD,aAAa,sBAAsB,+BAA+B,CAAC;;;;MAI1E,kBAAkB,MAAK;AACrB,aAAQ,gBAAY,YAAY,SAAQ,EAAG,SAAS,WAAW;MACjE;MACA,WAAW,aAAa,sBAAsB,mBAAmB;MACjE,0BAA0B,aAAa,sBAAsB,SAAS;KACvE;AAED,QAAI,QAAQ;AACV,WAAK,qCAAqC,IAAI,IAAI;AAClD,WAAK,OAAM;IACb,OAAO;AACL,WAAK,cAAa;IACpB;EACF;EAEA,YAAY,CAAC,UAAsB;AACjC,UAAM,eAAc;AACpB,SAAK,wCAAwC,IAAI,IAAI;AACrD,SAAK,sBAAqB;AAC1B,SAAK,OAAM;EACb;EAES,gBAAa;AACpB,UAAM,SAAS,CAAA;AACf,SAAK,MACD;MACE,kBAAkB,KAAK;MACvB,UAAU,KAAK;MACf,WAAW,KAAK;OAElB,QAAQ,KAAK,cAAc;EACjC;EAES,WAAQ;AACf,UAAM,SAAQ;AACd,IAAK,gBAAW,kBAAkB,SAAQ,EAAG,iBAAgB,2BACP,KAAK,8BAA8B;AACzF,SAAK,qCAAqC,kBAAkB,KAAK,sCAAsC;AACvG,SAAK,wCAAwC,kBAAkB,KAAK,sCAAsC;AAC1G,SAAK,KAAK,0BAAyB;EACrC;EAES,WAAQ;AACf,UAAM,SAAQ;AACd,IAAK,gBAAW,kBAAkB,SAAQ,EAAG,oBAAmB,2BACV,KAAK,8BAA8B;AACzF,SAAK,qCAAqC,qBAAqB,KAAK,sCAAsC;AAC1G,SAAK,wCAAwC,qBAAqB,KAAK,sCAAsC;EAC/G;EAES,WAAQ;AACf,SAAK,UAAS;EAChB;;;;AI9QF,OAAO;AAEP,YAAYC,aAAY;AACxB,YAAYC,WAAU;AACtB,YAAYC,WAAU;AAEtB,YAAY,YAAY;AACxB,YAAY,cAAc;AAC1B,YAAYC,cAAa;AACzB,YAAYC,gBAAe;AAE3B,YAAY,eAAe;AAC3B,YAAY,YAAY;AACxB,YAAYC,SAAQ;AACpB,SAAQ,QAAAC,OAAM,UAAAC,eAAa;;;ACZ3B,IAAO,8BAAQ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAkGC,YAAY,QAAQ,uBAAuB,CAAC;;;ADlF5D,IAAMC,aAAY;;;;EAIhB,oBAAoB;;;;;EAKpB,QAAQ;;;;EAIR,QAAQ;;;;EAIR,oBAAoB;;;;EAIpB,wBAAwB;;;;EAIxB,aAAa;;;;EAIb,iBAAiB;;;;EAIjB,eAAe;;;;EAIf,mBACI;;;;;;;EAOJ,6BACI;;;;EAIJ,WAAW;;;;EAIX,yBAAyB;;;;EAIzB,eAAe;;;;EAIf,gBAAgB;;;;EAIhB,eAAe;;;;EAIf,cAAc;;AAGhB,IAAMC,QAAY,WAAK,kBAAkB,oCAAoCD,UAAS;AACtF,IAAME,cAAkB,WAAK,mBAAmB,KAAK,QAAWD,KAAI;AAEpE,IAAM,uBAAuB;AAC7B,IAAM,qBAAqB;AAC3B,IAAM,qBAAqB;AAC3B,IAAM,kBAAkB;AAYjB,IAAME,gBAAqB,CAAC,OAAO,SAAS,WAAgB;AAEjE,EAAAC,QACEC;eACW,2BAAM;;;;;;;;wCAQmBH,YAAWF,WAAU,kBAAkB,CAAC;wCACxCE,YAAWF,WAAU,sBAAsB,CAAC;;;;;;;;wCAQ5CE,YAAWF,WAAU,WAAW,CAAC;wCACjCE,YAAWF,WAAU,eAAe,CAAC;;;;uBAItD,MAAM,aAAa;4BACd,iBAAiB;qBACxBE,YAAWF,WAAU,WAAW,CAAC;4BAC1B,CAAC,MAAuC,MAAM,sBAAsB,EAAE,OAAO,CAAC;;;;;;;;;;wCAUlEE,YAAWF,WAAU,aAAa,CAAC;;qBAEtDE,YAAWF,WAAU,iBAAiB,CAAC;qBAChC,gCAAyBC,OAAMD,WAAU,6BAA6B;IAC5F,KAAQ,UAAM,MAAM,OAAO,oBAAoBE,YAAWF,WAAU,aAAa,GAAG,QAAQ,QAAW,gBAAgB;IACvH,KAAQ,UAAM,MAAM,OAAO,sBAAsBE,YAAWF,WAAU,cAAc,GAAG,QACrF,QAAW,kBAAkB;IAC/B,KAAQ,UAAM,MAAM,OAAO,oBAAoBE,YAAWF,WAAU,aAAa,GAAG,QAClF,QAAW,gBAAgB;GAC9B,CAAC;;;;;;;uBAOiBE,YAAWF,WAAU,uBAAuB,CAAC;mBACjDE,YAAWF,WAAU,uBAAuB,CAAC;qBAC3C,UAA+B;0BAC1B,YAAY;mBACnB,MAAgB,uBAAa,eAAkD,CAAC,IAAIE,YAAWF,WAAU,SAAS,CAAC;;;uBAG/G,OAA4B;4BACvB,QAAQ;qBACf,MAAM,aAAa,IAAIE,YAAWF,WAAU,MAAM,CAAC;;uBAEjD,SAA8B;4BACzB,SAAS;uBACd,MAAM,WAAW;wBAChB,MAAM,WAAW;qBACpB,MAAM,aAAa,IAAIE,YAAWF,WAAU,MAAM,CAAC;;;OAIpE,MAAM;AAGV;AAEM,IAAO,kBAAP,MAAO,yBAA2B,WAAO,KAAI;EACjD;EACA;EACA,iBAAiB;EACjB,eAAe;EACf;EACA;EAEA,YACI,SAKA,MAAW;AACb,UAAK;AACL,SAAK,UAAU,QAAQ;AACvB,SAAK,aAAa,QAAQ;AAC1B,SAAK,YAAY,QAAQ;AACzB,SAAK,QAAQ,QAAQG;AACrB,SAAK,cAAa;EACpB;EAEA,MAAM,iBAAc;AAClB,SAAK,eAAe;AACpB,SAAK,cAAa;AAElB,UAAM,WAAW,MAAM,IAAI,QACvB,aAAgB,4BAAsB,8BAA8B,mBAAmB,OAAO,CAAC;AACnG,UAAM,OAAO,SAAS,mBAAmB;AACzC,UAAM,kBACF,KAAK,iBAAsB,gBAAU,gBAAgB,UAAe,gBAAU,gBAAgB;AAClG,UAAM,SAAS,MAAW,gBAAU,UAAU,SAAQ,EAAG,cAAc,EAAC,MAAM,gBAAe,CAAC;AAC9F,QAAI,QAAQ;AACV,MAAO,iBAAS,SAAS,SAAQ,EAAG,cAAc,oBAAoB,EAAE,IAAI,IAAI;AAChF,YAAa,kBAAW,SAAQ,EAAG,WAAU;AAC7C,MAAO,kBAAW,SAAQ,EAAG,aAAoB,mBAAY,oBAAoB;AACjF,WAAK,aAAY;AACjB,WAAK,QAAQ,KAAI;IACnB,OAAO;AACL,MAAU,oBAAS,SAAS,KAAK,EAAC,SAASD,YAAWF,WAAU,YAAY,EAAC,GAAG,KAAK,QAAQ,cAAc;AAC3G,WAAK,eAAe;AACpB,WAAK,cAAa;IACpB;EACF;EAES,gBAAa;AACpB,UAAM,YAAY;MAChB,eAAe,KAAK,eAAe,KAAK,IAAI;MAC5C,eAAe,MAAK;AAClB,aAAK,QAAQ,KAAI;AACjB,aAAK,YAAW;MAClB;MACA,eAAe,KAAK;MACpB,uBAAuB,CAAC,UAAkB;AACxC,aAAK,iBAAiB;AACtB,aAAK,cAAa;MACpB;MACA,aAAa,KAAK;;AAGpB,SAAK,MAAM,WAAW,QAAW,KAAK,cAAc;EACtD;EAEA,OAAO,KAAK,EAAC,WAAW,SAAQ,IAAqD,CAAA,GAAE;AACrF,UAAMM,UAAS,IAAO,WAAO,OAAO,oBAAoB;AACxD,IAAAA,QAAO,aAAaJ,YAAWF,WAAU,kBAAkB,CAAC;AAC5D,IAAAM,QAAO,kBAAkB,IAAa,cAAK,KAAK,GAAG,CAAC;AACpD,IAAAA,QAAO;MAAe;;IAAA;AACtB,IAAAA,QAAO,UAAU,IAAI;AAErB,QAAI,iBAAgB,EAAC,QAAAA,SAAQ,WAAW,SAAQ,CAAC,EAAE,KAAKA,QAAO,cAAc;AAC7E,IAAAA,QAAO;MAAK;;MAAuB;IAAI;EACzC;;;;AEpQF,OAAO;AACP,OAAO;AAEP,YAAYC,WAAU;AACtB,YAAYC,WAAU;AACtB,YAAYC,WAAU;AACtB,YAAYC,SAAQ;AACpB,SAAQ,YAAY,QAAAC,OAAM,WAAAC,UAAS,UAAAC,eAAa;AAChD,YAAYC,oBAAmB;;;ACP/B,IAAO,yCAAQ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBA0DC,YAAY,QAAQ,kCAAkC,CAAC;;;AD/CvE,IAAMC,yBAAwB;;;;EAI5B,cAAc;;;;EAId,gBAAgB;;;;EAIhB,0CACI;;;;EAIJ,mDACI;;;;EAIJ,uBAAuB;;;;EAIvB,kBAAkB;;;;EAIlB,yBAAyB;;AAG3B,IAAMC,gBAAoB,WAAK;AAiBxB,IAAM,+BACT,CAAC,OAAO,QAAQ,WAAU;AACxB,MAAI,MAAM,qBAAgB,eAA0D,CAAC,MAAM,uBACvF,CAAC,MAAM,kBAAkB;AAC3B,IAAAC,QAAOC,UAAS,MAAM;AACtB;EACF;AAEJ,EAAAD,QACEE;iBACa,sCAAM;;oBAEH,KAAK;YACb,WAAW,IAAI,QAAK;AACpB,QAAI,cAAc,aAAa;AAC7B,aAAO,aAAa,CAAC,cAAsB;AACzC,WAAG,gBAAgB,UAAU,SAAS;MACxC;IACF;EACF,CAAC,CAAC;yBACa,MAAM,gBAAgB;6BAClB,MAAM,gBAAgB;;mBAEhC,MAAM,gBAAgB;;;;cAI3BH,cAAaD,uBAAsB,qBAAqB,CAAC;;;;;;sBAMnC,oBAAK,kBAAkB,EAAE,MAAM;IACnD,OAAO;GACR,CAAC;6BACa,MAAM,mBAAmB;iCACrB,MAAM,mBAAmB;uBACnC,MAAK;AACZ,SAAQ,gBAAY,YAAY,SAAQ,EAAG,SAAS,WAAW;EACjE,CAAC;aACFC,cAAaD,uBAAsB,YAAY,CAAC,UAAUC,cAAaD,uBAAsB,cAAc,CAAC;;mBAEtG,MAAM,mBAAmB;;;gBAG5B,WAAW,IAAI,QAAK;AACpB,QAAI,cAAc,aAAa;AAC7B,aAAO,cAAc,MAAK;AACxB,WAAG,YAAW;MAChB;IACF;EACF,CAAC,CAAC;;kBAEE,MAAM,YAAYC,cAAaD,uBAAsB,iDAAiD,IAAIC,cAAaD,uBAAsB,wCAAwC,CAAC;;;;;;4BAM9J,oBAAK,kBAAkB,EAAE,MAAM;IACnD,OAAO;GACR,CAAC;6BACO,MAAM,8BAA8B;mBAC9CC,cAAaD,uBAAsB,gBAAgB,CAAC;;WAE5D,MAAM;AAEb;AAEJ,IAAM,gCAAgC;AAEhC,IAAO,6BAAP,cAA6C,WAAO,OAAM;EACrD;EACT,cAA0B,CAAA;EAE1B;EACA;EACA;;EACA,WAAW;EACX,oBAAoB;EACpB;EAEA;EACA;EAEA,YAAY,SAAuB,OAAa,8BAA4B;AAC1E,UAAM,OAAO;AACb,SAAK,wBAAuB;AAC5B,SAAK,aAAkB,cAAQ,WAAW,kBAAkB,0BACnD,cAAQ,2BAA2B;AAC5C,SAAK,iCAAiC,KAAK,0BAA0B,KAAK,IAAI;AAC9E,SAAK,QAAQ;EACf;EAEA,IAAI,oBAAoB,qBAA2B;AACjD,SAAK,uBAAuB;AAC5B,SAAK,cAAa;EACpB;EAEA,IAAI,iBAAiB,kBAAwB;AAC3C,SAAK,oBAAoB;AACzB,SAAK,cAAa;EACpB;EAEA,IAAI,QAAQ,SAAgB;AAC1B,QAAI,CAAC,WAAW,CAAC,KAAK,UAAU;AAC9B;IACF;AAEA,QAAI,SAAS;AACX,UAAI,CAAC,KAAK,UAAU;AAClB,aAAK,YAAY,aAAa,IAAI;AAClC,QAAG,cAAU,cAAc,OAAOC,cAAaD,uBAAsB,uBAAuB,CAAC;MAC/F;AACA,UAAI,KAAK,wBAAwB;AAC/B,qBAAa,KAAK,sBAAsB;AACxC,aAAK,yBAAyB;MAChC;AACA,WAAK,oBAAoB,YAAY,IAAG;AACxC,WAAK,WAAW;IAClB,OAAO;AACL,WAAK,WAAW;AAChB,YAAM,WAAW,YAAY,IAAG,IAAK,KAAK;AAC1C,YAAM,gBAAgB,KAAK,IAAI,gCAAgC,UAAU,CAAC;AAC1E,WAAK,yBAAyB,OAAO,WAAW,MAAK;AACnD,aAAK,YAAY,aAAa,KAAK;AACnC,aAAK,yBAAyB;MAChC,GAAG,aAAa;IAClB;EACF;EAEA,MAAM,4BAAyB;AAC7B,UAAM,0BAA0B,MAAW,iBAAW,WAAW,yBAAwB;AACzF,QAAI,4BAA4B,KAAK,mBAAmB;AACtD,WAAK,oBAAoB;AACzB,WAAK,cAAa;IACpB;EACF;EAEA,kCAA+B;AAC7B,SAAK,YAAY,cAAa;AAC9B,SAAQ,gBAAY,YAAY,SAAQ,EAAG,SAAS,WAAW;EACjE;EAES,gBAAa;AACpB,SAAK,MACD;MACE,qBAAqB,KAAK;MAC1B,kBAAkB,KAAK;MACvB,WAAW,KAAK;MAChB,kBAAkB,KAAK;MACvB,gCAAgC,KAAK,gCAAgC,KAAK,IAAI;OAEhF,KAAK,aAAa,KAAK,cAAc;EAC3C;EAES,WAAQ;AACf,UAAM,SAAQ;AACd,IAAK,iBAAW,kBAAkB,SAAQ,EAAG,iBAAgB,2BACP,KAAK,8BAA8B;AACzF,SAAK,KAAK,0BAAyB;EACrC;EAES,WAAQ;AACf,UAAM,SAAQ;AACd,IAAK,iBAAW,kBAAkB,SAAQ,EAAG,oBAAmB,2BACV,KAAK,8BAA8B;EAC3F;;;;AEtOF,OAAO;AACP,OAAO;AAEP,YAAYK,WAAU;AACtB,YAAYC,WAAU;AACtB,YAAYC,SAAQ;AACpB,SAAQ,cAAAC,aAAY,QAAAC,OAAM,WAAAC,UAAS,UAAAC,eAAa;AAChD,YAAYC,oBAAmB;;;ACN/B,IAAO,6CAAQ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAsGC,YAAY,QAAQ,sCAAsC,CAAC;;;AD3F3E,IAAMC,yBAAwB;;;;EAI5B,qCAAqC;;;;EAIrC,aAAa;;AAGf,IAAMC,gBAAoB,WAAK;AAqBxB,IAAMC,gCAAqC,CAAC,OAAO,SAAS,WAAU;AAC3E,MAAI,MAAM,qBAAgB,aAAwD;AAChF,IAAAC,QAAOC,UAAS,MAAM;AACtB;EACF;AACA,QAAM,iBAAiBC,YAAW,SAAS;IACzC,sCAAsC;IACtC,kBAAkB,QAAQ,MAAM,mBAAmB;IACnD,yBAAyB,QAAQ,MAAM,aAAa,MAAM,UAAU,OAAO,CAAC;IAC5E,kBAAkB,MAAM;GACzB;AAGD,QAAM,aAAa,MAAM,uBAAuB,MAAM,mBACpDC;4BAC2B,WAAO,aAAa,4BAA4B;IACzE,qBAAqB,MAAM;IAC3B,kBAAkB,MAAM;IACxB,SAAS,MAAM;GAChB,CAAC,kDAAkDF;AAEtD,QAAM,mBAAmB,MAAM,aAAa,MAAM,UAAU,OAAO,IACjEE;kBACcL,cAAaD,uBAAsB,mCAAmC,CAAC;;;mCAGtD,MAAM,kBAAkB;uCACpB,MAAM,kBAAkB;;oBAE3CC,cAAaD,uBAAsB,WAAW,CAAC,SAASC,cAAa,MAAM,MAAM,UAAU,OAAO,GAAG,CAAC;;;yBAGjG,MAAM,kBAAkB;;;;sBAI3BI,YAAW,OAAO,MAAM,WAAW,cAAYC;;+BAEtC,QAAQ;gCACO,oBAAK,4CAA4C,EAAE,MAAM;IACjG,OAAO;GACR,CAAC,IAAI,QAAQ,WAAW,CAAC;sBACRF;AAEpB,EAAAD,QACEG;iBACa,0CAAM;qBACF,cAAc;YACvB,UAAU;YACV,gBAAgB;;WAEjB,MAAM;AAEjB;AAEM,IAAO,iCAAP,cAAiD,WAAO,OAAM;EACzD;EAET;EACA;EACA;EACA,aAAa,oBAAI,IAAG;EACpB,WAAW;EACX,gBAAgB;EAEhB;EACA;EAEA,YAAY,OAA4C,MAAW;AACjE,UAAK;AACL,SAAK,uBAAuB,MAAM;AAClC,SAAK,oBAAoB,MAAM;AAC/B,SAAK,sBAAsB,MAAM;AACjC,SAAK,gBAAgB,MAAM,gBAAgB;AAC3C,SAAK,iCAAiC,KAAK,0BAA0B,KAAK,IAAI;AAC9E,SAAK,QAAQ,QAAQJ;AACrB,SAAK,cAAa;EACpB;EAEA,MAAM,4BAAyB;AAC7B,UAAM,0BAA0B,MAAW,iBAAW,WAAW,yBAAwB;AACzF,QAAI,4BAA4B,KAAK,mBAAmB;AACtD,WAAK,oBAAoB;AACzB,WAAK,cAAa;IACpB;EACF;EAEA,WAAW,SAAgB;AACzB,SAAK,WAAW;AAChB,SAAK,cAAa;EACpB;EAEA,gBAAgB,WAAmB;AACjC,cAAU,QAAQ,cAAY,KAAK,WAAW,IAAI,QAAQ,CAAC;AAC3D,SAAK,cAAa;EACpB;EAEA,iBAAc;AACZ,SAAK,WAAW,MAAK;AACrB,SAAK,cAAa;EACpB;EAES,gBAAa;AACpB,SAAK,MACD;MACE,qBAAqB,KAAK;MAC1B,kBAAkB,KAAK;MACvB,WAAW,KAAK;MAChB,oBAAoB,KAAK;MACzB,SAAS,KAAK;MACd,cAAc,KAAK;MACnB,kBAAkB,KAAK;OAEzB,QAAW,KAAK,cAAc;EACpC;EAES,WAAQ;AACf,UAAM,SAAQ;AACd,IAAK,iBAAW,kBAAkB,SAAQ,EAAG,iBAAgB,2BACP,KAAK,8BAA8B;AACzF,SAAK,KAAK,0BAAyB;EACrC;EAES,WAAQ;AACf,UAAM,SAAQ;AACd,IAAK,iBAAW,kBAAkB,SAAQ,EAAG,oBAAmB,2BACV,KAAK,8BAA8B;EAC3F;;;;AE3KF,YAAYK,aAAY;AACxB,YAAYC,WAAU;AACtB,YAAYC,YAAU;AACtB,YAAYC,aAAY;AACxB,YAAYC,cAAa;AACzB,YAAYC,gBAAe;AAC3B,YAAYC,aAAY;AACxB,YAAYC,SAAQ;AACpB,YAAYC,UAAS;AACrB,YAAYC,oBAAmB;;;ACR/B,IAAO,gCAAQ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBA8FC,YAAY,QAAQ,yBAAyB,CAAC;;;ADjF9D,IAAM,EAAC,MAAAC,OAAM,QAAAC,QAAM,IAAIC;AAEvB,IAAMC,aAAY;;;;EAIhB,OAAO;;;;;EAKP,gCAAgC;;;;EAIhC,gBAAgB;;;;EAIhB,aAAa;;;;;;EAMb,yCAAyC;;;;;;EAMzC,sCACI;;;;EAIJ,eAAe;;;;EAIf,eAAe;;;;EAIf,eAAe;;AAGjB,IAAMC,QAAY,YAAK,kBAAkB,sCAAsCD,UAAS;AACxF,IAAME,cAAkB,YAAK,mBAAmB,KAAK,QAAWD,KAAI;AACpE,IAAM,mBAA0B,iCAAyB,KAAK,QAAWA,KAAI;AAC7E,IAAME,gBAAoB,YAAK;AAE/B,IAAM,cAAc;AACpB,IAAM,gBAAgB;AACtB,IAAM,wBAAwB;AAsB9B,IAAMC,gBAAe,CAAC,OAAkB,SAAoB,WAA6B;AACvF,QAAM,gBAAgB,MAAM,QAAQ,IAAI,cAAW;AACjD,WAAOP;;iBAEM,MAAM,SAAS,QAAO,CAAE;gBACX,sBAAO,SAAS,YAAY,EAAE,MAAM,EAAC,OAAO,KAAI,CAAC,CAAC;mBAC7D,MAA2B;iBAC7B,SAAS,SAAS,EAAE;6BACR,IAAI;OAC1B,SAAS,KAAK;EACnB,CAAC;AAED,QAAM,cAAcA;;iBAEL,MAAM,cAAc;gBACP,sBAAO,4BAA4B,EAAE,MAAM,EAAC,OAAO,KAAI,CAAC,CAAC;qBAClEK,YAAWF,WAAU,KAAK,CAAC;oBAC5B,OAAO;mBACR,MAA2B;iBAC7BE,YAAWF,WAAU,KAAK,CAAC;6BACf,IAAI;;AAG/B,EAAAF,QAAOD;aACI,6BAAuB;mCACa,sBAAO,oBAAoB,CAAC;2CACpB,oBAAK,MAAM,YAAY,CAAC;2DACtB,MAAM,QAAQ;;;;mCAItC,MAAM,OAAO;cAClC,WAAW;;6CAEoB,aAAa;;;KAGrD,MAAM;AACX;AAKA,SAAS,sBAAmB;AAC1B,OAAY,iBAAS,OAAc,iBAAS,cAAc,oBAAoB,CAAC;AACjF;AAEM,IAAO,oBAAP,cAAoC,WAAO,OAAM;EACrD,eAAe;EACf,UAA8B;EAC9B,WAAW;EACX,UAAqC,CAAA;EACrC,iBAAiB;EAEjB;EACA;EACA,YAAY,SAAuB,OAAaO,eAAY;AAC1D,UAAM,OAAO;AACb,SAAK,QAAQ;AAGb,SAAK,eAAe,OAAO;AAC3B,SAAK,WAAU;EACjB;EAEA,MAAM,QAAQ,OAAmB;AAC/B,QAAI,MAAM,gBAAgB;AACxB,YAAM,KAAK,qBAAqB,KAAK;IACvC,OAAO;AACL,WAAK,2BAA2B,KAAK;IACvC;EACF;EAEA,wBAAqB;AACnB,UAAM,eAAe,KAAK,eAAe,sBAAqB;AAC9D,UAAM,YAAe,YAAQ,2BAA0B;AACvD,SAAK,eAAe,WAChB,aAAa,UAAU,eAAe,aAAa,SAAS,eAAe,SAAS;EAC1F;EAEA,MAAM,YAAuC;AAC3C,SAAK,UAAU,WAAW;AAC1B,SAAK,WAAW,WAAW;AAC3B,SAAK,UAAU,WAAW;AAC1B,SAAK,iBAAiB,WAAW;AACjC,SAAK,eAAe,WAAW;AAC/B,SAAK,cAAa;AAClB,SAAK,KAAK,SAAS,IAAI;AAEvB,SAAK,KAAK,eAAe,KAAK,MAAK;AACjC,WAAK,sBAAqB;IAC5B,CAAC;AAED,QAAI,KAAK,mBAAmB;AAC1B,aAAO,aAAa,KAAK,iBAAiB;IAC5C;AACA,SAAK,oBAAoB,OAAO,WAAW,KAAK,cAAc,qBAAqB;EACrF;EAEA,MAAM,qBAAqB,OAAmB;AAC5C,UAAM,qBAAqB,MAAW,gBAAU,UAAU,SAAQ,EAAG,WAAU;AAG/E,QAAI,CAAC,oBAAoB;AACvB;IACF;AAEA,UAAM,gBAAgB,QAAQ,mBAAmB,OAAO;AACxD,UAAM,8BAAqC,mBAAW,SAAQ,EAAG,8BAA6B;AAC9F,UAAM,6BAAgC,UAAM,MAAM,OAC9C,yCAAyCD,cAAa,0BAA0B,GAAG,cAAc,QACjG,cAAc;AAIlB,QAAI,iBAAiB,6BAA6B;AAChD,WAAK,2BAA2B,KAAK;AACrC;IACF;AAIA,QAAI,iBAAiB,CAAC,6BAA6B;AACjD,WAAK,MAAM;QACT,SAAS,iBACLH,WAAU,yCAAyC,EAAC,KAAK,MAAM,OAAO,KAAK,2BAA0B,CAAC;QAC1G,cAAc,MAAM;QACpB,SAAS;UACP;YACE,OAAOE,YAAWF,WAAU,aAAa;YACzC,cAAc;YACd,SAAS,MAAK;AACZ,mBAAK,OAAM;AACX,cAAO,mBAAW,SAAQ,EAAG,mBAAkB;YACjD;;UAEF;YACE,OAAOE,YAAWF,WAAU,aAAa;YACzC,cAAc;YACd,SAAS,MAAK;AACZ,mBAAK,OAAM;AACX,kCAAmB;YACrB;;;QAGJ,UAAU,MAAM;QAChB,gBAAgB;OACjB;AACD;IACF;AAGA,SAAK,MAAM;MACT,SAAS,iBACLA,WAAU,sCAAsC,EAAC,KAAK,MAAM,OAAO,KAAK,2BAA0B,CAAC;MACvG,cAAc,MAAM;MACpB,SAAS;QACP;UACE,OAAOE,YAAWF,WAAU,aAAa;UACzC,cAAc;UACd,SAAS,MAAK;AACZ,iBAAK,OAAM;AACX,YAAO,mBAAW,SAAQ,EAAG,mBAAkB;UACjD;;QAEF;UACE,OAAOE,YAAWF,WAAU,aAAa;UACzC,cAAc;UACd,SAAS,MAAK;AACZ,iBAAK,OAAM;AACX,YAAgB,gBAAgB,KAAK;;cAEnC,UAAU,MAAa,mBAAW,SAAQ,EAAG,mBAAkB;aAChE;UACH;;;MAGJ,UAAU,MAAM;MAChB,gBAAgB;KACjB;EACH;EAEA,2BAA2B,OAAmB;AAC5C,SAAK,MAAM;MACT,SAASE,YAAWF,WAAU,gCAAgC,EAAC,KAAK,MAAM,MAAK,CAAC;MAChF,cAAc,MAAM;MACpB,SAAS;QACP;UACE,OAAOE,YAAWF,WAAU,cAAc;UAC1C,cAAc;UACd,SAAS,MAAK;AACZ,iBAAK,OAAM;AACX,gCAAmB;UACrB;;QAEF;UACE,OAAOE,YAAWF,WAAU,WAAW;UACvC,cAAc;UACd,SAAS,MAAK;AACZ,YAAU,wBAAkB,gBAAU,qCAAqC;UAC7E;;;MAGJ,UAAU,MAAM;MAChB,gBAAgB,MAAM;KACvB;EACH;EAES,WAAQ;AACf,WAAO,aAAa,KAAK,iBAAiB;EAC5C;EAEA,kBAAkB,MAAW;AAC3B,SAAK,OAAM;AAEX,QAAI,KAAK,gBAAgB;AACvB,MAAO,mBAAW,SAAQ,EAAG,oBAAmB;IAClD;EACF;EAEA,eAAe,MAAW;AACxB,SAAK,OAAM;AAEX,QAAI,KAAK,gBAAgB;AACvB,MAAO,mBAAW,SAAQ,EAAG,mBAAkB;IACjD;EACF;EAES,WAAQ;AACf,UAAM,SAAQ;AACd,SAAK,cAAa;EACpB;EAES,gBAAa;AACpB,UAAM,YAAuB;MAC3B,SAAS,KAAK;MACd,UAAU,KAAK;MACf,SAAS,KAAK;MACd,gBAAgB,KAAK;MACrB,gBAAgB,KAAK;MACrB,cAAc,KAAK;;AAErB,SAAK,MAAM,WAAW,QAAW,KAAK,cAAc;EACtD;;;;AEjVF;;;;;;AAKA,YAAYK,eAAc;AAE1B,YAAY,SAAS;AACrB,YAAY,gBAAgB;AAC5B,YAAYC,SAAQ;;;ACTpB;;;;;AAIA,YAAYC,SAAQ;AACpB,YAAYC,UAAS;AAIrB,IAAM,EAAC,QAAAC,SAAQ,MAAAC,OAAM,YAAY,EAAC,IAAG,EAAC,IAAIF;AAY1C,IAAMG,gBAAe,CAAC,OAAkB,QAAoB,WAA6B;AAEvF,EAAAF,QAAOC;MACH,IAAI,aAAU;AAAE,WAAO,SAAS;EAA8B,CAAC,CAAC;UAC5D,MAAM,GAAG;YACP,MAAM,SAAS;YACf,MAAM,MAAM,cAAc,MAAM;AAE5C;AAEM,IAAO,gBAAP,cAAgC,WAAO,OAAM;EACjD;EACA;EACA;EACA;EAEA;EACA;EAEA;EACA,YAAY,QAAyB,IAAY,KAAa,WAAmB,OAAOC,eAAY;AAClG,UAAK;AACL,SAAK,QAAQ;AACb,SAAK,UAAU;AACf,SAAK,OAAO;AACZ,SAAK,aAAa;AAClB,SAAK,MAAM;AACX,SAAK,gBAAe;AACpB,SAAK,KAAK,cAAa;EACzB;EAES,gBAAa;AACpB,UAAM,SAAqB,CAAA;AAC3B,SAAK,MACD;MACE,KAAK,KAAK;MACV,WAAW,KAAK;MAChB,QAAQ,KAAK,OAAO,KAAK,IAAI;OAE/B,QAAQ,KAAK,OAAO;AACxB,QAAI,OAAO,QAAQ;AACjB,WAAK,UAAU,OAAO;IACxB;EACF;EAES,WAAQ;AACf,UAAM,SAAQ;AACd,QAAI,OAAO,KAAK,gBAAgB,UAAU;AACxC,WAAK,QAAQ,gBAAgB,KAAK,KAAK,KAAK,WAAW;IACzD;EACF;EAES,WAAQ;AACf,UAAM,SAAQ;AACd,QAAI,OAAO,KAAK,gBAAgB,UAAU;AACxC,WAAK,QAAQ,iBAAiB,KAAK,GAAG;IACxC;EACF;EAEQ,SAAM;AACZ,QAAI,CAAC,KAAK,SAAS;AACjB;IACF;AACA,UAAM,SAAS,OAAO;AACtB,SAAK,cAAc,MAAM,UAAU,QAAQ,KAAK,QAAQ,KAAK,QAAQ,aAAa;AAClF,QAAI,KAAK,UAAS,GAAI;AACpB,WAAK,QAAQ,gBAAgB,KAAK,KAAK,KAAK,WAAW;IACzD;EACF;;AAGI,IAAO,wBAAP,cAAwC,WAAO,KAAI;EACtC;EACA;EACjB,YAAY,QAAyB,IAAU;AAC7C,UAAK;AAEL,SAAK,SAAS;AACd,SAAK,KAAK;EACZ;EAES,WAAQ;AACf,UAAM,SAAQ;AACd,SAAK,OAAO,gBAAgB,KAAK,EAAE;EACrC;EAES,WAAQ;AACf,UAAM,SAAQ;AACd,SAAK,OAAO,iBAAiB,KAAK,EAAE;EACtC;;;;ADhGI,IAAO,iBAAP,cAAiC,UAAM,MAAK;EAC/B;EACA;EACA;EACR;EAET,YAAY,QAAyB,WAAmB,IAAY,SAAe;AACjF,UAAM,SAAS;AACf,SAAK,SAAS;AACd,SAAK,KAAK;AACV,SAAK,gBAAe;AACpB,SAAK,eAAe,KAAK,QAAQ,YAAY,oBAAoB,QAAQ;AAEzE,SAAK,kBAAkB,IAAO,mBAAe,eAAe,MAAM,IAAI;AACtE,SAAK,gBAAgB,KAAK,KAAK,OAAO;AAEtC,UAAM,gBAAgB,IAAI,cAAc,QAAQ,KAAK,IAAI,SAAS,WAAW;AAC7E,kBAAc,KAAK,KAAK,gBAAgB,OAAO;EACjD;EAEA,eAAeC,OAA4B;AACzC,SAAK,aAAa,UAAU,OAAO,QAAQ;AAC3C,SAAK,aAAa,kBAAkBA,KAAI;EAC1C;EAEA,mBAAgB;AACd,SAAK,OAAO;MAAmB,KAAK;MAAE;;IAAA;AACtC,SAAK,gBAAgB,yBAAyB,CAAC;EACjD;EAES,iBAAc;AACrB,WAAO,KAAK;EACd;EAEA,cAAc,cAA8C,aAAsB,gBAAwB;AACxG,UAAM,QAAQ,aAAa;AAC3B,SAAK,OAAO,mBACR,KAAK,IAAE,iBAAwE,KAAK;EAC1F;EAEA,yBAAsB;AACpB,SAAK,OAAO;MAAmB,KAAK;MAAE;;IAAA;EACxC;EAEA,6BAA0B;AACxB,SAAK,OAAO;MACR,KAAK;MAAE;;IAAA;EACb;EAEA,8BAA2B;AACzB,WAAO;EACT;EAEA,0BAAuB;AACrB,WAAO;EACT;EAEA,sBAAmB;AACjB,WAAO;EACT;;AAGI,IAAO,kBAAP,MAAsB;EACT;EACR;EACT,YAAY,QAAyB,IAAY,SAAiB,SAAkB,UAAkB;AACpG,SAAK,KAAK;AAEV,SAAK,iBAAiB,IAAO,YAAQ,cAAc,IAAI,EAAE;AACzD,SAAK,eAAe,iBAAgB,SACO,OAAO,oBAAoB,KAAK,QAAQ,KAAK,EAAE,CAAC;AAC3F,SAAK,OAAO,SAAS,SAAS,QAAQ;EACxC;EAEA,OAAO,SAAkB,SAAkB,UAAkB;AAC3D,QAAI,OAAO,YAAY,UAAU;AAC/B,WAAK,eAAe,mBAAmB,OAAO;IAChD;AACA,QAAI,OAAO,YAAY,UAAU;AAC/B,WAAK,eAAe,SAAS,OAAO;IACtC;AACA,QAAI,OAAO,aAAa,WAAW;AACjC,WAAK,eAAe,WAAW,CAAC,QAAQ;IAC1C;EACF;EAEA,gBAAa;AACX,WAAO,KAAK;EACd;;AAGI,IAAO,uBAAP,cAAuC,SAAK,WAAU;EACjD;EACD;EACR;EACQ;EACA;EACR,YAAY,QAAyB,WAAmB,OAA0C,IAAU;AAG1G,UAAM,SAAkB,0BAAgB,YAAY,KAAK;AACzD,UAAM,EAAC,OAAO,OAAM,CAAC;AACrB,SAAK,QAAQ,UAAU,IAAI,MAAM;AACjC,SAAK,aAAa;AAClB,SAAK,SAAS;AACd,SAAK,MAAM;EACb;EAEA,KAAE;AACA,WAAO,KAAK;EACd;EAEA,YAAS;AACP,WAAO,KAAK;EACd;EAEA,UAAU,QAAgB,OAAyB,UAAkD;AACnG,SAAK,2BAA0B;AAC/B,SAAK,WAAe,iBAAa,aAAa,gBAAgB,MAAM,GAAG,OAAO,QAAQ;EACxF;EAEA,cACI,YAAoB,OAAyB,iBAAmC,gBAChF,UAAkD;AACpD,SAAK,2BAA0B;AAC/B,SAAK,OAAO,SACR,YAAY,MAAM,OAAO,iBAAiB,gBAAgB,KAAK,WAAW,KAAK,MAAM,OAAO,QAAQ,CAAC;EAC3G;EAEA,QAAQ,KAAoC;AAC1C,QAAI,KAAK,sBAAsB;AAC7B,WAAK,qBAAqB,OAAM;AAChC,aAAO,KAAK;IACd;AACA,QAAI,KAAK,eAAe;AACtB,WAAK,cAAc,OAAO,IAAI;IAChC;AAEA,SAAK,gBAAgB,IAAI,cAAc,KAAK,QAAQ,KAAK,KAAK,KAAK,gBAAgB;AACnF,SAAK,cAAc,KAAK,KAAK,OAAO;AAEpC,QAAI,CAAC,KAAK,QAAQ,MAAM,QAAQ;AAC9B,WAAK,UAAU,OAAO;IACxB;EACF;EAEA,UAAU,QAAc;AACtB,SAAK,QAAQ,MAAM,SAAS;EAC9B;EAEQ,WACJ,OAAyB,UAAoD,OAC7E,QAA4C,YAAoB;AAClE,QAAI,OAAO;AACT,eAAS,MAAM,SAAQ,CAAE;IAC3B,WAAW,CAAC,QAAQ;AAClB,eAAQ;IACV,OAAO;AACL,WAAK,WAAW,QAAQ,OAAO,QAAQ;IACzC;EACF;EAEQ,6BAA0B;AAChC,QAAI,KAAK,sBAAsB;AAC7B;IACF;AACA,QAAI,KAAK,eAAe;AACtB,WAAK,cAAc,OAAO,IAAI;AAC9B,aAAO,KAAK;IACd;AACA,SAAK,uBAAuB,IAAI,sBAAsB,KAAK,QAAQ,KAAK,GAAG;AAC3E,SAAK,qBAAqB,KAAK,KAAK,OAAO;EAC7C;EAEA,WACI,QAAuC,OACvC,UAAkD;AACpD,UAAM,uBAAuB,KAAK;AAElC,QAAI,CAAC,sBAAsB;AACzB,eAAS,qBAAqB;AAC9B;IACF;AACA,yBAAqB,QAAQ,eAAc;AAC3C,SAAQ,YAAQ,SAAS,OAAO,QAAQ,EAAC,OAAO,UAAU,OAAO,QAAQ,KAAI,CAAC,EAAE,KAAK,YAAS;AAC5F,UAAI,CAAC,QAAQ;AACX,iBAAQ;AACR;MACF;AACA,2BAAqB,QAAQ,YAAY,OAAO,OAAO;AACvD,eAAQ;IACV,CAAC;EACH;;;;AE9MF;;;;;;;AASA,YAAYC,aAAY;AACxB,YAAYC,WAAU;AACtB,YAAYC,YAAU;AACtB,YAAYC,eAAc;AAE1B,YAAYC,UAAS;AAErB,YAAY,cAAc;AAC1B,YAAYC,iBAAgB;AAC5B,YAAY,SAAS;AACrB,YAAY,UAAU;AACtB,YAAY,eAAe;AAC3B,YAAY,eAAe;AAC3B,YAAY,gBAAgB;AAC5B,YAAYC,SAAQ;AACpB,YAAY,kBAAkB;AAI9B,IAAM,mBAAmB,oBAAI,QAAO;AACpC,IAAM,oBAAoB,CAAC,SAAS,UAAU,SAAS,SAAS,qBAAqB,QAAQ;AAQ7F,IAAI;AAEE,IAAO,cAAP,MAAO,aAAW;EAuBT;EACA;EAvBb,OAAO,OAAO,QAA2D;AACvE,UAAM,sBAAsB,CAAA;AAC5B,UAAM,sBAAsB,CAAA;AAC5B,QAAI,QAAQ;AACV,iBAAW,WAAW,OAAO,qBAAqB;AAChD,cAAM,gBAA2B,2BAAe,eAAe,MAAM,OAAO;AAC5E,YAAI,CAAC,eAAe;AAClB,iBAAO;QACT;AACA,4BAAoB,KAAK,aAAa;MACxC;AACA,iBAAW,WAAW,OAAO,qBAAqB;AAChD,cAAM,gBAA2B,2BAAe,eAAe,MAAM,OAAO;AAC5E,YAAI,CAAC,eAAe;AAClB,iBAAO;QACT;AACA,4BAAoB,KAAK,aAAa;MACxC;IACF;AACA,WAAO,IAAI,aAAY,qBAAqB,mBAAmB;EACjE;EACA,YACa,qBACA,qBAA+D;AAD/D,SAAA,sBAAA;AACA,SAAA,sBAAA;EACb;EAEA,eAAe,cAA8C;AAC3D,QAAI,CAAC,cAAc;AAEjB,aAAO,KAAK,oBAAoB,WAAW;IAC7C;AACA,QAAI,KAAK,oBAAoB,KAAK,aAAW,QAAQ,WAAW,YAAY,CAAC,KACzE,CAAC,KAAK,oBAAoB,KAAK,aAAW,QAAQ,WAAW,YAAY,CAAC,GAAG;AAC/E,aAAO;IACT;AACA,WAAO;EACT;;AAGF,IAAM,sBAAN,MAAyB;EAEF;EAAuB;EAAmC;EAD/E,qBAAkC;EAClC,YAAqB,MAAuB,aAAmC,iBAAwB;AAAlF,SAAA,OAAA;AAAuB,SAAA,cAAA;AAAmC,SAAA,kBAAA;EAC/E;EAEA,kBAAkB,cAA8C;AAC9D,QAAI,CAAC,cAAc;AACjB,qBAAmB,mBAAc,cAAc,SAAQ,EAAG,kBAAiB,GAAI,aAAY;IAC7F;AAEA,QAAI,CAAC,cAAc;AACjB,aAAO;IACT;AAEA,QAAI,KAAK,sBAAsB,aAAa,WAAW,KAAK,kBAAkB,GAAG;AAC/E,aAAO;IACT;AAEA,QAAI,CAAC,gBAAgB,cAAc,YAAY,GAAG;AAChD,aAAO;IACT;AAEA,QAAI,CAAC,KAAK,YAAY,eAAe,YAAY,GAAG;AAClD,aAAO;IACT;AAEA,QAAI,CAAC,KAAK,iBAAiB;AACzB,UAAI;AACJ,UAAI;AACF,oBAAY,IAAI,IAAI,YAAY;MAClC,QAAQ;AACN,eAAO;MACT;AACA,aAAO,UAAU,aAAa;IAChC;AAEA,WAAO;EACT;;AAGI,IAAO,iCAAP,MAAqC;EACpB;EAArB,YAAqB,QAAwB;AAAxB,SAAA,SAAA;EACrB;;AAGI,IAAO,kBAAP,MAAO,yBAA+B,sBAAc,cAAyB;EAChE;EACA;EAGA;EACA;EACA;EACA;EACT;EACS;EACT;EACA;EACA;EACC;EACD;EACA;EACS;EACT,sBAAsB,oBAAI,IAAG;EAC5B,qBAA0E,CAAA;EAEnF,cAAA;AACE,UAAK;AACL,SAAK,gBAAgB,oBAAI,IAAG;AAC5B,SAAK,WAAW,oBAAI,IAAG;AACvB,SAAK,cAAc,oBAAI,IAAG;AAC1B,SAAK,4BAA4B,oBAAI,IAAG;AACxC,SAAK,2BAA2B,oBAAI,IAAG;AACvC,SAAK,eAAe,oBAAI,IAAG;AAC3B,SAAK,WAAW,oBAAI,IAAG;AACvB,SAAK,aAAa,oBAAI,IAAG;AACzB,SAAK,gBAAgB;AACrB,SAAK,uBAAuB,oBAAI,IAAG;AACnC,SAAK,SAAS,IAAI,gBAAe;AACjC,SAAK,gBAAgB,CAAA;AAErB,SAAK,oBAAoB;AAEzB,SAAK,gBAAe,qBAC+C,KAAK,oBAAoB,KAAK,IAAI,CAAC;AACtG,SAAK,gBAAe,eAA0D,KAAK,cAAc,KAAK,IAAI,CAAC;AAC3G,SAAK,gBAAe,qBAC+C,KAAK,oBAAoB,KAAK,IAAI,CAAC;AACtG,SAAK,gBAAe,uBACiD,KAAK,sBAAsB,KAAK,IAAI,CAAC;AAC1G,SAAK,gBAAe,2BACqD,KAAK,0BAA0B,KAAK,IAAI,CAAC;AAClH,SAAK,gBAAe,yBACkD,KAAK,uBAAuB,KAAK,IAAI,CAAC;AAC5G,SAAK,gBAAe,UAAqD,KAAK,SAAS,KAAK,IAAI,CAAC;AACjG,SAAK,gBAAe,oBAC8C,KAAK,mBAAmB,KAAK,IAAI,CAAC;AACpG,SAAK,gBAAe,qBAC+C,KAAK,oBAAoB,KAAK,IAAI,CAAC;AACtG,SAAK,gBAAe,sBACgD,KAAK,qBAAqB,KAAK,IAAI,CAAC;AACxG,SAAK,gBAAe,UAAqD,KAAK,SAAS,KAAK,IAAI,CAAC;AACjG,SAAK,gBAAe,0BACoD,KAAK,yBAAyB,KAAK,IAAI,CAAC;AAChH,SAAK,gBAAe,yBACmD,KAAK,wBAAwB,KAAK,IAAI,CAAC;AAC9G,SAAK,gBAAe,sBACgD,KAAK,qBAAqB,KAAK,IAAI,CAAC;AACxG,SAAK,gBAAe,6BAEhB,KAAK,4BAA4B,KAAK,IAAI,CAAC;AAC/C,SAAK,gBAAe,oBAC8C,KAAK,mBAAmB,KAAK,IAAI,CAAC;AACpG,SAAK,gBAAe,qBAC+C,KAAK,oBAAoB,KAAK,IAAI,CAAC;AACtG,SAAK,gBAAe,kBAA6D,KAAK,iBAAiB,KAAK,IAAI,CAAC;AACjH,SAAK,gBAAe,aAAwD,KAAK,YAAY,KAAK,IAAI,CAAC;AACvG,SAAK,gBAAe,aAAwD,KAAK,YAAY,KAAK,IAAI,CAAC;AACvG,SAAK,gBAAe,gBAA2D,KAAK,eAAe,KAAK,IAAI,CAAC;AAC7G,SAAK,gBAAe,eAA0D,KAAK,cAAc,KAAK,IAAI,CAAC;AAC3G,SAAK,gBAAe,gBAA2D,KAAK,eAAe,KAAK,IAAI,CAAC;AAC7G,SAAK,gBAAe,mCAEhB,KAAK,kCAAkC,KAAK,IAAI,CAAC;AACrD,SAAK,gBAAe,uBACiD,KAAK,sBAAsB,KAAK,IAAI,CAAC;AAC1G,SAAK,gBAAe,iBAA4D,KAAK,gBAAgB,KAAK,IAAI,CAAC;AAC/G,SAAK,gBAAe,gBAA2D,KAAK,eAAe,KAAK,IAAI,CAAC;AAC7G,SAAK,gBAAe,aAAwD,KAAK,YAAY,KAAK,IAAI,CAAC;AACvG,SAAK,gBAAe,mCAEhB,KAAK,kCAAkC,KAAK,IAAI,CAAC;AACrD,SAAK,gBAAe,sBACgD,KAAK,qBAAqB,KAAK,IAAI,CAAC;AACxG,SAAK,gBAAe,8BAEhB,KAAK,6BAA6B,KAAK,IAAI,CAAC;AAChD,SAAK,gBAAe,sBACgD,KAAK,qBAAqB,KAAK,IAAI,CAAC;AACxG,SAAK,gBAAe,oBAC8C,KAAK,mBAAmB,KAAK,IAAI,CAAC;AACpG,SAAK,gBAAe,oBAC8C,KAAK,mBAAmB,KAAK,IAAI,CAAC;AACpG,WAAO,iBAAiB,WAAW,KAAK,iBAAiB,KAAK;AAE9D,UAAM,gBAAgB,OAAO,aAAa,oBAAmB;AAE7D,QAAI,eAAe;AACjB,WAAK,kBAAkB,EAAC,MAAM,cAAa,CAAC;IAC9C;AACA,IAAK,4BAAsB,8BAA8B,OAAO,iBACvD,+BAAyB,OAAO,mBAAmB,KAAK,mBAAmB,IAAI;AAExF,SAAK,eAAc;AAEnB,IAAa,0BAAa,SAAQ,EAAG,iBAA8B,8BAAiB,WAAW,KAAK,cAAc;EACpH;EAEA,IAAI,mBAAgB;AAClB,WAAO,KAAK;EACd;EAEA,UAAO;AACL,IAAa,0BAAa,SAAQ,EAAG,oBACpB,8BAAiB,WAAW,KAAK,cAAc;AAGhE,IAAI,mBAAc,cAAc,SAAQ,EAAG,oBAAmB,uBACV,KAAK,qBAAqB,IAAI;AAElF,IAAK,4BAAsB,8BAA8B,OAAO,oBACvD,+BAAyB,OAAO,mBAAmB,KAAK,mBAAmB,IAAI;AAExF,WAAO,oBAAoB,WAAW,KAAK,iBAAiB,KAAK;EACnE;EAEA,iBAAiB,MAAW;AAC1B,UAAM,YAAyB,0BAAa,SAAQ,EAAG,UAAS;AAChE,eAAW,QAAQ,KAAK,oBAAoB,OAAM,GAAI;AACpD,WAAK,YAAY,EAAC,SAAO,qBAAyD,UAAS,CAAC;IAC9F;EACF;EAEA,OAAO,SAAS,OAEZ,EAAC,UAAU,KAAI,GAAC;AAClB,UAAM,EAAC,SAAQ,IAAI;AACnB,QAAI,CAAC,2BAA2B,UAAU;AACxC,+BAAyB,QAAO;AAChC,gCAA0B,IAAI,iBAAe;IAC/C;AAEA,WAAO;EACT;EAEA,uBAAoB;AAElB,QAAI,KAAK,mBAAmB,MAAM;AAChC,MAAK,4BAAsB,8BAA8B,wBAAwB,KAAK,aAAa,KAAK,IAAI,CAAC;IAC/G;EACF;EAEA,gBAAa;AACX,WAAO,QAAQ,KAAK,qBAAqB,IAAI;EAC/C;EAEA,mBAAmB,SAAiBC,SAAgB,cAAqB;AACvE,SAAK,iBAAiB,kBAAwD,SAAS,CAACA,SAAQ,YAAY,CAAC;EAC/G;EAEA,gBAAgB,YAAoB,YAAmB;AACrD,SAAK,iBAAiB,gBAAsD,YAAY,CAAC,UAAU,CAAC;EACtG;EAEA,iBAAiB,YAAkB;AACjC,SAAK,iBAAiB,iBAAuD,YAAY,CAAA,CAAE;EAC7F;EAEA,oBAAoB,YAAkB;AACpC,SAAK,iBAAiB,oBAA0D,YAAY,CAAA,CAAE;EAChG;EAEA,mBAAgB;AACd,SAAK,iBAAgB,sBAA6D,CAAA,CAAE;EACtF;EAEA,mBAAgB;AACd,SAAK,iBAAgB,sBAA6D,CAAA,CAAE;EACtF;EAEQ,kCACJ,SAA2E,cAAyB;AACtG,QAAI,QAAQ,YAAO,mCAAkF;AACnG,aAAO,KAAK,OAAO,SACf,WAAW,YAAY,iCAA2E,EAAE;IAC1G;AACA,UAAM,EAAC,cAAa,IAAa,kCAAyB,yBAAyB,SAAQ;AAC3F,UAAM,EAAC,YAAY,MAAM,sBAAsB,EAAC,UAAU,aAAY,EAAC,IAAI;AAC3E,UAAM,qBACD,MAAM,QAAQ,YAAY,KAAK,aAAa,MAAM,OAAK,OAAO,MAAM,QAAQ,IAAI,eAAe,CAAA;AACpG,UAAM,kBAAkB,KAAK,mBAAmB,YAAY;AAC5D,UAAM,eAAe,KAAK,qBAAqB,IAAI,eAAe;AAClE,QAAI,CAAC,cAAc;AACjB,YAAM,IAAI,MAAM,mDAAmD;IACrE;AACA,UAAM,WAAW,IAAe,sCAA0B,0BACtD,aAAa,iBAAiB,iBAAiB,YAAY,EAAC,UAAU,cAAc,mBAAkB,GAAG,IAAI;AACjH,kBAAc,UAAU,QAAQ;AAChC,WAAO,KAAK,OAAO,GAAE;EACvB;EAEQ,MAAM,cACV,aAAsB,SAAgE,YACtF,QAAe;AACjB,UAAM,EAAC,cAAa,IAAa,kCAAyB,yBAAyB,SAAQ;AAC3F,UAAM,YAAY,cAAc,mBAAmB,MAAiD;AACpG,QAAI,CAAC,WAAW;AACd,aAAO,KAAK,OAAO,SAAS,UAAU,iBAAiB;IACzD;AACA,UAAM,SAAS,MAAM,UAAU,cAAc,MAAM,2BAA2B;MAC5E,aAAa,UAAU;MACvB;MACA,QAAQ;MACR,eAAe,CAAC;MAChB,iBAAiB;MACjB,mBAAmB;KACpB;AAED,QAAI,CAAC,OAAO,oBAAoB,CAAC,OAAO,SAAQ,GAAI;AAClD,aAAO,QAAQ,OAAO,MAAM;IAC9B;AAEA,WAAO,KAAK,OAAO,SAAS,QAAQ;EACtC;EAEQ,MAAM,sBAAsB,SAAyE;AAE3G,QAAI,QAAQ,YAAO,uBAAsE;AACvF,aAAO,KAAK,OAAO,SACf,WAAW,YAAY,qBAA+D,EAAE;IAC9F;AACA,WAAO,MAAM,KAAK,cACd,OAAO,YAAU,OAAO,OACxB,oDAAoD,OAAO,QAAQ,MAAM,CAAC,KAAK,OAAO,QAAQ,MAAM,CAAC,MACrG,QAAQ,MAAM;EACpB;EAEQ,iBAAiB,YAAwC,OAAa;AAE5E,WAAO,SAAM;AACX,UAAI,IAAI,SAAS,aAAa;AAC5B;MACF;AACA,UAAI,IAAI,SAAS,YAAY,IAAI,YAAY,aAAa;AACxD,eAAO,KAAK,OAAO,SAAS,iBAAiB;MAC/C;AACA,YAAM,OAAO,KAAK;AAClB,YAAM,QAAgB,IAAI,SAAS,YAAY,KAAK,OAAK,EAAE,SAAS,OAAO,GAAG,SAAS;AACvF,cAAQ,MAAM;QACZ,KAAK;QACL,KAAK;QACL,KAAK;AACH,iBAAO,EAAC,MAAM,OAAO,OAAO,KAAK,EAAC;QACpC,KAAK;AACH,iBAAO,EAAC,MAAM,OAAO,OAAO,MAAM,QAAQ,MAAM,EAAE,CAAC,EAAC;QACtD,KAAK;AACH,iBAAO,EAAC,MAAM,MAAK;QACrB;AACE,iBAAO,EAAC,MAAM,WAAW,YAAY,MAAK;MAC9C;IACF;EACF;EAEQ,MAAM,gBAAgB,SAAyE;AAErG,QAAI,QAAQ,YAAO,iBAAgE;AACjF,aAAO,KAAK,OAAO,SAAS,WAAW,YAAY,eAAyD,EAAE;IAChH;AACA,UAAM,SAAS,OAAO,QAAQ,MAAM;AACpC,UAAM,SAAS,MAAM,KAAK,cACtB,MAAM,KAAK,iBAAiB,UAAU,MAAM,GAAG,WAAW,MAAM,KAAK,QAAQ,MAAM;AACvF,WAAO,UAAU,KAAK,OAAO,SAAS,UAAU,wBAAwB,MAAM,EAAE;EAClF;EAEQ,MAAM,eAAe,SAAyE;AAEpG,QAAI,QAAQ,YAAO,gBAA+D;AAChF,aAAO,KAAK,OAAO,SAAS,WAAW,YAAY,cAAwD,EAAE;IAC/G;AACA,UAAM,QAAQ,OAAO,QAAQ,KAAK;AAClC,UAAM,SAAS,MAAM,KAAK,cACtB,MAAM,KAAK,iBAAiB,SAAS,KAAK,GAAG,UAAU,KAAK,KAAK,QAAQ,MAAM;AACnF,WAAO,UAAU,KAAK,OAAO,SAAS,SAAS,uBAAuB,KAAK,EAAE;EAC/E;EAEQ,MAAM,YAAY,SAAyE;AAEjG,QAAI,QAAQ,YAAO,aAA4D;AAC7E,aAAO,KAAK,OAAO,SAAS,WAAW,YAAY,WAAqD,EAAE;IAC5G;AACA,UAAM,KAAK,OAAO,QAAQ,EAAE;AAC5B,UAAM,SAAS,MAAM,KAAK,cACtB,MAAM,KAAK,iBAAiB,WAAW,EAAE,GAAG,SAAS,EAAE,KAAK,QAAQ,MAAM;AAC9E,WAAO,UAAU,KAAK,OAAO,SAAS,MAAM,yBAAyB,EAAE,EAAE;EAC3E;EAEQ,kCACJ,SAA2E,cAAyB;AACtG,QAAI,QAAQ,YAAO,mCAAkF;AACnG,aAAO,KAAK,OAAO,SACf,WAAW,YAAY,iCAA2E,EAAE;IAC1G;AACA,UAAM,EAAC,YAAY,WAAW,MAAM,aAAY,IAAI;AACpD,IAAW,kCAAsB,sBAAsB,SAAQ,EAAG,UAC9D,IAAe,sCAA0B,0BAA0B,YAAY,MAAM,cAAc,SAAS,CAAC;AACjH,WAAO,KAAK,OAAO,GAAE;EACvB;EAEQ,qBAAqB,SAAyE;AACpG,QAAI,QAAQ,YAAO,sBAAqE;AACtF,aAAO,KAAK,OAAO,SACf,WAAW,YAAY,oBAA8D,EAAE;IAC7F;AACA,UAAM,EAAC,aAAa,aAAa,OAAM,IAAI;AAC3C,UAAM,MAAM;AACZ,UAAM,YACF,EAAC,QAAQ,MAAM,SAAS,MAAM,cAAc,aAAgD,YAAW;AAE3G,UAAM,eAAoD;MACxD;MACA;MACA,cAAc,OAAO;MACrB,SAAS,OAAO,WAAW;MAC3B,MAAM,OAAO,QAAQ;MACrB,UAAU;;AAEZ,IAAI,wBAAmB,mBAAmB,SAAQ,EAAG,+BAA+B,YAAY;AAChG,WAAO,KAAK,OAAO,GAAE;EACvB;EAEQ,6BACJ,SAA2E,MAAiB;AAC9F,QAAI,QAAQ,YAAO,8BAA6E;AAC9F,aAAO,KAAK,OAAO,SACf,WAAW,YAAY,4BAAsE,EAAE;IACrG;AACA,UAAM,EAAC,WAAW,OAAM,IAAI;AAC5B,QAAI,CAAC,aAAa,CAAC,QAAQ,QAAQ;AACjC,aAAO,KAAK,OAAO,SAAS,WAAW,4DAA4D;IACrG;AACA,UAAM,WAAW,KAAK,0BAA0B,WAA8C,IAAI;AAClG,QAAI,WAAW,UAAU;AACvB,aAAO,SAAS;IAClB;AACA,UAAM,EAAC,aAAY,IAAI;AACvB,QAAI,CAAC,aAAa,YAAW,EAAG,SAAQ,KAAM,CAAC,aAAa,YAAW,EAAG,gBAAe,GAAI;AAC3F,aAAO,KAAK,OAAO,SAAS,WAAW,kDAAkD,SAAS,EAAE;IACtG;AACA,QAAI;AACF,MAAS,kCAAyB,yBAAyB,SAAQ,EAAG,kBAAkB,cAAc,MAAM;IAC9G,SAAS,GAAG;AACV,aAAO,KAAK,OAAO,SAAS,CAAC;IAC/B;AACA,WAAO,KAAK,OAAO,GAAE;EACvB;EAEQ,mBAAmB,SAAyE;AAElG,QAAI,QAAQ,YAAO,oBAAmE;AACpF,aAAO,KAAK,OAAO,SACf,WAAW,YAAY,kBAA4D,EAAE;IAC3F;AACA,IAAW,kCAAsB,sBAAsB,SAAQ,EAAG,SAAS,QAAQ,EAAE;AACrF,WAAO;EACT;EAEQ,mBAAmB,SAAyE;AAElG,QAAI,QAAQ,YAAO,oBAAmE;AACpF,aAAO,KAAK,OAAO,SACf,WAAW,YAAY,kBAA4D,EAAE;IAC3F;AACA,SAAY,iBAAS,OAAO,IAAI,+BAA+B,QAAQ,MAAM,CAAC;AAC9E,WAAO,KAAK,OAAO,GAAE;EACvB;EAEQ,qBACJ,SAA2E,MAAiB;AAC9F,QAAI,QAAQ,YAAO,sBAAqE;AACtF,aAAO,KAAK,OAAO,SACf,WAAW,YAAY,oBAA8D,EAAE;IAC7F;AACA,UAAM,KAAK,QAAQ;AAGnB,QAAI,KAAK,cAAc,IAAI,EAAE,GAAG;AAC9B,aAAO,KAAK,OAAO,SAAS,EAAE;IAChC;AAEA,UAAM,WAAW,iBAAgB,mBAAmB,KAAK,mBAAmB,IAAI,GAAG,QAAQ,QAAQ;AACnG,QAAI,aAAa,QAAW;AAC1B,aAAO,KAAK,OAAO,SAAS,YAAY,yDAAyD;IACnG;AACA,UAAM,UAAU,MAAY,KAAK,gBAAgB,EAAE;AACnD,UAAM,WAAW,MAAY,KAAK,iBAAiB,EAAE;AACrD,IAAW,kCAAsB,sBAAsB,SAAQ,EAAG,aAAa;MAC7E;MACA;MACA,OAAO,QAAQ;MACf;MACA;KACD;AACD,WAAO,KAAK,OAAO,GAAE;EACvB;EAEQ,oBAAoB,OAA6D;AACvF,QAAI,CAAC,iBAAgB,cAAc,MAAM,KAAK,aAAY,CAAE,GAAG;AAC7D,WAAK,kBAAiB;AACtB;IACF;AACA,QAAI,MAAM,SAAa,mBAAc,cAAc,SAAQ,EAAG,kBAAiB,GAAI;AACjF;IACF;AACA,SAAK,WAAW,oBAAI,IAAG;AACvB,SAAK,iBAAgB;AACrB,UAAM,MAAM,MAAM,KAAK,aAAY;AACnC,SAAK,iBAAgB,yBAAgE,CAAC,GAAG,CAAC;AAC1F,UAAM,aAAa,KAAK,mBAAmB,OAAO,CAAC;AACnD,eAAW,QAAQ,OAAK,KAAK,aAAa,CAAC,CAAC;EAC9C;EAEA,eAAe,MAAY;AACzB,WAAO,KAAK,YAAY,IAAI,IAAI;EAClC;EAEQ,iBAAiB,MAAc,MAAiB,QAAoD;AAC1G,QAAI,CAAC,KAAK,mBAAmB;AAC3B;IACF;AACA,UAAM,cAAc,KAAK,YAAY,IAAI,IAAI;AAC7C,QAAI,CAAC,aAAa;AAChB;IACF;AACA,UAAM,UAAU,EAAC,SAAS,YAAY,MAAM,WAAW,KAAI;AAC3D,eAAW,cAAc,aAAa;AACpC,UAAI,CAAC,KAAK,iBAAiB,UAAU,GAAG;AACtC;MACF;AACA,UAAI,QAAQ;AACV,cAAM,SAAS,iBAAiB,IAAI,UAAU;AAC9C,cAAM,YAAY,UAAU,KAAK,qBAAqB,IAAI,MAAM;AAChE,YAAI,CAAC,aAAa,CAAC,OAAO,SAAS,GAAG;AACpC;QACF;MACF;AACA,iBAAW,YAAY,OAAO;IAChC;EACF;EAEQ,YAAY,SAA2E,MAAiB;AAE9G,QAAI,QAAQ,YAAO,aAA4D;AAC7E,aAAO,KAAK,OAAO,SAAS,WAAW,YAAY,WAAqD,EAAE;IAC5G;AACA,UAAM,cAAc,KAAK,YAAY,IAAI,QAAQ,IAAI;AACrD,QAAI,aAAa;AACf,kBAAY,IAAI,IAAI;IACtB,OAAO;AACL,WAAK,YAAY,IAAI,QAAQ,MAAM,oBAAI,IAAI,CAAC,IAAI,CAAC,CAAC;AAClD,YAAM,UAAU,KAAK,0BAA0B,IAAI,QAAQ,IAAI;AAC/D,UAAI,SAAS;AACX,gBAAO;MACT;IACF;AACA,WAAO;EACT;EAEQ,cAAc,SAA2E,MAAiB;AAEhH,QAAI,QAAQ,YAAO,eAA8D;AAC/E,aAAO,KAAK,OAAO,SAAS,WAAW,YAAY,aAAuD,EAAE;IAC9G;AACA,UAAM,cAAc,KAAK,YAAY,IAAI,QAAQ,IAAI;AACrD,QAAI,CAAC,aAAa;AAChB;IACF;AACA,gBAAY,OAAO,IAAI;AACvB,QAAI,CAAC,YAAY,MAAM;AACrB,WAAK,YAAY,OAAO,QAAQ,IAAI;AACpC,YAAM,UAAU,KAAK,yBAAyB,IAAI,QAAQ,IAAI;AAC9D,UAAI,SAAS;AACX,gBAAO;MACT;IACF;AACA,WAAO;EACT;EAEQ,oBAAoB,SAAyE;AAEnG,QAAI,QAAQ,YAAO,qBAAoE;AACrF,aAAO,KAAK,OAAO,SACf,WAAW,YAAY,mBAA6D,EAAE;IAC5F;AACA,UAAM,KAAK,QAAQ;AACnB,QAAI,OAAO,OAAO,UAAU;AAC1B,aAAO,KAAK,OAAO,aAAa,eAAe,OAAO,IAAI,QAAQ;IACpE;AACA,QAAI,mBAAmB,KAAK,aAAa,IAAI,EAAE;AAC/C,QAAI,CAAC,kBAAkB;AACrB,yBAAmB,oBAAI,IAAG;AAC1B,WAAK,aAAa,IAAI,IAAI,gBAAgB;IAC5C;AACA,eAAW,QAAQ,QAAQ,SAAS;AAClC,uBAAiB,IAAI,MAAM,QAAQ,QAAQ,IAAI,CAAC;IAClD;AACA,UAAM,aAAc,CAAA;AACpB,eAAW,WAAW,KAAK,aAAa,OAAM,GAAI;AAChD,iBAAW,CAAC,MAAM,KAAK,KAAK,SAAS;AACnC,YAAI,SAAS,eAAe,OAAO,UAAU,UAAU;AACrD,qBAAW,IAAI,IAAI;QACrB;MACF;IACF;AAEA,IAAI,oBAAe,0BAA0B,SAAQ,EAAG,oBAAoB,UAAU;AACtF,WAAO;EACT;EAEQ,mBAAmB,MAAiB;AAC1C,UAAM,SAAS,iBAAiB,IAAI,IAAI;AACxC,QAAI,CAAC,QAAQ;AACX,YAAM,IAAI,MAAM,mDAAmD;IACrE;AACA,WAAO;EACT;EAEQ,cAAc,SAA2E,MAAiB;AAEhH,QAAI,QAAQ,YAAO,eAA8D;AAC/E,aAAO,KAAK,OAAO,SAAS,WAAW,YAAY,aAAuD,EAAE;IAC9G;AACA,UAAM,KAAK,QAAQ;AAGnB,QAAI,KAAK,cAAc,IAAI,EAAE,KAAQ,kBAAc,cAAc,SAAQ,EAAG,SAAS,EAAE,GAAG;AACxF,aAAO,KAAK,OAAO,SAAS,EAAE;IAChC;AAEA,UAAM,OAAO,iBAAgB,mBAAmB,KAAK,mBAAmB,IAAI,GAAG,QAAQ,IAAI;AAC3F,QAAI,SAAS,QAAW;AACtB,aAAO,KAAK,OAAO,SAAS,QAAQ,yDAAyD;IAC/F;AACA,QAAI,eAAe,KAAK,mBAAmB,IAAI,IAAI,QAAQ;AAC3D,mBAAe,aAAa,QAAQ,YAAY,EAAE;AAClD,UAAM,YAAY,IAAI,yBAClB,cAAmB,YAAK,aAAa,QAAQ,KAAK,GAAG,IAAI,eAAe,MAAM,cAAc,IAAI,IAAI,CAAC;AACzG,SAAK,cAAc,IAAI,IAAI,SAAS;AACpC,IAAG,kBAAc,cAAc,SAAQ,EAAG,SAAS,SAAS;AAC5D,WAAO,KAAK,OAAO,GAAE;EACvB;EAEQ,YAAY,SAAyE;AAC3F,QAAI,QAAQ,YAAO,aAA4D;AAC7E,aAAO,KAAK,OAAO,SAAS,WAAW,YAAY,WAAqD,EAAE;IAC5G;AAEA,QAAI,cAAc,QAAQ;AAC1B,UAAM,YAAY,KAAK,cAAc,IAAI,QAAQ,EAAE;AACnD,QAAI,aAAa,qBAAqB,0BAA0B;AAC9D,oBAAc,UAAU,OAAM;IAChC;AACA,SAAQ,kBAAc,cAAc,SAAQ,EAAG,UAAU,WAAW;AACpE,WAAO;EACT;EAEQ,sBACJ,SAA2E,MAAiB;AAC9F,QAAI,QAAQ,YAAO,uBAAsE;AACvF,aAAO,KAAK,OAAO,SACf,WAAW,YAAY,qBAA+D,EAAE;IAC9F;AACA,UAAM,YAAY,KAAK,cAAc,IAAI,QAAQ,KAAK;AACtD,QAAI,CAAC,aAAa,EAAE,qBAAqB,2BAA2B;AAClE,aAAO,KAAK,OAAO,WAAW,QAAQ,KAAK;IAC7C;AACA,UAAM,eAAe,iBAAgB,mBAAmB,KAAK,mBAAmB,IAAI,GAAG,QAAQ,IAAI;AACnG,QAAI,iBAAiB,QAAW;AAC9B,aAAO,KAAK,OAAO,SAAS,QAAQ,yDAAyD;IAC/F;AACA,UAAM,SAAS,IAAI,gBAAgB,MAAM,QAAQ,IAAI,cAAc,QAAQ,SAAS,QAAQ,QAAQ;AACpG,SAAK,cAAc,IAAI,QAAQ,IAAI,MAAM;AAEzC,SAAK,UAAU,OAAM,EAAG,KAAK,YAAY;AAEzC,aAAS,aAAa,OAAuB;AAC1C,YAAyB,eAAe,OAAO,cAAa,CAAE;IACjE;AAEA,WAAO,KAAK,OAAO,GAAE;EACvB;EAEQ,eAAe,SAA2E,MAAiB;AAEjH,QAAI,QAAQ,YAAO,gBAA+D;AAChF,aAAO,KAAK,OAAO,SAAS,WAAW,YAAY,cAAwD,EAAE;IAC/G;AACA,UAAM,SAAS,KAAK,cAAc,IAAI,QAAQ,EAAE;AAChD,QAAI,CAAC,UAAU,EAAE,kBAAkB,kBAAkB;AACnD,aAAO,KAAK,OAAO,WAAW,QAAQ,EAAE;IAC1C;AACA,UAAM,eACF,QAAQ,QAAQ,iBAAgB,mBAAmB,KAAK,mBAAmB,IAAI,GAAG,QAAQ,IAAI;AAClG,QAAI,QAAQ,QAAQ,iBAAiB,QAAW;AAC9C,aAAO,KAAK,OAAO,SAAS,QAAQ,yDAAyD;IAC/F;AACA,WAAO,OAAO,cAAc,QAAQ,SAAS,QAAQ,QAAQ;AAC7D,WAAO,KAAK,OAAO,GAAE;EACvB;EAEQ,oBAAoB,SAAyE;AACnG,QAAI,QAAQ,YAAO,qBAAoE;AACrF,aAAO,KAAK,OAAO,SACf,WAAW,YAAY,mBAA6D,EAAE;IAC5F;AACA,UAAM,KAAK,QAAQ;AACnB,UAAM,UAAU,IAAI,qBAAqB,MAAM,QAAQ,OAAY,YAAK,aAAa,QAAQ,KAAK,GAAG,EAAE;AACvG,SAAK,cAAc,KAAK,OAAO;AAC/B,SAAK,cAAc,IAAI,IAAI,OAAO;AAClC,SAAK,yBAAwB,oBAA0B,OAAO;AAE9D,WAAO,KAAK,OAAO,GAAE;EACvB;EAEA,eAAY;AACV,WAAO,KAAK;EACd;EAEQ,mBAAmB,SAAyE;AAClG,QAAI,QAAQ,YAAO,oBAAmE;AACpF,aAAO,KAAK,OAAO,SACf,WAAW,YAAY,kBAA4D,EAAE;IAC3F;AACA,UAAM,UAAU,KAAK,cAAc,IAAI,QAAQ,EAAE;AACjD,QAAI,CAAC,WAAW,EAAE,mBAAmB,uBAAuB;AAC1D,aAAO,KAAK,OAAO,WAAW,QAAQ,EAAE;IAC1C;AACA,YAAQ,UAAU,QAAQ,MAAM;AAChC,WAAO,KAAK,OAAO,GAAE;EACvB;EAEQ,oBACJ,SAA2E,MAAiB;AAC9F,QAAI,QAAQ,YAAO,qBAAoE;AACrF,aAAO,KAAK,OAAO,SACf,WAAW,YAAY,mBAA6D,EAAE;IAC5F;AACA,UAAM,EAAC,WAAW,IAAI,WAAW,YAAY,iBAAiB,eAAc,IAAI;AAChF,UAAM,UAAU,KAAK,cAAc,IAAI,EAAE;AACzC,QAAI,CAAC,WAAW,EAAE,mBAAmB,uBAAuB;AAC1D,aAAO,KAAK,OAAO,WAAW,QAAQ,EAAE;IAC1C;AAEA,aAAS,SAAgC,OAAc;AACrD,YAAM,SAAS,QAAQ,KAAK,OAAO,SAAS,KAAK,IAAI,KAAK,OAAO,GAAE;AACnE,WAAK,iBAAiB,WAAW,MAAM,MAAM;IAC/C;AACA,QAAI,gBAAgB;AAClB,cAAQ,cAAc,YAAY,WAAW,iBAAiB,KAAK,mBAAmB,IAAI,GAAG,SAAS,KAAK,IAAI,CAAC;AAChH,aAAO;IACT;AACA,YAAQ,UAAU,QAAQ,YAAY,QAAQ,WAAW,SAAS,KAAK,IAAI,CAAC;AAC5E,WAAO;EACT;EAEQ,iBACJ,SAA2E,MAAiB;AAC9F,QAAI,QAAQ,YAAO,kBAAiE;AAClF,aAAO,KAAK,OAAO,SAAS,WAAW,YAAY,gBAA0D,EAAE;IACjH;AACA,UAAM,UAAU,KAAK,cAAc,IAAI,QAAQ,EAAE;AACjD,QAAI,CAAC,WAAW,EAAE,mBAAmB,uBAAuB;AAC1D,aAAO,KAAK,OAAO,WAAW,QAAQ,EAAE;IAC1C;AACA,UAAM,eAAe,iBAAgB,mBAAmB,KAAK,mBAAmB,IAAI,GAAG,QAAQ,IAAI;AACnG,QAAI,iBAAiB,QAAW;AAC9B,aAAO,KAAK,OAAO,SAAS,QAAQ,yDAAyD;IAC/F;AACA,YAAQ,QAAQ,YAAY;AAC5B,WAAO;EACT;EAEQ,eAAe,SAAyE;AAC9F,QAAI,QAAQ,YAAO,gBAA+D;AAChF,aAAO,KAAK,OAAO,SAAS,WAAW,YAAY,cAAwD,EAAE;IAC/G;AACA,UAAM,eAAyB,oBAAU,cAAc,SAAQ,EAAG,mBAAmB,QAAQ,GAAG;AAChG,QAAI,cAAc;AAChB,WAAY,iBAAS,OAAO,aAAa,WAAW,QAAQ,YAAY,QAAQ,YAAY,CAAC;AAC7F,aAAO,KAAK,OAAO,GAAE;IACvB;AAEA,UAAM,WAAoB,uBAAc,eAAe,QAAQ,GAAG;AAClE,QAAI,UAAU;AACZ,WAAY,iBAAS,OAAO,QAAQ;AACpC,aAAO,KAAK,OAAO,GAAE;IACvB;AAEA,UAAM,UAAe,gBAAW,WAAW,SAAQ,EAAG,cAAc,QAAQ,GAAG;AAC/E,QAAI,SAAS;AACX,WAAY,iBAAS,OAAO,OAAO;AACnC,aAAO,KAAK,OAAO,GAAE;IACvB;AAEA,WAAO,KAAK,OAAO,WAAW,QAAQ,GAAG;EAC3C;EAEQ,yBACJ,SAA2E,MAAiB;AAC9F,QAAI,QAAQ,YAAO,0BAAyE;AAC1F,aAAO,KAAK,OAAO,SACf,WAAW,YAAY,wBAAkE,EAAE;IACjG;AACA,UAAM,YAAY,KAAK,qBAAqB,IAAI,KAAK,mBAAmB,IAAI,CAAC;AAC7E,QAAI,CAAC,WAAW;AACd,YAAM,IAAI,MAAM,mDAAmD;IACrE;AACA,QAAI,QAAQ,WAAW;AACrB,gBAAU,qBAAqB,QAAQ;IACzC;AACA,UAAM,kBAAkB,KAAK,mBAAmB,IAAI;AACpD,UAAM,EAAC,KAAI,IAAI;AACf,UAAM,eAAe;MACnB,OAAO;MACP,QAAQ;MACR,QAAQ,QAAQ;MAChB,SAAS,KAAK,cAAc,KAAK,MAAM,IAAI;MAC3C,0BAA0B,CAAC,KAAsC,YAClD,qBAAU,UAAU,yBAAyB,UAAU,oBAAoB,KAAK,OAAO;;AAExG,QAAI,QAAQ,gBAAgB;AAC1B,MAAW,qBAAU,UAAU,oBAAoB,YAAY;IACjE,OAAO;AACL,MAAW,qBAAU,UAAU,sBAAsB,YAAY;IACnE;AACA,WAAO;EACT;EAEQ,wBACJ,SAA2E,MAAiB;AAC9F,QAAI,QAAQ,YAAO,yBAAwE;AACzF,aAAO,KAAK,OAAO,SACf,WAAW,YAAY,uBAAiE,EAAE;IAChG;AACA,UAAM,kBAAkB,KAAK,mBAAmB,IAAI;AACpD,UAAM,YAAY,KAAK,qBAAqB,IAAI,eAAe;AAC/D,QAAI,CAAC,WAAW;AACd,YAAM,IAAI,MAAM,mDAAmD;IACrE;AAEA,QAAI,QAAQ,gBAAgB;AAC1B,WAAK,oBAAoB,IAAI,iBAAiB,IAAI;IACpD,OAAO;AACL,WAAK,oBAAoB,OAAO,eAAe;IACjD;AACA,WAAO;EACT;EAEQ,cACJ,MAAmB,sBAAwE,YAC3F,cAAqB;AACvB,QAAI;AACJ,QAAI;AACJ,QAAI,OAAO,yBAAyB,UAAU;AAC5C,iBAAW,KAAK,aAAa,oBAAoB;AACjD,kBAAY,KAAK,kCAAkC,sBAAsB,IAAI;IAC/E,OAAO;AACL,YAAM,MAAM;AACZ,iBAAW,EAAC,KAAK,MAAa,qBAAa,cAAc,MAAM,KAAI,EAAE;AACrE,kBAAY,KAAK,sBAAsB,KAAK,IAAI;IAClD;AAEA,QAAI,WAAW;AACb,WAAK,YAAY;QACf,SAAS;QACT;QACA,YAAY,aAAa,aAAa,IAAI;QAC1C,cAAc,eAAe,eAAe,IAAI;OACjD;IACH;EACF;EAEQ,sBAAsB,KAAsC,MAAiB;AACnF,UAAM,SAAS,iBAAiB,IAAI,IAAI;AACxC,UAAM,YAAY,UAAU,KAAK,qBAAqB,IAAI,MAAM;AAChE,WAAO,QAAQ,WAAW,kBAAkB,GAAG,CAAC;EAClD;;;;;;EAOQ,kCACJ,iBAA4D,MAAiB;AAC/E,QAAI,EAAE,2BAAqC,uBAAa,eAAe;AACrE,aAAO,KAAK,sBAAsB,gBAAgB,WAAU,GAAI,IAAI;IACtE;AAEA,QAAI,gBAAgB,YAAW,MAAc,qBAAa,cAAc,QAAQ;AAE9E,aAAO,KAAK,sBAAsB,gBAAgB,WAAU,GAAI,IAAI;IACtE;AAEA,UAAM,UACO,kCAAyB,yBAAyB,SAAQ,EAAG,uBAAuB,eAAe;AAChH,QAAI,QAAQ,WAAW,GAAG;AACxB,aAAO,KAAK,sBAAsB,gBAAgB,WAAU,GAAI,IAAI;IACtE;AAEA,WAAO,QAAQ,MAAM,YAAS;AAC5B,UAAI,OAAO,cAAc;AACvB,eAAO,KAAK,yBAAyB,OAAO,OAAM,GAAI,IAAI;MAC5D;AACA,aAAO,KAAK,sBAAsB,OAAO,WAAU,GAAI,IAAI;IAC7D,CAAC;EACH;;;;;EAMQ,0BAA0B,KAAsC,MAAiB;AAKvF,UAAM,eAAyB,oBAAU,cAAc,SAAQ,EAAG,mBAAmB,GAAG;AACxF,QAAI,CAAC,gBAAgB,CAAC,KAAK,sBAAsB,KAAK,IAAI,GAAG;AAC3D,aAAO,EAAC,OAAO,KAAK,OAAO,SAAS,mBAAmB,EAAC;IAC1D;AACA,QAAI,CAAC,cAAc;AACjB,aAAO,EAAC,OAAO,KAAK,OAAO,WAAW,GAAG,EAAC;IAC5C;AACA,QAAI,CAAC,KAAK,kCAAkC,cAAc,IAAI,GAAG;AAC/D,aAAO,EAAC,OAAO,KAAK,OAAO,SAAS,mBAAmB,EAAC;IAC1D;AACA,WAAO,EAAC,aAAY;EACtB;EAEQ,yBAAyB,QAA2B,MAAiB;AAC3E,WAAO,KAAK,sBAAsB,OAAO,aAAY,GAAI,IAAI;EAC/D;EAEQ,SAAS,SAA2E,MAAiB;AAE3G,QAAI,QAAQ,YAAO,UAAyD;AAC1E,aAAO,KAAK,OAAO,SAAS,WAAW,YAAY,QAAkD,EAAE;IACzG;AACA,UAAM,UAAW,QAAQ,WAAW,CAAA;AAEpC,IAAI,oBAAe,0BAA0B,SAAQ,EAAG,qBACpD,OAAO,QAAQ,cAAc,WAAW,QAAQ,YAAY,IAAI,IAAI;AACxE,QAAI;AACJ,QAAI,QAAQ,gBAAgB;AAC1B,uBAAiB,iBAAiB,QAAQ,iBAAiB;IAC7D;AACA,UAAM,SAAa,mBAAc,cAAc,SAAQ,EAAG,kBAAiB;AAC3E,QAAI,CAAC,QAAQ;AACX,aAAO,KAAK,OAAO,GAAE;IACvB;AACA,UAAM,oBAAoB,OAAO,MAAU,uBAAkB,iBAAiB;AAC9E,QAAI,CAAC,KAAK,yBAAyB,QAAQ,IAAI,GAAG;AAChD,aAAO,KAAK,OAAO,SAAS,mBAAmB;IACjD;AACA,uBAAmB,WAAW,QAAQ,QAAQ,WAAW,GAAG,cAAc;AAC1E,WAAO,KAAK,OAAO,GAAE;EACvB;EAEQ,0BACJ,SAA2E,MAAiB;AAC9F,QAAI,QAAQ,YAAO,2BAA0E;AAC3F,aAAO,KAAK,OAAO,SACf,WAAW,YAAY,yBAAmE,EAAE;IAClG;AAEA,UAAM,EAAC,WAAW,YAAY,gBAAe,IAAI;AACjD,aAAS,SACkB,OAAoB,QAC3C,WAAkB;AACpB,UAAI;AACJ,UAAI,SAAS,CAAC,QAAQ;AACpB,iBAAS,KAAK,OAAO,gBAAgB,OAAO,SAAQ,CAAE;MACxD,WAAW,WAAW;AACpB,iBAAS,EAAC,aAAa,MAAM,OAAO,OAAO,YAAW;MACxD,OAAO;AACL,iBAAS,EAAC,OAAO,OAAO,MAAK;MAC/B;AAEA,WAAK,iBAAiB,WAAW,MAAM,MAAM;IAC/C;AACA,WAAO,KAAK,SAAS,YAAY,MAAM,MAAM,iBAAiB,KAAK,mBAAmB,IAAI,GAAG,SAAS,KAAK,IAAI,CAAC;EAClH;EAEQ,MAAM,SAAS,SAA2E,MAAiB;AAEjH,QAAI,QAAQ,YAAO,UAAyD;AAC1E,aAAO,KAAK,OAAO,SAAS,WAAW,YAAY,QAAkD,EAAE;IACzG;AACA,UAAM,WACG,gBAAW,WAAW,SAAQ,EAAG,SAAQ,EAAG,OAAO,OAAK,KAAK,sBAAsB,EAAE,IAAG,GAAI,IAAI,CAAC;AAC1G,UAAM,SAAS,MAAU,QAAI,IAAI,MAAM,UAAU,EAAC,UAAU,MAAK,CAAC;AAClE,aAAS,IAAI,GAAG,IAAI,OAAO,QAAQ,QAAQ,EAAE,GAAG;AAE9C,aAAO,QAAQ,CAAC,EAAE,aAAa,KAAK,UAAU,SAAS,CAAC,CAAC;IAC3D;AACA,WAAO;EACT;EAEQ,aAAa,iBAA0D;AAE7E,QAAI,UAA4B;AAChC,QAAI,2BAAqC,uBAAa,cAAc;AAElE,gBAAmB,kCAAyB,yBAAyB,SAAQ,EAC9D,uBAAuB,eAAe,EACtC,KAAK,YAAU,QAAQ,OAAO,OAAO,CAAC,GACrC,WACZ;IACN;AACA,WAAO,EAAC,KAAK,gBAAgB,WAAU,GAAI,MAAM,gBAAgB,YAAW,EAAG,KAAI,GAAI,QAAO;EAChG;EAEQ,mBAAmB,UAAmB,MAAiB;AAC7D,UAAM,YAAY,oBAAI,IAAG;AAIzB,aAAS,iBACkB,iBAA0D;AACnF,UAAI,CAAC,UAAU,IAAI,gBAAgB,WAAU,CAAE,KAC3C,KAAK,kCAAkC,iBAAiB,IAAI,GAAG;AACjE,kBAAU,IAAI,gBAAgB,WAAU,GAAI,KAAK,aAAa,eAAe,CAAC;MAChF;AACA,aAAO;IACT;AACA,QAAI,gBAA0B,oBAAU,cAAc,SAAQ,EAAG,4BACnD,oBAAU,aAAa,OAAO;AAC5C,oBAAgB,cAAc,OAAiB,oBAAU,cAAc,SAAQ,EAAG,4BACpE,oBAAU,aAAa,cAAc,CAAC;AACpD,kBAAc,QAAQ,iBAAiB,KAAK,IAAI,CAAC;AACjD,eAAW,qBAAyB,mBAAc,cAAc,SAAQ,EAAG,OAC9D,uBAAkB,iBAAiB,GAAG;AACjD,UAAI,KAAK,yBAAyB,kBAAkB,OAAM,GAAI,IAAI,GAAG;AACnE,0BAAkB,gBAAgB,iBAAiB,KAAK,IAAI,CAAC;MAC/D;IACF;AAEA,WAAO,CAAC,GAAG,UAAU,OAAM,CAAE;EAC/B;EAEQ,MAAM,mBACV,iBACA,SAA2E,MAAiB;AAC9F,QAAI,CAAC,KAAK,kCAAkC,iBAAiB,IAAI,GAAG;AAClE,WAAK,iBAAiB,QAAQ,WAAW,MAAM,KAAK,OAAO,SAAS,mBAAmB,CAAC;AACxF,aAAO;IACT;AACA,UAAM,cAAc,MAAM,gBAAgB,mBAAkB;AAC5D,QAAc,sBAAY,YAAY,QAAQ,WAAW,GAAG;AAC1D,WAAK,iBAAiB,QAAQ,WAAW,MAAM,EAAC,UAAU,IAAI,SAAS,KAAI,CAAC;AAC5E;IACF;AACA,UAAM,WAAW,CAAC,YAAY,gBAAgB,WAAW;AACzD,UAAM,UAAU,YAAY,gBAAgB,YAAY,OAAO,YAAY;AAC3E,SAAK,iBAAiB,QAAQ,WAAW,MAAM,EAAC,UAAU,QAAO,CAAC;EACpE;EAEQ,oBACJ,SAA2E,MAAiB;AAC9F,QAAI,QAAQ,YAAO,qBAAoE;AACrF,aAAO,KAAK,OAAO,SACf,WAAW,YAAY,mBAA6D,EAAE;IAC5F;AACA,UAAM,UAAU,KAAK,YAAY,QAAQ,EAAE;AAC3C,QAAI,CAAC,SAAS;AACZ,aAAO,KAAK,OAAO,WAAW,QAAQ,EAAE;IAC1C;AACA,SAAK,KAAK,mBAAmB,SAAS,SAAS,IAAI;AACnD,WAAO;EACT;EAEQ,qBACJ,SAA2E,MAAiB;AAC9F,QAAI,QAAQ,YAAO,sBAAqE;AACtF,aAAO,KAAK,OAAO,SACf,WAAW,YAAY,oBAA8D,EAAE;IAC7F;AACA,UAAM,MAAM,QAAQ;AACpB,UAAM,kBAA4B,oBAAU,cAAc,SAAQ,EAAG,mBAAmB,GAAG,KAC9E,uBAAc,eAAe,GAAG;AAC7C,QAAI,CAAC,iBAAiB;AACpB,aAAO,KAAK,OAAO,WAAW,GAAG;IACnC;AACA,SAAK,KAAK,mBAAmB,iBAAiB,SAAS,IAAI;AAC3D,WAAO;EACT;EAEQ,4BACJ,SAA2E,MAAiB;AAC9F,QAAI,QAAQ,YAAO,6BAA4E;AAC7F,aAAO,KAAK,OAAO,SACf,WAAW,YAAY,oBAA8D,EAAE;IAC7F;AAEA,QAAI,CAAC,QAAQ,cAAc;AACzB,aAAO,KAAK,OAAO,SAAS,wCAAwC;IACtE;AAEA,UAAM,WAAW,KAAK,0BAA0B,QAAQ,YAA+C,IAAI;AAC3G,QAAI,WAAW,UAAU;AACvB,aAAO,SAAS;IAClB;AAEA,UAAM,2BAAoC,kCAAyB,yBAAyB,SAAQ;AACpG,UAAM,cAAc,yBAAyB,uBAAuB,SAAS,YAAY;AACzF,QAAI,YAAY,SAAS,GAAG;AAC1B,iBAAW,UAAU,aAAa;AAChC,cAAM,eAAe,yBAAyB,WAAW,SAAS,cAAc,OAAO,aAAa;AACpG,sBAAc,gBAAgB,QAAQ,YAA+C;MACvF;IACF;AAEA,WAAO,KAAK,OAAO,GAAE;EACvB;EAEQ,qBACJ,SAA2E,MAAiB;AAC9F,QAAI,QAAQ,YAAO,sBAAqE;AACtF,aAAO,KAAK,OAAO,SACf,WAAW,YAAY,oBAA8D,EAAE;IAC7F;AAEA,UAAM,EAAC,KAAK,WAAW,SAAS,OAAM,IAAI;AAC1C,aAAS,gBAAuC,OAAkB;AAChE,YAAM,WAAW,QAAQ,KAAK,OAAO,SAAS,KAAK,IAAI,KAAK,OAAO,GAAE;AACrE,WAAK,iBAAiB,WAAW,MAAM,QAAQ;IACjD;AAEA,UAAM,WAAW,KAAK,0BAA0B,KAAwC,IAAI;AAC5F,QAAI,WAAW,UAAU;AACvB,aAAO,SAAS;IAClB;AACA,UAAM,EAAC,aAAY,IAAI;AACvB,QAAI,CAAC,aAAa,YAAW,EAAG,+BAA8B,GAAI;AAChE,YAAMC,YAAe,uBAAkB,kBAAkB,eAAe,GAAsC;AAC9G,UAAI,CAACA,WAAU;AACb,eAAO,KAAK,OAAO,WAAW,GAAG;MACnC;AACA,aAAO,KAAK,OAAO,eAAe,0BAA0B;IAC9D;AACA,iBAAa,eAAe,OAAO;AACnC,QAAI,QAAQ;AACV,mBAAa,kBAAiB;IAChC;AACA,oBAAgB,KAAK,MAAM,IAAI;AAC/B,WAAO;EACT;EAEQ,UAAU,SAAkD;AAClE,UAAM,YAAY,KAAK,WAAW,IAAI,OAAO;AAC7C,QAAI,cAAc,QAAW;AAC3B,YAAM,QAAQ,EAAE,KAAK;AACrB,WAAK,WAAW,IAAI,SAAS,KAAK;AAClC,WAAK,SAAS,IAAI,OAAO,OAAO;AAChC,aAAO;IACT;AACA,WAAO;EACT;EAEQ,YAAY,IAAU;AAC5B,WAAO,KAAK,SAAS,IAAI,EAAE;EAC7B;EAEQ,uBAAuB,SAAyE;AAEtG,QAAI,QAAQ,YAAO,yBAAuE;AACxF,aAAO,KAAK,OAAO,SACf,WAAW,YAAY,uBAAgE,EAAE;IAC/F;AACA,YAAQ,QAAQ,QAAQ,gBAAgB;AAExC,aAAS,iBAAiB,OAA4C;AAGpE,YAAM,QAAQ,IAAI,OAAO,cAAc,MAAM,WAAW;QACtD,KAAK,MAAM;QACX,MAAM,MAAM;QACZ,SAAS,MAAM;QACf,UAAU,MAAM;QAChB,SAAS,MAAM;QACf,QAAQ,MAAM;QACd,UAAU,MAAM;QAChB,SAAS,MAAM;OAChB;AAGD,YAAM,YAAY,gBAAgB,KAAK;AACvC,eAAS,cAAc,KAAK;IAC9B;AAEA,aAAS,gBAAgB,OAAwB;AAC/C,UAAI,UAAU,MAAM;AACpB,UAAI,CAAC,SAAS;AAEZ,YAAI,MAAM,QAAiB,4BAAkB,YAAY;AACvD,oBAAU;QACZ;MACF;AACA,aAAO,WAAW;IACpB;AACA,WAAO;EACT;EAEQ,iBAAiB,WAAoB,MAAmB,QAAe;AAC7E,QAAI,WAAW;AACb,WAAK,YAAY,EAAC,SAAS,YAAY,WAAW,OAAM,CAAC;IAC3D;EACF;EAEQ,iBAAc;AACpB,SAAK,gCAA+B,kBACmC,oBAAU,cAAc,SAAQ,GACzF,oBAAU,OAAO,mBAAmB,KAAK,mBAAmB;AAC1E,SAAK,6CAA4C,4BACyB,oBAAe,gBACjF,oBAAe,OAAO,iBAAiB,KAAK,qBAAqB;AAEzE,aAAS,gCAA6B;AACpC,MAAG,YAAQ,QAAQ,SAAQ,EAAG,wBACtB,cAAS,SAAS,KAAK,gCAAgC,IAAI;IACrE;AAEA,aAAS,gCAA6B;AACpC,MAAG,YAAQ,QAAQ,SAAQ,EAAG,2BACtB,cAAS,SAAS,KAAK,gCAAgC,IAAI;IACrE;AAEA,SAAK,4BACD,iCACA,8BAA8B,KAAK,IAAI,GAAG,8BAA8B,KAAK,IAAI,CAAC;AACtF,SAAK,wCAAwC,KAAK,kCAAkC;AAEpF,IAAI,mBAAc,cAAc,SAAQ,EAAG,iBAAgB,uBACP,KAAK,qBAAqB,IAAI;EACpF;EAEQ,oBAAoB,OAA+E;AACzG,UAAM,eAAe,MAAM;AAC3B,SAAK,iBAAgB,kBACwC,CAAC,KAAK,aAAa,YAAY,CAAC,GACzF,eAAa,UAAU,kBAAkB,aAAa,IAAG,CAAE,CAAC;EAClE;EAEQ,mCACJ,OAAyF;AAC3F,UAAM,EAAC,cAAc,QAAO,IAAI,MAAM;AACtC,SAAK,iBAAgB,8BACmD,CAAC,KAAK,aAAa,YAAY,GAAG,OAAO,GAC7G,eAAa,UAAU,kBAAkB,aAAa,IAAG,CAAE,CAAC;EAClE;EAEQ,MAAM,sBAAsB,OAA6E;AAE/G,UAAM,UAAU,MAAM;AACtB,UAAM,QAAQ,MAAU,QAAI,MAAM,MAAM,SAAS,EAAC,UAAU,MAAK,CAAC;AAClE,SAAK,iBAAgB,4BACiD,CAAC,KAAK,UAAU,OAAO,GAAG,KAAK,GACjG,eAAa,UAAU,kBAAkB,MAAM,QAAQ,GAAG,CAAC;EACjE;EAEQ,iCAA8B;AACpC,SAAK,iBAAiB,iCAA4E,CAAA,CAAE;EACtG;EAEA,uBAAuB,KAAsC,OAAoC;AAC/F,SAAK,iBACD,gCAA2E,CAAC;MAC1E,WAAW,MAAM;MACjB,aAAa,MAAM;MACnB,SAAS,MAAM;MACf,WAAW,MAAM;MACjB;KACD,GACD,eAAa,UAAU,kBAAkB,GAAG,CAAC;EACnD;EAEQ,kBAAkB,OAAkD;AAC1E,UAAM,QAAQ,KAAK;AACnB,SAAK,iBAAiB,MAAM;AAC5B,QAAI,UAAU,MAAM;AAElB,WAAK,qBAAoB;IAC3B;EACF;EAEA,kBAAkB,EAAC,WAAW,KAAI,GAAoD;AACpF,UAAM,SAAS,SAAS,cAAc,QAAQ;AAC9C,WAAO,MAAM;AACb,WAAO,QAAQ,oBAAoB;AACnC,WAAO,MAAM,UAAU;AACvB,aAAS,KAAK,YAAY,MAAM;EAClC;EAEA,aAAa,eAAgE;AAC3E,UAAM,YAAY,cAAc;AAEhC,UAAM,eAAmB,mBAAc,cAAc,SAAQ,EAAG,kBAAiB,GAAI,aAAY,KAAM;AACvG,QAAI,iBAAiB,IAAI;AACvB,WAAK,mBAAmB,KAAK,aAAa;AAC1C;IACF;AACA,QAAI,CAAC,iBAAgB,cAAc,YAAY,GAAG;AAChD,WAAK,kBAAiB;IACxB;AACA,QAAI,CAAC,KAAK,mBAAmB;AAC3B,WAAK,mBAAmB,KAAK,aAAa;AAC1C;IACF;AACA,UAAM,cAAc,YAAY,OAAO,cAAc,WAAW;AAChE,QAAI,CAAC,aAAa;AAChB;IACF;AACA,QAAI;AACF,YAAM,eAAe,IAAI,IAAK,SAAU;AACxC,YAAM,kBAAkB,aAAa;AACrC,YAAM,OAAO,cAAc,QAAQ,aAAa,eAAe;AAC/D,YAAM,wBAAwB,IAAI,oBAAoB,MAAM,aAAa,QAAQ,cAAc,eAAe,CAAC;AAC/G,UAAI,CAAC,sBAAsB,kBAAkB,YAAY,GAAG;AAC1D,aAAK,mBAAmB,KAAK,aAAa;AAC1C;MACF;AACA,UAAI,CAAC,KAAK,qBAAqB,IAAI,eAAe,GAAG;AAEnD,cAAM,cAAc,KAAK,gCACrB,eAAe,KAAK,gBAAuC,0BAAa,SAAQ,EAAG,UAAS,GACzF,qBAAiB,iBAAiB,SAAQ,EAAG,mBAAkB,GAClE,iBAAgB,SAAQ,EAAG,oBAAoB;AACnD,QAAK,4BAAsB,8BAA8B,2BACrD,iBAAiB,WAAW;AAChC,aAAK,qBAAqB,IAAI,iBAAiB,qBAAqB;MACtE;AACA,WAAK,kBAAkB,aAAa;IACtC,SAAS,GAAG;AACV,cAAQ,MAAM,oCAAoC,YAAY,MAAM,CAAC;AACrE,aAAO;IACT;AACA,WAAO;EACT;EAEQ,kBAAkB,QAAyC,MAAiB;AAClF,QAAI,CAAC,KAAK,qBAAqB,IAAI,MAAM,GAAG;AAC1C,UAAI,WAAW,OAAO,SAAS,QAAQ;AACrC,gBAAQ,MAAM,+CAA+C,MAAM;MACrE;AACA;IACF;AACA,qBAAiB,IAAI,MAAM,MAAM;AACjC,SAAK,iBAAiB,WAAW,KAAK,UAAU,KAAK,IAAI,GAAG,KAAK;AACjE,SAAK,MAAK;EACZ;EAEQ,kBAAkB,CAAC,UAA6B;AACtD,QAAI,MAAM,SAAS,qBAAqB;AACtC,WAAK,kBAAkB,MAAM,QAA2C,MAAM,MAAM,CAAC,CAAC;IACxF;EACF;EAEQ,iBAAiB,MAAiB;AACxC,QAAI,CAAC,KAAK,mBAAmB;AAC3B,aAAO;IACT;AACA,UAAM,SAAS,iBAAiB,IAAI,IAAI;AACxC,QAAI,CAAC,QAAQ;AACX,aAAO;IACT;AACA,UAAM,YAAY,KAAK,qBAAqB,IAAI,MAAM;AACtD,QAAI,CAAC,WAAW;AACd,aAAO;IACT;AACA,WAAO,UAAU,kBAAiB;EACpC;EAEQ,MAAM,UAAU,OAAmB;AACzC,UAAM,UAAU,MAAM;AACtB,QAAI;AAEJ,UAAM,OAAO,MAAM;AACnB,UAAM,UAAU,KAAK,SAAS,IAAI,QAAQ,OAAO;AAEjD,QAAI,CAAC,SAAS;AACZ,eAAS,KAAK,OAAO,eAAe,QAAQ,OAAO;IACrD,WAAW,CAAC,KAAK,iBAAiB,IAAI,GAAG;AACvC,eAAS,KAAK,OAAO,SAAS,mBAAmB;IACnD,OAAO;AACL,eAAS,MAAM,QAAQ,SAAS,MAAM,MAAqB;IAC7D;AAEA,QAAI,UAAU,QAAQ,WAAW;AAC/B,WAAK,iBAAiB,QAAQ,WAAW,MAAM,QAAuB,MAAM;IAC9E;EACF;EAEQ,gBACJ,SACA,UAC6G;AAE/G,YAAQ,OAAO,QAAQ,OAAO,CAAC;AAC/B,SAAK,SAAS,IAAI,SAAS,QAAQ;EACrC;EAEQ,4BACJ,YAAoB,kBAAiC,mBAAgC;AACvF,SAAK,0BAA0B,IAAI,YAAY,gBAAgB;AAC/D,SAAK,yBAAyB,IAAI,YAAY,iBAAiB;EACjE;EAEQ,gCACJ,YAAoB,aAAqD,mBACzE,SAAoD;AACtD,SAAK,4BACD,YAAY,MAAM,YAAY,iBAAiB,mBAAmB,SAAS,IAAI,GAC/E,MAAM,YAAY,oBAAoB,mBAAmB,SAAS,IAAI,CAAC;EAC7E;EAEQ,6CACJ,YAAoB,YACpB,mBAAsB,SAAoD;AAC5E,SAAK,4BACD,YACA,MAAU,mBAAc,cAAc,SAAQ,EAAG,iBAAiB,YAAY,mBAAmB,SAAS,IAAI,GAC9G,MAAU,mBAAc,cAAc,SAAQ,EAAG,oBAC7C,YAAY,mBAAmB,SAAS,IAAI,CAAC;EACvD;EAEQ,wCACJ,SAA8G;AAEhH,aAAS,wBAAqB;AAC5B,MAAU,oBAAU,cAAc,SAAQ,EAAG,iBAC/B,oBAAU,OAAO,4BAA4B,SAAS,IAAI;AACxE,MAAU,oBAAU,cAAc,SAAQ,EAAG,wCAAwC,IAAI;IAC3F;AAEA,aAAS,0BAAuB;AAC9B,MAAU,oBAAU,cAAc,SAAQ,EAAG,wCAAwC,KAAK;AAC1F,MAAU,oBAAU,cAAc,SAAQ,EAAG,oBAC/B,oBAAU,OAAO,4BAA4B,SAAS,IAAI;IAC1E;AAEA,SAAK,4BAA2B,8BACwC,sBAAsB,KAAK,IAAI,GACnG,wBAAwB,KAAK,IAAI,CAAC;EACxC;EAEA,OAAO,mBAAmB,iBAAkD,cAAoB;AAE9F,UAAM,iBAAiB,IAAI,IAAI,eAAe,EAAE;AAChD,UAAM,cAAc,IAAI,IAAW,kBAAU,cAAc,YAAY,GAAG,cAAc;AACxF,QAAI,YAAY,WAAW,gBAAgB;AACzC,aAAO;IACT;AACA,WAAO,YAAY;EACrB;EAEA,SACI,YAAoB,sBAA+B,eACnD,SAAuE,gBACvE,UAAiG;AAEnG,QAAI;AAEJ,aAAS,kBAAkB,KAAoC;AAC7D,UAAI,QAAQ;AACZ,eAAS,eAAeC,QAA8C;AAEpE,gBAASA,OAAM,QAAQ,MAAOA,SAAQ;AACtC,eAAO;MACT;AACA,MAAI,uBAAkB,kBAAkB,OAAM,EAAG,KAAK,cAAc;AACpE,aAAO;IACT;AAEA,cAAU,WAAW,CAAA;AACrB,QAAI;AACJ,QAAI,QAAQ,UAAU;AACpB,cAAQ,kBAAkB,QAAQ,QAA2C;IAC/E,OAAO;AACL,YAAM,SAAa,mBAAc,cAAc,SAAQ,EAAG,kBAAiB;AAC3E,YAAM,oBAAoB,QAAQ,MAAU,uBAAkB,iBAAiB;AAC/E,cAAQ,mBAAmB;IAC7B;AACA,QAAI,CAAC,OAAO;AACV,UAAI,QAAQ,UAAU;AACpB,gBAAQ,KAAK,0CAA0C,QAAQ,QAAQ;MACzE,OAAO;AACL,gBAAQ,KAAK,+CAA+C;MAC9D;AACA,aAAO,KAAK,OAAO,WAAW,QAAQ,YAAY,OAAO;IAC3D;AAGA,UAAM,YAAY,KAAK,qBAAqB,IAAI,cAAc;AAC9D,QAAI,CAAC,WAAW,kBAAkB,MAAM,GAAG,GAAG;AAC5C,aAAO,KAAK,OAAO,SAAS,mBAAmB;IACjD;AAEA,QAAI;AACJ,QAAI,QAAQ,yBAAyB;AACnC,8BAAwB;IAC1B,WAAW,QAAQ,wBAAwB;AACzC,8BAAwB,QAAQ;IAClC;AAEA,UAAM,eAAe,MAAM,kBAAiB,EAAG,OAAM,EAAG,MAAU,kBAAa,YAAY;AAC3F,UAAM,oBAAoB,eAAe,aAAa,kBAAiB,IAAK,CAAA;AAC5E,QAAI,uBAAuB;AACzB,eAAS,IAAI,GAAG,IAAI,kBAAkB,QAAQ,EAAE,GAAG;AACjD,cAAM,mBAAmB,kBAAkB,CAAC;AAC5C,YAAI,iBAAiB,YAAY,MAAM,MAAM,iBAAiB,WAAW,yBACrE,CAAC,iBAAiB,WAAW;AAC/B,oBAAU;QACZ;MACF;AACA,UAAI,CAAC,SAAS;AACZ,gBAAQ,KAAK,4BAA4B,wBAAwB,iCAAiC,MAAM,GAAG;AAC3G,eAAO,KAAK,OAAO,WAAW,qBAAqB;MACrD;IACF,OAAO;AACL,eAAS,IAAI,GAAG,IAAI,kBAAkB,QAAQ,EAAE,GAAG;AACjD,cAAM,mBAAmB,kBAAkB,CAAC;AAC5C,YAAI,iBAAiB,YAAY,MAAM,MAAM,iBAAiB,WAAW;AACvE,oBAAU;QACZ;MACF;AACA,UAAI,CAAC,SAAS;AACZ,eAAO,KAAK,OAAO,SAAS,MAAM,MAAM,2BAA2B;MACrE;IACF;AACA,QAAI,CAAC,WAAW,kBAAkB,QAAQ,MAAM,GAAG;AACjD,aAAO,KAAK,OAAO,SAAS,mBAAmB;IACjD;AAEA,SAAK,QACA;MACG;QACE;QACA,aAAa;QACb,uBAAuB;QACvB,QAAQ;QACR;QACA,iBAAiB;;;MAED;;MAA0B;IAAK,EACpD,KAAK,UAAU;AAEpB,aAAS,WAAW,QAAyC;AAC3D,UAAI,WAAW,QAAQ;AACrB,iBAAS,OAAO,OAAO,MAAM,KAAK;AAClC;MACF;AACA,eAAS,MAAM,OAAO,UAAU,MAAM,QAAQ,OAAO,gBAAgB,CAAC;IACxE;AACA,WAAO;EACT;EAEA,OAAO,cAAc,KAAoC;AACvD,QAAI;AAGJ,QAAI;AACF,kBAAY,IAAI,IAAI,GAAG;IACzB,QAAQ;AACN,aAAO;IACT;AAEA,QAAI,CAAC,kBAAkB,SAAS,UAAU,QAAQ,GAAG;AACnD,aAAO;IACT;AAEA,SAAK,OAAO,aAAa,mCAAkC,KAAM,CAAA,GAAI,SAAS,UAAU,MAAM,GAAG;AAC/F,aAAO;IACT;AAEA,QAAI,KAAK,yBAAyB,SAAS,GAAG;AAC5C,aAAO;IACT;AAEA,WAAO;EACT;;;;;;;;;;EAWA,OAAO,yBAAyB,WAAc;AAC5C,QAAI,UAAU,SAAS,WAAW,MAAM,KAAK,UAAU,SAAS,MAAM,0BAA0B,KAC5F,UAAU,SAAS,WAAW,WAAW,GAAG;AAC9C,aAAO;IACT;AACA,QAAI,UAAU,SAAS,WAAW,MAAM,KAAK,UAAU,SAAS,MAAM,kCAAkC,GAAG;AACzG,aAAO;IACT;AAEA,WAAO;EACT;EAEQ,oBAAiB;AACvB,SAAK,oBAAoB;EAC3B;EAEQ,mBAAgB;AACtB,SAAK,oBAAoB;EAC3B;;AAWF,IAAM,2BAAN,cAA0C,SAAK,WAAU;EACtC;EACA;EAEjB,YAAY,MAAc,OAA0C,OAAqB;AAKvF,UAAM,SAAkB,0BAAgB,YAAY,KAAK;AACzD,UAAM,EAAC,OAAO,OAAM,CAAC;AACrB,SAAK,OAAO;AACZ,SAAK,QAAQ;EACf;EAES,SAAM;AACb,WAAO,KAAK;EACd;EAES,SAAM;AACb,WAAO,QAAQ,QAAQ,KAAK,KAAK;EACnC;;AAGI,IAAO,kBAAP,MAAsB;EAC1B;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EAEA,cAAA;AACE,aAAS,WAAW,MAAc,gBAAwB,SAAkB;AAC1E,YAAM,SAAiB,EAAC,MAAM,aAAa,QAAO;AAClD,UAAI,SAAS,MAAM;AACjB,eAAO,UAAU;AACjB,gBAAQ,MAAM,6BAAsC,0BAAgB,QAAQ,aAAa,GAAG,OAAO,CAAC;MACtG;AACA,aAAO;IACT;AAEA,SAAK,KAAK,WAAW,KAAK,MAAM,MAAM,IAAI;AAC1C,SAAK,WAAW,WAAW,KAAK,MAAM,YAAY,2BAA2B;AAC7E,SAAK,WAAW,WAAW,KAAK,MAAM,YAAY,yBAAyB;AAC3E,SAAK,eAAe,WAAW,KAAK,MAAM,gBAAgB,mDAAmD;AAC7G,SAAK,aAAa,WAAW,KAAK,MAAM,cAAc,sBAAsB;AAC5E,SAAK,iBAAiB,WAAW,KAAK,MAAM,kBAAkB,iDAAiD;AAC/G,SAAK,kBAAkB,WAAW,KAAK,MAAM,mBAAmB,8BAA8B;AAC9F,SAAK,WAAW,WAAW,KAAK,MAAM,YAAY,sBAAsB;EAC1E;;;;AC9qDF;;;;;AAKA,YAAYC,aAAY;AACxB,YAAYC,YAAU;AACtB,YAAYC,eAAc;AAC1B,YAAY,iBAAiB;AAC7B,YAAYC,gBAAe;AAC3B,YAAY,gBAAgB;AAC5B,YAAYC,iBAAgB;AAC5B,YAAYC,UAAQ;AAEpB,IAAMC,aAAY;;;;;EAKhB,oBAAoB;;;;;EAKpB,WAAW;;AAEb,IAAMC,QAAY,YAAK,kBAAkB,qCAAqCD,UAAS;AACvF,IAAME,cAAkB,YAAK,mBAAmB,KAAK,QAAWD,KAAI;AAC9D,IAAO,mBAAP,MAAO,kBAAgB;EAC3B,OAAO,uBAAuB,cAAiD;AAC7E,UAAM,UAAsB,wBAAY,gBAAgB,SAAQ,EAAG,QAAQ,YAAY;AACvF,QAAI,CAAC,SAAS;AACZ,aAAO;IACT;AACA,QAAI,iBAAiB,QAAQ,SAAS;AACpC,aAAmB,uCAA2B,2BAA2B,uBACrE,QAAQ,UAAU;IACxB;AACA,QAAI,QAAQ,QAAQ,YAAW,EAAG,gBAAe,GAAI;AACnD,aAAOC,YACHF,WAAU,oBAAoB,EAAC,KAAc,0BAAgB,WAAW,QAAQ,QAAQ,IAAG,GAAI,GAAG,EAAC,CAAC;IAC1G;AACA,WAAOE,YAAWF,WAAU,WAAW,EAAC,KAAc,0BAAgB,WAAW,QAAQ,QAAQ,IAAG,GAAI,GAAG,EAAC,CAAC;EAC/G;EAEA,OAAO,oBAAoB,cAAiD;AAC1E,UAAM,UAAsB,wBAAY,gBAAgB,SAAQ,EAAG,QAAQ,YAAY;AACvF,QAAI,SAAS;AACX,UAAI,CAAQ,kBAAU,SAAS,QAAQ,WAAW,IAAG,GAAI,OAAO,GAAG;AACjE,eAAO;MACT;AACA,YAAMG,QAAO,IAAe,gBAAK,KAAI;AACrC,MAAAA,MAAK,OAAO;AACZ,MAAAA,MAAK,UAAU,IAAI,OAAO;AAC1B,MAAG,aAAQ,QAAQ,QAAQA,OAAM,kBAAiB,uBAAuB,QAAQ,OAAO,CAAC;AACzF,UAAgB,sCAA0B,0BAA0B,SAAQ,EAAG,QAAO,MAClF,QAAQ,WAAW,QAAO,GAAI;AAChC,QAAAA,MAAK,UAAU,IAAI,OAAO,QAAQ;MACpC,OAAO;AACL,QAAAA,MAAK,UAAU,IAAI,OAAO,OAAO;MACnC;AACA,aAAOA;IACT;AAEA,QAAI,aAAa,QAAO,EAAG,KAAI,MAAiB,qBAAU,aAAa,cACnE,CAAQ,kBAAU,SAAS,aAAa,IAAG,GAAI,OAAO,GAAG;AAC3D,aAAO;IACT;AAEA,QAAgB,sCAA0B,0BAA0B,SAAQ,EAAG,wBACvE,YAAY,GAAG;AACrB,YAAMA,QAAO,IAAe,gBAAK,KAAI;AACrC,MAAAA,MAAK,OAAO;AACZ,MAAAA,MAAK,UAAU,IAAI,OAAO;AAC1B,MAAAA,MAAK,UAAU,IAAI,OAAO,QAAQ;AAClC,aAAOA;IACT;AAEA,UAAM,OAAO,IAAe,gBAAK,KAAI;AACrC,SAAK,OAAO;AACZ,SAAK,UAAU,IAAI,OAAO;AAC1B,IAAG,aAAQ,QAAQ,QAAQ,MAAM,kBAAiB,uBAAuB,YAAY,CAAC;AACtF,WAAO;EACT;;AAGI,IAAO,gBAAP,cAAoC,sBAAc,cAA4D;EAElH,YAAY,aAAoD;AAC9D,UAAK;AACL,gBAAY,iBAA6B,wBAAY,OAAO,gBAAgB,KAAK,gBAAgB,IAAI;AACrG,gBAAY,iBAA6B,wBAAY,OAAO,gBAAgB,KAAK,gBAAgB,IAAI;EACvG;EAEQ,eAAe,OAAsF;AAC3G,UAAM,UAAU,MAAM;AACtB,SAAK,yBAAwB,mBAA8D,QAAQ,OAAO;EAC5G;EAEA,SAAS,cAAiD;AACxD,WAAO,iBAAiB,oBAAoB,YAAY;EAC1D;;;;ACrGF;;;;mBAAAC;;AAIA,YAAYC,aAAY;AACxB,YAAYC,YAAU;AACtB,YAAYC,UAAS;AACrB,YAAYC,UAAQ;AACpB,SAAQ,cAAAC,aAAY,QAAAC,OAAM,WAAAC,UAAS,UAAAC,eAAa;AAChD,YAAYC,oBAAmB;;;ACJ/B,IAAO,2BAAQ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAuDC,YAAY,QAAQ,oBAAoB,CAAC;;;AD/CzD,IAAM,EAAC,SAAQ,IAAIC;AAEnB,IAAMC,aAAY;;;;;;EAMhB,MAAM;;AAER,IAAMC,QAAY,YAAK,kBAAkB,iCAAiCD,UAAS;AACnF,IAAME,cAAkB,YAAK,mBAAmB,KAAK,QAAWD,KAAI;AA2BpE,IAAME,gBAAqB,CAAC,OAAO,SAAS,WAAuB;AAEjE,EAAAC,QAAOC,QAAQ,MAAM,WAAW,MAAM,SAAWA;aACtC,wBAAkB;;wDAEyB,SAAS;IACrD,gBAAgB,QAAQ,MAAM,OAAO;IACrC,UAAU,QAAQ,MAAM,QAAQ;GACjC,CAAC;kBACoB,oBAAK,MAAM,EAAE,MAAM,EAAC,OAAO,MAAM,SAAS,QAAO,CAAC,CAAC;qBAC9D,MAAM,uBAAuB,KAAK,CAAC;mBACrC,MAAM,OAAO;uBACT,MAAM,WAAW;wBAChB,MAAM,YAAY;kBACxB;IACN,MAAM,WAAW;IACjB,MAAM,KAAK,IAAI,MAAM,EAAE,KAAK;IAC5B,GAAG,MAAM,QAAQ,IAAI,OAAK,IAAI,CAAC,EAAE;IACjC,MAAM,SAAS,KAAK,MAAM,MAAM,KAAK;IACrC,KAAK,GAAG,CAAC,IACZ;IACC,MAAM,UAAUA,sCAAqC,MAAM,OAAO,YAAYC;IAC9E,MAAM,KAAKD,qCAAoC,MAAM,EAAE,YAAYC;IACnE,GAAG,MAAM,QAAQ,IAAI,eAAaD,8CAA6C,SAAS,SAAS;IACjG,MAAM,SAASA,8CAA6C,MAAM,MAAM,YAAYC;GAExF;eACSJ,YAAWF,WAAU,IAAI,CAAC,IAAI,MAAM;AAEnD;AAEM,IAAO,cAAP,cAA8B,YAAO,OAAM;EAC/C,QAAwC;EACxC,WAA8B;EAC9B;EAEA,YAAY,SAAuB,MAA6B,SAAmB,OAAOG,eAAY;AACpG,UAAM,SAAS,EAAC,cAAc,KAAI,CAAC;AACnC,SAAK,QAAQ,UAAU,OAAO,MAAM;AACpC,SAAK,QAAQ;AACb,SAAK,WAAW;AAChB,SAAK,QAAQ;AACb,SAAK,cAAa;EACpB;EAEA,IAAI,KAAK,MAAoC;AAC3C,SAAK,QAAQ;AACb,SAAK,cAAa;EACpB;EAEA,IAAI,QAAQ,SAA0B;AACpC,SAAK,WAAW;AAChB,SAAK,cAAa;EACpB;EAES,gBAAa;AACpB,UAAM,UAAU,KAAK,YAAY;MAC/B,SAAS;MACT,sBAAsB;MACtB,aAAa;MACb,eAAe;MACf,UAAU;;AAEZ,UAAM,YAAuB;MAC3B,SAAS,QAAQ;MACjB,UAAU,QAAQ;MAClB,sBAAsB,QAAQ;MAC9B,SAAS,CAAA;MACT,SAAS,MAAK;AACZ,aAAY,iBAAS,OAAO,KAAK,KAAK;AACtC,aAAK,KAAK,OAAO,eAAc;AAC/B,eAAO;MACT;MACA,aAAa,MAAK;AAChB,aAAK,OAAO,YAAW;MACzB;MACA,cAAc,MAAK;AACjB,QAAI,kBAAa,aAAa,qBAAoB;MACpD;;AAEF,QAAI,CAAC,KAAK,OAAO;AACf,WAAK,MAAM,WAAW,CAAA,GAAI,KAAK,cAAc;AAC7C;IACF;AAEA,QAAI,OAAO,KAAK;AAChB,UAAM,WAAW,KAAK,SAAQ,MAAO,KAAK,gBAAgB,KAAK,WAAU;AACzE,QAAI,YAAY,KAAK,YAAY;AAC/B,aAAO,KAAK;IACd;AAKA,QAAI,KAAK,2BAA0B,GAAI;AACrC,gBAAU,SAAS,KAAK,KAAK,MAAM,WAAU,CAAE,IAAI,KAAK,MAAM,iBAAgB,CAAE;AAChF,WAAK,MAAM,WAAW,CAAA,GAAI,KAAK,cAAc;AAC7C;IACF;AAEA,QAAI,QAAQ,aAAa;AACvB,gBAAU,UAAU,QAAQ;AAC5B,WAAK,MAAM,WAAW,CAAA,GAAI,KAAK,cAAc;AAC7C;IACF;AAEA,cAAU,UAAU,KAAK,sBAAqB;AAE9C,UAAM,cAAc,KAAK,aAAa,IAAI;AAC1C,QAAI,aAAa;AACf,gBAAU,KAAK;IACjB;AAEA,UAAM,iBAAiB,KAAK,aAAa,OAAO;AAChD,QAAI,gBAAgB;AAClB,YAAM,UAAU,eAAe,MAAM,KAAK;AAC1C,UAAI,QAAQ,QAAQ;AAClB,cAAM,eAAe,oBAAI,IAAG;AAC5B,iBAAS,IAAI,GAAG,IAAI,QAAQ,QAAQ,EAAE,GAAG;AACvC,gBAAM,YAAY,QAAQ,CAAC;AAC3B,cAAI,aAAa,CAAC,QAAQ,iBAAiB,SAAS,SAAS,KAAK,CAAC,aAAa,IAAI,SAAS,GAAG;AAC9F,yBAAa,IAAI,SAAS;UAC5B;QACF;AACA,kBAAU,UAAU,CAAC,GAAG,YAAY;MACtC;IACF;AACA,QAAI,UAAU;AACZ,YAAM,mBAAmB,KAAK,MAAM,iBAAgB;AACpD,UAAI,aAAa,OAAO,KAAK,MAAM,WAAU;AAC7C,UAAI,kBAAkB;AACpB,sBAAc,IAAI,gBAAgB;MACpC;AACA,gBAAU,SAAS;IACrB;AACA,SAAK,MAAM,WAAW,CAAA,GAAI,KAAK,cAAc;EAC/C;;AAUF,IAAM,wBAAsC,CAAC,OAAO,SAAS,WAAuB;AAElF,EAAAC,QAAOC;eACM,wBAAkB;;kBAED,oBAAK,MAAM,EAAE,MAAM,EAAC,OAAO,KAAI,CAAC,CAAC;qBAC5C,MAAM,uBAAuB,KAAK,CAAC;mBACrC,MAAM,OAAO;uBACT,CAAC,MAAa,EAAE,QAAO,CAAE;;kBAE9B,MAAM;AAExB;AAEM,IAAO,sBAAP,cAAsC,YAAO,OAAM;EACvD,gBAAwD;EACxD,WAA8B;EAC9B;EAEA,YACI,SAAuB,cAA6C,SACpE,OAAqB,uBAAqB;AAC5C,UAAM,SAAS,EAAC,cAAc,KAAI,CAAC;AACnC,SAAK,QAAQ,UAAU,OAAO,MAAM;AACpC,SAAK,gBAAgB;AACrB,SAAK,WAAW;AAChB,SAAK,QAAQ;AACb,SAAK,cAAa;EACpB;EAES,gBAAa;AACpB,UAAM,YAAY;MAChB,sBAAsB,KAAK,UAAU;MACrC,SAAS,MAAK;AACZ,aAAK,eAAe,UAAU,UAAO;AACnC,eAAY,iBAAS,OAAO,IAAI;AAChC,eAAK,MAAM,eAAc;QAC3B,CAAC;MACH;;AAEF,SAAK,MAAM,WAAW,CAAA,GAAI,KAAK,cAAc;EAC/C;;AAGF,IAAI;AAEE,IAAOE,aAAP,MAAO,WAAS;EACpB,OAAO,SAAS,OAEZ,EAAC,UAAU,KAAI,GAAC;AAClB,UAAM,EAAC,SAAQ,IAAI;AACnB,QAAI,CAAC,qBAAqB,UAAU;AAClC,0BAAoB,IAAI,WAAS;IACnC;AAEA,WAAO;EACT;EACA,QAAQ,MAAyD,SAAiB;AAChF,QAAI,gBAAoB,cAAS,SAAS;AACxC,YAAMC,QAAO,SAAS,cAAc,iBAAiB;AACrD,MAAAA,MAAK,eAAkB,YAAO,aAAa,OAAK,IAAI,YAAY,GAAG,MAAM,OAAO,CAAC;AACjF,aAAOA;IACT;AACA,QAAI,gBAAoB,cAAS,iBAAiB;AAChD,YAAMA,QAAO,SAAS,cAAc,iBAAiB;AACrD,MAAAA,MAAK,eAAkB,YAAO,aAAa,OAAK,IAAI,oBAAoB,GAAG,MAAM,OAAO,CAAC;AACzF,aAAOA;IACT;AACA,UAAM,IAAI,MAAM,wBAAyB;EAC3C;;;;AlB3PF,IAAMC,aAAY;;;;EAIhB,QAAQ;;;;EAIR,OAAO;;AAGT,IAAMC,QAAY,YAAK,kBAAkB,2BAA2BD,UAAS;AAC7E,IAAME,cAAkB,YAAK,mBAAmB,KAAK,QAAWD,KAAI;AAE9D,IAAO,oBAAP,MAAwB;EAC5B,aAAa,KAAK,SASjB;AACC,UAAME,UAAS,IAAO,YAAO,OAAO,QAAQ,aAAa,MAAM;AAC/D,IAAAA,QAAO,kBAAkB,IAAa,eAAK,KAAK,GAAG,CAAC;AACpD,IAAAA,QAAO;MAAe;;IAAA;AACtB,IAAAA,QAAO,UAAU,IAAI;AACrB,UAAM,aAAgB,aAAQ,+BAA+BA,QAAO,gBAAgB,EAAC,SAAS,mBAAY,CAAC;AAC3G,UAAM,UAAU,WAAW,YAAY,OAAO,sBAAsB;AAEpE,UAAM,SAAS,MAAM,IAAI,QAAiB,aAAU;AAClD,YAAM,SAAS,QAAQ,YAAY,OAAO,QAAQ;AAClD,aAAO,YAAY,OAAO,OAAO,EAAE,cAAc,QAAQ;AAEzD,YAAM,cAAc,OAAO,YAAY,mBAAmB,qBAAqB;AAC/E,kBAAY,YAAY,IAAI;AAC5B,WAAK,gBAAgB,aAAa,WAAQ;AACxC,QAAAA,QAAO,KAAI;AACX,cAAM,QAAQ,IAAI;AAClB,gBAAQ,KAAK;MACf,CAAC;AACD,kBAAY;QAAO;;MAAA;AAEnB,cAAQ,YAAY,OAAO,SAAS,EAAE,cAAc,QAAQ;AAE5D,YAAM,QAAW,aAAQ,YAAY,cAAc,QAAQ,QAAQ,aAAa,KAAK;AACrF,YAAM,cAAc,QAAQ;AAC5B,cAAQ,YAAY,KAAK;AAEzB,YAAM,aAAa,QAAQ,YAAY,OAAO,QAAQ;AACtD,YAAM,eACC,aAAQ,iBAAiBD,YAAWF,WAAU,MAAM,GAAG,MAAM,QAAQ,KAAK,GAAG,EAAC,cAAc,SAAQ,CAAC;AAE5G,YAAM,cAAiB,aAAQ,iBAAiBE,YAAWF,WAAU,KAAK,GAAG,MAAK;AAChF,gBAAQ,MAAM,UAAU,QAAQ,UAAU;MAC5C,GAAG;QAAC,cAAc;QAAW,SAAO;;MAAgC,CAAC;AACrE,kBAAY,WAAW;AAEvB,iBAAW,YAAY,WAAW;AAClC,iBAAW,YAAY,YAAY;AAEnC,YAAM,iBAAiB,SAAS,MAAK;AACnC,oBAAY,WAAW,CAAC,QAAQ,MAAM,KAAK;MAC7C,GAAG,KAAK;AACR,YAAM,iBAAiB,SAAS,OAAK,EAAE,eAAc,CAAE;AACvD,YAAM,iBAAiB,QAAQ,OAAK,EAAE,eAAc,CAAE;AAEtD,MAAAG,QAAO,wBAAwB,WAAQ;AACrC,cAAM,QAAO;AACb,gBAAQ,KAAK;MACf,CAAC;AACD,MAAAA,QAAO,KAAI;AACX,MAAK,kBAAY,YAAiB,kBAAY,OAAO,yBAAyB;IAChF,CAAC;AACD,IAAAA,QAAO,KAAI;AACX,WAAO;EACT;;",
  "names": ["Host", "i18n", "Geometry", "Buttons", "UI", "i18n", "UI", "html", "render", "dialog", "render", "html", "Common", "Host", "i18n", "Buttons", "Snackbars", "UI", "html", "render", "UIStrings", "str_", "i18nString", "DEFAULT_VIEW", "render", "html", "dialog", "Host", "i18n", "Root", "UI", "html", "nothing", "render", "VisualLogging", "UIStringsNotTranslate", "lockedString", "render", "nothing", "html", "Host", "i18n", "UI", "Directives", "html", "nothing", "render", "VisualLogging", "UIStringsNotTranslate", "lockedString", "DEFAULT_SUMMARY_TOOLBAR_VIEW", "render", "nothing", "Directives", "html", "Common", "Host", "i18n", "Badges", "Buttons", "UIHelpers", "uiI18n", "UI", "Lit", "VisualLogging", "html", "render", "Lit", "UIStrings", "str_", "i18nString", "lockedString", "DEFAULT_VIEW", "Platform", "UI", "UI", "Lit", "render", "html", "DEFAULT_VIEW", "item", "Common", "Host", "i18n", "Platform", "SDK", "Extensions", "UI", "action", "resource", "frame", "Common", "i18n", "Platform", "Workspace", "Components", "UI", "UIStrings", "str_", "i18nString", "icon", "Linkifier", "Common", "i18n", "SDK", "UI", "Directives", "html", "nothing", "render", "VisualLogging", "Directives", "UIStrings", "str_", "i18nString", "DEFAULT_VIEW", "render", "html", "nothing", "Linkifier", "link", "UIStrings", "str_", "i18nString", "dialog"]
}
