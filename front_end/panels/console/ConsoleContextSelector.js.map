{"version":3,"file":"ConsoleContextSelector.js","sourceRoot":"","sources":["../../../../../../front_end/panels/console/ConsoleContextSelector.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright 2015 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as Common from '../../core/common/common.js';\nimport * as i18n from '../../core/i18n/i18n.js';\nimport * as Platform from '../../core/platform/platform.js';\nimport * as SDK from '../../core/sdk/sdk.js';\nimport * as UI from '../../ui/legacy/legacy.js';\nimport * as Lit from '../../ui/lit/lit.js';\n\nimport consoleContextSelectorStyles from './consoleContextSelector.css.js';\n\nconst {render, nothing, html} = Lit;\nconst UIStrings = {\n  /**\n   * @description Title of toolbar item in console context selector of the console panel\n   */\n  javascriptContextNotSelected: 'JavaScript context: Not selected',\n  /**\n   * @description Text in Console Context Selector of the Console panel\n   */\n  extension: 'Extension',\n  /**\n   * @description Text in Console Context Selector of the Console panel\n   * @example {top} PH1\n   */\n  javascriptContextS: 'JavaScript context: {PH1}',\n} as const;\nconst str_ = i18n.i18n.registerUIStrings('panels/console/ConsoleContextSelector.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\nexport class ConsoleContextSelector implements SDK.TargetManager.SDKModelObserver<SDK.RuntimeModel.RuntimeModel>,\n                                               UI.SoftDropDown.Delegate<SDK.RuntimeModel.ExecutionContext> {\n  readonly items: UI.ListModel.ListModel<SDK.RuntimeModel.ExecutionContext>;\n  private readonly dropDown: UI.SoftDropDown.SoftDropDown<SDK.RuntimeModel.ExecutionContext>;\n  readonly #toolbarItem: UI.Toolbar.ToolbarItem;\n\n  constructor() {\n    this.items = new UI.ListModel.ListModel();\n    this.dropDown = new UI.SoftDropDown.SoftDropDown(this.items, this, 'javascript-context');\n    this.dropDown.setRowHeight(36);\n    this.#toolbarItem = new UI.Toolbar.ToolbarItem(this.dropDown.element);\n    this.#toolbarItem.setEnabled(false);\n    this.#toolbarItem.setTitle(i18nString(UIStrings.javascriptContextNotSelected));\n    this.items.addEventListener(\n        UI.ListModel.Events.ITEMS_REPLACED, () => this.#toolbarItem.setEnabled(Boolean(this.items.length)));\n\n    this.#toolbarItem.element.classList.add('toolbar-has-dropdown');\n\n    SDK.TargetManager.TargetManager.instance().addModelListener(\n        SDK.RuntimeModel.RuntimeModel, SDK.RuntimeModel.Events.ExecutionContextCreated, this.onExecutionContextCreated,\n        this, {scoped: true});\n    SDK.TargetManager.TargetManager.instance().addModelListener(\n        SDK.RuntimeModel.RuntimeModel, SDK.RuntimeModel.Events.ExecutionContextChanged, this.onExecutionContextChanged,\n        this, {scoped: true});\n    SDK.TargetManager.TargetManager.instance().addModelListener(\n        SDK.RuntimeModel.RuntimeModel, SDK.RuntimeModel.Events.ExecutionContextDestroyed,\n        this.onExecutionContextDestroyed, this, {scoped: true});\n    SDK.TargetManager.TargetManager.instance().addModelListener(\n        SDK.ResourceTreeModel.ResourceTreeModel, SDK.ResourceTreeModel.Events.FrameNavigated, this.frameNavigated, this,\n        {scoped: true});\n\n    UI.Context.Context.instance().addFlavorChangeListener(\n        SDK.RuntimeModel.ExecutionContext, this.executionContextChangedExternally, this);\n    UI.Context.Context.instance().addFlavorChangeListener(\n        SDK.DebuggerModel.CallFrame, this.callFrameSelectedInUI, this);\n    SDK.TargetManager.TargetManager.instance().observeModels(SDK.RuntimeModel.RuntimeModel, this, {scoped: true});\n    SDK.TargetManager.TargetManager.instance().addModelListener(\n        SDK.DebuggerModel.DebuggerModel, SDK.DebuggerModel.Events.CallFrameSelected, this.callFrameSelectedInModel,\n        this);\n  }\n\n  toolbarItem(): UI.Toolbar.ToolbarItem {\n    return this.#toolbarItem;\n  }\n\n  highlightedItemChanged(\n      _from: SDK.RuntimeModel.ExecutionContext|null, to: SDK.RuntimeModel.ExecutionContext|null,\n      fromElement: Element|null, toElement: Element|null): void {\n    SDK.OverlayModel.OverlayModel.hideDOMNodeHighlight();\n    if (to?.frameId) {\n      const frame = SDK.FrameManager.FrameManager.instance().getFrame(to.frameId);\n      if (frame && !frame.isOutermostFrame()) {\n        void frame.highlight();\n      }\n    }\n    if (fromElement) {\n      fromElement.classList.remove('highlighted');\n    }\n    if (toElement) {\n      toElement.classList.add('highlighted');\n    }\n  }\n\n  titleFor(executionContext: SDK.RuntimeModel.ExecutionContext): string {\n    const target = executionContext.target();\n    const maybeLabel = executionContext.label();\n    let label: string = maybeLabel ? target.decorateLabel(maybeLabel) : '';\n    if (executionContext.frameId) {\n      const resourceTreeModel = target.model(SDK.ResourceTreeModel.ResourceTreeModel);\n      const frame = resourceTreeModel?.frameForId(executionContext.frameId);\n      if (frame) {\n        label = label || frame.displayName();\n      }\n    }\n    label = label || executionContext.origin;\n\n    return label;\n  }\n\n  private depthFor(executionContext: SDK.RuntimeModel.ExecutionContext): number {\n    let target = executionContext.target();\n    let depth = 0;\n    if (!executionContext.isDefault) {\n      depth++;\n    }\n    if (executionContext.frameId) {\n      let frame = SDK.FrameManager.FrameManager.instance().getFrame(executionContext.frameId);\n      while (frame) {\n        frame = frame.parentFrame();\n        if (frame) {\n          depth++;\n          target = frame.resourceTreeModel().target();\n        }\n      }\n    }\n    let targetDepth = 0;\n    let parentTarget = target.parentTarget();\n    // Special casing service workers to be top-level.\n    while (parentTarget && target.type() !== SDK.Target.Type.ServiceWorker) {\n      targetDepth++;\n      target = parentTarget;\n      parentTarget = target.parentTarget();\n    }\n    depth += targetDepth;\n    return depth;\n  }\n\n  private executionContextCreated(executionContext: SDK.RuntimeModel.ExecutionContext): void {\n    this.items.insertWithComparator(executionContext, executionContext.runtimeModel.executionContextComparator());\n\n    if (executionContext === UI.Context.Context.instance().flavor(SDK.RuntimeModel.ExecutionContext)) {\n      this.dropDown.selectItem(executionContext);\n    }\n  }\n\n  private onExecutionContextCreated(event: Common.EventTarget.EventTargetEvent<SDK.RuntimeModel.ExecutionContext>):\n      void {\n    const executionContext = event.data;\n    this.executionContextCreated(executionContext);\n  }\n\n  private onExecutionContextChanged(event: Common.EventTarget.EventTargetEvent<SDK.RuntimeModel.ExecutionContext>):\n      void {\n    const executionContext = event.data;\n    if (this.items.indexOf(executionContext) === -1) {\n      return;\n    }\n    this.executionContextDestroyed(executionContext);\n    this.executionContextCreated(executionContext);\n  }\n\n  private executionContextDestroyed(executionContext: SDK.RuntimeModel.ExecutionContext): void {\n    const index = this.items.indexOf(executionContext);\n    if (index === -1) {\n      return;\n    }\n    this.items.remove(index);\n  }\n\n  private onExecutionContextDestroyed(event: Common.EventTarget.EventTargetEvent<SDK.RuntimeModel.ExecutionContext>):\n      void {\n    const executionContext = event.data;\n    this.executionContextDestroyed(executionContext);\n  }\n\n  private executionContextChangedExternally({\n    data: executionContext,\n  }: Common.EventTarget.EventTargetEvent<SDK.RuntimeModel.ExecutionContext|null>): void {\n    if (executionContext && !SDK.TargetManager.TargetManager.instance().isInScope(executionContext.target())) {\n      return;\n    }\n    this.dropDown.selectItem(executionContext);\n  }\n\n  private isTopContext(executionContext: SDK.RuntimeModel.ExecutionContext|null): boolean {\n    if (!executionContext?.isDefault) {\n      return false;\n    }\n    const resourceTreeModel = executionContext.target().model(SDK.ResourceTreeModel.ResourceTreeModel);\n    const frame = executionContext.frameId && resourceTreeModel?.frameForId(executionContext.frameId);\n    if (!frame) {\n      return false;\n    }\n    return frame.isOutermostFrame();\n  }\n\n  private hasTopContext(): boolean {\n    return this.items.some(executionContext => this.isTopContext(executionContext));\n  }\n\n  modelAdded(runtimeModel: SDK.RuntimeModel.RuntimeModel): void {\n    runtimeModel.executionContexts().forEach(this.executionContextCreated, this);\n  }\n\n  modelRemoved(runtimeModel: SDK.RuntimeModel.RuntimeModel): void {\n    for (let i = this.items.length - 1; i >= 0; i--) {\n      if (this.items.at(i).runtimeModel === runtimeModel) {\n        this.executionContextDestroyed(this.items.at(i));\n      }\n    }\n  }\n\n  createElementForItem(item: SDK.RuntimeModel.ExecutionContext): Element {\n    const consoleContextSelectorElement = new ConsoleContextSelectorElement();\n    consoleContextSelectorElement.title = this.titleFor(item);\n    consoleContextSelectorElement.subtitle = this.subtitleFor(item);\n    consoleContextSelectorElement.itemDepth = this.depthFor(item);\n    consoleContextSelectorElement.markAsRoot();\n    return consoleContextSelectorElement.contentElement;\n  }\n\n  private subtitleFor(executionContext: SDK.RuntimeModel.ExecutionContext): string {\n    const target = executionContext.target();\n    let frame: SDK.ResourceTreeModel.ResourceTreeFrame|null = null;\n    if (executionContext.frameId) {\n      const resourceTreeModel = target.model(SDK.ResourceTreeModel.ResourceTreeModel);\n      frame = resourceTreeModel?.frameForId(executionContext.frameId) ?? null;\n    }\n    if (Common.ParsedURL.schemeIs(executionContext.origin, 'chrome-extension:')) {\n      return i18nString(UIStrings.extension);\n    }\n    const sameTargetParentFrame = frame?.sameTargetParentFrame();\n    // TODO(crbug.com/1159332): Understand why condition involves the sameTargetParentFrame.\n    if (!frame || !sameTargetParentFrame || sameTargetParentFrame.securityOrigin !== executionContext.origin) {\n      const url = Common.ParsedURL.ParsedURL.fromString(executionContext.origin);\n      if (url) {\n        return url.domain();\n      }\n    }\n\n    if (frame?.securityOrigin) {\n      const domain = new Common.ParsedURL.ParsedURL(frame.securityOrigin).domain();\n      if (domain) {\n        return domain;\n      }\n    }\n    return 'IFrame';\n  }\n\n  isItemSelectable(item: SDK.RuntimeModel.ExecutionContext): boolean {\n    const callFrame = item.debuggerModel.selectedCallFrame();\n    const callFrameContext = callFrame?.script.executionContext();\n    return !callFrameContext || item === callFrameContext;\n  }\n\n  itemSelected(item: SDK.RuntimeModel.ExecutionContext|null): void {\n    this.#toolbarItem.element.classList.toggle('highlight', !this.isTopContext(item) && this.hasTopContext());\n    const title = item ? i18nString(UIStrings.javascriptContextS, {PH1: this.titleFor(item)}) :\n                         i18nString(UIStrings.javascriptContextNotSelected);\n    this.#toolbarItem.setTitle(title);\n    UI.Context.Context.instance().setFlavor(SDK.RuntimeModel.ExecutionContext, item);\n  }\n\n  private callFrameSelectedInUI(): void {\n    const callFrame = UI.Context.Context.instance().flavor(SDK.DebuggerModel.CallFrame);\n    const callFrameContext = callFrame?.script.executionContext();\n    if (callFrameContext) {\n      UI.Context.Context.instance().setFlavor(SDK.RuntimeModel.ExecutionContext, callFrameContext);\n    }\n  }\n\n  private callFrameSelectedInModel(event: Common.EventTarget.EventTargetEvent<SDK.DebuggerModel.DebuggerModel>): void {\n    const debuggerModel = event.data;\n    for (const executionContext of this.items) {\n      if (executionContext.debuggerModel === debuggerModel) {\n        this.dropDown.refreshItem(executionContext);\n      }\n    }\n  }\n\n  private frameNavigated(event: Common.EventTarget.EventTargetEvent<SDK.ResourceTreeModel.ResourceTreeFrame>): void {\n    const frame = event.data;\n    const runtimeModel = frame.resourceTreeModel().target().model(SDK.RuntimeModel.RuntimeModel);\n    if (!runtimeModel) {\n      return;\n    }\n    for (const executionContext of runtimeModel.executionContexts()) {\n      if (frame.id === executionContext.frameId) {\n        this.dropDown.refreshItem(executionContext);\n      }\n    }\n  }\n}\n\ninterface ViewInput {\n  title?: string;\n  subtitle?: string;\n  itemDepth?: number;\n}\n\ntype View = (input: ViewInput, output: undefined, target: HTMLElement) => void;\n\nconst DEFAULT_VIEW: View = (input, _output, target): void => {\n  if (!input.title || !input.subtitle) {\n    render(nothing, target);\n    return;\n  }\n\n  const paddingLeft = input.itemDepth ? (8 + input.itemDepth * 15) + 'px' : undefined;\n\n  // clang-format off\n  render(\n    html`\n      <style>${consoleContextSelectorStyles}</style>\n      <div class=\"console-context-selector-element\" style=\"padding-left: ${paddingLeft};\">\n        <div class=\"title\">${Platform.StringUtilities.trimEndWithMaxLength(input.title, 100)}</div>\n        <div class=\"subtitle\">${input.subtitle}</div>\n      </div>\n    `,\n    target);\n  // clang-format on\n};\n\nexport class ConsoleContextSelectorElement extends UI.Widget.Widget {\n  #view: View;\n  #title?: string;\n  #subtitle?: string;\n  #itemDepth?: number;\n\n  constructor(element?: HTMLElement, view?: View) {\n    super(element, {useShadowDom: true});\n    this.#view = view ?? DEFAULT_VIEW;\n    this.requestUpdate();\n  }\n\n  set title(title: string) {\n    this.#title = title;\n    this.requestUpdate();\n  }\n\n  set subtitle(subtitle: string) {\n    this.#subtitle = subtitle;\n    this.requestUpdate();\n  }\n\n  set itemDepth(itemDepth: number) {\n    this.#itemDepth = itemDepth;\n    this.requestUpdate();\n  }\n\n  override async performUpdate(): Promise<void> {\n    const viewInput: ViewInput = {\n      title: this.#title,\n      subtitle: this.#subtitle,\n      itemDepth: this.#itemDepth,\n    };\n    this.#view(viewInput, undefined, this.contentElement);\n  }\n}\n"]}