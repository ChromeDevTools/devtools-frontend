{"version":3,"file":"ConsoleInsightTeaser.js","sourceRoot":"","sources":["../../../../../../front_end/panels/console/ConsoleInsightTeaser.ts"],"names":[],"mappings":"AAAA,4DAA4D;AAC5D,yEAAyE;AACzE,6BAA6B;AAE7B,OAAO,0CAA0C,CAAC;AAElD,OAAO,KAAK,MAAM,MAAM,6BAA6B,CAAC;AACtD,OAAO,KAAK,IAAI,MAAM,yBAAyB,CAAC;AAChD,OAAO,KAAK,IAAI,MAAM,yBAAyB,CAAC;AAChD,OAAO,KAAK,IAAI,MAAM,yBAAyB,CAAC;AAEhD,OAAO,KAAK,iBAAiB,MAAM,6CAA6C,CAAC;AACjF,OAAO,KAAK,OAAO,MAAM,wCAAwC,CAAC;AAClE,OAAO,KAAK,EAAE,MAAM,2BAA2B,CAAC;AAChD,OAAO,KAAK,GAAG,MAAM,qBAAqB,CAAC;AAC3C,OAAO,KAAK,aAAa,MAAM,2CAA2C,CAAC;AAC3E,OAAO,KAAK,WAAW,MAAM,qBAAqB,CAAC;AAEnD,OAAO,0BAA0B,MAAM,+BAA+B,CAAC;AACvE,OAAO,EAAC,kBAAkB,EAAC,MAAM,yBAAyB,CAAC;AAC3D,OAAO,EAAC,aAAa,EAAC,MAAM,oBAAoB,CAAC;AAEjD,MAAM,EAAC,MAAM,EAAE,IAAI,EAAC,GAAG,GAAG,CAAC;AAE3B,MAAM,yBAAyB,GAAG,+CAA+C,CAAC;AAElF,MAAM,qBAAqB,GAAG;IAC5B;;OAEG;IACH,SAAS,EAAE,YAAY;IACvB;;OAEG;IACH,yBAAyB,EAAE,+BAA+B;IAC1D;;OAEG;IACH,mBAAmB,EAAE,kDAAkD;IACvE;;OAEG;IACH,uCAAuC,EAAE,oDAAoD;IAC7F;;OAEG;IACH,wBAAwB,EACpB,sNAAsN;IAC1N;;OAEG;IACH,iCAAiC,EAC7B,uQAAuQ;IAC3Q;;OAEG;IACH,+BAA+B,EAAE,0CAA0C;IAC3E;;OAEG;IACH,eAAe,EACX,4OAA4O;IAChP;;OAEG;IACH,WAAW,EAAE,cAAc;IAC3B;;OAEG;IACH,0BAA0B,EAAE,iCAAiC;IAC7D;;OAEG;IACH,OAAO,EAAE,SAAS;IAClB;;OAEG;IACH,UAAU,EAAE,cAAc;IAC1B;;OAEG;IACH,QAAQ,EAAE,YAAY;IACtB;;OAEG;IACH,cAAc,EAAE,wCAAwC;IACxD;;OAEG;IACH,mBAAmB,EAAE,uBAAuB;IAC5C;;OAEG;IACH,iBAAiB,EAAE,qCAAqC;IACxD;;OAEG;IACH,eAAe,EAAE,mCAAmC;IACpD;;OAEG;IACH,aAAa,EAAE,gFAAgF;IAC/F;;OAEG;IACH,aAAa,EAAE,gBAAgB;IAC/B;;OAEG;IACH,kBAAkB,EAAE,sBAAsB;IAC1C;;OAEG;IACH,QAAQ,EAAE,UAAU;IACpB;;;OAGG;IACH,eAAe,EAAE,mBAAmB;CAC5B,CAAC;AAEX,MAAM,YAAY,GAAG,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC;AAE5C,MAAM,wBAAwB,GAAG,kDAAkD,CAAC;AACpF,MAAM,cAAc,GAAG,+EAA+E,CAAC;AACvG,MAAM,wBAAwB,GAAG,gCAAgC,CAAC;AAClE,MAAM,mCAAmC,GAAG,IAAI,CAAC;AA6BjD,SAAS,aAAa,CAAC,KAAgB;IACrC,mBAAmB;IACnB,OAAO,IAAI,CAAA;;;cAGC,KAAK,CAAC,YAAY,CAAC,CAAC;QACxB,YAAY,CAAC,qBAAqB,CAAC,iBAAiB,CAAC,CAAC,CAAC;QACvD,YAAY,CAAC,qBAAqB,CAAC,eAAe,CAAC;;;qBAGxC,aAAa,CAAC,IAAI,EAAE,CAAC,KAAK,CAAC,EAAC,KAAK,EAAE,IAAI,EAAE,OAAO,EAAE,aAAa,EAAC,CAAC,CAAC,OAAO,CAAC,2CAA2C,CAAC;;mBAExH,yBAAyB;;;;;;eAM7B,YAAY,CAAC,qBAAqB,CAAC,aAAa,CAAC;;;;kBAI9C,YAAY,CAAC,qBAAqB,CAAC,aAAa,CAAC;0BACzC,gCAAgC;qBACrC,8CAA8B;mBAChC,KAAK,CAAC,oBAAoB;sBACvB,CAAC,CAAQ,EAAE,EAAE;QACvB,CAAC,CAAC,eAAe,EAAE,CAAC;IACtB,CAAC;;YAEC,YAAY,CAAC,qBAAqB,CAAC,aAAa,CAAC;;UAEnD,sBAAsB,CAAC,KAAK,CAAC;;;GAGpC,CAAC;IACF,kBAAkB;AACpB,CAAC;AAED,SAAS,iBAAiB,CAAC,KAAgB;IACzC,MAAM,OAAO,GAAG,CAAC,CAAC,KAAK,CAAC,gBAAgB,IAAI,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;IACjE,mBAAmB;IACnB,OAAO,IAAI,CAAA;;;cAGC,YAAY,CAAC,qBAAqB,CAAC,kBAAkB,CAAC;;YAExD,KAAK,CAAC,gBAAgB,KAAK,IAAI,CAAC,CAAC;QACjC,IAAI,CAAA;mCACmB,YAAY,CAAC,qBAAqB,CAAC,eAAe,CAAC;aACzE,CAAC,CAAC,CAAC,IAAI,CAAA;mCACe,YAAY,CAAC,qBAAqB,CAAC,QAAQ,CAAC;;;;;;;kCAO7C,OAAO;kCACP,OAAO;;;WAG9B;;;;;kBAKO,YAAY,CAAC,qBAAqB,CAAC,aAAa,CAAC;0BACzC,gCAAgC;qBACrC,8CAA8B;sBAC7B,IAAI;;YAEd,YAAY,CAAC,qBAAqB,CAAC,aAAa,CAAC;;;;GAI1D,CAAC;IACF,kBAAkB;AACpB,CAAC;AAED,SAAS,gBAAgB,CAAC,KAAgB;IACxC,mBAAmB;IACnB,OAAO,IAAI,CAAA;;;cAGC,KAAK,CAAC,gBAAgB,CAAC,CAAC;QAC5B,YAAY,CAAC,qBAAqB,CAAC,0BAA0B,CAAC,CAAC,CAAC;QAChE,YAAY,CAAC,qBAAqB,CAAC,WAAW,CAChD;;;uBAGe,YAAY,CAAC,qBAAqB,CAAC,OAAO,CAAC;;kCAEhC,YAAY,GAAG,KAAK,CAAC,IAAI;;;;2BAIhC,WAAW,GAAG,KAAK,CAAC,IAAI;;;;;;;;;QAS3C,YAAY,CAAC,KAAK,CAAC;;GAExB,CAAC;IACF,kBAAkB;AACpB,CAAC;AAED,SAAS,WAAW,CAAC,KAAgB;IACnC,mBAAmB;IACnB,OAAO,IAAI,CAAA;;YAED,YAAY,CAAC,qBAAqB,CAAC,mBAAmB,CAAC;QAC3D,YAAY,CAAC,KAAK,CAAC;;GAExB,CAAC;IACF,kBAAkB;AACpB,CAAC;AAED,SAAS,sBAAsB,CAAC,KAAgB;IAC9C,mBAAmB;IACnB,OAAO,IAAI,CAAA;;mBAEM,YAAY,CAAC,qBAAqB,CAAC,QAAQ,CAAC;gBAC/C,KAAK,CAAC,eAAe;cACvB,aAAa,CAAC,MAAM,CAAC,0BAA0B,CAAC,CAAC,KAAK,CAAC,EAAE,MAAM,EAAE,IAAI,EAAE,CAAC;QAC9E,YAAY,CAAC,qBAAqB,CAAC,QAAQ,CAAC;;GAEjD,CAAC;IACF,kBAAkB;AACpB,CAAC;AAED,SAAS,YAAY,CAAC,KAAgB;IACpC,mBAAmB;IACnB,OAAO,IAAI,CAAA;;QAEL,KAAK,CAAC,mBAAmB,CAAC,CAAC,CAAC,IAAI,CAAA;;kBAEtB,YAAY,CAAC,qBAAqB,CAAC,UAAU,CAAC;0BACtC,8BAA8B;qBACnC,8CAA8B;mBAChC,KAAK,CAAC,iBAAiB;;;YAG9B,YAAY,CAAC,qBAAqB,CAAC,UAAU,CAAC;;OAEnD,CAAC,CAAC,CAAC,GAAG,CAAC,OAAO;;oBAED,MAAM;mBACP,wCAA2B;uBACvB,sBAAsB,GAAG,KAAK,CAAC,IAAI;2BAC/B,YAAY,CAAC,qBAAqB,CAAC,cAAc,CAAC;;;aAGhE,sBAAsB,GAAG,KAAK,CAAC,IAAI;;;;;;yCAMP,YAAY,CAAC,qBAAqB,CAAC,eAAe,CAAC;;;;oBAIxE,YAAY,CAAC,qBAAqB,CAAC,yBAAyB,CAAC;mBAC9D,cAAc;oBACb,aAAa,CAAC,IAAI,EAAE,CAAC,KAAK,CAAC,EAAC,KAAK,EAAE,IAAI,EAAE,OAAO,EAAC,aAAa,EAAC,CAAC,CAAC,OAAO,CAAC,2BAA2B,CAAC;aAC5G,YAAY,CAAC,qBAAqB,CAAC,yBAAyB,CAAC;;;QAGlE,sBAAsB,CAAC,KAAK,CAAC;;GAElC,CAAC;IACF,kBAAkB;AACpB,CAAC;AAED,SAAS,YAAY,CAAC,KAAgB;IACpC,mBAAmB;IACnB,OAAO,IAAI,CAAA;;;cAGC,KAAK,CAAC,UAAU;iCACG,KAAK,CAAC,QAAQ;;QAEvC,YAAY,CAAC,KAAK,CAAC;;GAExB,CAAC;IACF,kBAAkB;AACpB,CAAC;AAED,MAAM,CAAC,MAAM,YAAY,GAAG,CAAC,KAAgB,EAAE,OAAkB,EAAE,MAAmB,EAAQ,EAAE;IAC9F,IAAI,KAAK,CAAC,UAAU,EAAE,CAAC;QACrB,MAAM,CAAC,GAAG,CAAC,OAAO,EAAE,MAAM,CAAC,CAAC;QAC5B,OAAO;IACT,CAAC;IAED,mBAAmB;IACnB,MAAM,CAAC,IAAI,CAAA;aACA,0BAA0B;;WAE5B,SAAS,GAAG,KAAK,CAAC,IAAI;;;;;;;QAOzB,CAAC,GAAG,EAAE;QACN,QAAQ,KAAK,CAAC,KAAK,EAAE,CAAC;YACpB;gBACE,OAAO,aAAa,CAAC,KAAK,CAAC,CAAC;YAC9B;gBACE,OAAO,iBAAiB,CAAC,KAAK,CAAC,CAAC;YAClC,+BAAiB;YACjB;gBACE,OAAO,gBAAgB,CAAC,KAAK,CAAC,CAAC;YACjC;gBACE,OAAO,WAAW,CAAC,KAAK,CAAC,CAAC;YAC5B,iDAA0B;YAC1B;gBACE,OAAO,YAAY,CAAC,KAAK,CAAC,CAAC;QAC/B,CAAC;IACH,CAAC,CAAC,EAAE;;GAEP,EAAE,MAAM,CAAC,CAAC;IACX,kBAAkB;AACpB,CAAC,CAAC;AAIF,MAAM,OAAO,oBAAqB,SAAQ,EAAE,CAAC,MAAM,CAAC,MAAM;IACxD,KAAK,CAAO;IACZ,KAAK,CAAS;IACd,UAAU,CAAwC;IAClD,cAAc,CAAgB;IAC9B,WAAW,GAAG,EAAE,CAAC;IACjB,SAAS,GAAG,EAAE,CAAC;IACf,mBAAmB,CAAqB;IACxC,WAAW,GAAG,KAAK,CAAC;IACpB,gBAAgB,GAAyB,IAAI,CAAC;IAC9C,OAAO,GAAG,KAAK,CAAC;IAChB,UAAU,GAAuC,IAAI,CAAC;IACtD,iBAAiB,CAA2C;IAC5D,8BAA8B,CAAsB;IACpD,8BAA8B,CAA+D;IAC7F,uBAAuB,CAAa;IACpC,iBAAiB,GAAgB,IAAI,CAAC;IACtC,MAAM,CAAQ;IACd,eAAe,GAAyC,EAAE,CAAC;IAC3D,aAAa,CAAU;IAEvB,YAAY,IAAY,EAAE,kBAAsC,EAAE,OAAqB,EAAE,IAAW;QAClG,KAAK,CAAC,OAAO,CAAC,CAAC;QACf,IAAI,CAAC,KAAK,GAAG,IAAI,IAAI,YAAY,CAAC;QAClC,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC;QAClB,IAAI,CAAC,cAAc,GAAG,IAAI,aAAa,CAAC,kBAAkB,CAAC,CAAC;QAC5D,IAAI,CAAC,mBAAmB,GAAG,kBAAkB,CAAC;QAC9C,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,mBAAmB,CAAC,cAAc,EAAE,CAAC,KAAK,uDAAuC,CAAC;QAC5G,IAAI,CAAC,8BAA8B,GAAG,IAAI,CAAC,yBAAyB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAChF,IAAI,CAAC,8BAA8B,GAAG,IAAI,CAAC,yBAAyB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAChF,IAAI,CAAC,uBAAuB,GAAG,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAClE,IAAI,CAAC,UAAU,GAAG,iBAAiB,CAAC,SAAS,CAAC,SAAS,CAAC,QAAQ,EAAE,CAAC;QACnE,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,UAAU,CAAC,UAAU,EAAE,CAAC,CAAC,2BAAa,CAAC,gCAAe,CAAC;QAC1E,IAAI,CAAC,aAAa,EAAE,CAAC;IACvB,CAAC;IAED,iCAAiC;QAC/B,IAAI,CAAC;YACH,OAAO,MAAM,CAAC,QAAQ,CAAC,aAAa,CAAC,0BAA0B,CAAqC,CAAC;QACvG,CAAC;QAAC,MAAM,CAAC;YACP,OAAO;QACT,CAAC;IACH,CAAC;IAED,8BAA8B;QAC5B,OAAO,MAAM,CAAC,QAAQ,CAAC,QAAQ,CAAC,QAAQ,EAAE,CAAC,kBAAkB,CAAC,sCAAsC,EAAE,IAAI,CAAC,CAAC;IAC9G,CAAC;IAED,KAAK,CAAC,yBAAyB;QAC7B,MAAM,uBAAuB,GAAG,MAAM,IAAI,CAAC,UAAU,CAAC,UAAU,CAAC,wBAAwB,EAAE,CAAC;QAC5F,IAAI,uBAAuB,KAAK,IAAI,CAAC,iBAAiB,EAAE,CAAC;YACvD,IAAI,CAAC,iBAAiB,GAAG,uBAAuB,CAAC;YACjD,IAAI,CAAC,aAAa,EAAE,CAAC;QACvB,CAAC;IACH,CAAC;IAED,4BAA4B;QAC1B,EAAE,CAAC,OAAO,CAAC,OAAO,CAAC,QAAQ,EAAE,CAAC,SAAS,CAAC,kBAAkB,EAAE,IAAI,CAAC,mBAAmB,CAAC,CAAC;QACtF,MAAM,MAAM,GAAG,EAAE,CAAC,cAAc,CAAC,cAAc,CAAC,QAAQ,EAAE,CAAC,SAAS,CAAC,wBAAwB,CAAC,CAAC;QAC/F,KAAK,MAAM,CAAC,OAAO,EAAE,CAAC;IACxB,CAAC;IAED,kBAAkB,CAAC,KAAY;QAC7B,KAAK,CAAC,eAAe,EAAE,CAAC;QACxB,IAAI,IAAI,CAAC,iCAAiC,EAAE,EAAE,gBAAgB,EAAE;YAC5D,IAAI,CAAC,8BAA8B,EAAE,EAAE,gBAAgB,EAAE,EAAE,CAAC;YAC9D,IAAI,CAAC,4BAA4B,EAAE,CAAC;YACpC,OAAO;QACT,CAAC;QACD,KAAK,IAAI,CAAC,cAAc,EAAE,CAAC;IAC7B,CAAC;IAED,qBAAqB,CAAC,KAAY;QAChC,KAAK,CAAC,eAAe,EAAE,CAAC;QACxB,IAAI,CAAC,MAAM,wCAAoB,CAAC;QAChC,IAAI,CAAC,UAAU,CAAC,qBAAqB,EAAE,CAAC;QACxC,IAAI,CAAC,WAAW,CAAC,WAAW,CAAC,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,iCAAiC,CAAC,CAAC;QACxF,IAAI,CAAC,aAAa,EAAE,CAAC;IACvB,CAAC;IAED,yBAAyB,CAAC,KAAkD;QAC1E,IAAI,CAAC,iBAAiB,GAAG,KAAK,CAAC,IAAI,CAAC;QACpC,IAAI,CAAC,aAAa,EAAE,CAAC;IACvB,CAAC;IAED,kBAAkB;QAChB,IAAI,IAAI,CAAC,UAAU,CAAC,UAAU,EAAE,IAAI,CAAC,IAAI,CAAC,MAAM,oCAAmB,IAAI,IAAI,CAAC,MAAM,0CAAsB,CAAC,EAAE,CAAC;YAC1G,IAAI,CAAC,MAAM,4BAAc,CAAC;YAC1B,IAAI,CAAC,WAAW,CAAC,WAAW,CAAC,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,mCAAmC,CAAC,CAAC;YAC1F,IAAI,CAAC,mBAAmB,EAAE,CAAC;QAC7B,CAAC;IACH,CAAC;IAED,KAAK,CAAC,cAAc;QAClB,MAAM,SAAS,GAAG,IAAI,CAAC,OAAO,CAAC,UAAU,CAAC,gBAAgB,EAAE,qBAAqB;YAC7E,IAAI,CAAC,OAAO,CAAC,0BAA0B,CAAC,qBAAqB,CAAC;QAClE,MAAM,MAAM,GAAG,MAAM,WAAW,CAAC,SAAS,CAAC,IAAI,CAAC;YAC9C,MAAM,EAAE,EAAC,QAAQ,EAAE,iBAAiB,EAAE,IAAI,EAAE,YAAY,CAAC,qBAAqB,CAAC,mBAAmB,CAAC,EAAC;YACpG,aAAa,EAAE;gBACb;oBACE,QAAQ,EAAE,YAAY;oBACtB,OAAO,EAAE,YAAY,CAAC,qBAAqB,CAAC,uCAAuC,CAAC;iBACrF;gBACD;oBACE,QAAQ,EAAE,QAAQ;oBAClB,OAAO,EAAE,SAAS,CAAC,CAAC,CAAC,YAAY,CAAC,qBAAqB,CAAC,iCAAiC,CAAC,CAAC,CAAC;wBACvE,YAAY,CAAC,qBAAqB,CAAC,wBAAwB,CAAC;iBAClF;gBACD;oBACE,QAAQ,EAAE,SAAS;oBACnB,mBAAmB;oBACnB,OAAO,EAAE,IAAI,CAAA;mBACJ,wBAAwB;;oBAEvB,aAAa,CAAC,IAAI,CAAC,wCAAwC,CAAC,CAAC,KAAK,CAAC;wBACzE,KAAK,EAAE,IAAI;qBACZ,CAAC;aACD,YAAY,CAAC,qBAAqB,CAAC,+BAA+B,CAAC,WAAW;oBACjF,kBAAkB;iBACnB;aACF;YACD,gBAAgB,EAAE,GAAG,EAAE;gBACrB,KAAK,EAAE,CAAC,WAAW,CAAC,WAAW,CAAC,QAAQ,EAAE,CAAC,QAAQ,CAAC,WAAW,CAAC,CAAC;YACnE,CAAC;YACD,SAAS,EAAE,YAAY,CAAC,qBAAqB,CAAC,mBAAmB,CAAC;YAClE,mBAAmB,EAAE,YAAY,CAAC,qBAAqB,CAAC,SAAS,CAAC;SACnE,CAAC,CAAC;QAEH,IAAI,MAAM,EAAE,CAAC;YACX,IAAI,CAAC,iCAAiC,EAAE,EAAE,GAAG,CAAC,IAAI,CAAC,CAAC;YACpD,IAAI,CAAC,8BAA8B,EAAE,EAAE,GAAG,CAAC,IAAI,CAAC,CAAC;YACjD,IAAI,CAAC,4BAA4B,EAAE,CAAC;QACtC,CAAC;IACH,CAAC;IAED,mBAAmB;QACjB,MAAM,qBAAqB,GAAG,GAAS,EAAE;YACvC,IAAI,CAAC,IAAI,CAAC,WAAW;gBACjB,MAAM,CAAC,QAAQ,CAAC,QAAQ,CAAC,QAAQ,EAAE,CAAC,aAAa,CAAC,iCAAiC,CAAC,CAAC,GAAG,EAAE,EAAE,CAAC;gBAC/F,KAAK,IAAI,CAAC,mBAAmB,EAAE,CAAC;YAClC,CAAC;QACH,CAAC,CAAC;QAEF,MAAM,UAAU,GAAG,IAAI,CAAC,UAAU,CAAC,UAAU,EAAE,CAAC;QAEhD,QAAQ,IAAI,CAAC,MAAM,EAAE,CAAC;YACpB,qCAAoB;YACpB;gBACE,IAAI,UAAU,EAAE,CAAC;oBACf,IAAI,CAAC,MAAM,4BAAc,CAAC;oBAC1B,qBAAqB,EAAE,CAAC;gBAC1B,CAAC;qBAAM,CAAC;oBACN,IAAI,IAAI,CAAC,eAAe,CAAC,MAAM,KAAK,CAAC,EAAE,CAAC;wBACtC,IAAI,CAAC,eAAe,GAAG;4BACrB,IAAI,CAAC,UAAU,CAAC,gBAAgB,+FACkC,IAAI,CAAC,8BAA8B,CAAC;4BACtG,IAAI,CAAC,UAAU,CAAC,gBAAgB,wGACuC,IAAI,CAAC,uBAAuB,CAAC;yBACrG,CAAC;oBACJ,CAAC;oBACD,IAAI,IAAI,CAAC,UAAU,CAAC,aAAa,EAAE,EAAE,CAAC;wBACpC,IAAI,CAAC,MAAM,wCAAoB,CAAC;wBAChC,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC,UAAU,CAAC,mBAAmB,EAAE,CAAC;oBACjE,CAAC;gBACH,CAAC;gBACD,IAAI,CAAC,aAAa,EAAE,CAAC;gBACrB,OAAO;YACT;gBACE,qBAAqB,EAAE,CAAC;gBACxB,IAAI,CAAC,aAAa,EAAE,CAAC;gBACrB,OAAO;YACT;gBACE,OAAO,CAAC,KAAK,CAAC,6DAA6D,CAAC,CAAC;gBAC7E,OAAO;YACT;gBACE,OAAO,CAAC,KAAK,CAAC,iEAAiE,CAAC,CAAC;gBACjF,OAAO;YACT,yDAAyD;YACzD,iCAAkB;YAClB;gBACE,OAAO;QACX,CAAC;IACH,CAAC;IAED,qBAAqB;QACnB,IAAI,IAAI,CAAC,gBAAgB,EAAE,CAAC;YAC1B,IAAI,CAAC,gBAAgB,CAAC,KAAK,EAAE,CAAC;QAChC,CAAC;QACD,IAAI,IAAI,CAAC,MAAM,wCAAqB,IAAI,IAAI,CAAC,MAAM,gDAAyB,EAAE,CAAC;YAC7E,IAAI,CAAC,SAAS,GAAG,EAAE,CAAC;YACpB,IAAI,CAAC,MAAM,4BAAc,CAAC;YAC1B,IAAI,CAAC,WAAW,CAAC,WAAW,CAAC,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,8BAA8B,CAAC,CAAC;QACvF,CAAC;QACD,IAAI,IAAI,CAAC,UAAU,EAAE,CAAC;YACpB,YAAY,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;QAChC,CAAC;QACD,MAAM,CAAC,WAAW,CAAC,oBAAoB,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC;IAChE,CAAC;IAED,WAAW,CAAC,UAAmB;QAC7B,IAAI,IAAI,CAAC,WAAW,KAAK,UAAU,EAAE,CAAC;YACpC,OAAO;QACT,CAAC;QACD,IAAI,CAAC,WAAW,GAAG,UAAU,CAAC;QAC9B,IAAI,CAAC,aAAa,EAAE,CAAC;IACvB,CAAC;IAED,QAAQ;QACN,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC;QACpB,IAAI,CAAC,aAAa,EAAE,CAAC;IACvB,CAAC;IAED,KAAK,CAAC,mBAAmB;QACvB,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,mBAAmB,CAAC,mBAAmB,EAAE,CAAC,SAAS,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC;QACnF,IAAI,CAAC,MAAM,sCAAmB,CAAC;QAC/B,IAAI,CAAC,WAAW,CAAC,WAAW,CAAC,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,8BAA8B,CAAC,CAAC;QACrF,IAAI,CAAC,UAAU,GAAG,UAAU,CAAC,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,mCAAmC,CAAC,CAAC;QAC5F,MAAM,SAAS,GAAG,WAAW,CAAC,GAAG,EAAE,CAAC;QACpC,IAAI,UAAU,GAAG,EAAE,CAAC;QACpB,IAAI,kBAAkB,GAAG,KAAK,CAAC;QAC/B,IAAI,CAAC;YACH,IAAI,KAAK,EAAE,MAAM,KAAK,IAAI,IAAI,CAAC,mBAAmB,EAAE,EAAE,CAAC;gBACrD,UAAU,IAAI,KAAK,CAAC;gBACpB,IAAI,CAAC,SAAS,GAAG,UAAU,CAAC;gBAC5B,IAAI,CAAC,MAAM,8CAAuB,CAAC;gBACnC,IAAI,CAAC,aAAa,EAAE,CAAC;gBACrB,IAAI,CAAC,kBAAkB,EAAE,CAAC;oBACxB,kBAAkB,GAAG,IAAI,CAAC;oBAC1B,IAAI,CAAC,WAAW,CAAC,uCAAuC,CAAC,WAAW,CAAC,GAAG,EAAE,GAAG,SAAS,CAAC,CAAC;gBAC1F,CAAC;YACH,CAAC;QACH,CAAC;QAAC,OAAO,GAAG,EAAE,CAAC;YACb,+DAA+D;YAC/D,IAAI,GAAG,CAAC,IAAI,KAAK,YAAY,EAAE,CAAC;gBAC9B,IAAI,CAAC,MAAM,4BAAc,CAAC;YAC5B,CAAC;iBAAM,CAAC;gBACN,OAAO,CAAC,KAAK,CAAC,GAAG,CAAC,IAAI,EAAE,GAAG,CAAC,OAAO,CAAC,CAAC;gBACrC,IAAI,CAAC,MAAM,4BAAc,CAAC;gBAC1B,IAAI,CAAC,WAAW,CAAC,WAAW,CAAC,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,8BAA8B,CAAC,CAAC;YACvF,CAAC;YACD,YAAY,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;YAC9B,IAAI,CAAC,aAAa,EAAE,CAAC;YACrB,OAAO;QACT,CAAC;QAED,YAAY,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;QAC9B,IAAI,CAAC,WAAW,CAAC,6BAA6B,CAAC,WAAW,CAAC,GAAG,EAAE,GAAG,SAAS,CAAC,CAAC;QAC9E,IAAI,CAAC,MAAM,8BAAe,CAAC;QAC3B,IAAI,CAAC,SAAS,GAAG,UAAU,CAAC;QAC5B,IAAI,CAAC,WAAW,CAAC,WAAW,CAAC,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,gCAAgC,CAAC,CAAC;QACvF,IAAI,CAAC,aAAa,EAAE,CAAC;IACvB,CAAC;IAED,KAAK,CAAC,CAAE,mBAAmB;QACzB,MAAM,EAAC,MAAM,EAAC,GAAG,MAAM,IAAI,CAAC,cAAc,CAAC,WAAW,EAAE,CAAC;QACzD,IAAI,CAAC,gBAAgB,GAAG,IAAI,eAAe,EAAE,CAAC;QAC9C,MAAM,MAAM,GAAG,IAAI,CAAC,UAAU,CAAC,iBAAiB,CAAC,MAAM,EAAE,IAAI,CAAC,gBAAgB,CAAC,CAAC;QAChF,IAAI,KAAK,EAAE,MAAM,KAAK,IAAI,MAAM,EAAE,CAAC;YACjC,MAAM,KAAK,CAAC;QACd,CAAC;QACD,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC;IAC/B,CAAC;IAED,gBAAgB,CAAC,CAAQ;QACvB,MAAM,WAAW,GAAG,CAAE,CAAC,CAAC,MAA2B,CAAC,OAAO,CAAC;QAC5D,MAAM,CAAC,QAAQ,CAAC,QAAQ,CAAC,QAAQ,EAAE,CAAC,aAAa,CAAC,iCAAiC,CAAC,CAAC,GAAG,CAAC,WAAW,CAAC,CAAC;IACxG,CAAC;IAED,oBAAoB;QAClB,IAAI,CAAC,EAAE,CAAC,cAAc,CAAC,cAAc,CAAC,QAAQ,EAAE,CAAC,SAAS,CAAC,wBAAwB,CAAC,EAAE,CAAC;YACrF,OAAO,KAAK,CAAC;QACf,CAAC;QACD,IAAI,IAAI,CAAC,OAAO,CAAC,UAAU,CAAC,gBAAgB,EAAE,YAAY,IAAI,IAAI,CAAC,OAAO,CAAC,UAAU,CAAC,cAAc,EAAE,CAAC;YACrG,OAAO,KAAK,CAAC;QACf,CAAC;QACD,IAAI,IAAI,CAAC,iBAAiB,wEAAsD,EAAE,CAAC;YACjF,OAAO,KAAK,CAAC;QACf,CAAC;QACD,OAAO,IAAI,CAAC;IACd,CAAC;IAEQ,aAAa;QACpB,IAAI,CAAC,KAAK,CACN;YACE,iBAAiB,EAAE,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,IAAI,CAAC;YACrD,IAAI,EAAE,IAAI,CAAC,KAAK;YAChB,UAAU,EAAE,IAAI,CAAC,WAAW;YAC5B,QAAQ,EAAE,IAAI,CAAC,SAAS;YACxB,UAAU,EAAE,IAAI,CAAC,WAAW;gBACxB,CAAC,MAAM,CAAC,QAAQ,CAAC,QAAQ,CAAC,QAAQ,EAAE,CAAC,aAAa,CAAC,iCAAiC,CAAC,CAAC,GAAG,EAAE;YAC/F,eAAe,EAAE,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,IAAI,CAAC;YACjD,mBAAmB,EAAE,IAAI,CAAC,oBAAoB,EAAE;YAChD,gBAAgB,EAAE,IAAI,CAAC,OAAO;YAC9B,oBAAoB,EAAE,IAAI,CAAC,qBAAqB,CAAC,IAAI,CAAC,IAAI,CAAC;YAC3D,gBAAgB,EAAE,IAAI,CAAC,iBAAiB;YACxC,KAAK,EAAE,IAAI,CAAC,MAAM;YAClB,YAAY,EAAE,IAAI,CAAC,aAAa;SACjC,EACD,SAAS,EAAE,IAAI,CAAC,cAAc,CAAC,CAAC;IACtC,CAAC;IAEQ,QAAQ;QACf,KAAK,CAAC,QAAQ,EAAE,CAAC;QACjB,IAAI,CAAC,UAAU,CAAC,iBAAiB,CAAC,QAAQ,EAAE,CAAC,gBAAgB,mFACP,IAAI,CAAC,8BAA8B,CAAC,CAAC;QAC3F,KAAK,IAAI,CAAC,yBAAyB,EAAE,CAAC;IACxC,CAAC;IAEQ,QAAQ;QACf,KAAK,CAAC,QAAQ,EAAE,CAAC;QACjB,IAAI,CAAC,UAAU,CAAC,iBAAiB,CAAC,QAAQ,EAAE,CAAC,mBAAmB,mFACV,IAAI,CAAC,8BAA8B,CAAC,CAAC;IAC7F,CAAC;CACF","sourcesContent":["// Copyright 2025 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport '../../ui/components/tooltips/tooltips.js';\n\nimport * as Common from '../../core/common/common.js';\nimport * as Host from '../../core/host/host.js';\nimport * as i18n from '../../core/i18n/i18n.js';\nimport * as Root from '../../core/root/root.js';\nimport * as Protocol from '../../generated/protocol.js';\nimport * as AiAssistanceModel from '../../models/ai_assistance/ai_assistance.js';\nimport * as Buttons from '../../ui/components/buttons/buttons.js';\nimport * as UI from '../../ui/legacy/legacy.js';\nimport * as Lit from '../../ui/lit/lit.js';\nimport * as VisualLogging from '../../ui/visual_logging/visual_logging.js';\nimport * as PanelCommon from '../common/common.js';\n\nimport consoleInsightTeaserStyles from './consoleInsightTeaser.css.js';\nimport {ConsoleViewMessage} from './ConsoleViewMessage.js';\nimport {PromptBuilder} from './PromptBuilder.js';\n\nconst {render, html} = Lit;\n\nconst BUILT_IN_AI_DOCUMENTATION = 'https://developer.chrome.com/docs/ai/built-in';\n\nconst UIStringsNotTranslate = {\n  /**\n   * @description Link text in the disclaimer dialog, linking to a settings page containing more information\n   */\n  learnMore: 'Learn more',\n  /**\n   * @description Link text in the Console Insights Teaser info tooltip, linking to an explainer on how data is being used in this feature\n   */\n  learnMoreAboutAiSummaries: 'Learn more about AI summaries',\n  /**\n   * @description Description of the console insights feature\n   */\n  freDisclaimerHeader: 'Get explanations for console warnings and errors',\n  /**\n   * @description First item in the first-run experience dialog\n   */\n  freDisclaimerTextAiWontAlwaysGetItRight: 'This feature uses AI and won’t always get it right',\n  /**\n   * @description Explainer for which data is being sent by the console insights feature\n   */\n  consoleInsightsSendsData:\n      'To generate explanations, the console message, associated stack trace, related source code, and the associated network headers are sent to Google. This data may be seen by human reviewers to improve this feature.',\n  /**\n   * @description Explainer for which data is being sent by the console insights feature\n   */\n  consoleInsightsSendsDataNoLogging:\n      'To generate explanations, the console message, associated stack trace, related source code, and the associated network headers are sent to Google. This data will not be used to improve Google’s AI models. Your organization may change these settings at any time.',\n  /**\n   * @description Third item in the first-run experience dialog\n   */\n  freDisclaimerTextUseWithCaution: 'Use generated code snippets with caution',\n  /**\n   * @description Tooltip text for the console insights teaser\n   */\n  infoTooltipText:\n      'The text above has been generated with AI on your local device. Clicking the button will send the console message, stack trace, related source code, and the associated network headers to Google to generate a more detailed explanation.',\n  /**\n   * @description Header text during loading state while an AI summary is being generated\n   */\n  summarizing: 'Summarizing…',\n  /**\n   * @description Header text during longer lasting loading state while an AI summary is being generated\n   */\n  summarizingTakesABitLonger: 'Summarizing takes a bit longer…',\n  /**\n   * @description Label for an animation shown while an AI response is being generated\n   */\n  loading: 'Loading',\n  /**\n   * @description Label for a button which generates a more detailed explanation\n   */\n  tellMeMore: 'Tell me more',\n  /**\n   * @description Label for a checkbox which turns off the teaser explanation feature\n   */\n  dontShow: 'Don’t show',\n  /**\n   * @description Aria-label for an infor-button triggering a tooltip with more info about data usage\n   */\n  learnDataUsage: 'Learn more about how your data is used',\n  /**\n   * @description Header text if there was an error during AI summary generation\n   */\n  summaryNotAvailable: 'Summary not available',\n  /**\n   * @description Header text informing the user that they can get an AI-generated explanation\n   */\n  getHelpForWarning: 'Get help understanding this warning',\n  /**\n   * @description Header text informing the user that they can get an AI-generated explanation\n   */\n  getHelpForError: 'Get help understanding this error',\n  /**\n   * @description Call to action for downloading an AI model\n   */\n  toUseDownload: 'To use Chrome’s Built-in AI here and elsewhere, download the AI model (~4 GB).',\n  /**\n   * @description Button text to trigger model download\n   */\n  downloadModel: 'Download model',\n  /**\n   * @description Header text while the model download is in progress\n   */\n  downloadingAiModel: 'Downloading AI model',\n  /**\n   * @description Label for a progress bar for the AI model download\n   */\n  progress: 'Progress',\n  /**\n   * @description Progress indicator when the progress status is unknown. If the\n   * progress status is known, this is replaced by a progress bar.\n   */\n  progressUnknown: 'Progress: unknown',\n} as const;\n\nconst lockedString = i18n.i18n.lockedString;\n\nconst CODE_SNIPPET_WARNING_URL = 'https://support.google.com/legal/answer/13505487';\nconst DATA_USAGE_URL = 'https://developer.chrome.com/docs/devtools/ai-assistance/get-started#data-use';\nconst EXPLAIN_TEASER_ACTION_ID = 'explain.console-message.teaser';\nconst SLOW_GENERATION_CUTOFF_MILLISECONDS = 3500;\n\nconst enum State {\n  NO_MODEL = 'no-model',\n  DOWNLOADING = 'downloading',\n  READY = 'ready',\n  GENERATING = 'generating',          // Before receiving first chunk\n  PARTIAL_TEASER = 'partial-teaser',  // After receiving first chunk\n  TEASER = 'teaser',\n  ERROR = 'error',\n}\n\ninterface ViewInput {\n  onTellMeMoreClick: (event: Event) => void;\n  // If multiple ConsoleInsightTeasers exist, each one needs a unique id. Otherwise showing and\n  // hiding of the tooltip, and rendering the loading animation, does not work correctly.\n  uuid: string;\n  headerText: string;\n  mainText: string;\n  isInactive: boolean;\n  dontShowChanged: (e: Event) => void;\n  hasTellMeMoreButton: boolean;\n  isSlowGeneration: boolean;\n  onDownloadModelClick: (event: Event) => void;\n  downloadProgress: number|null;\n  state: State;\n  isForWarning: boolean;\n}\n\nfunction renderNoModel(input: ViewInput): Lit.TemplateResult {\n  // clang-format off\n  return html`\n    <div class=\"teaser-tooltip-container\">\n      <div class=\"response-container\">\n        <h2>${input.isForWarning ?\n          lockedString(UIStringsNotTranslate.getHelpForWarning) :\n          lockedString(UIStringsNotTranslate.getHelpForError)}\n        </h2>\n        <div>You can get quick answers from <x-link\n            .jslog=${VisualLogging.link().track({click: true, keydown: 'Enter|Space'}).context('insights-teaser-built-in-ai-documentation')}\n            class=\"link\"\n            href=${BUILT_IN_AI_DOCUMENTATION}\n          >\n            Chrome’s Built-in AI\n          </x-link>\n          , without any data leaving your device.\n        </div>\n        <div>${lockedString(UIStringsNotTranslate.toUseDownload)}</div>\n      </div>\n      <div class=\"tooltip-footer\">\n        <devtools-button\n          title=${lockedString(UIStringsNotTranslate.downloadModel)}\n          .jslogContext=${'insights-teaser-download-model'}\n          .variant=${Buttons.Button.Variant.PRIMARY}\n          @click=${input.onDownloadModelClick}\n          @focusout=${(e: Event) => {\n            e.stopPropagation();\n          }}\n        >\n          ${lockedString(UIStringsNotTranslate.downloadModel)}\n        </devtools-button>\n        ${renderDontShowCheckbox(input)}\n      </div>\n    </div>\n  `;\n  // clang-format on\n}\n\nfunction renderDownloading(input: ViewInput): Lit.TemplateResult {\n  const percent = ((input.downloadProgress || 0) * 100).toFixed(0);\n  // clang-format off\n  return html`\n    <div class=\"teaser-tooltip-container\">\n      <div class=\"response-container\">\n        <h2>${lockedString(UIStringsNotTranslate.downloadingAiModel)}</h2>\n        <div class=\"progress-line\">\n          ${input.downloadProgress === null ?\n            html`\n              <div class=\"label\">${lockedString(UIStringsNotTranslate.progressUnknown)}</div>\n            ` : html`\n              <div class=\"label\">${lockedString(UIStringsNotTranslate.progress)}</div>\n              <div class=\"indicator-container\">\n                <div\n                  class=\"indicator\"\n                  role=\"progressbar\"\n                  aria-valuemin=\"0\"\n                  aria-valuemax=\"100\"\n                  aria-valuenow=${percent}\n                  style=\"width: ${percent}%\"\n                ></div>\n              </div>\n          `}\n        </div>\n      </div>\n      <div class=\"tooltip-footer\">\n        <devtools-button\n          title=${lockedString(UIStringsNotTranslate.downloadModel)}\n          .jslogContext=${'insights-teaser-download-model'}\n          .variant=${Buttons.Button.Variant.PRIMARY}\n          .disabled=${true}\n        >\n          ${lockedString(UIStringsNotTranslate.downloadModel)}\n        </devtools-button>\n      </div>\n    </div>\n  `;\n  // clang-format on\n}\n\nfunction renderGenerating(input: ViewInput): Lit.TemplateResult {\n  // clang-format off\n  return html`\n    <div class=\"teaser-tooltip-container\">\n      <div class=\"response-container\">\n        <h2>${input.isSlowGeneration ?\n          lockedString(UIStringsNotTranslate.summarizingTakesABitLonger) :\n          lockedString(UIStringsNotTranslate.summarizing)\n        }</h2>\n        <div\n          role=\"presentation\"\n          aria-label=${lockedString(UIStringsNotTranslate.loading)}\n          class=\"loader\"\n          style=\"clip-path: url(${'#clipPath-' + input.uuid});\"\n        >\n          <svg width=\"100%\" height=\"58\">\n            <defs>\n            <clipPath id=${'clipPath-' + input.uuid}>\n              <rect x=\"0\" y=\"0\" width=\"100%\" height=\"12\" rx=\"8\"></rect>\n              <rect x=\"0\" y=\"20\" width=\"100%\" height=\"12\" rx=\"8\"></rect>\n              <rect x=\"0\" y=\"40\" width=\"100%\" height=\"12\" rx=\"8\"></rect>\n            </clipPath>\n          </defs>\n          </svg>\n        </div>\n      </div>\n      ${renderFooter(input)}\n    </div>\n  `;\n  // clang-format on\n}\n\nfunction renderError(input: ViewInput): Lit.TemplateResult {\n  // clang-format off\n  return html`\n    <div class=\"teaser-tooltip-container\">\n      <h2>${lockedString(UIStringsNotTranslate.summaryNotAvailable)}</h2>\n      ${renderFooter(input)}\n    </div>\n  `;\n  // clang-format on\n}\n\nfunction renderDontShowCheckbox(input: ViewInput): Lit.TemplateResult {\n  // clang-format off\n  return html`\n    <devtools-checkbox\n      aria-label=${lockedString(UIStringsNotTranslate.dontShow)}\n      @change=${input.dontShowChanged}\n      jslog=${VisualLogging.toggle('explain.teaser.dont-show').track({ change: true })}>\n      ${lockedString(UIStringsNotTranslate.dontShow)}\n    </devtools-checkbox>\n  `;\n  // clang-format on\n}\n\nfunction renderFooter(input: ViewInput): Lit.TemplateResult {\n  // clang-format off\n  return html`\n    <div class=\"tooltip-footer\">\n      ${input.hasTellMeMoreButton ? html`\n        <devtools-button\n          title=${lockedString(UIStringsNotTranslate.tellMeMore)}\n          .jslogContext=${'insights-teaser-tell-me-more'}\n          .variant=${Buttons.Button.Variant.PRIMARY}\n          @click=${input.onTellMeMoreClick}\n        >\n          <devtools-icon class=\"lightbulb-icon\" name=\"lightbulb-spark\"></devtools-icon>\n          ${lockedString(UIStringsNotTranslate.tellMeMore)}\n        </devtools-button>\n      ` : Lit.nothing}\n      <devtools-button\n        .iconName=${'info'}\n        .variant=${Buttons.Button.Variant.ICON}\n        aria-details=${'teaser-info-tooltip-' + input.uuid}\n        .accessibleLabel=${lockedString(UIStringsNotTranslate.learnDataUsage)}\n      ></devtools-button>\n      <devtools-tooltip\n        id=${'teaser-info-tooltip-' + input.uuid}\n        variant=\"rich\"\n        jslogContext=\"teaser-info-tooltip\"\n        trigger=\"both\"\n        hover-delay=500\n      >\n        <div class=\"info-tooltip-text\">${lockedString(UIStringsNotTranslate.infoTooltipText)}</div>\n        <div class=\"learn-more\">\n          <x-link\n            class=\"devtools-link\"\n            title=${lockedString(UIStringsNotTranslate.learnMoreAboutAiSummaries)}\n            href=${DATA_USAGE_URL}\n            jslog=${VisualLogging.link().track({click: true, keydown:'Enter|Space'}).context('explain.teaser.learn-more')}\n          >${lockedString(UIStringsNotTranslate.learnMoreAboutAiSummaries)}</x-link>\n        </div>\n      </devtools-tooltip>\n      ${renderDontShowCheckbox(input)}\n    </div>\n  `;\n  // clang-format on\n}\n\nfunction renderTeaser(input: ViewInput): Lit.TemplateResult {\n  // clang-format off\n  return html`\n    <div class=\"teaser-tooltip-container\">\n      <div class=\"response-container\">\n        <h2>${input.headerText}</h2>\n        <div class=\"main-text\">${input.mainText}</div>\n      </div>\n      ${renderFooter(input)}\n    </div>\n  `;\n  // clang-format on\n}\n\nexport const DEFAULT_VIEW = (input: ViewInput, _output: undefined, target: HTMLElement): void => {\n  if (input.isInactive) {\n    render(Lit.nothing, target);\n    return;\n  }\n\n  // clang-format off\n  render(html`\n    <style>${consoleInsightTeaserStyles}</style>\n    <devtools-tooltip\n      id=${'teaser-' + input.uuid}\n      hover-delay=500\n      variant=\"rich\"\n      vertical-distance-increase=-6\n      prefer-span-left\n      jslogContext=\"console-insight-teaser\"\n    >\n      ${(() => {\n        switch (input.state) {\n          case State.NO_MODEL:\n            return renderNoModel(input);\n          case State.DOWNLOADING:\n            return renderDownloading(input);\n          case State.READY:\n          case State.GENERATING:\n            return renderGenerating(input);\n          case State.ERROR:\n            return renderError(input);\n          case State.PARTIAL_TEASER:\n          case State.TEASER:\n            return renderTeaser(input);\n        }\n      })()}\n    </devtools-tooltip>\n  `, target);\n  // clang-format on\n};\n\nexport type View = typeof DEFAULT_VIEW;\n\nexport class ConsoleInsightTeaser extends UI.Widget.Widget {\n  #view: View;\n  #uuid: string;\n  #builtInAi: AiAssistanceModel.BuiltInAi.BuiltInAi;\n  #promptBuilder: PromptBuilder;\n  #headerText = '';\n  #mainText = '';\n  #consoleViewMessage: ConsoleViewMessage;\n  #isInactive = false;\n  #abortController: null|AbortController = null;\n  #isSlow = false;\n  #timeoutId: ReturnType<typeof setTimeout>|null = null;\n  #aidaAvailability?: Host.AidaClient.AidaAccessPreconditions;\n  #boundOnAidaAvailabilityChange: () => Promise<void>;\n  #boundOnDownloadProgressChange: (event: Common.EventTarget.EventTargetEvent<number>) => void;\n  #boundOnSessionCreation: () => void;\n  #downloadProgress: number|null = null;\n  #state: State;\n  #eventListeners: Common.EventTarget.EventDescriptor[] = [];\n  #isForWarning: boolean;\n\n  constructor(uuid: string, consoleViewMessage: ConsoleViewMessage, element?: HTMLElement, view?: View) {\n    super(element);\n    this.#view = view ?? DEFAULT_VIEW;\n    this.#uuid = uuid;\n    this.#promptBuilder = new PromptBuilder(consoleViewMessage);\n    this.#consoleViewMessage = consoleViewMessage;\n    this.#isForWarning = this.#consoleViewMessage.consoleMessage().level === Protocol.Log.LogEntryLevel.Warning;\n    this.#boundOnAidaAvailabilityChange = this.#onAidaAvailabilityChange.bind(this);\n    this.#boundOnDownloadProgressChange = this.#onDownloadProgressChange.bind(this);\n    this.#boundOnSessionCreation = this.#onSessionCreation.bind(this);\n    this.#builtInAi = AiAssistanceModel.BuiltInAi.BuiltInAi.instance();\n    this.#state = this.#builtInAi.hasSession() ? State.READY : State.NO_MODEL;\n    this.requestUpdate();\n  }\n\n  #getConsoleInsightsEnabledSetting(): Common.Settings.Setting<boolean>|undefined {\n    try {\n      return Common.Settings.moduleSetting('console-insights-enabled') as Common.Settings.Setting<boolean>;\n    } catch {\n      return;\n    }\n  }\n\n  #getOnboardingCompletedSetting(): Common.Settings.Setting<boolean> {\n    return Common.Settings.Settings.instance().createLocalSetting('console-insights-onboarding-finished', true);\n  }\n\n  async #onAidaAvailabilityChange(): Promise<void> {\n    const currentAidaAvailability = await Host.AidaClient.AidaClient.checkAccessPreconditions();\n    if (currentAidaAvailability !== this.#aidaAvailability) {\n      this.#aidaAvailability = currentAidaAvailability;\n      this.requestUpdate();\n    }\n  }\n\n  #executeConsoleInsightAction(): void {\n    UI.Context.Context.instance().setFlavor(ConsoleViewMessage, this.#consoleViewMessage);\n    const action = UI.ActionRegistry.ActionRegistry.instance().getAction(EXPLAIN_TEASER_ACTION_ID);\n    void action.execute();\n  }\n\n  #onTellMeMoreClick(event: Event): void {\n    event.stopPropagation();\n    if (this.#getConsoleInsightsEnabledSetting()?.getIfNotDisabled() &&\n        this.#getOnboardingCompletedSetting()?.getIfNotDisabled()) {\n      this.#executeConsoleInsightAction();\n      return;\n    }\n    void this.#showFreDialog();\n  }\n\n  #onDownloadModelClick(event: Event): void {\n    event.stopPropagation();\n    this.#state = State.DOWNLOADING;\n    this.#builtInAi.startDownloadingModel();\n    Host.userMetrics.actionTaken(Host.UserMetrics.Action.InsightTeaserModelDownloadStarted);\n    this.requestUpdate();\n  }\n\n  #onDownloadProgressChange(event: Common.EventTarget.EventTargetEvent<number>): void {\n    this.#downloadProgress = event.data;\n    this.requestUpdate();\n  }\n\n  #onSessionCreation(): void {\n    if (this.#builtInAi.hasSession() && (this.#state === State.NO_MODEL || this.#state === State.DOWNLOADING)) {\n      this.#state = State.READY;\n      Host.userMetrics.actionTaken(Host.UserMetrics.Action.InsightTeaserModelDownloadCompleted);\n      this.maybeGenerateTeaser();\n    }\n  }\n\n  async #showFreDialog(): Promise<void> {\n    const noLogging = Root.Runtime.hostConfig.aidaAvailability?.enterprisePolicyValue ===\n        Root.Runtime.GenAiEnterprisePolicyValue.ALLOW_WITHOUT_LOGGING;\n    const result = await PanelCommon.FreDialog.show({\n      header: {iconName: 'smart-assistant', text: lockedString(UIStringsNotTranslate.freDisclaimerHeader)},\n      reminderItems: [\n        {\n          iconName: 'psychiatry',\n          content: lockedString(UIStringsNotTranslate.freDisclaimerTextAiWontAlwaysGetItRight),\n        },\n        {\n          iconName: 'google',\n          content: noLogging ? lockedString(UIStringsNotTranslate.consoleInsightsSendsDataNoLogging) :\n                               lockedString(UIStringsNotTranslate.consoleInsightsSendsData),\n        },\n        {\n          iconName: 'warning',\n          // clang-format off\n          content: html`<x-link\n            href=${CODE_SNIPPET_WARNING_URL}\n            class=\"link devtools-link\"\n            jslog=${VisualLogging.link('explain.teaser.code-snippets-explainer').track({\n              click: true\n            })}\n          >${lockedString(UIStringsNotTranslate.freDisclaimerTextUseWithCaution)}</x-link>`,\n          // clang-format on\n        }\n      ],\n      onLearnMoreClick: () => {\n        void UI.ViewManager.ViewManager.instance().showView('chrome-ai');\n      },\n      ariaLabel: lockedString(UIStringsNotTranslate.freDisclaimerHeader),\n      learnMoreButtonText: lockedString(UIStringsNotTranslate.learnMore),\n    });\n\n    if (result) {\n      this.#getConsoleInsightsEnabledSetting()?.set(true);\n      this.#getOnboardingCompletedSetting()?.set(true);\n      this.#executeConsoleInsightAction();\n    }\n  }\n\n  maybeGenerateTeaser(): void {\n    const startGeneratingTeaser = (): void => {\n      if (!this.#isInactive &&\n          Common.Settings.Settings.instance().moduleSetting('console-insight-teasers-enabled').get()) {\n        void this.#generateTeaserText();\n      }\n    };\n\n    const hasSession = this.#builtInAi.hasSession();\n\n    switch (this.#state) {\n      case State.NO_MODEL:\n      case State.DOWNLOADING:\n        if (hasSession) {\n          this.#state = State.READY;\n          startGeneratingTeaser();\n        } else {\n          if (this.#eventListeners.length === 0) {\n            this.#eventListeners = [\n              this.#builtInAi.addEventListener(\n                  AiAssistanceModel.BuiltInAi.Events.DOWNLOAD_PROGRESS_CHANGED, this.#boundOnDownloadProgressChange),\n              this.#builtInAi.addEventListener(\n                  AiAssistanceModel.BuiltInAi.Events.DOWNLOADED_AND_SESSION_CREATED, this.#boundOnSessionCreation),\n            ];\n          }\n          if (this.#builtInAi.isDownloading()) {\n            this.#state = State.DOWNLOADING;\n            this.#downloadProgress = this.#builtInAi.getDownloadProgress();\n          }\n        }\n        this.requestUpdate();\n        return;\n      case State.READY:\n        startGeneratingTeaser();\n        this.requestUpdate();\n        return;\n      case State.GENERATING:\n        console.error('Trying trigger teaser generation when state is \"GENERATING\"');\n        return;\n      case State.PARTIAL_TEASER:\n        console.error('Trying trigger teaser generation when state is \"PARTIAL_TEASER\"');\n        return;\n      // These are terminal states. No need to update anything.\n      case State.TEASER:\n      case State.ERROR:\n        return;\n    }\n  }\n\n  abortTeaserGeneration(): void {\n    if (this.#abortController) {\n      this.#abortController.abort();\n    }\n    if (this.#state === State.GENERATING || this.#state === State.PARTIAL_TEASER) {\n      this.#mainText = '';\n      this.#state = State.READY;\n      Host.userMetrics.actionTaken(Host.UserMetrics.Action.InsightTeaserGenerationAborted);\n    }\n    if (this.#timeoutId) {\n      clearTimeout(this.#timeoutId);\n    }\n    Common.EventTarget.removeEventListeners(this.#eventListeners);\n  }\n\n  setInactive(isInactive: boolean): void {\n    if (this.#isInactive === isInactive) {\n      return;\n    }\n    this.#isInactive = isInactive;\n    this.requestUpdate();\n  }\n\n  #setSlow(): void {\n    this.#isSlow = true;\n    this.requestUpdate();\n  }\n\n  async #generateTeaserText(): Promise<void> {\n    this.#headerText = this.#consoleViewMessage.toMessageTextString().substring(0, 70);\n    this.#state = State.GENERATING;\n    Host.userMetrics.actionTaken(Host.UserMetrics.Action.InsightTeaserGenerationStarted);\n    this.#timeoutId = setTimeout(this.#setSlow.bind(this), SLOW_GENERATION_CUTOFF_MILLISECONDS);\n    const startTime = performance.now();\n    let teaserText = '';\n    let firstChunkReceived = false;\n    try {\n      for await (const chunk of this.#getOnDeviceInsight()) {\n        teaserText += chunk;\n        this.#mainText = teaserText;\n        this.#state = State.PARTIAL_TEASER;\n        this.requestUpdate();\n        if (!firstChunkReceived) {\n          firstChunkReceived = true;\n          Host.userMetrics.consoleInsightTeaserFirstChunkGenerated(performance.now() - startTime);\n        }\n      }\n    } catch (err) {\n      // Ignore `AbortError` errors, which are thrown on mouse leave.\n      if (err.name === 'AbortError') {\n        this.#state = State.READY;\n      } else {\n        console.error(err.name, err.message);\n        this.#state = State.ERROR;\n        Host.userMetrics.actionTaken(Host.UserMetrics.Action.InsightTeaserGenerationErrored);\n      }\n      clearTimeout(this.#timeoutId);\n      this.requestUpdate();\n      return;\n    }\n\n    clearTimeout(this.#timeoutId);\n    Host.userMetrics.consoleInsightTeaserGenerated(performance.now() - startTime);\n    this.#state = State.TEASER;\n    this.#mainText = teaserText;\n    Host.userMetrics.actionTaken(Host.UserMetrics.Action.InsightTeaserGenerationCompleted);\n    this.requestUpdate();\n  }\n\n  async * #getOnDeviceInsight(): AsyncGenerator<string> {\n    const {prompt} = await this.#promptBuilder.buildPrompt();\n    this.#abortController = new AbortController();\n    const stream = this.#builtInAi.getConsoleInsight(prompt, this.#abortController);\n    for await (const chunk of stream) {\n      yield chunk;\n    }\n    this.#abortController = null;\n  }\n\n  #dontShowChanged(e: Event): void {\n    const showTeasers = !(e.target as HTMLInputElement).checked;\n    Common.Settings.Settings.instance().moduleSetting('console-insight-teasers-enabled').set(showTeasers);\n  }\n\n  #hasTellMeMoreButton(): boolean {\n    if (!UI.ActionRegistry.ActionRegistry.instance().hasAction(EXPLAIN_TEASER_ACTION_ID)) {\n      return false;\n    }\n    if (Root.Runtime.hostConfig.aidaAvailability?.blockedByAge || Root.Runtime.hostConfig.isOffTheRecord) {\n      return false;\n    }\n    if (this.#aidaAvailability !== Host.AidaClient.AidaAccessPreconditions.AVAILABLE) {\n      return false;\n    }\n    return true;\n  }\n\n  override performUpdate(): Promise<void>|void {\n    this.#view(\n        {\n          onTellMeMoreClick: this.#onTellMeMoreClick.bind(this),\n          uuid: this.#uuid,\n          headerText: this.#headerText,\n          mainText: this.#mainText,\n          isInactive: this.#isInactive ||\n              !Common.Settings.Settings.instance().moduleSetting('console-insight-teasers-enabled').get(),\n          dontShowChanged: this.#dontShowChanged.bind(this),\n          hasTellMeMoreButton: this.#hasTellMeMoreButton(),\n          isSlowGeneration: this.#isSlow,\n          onDownloadModelClick: this.#onDownloadModelClick.bind(this),\n          downloadProgress: this.#downloadProgress,\n          state: this.#state,\n          isForWarning: this.#isForWarning,\n        },\n        undefined, this.contentElement);\n  }\n\n  override wasShown(): void {\n    super.wasShown();\n    Host.AidaClient.HostConfigTracker.instance().addEventListener(\n        Host.AidaClient.Events.AIDA_AVAILABILITY_CHANGED, this.#boundOnAidaAvailabilityChange);\n    void this.#onAidaAvailabilityChange();\n  }\n\n  override willHide(): void {\n    super.willHide();\n    Host.AidaClient.HostConfigTracker.instance().removeEventListener(\n        Host.AidaClient.Events.AIDA_AVAILABILITY_CHANGED, this.#boundOnAidaAvailabilityChange);\n  }\n}\n"]}