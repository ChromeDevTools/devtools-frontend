{"version":3,"file":"CoverageListView.js","sourceRoot":"","sources":["../../../../../../front_end/panels/coverage/CoverageListView.ts"],"names":[],"mappings":"AAAA,sCAAsC;AACtC,yEAAyE;AACzE,6BAA6B;AAE7B,OAAO,kDAAkD,CAAC;AAC1D,OAAO,mDAAmD,CAAC;AAE3D,OAAO,KAAK,MAAM,MAAM,6BAA6B,CAAC;AACtD,OAAO,KAAK,IAAI,MAAM,yBAAyB,CAAC;AAEhD,OAAO,KAAK,SAAS,MAAM,qCAAqC,CAAC;AACjE,OAAO,KAAK,EAAE,MAAM,2BAA2B,CAAC;AAChD,OAAO,EAAC,UAAU,EAAE,IAAI,EAAE,OAAO,EAAE,MAAM,EAAsB,MAAM,qBAAqB,CAAC;AAE3F,OAAO,sBAAsB,MAAM,2BAA2B,CAAC;AAgB/D,MAAM,SAAS,GAAG;IAChB;;OAEG;IACH,GAAG,EAAE,KAAK;IACV;;OAEG;IACH,aAAa,EAAE,mBAAmB;IAClC;;OAEG;IACH,UAAU,EAAE,gBAAgB;IAC5B;;OAEG;IACH,GAAG,EAAE,KAAK;IACV;;OAEG;IACH,IAAI,EAAE,MAAM;IACZ;;OAEG;IACH,UAAU,EAAE,aAAa;IACzB;;OAEG;IACH,WAAW,EAAE,cAAc;IAC3B;;OAEG;IACH,kBAAkB,EAAE,qBAAqB;IACzC;;OAEG;IACH,YAAY,EAAE,eAAe;IAC7B;;;;OAIG;IACH,yBAAyB,EACrB,mHAAmH;IACvH;;;;;OAKG;IACH,sBAAsB,EAClB,mHAAmH;IACvH;;OAEG;IACH,MAAM,EAAE,0CAA0C;IAClD;;;OAGG;IACH,OAAO,EAAE,sEAAsE;IAC/E;;;;OAIG;IACH,gCAAgC,EAAE,4EAA4E;IAC9G;;;;OAIG;IACH,uBAAuB,EAAE,uFAAuF;IAChH;;;;OAIG;IACH,wCAAwC,EAAE,2EAA2E;IACrH;;;;OAIG;IACH,iCAAiC,EAC7B,sFAAsF;IAC1F;;;;OAIG;IACH,wBAAwB,EAAE,8CAA8C;CAChE,CAAC;AACX,MAAM,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC,iBAAiB,CAAC,qCAAqC,EAAE,SAAS,CAAC,CAAC;AAC3F,MAAM,UAAU,GAAG,IAAI,CAAC,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,SAAS,EAAE,IAAI,CAAC,CAAC;AACtE,MAAM,EAAC,QAAQ,EAAE,MAAM,EAAC,GAAG,UAAU,CAAC;AAEtC,MAAM,UAAU,oBAAoB,CAAC,IAAkB;IACrD,MAAM,KAAK,GAAG,EAAE,CAAC;IACjB,IAAI,IAAI,2BAAmB,EAAE,CAAC;QAC5B,KAAK,CAAC,IAAI,CAAC,UAAU,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC,CAAC;IACxC,CAAC;IACD,IAAI,IAAI,gDAAwC,EAAE,CAAC;QACjD,KAAK,CAAC,IAAI,CAAC,UAAU,CAAC,SAAS,CAAC,aAAa,CAAC,CAAC,CAAC;IAClD,CAAC;SAAM,IAAI,IAAI,mCAA2B,EAAE,CAAC;QAC3C,KAAK,CAAC,IAAI,CAAC,UAAU,CAAC,SAAS,CAAC,UAAU,CAAC,CAAC,CAAC;IAC/C,CAAC;IACD,OAAO,KAAK,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;AACzB,CAAC;AAYD,MAAM,WAAW,GAAG,CAAC,KAAuB,EAAU,EAAE;IACtD,OAAO,iBAAiB,EAAE,CAAC,MAAM,CAAC,KAAK,IAAI,CAAC,CAAC,CAAC;AAChD,CAAC,CAAC;AACF,MAAM,aAAa,GAAG,CAAC,KAAuB,EAAU,EAAE;IACxD,OAAO,sBAAsB,EAAE,CAAC,MAAM,CAAC,KAAK,IAAI,CAAC,CAAC,CAAC;AACrD,CAAC,CAAC;AACF,MAAM,CAAC,MAAM,YAAY,GAAS,CAAC,KAAK,EAAE,OAAO,EAAE,MAAM,EAAE,EAAE;IAC3D,mBAAmB;IACnB,MAAM,CAAC,IAAI,CAAA;aACA,sBAAsB;iDACc,UAAU,CAAC,SAAS,CAAC,YAAY,CAAC;kBACjE,IAAI,CAAA;;;6DAGuC,UAAU,CAAC,SAAS,CAAC,GAAG,CAAC;mEACnB,UAAU,CAAC,SAAS,CAAC,IAAI,CAAC;iFACZ,UAAU,CAAC,SAAS,CAAC,UAAU,CAAC;2GAEjG,UAAU,CAAC,SAAS,CAAC,WAAW,CAAC;8DACa,UAAU,CAAC,SAAS,CAAC,kBAAkB,CAAC;;YAE1F,MAAM,CAAC,KAAK,CAAC,KAAK,EAAE,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,GAAG,EAAE,IAAI,CAAC,EAAE,CAAC,UAAU,CAAC,IAAI,EAAE,KAAK,CAAC,CAAC;iBACjE;4BACW,EACtB,MAAM,CAAC,CAAC;IACZ,kBAAkB;AACpB,CAAC,CAAC;AAEF,MAAM,OAAO,gBAAiB,SAAQ,EAAE,CAAC,MAAM,CAAC,IAAI;IAClD,gBAAgB,CAAc;IAC9B,aAAa,GAAuB,EAAE,CAAC;IACvC,YAAY,GAAyC,IAAI,CAAC;IAC1D,QAAQ,GAAG,CAAC,CAAC;IACb,KAAK,CAAO;IAEZ,YAAY,OAAqB,EAAE,IAAI,GAAG,YAAY;QACpD,KAAK,CAAC,OAAO,EAAE,EAAC,YAAY,EAAE,IAAI,EAAE,cAAc,EAAE,IAAI,EAAC,CAAC,CAAC;QAC3D,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC;QAClB,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC;IAC/B,CAAC;IAED,IAAI,eAAe,CAAC,eAA4B;QAC9C,IAAI,CAAC,gBAAgB,GAAG,eAAe,CAAC;QACxC,IAAI,CAAC,aAAa,EAAE,CAAC;IACvB,CAAC;IAED,IAAI,eAAe;QACjB,OAAO,IAAI,CAAC,gBAAgB,CAAC;IAC/B,CAAC;IAED,IAAI,YAAY,CAAC,YAAgC;QAC/C,IAAI,CAAC,aAAa,GAAG,YAAY,CAAC;QAClC,IAAI,CAAC,QAAQ,GAAG,YAAY,CAAC,MAAM,CAAC,CAAC,GAAG,EAAE,KAAK,EAAE,EAAE,CAAC,IAAI,CAAC,GAAG,CAAC,GAAG,EAAE,KAAK,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC;QAClF,IAAI,CAAC,aAAa,EAAE,CAAC;IACvB,CAAC;IAED,IAAI,YAAY;QACd,OAAO,IAAI,CAAC,aAAa,CAAC;IAC5B,CAAC;IAEQ,aAAa;QACpB,MAAM,KAAK,GAAc;YACvB,KAAK,EAAE,IAAI,CAAC,aAAa;YACzB,WAAW,EAAE,IAAI,CAAC,YAAY;YAC9B,OAAO,EAAE,IAAI,CAAC,QAAQ;YACtB,MAAM,EAAE,CAAC,GAAoC,EAAE,EAAE;gBAC/C,IAAI,CAAC,WAAW,GAAG,GAAG,CAAC;YACzB,CAAC;YACD,eAAe,EAAE,IAAI,CAAC,gBAAgB;SACvC,CAAC;QACF,IAAI,CAAC,KAAK,CAAC,KAAK,EAAE,EAAE,EAAE,IAAI,CAAC,cAAc,CAAC,CAAC;IAC7C,CAAC;IAED,KAAK;QACH,IAAI,CAAC,aAAa,GAAG,EAAE,CAAC;QACxB,IAAI,CAAC,QAAQ,GAAG,CAAC,CAAC;QAClB,IAAI,CAAC,aAAa,EAAE,CAAC;IACvB,CAAC;IAED,IAAI,WAAW,CAAC,GAAyC;QACvD,MAAM,IAAI,GAAG,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,GAAG,KAAK,GAAG,CAAC,CAAC;QAC/D,IAAI,CAAC,IAAI,EAAE,CAAC;YACV,OAAO;QACT,CAAC;QACD,IAAI,IAAI,CAAC,YAAY,KAAK,GAAG,EAAE,CAAC;YAC9B,IAAI,CAAC,YAAY,GAAG,GAAsC,CAAC;YAC3D,IAAI,CAAC,aAAa,EAAE,CAAC;QACvB,CAAC;QACD,MAAM,UAAU,GAAG,GAAG,CAAC,CAAC,CAAC,SAAS,CAAC,SAAS,CAAC,aAAa,CAAC,QAAQ,EAAE,CAAC,kBAAkB,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC;QACrG,IAAI,CAAC,UAAU,EAAE,CAAC;YAChB,OAAO;QACT,CAAC;QAED,KAAK,MAAM,CAAC,QAAQ,CAAC,MAAM,CAAC,UAAU,CAAC,CAAC;IAC1C,CAAC;IAED,IAAI,WAAW;QACb,OAAO,IAAI,CAAC,YAAY,CAAC;IAC3B,CAAC;CACF;AAED,IAAI,mBAAmB,GAA2B,IAAI,CAAC;AAEvD,SAAS,sBAAsB;IAC7B,IAAI,CAAC,mBAAmB,EAAE,CAAC;QACzB,mBAAmB,GAAG,IAAI,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,cAAc,CAAC,cAAc,CAAC,QAAQ,EAAE,CAAC,MAAM,EAAE;YAChG,KAAK,EAAE,SAAS;YAChB,qBAAqB,EAAE,CAAC;SACzB,CAAC,CAAC;IACL,CAAC;IACD,OAAO,mBAAmB,CAAC;AAC7B,CAAC;AAED,IAAI,cAAc,GAA2B,IAAI,CAAC;AAElD,SAAS,iBAAiB;IACxB,IAAI,CAAC,cAAc,EAAE,CAAC;QACpB,cAAc,GAAG,IAAI,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,cAAc,CAAC,cAAc,CAAC,QAAQ,EAAE,CAAC,MAAM,CAAC,CAAC;IAC/F,CAAC;IACD,OAAO,cAAc,CAAC;AACxB,CAAC;AAED,SAAS,UAAU,CAAC,IAAsB,EAAE,KAAgB;IAC1D,SAAS,cAAc,CAAC,WAAmB;QACzC,MAAM,OAAO,GAAG,KAAK,CAAC,eAAe,EAAE,IAAI,CAAC,WAAW,CAAC,CAAC;QACzD,OAAO,OAAO,EAAE,MAAM,CAAC,CAAC,CAAC,GAAG,OAAO,CAAC,KAAK,IAAI,OAAO,CAAC,CAAC,CAAC,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC;IACxE,CAAC;IAED,MAAM,QAAQ,GAAG,iBAAiB,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;IAClD,mBAAmB;IACnB,OAAO,IAAI,CAAA;aACA,sBAAsB;mBAChB,IAAI,CAAC,GAAG,aAAa,IAAI,CAAC,GAAG,KAAK,KAAK,CAAC,WAAW;gBACtD,GAAG,EAAE,CAAC,KAAK,CAAC,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC;uBACrB,IAAI,CAAC,GAAG,UAAU,IAAI,CAAC,GAAG,eAAe,IAAI,CAAC,GAAG;qCACnC,cAAc,CAAC,IAAI,CAAC,GAAG,CAAC;oCACzB,QAAQ,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG;oCACjC,QAAQ,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;;;uBAGxC,oBAAoB,CAAC,IAAI,CAAC,IAAI,CAAC;kBACpC,IAAI,CAAC,IAAI,gDAAwC,CAAC,CAAC,CAAC,UAAU,CAAC,SAAS,CAAC,yBAAyB,CAAC,CAAC,CAAC;QACjG,IAAI,CAAC,IAAI,mCAA2B,CAAU,CAAC,CAAC,UAAU,CAAC,SAAS,CAAC,sBAAsB,CAAC,CAAC,CAAC;YAC9C,EAAE;UAC9D,oBAAoB,CAAC,IAAI,CAAC,IAAI,CAAC;;uBAElB,IAAI,CAAC,IAAI,eAAe,UAAU,CAAC,SAAS,CAAC,MAAM,EAAE,EAAC,CAAC,EAAE,IAAI,CAAC,IAAI,IAAI,CAAC,EAAC,CAAC;gBAChF,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC;;uBAEf,IAAI,CAAC,UAAU,eAAe,UAAU,CAAC,SAAS,CAAC,OAAO,EAAE,EAAC,CAAC,EAAE,IAAI,CAAC,UAAU,EAAE,UAAU,EAAE,aAAa,CAAC,IAAI,CAAC,gBAAgB,CAAC,EAAC,CAAC;gBAC1I,WAAW,CAAC,IAAI,CAAC,UAAU,CAAC;;YAEhC,aAAa,CAAC,IAAI,CAAC,gBAAgB,CAAC;;;uBAGzB,IAAI,CAAC,UAAU,eAAe,UAAU,CAAC,SAAS,CAAC,wBAAwB,EAAE,EAAC,GAAG,EAAE,aAAa,CAAC,IAAI,CAAC,gBAAgB,CAAC,EAAE,GAAG,EAAE,aAAa,CAAC,IAAI,CAAC,cAAc,CAAC,EAAC,CAAC;;YAE7K,IAAI,CAAC,UAAU,GAAG,CAAC,CAAC,CAAC,CAAC,IAAI,CAAA;;wBAGpB,IAAI,CAAC,IAAI,gDAAwC,CAAC,CAAC,CAAC,UAAU,CAAC,SAAS,CAAC,gCAAgC,EAAE,EAAC,GAAG,EAAE,IAAI,CAAC,UAAU,EAAE,GAAG,EAAE,aAAa,CAAC,IAAI,CAAC,gBAAgB,CAAC,EAAC,CAAC,CAAC,CAAC;QAC/K,IAAI,CAAC,IAAI,mCAA2B,CAAc,CAAC,CAAC,UAAU,CAAC,SAAS,CAAC,uBAAuB,EAAE,EAAC,GAAG,EAAE,IAAI,CAAC,UAAU,EAAE,GAAG,EAAE,aAAa,CAAC,IAAI,CAAC,gBAAgB,CAAC,EAAC,CAAC,CAAC,CAAC;YAClH,EAAE;0BAC9C,QAAQ,CAAC,EAAC,KAAK,EAAE,CAAC,CAAC,IAAI,CAAC,UAAU,GAAG,KAAK,CAAC,OAAO,CAAC,GAAG,GAAG,IAAI,CAAC,CAAC,GAAG,GAAG,EAAC,CAAC;mBAC9E,CAAC,CAAC,CAAC,OAAO;YACjB,IAAI,CAAC,QAAQ,GAAG,CAAC,CAAC,CAAC,CAAC,IAAI,CAAA;;0BAGhB,IAAI,CAAC,IAAI,gDAAwC,CAAC,CAAC,CAAC,UAAU,CAAC,SAAS,CAAC,wCAAwC,EAAE,EAAC,GAAG,EAAE,IAAI,CAAC,QAAQ,EAAE,GAAG,EAAE,aAAa,CAAC,IAAI,CAAC,cAAc,CAAC,EAAC,CAAC,CAAC,CAAC;QACnL,IAAI,CAAC,IAAI,mCAA2B,CAAc,CAAC,CAAC,UAAU,CAAC,SAAS,CAAC,iCAAiC,EAAE,EAAC,GAAG,EAAE,IAAI,CAAC,QAAQ,EAAE,GAAG,EAAE,aAAa,CAAC,IAAI,CAAC,cAAc,CAAC,EAAC,CAAC,CAAC,CAAC;YACxH,EAAE;wBAClD,QAAQ,CAAC,EAAC,KAAK,EAAC,CAAC,CAAC,IAAI,CAAC,QAAQ,GAAG,KAAK,CAAC,OAAO,CAAC,GAAG,GAAG,IAAI,CAAC,CAAC,GAAG,GAAG,EAAC,CAAC;mBACzE,CAAC,CAAC,CAAC,OAAO;;;QAGrB,IAAI,CAAC,OAAO,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC,IAAI,CAAA;;YAE1B,MAAM,CAAC,IAAI,CAAC,OAAO,EAAE,MAAM,CAAC,EAAE,CAAC,MAAM,CAAC,GAAG,EAAE,MAAM,CAAC,EAAE,CAAC,UAAU,CAAC,MAAM,EAAE,KAAK,CAAC,CAAC;sBACrE,CAAC,CAAC,CAAC,OAAO;UACtB,CAAC;IACT,kBAAkB;AACpB,CAAC","sourcesContent":["// Copyright 2017 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport '../../ui/components/highlighting/highlighting.js';\nimport '../../ui/legacy/components/data_grid/data_grid.js';\n\nimport * as Common from '../../core/common/common.js';\nimport * as i18n from '../../core/i18n/i18n.js';\nimport type * as Platform from '../../core/platform/platform.js';\nimport * as Workspace from '../../models/workspace/workspace.js';\nimport * as UI from '../../ui/legacy/legacy.js';\nimport {Directives, html, nothing, render, type TemplateResult} from '../../ui/lit/lit.js';\n\nimport coverageListViewStyles from './coverageListView.css.js';\nimport {CoverageType} from './CoverageModel.js';\n\nexport interface CoverageListItem {\n  url: Platform.DevToolsPath.UrlString;\n  type: CoverageType;\n  size: number;\n  usedSize: number;\n  unusedSize: number;\n  usedPercentage: number;\n  unusedPercentage: number;\n  sources: CoverageListItem[];\n  isContentScript: boolean;\n  generatedUrl?: Platform.DevToolsPath.UrlString;\n}\n\nconst UIStrings = {\n  /**\n   * @description Text that appears on a button for the css resource type filter.\n   */\n  css: 'CSS',\n  /**\n   * @description Text in Coverage List View of the Coverage tab\n   */\n  jsPerFunction: 'JS (per function)',\n  /**\n   * @description Text in Coverage List View of the Coverage tab\n   */\n  jsPerBlock: 'JS (per block)',\n  /**\n   * @description Text for web URLs\n   */\n  url: 'URL',\n  /**\n   * @description Text that refers to some types\n   */\n  type: 'Type',\n  /**\n   * @description Text in Coverage List View of the Coverage tab\n   */\n  totalBytes: 'Total Bytes',\n  /**\n   * @description Text in Coverage List View of the Coverage tab\n   */\n  unusedBytes: 'Unused Bytes',\n  /**\n   * @description Text in the Coverage List View of the Coverage Tab\n   */\n  usageVisualization: 'Usage Visualization',\n  /**\n   * @description Data grid name for Coverage data grids\n   */\n  codeCoverage: 'Code Coverage',\n  /**\n   * @description Cell title in Coverage List View of the Coverage tab. The coverage tool tells\n   *developers which functions (logical groups of lines of code) were actually run/executed. If a\n   *function does get run, then it is marked in the UI to indicate that it was covered.\n   */\n  jsCoverageWithPerFunction:\n      'JS coverage with per function granularity: Once a function was executed, the whole function is marked as covered.',\n  /**\n   * @description Cell title in Coverage List View of the Coverage tab. The coverage tool tells\n   *developers which blocks (logical groups of lines of code, smaller than a function) were actually\n   *run/executed. If a block does get run, then it is marked in the UI to indicate that it was\n   *covered.\n   */\n  jsCoverageWithPerBlock:\n      'JS coverage with per block granularity: Once a block of JavaScript was executed, that block is marked as covered.',\n  /**\n   * @description Accessible text for the value in bytes in memory allocation or coverage view.\n   */\n  sBytes: '{n, plural, =1 {# byte} other {# bytes}}',\n  /**\n   * @description Accessible text for the unused bytes column in the coverage tool that describes the total unused bytes and percentage of the file unused.\n   * @example {88%} percentage\n   */\n  sBytesS: '{n, plural, =1 {# byte, {percentage}} other {# bytes, {percentage}}}',\n  /**\n   * @description Tooltip text for the bar in the coverage list view of the coverage tool that illustrates the relation between used and unused bytes.\n   * @example {1000} PH1\n   * @example {12.34} PH2\n   */\n  sBytesSBelongToFunctionsThatHave: '{PH1} bytes ({PH2}) belong to functions that have not (yet) been executed.',\n  /**\n   * @description Tooltip text for the bar in the coverage list view of the coverage tool that illustrates the relation between used and unused bytes.\n   * @example {1000} PH1\n   * @example {12.34} PH2\n   */\n  sBytesSBelongToBlocksOf: '{PH1} bytes ({PH2}) belong to blocks of JavaScript that have not (yet) been executed.',\n  /**\n   * @description Message in Coverage View of the Coverage tab\n   * @example {1000} PH1\n   * @example {12.34} PH2\n   */\n  sBytesSBelongToFunctionsThatHaveExecuted: '{PH1} bytes ({PH2}) belong to functions that have executed at least once.',\n  /**\n   * @description Message in Coverage View of the Coverage tab\n   * @example {1000} PH1\n   * @example {12.34} PH2\n   */\n  sBytesSBelongToBlocksOfJavascript:\n      '{PH1} bytes ({PH2}) belong to blocks of JavaScript that have executed at least once.',\n  /**\n   * @description Accessible text for the visualization column of coverage tool. Contains percentage of unused bytes to used bytes.\n   * @example {12.3} PH1\n   * @example {12.3} PH2\n   */\n  sOfFileUnusedSOfFileUsed: '{PH1} % of file unused, {PH2} % of file used',\n} as const;\nconst str_ = i18n.i18n.registerUIStrings('panels/coverage/CoverageListView.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\nconst {styleMap, repeat} = Directives;\n\nexport function coverageTypeToString(type: CoverageType): string {\n  const types = [];\n  if (type & CoverageType.CSS) {\n    types.push(i18nString(UIStrings.css));\n  }\n  if (type & CoverageType.JAVA_SCRIPT_PER_FUNCTION) {\n    types.push(i18nString(UIStrings.jsPerFunction));\n  } else if (type & CoverageType.JAVA_SCRIPT) {\n    types.push(i18nString(UIStrings.jsPerBlock));\n  }\n  return types.join('+');\n}\n\ninterface ViewInput {\n  items: CoverageListItem[];\n  selectedUrl: Platform.DevToolsPath.UrlString|null;\n  maxSize: number;\n  onOpen: (url: Platform.DevToolsPath.UrlString) => void;\n  highlightRegExp: RegExp|null;\n}\n\ntype View = (input: ViewInput, output: object, target: HTMLElement) => void;\n\nconst formatBytes = (value: number|undefined): string => {\n  return getBytesFormatter().format(value ?? 0);\n};\nconst formatPercent = (value: number|undefined): string => {\n  return getPercentageFormatter().format(value ?? 0);\n};\nexport const DEFAULT_VIEW: View = (input, _output, target) => {\n  // clang-format off\n  render(html`\n    <style>${coverageListViewStyles}</style>\n    <devtools-data-grid class=\"flex-auto\" name=${i18nString(UIStrings.codeCoverage)} striped autofocus resize=\"last\"\n      .template=${html`\n        <table>\n          <tr>\n            <th id=\"url\" width=\"250px\" weight=\"3\" sortable>${i18nString(UIStrings.url)}</th>\n            <th id=\"type\" width=\"45px\" weight=\"1\" fixed sortable>${i18nString(UIStrings.type)}</th>\n            <th id=\"size\" width=\"60px\" align=\"right\" weight=\"1\" fixed sortable>${i18nString(UIStrings.totalBytes)}</th>\n            <th id=\"unused-size\" width=\"100px\" align=\"right\" weight=\"1\" fixed sortable sort=\"descending\">${\n                i18nString(UIStrings.unusedBytes)}</th>\n            <th id=\"bars\" width=\"250px\" weight=\"1\" sortable>${i18nString(UIStrings.usageVisualization)}</th>\n          </tr>\n          ${repeat(input.items, info => info.url, info => renderItem(info, input))}\n        </table>`}>\n      </devtools-data-grid>`,\n      target);\n  // clang-format on\n};\n\nexport class CoverageListView extends UI.Widget.VBox {\n  #highlightRegExp: RegExp|null;\n  #coverageInfo: CoverageListItem[] = [];\n  #selectedUrl: Platform.DevToolsPath.UrlString|null = null;\n  #maxSize = 0;\n  #view: View;\n\n  constructor(element?: HTMLElement, view = DEFAULT_VIEW) {\n    super(element, {useShadowDom: true, delegatesFocus: true});\n    this.#view = view;\n    this.#highlightRegExp = null;\n  }\n\n  set highlightRegExp(highlightRegExp: RegExp|null) {\n    this.#highlightRegExp = highlightRegExp;\n    this.requestUpdate();\n  }\n\n  get highlightRegExp(): RegExp|null {\n    return this.#highlightRegExp;\n  }\n\n  set coverageInfo(coverageInfo: CoverageListItem[]) {\n    this.#coverageInfo = coverageInfo;\n    this.#maxSize = coverageInfo.reduce((acc, entry) => Math.max(acc, entry.size), 0);\n    this.requestUpdate();\n  }\n\n  get coverageInfo(): CoverageListItem[] {\n    return this.#coverageInfo;\n  }\n\n  override performUpdate(): void {\n    const input: ViewInput = {\n      items: this.#coverageInfo,\n      selectedUrl: this.#selectedUrl,\n      maxSize: this.#maxSize,\n      onOpen: (url: Platform.DevToolsPath.UrlString) => {\n        this.selectedUrl = url;\n      },\n      highlightRegExp: this.#highlightRegExp,\n    };\n    this.#view(input, {}, this.contentElement);\n  }\n\n  reset(): void {\n    this.#coverageInfo = [];\n    this.#maxSize = 0;\n    this.requestUpdate();\n  }\n\n  set selectedUrl(url: Platform.DevToolsPath.UrlString|null) {\n    const info = this.#coverageInfo.find(info => info.url === url);\n    if (!info) {\n      return;\n    }\n    if (this.#selectedUrl !== url) {\n      this.#selectedUrl = url as Platform.DevToolsPath.UrlString;\n      this.requestUpdate();\n    }\n    const sourceCode = url ? Workspace.Workspace.WorkspaceImpl.instance().uiSourceCodeForURL(url) : null;\n    if (!sourceCode) {\n      return;\n    }\n\n    void Common.Revealer.reveal(sourceCode);\n  }\n\n  get selectedUrl(): Platform.DevToolsPath.UrlString|null {\n    return this.#selectedUrl;\n  }\n}\n\nlet percentageFormatter: Intl.NumberFormat|null = null;\n\nfunction getPercentageFormatter(): Intl.NumberFormat {\n  if (!percentageFormatter) {\n    percentageFormatter = new Intl.NumberFormat(i18n.DevToolsLocale.DevToolsLocale.instance().locale, {\n      style: 'percent',\n      maximumFractionDigits: 1,\n    });\n  }\n  return percentageFormatter;\n}\n\nlet bytesFormatter: Intl.NumberFormat|null = null;\n\nfunction getBytesFormatter(): Intl.NumberFormat {\n  if (!bytesFormatter) {\n    bytesFormatter = new Intl.NumberFormat(i18n.DevToolsLocale.DevToolsLocale.instance().locale);\n  }\n  return bytesFormatter;\n}\n\nfunction renderItem(info: CoverageListItem, input: ViewInput): TemplateResult {\n  function highlightRange(textContent: string): string {\n    const matches = input.highlightRegExp?.exec(textContent);\n    return matches?.length ? `${matches.index},${matches[0].length}` : '';\n  }\n\n  const splitURL = /^(.*)(\\/[^/]*)$/.exec(info.url);\n  // clang-format off\n  return html`\n    <style>${coverageListViewStyles}</style>\n    <tr data-url=${info.url} selected=${info.url === input.selectedUrl}\n        @open=${() => input.onOpen(info.url)}>\n      <td data-value=${info.url} title=${info.url} aria-label=${info.url}>\n        <devtools-highlight ranges=${highlightRange(info.url)} class=\"url-outer\" aria-hidden=\"true\">\n          <div class=\"url-prefix\">${splitURL ? splitURL[1] : info.url}</div>\n          <div class=\"url-suffix\">${splitURL ? splitURL[2] : ''}</div>\n        </devtools-highlight>\n      </td>\n      <td data-value=${coverageTypeToString(info.type)}\n          title=${info.type & CoverageType.JAVA_SCRIPT_PER_FUNCTION ? i18nString(UIStrings.jsCoverageWithPerFunction) :\n                      info.type & CoverageType.JAVA_SCRIPT          ? i18nString(UIStrings.jsCoverageWithPerBlock) :\n                                                                      ''}>\n        ${coverageTypeToString(info.type)}\n      </td>\n      <td data-value=${info.size} aria-label=${i18nString(UIStrings.sBytes, {n: info.size || 0})}>\n        <span>${formatBytes(info.size)}</span>\n      </td>\n      <td data-value=${info.unusedSize} aria-label=${i18nString(UIStrings.sBytesS, {n: info.unusedSize, percentage: formatPercent(info.unusedPercentage)})}>\n        <span>${formatBytes(info.unusedSize)}</span>\n        <span class=\"percent-value\">\n          ${formatPercent(info.unusedPercentage)}\n        </span>\n      </td>\n      <td data-value=${info.unusedSize} aria-label=${i18nString(UIStrings.sOfFileUnusedSOfFileUsed, {PH1: formatPercent(info.unusedPercentage), PH2: formatPercent(info.usedPercentage)})}>\n        <div class=\"bar-container\">\n          ${info.unusedSize > 0 ? html`\n            <div class=\"bar bar-unused-size\"\n                title=${\n                  info.type & CoverageType.JAVA_SCRIPT_PER_FUNCTION ? i18nString(UIStrings.sBytesSBelongToFunctionsThatHave, {PH1: info.unusedSize, PH2: formatPercent(info.unusedPercentage)}) :\n                  info.type & CoverageType.JAVA_SCRIPT              ? i18nString(UIStrings.sBytesSBelongToBlocksOf, {PH1: info.unusedSize, PH2: formatPercent(info.unusedPercentage)}) :\n                                                                      ''}\n                  style=${styleMap({width: ((info.unusedSize / input.maxSize) * 100 || 0) + '%'})}>\n            </div>` : nothing}\n          ${info.usedSize > 0 ? html`\n            <div class=\"bar bar-used-size\"\n                  title=${\n                    info.type & CoverageType.JAVA_SCRIPT_PER_FUNCTION ? i18nString(UIStrings.sBytesSBelongToFunctionsThatHaveExecuted, {PH1: info.usedSize, PH2: formatPercent(info.usedPercentage)}) :\n                    info.type & CoverageType.JAVA_SCRIPT              ? i18nString(UIStrings.sBytesSBelongToBlocksOfJavascript, {PH1: info.usedSize, PH2: formatPercent(info.usedPercentage)}) :\n                                                                        ''}\n                style=${styleMap({width:((info.usedSize / input.maxSize) * 100 || 0) + '%'})}>\n            </div>` : nothing}\n        </div>\n      </td>\n      ${info.sources.length > 0 ? html`\n        <td><table>\n          ${repeat(info.sources, source => source.url, source => renderItem(source, input))}\n        </table></td>` : nothing}\n    </tr>`;\n  // clang-format on\n}\n"]}