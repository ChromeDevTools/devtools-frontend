{"version":3,"file":"MetricsSidebarPane.js","sourceRoot":"","sources":["../../../../../../front_end/panels/elements/MetricsSidebarPane.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright 2021 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\n/*\n * Copyright (C) 2007 Apple Inc.  All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions\n * are met:\n *\n * 1.  Redistributions of source code must retain the above copyright\n *     notice, this list of conditions and the following disclaimer.\n * 2.  Redistributions in binary form must reproduce the above copyright\n *     notice, this list of conditions and the following disclaimer in the\n *     documentation and/or other materials provided with the distribution.\n * 3.  Neither the name of Apple Computer, Inc. (\"Apple\") nor the names of\n *     its contributors may be used to endorse or promote products derived\n *     from this software without specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY APPLE AND ITS CONTRIBUTORS \"AS IS\" AND ANY\n * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL APPLE OR ITS CONTRIBUTORS BE LIABLE FOR ANY\n * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF\n * THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\nimport * as Common from '../../core/common/common.js';\nimport * as Platform from '../../core/platform/platform.js';\nimport * as SDK from '../../core/sdk/sdk.js';\nimport * as UI from '../../ui/legacy/legacy.js';\nimport {Directives, html, type LitTemplate, nothing, render} from '../../ui/lit/lit.js';\nimport * as VisualLogging from '../../ui/visual_logging/visual_logging.js';\n\nimport type {ComputedStyleModel} from './ComputedStyleModel.js';\nimport {ElementsSidebarPane} from './ElementsSidebarPane.js';\nimport metricsSidebarPaneStyles from './metricsSidebarPane.css.js';\n\nconst {live} = Directives;\n\ninterface ViewInput {\n  style: Map<string, string>;\n  highlightedMode: string;\n  node: SDK.DOMModel.DOMNode|null;\n  contentWidth: string;\n  contentHeight: string;\n  onHighlightNode: (showHighlight: boolean, mode: string) => void;\n  onStartEditing: (target: Element, box: string, styleProperty: string, computedStyle: Map<string, string>) => void;\n}\n\ntype View = (input: ViewInput, output: undefined, target: HTMLElement) => void;\n\nconst DEFAULT_VIEW: View = (input, output, target) => {\n  const {style, highlightedMode, node, contentWidth, contentHeight, onHighlightNode, onStartEditing} = input;\n\n  function createBoxPartElement(style: Map<string, string>, name: string, side: string, suffix: string): LitTemplate {\n    const propertyName = (name !== 'position' ? name + '-' : '') + side + suffix;\n    let value = style.get(propertyName);\n\n    if (value === '' || (name !== 'position' && value === 'unset')) {\n      value = '\\u2012';\n    } else if (name === 'position' && value === 'auto') {\n      value = '\\u2012';\n    }\n    value = value?.replace(/px$/, '');\n    value = value ? Platform.NumberUtilities.toFixedIfFloating(value) : value;\n    // clang-format off\n    return html`<div class=${side} jslog=${VisualLogging.value(propertyName).track({\n        dblclick: true, keydown: 'Enter|Escape|ArrowUp|ArrowDown|PageUp|PageDown', change: true,\n        })}\n        @dblclick=${(e: Event) => onStartEditing(e.currentTarget as Element, name, propertyName, style)}\n        .innerText=${live(value ?? '')}>\n    </div>`;\n    // clang-format on\n  }\n\n  // Display types for which margin is ignored.\n  const noMarginDisplayType = new Set<string>([\n    'table-cell',\n    'table-column',\n    'table-column-group',\n    'table-footer-group',\n    'table-header-group',\n    'table-row',\n    'table-row-group',\n  ]);\n\n  // Display types for which padding is ignored.\n  const noPaddingDisplayType = new Set<string>([\n    'table-column',\n    'table-column-group',\n    'table-footer-group',\n    'table-header-group',\n    'table-row',\n    'table-row-group',\n  ]);\n\n  // Position types for which top, left, bottom and right are ignored.\n  const noPositionType = new Set<string>(['static']);\n\n  const boxes = ['content', 'padding', 'border', 'margin', 'position'];\n  const boxColors = [\n    Common.Color.PageHighlight.Content,\n    Common.Color.PageHighlight.Padding,\n    Common.Color.PageHighlight.Border,\n    Common.Color.PageHighlight.Margin,\n    Common.Color.Legacy.fromRGBA([0, 0, 0, 0]),\n  ];\n  const boxLabels = ['content', 'padding', 'border', 'margin', 'position'];\n  let previousBox: LitTemplate = nothing;\n  for (let i = 0; i < boxes.length; ++i) {\n    const name = boxes[i];\n    const display = style.get('display');\n    const position = style.get('position');\n    if (!display || !position) {\n      continue;\n    }\n    if (name === 'margin' && noMarginDisplayType.has(display)) {\n      continue;\n    }\n    if (name === 'padding' && noPaddingDisplayType.has(display)) {\n      continue;\n    }\n    if (name === 'position' && noPositionType.has(position)) {\n      continue;\n    }\n\n    const shouldHighlight = !node || highlightedMode === 'all' || name === highlightedMode;\n    const backgroundColor = boxColors[i].asString(Common.Color.Format.RGBA) || '';\n\n    const suffix = (name === 'border' ? '-width' : '');\n    // clang-format off\n    const box: LitTemplate = html`\n      <div\n          class=\"${name} ${shouldHighlight ? 'highlighted' : ''}\"\n          style=\"background-color: ${shouldHighlight ? backgroundColor : ''}\"\n          jslog=${VisualLogging.metricsBox().context(name).track({hover: true})}\n          @mouseover=${(e: Event) => {e.consume(); onHighlightNode(true, name === 'position' ? 'all' : name);}}>\n      ${name === 'content' ? html`\n        <span jslog=${VisualLogging.value('width').track({\n              dblclick: true,\n              keydown: 'Enter|Escape|ArrowUp|ArrowDown|PageUp|PageDown',\n              change: true,\n            })}\n            @dblclick=${(e: Event) => onStartEditing(e.currentTarget as Element, 'width', 'width', style)}\n            .innerText=${live(contentWidth)}>\n        </span>\n        <span> Ã— </span>\n        <span jslog=${VisualLogging.value('height').track({\n              dblclick: true,\n              keydown: 'Enter|Escape|ArrowUp|ArrowDown|PageUp|PageDown',\n              change: true,\n            })}\n            @dblclick=${(e: Event) => onStartEditing(e.currentTarget as Element, 'height', 'height', style)}\n            .innerText=${live(contentHeight)}>\n        </span>` : html`\n        <div class=\"label\">${boxLabels[i]}</div>\n          ${createBoxPartElement(style, name, 'top', suffix)}\n          <br>\n          ${createBoxPartElement(style, name, 'left', suffix)}\n          ${previousBox}\n          ${createBoxPartElement(style, name, 'right', suffix)}\n          <br>\n          ${createBoxPartElement(style, name, 'bottom', suffix)}`}\n        </div>`;\n    // clang-format on\n\n    previousBox = box;\n  }\n  // clang-format off\n  render(html`\n    <div class=\"metrics ${!node ? 'collapsed' : ''}\" @mouseover=${(e: Event) => { e.consume(); onHighlightNode(true, 'all'); }}\n        @mouseleave=${(e: Event) => { e.consume(); onHighlightNode(false, 'all'); }}>\n      ${previousBox}\n    </div>`, target);\n  // clang-format on\n};\n\nexport class MetricsSidebarPane extends ElementsSidebarPane {\n  originalPropertyData: SDK.CSSProperty.CSSProperty|null;\n  previousPropertyDataCandidate: SDK.CSSProperty.CSSProperty|null;\n  private inlineStyle: SDK.CSSStyleDeclaration.CSSStyleDeclaration|null;\n  private highlightMode: string;\n  private computedStyle: Map<string, string>|null;\n  private isEditingMetrics?: boolean;\n  private view: View;\n\n  constructor(computedStyleModel: ComputedStyleModel, view = DEFAULT_VIEW) {\n    super(computedStyleModel, {jslog: `${VisualLogging.pane('styles-metrics')}`});\n    this.registerRequiredCSS(metricsSidebarPaneStyles);\n\n    this.originalPropertyData = null;\n    this.previousPropertyDataCandidate = null;\n    this.inlineStyle = null;\n    this.highlightMode = '';\n    this.computedStyle = null;\n    this.view = view;\n  }\n\n  override async performUpdate(): Promise<void> {\n    // \"style\" attribute might have changed. Update metrics unless they are being edited\n    // (if a CSS property is added, a StyleSheetChanged event is dispatched).\n    if (this.isEditingMetrics) {\n      return await Promise.resolve();\n    }\n\n    // FIXME: avoid updates of a collapsed pane.\n    const node = this.node();\n    const cssModel = this.cssModel();\n    if (!node || node.nodeType() !== Node.ELEMENT_NODE || !cssModel) {\n      this.view(\n          {\n            style: new Map(),\n            highlightedMode: '',\n            node: null,\n            contentWidth: '',\n            contentHeight: '',\n            onHighlightNode: () => {},\n            onStartEditing: () => {},\n          },\n          undefined, this.contentElement);\n      return await Promise.resolve();\n    }\n\n    function callback(this: MetricsSidebarPane, style: Map<string, string>|null): void {\n      if (!style || this.node() !== node) {\n        this.computedStyle = null;\n        return;\n      }\n      this.computedStyle = style;\n      this.updateMetrics(style);\n    }\n\n    if (!node.id) {\n      return await Promise.resolve();\n    }\n\n    const promises = [\n      cssModel.getComputedStyle(node.id).then(callback.bind(this)),\n      cssModel.getInlineStyles(node.id).then(inlineStyleResult => {\n        if (inlineStyleResult && this.node() === node) {\n          this.inlineStyle = inlineStyleResult.inlineStyle;\n        }\n      }),\n    ];\n    return await (Promise.all(promises) as unknown as Promise<void>);\n  }\n\n  override onCSSModelChanged(): void {\n    this.requestUpdate();\n  }\n\n  private getPropertyValueAsPx(style: Map<string, string>, propertyName: string): number {\n    const propertyValue = style.get(propertyName);\n    if (!propertyValue) {\n      return 0;\n    }\n    return Number(propertyValue.replace(/px$/, '') || 0);\n  }\n\n  private getBox(computedStyle: Map<string, string>, componentName: string): {\n    left: number,\n    top: number,\n    right: number,\n    bottom: number,\n  } {\n    const suffix = componentName === 'border' ? '-width' : '';\n    const left = this.getPropertyValueAsPx(computedStyle, componentName + '-left' + suffix);\n    const top = this.getPropertyValueAsPx(computedStyle, componentName + '-top' + suffix);\n    const right = this.getPropertyValueAsPx(computedStyle, componentName + '-right' + suffix);\n    const bottom = this.getPropertyValueAsPx(computedStyle, componentName + '-bottom' + suffix);\n    return {left, top, right, bottom};\n  }\n\n  private highlightDOMNode(showHighlight: boolean, mode: string): void {\n    const node = this.node();\n    if (showHighlight && node) {\n      if (this.highlightMode === mode) {\n        return;\n      }\n      this.highlightMode = mode;\n      node.highlight(mode);\n    } else {\n      this.highlightMode = '';\n      SDK.OverlayModel.OverlayModel.hideDOMNodeHighlight();\n    }\n\n    if (this.computedStyle) {\n      this.updateMetrics(this.computedStyle, mode);\n    }\n  }\n\n  private getContentAreaWidthPx(style: Map<string, string>): string {\n    let width = style.get('width');\n    if (!width) {\n      return '';\n    }\n    width = width.replace(/px$/, '');\n    const widthValue = Number(width);\n    if (!isNaN(widthValue) && style.get('box-sizing') === 'border-box') {\n      const borderBox = this.getBox(style, 'border');\n      const paddingBox = this.getBox(style, 'padding');\n\n      width = (widthValue - borderBox.left - borderBox.right - paddingBox.left - paddingBox.right).toString();\n    }\n\n    return Platform.NumberUtilities.toFixedIfFloating(width);\n  }\n\n  private getContentAreaHeightPx(style: Map<string, string>): string {\n    let height = style.get('height');\n    if (!height) {\n      return '';\n    }\n    height = height.replace(/px$/, '');\n    const heightValue = Number(height);\n    if (!isNaN(heightValue) && style.get('box-sizing') === 'border-box') {\n      const borderBox = this.getBox(style, 'border');\n      const paddingBox = this.getBox(style, 'padding');\n\n      height = (heightValue - borderBox.top - borderBox.bottom - paddingBox.top - paddingBox.bottom).toString();\n    }\n\n    return Platform.NumberUtilities.toFixedIfFloating(height);\n  }\n\n  private updateMetrics(style: Map<string, string>, highlightedMode = 'all'): void {\n    this.view(\n        {\n          style,\n          highlightedMode,\n          node: this.node(),\n          contentWidth: this.getContentAreaWidthPx(style),\n          contentHeight: this.getContentAreaHeightPx(style),\n          onHighlightNode: this.highlightDOMNode.bind(this),\n          onStartEditing: this.startEditing.bind(this),\n        },\n        undefined, this.contentElement);\n  }\n\n  startEditing(targetElement: Element, box: string, styleProperty: string, computedStyle: Map<string, string>): void {\n    if (UI.UIUtils.isBeingEdited(targetElement)) {\n      return;\n    }\n\n    const context: {\n      box: string,\n      styleProperty: string,\n      computedStyle: Map<string, string>,\n      keyDownHandler: (arg0: Event) => void,\n    } = {box, styleProperty, computedStyle, keyDownHandler: () => {}};\n    const boundKeyDown = this.handleKeyDown.bind(this, context);\n    context.keyDownHandler = boundKeyDown;\n    targetElement.addEventListener('keydown', boundKeyDown, false);\n\n    this.isEditingMetrics = true;\n\n    const config =\n        new UI.InplaceEditor.Config(this.editingCommitted.bind(this), this.editingCancelled.bind(this), context);\n    UI.InplaceEditor.InplaceEditor.startEditing(targetElement, config);\n\n    const selection = targetElement.getComponentSelection();\n    selection?.selectAllChildren(targetElement);\n  }\n\n  private handleKeyDown(\n      context: {\n        box: string,\n        styleProperty: string,\n        computedStyle: Map<string, string>,\n        keyDownHandler: (arg0: Event) => void,\n      },\n      event: Event): void {\n    const element = (event.currentTarget as Element);\n\n    function finishHandler(this: MetricsSidebarPane, originalValue: string, replacementString: string): void {\n      this.applyUserInput(element, replacementString, originalValue, context, false);\n    }\n\n    function customNumberHandler(prefix: string, number: number, suffix: string): string {\n      if (context.styleProperty !== 'margin' && number < 0) {\n        number = 0;\n      }\n      return prefix + number + suffix;\n    }\n\n    UI.UIUtils.handleElementValueModifications(\n        event, element, finishHandler.bind(this), undefined, customNumberHandler);\n  }\n\n  editingEnded(element: Element, context: {\n    keyDownHandler: (arg0: Event) => void,\n  }): void {\n    this.originalPropertyData = null;\n    this.previousPropertyDataCandidate = null;\n    element.removeEventListener('keydown', context.keyDownHandler, false);\n    delete this.isEditingMetrics;\n  }\n\n  editingCancelled(element: Element, context: {\n    box: string,\n    styleProperty: string,\n    computedStyle: Map<string, string>,\n    keyDownHandler: (arg0: Event) => void,\n  }): void {\n    if (this.inlineStyle) {\n      if (!this.originalPropertyData) {\n        // An added property, remove the last property in the style.\n        const pastLastSourcePropertyIndex = this.inlineStyle.pastLastSourcePropertyIndex();\n        if (pastLastSourcePropertyIndex) {\n          void this.inlineStyle.allProperties()[pastLastSourcePropertyIndex - 1].setText('', false);\n        }\n      } else {\n        void this.inlineStyle.allProperties()[this.originalPropertyData.index].setText(\n            this.originalPropertyData.propertyText || '', false);\n      }\n    }\n    this.editingEnded(element, context);\n    this.requestUpdate();\n  }\n\n  private applyUserInput(\n      element: Element, userInput: string, previousContent: string|null, context: {\n        box: string,\n        styleProperty: string,\n        computedStyle: Map<string, string>,\n        keyDownHandler: (arg0: Event) => void,\n      },\n      commitEditor: boolean): void {\n    if (!this.inlineStyle) {\n      // Element has no renderer.\n      return this.editingCancelled(element, context);  // nothing changed, so cancel\n    }\n\n    if (commitEditor && userInput === previousContent) {\n      return this.editingCancelled(element, context);\n    }  // nothing changed, so cancel\n\n    if (context.box !== 'position' && (!userInput || userInput === '\\u2012' || userInput === '-')) {\n      userInput = 'unset';\n    } else if (context.box === 'position' && (!userInput || userInput === '\\u2012' || userInput === '-')) {\n      userInput = 'auto';\n    }\n\n    userInput = userInput.toLowerCase();\n    // Append a \"px\" unit if the user input was just a number.\n    if (/^\\d+$/.test(userInput)) {\n      userInput += 'px';\n    }\n\n    const styleProperty = context.styleProperty;\n    const computedStyle = context.computedStyle;\n\n    if (computedStyle.get('box-sizing') === 'border-box' && (styleProperty === 'width' || styleProperty === 'height')) {\n      if (!userInput.match(/px$/)) {\n        Common.Console.Console.instance().error(\n            'For elements with box-sizing: border-box, only absolute content area dimensions can be applied');\n        return;\n      }\n\n      const borderBox = this.getBox(computedStyle, 'border');\n      const paddingBox = this.getBox(computedStyle, 'padding');\n      let userValuePx = Number(userInput.replace(/px$/, ''));\n      if (isNaN(userValuePx)) {\n        return;\n      }\n      if (styleProperty === 'width') {\n        userValuePx += borderBox.left + borderBox.right + paddingBox.left + paddingBox.right;\n      } else {\n        userValuePx += borderBox.top + borderBox.bottom + paddingBox.top + paddingBox.bottom;\n      }\n\n      userInput = userValuePx + 'px';\n    }\n\n    this.previousPropertyDataCandidate = null;\n\n    const allProperties = this.inlineStyle.allProperties();\n    for (let i = 0; i < allProperties.length; ++i) {\n      const property = allProperties[i];\n      if (property.name !== context.styleProperty || (property.parsedOk && !property.activeInStyle())) {\n        continue;\n      }\n\n      this.previousPropertyDataCandidate = property;\n      property.setValue(userInput, commitEditor, true, callback.bind(this));\n      return;\n    }\n\n    this.inlineStyle.appendProperty(context.styleProperty, userInput, callback.bind(this));\n\n    function callback(this: MetricsSidebarPane, success: boolean): void {\n      if (!success) {\n        return;\n      }\n      if (!this.originalPropertyData) {\n        this.originalPropertyData = this.previousPropertyDataCandidate;\n      }\n\n      if (this.highlightMode) {\n        const node = this.node();\n        if (!node) {\n          return;\n        }\n        node.highlight(this.highlightMode);\n      }\n\n      if (commitEditor) {\n        this.requestUpdate();\n      }\n    }\n  }\n\n  private editingCommitted(\n      element: Element,\n      userInput: string,\n      previousContent: string|null,\n      context: {\n        box: string,\n        styleProperty: string,\n        computedStyle: Map<string, string>,\n        keyDownHandler: (arg0: Event) => void,\n      },\n      ): void {\n    this.editingEnded(element, context);\n    this.applyUserInput(element, userInput, previousContent, context, true);\n  }\n}\n"]}