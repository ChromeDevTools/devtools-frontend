{
  "version": 3,
  "sources": ["../../../../../../front_end/panels/explain/components/ConsoleInsight.ts", "components/consoleInsight.css.js", "../../../../../../front_end/panels/explain/ActionDelegate.ts"],
  "sourcesContent": ["// Copyright 2023 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n/* eslint-disable @devtools/no-lit-render-outside-of-view */\n\nimport '../../../ui/components/spinners/spinners.js';\n\nimport * as Common from '../../../core/common/common.js';\nimport * as Host from '../../../core/host/host.js';\nimport * as i18n from '../../../core/i18n/i18n.js';\nimport type * as Platform from '../../../core/platform/platform.js';\nimport * as Root from '../../../core/root/root.js';\nimport * as Marked from '../../../third_party/marked/marked.js';\nimport * as Buttons from '../../../ui/components/buttons/buttons.js';\nimport * as Input from '../../../ui/components/input/input.js';\nimport * as MarkdownView from '../../../ui/components/markdown_view/markdown_view.js';\nimport * as UI from '../../../ui/legacy/legacy.js';\nimport * as Lit from '../../../ui/lit/lit.js';\nimport * as VisualLogging from '../../../ui/visual_logging/visual_logging.js';\nimport * as Console from '../../console/console.js';\n\nimport styles from './consoleInsight.css.js';\n\n// Note: privacy and legal notices are not localized so far.\nconst UIStrings = {\n  /**\n   * @description The title of the insight source \"Console message\".\n   */\n  consoleMessage: 'Console message',\n  /**\n   * @description The title of the insight source \"Stacktrace\".\n   */\n  stackTrace: 'Stacktrace',\n  /**\n   * @description The title of the insight source \"Network request\".\n   */\n  networkRequest: 'Network request',\n  /**\n   * @description The title of the insight source \"Related code\".\n   */\n  relatedCode: 'Related code',\n  /**\n   * @description The title that is shown while the insight is being generated.\n   */\n  generating: 'Generating explanation…',\n  /**\n   * @description The header that indicates that the content shown is a console\n   * insight.\n   */\n  insight: 'Explanation',\n  /**\n   * @description The title of the a button that closes the insight pane.\n   */\n  closeInsight: 'Close explanation',\n  /**\n   * @description The title of the list of source data that was used to generate the insight.\n   */\n  inputData: 'Data used to understand this message',\n  /**\n   * @description The title of the button that allows submitting positive\n   * feedback about the console insight.\n   */\n  goodResponse: 'Good response',\n  /**\n   * @description The title of the button that allows submitting negative\n   * feedback about the console insight.\n   */\n  badResponse: 'Bad response',\n  /**\n   * @description The title of the button that opens a page to report a legal\n   * issue with the console insight.\n   */\n  report: 'Report legal issue',\n  /**\n   * @description The text of the header inside the console insight pane when there was an error generating an insight.\n   */\n  error: 'DevTools has encountered an error',\n  /**\n   * @description The message shown when an error has been encountered.\n   */\n  errorBody: 'Something went wrong. Try again.',\n  /**\n   * @description Label for screen readers that is added to the end of the link\n   * title to indicate that the link will be opened in a new tab.\n   */\n  opensInNewTab: '(opens in a new tab)',\n  /**\n   * @description The title of a link that allows the user to learn more about\n   * the feature.\n   */\n  learnMore: 'Learn more',\n  /**\n   * @description The error message when the user is not logged in into Chrome.\n   */\n  notLoggedIn: 'This feature is only available when you sign into Chrome with your Google account.',\n  /**\n   * @description The title of a button which opens the Chrome SignIn page.\n   */\n  signIn: 'Sign in',\n  /**\n   * @description The header shown when the internet connection is not\n   * available.\n   */\n  offlineHeader: 'DevTools can’t reach the internet',\n  /**\n   * @description Message shown when the user is offline.\n   */\n  offline: 'Check your internet connection and try again.',\n  /**\n   * @description The message shown if the user is not logged in.\n   */\n  signInToUse: 'Sign in to use this feature',\n  /**\n   * @description The title of the button that searches for the console\n   * insight using a search engine instead of using console insights.\n   */\n  search: 'Use search instead',\n  /**\n   * @description Shown to the user when the network request data is not\n   * available and a page reload might populate it.\n   */\n  reloadRecommendation:\n      'Reload the page to capture related network request data for this message in order to create a better insight.',\n  /**\n   * @description Shown to the user when they need to enable the console insights feature in settings in order to use it.\n   * @example {Console insights in Settings} PH1\n   */\n  turnOnInSettings:\n      'Turn on {PH1} to receive AI assistance for understanding and addressing console warnings and errors.',\n  /**\n   * @description Text for a link to Chrome DevTools Settings.\n   */\n  settingsLink: '`Console insights` in Settings',\n  /**\n   * @description The title of the list of references/recitations that were used to generate the insight.\n   */\n  references: 'Sources and related content',\n  /**\n   * @description Sub-heading for a list of links to URLs which are related to the AI-generated response.\n   */\n  relatedContent: 'Related content',\n  /**\n   * @description Error message shown when the request to get an AI response times out.\n   */\n  timedOut: 'Generating a response took too long. Please try again.',\n  /**\n   * @description Text informing the user that AI assistance is not available in Incognito mode or Guest mode.\n   */\n  notAvailableInIncognitoMode: 'AI assistance is not available in Incognito mode or Guest mode',\n} as const;\nconst str_ = i18n.i18n.registerUIStrings('panels/explain/components/ConsoleInsight.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\nconst i18nTemplate = Lit.i18nTemplate.bind(undefined, str_);\n\nconst {render, html, Directives} = Lit;\n\nexport class CloseEvent extends Event {\n  static readonly eventName = 'close';\n\n  constructor() {\n    super(CloseEvent.eventName, {composed: true, bubbles: true});\n  }\n}\n\ntype PublicPromptBuilder = Pick<Console.PromptBuilder.PromptBuilder, 'buildPrompt'|'getSearchQuery'>;\ntype PublicAidaClient = Pick<Host.AidaClient.AidaClient, 'doConversation'|'registerClientEvent'>;\n\nfunction localizeType(sourceType: Console.PromptBuilder.SourceType): string {\n  switch (sourceType) {\n    case Console.PromptBuilder.SourceType.MESSAGE:\n      return i18nString(UIStrings.consoleMessage);\n    case Console.PromptBuilder.SourceType.STACKTRACE:\n      return i18nString(UIStrings.stackTrace);\n    case Console.PromptBuilder.SourceType.NETWORK_REQUEST:\n      return i18nString(UIStrings.networkRequest);\n    case Console.PromptBuilder.SourceType.RELATED_CODE:\n      return i18nString(UIStrings.relatedCode);\n  }\n}\n\nconst TERMS_OF_SERVICE_URL = 'https://policies.google.com/terms';\nconst PRIVACY_POLICY_URL = 'https://policies.google.com/privacy';\nconst CODE_SNIPPET_WARNING_URL = 'https://support.google.com/legal/answer/13505487';\nconst LEARN_MORE_URL = 'https://goo.gle/devtools-console-messages-ai' as Platform.DevToolsPath.UrlString;\nconst REPORT_URL = 'https://support.google.com/legal/troubleshooter/1114905?hl=en#ts=1115658%2C13380504' as\n    Platform.DevToolsPath.UrlString;\nconst SIGN_IN_URL = 'https://accounts.google.com' as Platform.DevToolsPath.UrlString;\n\ninterface ViewInput {\n  state: StateData;\n  closing: boolean;\n  disableAnimations: boolean;\n  renderer: MarkdownView.MarkdownView.MarkdownInsightRenderer;\n  selectedRating?: boolean;\n  noLogging: boolean;\n  callbacks: {\n    onClose: () => void,\n    onAnimationEnd: () => void,\n    onSearch: () => void,\n    onRating: (isPositive: boolean) => void,\n    onReport: () => void,\n    onGoToSignIn: () => void,\n    onConsentReminderConfirmed: () => Promise<void>,\n    onToggleReferenceDetails: () => void,\n    onDisclaimerSettingsLink: () => void,\n    onReminderSettingsLink: () => void,\n    onEnableInsightsInSettingsLink: () => void,\n  };\n}\n\ninterface ViewOutput {\n  referenceDetailsRef: Lit.Directives.Ref<HTMLDetailsElement>;\n  headerRef: Lit.Directives.Ref<HTMLHeadingElement>;\n  citationLinks: HTMLElement[];\n}\n\nconst enum State {\n  INSIGHT = 'insight',\n  LOADING = 'loading',\n  ERROR = 'error',\n  SETTING_IS_NOT_TRUE = 'setting-is-not-true',\n  CONSENT_REMINDER = 'consent-reminder',\n  NOT_LOGGED_IN = 'not-logged-in',\n  SYNC_IS_PAUSED = 'sync-is-paused',\n  OFFLINE = 'offline',\n}\n\ntype StateData = {\n  type: State.LOADING,\n  consentOnboardingCompleted: boolean,\n}|{\n  type: State.INSIGHT,\n  tokens: MarkdownView.MarkdownView.MarkdownViewData['tokens'],\n  validMarkdown: boolean,\n  sources: Console.PromptBuilder.Source[],\n  isPageReloadRecommended: boolean,\n  completed: boolean,\n  directCitationUrls: string[],\n  relatedUrls: string[],\n  timedOut?: boolean,\n}&Host.AidaClient.DoConversationResponse|{\n  type: State.ERROR,\n  error: string,\n}|{\n  type: State.CONSENT_REMINDER,\n  sources: Console.PromptBuilder.Source[],\n  isPageReloadRecommended: boolean,\n}|{\n  type: State.SETTING_IS_NOT_TRUE,\n}|{\n  type: State.NOT_LOGGED_IN,\n}|{\n  type: State.SYNC_IS_PAUSED,\n}|{\n  type: State.OFFLINE,\n};\n\nconst markedExtension = {\n  name: 'citation',\n  level: 'inline',\n  start(src: string) {\n    return src.match(/\\[\\^/)?.index;\n  },\n  tokenizer(src: string) {\n    const match = src.match(/^\\[\\^(\\d+)\\]/);\n    if (match) {\n      return {\n        type: 'citation',\n        raw: match[0],\n        linkText: Number(match[1]),\n      };\n    }\n    return false;\n  },\n  renderer: () => '',\n};\n\nfunction isSearchRagResponse(metadata: Host.AidaClient.ResponseMetadata): boolean {\n  return Boolean(metadata.factualityMetadata?.facts.length);\n}\n\nfunction renderSearchButton(onSearch: ViewInput['callbacks']['onSearch']): Lit.TemplateResult {\n  // clang-format off\n  return html`<devtools-button\n    @click=${onSearch}\n    class=\"search-button\"\n    .variant=${Buttons.Button.Variant.OUTLINED}\n    .jslogContext=${'search'}\n  >\n    ${i18nString(UIStrings.search)}\n  </devtools-button>`;\n  // clang-format on\n}\n\nfunction renderLearnMoreAboutInsights(): Lit.TemplateResult {\n  // clang-format off\n  return html`<x-link href=${LEARN_MORE_URL} class=\"link\" jslog=${VisualLogging.link('learn-more').track({click: true})}>\n    ${i18nString(UIStrings.learnMore)}\n  </x-link>`;\n  // clang-format on\n}\n\nfunction maybeRenderSources(directCitationUrls: string[], output: ViewOutput): Lit.LitTemplate {\n  if (!directCitationUrls.length) {\n    return Lit.nothing;\n  }\n\n  // clang-format off\n  return html`\n    <ol class=\"sources-list\">\n      ${directCitationUrls.map((url, index) => html`\n        <li>\n          <x-link\n            href=${url}\n            class=\"link\"\n            jslog=${VisualLogging.link('references.console-insights').track({click: true})}\n            ${Directives.ref(e => { output.citationLinks[index] = e as HTMLElement; })}\n          >\n            ${url}\n          </x-link>\n        </li>\n      `)}\n    </ol>\n  `;\n  // clang-format on\n}\n\nfunction maybeRenderRelatedContent(relatedUrls: string[], directCitationUrls: string[]): Lit.LitTemplate {\n  if (relatedUrls.length === 0) {\n    return Lit.nothing;\n  }\n  // clang-format off\n  return html`\n    ${directCitationUrls.length ? html`<h3>${i18nString(UIStrings.relatedContent)}</h3>` : Lit.nothing}\n    <ul class=\"references-list\">\n      ${relatedUrls.map(relatedUrl => html`\n        <li>\n          <x-link\n            href=${relatedUrl}\n            class=\"link\"\n            jslog=${VisualLogging.link('references.console-insights').track({click: true})}\n          >\n            ${relatedUrl}\n          </x-link>\n        </li>\n      `)}\n    </ul>\n  `;\n  // clang-format on\n}\n\nfunction renderLoading(): Lit.TemplateResult {\n  // clang-format off\n  return html`\n    <div role=\"presentation\" aria-label=\"Loading\" class=\"loader\" style=\"clip-path: url('#clipPath');\">\n      <svg width=\"100%\" height=\"64\">\n        <clipPath id=\"clipPath\">\n          <rect x=\"0\" y=\"0\" width=\"100%\" height=\"16\" rx=\"8\"></rect>\n          <rect x=\"0\" y=\"24\" width=\"100%\" height=\"16\" rx=\"8\"></rect>\n          <rect x=\"0\" y=\"48\" width=\"100%\" height=\"16\" rx=\"8\"></rect>\n        </clipPath>\n      </svg>\n    </div>`;\n  // clang-format on\n}\n\nfunction renderInsightSourcesList(\n    sources: Console.PromptBuilder.Source[], isPageReloadRecommended: boolean): Lit.TemplateResult {\n  // clang-format off\n  return html`\n    <div class=\"insight-sources\">\n      <ul>\n        ${Directives.repeat(sources, item => item.value, item => {\n          return html`<li><x-link class=\"link\" title=\"${localizeType(item.type)} ${i18nString(UIStrings.opensInNewTab)}\" href=\"data:text/plain;charset=utf-8,${encodeURIComponent(item.value)}\" jslog=${VisualLogging.link('source-' + item.type).track({click: true})}>\n            <devtools-icon name=\"open-externally\"></devtools-icon>\n            ${localizeType(item.type)}\n          </x-link></li>`;\n        })}\n        ${isPageReloadRecommended ? html`<li class=\"source-disclaimer\">\n          <devtools-icon name=\"warning\"></devtools-icon>\n          ${i18nString(UIStrings.reloadRecommendation)}</li>` : Lit.nothing}\n      </ul>\n    </div>`;\n  // clang-format on\n}\n\nfunction renderInsight(\n    insight: Extract<StateData, {type: State.INSIGHT}>, renderer: ViewInput['renderer'],\n    disableAnimations: ViewInput['disableAnimations'], callbacks: ViewInput['callbacks'],\n    output: ViewOutput): Lit.TemplateResult {\n  // clang-format off\n      return html`\n        ${\n          insight.validMarkdown ? html`<devtools-markdown-view\n            .data=${{tokens: insight.tokens, renderer, animationEnabled: !disableAnimations} as MarkdownView.MarkdownView.MarkdownViewData}>\n          </devtools-markdown-view>`: insight.explanation\n        }\n        ${insight.timedOut ? html`<p class=\"error-message\">${i18nString(UIStrings.timedOut)}</p>` : Lit.nothing}\n        ${isSearchRagResponse(insight.metadata) ? html`\n          <details class=\"references\" ${Directives.ref(output.referenceDetailsRef)} @toggle=${callbacks.onToggleReferenceDetails} jslog=${VisualLogging.expand('references').track({click: true})}>\n            <summary>${i18nString(UIStrings.references)}</summary>\n            ${maybeRenderSources(insight.directCitationUrls, output)}\n            ${maybeRenderRelatedContent(insight.relatedUrls, insight.directCitationUrls)}\n          </details>\n        ` : Lit.nothing}\n        <details jslog=${VisualLogging.expand('sources').track({click: true})}>\n          <summary>${i18nString(UIStrings.inputData)}</summary>\n          ${renderInsightSourcesList(insight.sources, insight.isPageReloadRecommended)}\n        </details>\n        <div class=\"buttons\">\n          ${renderSearchButton(callbacks.onSearch)}\n        </div>`;\n  // clang-format on\n}\n\nfunction renderError(message: string): Lit.TemplateResult {\n  // clang-format off\n  return html`<div class=\"error\">${message}</div>`;\n  // clang-format on\n}\n\nfunction renderConsentReminder(noLogging: boolean): Lit.TemplateResult {\n  // clang-format off\n  return html`\n    <h3>Things to consider</h3>\n    <div class=\"reminder-items\">\n      <div>\n        <devtools-icon name=\"google\" class=\"medium\">\n        </devtools-icon>\n      </div>\n      <div>The console message, associated stack trace, related source code, and the associated network headers are sent to Google to generate explanations. ${noLogging\n          ? 'The content you submit and that is generated by this feature will not be used to improve Google’s AI models.'\n          : 'This data may be seen by human reviewers to improve this feature. Avoid sharing sensitive or personal information.'}\n      </div>\n      <div>\n        <devtools-icon name=\"policy\" class=\"medium\">\n        </devtools-icon>\n      </div>\n      <div>Use of this feature is subject to the <x-link\n          href=${TERMS_OF_SERVICE_URL}\n          class=\"link\"\n          jslog=${VisualLogging.link('terms-of-service.console-insights').track({click: true})}>\n        Google Terms of Service\n        </x-link> and <x-link\n          href=${PRIVACY_POLICY_URL}\n          class=\"link\"\n          jslog=${VisualLogging.link('privacy-policy.console-insights').track({click: true})}>\n        Google Privacy Policy\n        </x-link>\n      </div>\n      <div>\n        <devtools-icon name=\"warning\" class=\"medium\">\n        </devtools-icon>\n      </div>\n      <div>\n        <x-link\n          href=${CODE_SNIPPET_WARNING_URL}\n          class=\"link\"\n          jslog=${VisualLogging.link('code-snippets-explainer.console-insights').track({click: true})}\n        >Use generated code snippets with caution</x-link>\n      </div>\n    </div>`;\n  // clang-format on\n}\n\nfunction renderSettingIsNotTrue(onEnableInsightsInSettingsLink: () => void): Lit.TemplateResult {\n  // clang-format off\n  const settingsLink = html`\n    <button\n      class=\"link\" role=\"link\"\n      jslog=${VisualLogging.action('open-ai-settings').track({click: true})}\n      @click=${onEnableInsightsInSettingsLink}\n    >${i18nString(UIStrings.settingsLink)}</button>`;\n\n  return html`\n    <div class=\"badge\">\n      <devtools-icon name=\"lightbulb-spark\" class=\"medium\">\n      </devtools-icon>\n    </div>\n    <div>\n      ${i18nTemplate(UIStrings.turnOnInSettings, {PH1: settingsLink})} ${\n      renderLearnMoreAboutInsights()}\n    </div>`;\n  // clang-format on\n}\n\nfunction renderNotLoggedIn(): Lit.TemplateResult {\n  return renderError(\n      Root.Runtime.hostConfig.isOffTheRecord ? i18nString(UIStrings.notAvailableInIncognitoMode) :\n                                               i18nString(UIStrings.notLoggedIn));\n}\n\nfunction renderDisclaimer(noLogging: boolean, onDisclaimerSettingsLink: () => void): Lit.LitTemplate {\n  // clang-format off\n  return html`<span>\n    AI tools may generate inaccurate info that doesn't represent Google's views. ${noLogging\n      ? 'The content you submit and that is generated by this feature will not be used to improve Google’s AI models.'\n      : 'Data sent to Google may be seen by human reviewers to improve this feature.'\n    } <button class=\"link\" role=\"link\" @click=${onDisclaimerSettingsLink}\n              jslog=${VisualLogging.action('open-ai-settings').track({click: true})}>\n      Open settings\n    </button> or <x-link href=${LEARN_MORE_URL}\n        class=\"link\" jslog=${VisualLogging.link('learn-more').track({click: true})}>\n      learn more\n    </x-link>\n  </span>`;\n  // clang-format on\n}\n\nfunction renderDisclaimerFooter(noLogging: boolean, onDisclaimerSettingsLink: () => void): Lit.LitTemplate {\n  // clang-format off\n  return html`\n    <div class=\"disclaimer\">\n      ${renderDisclaimer(noLogging, onDisclaimerSettingsLink)}\n    </div>`;\n  // clang-format on\n}\n\nfunction renderSignInFooter(onGoToSignIn: () => void): Lit.LitTemplate {\n  if (Root.Runtime.hostConfig.isOffTheRecord) {\n    return Lit.nothing;\n  }\n  // clang-format off\n  return html`\n    <div class=\"filler\"></div>\n    <div>\n      <devtools-button\n        @click=${onGoToSignIn}\n        .variant=${Buttons.Button.Variant.PRIMARY}\n        .jslogContext=${'update-settings'}\n      >\n        ${UIStrings.signIn}\n      </devtools-button>\n    </div>`;\n}\n\nfunction renderConsentReminderFooter(onReminderSettingsLink: () => void, onConsentReminderConfirmed: () => void): Lit.LitTemplate {\n  // clang-format off\n  return html`\n    <div class=\"filler\"></div>\n    <div class=\"buttons\">\n      <devtools-button\n        @click=${onReminderSettingsLink}\n          .variant=${Buttons.Button.Variant.TONAL}\n          jslogContext=${'settings'}\n          title=${'Settings'}\n      >\n        Settings\n      </devtools-button>\n      <devtools-button\n        class='continue-button'\n        @click=${onConsentReminderConfirmed}\n        .variant=${Buttons.Button.Variant.PRIMARY}\n        .jslogContext=${'continue'}\n        .title=${'continue'}\n      >\n        Continue\n      </devtools-button>\n    </div>`;\n}\n\nfunction renderInsightFooter(noLogging: ViewInput['noLogging'], selectedRating: ViewInput['selectedRating'], callbacks: ViewInput['callbacks']): Lit.LitTemplate {\n  // clang-format off\n  return html`\n  <div class=\"disclaimer\">\n    ${renderDisclaimer(noLogging, callbacks.onDisclaimerSettingsLink)}\n  </div>\n  <div class=\"filler\"></div>\n  <div class=\"rating\">\n    <devtools-button\n      data-rating=\"true\"\n      .iconName=${'thumb-up'}\n      .toggledIconName=${'thumb-up'}\n      .variant=${Buttons.Button.Variant.ICON_TOGGLE}\n      .size=${Buttons.Button.Size.SMALL}\n      .toggleOnClick=${false}\n      .toggleType=${Buttons.Button.ToggleType.PRIMARY}\n      .disabled=${selectedRating !== undefined}\n      .toggled=${selectedRating === true}\n      .title=${i18nString(UIStrings.goodResponse)}\n      .jslogContext=${'thumbs-up'}\n      @click=${() => callbacks.onRating(true)}\n    ></devtools-button>\n    <devtools-button\n      data-rating=\"false\"\n      .iconName=${'thumb-down'}\n      .toggledIconName=${'thumb-down'}\n      .variant=${Buttons.Button.Variant.ICON_TOGGLE}\n      .size=${Buttons.Button.Size.SMALL}\n      .toggleOnClick=${false}\n      .toggleType=${Buttons.Button.ToggleType.PRIMARY}\n      .disabled=${selectedRating !== undefined}\n      .toggled=${selectedRating === false}\n      .title=${i18nString(UIStrings.badResponse)}\n      .jslogContext=${'thumbs-down'}\n      @click=${() => callbacks.onRating(false)}\n    ></devtools-button>\n    <devtools-button\n      .iconName=${'report'}\n      .variant=${Buttons.Button.Variant.ICON}\n      .size=${Buttons.Button.Size.SMALL}\n      .title=${i18nString(UIStrings.report)}\n      .jslogContext=${'report'}\n      @click=${callbacks.onReport}\n    ></devtools-button>\n  </div>`;\n  // clang-format on\n}\n\nfunction renderHeaderIcon(): Lit.LitTemplate {\n  // clang-format off\n  return html`\n    <div class=\"header-icon-container\">\n      <devtools-icon name=\"lightbulb-spark\" class=\"large\">\n      </devtools-icon>\n    </div>`;\n  // clang-format on\n}\n\ninterface HeaderInput {\n  headerText: string;\n  showIcon?: boolean;\n  showSpinner?: boolean;\n  onClose: ViewInput['callbacks']['onClose'];\n}\n\nfunction renderHeader(\n    {headerText, showIcon = false, showSpinner = false, onClose}: HeaderInput,\n    headerRef: Lit.Directives.Ref<HTMLHeadingElement>): Lit.LitTemplate {\n  // clang-format off\n  return html`\n    <header>\n      ${showIcon ? renderHeaderIcon() : Lit.nothing}\n      <div class=\"filler\">\n        <h2 tabindex=\"-1\" ${Directives.ref(headerRef)}>\n          ${headerText}\n        </h2>\n        ${showSpinner ? html`<devtools-spinner></devtools-spinner>` : Lit.nothing}\n      </div>\n      <div class=\"close-button\">\n        <devtools-button\n          .iconName=${'cross'}\n          .variant=${Buttons.Button.Variant.ICON}\n          .size=${Buttons.Button.Size.SMALL}\n          .title=${i18nString(UIStrings.closeInsight)}\n          jslog=${VisualLogging.close().track({click: true})}\n          @click=${onClose}\n        ></devtools-button>\n      </div>\n    </header>\n  `;\n  // clang-format on\n}\n\nexport class ConsoleInsight extends HTMLElement {\n  static async create(promptBuilder: PublicPromptBuilder, aidaClient: PublicAidaClient): Promise<ConsoleInsight> {\n    const aidaPreconditions = await Host.AidaClient.AidaClient.checkAccessPreconditions();\n    return new ConsoleInsight(promptBuilder, aidaClient, aidaPreconditions);\n  }\n\n  readonly #shadow = this.attachShadow({mode: 'open'});\n\n  disableAnimations = false;\n\n  #promptBuilder: PublicPromptBuilder;\n  #aidaClient: PublicAidaClient;\n  #renderer: MarkdownView.MarkdownView.MarkdownInsightRenderer;\n\n  // Main state.\n  #state: StateData;\n  #referenceDetailsRef = Directives.createRef<HTMLDetailsElement>();\n  #headerRef = Directives.createRef<HTMLHeadingElement>();\n  #citationLinks: HTMLElement[] = [];\n  #areReferenceDetailsOpen = false;\n  #stateChanging = false;\n  #closing = false;\n\n  // Rating sub-form state.\n  #selectedRating?: boolean;\n\n  #consoleInsightsEnabledSetting: Common.Settings.Setting<boolean>|undefined;\n  #aidaPreconditions: Host.AidaClient.AidaAccessPreconditions;\n  #boundOnAidaAvailabilityChange: () => Promise<void>;\n  #marked: Marked.Marked.Marked;\n\n  constructor(\n      promptBuilder: PublicPromptBuilder, aidaClient: PublicAidaClient,\n      aidaPreconditions: Host.AidaClient.AidaAccessPreconditions) {\n    super();\n    this.#promptBuilder = promptBuilder;\n    this.#aidaClient = aidaClient;\n    this.#aidaPreconditions = aidaPreconditions;\n    this.#consoleInsightsEnabledSetting = this.#getConsoleInsightsEnabledSetting();\n    this.#renderer = new MarkdownView.MarkdownView.MarkdownInsightRenderer(this.#citationClickHandler.bind(this));\n    this.#marked = new Marked.Marked.Marked({extensions: [markedExtension]});\n\n    this.#state = this.#getStateFromAidaAvailability();\n    this.#boundOnAidaAvailabilityChange = this.#onAidaAvailabilityChange.bind(this);\n    this.#render();\n    // Stop keyboard event propagation to avoid Console acting on the events\n    // inside the insight component.\n    this.addEventListener('keydown', e => {\n      e.stopPropagation();\n    });\n    this.addEventListener('keyup', e => {\n      e.stopPropagation();\n    });\n    this.addEventListener('keypress', e => {\n      e.stopPropagation();\n    });\n    this.addEventListener('click', e => {\n      e.stopPropagation();\n    });\n    this.focus();\n  }\n\n  #citationClickHandler(index: number): void {\n    if (this.#state.type !== State.INSIGHT || !this.#referenceDetailsRef.value) {\n      return;\n    }\n    const areDetailsAlreadyExpanded = this.#referenceDetailsRef.value.open;\n    this.#areReferenceDetailsOpen = true;\n    this.#render();\n\n    const highlightedElement = this.#citationLinks[index - 1];\n    if (highlightedElement) {\n      UI.UIUtils.runCSSAnimationOnce(highlightedElement, 'highlighted');\n      if (areDetailsAlreadyExpanded) {\n        highlightedElement.scrollIntoView({behavior: 'auto'});\n        highlightedElement.focus();\n      } else {  // Wait for the details element to open before scrolling.\n        this.#referenceDetailsRef.value.addEventListener('transitionend', () => {\n          highlightedElement.scrollIntoView({behavior: 'auto'});\n          highlightedElement.focus();\n        }, {once: true});\n      }\n    }\n  }\n\n  #getStateFromAidaAvailability(): StateData {\n    switch (this.#aidaPreconditions) {\n      case Host.AidaClient.AidaAccessPreconditions.AVAILABLE: {\n        // Allows skipping the consent reminder if the user enabled the feature via settings in the current session\n        const skipReminder =\n            Common.Settings.Settings.instance()\n                .createSetting('console-insights-skip-reminder', false, Common.Settings.SettingStorageType.SESSION)\n                .get();\n        return {\n          type: State.LOADING,\n          consentOnboardingCompleted: this.#getOnboardingCompletedSetting().get() || skipReminder,\n        };\n      }\n      case Host.AidaClient.AidaAccessPreconditions.NO_ACCOUNT_EMAIL:\n        return {\n          type: State.NOT_LOGGED_IN,\n        };\n      case Host.AidaClient.AidaAccessPreconditions.SYNC_IS_PAUSED:\n        return {\n          type: State.SYNC_IS_PAUSED,\n        };\n      case Host.AidaClient.AidaAccessPreconditions.NO_INTERNET:\n        return {\n          type: State.OFFLINE,\n        };\n    }\n  }\n\n  // off -> entrypoints are shown, and point to the AI setting panel where the setting can be turned on\n  // on -> entrypoints are shown, and console insights can be generated\n  #getConsoleInsightsEnabledSetting(): Common.Settings.Setting<boolean>|undefined {\n    try {\n      return Common.Settings.moduleSetting('console-insights-enabled') as Common.Settings.Setting<boolean>;\n    } catch {\n      return;\n    }\n  }\n\n  // off -> consent reminder is shown, unless the 'console-insights-enabled'-setting has been enabled in the current DevTools session\n  // on -> no consent reminder shown\n  #getOnboardingCompletedSetting(): Common.Settings.Setting<boolean> {\n    return Common.Settings.Settings.instance().createLocalSetting('console-insights-onboarding-finished', false);\n  }\n\n  connectedCallback(): void {\n    this.#consoleInsightsEnabledSetting?.addChangeListener(this.#onConsoleInsightsSettingChanged, this);\n    const blockedByAge = Root.Runtime.hostConfig.aidaAvailability?.blockedByAge === true;\n    if (this.#state.type === State.LOADING && this.#consoleInsightsEnabledSetting?.getIfNotDisabled() === true &&\n        !blockedByAge && this.#state.consentOnboardingCompleted) {\n      Host.userMetrics.actionTaken(Host.UserMetrics.Action.GeneratingInsightWithoutDisclaimer);\n    }\n    Host.AidaClient.HostConfigTracker.instance().addEventListener(\n        Host.AidaClient.Events.AIDA_AVAILABILITY_CHANGED, this.#boundOnAidaAvailabilityChange);\n    // If AIDA availability has changed while the component was disconnected, we need to update.\n    void this.#onAidaAvailabilityChange();\n    // The setting might have been turned on/off while the component was disconnected.\n    // Update the state, unless the current state is already terminal (`INSIGHT` or `ERROR`).\n    if (this.#state.type !== State.INSIGHT && this.#state.type !== State.ERROR) {\n      this.#state = this.#getStateFromAidaAvailability();\n    }\n    void this.#generateInsightIfNeeded();\n  }\n\n  disconnectedCallback(): void {\n    this.#consoleInsightsEnabledSetting?.removeChangeListener(this.#onConsoleInsightsSettingChanged, this);\n    Host.AidaClient.HostConfigTracker.instance().removeEventListener(\n        Host.AidaClient.Events.AIDA_AVAILABILITY_CHANGED, this.#boundOnAidaAvailabilityChange);\n  }\n\n  async #onAidaAvailabilityChange(): Promise<void> {\n    const currentAidaAvailability = await Host.AidaClient.AidaClient.checkAccessPreconditions();\n    if (currentAidaAvailability !== this.#aidaPreconditions) {\n      this.#aidaPreconditions = currentAidaAvailability;\n      this.#state = this.#getStateFromAidaAvailability();\n      void this.#generateInsightIfNeeded();\n    }\n  }\n\n  #onConsoleInsightsSettingChanged(): void {\n    if (this.#consoleInsightsEnabledSetting?.getIfNotDisabled() === true) {\n      this.#getOnboardingCompletedSetting().set(true);\n    }\n    if (this.#state.type === State.SETTING_IS_NOT_TRUE &&\n        this.#consoleInsightsEnabledSetting?.getIfNotDisabled() === true) {\n      this.#transitionTo({\n        type: State.LOADING,\n        consentOnboardingCompleted: true,\n      });\n      Host.userMetrics.actionTaken(Host.UserMetrics.Action.InsightsOptInTeaserConfirmedInSettings);\n      void this.#generateInsightIfNeeded();\n    }\n    if (this.#state.type === State.CONSENT_REMINDER &&\n        this.#consoleInsightsEnabledSetting?.getIfNotDisabled() === false) {\n      this.#transitionTo({\n        type: State.LOADING,\n        consentOnboardingCompleted: false,\n      });\n      Host.userMetrics.actionTaken(Host.UserMetrics.Action.InsightsReminderTeaserAbortedInSettings);\n      void this.#generateInsightIfNeeded();\n    }\n  }\n\n  #transitionTo(newState: StateData): void {\n    this.#stateChanging = this.#state.type !== newState.type;\n    this.#state = newState;\n    this.#render();\n  }\n\n  async #generateInsightIfNeeded(): Promise<void> {\n    if (this.#state.type !== State.LOADING) {\n      return;\n    }\n    const blockedByAge = Root.Runtime.hostConfig.aidaAvailability?.blockedByAge === true;\n    if (this.#consoleInsightsEnabledSetting?.getIfNotDisabled() !== true || blockedByAge) {\n      this.#transitionTo({\n        type: State.SETTING_IS_NOT_TRUE,\n      });\n      Host.userMetrics.actionTaken(Host.UserMetrics.Action.InsightsOptInTeaserShown);\n      return;\n    }\n    if (!this.#state.consentOnboardingCompleted) {\n      const {sources, isPageReloadRecommended} = await this.#promptBuilder.buildPrompt();\n      this.#transitionTo({\n        type: State.CONSENT_REMINDER,\n        sources,\n        isPageReloadRecommended,\n      });\n      Host.userMetrics.actionTaken(Host.UserMetrics.Action.InsightsReminderTeaserShown);\n      return;\n    }\n    await this.#generateInsight();\n  }\n\n  #onClose(): void {\n    if (this.#state.type === State.CONSENT_REMINDER) {\n      Host.userMetrics.actionTaken(Host.UserMetrics.Action.InsightsReminderTeaserCanceled);\n    }\n    this.#closing = true;\n    this.#render();\n  }\n\n  #onAnimationEnd(): void {\n    if (this.#closing) {\n      this.dispatchEvent(new CloseEvent());\n      return;\n    }\n    if (this.#stateChanging) {\n      this.#headerRef.value?.focus();\n    }\n  }\n\n  #onRating(isPositive: boolean): void {\n    if (this.#state.type !== State.INSIGHT) {\n      throw new Error('Unexpected state');\n    }\n    if (this.#state.metadata?.rpcGlobalId === undefined) {\n      throw new Error('RPC Id not in metadata');\n    }\n    // If it was rated, do not record again.\n    if (this.#selectedRating !== undefined) {\n      return;\n    }\n\n    this.#selectedRating = isPositive;\n    this.#render();\n    if (this.#selectedRating) {\n      Host.userMetrics.actionTaken(Host.UserMetrics.Action.InsightRatedPositive);\n    } else {\n      Host.userMetrics.actionTaken(Host.UserMetrics.Action.InsightRatedNegative);\n    }\n    const disallowLogging = Root.Runtime.hostConfig.aidaAvailability?.disallowLogging ?? true;\n    void this.#aidaClient.registerClientEvent({\n      corresponding_aida_rpc_global_id: this.#state.metadata.rpcGlobalId,\n      disable_user_content_logging: disallowLogging,\n      do_conversation_client_event: {\n        user_feedback: {\n          sentiment: this.#selectedRating ? Host.AidaClient.Rating.POSITIVE : Host.AidaClient.Rating.NEGATIVE,\n        },\n      },\n    });\n  }\n\n  #onReport(): void {\n    Host.InspectorFrontendHost.InspectorFrontendHostInstance.openInNewTab(REPORT_URL);\n  }\n\n  #onSearch(): void {\n    const query = this.#promptBuilder.getSearchQuery();\n    Host.InspectorFrontendHost.InspectorFrontendHostInstance.openSearchResultsInNewTab(query);\n  }\n\n  async #onConsentReminderConfirmed(): Promise<void> {\n    this.#getOnboardingCompletedSetting().set(true);\n    this.#transitionTo({\n      type: State.LOADING,\n      consentOnboardingCompleted: true,\n    });\n    Host.userMetrics.actionTaken(Host.UserMetrics.Action.InsightsReminderTeaserConfirmed);\n    await this.#generateInsight();\n  }\n\n  #insertCitations(explanation: string, metadata: Host.AidaClient.ResponseMetadata):\n      {explanationWithCitations: string, directCitationUrls: string[]} {\n    const directCitationUrls: string[] = [];\n    if (!isSearchRagResponse(metadata) || !metadata.attributionMetadata) {\n      return {explanationWithCitations: explanation, directCitationUrls};\n    }\n\n    const {attributionMetadata} = metadata;\n    const sortedCitations =\n        attributionMetadata.citations\n            .filter(citation => citation.sourceType === Host.AidaClient.CitationSourceType.WORLD_FACTS)\n            .sort((a, b) => (b.endIndex || 0) - (a.endIndex || 0));\n    let explanationWithCitations = explanation;\n    for (const [index, citation] of sortedCitations.entries()) {\n      // Matches optional punctuation mark followed by whitespace.\n      // Ensures citation is placed at the end of a word.\n      const myRegex = /[.,:;!?]*\\s/g;\n      myRegex.lastIndex = citation.endIndex || 0;\n      const result = myRegex.exec(explanationWithCitations);\n      if (result && citation.uri) {\n        explanationWithCitations = explanationWithCitations.slice(0, result.index) +\n            `[^${sortedCitations.length - index}]` + explanationWithCitations.slice(result.index);\n        directCitationUrls.push(citation.uri);\n      }\n    }\n\n    directCitationUrls.reverse();\n    return {explanationWithCitations, directCitationUrls};\n  }\n\n  #modifyTokensToHandleCitationsInCode(tokens: Marked.Marked.TokensList): void {\n    for (const token of tokens) {\n      if (token.type === 'code') {\n        // Find and remove '[^number]' from within code block\n        const matches: String[]|null = token.text.match(/\\[\\^\\d+\\]/g);\n        token.text = token.text.replace(/\\[\\^\\d+\\]/g, '');\n        // And add as a citation for the whole code block\n        if (matches?.length) {\n          const citations = matches.map(match => {\n            const index = parseInt(match.slice(2, -1), 10);\n            return {\n              index,\n              clickHandler: this.#citationClickHandler.bind(this, index),\n            };\n          });\n          (token as MarkdownView.MarkdownView.CodeTokenWithCitation).citations = citations;\n        }\n      }\n    }\n  }\n\n  #deriveRelatedUrls(directCitationUrls: string[], metadata: Host.AidaClient.ResponseMetadata): string[] {\n    if (!metadata.factualityMetadata?.facts.length) {\n      return [];\n    }\n\n    const relatedUrls =\n        metadata.factualityMetadata.facts.filter(fact => fact.sourceUri && !directCitationUrls.includes(fact.sourceUri))\n            .map(fact => fact.sourceUri as string) ||\n        [];\n    const trainingDataUrls =\n        metadata.attributionMetadata?.citations\n            .filter(\n                citation => citation.sourceType === Host.AidaClient.CitationSourceType.TRAINING_DATA &&\n                    (citation.uri || citation.repository))\n            .map(citation => citation.uri || `https://www.github.com/${citation.repository}`) ||\n        [];\n    const dedupedTrainingDataUrls =\n        [...new Set(trainingDataUrls.filter(url => !relatedUrls.includes(url) && !directCitationUrls.includes(url)))];\n    relatedUrls.push(...dedupedTrainingDataUrls);\n    return relatedUrls;\n  }\n\n  async #generateInsight(): Promise<void> {\n    try {\n      for await (const {sources, isPageReloadRecommended, explanation, metadata, completed} of this.#getInsight()) {\n        const {explanationWithCitations, directCitationUrls} = this.#insertCitations(explanation, metadata);\n        const relatedUrls = this.#deriveRelatedUrls(directCitationUrls, metadata);\n        const tokens = this.#validateMarkdown(explanationWithCitations);\n        const valid = tokens !== false;\n        if (valid) {\n          this.#modifyTokensToHandleCitationsInCode(tokens);\n        }\n        this.#transitionTo({\n          type: State.INSIGHT,\n          tokens: valid ? tokens : [],\n          validMarkdown: valid,\n          explanation,\n          sources,\n          metadata,\n          isPageReloadRecommended,\n          completed,\n          directCitationUrls,\n          relatedUrls,\n        });\n      }\n      Host.userMetrics.actionTaken(Host.UserMetrics.Action.InsightGenerated);\n    } catch (err) {\n      console.error('[ConsoleInsight] Error in #generateInsight:', err);\n      Host.userMetrics.actionTaken(Host.UserMetrics.Action.InsightErrored);\n      if (err.message === 'doAidaConversation timed out' && this.#state.type === State.INSIGHT) {\n        this.#state.timedOut = true;\n        this.#transitionTo({...this.#state, completed: true, timedOut: true});\n      } else {\n        this.#transitionTo({\n          type: State.ERROR,\n          error: err.message,\n        });\n      }\n    }\n  }\n\n  /**\n   * Validates the markdown by trying to render it.\n   */\n  #validateMarkdown(text: string): Marked.Marked.TokensList|false {\n    try {\n      const tokens = this.#marked.lexer(text);\n      for (const token of tokens) {\n        this.#renderer.renderToken(token);\n      }\n      return tokens;\n    } catch {\n      Host.userMetrics.actionTaken(Host.UserMetrics.Action.InsightErroredMarkdown);\n      return false;\n    }\n  }\n\n  async *\n      #getInsight(): AsyncGenerator<\n          {sources: Console.PromptBuilder.Source[], isPageReloadRecommended: boolean}&\n          Host.AidaClient.DoConversationResponse,\n          void, void> {\n    const {prompt, sources, isPageReloadRecommended} = await this.#promptBuilder.buildPrompt();\n    try {\n      for await (const response of this.#aidaClient.doConversation(\n          Host.AidaClient.AidaClient.buildConsoleInsightsRequest(prompt))) {\n        yield {sources, isPageReloadRecommended, ...response};\n      }\n    } catch (err) {\n      if (err.message === 'Server responded: permission denied') {\n        Host.userMetrics.actionTaken(Host.UserMetrics.Action.InsightErroredPermissionDenied);\n      } else if (err.message.startsWith('Cannot send request:')) {\n        Host.userMetrics.actionTaken(Host.UserMetrics.Action.InsightErroredCannotSend);\n      } else if (err.message.startsWith('Request failed:')) {\n        Host.userMetrics.actionTaken(Host.UserMetrics.Action.InsightErroredRequestFailed);\n      } else if (err.message.startsWith('Cannot parse chunk:')) {\n        Host.userMetrics.actionTaken(Host.UserMetrics.Action.InsightErroredCannotParseChunk);\n      } else if (err.message === 'Unknown chunk result') {\n        Host.userMetrics.actionTaken(Host.UserMetrics.Action.InsightErroredUnknownChunk);\n      } else if (err.message.startsWith('Server responded:')) {\n        Host.userMetrics.actionTaken(Host.UserMetrics.Action.InsightErroredApi);\n      } else {\n        Host.userMetrics.actionTaken(Host.UserMetrics.Action.InsightErroredOther);\n      }\n      throw err;\n    }\n  }\n\n  #onGoToSignIn(): void {\n    Host.InspectorFrontendHost.InspectorFrontendHostInstance.openInNewTab(SIGN_IN_URL);\n  }\n\n  #onToggleReferenceDetails(): void {\n    if (this.#referenceDetailsRef.value) {\n      this.#areReferenceDetailsOpen = this.#referenceDetailsRef.value.open;\n    }\n  }\n\n  #onDisclaimerSettingsLink(): void {\n    void UI.ViewManager.ViewManager.instance().showView('chrome-ai');\n  }\n\n  #onReminderSettingsLink(): void {\n    Host.userMetrics.actionTaken(Host.UserMetrics.Action.InsightsReminderTeaserSettingsLinkClicked);\n    void UI.ViewManager.ViewManager.instance().showView('chrome-ai');\n  }\n\n  #onEnableInsightsInSettingsLink(): void {\n    Host.userMetrics.actionTaken(Host.UserMetrics.Action.InsightsOptInTeaserSettingsLinkClicked);\n    void UI.ViewManager.ViewManager.instance().showView('chrome-ai');\n  }\n\n  #render(): void {\n    const input: ViewInput = {\n      state: this.#state,\n      closing: this.#closing,\n      disableAnimations: this.disableAnimations,\n      renderer: this.#renderer,\n      selectedRating: this.#selectedRating,\n      noLogging: Root.Runtime.hostConfig.aidaAvailability?.enterprisePolicyValue ===\n          Root.Runtime.GenAiEnterprisePolicyValue.ALLOW_WITHOUT_LOGGING,\n      callbacks: {\n        onClose: this.#onClose.bind(this),\n        onAnimationEnd: this.#onAnimationEnd.bind(this),\n        onSearch: this.#onSearch.bind(this),\n        onRating: this.#onRating.bind(this),\n        onReport: this.#onReport.bind(this),\n        onGoToSignIn: this.#onGoToSignIn.bind(this),\n        onConsentReminderConfirmed: this.#onConsentReminderConfirmed.bind(this),\n        onToggleReferenceDetails: this.#onToggleReferenceDetails.bind(this),\n        onDisclaimerSettingsLink: this.#onDisclaimerSettingsLink.bind(this),\n        onReminderSettingsLink: this.#onReminderSettingsLink.bind(this),\n        onEnableInsightsInSettingsLink: this.#onEnableInsightsInSettingsLink.bind(this),\n      },\n    };\n    const output: ViewOutput = {\n      referenceDetailsRef: this.#referenceDetailsRef,\n      headerRef: this.#headerRef,\n      citationLinks: [],\n    };\n\n    // Future Widget view function starts here.\n    const {state, noLogging, callbacks} = input;\n    const {onClose, onDisclaimerSettingsLink} = callbacks;\n\n    const jslog = `${VisualLogging.section(state.type).track({resize: true})}`;\n    let header: Lit.LitTemplate = Lit.nothing;\n    let main: Lit.LitTemplate = Lit.nothing;\n    const mainClasses: Record<string, true> = {};\n    let footer: Lit.LitTemplate|undefined;\n\n    switch (state.type) {\n      case State.LOADING:\n        header = renderHeader({headerText: i18nString(UIStrings.generating), onClose}, output.headerRef);\n        main = renderLoading();\n        break;\n      case State.INSIGHT:\n        header = renderHeader(\n            {headerText: i18nString(UIStrings.insight), onClose, showSpinner: !state.completed}, output.headerRef);\n        main = renderInsight(state, input.renderer, input.disableAnimations, callbacks, output);\n        footer = renderInsightFooter(noLogging, input.selectedRating, callbacks);\n        break;\n      case State.ERROR:\n        header = renderHeader({headerText: i18nString(UIStrings.error), onClose}, output.headerRef);\n        main = renderError(i18nString(UIStrings.errorBody));\n        footer = renderDisclaimerFooter(noLogging, onDisclaimerSettingsLink);\n        break;\n      case State.CONSENT_REMINDER:\n        header = renderHeader(\n            {headerText: 'Understand console messages with AI', onClose, showIcon: true}, output.headerRef);\n        mainClasses['reminder-container'] = true;\n        main = renderConsentReminder(noLogging);\n        footer = renderConsentReminderFooter(callbacks.onReminderSettingsLink, callbacks.onConsentReminderConfirmed);\n        break;\n      case State.SETTING_IS_NOT_TRUE:\n        mainClasses['opt-in-teaser'] = true;\n        main = renderSettingIsNotTrue(callbacks.onEnableInsightsInSettingsLink);\n        break;\n      case State.NOT_LOGGED_IN:\n      case State.SYNC_IS_PAUSED:\n        header = renderHeader({headerText: i18nString(UIStrings.signInToUse), onClose}, output.headerRef);\n        main = renderNotLoggedIn();\n        footer = renderSignInFooter(callbacks.onGoToSignIn);\n        break;\n      case State.OFFLINE:\n        header = renderHeader({headerText: i18nString(UIStrings.offlineHeader), onClose}, output.headerRef);\n        main = renderError(i18nString(UIStrings.offline));\n        footer = renderDisclaimerFooter(noLogging, onDisclaimerSettingsLink);\n        break;\n    }\n\n    // clang-format off\n    render(html`\n      <style>${styles}</style>\n      <style>${Input.checkboxStyles}</style>\n      <div\n        class=${Directives.classMap({wrapper: true, closing: input.closing})}\n        jslog=${VisualLogging.pane('console-insights').track({resize: true})}\n        @animationend=${callbacks.onAnimationEnd}\n      >\n        <div class=\"animation-wrapper\">\n          ${header}\n          <main jslog=${jslog} class=${Directives.classMap(mainClasses)}>\n            ${main}\n          </main>\n          ${footer?html`<footer jslog=${VisualLogging.section('footer')}>\n            ${footer}\n          </footer>`:Lit.nothing}\n        </div>\n      </div>\n    `, this.#shadow, {\n      host: this,\n    });\n    // clang-format on\n\n    this.#citationLinks = output.citationLinks;\n\n    if (this.#referenceDetailsRef.value) {\n      this.#referenceDetailsRef.value.open = this.#areReferenceDetailsOpen;\n    }\n  }\n}\n\ncustomElements.define('devtools-console-insight', ConsoleInsight);\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    'devtools-console-insight': ConsoleInsight;\n  }\n}\n", "// Copyright 2025 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n// IMPORTANT: this file is auto generated. Please do not edit this file.\n/* istanbul ignore file */\nexport default `/*\n * Copyright 2023 The Chromium Authors\n * Use of this source code is governed by a BSD-style license that can be\n * found in the LICENSE file.\n */\n\n* {\n  padding: 0;\n  margin: 0;\n  box-sizing: border-box;\n}\n\n:host {\n  font-family: var(--default-font-family);\n  font-size: inherit;\n  display: block;\n}\n\n.wrapper {\n  background-color: var(--sys-color-cdt-base-container);\n  border-radius: 16px;\n  container-type: inline-size;\n  display: grid;\n  animation: expand var(--sys-motion-duration-medium2) var(--sys-motion-easing-emphasized) forwards;\n}\n\n.wrapper.closing {\n  animation: collapse var(--sys-motion-duration-medium2) var(--sys-motion-easing-emphasized) forwards;\n}\n\n@keyframes expand {\n  from {\n    grid-template-rows: 0fr;\n  }\n\n  to {\n    grid-template-rows: 1fr;\n  }\n}\n\n@keyframes collapse {\n  from {\n    grid-template-rows: 1fr;\n  }\n\n  to {\n    grid-template-rows: 0fr;\n    padding-top: 0;\n    padding-bottom: 0;\n  }\n}\n\n.animation-wrapper {\n  overflow: hidden;\n  padding: var(--sys-size-6) var(--sys-size-8);\n}\n\n.wrapper.top {\n  border-radius: 16px 16px 4px 4px;\n}\n\n.wrapper.bottom {\n  margin-top: 5px;\n  border-radius: 4px 4px 16px 16px;\n}\n\nheader {\n  display: flex;\n  flex-direction: row;\n  gap: 6px;\n  color: var(--sys-color-on-surface);\n  font-size: 13px;\n  font-style: normal;\n  font-weight: 500;\n  margin-bottom: var(--sys-size-6);\n  align-items: center;\n}\n\nheader:focus-visible {\n  outline: none;\n}\n\nheader > .filler {\n  display: flex;\n  flex-direction: row;\n  gap: var(--sys-size-5);\n  align-items: center;\n  flex: 1;\n}\n\n.reminder-container {\n  border-radius: var(--sys-size-5);\n  background-color: var(--sys-color-surface4);\n  padding: var(--sys-size-8);\n  font-weight: var(--ref-typeface-weight-medium);\n\n  h3 {\n    font: inherit;\n  }\n}\n\n.reminder-items {\n  display: grid;\n  grid-template-columns: var(--sys-size-8) auto;\n  gap: var(--sys-size-5) var(--sys-size-6);\n  margin-top: var(--sys-size-6);\n  line-height: var(--sys-size-8);\n  font-weight: var(--ref-typeface-weight-regular);\n}\n\nmain {\n  --override-markdown-view-message-color: var(--sys-color-on-surface);\n\n  color: var(--sys-color-on-surface);\n  font-size: 12px;\n  font-style: normal;\n  font-weight: 400;\n  line-height: 20px;\n\n  p {\n    margin-block: 1em;\n  }\n\n  ul {\n    list-style-type: none;\n    list-style-position: inside;\n    padding-inline-start: 0.2em;\n\n    li {\n      display: list-item;\n      list-style-type: disc;\n      list-style-position: outside;\n      margin-inline-start: 1em;\n    }\n\n    li::marker {\n      font-size: 11px;\n      line-height: 1;\n    }\n  }\n\n  label {\n    display: inline-flex;\n    flex-direction: row;\n    gap: 0.5em;\n\n    input,\n    span {\n      vertical-align: middle;\n    }\n\n    input[type=\"checkbox\"] {\n      margin-top: 0.3em;\n    }\n  }\n}\n\n.opt-in-teaser {\n  display: flex;\n  gap: var(--sys-size-5);\n}\n\ndevtools-markdown-view {\n  margin-bottom: 12px;\n}\n\nfooter {\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  color: var(--sys-color-on-surface);\n  font-style: normal;\n  font-weight: 400;\n  line-height: normal;\n  margin-top: 14px;\n  gap: 32px;\n}\n\n@container (max-width: 600px) {\n  footer {\n    gap: 8px;\n  }\n}\n\nfooter > .filler {\n  flex: 1;\n}\n\nfooter .rating {\n  display: flex;\n  flex-direction: row;\n  gap: 8px;\n}\n\ntextarea {\n  height: 84px;\n  padding: 10px;\n  border-radius: 8px;\n  border: 1px solid var(--sys-color-neutral-outline);\n  width: 100%;\n  font-family: var(--default-font-family);\n  font-size: inherit;\n}\n\n.buttons {\n  display: flex;\n  gap: 5px;\n}\n\n@media (width <= 500px) {\n  .buttons {\n    flex-wrap: wrap;\n  }\n}\n\nmain .buttons {\n  margin-top: 12px;\n}\n\n.disclaimer {\n  display: flex;\n  gap: 2px;\n  color: var(--sys-color-on-surface-subtle);\n  font-size: 11px;\n  align-items: flex-start;\n  flex-direction: column;\n}\n\n.link {\n  color: var(--sys-color-primary);\n  text-decoration-line: underline;\n\n  devtools-icon {\n    color: var(--sys-color-primary);\n    width: 14px;\n    height: 14px;\n  }\n}\n\nbutton.link {\n  border: none;\n  background: none;\n  cursor: pointer;\n  font: inherit;\n}\n\n.loader {\n  background:\n    linear-gradient(\n      130deg,\n      transparent 0%,\n      var(--sys-color-gradient-tertiary) 20%,\n      var(--sys-color-gradient-primary) 40%,\n      transparent 60%,\n      var(--sys-color-gradient-tertiary) 80%,\n      var(--sys-color-gradient-primary) 100%\n    );\n  background-position: 0% 0%;\n  background-size: 250% 250%;\n  animation: gradient 5s infinite linear;\n}\n\n@keyframes gradient {\n  0% { background-position: 0 0; }\n  100% { background-position: 100% 100%; }\n}\n\nsummary {\n  font-size: 12px;\n  font-style: normal;\n  font-weight: 400;\n  line-height: 20px;\n}\n\ndetails {\n  overflow: hidden;\n  margin-top: 10px;\n}\n\n::details-content {\n  height: 0;\n  transition:\n    height var(--sys-motion-duration-short4) var(--sys-motion-easing-emphasized),\n    content-visibility var(--sys-motion-duration-short4) var(--sys-motion-easing-emphasized) allow-discrete;\n}\n\n[open]::details-content {\n  height: auto;\n}\n\ndetails.references {\n  /* This transition is only added because there is no \\\\'transitionend\\\\' event in\n     JS for the \\\\'::details-content\\\\' transition. */\n  transition: margin-bottom var(--sys-motion-duration-short4) var(--sys-motion-easing-emphasized);\n}\n\ndetails.references[open] {\n  /* This transition does not affect the actual UI because of collapsing margins. */\n  margin-bottom: var(--sys-size-1);\n}\n\nh2 {\n  display: block;\n  font-size: var(--sys-size-7);\n  margin: 0;\n  font-weight: var(--ref-typeface-weight-medium);\n  line-height: var(--sys-size-9);\n}\n\nh2:focus-visible {\n  outline: none;\n}\n\n.info {\n  width: 20px;\n  height: 20px;\n}\n\n.badge {\n  background: linear-gradient(135deg, var(--sys-color-gradient-primary), var(--sys-color-gradient-tertiary));\n  border-radius: var(--sys-size-3);\n  height: var(--sys-size-9);\n\n  devtools-icon {\n    margin: var(--sys-size-2);\n  }\n}\n\n.header-icon-container {\n  background: linear-gradient(135deg, var(--sys-color-gradient-primary), var(--sys-color-gradient-tertiary));\n  border-radius: var(--sys-size-4);\n  height: 36px;\n  width: 36px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.close-button {\n  align-self: flex-start;\n}\n\n.sources-list {\n  padding-left: var(--sys-size-6);\n  margin-bottom: var(--sys-size-6);\n  list-style: none;\n  counter-reset: sources;\n  display: grid;\n  grid-template-columns: var(--sys-size-9) auto;\n  list-style-position: inside;\n}\n\n.sources-list li {\n  display: contents;\n}\n\n.sources-list li::before {\n  counter-increment: sources;\n  content: \"[\" counter(sources) \"]\";\n  display: table-cell;\n}\n\n.sources-list x-link.highlighted {\n  animation: highlight-fadeout 2s;\n}\n\n@keyframes highlight-fadeout {\n  from {\n    background-color: var(--sys-color-yellow-container);\n  }\n\n  to {\n    background-color: transparent;\n  }\n}\n\n.references-list {\n  padding-left: var(--sys-size-8);\n}\n\n.references-list li {\n  padding-left: var(--sys-size-3);\n}\n\ndetails h3 {\n  font-size: 10px;\n  font-weight: var(--ref-typeface-weight-medium);\n  text-transform: uppercase;\n  color: var(--sys-color-on-surface-subtle);\n  padding-left: var(--sys-size-6);\n}\n\n.error-message {\n  font: var(--sys-typescale-body4-bold);\n}\n\n@scope (.insight-sources) {\n  :root {\n    padding: 0;\n    margin: 0;\n    box-sizing: border-box;\n    display: block;\n  }\n\n  ul {\n    color: var(--sys-color-primary);\n    font-size: 12px;\n    font-style: normal;\n    font-weight: 400;\n    line-height: 18px;\n    margin-top: 8px;\n    padding-left: var(--sys-size-6);\n  }\n\n  li {\n    list-style-type: none;\n  }\n\n  ul .link {\n    color: var(--sys-color-primary);\n    display: inline-flex !important; /* stylelint-disable-line declaration-no-important */\n    align-items: center;\n    gap: 4px;\n    text-decoration-line: underline;\n  }\n\n  devtools-icon {\n    height: 16px;\n    width: 16px;\n    margin-right: var(--sys-size-1);\n  }\n\n  devtools-icon[name=\"open-externally\"] {\n    color: var(--icon-link);\n  }\n\n  .source-disclaimer {\n    color: var(--sys-color-on-surface-subtle);\n  }\n}\n\n/*# sourceURL=${import.meta.resolve('././components/consoleInsight.css')} */`;", "// Copyright 2023 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as Host from '../../core/host/host.js';\nimport type * as UI from '../../ui/legacy/legacy.js';\nimport * as Console from '../console/console.js';\n\nimport {ConsoleInsight} from './components/ConsoleInsight.js';\n\nexport class ActionDelegate implements UI.ActionRegistration.ActionDelegate {\n  handleAction(context: UI.Context.Context, actionId: string): boolean {\n    switch (actionId) {\n      case 'explain.console-message.context':\n      case 'explain.console-message.context.error':\n      case 'explain.console-message.context.warning':\n      case 'explain.console-message.context.other':\n      case 'explain.console-message.teaser':\n      case 'explain.console-message.hover': {\n        const consoleViewMessage = context.flavor(Console.ConsoleViewMessage.ConsoleViewMessage);\n        if (consoleViewMessage) {\n          if (actionId.startsWith('explain.console-message.context')) {\n            Host.userMetrics.actionTaken(Host.UserMetrics.Action.InsightRequestedViaContextMenu);\n          } else if (actionId === 'explain.console-message.teaser') {\n            Host.userMetrics.actionTaken(Host.UserMetrics.Action.InsightRequestedViaTeaser);\n          } else if (actionId === 'explain.console-message.hover') {\n            Host.userMetrics.actionTaken(Host.UserMetrics.Action.InsightRequestedViaHoverButton);\n          }\n          const promptBuilder = new Console.PromptBuilder.PromptBuilder(consoleViewMessage);\n          const aidaClient = new Host.AidaClient.AidaClient();\n          void ConsoleInsight.create(promptBuilder, aidaClient).then(insight => {\n            consoleViewMessage.setInsight(insight);\n          });\n          return true;\n        }\n        return false;\n      }\n    }\n    return false;\n  }\n}\n"],
  "mappings": ";AAKA,OAAO;AAEP,YAAY,YAAY;AACxB,YAAY,UAAU;AACtB,YAAY,UAAU;AAEtB,YAAY,UAAU;AACtB,YAAY,YAAY;AACxB,YAAY,aAAa;AACzB,YAAY,WAAW;AACvB,YAAY,kBAAkB;AAC9B,YAAY,QAAQ;AACpB,YAAY,SAAS;AACrB,YAAY,mBAAmB;AAC/B,YAAY,aAAa;;;ACdzB,IAAO,6BAAQ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAybC,YAAY,QAAQ,mCAAmC,CAAC;;;ADtaxE,IAAM,YAAY;;;;EAIhB,gBAAgB;;;;EAIhB,YAAY;;;;EAIZ,gBAAgB;;;;EAIhB,aAAa;;;;EAIb,YAAY;;;;;EAKZ,SAAS;;;;EAIT,cAAc;;;;EAId,WAAW;;;;;EAKX,cAAc;;;;;EAKd,aAAa;;;;;EAKb,QAAQ;;;;EAIR,OAAO;;;;EAIP,WAAW;;;;;EAKX,eAAe;;;;;EAKf,WAAW;;;;EAIX,aAAa;;;;EAIb,QAAQ;;;;;EAKR,eAAe;;;;EAIf,SAAS;;;;EAIT,aAAa;;;;;EAKb,QAAQ;;;;;EAKR,sBACI;;;;;EAKJ,kBACI;;;;EAIJ,cAAc;;;;EAId,YAAY;;;;EAIZ,gBAAgB;;;;EAIhB,UAAU;;;;EAIV,6BAA6B;;AAE/B,IAAM,OAAY,UAAK,kBAAkB,+CAA+C,SAAS;AACjG,IAAM,aAAkB,UAAK,mBAAmB,KAAK,QAAW,IAAI;AACpE,IAAMA,gBAAmB,iBAAa,KAAK,QAAW,IAAI;AAE1D,IAAM,EAAC,QAAQ,MAAM,WAAU,IAAI;AAE7B,IAAO,aAAP,MAAO,oBAAmB,MAAK;EACnC,OAAgB,YAAY;EAE5B,cAAA;AACE,UAAM,YAAW,WAAW,EAAC,UAAU,MAAM,SAAS,KAAI,CAAC;EAC7D;;AAMF,SAAS,aAAa,YAA4C;AAChE,UAAQ,YAAY;IAClB,KAAa,sBAAc,WAAW;AACpC,aAAO,WAAW,UAAU,cAAc;IAC5C,KAAa,sBAAc,WAAW;AACpC,aAAO,WAAW,UAAU,UAAU;IACxC,KAAa,sBAAc,WAAW;AACpC,aAAO,WAAW,UAAU,cAAc;IAC5C,KAAa,sBAAc,WAAW;AACpC,aAAO,WAAW,UAAU,WAAW;EAC3C;AACF;AAEA,IAAM,uBAAuB;AAC7B,IAAM,qBAAqB;AAC3B,IAAM,2BAA2B;AACjC,IAAM,iBAAiB;AACvB,IAAM,aAAa;AAEnB,IAAM,cAAc;AAuEpB,IAAM,kBAAkB;EACtB,MAAM;EACN,OAAO;EACP,MAAM,KAAW;AACf,WAAO,IAAI,MAAM,MAAM,GAAG;EAC5B;EACA,UAAU,KAAW;AACnB,UAAM,QAAQ,IAAI,MAAM,cAAc;AACtC,QAAI,OAAO;AACT,aAAO;QACL,MAAM;QACN,KAAK,MAAM,CAAC;QACZ,UAAU,OAAO,MAAM,CAAC,CAAC;;IAE7B;AACA,WAAO;EACT;EACA,UAAU,MAAM;;AAGlB,SAAS,oBAAoB,UAA0C;AACrE,SAAO,QAAQ,SAAS,oBAAoB,MAAM,MAAM;AAC1D;AAEA,SAAS,mBAAmB,UAA4C;AAEtE,SAAO;aACI,QAAQ;;eAEN,UAA+B;oBAC1B,QAAQ;;MAEtB,WAAW,UAAU,MAAM,CAAC;;AAGlC;AAEA,SAAS,+BAA4B;AAEnC,SAAO,oBAAoB,cAAc,uBAAqC,mBAAK,YAAY,EAAE,MAAM,EAAC,OAAO,KAAI,CAAC,CAAC;MACjH,WAAW,UAAU,SAAS,CAAC;;AAGrC;AAEA,SAAS,mBAAmB,oBAA8B,QAAkB;AAC1E,MAAI,CAAC,mBAAmB,QAAQ;AAC9B,WAAW;EACb;AAGA,SAAO;;QAED,mBAAmB,IAAI,CAAC,KAAK,UAAU;;;mBAG5B,GAAG;;oBAEY,mBAAK,6BAA6B,EAAE,MAAM,EAAC,OAAO,KAAI,CAAC,CAAC;cAC5E,WAAW,IAAI,OAAI;AAAG,WAAO,cAAc,KAAK,IAAI;EAAkB,CAAC,CAAC;;cAExE,GAAG;;;OAGV,CAAC;;;AAIR;AAEA,SAAS,0BAA0B,aAAuB,oBAA4B;AACpF,MAAI,YAAY,WAAW,GAAG;AAC5B,WAAW;EACb;AAEA,SAAO;MACH,mBAAmB,SAAS,WAAW,WAAW,UAAU,cAAc,CAAC,UAAc,WAAO;;QAE9F,YAAY,IAAI,gBAAc;;;mBAGnB,UAAU;;oBAEK,mBAAK,6BAA6B,EAAE,MAAM,EAAC,OAAO,KAAI,CAAC,CAAC;;cAE5E,UAAU;;;OAGjB,CAAC;;;AAIR;AAEA,SAAS,gBAAa;AAEpB,SAAO;;;;;;;;;;AAWT;AAEA,SAAS,yBACL,SAAyC,yBAAgC;AAE3E,SAAO;;;UAGC,WAAW,OAAO,SAAS,UAAQ,KAAK,OAAO,UAAO;AACtD,WAAO,uCAAuC,aAAa,KAAK,IAAI,CAAC,IAAI,WAAW,UAAU,aAAa,CAAC,yCAAyC,mBAAmB,KAAK,KAAK,CAAC,WAAyB,mBAAK,YAAY,KAAK,IAAI,EAAE,MAAM,EAAC,OAAO,KAAI,CAAC,CAAC;;cAExP,aAAa,KAAK,IAAI,CAAC;;EAE7B,CAAC,CAAC;UACA,0BAA0B;;YAExB,WAAW,UAAU,oBAAoB,CAAC,UAAc,WAAO;;;AAI3E;AAEA,SAAS,cACL,SAAoD,UACpD,mBAAmD,WACnD,QAAkB;AAEhB,SAAO;UAEH,QAAQ,gBAAgB;oBACd,EAAC,QAAQ,QAAQ,QAAQ,UAAU,kBAAkB,CAAC,kBAAiB,CAA+C;uCACpG,QAAQ,WACtC;UACE,QAAQ,WAAW,gCAAgC,WAAW,UAAU,QAAQ,CAAC,SAAa,WAAO;UACrG,oBAAoB,QAAQ,QAAQ,IAAI;wCACV,WAAW,IAAI,OAAO,mBAAmB,CAAC,YAAY,UAAU,wBAAwB,UAAwB,qBAAO,YAAY,EAAE,MAAM,EAAC,OAAO,KAAI,CAAC,CAAC;uBAC1K,WAAW,UAAU,UAAU,CAAC;cACzC,mBAAmB,QAAQ,oBAAoB,MAAM,CAAC;cACtD,0BAA0B,QAAQ,aAAa,QAAQ,kBAAkB,CAAC;;YAExE,WAAO;yBACgB,qBAAO,SAAS,EAAE,MAAM,EAAC,OAAO,KAAI,CAAC,CAAC;qBACxD,WAAW,UAAU,SAAS,CAAC;YACxC,yBAAyB,QAAQ,SAAS,QAAQ,uBAAuB,CAAC;;;YAG1E,mBAAmB,UAAU,QAAQ,CAAC;;AAGlD;AAEA,SAAS,YAAY,SAAe;AAElC,SAAO,0BAA0B,OAAO;AAE1C;AAEA,SAAS,sBAAsB,WAAkB;AAE/C,SAAO;;;;;;;+JAOsJ,YACnJ,sHACA,oHAAoH;;;;;;;iBAO/G,oBAAoB;;kBAEL,mBAAK,mCAAmC,EAAE,MAAM,EAAC,OAAO,KAAI,CAAC,CAAC;;;iBAG7E,kBAAkB;;kBAEH,mBAAK,iCAAiC,EAAE,MAAM,EAAC,OAAO,KAAI,CAAC,CAAC;;;;;;;;;;iBAU3E,wBAAwB;;kBAET,mBAAK,0CAA0C,EAAE,MAAM,EAAC,OAAO,KAAI,CAAC,CAAC;;;;AAKrG;AAEA,SAAS,uBAAuB,gCAA0C;AAExE,QAAM,eAAe;;;cAGK,qBAAO,kBAAkB,EAAE,MAAM,EAAC,OAAO,KAAI,CAAC,CAAC;eAC5D,8BAA8B;OACtC,WAAW,UAAU,YAAY,CAAC;AAEvC,SAAO;;;;;;QAMDA,cAAa,UAAU,kBAAkB,EAAC,KAAK,aAAY,CAAC,CAAC,IAC/D,6BAA4B,CAAE;;AAGpC;AAEA,SAAS,oBAAiB;AACxB,SAAO,YACE,aAAQ,WAAW,iBAAiB,WAAW,UAAU,2BAA2B,IAChD,WAAW,UAAU,WAAW,CAAC;AAChF;AAEA,SAAS,iBAAiB,WAAoB,0BAAoC;AAEhF,SAAO;mFAC0E,YAC3E,sHACA,6EACJ,4CAA4C,wBAAwB;sBACpC,qBAAO,kBAAkB,EAAE,MAAM,EAAC,OAAO,KAAI,CAAC,CAAC;;gCAEnD,cAAc;6BACH,mBAAK,YAAY,EAAE,MAAM,EAAC,OAAO,KAAI,CAAC,CAAC;;;;AAKlF;AAEA,SAAS,uBAAuB,WAAoB,0BAAoC;AAEtF,SAAO;;QAED,iBAAiB,WAAW,wBAAwB,CAAC;;AAG7D;AAEA,SAAS,mBAAmB,cAAwB;AAClD,MAAS,aAAQ,WAAW,gBAAgB;AAC1C,WAAW;EACb;AAEA,SAAO;;;;iBAIQ,YAAY;mBACV,SAA8B;wBACzB,iBAAiB;;UAE/B,UAAU,MAAM;;;AAG1B;AAEA,SAAS,4BAA4B,wBAAoC,4BAAsC;AAE7G,SAAO;;;;iBAIQ,sBAAsB;qBAClB,OAA4B;yBACxB,UAAU;kBACjB,UAAU;;;;;;iBAMX,0BAA0B;mBACxB,SAA8B;wBACzB,UAAU;iBACjB,UAAU;;;;;AAK3B;AAEA,SAAS,oBAAoB,WAAmC,gBAA6C,WAAiC;AAE5I,SAAO;;MAEH,iBAAiB,WAAW,UAAU,wBAAwB,CAAC;;;;;;kBAMnD,UAAU;yBACH,UAAU;iBAClB,aAAkC;cACrC,OAAyB;uBAChB,KAAK;oBACR,gBAAiC;kBACnC,mBAAmB,MAAS;iBAC7B,mBAAmB,IAAI;eACzB,WAAW,UAAU,YAAY,CAAC;sBAC3B,WAAW;eAClB,MAAM,UAAU,SAAS,IAAI,CAAC;;;;kBAI3B,YAAY;yBACL,YAAY;iBACpB,aAAkC;cACrC,OAAyB;uBAChB,KAAK;oBACR,gBAAiC;kBACnC,mBAAmB,MAAS;iBAC7B,mBAAmB,KAAK;eAC1B,WAAW,UAAU,WAAW,CAAC;sBAC1B,aAAa;eACpB,MAAM,UAAU,SAAS,KAAK,CAAC;;;kBAG5B,QAAQ;iBACT,MAA2B;cAC9B,OAAyB;eACxB,WAAW,UAAU,MAAM,CAAC;sBACrB,QAAQ;eACf,UAAU,QAAQ;;;AAIjC;AAEA,SAAS,mBAAgB;AAEvB,SAAO;;;;;AAMT;AASA,SAAS,aACL,EAAC,YAAY,WAAW,OAAO,cAAc,OAAO,QAAO,GAC3D,WAAiD;AAEnD,SAAO;;QAED,WAAW,iBAAgB,IAAS,WAAO;;4BAEvB,WAAW,IAAI,SAAS,CAAC;YACzC,UAAU;;UAEZ,cAAc,8CAAkD,WAAO;;;;sBAI3D,OAAO;qBACR,MAA2B;kBAC9B,OAAyB;mBACxB,WAAW,UAAU,YAAY,CAAC;kBACrB,oBAAK,EAAG,MAAM,EAAC,OAAO,KAAI,CAAC,CAAC;mBACzC,OAAO;;;;;AAM1B;AAEM,IAAO,iBAAP,MAAO,wBAAuB,YAAW;EAC7C,aAAa,OAAO,eAAoC,YAA4B;AAClF,UAAM,oBAAoB,MAAW,gBAAW,WAAW,yBAAwB;AACnF,WAAO,IAAI,gBAAe,eAAe,YAAY,iBAAiB;EACxE;EAES,UAAU,KAAK,aAAa,EAAC,MAAM,OAAM,CAAC;EAEnD,oBAAoB;EAEpB;EACA;EACA;;EAGA;EACA,uBAAuB,WAAW,UAAS;EAC3C,aAAa,WAAW,UAAS;EACjC,iBAAgC,CAAA;EAChC,2BAA2B;EAC3B,iBAAiB;EACjB,WAAW;;EAGX;EAEA;EACA;EACA;EACA;EAEA,YACI,eAAoC,YACpC,mBAA0D;AAC5D,UAAK;AACL,SAAK,iBAAiB;AACtB,SAAK,cAAc;AACnB,SAAK,qBAAqB;AAC1B,SAAK,iCAAiC,KAAK,kCAAiC;AAC5E,SAAK,YAAY,IAAiB,0BAAa,wBAAwB,KAAK,sBAAsB,KAAK,IAAI,CAAC;AAC5G,SAAK,UAAU,IAAW,cAAO,OAAO,EAAC,YAAY,CAAC,eAAe,EAAC,CAAC;AAEvE,SAAK,SAAS,KAAK,8BAA6B;AAChD,SAAK,iCAAiC,KAAK,0BAA0B,KAAK,IAAI;AAC9E,SAAK,QAAO;AAGZ,SAAK,iBAAiB,WAAW,OAAI;AACnC,QAAE,gBAAe;IACnB,CAAC;AACD,SAAK,iBAAiB,SAAS,OAAI;AACjC,QAAE,gBAAe;IACnB,CAAC;AACD,SAAK,iBAAiB,YAAY,OAAI;AACpC,QAAE,gBAAe;IACnB,CAAC;AACD,SAAK,iBAAiB,SAAS,OAAI;AACjC,QAAE,gBAAe;IACnB,CAAC;AACD,SAAK,MAAK;EACZ;EAEA,sBAAsB,OAAa;AACjC,QAAI,KAAK,OAAO,SAAI,aAAsB,CAAC,KAAK,qBAAqB,OAAO;AAC1E;IACF;AACA,UAAM,4BAA4B,KAAK,qBAAqB,MAAM;AAClE,SAAK,2BAA2B;AAChC,SAAK,QAAO;AAEZ,UAAM,qBAAqB,KAAK,eAAe,QAAQ,CAAC;AACxD,QAAI,oBAAoB;AACtB,MAAG,WAAQ,oBAAoB,oBAAoB,aAAa;AAChE,UAAI,2BAA2B;AAC7B,2BAAmB,eAAe,EAAC,UAAU,OAAM,CAAC;AACpD,2BAAmB,MAAK;MAC1B,OAAO;AACL,aAAK,qBAAqB,MAAM,iBAAiB,iBAAiB,MAAK;AACrE,6BAAmB,eAAe,EAAC,UAAU,OAAM,CAAC;AACpD,6BAAmB,MAAK;QAC1B,GAAG,EAAC,MAAM,KAAI,CAAC;MACjB;IACF;EACF;EAEA,gCAA6B;AAC3B,YAAQ,KAAK,oBAAoB;MAC/B,KAAA,aAAwD;AAEtD,cAAM,eACK,gBAAS,SAAS,SAAQ,EAC5B;UAAc;UAAkC;UAAK;;QAAA,EACrD,IAAG;AACZ,eAAO;UACL,MAAI;UACJ,4BAA4B,KAAK,+BAA8B,EAAG,IAAG,KAAM;;MAE/E;MACA,KAAA;AACE,eAAO;UACL,MAAI;;MAER,KAAA;AACE,eAAO;UACL,MAAI;;MAER,KAAA;AACE,eAAO;UACL,MAAI;;IAEV;EACF;;;EAIA,oCAAiC;AAC/B,QAAI;AACF,aAAc,gBAAS,cAAc,0BAA0B;IACjE,QAAQ;AACN;IACF;EACF;;;EAIA,iCAA8B;AAC5B,WAAc,gBAAS,SAAS,SAAQ,EAAG,mBAAmB,wCAAwC,KAAK;EAC7G;EAEA,oBAAiB;AACf,SAAK,gCAAgC,kBAAkB,KAAK,kCAAkC,IAAI;AAClG,UAAM,eAAoB,aAAQ,WAAW,kBAAkB,iBAAiB;AAChF,QAAI,KAAK,OAAO,SAAI,aAAsB,KAAK,gCAAgC,iBAAgB,MAAO,QAClG,CAAC,gBAAgB,KAAK,OAAO,4BAA4B;AAC3D,MAAK,iBAAY,YAAiB,iBAAY,OAAO,kCAAkC;IACzF;AACA,IAAK,gBAAW,kBAAkB,SAAQ,EAAG,iBAAgB,2BACP,KAAK,8BAA8B;AAEzF,SAAK,KAAK,0BAAyB;AAGnC,QAAI,KAAK,OAAO,SAAI,aAAsB,KAAK,OAAO,SAAI,SAAkB;AAC1E,WAAK,SAAS,KAAK,8BAA6B;IAClD;AACA,SAAK,KAAK,yBAAwB;EACpC;EAEA,uBAAoB;AAClB,SAAK,gCAAgC,qBAAqB,KAAK,kCAAkC,IAAI;AACrG,IAAK,gBAAW,kBAAkB,SAAQ,EAAG,oBAAmB,2BACV,KAAK,8BAA8B;EAC3F;EAEA,MAAM,4BAAyB;AAC7B,UAAM,0BAA0B,MAAW,gBAAW,WAAW,yBAAwB;AACzF,QAAI,4BAA4B,KAAK,oBAAoB;AACvD,WAAK,qBAAqB;AAC1B,WAAK,SAAS,KAAK,8BAA6B;AAChD,WAAK,KAAK,yBAAwB;IACpC;EACF;EAEA,mCAAgC;AAC9B,QAAI,KAAK,gCAAgC,iBAAgB,MAAO,MAAM;AACpE,WAAK,+BAA8B,EAAG,IAAI,IAAI;IAChD;AACA,QAAI,KAAK,OAAO,SAAI,yBAChB,KAAK,gCAAgC,iBAAgB,MAAO,MAAM;AACpE,WAAK,cAAc;QACjB,MAAI;QACJ,4BAA4B;OAC7B;AACD,MAAK,iBAAY,YAAiB,iBAAY,OAAO,sCAAsC;AAC3F,WAAK,KAAK,yBAAwB;IACpC;AACA,QAAI,KAAK,OAAO,SAAI,sBAChB,KAAK,gCAAgC,iBAAgB,MAAO,OAAO;AACrE,WAAK,cAAc;QACjB,MAAI;QACJ,4BAA4B;OAC7B;AACD,MAAK,iBAAY,YAAiB,iBAAY,OAAO,uCAAuC;AAC5F,WAAK,KAAK,yBAAwB;IACpC;EACF;EAEA,cAAc,UAAmB;AAC/B,SAAK,iBAAiB,KAAK,OAAO,SAAS,SAAS;AACpD,SAAK,SAAS;AACd,SAAK,QAAO;EACd;EAEA,MAAM,2BAAwB;AAC5B,QAAI,KAAK,OAAO,SAAI,WAAoB;AACtC;IACF;AACA,UAAM,eAAoB,aAAQ,WAAW,kBAAkB,iBAAiB;AAChF,QAAI,KAAK,gCAAgC,iBAAgB,MAAO,QAAQ,cAAc;AACpF,WAAK,cAAc;QACjB,MAAI;OACL;AACD,MAAK,iBAAY,YAAiB,iBAAY,OAAO,wBAAwB;AAC7E;IACF;AACA,QAAI,CAAC,KAAK,OAAO,4BAA4B;AAC3C,YAAM,EAAC,SAAS,wBAAuB,IAAI,MAAM,KAAK,eAAe,YAAW;AAChF,WAAK,cAAc;QACjB,MAAI;QACJ;QACA;OACD;AACD,MAAK,iBAAY,YAAiB,iBAAY,OAAO,2BAA2B;AAChF;IACF;AACA,UAAM,KAAK,iBAAgB;EAC7B;EAEA,WAAQ;AACN,QAAI,KAAK,OAAO,SAAI,oBAA6B;AAC/C,MAAK,iBAAY,YAAiB,iBAAY,OAAO,8BAA8B;IACrF;AACA,SAAK,WAAW;AAChB,SAAK,QAAO;EACd;EAEA,kBAAe;AACb,QAAI,KAAK,UAAU;AACjB,WAAK,cAAc,IAAI,WAAU,CAAE;AACnC;IACF;AACA,QAAI,KAAK,gBAAgB;AACvB,WAAK,WAAW,OAAO,MAAK;IAC9B;EACF;EAEA,UAAU,YAAmB;AAC3B,QAAI,KAAK,OAAO,SAAI,WAAoB;AACtC,YAAM,IAAI,MAAM,kBAAkB;IACpC;AACA,QAAI,KAAK,OAAO,UAAU,gBAAgB,QAAW;AACnD,YAAM,IAAI,MAAM,wBAAwB;IAC1C;AAEA,QAAI,KAAK,oBAAoB,QAAW;AACtC;IACF;AAEA,SAAK,kBAAkB;AACvB,SAAK,QAAO;AACZ,QAAI,KAAK,iBAAiB;AACxB,MAAK,iBAAY,YAAiB,iBAAY,OAAO,oBAAoB;IAC3E,OAAO;AACL,MAAK,iBAAY,YAAiB,iBAAY,OAAO,oBAAoB;IAC3E;AACA,UAAM,kBAAuB,aAAQ,WAAW,kBAAkB,mBAAmB;AACrF,SAAK,KAAK,YAAY,oBAAoB;MACxC,kCAAkC,KAAK,OAAO,SAAS;MACvD,8BAA8B;MAC9B,8BAA8B;QAC5B,eAAe;UACb,WAAW,KAAK,kBAAiB,aAAkC;;;KAGxE;EACH;EAEA,YAAS;AACP,IAAK,2BAAsB,8BAA8B,aAAa,UAAU;EAClF;EAEA,YAAS;AACP,UAAM,QAAQ,KAAK,eAAe,eAAc;AAChD,IAAK,2BAAsB,8BAA8B,0BAA0B,KAAK;EAC1F;EAEA,MAAM,8BAA2B;AAC/B,SAAK,+BAA8B,EAAG,IAAI,IAAI;AAC9C,SAAK,cAAc;MACjB,MAAI;MACJ,4BAA4B;KAC7B;AACD,IAAK,iBAAY,YAAiB,iBAAY,OAAO,+BAA+B;AACpF,UAAM,KAAK,iBAAgB;EAC7B;EAEA,iBAAiB,aAAqB,UAA0C;AAE9E,UAAM,qBAA+B,CAAA;AACrC,QAAI,CAAC,oBAAoB,QAAQ,KAAK,CAAC,SAAS,qBAAqB;AACnE,aAAO,EAAC,0BAA0B,aAAa,mBAAkB;IACnE;AAEA,UAAM,EAAC,oBAAmB,IAAI;AAC9B,UAAM,kBACF,oBAAoB,UACf,OAAO,cAAY,SAAS,eAAoB,gBAAW,mBAAmB,WAAW,EACzF,KAAK,CAAC,GAAG,OAAO,EAAE,YAAY,MAAM,EAAE,YAAY,EAAE;AAC7D,QAAI,2BAA2B;AAC/B,eAAW,CAAC,OAAO,QAAQ,KAAK,gBAAgB,QAAO,GAAI;AAGzD,YAAM,UAAU;AAChB,cAAQ,YAAY,SAAS,YAAY;AACzC,YAAM,SAAS,QAAQ,KAAK,wBAAwB;AACpD,UAAI,UAAU,SAAS,KAAK;AAC1B,mCAA2B,yBAAyB,MAAM,GAAG,OAAO,KAAK,IACrE,KAAK,gBAAgB,SAAS,KAAK,MAAM,yBAAyB,MAAM,OAAO,KAAK;AACxF,2BAAmB,KAAK,SAAS,GAAG;MACtC;IACF;AAEA,uBAAmB,QAAO;AAC1B,WAAO,EAAC,0BAA0B,mBAAkB;EACtD;EAEA,qCAAqC,QAAgC;AACnE,eAAW,SAAS,QAAQ;AAC1B,UAAI,MAAM,SAAS,QAAQ;AAEzB,cAAM,UAAyB,MAAM,KAAK,MAAM,YAAY;AAC5D,cAAM,OAAO,MAAM,KAAK,QAAQ,cAAc,EAAE;AAEhD,YAAI,SAAS,QAAQ;AACnB,gBAAM,YAAY,QAAQ,IAAI,WAAQ;AACpC,kBAAM,QAAQ,SAAS,MAAM,MAAM,GAAG,EAAE,GAAG,EAAE;AAC7C,mBAAO;cACL;cACA,cAAc,KAAK,sBAAsB,KAAK,MAAM,KAAK;;UAE7D,CAAC;AACA,gBAA0D,YAAY;QACzE;MACF;IACF;EACF;EAEA,mBAAmB,oBAA8B,UAA0C;AACzF,QAAI,CAAC,SAAS,oBAAoB,MAAM,QAAQ;AAC9C,aAAO,CAAA;IACT;AAEA,UAAM,cACF,SAAS,mBAAmB,MAAM,OAAO,UAAQ,KAAK,aAAa,CAAC,mBAAmB,SAAS,KAAK,SAAS,CAAC,EAC1G,IAAI,UAAQ,KAAK,SAAmB,KACzC,CAAA;AACJ,UAAM,mBACF,SAAS,qBAAqB,UACzB,OACG,cAAY,SAAS,eAAoB,gBAAW,mBAAmB,kBAClE,SAAS,OAAO,SAAS,WAAW,EAC5C,IAAI,cAAY,SAAS,OAAO,0BAA0B,SAAS,UAAU,EAAE,KACpF,CAAA;AACJ,UAAM,0BACF,CAAC,GAAG,IAAI,IAAI,iBAAiB,OAAO,SAAO,CAAC,YAAY,SAAS,GAAG,KAAK,CAAC,mBAAmB,SAAS,GAAG,CAAC,CAAC,CAAC;AAChH,gBAAY,KAAK,GAAG,uBAAuB;AAC3C,WAAO;EACT;EAEA,MAAM,mBAAgB;AACpB,QAAI;AACF,uBAAiB,EAAC,SAAS,yBAAyB,aAAa,UAAU,UAAS,KAAK,KAAK,YAAW,GAAI;AAC3G,cAAM,EAAC,0BAA0B,mBAAkB,IAAI,KAAK,iBAAiB,aAAa,QAAQ;AAClG,cAAM,cAAc,KAAK,mBAAmB,oBAAoB,QAAQ;AACxE,cAAM,SAAS,KAAK,kBAAkB,wBAAwB;AAC9D,cAAM,QAAQ,WAAW;AACzB,YAAI,OAAO;AACT,eAAK,qCAAqC,MAAM;QAClD;AACA,aAAK,cAAc;UACjB,MAAI;UACJ,QAAQ,QAAQ,SAAS,CAAA;UACzB,eAAe;UACf;UACA;UACA;UACA;UACA;UACA;UACA;SACD;MACH;AACA,MAAK,iBAAY,YAAiB,iBAAY,OAAO,gBAAgB;IACvE,SAAS,KAAK;AACZ,cAAQ,MAAM,+CAA+C,GAAG;AAChE,MAAK,iBAAY,YAAiB,iBAAY,OAAO,cAAc;AACnE,UAAI,IAAI,YAAY,kCAAkC,KAAK,OAAO,SAAI,WAAoB;AACxF,aAAK,OAAO,WAAW;AACvB,aAAK,cAAc,EAAC,GAAG,KAAK,QAAQ,WAAW,MAAM,UAAU,KAAI,CAAC;MACtE,OAAO;AACL,aAAK,cAAc;UACjB,MAAI;UACJ,OAAO,IAAI;SACZ;MACH;IACF;EACF;;;;EAKA,kBAAkB,MAAY;AAC5B,QAAI;AACF,YAAM,SAAS,KAAK,QAAQ,MAAM,IAAI;AACtC,iBAAW,SAAS,QAAQ;AAC1B,aAAK,UAAU,YAAY,KAAK;MAClC;AACA,aAAO;IACT,QAAQ;AACN,MAAK,iBAAY,YAAiB,iBAAY,OAAO,sBAAsB;AAC3E,aAAO;IACT;EACF;EAEA,OACI,cAAW;AAIb,UAAM,EAAC,QAAQ,SAAS,wBAAuB,IAAI,MAAM,KAAK,eAAe,YAAW;AACxF,QAAI;AACF,uBAAiB,YAAY,KAAK,YAAY,eACrC,gBAAW,WAAW,4BAA4B,MAAM,CAAC,GAAG;AACnE,cAAM,EAAC,SAAS,yBAAyB,GAAG,SAAQ;MACtD;IACF,SAAS,KAAK;AACZ,UAAI,IAAI,YAAY,uCAAuC;AACzD,QAAK,iBAAY,YAAiB,iBAAY,OAAO,8BAA8B;MACrF,WAAW,IAAI,QAAQ,WAAW,sBAAsB,GAAG;AACzD,QAAK,iBAAY,YAAiB,iBAAY,OAAO,wBAAwB;MAC/E,WAAW,IAAI,QAAQ,WAAW,iBAAiB,GAAG;AACpD,QAAK,iBAAY,YAAiB,iBAAY,OAAO,2BAA2B;MAClF,WAAW,IAAI,QAAQ,WAAW,qBAAqB,GAAG;AACxD,QAAK,iBAAY,YAAiB,iBAAY,OAAO,8BAA8B;MACrF,WAAW,IAAI,YAAY,wBAAwB;AACjD,QAAK,iBAAY,YAAiB,iBAAY,OAAO,0BAA0B;MACjF,WAAW,IAAI,QAAQ,WAAW,mBAAmB,GAAG;AACtD,QAAK,iBAAY,YAAiB,iBAAY,OAAO,iBAAiB;MACxE,OAAO;AACL,QAAK,iBAAY,YAAiB,iBAAY,OAAO,mBAAmB;MAC1E;AACA,YAAM;IACR;EACF;EAEA,gBAAa;AACX,IAAK,2BAAsB,8BAA8B,aAAa,WAAW;EACnF;EAEA,4BAAyB;AACvB,QAAI,KAAK,qBAAqB,OAAO;AACnC,WAAK,2BAA2B,KAAK,qBAAqB,MAAM;IAClE;EACF;EAEA,4BAAyB;AACvB,SAAQ,eAAY,YAAY,SAAQ,EAAG,SAAS,WAAW;EACjE;EAEA,0BAAuB;AACrB,IAAK,iBAAY,YAAiB,iBAAY,OAAO,yCAAyC;AAC9F,SAAQ,eAAY,YAAY,SAAQ,EAAG,SAAS,WAAW;EACjE;EAEA,kCAA+B;AAC7B,IAAK,iBAAY,YAAiB,iBAAY,OAAO,sCAAsC;AAC3F,SAAQ,eAAY,YAAY,SAAQ,EAAG,SAAS,WAAW;EACjE;EAEA,UAAO;AACL,UAAM,QAAmB;MACvB,OAAO,KAAK;MACZ,SAAS,KAAK;MACd,mBAAmB,KAAK;MACxB,UAAU,KAAK;MACf,gBAAgB,KAAK;MACrB,WAAgB,aAAQ,WAAW,kBAAkB,0BAC5C,aAAQ,2BAA2B;MAC5C,WAAW;QACT,SAAS,KAAK,SAAS,KAAK,IAAI;QAChC,gBAAgB,KAAK,gBAAgB,KAAK,IAAI;QAC9C,UAAU,KAAK,UAAU,KAAK,IAAI;QAClC,UAAU,KAAK,UAAU,KAAK,IAAI;QAClC,UAAU,KAAK,UAAU,KAAK,IAAI;QAClC,cAAc,KAAK,cAAc,KAAK,IAAI;QAC1C,4BAA4B,KAAK,4BAA4B,KAAK,IAAI;QACtE,0BAA0B,KAAK,0BAA0B,KAAK,IAAI;QAClE,0BAA0B,KAAK,0BAA0B,KAAK,IAAI;QAClE,wBAAwB,KAAK,wBAAwB,KAAK,IAAI;QAC9D,gCAAgC,KAAK,gCAAgC,KAAK,IAAI;;;AAGlF,UAAM,SAAqB;MACzB,qBAAqB,KAAK;MAC1B,WAAW,KAAK;MAChB,eAAe,CAAA;;AAIjB,UAAM,EAAC,OAAO,WAAW,UAAS,IAAI;AACtC,UAAM,EAAC,SAAS,yBAAwB,IAAI;AAE5C,UAAM,QAAQ,GAAiB,sBAAQ,MAAM,IAAI,EAAE,MAAM,EAAC,QAAQ,KAAI,CAAC,CAAC;AACxE,QAAI,SAA8B;AAClC,QAAI,OAA4B;AAChC,UAAM,cAAoC,CAAA;AAC1C,QAAI;AAEJ,YAAQ,MAAM,MAAM;MAClB,KAAA;AACE,iBAAS,aAAa,EAAC,YAAY,WAAW,UAAU,UAAU,GAAG,QAAO,GAAG,OAAO,SAAS;AAC/F,eAAO,cAAa;AACpB;MACF,KAAA;AACE,iBAAS,aACL,EAAC,YAAY,WAAW,UAAU,OAAO,GAAG,SAAS,aAAa,CAAC,MAAM,UAAS,GAAG,OAAO,SAAS;AACzG,eAAO,cAAc,OAAO,MAAM,UAAU,MAAM,mBAAmB,WAAW,MAAM;AACtF,iBAAS,oBAAoB,WAAW,MAAM,gBAAgB,SAAS;AACvE;MACF,KAAA;AACE,iBAAS,aAAa,EAAC,YAAY,WAAW,UAAU,KAAK,GAAG,QAAO,GAAG,OAAO,SAAS;AAC1F,eAAO,YAAY,WAAW,UAAU,SAAS,CAAC;AAClD,iBAAS,uBAAuB,WAAW,wBAAwB;AACnE;MACF,KAAA;AACE,iBAAS,aACL,EAAC,YAAY,uCAAuC,SAAS,UAAU,KAAI,GAAG,OAAO,SAAS;AAClG,oBAAY,oBAAoB,IAAI;AACpC,eAAO,sBAAsB,SAAS;AACtC,iBAAS,4BAA4B,UAAU,wBAAwB,UAAU,0BAA0B;AAC3G;MACF,KAAA;AACE,oBAAY,eAAe,IAAI;AAC/B,eAAO,uBAAuB,UAAU,8BAA8B;AACtE;MACF,KAAA;MACA,KAAA;AACE,iBAAS,aAAa,EAAC,YAAY,WAAW,UAAU,WAAW,GAAG,QAAO,GAAG,OAAO,SAAS;AAChG,eAAO,kBAAiB;AACxB,iBAAS,mBAAmB,UAAU,YAAY;AAClD;MACF,KAAA;AACE,iBAAS,aAAa,EAAC,YAAY,WAAW,UAAU,aAAa,GAAG,QAAO,GAAG,OAAO,SAAS;AAClG,eAAO,YAAY,WAAW,UAAU,OAAO,CAAC;AAChD,iBAAS,uBAAuB,WAAW,wBAAwB;AACnE;IACJ;AAGA,WAAO;eACI,0BAAM;eACA,oBAAc;;gBAEnB,WAAW,SAAS,EAAC,SAAS,MAAM,SAAS,MAAM,QAAO,CAAC,CAAC;gBAC9C,mBAAK,kBAAkB,EAAE,MAAM,EAAC,QAAQ,KAAI,CAAC,CAAC;wBACpD,UAAU,cAAc;;;YAGpC,MAAM;wBACM,KAAK,UAAU,WAAW,SAAS,WAAW,CAAC;cACzD,IAAI;;YAEN,SAAO,qBAAmC,sBAAQ,QAAQ,CAAC;cACzD,MAAM;uBACK,WAAO;;;OAGzB,KAAK,SAAS;MACf,MAAM;KACP;AAGD,SAAK,iBAAiB,OAAO;AAE7B,QAAI,KAAK,qBAAqB,OAAO;AACnC,WAAK,qBAAqB,MAAM,OAAO,KAAK;IAC9C;EACF;;AAGF,eAAe,OAAO,4BAA4B,cAAc;;;AE9sChE,YAAYC,WAAU;AAEtB,YAAYC,cAAa;AAInB,IAAO,iBAAP,MAAqB;EACzB,aAAa,SAA6B,UAAgB;AACxD,YAAQ,UAAU;MAChB,KAAK;MACL,KAAK;MACL,KAAK;MACL,KAAK;MACL,KAAK;MACL,KAAK,iCAAiC;AACpC,cAAM,qBAAqB,QAAQ,OAAe,4BAAmB,kBAAkB;AACvF,YAAI,oBAAoB;AACtB,cAAI,SAAS,WAAW,iCAAiC,GAAG;AAC1D,YAAK,kBAAY,YAAiB,kBAAY,OAAO,8BAA8B;UACrF,WAAW,aAAa,kCAAkC;AACxD,YAAK,kBAAY,YAAiB,kBAAY,OAAO,yBAAyB;UAChF,WAAW,aAAa,iCAAiC;AACvD,YAAK,kBAAY,YAAiB,kBAAY,OAAO,8BAA8B;UACrF;AACA,gBAAM,gBAAgB,IAAY,uBAAc,cAAc,kBAAkB;AAChF,gBAAM,aAAa,IAAS,iBAAW,WAAU;AACjD,eAAK,eAAe,OAAO,eAAe,UAAU,EAAE,KAAK,aAAU;AACnE,+BAAmB,WAAW,OAAO;UACvC,CAAC;AACD,iBAAO;QACT;AACA,eAAO;MACT;IACF;AACA,WAAO;EACT;;",
  "names": ["i18nTemplate", "Host", "Console"]
}
