{"version":3,"file":"AffectedSharedArrayBufferIssueDetailsView.js","sourceRoot":"","sources":["../../../../../../front_end/panels/issues/AffectedSharedArrayBufferIssueDetailsView.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright 2020 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n/* eslint-disable @devtools/no-imperative-dom-api */\n\nimport * as i18n from '../../core/i18n/i18n.js';\nimport type * as Platform from '../../core/platform/platform.js';\nimport * as Protocol from '../../generated/protocol.js';\nimport * as IssuesManager from '../../models/issues_manager/issues_manager.js';\n\nimport {AffectedResourcesView} from './AffectedResourcesView.js';\n\nconst UIStrings = {\n  /**\n   * @description Label for number of affected resources indication in issue view\n   */\n  nViolations: '{n, plural, =1 {# violation} other {# violations}}',\n  /**\n   * @description Value for the status column in SharedArrayBuffer issues\n   */\n  warning: 'warning',\n  /**\n   * @description The kind of resolution for a mixed content issue\n   */\n  blocked: 'blocked',\n  /**\n   * @description Value for the 'Trigger' column in the SAB affected resources list\n   */\n  instantiation: 'Instantiation',\n  /**\n   * @description Tooltip for the 'Trigger' column in the SAB affected resources list\n   */\n  aSharedarraybufferWas: 'A `SharedArrayBuffer` was instantiated in a context that is not cross-origin isolated',\n  /**\n   * @description Value for the 'Trigger' column in the SAB affected resources list\n   */\n  transfer: 'Transfer',\n  /**\n   * @description Tooltip for the 'Trigger' column in the SAB affected resources list\n   */\n  sharedarraybufferWasTransferedTo: '`SharedArrayBuffer` was transfered to a context that is not cross-origin isolated',\n  /**\n   * @description Header for the source location column\n   */\n  sourceLocation: 'Source Location',\n  /**\n   * @description Title for the 'Trigger' column in the SAB affected resources list\n   */\n  trigger: 'Trigger',\n  /**\n   * @description Title for the status column in the SAB affected resources list\n   */\n  status: 'Status',\n} as const;\nconst str_ = i18n.i18n.registerUIStrings('panels/issues/AffectedSharedArrayBufferIssueDetailsView.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\nexport class AffectedSharedArrayBufferIssueDetailsView extends AffectedResourcesView {\n  protected getResourceNameWithCount(count: number): Platform.UIString.LocalizedString {\n    return i18nString(UIStrings.nViolations, {n: count});\n  }\n\n  #appendStatus(element: HTMLElement, isWarning: boolean): void {\n    const status = document.createElement('td');\n    if (isWarning) {\n      status.classList.add('affected-resource-report-only-status');\n      status.textContent = i18nString(UIStrings.warning);\n    } else {\n      status.classList.add('affected-resource-blocked-status');\n      status.textContent = i18nString(UIStrings.blocked);\n    }\n    element.appendChild(status);\n  }\n\n  #appendType(element: HTMLElement, type: Protocol.Audits.SharedArrayBufferIssueType): void {\n    const status = document.createElement('td');\n    switch (type) {\n      case Protocol.Audits.SharedArrayBufferIssueType.CreationIssue:\n        status.textContent = i18nString(UIStrings.instantiation);\n        status.title = i18nString(UIStrings.aSharedarraybufferWas);\n        break;\n      case Protocol.Audits.SharedArrayBufferIssueType.TransferIssue:\n        status.textContent = i18nString(UIStrings.transfer);\n        status.title = i18nString(UIStrings.sharedarraybufferWasTransferedTo);\n        break;\n    }\n    element.appendChild(status);\n  }\n\n  #appendDetails(sabIssues: Iterable<IssuesManager.SharedArrayBufferIssue.SharedArrayBufferIssue>): void {\n    const header = document.createElement('tr');\n    this.appendColumnTitle(header, i18nString(UIStrings.sourceLocation));\n    this.appendColumnTitle(header, i18nString(UIStrings.trigger));\n    this.appendColumnTitle(header, i18nString(UIStrings.status));\n\n    this.affectedResources.appendChild(header);\n    let count = 0;\n    for (const sabIssue of sabIssues) {\n      count++;\n      this.#appendDetail(sabIssue);\n    }\n    this.updateAffectedResourceCount(count);\n  }\n\n  #appendDetail(sabIssue: IssuesManager.SharedArrayBufferIssue.SharedArrayBufferIssue): void {\n    const element = document.createElement('tr');\n    element.classList.add('affected-resource-directive');\n\n    const sabIssueDetails = sabIssue.details();\n    const location = IssuesManager.Issue.toZeroBasedLocation(sabIssueDetails.sourceCodeLocation);\n    this.appendSourceLocation(element, location, sabIssue.model()?.getTargetIfNotDisposed());\n    this.#appendType(element, sabIssueDetails.type);\n    this.#appendStatus(element, sabIssueDetails.isWarning);\n\n    this.affectedResources.appendChild(element);\n  }\n\n  update(): void {\n    this.clear();\n    this.#appendDetails(this.issue.getSharedArrayBufferIssues());\n  }\n}\n"]}