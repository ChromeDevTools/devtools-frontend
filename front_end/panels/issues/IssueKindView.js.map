{"version":3,"file":"IssueKindView.js","sourceRoot":"","sources":["../../../../../../front_end/panels/issues/IssueKindView.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright 2021 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n/* eslint-disable @devtools/no-imperative-dom-api */\n\nimport * as Common from '../../core/common/common.js';\nimport * as i18n from '../../core/i18n/i18n.js';\nimport * as IssuesManager from '../../models/issues_manager/issues_manager.js';\nimport * as Adorners from '../../ui/components/adorners/adorners.js';\nimport * as IssueCounter from '../../ui/components/issue_counter/issue_counter.js';\nimport {Icon} from '../../ui/kit/kit.js';\nimport * as UI from '../../ui/legacy/legacy.js';\n\nimport * as Components from './components/components.js';\n\nconst UIStrings = {\n  /**\n   * @description Menu entry for hiding all current Page Errors.\n   */\n  hideAllCurrentPageErrors: 'Hide all current Page Errors',\n  /**\n   * @description Menu entry for hiding all current Breaking Changes.\n   */\n  hideAllCurrentBreakingChanges: 'Hide all current Breaking Changes',\n  /**\n   * @description Menu entry for hiding all current Page Errors.\n   */\n  hideAllCurrentImprovements: 'Hide all current Improvements',\n} as const;\nconst str_ = i18n.i18n.registerUIStrings('panels/issues/IssueKindView.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\n\nexport function getGroupIssuesByKindSetting(): Common.Settings.Setting<boolean> {\n  return Common.Settings.Settings.instance().createSetting('group-issues-by-kind', false);\n}\n\nexport function issueKindViewSortPriority(a: IssueKindView, b: IssueKindView): number {\n  if (a.getKind() === b.getKind()) {\n    return 0;\n  }\n  if (a.getKind() === IssuesManager.Issue.IssueKind.PAGE_ERROR) {\n    return -1;\n  }\n  if (a.getKind() === IssuesManager.Issue.IssueKind.BREAKING_CHANGE &&\n      b.getKind() === IssuesManager.Issue.IssueKind.IMPROVEMENT) {\n    return -1;\n  }\n  return 1;\n}\n\nexport function getClassNameFromKind(kind: IssuesManager.Issue.IssueKind): string {\n  switch (kind) {\n    case IssuesManager.Issue.IssueKind.BREAKING_CHANGE:\n      return 'breaking-changes';\n    case IssuesManager.Issue.IssueKind.IMPROVEMENT:\n      return 'improvements';\n    case IssuesManager.Issue.IssueKind.PAGE_ERROR:\n      return 'page-errors';\n  }\n}\n\nexport class IssueKindView extends UI.TreeOutline.TreeElement {\n  #kind: IssuesManager.Issue.IssueKind;\n  #issueCount: HTMLElement;\n\n  constructor(kind: IssuesManager.Issue.IssueKind) {\n    super(undefined, true);\n    this.#kind = kind;\n    this.#issueCount = document.createElement('span');\n\n    this.toggleOnClick = true;\n    this.listItemElement.classList.add('issue-kind');\n    this.listItemElement.classList.add(getClassNameFromKind(kind));\n    this.childrenListElement.classList.add('issue-kind-body');\n  }\n\n  getKind(): IssuesManager.Issue.IssueKind {\n    return this.#kind;\n  }\n\n  getHideAllCurrentKindString(): Common.UIString.LocalizedString {\n    switch (this.#kind) {\n      case IssuesManager.Issue.IssueKind.PAGE_ERROR:\n        return i18nString(UIStrings.hideAllCurrentPageErrors);\n      case IssuesManager.Issue.IssueKind.IMPROVEMENT:\n        return i18nString(UIStrings.hideAllCurrentImprovements);\n      case IssuesManager.Issue.IssueKind.BREAKING_CHANGE:\n        return i18nString(UIStrings.hideAllCurrentBreakingChanges);\n    }\n  }\n\n  #appendHeader(): void {\n    const header = document.createElement('div');\n    header.classList.add('header');\n\n    const issueKindIcon = new Icon();\n    issueKindIcon.name = IssueCounter.IssueCounter.getIssueKindIconName(this.#kind);\n    issueKindIcon.classList.add('leading-issue-icon', 'extra-large');\n\n    const countAdorner = new Adorners.Adorner.Adorner();\n    countAdorner.name = 'countWrapper';\n    countAdorner.append(this.#issueCount);\n    countAdorner.classList.add('aggregated-issues-count');\n    this.#issueCount.textContent = '0';\n\n    const title = document.createElement('div');\n    title.classList.add('title');\n    title.textContent = IssuesManager.Issue.getIssueKindName(this.#kind);\n\n    const hideAvailableIssuesBtn = new Components.HideIssuesMenu.HideIssuesMenu();\n    hideAvailableIssuesBtn.classList.add('hide-available-issues');\n    hideAvailableIssuesBtn.data = {\n      menuItemLabel: this.getHideAllCurrentKindString(),\n      menuItemAction: () => {\n        const setting = IssuesManager.IssuesManager.getHideIssueByCodeSetting();\n        const values = setting.get();\n        for (const issue of IssuesManager.IssuesManager.IssuesManager.instance().issues()) {\n          if (issue.getKind() === this.#kind) {\n            values[issue.code()] = IssuesManager.IssuesManager.IssueStatus.HIDDEN;\n          }\n        }\n        setting.set(values);\n      },\n    };\n\n    header.appendChild(issueKindIcon);\n    header.appendChild(countAdorner);\n    header.appendChild(title);\n    header.appendChild(hideAvailableIssuesBtn);\n\n    this.listItemElement.appendChild(header);\n  }\n\n  override onattach(): void {\n    this.#appendHeader();\n    this.expand();\n  }\n\n  update(count: number): void {\n    this.#issueCount.textContent = `${count}`;\n  }\n}\n"]}