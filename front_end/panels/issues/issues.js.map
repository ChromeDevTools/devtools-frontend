{
  "version": 3,
  "sources": ["../../../../../../front_end/panels/issues/IssueRevealer.ts", "../../../../../../front_end/panels/issues/IssuesPane.ts", "../../../../../../front_end/panels/issues/HiddenIssuesRow.ts", "../../../../../../front_end/panels/issues/IssueKindView.ts", "issuesPane.css.js", "issuesTree.css.js", "../../../../../../front_end/panels/issues/IssueView.ts", "../../../../../../front_end/panels/issues/AffectedBlockedByResponseView.ts", "../../../../../../front_end/panels/issues/AffectedResourcesView.ts", "../../../../../../front_end/panels/issues/AffectedCookiesView.ts", "../../../../../../front_end/panels/issues/AffectedDescendantsWithinSelectElementView.ts", "../../../../../../front_end/panels/issues/AffectedElementsView.ts", "../../../../../../front_end/panels/issues/AffectedDirectivesView.ts", "../../../../../../front_end/panels/issues/AffectedDocumentsInQuirksModeView.ts", "../../../../../../front_end/panels/issues/AffectedElementsWithLowContrastView.ts", "../../../../../../front_end/panels/issues/AffectedHeavyAdView.ts", "../../../../../../front_end/panels/issues/AffectedMetadataAllowedSitesView.ts", "../../../../../../front_end/panels/issues/AffectedPartitioningBlobURLView.ts", "../../../../../../front_end/panels/issues/AffectedPermissionElementsView.ts", "../../../../../../front_end/panels/issues/AffectedSharedArrayBufferIssueDetailsView.ts", "../../../../../../front_end/panels/issues/AffectedSourcesView.ts", "../../../../../../front_end/panels/issues/AffectedTrackingSitesView.ts", "../../../../../../front_end/panels/issues/AttributionReportingIssueDetailsView.ts", "../../../../../../front_end/panels/issues/CorsIssueDetailsView.ts", "../../../../../../front_end/panels/issues/GenericIssueDetailsView.ts"],
  "sourcesContent": ["// Copyright 2020 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport type * as Common from '../../core/common/common.js';\nimport type * as IssuesManager from '../../models/issues_manager/issues_manager.js';\nimport * as UI from '../../ui/legacy/legacy.js';\n\nimport {IssuesPane} from './IssuesPane.js';\n\nexport class IssueRevealer implements Common.Revealer.Revealer<IssuesManager.Issue.Issue> {\n  async reveal(issue: IssuesManager.Issue.Issue): Promise<void> {\n    await UI.ViewManager.ViewManager.instance().showView('issues-pane');\n    const view = UI.ViewManager.ViewManager.instance().view('issues-pane');\n    if (view) {\n      const issuesPane = await view.widget();\n      if (issuesPane instanceof IssuesPane) {\n        await issuesPane.reveal(issue);\n      } else {\n        throw new Error('Expected issues pane to be an instance of IssuesPane');\n      }\n    }\n  }\n}\n", "// Copyright 2021 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n/* eslint-disable @devtools/no-imperative-dom-api */\n\nimport '../../ui/legacy/legacy.js';\n\nimport * as Common from '../../core/common/common.js';\nimport * as i18n from '../../core/i18n/i18n.js';\nimport type * as Platform from '../../core/platform/platform.js';\nimport * as IssuesManager from '../../models/issues_manager/issues_manager.js';\nimport * as IssueCounter from '../../ui/components/issue_counter/issue_counter.js';\nimport * as UI from '../../ui/legacy/legacy.js';\nimport * as VisualLogging from '../../ui/visual_logging/visual_logging.js';\n\nimport {HiddenIssuesRow} from './HiddenIssuesRow.js';\nimport {getGroupIssuesByKindSetting, IssueKindView, issueKindViewSortPriority} from './IssueKindView.js';\nimport issuesPaneStyles from './issuesPane.css.js';\nimport issuesTreeStyles from './issuesTree.css.js';\nimport {IssueView} from './IssueView.js';\n\nconst UIStrings = {\n  /**\n   * @description Category title for a group of cross origin embedder policy (COEP) issues\n   */\n  crossOriginEmbedderPolicy: 'Cross Origin Embedder Policy',\n  /**\n   * @description Category title for a group of mixed content issues\n   */\n  mixedContent: 'Mixed Content',\n  /**\n   * @description Category title for a group of SameSite cookie issues\n   */\n  samesiteCookie: 'SameSite Cookie',\n  /**\n   * @description Category title for a group of heavy ads issues\n   */\n  heavyAds: 'Heavy Ads',\n  /**\n   * @description Category title for a group of content security policy (CSP) issues\n   */\n  contentSecurityPolicy: 'Content Security Policy',\n  /**\n   * @description Text for other types of items\n   */\n  other: 'Other',\n  /**\n   * @description Category title for the different 'low text contrast' issues. Low text contrast refers\n   *              to the difference between the color of a text and the background color where that text\n   *              appears.\n   */\n  lowTextContrast: 'Low Text Contrast',\n  /**\n   * @description Category title for the different 'Cross-Origin Resource Sharing' (CORS) issues. CORS\n   *              refers to one origin (e.g 'a.com') loading resources from another origin (e.g. 'b.com').\n   */\n  cors: 'Cross Origin Resource Sharing',\n  /**\n   * @description Title for a checkbox which toggles grouping by category in the issues tab\n   */\n  groupDisplayedIssuesUnder: 'Group displayed issues under associated categories',\n  /**\n   * @description Label for a checkbox which toggles grouping by category in the issues tab\n   */\n  groupByCategory: 'Group by category',\n  /**\n   * @description Title for a checkbox which toggles grouping by kind in the issues tab\n   */\n  groupDisplayedIssuesUnderKind: 'Group displayed issues as Page errors, Breaking changes and Improvements',\n  /**\n   * @description Label for a checkbox which toggles grouping by kind in the issues tab\n   */\n  groupByKind: 'Group by kind',\n  /**\n   * @description Title for a checkbox. Whether the issues tab should include third-party issues or not.\n   */\n  includeCookieIssuesCausedBy: 'Include cookie Issues caused by third-party sites',\n  /**\n   * @description Label for a checkbox. Whether the issues tab should include third-party issues or not.\n   */\n  includeThirdpartyCookieIssues: 'Include third-party cookie issues',\n  /**\n   * @description Label on the issues tab\n   */\n  onlyThirdpartyCookieIssues: 'Only third-party cookie issues detected',\n  /**\n   * @description Label in the issues panel\n   */\n  noIssues: 'No issues detected',\n  /**\n   * @description Text that explains the issues panel that is shown if no issues are shown.\n   */\n  issuesPanelDescription: 'On this page you can find warnings from the browser.',\n  /**\n   * @description Category title for the different 'Attribution Reporting API' issues. The\n   * Attribution Reporting API is a newly proposed web API (see https://github.com/WICG/conversion-measurement-api).\n   */\n  attributionReporting: 'Attribution Reporting `API`',\n  /**\n   * @description Category title for the different 'Quirks Mode' issues. Quirks Mode refers\n   *              to the legacy browser modes that displays web content according to outdated\n   *              browser behaviors.\n   */\n  quirksMode: 'Quirks Mode',\n  /**\n   * @description Category title for the different 'Generic' issues.\n   */\n  generic: 'Generic',\n  /**\n   * @description Category title for a group of permission element issues\n   */\n  permissionElement: 'PEPC Element',\n} as const;\nconst str_ = i18n.i18n.registerUIStrings('panels/issues/IssuesPane.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\n\nconst ISSUES_PANEL_EXPLANATION_URL =\n    'https://developer.chrome.com/docs/devtools/issues' as Platform.DevToolsPath.UrlString;\n\nclass IssueCategoryView extends UI.TreeOutline.TreeElement {\n  #category: IssuesManager.Issue.IssueCategory;\n\n  constructor(category: IssuesManager.Issue.IssueCategory) {\n    super();\n    this.#category = category;\n\n    this.toggleOnClick = true;\n    this.listItemElement.classList.add('issue-category');\n    this.childrenListElement.classList.add('issue-category-body');\n  }\n\n  getCategoryName(): string {\n    switch (this.#category) {\n      case IssuesManager.Issue.IssueCategory.CROSS_ORIGIN_EMBEDDER_POLICY:\n        return i18nString(UIStrings.crossOriginEmbedderPolicy);\n      case IssuesManager.Issue.IssueCategory.MIXED_CONTENT:\n        return i18nString(UIStrings.mixedContent);\n      case IssuesManager.Issue.IssueCategory.COOKIE:\n        return i18nString(UIStrings.samesiteCookie);\n      case IssuesManager.Issue.IssueCategory.HEAVY_AD:\n        return i18nString(UIStrings.heavyAds);\n      case IssuesManager.Issue.IssueCategory.CONTENT_SECURITY_POLICY:\n        return i18nString(UIStrings.contentSecurityPolicy);\n      case IssuesManager.Issue.IssueCategory.LOW_TEXT_CONTRAST:\n        return i18nString(UIStrings.lowTextContrast);\n      case IssuesManager.Issue.IssueCategory.CORS:\n        return i18nString(UIStrings.cors);\n      case IssuesManager.Issue.IssueCategory.ATTRIBUTION_REPORTING:\n        return i18nString(UIStrings.attributionReporting);\n      case IssuesManager.Issue.IssueCategory.QUIRKS_MODE:\n        return i18nString(UIStrings.quirksMode);\n      case IssuesManager.Issue.IssueCategory.GENERIC:\n        return i18nString(UIStrings.generic);\n      case IssuesManager.Issue.IssueCategory.PERMISSION_ELEMENT:\n        return i18nString(UIStrings.permissionElement);\n      case IssuesManager.Issue.IssueCategory.OTHER:\n        return i18nString(UIStrings.other);\n    }\n  }\n\n  override onattach(): void {\n    this.#appendHeader();\n  }\n\n  #appendHeader(): void {\n    const header = document.createElement('div');\n    header.classList.add('header');\n\n    const title = document.createElement('div');\n    title.classList.add('title');\n    title.textContent = this.getCategoryName();\n    header.appendChild(title);\n\n    this.listItemElement.appendChild(header);\n  }\n}\n\nexport function getGroupIssuesByCategorySetting(): Common.Settings.Setting<boolean> {\n  return Common.Settings.Settings.instance().createSetting('group-issues-by-category', false);\n}\n\nexport class IssuesPane extends UI.Widget.VBox {\n  #categoryViews: Map<IssuesManager.Issue.IssueCategory, IssueCategoryView>;\n  #issueViews: Map<IssuesManager.IssueAggregator.AggregationKey, IssueView>;\n  #kindViews: Map<IssuesManager.Issue.IssueKind, IssueKindView>;\n  #showThirdPartyCheckbox: UI.Toolbar.ToolbarSettingCheckbox|null;\n  #issuesTree: UI.TreeOutline.TreeOutlineInShadow;\n  #hiddenIssuesRow: HiddenIssuesRow;\n  #noIssuesMessageDiv: UI.EmptyWidget.EmptyWidget;\n  #issuesManager: IssuesManager.IssuesManager.IssuesManager;\n  #aggregator: IssuesManager.IssueAggregator.IssueAggregator;\n  #issueViewUpdatePromise: Promise<void> = Promise.resolve();\n\n  constructor() {\n    super({\n      jslog: `${VisualLogging.panel('issues')}`,\n      useShadowDom: true,\n    });\n    this.registerRequiredCSS(issuesPaneStyles);\n\n    this.contentElement.classList.add('issues-pane');\n\n    this.#categoryViews = new Map();\n    this.#kindViews = new Map();\n    this.#issueViews = new Map();\n    this.#showThirdPartyCheckbox = null;\n\n    this.#createToolbars();\n\n    this.#issuesTree = new UI.TreeOutline.TreeOutlineInShadow();\n\n    this.#issuesTree.setShowSelectionOnKeyboardFocus(true);\n    this.#issuesTree.contentElement.classList.add('issues');\n    this.#issuesTree.registerRequiredCSS(issuesTreeStyles);\n    this.contentElement.appendChild(this.#issuesTree.element);\n\n    this.#hiddenIssuesRow = new HiddenIssuesRow();\n    this.#issuesTree.appendChild(this.#hiddenIssuesRow);\n\n    this.#noIssuesMessageDiv = new UI.EmptyWidget.EmptyWidget('', i18nString(UIStrings.issuesPanelDescription));\n    this.#noIssuesMessageDiv.link = ISSUES_PANEL_EXPLANATION_URL;\n    this.#noIssuesMessageDiv.show(this.contentElement);\n\n    this.#issuesManager = IssuesManager.IssuesManager.IssuesManager.instance();\n    this.#aggregator = new IssuesManager.IssueAggregator.IssueAggregator(this.#issuesManager);\n    this.#aggregator.addEventListener(\n        IssuesManager.IssueAggregator.Events.AGGREGATED_ISSUE_UPDATED, this.#issueUpdated, this);\n    this.#aggregator.addEventListener(\n        IssuesManager.IssueAggregator.Events.FULL_UPDATE_REQUIRED, this.#onFullUpdate, this);\n    this.#hiddenIssuesRow.hidden = this.#issuesManager.numberOfHiddenIssues() === 0;\n    this.#onFullUpdate();\n    this.#issuesManager.addEventListener(\n        IssuesManager.IssuesManager.Events.ISSUES_COUNT_UPDATED, this.#updateCounts, this);\n  }\n\n  override elementsToRestoreScrollPositionsFor(): Element[] {\n    return [this.#issuesTree.element];\n  }\n\n  #createToolbars(): {toolbarContainer: Element} {\n    const toolbarContainer = this.contentElement.createChild('div', 'issues-toolbar-container');\n    toolbarContainer.setAttribute('jslog', `${VisualLogging.toolbar()}`);\n    toolbarContainer.role = 'toolbar';\n    const leftToolbar = toolbarContainer.createChild('devtools-toolbar', 'issues-toolbar-left');\n    leftToolbar.role = 'presentation';\n    const rightToolbar = toolbarContainer.createChild('devtools-toolbar', 'issues-toolbar-right');\n    rightToolbar.role = 'presentation';\n\n    const groupByCategorySetting = getGroupIssuesByCategorySetting();\n    const groupByCategoryCheckbox = new UI.Toolbar.ToolbarSettingCheckbox(\n        groupByCategorySetting, i18nString(UIStrings.groupDisplayedIssuesUnder), i18nString(UIStrings.groupByCategory));\n    // Hide the option to toggle category grouping for now.\n    groupByCategoryCheckbox.setVisible(false);\n    rightToolbar.appendToolbarItem(groupByCategoryCheckbox);\n    groupByCategorySetting.addChangeListener(() => {\n      this.#fullUpdate(true);\n    });\n\n    const groupByKindSetting = getGroupIssuesByKindSetting();\n    const groupByKindSettingCheckbox = new UI.Toolbar.ToolbarSettingCheckbox(\n        groupByKindSetting, i18nString(UIStrings.groupDisplayedIssuesUnderKind), i18nString(UIStrings.groupByKind));\n    rightToolbar.appendToolbarItem(groupByKindSettingCheckbox);\n    groupByKindSetting.addChangeListener(() => {\n      this.#fullUpdate(true);\n    });\n    groupByKindSettingCheckbox.setVisible(true);\n\n    const thirdPartySetting = IssuesManager.Issue.getShowThirdPartyIssuesSetting();\n    this.#showThirdPartyCheckbox = new UI.Toolbar.ToolbarSettingCheckbox(\n        thirdPartySetting, i18nString(UIStrings.includeCookieIssuesCausedBy),\n        i18nString(UIStrings.includeThirdpartyCookieIssues));\n    rightToolbar.appendToolbarItem(this.#showThirdPartyCheckbox);\n    this.setDefaultFocusedElement(this.#showThirdPartyCheckbox.element);\n\n    rightToolbar.appendSeparator();\n    const issueCounter = new IssueCounter.IssueCounter.IssueCounter();\n    issueCounter.data = {\n      clickHandler: () => {\n        this.focus();\n      },\n      tooltipCallback: () => {\n        const issueEnumeration = IssueCounter.IssueCounter.getIssueCountsEnumeration(\n            IssuesManager.IssuesManager.IssuesManager.instance(), false);\n        issueCounter.title = issueEnumeration;\n      },\n      displayMode: IssueCounter.IssueCounter.DisplayMode.SHOW_ALWAYS,\n      issuesManager: IssuesManager.IssuesManager.IssuesManager.instance(),\n    };\n    issueCounter.id = 'console-issues-counter';\n    issueCounter.setAttribute('jslog', `${VisualLogging.counter('issues')}`);\n    const issuesToolbarItem = new UI.Toolbar.ToolbarItem(issueCounter);\n    rightToolbar.appendToolbarItem(issuesToolbarItem);\n\n    return {toolbarContainer};\n  }\n\n  #issueUpdated(event: Common.EventTarget.EventTargetEvent<IssuesManager.IssueAggregator.AggregatedIssue>): void {\n    this.#scheduleIssueViewUpdate(event.data);\n  }\n\n  #scheduleIssueViewUpdate(issue: IssuesManager.IssueAggregator.AggregatedIssue): void {\n    this.#issueViewUpdatePromise = this.#issueViewUpdatePromise.then(() => this.#updateIssueView(issue));\n  }\n\n  /** Don't call directly. Use `scheduleIssueViewUpdate` instead. */\n  async #updateIssueView(issue: IssuesManager.IssueAggregator.AggregatedIssue): Promise<void> {\n    let issueView = this.#issueViews.get(issue.aggregationKey());\n    if (!issueView) {\n      const description = issue.getDescription();\n      if (!description) {\n        console.warn('Could not find description for issue code:', issue.code());\n        return;\n      }\n      const markdownDescription =\n          await IssuesManager.MarkdownIssueDescription.createIssueDescriptionFromMarkdown(description);\n      issueView = new IssueView(issue, markdownDescription);\n      this.#issueViews.set(issue.aggregationKey(), issueView);\n      const parent = this.#getIssueViewParent(issue);\n      this.appendIssueViewToParent(issueView, parent);\n    } else {\n      issueView.setIssue(issue);\n      const newParent = this.#getIssueViewParent(issue);\n      if (issueView.parent !== newParent &&\n          !(newParent instanceof UI.TreeOutline.TreeOutline && issueView.parent === newParent.rootElement())) {\n        issueView.parent?.removeChild(issueView);\n        this.appendIssueViewToParent(issueView, newParent);\n      }\n    }\n    issueView.update();\n    this.#updateCounts();\n  }\n\n  appendIssueViewToParent(issueView: IssueView, parent: UI.TreeOutline.TreeOutline|UI.TreeOutline.TreeElement): void {\n    parent.appendChild(issueView, (a, b) => {\n      if (a instanceof HiddenIssuesRow) {\n        return 1;\n      }\n      if (b instanceof HiddenIssuesRow) {\n        return -1;\n      }\n      if (a instanceof IssueView && b instanceof IssueView) {\n        return a.getIssueTitle().localeCompare(b.getIssueTitle());\n      }\n      console.error('The issues tree should only contain IssueView objects as direct children');\n      return 0;\n    });\n    if (parent instanceof UI.TreeOutline.TreeElement) {\n      // This is an aggregated view, so we need to update the label for position and size of the treeItem.\n      this.#updateItemPositionAndSize(parent);\n    }\n  }\n\n  #updateItemPositionAndSize(parent: UI.TreeOutline.TreeElement): void {\n    const childNodes = parent.childrenListNode.children;\n    let treeItemCount = 0;\n\n    for (let i = 0; i < childNodes.length; i++) {\n      const node = childNodes[i];\n      if (node.classList.contains('issue')) {\n        UI.ARIAUtils.setPositionInSet(node, ++treeItemCount);\n        UI.ARIAUtils.setSetSize(node, childNodes.length / 2);  // Each issue has 2 nodes (issue + description).\n      }\n    }\n  }\n\n  #getIssueViewParent(issue: IssuesManager.IssueAggregator.AggregatedIssue): UI.TreeOutline.TreeOutline\n      |UI.TreeOutline.TreeElement {\n    if (issue.isHidden()) {\n      return this.#hiddenIssuesRow;\n    }\n    if (getGroupIssuesByKindSetting().get()) {\n      const kind = issue.getKind();\n      const view = this.#kindViews.get(kind);\n      if (view) {\n        return view;\n      }\n\n      const newView = new IssueKindView(kind);\n      this.#issuesTree.appendChild(newView, (a, b) => {\n        if (a instanceof IssueKindView && b instanceof IssueKindView) {\n          return issueKindViewSortPriority(a, b);\n        }\n        return 0;\n      });\n      this.#kindViews.set(kind, newView);\n      return newView;\n    }\n    if (getGroupIssuesByCategorySetting().get()) {\n      const category = issue.getCategory();\n      const view = this.#categoryViews.get(category);\n      if (view) {\n        return view;\n      }\n\n      const newView = new IssueCategoryView(category);\n      this.#issuesTree.appendChild(newView, (a, b) => {\n        if (a instanceof IssueCategoryView && b instanceof IssueCategoryView) {\n          return a.getCategoryName().localeCompare(b.getCategoryName());\n        }\n        return 0;\n      });\n      this.#categoryViews.set(category, newView);\n      return newView;\n    }\n    return this.#issuesTree;\n  }\n\n  #clearViews<T>(views: Map<T, UI.TreeOutline.TreeElement>, preservedSet?: Set<T>): void {\n    for (const [key, view] of Array.from(views.entries())) {\n      if (preservedSet?.has(key)) {\n        continue;\n      }\n      view.parent?.removeChild(view);\n      views.delete(key);\n    }\n  }\n\n  #onFullUpdate(): void {\n    this.#fullUpdate(false);\n  }\n\n  #fullUpdate(force: boolean): void {\n    this.#clearViews(this.#categoryViews, force ? undefined : this.#aggregator.aggregatedIssueCategories());\n    this.#clearViews(this.#kindViews, force ? undefined : this.#aggregator.aggregatedIssueKinds());\n    this.#clearViews(this.#issueViews, force ? undefined : this.#aggregator.aggregatedIssueCodes());\n    if (this.#aggregator) {\n      for (const issue of this.#aggregator.aggregatedIssues()) {\n        this.#scheduleIssueViewUpdate(issue);\n      }\n    }\n    this.#updateCounts();\n  }\n\n  #updateIssueKindViewsCount(): void {\n    for (const view of this.#kindViews.values()) {\n      const count = this.#issuesManager.numberOfIssues(view.getKind());\n      view.update(count);\n    }\n  }\n\n  #updateCounts(): void {\n    this.#showIssuesTreeOrNoIssuesDetectedMessage(\n        this.#issuesManager.numberOfIssues(), this.#issuesManager.numberOfHiddenIssues());\n    if (getGroupIssuesByKindSetting().get()) {\n      this.#updateIssueKindViewsCount();\n    }\n  }\n\n  #showIssuesTreeOrNoIssuesDetectedMessage(issuesCount: number, hiddenIssueCount: number): void {\n    if (issuesCount > 0 || hiddenIssueCount > 0) {\n      this.#hiddenIssuesRow.hidden = hiddenIssueCount === 0;\n      this.#hiddenIssuesRow.update(hiddenIssueCount);\n      this.#issuesTree.element.hidden = false;\n      this.#noIssuesMessageDiv.hideWidget();\n      const firstChild = this.#issuesTree.firstChild();\n      if (firstChild) {\n        firstChild.select(/* omitFocus= */ true);\n        this.setDefaultFocusedElement(firstChild.listItemElement);\n      }\n    } else {\n      this.#issuesTree.element.hidden = true;\n      if (this.#showThirdPartyCheckbox) {\n        this.setDefaultFocusedElement(this.#showThirdPartyCheckbox.element);\n      }\n      // We alreay know that issesCount is zero here.\n      const hasOnlyThirdPartyIssues =\n          this.#issuesManager.numberOfAllStoredIssues() - this.#issuesManager.numberOfThirdPartyCookiePhaseoutIssues() >\n          0;\n      this.#noIssuesMessageDiv.header =\n          hasOnlyThirdPartyIssues ? i18nString(UIStrings.onlyThirdpartyCookieIssues) : i18nString(UIStrings.noIssues);\n      this.#noIssuesMessageDiv.showWidget();\n    }\n  }\n\n  async reveal(issue: IssuesManager.Issue.Issue): Promise<void> {\n    await this.#issueViewUpdatePromise;\n    const key = this.#aggregator.keyForIssue(issue);\n    const issueView = this.#issueViews.get(key);\n    if (issueView) {\n      if (issueView.isForHiddenIssue()) {\n        this.#hiddenIssuesRow.expand();\n        this.#hiddenIssuesRow.reveal();\n      }\n      if (getGroupIssuesByKindSetting().get() && !issueView.isForHiddenIssue()) {\n        const kindView = this.#kindViews.get(issueView.getIssueKind());\n        kindView?.expand();\n        kindView?.reveal();\n      }\n      issueView.expand();\n      issueView.reveal();\n      issueView.select(false, true);\n    }\n  }\n}\n", "// Copyright 2021 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport '../../ui/components/adorners/adorners.js';\n\nimport * as i18n from '../../core/i18n/i18n.js';\nimport * as IssuesManager from '../../models/issues_manager/issues_manager.js';\nimport * as Buttons from '../../ui/components/buttons/buttons.js';\nimport * as UI from '../../ui/legacy/legacy.js';\nimport {html, render} from '../../ui/lit/lit.js';\nimport * as VisualLogging from '../../ui/visual_logging/visual_logging.js';\n\nconst UIStrings = {\n  /**\n   * @description Title for the hidden issues row\n   */\n  hiddenIssues: 'Hidden issues',\n  /**\n   * @description Label for the button to unhide all hidden issues\n   */\n  unhideAll: 'Unhide all',\n} as const;\n\nconst str_ = i18n.i18n.registerUIStrings('panels/issues/HiddenIssuesRow.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\n\ninterface ViewInput {\n  count: number;\n  onUnhideAllIssues: () => void;\n}\n\ntype ViewOutput = unknown;\n\ntype View = (input: ViewInput, output: ViewOutput, target: HTMLElement) => void;\n\nconst DEFAULT_VIEW: View = (input: ViewInput, _output: ViewOutput, target: HTMLElement): void => {\n  const stopPropagationForEnter = (event: KeyboardEvent): void => {\n    if (event.key === 'Enter') {\n      // Make sure we don't propagate 'Enter' key events to parents,\n      // so that these get turned into 'click' events properly. If we\n      // don't stop the propagation here, the 'Enter' key down event\n      // will be consumed by the tree element and it'll be expanded\n      // or collapsed instead of the \"Unhide all\" action being taken.\n      event.stopImmediatePropagation();\n    }\n  };\n\n  // clang-format off\n  render(html`\n  <div class=\"header\">\n    <devtools-adorner class=\"aggregated-issues-count\"\n                      .data=${{name: 'countWrapper'}}>\n      <span>${input.count}</span>\n    </devtools-adorner>\n    <div class=\"title\">${i18nString(UIStrings.hiddenIssues)}</div>\n    <devtools-button class=\"unhide-all-issues-button\"\n                     jslog=${VisualLogging.action().track({click: true}).context('issues.unhide-all-hiddes')}\n                     @click=${input.onUnhideAllIssues}\n                     @keydown=${stopPropagationForEnter}\n                     .variant=${Buttons.Button.Variant.OUTLINED}>${i18nString(UIStrings.unhideAll)}</devtools-button>\n  </div>`, target);\n  // clang-format on\n};\n\nexport class HiddenIssuesRow extends UI.TreeOutline.TreeElement {\n  #view: View;\n\n  constructor(view: View = DEFAULT_VIEW) {\n    super(undefined, true);\n    this.#view = view;\n    this.toggleOnClick = true;\n    this.listItemElement.classList.add('issue-category', 'hidden-issues');\n    this.childrenListElement.classList.add('hidden-issues-body');\n    this.update(0);\n  }\n\n  update(count: number): void {\n    const issuesManager = IssuesManager.IssuesManager.IssuesManager.instance();\n    const onUnhideAllIssues = issuesManager.unhideAllIssues.bind(issuesManager);\n    const input = {\n      count,\n      onUnhideAllIssues,\n    };\n    const output = undefined;\n    this.#view(input, output, this.listItemElement);\n  }\n}\n", "// Copyright 2021 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n/* eslint-disable @devtools/no-imperative-dom-api */\n\nimport * as Common from '../../core/common/common.js';\nimport * as i18n from '../../core/i18n/i18n.js';\nimport * as IssuesManager from '../../models/issues_manager/issues_manager.js';\nimport * as Adorners from '../../ui/components/adorners/adorners.js';\nimport * as IssueCounter from '../../ui/components/issue_counter/issue_counter.js';\nimport {Icon} from '../../ui/kit/kit.js';\nimport * as UI from '../../ui/legacy/legacy.js';\n\nimport * as Components from './components/components.js';\n\nconst UIStrings = {\n  /**\n   * @description Menu entry for hiding all current Page Errors.\n   */\n  hideAllCurrentPageErrors: 'Hide all current Page Errors',\n  /**\n   * @description Menu entry for hiding all current Breaking Changes.\n   */\n  hideAllCurrentBreakingChanges: 'Hide all current Breaking Changes',\n  /**\n   * @description Menu entry for hiding all current Page Errors.\n   */\n  hideAllCurrentImprovements: 'Hide all current Improvements',\n} as const;\nconst str_ = i18n.i18n.registerUIStrings('panels/issues/IssueKindView.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\n\nexport function getGroupIssuesByKindSetting(): Common.Settings.Setting<boolean> {\n  return Common.Settings.Settings.instance().createSetting('group-issues-by-kind', false);\n}\n\nexport function issueKindViewSortPriority(a: IssueKindView, b: IssueKindView): number {\n  if (a.getKind() === b.getKind()) {\n    return 0;\n  }\n  if (a.getKind() === IssuesManager.Issue.IssueKind.PAGE_ERROR) {\n    return -1;\n  }\n  if (a.getKind() === IssuesManager.Issue.IssueKind.BREAKING_CHANGE &&\n      b.getKind() === IssuesManager.Issue.IssueKind.IMPROVEMENT) {\n    return -1;\n  }\n  return 1;\n}\n\nexport function getClassNameFromKind(kind: IssuesManager.Issue.IssueKind): string {\n  switch (kind) {\n    case IssuesManager.Issue.IssueKind.BREAKING_CHANGE:\n      return 'breaking-changes';\n    case IssuesManager.Issue.IssueKind.IMPROVEMENT:\n      return 'improvements';\n    case IssuesManager.Issue.IssueKind.PAGE_ERROR:\n      return 'page-errors';\n  }\n}\n\nexport class IssueKindView extends UI.TreeOutline.TreeElement {\n  #kind: IssuesManager.Issue.IssueKind;\n  #issueCount: HTMLElement;\n\n  constructor(kind: IssuesManager.Issue.IssueKind) {\n    super(undefined, true);\n    this.#kind = kind;\n    this.#issueCount = document.createElement('span');\n\n    this.toggleOnClick = true;\n    this.listItemElement.classList.add('issue-kind');\n    this.listItemElement.classList.add(getClassNameFromKind(kind));\n    this.childrenListElement.classList.add('issue-kind-body');\n  }\n\n  getKind(): IssuesManager.Issue.IssueKind {\n    return this.#kind;\n  }\n\n  getHideAllCurrentKindString(): Common.UIString.LocalizedString {\n    switch (this.#kind) {\n      case IssuesManager.Issue.IssueKind.PAGE_ERROR:\n        return i18nString(UIStrings.hideAllCurrentPageErrors);\n      case IssuesManager.Issue.IssueKind.IMPROVEMENT:\n        return i18nString(UIStrings.hideAllCurrentImprovements);\n      case IssuesManager.Issue.IssueKind.BREAKING_CHANGE:\n        return i18nString(UIStrings.hideAllCurrentBreakingChanges);\n    }\n  }\n\n  #appendHeader(): void {\n    const header = document.createElement('div');\n    header.classList.add('header');\n\n    const issueKindIcon = new Icon();\n    issueKindIcon.name = IssueCounter.IssueCounter.getIssueKindIconName(this.#kind);\n    issueKindIcon.classList.add('leading-issue-icon', 'extra-large');\n\n    const countAdorner = new Adorners.Adorner.Adorner();\n    countAdorner.data = {\n      name: 'countWrapper',\n      content: this.#issueCount,\n    };\n    countAdorner.classList.add('aggregated-issues-count');\n    this.#issueCount.textContent = '0';\n\n    const title = document.createElement('div');\n    title.classList.add('title');\n    title.textContent = IssuesManager.Issue.getIssueKindName(this.#kind);\n\n    const hideAvailableIssuesBtn = new Components.HideIssuesMenu.HideIssuesMenu();\n    hideAvailableIssuesBtn.classList.add('hide-available-issues');\n    hideAvailableIssuesBtn.data = {\n      menuItemLabel: this.getHideAllCurrentKindString(),\n      menuItemAction: () => {\n        const setting = IssuesManager.IssuesManager.getHideIssueByCodeSetting();\n        const values = setting.get();\n        for (const issue of IssuesManager.IssuesManager.IssuesManager.instance().issues()) {\n          if (issue.getKind() === this.#kind) {\n            values[issue.code()] = IssuesManager.IssuesManager.IssueStatus.HIDDEN;\n          }\n        }\n        setting.set(values);\n      },\n    };\n\n    header.appendChild(issueKindIcon);\n    header.appendChild(countAdorner);\n    header.appendChild(title);\n    header.appendChild(hideAvailableIssuesBtn);\n\n    this.listItemElement.appendChild(header);\n  }\n\n  override onattach(): void {\n    this.#appendHeader();\n    this.expand();\n  }\n\n  update(count: number): void {\n    this.#issueCount.textContent = `${count}`;\n  }\n}\n", "// Copyright 2025 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n// IMPORTANT: this file is auto generated. Please do not edit this file.\n/* istanbul ignore file */\nexport default `/*\n * Copyright 2020 The Chromium Authors\n * Use of this source code is governed by a BSD-style license that can be\n * found in the LICENSE file.\n */\n\n.issues-pane {\n  overflow: hidden;\n}\n\n.issues-toolbar-container {\n  display: flex;\n  flex: none;\n}\n\n.issues-toolbar-container > devtools-toolbar {\n  background-color: var(--sys-color-cdt-base-container);\n  border-bottom: 1px solid var(--sys-color-divider);\n}\n\n.issues-toolbar-left {\n  flex: 1 1 auto;\n}\n\n.issues-toolbar-right {\n  padding-right: 6px;\n}\n\n/*# sourceURL=${import.meta.resolve('./issuesPane.css')} */`;", "// Copyright 2025 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n// IMPORTANT: this file is auto generated. Please do not edit this file.\n/* istanbul ignore file */\nexport default `/*\n * Copyright 2020 The Chromium Authors\n * Use of this source code is governed by a BSD-style license that can be\n * found in the LICENSE file.\n */\n\n/* Remove container padding from TreeOutline.\n * Allows issues to touch the edges of the container. */\n:host,\n.issues {\n  padding: 0;\n  overflow: auto;\n}\n\n.issues {\n  --issue-indent: 8px;\n}\n\n/* The top most parents need to be larger, as they may include an unhide button. */\n.tree-outline.issues > li {\n  min-height: var(--sys-size-13);\n}\n\n/* Override whitespace behavior for tree items to allow wrapping */\n.issues li {\n  white-space: normal;\n  align-items: flex-start;\n}\n\n/* Hide toggle for tree items which cannot be collapsed */\n.issues .always-parent::before {\n  display: none;\n}\n\n.issues li.parent::before {\n  margin-top: 7px;\n}\n\n.issues .affected-resources li.parent::before {\n  margin-top: 0;\n}\n\n.issue-category,\n.issue-kind,\n.issue {\n  padding: 0 8px;\n  padding-left: var(--issue-indent);\n  overflow: hidden;\n  flex: none;\n  transition: background-color 200ms;\n  border: 1px solid var(--sys-color-divider);\n  border-width: 0 0 1px;\n}\n\n.issue-category.hidden-issues.parent.expanded,\n.issue-kind.parent.expanded {\n  border-width: 0 0 1px;\n  background-color: var(--sys-color-surface2);\n}\n\n.issue-category + .children .issue,\n.issue.expanded {\n  background: var(--sys-color-cdt-base-container);\n}\n\n.issue.expanded {\n  border-width: 0;\n}\n\n.issue.selected,\n.issue.expanded.selected {\n  background-color: var(--sys-color-surface2);\n\n  &:focus {\n    background-color: var(--sys-color-tonal-container);\n  }\n}\n\n.tree-outline li:not(.selected):hover .selection {\n  background-color: unset;\n}\n\n.tree-outline li.issue:not(.expanded, .selected):hover .selection {\n  background-color: var(--sys-color-state-hover-on-subtle);\n}\n\n.tree-outline li.issue.expanded:not(.selected):hover {\n  background-color: var(--sys-color-state-hover-on-subtle);\n}\n\n.unhide-all-issues-button {\n  margin: 0;\n}\n\np {\n  margin-block: 2px;\n}\n\n/* Override selected tree item styles for issues to avoid changing width. */\n.tree-outline-disclosure:not(.tree-outline-disclosure-hide-overflow) .tree-outline.hide-selection-when-blurred .issue-category.selected:focus-visible,\n.tree-outline-disclosure:not(.tree-outline-disclosure-hide-overflow) .tree-outline.hide-selection-when-blurred .issue-kind.selected:focus-visible,\n.tree-outline-disclosure:not(.tree-outline-disclosure-hide-overflow) .tree-outline.hide-selection-when-blurred .issue.selected:focus-visible {\n  width: auto;\n  padding-right: 8px;\n}\n\n.header {\n  display: flex;\n  flex-direction: row;\n  align-items: flex-start;\n  padding: 4px 0;\n  cursor: pointer;\n  width: 100%;\n\n  & > :not(.unhide-all-issues-button) {\n    margin-top: var(--sys-size-2);\n  }\n}\n\n.header devtools-hide-issues-menu {\n  visibility: hidden;\n}\n\n.header:hover devtools-hide-issues-menu,\n.issue.selected devtools-hide-issues-menu {\n  visibility: visible;\n}\n\n.title {\n  flex: 1;\n  font-size: 12px;\n  color: var(--sys-color-on-surface);\n  font-weight: normal;\n  user-select: text;\n  padding-top: 2px;\n}\n\n.issue.expanded .title {\n  font-weight: 450;\n}\n\n.issue-body.children {\n  border-bottom: 1px solid var(--sys-color-divider);\n  padding: 6px 0;\n  position: relative;\n  padding-left: calc(var(--issue-indent) + 43px);\n  padding-bottom: 26px;\n  padding-right: 8px;\n}\n\n.issue-category + .children,\n.issue-kind + .children {\n  --issue-indent: 24px;\n\n  padding-left: 0;\n}\n\n/* Show a colored border on the left side of opened issues. */\n.issue-body::before {\n  content: \"\";\n  display: block;\n  position: absolute;\n  left: calc(var(--issue-indent) + 23px);\n  top: 0;\n  bottom: 20px;\n  width: 2px;\n}\n\n.issue-kind-breaking-change.issue-body::before {\n  border-left: 2px solid var(--issue-color-yellow);\n}\n\n.issue-kind-page-error.issue-body::before {\n  border-left: 2px solid var(--issue-color-red);\n}\n\n.issue-kind-improvement.issue-body::before {\n  border-left: 2px solid var(--issue-color-blue);\n}\n\n.tree-outline .issue-body li:hover:not(:has(devtools-checkbox)) .selection {\n  background-color: unset;\n}\n\ndevtools-icon.leading-issue-icon {\n  margin: 1px 0 -1px 7px;\n}\n\n.message {\n  line-height: 18px;\n  font-size: 12px;\n  color: var(--sys-color-token-subtle);\n  margin-bottom: 4px;\n  user-select: text;\n}\n\n.message p {\n  margin-bottom: 16px;\n}\n\n.message li {\n  margin-top: 8px;\n}\n\n.message code {\n  color: var(--sys-color-on-surface);\n  padding: 0 2px;\n  font-size: 12px;\n  user-select: text;\n  cursor: text;\n  background: var(--sys-color-surface2);\n}\n\n.separator::before {\n  content: \"\u00B7\";\n  padding-left: 1ex;\n  padding-right: 1ex;\n}\n\n.link {\n  font-size: 12px;\n  color: var(--sys-color-primary);\n}\n\n.link-wrapper {\n  margin-top: 15px;\n  user-select: text;\n}\n\n.affected-resources-label,\n.resolutions-label {\n  margin-top: 5px;\n  font-size: 10px;\n  font-weight: 500;\n  letter-spacing: 0.06em;\n  text-transform: uppercase;\n  color: var(--sys-color-on-surface);\n  display: inline-block;\n}\n\n.link-list {\n  list-style-type: none;\n  list-style-position: inside;\n  padding-inline-start: 0;\n}\n\n.resolutions-list {\n  list-style-type: none;\n  list-style-position: inside;\n  padding-inline-start: 0;\n}\n\n/* We inherit all the styles from treeoutline, but these are simple text <li>, so we override some styles */\n.link-list li::before {\n  content: none;\n  mask-image: none;\n}\n\n.resolutions-list li::before {\n  content: \"\u2192\";\n  mask-image: none;\n  padding-right: 5px;\n  position: relative;\n  top: -1px;\n}\n\n.resolutions-list li {\n  display: list-item;\n}\n\nul > li.plain-enum {\n  display: list-item;\n}\n\n/* This is a hack because the tree view's CSS overrides list styling in a non-compositional way. This\n   can be removed once we've moved to proper components. */\nul > li.plain-enum::before {\n  content: \"\";\n  padding: 0;\n  margin: 0;\n  max-width: 0;\n}\n\n.affected-resources-label + .affected-resources {\n  padding: 3px 0 0;\n  position: relative;\n  user-select: text;\n}\n\n.affected-resource-label {\n  font-size: 12px;\n  line-height: 18px;\n  color: var(--sys-color-on-surface);\n  position: relative;\n  cursor: pointer;\n}\n\n.affected-resource-cookie {\n  font-size: 12px;\n  line-height: 18px;\n  border: 0;\n  border-collapse: collapse;\n}\n\n.affected-resource-element {\n  font-size: 12px;\n  line-height: 18px;\n  color: var(--sys-color-primary);\n  border: 0;\n  border-collapse: collapse;\n}\n\n.affected-resource-row {\n  font-size: 12px;\n  line-height: 18px;\n  border: 0;\n  border-collapse: collapse;\n  vertical-align: top;\n}\n\n.affected-resource-mixed-content {\n  font-size: 12px;\n  line-height: 18px;\n  border: 0;\n  border-collapse: collapse;\n}\n\n.affected-resource-heavy-ad {\n  font-size: 12px;\n  line-height: 18px;\n  border: 0;\n  border-collapse: collapse;\n}\n\n.affected-resource-request {\n  font-size: 12px;\n  line-height: 18px;\n  border: 0;\n  border-collapse: collapse;\n}\n\n.affected-resource-source {\n  font-size: 12px;\n  line-height: 18px;\n  color: var(--sys-color-primary);\n  border: 0;\n  border-collapse: collapse;\n}\n\n.affected-resource-list {\n  border-spacing: 10px 0;\n  margin-left: -12px;\n}\n\n.affected-resource-header {\n  font-size: 12px;\n  color: var(--sys-color-on-surface);\n  padding-left: 2px;\n}\n\n.code-example {\n  font-family: var(--monospace-font-family);\n  font-size: var(--monospace-font-size);\n}\n\n.affected-resource-blocked-status {\n  color: var(--issue-color-red);\n}\n\n.affected-resource-report-only-status {\n  color: var(--issue-color-yellow);\n}\n\n.affected-resource-cookie-info {\n  color: var(--sys-color-token-subtle);\n  padding: 2px;\n  text-align: right;\n}\n\n.affected-resource-cookie-info-header {\n  text-align: right;\n}\n\n.affected-resource-mixed-content-info {\n  color: var(--sys-color-token-subtle);\n  padding: 2px;\n}\n\n.affected-resource-heavy-ad-info {\n  color: var(--sys-color-token-subtle);\n  padding: 2px;\n}\n\n.affected-resource-heavy-ad-info-frame {\n  display: flex;\n  align-items: center;\n  color: var(--sys-color-token-subtle);\n  padding: 2px;\n}\n\n.affected-resource-cell {\n  color: var(--sys-color-token-subtle);\n  padding: 2px;\n}\n\n.affected-resource-cell.link {\n  color: var(--sys-color-primary);\n}\n\n.affected-resource-cell span.icon {\n  margin-right: 0.5ex;\n  vertical-align: sub;\n}\n\n.affected-resources > .parent {\n  margin-top: 0;\n  padding: 2px 5px 0;\n}\n\n.affected-resources > .parent.expanded {\n  background: var(--sys-color-cdt-base-container);\n}\n\n.affected-resources > .children.expanded {\n  background: var(--sys-color-cdt-base-container);\n  padding: 6px 0 9px 5px;\n}\n\n.aggregated-issues-count {\n  padding: 3px 7px 0;\n}\n\n.affected-resource-directive-info-header {\n  text-align: left;\n}\n\n.affected-resource-directive {\n  font-size: 12px;\n  line-height: 18px;\n  border: 0;\n  border-collapse: collapse;\n}\n\n.affected-resource-directive-info {\n  color: var(--sys-color-token-subtle);\n  padding: 2px;\n  text-align: left;\n}\n\n.devtools-link {\n  padding-top: 4px;\n}\n\ndevtools-icon.link-icon {\n  vertical-align: sub;\n  margin-right: 0.5ch;\n}\n\ndevtools-icon.elements-panel,\ndevtools-icon.network-panel {\n  margin-right: 0.5ex;\n  vertical-align: baseline;\n  height: 14px;\n}\n\n@media (forced-colors: active) {\n  .title {\n    color: ButtonText;\n  }\n\n  .tree-outline:not(.hide-selection-when-blurred) .selected .header .title,\n  .tree-outline.hide-selection-when-blurred .selected:focus-visible .header .title {\n    color: HighlightText;\n  }\n}\n\n/*# sourceURL=${import.meta.resolve('./issuesTree.css')} */`;", "// Copyright 2020 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n/* eslint-disable @devtools/no-imperative-dom-api */\n\nimport * as Common from '../../core/common/common.js';\nimport * as Host from '../../core/host/host.js';\nimport * as i18n from '../../core/i18n/i18n.js';\nimport type * as Platform from '../../core/platform/platform.js';\nimport * as Protocol from '../../generated/protocol.js';\nimport type {AggregatedIssue} from '../../models/issues_manager/IssueAggregator.js';\nimport * as IssuesManager from '../../models/issues_manager/issues_manager.js';\nimport * as NetworkForward from '../../panels/network/forward/forward.js';\nimport * as Adorners from '../../ui/components/adorners/adorners.js';\nimport * as IssueCounter from '../../ui/components/issue_counter/issue_counter.js';\nimport * as MarkdownView from '../../ui/components/markdown_view/markdown_view.js';\nimport {Icon} from '../../ui/kit/kit.js';\nimport * as UI from '../../ui/legacy/legacy.js';\nimport * as VisualLogging from '../../ui/visual_logging/visual_logging.js';\n\nimport {AffectedBlockedByResponseView} from './AffectedBlockedByResponseView.js';\nimport {AffectedCookiesView, AffectedRawCookieLinesView} from './AffectedCookiesView.js';\nimport {AffectedDescendantsWithinSelectElementView} from './AffectedDescendantsWithinSelectElementView.js';\nimport {AffectedDirectivesView} from './AffectedDirectivesView.js';\nimport {AffectedDocumentsInQuirksModeView} from './AffectedDocumentsInQuirksModeView.js';\nimport {AffectedElementsView} from './AffectedElementsView.js';\nimport {AffectedElementsWithLowContrastView} from './AffectedElementsWithLowContrastView.js';\nimport {AffectedHeavyAdView} from './AffectedHeavyAdView.js';\nimport {AffectedMetadataAllowedSitesView} from './AffectedMetadataAllowedSitesView.js';\nimport {AffectedPartitioningBlobURLView} from './AffectedPartitioningBlobURLView.js';\nimport {AffectedPermissionElementsView} from './AffectedPermissionElementsView.js';\nimport {AffectedItem, AffectedResourcesView, extractShortPath} from './AffectedResourcesView.js';\nimport {AffectedSharedArrayBufferIssueDetailsView} from './AffectedSharedArrayBufferIssueDetailsView.js';\nimport {AffectedSourcesView} from './AffectedSourcesView.js';\nimport {AffectedTrackingSitesView} from './AffectedTrackingSitesView.js';\nimport {AttributionReportingIssueDetailsView} from './AttributionReportingIssueDetailsView.js';\nimport * as Components from './components/components.js';\nimport type {HiddenIssuesMenuData} from './components/HideIssuesMenu.js';\nimport {CorsIssueDetailsView} from './CorsIssueDetailsView.js';\nimport {GenericIssueDetailsView} from './GenericIssueDetailsView.js';\n\nconst UIStrings = {\n  /**\n   * @description Noun, singular. Label for a column or field containing the name of an entity.\n   */\n  name: 'Name',\n  /**\n   * @description The kind of resolution for a mixed content issue\n   */\n  blocked: 'blocked',\n  /**\n   * @description Label for a type of issue that can appear in the Issues view. Noun for singular or plural number of network requests.\n   */\n  nRequests: '{n, plural, =1 {# request} other {# requests}}',\n  /**\n   * @description Label for singular or plural number of affected resources in issue view\n   */\n  nResources: '{n, plural, =1 {# resource} other {# resources}}',\n  /**\n   * @description Label for mixed content issue's restriction status\n   */\n  restrictionStatus: 'Restriction Status',\n  /**\n   * @description When there is a Heavy Ad, the browser can choose to deal with it in different ways.\n   * This string indicates that the ad was only warned, and not removed.\n   */\n  warned: 'Warned',\n  /**\n   * @description Header for the section listing affected resources\n   */\n  affectedResources: 'Affected Resources',\n  /**\n   * @description Title for a link to further information in issue view\n   * @example {SameSite Cookies Explained} PH1\n   */\n  learnMoreS: 'Learn more: {PH1}',\n  /**\n   * @description The kind of resolution for a mixed content issue\n   */\n  automaticallyUpgraded: 'automatically upgraded',\n  /**\n   * @description Menu entry for hiding a particular issue, in the Hide Issues context menu.\n   */\n  hideIssuesLikeThis: 'Hide issues like this',\n  /**\n   * @description Menu entry for unhiding a particular issue, in the Hide Issues context menu.\n   */\n  unhideIssuesLikeThis: 'Unhide issues like this',\n} as const;\nconst str_ = i18n.i18n.registerUIStrings('panels/issues/IssueView.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\n\nclass AffectedRequestsView extends AffectedResourcesView {\n  #appendAffectedRequests(affectedRequests: Iterable<Protocol.Audits.AffectedRequest>): void {\n    let count = 0;\n    for (const affectedRequest of affectedRequests) {\n      const element = document.createElement('tr');\n      element.classList.add('affected-resource-request');\n      const category = this.issue.getCategory();\n      const tab =\n          issueTypeToNetworkHeaderMap.get(category) || NetworkForward.UIRequestLocation.UIRequestTabs.HEADERS_COMPONENT;\n      element.appendChild(this.createRequestCell(affectedRequest, {\n        networkTab: tab,\n        additionalOnClickAction() {\n          Host.userMetrics.issuesPanelResourceOpened(category, AffectedItem.REQUEST);\n        },\n      }));\n      this.affectedResources.appendChild(element);\n      count++;\n    }\n    this.updateAffectedResourceCount(count);\n  }\n\n  protected getResourceNameWithCount(count: number): Platform.UIString.LocalizedString {\n    return i18nString(UIStrings.nRequests, {n: count});\n  }\n\n  update(): void {\n    this.clear();\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    for (const unused of this.issue.getBlockedByResponseDetails()) {\n      // If the issue has blockedByResponseDetails, the corresponding AffectedBlockedByResponseView\n      // will take care of displaying the request.\n      this.updateAffectedResourceCount(0);\n      return;\n    }\n    if (this.issue.getCategory() === IssuesManager.Issue.IssueCategory.MIXED_CONTENT) {\n      // The AffectedMixedContentView takes care of displaying the resources.\n      this.updateAffectedResourceCount(0);\n      return;\n    }\n    this.#appendAffectedRequests(this.issue.requests());\n  }\n}\n\nconst issueTypeToNetworkHeaderMap =\n    new Map<IssuesManager.Issue.IssueCategory, NetworkForward.UIRequestLocation.UIRequestTabs>([\n      [\n        IssuesManager.Issue.IssueCategory.COOKIE,\n        NetworkForward.UIRequestLocation.UIRequestTabs.COOKIES,\n      ],\n      [\n        IssuesManager.Issue.IssueCategory.CROSS_ORIGIN_EMBEDDER_POLICY,\n        NetworkForward.UIRequestLocation.UIRequestTabs.HEADERS_COMPONENT,\n      ],\n      [\n        IssuesManager.Issue.IssueCategory.MIXED_CONTENT,\n        NetworkForward.UIRequestLocation.UIRequestTabs.HEADERS_COMPONENT,\n      ],\n    ]);\n\nclass AffectedMixedContentView extends AffectedResourcesView {\n  #appendAffectedMixedContentDetails(mixedContentIssues: Iterable<IssuesManager.MixedContentIssue.MixedContentIssue>):\n      void {\n    const header = document.createElement('tr');\n    this.appendColumnTitle(header, i18nString(UIStrings.name));\n    this.appendColumnTitle(header, i18nString(UIStrings.restrictionStatus));\n\n    this.affectedResources.appendChild(header);\n\n    let count = 0;\n    for (const issue of mixedContentIssues) {\n      const details = issue.details();\n      this.appendAffectedMixedContent(details);\n      count++;\n    }\n    this.updateAffectedResourceCount(count);\n  }\n\n  protected getResourceNameWithCount(count: number): Platform.UIString.LocalizedString {\n    return i18nString(UIStrings.nResources, {n: count});\n  }\n\n  appendAffectedMixedContent(mixedContent: Protocol.Audits.MixedContentIssueDetails): void {\n    const element = document.createElement('tr');\n    element.classList.add('affected-resource-mixed-content');\n\n    if (mixedContent.request) {\n      const networkTab = issueTypeToNetworkHeaderMap.get(this.issue.getCategory()) ||\n          NetworkForward.UIRequestLocation.UIRequestTabs.HEADERS_COMPONENT;\n      element.appendChild(this.createRequestCell(mixedContent.request, {\n        networkTab,\n        additionalOnClickAction() {\n          Host.userMetrics.issuesPanelResourceOpened(\n              IssuesManager.Issue.IssueCategory.MIXED_CONTENT, AffectedItem.REQUEST);\n        },\n      }));\n    } else {\n      const filename = extractShortPath(mixedContent.insecureURL as Platform.DevToolsPath.UrlString);\n      const cell = this.appendIssueDetailCell(element, filename, 'affected-resource-mixed-content-info');\n      cell.title = mixedContent.insecureURL;\n    }\n\n    this.appendIssueDetailCell(\n        element, AffectedMixedContentView.translateStatus(mixedContent.resolutionStatus),\n        'affected-resource-mixed-content-info');\n    this.affectedResources.appendChild(element);\n  }\n\n  private static translateStatus(resolutionStatus: Protocol.Audits.MixedContentResolutionStatus):\n      Platform.UIString.LocalizedString {\n    switch (resolutionStatus) {\n      case Protocol.Audits.MixedContentResolutionStatus.MixedContentBlocked:\n        return i18nString(UIStrings.blocked);\n      case Protocol.Audits.MixedContentResolutionStatus.MixedContentAutomaticallyUpgraded:\n        return i18nString(UIStrings.automaticallyUpgraded);\n      case Protocol.Audits.MixedContentResolutionStatus.MixedContentWarning:\n        return i18nString(UIStrings.warned);\n    }\n  }\n\n  update(): void {\n    this.clear();\n    this.#appendAffectedMixedContentDetails(this.issue.getMixedContentIssues());\n  }\n}\n\nexport class IssueView extends UI.TreeOutline.TreeElement {\n  #issue: AggregatedIssue;\n  #description: IssuesManager.MarkdownIssueDescription.IssueDescription;\n  override toggleOnClick: boolean;\n  affectedResources: UI.TreeOutline.TreeElement;\n  readonly #affectedResourceViews: AffectedResourcesView[];\n  #aggregatedIssuesCount: HTMLElement|null;\n  #issueKindIcon: Icon|null = null;\n  #hasBeenExpandedBefore: boolean;\n  #throttle: Common.Throttler.Throttler;\n  #needsUpdateOnExpand = true;\n  #hiddenIssuesMenu?: Components.HideIssuesMenu.HideIssuesMenu;\n  #contentCreated = false;\n\n  constructor(issue: AggregatedIssue, description: IssuesManager.MarkdownIssueDescription.IssueDescription) {\n    super();\n    this.#issue = issue;\n    this.#description = description;\n    this.#throttle = new Common.Throttler.Throttler(250);\n\n    this.toggleOnClick = true;\n    this.listItemElement.classList.add('issue');\n    this.childrenListElement.classList.add('issue-body');\n    this.childrenListElement.classList.add(IssueView.getBodyCSSClass(this.#issue.getKind()));\n\n    this.affectedResources = this.#createAffectedResources();\n    this.#affectedResourceViews = [\n      new AffectedCookiesView(this, this.#issue, 'affected-cookies'),\n      new AffectedElementsView(this, this.#issue, 'affected-elements'),\n      new AffectedRequestsView(this, this.#issue, 'affected-requests'),\n      new AffectedMixedContentView(this, this.#issue, 'mixed-content-details'),\n      new AffectedSourcesView(this, this.#issue, 'affected-sources'),\n      new AffectedHeavyAdView(this, this.#issue, 'heavy-ad-details'),\n      new AffectedDirectivesView(this, this.#issue, 'directives-details'),\n      new AffectedBlockedByResponseView(this, this.#issue, 'blocked-by-response-details'),\n      new AffectedSharedArrayBufferIssueDetailsView(this, this.#issue, 'sab-details'),\n      new AffectedElementsWithLowContrastView(this, this.#issue, 'low-contrast-details'),\n      new CorsIssueDetailsView(this, this.#issue, 'cors-details'),\n      new GenericIssueDetailsView(this, this.#issue, 'generic-details'),\n      new AffectedDocumentsInQuirksModeView(this, this.#issue, 'affected-documents'),\n      new AttributionReportingIssueDetailsView(this, this.#issue, 'attribution-reporting-details'),\n      new AffectedRawCookieLinesView(this, this.#issue, 'affected-raw-cookies'),\n      new AffectedTrackingSitesView(this, this.#issue, 'tracking-sites-details'),\n      new AffectedMetadataAllowedSitesView(this, this.#issue, 'metadata-allowed-sites-details'),\n      new AffectedDescendantsWithinSelectElementView(this, this.#issue, 'disallowed-select-descendants-details'),\n      new AffectedPartitioningBlobURLView(this, this.#issue, 'partitioning-blob-url-details'),\n      new AffectedPermissionElementsView(this, this.#issue, 'permission-element-elements'),\n    ];\n    this.#hiddenIssuesMenu = new Components.HideIssuesMenu.HideIssuesMenu();\n    this.#aggregatedIssuesCount = null;\n    this.#hasBeenExpandedBefore = false;\n  }\n\n  /**\n   * Sets the issue to take the resources from. Assumes that the description\n   * this IssueView was initialized with fits the new issue as well, i.e.\n   * title and issue description will not be updated.\n   */\n  setIssue(issue: AggregatedIssue): void {\n    if (this.#issue !== issue) {\n      this.#needsUpdateOnExpand = true;\n    }\n    this.#issue = issue;\n    this.#affectedResourceViews.forEach(view => view.setIssue(issue));\n  }\n\n  private static getBodyCSSClass(issueKind: IssuesManager.Issue.IssueKind): string {\n    switch (issueKind) {\n      case IssuesManager.Issue.IssueKind.BREAKING_CHANGE:\n        return 'issue-kind-breaking-change';\n      case IssuesManager.Issue.IssueKind.PAGE_ERROR:\n        return 'issue-kind-page-error';\n      case IssuesManager.Issue.IssueKind.IMPROVEMENT:\n        return 'issue-kind-improvement';\n    }\n  }\n\n  getIssueTitle(): string {\n    return this.#description.title;\n  }\n\n  override onattach(): void {\n    if (!this.#contentCreated) {\n      this.createContent();\n      return;\n    }\n    this.update();\n  }\n\n  createContent(): void {\n    this.#appendHeader();\n    this.#createBody();\n    this.appendChild(this.affectedResources);\n    const visibleAffectedResource: AffectedResourcesView[] = [];\n    for (const view of this.#affectedResourceViews) {\n      this.appendAffectedResource(view);\n      view.update();\n      if (!view.isEmpty()) {\n        visibleAffectedResource.push(view);\n      }\n    }\n    this.#updateAffectedResourcesPositionAndSize(visibleAffectedResource);\n\n    this.#createReadMoreLinks();\n    this.updateAffectedResourceVisibility();\n    this.#contentCreated = true;\n  }\n\n  appendAffectedResource(resource: UI.TreeOutline.TreeElement): void {\n    this.affectedResources.appendChild(resource);\n  }\n\n  #updateAffectedResourcesPositionAndSize(visibleAffectedResource: AffectedResourcesView[]): void {\n    for (let i = 0; i < visibleAffectedResource.length; i++) {\n      const element = visibleAffectedResource[i].listItemElement;\n      UI.ARIAUtils.setPositionInSet(element, i + 1);\n      UI.ARIAUtils.setSetSize(element, visibleAffectedResource.length);\n    }\n  }\n\n  #appendHeader(): void {\n    const header = document.createElement('div');\n    header.classList.add('header');\n    this.#issueKindIcon = new Icon();\n    this.#issueKindIcon.classList.add('leading-issue-icon', 'extra-large');\n    this.#aggregatedIssuesCount = document.createElement('span');\n    const countAdorner = new Adorners.Adorner.Adorner();\n    countAdorner.data = {\n      name: 'countWrapper',\n      content: this.#aggregatedIssuesCount,\n    };\n    countAdorner.classList.add('aggregated-issues-count');\n    header.appendChild(this.#issueKindIcon);\n    header.appendChild(countAdorner);\n\n    const title = document.createElement('div');\n    title.classList.add('title');\n    title.textContent = this.#description.title;\n    header.appendChild(title);\n    if (this.#hiddenIssuesMenu) {\n      header.appendChild(this.#hiddenIssuesMenu);\n    }\n    this.#updateFromIssue();\n    this.listItemElement.appendChild(header);\n  }\n\n  override onexpand(): void {\n    const category = this.#issue.getCategory();\n\n    // Handle sub type for cookie issues.\n    if (category === IssuesManager.Issue.IssueCategory.COOKIE) {\n      const cookieIssueSubCategory = IssuesManager.CookieIssue.CookieIssue.getSubCategory(this.#issue.code());\n      Host.userMetrics.issuesPanelIssueExpanded(cookieIssueSubCategory);\n    } else {\n      Host.userMetrics.issuesPanelIssueExpanded(category);\n    }\n\n    if (this.#needsUpdateOnExpand) {\n      this.#doUpdate();\n    }\n\n    if (!this.#hasBeenExpandedBefore) {\n      this.#hasBeenExpandedBefore = true;\n      for (const view of this.#affectedResourceViews) {\n        view.expandIfOneResource();\n      }\n    }\n  }\n\n  #updateFromIssue(): void {\n    if (this.#issueKindIcon) {\n      const kind = this.#issue.getKind();\n      this.#issueKindIcon.name = IssueCounter.IssueCounter.getIssueKindIconName(kind);\n      this.#issueKindIcon.title = IssuesManager.Issue.getIssueKindDescription(kind);\n    }\n    if (this.#aggregatedIssuesCount) {\n      this.#aggregatedIssuesCount.textContent = `${this.#issue.getAggregatedIssuesCount()}`;\n    }\n    this.listItemElement.classList.toggle('hidden-issue', this.#issue.isHidden());\n    if (this.#hiddenIssuesMenu) {\n      const data: HiddenIssuesMenuData = {\n        menuItemLabel: this.#issue.isHidden() ? i18nString(UIStrings.unhideIssuesLikeThis) :\n                                                i18nString(UIStrings.hideIssuesLikeThis),\n        menuItemAction: () => {\n          const setting = IssuesManager.IssuesManager.getHideIssueByCodeSetting();\n          const values = setting.get();\n          values[this.#issue.code()] = this.#issue.isHidden() ? IssuesManager.IssuesManager.IssueStatus.UNHIDDEN :\n                                                                IssuesManager.IssuesManager.IssueStatus.HIDDEN;\n          setting.set(values);\n        },\n      };\n      this.#hiddenIssuesMenu.data = data;\n    }\n  }\n\n  updateAffectedResourceVisibility(): void {\n    const noResources = this.#affectedResourceViews.every(view => view.isEmpty());\n    this.affectedResources.hidden = noResources;\n  }\n\n  #createAffectedResources(): UI.TreeOutline.TreeElement {\n    const wrapper = new UI.TreeOutline.TreeElement();\n    wrapper.setCollapsible(false);\n    wrapper.setExpandable(true);\n    wrapper.expand();\n    wrapper.selectable = false;\n    wrapper.listItemElement.classList.add('affected-resources-label');\n    wrapper.listItemElement.textContent = i18nString(UIStrings.affectedResources);\n    wrapper.childrenListElement.classList.add('affected-resources');\n    UI.ARIAUtils.setPositionInSet(wrapper.listItemElement, 2);\n    UI.ARIAUtils.setSetSize(wrapper.listItemElement, this.#description.links.length === 0 ? 2 : 3);\n    return wrapper;\n  }\n\n  #createBody(): void {\n    const messageElement = new UI.TreeOutline.TreeElement();\n    messageElement.setCollapsible(false);\n    messageElement.selectable = false;\n    const markdownComponent = new MarkdownView.MarkdownView.MarkdownView();\n    markdownComponent.data = {tokens: this.#description.markdown};\n    messageElement.listItemElement.appendChild(markdownComponent);\n    UI.ARIAUtils.setPositionInSet(messageElement.listItemElement, 1);\n    UI.ARIAUtils.setSetSize(messageElement.listItemElement, this.#description.links.length === 0 ? 2 : 3);\n    this.appendChild(messageElement);\n  }\n\n  #createReadMoreLinks(): void {\n    if (this.#description.links.length === 0) {\n      return;\n    }\n\n    const linkWrapper = new UI.TreeOutline.TreeElement();\n    linkWrapper.setCollapsible(false);\n    linkWrapper.listItemElement.classList.add('link-wrapper');\n    UI.ARIAUtils.setPositionInSet(linkWrapper.listItemElement, 3);\n    UI.ARIAUtils.setSetSize(linkWrapper.listItemElement, 3);\n\n    const linkList = linkWrapper.listItemElement.createChild('ul', 'link-list');\n    for (const description of this.#description.links) {\n      const link = UI.Fragment.html`<x-link class=\"link devtools-link\" tabindex=\"0\" href=${description.link}>${\n                       i18nString(UIStrings.learnMoreS, {PH1: description.linkTitle})}</x-link>` as UI.XLink.XLink;\n      link.setAttribute('jslog', `${VisualLogging.link('learn-more').track({click: true})}`);\n\n      const linkListItem = linkList.createChild('li');\n      linkListItem.appendChild(link);\n    }\n    this.appendChild(linkWrapper);\n  }\n\n  #doUpdate(): void {\n    if (this.expanded) {\n      this.#affectedResourceViews.forEach(view => view.update());\n      this.updateAffectedResourceVisibility();\n    }\n    this.#needsUpdateOnExpand = !this.expanded;\n    this.#updateFromIssue();\n  }\n\n  update(): void {\n    void this.#throttle.schedule(async () => this.#doUpdate());\n  }\n\n  clear(): void {\n    this.#affectedResourceViews.forEach(view => view.clear());\n  }\n\n  getIssueKind(): IssuesManager.Issue.IssueKind {\n    return this.#issue.getKind();\n  }\n\n  isForHiddenIssue(): boolean {\n    return this.#issue.isHidden();\n  }\n\n  toggle(expand?: boolean): void {\n    if (expand || (expand === undefined && !this.expanded)) {\n      this.expand();\n    } else {\n      this.collapse();\n    }\n  }\n}\n", "// Copyright 2021 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n/* eslint-disable @devtools/no-imperative-dom-api */\n\nimport * as Host from '../../core/host/host.js';\nimport * as i18n from '../../core/i18n/i18n.js';\nimport type * as Platform from '../../core/platform/platform.js';\nimport type * as Protocol from '../../generated/protocol.js';\nimport * as IssuesManager from '../../models/issues_manager/issues_manager.js';\n\nimport {AffectedItem, AffectedResourcesView} from './AffectedResourcesView.js';\n\nconst UIStrings = {\n  /**\n   * @description Noun for singular or plural network requests. Label for the affected resources section in the issue view.\n   */\n  nRequests: '{n, plural, =1 {# request} other {# requests}}',\n  /**\n   * @description Noun for a singular network request. Label for a column in the affected resources table in the issue view.\n   */\n  requestC: 'Request',\n  /**\n   * @description Noun for a singular parent frame. Label for a column in the affected resources table in the issue view.\n   */\n  parentFrame: 'Parent Frame',\n  /**\n   * @description Noun for a singular resource that was blocked (an example for a blocked resource would be a frame). Label for a column in the affected resources table in the issue view.\n   */\n  blockedResource: 'Blocked Resource',\n} as const;\nconst str_ = i18n.i18n.registerUIStrings('panels/issues/AffectedBlockedByResponseView.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\n\nexport class AffectedBlockedByResponseView extends AffectedResourcesView {\n  #appendDetails(details: Iterable<Protocol.Audits.BlockedByResponseIssueDetails>): void {\n    const header = document.createElement('tr');\n    this.appendColumnTitle(header, i18nString(UIStrings.requestC));\n    this.appendColumnTitle(header, i18nString(UIStrings.parentFrame));\n    this.appendColumnTitle(header, i18nString(UIStrings.blockedResource));\n\n    this.affectedResources.appendChild(header);\n\n    let count = 0;\n    for (const detail of details) {\n      this.#appendDetail(detail);\n      count++;\n    }\n    this.updateAffectedResourceCount(count);\n  }\n\n  protected getResourceNameWithCount(count: number): Platform.UIString.LocalizedString {\n    return i18nString(UIStrings.nRequests, {n: count});\n  }\n\n  #appendDetail(details: Protocol.Audits.BlockedByResponseIssueDetails): void {\n    const element = document.createElement('tr');\n    element.classList.add('affected-resource-row');\n\n    const requestCell = this.createRequestCell(details.request, {\n      additionalOnClickAction() {\n        Host.userMetrics.issuesPanelResourceOpened(\n            IssuesManager.Issue.IssueCategory.CROSS_ORIGIN_EMBEDDER_POLICY, AffectedItem.REQUEST);\n      },\n    });\n    element.appendChild(requestCell);\n\n    if (details.parentFrame) {\n      const frameUrl = this.createFrameCell(details.parentFrame.frameId, this.issue.getCategory());\n      element.appendChild(frameUrl);\n    } else {\n      element.appendChild(document.createElement('td'));\n    }\n\n    if (details.blockedFrame) {\n      const frameUrl = this.createFrameCell(details.blockedFrame.frameId, this.issue.getCategory());\n      element.appendChild(frameUrl);\n    } else {\n      element.appendChild(document.createElement('td'));\n    }\n\n    this.affectedResources.appendChild(element);\n  }\n\n  update(): void {\n    this.clear();\n    this.#appendDetails(this.issue.getBlockedByResponseDetails());\n  }\n}\n", "// Copyright 2020 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n/* eslint-disable @devtools/no-imperative-dom-api */\n\nimport * as Common from '../../core/common/common.js';\nimport * as Host from '../../core/host/host.js';\nimport * as i18n from '../../core/i18n/i18n.js';\nimport type * as Platform from '../../core/platform/platform.js';\nimport * as SDK from '../../core/sdk/sdk.js';\nimport type * as Protocol from '../../generated/protocol.js';\nimport type * as IssuesManager from '../../models/issues_manager/issues_manager.js';\nimport * as Logs from '../../models/logs/logs.js';\nimport type * as NetworkForward from '../../panels/network/forward/forward.js';\nimport * as RequestLinkIcon from '../../ui/components/request_link_icon/request_link_icon.js';\nimport {Icon} from '../../ui/kit/kit.js';\nimport * as Components from '../../ui/legacy/components/utils/utils.js';\nimport * as UI from '../../ui/legacy/legacy.js';\nimport * as VisualLogging from '../../ui/visual_logging/visual_logging.js';\nimport * as PanelsCommon from '../common/common.js';\n\nimport type {IssueView} from './IssueView.js';\n\nconst UIStrings = {\n  /**\n   * @description Text in Object Properties Section\n   */\n  unknown: 'unknown',\n  /**\n   * @description Tooltip for button linking to the Elements panel\n   */\n  clickToRevealTheFramesDomNodeIn: 'Click to reveal the frame\\'s DOM node in the Elements panel',\n  /**\n   * @description Replacement text for a link to an HTML element which is not available (anymore).\n   */\n  unavailable: 'unavailable',\n} as const;\nconst str_ = i18n.i18n.registerUIStrings('panels/issues/AffectedResourcesView.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\n\nexport const enum AffectedItem {\n  COOKIE = 'Cookie',\n  DIRECTIVE = 'Directive',\n  ELEMENT = 'Element',\n  REQUEST = 'Request',\n  SOURCE = 'Source',\n}\n\nexport const extractShortPath = (path: Platform.DevToolsPath.UrlString): string => {\n  // 1st regex matches everything after last '/'\n  // if path ends with '/', 2nd regex returns everything between the last two '/'\n  return (/[^/]+$/.exec(path) || /[^/]+\\/$/.exec(path) || [''])[0];\n};\n\nexport interface CreateRequestCellOptions {\n  linkToPreflight?: boolean;\n  highlightHeader?: {section: NetworkForward.UIRequestLocation.UIHeaderSection, name: string};\n  networkTab?: NetworkForward.UIRequestLocation.UIRequestTabs;\n  additionalOnClickAction?: () => void;\n}\n\n/**\n * The base class for all affected resource views. It provides basic scaffolding\n * as well as machinery for resolving request and frame ids to SDK objects.\n */\nexport abstract class AffectedResourcesView extends UI.TreeOutline.TreeElement {\n  readonly #parentView: IssueView;\n  protected issue: IssuesManager.IssueAggregator.AggregatedIssue;\n  protected affectedResourcesCountElement: HTMLElement;\n  protected affectedResources: HTMLElement;\n  #affectedResourcesCount: number;\n  #frameListeners: Common.EventTarget.EventDescriptor[];\n  #unresolvedFrameIds: Set<string>;\n  protected requestResolver: Logs.RequestResolver.RequestResolver;\n\n  constructor(parent: IssueView, issue: IssuesManager.IssueAggregator.AggregatedIssue, jslogContext: string) {\n    super(/* title */ undefined, /* expandable */ undefined, jslogContext);\n    this.#parentView = parent;\n    this.issue = issue;\n    this.toggleOnClick = true;\n    this.affectedResourcesCountElement = this.createAffectedResourcesCounter();\n\n    this.affectedResources = this.createAffectedResources();\n    this.#affectedResourcesCount = 0;\n    this.requestResolver = new Logs.RequestResolver.RequestResolver();\n    this.#frameListeners = [];\n    this.#unresolvedFrameIds = new Set();\n  }\n\n  /**\n   * Sets the issue to take the resources from. Does not\n   * trigger an update, the caller needs to do that explicitly.\n   */\n  setIssue(issue: IssuesManager.IssueAggregator.AggregatedIssue): void {\n    this.issue = issue;\n  }\n\n  createAffectedResourcesCounter(): HTMLElement {\n    const counterLabel = document.createElement('div');\n    counterLabel.classList.add('affected-resource-label');\n    this.listItemElement.appendChild(counterLabel);\n    return counterLabel;\n  }\n\n  createAffectedResources(): HTMLElement {\n    const body = new UI.TreeOutline.TreeElement();\n    const affectedResources = document.createElement('table');\n    affectedResources.classList.add('affected-resource-list');\n    body.listItemElement.appendChild(affectedResources);\n    this.appendChild(body);\n\n    return affectedResources;\n  }\n\n  protected abstract getResourceNameWithCount(count: number): string;\n\n  protected updateAffectedResourceCount(count: number): void {\n    this.#affectedResourcesCount = count;\n    this.affectedResourcesCountElement.textContent = this.getResourceNameWithCount(count);\n    this.hidden = this.#affectedResourcesCount === 0;\n    this.#parentView.updateAffectedResourceVisibility();\n  }\n\n  isEmpty(): boolean {\n    return this.#affectedResourcesCount === 0;\n  }\n\n  clear(): void {\n    this.affectedResources.textContent = '';\n    this.requestResolver.clear();\n  }\n\n  expandIfOneResource(): void {\n    if (this.#affectedResourcesCount === 1) {\n      this.expand();\n    }\n  }\n\n  /**\n   * This function resolves a frameId to a ResourceTreeFrame. If the frameId does not resolve, or hasn't navigated yet,\n   * a listener is installed that takes care of updating the view if the frame is added. This is useful if the issue is\n   * added before the frame gets reported.\n   */\n  #resolveFrameId(frameId: Protocol.Page.FrameId): SDK.ResourceTreeModel.ResourceTreeFrame|null {\n    const frame = SDK.FrameManager.FrameManager.instance().getFrame(frameId);\n    if (!frame?.url) {\n      this.#unresolvedFrameIds.add(frameId);\n      if (!this.#frameListeners.length) {\n        const addListener = SDK.FrameManager.FrameManager.instance().addEventListener(\n            SDK.FrameManager.Events.FRAME_ADDED_TO_TARGET, this.#onFrameChanged, this);\n        const navigateListener = SDK.FrameManager.FrameManager.instance().addEventListener(\n            SDK.FrameManager.Events.FRAME_NAVIGATED, this.#onFrameChanged, this);\n        this.#frameListeners = [addListener, navigateListener];\n      }\n    }\n    return frame;\n  }\n\n  #onFrameChanged(event: Common.EventTarget.EventTargetEvent<{frame: SDK.ResourceTreeModel.ResourceTreeFrame}>): void {\n    const frame = event.data.frame;\n    if (!frame.url) {\n      return;\n    }\n    const frameWasUnresolved = this.#unresolvedFrameIds.delete(frame.id);\n    if (this.#unresolvedFrameIds.size === 0 && this.#frameListeners.length) {\n      // Stop listening once all requests are resolved.\n      Common.EventTarget.removeEventListeners(this.#frameListeners);\n      this.#frameListeners = [];\n    }\n    if (frameWasUnresolved) {\n      this.update();\n    }\n  }\n\n  protected createFrameCell(frameId: Protocol.Page.FrameId, issueCategory: IssuesManager.Issue.IssueCategory):\n      HTMLElement {\n    const frame = this.#resolveFrameId(frameId);\n    const url = frame && (frame.unreachableUrl() || frame.url) || i18nString(UIStrings.unknown);\n\n    const frameCell = document.createElement('td');\n    frameCell.classList.add('affected-resource-cell');\n    if (frame) {\n      const icon = new Icon();\n      icon.name = 'code-circle';\n      icon.classList.add('link', 'elements-panel', 'medium');\n      icon.onclick = async () => {\n        Host.userMetrics.issuesPanelResourceOpened(issueCategory, AffectedItem.ELEMENT);\n        const frame = SDK.FrameManager.FrameManager.instance().getFrame(frameId);\n        if (frame) {\n          const ownerNode = await frame.getOwnerDOMNodeOrDocument();\n          if (ownerNode) {\n            void Common.Revealer.reveal(ownerNode);\n          }\n        }\n      };\n      icon.title = i18nString(UIStrings.clickToRevealTheFramesDomNodeIn);\n      frameCell.appendChild(icon);\n    }\n    frameCell.appendChild(document.createTextNode(url));\n    frameCell.onmouseenter = () => {\n      const frame = SDK.FrameManager.FrameManager.instance().getFrame(frameId);\n      if (frame) {\n        void frame.highlight();\n      }\n    };\n    frameCell.onmouseleave = () => SDK.OverlayModel.OverlayModel.hideDOMNodeHighlight();\n    return frameCell;\n  }\n\n  protected createRequestCell(affectedRequest: Protocol.Audits.AffectedRequest, options: CreateRequestCellOptions = {}):\n      HTMLElement {\n    const requestCell = document.createElement('td');\n    requestCell.classList.add('affected-resource-cell');\n    const requestLinkIcon = new RequestLinkIcon.RequestLinkIcon.RequestLinkIcon();\n    requestLinkIcon.data = {...options, affectedRequest, requestResolver: this.requestResolver, displayURL: true};\n    requestCell.appendChild(requestLinkIcon);\n    return requestCell;\n  }\n\n  protected async createElementCell(\n      {backendNodeId, nodeName, target}: IssuesManager.Issue.AffectedElement,\n      issueCategory: IssuesManager.Issue.IssueCategory): Promise<Element> {\n    if (!target) {\n      const cellElement = document.createElement('td');\n      cellElement.textContent = nodeName || i18nString(UIStrings.unavailable);\n      return cellElement;\n    }\n\n    function sendTelemetry(): void {\n      Host.userMetrics.issuesPanelResourceOpened(issueCategory, AffectedItem.ELEMENT);\n    }\n\n    const deferredDOMNode = new SDK.DOMModel.DeferredDOMNode(target, backendNodeId);\n    const anchorElement = PanelsCommon.DOMLinkifier.Linkifier.instance().linkify(deferredDOMNode) as HTMLElement;\n    anchorElement.textContent = nodeName;\n    anchorElement.addEventListener('click', () => sendTelemetry());\n    anchorElement.addEventListener('keydown', (event: Event) => {\n      if ((event as KeyboardEvent).key === 'Enter') {\n        sendTelemetry();\n      }\n    });\n    const cellElement = document.createElement('td');\n    cellElement.classList.add('affected-resource-element', 'devtools-link');\n    cellElement.appendChild(anchorElement);\n    return cellElement;\n  }\n\n  protected appendSourceLocation(\n      element: HTMLElement,\n      sourceLocation: {url: string, lineNumber: number, scriptId?: Protocol.Runtime.ScriptId, columnNumber?: number}|\n      undefined,\n      target: SDK.Target.Target|null|undefined): void {\n    const sourceCodeLocation = document.createElement('td');\n    sourceCodeLocation.classList.add('affected-source-location');\n    if (sourceLocation) {\n      const maxLengthForDisplayedURLs = 40;  // Same as console messages.\n      const linkifier = new Components.Linkifier.Linkifier(maxLengthForDisplayedURLs);\n      const sourceAnchor = linkifier.linkifyScriptLocation(\n          target || null, sourceLocation.scriptId || null, sourceLocation.url as Platform.DevToolsPath.UrlString,\n          sourceLocation.lineNumber, {columnNumber: sourceLocation.columnNumber, inlineFrameIndex: 0});\n      sourceAnchor.setAttribute('jslog', `${VisualLogging.link('source-location').track({click: true})}`);\n      sourceCodeLocation.appendChild(sourceAnchor);\n    }\n    element.appendChild(sourceCodeLocation);\n  }\n\n  protected appendColumnTitle(header: HTMLElement, title: string, additionalClass: string|null = null): void {\n    const info = document.createElement('td');\n    info.classList.add('affected-resource-header');\n    if (additionalClass) {\n      info.classList.add(additionalClass);\n    }\n    info.textContent = title;\n    header.appendChild(info);\n  }\n\n  protected createIssueDetailCell(textContent: string|HTMLElement, additionalClass: string|null = null):\n      HTMLTableDataCellElement {\n    const cell = document.createElement('td');\n\n    if (typeof textContent === 'string') {\n      cell.textContent = textContent;\n    } else {\n      cell.appendChild(textContent);\n    }\n\n    if (additionalClass) {\n      cell.classList.add(additionalClass);\n    }\n    return cell;\n  }\n\n  protected appendIssueDetailCell(\n      element: HTMLElement, textContent: string|HTMLElement,\n      additionalClass: string|null = null): HTMLTableDataCellElement {\n    const cell = this.createIssueDetailCell(textContent, additionalClass);\n    element.appendChild(cell);\n    return cell;\n  }\n\n  abstract update(): void;\n}\n", "// Copyright 2021 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n/* eslint-disable @devtools/no-imperative-dom-api */\n\nimport * as Common from '../../core/common/common.js';\nimport * as Host from '../../core/host/host.js';\nimport * as i18n from '../../core/i18n/i18n.js';\nimport type * as Platform from '../../core/platform/platform.js';\nimport type * as Protocol from '../../generated/protocol.js';\nimport * as NetworkForward from '../../panels/network/forward/forward.js';\nimport * as VisualLogging from '../../ui/visual_logging/visual_logging.js';\n\nimport {AffectedItem, AffectedResourcesView} from './AffectedResourcesView.js';\n\nconst UIStrings = {\n  /**\n   * @description Noun, singular or plural. Label for the kind and number of affected resources associated with a DevTools issue. A cookie is a small piece of data that a server sends to the user's web browser. See https://developer.mozilla.org/en-US/docs/Web/HTTP/Cookies.\n   */\n  nCookies: '{n, plural, =1 {# cookie} other {# cookies}}',\n  /**\n   * @description Noun, singular. Label for a column in a table which lists cookies in the affected resources section of a DevTools issue. Each cookie has a name.\n   */\n  name: 'Name',\n  /**\n   * @description Noun, singular. Label for a column in a table which lists cookies in the affected resources section of a DevTools issue. Cookies may have a 'Domain' attribute: https://developer.mozilla.org/en-US/docs/Web/HTTP/Cookies.#define_where_cookies_are_sent\n   */\n  domain: 'Domain',\n  /**\n   * @description Noun, singular. Label for a column in a table which lists cookies in the affected resources section of a DevTools issue. Cookies may have a 'Path' attribute: https://developer.mozilla.org/en-US/docs/Web/HTTP/Cookies.#define_where_cookies_are_sent\n   */\n  path: 'Path',\n  /**\n   * @description Label for the the number of affected `Set-Cookie` lines associated with a DevTools issue. `Set-Cookie` is a specific header line in an HTTP network request and consists of a single line of text.\n   */\n  nRawCookieLines: '{n, plural, =1 {1 Raw `Set-Cookie` header} other {# Raw `Set-Cookie` headers}}',\n  /**\n   * @description Title for text button in the Issues panel. Clicking the button navigates the user to the Network Panel. `Set-Cookie` is a specific header line in an HTTP network request and consists of a single line of text.\n   */\n  filterSetCookieTitle: 'Show network requests that include this `Set-Cookie` header in the network panel',\n} as const;\nconst str_ = i18n.i18n.registerUIStrings('panels/issues/AffectedCookiesView.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\n\nexport class AffectedCookiesView extends AffectedResourcesView {\n  protected getResourceNameWithCount(count: number): Platform.UIString.LocalizedString {\n    return i18nString(UIStrings.nCookies, {n: count});\n  }\n\n  #appendAffectedCookies(cookies: Iterable<{cookie: Protocol.Audits.AffectedCookie, hasRequest: boolean}>): void {\n    const header = document.createElement('tr');\n    this.appendColumnTitle(header, i18nString(UIStrings.name));\n    this.appendColumnTitle(\n        header, i18nString(UIStrings.domain) + ' & ' + i18nString(UIStrings.path),\n        'affected-resource-cookie-info-header');\n\n    this.affectedResources.appendChild(header);\n\n    let count = 0;\n    for (const cookie of cookies) {\n      count++;\n      this.#appendAffectedCookie(cookie.cookie, cookie.hasRequest);\n    }\n    this.updateAffectedResourceCount(count);\n  }\n\n  #appendAffectedCookie(cookie: Protocol.Audits.AffectedCookie, hasAssociatedRequest: boolean): void {\n    const element = document.createElement('tr');\n    element.classList.add('affected-resource-cookie');\n    const name = document.createElement('td');\n    if (hasAssociatedRequest) {\n      const link = document.createElement('button');\n      link.classList.add('link', 'devtools-link');\n      link.textContent = cookie.name;\n      link.tabIndex = 0;\n      link.setAttribute(\n          'jslog', `${VisualLogging.link('issues.filter-network-requests-by-cookie').track({click: true})}`);\n      link.addEventListener('click', () => {\n        Host.userMetrics.issuesPanelResourceOpened(this.issue.getCategory(), AffectedItem.COOKIE);\n        void Common.Revealer.reveal(NetworkForward.UIFilter.UIRequestFilter.filters([\n          {\n            filterType: NetworkForward.UIFilter.FilterType.CookieDomain,\n            filterValue: cookie.domain,\n          },\n          {\n            filterType: NetworkForward.UIFilter.FilterType.CookieName,\n            filterValue: cookie.name,\n          },\n          {\n            filterType: NetworkForward.UIFilter.FilterType.CookiePath,\n            filterValue: cookie.path,\n          },\n        ]));\n      });\n      name.appendChild(link);\n    } else {\n      name.textContent = cookie.name;\n    }\n    element.appendChild(name);\n    this.appendIssueDetailCell(element, `${cookie.domain}${cookie.path}`, 'affected-resource-cookie-info');\n\n    this.affectedResources.appendChild(element);\n  }\n\n  update(): void {\n    this.clear();\n    this.#appendAffectedCookies(this.issue.cookiesWithRequestIndicator());\n  }\n}\n\nexport class AffectedRawCookieLinesView extends AffectedResourcesView {\n  protected override getResourceNameWithCount(count: number): Platform.UIString.LocalizedString {\n    return i18nString(UIStrings.nRawCookieLines, {n: count});\n  }\n\n  override update(): void {\n    this.clear();\n    const cookieLinesWithRequestIndicator = this.issue.getRawCookieLines();\n    let count = 0;\n\n    for (const cookie of cookieLinesWithRequestIndicator) {\n      const row = document.createElement('tr');\n      row.classList.add('affected-resource-directive');\n      if (cookie.hasRequest) {\n        const cookieLine = document.createElement('td');\n        const link = document.createElement('button');\n        link.classList.add('link', 'devtools-link');\n        link.textContent = cookie.rawCookieLine;\n        link.title = i18nString(UIStrings.filterSetCookieTitle);\n        link.tabIndex = 0;\n        link.setAttribute(\n            'jslog', `${VisualLogging.link('issues.filter-network-requests-by-raw-cookie').track({click: true})}`);\n        link.addEventListener('click', () => {\n          void Common.Revealer.reveal(NetworkForward.UIFilter.UIRequestFilter.filters([\n            {\n              filterType: NetworkForward.UIFilter.FilterType.ResponseHeaderValueSetCookie,\n              filterValue: cookie.rawCookieLine,\n            },\n          ]));\n        });\n        cookieLine.appendChild(link);\n        row.appendChild(cookieLine);\n      } else {\n        this.appendIssueDetailCell(row, cookie.rawCookieLine);\n      }\n      this.affectedResources.appendChild(row);\n      count++;\n    }\n    this.updateAffectedResourceCount(count);\n  }\n}\n", "// Copyright 2025 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n/* eslint-disable @devtools/no-imperative-dom-api */\n\nimport * as i18n from '../../core/i18n/i18n.js';\nimport type * as Platform from '../../core/platform/platform.js';\nimport type * as IssuesManager from '../../models/issues_manager/issues_manager.js';\n\nimport {AffectedElementsView} from './AffectedElementsView.js';\n\nconst UIStrings = {\n  /**\n   * @description Noun for singular or plural number of affected descendant nodes indication in issue view.\n   */\n  nDescendants: '{n, plural, =1 { descendant} other { descendants}}',\n  /**\n   * @description Label for the disallowed node link in the issue view.\n   */\n  disallowedNode: 'Disallowed descendant',\n} as const;\nconst str_ = i18n.i18n.registerUIStrings('panels/issues/AffectedDescendantsWithinSelectElementView.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\n\nexport class AffectedDescendantsWithinSelectElementView extends AffectedElementsView {\n  #runningUpdatePromise: Promise<void> = Promise.resolve();\n\n  override update(): void {\n    // Ensure that doUpdate is invoked atomically by serializing the update calls\n    // because it's not re-entrace safe.\n    this.#runningUpdatePromise = this.#runningUpdatePromise.then(this.#doUpdate.bind(this));\n  }\n\n  protected getResourceName(count: number): Platform.UIString.LocalizedString {\n    return i18nString(UIStrings.nDescendants, {n: count});\n  }\n\n  async #doUpdate(): Promise<void> {\n    this.clear();\n    await this.#appendDisallowedSelectDescendants(this.issue.getElementAccessibilityIssues());\n  }\n\n  async #appendDisallowedSelectDescendant(issue: IssuesManager.ElementAccessibilityIssue.ElementAccessibilityIssue):\n      Promise<void> {\n    const row = document.createElement('tr');\n    row.classList.add('affected-resource-select-element-descendant');\n\n    const details = issue.details();\n    const target = issue.model()?.target() || null;\n    row.appendChild(await this.createElementCell(\n        {nodeName: i18nString(UIStrings.disallowedNode), backendNodeId: details.nodeId, target}, issue.getCategory()));\n\n    this.affectedResources.appendChild(row);\n  }\n\n  async #appendDisallowedSelectDescendants(\n      issues: Iterable<IssuesManager.ElementAccessibilityIssue.ElementAccessibilityIssue>): Promise<void> {\n    let count = 0;\n    for (const issue of issues) {\n      count++;\n      await this.#appendDisallowedSelectDescendant(issue);\n    }\n    this.updateAffectedResourceCount(count);\n  }\n}\n", "// Copyright 2021 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n/* eslint-disable @devtools/no-imperative-dom-api */\n\nimport * as i18n from '../../core/i18n/i18n.js';\nimport type * as Platform from '../../core/platform/platform.js';\nimport type * as IssuesManager from '../../models/issues_manager/issues_manager.js';\n\nimport {AffectedResourcesView} from './AffectedResourcesView.js';\n\nconst UIStrings = {\n  /**\n   * @description Noun for singular or plural number of affected element resource indication in issue view.\n   */\n  nElements: '{n, plural, =1 {# element} other {# elements}}',\n} as const;\nconst str_ = i18n.i18n.registerUIStrings('panels/issues/AffectedElementsView.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\nexport class AffectedElementsView extends AffectedResourcesView {\n  async #appendAffectedElements(affectedElements: Iterable<IssuesManager.Issue.AffectedElement>): Promise<void> {\n    let count = 0;\n    for (const element of affectedElements) {\n      await this.#appendAffectedElement(element);\n      count++;\n    }\n    this.updateAffectedResourceCount(count);\n  }\n\n  protected getResourceNameWithCount(count: number): Platform.UIString.LocalizedString {\n    return i18nString(UIStrings.nElements, {n: count});\n  }\n\n  async #appendAffectedElement(element: IssuesManager.Issue.AffectedElement): Promise<void> {\n    const cellElement = await this.createElementCell(element, this.issue.getCategory());\n    const rowElement = document.createElement('tr');\n    rowElement.appendChild(cellElement);\n    this.affectedResources.appendChild(rowElement);\n  }\n\n  update(): void {\n    this.clear();\n    void this.#appendAffectedElements(this.issue.elements());\n  }\n}\n", "// Copyright 2021 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n/* eslint-disable @devtools/no-imperative-dom-api */\n\nimport * as Common from '../../core/common/common.js';\nimport * as Host from '../../core/host/host.js';\nimport * as i18n from '../../core/i18n/i18n.js';\nimport * as Platform from '../../core/platform/platform.js';\nimport * as SDK from '../../core/sdk/sdk.js';\nimport type * as Protocol from '../../generated/protocol.js';\nimport * as IssuesManager from '../../models/issues_manager/issues_manager.js';\n\nimport {AffectedItem, AffectedResourcesView} from './AffectedResourcesView.js';\nimport * as IssuesComponents from './components/components.js';\n\nconst UIStrings = {\n  /**\n   * @description Singular or plural label for number of affected CSP (content security policy,\n   * see https://developer.mozilla.org/en-US/docs/Web/HTTP/CSP) directives in issue view.\n   */\n  nDirectives: '{n, plural, =1 {# directive} other {# directives}}',\n  /**\n   * @description Indicates that a CSP error should be treated as a warning\n   */\n  reportonly: 'report-only',\n  /**\n   * @description The kind of resolution for a mixed content issue\n   */\n  blocked: 'blocked',\n  /**\n   * @description Tooltip for button linking to the Elements panel\n   */\n  clickToRevealTheViolatingDomNode: 'Click to reveal the violating DOM node in the Elements panel',\n  /**\n   * @description Header for the section listing affected directives\n   */\n  directiveC: 'Directive',\n  /**\n   * @description Label for the column in the element list in the CSS overview report\n   */\n  element: 'Element',\n  /**\n   * @description Header for the source location column\n   */\n  sourceLocation: 'Source location',\n  /**\n   * @description Text for the status of something\n   */\n  status: 'Status',\n  /**\n   * @description Text that refers to the resources of the web page\n   */\n  resourceC: 'Resource',\n} as const;\n\nconst str_ = i18n.i18n.registerUIStrings('panels/issues/AffectedDirectivesView.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\n\nexport class AffectedDirectivesView extends AffectedResourcesView {\n  #appendStatus(element: Element, isReportOnly: boolean): void {\n    const status = document.createElement('td');\n    if (isReportOnly) {\n      status.classList.add('affected-resource-report-only-status');\n      status.textContent = i18nString(UIStrings.reportonly);\n    } else {\n      status.classList.add('affected-resource-blocked-status');\n      status.textContent = i18nString(UIStrings.blocked);\n    }\n    element.appendChild(status);\n  }\n\n  protected getResourceNameWithCount(count: number): Platform.UIString.LocalizedString {\n    return i18nString(UIStrings.nDirectives, {n: count});\n  }\n\n  #appendViolatedDirective(element: Element, directive: string): void {\n    const violatedDirective = document.createElement('td');\n    violatedDirective.textContent = directive;\n    element.appendChild(violatedDirective);\n  }\n\n  #appendBlockedURL(element: Element, url: Platform.DevToolsPath.UrlString): void {\n    const info = document.createElement('td');\n    info.classList.add('affected-resource-directive-info');\n    info.textContent = url;\n    element.appendChild(info);\n  }\n\n  #appendBlockedElement(\n      element: Element, nodeId: Protocol.DOM.BackendNodeId|undefined, model: SDK.IssuesModel.IssuesModel): void {\n    const elementsPanelLinkComponent = new IssuesComponents.ElementsPanelLink.ElementsPanelLink();\n    if (nodeId) {\n      const violatingNodeId = nodeId;\n      elementsPanelLinkComponent.title = i18nString(UIStrings.clickToRevealTheViolatingDomNode);\n\n      const onElementRevealIconClick: (arg0?: Event|undefined) => void = () => {\n        const target = model.getTargetIfNotDisposed();\n        if (target) {\n          Host.userMetrics.issuesPanelResourceOpened(this.issue.getCategory(), AffectedItem.ELEMENT);\n          const deferredDOMNode = new SDK.DOMModel.DeferredDOMNode(target, violatingNodeId);\n          void Common.Revealer.reveal(deferredDOMNode);\n        }\n      };\n\n      const onElementRevealIconMouseEnter: (arg0?: Event|undefined) => void = () => {\n        const target = model.getTargetIfNotDisposed();\n        if (target) {\n          const deferredDOMNode = new SDK.DOMModel.DeferredDOMNode(target, violatingNodeId);\n          if (deferredDOMNode) {\n            deferredDOMNode.highlight();\n          }\n        }\n      };\n\n      const onElementRevealIconMouseLeave: (arg0?: Event|undefined) => void = () => {\n        SDK.OverlayModel.OverlayModel.hideDOMNodeHighlight();\n      };\n\n      elementsPanelLinkComponent\n          .data = {onElementRevealIconClick, onElementRevealIconMouseEnter, onElementRevealIconMouseLeave};\n    }\n\n    const violatingNode = document.createElement('td');\n    violatingNode.classList.add('affected-resource-csp-info-node');\n    violatingNode.appendChild(elementsPanelLinkComponent);\n    element.appendChild(violatingNode);\n  }\n\n  #appendAffectedContentSecurityPolicyDetails(\n      cspIssues: Iterable<IssuesManager.ContentSecurityPolicyIssue.ContentSecurityPolicyIssue>): void {\n    const header = document.createElement('tr');\n    if (this.issue.code() === IssuesManager.ContentSecurityPolicyIssue.inlineViolationCode) {\n      this.appendColumnTitle(header, i18nString(UIStrings.directiveC));\n      this.appendColumnTitle(header, i18nString(UIStrings.element));\n      this.appendColumnTitle(header, i18nString(UIStrings.sourceLocation));\n      this.appendColumnTitle(header, i18nString(UIStrings.status));\n    } else if (this.issue.code() === IssuesManager.ContentSecurityPolicyIssue.urlViolationCode) {\n      this.appendColumnTitle(header, i18nString(UIStrings.resourceC), 'affected-resource-directive-info-header');\n      this.appendColumnTitle(header, i18nString(UIStrings.status));\n      this.appendColumnTitle(header, i18nString(UIStrings.directiveC));\n      this.appendColumnTitle(header, i18nString(UIStrings.sourceLocation));\n    } else if (this.issue.code() === IssuesManager.ContentSecurityPolicyIssue.evalViolationCode) {\n      this.appendColumnTitle(header, i18nString(UIStrings.sourceLocation));\n      this.appendColumnTitle(header, i18nString(UIStrings.directiveC));\n      this.appendColumnTitle(header, i18nString(UIStrings.status));\n    } else if (this.issue.code() === IssuesManager.ContentSecurityPolicyIssue.trustedTypesSinkViolationCode) {\n      this.appendColumnTitle(header, i18nString(UIStrings.sourceLocation));\n      this.appendColumnTitle(header, i18nString(UIStrings.status));\n    } else if (this.issue.code() === IssuesManager.ContentSecurityPolicyIssue.trustedTypesPolicyViolationCode) {\n      this.appendColumnTitle(header, i18nString(UIStrings.sourceLocation));\n      this.appendColumnTitle(header, i18nString(UIStrings.directiveC));\n      this.appendColumnTitle(header, i18nString(UIStrings.status));\n    } else {\n      this.updateAffectedResourceCount(0);\n      return;\n    }\n    this.affectedResources.appendChild(header);\n    let count = 0;\n    for (const cspIssue of cspIssues) {\n      count++;\n      this.#appendAffectedContentSecurityPolicyDetail(cspIssue);\n    }\n    this.updateAffectedResourceCount(count);\n  }\n\n  #appendAffectedContentSecurityPolicyDetail(\n      cspIssue: IssuesManager.ContentSecurityPolicyIssue.ContentSecurityPolicyIssue): void {\n    const element = document.createElement('tr');\n    element.classList.add('affected-resource-directive');\n\n    const cspIssueDetails = cspIssue.details();\n    const location = IssuesManager.Issue.toZeroBasedLocation(cspIssueDetails.sourceCodeLocation);\n    const model = cspIssue.model();\n    const maybeTarget = cspIssue.model()?.getTargetIfNotDisposed();\n    if (this.issue.code() === IssuesManager.ContentSecurityPolicyIssue.inlineViolationCode && model) {\n      this.#appendViolatedDirective(element, cspIssueDetails.violatedDirective);\n      this.#appendBlockedElement(element, cspIssueDetails.violatingNodeId, model);\n      this.appendSourceLocation(element, location, maybeTarget);\n      this.#appendStatus(element, cspIssueDetails.isReportOnly);\n    } else if (this.issue.code() === IssuesManager.ContentSecurityPolicyIssue.urlViolationCode) {\n      const url = cspIssueDetails.blockedURL ? cspIssueDetails.blockedURL as Platform.DevToolsPath.UrlString :\n                                               Platform.DevToolsPath.EmptyUrlString;\n      this.#appendBlockedURL(element, url);\n      this.#appendStatus(element, cspIssueDetails.isReportOnly);\n      this.#appendViolatedDirective(element, cspIssueDetails.violatedDirective);\n      this.appendSourceLocation(element, location, maybeTarget);\n    } else if (this.issue.code() === IssuesManager.ContentSecurityPolicyIssue.evalViolationCode) {\n      this.appendSourceLocation(element, location, maybeTarget);\n      this.#appendViolatedDirective(element, cspIssueDetails.violatedDirective);\n      this.#appendStatus(element, cspIssueDetails.isReportOnly);\n    } else if (this.issue.code() === IssuesManager.ContentSecurityPolicyIssue.trustedTypesSinkViolationCode) {\n      this.appendSourceLocation(element, location, maybeTarget);\n      this.#appendStatus(element, cspIssueDetails.isReportOnly);\n    } else if (this.issue.code() === IssuesManager.ContentSecurityPolicyIssue.trustedTypesPolicyViolationCode) {\n      this.appendSourceLocation(element, location, maybeTarget);\n      this.#appendViolatedDirective(element, cspIssueDetails.violatedDirective);\n      this.#appendStatus(element, cspIssueDetails.isReportOnly);\n    } else {\n      return;\n    }\n\n    this.affectedResources.appendChild(element);\n  }\n\n  update(): void {\n    this.clear();\n    this.#appendAffectedContentSecurityPolicyDetails(this.issue.getCspIssues());\n  }\n}\n", "// Copyright 2021 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n/* eslint-disable @devtools/no-imperative-dom-api */\n\nimport * as i18n from '../../core/i18n/i18n.js';\nimport type * as Platform from '../../core/platform/platform.js';\nimport * as SDK from '../../core/sdk/sdk.js';\nimport type * as IssuesManager from '../../models/issues_manager/issues_manager.js';\n\nimport {AffectedElementsView} from './AffectedElementsView.js';\n\nconst UIStrings = {\n  /**\n   * @description Noun for singular or plural number of affected document nodes indication in issue view.\n   */\n  nDocuments: '{n, plural, =1 { document} other { documents}}',\n  /**\n   * @description Column title for the Document in the DOM tree column in the quirks mode issue view\n   */\n  documentInTheDOMTree: 'Document in the DOM tree',\n  /**\n   * @description Column title for the url column in the quirks mode issue view\n   */\n  url: 'URL',\n  /**\n   * @description Column title for the Mode column in the quirks mode issue view\n   */\n  mode: 'Mode',\n} as const;\nconst str_ = i18n.i18n.registerUIStrings('panels/issues/AffectedDocumentsInQuirksModeView.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\n\nexport class AffectedDocumentsInQuirksModeView extends AffectedElementsView {\n  #runningUpdatePromise: Promise<void> = Promise.resolve();\n\n  override update(): void {\n    // Ensure that doUpdate is invoked atomically by serializing the update calls\n    // because it's not re-entrace safe.\n    this.#runningUpdatePromise = this.#runningUpdatePromise.then(this.#doUpdate.bind(this));\n  }\n\n  protected getResourceName(count: number): Platform.UIString.LocalizedString {\n    return i18nString(UIStrings.nDocuments, {n: count});\n  }\n\n  async #doUpdate(): Promise<void> {\n    this.clear();\n    await this.#appendQuirksModeDocuments(this.issue.getQuirksModeIssues());\n  }\n\n  async #appendQuirksModeDocument(issue: IssuesManager.QuirksModeIssue.QuirksModeIssue): Promise<void> {\n    const row = document.createElement('tr');\n    row.classList.add('affected-resource-quirks-mode');\n\n    const details = issue.details();\n\n    const target =\n        SDK.FrameManager.FrameManager.instance().getFrame(details.frameId)?.resourceTreeModel().target() || null;\n    row.appendChild(await this.createElementCell(\n        {nodeName: 'document', backendNodeId: details.documentNodeId, target}, issue.getCategory()));\n    this.appendIssueDetailCell(row, details.isLimitedQuirksMode ? 'Limited Quirks Mode' : 'Quirks Mode');\n    this.appendIssueDetailCell(row, details.url);\n\n    this.affectedResources.appendChild(row);\n  }\n\n  async #appendQuirksModeDocuments(issues: Iterable<IssuesManager.QuirksModeIssue.QuirksModeIssue>): Promise<void> {\n    const header = document.createElement('tr');\n    this.appendColumnTitle(header, i18nString(UIStrings.documentInTheDOMTree));\n    this.appendColumnTitle(header, i18nString(UIStrings.mode));\n    this.appendColumnTitle(header, i18nString(UIStrings.url));\n\n    this.affectedResources.appendChild(header);\n    let count = 0;\n    for (const issue of issues) {\n      count++;\n      await this.#appendQuirksModeDocument(issue);\n    }\n    this.updateAffectedResourceCount(count);\n  }\n}\n", "// Copyright 2021 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n/* eslint-disable @devtools/no-imperative-dom-api */\n\nimport * as i18n from '../../core/i18n/i18n.js';\nimport * as Platform from '../../core/platform/platform.js';\nimport type * as IssuesManager from '../../models/issues_manager/issues_manager.js';\n\nimport {AffectedElementsView} from './AffectedElementsView.js';\n\nexport class AffectedElementsWithLowContrastView extends AffectedElementsView {\n  #runningUpdatePromise: Promise<void> = Promise.resolve();\n\n  override update(): void {\n    // Ensure that doUpdate is invoked atomically by serializing the update calls\n    // because it's not re-entrace safe.\n    this.#runningUpdatePromise = this.#runningUpdatePromise.then(this.#doUpdate.bind(this));\n  }\n\n  async #doUpdate(): Promise<void> {\n    this.clear();\n    await this.#appendLowContrastElements(this.issue.getLowContrastIssues());\n  }\n\n  async #appendLowContrastElement(issue: IssuesManager.LowTextContrastIssue.LowTextContrastIssue): Promise<void> {\n    const row = document.createElement('tr');\n    row.classList.add('affected-resource-low-contrast');\n\n    const details = issue.details();\n    const target = issue.model()?.target() || null;\n    row.appendChild(await this.createElementCell(\n        {nodeName: details.violatingNodeSelector, backendNodeId: details.violatingNodeId, target},\n        issue.getCategory()));\n    this.appendIssueDetailCell(row, String(Platform.NumberUtilities.floor(details.contrastRatio, 2)));\n    this.appendIssueDetailCell(row, String(details.thresholdAA));\n    this.appendIssueDetailCell(row, String(details.thresholdAAA));\n    this.appendIssueDetailCell(row, details.fontSize);\n    this.appendIssueDetailCell(row, details.fontWeight);\n\n    this.affectedResources.appendChild(row);\n  }\n\n  async #appendLowContrastElements(issues: Iterable<IssuesManager.LowTextContrastIssue.LowTextContrastIssue>):\n      Promise<void> {\n    const header = document.createElement('tr');\n    this.appendColumnTitle(header, i18nString(UIStrings.element));\n    this.appendColumnTitle(header, i18nString(UIStrings.contrastRatio));\n    this.appendColumnTitle(header, i18nString(UIStrings.minimumAA));\n    this.appendColumnTitle(header, i18nString(UIStrings.minimumAAA));\n    this.appendColumnTitle(header, i18nString(UIStrings.textSize));\n    this.appendColumnTitle(header, i18nString(UIStrings.textWeight));\n\n    this.affectedResources.appendChild(header);\n    let count = 0;\n    for (const lowContrastIssue of issues) {\n      count++;\n      await this.#appendLowContrastElement(lowContrastIssue);\n    }\n    this.updateAffectedResourceCount(count);\n  }\n}\n\nconst UIStrings = {\n  /**\n   * @description Column title for the element column in the low contrast issue view\n   */\n  element: 'Element',\n  /**\n   * @description Column title for the contrast ratio column in the low contrast issue view\n   */\n  contrastRatio: 'Contrast ratio',\n  /**\n   * @description Column title for the minimum AA contrast ratio column in the low contrast issue view\n   */\n  minimumAA: 'Minimum AA ratio',\n  /**\n   * @description Column title for the minimum AAA contrast ratio column in the low contrast issue view\n   */\n  minimumAAA: 'Minimum AAA ratio',\n  /**\n   * @description Column title for the text size column in the low contrast issue view\n   */\n  textSize: 'Text size',\n  /**\n   * @description Column title for the text weight column in the low contrast issue view\n   */\n  textWeight: 'Text weight',\n} as const;\nconst str_ = i18n.i18n.registerUIStrings('panels/issues/AffectedElementsWithLowContrastView.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\n", "// Copyright 2021 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n/* eslint-disable @devtools/no-imperative-dom-api */\n\nimport * as i18n from '../../core/i18n/i18n.js';\nimport type * as Platform from '../../core/platform/platform.js';\nimport * as Protocol from '../../generated/protocol.js';\nimport type * as IssuesManager from '../../models/issues_manager/issues_manager.js';\n\nimport {AffectedResourcesView} from './AffectedResourcesView.js';\n\nconst UIStrings = {\n  /**\n   * @description Label for number of affected resources indication in issue view\n   */\n  nResources: '{n, plural, =1 {# resource} other {# resources}}',\n  /**\n   * @description Title for a column in an Heavy Ads issue view\n   */\n  limitExceeded: 'Limit exceeded',\n  /**\n   * @description Title for a column in an Heavy Ads issue view\n   */\n  resolutionStatus: 'Resolution Status',\n  /**\n   * @description Title for a column in an Heavy Ads issue view\n   */\n  frameUrl: 'Frame URL',\n  /**\n   * @description When there is a Heavy Ad, the browser can choose to deal with it in different ways.\n   * This string indicates that the ad was bad enough that it was removed.\n   */\n  removed: 'Removed',\n  /**\n   * @description When there is a Heavy Ad, the browser can choose to deal with it in different ways.\n   * This string indicates that the ad was only warned, and not removed.\n   */\n  warned: 'Warned',\n  /**\n   * @description Reason for a Heavy Ad being flagged in issue view. The Ad has been flagged as a\n   *Heavy Ad because it exceeded the set limit for peak CPU usage, e.g. it blocked the main thread\n   *for more than 15 seconds in any 30-second window.\n   */\n  cpuPeakLimit: 'CPU peak limit',\n  /**\n   * @description Reason for a Heavy Ad being flagged in issue view\n   */\n  cpuTotalLimit: 'CPU total limit',\n  /**\n   * @description Reason for a Heavy Ad being flagged in issue view\n   */\n  networkLimit: 'Network limit',\n} as const;\nconst str_ = i18n.i18n.registerUIStrings('panels/issues/AffectedHeavyAdView.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\n\nexport class AffectedHeavyAdView extends AffectedResourcesView {\n  #appendAffectedHeavyAds(heavyAds: Iterable<IssuesManager.HeavyAdIssue.HeavyAdIssue>): void {\n    const header = document.createElement('tr');\n    this.appendColumnTitle(header, i18nString(UIStrings.limitExceeded));\n    this.appendColumnTitle(header, i18nString(UIStrings.resolutionStatus));\n    this.appendColumnTitle(header, i18nString(UIStrings.frameUrl));\n\n    this.affectedResources.appendChild(header);\n\n    let count = 0;\n    for (const heavyAd of heavyAds) {\n      this.#appendAffectedHeavyAd(heavyAd.details());\n      count++;\n    }\n    this.updateAffectedResourceCount(count);\n  }\n\n  protected getResourceNameWithCount(count: number): Platform.UIString.LocalizedString {\n    return i18nString(UIStrings.nResources, {n: count});\n  }\n\n  #statusToString(status: Protocol.Audits.HeavyAdResolutionStatus): string {\n    switch (status) {\n      case Protocol.Audits.HeavyAdResolutionStatus.HeavyAdBlocked:\n        return i18nString(UIStrings.removed);\n      case Protocol.Audits.HeavyAdResolutionStatus.HeavyAdWarning:\n        return i18nString(UIStrings.warned);\n    }\n    return '';\n  }\n\n  #limitToString(status: Protocol.Audits.HeavyAdReason): string {\n    switch (status) {\n      case Protocol.Audits.HeavyAdReason.CpuPeakLimit:\n        return i18nString(UIStrings.cpuPeakLimit);\n      case Protocol.Audits.HeavyAdReason.CpuTotalLimit:\n        return i18nString(UIStrings.cpuTotalLimit);\n      case Protocol.Audits.HeavyAdReason.NetworkTotalLimit:\n        return i18nString(UIStrings.networkLimit);\n    }\n    return '';\n  }\n\n  #appendAffectedHeavyAd(heavyAd: Protocol.Audits.HeavyAdIssueDetails): void {\n    const element = document.createElement('tr');\n    element.classList.add('affected-resource-heavy-ad');\n\n    const reason = document.createElement('td');\n    reason.classList.add('affected-resource-heavy-ad-info');\n    reason.textContent = this.#limitToString(heavyAd.reason);\n    element.appendChild(reason);\n\n    const status = document.createElement('td');\n    status.classList.add('affected-resource-heavy-ad-info');\n    status.textContent = this.#statusToString(heavyAd.resolution);\n    element.appendChild(status);\n\n    const frameId = heavyAd.frame.frameId;\n    const frameUrl = this.createFrameCell(frameId, this.issue.getCategory());\n    element.appendChild(frameUrl);\n\n    this.affectedResources.appendChild(element);\n  }\n\n  update(): void {\n    this.clear();\n    this.#appendAffectedHeavyAds(this.issue.getHeavyAdIssues());\n  }\n}\n", "// Copyright 2023 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n/* eslint-disable @devtools/no-imperative-dom-api */\n\nimport * as i18n from '../../core/i18n/i18n.js';\nimport type * as Platform from '../../core/platform/platform.js';\nimport * as UI from '../../ui/legacy/legacy.js';\n\nimport {AffectedResourcesView} from './AffectedResourcesView.js';\n\nconst UIStrings = {\n  /**\n   * @description Label for the the number of affected `Allowed Sites` associated with a\n   *DevTools issue. In this context, `Allowed` refers to permission to access cookies\n   *via the third-party cookie deprecation global metadata, and `Site` is equivalent\n   *to eTLD+1.\n   *See https://developer.mozilla.org/en-US/docs/Glossary/eTLD.\n   */\n  nAllowedSites: '{n, plural, =1 {1 website allowed to access cookies} other {# websites allowed to access cookies}}',\n} as const;\nconst str_ = i18n.i18n.registerUIStrings('panels/issues/AffectedMetadataAllowedSitesView.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\n\nexport class AffectedMetadataAllowedSitesView extends AffectedResourcesView {\n  protected override getResourceNameWithCount(count: number): Platform.UIString.LocalizedString {\n    return i18nString(UIStrings.nAllowedSites, {n: count});\n  }\n\n  override update(): void {\n    this.clear();\n    const issues = this.issue.getCookieDeprecationMetadataIssues();\n    let count = 0;\n\n    for (const issueData of issues) {\n      const row = document.createElement('tr');\n      row.classList.add('affected-resource-directive');\n\n      const textContentElement = document.createElement('div');\n      const textElement = document.createElement('span');\n      textElement.textContent = issueData.details().allowedSites.join(', ');\n      textContentElement.appendChild(textElement);\n\n      if (!issueData.details().isOptOutTopLevel && issueData.details().optOutPercentage > 0) {\n        const optOutTextElement = document.createElement('span');\n        optOutTextElement.textContent = ' (opt-out: ' + issueData.details().optOutPercentage + '% - ';\n        textContentElement.appendChild(optOutTextElement);\n\n        const linkElement = UI.XLink.XLink.create(\n            'https://developers.google.com/privacy-sandbox/blog/grace-period-opt-out', 'learn more');\n        textContentElement.appendChild(linkElement);\n\n        const endTextElement = document.createElement('span');\n        endTextElement.textContent = ')';\n        textContentElement.appendChild(endTextElement);\n      }\n\n      this.appendIssueDetailCell(row, textContentElement);\n      this.affectedResources.appendChild(row);\n      count++;\n    }\n    this.updateAffectedResourceCount(count);\n  }\n}\n", "// Copyright 2025 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n/* eslint-disable @devtools/no-imperative-dom-api */\n\nimport * as i18n from '../../core/i18n/i18n.js';\nimport type * as Platform from '../../core/platform/platform.js';\nimport * as Protocol from '../../generated/protocol.js';\n\nimport {AffectedResourcesView} from './AffectedResourcesView.js';\n\nconst UIStrings = {\n  /**\n   * @description Description for Partitioning BlobURL issue when PartitioningBlobURLInfo is BlockedCrossPartitionFetching.\n   * @example {blob:https://web-platform.test:8444/example} url\n   */\n  blockedCrossPartitionFetching:\n      'Access to the Blob URL {url} was blocked because it was performed from a cross-partition context.',\n  /**\n   * @description Description for Partitioning BlobURL issue when PartitioningBlobURLInfo is EnforceNoopenerForNavigation.\n   * @example {blob:https://web-platform.test:8444/example} url\n   */\n  enforceNoopenerForNavigation:\n      'Blob URL {url} top-level navigation had \\'noopener\\' set because the Blob URL origin was cross-site with the top-level site of the context that initiated the navigation.',\n  /**\n   * @description Blob URL issue count\n   * @example {1} count\n   */\n  blobURLCount: 'Blob URL issues count: {count}',\n  /**\n   * @description Message shown when no Blob URL is available for a Partitioning Blob URL issue.\n   */\n  noBlobURLAvailable: 'No Blob URL available for this issue.',\n} as const;\n\nconst str_ = i18n.i18n.registerUIStrings('panels/issues/AffectedPartitioningBlobURLView.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\n\nexport class AffectedPartitioningBlobURLView extends AffectedResourcesView {\n  protected override getResourceNameWithCount(count: number): string {\n    return i18nString(UIStrings.blobURLCount, {count});\n  }\n\n  override update(): void {\n    this.clear();\n    let count = 0;\n    const partitioningBlobURLIssues = this.issue.getPartitioningBlobURLIssues();\n    for (const issue of partitioningBlobURLIssues) {\n      const blobURL = issue.details().url;\n      const partitioningBlobURLInfo = issue.details().partitioningBlobURLInfo;\n\n      if (blobURL) {\n        let description: Platform.UIString.LocalizedString;\n\n        switch (partitioningBlobURLInfo) {\n          case Protocol.Audits.PartitioningBlobURLInfo.BlockedCrossPartitionFetching:\n            description = i18nString(UIStrings.blockedCrossPartitionFetching, {url: blobURL});\n            break;\n          case Protocol.Audits.PartitioningBlobURLInfo.EnforceNoopenerForNavigation:\n            description = i18nString(UIStrings.enforceNoopenerForNavigation, {url: blobURL});\n            break;\n        }\n        const descriptionElement = document.createElement('div');\n        descriptionElement.textContent = description;\n        this.affectedResources.appendChild(descriptionElement);\n        count++;\n      } else {\n        const noURLMessage = document.createElement('div');\n        noURLMessage.textContent = i18nString(UIStrings.noBlobURLAvailable);\n        this.affectedResources.appendChild(noURLMessage);\n      }\n    }\n    this.updateAffectedResourceCount(count);\n  }\n}\n", "// Copyright 2025 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as i18n from '../../core/i18n/i18n.js';\nimport type * as Platform from '../../core/platform/platform.js';\nimport type * as IssuesManager from '../../models/issues_manager/issues_manager.js';\nimport * as UI from '../../ui/legacy/legacy.js';\n\nimport {AffectedElementsView} from './AffectedElementsView.js';\n\nconst UIStrings = {\n  /**\n   * @description Noun for singular or plural number of affected element resource indication in issue view.\n   */\n  nElements: '{n, plural, =1 {# element} other {# elements}}',\n} as const;\nconst str_ = i18n.i18n.registerUIStrings('panels/issues/AffectedPermissionElementsView.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\n\nexport class AffectedPermissionElementsView extends AffectedElementsView {\n  override update(): void {\n    this.clear();\n    void this.#appendAffectedElements(this.issue.getPermissionElementIssues());\n  }\n\n  protected override getResourceNameWithCount(count: number): Platform.UIString.LocalizedString {\n    return i18nString(UIStrings.nElements, {n: count});\n  }\n\n  async #appendAffectedElements(issues: Iterable<IssuesManager.PermissionElementIssue.PermissionElementIssue>):\n      Promise<void> {\n    let count = 0;\n    for (const issue of issues) {\n      for (const element of issue.elements()) {\n        const rowElement = UI.Fragment.html`\n    <tr>\n      ${await this.createElementCell(element, this.issue.getCategory())}\n    </tr>`;\n        this.affectedResources.appendChild(rowElement);\n        count++;\n      }\n    }\n    this.updateAffectedResourceCount(count);\n  }\n}\n", "// Copyright 2020 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n/* eslint-disable @devtools/no-imperative-dom-api */\n\nimport * as i18n from '../../core/i18n/i18n.js';\nimport type * as Platform from '../../core/platform/platform.js';\nimport * as Protocol from '../../generated/protocol.js';\nimport * as IssuesManager from '../../models/issues_manager/issues_manager.js';\n\nimport {AffectedResourcesView} from './AffectedResourcesView.js';\n\nconst UIStrings = {\n  /**\n   * @description Label for number of affected resources indication in issue view\n   */\n  nViolations: '{n, plural, =1 {# violation} other {# violations}}',\n  /**\n   * @description Value for the status column in SharedArrayBuffer issues\n   */\n  warning: 'warning',\n  /**\n   * @description The kind of resolution for a mixed content issue\n   */\n  blocked: 'blocked',\n  /**\n   * @description Value for the 'Trigger' column in the SAB affected resources list\n   */\n  instantiation: 'Instantiation',\n  /**\n   * @description Tooltip for the 'Trigger' column in the SAB affected resources list\n   */\n  aSharedarraybufferWas: 'A `SharedArrayBuffer` was instantiated in a context that is not cross-origin isolated',\n  /**\n   * @description Value for the 'Trigger' column in the SAB affected resources list\n   */\n  transfer: 'Transfer',\n  /**\n   * @description Tooltip for the 'Trigger' column in the SAB affected resources list\n   */\n  sharedarraybufferWasTransferedTo: '`SharedArrayBuffer` was transfered to a context that is not cross-origin isolated',\n  /**\n   * @description Header for the source location column\n   */\n  sourceLocation: 'Source Location',\n  /**\n   * @description Title for the 'Trigger' column in the SAB affected resources list\n   */\n  trigger: 'Trigger',\n  /**\n   * @description Title for the status column in the SAB affected resources list\n   */\n  status: 'Status',\n} as const;\nconst str_ = i18n.i18n.registerUIStrings('panels/issues/AffectedSharedArrayBufferIssueDetailsView.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\nexport class AffectedSharedArrayBufferIssueDetailsView extends AffectedResourcesView {\n  protected getResourceNameWithCount(count: number): Platform.UIString.LocalizedString {\n    return i18nString(UIStrings.nViolations, {n: count});\n  }\n\n  #appendStatus(element: HTMLElement, isWarning: boolean): void {\n    const status = document.createElement('td');\n    if (isWarning) {\n      status.classList.add('affected-resource-report-only-status');\n      status.textContent = i18nString(UIStrings.warning);\n    } else {\n      status.classList.add('affected-resource-blocked-status');\n      status.textContent = i18nString(UIStrings.blocked);\n    }\n    element.appendChild(status);\n  }\n\n  #appendType(element: HTMLElement, type: Protocol.Audits.SharedArrayBufferIssueType): void {\n    const status = document.createElement('td');\n    switch (type) {\n      case Protocol.Audits.SharedArrayBufferIssueType.CreationIssue:\n        status.textContent = i18nString(UIStrings.instantiation);\n        status.title = i18nString(UIStrings.aSharedarraybufferWas);\n        break;\n      case Protocol.Audits.SharedArrayBufferIssueType.TransferIssue:\n        status.textContent = i18nString(UIStrings.transfer);\n        status.title = i18nString(UIStrings.sharedarraybufferWasTransferedTo);\n        break;\n    }\n    element.appendChild(status);\n  }\n\n  #appendDetails(sabIssues: Iterable<IssuesManager.SharedArrayBufferIssue.SharedArrayBufferIssue>): void {\n    const header = document.createElement('tr');\n    this.appendColumnTitle(header, i18nString(UIStrings.sourceLocation));\n    this.appendColumnTitle(header, i18nString(UIStrings.trigger));\n    this.appendColumnTitle(header, i18nString(UIStrings.status));\n\n    this.affectedResources.appendChild(header);\n    let count = 0;\n    for (const sabIssue of sabIssues) {\n      count++;\n      this.#appendDetail(sabIssue);\n    }\n    this.updateAffectedResourceCount(count);\n  }\n\n  #appendDetail(sabIssue: IssuesManager.SharedArrayBufferIssue.SharedArrayBufferIssue): void {\n    const element = document.createElement('tr');\n    element.classList.add('affected-resource-directive');\n\n    const sabIssueDetails = sabIssue.details();\n    const location = IssuesManager.Issue.toZeroBasedLocation(sabIssueDetails.sourceCodeLocation);\n    this.appendSourceLocation(element, location, sabIssue.model()?.getTargetIfNotDisposed());\n    this.#appendType(element, sabIssueDetails.type);\n    this.#appendStatus(element, sabIssueDetails.isWarning);\n\n    this.affectedResources.appendChild(element);\n  }\n\n  update(): void {\n    this.clear();\n    this.#appendDetails(this.issue.getSharedArrayBufferIssues());\n  }\n}\n", "// Copyright 2021 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n/* eslint-disable @devtools/no-imperative-dom-api */\n\nimport * as i18n from '../../core/i18n/i18n.js';\nimport type * as Platform from '../../core/platform/platform.js';\nimport type * as Protocol from '../../generated/protocol.js';\nimport * as Components from '../../ui/legacy/components/utils/utils.js';\nimport * as VisualLogging from '../../ui/visual_logging/visual_logging.js';\n\nimport {AffectedResourcesView} from './AffectedResourcesView.js';\n\nconst UIStrings = {\n  /**\n   * @description Singular or Plural label for number of affected sources (consisting of (source) file name + line number) in issue view\n   */\n  nSources: '{n, plural, =1 {# source} other {# sources}}',\n} as const;\n\nconst str_ = i18n.i18n.registerUIStrings('panels/issues/AffectedSourcesView.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\n\nexport class AffectedSourcesView extends AffectedResourcesView {\n  #appendAffectedSources(affectedSources: Iterable<Protocol.Audits.SourceCodeLocation>): void {\n    let count = 0;\n    for (const source of affectedSources) {\n      this.#appendAffectedSource(source);\n      count++;\n    }\n    this.updateAffectedResourceCount(count);\n  }\n\n  protected getResourceNameWithCount(count: number): Platform.UIString.LocalizedString {\n    return i18nString(UIStrings.nSources, {n: count});\n  }\n\n  #appendAffectedSource({url, lineNumber, columnNumber}: Protocol.Audits.SourceCodeLocation): void {\n    const cellElement = document.createElement('td');\n    // TODO(chromium:1072331): Check feasibility of plumping through scriptId for `linkifyScriptLocation`\n    //                         to support source maps and formatted scripts.\n    const linkifierURLOptions = {columnNumber, lineNumber, tabStop: true, showColumnNumber: false, inlineFrameIndex: 0};\n    // An element created with linkifyURL can subscribe to the events\n    // 'click' neither 'keydown' if that key is the 'Enter' key.\n    // Also, this element has a context menu, so we should be able to\n    // track when the user use the context menu too.\n    // TODO(crbug.com/1108503): Add some mechanism to be able to add telemetry to this element.\n    const anchorElement =\n        Components.Linkifier.Linkifier.linkifyURL(url as Platform.DevToolsPath.UrlString, linkifierURLOptions);\n    anchorElement.setAttribute('jslog', `${VisualLogging.link('source-location').track({click: true})}`);\n    cellElement.appendChild(anchorElement);\n    const rowElement = document.createElement('tr');\n    rowElement.classList.add('affected-resource-source');\n    rowElement.appendChild(cellElement);\n    this.affectedResources.appendChild(rowElement);\n  }\n\n  update(): void {\n    this.clear();\n    this.#appendAffectedSources(this.issue.sources());\n  }\n}\n", "// Copyright 2023 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n/* eslint-disable @devtools/no-imperative-dom-api */\n\nimport * as i18n from '../../core/i18n/i18n.js';\nimport type * as Platform from '../../core/platform/platform.js';\n\nimport {AffectedResourcesView} from './AffectedResourcesView.js';\n\nconst UIStrings = {\n  /**\n   * @description Label for the the number of affected `Potentially-tracking Sites` associated with a\n   *DevTools issue. In this context, `tracking` refers to bounce tracking and `Site` is equivalent\n   *to eTLD+1.\n   *See https://github.com/privacycg/nav-tracking-mitigations/blob/main/bounce-tracking-explainer.md\n   *and https://developer.mozilla.org/en-US/docs/Glossary/eTLD.\n   */\n  nTrackingSites: '{n, plural, =1 {1 potentially tracking website} other {# potentially tracking websites}}',\n} as const;\nconst str_ = i18n.i18n.registerUIStrings('panels/issues/AffectedTrackingSitesView.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\n\nexport class AffectedTrackingSitesView extends AffectedResourcesView {\n  protected override getResourceNameWithCount(count: number): Platform.UIString.LocalizedString {\n    return i18nString(UIStrings.nTrackingSites, {n: count});\n  }\n\n  override update(): void {\n    this.clear();\n    const trackingSites = this.issue.getBounceTrackingSites();\n    let count = 0;\n\n    for (const site of trackingSites) {\n      const row = document.createElement('tr');\n      row.classList.add('affected-resource-directive');\n\n      this.appendIssueDetailCell(row, site);\n      this.affectedResources.appendChild(row);\n      count++;\n    }\n    this.updateAffectedResourceCount(count);\n  }\n}\n", "// Copyright 2021 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n/* eslint-disable @devtools/no-imperative-dom-api */\n\nimport * as Host from '../../core/host/host.js';\nimport * as i18n from '../../core/i18n/i18n.js';\nimport type * as Protocol from '../../generated/protocol.js';\nimport * as IssuesManager from '../../models/issues_manager/issues_manager.js';\n\nimport {AffectedItem, AffectedResourcesView} from './AffectedResourcesView.js';\n\nconst UIStrings = {\n  /**\n   * @description Label for number of rows in the issue details table.\n   */\n  nViolations: '{n, plural, =1 {# violation} other {# violations}}',\n  /**\n   * @description Noun, label for the column showing the associated HTML element in the issue details table.\n   */\n  element: 'Element',\n  /**\n   * @description Noun, label for the column showing the invalid header value in the issue details table.\n   */\n  invalidHeaderValue: 'Invalid Header Value',\n  /**\n   * @description Noun, label for the column showing the associated network request in the issue details table.\n   */\n  request: 'Request',\n  /**\n   * @description Label for the column showing the invalid URL used in an HTML anchor element (\"a link\").\n   * A origin is (roughly said) the front part of a URL.\n   */\n  untrustworthyOrigin: 'Untrustworthy origin',\n} as const;\nconst str_ = i18n.i18n.registerUIStrings('panels/issues/AttributionReportingIssueDetailsView.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\n\nexport class AttributionReportingIssueDetailsView extends AffectedResourcesView {\n  protected override getResourceNameWithCount(count: number): string {\n    return i18nString(UIStrings.nViolations, {n: count});\n  }\n\n  override update(): void {\n    this.clear();\n    const issues = this.issue.getAttributionReportingIssues();\n    const issue = issues.values().next();\n    if (issue.done) {\n      this.updateAffectedResourceCount(0);\n    } else {\n      this.#appendDetails(issue.value.code(), issues);\n    }\n  }\n\n  #appendDetails(\n      issueCode: IssuesManager.AttributionReportingIssue.IssueCode,\n      issues: Iterable<IssuesManager.AttributionReportingIssue.AttributionReportingIssue>): void {\n    const header = document.createElement('tr');\n    switch (issueCode) {\n      case IssuesManager.AttributionReportingIssue.IssueCode.INVALID_REGISTER_SOURCE_HEADER:\n      case IssuesManager.AttributionReportingIssue.IssueCode.INVALID_REGISTER_TRIGGER_HEADER:\n      case IssuesManager.AttributionReportingIssue.IssueCode.INVALID_REGISTER_OS_SOURCE_HEADER:\n      case IssuesManager.AttributionReportingIssue.IssueCode.INVALID_REGISTER_OS_TRIGGER_HEADER:\n      case IssuesManager.AttributionReportingIssue.IssueCode.OS_SOURCE_IGNORED:\n      case IssuesManager.AttributionReportingIssue.IssueCode.OS_TRIGGER_IGNORED:\n      case IssuesManager.AttributionReportingIssue.IssueCode.SOURCE_IGNORED:\n      case IssuesManager.AttributionReportingIssue.IssueCode.TRIGGER_IGNORED:\n      case IssuesManager.AttributionReportingIssue.IssueCode.INVALID_INFO_HEADER:\n      case IssuesManager.AttributionReportingIssue.IssueCode.NAVIGATION_REGISTRATION_UNIQUE_SCOPE_ALREADY_SET:\n        this.appendColumnTitle(header, i18nString(UIStrings.request));\n        this.appendColumnTitle(header, i18nString(UIStrings.invalidHeaderValue));\n        break;\n      case IssuesManager.AttributionReportingIssue.IssueCode.INSECURE_CONTEXT:\n      case IssuesManager.AttributionReportingIssue.IssueCode.UNTRUSTWORTHY_REPORTING_ORIGIN:\n        this.appendColumnTitle(header, i18nString(UIStrings.element));\n        this.appendColumnTitle(header, i18nString(UIStrings.request));\n        this.appendColumnTitle(header, i18nString(UIStrings.untrustworthyOrigin));\n        break;\n      case IssuesManager.AttributionReportingIssue.IssueCode.PERMISSION_POLICY_DISABLED:\n        this.appendColumnTitle(header, i18nString(UIStrings.element));\n        this.appendColumnTitle(header, i18nString(UIStrings.request));\n        break;\n      case IssuesManager.AttributionReportingIssue.IssueCode.SOURCE_AND_TRIGGER_HEADERS:\n      case IssuesManager.AttributionReportingIssue.IssueCode.WEB_AND_OS_HEADERS:\n      case IssuesManager.AttributionReportingIssue.IssueCode.NO_WEB_OR_OS_SUPPORT:\n      case IssuesManager.AttributionReportingIssue.IssueCode.NO_REGISTER_SOURCE_HEADER:\n      case IssuesManager.AttributionReportingIssue.IssueCode.NO_REGISTER_TRIGGER_HEADER:\n      case IssuesManager.AttributionReportingIssue.IssueCode.NO_REGISTER_OS_SOURCE_HEADER:\n      case IssuesManager.AttributionReportingIssue.IssueCode.NO_REGISTER_OS_TRIGGER_HEADER:\n        this.appendColumnTitle(header, i18nString(UIStrings.request));\n        break;\n      case IssuesManager.AttributionReportingIssue.IssueCode.NAVIGATION_REGISTRATION_WITHOUT_TRANSIENT_USER_ACTIVATION:\n        this.appendColumnTitle(header, i18nString(UIStrings.element));\n        break;\n    }\n\n    this.affectedResources.appendChild(header);\n    let count = 0;\n    for (const issue of issues) {\n      count++;\n      void this.#appendDetail(issueCode, issue);\n    }\n    this.updateAffectedResourceCount(count);\n  }\n\n  async #appendDetail(\n      issueCode: IssuesManager.AttributionReportingIssue.IssueCode,\n      issue: IssuesManager.AttributionReportingIssue.AttributionReportingIssue): Promise<void> {\n    const element = document.createElement('tr');\n    element.classList.add('affected-resource-directive');\n\n    const details = issue.details();\n\n    switch (issueCode) {\n      case IssuesManager.AttributionReportingIssue.IssueCode.INVALID_REGISTER_SOURCE_HEADER:\n      case IssuesManager.AttributionReportingIssue.IssueCode.INVALID_REGISTER_TRIGGER_HEADER:\n      case IssuesManager.AttributionReportingIssue.IssueCode.INVALID_REGISTER_OS_SOURCE_HEADER:\n      case IssuesManager.AttributionReportingIssue.IssueCode.INVALID_REGISTER_OS_TRIGGER_HEADER:\n      case IssuesManager.AttributionReportingIssue.IssueCode.OS_SOURCE_IGNORED:\n      case IssuesManager.AttributionReportingIssue.IssueCode.OS_TRIGGER_IGNORED:\n      case IssuesManager.AttributionReportingIssue.IssueCode.SOURCE_IGNORED:\n      case IssuesManager.AttributionReportingIssue.IssueCode.TRIGGER_IGNORED:\n      case IssuesManager.AttributionReportingIssue.IssueCode.INVALID_INFO_HEADER:\n      case IssuesManager.AttributionReportingIssue.IssueCode.NAVIGATION_REGISTRATION_UNIQUE_SCOPE_ALREADY_SET:\n        this.#appendRequestOrEmptyCell(element, details.request);\n        this.appendIssueDetailCell(element, details.invalidParameter || '');\n        break;\n      case IssuesManager.AttributionReportingIssue.IssueCode.INSECURE_CONTEXT:\n      case IssuesManager.AttributionReportingIssue.IssueCode.UNTRUSTWORTHY_REPORTING_ORIGIN:\n        await this.#appendElementOrEmptyCell(element, issue);\n        this.#appendRequestOrEmptyCell(element, details.request);\n        this.appendIssueDetailCell(element, details.invalidParameter || '');\n        break;\n      case IssuesManager.AttributionReportingIssue.IssueCode.PERMISSION_POLICY_DISABLED:\n        await this.#appendElementOrEmptyCell(element, issue);\n        this.#appendRequestOrEmptyCell(element, details.request);\n        break;\n      case IssuesManager.AttributionReportingIssue.IssueCode.SOURCE_AND_TRIGGER_HEADERS:\n      case IssuesManager.AttributionReportingIssue.IssueCode.WEB_AND_OS_HEADERS:\n      case IssuesManager.AttributionReportingIssue.IssueCode.NO_WEB_OR_OS_SUPPORT:\n      case IssuesManager.AttributionReportingIssue.IssueCode.NO_REGISTER_SOURCE_HEADER:\n      case IssuesManager.AttributionReportingIssue.IssueCode.NO_REGISTER_TRIGGER_HEADER:\n      case IssuesManager.AttributionReportingIssue.IssueCode.NO_REGISTER_OS_SOURCE_HEADER:\n      case IssuesManager.AttributionReportingIssue.IssueCode.NO_REGISTER_OS_TRIGGER_HEADER:\n        this.#appendRequestOrEmptyCell(element, details.request);\n        break;\n      case IssuesManager.AttributionReportingIssue.IssueCode.NAVIGATION_REGISTRATION_WITHOUT_TRANSIENT_USER_ACTIVATION:\n        await this.#appendElementOrEmptyCell(element, issue);\n        break;\n    }\n\n    this.affectedResources.appendChild(element);\n  }\n\n  async #appendElementOrEmptyCell(\n      parent: HTMLElement, issue: IssuesManager.AttributionReportingIssue.AttributionReportingIssue): Promise<void> {\n    const details = issue.details();\n    if (details.violatingNodeId !== undefined) {\n      const target = issue.model()?.target() || null;\n      parent.appendChild(await this.createElementCell(\n          {backendNodeId: details.violatingNodeId, target, nodeName: 'Attribution source element'},\n          issue.getCategory()));\n    } else {\n      this.appendIssueDetailCell(parent, '');\n    }\n  }\n\n  #appendRequestOrEmptyCell(parent: HTMLElement, request?: Protocol.Audits.AffectedRequest): void {\n    if (!request) {\n      this.appendIssueDetailCell(parent, '');\n      return;\n    }\n\n    const opts = {\n      additionalOnClickAction(): void {\n        Host.userMetrics.issuesPanelResourceOpened(\n            IssuesManager.Issue.IssueCategory.ATTRIBUTION_REPORTING, AffectedItem.REQUEST);\n      },\n    };\n    parent.appendChild(this.createRequestCell(request, opts));\n  }\n}\n", "// Copyright 2020 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n/* eslint-disable @devtools/no-imperative-dom-api */\n\nimport * as Host from '../../core/host/host.js';\nimport * as i18n from '../../core/i18n/i18n.js';\nimport * as Platform from '../../core/platform/platform.js';\nimport * as Protocol from '../../generated/protocol.js';\nimport * as IssuesManager from '../../models/issues_manager/issues_manager.js';\nimport * as NetworkForward from '../../panels/network/forward/forward.js';\n\nimport {AffectedItem, AffectedResourcesView} from './AffectedResourcesView.js';\nimport type {IssueView} from './IssueView.js';\n\nconst UIStrings = {\n  /**\n   * @description Label for number of affected resources indication in issue view\n   */\n  nRequests: '{n, plural, =1 {# request} other {# requests}}',\n  /**\n   * @description Value for the status column in SharedArrayBuffer issues\n   */\n  warning: 'warning',\n  /**\n   * @description The kind of resolution for a mixed content issue\n   */\n  blocked: 'blocked',\n  /**\n   * @description Text for the status column in the item list in the CORS issue details view\n   */\n  status: 'Status',\n  /**\n   * @description Text for the column showing the associated network request in the item list in the CORS issue details view\n   */\n  request: 'Request',\n  /**\n   * @description Text for the column showing the resource's address in the item list in the CORS issue details view\n   */\n  resourceAddressSpace: 'Resource Address',\n  /**\n   * @description Text for the column showing the address of the resource load initiator in the item list in the CORS issue details view\n   */\n  initiatorAddressSpace: 'Initiator Address',\n  /**\n   * @description Text for the status of the initiator context\n   */\n  secure: 'secure',\n  /**\n   * @description Text for the status of the initiator context\n   */\n  insecure: 'insecure',\n  /**\n   * @description Title for a column showing the status of the initiator context. The initiator context is either secure or insecure depending on whether it was loaded via HTTP or HTTPS.\n   */\n  initiatorContext: 'Initiator Context',\n  /**\n   * @description Title for a column in the affected resources for a CORS issue showing a link to the associated preflight request in case the preflight request caused the issue.\n   */\n  preflightRequestIfProblematic: 'Preflight Request (if problematic)',\n  /**\n   * @description Title for a column in the affected resources for a CORS issue showing a link to the associated preflight request.\n   */\n  preflightRequest: 'Preflight Request',\n  /**\n   * @description Title for a column in the affected resources for a CORS issue showing the name of the problematic HTTP response header.\n   */\n  header: 'Header',\n  /**\n   * @description Title for a column in the affected resources for a CORS issue showing the problem associated with the resource.\n   */\n  problem: 'Problem',\n  /**\n   * @description Title for a column in the affected resources for a CORS issue showing the value that was invalid and caused the problem if it is available.\n   */\n  invalidValue: 'Invalid Value (if available)',\n  /**\n   * @description Content for the problem column in the affected resources table for a CORS issue that indicates that a response header was missing.\n   */\n  problemMissingHeader: 'Missing Header',\n  /**\n   * @description Content for the problem column in the affected resources table for a CORS issue that indicates that a response header contained multiple values.\n   */\n  problemMultipleValues: 'Multiple Values',\n  /**\n   * @description Content for the problem column in the affected resources table for a CORS issue that indicates that a response header contained an invalid value.\n   */\n  problemInvalidValue: 'Invalid Value',\n  /**\n   * @description Content for the problem column in the affected resources table for a CORS issue that indicates that the response to the preflight request was a redirect.\n   */\n  preflightDisallowedRedirect: 'Response to preflight was a redirect',\n  /**\n   * @description Content for the problem column in the affected resources table for a CORS issue that indicates that the HTTP status the preflight request was not successful.\n   */\n  preflightInvalidStatus: 'HTTP status of preflight request didn\\'t indicate success',\n  /**\n   * @description Title for a column in the affected resources for a CORS issue showing the origin that was allowed according to CORS headers.\n   */\n  allowedOrigin: 'Allowed Origin (from header)',\n  /**\n   * @description Title for a column in the affected resources for a CORS issue showing the value of the Access-Control-Allow-Credentials response header.\n   */\n  allowCredentialsValueFromHeader: '`Access-Control-Allow-Credentials` Header Value',\n  /**\n   * @description Title for a column in the affected resources for a CORS issue showing the request method that was disallowed.\n   */\n  disallowedRequestMethod: 'Disallowed Request Method',\n  /**\n   * @description Title for a column in the affected resources for a CORS issue showing the request header that was disallowed.\n   */\n  disallowedRequestHeader: 'Disallowed Request Header',\n  /**\n   * @description Header for the source location column\n   */\n  sourceLocation: 'Source Location',\n  /**\n   * @description Header for the column with the URL scheme that is not supported by fetch\n   */\n  unsupportedScheme: 'Unsupported Scheme',\n  /**\n   * @description A failed network request.\n   */\n  failedRequest: 'Failed Request',\n} as const;\nconst str_ = i18n.i18n.registerUIStrings('panels/issues/CorsIssueDetailsView.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\n\nexport class CorsIssueDetailsView extends AffectedResourcesView {\n  constructor(parent: IssueView, issue: IssuesManager.IssueAggregator.AggregatedIssue, jslogContext: string) {\n    super(parent, issue, jslogContext);\n    this.affectedResourcesCountElement.classList.add('cors-issue-affected-resource-label');\n  }\n\n  #appendStatus(element: HTMLElement, isWarning: boolean): void {\n    const status = document.createElement('td');\n    if (isWarning) {\n      status.classList.add('affected-resource-report-only-status');\n      status.textContent = i18nString(UIStrings.warning);\n    } else {\n      status.classList.add('affected-resource-blocked-status');\n      status.textContent = i18nString(UIStrings.blocked);\n    }\n    element.appendChild(status);\n  }\n\n  protected getResourceNameWithCount(count: number): Platform.UIString.LocalizedString {\n    return i18nString(UIStrings.nRequests, {n: count});\n  }\n\n  #appendDetails(issueCode: IssuesManager.CorsIssue.IssueCode, issues: Iterable<IssuesManager.CorsIssue.CorsIssue>):\n      void {\n    const header = document.createElement('tr');\n    this.appendColumnTitle(header, i18nString(UIStrings.request));\n    this.appendColumnTitle(header, i18nString(UIStrings.status));\n    switch (issueCode) {\n      case IssuesManager.CorsIssue.IssueCode.INVALID_HEADER_VALUES:\n        this.appendColumnTitle(header, i18nString(UIStrings.preflightRequestIfProblematic));\n        this.appendColumnTitle(header, i18nString(UIStrings.header));\n        this.appendColumnTitle(header, i18nString(UIStrings.problem));\n        this.appendColumnTitle(header, i18nString(UIStrings.invalidValue));\n        break;\n      case IssuesManager.CorsIssue.IssueCode.WILDCARD_ORIGN_NOT_ALLOWED:\n        this.appendColumnTitle(header, i18nString(UIStrings.preflightRequestIfProblematic));\n        break;\n      case IssuesManager.CorsIssue.IssueCode.PREFLIGHT_RESPONSE_INVALID:\n        this.appendColumnTitle(header, i18nString(UIStrings.preflightRequest));\n        this.appendColumnTitle(header, i18nString(UIStrings.problem));\n        break;\n      case IssuesManager.CorsIssue.IssueCode.ORIGIN_MISMATCH:\n        this.appendColumnTitle(header, i18nString(UIStrings.preflightRequestIfProblematic));\n        this.appendColumnTitle(header, i18nString(UIStrings.initiatorContext));\n        this.appendColumnTitle(header, i18nString(UIStrings.allowedOrigin));\n        break;\n      case IssuesManager.CorsIssue.IssueCode.ALLOW_CREDENTIALS_REQUIRED:\n        this.appendColumnTitle(header, i18nString(UIStrings.preflightRequestIfProblematic));\n        this.appendColumnTitle(header, i18nString(UIStrings.allowCredentialsValueFromHeader));\n        break;\n      case IssuesManager.CorsIssue.IssueCode.INSECURE_PRIVATE_NETWORK:\n        this.appendColumnTitle(header, i18nString(UIStrings.resourceAddressSpace));\n        this.appendColumnTitle(header, i18nString(UIStrings.initiatorAddressSpace));\n        this.appendColumnTitle(header, i18nString(UIStrings.initiatorContext));\n        break;\n      case IssuesManager.CorsIssue.IssueCode.PREFLIGHT_ALLOW_PRIVATE_NETWORK_ERROR:\n        this.appendColumnTitle(header, i18nString(UIStrings.preflightRequest));\n        this.appendColumnTitle(header, i18nString(UIStrings.invalidValue));\n        this.appendColumnTitle(header, i18nString(UIStrings.initiatorAddressSpace));\n        this.appendColumnTitle(header, i18nString(UIStrings.initiatorContext));\n        break;\n      case IssuesManager.CorsIssue.IssueCode.PREFLIGHT_MISSING_PRIVATE_NETWORK_ACCESS_ID:\n      case IssuesManager.CorsIssue.IssueCode.PREFLIGHT_MISSING_PRIVATE_NETWORK_ACCESS_NAME:\n        this.appendColumnTitle(header, i18nString(UIStrings.preflightRequest));\n        this.appendColumnTitle(header, i18nString(UIStrings.invalidValue));\n        this.appendColumnTitle(header, i18nString(UIStrings.resourceAddressSpace));\n        this.appendColumnTitle(header, i18nString(UIStrings.initiatorAddressSpace));\n        this.appendColumnTitle(header, i18nString(UIStrings.initiatorContext));\n        break;\n      case IssuesManager.CorsIssue.IssueCode.METHOD_DISALLOWED_BY_PREFLIGHT_RESPONSE:\n        this.appendColumnTitle(header, i18nString(UIStrings.preflightRequest));\n        this.appendColumnTitle(header, i18nString(UIStrings.disallowedRequestMethod));\n        break;\n      case IssuesManager.CorsIssue.IssueCode.HEADER_DISALLOWED_BY_PREFLIGHT_RESPONSE:\n        this.appendColumnTitle(header, i18nString(UIStrings.preflightRequest));\n        this.appendColumnTitle(header, i18nString(UIStrings.disallowedRequestHeader));\n        break;\n      case IssuesManager.CorsIssue.IssueCode.REDIRECT_CONTAINS_CREDENTIALS:\n        // The default columns suffice.\n        break;\n      case IssuesManager.CorsIssue.IssueCode.DISALLOWED_BY_MODE:\n        this.appendColumnTitle(header, i18nString(UIStrings.initiatorContext));\n        this.appendColumnTitle(header, i18nString(UIStrings.sourceLocation));\n        break;\n      case IssuesManager.CorsIssue.IssueCode.CORS_DISABLED_SCHEME:\n        this.appendColumnTitle(header, i18nString(UIStrings.initiatorContext));\n        this.appendColumnTitle(header, i18nString(UIStrings.sourceLocation));\n        this.appendColumnTitle(header, i18nString(UIStrings.unsupportedScheme));\n        break;\n      case IssuesManager.CorsIssue.IssueCode.NO_CORS_REDIRECT_MODE_NOT_FOLLOW:\n        this.appendColumnTitle(header, i18nString(UIStrings.sourceLocation));\n        break;\n      default:\n        Platform.assertUnhandled<IssuesManager.CorsIssue.IssueCode.PREFLIGHT_MISSING_ALLOW_EXTERNAL|\n                                 IssuesManager.CorsIssue.IssueCode.PREFLIGHT_INVALID_ALLOW_EXTERNAL|\n                                 IssuesManager.CorsIssue.IssueCode.INVALID_PRIVATE_NETWORK_ACCESS|\n                                 IssuesManager.CorsIssue.IssueCode.UNEXPECTED_PRIVATE_NETWORK_ACCESS|IssuesManager\n                                     .CorsIssue.IssueCode.PRIVATE_NETWORK_ACCESS_PERMISSION_UNAVAILABLE|IssuesManager\n                                     .CorsIssue.IssueCode.PRIVATE_NETWORK_ACCESS_PERMISSION_DENIED|\n                                 IssuesManager.CorsIssue.IssueCode.LOCAL_NETWORK_ACCESS_PERMISSION_DENIED>(issueCode);\n    }\n\n    this.affectedResources.appendChild(header);\n    let count = 0;\n    for (const issue of issues) {\n      count++;\n      this.#appendDetail(issueCode, issue);\n    }\n    this.updateAffectedResourceCount(count);\n  }\n\n  #appendSecureContextCell(element: HTMLElement, isSecureContext: boolean|undefined): void {\n    if (isSecureContext === undefined) {\n      this.appendIssueDetailCell(element, '');\n      return;\n    }\n    this.appendIssueDetailCell(\n        element, isSecureContext ? i18nString(UIStrings.secure) : i18nString(UIStrings.insecure));\n  }\n\n  private static getHeaderFromError(corsError: Protocol.Network.CorsError): string {\n    switch (corsError) {\n      case Protocol.Network.CorsError.InvalidAllowHeadersPreflightResponse:\n        return 'Access-Control-Allow-Headers';\n      case Protocol.Network.CorsError.InvalidAllowMethodsPreflightResponse:\n      case Protocol.Network.CorsError.MethodDisallowedByPreflightResponse:\n        return 'Access-Control-Allow-Methods';\n      case Protocol.Network.CorsError.PreflightMissingAllowOriginHeader:\n      case Protocol.Network.CorsError.PreflightMultipleAllowOriginValues:\n      case Protocol.Network.CorsError.PreflightInvalidAllowOriginValue:\n      case Protocol.Network.CorsError.MissingAllowOriginHeader:\n      case Protocol.Network.CorsError.MultipleAllowOriginValues:\n      case Protocol.Network.CorsError.InvalidAllowOriginValue:\n      case Protocol.Network.CorsError.WildcardOriginNotAllowed:\n      case Protocol.Network.CorsError.PreflightWildcardOriginNotAllowed:\n      case Protocol.Network.CorsError.AllowOriginMismatch:\n      case Protocol.Network.CorsError.PreflightAllowOriginMismatch:\n        return 'Access-Control-Allow-Origin';\n      case Protocol.Network.CorsError.InvalidAllowCredentials:\n      case Protocol.Network.CorsError.PreflightInvalidAllowCredentials:\n        return 'Access-Control-Allow-Credentials';\n      case Protocol.Network.CorsError.PreflightMissingAllowPrivateNetwork:\n      case Protocol.Network.CorsError.PreflightInvalidAllowPrivateNetwork:\n        return 'Access-Control-Allow-Private-Network';\n      case Protocol.Network.CorsError.RedirectContainsCredentials:\n      case Protocol.Network.CorsError.PreflightDisallowedRedirect:\n        return 'Location';\n      case Protocol.Network.CorsError.PreflightInvalidStatus:\n        return 'Status-Code';\n      case Protocol.Network.CorsError.PreflightMissingPrivateNetworkAccessId:\n        return 'Private-Network-Access-Id';\n      case Protocol.Network.CorsError.PreflightMissingPrivateNetworkAccessName:\n        return 'Private-Network-Access-Name';\n    }\n    return '';\n  }\n\n  private static getProblemFromError(corsErrorStatus: Protocol.Network.CorsErrorStatus): string {\n    switch (corsErrorStatus.corsError) {\n      case Protocol.Network.CorsError.InvalidAllowHeadersPreflightResponse:\n      case Protocol.Network.CorsError.InvalidAllowMethodsPreflightResponse:\n      case Protocol.Network.CorsError.PreflightInvalidAllowOriginValue:\n      case Protocol.Network.CorsError.InvalidAllowOriginValue:\n        return i18nString(UIStrings.problemInvalidValue);\n      case Protocol.Network.CorsError.PreflightMultipleAllowOriginValues:\n      case Protocol.Network.CorsError.MultipleAllowOriginValues:\n        return i18nString(UIStrings.problemMultipleValues);\n      case Protocol.Network.CorsError.MissingAllowOriginHeader:\n      case Protocol.Network.CorsError.PreflightMissingAllowOriginHeader:\n        return i18nString(UIStrings.problemMissingHeader);\n      case Protocol.Network.CorsError.PreflightInvalidStatus:\n        return i18nString(UIStrings.preflightInvalidStatus);\n      case Protocol.Network.CorsError.PreflightDisallowedRedirect:\n        return i18nString(UIStrings.preflightDisallowedRedirect);\n      case Protocol.Network.CorsError.InvalidResponse:\n        return i18nString(UIStrings.failedRequest);\n    }\n    throw new Error('Invalid Argument');\n  }\n\n  #appendDetail(issueCode: IssuesManager.CorsIssue.IssueCode, issue: IssuesManager.CorsIssue.CorsIssue): void {\n    const element = document.createElement('tr');\n    element.classList.add('affected-resource-directive');\n\n    const details = issue.details();\n    const corsErrorStatus = details.corsErrorStatus;\n    const corsError = details.corsErrorStatus.corsError;\n\n    const highlightHeader = {\n      section: NetworkForward.UIRequestLocation.UIHeaderSection.RESPONSE,\n      name: CorsIssueDetailsView.getHeaderFromError(corsError),\n    };\n\n    const opts = {\n      additionalOnClickAction(): void {\n        Host.userMetrics.issuesPanelResourceOpened(IssuesManager.Issue.IssueCategory.CORS, AffectedItem.REQUEST);\n      },\n    };\n\n    switch (issueCode) {\n      case IssuesManager.CorsIssue.IssueCode.INVALID_HEADER_VALUES:\n        element.appendChild(this.createRequestCell(details.request, opts));\n        this.#appendStatus(element, details.isWarning);\n        if (corsError.includes('Preflight')) {\n          element.appendChild(\n              this.createRequestCell(details.request, {...opts, linkToPreflight: true, highlightHeader}));\n        } else {\n          this.appendIssueDetailCell(element, '');\n        }\n        this.appendIssueDetailCell(element, CorsIssueDetailsView.getHeaderFromError(corsError), 'code-example');\n        this.appendIssueDetailCell(element, CorsIssueDetailsView.getProblemFromError(details.corsErrorStatus));\n        this.appendIssueDetailCell(element, details.corsErrorStatus.failedParameter, 'code-example');\n        break;\n      case IssuesManager.CorsIssue.IssueCode.WILDCARD_ORIGN_NOT_ALLOWED:\n        element.appendChild(this.createRequestCell(details.request, opts));\n        this.#appendStatus(element, details.isWarning);\n        if (corsError.includes('Preflight')) {\n          element.appendChild(\n              this.createRequestCell(details.request, {...opts, linkToPreflight: true, highlightHeader}));\n        } else {\n          this.appendIssueDetailCell(element, '');\n        }\n        break;\n      case IssuesManager.CorsIssue.IssueCode.PREFLIGHT_RESPONSE_INVALID: {\n        element.appendChild(this.createRequestCell(details.request, opts));\n        this.#appendStatus(element, details.isWarning);\n        const specialHighlightHeader = corsError === Protocol.Network.CorsError.PreflightInvalidStatus ?\n            {\n              section: NetworkForward.UIRequestLocation.UIHeaderSection.GENERAL,\n              name: 'Status-Code',\n            } :\n            highlightHeader;\n        element.appendChild(this.createRequestCell(\n            details.request, {...opts, linkToPreflight: true, highlightHeader: specialHighlightHeader}));\n        this.appendIssueDetailCell(element, CorsIssueDetailsView.getProblemFromError(details.corsErrorStatus));\n        break;\n      }\n      case IssuesManager.CorsIssue.IssueCode.ORIGIN_MISMATCH:\n        element.appendChild(this.createRequestCell(details.request, opts));\n        this.#appendStatus(element, details.isWarning);\n        if (corsError.includes('Preflight')) {\n          element.appendChild(\n              this.createRequestCell(details.request, {...opts, linkToPreflight: true, highlightHeader}));\n        } else {\n          this.appendIssueDetailCell(element, '');\n        }\n        this.appendIssueDetailCell(element, details.initiatorOrigin ?? '', 'code-example');\n        this.appendIssueDetailCell(element, details.corsErrorStatus.failedParameter, 'code-example');\n        break;\n      case IssuesManager.CorsIssue.IssueCode.ALLOW_CREDENTIALS_REQUIRED:\n        element.appendChild(this.createRequestCell(details.request, opts));\n        this.#appendStatus(element, details.isWarning);\n        if (corsError.includes('Preflight')) {\n          element.appendChild(\n              this.createRequestCell(details.request, {...opts, linkToPreflight: true, highlightHeader}));\n        } else {\n          this.appendIssueDetailCell(element, '');\n        }\n        this.appendIssueDetailCell(element, details.corsErrorStatus.failedParameter, 'code-example');\n        break;\n      case IssuesManager.CorsIssue.IssueCode.INSECURE_PRIVATE_NETWORK:\n        element.appendChild(this.createRequestCell(details.request, opts));\n        this.#appendStatus(element, details.isWarning);\n        this.appendIssueDetailCell(element, details.resourceIPAddressSpace ?? '');\n        this.appendIssueDetailCell(element, details.clientSecurityState?.initiatorIPAddressSpace ?? '');\n        this.#appendSecureContextCell(element, details.clientSecurityState?.initiatorIsSecureContext);\n        break;\n      case IssuesManager.CorsIssue.IssueCode.PREFLIGHT_ALLOW_PRIVATE_NETWORK_ERROR: {\n        element.appendChild(this.createRequestCell(details.request, opts));\n        this.#appendStatus(element, details.isWarning);\n        element.appendChild(this.createRequestCell(details.request, {...opts, linkToPreflight: true, highlightHeader}));\n        this.appendIssueDetailCell(element, details.corsErrorStatus.failedParameter, 'code-example');\n        this.appendIssueDetailCell(element, details.clientSecurityState?.initiatorIPAddressSpace ?? '');\n        this.#appendSecureContextCell(element, details.clientSecurityState?.initiatorIsSecureContext);\n        break;\n      }\n      case IssuesManager.CorsIssue.IssueCode.METHOD_DISALLOWED_BY_PREFLIGHT_RESPONSE:\n        element.appendChild(this.createRequestCell(details.request, opts));\n        this.#appendStatus(element, details.isWarning);\n        element.appendChild(this.createRequestCell(details.request, {...opts, linkToPreflight: true, highlightHeader}));\n        this.appendIssueDetailCell(element, details.corsErrorStatus.failedParameter, 'code-example');\n        break;\n      case IssuesManager.CorsIssue.IssueCode.HEADER_DISALLOWED_BY_PREFLIGHT_RESPONSE:\n        element.appendChild(this.createRequestCell(details.request, {\n          ...opts,\n          highlightHeader: {\n            section: NetworkForward.UIRequestLocation.UIHeaderSection.REQUEST,\n            name: corsErrorStatus.failedParameter,\n          },\n        }));\n        this.#appendStatus(element, details.isWarning);\n        element.appendChild(this.createRequestCell(details.request, {\n          ...opts,\n          linkToPreflight: true,\n          highlightHeader: {\n            section: NetworkForward.UIRequestLocation.UIHeaderSection.RESPONSE,\n            name: 'Access-Control-Allow-Headers',\n          },\n        }));\n        this.appendIssueDetailCell(element, details.corsErrorStatus.failedParameter, 'code-example');\n        break;\n      case IssuesManager.CorsIssue.IssueCode.REDIRECT_CONTAINS_CREDENTIALS:\n        element.appendChild(this.createRequestCell(details.request, {\n          ...opts,\n          highlightHeader: {\n            section: NetworkForward.UIRequestLocation.UIHeaderSection.RESPONSE,\n            name: CorsIssueDetailsView.getHeaderFromError(corsError),\n          },\n        }));\n        this.#appendStatus(element, details.isWarning);\n        break;\n      case IssuesManager.CorsIssue.IssueCode.DISALLOWED_BY_MODE:\n        element.appendChild(this.createRequestCell(details.request, opts));\n        this.#appendStatus(element, details.isWarning);\n        this.appendIssueDetailCell(element, details.initiatorOrigin ?? '', 'code-example');\n        this.appendSourceLocation(element, details.location, issue.model()?.getTargetIfNotDisposed());\n        break;\n      case IssuesManager.CorsIssue.IssueCode.CORS_DISABLED_SCHEME:\n        element.appendChild(this.createRequestCell(details.request, {\n          ...opts,\n          highlightHeader: {\n            section: NetworkForward.UIRequestLocation.UIHeaderSection.RESPONSE,\n            name: CorsIssueDetailsView.getHeaderFromError(corsError),\n          },\n        }));\n        this.#appendStatus(element, details.isWarning);\n        this.appendIssueDetailCell(element, details.initiatorOrigin ?? '', 'code-example');\n        this.appendSourceLocation(element, details.location, issue.model()?.getTargetIfNotDisposed());\n        this.appendIssueDetailCell(element, details.corsErrorStatus.failedParameter ?? '', 'code-example');\n        break;\n      case IssuesManager.CorsIssue.IssueCode.NO_CORS_REDIRECT_MODE_NOT_FOLLOW:\n        element.appendChild(this.createRequestCell(details.request, opts));\n        this.#appendStatus(element, details.isWarning);\n        this.appendSourceLocation(element, details.location, issue.model()?.getTargetIfNotDisposed());\n        break;\n      case IssuesManager.CorsIssue.IssueCode.PREFLIGHT_MISSING_PRIVATE_NETWORK_ACCESS_ID:\n      case IssuesManager.CorsIssue.IssueCode.PREFLIGHT_MISSING_PRIVATE_NETWORK_ACCESS_NAME:\n        element.appendChild(this.createRequestCell(details.request, opts));\n        this.#appendStatus(element, details.isWarning);\n        element.appendChild(this.createRequestCell(details.request, {...opts, linkToPreflight: true, highlightHeader}));\n        this.appendIssueDetailCell(element, CorsIssueDetailsView.getHeaderFromError(corsError));\n        this.appendIssueDetailCell(element, details.resourceIPAddressSpace ?? '');\n        this.appendIssueDetailCell(element, details.clientSecurityState?.initiatorIPAddressSpace ?? '');\n        this.#appendSecureContextCell(element, details.clientSecurityState?.initiatorIsSecureContext);\n        break;\n      default:\n        element.appendChild(this.createRequestCell(details.request, opts));\n        this.#appendStatus(element, details.isWarning);\n        Platform.assertUnhandled<IssuesManager.CorsIssue.IssueCode.PREFLIGHT_MISSING_ALLOW_EXTERNAL|\n                                 IssuesManager.CorsIssue.IssueCode.PREFLIGHT_INVALID_ALLOW_EXTERNAL|\n                                 IssuesManager.CorsIssue.IssueCode.INVALID_PRIVATE_NETWORK_ACCESS|\n                                 IssuesManager.CorsIssue.IssueCode.UNEXPECTED_PRIVATE_NETWORK_ACCESS|IssuesManager\n                                     .CorsIssue.IssueCode.PRIVATE_NETWORK_ACCESS_PERMISSION_UNAVAILABLE|IssuesManager\n                                     .CorsIssue.IssueCode.PRIVATE_NETWORK_ACCESS_PERMISSION_DENIED|\n                                 IssuesManager.CorsIssue.IssueCode.LOCAL_NETWORK_ACCESS_PERMISSION_DENIED>(issueCode);\n        break;\n    }\n\n    this.affectedResources.appendChild(element);\n  }\n\n  update(): void {\n    this.clear();\n    const issues = this.issue.getCorsIssues();\n    const issue = issues.values().next();\n    if (issue.done) {\n      this.updateAffectedResourceCount(0);\n    } else {\n      this.#appendDetails(issue.value.code(), issues);\n    }\n  }\n}\n", "// Copyright 2021 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n/* eslint-disable @devtools/no-imperative-dom-api */\n\nimport * as i18n from '../../core/i18n/i18n.js';\nimport type * as Platform from '../../core/platform/platform.js';\nimport * as Protocol from '../../generated/protocol.js';\nimport type * as IssuesManager from '../../models/issues_manager/issues_manager.js';\n\nimport {AffectedResourcesView} from './AffectedResourcesView.js';\n\nconst UIStrings = {\n  /**\n   * @description Label for number of affected resources indication in issue view\n   */\n  nResources: '{n, plural, =1 {# resource} other {# resources}}',\n  /**\n   * @description Title for the 'Frame' column.\n   */\n  frameId: 'Frame',\n  /**\n   * @description Label for the violating node link in the issue view.\n   */\n  violatingNode: 'Violating node',\n} as const;\n\nconst str_ = i18n.i18n.registerUIStrings('panels/issues/GenericIssueDetailsView.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\n\nexport class GenericIssueDetailsView extends AffectedResourcesView {\n  protected getResourceNameWithCount(count: number): Platform.UIString.LocalizedString {\n    return i18nString(UIStrings.nResources, {n: count});\n  }\n\n  #appendDetails(genericIssues: ReadonlySet<IssuesManager.GenericIssue.GenericIssue>): void {\n    const header = document.createElement('tr');\n\n    const sampleIssueDetails = genericIssues.values().next().value?.details();\n    if (sampleIssueDetails?.frameId) {\n      this.appendColumnTitle(header, i18nString(UIStrings.frameId));\n    }\n\n    // Only some `GenericIssueDetails` have information for the 'affected\n    // resources' view. We'll count them and only call `#appendDetail` for\n    // those. `updateAffectedResourceCount` will hide the section if the\n    // count is zero.\n    this.affectedResources.appendChild(header);\n    let count = 0;\n    for (const genericIssue of genericIssues) {\n      const hasAffectedResource = genericIssue.details().frameId || genericIssue.details().violatingNodeId;\n      if (hasAffectedResource) {\n        count++;\n        void this.#appendDetail(genericIssue);\n      }\n    }\n    this.updateAffectedResourceCount(count);\n  }\n\n  async #appendDetail(genericIssue: IssuesManager.GenericIssue.GenericIssue): Promise<void> {\n    const element = document.createElement('tr');\n    element.classList.add('affected-resource-directive');\n\n    const details = genericIssue.details();\n    if (details.frameId) {\n      element.appendChild(this.createFrameCell(details.frameId, genericIssue.getCategory()));\n    }\n    if (details.violatingNodeId) {\n      const target = genericIssue.model()?.target() || null;\n      element.appendChild(await this.createElementCell(\n          {backendNodeId: details.violatingNodeId, nodeName: this.violatingNodeIdName(details.errorType), target},\n          genericIssue.getCategory()));\n    }\n\n    this.affectedResources.appendChild(element);\n  }\n\n  private violatingNodeIdName(errorType: Protocol.Audits.GenericIssueErrorType): Platform.UIString.LocalizedString {\n    switch (errorType) {\n      case Protocol.Audits.GenericIssueErrorType.FormLabelForNameError:\n        // Since the error is referencing the <label> tag, this string doesn't\n        // need to be translated.\n        return i18n.i18n.lockedString('Label');\n      default:\n        return i18nString(UIStrings.violatingNode);\n    }\n  }\n\n  update(): void {\n    this.clear();\n    const issues = this.issue.getGenericIssues();\n    if (issues.size > 0) {\n      this.#appendDetails(issues);\n    } else {\n      this.updateAffectedResourceCount(0);\n    }\n  }\n}\n"],
  "mappings": "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AA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AA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",
  "names": ["UI", "Common", "i18n", "IssuesManager", "IssueCounter", "UI", "VisualLogging", "i18n", "IssuesManager", "UI", "UIStrings", "str_", "i18nString", "Common", "Host", "i18n", "IssuesManager", "NetworkForward", "Adorners", "IssueCounter", "Icon", "UI", "VisualLogging", "Host", "i18n", "IssuesManager", "Common", "i18n", "Icon", "Components", "UI", "VisualLogging", "UIStrings", "str_", "i18nString", "frame", "cellElement", "UIStrings", "str_", "i18nString", "Common", "Host", "i18n", "VisualLogging", "UIStrings", "str_", "i18nString", "link", "i18n", "i18n", "UIStrings", "str_", "i18nString", "UIStrings", "str_", "i18nString", "Common", "Host", "i18n", "SDK", "IssuesManager", "UIStrings", "str_", "i18nString", "i18n", "SDK", "UIStrings", "str_", "i18nString", "i18n", "Platform", "i18nString", "UIStrings", "str_", "i18n", "UIStrings", "str_", "i18nString", "i18n", "UI", "UIStrings", "str_", "i18nString", "i18n", "UIStrings", "str_", "i18nString", "i18n", "UI", "UIStrings", "str_", "i18nString", "i18n", "IssuesManager", "UIStrings", "str_", "i18nString", "i18n", "Components", "VisualLogging", "UIStrings", "str_", "i18nString", "i18n", "UIStrings", "str_", "i18nString", "Host", "i18n", "IssuesManager", "UIStrings", "str_", "i18nString", "Components", "Host", "i18n", "Platform", "IssuesManager", "NetworkForward", "UIStrings", "str_", "i18nString", "i18n", "UIStrings", "str_", "i18nString", "UIStrings", "str_", "i18nString", "Icon", "link", "UIStrings", "str_", "i18nString"]
}
