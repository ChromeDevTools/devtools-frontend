{"version":3,"file":"LayerDetailsView.js","sourceRoot":"","sources":["../../../../../../front_end/panels/layer_viewer/LayerDetailsView.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright 2013 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as Common from '../../core/common/common.js';\nimport * as i18n from '../../core/i18n/i18n.js';\nimport * as SDK from '../../core/sdk/sdk.js';\nimport * as UI from '../../ui/legacy/legacy.js';\nimport * as Lit from '../../ui/lit/lit.js';\nimport * as VisualLogging from '../../ui/visual_logging/visual_logging.js';\n\nimport layerDetailsViewStyles from './layerDetailsView.css.js';\nimport {\n  type LayerView,\n  type LayerViewHost,\n  ScrollRectSelection,\n  type Selection,\n  type SnapshotSelection,\n  Type,\n} from './LayerViewHost.js';\n\nconst {html, nothing} = Lit;\n\nconst UIStrings = {\n  /**\n   * @description Text in Layer Details View of the Layers panel\n   */\n  selectALayerToSeeItsDetails: 'Select a layer to see its details',\n  /**\n   * @description Text in Layer Details View of the Layers panel if no layer is selected for viewing its content\n   */\n  noLayerSelected: 'No layer selected',\n  /**\n   * @description Element text content in Layer Details View of the Layers panel\n   * @example {Touch event handler} PH1\n   * @example {10} PH2\n   * @example {10} PH3\n   * @example {10} PH4\n   * @example {10} PH5\n   */\n  scrollRectangleDimensions: '{PH1} {PH2} × {PH3} (at {PH4}, {PH5})',\n  /**\n   * @description Text in Layer Details View of the Layers panel. Used to indicate that a particular\n   * layer of the website is unnamed (was not given a name/doesn't have one).\n   */\n  unnamed: '<unnamed>',\n  /**\n   * @description Text in Layer Details View of the Layers panel\n   * @example {Nearest Layer Shifting Sticky Box} PH1\n   * @example {&lt;unnamed&gt;} PH2\n   * @example {5} PH3\n   */\n  stickyAncestorLayersS: '{PH1}: {PH2} ({PH3})',\n  /**\n   * @description Sticky box rect element text content in Layer Details View of the Layers panel\n   * @example {10} PH1\n   * @example {10} PH2\n   * @example {10} PH3\n   * @example {10} PH4\n   */\n  stickyBoxRectangleDimensions: 'Sticky Box {PH1} × {PH2} (at {PH3}, {PH4})',\n  /**\n   * @description Containing block rect element text content in Layer Details View of the Layers panel.\n   * The placeholder are width, height, x position, and y position respectively.\n   * @example {10} PH1\n   * @example {10} PH2\n   * @example {10} PH3\n   * @example {10} PH4\n   */\n  containingBlocRectangleDimensions: 'Containing Block {PH1} × {PH2} (at {PH3}, {PH4})',\n  /**\n   * @description Text in Layer Details View of the Layers panel. This also means \"The nearest sticky\n   * box that causes a layer shift\".\n   */\n  nearestLayerShiftingStickyBox: 'Nearest Layer Shifting Sticky Box',\n  /**\n   * @description Text in Layer Details View of the Layers panel. This also means \"The nearest block\n   * that causes a layer shift\".\n   */\n  nearestLayerShiftingContaining: 'Nearest Layer Shifting Containing Block',\n  /**\n   * @description Size cell text content in Layer Details View of the Layers panel\n   * @example {10} PH1\n   * @example {10} PH2\n   * @example {10} PH3\n   * @example {10} PH4\n   */\n  updateRectangleDimensions: '{PH1} × {PH2} (at {PH3}, {PH4})',\n  /**\n   * @description Text for the size of something\n   */\n  size: 'Size',\n  /**\n   * @description Text in Layer Details View of the Layers panel\n   */\n  compositingReasons: 'Compositing Reasons',\n  /**\n   * @description Text in Layer Details View of the Layers panel\n   */\n  memoryEstimate: 'Memory estimate',\n  /**\n   * @description Text in Layer Details View of the Layers panel\n   */\n  paintCount: 'Paint count',\n  /**\n   * @description Text in Layer Details View of the Layers panel\n   */\n  slowScrollRegions: 'Slow scroll regions',\n  /**\n   * @description Text in Layer Details View of the Layers panel\n   */\n  stickyPositionConstraint: 'Sticky position constraint',\n  /**\n   * @description Title of the paint profiler, old name of the performance pane\n   */\n  paintProfiler: 'Paint Profiler',\n  /**\n   * @description Text in Layer Details View of the Layers panel\n   */\n  nonFastScrollable: 'Non fast scrollable',\n  /**\n   * @description Text in Layer Details View of the Layers panel\n   */\n  touchEventHandler: 'Touch event handler',\n  /**\n   * @description Text in Layer Details View of the Layers panel\n   */\n  wheelEventHandler: 'Wheel event handler',\n  /**\n   * @description Text in Layer Details View of the Layers panel. Means that this rectangle needs to\n   * be repainted when the webpage is scrolled. 'repaints' means that the browser engine needs to\n   * draw the pixels for this rectangle to the user's monitor again.\n   */\n  repaintsOnScroll: 'Repaints on scroll',\n  /**\n   * @description Text in Layer Details View of the Layers panel\n   */\n  mainThreadScrollingReason: 'Main thread scrolling reason',\n} as const;\nconst str_ = i18n.i18n.registerUIStrings('panels/layer_viewer/LayerDetailsView.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\nconst i18nLazyString = i18n.i18n.getLazilyComputedLocalizedString.bind(undefined, str_);\n\nexport interface ViewInput {\n  layer: SDK.LayerTreeBase.Layer|null;\n  snapshotSelection: SnapshotSelection|null;\n  compositingReasons: string[];\n  onScrollRectClick: (index: number, event: Event) => void;\n  onPaintProfilerRequested: () => void;\n}\n\nexport type ViewOutput = undefined;\n\nexport const DEFAULT_VIEW = (input: ViewInput, _output: ViewOutput, target: HTMLElement): void => {\n  const {layer, snapshotSelection, compositingReasons, onScrollRectClick, onPaintProfilerRequested} = input;\n\n  if (!layer) {\n    // clang-format off\n    Lit.render(html`<div class=\"layer-details-container\">\n      <devtools-widget class=\"learn-more\" .widgetConfig=${UI.Widget.widgetConfig(UI.EmptyWidget.EmptyWidget, {\n        header: i18nString(UIStrings.noLayerSelected),\n        text: i18nString(UIStrings.selectALayerToSeeItsDetails)})}>\n      </devtools-widget>\n    </div>`, target);\n    // clang-format on\n    return;\n  }\n\n  const slowScrollRects = layer.scrollRects();\n  const stickyPositionConstraint = layer.stickyPositionConstraint();\n\n  const formatStickyAncestorLayer = (title: string, layer: SDK.LayerTreeBase.Layer|null): string => {\n    if (!layer) {\n      return '';\n    }\n    const node = layer.nodeForSelfOrAncestor();\n    const name = node ? node.simpleSelector() : i18nString(UIStrings.unnamed);\n    return i18nString(UIStrings.stickyAncestorLayersS, {PH1: title, PH2: name, PH3: layer.id()});\n  };\n\n  const renderStickyPositionConstraint = (constraint: SDK.LayerTreeBase.StickyPositionConstraint|null): Lit.LitTemplate|\n                                         typeof nothing => {\n    if (!constraint) {\n      return nothing;\n    }\n    const stickyBoxRect = constraint.stickyBoxRect();\n    const containingBlockRect = constraint.containingBlockRect();\n    const nearestLayerShiftingStickyBox = constraint.nearestLayerShiftingStickyBox();\n    const nearestLayerShiftingContainingBlock = constraint.nearestLayerShiftingContainingBlock();\n\n    // clang-format off\n    return html`\n      <span>${i18nString(\n        UIStrings.stickyBoxRectangleDimensions,\n        {PH1: stickyBoxRect.width, PH2: stickyBoxRect.height, PH3: stickyBoxRect.x, PH4: stickyBoxRect.y})}</span>\n      <span>, </span>\n      <span>${i18nString(UIStrings.containingBlocRectangleDimensions, {\n        PH1: containingBlockRect.width,\n        PH2: containingBlockRect.height,\n        PH3: containingBlockRect.x,\n        PH4: containingBlockRect.y,\n      })}</span>\n      ${nearestLayerShiftingStickyBox ? html`, <span>${\n                                            formatStickyAncestorLayer(\n                                                i18nString(UIStrings.nearestLayerShiftingStickyBox),\n                                                nearestLayerShiftingStickyBox)}</span>` :\n                                        nothing}\n      ${nearestLayerShiftingContainingBlock ? html`, <span>${\n                                                  formatStickyAncestorLayer(\n                                                      i18nString(UIStrings.nearestLayerShiftingContaining),\n                                                      nearestLayerShiftingContainingBlock)}</span>` :\n                                              nothing}\n    `;\n    // clang-format on\n  };\n\n  // clang-format off\n  Lit.render(\n      html`\n    <div class=\"layer-details-container\">\n      <table>\n        <tbody>\n          <tr>\n            <td>${i18nString(UIStrings.size)}</td>\n            <td>${i18nString(\n              UIStrings.updateRectangleDimensions,\n              {PH1: layer.width(), PH2: layer.height(), PH3: layer.offsetX(), PH4: layer.offsetY()})}</td>\n          </tr>\n          <tr>\n            <td>${i18nString(UIStrings.compositingReasons)}</td>\n            <td>\n              ${!compositingReasons.length ? 'n/a' :\n                                       html`<ul>${compositingReasons.map(reason => html`<li>${reason}</li>`)}</ul>`}\n            </td>\n          </tr>\n          <tr>\n            <td>${i18nString(UIStrings.memoryEstimate)}</td>\n            <td>${i18n.ByteUtilities.bytesToString(layer.gpuMemoryUsage())}</td>\n          </tr>\n          <tr>\n            <td>${i18nString(UIStrings.paintCount)}</td>\n            <td>${layer.paintCount()}</td>\n          </tr>\n          <tr>\n            <td>${i18nString(UIStrings.slowScrollRegions)}</td>\n            <td>\n              ${slowScrollRects.map((scrollRect, index) => html`\n                ${index > 0 ? ', ' : ''}\n                <span class=\"scroll-rect\" @click=${(e: Event) => onScrollRectClick(index, e)}\n                      jslog=${VisualLogging.action('layers.select-object').track({click: true})}>\n                  ${i18nString(UIStrings.scrollRectangleDimensions, {\n                    PH1: String(slowScrollRectNames.get(scrollRect.type as unknown as SDK.LayerTreeBase.Layer.ScrollRectType)?.()),\n                    PH2: scrollRect.rect.width,\n                    PH3: scrollRect.rect.height,\n                    PH4: scrollRect.rect.x,\n                    PH5: scrollRect.rect.y,\n                  })}\n                </span>`)}\n            </td>\n          </tr>\n          <tr>\n            <td>${i18nString(UIStrings.stickyPositionConstraint)}</td>\n            <td>${renderStickyPositionConstraint(stickyPositionConstraint)}</td>\n          </tr>\n        </tbody>\n      </table>\n      ${snapshotSelection ? html`\n      <button class=\"devtools-link link-margin text-button link-style\"\n              @click=${onPaintProfilerRequested}\n              jslog=${VisualLogging.action('layers.paint-profiler').track({click: true, keydown: 'Enter'})}>\n        ${i18nString(UIStrings.paintProfiler)}\n      </button>` : nothing}\n    </div>`,\n      target);\n  // clang-format on\n};\n\nexport class LayerDetailsView extends Common.ObjectWrapper.eventMixin<EventTypes, typeof UI.Widget.Widget>(\n    UI.Widget.Widget) implements LayerView {\n  private readonly layerViewHost: LayerViewHost;\n  private layerSnapshotMap: Map<SDK.LayerTreeBase.Layer, SnapshotSelection>;\n  private selection: Selection|null;\n  private compositingReasons: string[] = [];\n  private readonly view: typeof DEFAULT_VIEW;\n\n  constructor(layerViewHost: LayerViewHost, view: typeof DEFAULT_VIEW = DEFAULT_VIEW) {\n    super({\n      jslog: `${VisualLogging.pane('layers-details')}`,\n      useShadowDom: true,\n    });\n    this.view = view;\n    this.registerRequiredCSS(layerDetailsViewStyles);\n    this.layerViewHost = layerViewHost;\n    this.layerViewHost.registerView(this);\n    this.layerSnapshotMap = this.layerViewHost.getLayerSnapshotMap();\n    this.selection = null;\n  }\n\n  hoverObject(_selection: Selection|null): void {\n  }\n\n  selectObject(selection: Selection|null): void {\n    this.selection = selection;\n    if (this.isShowing()) {\n      this.update();\n    }\n  }\n\n  setLayerTree(_layerTree: SDK.LayerTreeBase.LayerTreeBase|null): void {\n  }\n\n  override wasShown(): void {\n    super.wasShown();\n    this.update();\n  }\n\n  private onScrollRectClicked(index: number, event: Event): void {\n    if ((event as KeyboardEvent).which !== 1) {\n      return;\n    }\n    if (!this.selection) {\n      return;\n    }\n    this.layerViewHost.selectObject(new ScrollRectSelection(this.selection.layer(), index));\n  }\n\n  private invokeProfilerLink(): void {\n    if (!this.selection) {\n      return;\n    }\n    const snapshotSelection =\n        this.selection.type() === Type.SNAPSHOT ? this.selection : this.layerSnapshotMap.get(this.selection.layer());\n    if (snapshotSelection) {\n      this.dispatchEventToListeners(Events.PAINT_PROFILER_REQUESTED, snapshotSelection);\n    }\n  }\n\n  update(): void {\n    const layer = this.selection?.layer();\n    if (layer) {\n      void layer.requestCompositingReasons().then(this.updateCompositingReasons.bind(this));\n    } else {\n      this.compositingReasons = [];\n    }\n    this.requestUpdate();\n  }\n\n  private updateCompositingReasons(compositingReasons: string[]): void {\n    this.compositingReasons = compositingReasons;\n    this.requestUpdate();\n  }\n\n  override performUpdate(): void {\n    const layer = this.selection?.layer() || null;\n    const snapshotSelection = (this.selection && this.selection.type() === Type.SNAPSHOT ?\n                                   (this.selection as SnapshotSelection) :\n                                   (layer ? this.layerSnapshotMap.get(layer) : null)) ||\n        null;\n\n    this.view(\n        {\n          layer,\n          snapshotSelection,\n          compositingReasons: this.compositingReasons,\n          onScrollRectClick: this.onScrollRectClicked.bind(this),\n          onPaintProfilerRequested: this.invokeProfilerLink.bind(this),\n        },\n        undefined, this.contentElement);\n  }\n}\n\nexport const enum Events {\n  PAINT_PROFILER_REQUESTED = 'PaintProfilerRequested',\n}\n\nexport interface EventTypes {\n  [Events.PAINT_PROFILER_REQUESTED]: Selection;\n}\n\nexport const slowScrollRectNames = new Map([\n  [SDK.LayerTreeBase.Layer.ScrollRectType.NON_FAST_SCROLLABLE, i18nLazyString(UIStrings.nonFastScrollable)],\n  [SDK.LayerTreeBase.Layer.ScrollRectType.TOUCH_EVENT_HANDLER, i18nLazyString(UIStrings.touchEventHandler)],\n  [SDK.LayerTreeBase.Layer.ScrollRectType.WHEEL_EVENT_HANDLER, i18nLazyString(UIStrings.wheelEventHandler)],\n  [SDK.LayerTreeBase.Layer.ScrollRectType.REPAINTS_ON_SCROLL, i18nLazyString(UIStrings.repaintsOnScroll)],\n  [\n    SDK.LayerTreeBase.Layer.ScrollRectType.MAIN_THREAD_SCROLL_REASON,\n    i18nLazyString(UIStrings.mainThreadScrollingReason),\n  ],\n]);\n"]}