{"version":3,"file":"LinearMemoryHighlightChipList.js","sourceRoot":"","sources":["../../../../../../../front_end/panels/linear_memory_inspector/components/LinearMemoryHighlightChipList.ts"],"names":[],"mappings":"AAAA,sCAAsC;AACtC,yEAAyE;AACzE,6BAA6B;AAE7B,OAAO,mDAAmD,CAAC;AAE3D,OAAO,KAAK,IAAI,MAAM,4BAA4B,CAAC;AACnD,OAAO,KAAK,EAAE,MAAM,8BAA8B,CAAC;AACnD,OAAO,EAAC,UAAU,EAAE,IAAI,EAAE,MAAM,EAAsB,MAAM,wBAAwB,CAAC;AACrF,OAAO,KAAK,aAAa,MAAM,8CAA8C,CAAC;AAE9E,OAAO,mCAAmC,MAAM,wCAAwC,CAAC;AAGzF,MAAM,SAAS,GAAG;IAChB;;;OAGG;IACH,aAAa,EAAE,qBAAqB;IACpC;;;;OAIG;IACH,eAAe,EAAE,+BAA+B;CACxC,CAAC;AACX,MAAM,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC,iBAAiB,CACpC,4EAA4E,EAAE,SAAS,CAAC,CAAC;AAC7F,MAAM,UAAU,GAAG,IAAI,CAAC,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,SAAS,EAAE,IAAI,CAAC,CAAC;AACtE,MAAM,EAAC,QAAQ,EAAC,GAAG,UAAU,CAAC;AAW9B,MAAM,YAAY,GAAS,CAAC,KAAK,EAAE,MAAM,EAAE,MAAM,EAAE,EAAE;IACnD,qDAAqD;IACrD,mBAAmB;IACnB,MAAM,CAAC,IAAI,CAAA;aACA,mCAAmC;;QAExC,KAAK,CAAC,cAAc,CAAC,GAAG,CAAC,aAAa,CAAC,EAAE,CAAC,UAAU,CAAC,aAAa,EAAE,KAAK,CAAC,CAAC;WACxE,EAAE,MAAM,CAAC,CAAC;IACnB,kBAAkB;AACpB,CAAC,CAAC;AAEF,SAAS,UAAU,CAAC,aAA4B,EAAE,KAAgB;IAChE,MAAM,cAAc,GAAG,aAAa,CAAC,IAAI,IAAI,aAAa,CAAC;IAC3D,MAAM,cAAc,GAAG,aAAa,CAAC,IAAI,CAAC;IAC1C,MAAM,SAAS,GAAG,aAAa,KAAK,KAAK,CAAC,sBAAsB,CAAC;IACjE,qDAAqD;IACrD,mBAAmB;IACnB,OAAO,IAAI,CAAA;iBACI,QAAQ,CAAC,EAAC,OAAO,EAAE,SAAS,EAAE,gBAAgB,EAAE,IAAI,EAAC,CAAC;;sBAEjD,UAAU,CAAC,SAAS,CAAC,aAAa,CAAC;sBACnC,aAAa,CAAC,MAAM,CAAC,2CAA2C,CAAC;SAC7D,KAAK,CAAC,EAAC,KAAK,EAAC,IAAI,EAAC,CAAC;uBACtB,KAAK,CAAC,eAAe,CAAC,aAAa,CAAC,YAAY,CAAC;;gCAExC,cAAc;;kBAE5B,cAAc;;;;wDAIwB,UAAU,CAAC,SAAS,CAAC,eAAe,CAAC;oBACzE,aAAa,CAAC,MAAM,CAAC,0CAA0C,CAAC;SAC5D,KAAK,CAAC,EAAC,KAAK,EAAC,IAAI,EAAC,CAAC;qBACtB,KAAK,CAAC,iBAAiB,CAAC,aAAa,CAAC;;;;;WAKhD,CAAC;IACR,mBAAmB;AACrB,CAAC;AAEH,MAAM,OAAO,6BAA8B,SAAQ,EAAE,CAAC,MAAM,CAAC,MAAM;IACjE,iBAAiB,GAAoB,EAAE,CAAC;IACxC,uBAAuB,CAAiB;IACxC,cAAc,GAAG,CAAC,CAAS,EAAQ,EAAE,GAAE,CAAC,CAAC;IACzC,gBAAgB,GAAG,CAAC,CAAgB,EAAQ,EAAE,GAAE,CAAC,CAAC;IAClD,KAAK,CAAO;IAEZ,YAAY,OAAqB,EAAE,IAAI,GAAG,YAAY;QACpD,KAAK,CAAC,OAAO,EAAE,EAAC,YAAY,EAAE,IAAI,EAAC,CAAC,CAAC;QACrC,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC;IACpB,CAAC;IAED,IAAI,cAAc,CAAC,cAA+B;QAChD,IAAI,CAAC,iBAAiB,GAAG,cAAc,CAAC;QACxC,IAAI,CAAC,aAAa,EAAE,CAAC;IACvB,CAAC;IAED,IAAI,cAAc;QAChB,OAAO,IAAI,CAAC,iBAAiB,CAAC;IAChC,CAAC;IAED,IAAI,sBAAsB,CAAC,sBAA+C;QACxE,IAAI,CAAC,uBAAuB,GAAG,sBAAsB,CAAC;QACtD,IAAI,CAAC,aAAa,EAAE,CAAC;IACvB,CAAC;IAED,IAAI,sBAAsB;QACxB,OAAO,IAAI,CAAC,uBAAuB,CAAC;IACtC,CAAC;IAED,IAAI,aAAa,CAAC,aAAwC;QACxD,IAAI,CAAC,cAAc,GAAG,aAAa,CAAC;QACpC,IAAI,CAAC,aAAa,EAAE,CAAC;IACvB,CAAC;IAED,IAAI,aAAa;QACf,OAAO,IAAI,CAAC,cAAc,CAAC;IAC7B,CAAC;IAED,IAAI,eAAe,CAAC,eAAuD;QACzE,IAAI,CAAC,gBAAgB,GAAG,eAAe,CAAC;QACxC,IAAI,CAAC,aAAa,EAAE,CAAC;IACvB,CAAC;IAED,IAAI,eAAe;QACjB,OAAO,IAAI,CAAC,gBAAgB,CAAC;IAC/B,CAAC;IAEQ,aAAa;QACpB,IAAI,CAAC,KAAK,CAAC;YACT,cAAc,EAAE,IAAI,CAAC,iBAAiB;YACtC,sBAAsB,EAAE,IAAI,CAAC,uBAAuB;YACpD,eAAe,EAAE,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,IAAI,CAAC;YAC/C,iBAAiB,EAAE,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,IAAI,CAAC;SACpD,EAAE,SAAS,EAAE,IAAI,CAAC,cAAc,CAAC,CAAC;IACrC,CAAC;CACF","sourcesContent":["// Copyright 2022 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport '../../../ui/components/icon_button/icon_button.js';\n\nimport * as i18n from '../../../core/i18n/i18n.js';\nimport * as UI from '../../../ui/legacy/legacy.js';\nimport {Directives, html, render, type TemplateResult} from '../../../ui/lit/lit.js';\nimport * as VisualLogging from '../../../ui/visual_logging/visual_logging.js';\n\nimport linearMemoryHighlightChipListStyles from './linearMemoryHighlightChipList.css.js';\nimport type {HighlightInfo} from './LinearMemoryViewerUtils.js';\n\nconst UIStrings = {\n  /**\n   * @description Tooltip text that appears when hovering over an inspected variable's button in the Linear Memory Highlight Chip List.\n   * Clicking the button changes the displayed slice of computer memory in the Linear Memory inspector to contain the inspected variable's bytes.\n   */\n  jumpToAddress: 'Jump to this memory',\n  /**\n   * @description Tooltip text that appears when hovering over an inspected variable's delete button in the Linear Memory Highlight Chip List.\n   * Clicking the delete button stops highlighting the variable's memory in the Linear Memory inspector.\n   * 'Memory' is a slice of bytes in the computer memory.\n   */\n  deleteHighlight: 'Stop highlighting this memory',\n} as const;\nconst str_ = i18n.i18n.registerUIStrings(\n    'panels/linear_memory_inspector/components/LinearMemoryHighlightChipList.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\nconst {classMap} = Directives;\n\ninterface ViewInput {\n  highlightInfos: HighlightInfo[];\n  focusedMemoryHighlight?: HighlightInfo;\n  onJumpToAddress: (address: number) => void;\n  onDeleteHighlight: (highlightInfo: HighlightInfo) => void;\n}\n\ntype View = (input: ViewInput, output: undefined, target: HTMLElement) => void;\n\nconst DEFAULT_VIEW: View = (input, output, target) => {\n  // Disabled until https://crbug.com/1079231 is fixed.\n  // clang-format off\n  render(html`\n    <style>${linearMemoryHighlightChipListStyles}</style>\n    <div class=\"highlight-chip-list\">\n      ${input.highlightInfos.map(highlightInfo => renderChip(highlightInfo, input))}\n    </div>`, target);\n  // clang-format on\n};\n\nfunction renderChip(highlightInfo: HighlightInfo, input: ViewInput): TemplateResult {\n  const expressionName = highlightInfo.name || '<anonymous>';\n  const expressionType = highlightInfo.type;\n  const isFocused = highlightInfo === input.focusedMemoryHighlight;\n  // Disabled until https://crbug.com/1079231 is fixed.\n  // clang-format off\n  return html`\n    <div class=${classMap({focused: isFocused, 'highlight-chip': true})}>\n      <button class=\"jump-to-highlight-button\"\n              title=${i18nString(UIStrings.jumpToAddress)}\n              jslog=${VisualLogging.action('linear-memory-inspector.jump-to-highlight')\n                         .track({click:true})}\n              @click=${input.onJumpToAddress(highlightInfo.startAddress)}>\n        <span class=\"source-code\">\n          <span class=\"value\">${expressionName}</span>\n          <span class=\"separator\">: </span>\n          <span>${expressionType}</span>\n        </span>\n      </button>\n      <div class=\"delete-highlight-container\">\n        <button class=\"delete-highlight-button\" title=${i18nString(UIStrings.deleteHighlight)}\n            jslog=${VisualLogging.action('linear-memory-inspector.delete-highlight')\n                       .track({click:true})}\n            @click=${input.onDeleteHighlight(highlightInfo)}>\n          <devtools-icon name=\"cross\" class=\"medium\">\n          </devtools-icon>\n        </button>\n      </div>\n    </div>`;\n    // clang-format off\n  }\n\nexport class LinearMemoryHighlightChipList extends UI.Widget.Widget {\n  #highlightedAreas: HighlightInfo[] = [];\n  #focusedMemoryHighlight?: HighlightInfo;\n  #jumpToAddress = (_: number): void => {};\n  #deleteHighlight = (_: HighlightInfo): void => {};\n  #view: View;\n\n  constructor(element?: HTMLElement, view = DEFAULT_VIEW) {\n    super(element, {useShadowDom: true});\n    this.#view = view;\n  }\n\n  set highlightInfos(highlightInfos: HighlightInfo[]) {\n    this.#highlightedAreas = highlightInfos;\n    this.requestUpdate();\n  }\n\n  get highlightInfos(): HighlightInfo[] {\n    return this.#highlightedAreas;\n  }\n\n  set focusedMemoryHighlight(focusedMemoryHighlight: HighlightInfo|undefined) {\n    this.#focusedMemoryHighlight = focusedMemoryHighlight;\n    this.requestUpdate();\n  }\n\n  get focusedMemoryHighlight(): HighlightInfo|undefined {\n    return this.#focusedMemoryHighlight;\n  }\n\n  set jumpToAddress(jumpToAddress: (address: number) => void) {\n    this.#jumpToAddress = jumpToAddress;\n    this.requestUpdate();\n  }\n\n  get jumpToAddress(): (address: number) => void {\n    return this.#jumpToAddress;\n  }\n\n  set deleteHighlight(deleteHighlight: (highlightInfo: HighlightInfo) => void) {\n    this.#deleteHighlight = deleteHighlight;\n    this.requestUpdate();\n  }\n\n  get deleteHighlight(): (highlightInfo: HighlightInfo) => void {\n    return this.#deleteHighlight;\n  }\n\n  override performUpdate(): void {\n    this.#view({\n      highlightInfos: this.#highlightedAreas,\n      focusedMemoryHighlight: this.#focusedMemoryHighlight,\n      onJumpToAddress: this.#jumpToAddress.bind(this),\n      onDeleteHighlight: this.#deleteHighlight.bind(this),\n    }, undefined, this.contentElement);\n  }\n}\n"]}