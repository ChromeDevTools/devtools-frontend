{"version":3,"file":"LinearMemoryHighlightChipList.js","sourceRoot":"","sources":["../../../../../../../front_end/panels/linear_memory_inspector/components/LinearMemoryHighlightChipList.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright 2022 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n/* eslint-disable @devtools/no-lit-render-outside-of-view */\n\nimport '../../../ui/kit/kit.js';\n\nimport * as i18n from '../../../core/i18n/i18n.js';\nimport {Directives, html, render, type TemplateResult} from '../../../ui/lit/lit.js';\nimport * as VisualLogging from '../../../ui/visual_logging/visual_logging.js';\n\nimport linearMemoryHighlightChipListStyles from './linearMemoryHighlightChipList.css.js';\nimport type {HighlightInfo} from './LinearMemoryViewerUtils.js';\n\nconst UIStrings = {\n  /**\n   * @description Tooltip text that appears when hovering over an inspected variable's button in the Linear Memory Highlight Chip List.\n   * Clicking the button changes the displayed slice of computer memory in the Linear Memory inspector to contain the inspected variable's bytes.\n   */\n  jumpToAddress: 'Jump to this memory',\n  /**\n   * @description Tooltip text that appears when hovering over an inspected variable's delete button in the Linear Memory Highlight Chip List.\n   * Clicking the delete button stops highlighting the variable's memory in the Linear Memory inspector.\n   * 'Memory' is a slice of bytes in the computer memory.\n   */\n  deleteHighlight: 'Stop highlighting this memory',\n} as const;\nconst str_ = i18n.i18n.registerUIStrings(\n    'panels/linear_memory_inspector/components/LinearMemoryHighlightChipList.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\nconst {classMap} = Directives;\n\nexport interface LinearMemoryHighlightChipListData {\n  highlightInfos: HighlightInfo[];\n  focusedMemoryHighlight?: HighlightInfo;\n  jumpToAddress?: (address: number) => void;\n  deleteHighlight?: (highlightInfo: HighlightInfo) => void;\n}\n\nexport class LinearMemoryHighlightChipList extends HTMLElement {\n  readonly #shadow = this.attachShadow({mode: 'open'});\n  #highlightedAreas: HighlightInfo[] = [];\n  #focusedMemoryHighlight?: HighlightInfo;\n  #jumpToAddress?: (address: number) => void;\n  #deleteHighlight?: (highlightInfo: HighlightInfo) => void;\n\n  set data(data: LinearMemoryHighlightChipListData) {\n    this.#highlightedAreas = data.highlightInfos;\n    this.#focusedMemoryHighlight = data.focusedMemoryHighlight;\n    this.#jumpToAddress = data.jumpToAddress;\n    this.#deleteHighlight = data.deleteHighlight;\n    this.#render();\n  }\n\n  #render(): void {\n    // Disabled until https://crbug.com/1079231 is fixed.\n    // clang-format off\n    render(html`\n      <style>${linearMemoryHighlightChipListStyles}</style>\n      <div class=\"highlight-chip-list\">\n        ${this.#highlightedAreas.map(highlightInfo => this.#createChip(highlightInfo))}\n      </div>`, this.#shadow);\n    // clang-format on\n  }\n\n  #createChip(highlightInfo: HighlightInfo): TemplateResult {\n    const expressionName = highlightInfo.name || '<anonymous>';\n    const expressionType = highlightInfo.type;\n    const isFocused = highlightInfo === this.#focusedMemoryHighlight;\n    // Disabled until https://crbug.com/1079231 is fixed.\n    // clang-format off\n    return html`\n      <div class=${classMap({focused: isFocused, 'highlight-chip': true})}>\n        <button class=\"jump-to-highlight-button\"\n                title=${i18nString(UIStrings.jumpToAddress)}\n                jslog=${VisualLogging.action('linear-memory-inspector.jump-to-highlight')\n                          .track({click:true})}\n                @click=${() => this.#onJumpToHighlightClick(highlightInfo.startAddress)}>\n          <span class=\"source-code\">\n            <span class=\"value\">${expressionName}</span>\n            <span class=\"separator\">: </span>\n            <span>${expressionType}</span>\n          </span>\n        </button>\n        <div class=\"delete-highlight-container\">\n          <button class=\"delete-highlight-button\" title=${i18nString(UIStrings.deleteHighlight)}\n              jslog=${VisualLogging.action('linear-memory-inspector.delete-highlight')\n                          .track({click:true})}\n              @click=${() => this.#onDeleteHighlightClick(highlightInfo)}>\n            <devtools-icon name=\"cross\" class=\"medium\">\n            </devtools-icon>\n          </button>\n        </div>\n      </div>`;\n    // clang-format off\n  }\n\n  #onJumpToHighlightClick(startAddress: number): void {\n    this.#jumpToAddress?.(startAddress);\n  }\n\n  #onDeleteHighlightClick(highlight: HighlightInfo): void {\n    this.#deleteHighlight?.(highlight);\n  }\n}\n\ncustomElements.define(\n    'devtools-linear-memory-highlight-chip-list', LinearMemoryHighlightChipList);\n\ndeclare global {\n\n  interface HTMLElementTagNameMap {\n    'devtools-linear-memory-highlight-chip-list': LinearMemoryHighlightChipList;\n  }\n}\n"]}