{"version":3,"file":"ValueInterpreterSettings.js","sourceRoot":"","sources":["../../../../../../../front_end/panels/linear_memory_inspector/components/ValueInterpreterSettings.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright 2020 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as i18n from '../../../core/i18n/i18n.js';\nimport * as Platform from '../../../core/platform/platform.js';\nimport * as UI from '../../../ui/legacy/legacy.js';\nimport * as Lit from '../../../ui/lit/lit.js';\nimport * as VisualLogging from '../../../ui/visual_logging/visual_logging.js';\n\nimport {ValueType, valueTypeToLocalizedString} from './ValueInterpreterDisplayUtils.js';\nimport valueInterpreterSettingsStyles from './valueInterpreterSettings.css.js';\n\nconst {render, html} = Lit;\n\nconst UIStrings = {\n  /**\n   * @description Name of a group of selectable value types that do not fall under integer and floating point value types, e.g. Pointer32. The group appears name appears under the Value Interpreter Settings.\n   */\n  otherGroup: 'Other',\n} as const;\nconst str_ =\n    i18n.i18n.registerUIStrings('panels/linear_memory_inspector/components/ValueInterpreterSettings.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\n\nconst enum ValueTypeGroup {\n  INTEGER = 'Integer',\n  FLOAT = 'Floating point',\n  OTHER = 'Other',\n}\n\nconst GROUP_TO_TYPES = new Map(\n    [\n      [ValueTypeGroup.INTEGER, [ValueType.INT8, ValueType.INT16, ValueType.INT32, ValueType.INT64]],\n      [ValueTypeGroup.FLOAT, [ValueType.FLOAT32, ValueType.FLOAT64]],\n      [ValueTypeGroup.OTHER, [ValueType.POINTER32, ValueType.POINTER64]],\n    ],\n);\n\nfunction valueTypeGroupToLocalizedString(group: ValueTypeGroup): string {\n  if (group === ValueTypeGroup.OTHER) {\n    return i18nString(UIStrings.otherGroup);\n  }\n\n  // The remaining group type names should not be localized.\n  return group;\n}\n\nexport interface ViewInput {\n  valueTypes: Set<ValueType>;\n  onToggle: (type: ValueType, checked: boolean) => void;\n}\n\nexport const DEFAULT_VIEW = (input: ViewInput, _output: undefined, target: HTMLElement): void => {\n  // clang-format off\n    render(html`\n      <style>${valueInterpreterSettingsStyles}</style>\n      <div class=\"settings\" jslog=${VisualLogging.pane('settings')}>\n       ${[...GROUP_TO_TYPES.keys()].map(group => {\n        const types = GROUP_TO_TYPES.get(group) ?? [];\n        return html`\n          <div class=\"value-types-selection\">\n            <span class=\"group\">${valueTypeGroupToLocalizedString(group)}</span>\n            ${types.map(type => {\n            return html`\n                <devtools-checkbox\n                  title=${valueTypeToLocalizedString(type)}\n                  ?checked=${input.valueTypes.has(type)}\n                  @change=${(e: Event) => {\n                    const checkbox = e.target as HTMLInputElement;\n                    input.onToggle(type, checkbox.checked);\n                  }} jslog=${VisualLogging.toggle().track({change: true}).context(Platform.StringUtilities.toKebabCase(type))}\n                  }>${valueTypeToLocalizedString(type)}</devtools-checkbox>\n         `;})}\n          </div>\n        `;})}\n      </div>\n      `, target);\n};\n// clang-format on\n\nexport type View = typeof DEFAULT_VIEW;\n\nexport class ValueInterpreterSettings extends UI.Widget.Widget {\n  #view: View;\n  #valueTypes = new Set<ValueType>();\n  #onToggle: (type: ValueType, checked: boolean) => void = () => {};\n\n  constructor(element?: HTMLElement, view = DEFAULT_VIEW) {\n    super(element);\n    this.#view = view;\n  }\n\n  get valueTypes(): Set<ValueType> {\n    return this.#valueTypes;\n  }\n\n  set valueTypes(value: Set<ValueType>) {\n    this.#valueTypes = value;\n    this.requestUpdate();\n  }\n\n  get onToggle(): (type: ValueType, checked: boolean) => void {\n    return this.#onToggle;\n  }\n\n  set onToggle(value: (type: ValueType, checked: boolean) => void) {\n    this.#onToggle = value;\n    this.requestUpdate();\n  }\n\n  override performUpdate(): void {\n    const viewInput = {\n      valueTypes: this.#valueTypes,\n      onToggle: this.#onToggle,\n    };\n    this.#view(viewInput, undefined, this.contentElement);\n  }\n}\n"]}