{"version":3,"file":"PlayerMessagesView.js","sourceRoot":"","sources":["../../../../../../front_end/panels/media/PlayerMessagesView.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright 2020 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n/* eslint-disable @devtools/no-imperative-dom-api */\n\nimport '../../ui/legacy/legacy.js';\n\nimport type * as Common from '../../core/common/common.js';\nimport * as i18n from '../../core/i18n/i18n.js';\nimport type * as Protocol from '../../generated/protocol.js';\nimport * as UI from '../../ui/legacy/legacy.js';\nimport * as VisualLogging from '../../ui/visual_logging/visual_logging.js';\n\nimport playerMessagesViewStyles from './playerMessagesView.css.js';\n\nconst UIStrings = {\n  /**\n   * @description A context menu item in the Console View of the Console panel\n   */\n  default: 'Default',\n  /**\n   * @description Text in Network Throttling Selector of the Network panel\n   */\n  custom: 'Custom',\n  /**\n   * @description Text for everything\n   */\n  all: 'All',\n  /**\n   * @description Text for errors\n   */\n  error: 'Error',\n  /**\n   * @description Text to indicate an item is a warning\n   */\n  warning: 'Warning',\n  /**\n   * @description Sdk console message message level info of level Labels in Console View of the Console panel\n   */\n  info: 'Info',\n  /**\n   * @description Debug log level\n   */\n  debug: 'Debug',\n  /**\n   * @description Label for selecting between the set of log levels to show.\n   */\n  logLevel: 'Log level:',\n  /**\n   * @description Default text for user-text-entry for searching log messages.\n   */\n  filterByLogMessages: 'Filter by log messages',\n  /**\n   * @description The label for the group name that this error belongs to.\n   */\n  errorGroupLabel: 'Error Group:',\n  /**\n   * @description The label for the numeric code associated with this error.\n   */\n  errorCodeLabel: 'Error Code:',\n  /**\n   * @description The label for extra data associated with an error.\n   */\n  errorDataLabel: 'Data:',\n  /**\n   * @description The label for the stacktrace associated with the error.\n   */\n  errorStackLabel: 'Stacktrace:',\n  /**\n   * @description The label for a root cause error associated with this error.\n   */\n  errorCauseLabel: 'Caused by:',\n} as const;\nconst str_ = i18n.i18n.registerUIStrings('panels/media/PlayerMessagesView.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\n\nconst enum MessageLevelBitfield {\n  ERROR = 0b0001,\n  WARNING = 0b0010,\n  INFO = 0b0100,\n  DEBUG = 0b1000,\n\n  DEFAULT = 0b0111,  // Error, Warning, Info\n  ALL = 0b1111,      // Error, Warning, Info, Debug\n  CUSTOM = 0,\n}\n\ninterface SelectableLevel {\n  title: string;\n  value: MessageLevelBitfield;\n  stringValue: string;\n  selectable?: boolean;\n  overwrite?: boolean;\n}\n\nclass MessageLevelSelector implements UI.SoftDropDown.Delegate<SelectableLevel> {\n  private readonly items: UI.ListModel.ListModel<SelectableLevel>;\n  private readonly view: PlayerMessagesView;\n  private readonly itemMap: Map<number, SelectableLevel>;\n  private hiddenLevels: string[];\n  private bitFieldValue: MessageLevelBitfield;\n  readonly #defaultTitle: Common.UIString.LocalizedString;\n  private readonly customTitle: Common.UIString.LocalizedString;\n  private readonly allTitle: Common.UIString.LocalizedString;\n  elementsForItems: WeakMap<SelectableLevel, HTMLElement>;\n\n  constructor(items: UI.ListModel.ListModel<SelectableLevel>, view: PlayerMessagesView) {\n    this.items = items;\n    this.view = view;\n    this.itemMap = new Map();\n\n    this.hiddenLevels = [];\n\n    this.bitFieldValue = MessageLevelBitfield.DEFAULT;\n\n    this.#defaultTitle = i18nString(UIStrings.default);\n    this.customTitle = i18nString(UIStrings.custom);\n    this.allTitle = i18nString(UIStrings.all);\n\n    this.elementsForItems = new WeakMap();\n  }\n\n  defaultTitle(): Common.UIString.LocalizedString {\n    return this.#defaultTitle;\n  }\n\n  setDefault(dropdown: UI.SoftDropDown.SoftDropDown<SelectableLevel>): void {\n    dropdown.selectItem(this.items.at(0));\n  }\n\n  populate(): void {\n    this.items.insert(this.items.length, {\n      title: this.#defaultTitle,\n      overwrite: true,\n      stringValue: '',\n      value: MessageLevelBitfield.DEFAULT,\n      selectable: undefined,\n    });\n\n    this.items.insert(this.items.length, {\n      title: this.allTitle,\n      overwrite: true,\n      stringValue: '',\n      value: MessageLevelBitfield.ALL,\n      selectable: undefined,\n    });\n\n    this.items.insert(this.items.length, {\n      title: i18nString(UIStrings.error),\n      overwrite: false,\n      stringValue: 'error',\n      value: MessageLevelBitfield.ERROR,\n      selectable: undefined,\n    });\n\n    this.items.insert(this.items.length, {\n      title: i18nString(UIStrings.warning),\n      overwrite: false,\n      stringValue: 'warning',\n      value: MessageLevelBitfield.WARNING,\n      selectable: undefined,\n    });\n\n    this.items.insert(this.items.length, {\n      title: i18nString(UIStrings.info),\n      overwrite: false,\n      stringValue: 'info',\n      value: MessageLevelBitfield.INFO,\n      selectable: undefined,\n    });\n\n    this.items.insert(this.items.length, {\n      title: i18nString(UIStrings.debug),\n      overwrite: false,\n      stringValue: 'debug',\n      value: MessageLevelBitfield.DEBUG,\n      selectable: undefined,\n    });\n  }\n\n  private updateCheckMarks(): void {\n    this.hiddenLevels = [];\n    for (const [key, item] of this.itemMap) {\n      if (!item.overwrite) {\n        const elementForItem = this.elementsForItems.get(item);\n        if (elementForItem?.firstChild) {\n          elementForItem.firstChild.remove();\n        }\n        if (elementForItem && key & this.bitFieldValue) {\n          UI.UIUtils.createTextChild(elementForItem.createChild('div'), 'âœ“');\n        } else {\n          this.hiddenLevels.push(item.stringValue);\n        }\n      }\n    }\n  }\n\n  titleFor(item: SelectableLevel): string {\n    // This would make a lot more sense to have in |itemSelected|, but this\n    // method gets called first.\n    if (item.overwrite) {\n      this.bitFieldValue = item.value;\n    } else {\n      this.bitFieldValue ^= item.value;\n    }\n\n    if (this.bitFieldValue === MessageLevelBitfield.DEFAULT) {\n      return this.#defaultTitle;\n    }\n\n    if (this.bitFieldValue === MessageLevelBitfield.ALL) {\n      return this.allTitle;\n    }\n\n    const potentialMatch = this.itemMap.get(this.bitFieldValue);\n    if (potentialMatch) {\n      return potentialMatch.title;\n    }\n\n    return this.customTitle;\n  }\n\n  createElementForItem(item: SelectableLevel): Element {\n    const element = document.createElement('div');\n    const shadowRoot = UI.UIUtils.createShadowRootWithCoreStyles(element, {cssFile: playerMessagesViewStyles});\n    const container = shadowRoot.createChild('div', 'media-messages-level-dropdown-element');\n    const checkBox = container.createChild('div', 'media-messages-level-dropdown-checkbox');\n    const text = container.createChild('span', 'media-messages-level-dropdown-text');\n    UI.UIUtils.createTextChild(text, item.title);\n    this.elementsForItems.set(item, checkBox);\n    this.itemMap.set(item.value, item);\n    this.updateCheckMarks();\n    this.view.regenerateMessageDisplayCss(this.hiddenLevels);\n    return element;\n  }\n\n  isItemSelectable(_item: SelectableLevel): boolean {\n    return true;\n  }\n\n  itemSelected(_item: SelectableLevel|null): void {\n    this.updateCheckMarks();\n    this.view.regenerateMessageDisplayCss(this.hiddenLevels);\n  }\n\n  highlightedItemChanged(\n      _from: SelectableLevel|null, _to: SelectableLevel|null, _fromElement: Element|null,\n      _toElement: Element|null): void {\n  }\n}\n\nexport class PlayerMessagesView extends UI.Widget.VBox {\n  private readonly headerPanel: HTMLElement;\n  private readonly bodyPanel: HTMLElement;\n  private messageLevelSelector?: MessageLevelSelector;\n\n  constructor() {\n    super({jslog: `${VisualLogging.pane('messages')}`});\n    this.registerRequiredCSS(playerMessagesViewStyles);\n\n    this.headerPanel = this.contentElement.createChild('div', 'media-messages-header');\n    this.bodyPanel = this.contentElement.createChild('div', 'media-messages-body');\n\n    this.buildToolbar();\n  }\n\n  private buildToolbar(): void {\n    const toolbar = this.headerPanel.createChild('devtools-toolbar', 'media-messages-toolbar');\n    toolbar.appendText(i18nString(UIStrings.logLevel));\n    toolbar.appendToolbarItem(this.createDropdown());\n    toolbar.appendSeparator();\n    toolbar.appendToolbarItem(this.createFilterInput());\n  }\n\n  private createDropdown(): UI.Toolbar.ToolbarItem {\n    const items = new UI.ListModel.ListModel<SelectableLevel>();\n    this.messageLevelSelector = new MessageLevelSelector(items, this);\n    const dropDown = new UI.SoftDropDown.SoftDropDown<SelectableLevel>(items, this.messageLevelSelector, 'log-level');\n    dropDown.setRowHeight(18);\n\n    this.messageLevelSelector.populate();\n    this.messageLevelSelector.setDefault(dropDown);\n\n    const dropDownItem = new UI.Toolbar.ToolbarItem(dropDown.element);\n    dropDownItem.element.classList.add('toolbar-has-dropdown');\n    dropDownItem.setEnabled(true);\n    dropDownItem.setTitle(this.messageLevelSelector.defaultTitle());\n    UI.ARIAUtils.setLabel(\n        dropDownItem.element, `${i18nString(UIStrings.logLevel)} ${this.messageLevelSelector.defaultTitle()}`);\n    return dropDownItem;\n  }\n\n  private createFilterInput(): UI.Toolbar.ToolbarInput {\n    const filterInput = new UI.Toolbar.ToolbarFilter(i18nString(UIStrings.filterByLogMessages), 1, 1);\n    filterInput.addEventListener(UI.Toolbar.ToolbarInput.Event.TEXT_CHANGED, (data: {data: string}) => {\n      this.filterByString(data as {\n        data: string,\n      });\n    }, this);\n    return filterInput;\n  }\n\n  regenerateMessageDisplayCss(hiddenLevels: string[]): void {\n    const messages = this.bodyPanel.getElementsByClassName('media-messages-message-container');\n    for (const message of messages) {\n      if (this.matchesHiddenLevels(message, hiddenLevels)) {\n        message.classList.add('media-messages-message-unselected');\n      } else {\n        message.classList.remove('media-messages-message-unselected');\n      }\n    }\n  }\n\n  private matchesHiddenLevels(element: Element, hiddenLevels: string[]): boolean {\n    for (const level of hiddenLevels) {\n      if (element.classList.contains('media-message-' + level)) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  private filterByString(userStringData: {data: string}): void {\n    const userString = userStringData.data;\n    const messages = this.bodyPanel.getElementsByClassName('media-messages-message-container');\n\n    for (const message of messages) {\n      if (userString === '') {\n        message.classList.remove('media-messages-message-filtered');\n      } else if (message.textContent?.includes(userString)) {\n        message.classList.remove('media-messages-message-filtered');\n      } else {\n        message.classList.add('media-messages-message-filtered');\n      }\n    }\n  }\n\n  addMessage(message: Protocol.Media.PlayerMessage): void {\n    const container =\n        this.bodyPanel.createChild('div', 'media-messages-message-container media-message-' + message.level);\n    UI.UIUtils.createTextChild(container, message.message);\n  }\n\n  private errorToDiv(error: Protocol.Media.PlayerError): Element {\n    const entry = UI.Fragment.Fragment.build`\n    <div class=\"status-error-box\">\n    <div class=\"status-error-field-labeled\">\n      <span class=\"status-error-field-label\" $=\"status-error-group\"></span>\n      <span>${error.errorType}</span>\n    </div>\n    <div class=\"status-error-field-labeled\">\n      <span class=\"status-error-field-label\" $=\"status-error-code\"></span>\n      <span>${error.code}</span>\n    </div>\n    <div class=\"status-error-field-labeled\" $=\"status-error-data\">\n    </div>\n    <div class=\"status-error-field-labeled\" $=\"status-error-stack\">\n    </div>\n    <div class=\"status-error-field-labeled\" $=\"status-error-cause\">\n    </div>\n    `;\n\n    entry.$('status-error-group').textContent = i18nString(UIStrings.errorGroupLabel);\n    entry.$('status-error-code').textContent = i18nString(UIStrings.errorCodeLabel);\n\n    if (Object.keys(error.data).length !== 0) {\n      const label = entry.$('status-error-data').createChild('span', 'status-error-field-label');\n      UI.UIUtils.createTextChild(label, i18nString(UIStrings.errorDataLabel));\n      const dataContent = entry.$('status-error-data').createChild('div');\n      for (const [key, value] of Object.entries(error.data)) {\n        const datumContent = dataContent.createChild('div');\n        UI.UIUtils.createTextChild(datumContent, `${key}: ${value}`);\n      }\n    }\n\n    if (error.stack.length !== 0) {\n      const label = entry.$('status-error-stack').createChild('span', 'status-error-field-label');\n      UI.UIUtils.createTextChild(label, i18nString(UIStrings.errorStackLabel));\n      const stackContent = entry.$('status-error-stack').createChild('div');\n      for (const stackEntry of error.stack) {\n        const frameBox = stackContent.createChild('div');\n        UI.UIUtils.createTextChild(frameBox, `${stackEntry.file}:${stackEntry.line}`);\n      }\n    }\n\n    if (error.cause.length !== 0) {\n      const label = entry.$('status-error-cause').createChild('span', 'status-error-field-label');\n      UI.UIUtils.createTextChild(label, i18nString(UIStrings.errorCauseLabel));\n      entry.$('status-error-cause').appendChild(this.errorToDiv(error.cause[0]));\n    }\n\n    return entry.element();\n  }\n\n  addError(error: Protocol.Media.PlayerError): void {\n    const container = this.bodyPanel.createChild('div', 'media-messages-message-container media-message-error');\n    container.appendChild(this.errorToDiv(error));\n  }\n}\n"]}