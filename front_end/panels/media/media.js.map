{
  "version": 3,
  "sources": ["../../../../../../front_end/panels/media/EventDisplayTable.ts", "eventDisplayTable.css.js", "../../../../../../front_end/panels/media/MainView.ts", "../../../../../../front_end/panels/media/MediaModel.ts", "../../../../../../front_end/panels/media/PlayerDetailView.ts", "../../../../../../front_end/panels/media/EventTimelineView.ts", "../../../../../../front_end/panels/media/TickingFlameChart.ts", "../../../../../../front_end/panels/media/TickingFlameChartHelpers.ts", "../../../../../../front_end/panels/media/PlayerMessagesView.ts", "playerMessagesView.css.js", "../../../../../../front_end/panels/media/PlayerPropertiesView.ts", "playerPropertiesView.css.js", "../../../../../../front_end/panels/media/PlayerListView.ts", "playerListView.css.js"],
  "sourcesContent": ["// Copyright 2019 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n/* eslint-disable @devtools/no-imperative-dom-api */\n\nimport * as i18n from '../../core/i18n/i18n.js';\nimport * as DataGrid from '../../ui/legacy/components/data_grid/data_grid.js';\nimport * as SourceFrame from '../../ui/legacy/components/source_frame/source_frame.js';\nimport * as UI from '../../ui/legacy/legacy.js';\nimport * as VisualLogging from '../../ui/visual_logging/visual_logging.js';\n\nimport eventDisplayTableStyles from './eventDisplayTable.css.js';\nimport type {PlayerEvent} from './MediaModel.js';\n\nconst UIStrings = {\n  /**\n   * @description Text for timestamps of items\n   */\n  timestamp: 'Timestamp',\n  /**\n   * @description The column header for event names.\n   */\n  eventName: 'Event name',\n  /**\n   * @description Text for the value of something\n   */\n  value: 'Value',\n  /**\n   * @description The accessible name of a table that displays information about events that occurred\n   * while a video/media player was present on the page.\n   */\n  eventDisplay: 'Event display',\n} as const;\nconst str_ = i18n.i18n.registerUIStrings('panels/media/EventDisplayTable.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\nexport interface EventDisplayColumnConfig {\n  id: string;\n  title: string;\n  sortable: boolean;\n  weight?: number;\n}\n\nexport const enum MediaEventColumnKeys {\n  TIMESTAMP = 'display-timestamp',\n  EVENT = 'event',\n  VALUE = 'value',\n}\n\nexport class EventNode extends DataGrid.DataGrid.DataGridNode<EventNode> {\n  private expandableElement: SourceFrame.JSONView.JSONView|null;\n\n  constructor(event: PlayerEvent) {\n    super(event, false);\n    this.expandableElement = null;\n  }\n\n  override createCell(columnId: string): HTMLElement {\n    const cell = this.createTD(columnId);\n    const cellData = this.data[columnId] as string;\n    if (columnId === MediaEventColumnKeys.VALUE) {\n      const enclosed = cell.createChild('div', 'event-display-table-contents-json-wrapper');\n      this.expandableElement =\n          new SourceFrame.JSONView.JSONView(new SourceFrame.JSONView.ParsedJSON(cellData, '', ''), true);\n      this.expandableElement.markAsRoot();\n      this.expandableElement.show(enclosed);\n    } else {\n      cell.classList.add('event-display-table-basic-text-table-entry');\n      UI.UIUtils.createTextChild(cell, cellData);\n    }\n    return cell;\n  }\n}\n\nexport class PlayerEventsView extends UI.Widget.VBox {\n  private readonly dataGrid: DataGrid.DataGrid.DataGridImpl<EventNode>;\n  private firstEventTime: number;\n\n  constructor() {\n    super({jslog: `${VisualLogging.pane('events')}`});\n    this.registerRequiredCSS(eventDisplayTableStyles);\n\n    // Set up element styles.\n\n    this.contentElement.classList.add('event-display-table-contents-table-container');\n\n    this.dataGrid = this.createDataGrid([\n      {\n        id: MediaEventColumnKeys.TIMESTAMP,\n        title: i18nString(UIStrings.timestamp),\n        weight: 1,\n        sortable: false,\n      },\n      {id: MediaEventColumnKeys.EVENT, title: i18nString(UIStrings.eventName), weight: 2, sortable: false},\n      {\n        id: MediaEventColumnKeys.VALUE,\n        title: i18nString(UIStrings.value),\n        weight: 7,\n        sortable: false,\n      },\n    ]);\n\n    this.firstEventTime = 0;\n    this.dataGrid.setStriped(true);\n    this.dataGrid.asWidget().show(this.contentElement);\n  }\n\n  private createDataGrid(headers: EventDisplayColumnConfig[]): DataGrid.DataGrid.DataGridImpl<EventNode> {\n    const gridColumnDescs = [];\n    for (const headerDesc of headers) {\n      gridColumnDescs.push(PlayerEventsView.convertToGridDescriptor(headerDesc));\n    }\n\n    // TODO(tmathmeyer) SortableDataGrid doesn't play nice with nested JSON\n    // renderers, since they can change size, and this breaks the visible\n    // element computation in ViewportDataGrid.\n    const datagrid = new DataGrid.DataGrid.DataGridImpl({\n      displayName: i18nString(UIStrings.eventDisplay),\n      columns: gridColumnDescs,\n      deleteCallback: undefined,\n      refreshCallback: undefined,\n    });\n    datagrid.asWidget().contentElement.classList.add('no-border-top-datagrid');\n    return datagrid;\n  }\n\n  onEvent(event: PlayerEvent): void {\n    if (this.firstEventTime === 0 && typeof event.timestamp === 'number') {\n      this.firstEventTime = event.timestamp;\n    }\n\n    event = this.subtractFirstEventTime(event);\n    const stringified = event.value;\n    try {\n      const json = JSON.parse(stringified);\n      event.event = json.event;\n      delete json['event'];\n      event.value = json;\n      const node = new EventNode(event);\n      const scroll = this.dataGrid.scrollContainer;\n      const isAtBottom = scroll.scrollTop === (scroll.scrollHeight - scroll.offsetHeight);\n      this.dataGrid.rootNode().appendChild(node as DataGrid.DataGrid.DataGridNode<EventNode>);\n      if (isAtBottom) {\n        scroll.scrollTop = scroll.scrollHeight;\n      }\n    } catch {\n      // If this is a legacy message event, ignore it for now until they\n      // are handled.\n    }\n  }\n\n  private subtractFirstEventTime(event: PlayerEvent): PlayerEvent {\n    if (typeof event.timestamp === 'number') {\n      event.displayTimestamp = (event.timestamp - this.firstEventTime).toFixed(3);\n    }\n    return event;\n  }\n\n  private static convertToGridDescriptor(columnConfig: EventDisplayColumnConfig): DataGrid.DataGrid.ColumnDescriptor {\n    return {\n      id: columnConfig.id,\n      title: columnConfig.title,\n      sortable: columnConfig.sortable,\n      weight: columnConfig.weight || 0,\n      sort: DataGrid.DataGrid.Order.Ascending,\n    } as DataGrid.DataGrid.ColumnDescriptor;\n  }\n}\n", "// Copyright 2025 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n// IMPORTANT: this file is auto generated. Please do not edit this file.\n/* istanbul ignore file */\nexport default `/*\n * Copyright 2019 The Chromium Authors\n * Use of this source code is governed by a BSD-style license that can be\n * found in the LICENSE file.\n */\n\n.no-border-top-datagrid > .data-grid {\n  /* make sure there is no top border, it ruins the menu view */\n  border-top: 0;\n}\n\n.event-display-table-contents-table-container > .widget > .data-grid {\n  height: 100%;\n}\n\n.data-grid .event-display-table-basic-text-table-entry {\n  line-height: 26px;\n}\n\n.event-display-table-contents-json-wrapper > .json-view {\n  overflow: visible;\n}\n\n/*# sourceURL=${import.meta.resolve('./eventDisplayTable.css')} */`;", "// Copyright 2019 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n/* eslint-disable @devtools/no-imperative-dom-api */\n\nimport type * as Common from '../../core/common/common.js';\nimport * as i18n from '../../core/i18n/i18n.js';\nimport type * as Platform from '../../core/platform/platform.js';\nimport * as SDK from '../../core/sdk/sdk.js';\nimport type * as Protocol from '../../generated/protocol.js';\nimport * as UI from '../../ui/legacy/legacy.js';\n\nimport {Events, MediaModel, type PlayerEvent} from './MediaModel.js';\nimport {PlayerDetailView} from './PlayerDetailView.js';\nimport {PlayerListView} from './PlayerListView.js';\n\nconst UIStrings = {\n  /**\n   * @description Text to show if no media player has been selected\n   * A media player can be an audio and video source of a page.\n   */\n  noPlayerDetailsSelected: 'No media player selected',\n  /**\n   * @description Text to instruct the user on how to view media player details\n   * A media player can be an audio and video source of a page.\n   */\n  selectToViewDetails: 'Select a media player to inspect its details.',\n  /**\n   * @description Text to show if no player can be shown\n   * A media player can be an audio and video source of a page.\n   */\n  noMediaPlayer: 'No media player',\n  /**\n   * @description Text to explain this panel\n   * A media player can be an audio and video source of a page.\n   */\n  mediaPlayerDescription: 'On this page you can view and export media player details.',\n} as const;\nconst str_ = i18n.i18n.registerUIStrings('panels/media/MainView.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\n\nconst MEDIA_PLAYER_EXPLANATION_URL =\n    'https://developer.chrome.com/docs/devtools/media-panel#hide-show' as Platform.DevToolsPath.UrlString;\n\nexport interface TriggerHandler {\n  onProperty(property: Protocol.Media.PlayerProperty): void;\n  onError(error: Protocol.Media.PlayerError): void;\n  onMessage(message: Protocol.Media.PlayerMessage): void;\n  onEvent(event: PlayerEvent): void;\n}\n\nexport interface TriggerDispatcher {\n  onProperty(playerID: string, property: Protocol.Media.PlayerProperty): void;\n  onError(playerID: string, error: Protocol.Media.PlayerError): void;\n  onMessage(playerID: string, message: Protocol.Media.PlayerMessage): void;\n  onEvent(playerID: string, event: PlayerEvent): void;\n}\n\nclass PlayerDataCollection implements TriggerHandler {\n  private readonly properties: Map<string, string>;\n  private readonly messages: Protocol.Media.PlayerMessage[];\n  private readonly events: PlayerEvent[];\n  private readonly errors: Protocol.Media.PlayerError[];\n\n  constructor() {\n    this.properties = new Map();\n    this.messages = [];\n    this.events = [];\n    this.errors = [];\n  }\n\n  onProperty(property: Protocol.Media.PlayerProperty): void {\n    this.properties.set(property.name, property.value);\n  }\n\n  onError(error: Protocol.Media.PlayerError): void {\n    this.errors.push(error);\n  }\n\n  onMessage(message: Protocol.Media.PlayerMessage): void {\n    this.messages.push(message);\n  }\n\n  onEvent(event: PlayerEvent): void {\n    this.events.push(event);\n  }\n\n  export(): {\n    properties: Map<string, string>,\n    messages: Protocol.Media.PlayerMessage[],\n    events: PlayerEvent[],\n    errors: Protocol.Media.PlayerError[],\n  } {\n    return {properties: this.properties, messages: this.messages, events: this.events, errors: this.errors};\n  }\n}\n\nexport class PlayerDataDownloadManager implements TriggerDispatcher {\n  private readonly playerDataCollection: Map<string, PlayerDataCollection>;\n  constructor() {\n    this.playerDataCollection = new Map();\n  }\n\n  addPlayer(playerID: string): void {\n    this.playerDataCollection.set(playerID, new PlayerDataCollection());\n  }\n\n  onProperty(playerID: string, property: Protocol.Media.PlayerProperty): void {\n    const playerProperty = this.playerDataCollection.get(playerID);\n    if (!playerProperty) {\n      return;\n    }\n\n    playerProperty.onProperty(property);\n  }\n\n  onError(playerID: string, error: Protocol.Media.PlayerError): void {\n    const playerProperty = this.playerDataCollection.get(playerID);\n    if (!playerProperty) {\n      return;\n    }\n\n    playerProperty.onError(error);\n  }\n\n  onMessage(playerID: string, message: Protocol.Media.PlayerMessage): void {\n    const playerProperty = this.playerDataCollection.get(playerID);\n    if (!playerProperty) {\n      return;\n    }\n\n    playerProperty.onMessage(message);\n  }\n\n  onEvent(playerID: string, event: PlayerEvent): void {\n    const playerProperty = this.playerDataCollection.get(playerID);\n    if (!playerProperty) {\n      return;\n    }\n\n    playerProperty.onEvent(event);\n  }\n\n  exportPlayerData(playerID: string): {\n    properties: Map<string, string>,\n    messages: Protocol.Media.PlayerMessage[],\n    events: PlayerEvent[],\n    errors: Protocol.Media.PlayerError[],\n  } {\n    const playerProperty = this.playerDataCollection.get(playerID);\n    if (!playerProperty) {\n      throw new Error('Unable to find player');\n    }\n\n    return playerProperty.export();\n  }\n\n  deletePlayer(playerID: string): void {\n    this.playerDataCollection.delete(playerID);\n  }\n}\n\nexport class MainView extends UI.Panel.PanelWithSidebar implements SDK.TargetManager.SDKModelObserver<MediaModel> {\n  private detailPanels: Map<string, PlayerDetailView>;\n  private deletedPlayers: Set<string>;\n  private readonly downloadStore: PlayerDataDownloadManager;\n  private readonly sidebar: PlayerListView;\n  #playerIdsToPlayers: Map<string, Protocol.Media.Player>;\n  #domNodeIdsToPlayerIds: Map<Protocol.DOM.BackendNodeId, string>;\n  #placeholder: UI.EmptyWidget.EmptyWidget;\n  readonly #initialPlayersLoadedPromise: Promise<void>;\n  #initialPlayersLoadedPromiseResolve: () => void = () => {};\n\n  constructor(downloadStore: PlayerDataDownloadManager = new PlayerDataDownloadManager()) {\n    super('media');\n    this.detailPanels = new Map();\n    this.#playerIdsToPlayers = new Map();\n    this.#domNodeIdsToPlayerIds = new Map();\n    this.#initialPlayersLoadedPromise = new Promise(resolve => {\n      this.#initialPlayersLoadedPromiseResolve = resolve;\n    });\n\n    this.deletedPlayers = new Set();\n\n    this.downloadStore = downloadStore;\n\n    this.sidebar = new PlayerListView(this);\n    this.sidebar.show(this.panelSidebarElement());\n    this.splitWidget().hideSidebar();\n\n    this.#placeholder =\n        new UI.EmptyWidget.EmptyWidget(i18nString(UIStrings.noMediaPlayer), UIStrings.mediaPlayerDescription);\n    this.#placeholder.show(this.mainElement());\n    this.#placeholder.link = MEDIA_PLAYER_EXPLANATION_URL;\n\n    SDK.TargetManager.TargetManager.instance().observeModels(MediaModel, this, {scoped: true});\n  }\n\n  renderMainPanel(playerID: string): void {\n    if (!this.detailPanels.has(playerID)) {\n      return;\n    }\n    const mainWidget = this.splitWidget().mainWidget();\n    if (mainWidget) {\n      mainWidget.detachChildWidgets();\n    }\n    this.detailPanels.get(playerID)?.show(this.mainElement());\n  }\n\n  override wasShown(): void {\n    super.wasShown();\n    for (const model of SDK.TargetManager.TargetManager.instance().models(MediaModel, {scoped: true})) {\n      this.addEventListeners(model);\n    }\n  }\n\n  override willHide(): void {\n    super.willHide();\n    for (const model of SDK.TargetManager.TargetManager.instance().models(MediaModel, {scoped: true})) {\n      this.removeEventListeners(model);\n    }\n  }\n\n  modelAdded(model: MediaModel): void {\n    if (this.isShowing()) {\n      this.addEventListeners(model);\n    }\n  }\n\n  modelRemoved(model: MediaModel): void {\n    this.removeEventListeners(model);\n  }\n\n  private addEventListeners(mediaModel: MediaModel): void {\n    mediaModel.ensureEnabled();\n    mediaModel.addEventListener(Events.PLAYER_PROPERTIES_CHANGED, this.propertiesChanged, this);\n    mediaModel.addEventListener(Events.PLAYER_EVENTS_ADDED, this.eventsAdded, this);\n    mediaModel.addEventListener(Events.PLAYER_MESSAGES_LOGGED, this.messagesLogged, this);\n    mediaModel.addEventListener(Events.PLAYER_ERRORS_RAISED, this.errorsRaised, this);\n    mediaModel.addEventListener(Events.PLAYER_CREATED, this.playerCreated, this);\n  }\n\n  private removeEventListeners(mediaModel: MediaModel): void {\n    mediaModel.removeEventListener(Events.PLAYER_PROPERTIES_CHANGED, this.propertiesChanged, this);\n    mediaModel.removeEventListener(Events.PLAYER_EVENTS_ADDED, this.eventsAdded, this);\n    mediaModel.removeEventListener(Events.PLAYER_MESSAGES_LOGGED, this.messagesLogged, this);\n    mediaModel.removeEventListener(Events.PLAYER_ERRORS_RAISED, this.errorsRaised, this);\n    mediaModel.removeEventListener(Events.PLAYER_CREATED, this.playerCreated, this);\n  }\n\n  private propertiesChanged(event: Common.EventTarget.EventTargetEvent<Protocol.Media.PlayerPropertiesChangedEvent>):\n      void {\n    for (const property of event.data.properties) {\n      this.onProperty(event.data.playerId, property);\n    }\n  }\n\n  private eventsAdded(event: Common.EventTarget.EventTargetEvent<Protocol.Media.PlayerEventsAddedEvent>): void {\n    for (const ev of event.data.events) {\n      // TODO(crbug.com/1228674): The conversion from Protocol.Media.PlayerEvent to PlayerEvent happens implicitly\n      // by augmenting the protocol type with some additional property in various places. This needs to be cleaned up\n      // in a conversion function that takes the protocol type and produces the PlayerEvent type.\n      this.onEvent(event.data.playerId, ev as PlayerEvent);\n    }\n  }\n\n  private messagesLogged(event: Common.EventTarget.EventTargetEvent<Protocol.Media.PlayerMessagesLoggedEvent>): void {\n    for (const message of event.data.messages) {\n      this.onMessage(event.data.playerId, message);\n    }\n  }\n\n  private errorsRaised(event: Common.EventTarget.EventTargetEvent<Protocol.Media.PlayerErrorsRaisedEvent>): void {\n    for (const error of event.data.errors) {\n      this.onError(event.data.playerId, error);\n    }\n  }\n\n  private shouldPropagate(playerID: string): boolean {\n    return !this.deletedPlayers.has(playerID) && this.detailPanels.has(playerID);\n  }\n\n  onProperty(playerID: string, property: Protocol.Media.PlayerProperty): void {\n    if (!this.shouldPropagate(playerID)) {\n      return;\n    }\n    this.sidebar.onProperty(playerID, property);\n    this.downloadStore.onProperty(playerID, property);\n    this.detailPanels.get(playerID)?.onProperty(property);\n  }\n\n  onError(playerID: string, error: Protocol.Media.PlayerError): void {\n    if (!this.shouldPropagate(playerID)) {\n      return;\n    }\n    this.sidebar.onError(playerID, error);\n    this.downloadStore.onError(playerID, error);\n    this.detailPanels.get(playerID)?.onError(error);\n  }\n\n  onMessage(playerID: string, message: Protocol.Media.PlayerMessage): void {\n    if (!this.shouldPropagate(playerID)) {\n      return;\n    }\n    this.sidebar.onMessage(playerID, message);\n    this.downloadStore.onMessage(playerID, message);\n    this.detailPanels.get(playerID)?.onMessage(message);\n  }\n\n  onEvent(playerID: string, event: PlayerEvent): void {\n    if (!this.shouldPropagate(playerID)) {\n      return;\n    }\n    this.sidebar.onEvent(playerID, event);\n    this.downloadStore.onEvent(playerID, event);\n    this.detailPanels.get(playerID)?.onEvent(event);\n  }\n\n  selectPlayerByDOMNodeId(domNodeId: Protocol.DOM.BackendNodeId): void {\n    const playerId = this.#domNodeIdsToPlayerIds.get(domNodeId);\n    if (!playerId) {\n      return;\n    }\n    const player = this.#playerIdsToPlayers.get(playerId);\n    if (player) {\n      this.sidebar.selectPlayerById(player.playerId);\n    }\n  }\n\n  waitForInitialPlayers(): Promise<void> {\n    return this.#initialPlayersLoadedPromise;\n  }\n\n  private playerCreated(event: Common.EventTarget.EventTargetEvent<Protocol.Media.Player>): void {\n    const player = event.data;\n    this.#playerIdsToPlayers.set(player.playerId, player);\n    if (player.domNodeId) {\n      this.#domNodeIdsToPlayerIds.set(player.domNodeId, player.playerId);\n    }\n\n    if (this.splitWidget().showMode() !== UI.SplitWidget.ShowMode.BOTH) {\n      this.splitWidget().showBoth();\n    }\n    this.sidebar.addMediaElementItem(player.playerId);\n    this.detailPanels.set(player.playerId, new PlayerDetailView());\n    this.downloadStore.addPlayer(player.playerId);\n\n    if (this.detailPanels.size === 1) {\n      this.#placeholder.header = i18nString(UIStrings.noPlayerDetailsSelected);\n      this.#placeholder.text = i18nString(UIStrings.selectToViewDetails);\n    }\n\n    this.#initialPlayersLoadedPromiseResolve();\n  }\n\n  markPlayerForDeletion(playerID: string): void {\n    // TODO(tmathmeyer): send this to chromium to save the storage space there too.\n    this.deletedPlayers.add(playerID);\n    this.detailPanels.delete(playerID);\n    const player = this.#playerIdsToPlayers.get(playerID);\n    if (player?.domNodeId) {\n      this.#domNodeIdsToPlayerIds.delete(player.domNodeId);\n    }\n    this.#playerIdsToPlayers.delete(playerID);\n    this.sidebar.deletePlayer(playerID);\n    this.downloadStore.deletePlayer(playerID);\n    if (this.detailPanels.size === 0) {\n      this.#placeholder.header = i18nString(UIStrings.noMediaPlayer);\n      this.#placeholder.text = i18nString(UIStrings.mediaPlayerDescription);\n      this.splitWidget().hideSidebar();\n      const mainWidget = this.splitWidget().mainWidget();\n      if (mainWidget) {\n        mainWidget.detachChildWidgets();\n      }\n      this.#placeholder.show(this.mainElement());\n    }\n  }\n\n  markOtherPlayersForDeletion(playerID: string): void {\n    for (const keyID of this.detailPanels.keys()) {\n      if (keyID !== playerID) {\n        this.markPlayerForDeletion(keyID);\n      }\n    }\n  }\n\n  exportPlayerData(playerID: string): void {\n    const dump = this.downloadStore.exportPlayerData(playerID);\n    const uriContent = 'data:application/octet-stream,' + encodeURIComponent(JSON.stringify(dump, null, 2));\n    const anchor = document.createElement('a');\n    anchor.href = uriContent;\n    anchor.download = playerID + '.json';\n    anchor.click();\n  }\n}\n", "// Copyright 2019 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as SDK from '../../core/sdk/sdk.js';\nimport type * as ProtocolProxyApi from '../../generated/protocol-proxy-api.js';\nimport type * as Protocol from '../../generated/protocol.js';\n\nexport interface PlayerEvent extends Protocol.Media.PlayerEvent {\n  value: string;\n  displayTimestamp: string;\n  event: string;\n}\n\nexport const enum Events {\n  PLAYER_PROPERTIES_CHANGED = 'PlayerPropertiesChanged',\n  PLAYER_EVENTS_ADDED = 'PlayerEventsAdded',\n  PLAYER_MESSAGES_LOGGED = 'PlayerMessagesLogged',\n  PLAYER_ERRORS_RAISED = 'PlayerErrorsRaised',\n  PLAYER_CREATED = 'PlayerCreated',\n}\n\nexport interface EventTypes {\n  [Events.PLAYER_PROPERTIES_CHANGED]: Protocol.Media.PlayerPropertiesChangedEvent;\n  [Events.PLAYER_EVENTS_ADDED]: Protocol.Media.PlayerEventsAddedEvent;\n  [Events.PLAYER_MESSAGES_LOGGED]: Protocol.Media.PlayerMessagesLoggedEvent;\n  [Events.PLAYER_ERRORS_RAISED]: Protocol.Media.PlayerErrorsRaisedEvent;\n  [Events.PLAYER_CREATED]: Protocol.Media.Player;\n}\n\nexport class MediaModel extends SDK.SDKModel.SDKModel<EventTypes> implements ProtocolProxyApi.MediaDispatcher {\n  private enabled: boolean;\n  private readonly agent: ProtocolProxyApi.MediaApi;\n\n  constructor(target: SDK.Target.Target) {\n    super(target);\n\n    this.enabled = false;\n    this.agent = target.mediaAgent();\n\n    target.registerMediaDispatcher(this);\n  }\n\n  override async resumeModel(): Promise<void> {\n    if (!this.enabled) {\n      return await Promise.resolve();\n    }\n    await this.agent.invoke_enable();\n  }\n\n  ensureEnabled(): void {\n    void this.agent.invoke_enable();\n    this.enabled = true;\n  }\n\n  playerPropertiesChanged(event: Protocol.Media.PlayerPropertiesChangedEvent): void {\n    this.dispatchEventToListeners(Events.PLAYER_PROPERTIES_CHANGED, event);\n  }\n\n  playerEventsAdded(event: Protocol.Media.PlayerEventsAddedEvent): void {\n    this.dispatchEventToListeners(Events.PLAYER_EVENTS_ADDED, event);\n  }\n\n  playerMessagesLogged(event: Protocol.Media.PlayerMessagesLoggedEvent): void {\n    this.dispatchEventToListeners(Events.PLAYER_MESSAGES_LOGGED, event);\n  }\n\n  playerErrorsRaised(event: Protocol.Media.PlayerErrorsRaisedEvent): void {\n    this.dispatchEventToListeners(Events.PLAYER_ERRORS_RAISED, event);\n  }\n\n  playerCreated({player}: Protocol.Media.PlayerCreatedEvent): void {\n    this.dispatchEventToListeners(Events.PLAYER_CREATED, player);\n  }\n}\nSDK.SDKModel.SDKModel.register(MediaModel, {capabilities: SDK.Target.Capability.MEDIA, autostart: false});\n", "// Copyright 2019 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as i18n from '../../core/i18n/i18n.js';\nimport type * as Protocol from '../../generated/protocol.js';\nimport * as UI from '../../ui/legacy/legacy.js';\n\nimport {PlayerEventsView} from './EventDisplayTable.js';\nimport {PlayerEventsTimeline} from './EventTimelineView.js';\nimport type {TriggerHandler} from './MainView.js';\nimport type {PlayerEvent} from './MediaModel.js';\nimport {PlayerMessagesView} from './PlayerMessagesView.js';\nimport {PlayerPropertiesView} from './PlayerPropertiesView.js';\n\nconst UIStrings = {\n  /**\n   * @description Title of the 'Properties' tool in the sidebar of the elements tool\n   */\n  properties: 'Properties',\n  /**\n   * @description Button text for viewing properties.\n   */\n  playerProperties: 'Player properties',\n  /**\n   * @description Button text for viewing events.\n   */\n  events: 'Events',\n  /**\n   * @description Hover text for the Events button.\n   */\n  playerEvents: 'Player events',\n  /**\n   * @description Text in Network Item View of the Network panel\n   */\n  messages: 'Messages',\n  /**\n   * @description Column header for messages view.\n   */\n  playerMessages: 'Player messages',\n  /**\n   * @description Title for the timeline tab.\n   */\n  timeline: 'Timeline',\n  /**\n   * @description Hovertext for Timeline tab.\n   */\n  playerTimeline: 'Player timeline',\n} as const;\nconst str_ = i18n.i18n.registerUIStrings('panels/media/PlayerDetailView.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\n\nexport const enum PlayerDetailViewTabs {\n  EVENTS = 'events',\n  PROPERTIES = 'properties',\n  MESSAGES = 'messages',\n  TIMELINE = 'timeline',\n}\n\nexport class PlayerDetailView extends UI.TabbedPane.TabbedPane implements TriggerHandler {\n  private readonly eventView: PlayerEventsView;\n  private readonly propertyView: PlayerPropertiesView;\n  private readonly messageView: PlayerMessagesView;\n  private readonly timelineView: PlayerEventsTimeline;\n\n  constructor() {\n    super();\n\n    this.eventView = new PlayerEventsView();\n    this.propertyView = new PlayerPropertiesView();\n    this.messageView = new PlayerMessagesView();\n    this.timelineView = new PlayerEventsTimeline();\n\n    this.appendTab(\n        PlayerDetailViewTabs.PROPERTIES, i18nString(UIStrings.properties), this.propertyView,\n        i18nString(UIStrings.playerProperties));\n    this.appendTab(\n        PlayerDetailViewTabs.EVENTS, i18nString(UIStrings.events), this.eventView, i18nString(UIStrings.playerEvents));\n    this.appendTab(\n        PlayerDetailViewTabs.MESSAGES, i18nString(UIStrings.messages), this.messageView,\n        i18nString(UIStrings.playerMessages));\n    this.appendTab(\n        PlayerDetailViewTabs.TIMELINE, i18nString(UIStrings.timeline), this.timelineView,\n        i18nString(UIStrings.playerTimeline));\n  }\n\n  onProperty(property: Protocol.Media.PlayerProperty): void {\n    this.propertyView.onProperty(property);\n  }\n\n  onError(error: Protocol.Media.PlayerError): void {\n    this.messageView.addError(error);\n  }\n\n  onMessage(message: Protocol.Media.PlayerMessage): void {\n    this.messageView.addMessage(message);\n  }\n\n  onEvent(event: PlayerEvent): void {\n    this.eventView.onEvent(event);\n    this.timelineView.onEvent(event);\n  }\n}\n", "// Copyright 2019 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n/* eslint-disable @devtools/no-imperative-dom-api */\n\nimport * as i18n from '../../core/i18n/i18n.js';\nimport * as VisualLogging from '../../ui/visual_logging/visual_logging.js';\n\nimport type {PlayerEvent} from './MediaModel.js';\nimport {\n  ColdColorScheme,\n  type Event,\n  type EventProperties,\n  HotColorScheme,\n  TickingFlameChart,\n} from './TickingFlameChart.js';\n\n// Has to be a double, see https://v8.dev/blog/react-cliff\nconst NO_NORMALIZED_TIMESTAMP = -1.5;\n\nconst UIStrings = {\n  /**\n   * @description Title of the 'Playback Status' button\n   */\n  playbackStatus: 'Playback Status',\n  /**\n   * @description Title of the 'Buffering Status' button\n   */\n  bufferingStatus: 'Buffering Status',\n} as const;\nconst str_ = i18n.i18n.registerUIStrings('panels/media/EventTimelineView.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\n\ntype State = Record<string, string>;\n\nexport class PlayerEventsTimeline extends TickingFlameChart {\n  private normalizedTimestamp: number;\n  private playbackStatusLastEvent: Event|null;\n  private audioBufferingStateEvent: Event|null;\n  private videoBufferingStateEvent: Event|null;\n\n  constructor() {\n    super();\n\n    this.element.setAttribute('jslog', `${VisualLogging.pane('timeline')}`);\n\n    this.normalizedTimestamp = NO_NORMALIZED_TIMESTAMP;\n\n    this.addGroup(i18nString(UIStrings.playbackStatus), 2);\n    this.addGroup(i18nString(UIStrings.bufferingStatus), 2);  // video on top, audio on bottom\n\n    this.playbackStatusLastEvent = null;\n    this.audioBufferingStateEvent = null;\n    this.videoBufferingStateEvent = null;\n  }\n\n  private ensureNoPreviousPlaybackEvent(normalizedTime: number): void {\n    if (this.playbackStatusLastEvent !== null) {\n      this.playbackStatusLastEvent.endTime = normalizedTime;\n      this.playbackStatusLastEvent = null;\n    }\n  }\n\n  /**\n   * Playback events are {kPlay, kPause, kSuspended, kEnded, and kWebMediaPlayerDestroyed}\n   * once destroyed, a player cannot receive more events of any kind.\n   */\n  private onPlaybackEvent(event: PlayerEvent, normalizedTime: number): void {\n    switch (event.event) {\n      case 'kPlay':\n        this.canTick = true;\n        this.ensureNoPreviousPlaybackEvent(normalizedTime);\n\n        // Disabled until Closure is gone.\n        // clang-format off\n        this.playbackStatusLastEvent = this.startEvent({\n          level: 0,\n          startTime: normalizedTime,\n          name: 'Play',\n        } as EventProperties);\n        // clang-format on\n        break;\n\n      case 'kPause':\n        // Don't change ticking state - the player is still active even during\n        // video pause. It may receive buffering events, seeks, etc.\n        this.ensureNoPreviousPlaybackEvent(normalizedTime);\n\n        // Disabled until Closure is gone.\n        // clang-format off\n        this.playbackStatusLastEvent = this.startEvent({\n          level: 0,\n          startTime: normalizedTime,\n          name: 'Pause',\n          color: HotColorScheme[1],\n        } as EventProperties);\n        // clang-format on\n        break;\n\n      case 'kWebMediaPlayerDestroyed':\n        this.canTick = false;\n        this.ensureNoPreviousPlaybackEvent(normalizedTime);\n        this.addMarker({\n          level: 1,\n          startTime: normalizedTime,\n          name: 'Destroyed',\n          color: HotColorScheme[4],\n        } as EventProperties);\n        // clang-format on\n        break;\n\n      case 'kSuspended':\n        // Other event's can't happen during suspension or while the player is\n        // destroyed, so stop the ticking.\n        this.canTick = false;\n        this.ensureNoPreviousPlaybackEvent(normalizedTime);\n\n        // Disabled until Closure is gone.\n        // clang-format off\n        this.playbackStatusLastEvent = this.startEvent({\n          level: 1,\n          startTime: normalizedTime,\n          name: 'Suspended',\n          color: HotColorScheme[3],\n        } as EventProperties);\n        // clang-format on\n        break;\n\n      case 'kEnded':\n        // Player ending can still have seeks & other events.\n        this.ensureNoPreviousPlaybackEvent(normalizedTime);\n\n        // Disabled until Closure is gone.\n        // clang-format off\n        this.playbackStatusLastEvent = this.startEvent({\n          level: 1,\n          startTime: normalizedTime,\n          name: 'Ended',\n          color: HotColorScheme[2],\n        } as EventProperties);\n        // clang-format on\n        break;\n\n      default:\n        throw new Error(`_onPlaybackEvent cant handle ${event.event}`);\n    }\n  }\n\n  private bufferedEnough(state: State): boolean {\n    return state['state'] === 'BUFFERING_HAVE_ENOUGH';\n  }\n\n  private onBufferingStatus(event: PlayerEvent, normalizedTime: number): void {\n    // No declarations inside the case labels.\n    let audioState: State|null = null;\n    let videoState: State|null = null;\n\n    switch (event.event) {\n      case 'kBufferingStateChanged':\n        // There are three allowed entries, audio, video, and pipeline.\n        // We only want the buffering for audio and video to be displayed.\n        // One event may have changes for a single type, or for both audio/video\n        // simultaneously.\n        // @ts-expect-error\n        audioState = event.value['audio_buffering_state'];\n        // @ts-expect-error\n        videoState = event.value['video_buffering_state'];\n\n        if (audioState) {\n          if (this.audioBufferingStateEvent !== null) {\n            this.audioBufferingStateEvent.endTime = normalizedTime;\n            this.audioBufferingStateEvent = null;\n          }\n          if (!this.bufferedEnough(audioState)) {\n            this.audioBufferingStateEvent = this.startEvent({\n              level: 3,\n              startTime: normalizedTime,\n              name: 'Audio Buffering',\n              color: ColdColorScheme[1],\n            } as EventProperties);\n          }\n        }\n\n        if (videoState) {\n          if (this.videoBufferingStateEvent !== null) {\n            this.videoBufferingStateEvent.endTime = normalizedTime;\n            this.videoBufferingStateEvent = null;\n          }\n          if (!this.bufferedEnough(videoState)) {\n            this.videoBufferingStateEvent = this.startEvent({\n              level: 2,\n              startTime: normalizedTime,\n              name: 'Video Buffering',\n              color: ColdColorScheme[0],\n            } as EventProperties);\n          }\n        }\n        break;\n\n      default:\n        throw new Error(`_onPlaybackEvent cant handle ${event.event}`);\n    }\n  }\n\n  onEvent(event: PlayerEvent): void {\n    if (this.normalizedTimestamp === NO_NORMALIZED_TIMESTAMP) {\n      this.normalizedTimestamp = Number(event.timestamp);\n    }\n    const inMilliseconds = (Number(event.timestamp) - this.normalizedTimestamp) * 1000;\n\n    switch (event.event) {\n      case 'kPlay':\n      case 'kPause':\n      case 'kWebMediaPlayerDestroyed':\n      case 'kSuspended':\n      case 'kEnded':\n        return this.onPlaybackEvent(event, inMilliseconds);\n\n      case 'kBufferingStateChanged':\n        return this.onBufferingStatus(event, inMilliseconds);\n\n      default:\n    }\n  }\n}\n", "// Copyright 2020 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n/* eslint-disable @devtools/no-imperative-dom-api */\n\nimport * as Common from '../../core/common/common.js';\nimport * as Host from '../../core/host/host.js';\nimport * as PerfUI from '../../ui/legacy/components/perf_ui/perf_ui.js';\nimport * as UI from '../../ui/legacy/legacy.js';\nimport * as ThemeSupport from '../../ui/legacy/theme_support/theme_support.js';\n\nimport {Bounds, formatMillisecondsToSeconds} from './TickingFlameChartHelpers.js';\n\nconst defaultFont = '11px ' + Host.Platform.fontFamily();\nfunction getGroupDefaultTextColor(): string {\n  return ThemeSupport.ThemeSupport.instance().getComputedValue('--sys-color-on-surface');\n}\n\nconst DefaultStyle: () => PerfUI.FlameChart.GroupStyle = () => ({\n  height: 20,\n  padding: 2,\n  collapsible: PerfUI.FlameChart.GroupCollapsibleState.NEVER,\n  font: defaultFont,\n  color: getGroupDefaultTextColor(),\n  backgroundColor: 'rgba(100 0 0 / 10%)',\n  nestingLevel: 0,\n  itemsHeight: 20,\n  shareHeaderLine: false,\n  useFirstLineForOverview: false,\n  useDecoratorsForOverview: false,\n});\n\nexport const HotColorScheme = ['#ffba08', '#faa307', '#f48c06', '#e85d04', '#dc2f02', '#d00000', '#9d0208'];\nexport const ColdColorScheme = ['#7400b8', '#6930c3', '#5e60ce', '#5390d9', '#4ea8de', '#48bfe3', '#56cfe1', '#64dfdf'];\n\nfunction calculateFontColor(backgroundColor: string): string {\n  const parsedColor = Common.Color.parse(backgroundColor)?.as(Common.Color.Format.HSL);\n  // Dark background needs a light font.\n  if (parsedColor && parsedColor.l < 0.5) {\n    return '#eee';\n  }\n  return '#444';\n}\n\ninterface EventHandlers {\n  setLive: (arg0: number) => number;\n  setComplete: (arg0: number) => void;\n  updateMaxTime: (arg0: number) => void;\n}\n\nexport interface EventProperties {\n  level: number;\n  startTime: number;\n  duration?: number;\n  name: string;\n  color?: string;\n}\n\n/**\n * Wrapper class for each event displayed on the timeline.\n */\nexport class Event {\n  private timelineData: PerfUI.FlameChart.FlameChartTimelineData;\n  private setLive: (arg0: number) => number;\n  private readonly setComplete: (arg0: number) => void;\n  private readonly updateMaxTime: (arg0: number) => void;\n  private selfIndex: number;\n  #live: boolean;\n  title: string;\n  #color: string;\n  #fontColor: string;\n\n  constructor(\n      timelineData: PerfUI.FlameChart.FlameChartTimelineData, eventHandlers: EventHandlers,\n      eventProperties: EventProperties|\n      undefined = {color: undefined, duration: undefined, level: 0, name: '', startTime: 0}) {\n    // These allow the event to privately change it's own data in the timeline.\n    this.timelineData = timelineData;\n    this.setLive = eventHandlers.setLive;\n    this.setComplete = eventHandlers.setComplete;\n    this.updateMaxTime = eventHandlers.updateMaxTime;\n\n    // This is the index in the timelineData arrays we should be writing to.\n    this.selfIndex = this.timelineData.entryLevels.length;\n    this.#live = false;\n\n    // Can't use the dict||or||default syntax, since NaN is a valid expected duration.\n    const duration = eventProperties['duration'] === undefined ? 0 : eventProperties['duration'];\n\n    (this.timelineData.entryLevels as number[]).push(eventProperties['level'] || 0);\n    (this.timelineData.entryStartTimes as number[]).push(eventProperties['startTime'] || 0);\n    (this.timelineData.entryTotalTimes as number[]).push(duration);  // May initially push -1\n\n    // If -1 was pushed, we need to update it. The set end time method helps with this.\n    if (duration === -1) {\n      this.endTime = -1;\n    }\n\n    this.title = eventProperties['name'] || '';\n    this.#color = eventProperties['color'] || HotColorScheme[0];\n    this.#fontColor = calculateFontColor(this.#color);\n  }\n\n  /**\n   * Render hovertext into the |htmlElement|\n   */\n  decorate(htmlElement: HTMLElement): void {\n    htmlElement.createChild('span').textContent = `Name: ${this.title}`;\n    htmlElement.createChild('br');\n\n    const startTimeReadable = formatMillisecondsToSeconds(this.startTime, 2);\n    if (this.#live) {\n      htmlElement.createChild('span').textContent = `Duration: ${startTimeReadable} - LIVE!`;\n    } else if (!isNaN(this.duration)) {\n      const durationReadable = formatMillisecondsToSeconds(this.duration + this.startTime, 2);\n      htmlElement.createChild('span').textContent = `Duration: ${startTimeReadable} - ${durationReadable}`;\n    } else {\n      htmlElement.createChild('span').textContent = `Time: ${startTimeReadable}`;\n    }\n  }\n\n  /**\n   * set an event to be \"live\" where it's ended time is always the chart maximum\n   * or to be a fixed time.\n   * @param time\n   */\n  set endTime(time: number) {\n    // Setting end time to -1 signals that an event becomes live\n    if (time === -1) {\n      this.timelineData.entryTotalTimes[this.selfIndex] = this.setLive(this.selfIndex);\n      this.#live = true;\n    } else {\n      this.#live = false;\n      const duration = time - this.timelineData.entryStartTimes[this.selfIndex];\n      this.timelineData.entryTotalTimes[this.selfIndex] = duration;\n      this.setComplete(this.selfIndex);\n      this.updateMaxTime(time);\n    }\n  }\n\n  get id(): number {\n    return this.selfIndex;\n  }\n\n  set level(level: number) {\n    this.timelineData.entryLevels[this.selfIndex] = level;\n  }\n\n  set color(color: string) {\n    this.#color = color;\n    this.#fontColor = calculateFontColor(this.#color);\n  }\n\n  get color(): string {\n    return this.#color;\n  }\n\n  get fontColor(): string {\n    return this.#fontColor;\n  }\n\n  get startTime(): number {\n    // Round it\n    return this.timelineData.entryStartTimes[this.selfIndex];\n  }\n\n  get duration(): number {\n    return this.timelineData.entryTotalTimes[this.selfIndex];\n  }\n\n  get live(): boolean {\n    return this.#live;\n  }\n}\n\nexport class TickingFlameChart extends UI.Widget.VBox {\n  private intervalTimer: number;\n  private lastTimestamp: number;\n  #canTick: boolean;\n  private ticking: boolean;\n  private isShown: boolean;\n  private readonly bounds: Bounds;\n  private readonly dataProvider: TickingFlameChartDataProvider;\n  private readonly delegate: TickingFlameChartDelegate;\n  private readonly chartGroupExpansionSetting: Common.Settings.Setting<Object>;\n  private readonly chart: PerfUI.FlameChart.FlameChart;\n  private stoppedPermanently?: boolean;\n\n  constructor() {\n    super();\n\n    // set to update once per second _while the tab is active_\n    this.intervalTimer = 0;\n    this.lastTimestamp = 0;\n    this.#canTick = true;\n    this.ticking = false;\n    this.isShown = false;\n\n    // The max bounds for scroll-out.\n    this.bounds = new Bounds(0, 1000, 30000, 1000);\n\n    // Create the data provider with the initial max bounds,\n    // as well as a function to attempt bounds updating everywhere.\n    this.dataProvider = new TickingFlameChartDataProvider(this.bounds, this.updateMaxTime.bind(this));\n\n    // Delegate doesn't do much for now.\n    this.delegate = new TickingFlameChartDelegate();\n\n    // Chart settings.\n    this.chartGroupExpansionSetting =\n        Common.Settings.Settings.instance().createSetting('media-flame-chart-group-expansion', {});\n\n    // Create the chart.\n    this.chart =\n        // TODO(crbug.com/1172300) Ignored during the jsdoc to ts migration\n        // @ts-expect-error\n        new PerfUI.FlameChart.FlameChart(this.dataProvider, this.delegate, this.chartGroupExpansionSetting);\n\n    // TODO: needs to have support in the delegate for supporting this.\n    this.chart.disableRangeSelection();\n\n    // Scrolling should change the current bounds, and repaint the chart.\n    this.chart.bindCanvasEvent('wheel', e => {\n      this.onScroll(e as WheelEvent);\n    });\n\n    // Add the chart.\n    this.chart.show(this.contentElement);\n  }\n\n  /**\n   * Add a marker with |properties| at |time|.\n   */\n  addMarker(properties: EventProperties): void {\n    properties['duration'] = NaN;\n    this.startEvent(properties);\n  }\n\n  /**\n   * Create an event which will be set to live by default.\n   */\n  startEvent(properties: EventProperties): Event {\n    // Make sure that an unspecified event gets live duration.\n    // Have to check for undefined, since NaN is allowed but evaluates to false.\n    if (properties['duration'] === undefined) {\n      properties['duration'] = -1;\n    }\n    const time = properties['startTime'] || 0;\n\n    // Event has to be created before the updateMaxTime call.\n    const event = this.dataProvider.startEvent(properties);\n\n    this.updateMaxTime(time);\n    return event;\n  }\n\n  /**\n   * Add a group with |name| that can contain |depth| different tracks.\n   */\n  addGroup(name: Common.UIString.LocalizedString, depth: number): void {\n    this.dataProvider.addGroup(name, depth);\n  }\n\n  private updateMaxTime(time: number): void {\n    if (this.bounds.pushMaxAtLeastTo(time)) {\n      this.updateRender();\n    }\n  }\n\n  private onScroll(e: WheelEvent): void {\n    // TODO: is this a good divisor? does it account for high precision scroll wheels?\n    // low precision scroll wheels?\n    const scrollTickCount = Math.round(e.deltaY / 50);\n    const scrollPositionRatio = e.offsetX / (e.srcElement as HTMLElement).clientWidth;\n    if (scrollTickCount > 0) {\n      this.bounds.zoomOut(scrollTickCount, scrollPositionRatio);\n    } else {\n      this.bounds.zoomIn(-scrollTickCount, scrollPositionRatio);\n    }\n    this.updateRender();\n  }\n\n  override willHide(): void {\n    super.willHide();\n    this.isShown = false;\n    if (this.ticking) {\n      this.stop();\n    }\n  }\n\n  override wasShown(): void {\n    super.wasShown();\n    this.isShown = true;\n    if (this.#canTick && !this.ticking) {\n      this.start();\n    }\n  }\n\n  set canTick(allowed: boolean) {\n    this.#canTick = allowed;\n    if (this.ticking && !allowed) {\n      this.stop();\n    }\n    if (!this.ticking && this.isShown && allowed) {\n      this.start();\n    }\n  }\n\n  private start(): void {\n    if (this.lastTimestamp === 0) {\n      this.lastTimestamp = Date.now();\n    }\n    if (this.intervalTimer !== 0 || this.stoppedPermanently) {\n      return;\n    }\n    // 16 ms is roughly 60 fps.\n    this.intervalTimer = window.setInterval(this.updateRender.bind(this), 16);\n    this.ticking = true;\n  }\n\n  private stop(permanently = false): void {\n    window.clearInterval(this.intervalTimer);\n    this.intervalTimer = 0;\n    if (permanently) {\n      this.stoppedPermanently = true;\n    }\n    this.ticking = false;\n  }\n\n  private updateRender(): void {\n    if (this.ticking) {\n      const currentTimestamp = Date.now();\n      const duration = currentTimestamp - this.lastTimestamp;\n      this.lastTimestamp = currentTimestamp;\n      this.bounds.addMax(duration);\n    }\n    this.dataProvider.updateMaxTime(this.bounds);\n    this.chart.setWindowTimes(this.bounds.low, this.bounds.high, true);\n    this.chart.scheduleUpdate();\n  }\n}\n\n/**\n * Doesn't do much right now, but can be used in the future for selecting events.\n */\nclass TickingFlameChartDelegate implements PerfUI.FlameChart.FlameChartDelegate {\n  windowChanged(_windowStartTime: number, _windowEndTime: number, _animate: boolean): void {\n  }\n\n  updateRangeSelection(_startTime: number, _endTime: number): void {\n  }\n\n  updateSelectedGroup(_flameChart: PerfUI.FlameChart.FlameChart, _group: PerfUI.FlameChart.Group|null): void {\n  }\n}\n\nclass TickingFlameChartDataProvider implements PerfUI.FlameChart.FlameChartDataProvider {\n  private readonly updateMaxTimeHandle: (arg0: number) => void;\n  private bounds: Bounds;\n  private readonly liveEvents: Set<number>;\n  private eventMap: Map<number, Event>;\n  readonly #timelineData: PerfUI.FlameChart.FlameChartTimelineData;\n  private maxLevel: number;\n\n  constructor(initialBounds: Bounds, updateMaxTime: (arg0: number) => void) {\n    // do _not_ call this method from within this class - only for passing to events.\n    this.updateMaxTimeHandle = updateMaxTime;\n\n    this.bounds = initialBounds;\n\n    // All the events which should have their time updated when the chart ticks.\n    this.liveEvents = new Set();\n\n    // All events.\n    // Map<Event>\n    this.eventMap = new Map();\n\n    // Contains the numerical indices. This is passed as a reference to the events\n    // so that they can update it when they change.\n    this.#timelineData = PerfUI.FlameChart.FlameChartTimelineData.createEmpty();\n\n    // The current sum of all group heights.\n    this.maxLevel = 0;\n  }\n\n  hasTrackConfigurationMode(): boolean {\n    return false;\n  }\n\n  /**\n   * Add a group with |name| that can contain |depth| different tracks.\n   */\n  addGroup(name: Common.UIString.LocalizedString, depth: number): void {\n    if (this.#timelineData.groups) {\n      const newGroup = {\n        name,\n        startLevel: this.maxLevel,\n        expanded: true,\n        selectable: false,\n        style: DefaultStyle(),\n        track: null,\n      };\n      this.#timelineData.groups.push(newGroup);\n      ThemeSupport.ThemeSupport.instance().addEventListener(ThemeSupport.ThemeChangeEvent.eventName, () => {\n        newGroup.style.color = getGroupDefaultTextColor();\n      });\n    }\n    this.maxLevel += depth;\n  }\n\n  /**\n   * Create an event which will be set to live by default.\n   */\n  startEvent(properties: EventProperties): Event {\n    properties['level'] = properties['level'] || 0;\n    if (properties['level'] > this.maxLevel) {\n      throw new Error(`level ${properties['level']} is above the maximum allowed of ${this.maxLevel}`);\n    }\n\n    const event = new Event(\n        this.#timelineData, {\n          setLive: this.setLive.bind(this),\n          setComplete: this.setComplete.bind(this),\n          updateMaxTime: this.updateMaxTimeHandle,\n        },\n        properties);\n\n    this.eventMap.set(event.id, event);\n    return event;\n  }\n\n  private setLive(index: number): number {\n    this.liveEvents.add(index);\n    return this.bounds.max;\n  }\n\n  private setComplete(index: number): void {\n    this.liveEvents.delete(index);\n  }\n\n  updateMaxTime(bounds: Bounds): void {\n    this.bounds = bounds;\n    for (const eventID of this.liveEvents.entries()) {\n      // force recalculation of all live events.\n      (this.eventMap.get(eventID[0]) as Event).endTime = -1;\n    }\n  }\n\n  maxStackDepth(): number {\n    return this.maxLevel + 1;\n  }\n\n  timelineData(): PerfUI.FlameChart.FlameChartTimelineData {\n    return this.#timelineData;\n  }\n\n  /**\n   * time in milliseconds\n   */\n  minimumBoundary(): number {\n    return this.bounds.low;\n  }\n\n  totalTime(): number {\n    return this.bounds.high;\n  }\n\n  entryColor(index: number): string {\n    return (this.eventMap.get(index) as Event).color;\n  }\n\n  textColor(index: number): string {\n    return (this.eventMap.get(index) as Event).fontColor;\n  }\n\n  entryTitle(index: number): string|null {\n    return (this.eventMap.get(index) as Event).title;\n  }\n\n  entryFont(_index: number): string|null {\n    return defaultFont;\n  }\n\n  decorateEntry(\n      _index: number, _context: CanvasRenderingContext2D, _text: string|null, _barX: number, _barY: number,\n      _barWidth: number, _barHeight: number, _unclippedBarX: number, _timeToPixelRatio: number): boolean {\n    return false;\n  }\n\n  forceDecoration(_index: number): boolean {\n    return false;\n  }\n\n  preparePopoverElement(index: number): Element|null {\n    const element = document.createElement('div');\n    (this.eventMap.get(index) as Event).decorate(element);\n    return element;\n  }\n\n  formatValue(value: number, _precision?: number): string {\n    // value is always [0, X] so we need to add lower bound\n    value += Math.round(this.bounds.low);\n\n    // Magic numbers of pre-calculated logorithms.\n\n    // we want to show additional decimals at the time when two adjacent labels\n    // would otherwise show the same number. At 3840 pixels wide, that cutoff\n    // happens to be about 30 seconds for one decimal and 2.8 for two decimals.\n    if (this.bounds.range < 2800) {\n      return formatMillisecondsToSeconds(value, 2);\n    }\n    if (this.bounds.range < 30000) {\n      return formatMillisecondsToSeconds(value, 1);\n    }\n    return formatMillisecondsToSeconds(value, 0);\n  }\n\n  canJumpToEntry(_entryIndex: number): boolean {\n    return false;\n  }\n}\n", "// Copyright 2020 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nexport function formatMillisecondsToSeconds(ms: number, decimalPlaces: number): string {\n  const roundPower = Math.pow(10, 3 - decimalPlaces);\n  const denominatorPower = Math.pow(10, Math.max(0, decimalPlaces));\n  return `${Math.round(ms / roundPower) / denominatorPower} s`;\n}\n\n/**\n * Manage the bounding box properties for the ticking flame chart.\n * kept in a separate file for unit testing.\n */\nexport class Bounds {\n  #min: number;\n  #max: number;\n  #low: number;\n  #high: number;\n  private readonly maxRange: number;\n  private readonly minRange: number;\n  constructor(initialLow: number, initialHigh: number, maxRange: number, minRange: number) {\n    this.#min = initialLow;\n    this.#max = initialHigh;\n    this.#low = this.#min;\n    this.#high = this.#max;\n    this.maxRange = maxRange;\n    this.minRange = minRange;\n  }\n\n  get low(): number {\n    return this.#low;\n  }\n\n  get high(): number {\n    return this.#high;\n  }\n\n  get min(): number {\n    return this.#min;\n  }\n\n  get max(): number {\n    return this.#max;\n  }\n\n  get range(): number {\n    return this.#high - this.#low;\n  }\n\n  private reassertBounds(): void {\n    let needsAdjustment = true;\n    while (needsAdjustment) {\n      needsAdjustment = false;\n      if (this.range < this.minRange) {\n        needsAdjustment = true;\n        const delta = (this.minRange - this.range) / 2;\n        this.#high += delta;\n        this.#low -= delta;\n      }\n\n      if (this.#low < this.#min) {\n        needsAdjustment = true;\n        this.#low = this.#min;\n      }\n\n      if (this.#high > this.#max) {\n        needsAdjustment = true;\n        this.#high = this.#max;\n      }\n    }\n  }\n\n  /**\n   * zoom out |amount| ticks at position [0, 1] along the current range of the timeline.\n   */\n  zoomOut(amount: number, position: number): void {\n    const range = this.#high - this.#low;\n    const growSize = range * Math.pow(1.1, amount) - range;\n    const lowEnd = growSize * position;\n    const highEnd = growSize - lowEnd;\n    this.#low -= lowEnd;\n    this.#high += highEnd;\n    this.reassertBounds();\n  }\n\n  /**\n   * zoom in |amount| ticks at position [0, 1] along the current range of the timeline.\n   */\n  zoomIn(amount: number, position: number): void {\n    const range = this.#high - this.#low;\n    if (this.range <= this.minRange) {\n      return;\n    }\n\n    const shrinkSize = range - range / Math.pow(1.1, amount);\n    const lowEnd = shrinkSize * position;\n    const highEnd = shrinkSize - lowEnd;\n    this.#low += lowEnd;\n    this.#high -= highEnd;\n    this.reassertBounds();\n  }\n\n  /**\n   * Add Xms to the max value, and scroll the timeline forward if the end is in sight.\n   */\n  addMax(amount: number): void {\n    const range = this.#high - this.#low;\n    const isAtHighEnd = this.#high === this.#max;\n    const isZoomedOut = this.#low === this.#min || range >= this.maxRange;\n\n    this.#max += amount;\n    if (isAtHighEnd && isZoomedOut) {\n      this.#high = this.#max;\n    }\n    this.reassertBounds();\n  }\n\n  /**\n   * Attempt to push the maximum time up to |time| ms.\n   */\n  pushMaxAtLeastTo(time: number): boolean {\n    if (this.#max < time) {\n      this.addMax(time - this.#max);\n      return true;\n    }\n    return false;\n  }\n}\n", "// Copyright 2020 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n/* eslint-disable @devtools/no-imperative-dom-api */\n\nimport '../../ui/legacy/legacy.js';\n\nimport type * as Common from '../../core/common/common.js';\nimport * as i18n from '../../core/i18n/i18n.js';\nimport type * as Protocol from '../../generated/protocol.js';\nimport * as UI from '../../ui/legacy/legacy.js';\nimport * as VisualLogging from '../../ui/visual_logging/visual_logging.js';\n\nimport playerMessagesViewStyles from './playerMessagesView.css.js';\n\nconst UIStrings = {\n  /**\n   * @description A context menu item in the Console View of the Console panel\n   */\n  default: 'Default',\n  /**\n   * @description Text in Network Throttling Selector of the Network panel\n   */\n  custom: 'Custom',\n  /**\n   * @description Text for everything\n   */\n  all: 'All',\n  /**\n   * @description Text for errors\n   */\n  error: 'Error',\n  /**\n   * @description Text to indicate an item is a warning\n   */\n  warning: 'Warning',\n  /**\n   * @description Sdk console message message level info of level Labels in Console View of the Console panel\n   */\n  info: 'Info',\n  /**\n   * @description Debug log level\n   */\n  debug: 'Debug',\n  /**\n   * @description Label for selecting between the set of log levels to show.\n   */\n  logLevel: 'Log level:',\n  /**\n   * @description Default text for user-text-entry for searching log messages.\n   */\n  filterByLogMessages: 'Filter by log messages',\n  /**\n   * @description The label for the group name that this error belongs to.\n   */\n  errorGroupLabel: 'Error Group:',\n  /**\n   * @description The label for the numeric code associated with this error.\n   */\n  errorCodeLabel: 'Error Code:',\n  /**\n   * @description The label for extra data associated with an error.\n   */\n  errorDataLabel: 'Data:',\n  /**\n   * @description The label for the stacktrace associated with the error.\n   */\n  errorStackLabel: 'Stacktrace:',\n  /**\n   * @description The label for a root cause error associated with this error.\n   */\n  errorCauseLabel: 'Caused by:',\n} as const;\nconst str_ = i18n.i18n.registerUIStrings('panels/media/PlayerMessagesView.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\n\nconst enum MessageLevelBitfield {\n  ERROR = 0b0001,\n  WARNING = 0b0010,\n  INFO = 0b0100,\n  DEBUG = 0b1000,\n\n  DEFAULT = 0b0111,  // Error, Warning, Info\n  ALL = 0b1111,      // Error, Warning, Info, Debug\n  CUSTOM = 0,\n}\n\ninterface SelectableLevel {\n  title: string;\n  value: MessageLevelBitfield;\n  stringValue: string;\n  selectable?: boolean;\n  overwrite?: boolean;\n}\n\nclass MessageLevelSelector implements UI.SoftDropDown.Delegate<SelectableLevel> {\n  private readonly items: UI.ListModel.ListModel<SelectableLevel>;\n  private readonly view: PlayerMessagesView;\n  private readonly itemMap: Map<number, SelectableLevel>;\n  private hiddenLevels: string[];\n  private bitFieldValue: MessageLevelBitfield;\n  readonly #defaultTitle: Common.UIString.LocalizedString;\n  private readonly customTitle: Common.UIString.LocalizedString;\n  private readonly allTitle: Common.UIString.LocalizedString;\n  elementsForItems: WeakMap<SelectableLevel, HTMLElement>;\n\n  constructor(items: UI.ListModel.ListModel<SelectableLevel>, view: PlayerMessagesView) {\n    this.items = items;\n    this.view = view;\n    this.itemMap = new Map();\n\n    this.hiddenLevels = [];\n\n    this.bitFieldValue = MessageLevelBitfield.DEFAULT;\n\n    this.#defaultTitle = i18nString(UIStrings.default);\n    this.customTitle = i18nString(UIStrings.custom);\n    this.allTitle = i18nString(UIStrings.all);\n\n    this.elementsForItems = new WeakMap();\n  }\n\n  defaultTitle(): Common.UIString.LocalizedString {\n    return this.#defaultTitle;\n  }\n\n  setDefault(dropdown: UI.SoftDropDown.SoftDropDown<SelectableLevel>): void {\n    dropdown.selectItem(this.items.at(0));\n  }\n\n  populate(): void {\n    this.items.insert(this.items.length, {\n      title: this.#defaultTitle,\n      overwrite: true,\n      stringValue: '',\n      value: MessageLevelBitfield.DEFAULT,\n      selectable: undefined,\n    });\n\n    this.items.insert(this.items.length, {\n      title: this.allTitle,\n      overwrite: true,\n      stringValue: '',\n      value: MessageLevelBitfield.ALL,\n      selectable: undefined,\n    });\n\n    this.items.insert(this.items.length, {\n      title: i18nString(UIStrings.error),\n      overwrite: false,\n      stringValue: 'error',\n      value: MessageLevelBitfield.ERROR,\n      selectable: undefined,\n    });\n\n    this.items.insert(this.items.length, {\n      title: i18nString(UIStrings.warning),\n      overwrite: false,\n      stringValue: 'warning',\n      value: MessageLevelBitfield.WARNING,\n      selectable: undefined,\n    });\n\n    this.items.insert(this.items.length, {\n      title: i18nString(UIStrings.info),\n      overwrite: false,\n      stringValue: 'info',\n      value: MessageLevelBitfield.INFO,\n      selectable: undefined,\n    });\n\n    this.items.insert(this.items.length, {\n      title: i18nString(UIStrings.debug),\n      overwrite: false,\n      stringValue: 'debug',\n      value: MessageLevelBitfield.DEBUG,\n      selectable: undefined,\n    });\n  }\n\n  private updateCheckMarks(): void {\n    this.hiddenLevels = [];\n    for (const [key, item] of this.itemMap) {\n      if (!item.overwrite) {\n        const elementForItem = this.elementsForItems.get(item);\n        if (elementForItem?.firstChild) {\n          elementForItem.firstChild.remove();\n        }\n        if (elementForItem && key & this.bitFieldValue) {\n          UI.UIUtils.createTextChild(elementForItem.createChild('div'), '');\n        } else {\n          this.hiddenLevels.push(item.stringValue);\n        }\n      }\n    }\n  }\n\n  titleFor(item: SelectableLevel): string {\n    // This would make a lot more sense to have in |itemSelected|, but this\n    // method gets called first.\n    if (item.overwrite) {\n      this.bitFieldValue = item.value;\n    } else {\n      this.bitFieldValue ^= item.value;\n    }\n\n    if (this.bitFieldValue === MessageLevelBitfield.DEFAULT) {\n      return this.#defaultTitle;\n    }\n\n    if (this.bitFieldValue === MessageLevelBitfield.ALL) {\n      return this.allTitle;\n    }\n\n    const potentialMatch = this.itemMap.get(this.bitFieldValue);\n    if (potentialMatch) {\n      return potentialMatch.title;\n    }\n\n    return this.customTitle;\n  }\n\n  createElementForItem(item: SelectableLevel): Element {\n    const element = document.createElement('div');\n    const shadowRoot = UI.UIUtils.createShadowRootWithCoreStyles(element, {cssFile: playerMessagesViewStyles});\n    const container = shadowRoot.createChild('div', 'media-messages-level-dropdown-element');\n    const checkBox = container.createChild('div', 'media-messages-level-dropdown-checkbox');\n    const text = container.createChild('span', 'media-messages-level-dropdown-text');\n    UI.UIUtils.createTextChild(text, item.title);\n    this.elementsForItems.set(item, checkBox);\n    this.itemMap.set(item.value, item);\n    this.updateCheckMarks();\n    this.view.regenerateMessageDisplayCss(this.hiddenLevels);\n    return element;\n  }\n\n  isItemSelectable(_item: SelectableLevel): boolean {\n    return true;\n  }\n\n  itemSelected(_item: SelectableLevel|null): void {\n    this.updateCheckMarks();\n    this.view.regenerateMessageDisplayCss(this.hiddenLevels);\n  }\n\n  highlightedItemChanged(\n      _from: SelectableLevel|null, _to: SelectableLevel|null, _fromElement: Element|null,\n      _toElement: Element|null): void {\n  }\n}\n\nexport class PlayerMessagesView extends UI.Widget.VBox {\n  private readonly headerPanel: HTMLElement;\n  private readonly bodyPanel: HTMLElement;\n  private messageLevelSelector?: MessageLevelSelector;\n\n  constructor() {\n    super({jslog: `${VisualLogging.pane('messages')}`});\n    this.registerRequiredCSS(playerMessagesViewStyles);\n\n    this.headerPanel = this.contentElement.createChild('div', 'media-messages-header');\n    this.bodyPanel = this.contentElement.createChild('div', 'media-messages-body');\n\n    this.buildToolbar();\n  }\n\n  private buildToolbar(): void {\n    const toolbar = this.headerPanel.createChild('devtools-toolbar', 'media-messages-toolbar');\n    toolbar.appendText(i18nString(UIStrings.logLevel));\n    toolbar.appendToolbarItem(this.createDropdown());\n    toolbar.appendSeparator();\n    toolbar.appendToolbarItem(this.createFilterInput());\n  }\n\n  private createDropdown(): UI.Toolbar.ToolbarItem {\n    const items = new UI.ListModel.ListModel<SelectableLevel>();\n    this.messageLevelSelector = new MessageLevelSelector(items, this);\n    const dropDown = new UI.SoftDropDown.SoftDropDown<SelectableLevel>(items, this.messageLevelSelector, 'log-level');\n    dropDown.setRowHeight(18);\n\n    this.messageLevelSelector.populate();\n    this.messageLevelSelector.setDefault(dropDown);\n\n    const dropDownItem = new UI.Toolbar.ToolbarItem(dropDown.element);\n    dropDownItem.element.classList.add('toolbar-has-dropdown');\n    dropDownItem.setEnabled(true);\n    dropDownItem.setTitle(this.messageLevelSelector.defaultTitle());\n    UI.ARIAUtils.setLabel(\n        dropDownItem.element, `${i18nString(UIStrings.logLevel)} ${this.messageLevelSelector.defaultTitle()}`);\n    return dropDownItem;\n  }\n\n  private createFilterInput(): UI.Toolbar.ToolbarInput {\n    const filterInput = new UI.Toolbar.ToolbarFilter(i18nString(UIStrings.filterByLogMessages), 1, 1);\n    filterInput.addEventListener(UI.Toolbar.ToolbarInput.Event.TEXT_CHANGED, (data: {data: string}) => {\n      this.filterByString(data as {\n        data: string,\n      });\n    }, this);\n    return filterInput;\n  }\n\n  regenerateMessageDisplayCss(hiddenLevels: string[]): void {\n    const messages = this.bodyPanel.getElementsByClassName('media-messages-message-container');\n    for (const message of messages) {\n      if (this.matchesHiddenLevels(message, hiddenLevels)) {\n        message.classList.add('media-messages-message-unselected');\n      } else {\n        message.classList.remove('media-messages-message-unselected');\n      }\n    }\n  }\n\n  private matchesHiddenLevels(element: Element, hiddenLevels: string[]): boolean {\n    for (const level of hiddenLevels) {\n      if (element.classList.contains('media-message-' + level)) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  private filterByString(userStringData: {data: string}): void {\n    const userString = userStringData.data;\n    const messages = this.bodyPanel.getElementsByClassName('media-messages-message-container');\n\n    for (const message of messages) {\n      if (userString === '') {\n        message.classList.remove('media-messages-message-filtered');\n      } else if (message.textContent?.includes(userString)) {\n        message.classList.remove('media-messages-message-filtered');\n      } else {\n        message.classList.add('media-messages-message-filtered');\n      }\n    }\n  }\n\n  addMessage(message: Protocol.Media.PlayerMessage): void {\n    const container =\n        this.bodyPanel.createChild('div', 'media-messages-message-container media-message-' + message.level);\n    UI.UIUtils.createTextChild(container, message.message);\n  }\n\n  private errorToDiv(error: Protocol.Media.PlayerError): Element {\n    const entry = UI.Fragment.Fragment.build`\n    <div class=\"status-error-box\">\n    <div class=\"status-error-field-labeled\">\n      <span class=\"status-error-field-label\" $=\"status-error-group\"></span>\n      <span>${error.errorType}</span>\n    </div>\n    <div class=\"status-error-field-labeled\">\n      <span class=\"status-error-field-label\" $=\"status-error-code\"></span>\n      <span>${error.code}</span>\n    </div>\n    <div class=\"status-error-field-labeled\" $=\"status-error-data\">\n    </div>\n    <div class=\"status-error-field-labeled\" $=\"status-error-stack\">\n    </div>\n    <div class=\"status-error-field-labeled\" $=\"status-error-cause\">\n    </div>\n    `;\n\n    entry.$('status-error-group').textContent = i18nString(UIStrings.errorGroupLabel);\n    entry.$('status-error-code').textContent = i18nString(UIStrings.errorCodeLabel);\n\n    if (Object.keys(error.data).length !== 0) {\n      const label = entry.$('status-error-data').createChild('span', 'status-error-field-label');\n      UI.UIUtils.createTextChild(label, i18nString(UIStrings.errorDataLabel));\n      const dataContent = entry.$('status-error-data').createChild('div');\n      for (const [key, value] of Object.entries(error.data)) {\n        const datumContent = dataContent.createChild('div');\n        UI.UIUtils.createTextChild(datumContent, `${key}: ${value}`);\n      }\n    }\n\n    if (error.stack.length !== 0) {\n      const label = entry.$('status-error-stack').createChild('span', 'status-error-field-label');\n      UI.UIUtils.createTextChild(label, i18nString(UIStrings.errorStackLabel));\n      const stackContent = entry.$('status-error-stack').createChild('div');\n      for (const stackEntry of error.stack) {\n        const frameBox = stackContent.createChild('div');\n        UI.UIUtils.createTextChild(frameBox, `${stackEntry.file}:${stackEntry.line}`);\n      }\n    }\n\n    if (error.cause.length !== 0) {\n      const label = entry.$('status-error-cause').createChild('span', 'status-error-field-label');\n      UI.UIUtils.createTextChild(label, i18nString(UIStrings.errorCauseLabel));\n      entry.$('status-error-cause').appendChild(this.errorToDiv(error.cause[0]));\n    }\n\n    return entry.element();\n  }\n\n  addError(error: Protocol.Media.PlayerError): void {\n    const container = this.bodyPanel.createChild('div', 'media-messages-message-container media-message-error');\n    container.appendChild(this.errorToDiv(error));\n  }\n}\n", "// Copyright 2025 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n// IMPORTANT: this file is auto generated. Please do not edit this file.\n/* istanbul ignore file */\nexport default `/*\n * Copyright 2020 The Chromium Authors\n * Use of this source code is governed by a BSD-style license that can be\n * found in the LICENSE file.\n */\n.media-messages-header {\n  background-color: var(--sys-color-cdt-base-container);\n  border-bottom: 1px solid var(--sys-color-divider);\n  min-height: 26px;\n}\n\n.media-messages-body {\n  overflow-y: scroll;\n}\n\n.media-messages-level-dropdown-element {\n  height: 18px;\n  line-height: 18px;\n}\n\n.media-messages-level-dropdown-text {\n  float: left;\n}\n\n.media-messages-level-dropdown-checkbox {\n  float: left;\n  width: 18px;\n  height: 100%;\n  padding-left: 2px;\n}\n\n.media-messages-message-container {\n  margin: 4px;\n  font-size: 14px;\n  line-height: 18px;\n  padding: 4px;\n  user-select: text;\n}\n\n.media-messages-message-container + .media-messages-message-container {\n  border-top: 1px solid var(--sys-color-divider);\n\n  &.media-message-warning,\n  &.media-message-error {\n    border: none;\n  }\n}\n\n.media-message-warning {\n  border-radius: 5px;\n  background-color: var(--sys-color-surface-yellow);\n  color: var(--sys-color-on-surface-yellow);\n}\n\n.media-message-error {\n  border-radius: 5px;\n  background-color: var(--sys-color-surface-error);\n  color: var(--sys-color-on-surface-error);\n}\n\n.media-messages-message-filtered {\n  display: none;\n}\n\n.media-messages-message-unselected {\n  display: none;\n}\n\n.status-error-box {\n  font-family: monospace;\n  border: 1px solid var(--sys-color-error-outline);\n  border-radius: 5px;\n  padding: 4px;\n}\n\n.status-error-field-label {\n  padding-right: 10px;\n  color: var(--sys-color-token-subtle);\n}\n\n.status-error-field-labeled {\n  display: flex;\n}\n\n/*# sourceURL=${import.meta.resolve('./playerMessagesView.css')} */`;", "// Copyright 2019 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n/* eslint-disable @devtools/no-imperative-dom-api */\n\nimport * as i18n from '../../core/i18n/i18n.js';\nimport * as Platform from '../../core/platform/platform.js';\nimport type * as Protocol from '../../generated/protocol.js';\nimport * as SourceFrame from '../../ui/legacy/components/source_frame/source_frame.js';\nimport * as UI from '../../ui/legacy/legacy.js';\nimport * as VisualLogging from '../../ui/visual_logging/visual_logging.js';\n\nimport playerPropertiesViewStyles from './playerPropertiesView.css.js';\n\nconst UIStrings = {\n  /**\n   * @description The type of media, for example - video, audio, or text. Capitalized.\n   */\n  video: 'Video',\n  /**\n   * @description The type of media, for example - video, audio, or text. Capitalized.\n   */\n  audio: 'Audio',\n  /**\n   * @description A video or audio stream - but capitalized.\n   */\n  track: 'Track',\n  /**\n   * @description A device that converts media files into playable streams of audio or video.\n   */\n  decoder: 'Decoder',\n  /**\n   * @description Title of the 'Properties' tool in the sidebar of the elements tool\n   */\n  properties: 'Properties',\n  /**\n   * @description Menu label for text tracks, it is followed by a number, like 'Text Track #1'\n   */\n  textTrack: 'Text track',\n  /**\n   * @description Placeholder text stating that there are no text tracks on this player. A text track\n   * is all of the text that accompanies a particular video.\n   */\n  noTextTracks: 'No text tracks',\n  /**\n   * @description Media property giving the width x height of the video\n   */\n  resolution: 'Resolution',\n  /**\n   * @description Media property giving the file size of the media\n   */\n  fileSize: 'File size',\n  /**\n   * @description Media property giving the media file bitrate\n   */\n  bitrate: 'Bitrate',\n  /**\n   * @description Text for the duration of something\n   */\n  duration: 'Duration',\n  /**\n   * @description The label for a timestamp when a video was started.\n   */\n  startTime: 'Start time',\n  /**\n   * @description Media property signaling whether the media is streaming\n   */\n  streaming: 'Streaming',\n  /**\n   * @description Media property describing where the media is playing from.\n   */\n  playbackFrameUrl: 'Playback frame URL',\n  /**\n   * @description Media property giving the title of the frame where the media is embedded\n   */\n  playbackFrameTitle: 'Playback frame title',\n  /**\n   * @description Media property describing whether the file is single or cross origin in nature\n   */\n  singleoriginPlayback: 'Single-origin playback',\n  /**\n   * @description Media property describing support for range http headers\n   */\n  rangeHeaderSupport: '`Range` header support',\n  /**\n   * @description Media property giving the media file frame rate\n   */\n  frameRate: 'Frame rate',\n  /**\n   * @description Media property giving the distance of the playback quality from the ideal playback.\n   * Roughness is the opposite to smoothness, i.e. whether each frame of the video was played at the\n   * right time so that the video looks smooth when it plays.\n   */\n  videoPlaybackRoughness: 'Video playback roughness',\n  /**\n   * @description A score describing how choppy the video playback is.\n   */\n  videoFreezingScore: 'Video freezing score',\n  /**\n   * @description Media property giving the name of the renderer being used\n   */\n  rendererName: 'Renderer name',\n\n  /**\n   * @description Media property giving the name of the decoder being used\n   */\n  decoderName: 'Decoder name',\n  /**\n   * @description There is no decoder\n   */\n  noDecoder: 'No decoder',\n  /**\n   * @description Media property signaling whether a hardware decoder is being used\n   */\n  hardwareDecoder: 'Hardware decoder',\n  /**\n   * @description Media property signaling whether the content is encrypted. This is a noun phrase for\n   *a demultiplexer that does decryption.\n   */\n  decryptingDemuxer: 'Decrypting demuxer',\n\n  /**\n   * @description Media property giving the name of the video encoder being used.\n   */\n  encoderName: 'Encoder name',\n  /**\n   * @description There is no encoder.\n   */\n  noEncoder: 'No encoder',\n  /**\n   * @description Media property signaling whether the encoder is hardware accelerated.\n   */\n  hardwareEncoder: 'Hardware encoder',\n  /**\n   * @description Property for adaptive (HLS) playback which shows the start/end time of the loaded content buffer\n   */\n  hlsBufferedRanges: 'Buffered media ranges',\n} as const;\n\nconst str_ = i18n.i18n.registerUIStrings('panels/media/PlayerPropertiesView.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\nconst i18nLazyString = i18n.i18n.getLazilyComputedLocalizedString.bind(undefined, str_);\n\ntype TabData = Record<string, string|object>;\n\n/** Keep this enum in sync with panels/media/base/media_log_properties.h **/\nexport const enum PlayerPropertyKeys {\n  RESOLUTION = 'kResolution',\n  TOTAL_BYTES = 'kTotalBytes',\n  BITRATE = 'kBitrate',\n  MAX_DURATION = 'kMaxDuration',\n  START_TIME = 'kStartTime',\n  IS_CDM_ATTACHED = 'kIsCdmAttached',\n  IS_STREAMING = 'kIsStreaming',\n  FRAME_URL = 'kFrameUrl',\n  FRAME_TITLE = 'kFrameTitle',\n  IS_SINGLE_ORIGIN = 'kIsSingleOrigin',\n  IS_RANGE_HEADER_SUPPORTED = 'kIsRangeHeaderSupported',\n  RENDERER_NAME = 'kRendererName',\n  VIDEO_DECODER_NAME = 'kVideoDecoderName',\n  AUDIO_DECODER_NAME = 'kAudioDecoderName',\n  IS_PLATFORM_VIDEO_DECODER = 'kIsPlatformVideoDecoder',\n  IS_PLATFORM_AUDIO_DECODER = 'kIsPlatformAudioDecoder',\n  VIDEO_ENCODER_NAME = 'kVideoEncoderName',\n  IS_PLATFORM_VIDEO_ENCODER = 'kIsPlatformVideoEncoder',\n  IS_VIDEO_DECRYPTION_DEMUXER_STREAM = 'kIsVideoDecryptingDemuxerStream',\n  IS_AUDIO_DECRYPTING_DEMUXER_STREAM = 'kIsAudioDecryptingDemuxerStream',\n  AUDIO_TRACKS = 'kAudioTracks',\n  TEXT_TRACKS = 'kTextTracks',\n  VIDEO_TRACKS = 'kVideoTracks',\n  FRAMERATE = 'kFramerate',\n  VIDEO_PLAYBACK_ROUGHNESS = 'kVideoPlaybackRoughness',\n  VIDEO_PLAYBACK_FREEZING = 'kVideoPlaybackFreezing',\n  HLS_BUFFERED_RANGES = 'kHlsBufferedRanges',\n}\n\nexport class PropertyRenderer extends UI.Widget.VBox {\n  private readonly contents: HTMLElement;\n  private value: string|null;\n  private pseudoColorProtectionElement: HTMLDivElement|null;\n\n  constructor(title: Platform.UIString.LocalizedString) {\n    super();\n    this.contentElement.classList.add('media-property-renderer');\n    const titleElement = this.contentElement.createChild('span', 'media-property-renderer-title');\n    this.contents = this.contentElement.createChild('div', 'media-property-renderer-contents');\n    UI.UIUtils.createTextChild(titleElement, title);\n    this.value = null;\n    this.pseudoColorProtectionElement = null;\n    this.contentElement.classList.add('media-property-renderer-hidden');\n  }\n\n  updateData(propvalue: string): void {\n    // convert all empty possibilities into nulls for easier handling.\n    if (propvalue === '' || propvalue === null) {\n      this.changeContents(null);\n    } else if (this.value === propvalue) {\n      return;  // Don't rebuild element!\n    } else {\n      this.value = propvalue;\n      this.updateDataInternal(propvalue);\n    }\n  }\n\n  updateDataInternal(propvalue: string): void {\n    try {\n      const parsed = JSON.parse(propvalue) as string;\n      this.changeContents(parsed);\n    } catch {\n      // Some properties are just raw strings.\n      this.changeContents(propvalue);\n    }\n  }\n\n  protected unsetNestedContents(): void {\n    this.contentElement.classList.add('media-property-renderer-hidden');\n    if (this.pseudoColorProtectionElement === null) {\n      this.pseudoColorProtectionElement = document.createElement('div');\n      this.pseudoColorProtectionElement.classList.add('media-property-renderer');\n      this.pseudoColorProtectionElement.classList.add('media-property-renderer-hidden');\n      (this.contentElement.parentNode as HTMLElement)\n          .insertBefore(this.pseudoColorProtectionElement, this.contentElement);\n    }\n  }\n\n  changeNestedContents(value: object): void {\n    if (value === null || Object.keys(value).length === 0) {\n      this.unsetNestedContents();\n    } else {\n      if (this.pseudoColorProtectionElement !== null) {\n        this.pseudoColorProtectionElement.remove();\n        this.pseudoColorProtectionElement = null;\n      }\n      this.contentElement.classList.remove('media-property-renderer-hidden');\n      this.contents.removeChildren();\n      const jsonWrapperElement =\n          new SourceFrame.JSONView.JSONView(new SourceFrame.JSONView.ParsedJSON(value, '', ''), true);\n      jsonWrapperElement.show(this.contents);\n    }\n  }\n\n  changeContents(value: string|null): void {\n    if (value === null) {\n      this.unsetNestedContents();\n    } else {\n      if (this.pseudoColorProtectionElement !== null) {\n        this.pseudoColorProtectionElement.remove();\n        this.pseudoColorProtectionElement = null;\n      }\n      this.contentElement.classList.remove('media-property-renderer-hidden');\n      this.contents.removeChildren();\n      const spanElement = document.createElement('span');\n      spanElement.textContent = value;\n      this.contents.appendChild(spanElement);\n    }\n  }\n}\n\nexport class FormattedPropertyRenderer<DataType> extends PropertyRenderer {\n  private readonly formatfunction: (arg0: DataType) => string;\n  constructor(title: Platform.UIString.LocalizedString, formatfunction: (arg0: DataType) => string) {\n    super(title);\n    this.formatfunction = formatfunction;\n  }\n\n  override updateDataInternal(propvalue: string): void {\n    try {\n      const parsed: DataType = JSON.parse(propvalue) as DataType;\n      this.changeContents(this.formatfunction(parsed));\n    } catch {\n      const unparsed = propvalue as DataType;\n      this.changeContents(this.formatfunction(unparsed));\n    }\n  }\n}\n\nexport class DefaultPropertyRenderer extends PropertyRenderer {\n  constructor(title: Platform.UIString.LocalizedString, defaultText: string) {\n    super(title);\n    this.changeContents(defaultText);\n  }\n}\n\nexport class NestedPropertyRenderer extends PropertyRenderer {\n  constructor(title: Platform.UIString.LocalizedString, content: object) {\n    super(title);\n    this.changeNestedContents(content);\n  }\n}\n\nexport class AttributesView extends UI.Widget.VBox {\n  private readonly contentHash: number;\n\n  constructor(elements: UI.Widget.Widget[]) {\n    super();\n    this.contentHash = 0;\n    this.contentElement.classList.add('media-attributes-view');\n    for (const element of elements) {\n      element.show(this.contentElement);\n      // We just need a really simple way to compare the topical equality\n      // of the attributes views in order to avoid deleting and recreating\n      // a node containing exactly the same data.\n      const content = this.contentElement.textContent;\n      if (content !== null) {\n        this.contentHash += Platform.StringUtilities.hashCode(content);\n      }\n    }\n  }\n\n  getContentHash(): number {\n    return this.contentHash;\n  }\n}\n\nexport class TrackManager {\n  private readonly type: string;\n  private readonly view: PlayerPropertiesView;\n\n  constructor(propertiesView: PlayerPropertiesView, type: string) {\n    this.type = type;\n    this.view = propertiesView;\n  }\n\n  updateData(value: string): void {\n    const tabs = this.view.getTabs(this.type);\n\n    const newTabs = JSON.parse(value) as TabData[];\n    let enumerate = 1;\n    for (const tabData of newTabs) {\n      this.addNewTab(tabs, tabData, enumerate);\n      enumerate++;\n    }\n  }\n\n  addNewTab(tabs: GenericTrackMenu|NoTracksPlaceholderMenu, tabData: TabData, tabNumber: number): void {\n    const tabElements = [];\n    for (const [name, data] of Object.entries(tabData)) {\n      if (typeof data === 'object') {\n        tabElements.push(new NestedPropertyRenderer(i18n.i18n.lockedString(name), data));\n      } else {\n        tabElements.push(new DefaultPropertyRenderer(i18n.i18n.lockedString(name), data));\n      }\n    }\n    const newTab = new AttributesView(tabElements);\n\n    tabs.addNewTab(tabNumber, newTab);\n  }\n}\n\nexport class VideoTrackManager extends TrackManager {\n  constructor(propertiesView: PlayerPropertiesView) {\n    super(propertiesView, 'video');\n  }\n}\n\nexport class TextTrackManager extends TrackManager {\n  constructor(propertiesView: PlayerPropertiesView) {\n    super(propertiesView, 'text');\n  }\n}\n\nexport class AudioTrackManager extends TrackManager {\n  constructor(propertiesView: PlayerPropertiesView) {\n    super(propertiesView, 'audio');\n  }\n}\n\nconst TrackTypeLocalized = {\n  Video: i18nLazyString(UIStrings.video),\n  Audio: i18nLazyString(UIStrings.audio),\n};\n\nclass GenericTrackMenu extends UI.TabbedPane.TabbedPane {\n  private readonly decoderName: string;\n  private readonly trackName: string;\n\n  constructor(decoderName: string, trackName: string = i18nString(UIStrings.track)) {\n    super();\n    this.decoderName = decoderName;\n    this.trackName = trackName;\n  }\n\n  addNewTab(trackNumber: number, element: AttributesView): void {\n    const localizedTrackLower = i18nString(UIStrings.track);\n    const tabId = `track-${trackNumber}` as Lowercase<string>;\n    if (this.hasTab(tabId)) {\n      const tabElement = this.tabView(tabId);\n      if (tabElement === null) {\n        return;\n      }\n      if ((tabElement as AttributesView).getContentHash() === element.getContentHash()) {\n        return;\n      }\n      this.closeTab(tabId, /* userGesture=*/ false);\n    }\n    this.appendTab(\n        tabId,  // No need for localizing, internal ID.\n        `${this.trackName} #${trackNumber}`, element, `${this.decoderName} ${localizedTrackLower} #${trackNumber}`);\n  }\n}\n\nclass DecoderTrackMenu extends GenericTrackMenu {\n  constructor(decoderName: string, informationalElement: UI.Widget.Widget) {\n    super(decoderName);\n\n    const decoderLocalized = i18nString(UIStrings.decoder);\n    const title = `${decoderName} ${decoderLocalized}`;\n    const propertiesLocalized = i18nString(UIStrings.properties);\n    const hoverText = `${title} ${propertiesLocalized}`;\n    this.appendTab('decoder-properties', title, informationalElement, hoverText);\n  }\n}\n\nclass NoTracksPlaceholderMenu extends UI.Widget.VBox {\n  private isPlaceholder: boolean;\n  private readonly wrapping: GenericTrackMenu;\n\n  constructor(wrapping: GenericTrackMenu, placeholderText: string) {\n    super();\n    this.isPlaceholder = true;\n    this.wrapping = wrapping;\n    this.wrapping.appendTab('_placeholder', placeholderText, new UI.Widget.VBox(), placeholderText);\n    this.wrapping.show(this.contentElement);\n  }\n\n  addNewTab(trackNumber: number, element: AttributesView): void {\n    if (this.isPlaceholder) {\n      this.wrapping.closeTab('_placeholder');\n      this.isPlaceholder = false;\n    }\n    this.wrapping.addNewTab(trackNumber, element);\n  }\n}\n\nexport class PlayerPropertiesView extends UI.Widget.VBox {\n  private readonly mediaElements: PropertyRenderer[];\n  private readonly videoDecoderElements: PropertyRenderer[];\n  private readonly audioDecoderElements: PropertyRenderer[];\n  private readonly attributeMap: Map<string, PropertyRenderer|TrackManager>;\n  private readonly videoProperties: AttributesView;\n  private readonly videoDecoderProperties: AttributesView;\n  private readonly audioDecoderProperties: AttributesView;\n  private readonly videoDecoderTabs: DecoderTrackMenu;\n  private readonly audioDecoderTabs: DecoderTrackMenu;\n  private textTracksTabs: GenericTrackMenu|NoTracksPlaceholderMenu|null;\n\n  constructor() {\n    super({jslog: `${VisualLogging.pane('properties')}`});\n    this.registerRequiredCSS(playerPropertiesViewStyles);\n\n    this.contentElement.classList.add('media-properties-frame');\n\n    this.mediaElements = [];\n    this.videoDecoderElements = [];\n    this.audioDecoderElements = [];\n    this.attributeMap = new Map();\n\n    this.populateAttributesAndElements();\n    this.videoProperties = new AttributesView(this.mediaElements);\n    this.videoDecoderProperties = new AttributesView(this.videoDecoderElements);\n    this.audioDecoderProperties = new AttributesView(this.audioDecoderElements);\n\n    this.videoProperties.show(this.contentElement);\n    this.videoDecoderTabs = new DecoderTrackMenu(TrackTypeLocalized.Video(), this.videoDecoderProperties);\n    this.videoDecoderTabs.show(this.contentElement);\n    this.audioDecoderTabs = new DecoderTrackMenu(TrackTypeLocalized.Audio(), this.audioDecoderProperties);\n    this.audioDecoderTabs.show(this.contentElement);\n\n    this.textTracksTabs = null;\n  }\n\n  private lazyCreateTrackTabs(): GenericTrackMenu|NoTracksPlaceholderMenu {\n    let textTracksTabs = this.textTracksTabs;\n    if (textTracksTabs === null) {\n      const textTracks = new GenericTrackMenu(i18nString(UIStrings.textTrack));\n      textTracksTabs = new NoTracksPlaceholderMenu(textTracks, i18nString(UIStrings.noTextTracks));\n      textTracksTabs.show(this.contentElement);\n      this.textTracksTabs = textTracksTabs;\n    }\n    return textTracksTabs;\n  }\n\n  getTabs(type: string): GenericTrackMenu|NoTracksPlaceholderMenu {\n    if (type === 'audio') {\n      return this.audioDecoderTabs;\n    }\n    if (type === 'video') {\n      return this.videoDecoderTabs;\n    }\n    if (type === 'text') {\n      return this.lazyCreateTrackTabs();\n    }\n    // There should be no other type allowed.\n    throw new Error('Unreachable');\n  }\n\n  onProperty(property: Protocol.Media.PlayerProperty): void {\n    const renderer = this.attributeMap.get(property.name);\n    if (!renderer) {\n      throw new Error(`Player property \"${property.name}\" not supported.`);\n    }\n    renderer.updateData(property.value);\n  }\n\n  formatKbps(bitsPerSecond: string|number): string {\n    if (bitsPerSecond === '') {\n      return '0 kbps';\n    }\n    const kbps = Math.floor(Number(bitsPerSecond) / 1000);\n    return `${kbps} kbps`;\n  }\n\n  formatTime(seconds: string|number): string {\n    if (seconds === '') {\n      return '0:00';\n    }\n    const date = new Date();\n    date.setSeconds(Number(seconds));\n    return date.toISOString().substr(11, 8);\n  }\n\n  formatFileSize(bytes: string): string {\n    if (bytes === '') {\n      return '0 bytes';\n    }\n    const actualBytes = Number(bytes);\n    if (actualBytes < 1000) {\n      return `${bytes} bytes`;\n    }\n    const power = Math.floor(Math.log10(actualBytes) / 3);\n    const suffix = ['bytes', 'kB', 'MB', 'GB', 'TB'][power];\n    const bytesDecimal = (actualBytes / Math.pow(1000, power)).toFixed(2);\n    return `${bytesDecimal} ${suffix}`;\n  }\n\n  formatBufferedRanges(ranges: string[]): string {\n    // ranges is an array of `Range`, where a `Range` is a tuple-array of start/end floating point numbers.\n    return ranges\n        .map(range => {\n          return '[' + range[0] + '  ' + range[1] + ']';\n        })\n        .join(', ');\n  }\n\n  populateAttributesAndElements(): void {\n    /* Media properties */\n    const resolution = new PropertyRenderer(i18nString(UIStrings.resolution));\n    this.mediaElements.push(resolution);\n    this.attributeMap.set(PlayerPropertyKeys.RESOLUTION, resolution);\n\n    const fileSize = new FormattedPropertyRenderer(i18nString(UIStrings.fileSize), this.formatFileSize);\n    this.mediaElements.push(fileSize);\n    this.attributeMap.set(PlayerPropertyKeys.TOTAL_BYTES, fileSize);\n\n    const bitrate = new FormattedPropertyRenderer(i18nString(UIStrings.bitrate), this.formatKbps);\n    this.mediaElements.push(bitrate);\n    this.attributeMap.set(PlayerPropertyKeys.BITRATE, bitrate);\n\n    const duration = new FormattedPropertyRenderer(i18nString(UIStrings.duration), this.formatTime);\n    this.mediaElements.push(duration);\n    this.attributeMap.set(PlayerPropertyKeys.MAX_DURATION, duration);\n\n    const startTime = new PropertyRenderer(i18nString(UIStrings.startTime));\n    this.mediaElements.push(startTime);\n    this.attributeMap.set(PlayerPropertyKeys.START_TIME, startTime);\n\n    const streaming = new PropertyRenderer(i18nString(UIStrings.streaming));\n    this.mediaElements.push(streaming);\n    this.attributeMap.set(PlayerPropertyKeys.IS_STREAMING, streaming);\n\n    const frameUrl = new PropertyRenderer(i18nString(UIStrings.playbackFrameUrl));\n    this.mediaElements.push(frameUrl);\n    this.attributeMap.set(PlayerPropertyKeys.FRAME_URL, frameUrl);\n\n    const frameTitle = new PropertyRenderer(i18nString(UIStrings.playbackFrameTitle));\n    this.mediaElements.push(frameTitle);\n    this.attributeMap.set(PlayerPropertyKeys.FRAME_TITLE, frameTitle);\n\n    const singleOrigin = new PropertyRenderer(i18nString(UIStrings.singleoriginPlayback));\n    this.mediaElements.push(singleOrigin);\n    this.attributeMap.set(PlayerPropertyKeys.IS_SINGLE_ORIGIN, singleOrigin);\n\n    const rangeHeaders = new PropertyRenderer(i18nString(UIStrings.rangeHeaderSupport));\n    this.mediaElements.push(rangeHeaders);\n    this.attributeMap.set(PlayerPropertyKeys.IS_RANGE_HEADER_SUPPORTED, rangeHeaders);\n\n    const frameRate = new PropertyRenderer(i18nString(UIStrings.frameRate));\n    this.mediaElements.push(frameRate);\n    this.attributeMap.set(PlayerPropertyKeys.FRAMERATE, frameRate);\n\n    const roughness = new PropertyRenderer(i18nString(UIStrings.videoPlaybackRoughness));\n    this.mediaElements.push(roughness);\n    this.attributeMap.set(PlayerPropertyKeys.VIDEO_PLAYBACK_ROUGHNESS, roughness);\n\n    const freezingScore = new PropertyRenderer(i18nString(UIStrings.videoFreezingScore));\n    this.mediaElements.push(freezingScore);\n    this.attributeMap.set(PlayerPropertyKeys.VIDEO_PLAYBACK_FREEZING, freezingScore);\n\n    const rendererName = new PropertyRenderer(i18nString(UIStrings.rendererName));\n    this.mediaElements.push(rendererName);\n    this.attributeMap.set(PlayerPropertyKeys.RENDERER_NAME, rendererName);\n\n    const hlsBufferedRanges =\n        new FormattedPropertyRenderer(i18nString(UIStrings.hlsBufferedRanges), this.formatBufferedRanges);\n    this.mediaElements.push(hlsBufferedRanges);\n    this.attributeMap.set(PlayerPropertyKeys.HLS_BUFFERED_RANGES, hlsBufferedRanges);\n\n    /* Video Decoder Properties */\n    const decoderName = new DefaultPropertyRenderer(i18nString(UIStrings.decoderName), i18nString(UIStrings.noDecoder));\n    this.videoDecoderElements.push(decoderName);\n    this.attributeMap.set(PlayerPropertyKeys.VIDEO_DECODER_NAME, decoderName);\n\n    const videoPlatformDecoder = new PropertyRenderer(i18nString(UIStrings.hardwareDecoder));\n    this.videoDecoderElements.push(videoPlatformDecoder);\n    this.attributeMap.set(PlayerPropertyKeys.IS_PLATFORM_VIDEO_DECODER, videoPlatformDecoder);\n\n    const encoderName = new DefaultPropertyRenderer(i18nString(UIStrings.encoderName), i18nString(UIStrings.noEncoder));\n    this.videoDecoderElements.push(encoderName);\n    this.attributeMap.set(PlayerPropertyKeys.VIDEO_ENCODER_NAME, encoderName);\n\n    const videoPlatformEncoder = new PropertyRenderer(i18nString(UIStrings.hardwareEncoder));\n    this.videoDecoderElements.push(videoPlatformEncoder);\n    this.attributeMap.set(PlayerPropertyKeys.IS_PLATFORM_VIDEO_ENCODER, videoPlatformEncoder);\n\n    const videoDDS = new PropertyRenderer(i18nString(UIStrings.decryptingDemuxer));\n    this.videoDecoderElements.push(videoDDS);\n    this.attributeMap.set(PlayerPropertyKeys.IS_VIDEO_DECRYPTION_DEMUXER_STREAM, videoDDS);\n\n    const videoTrackManager = new VideoTrackManager(this);\n    this.attributeMap.set(PlayerPropertyKeys.VIDEO_TRACKS, videoTrackManager);\n\n    /* Audio Decoder Properties */\n    const audioDecoder =\n        new DefaultPropertyRenderer(i18nString(UIStrings.decoderName), i18nString(UIStrings.noDecoder));\n    this.audioDecoderElements.push(audioDecoder);\n    this.attributeMap.set(PlayerPropertyKeys.AUDIO_DECODER_NAME, audioDecoder);\n\n    const audioPlatformDecoder = new PropertyRenderer(i18nString(UIStrings.hardwareDecoder));\n    this.audioDecoderElements.push(audioPlatformDecoder);\n    this.attributeMap.set(PlayerPropertyKeys.IS_PLATFORM_AUDIO_DECODER, audioPlatformDecoder);\n\n    const audioDDS = new PropertyRenderer(i18nString(UIStrings.decryptingDemuxer));\n    this.audioDecoderElements.push(audioDDS);\n    this.attributeMap.set(PlayerPropertyKeys.IS_AUDIO_DECRYPTING_DEMUXER_STREAM, audioDDS);\n\n    const audioTrackManager = new AudioTrackManager(this);\n    this.attributeMap.set(PlayerPropertyKeys.AUDIO_TRACKS, audioTrackManager);\n\n    const textTrackManager = new TextTrackManager(this);\n    this.attributeMap.set(PlayerPropertyKeys.TEXT_TRACKS, textTrackManager);\n  }\n}\n", "// Copyright 2025 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n// IMPORTANT: this file is auto generated. Please do not edit this file.\n/* istanbul ignore file */\nexport default `/*\n * Copyright 2019 The Chromium Authors\n * Use of this source code is governed by a BSD-style license that can be\n * found in the LICENSE file.\n */\n\n.media-attributes-view {\n  border-bottom: 1px solid var(--sys-color-divider);\n}\n\n.media-property-renderer {\n  line-height: 20px;\n  min-height: 28px;\n  padding: 4px 10px;\n  display: block;\n  overflow: hidden;\n\n  &:hover {\n    background: var(--sys-color-state-hover-on-subtle);\n  }\n}\n\n.media-property-renderer:nth-child(even):not(:hover) {\n  background: var(--sys-color-surface1);\n}\n\n.media-property-renderer:has(.json-view) {\n  padding-bottom: 0;\n}\n\n.media-property-renderer:has(.json-view > .expanded) {\n  padding-bottom: 4px;\n}\n\n.media-property-renderer-hidden {\n  display: none;\n}\n\n.media-property-renderer-title {\n  font-size: 12px;\n  float: left;\n  width: 150px;\n}\n\n.media-property-renderer-title::first-letter {\n  text-transform: uppercase;\n}\n\n.media-property-renderer-contents {\n  position: relative;\n\n  & > .json-view {\n    overflow: hidden;\n    padding: 0;\n  }\n}\n\n.media-properties-frame {\n  display: block;\n  overflow-x: hidden;\n}\n\n/*# sourceURL=${import.meta.resolve('./playerPropertiesView.css')} */`;", "// Copyright 2019 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport '../../ui/components/icon_button/icon_button.js';\n\nimport * as i18n from '../../core/i18n/i18n.js';\nimport type * as Protocol from '../../generated/protocol.js';\nimport * as UI from '../../ui/legacy/legacy.js';\nimport {Directives, html, render} from '../../ui/lit/lit.js';\nimport * as VisualLogging from '../../ui/visual_logging/visual_logging.js';\n\nimport type {MainView, TriggerDispatcher} from './MainView.js';\nimport type {PlayerEvent} from './MediaModel.js';\nimport playerListViewStyles from './playerListView.css.js';\nimport {PlayerPropertyKeys} from './PlayerPropertiesView.js';\n\nconst {classMap} = Directives;\n\nconst UIStrings = {\n  /**\n   * @description A right-click context menu entry which when clicked causes the menu entry for that player to be removed.\n   */\n  hidePlayer: 'Hide player',\n  /**\n   * @description A right-click context menu entry which should keep the element selected, while hiding all other entries.\n   */\n  hideAllOthers: 'Hide all others',\n  /**\n   * @description Context menu entry which downloads the json dump when clicked\n   */\n  savePlayerInfo: 'Save player info',\n  /**\n   * @description Side-panel entry title text for the players section.\n   */\n  players: 'Players',\n} as const;\nconst str_ = i18n.i18n.registerUIStrings('panels/media/PlayerListView.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\n\ninterface PlayerStatus {\n  playerTitle: string;\n  frameTitle: string;\n  playerID: string;\n  exists: boolean;\n  playing: boolean;\n  titleEdited: boolean;\n  iconName: string;\n}\n\nexport interface ViewInput {\n  players: PlayerStatus[];\n  selectedPlayerID: string|null;\n  onPlayerClick: (playerID: string) => void;\n  onPlayerContextMenu: (playerID: string, event: Event) => void;\n}\nexport type View = (input: ViewInput, output: object, target: HTMLElement) => void;\n\nconst DEFAULT_VIEW: View = (input, _output, target) => {\n  // clang-format off\n  render(\n    html`\n      <style>${playerListViewStyles}</style>\n      <div class=\"player-entry-header\">${i18nString(UIStrings.players)}</div>\n      ${input.players.map(player => {\n        const isSelected = player.playerID === input.selectedPlayerID;\n        return html`\n          <div class=${classMap({\n            'player-entry-row': true,\n            hbox: true,\n            selected: isSelected,\n            'force-white-icons': isSelected,\n          })}\n               @click=${() => input.onPlayerClick(player.playerID)}\n               @contextmenu=${(e: Event) => input.onPlayerContextMenu(player.playerID, e)}\n               jslog=${VisualLogging.item('player').track({click: true})}>\n            <div class=\"player-entry-status-icon vbox\">\n              <div class=\"player-entry-status-icon-centering\">\n                <devtools-icon name=${player.iconName}></devtools-icon>\n              </div>\n            </div>\n            <div class=\"player-entry-frame-title\">${player.frameTitle}</div>\n            <div class=\"player-entry-player-title\">${player.playerTitle}</div>\n          </div>\n        `;\n      })}\n    `,\n    target\n  );\n  // clang-format on\n};\n\nexport class PlayerListView extends UI.Widget.VBox implements TriggerDispatcher {\n  #view: View;\n  private readonly playerStatuses: Map<string, PlayerStatus>;\n  private readonly playerEntriesWithHostnameFrameTitle: Set<string>;\n  private readonly mainContainer: MainView;\n  private currentlySelectedPlayerID: string|null;\n\n  constructor(mainContainer: MainView, view: View = DEFAULT_VIEW) {\n    super({useShadowDom: true});\n    this.#view = view;\n\n    this.playerStatuses = new Map();\n    this.playerEntriesWithHostnameFrameTitle = new Set();\n\n    // Container where new panels can be added based on clicks.\n    this.mainContainer = mainContainer;\n\n    this.currentlySelectedPlayerID = null;\n    this.requestUpdate();\n  }\n\n  override performUpdate(): void {\n    const input: ViewInput = {\n      players: Array.from(this.playerStatuses.values()),\n      selectedPlayerID: this.currentlySelectedPlayerID,\n      onPlayerClick: this.selectPlayer.bind(this),\n      onPlayerContextMenu: this.rightClickPlayer.bind(this),\n    };\n    this.#view(input, {}, this.contentElement);\n  }\n\n  selectPlayerById(playerID: string): void {\n    if (this.playerStatuses.has(playerID)) {\n      this.selectPlayer(playerID);\n    }\n  }\n\n  private selectPlayer(playerID: string): void {\n    this.mainContainer.renderMainPanel(playerID);\n    this.currentlySelectedPlayerID = playerID;\n    this.requestUpdate();\n  }\n\n  private rightClickPlayer(playerID: string, event: Event): void {\n    const contextMenu = new UI.ContextMenu.ContextMenu(event);\n    contextMenu.headerSection().appendItem(\n        i18nString(UIStrings.hidePlayer), this.mainContainer.markPlayerForDeletion.bind(this.mainContainer, playerID),\n        {jslogContext: 'hide-player'});\n    contextMenu.headerSection().appendItem(\n        i18nString(UIStrings.hideAllOthers),\n        this.mainContainer.markOtherPlayersForDeletion.bind(this.mainContainer, playerID),\n        {jslogContext: 'hide-all-others'});\n    contextMenu.headerSection().appendItem(\n        i18nString(UIStrings.savePlayerInfo), this.mainContainer.exportPlayerData.bind(this.mainContainer, playerID),\n        {jslogContext: 'save-player-info'});\n    void contextMenu.show();\n  }\n\n  private setMediaElementFrameTitle(playerID: string, frameTitle: string, isHostname: boolean): void {\n    // Only remove the title from the set if we aren't setting a hostname title.\n    // Otherwise, if it has a non-hostname title, and the requested new title is\n    // a hostname, just drop it.\n    if (this.playerEntriesWithHostnameFrameTitle.has(playerID)) {\n      if (!isHostname) {\n        this.playerEntriesWithHostnameFrameTitle.delete(playerID);\n      }\n    } else if (isHostname) {\n      return;\n    }\n\n    if (!this.playerStatuses.has(playerID)) {\n      return;\n    }\n    const playerStatus = this.playerStatuses.get(playerID);\n    if (playerStatus) {\n      playerStatus.frameTitle = frameTitle;\n      this.requestUpdate();\n    }\n  }\n\n  private setMediaElementPlayerTitle(playerID: string, playerTitle: string): void {\n    if (!this.playerStatuses.has(playerID)) {\n      return;\n    }\n    const playerStatus = this.playerStatuses.get(playerID);\n    if (playerStatus) {\n      playerStatus.playerTitle = playerTitle;\n      this.requestUpdate();\n    }\n  }\n\n  private setMediaElementPlayerIcon(playerID: string, iconName: string): void {\n    if (!this.playerStatuses.has(playerID)) {\n      return;\n    }\n    const playerStatus = this.playerStatuses.get(playerID);\n    if (playerStatus) {\n      playerStatus.iconName = iconName;\n      this.requestUpdate();\n    }\n  }\n\n  private formatAndEvaluate(\n      playerID: string, func: (...args: any[]) => unknown, candidate: string, min: number, max: number): void {\n    if (candidate.length <= min) {\n      return;\n    }\n    if (candidate.length >= max) {\n      candidate = candidate.substring(0, max - 1) + '';\n    }\n    func.bind(this)(playerID, candidate);\n  }\n\n  addMediaElementItem(playerID: string): void {\n    this.playerStatuses.set(playerID, {\n      playerTitle: 'PlayerTitle',\n      frameTitle: 'FrameTitle',\n      playerID,\n      exists: true,\n      playing: false,\n      titleEdited: false,\n      iconName: 'pause',\n    });\n    this.playerEntriesWithHostnameFrameTitle.add(playerID);\n    this.requestUpdate();\n  }\n\n  deletePlayer(playerID: string): void {\n    if (!this.playerStatuses.has(playerID)) {\n      return;\n    }\n    this.playerStatuses.delete(playerID);\n    this.requestUpdate();\n  }\n\n  onEvent(playerID: string, event: PlayerEvent): void {\n    const parsed = JSON.parse(event.value);\n    const eventType = parsed.event;\n\n    // Load events provide the actual underlying URL for the video, which makes\n    // a great way to identify a specific video within a page that potentially\n    // may have many videos. MSE videos have a special blob:http(s) protocol\n    // that we'd like to keep mind of, so we do prepend blob:\n    if (eventType === 'kLoad') {\n      const url = parsed.url as string;\n      const videoName = url.substring(url.lastIndexOf('/') + 1);\n      this.formatAndEvaluate(playerID, this.setMediaElementPlayerTitle, videoName, 1, 20);\n      return;\n    }\n\n    if (eventType === 'kPlay') {\n      this.setMediaElementPlayerIcon(playerID, 'play');\n      return;\n    }\n\n    if (eventType === 'kPause' || eventType === 'kEnded') {\n      this.setMediaElementPlayerIcon(playerID, 'pause');\n      return;\n    }\n\n    if (eventType === 'kWebMediaPlayerDestroyed') {\n      this.setMediaElementPlayerIcon(playerID, 'cross');\n      return;\n    }\n  }\n\n  onProperty(playerID: string, property: Protocol.Media.PlayerProperty): void {\n    // FrameUrl is always present, and we can generate a basic frame title from\n    // it by grabbing the hostname. It's not possible to generate a \"good\" player\n    // title from the FrameUrl though, since the page location itself might not\n    // have any relevance to the video being played, and would be shared by all\n    // videos on the page.\n    if (property.name === PlayerPropertyKeys.FRAME_URL) {\n      const frameTitle = new URL(property.value).hostname;\n      this.formatAndEvaluate(playerID, this.setMediaElementFrameTitle, frameTitle, 1, 20);\n      return;\n    }\n\n    // On the other hand, the page may set a title, which usually makes for a\n    // better frame title than a hostname. Unfortunately, its only \"usually\",\n    // since the site is free to set the title to _anything_, it might just be\n    // junk, or it might be super long. If it's empty, or 1 character, It's\n    // preferable to just drop it. Titles longer than 20 will have the first\n    // 17 characters kept and an ellipsis appended.\n    if (property.name === PlayerPropertyKeys.FRAME_TITLE && property.value) {\n      this.formatAndEvaluate(playerID, this.setMediaElementFrameTitle, property.value, 1, 20);\n      return;\n    }\n  }\n\n  onError(_playerID: string, _error: Protocol.Media.PlayerError): void {\n    // TODO(tmathmeyer) show an error icon next to the player name\n  }\n\n  onMessage(_playerID: string, _message: Protocol.Media.PlayerMessage): void {\n    // TODO(tmathmeyer) show a message count number next to the player name.\n  }\n}\n", "// Copyright 2025 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n// IMPORTANT: this file is auto generated. Please do not edit this file.\n/* istanbul ignore file */\nexport default `/*\n * Copyright 2019 The Chromium Authors\n * Use of this source code is governed by a BSD-style license that can be\n * found in the LICENSE file.\n */\n\n.tree-outline {\n  padding-left: 0;\n  color: var(--sys-color-token-subtle);\n}\n\nli.storage-group-list-item {\n  padding: 10px 8px 6px;\n}\n\nli.storage-group-list-item:not(:first-child) {\n  border-top: 1px solid var(--sys-color-divider);\n}\n\nli.storage-group-list-item::before {\n  display: none;\n}\n\n.player-entry-row {\n  height: 26px;\n  min-height: 26px;\n  line-height: 26px;\n\n  &:nth-child(odd) {\n    background: var(--sys-color-surface1);\n  }\n\n  &:hover {\n    background: var(--sys-color-state-hover-on-subtle);\n  }\n\n  &.selected {\n    background: var(--sys-color-tonal-container);\n    color: var(--sys-color-on-tonal-container);\n  }\n}\n\n.player-entry-status-icon-centering {\n  margin: auto;\n  display: inherit;\n\n  & > devtools-icon {\n    height: 16px;\n    width: 16px;\n  }\n}\n\n.player-entry-status-icon {\n  width: 28px;\n  min-width: 28px;\n  height: 26px;\n  border-right: 1px solid var(--sys-color-divider);\n  overflow: hidden;\n}\n\n.player-entry-frame-title {\n  height: 26px;\n  width: 125px;\n  min-width: 125px;\n  text-overflow: ellipsis;\n  padding: 0 10px;\n  border-right: 1px solid var(--sys-color-divider);\n  overflow: hidden;\n}\n\n.player-entry-player-title {\n  height: 26px;\n  padding-left: 10px;\n  overflow: hidden;\n}\n\n.player-entry-header {\n  height: 27px;\n  line-height: 27px;\n  min-height: 27px;\n  padding-left: 10px;\n  border-bottom: 1px solid var(--sys-color-divider);\n}\n\n/*# sourceURL=${import.meta.resolve('./playerListView.css')} */`;"],
  "mappings": "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",
  "names": ["i18n", "SDK", "UI", "i18n", "UI", "i18n", "VisualLogging", "UI", "UIStrings", "str_", "i18nString", "i18n", "UI", "VisualLogging", "UIStrings", "str_", "i18nString", "item", "i18n", "Platform", "SourceFrame", "UI", "VisualLogging", "UIStrings", "str_", "i18nString", "UIStrings", "str_", "i18nString", "i18n", "UI", "VisualLogging", "UIStrings", "str_", "i18nString", "UIStrings", "str_", "i18nString"]
}
