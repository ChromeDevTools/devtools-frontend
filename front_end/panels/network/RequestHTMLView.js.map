{"version":3,"file":"RequestHTMLView.js","sourceRoot":"","sources":["../../../../../../front_end/panels/network/RequestHTMLView.ts"],"names":[],"mappings":"AAAA,sCAAsC;AACtC,yEAAyE;AACzE,6BAA6B;AAG7B,OAAO,KAAK,EAAE,MAAM,2BAA2B,CAAC;AAChD,OAAO,EAAC,IAAI,EAAE,OAAO,EAAE,MAAM,EAAC,MAAM,qBAAqB,CAAC;AAE1D,OAAO,qBAAqB,MAAM,0BAA0B,CAAC;AAQ7D,MAAM,CAAC,MAAM,YAAY,GAAS,CAAC,KAAK,EAAE,OAAO,EAAE,MAAM,EAAE,EAAE;IAC3D,kDAAkD;IAClD,mBAAmB;IACnB,MAAM,CAAC,IAAI,CAAA;aACA,qBAAqB;;QAE1B,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC,IAAI,CAAA;;;iFAGqD,KAAK,CAAC,OAAO;sDACxC,CAAC,CAAC,CAAC,OAAO;WACrD,EACP,MAAM,CAAC,CAAC;IACV,kBAAkB;AACpB,CAAC,CAAC;AAEF,MAAM,OAAO,eAAgB,SAAQ,EAAE,CAAC,MAAM,CAAC,IAAI;IACxC,QAAQ,CAAS;IACjB,KAAK,CAAO;IACrB,YAAoB,OAAe,EAAE,IAAI,GAAG,YAAY;QACtD,KAAK,CAAC,EAAC,YAAY,EAAE,IAAI,EAAC,CAAC,CAAC;QAE5B,IAAI,CAAC,QAAQ,GAAG,OAAO,CAAC;QACxB,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC;IACpB,CAAC;IAED,MAAM,CAAC,MAAM,CAAC,WAA8C;QAC1D,MAAM,OAAO,GAAG,WAAW,CAAC,SAAS,EAAE,CAAC;QACxC,OAAO,OAAO,CAAC,CAAC,CAAC,IAAI,eAAe,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC;IACvD,CAAC;IAEQ,QAAQ;QACf,KAAK,CAAC,QAAQ,EAAE,CAAC;QACjB,IAAI,CAAC,aAAa,EAAE,CAAC;IACvB,CAAC;IAEQ,QAAQ;QACf,KAAK,CAAC,QAAQ,EAAE,CAAC;QACjB,IAAI,CAAC,aAAa,EAAE,CAAC;IACvB,CAAC;IAEQ,aAAa;QACpB,IAAI,CAAC,KAAK,CAAC,EAAC,OAAO,EAAE,IAAI,CAAC,QAAQ,EAAC,EAAE,EAAE,EAAE,IAAI,CAAC,cAAc,CAAC,CAAC;IAChE,CAAC;CACF","sourcesContent":["// Copyright 2011 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport type * as TextUtils from '../../models/text_utils/text_utils.js';\nimport * as UI from '../../ui/legacy/legacy.js';\nimport {html, nothing, render} from '../../ui/lit/lit.js';\n\nimport requestHTMLViewStyles from './requestHTMLView.css.js';\n\ninterface ViewInput {\n  dataURL: string|null;\n}\n\ntype View = (input: ViewInput, output: object, target: HTMLElement) => void;\n\nexport const DEFAULT_VIEW: View = (input, _output, target) => {\n  // Forbid to run JavaScript and set unique origin.\n  // clang-format off\n  render(html`\n    <style>${requestHTMLViewStyles}</style>\n    <div class=\"html request-view widget vbox\">\n      ${input.dataURL ? html`\n        <!-- @ts-ignore -->\n        <iframe class=\"html-preview-frame\" sandbox\n          csp=\"default-src 'none';img-src data:;style-src 'unsafe-inline'\" src=${input.dataURL}\n          tabindex=\"-1\" role=\"presentation\"></iframe>` : nothing}\n    </div>`,\n    target);\n  // clang-format on\n};\n\nexport class RequestHTMLView extends UI.Widget.VBox {\n  readonly #dataURL: string;\n  readonly #view: View;\n  private constructor(dataURL: string, view = DEFAULT_VIEW) {\n    super({useShadowDom: true});\n\n    this.#dataURL = dataURL;\n    this.#view = view;\n  }\n\n  static create(contentData: TextUtils.ContentData.ContentData): RequestHTMLView|null {\n    const dataURL = contentData.asDataUrl();\n    return dataURL ? new RequestHTMLView(dataURL) : null;\n  }\n\n  override wasShown(): void {\n    super.wasShown();\n    this.requestUpdate();\n  }\n\n  override willHide(): void {\n    super.willHide();\n    this.requestUpdate();\n  }\n\n  override performUpdate(): void {\n    this.#view({dataURL: this.#dataURL}, {}, this.contentElement);\n  }\n}\n"]}