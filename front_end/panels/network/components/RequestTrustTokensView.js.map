{"version":3,"file":"RequestTrustTokensView.js","sourceRoot":"","sources":["../../../../../../../front_end/panels/network/components/RequestTrustTokensView.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright 2020 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport '../../../ui/components/report_view/report_view.js';\nimport '../../../ui/kit/kit.js';\n\nimport * as i18n from '../../../core/i18n/i18n.js';\nimport * as SDK from '../../../core/sdk/sdk.js';\nimport * as Protocol from '../../../generated/protocol.js';\nimport * as UI from '../../../ui/legacy/legacy.js';\nimport * as Lit from '../../../ui/lit/lit.js';\nimport * as VisualLogging from '../../../ui/visual_logging/visual_logging.js';\n\nimport requestTrustTokensViewStyles from './RequestTrustTokensView.css.js';\n\nconst {html, render} = Lit;\n\nconst UIStrings = {\n  /**\n   * @description Section heading in the Trust Token tab\n   */\n  parameters: 'Parameters',\n  /**\n   * @description Text that refers to some types\n   */\n  type: 'Type',\n  /**\n   * @description Label for a Trust Token parameter\n   */\n  refreshPolicy: 'Refresh policy',\n  /**\n   * @description Label for a list if origins in the Trust Token tab\n   */\n  issuers: 'Issuers',\n  /**\n   * @description Label for a report field in the Network panel\n   */\n  topLevelOrigin: 'Top level origin',\n  /**\n   * @description Text for the issuer of an item\n   */\n  issuer: 'Issuer',\n  /**\n   * @description Heading of a report section in the Network panel\n   */\n  result: 'Result',\n  /**\n   * @description Text for the status of something\n   */\n  status: 'Status',\n  /**\n   * @description Label for a field in the Network panel\n   */\n  numberOfIssuedTokens: 'Number of issued tokens',\n  /**\n   * @description Text for the success status in the Network panel. Refers to the outcome of a network\n   * request which will either be 'Success' or 'Failure'.\n   */\n  success: 'Success',\n  /**\n   * @description Text in the network panel for an error status\n   */\n  failure: 'Failure',\n  /**\n   * @description Detailed text for a success status in the Network panel\n   */\n  theOperationsResultWasServedFrom: 'The operations result was served from cache.',\n  /**\n   * @description Detailed text for a success status in the Network panel\n   */\n  theOperationWasFulfilledLocally: 'The operation was fulfilled locally, no request was sent.',\n  /**\n   * @description Text for an error status in the Network panel\n   */\n  theKeysForThisPSTIssuerAreUnavailable:\n      'The keys for this PST issuer are unavailable. The issuer may need to be registered via the Chrome registration process.',\n  /**\n   * @description Text for an error status in the Network panel\n   */\n  aClientprovidedArgumentWas: 'A client-provided argument was malformed or otherwise invalid.',\n  /**\n   * @description Text for an error status in the Network panel\n   */\n  eitherNoInputsForThisOperation:\n      'Either no inputs for this operation are available or the output exceeds the operations quota.',\n  /**\n   * @description Text for an error status in the Network panel\n   */\n  theServersResponseWasMalformedOr: 'The servers response was malformed or otherwise invalid.',\n  /**\n   * @description Text for an error status in the Network panel\n   */\n  theOperationFailedForAnUnknown: 'The operation failed for an unknown reason.',\n  /**\n   * @description Text for an error status in the Network panel\n   */\n  perSiteLimit: 'Per-site issuer limit reached.',\n} as const;\nconst str_ = i18n.i18n.registerUIStrings('panels/network/components/RequestTrustTokensView.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\n\ntype Status = 'Success'|'Failure';\n\nexport interface ViewInput {\n  params?: Array<{name: string, value: string|string[], isCode?: boolean}>;\n  status?: Status;\n  description?: string;\n  issuedTokenCount?: number;\n}\n\ntype View = (input: ViewInput, output: undefined, target: HTMLElement) => void;\n\nfunction renderRowIfValuePresent<T>(key: string, value: T, isCode?: boolean): Lit.LitTemplate {\n  if (!value || (Array.isArray(value) && value.length === 0)) {\n    return Lit.nothing;\n  }\n\n  // clang-format off\n  return html`\n    <devtools-report-key>${key}</devtools-report-key>\n    <devtools-report-value class=${isCode ? 'code' : ''}>\n      ${Array.isArray(value) ? html`\n        <ul class=\"issuers-list\">\n            ${value.map(item => html`<li>${item}</li>`)}\n        </ul>` :\n    value}\n    </devtools-report-value>\n  `;\n  // clang-format on\n}\n\nconst renderResultSection = (status?: Status, description?: string, issuedTokenCount?: number): Lit.LitTemplate => {\n  if (!status) {\n    return Lit.nothing;\n  }\n\n  // clang-format off\n  return html`\n    <devtools-report-section-header>${i18nString(UIStrings.result)}</devtools-report-section-header>\n    <devtools-report-key>${i18nString(UIStrings.status)}</devtools-report-key>\n    <devtools-report-value>\n      <span>\n        <devtools-icon class=\"status-icon medium ${status === 'Success' ? 'success' : 'failure'}\"\n        name=${status === 'Success' ? 'check-circle' : 'cross-circle-filled'}>\n        </devtools-icon>\n        <strong>${status === 'Success' ? i18nString(UIStrings.success) : i18nString(UIStrings.failure)}</strong>\n        ${description ? html` ${description}` : Lit.nothing}\n      </span>\n    </devtools-report-value>\n    ${renderRowIfValuePresent(i18nString(UIStrings.numberOfIssuedTokens), issuedTokenCount)}\n    <devtools-report-divider></devtools-report-divider>\n    `;\n  // clang-format on\n};\n\nconst renderParameterSection = (params: ViewInput['params']): Lit.LitTemplate => {\n  if (!params || params.length === 0) {\n    return Lit.nothing;\n  }\n  // clang-format off\n  return html`\n    <devtools-report-section-header jslog=${VisualLogging.pane('trust-tokens').track({ resize: true })}>\n      ${i18nString(UIStrings.parameters)}\n    </devtools-report-section-header>\n    ${params.map(param => renderRowIfValuePresent(param.name, param.value, param.isCode))}\n    <devtools-report-divider></devtools-report-divider>\n  `;\n  // clang-format on\n};\n\n// clang-format off\nexport const DEFAULT_VIEW: View = (input, output, target): void => {\n  render(html`\n    <style>${requestTrustTokensViewStyles}</style>\n    <devtools-report>\n      ${renderParameterSection(input.params)}\n      ${renderResultSection(input.status, input.description, input.issuedTokenCount)}\n    </devtools-report>\n  `, target);\n};\n// clang-format on\n\nexport class RequestTrustTokensView extends UI.Widget.Widget {\n  #request: SDK.NetworkRequest.NetworkRequest|null = null;\n  #view: View;\n\n  constructor(element?: HTMLElement, view: View = DEFAULT_VIEW) {\n    super(element);\n    this.#view = view;\n  }\n\n  get request(): SDK.NetworkRequest.NetworkRequest|null {\n    return this.#request;\n  }\n\n  set request(request: SDK.NetworkRequest.NetworkRequest|null) {\n    if (this.#request === request) {\n      return;\n    }\n    this.#unsubscribe();\n    this.#request = request;\n    this.#subscribe();\n    this.requestUpdate();\n  }\n\n  #subscribe(): void {\n    if (this.#request && this.isShowing()) {\n      this.#request.addEventListener(SDK.NetworkRequest.Events.TRUST_TOKEN_RESULT_ADDED, this.requestUpdate, this);\n    }\n  }\n\n  #unsubscribe(): void {\n    if (this.#request) {\n      this.#request.removeEventListener(SDK.NetworkRequest.Events.TRUST_TOKEN_RESULT_ADDED, this.requestUpdate, this);\n    }\n  }\n\n  override wasShown(): void {\n    super.wasShown();\n    this.#subscribe();\n    this.requestUpdate();\n  }\n\n  override willHide(): void {\n    super.willHide();\n    this.#unsubscribe();\n  }\n\n  override performUpdate(): void {\n    if (!this.request) {\n      return;\n    }\n\n    const trustTokenParams = this.request.trustTokenParams();\n    const trustTokenResult = this.request.trustTokenOperationDoneEvent();\n\n    const viewInput: ViewInput = {};\n\n    if (trustTokenParams) {\n      viewInput.params = [\n        {name: i18nString(UIStrings.type), value: trustTokenParams.operation.toString(), isCode: true},\n      ];\n      if (trustTokenParams.operation === Protocol.Network.TrustTokenOperationType.Redemption) {\n        viewInput.params.push({\n          name: i18nString(UIStrings.refreshPolicy),\n          value: trustTokenParams.refreshPolicy.toString(),\n          isCode: true,\n        });\n      }\n      if (trustTokenParams.issuers && trustTokenParams.issuers.length > 0) {\n        viewInput.params.push({name: i18nString(UIStrings.issuers), value: trustTokenParams.issuers});\n      }\n      if (trustTokenResult?.topLevelOrigin) {\n        viewInput.params.push({name: i18nString(UIStrings.topLevelOrigin), value: trustTokenResult.topLevelOrigin});\n      }\n      if (trustTokenResult?.issuerOrigin) {\n        viewInput.params.push({name: i18nString(UIStrings.issuer), value: trustTokenResult.issuerOrigin});\n      }\n    }\n\n    if (trustTokenResult) {\n      viewInput.status = statusConsideredSuccess(trustTokenResult.status) ? 'Success' : 'Failure';\n      viewInput.description = getDetailedTextForStatusCode(trustTokenResult.status) ?? undefined;\n      viewInput.issuedTokenCount = trustTokenResult.type === Protocol.Network.TrustTokenOperationType.Issuance ?\n          trustTokenResult.issuedTokenCount :\n          undefined;\n    }\n\n    this.#view(viewInput, undefined, this.contentElement);\n  }\n}\n\nexport function statusConsideredSuccess(status: Protocol.Network.TrustTokenOperationDoneEventStatus): boolean {\n  return status === Protocol.Network.TrustTokenOperationDoneEventStatus.Ok ||\n      status === Protocol.Network.TrustTokenOperationDoneEventStatus.AlreadyExists ||\n      status === Protocol.Network.TrustTokenOperationDoneEventStatus.FulfilledLocally;\n}\n\nfunction getDetailedTextForStatusCode(status: Protocol.Network.TrustTokenOperationDoneEventStatus): string|null {\n  switch (status) {\n    case Protocol.Network.TrustTokenOperationDoneEventStatus.Ok:\n      return null;\n    case Protocol.Network.TrustTokenOperationDoneEventStatus.AlreadyExists:\n      return i18nString(UIStrings.theOperationsResultWasServedFrom);\n    case Protocol.Network.TrustTokenOperationDoneEventStatus.FulfilledLocally:\n      return i18nString(UIStrings.theOperationWasFulfilledLocally);\n    case Protocol.Network.TrustTokenOperationDoneEventStatus.InvalidArgument:\n      return i18nString(UIStrings.aClientprovidedArgumentWas);\n    case Protocol.Network.TrustTokenOperationDoneEventStatus.ResourceExhausted:\n      return i18nString(UIStrings.eitherNoInputsForThisOperation);\n    case Protocol.Network.TrustTokenOperationDoneEventStatus.BadResponse:\n      return i18nString(UIStrings.theServersResponseWasMalformedOr);\n    case Protocol.Network.TrustTokenOperationDoneEventStatus.MissingIssuerKeys:\n      return i18nString(UIStrings.theKeysForThisPSTIssuerAreUnavailable);\n    case Protocol.Network.TrustTokenOperationDoneEventStatus.FailedPrecondition:\n    case Protocol.Network.TrustTokenOperationDoneEventStatus.ResourceLimited:\n    case Protocol.Network.TrustTokenOperationDoneEventStatus.InternalError:\n    case Protocol.Network.TrustTokenOperationDoneEventStatus.Unauthorized:\n    case Protocol.Network.TrustTokenOperationDoneEventStatus.UnknownError:\n      return i18nString(UIStrings.theOperationFailedForAnUnknown);\n    case Protocol.Network.TrustTokenOperationDoneEventStatus.SiteIssuerLimit:\n      return i18nString(UIStrings.perSiteLimit);\n  }\n}\n"]}