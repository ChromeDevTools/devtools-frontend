{"version":3,"file":"SyncSection.js","sourceRoot":"","sources":["../../../../../../../front_end/panels/settings/components/SyncSection.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright 2021 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport '../../../ui/components/settings/settings.js';\nimport '../../../ui/components/tooltips/tooltips.js';\n\nimport * as Common from '../../../core/common/common.js';\nimport * as Host from '../../../core/host/host.js';\nimport * as i18n from '../../../core/i18n/i18n.js';\nimport type * as Platform from '../../../core/platform/platform.js';\nimport * as SDK from '../../../core/sdk/sdk.js';\nimport * as Badges from '../../../models/badges/badges.js';\nimport * as Buttons from '../../../ui/components/buttons/buttons.js';\nimport type * as SettingsComponents from '../../../ui/components/settings/settings.js';\nimport * as UI from '../../../ui/legacy/legacy.js';\nimport * as Lit from '../../../ui/lit/lit.js';\nimport * as VisualLogging from '../../../ui/visual_logging/visual_logging.js';\nimport * as PanelCommon from '../../common/common.js';\nimport * as PanelUtils from '../../utils/utils.js';\n\nimport syncSectionStyles from './syncSection.css.js';\n\nconst UIStrings = {\n  /**\n   * @description Text shown to the user in the Settings UI. 'This setting' refers\n   * to a checkbox that is disabled.\n   */\n  syncDisabled: 'To turn this setting on, you must enable Chrome sync.',\n  /**\n   * @description Text shown to the user in the Settings UI. Explains why the checkbox\n   * for saving DevTools settings to the user's Google account is inactive.\n   */\n  preferencesSyncDisabled: 'You need to first enable saving `Chrome` settings in your `Google` account.',\n  /**\n   * @description Label for the account email address. Shown in the DevTools Settings UI in\n   * front of the email address currently used for Chrome Sync.\n   */\n  signedIn: 'Signed into Chrome as:',\n  /**\n   * @description Label for the account settings. Shown in the DevTools Settings UI in\n   * case the user is not logged in to Chrome.\n   */\n  notSignedIn: 'You\\'re not signed into Chrome.',\n  /**\n   * @description Label for the Google Developer Program profile status that corresponds to\n   * standard plan (No subscription).\n   */\n  gdpStandardPlan: 'Standard plan',\n  /**\n   * @description Label for the Google Developer Program subscription status that corresponds to\n   * `PREMIUM_ANNUAL` plan.\n   */\n  gdpPremiumSubscription: 'Premium',\n  /**\n   * @description Label for the Google Developer Program subscription status that corresponds to\n   * `PRO_ANNUAL` plan.\n   */\n  gdpProSubscription: 'Pro',\n  /**\n   * @description Label for the Google Developer Program subscription status that corresponds\n   * to a plan not known by the client.\n   */\n  gdpUnknownSubscription: 'Unknown plan',\n  /**\n   * @description Label for Sign-Up button for the Google Developer Program profiles.\n   */\n  signUp: 'Sign up',\n  /**\n   * @description Link text for opening the Google Developer Program profile page.\n   */\n  viewProfile: 'View profile',\n  /**\n   * @description Text for tooltip shown on hovering over \"Relevant Data\" in the disclaimer text for AI code completion.\n   */\n  tooltipDisclaimerText:\n      'When you qualify for a badge, the badge’s identifier and the type of activity you did to earn it are sent to Google',\n  /**\n   * @description Text for the data notice right after the settings checkbox.\n   */\n  relevantData: 'Relevant data',\n  /**\n   * @description Text for the data notice right after the settings checkbox.\n   * @example {Relevant data} PH1\n   */\n  dataDisclaimer: '({PH1} is sent to Google)',\n} as const;\nconst str_ = i18n.i18n.registerUIStrings('panels/settings/components/SyncSection.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\nconst i18nTemplate = Lit.i18nTemplate.bind(undefined, str_);\n\nconst {html, render, Directives: {ref}} = Lit;\n\nfunction getGdpSubscriptionText(profile: Host.GdpClient.Profile): Platform.UIString.LocalizedString {\n  if (!profile.activeSubscription ||\n      profile.activeSubscription.subscriptionStatus !== Host.GdpClient.SubscriptionStatus.ENABLED) {\n    return i18nString(UIStrings.gdpStandardPlan);\n  }\n\n  switch (profile.activeSubscription.subscriptionTier) {\n    case Host.GdpClient.SubscriptionTier.PREMIUM_ANNUAL:\n    case Host.GdpClient.SubscriptionTier.PREMIUM_MONTHLY:\n      return i18nString(UIStrings.gdpPremiumSubscription);\n    case Host.GdpClient.SubscriptionTier.PRO_ANNUAL:\n    case Host.GdpClient.SubscriptionTier.PRO_MONTHLY:\n      return i18nString(UIStrings.gdpProSubscription);\n    default:\n      return i18nString(UIStrings.gdpUnknownSubscription);\n  }\n}\n\n// clang-format off\nconst DEFAULT_VIEW = (input: ViewInput, output: ViewOutput, target: HTMLElement): void => {\n  const renderSettingCheckboxIfNeeded = (): Lit.LitTemplate => {\n    if (!input.syncInfo.accountEmail) {\n      return Lit.nothing;\n    }\n    const warningText = input.warningType === WarningType.SYNC_DISABLED ? i18nString(UIStrings.syncDisabled) : i18nString(UIStrings.preferencesSyncDisabled);\n\n    return html`\n      <div class=\"setting-checkbox-container\">\n        <setting-checkbox class=\"setting-checkbox\"\n          .data=${{ setting: input.syncSetting } as SettingsComponents.SettingCheckbox.SettingCheckboxData}>\n        </setting-checkbox>\n        ${input.warningType ? html`\n          <devtools-button\n            aria-details=\"settings-sync-info\"\n            .iconName=${'info'}\n            .variant=${Buttons.Button.Variant.ICON}\n            .size=${Buttons.Button.Size.SMALL}\n            @click=${input.onWarningClick}>\n          </devtools-button>\n          <devtools-tooltip\n              id=\"settings-sync-info\"\n              variant=\"rich\">\n            ${warningText}\n          </devtools-tooltip>`: Lit.nothing}\n      </div>\n    `;\n  };\n\n  const renderAccountInfo = (): Lit.LitTemplate => {\n    if (!input.syncInfo.accountEmail) {\n      return html`\n        <div class=\"not-signed-in\">${i18nString(UIStrings.notSignedIn)}</div>\n      `;\n    }\n\n    return html`\n      <div class=\"account-info\">\n        <img class=\"account-avatar\" src=\"data:image/png;base64, ${input.syncInfo.accountImage}\"\n          alt=\"Account avatar\" />\n        <div class=\"account-email\">\n          <span>${i18nString(UIStrings.signedIn)}</span>\n          <span>${input.syncInfo.accountEmail}</span>\n        </div>\n      </div>`;\n  };\n\n  const renderGdpSectionIfNeeded = (): Lit.LitTemplate => {\n    if (!input.isEligibleToCreateGdpProfile && !input.gdpProfile) {\n      return Lit.nothing;\n    }\n    const hasReceiveBadgesCheckbox = Host.GdpClient.isBadgesEnabled() && input.receiveBadgesSetting;\n    const renderBrand = (): Lit.LitTemplate => {\n      return html`\n        <div class=\"gdp-profile-header\">\n          <div class=\"gdp-logo\" role=\"img\" aria-label=\"Google Developer Program\"></div>\n        </div>\n      `;\n    };\n\n    return html`\n      <div class=\"gdp-profile-container\" .jslog=${VisualLogging.section().context('gdp-profile')}>\n        <div class=\"divider\"></div>\n        ${input.gdpProfile ? html`\n          <div class=\"gdp-profile-details-content\">\n            ${renderBrand()}\n            <div class=\"plan-details\">\n              ${getGdpSubscriptionText(input.gdpProfile)}\n              &nbsp;·&nbsp;\n              <x-link\n                .jslog=${VisualLogging.link().track({click: true, keydown: 'Enter|Space'}).context('view-profile')}\n                class=\"link\"\n                href=${Host.GdpClient.GOOGLE_DEVELOPER_PROGRAM_PROFILE_LINK}>\n                ${i18nString(UIStrings.viewProfile)}\n              </x-link></div>\n              ${hasReceiveBadgesCheckbox ? html`\n                <div class=\"setting-container\" ${ref(el => {\n                  output.highlightReceiveBadgesSetting = () => {\n                    if (el) {\n                      PanelUtils.PanelUtils.highlightElement(el as HTMLElement);\n                    }\n                  };\n                })}>\n                  <setting-checkbox class=\"setting-checkbox\"\n                    .data=${{setting: input.receiveBadgesSetting} as SettingsComponents.SettingCheckbox.SettingCheckboxData}\n                    @change=${(e: Event) => input.onReceiveBadgesSettingClick(e)}>\n                  </setting-checkbox>\n                  <span>${i18nTemplate(UIStrings.dataDisclaimer, {PH1: html`\n                    <span class=\"link\" tabindex=\"0\" aria-details=\"gdp-profile-tooltip\">\n                      ${i18nString(UIStrings.relevantData)}</span>\n                    <devtools-tooltip id=\"gdp-profile-tooltip\" variant=\"rich\">\n                      <div class=\"tooltip-content\" tabindex=\"0\">\n                      ${i18nString(UIStrings.tooltipDisclaimerText)}</div>\n                    </devtools-tooltip>`})}\n                  </span>\n                </div>\n              ` : Lit.nothing}\n          </div>\n        ` : html`\n          <div class=\"gdp-profile-sign-up-content\">\n            ${renderBrand()}\n            <devtools-button\n              @click=${input.onSignUpClick}\n              .jslogContext=${'open-sign-up-dialog'}\n              .variant=${Buttons.Button.Variant.OUTLINED}>\n                ${i18nString(UIStrings.signUp)}\n            </devtools-button>\n          </div>\n        `}\n      </div>\n    `;\n  };\n\n  render(html`\n    <style>${syncSectionStyles}</style>\n    <fieldset>\n      ${renderAccountInfo()}\n      ${renderSettingCheckboxIfNeeded()}\n      ${renderGdpSectionIfNeeded()}\n    </fieldset>\n  `, target);\n};\n// clang-format on\n\ntype View = typeof DEFAULT_VIEW;\n\nexport const enum WarningType {\n  SYNC_DISABLED = 'SYNC_DISABLED',\n  PREFERENCES_SYNC_DISABLED = 'PREFERENCES_SYNC_DISABLED',\n}\n\nexport interface SyncSectionData {\n  syncInfo: Host.InspectorFrontendHostAPI.SyncInformation;\n  syncSetting: Common.Settings.Setting<boolean>;\n  receiveBadgesSetting: Common.Settings.Setting<boolean>;\n}\n\nexport interface ViewInput {\n  syncInfo: Host.InspectorFrontendHostAPI.SyncInformation;\n  syncSetting: Common.Settings.Setting<boolean>;\n  receiveBadgesSetting?: Common.Settings.Setting<boolean>;\n  isEligibleToCreateGdpProfile: boolean;\n  gdpProfile?: Host.GdpClient.Profile;\n  onSignUpClick: () => void;\n  onReceiveBadgesSettingClick: (e: Event) => void;\n  onWarningClick: (e: Event) => void;\n  warningType?: WarningType;\n}\n\nexport interface ViewOutput {\n  highlightReceiveBadgesSetting?: () => void;\n}\nexport class SyncSection extends UI.Widget.Widget {\n  #syncInfo: Host.InspectorFrontendHostAPI.SyncInformation = {isSyncActive: false};\n  #syncSetting: Common.Settings.Setting<boolean>;\n  #receiveBadgesSetting: Common.Settings.Setting<boolean>;\n  #isEligibleToCreateGdpProfile = false;\n  #gdpProfile?: Host.GdpClient.Profile;\n  #view: View;\n  #viewOutput: ViewOutput = {};\n\n  constructor(element?: HTMLElement, view: View = DEFAULT_VIEW) {\n    super(element);\n    this.#view = view;\n    this.#receiveBadgesSetting = Common.Settings.Settings.instance().moduleSetting('receive-gdp-badges');\n    this.#syncSetting = Common.Settings.moduleSetting('sync-preferences') as Common.Settings.Setting<boolean>;\n  }\n\n  override wasShown(): void {\n    super.wasShown();\n    this.requestUpdate();\n  }\n\n  set syncInfo(syncInfo: Host.InspectorFrontendHostAPI.SyncInformation) {\n    this.#syncInfo = syncInfo;\n    this.requestUpdate();\n\n    // Trigger fetching GDP profile if the user is signed in.\n    if (syncInfo.accountEmail) {\n      void this.#fetchGdpDetails();\n    }\n  }\n\n  async highlightReceiveBadgesSetting(): Promise<void> {\n    this.requestUpdate();\n    await this.updateComplete;\n    this.#viewOutput.highlightReceiveBadgesSetting?.();\n  }\n\n  override performUpdate(): void {\n    // TODO: this should not probably happen in render, instead, the setting\n    // should be disabled.\n    const checkboxDisabled = !this.#syncInfo.isSyncActive || !this.#syncInfo.arePreferencesSynced;\n    this.#syncSetting?.setDisabled(checkboxDisabled);\n\n    let warningType: WarningType|undefined;\n    if (!this.#syncInfo.isSyncActive) {\n      warningType = WarningType.SYNC_DISABLED;\n    } else if (!this.#syncInfo.arePreferencesSynced) {\n      warningType = WarningType.PREFERENCES_SYNC_DISABLED;\n    }\n\n    const viewInput: ViewInput = {\n      syncInfo: this.#syncInfo,\n      syncSetting: this.#syncSetting,\n      receiveBadgesSetting: this.#receiveBadgesSetting,\n      gdpProfile: this.#gdpProfile,\n      isEligibleToCreateGdpProfile: Host.GdpClient.isGdpProfilesAvailable() && this.#isEligibleToCreateGdpProfile,\n      onSignUpClick: this.#onSignUpClick.bind(this),\n      onReceiveBadgesSettingClick: this.#onReceiveBadgesSettingClick.bind(this),\n      onWarningClick: this.#onWarningClick.bind(this),\n      warningType,\n    };\n    this.#view(viewInput, this.#viewOutput, this.contentElement);\n  }\n\n  #onSignUpClick(): void {\n    PanelCommon.GdpSignUpDialog.show({onSuccess: (this.#fetchGdpDetails.bind(this))});\n  }\n\n  #onReceiveBadgesSettingClick(e: Event): void {\n    const settingCheckbox = e.target as SettingsComponents.SettingCheckbox.SettingCheckbox;\n    void Badges.UserBadges.instance().initialize().then(() => {\n      if (!settingCheckbox.checked) {\n        return;\n      }\n\n      Badges.UserBadges.instance().recordAction(Badges.BadgeAction.RECEIVE_BADGES_SETTING_ENABLED);\n    });\n  }\n\n  #onWarningClick(event: Event): void {\n    const rootTarget = SDK.TargetManager.TargetManager.instance().rootTarget();\n    if (rootTarget === null) {\n      return;\n    }\n    // TODO: investigate if /advance link is alive\n    const warningLink = !this.#syncInfo.isSyncActive ?\n        ('chrome://settings/syncSetup' as Platform.DevToolsPath.UrlString) :\n        ('chrome://settings/syncSetup/advanced' as Platform.DevToolsPath.UrlString);\n    void rootTarget.targetAgent().invoke_createTarget({url: warningLink}).then(result => {\n      if (result.getError()) {\n        Host.InspectorFrontendHost.InspectorFrontendHostInstance.openInNewTab(warningLink);\n      }\n    });\n    event.consume();\n  }\n\n  async #fetchGdpDetails(): Promise<void> {\n    if (!Host.GdpClient.isGdpProfilesAvailable()) {\n      return;\n    }\n\n    const getProfileResponse = await Host.GdpClient.GdpClient.instance().getProfile();\n    if (!getProfileResponse) {\n      return;\n    }\n\n    this.#gdpProfile = getProfileResponse.profile ?? undefined;\n    this.#isEligibleToCreateGdpProfile = getProfileResponse.isEligible;\n    this.requestUpdate();\n  }\n}\n"]}