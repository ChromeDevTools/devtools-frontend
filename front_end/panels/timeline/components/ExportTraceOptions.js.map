{"version":3,"file":"ExportTraceOptions.js","sourceRoot":"","sources":["../../../../../../../front_end/panels/timeline/components/ExportTraceOptions.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright 2025 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n/* eslint-disable @devtools/no-lit-render-outside-of-view */\n\nimport '../../../ui/components/tooltips/tooltips.js';\nimport '../../../ui/components/buttons/buttons.js';\n\nimport * as Common from '../../../core/common/common.js';\nimport * as Host from '../../../core/host/host.js';\nimport * as i18n from '../../../core/i18n/i18n.js';\nimport * as Buttons from '../../../ui/components/buttons/buttons.js';\nimport * as Dialogs from '../../../ui/components/dialogs/dialogs.js';\nimport * as ComponentHelpers from '../../../ui/components/helpers/helpers.js';\nimport * as UI from '../../../ui/legacy/legacy.js';\nimport * as Lit from '../../../ui/lit/lit.js';\n\nimport exportTraceOptionsStyles from './exportTraceOptions.css.js';\n\nconst {html} = Lit;\n\nconst UIStrings = {\n  /**\n   * @description Text title for the Save performance trace dialog.\n   */\n  exportTraceOptionsDialogTitle: 'Save performance trace ',\n  /**\n   * @description Tooltip for the Save performance trace dialog.\n   */\n  showExportTraceOptionsDialogTitle: 'Save traceâ€¦',\n  /**\n   * @description Text for the include script content option.\n   */\n  includeResourceContent: 'Include resource content',\n  /**\n   * @description Text for the include script source maps option.\n   */\n  includeSourcemap: 'Include script source maps',\n  /**\n   * @description Text for the include annotations option.\n   */\n  includeAnnotations: 'Include annotations',\n  /**\n   * @description Text for the compression option.\n   */\n  shouldCompress: 'Compress with gzip',\n  /**\n   * @description Text for the save trace button\n   */\n  saveButtonTitle: 'Save',\n  /**\n   * @description Text shown in the information pop-up next to the \"Include resource content\" option.\n   */\n  resourceContentPrivacyInfo: 'Includes the full content of all loaded HTML, CSS, and scripts (except extensions).',\n  /**\n   * @description Text shown in the information pop-up next to the \"Include script sourcemaps\" option.\n   */\n  sourceMapsContentPrivacyInfo: 'Includes available source maps, which may expose authored code.',\n  /**\n   * @description Text used as the start of the accessible label for the information button which shows additional context when the user focuses / hovers.\n   */\n  moreInfoLabel: 'Additional information:',\n} as const;\n\nconst str_ = i18n.i18n.registerUIStrings('panels/timeline/components/ExportTraceOptions.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\n\nexport interface ExportTraceOptionsData {\n  onExport: (config: {\n    includeResourceContent: boolean,\n    includeSourceMaps: boolean,\n    addModifications: boolean,\n    shouldCompress: boolean,\n  }) => Promise<void>;\n  buttonEnabled: boolean;\n}\n\nexport type ExportTraceDialogState = Dialogs.Dialog.DialogState;\n\nexport interface ExportTraceOptionsState {\n  dialogState: ExportTraceDialogState;\n  includeAnnotations: boolean;\n  includeResourceContent: boolean;\n  includeSourceMaps: boolean;\n  shouldCompress: boolean;\n  displayAnnotationsCheckbox?: boolean;\n  displayResourceContentCheckbox?: boolean;\n  displaySourceMapsCheckbox?: boolean;\n}\n\ntype CheckboxId = 'annotations'|'resource-content'|'script-source-maps'|'compress-with-gzip';\nconst checkboxesWithInfoDialog = new Set<CheckboxId>(['resource-content', 'script-source-maps']);\n\nexport class ExportTraceOptions extends HTMLElement {\n  readonly #shadow = this.attachShadow({mode: 'open'});\n  #data: ExportTraceOptionsData|null = null;\n\n  static readonly #includeAnnotationsSettingString: string = 'export-performance-trace-include-annotations';\n  static readonly #includeResourceContentSettingString: string = 'export-performance-trace-include-resources';\n  static readonly #includeSourceMapsSettingString: string = 'export-performance-trace-include-sourcemaps';\n  static readonly #shouldCompressSettingString: string = 'export-performance-trace-should-compress';\n\n  #includeAnnotationsSetting: Common.Settings.Setting<boolean> = Common.Settings.Settings.instance().createSetting(\n      ExportTraceOptions.#includeAnnotationsSettingString, true, Common.Settings.SettingStorageType.SESSION);\n  #includeResourceContentSetting: Common.Settings.Setting<boolean> = Common.Settings.Settings.instance().createSetting(\n      ExportTraceOptions.#includeResourceContentSettingString, false, Common.Settings.SettingStorageType.SESSION);\n  #includeSourceMapsSetting: Common.Settings.Setting<boolean> = Common.Settings.Settings.instance().createSetting(\n      ExportTraceOptions.#includeSourceMapsSettingString, false, Common.Settings.SettingStorageType.SESSION);\n  #shouldCompressSetting: Common.Settings.Setting<boolean> = Common.Settings.Settings.instance().createSetting(\n      ExportTraceOptions.#shouldCompressSettingString, true, Common.Settings.SettingStorageType.SYNCED);\n\n  #state: ExportTraceOptionsState = {\n    dialogState: Dialogs.Dialog.DialogState.COLLAPSED,\n    includeAnnotations: this.#includeAnnotationsSetting.get(),\n    includeResourceContent: this.#includeResourceContentSetting.get(),\n    includeSourceMaps: this.#includeSourceMapsSetting.get(),\n    shouldCompress: this.#shouldCompressSetting.get(),\n  };\n\n  #includeAnnotationsCheckbox = UI.UIUtils.CheckboxLabel.create(\n      /* title*/ i18nString(UIStrings.includeAnnotations), /* checked*/ this.#state.includeAnnotations,\n      /* subtitle*/ undefined,\n      /* jslogContext*/ 'timeline.export-trace-options.annotations-checkbox');\n  #includeResourceContentCheckbox = UI.UIUtils.CheckboxLabel.create(\n      /* title*/ i18nString(UIStrings.includeResourceContent), /* checked*/ this.#state.includeResourceContent,\n      /* subtitle*/ undefined,\n      /* jslogContext*/ 'timeline.export-trace-options.resource-content-checkbox');\n  #includeSourceMapsCheckbox = UI.UIUtils.CheckboxLabel.create(\n      /* title*/ i18nString(UIStrings.includeSourcemap), /* checked*/ this.#state.includeSourceMaps,\n      /* subtitle*/ undefined,\n      /* jslogContext*/ 'timeline.export-trace-options.source-maps-checkbox');\n  #shouldCompressCheckbox = UI.UIUtils.CheckboxLabel.create(\n      /* title*/ i18nString(UIStrings.shouldCompress), /* checked*/ this.#state.shouldCompress,\n      /* subtitle*/ undefined,\n      /* jslogContext*/ 'timeline.export-trace-options.should-compress-checkbox');\n\n  set data(data: ExportTraceOptionsData) {\n    this.#data = data;\n    this.#scheduleRender();\n  }\n\n  set state(state: ExportTraceOptionsState) {\n    this.#state = state;\n    this.#includeAnnotationsSetting.set(state.includeAnnotations);\n    this.#includeResourceContentSetting.set(state.includeResourceContent);\n    this.#includeSourceMapsSetting.set(state.includeSourceMaps);\n    this.#shouldCompressSetting.set(state.shouldCompress);\n\n    this.#scheduleRender();\n  }\n\n  get state(): Readonly<ExportTraceOptionsState> {\n    return this.#state;\n  }\n\n  updateContentVisibility(options: {annotationsExist: boolean}): void {\n    this.state = {\n      ...this.#state,\n      displayAnnotationsCheckbox: options.annotationsExist,\n      displayResourceContentCheckbox: true,\n      displaySourceMapsCheckbox: true\n    };\n  }\n\n  #scheduleRender(): void {\n    void ComponentHelpers.ScheduledRender.scheduleRender(this, this.#render);\n  }\n\n  #checkboxOptionChanged(checkboxWithLabel: UI.UIUtils.CheckboxLabel, checked: boolean): void {\n    const newState = Object.assign({}, this.#state, {dialogState: Dialogs.Dialog.DialogState.EXPANDED});\n\n    switch (checkboxWithLabel) {\n      case this.#includeAnnotationsCheckbox: {\n        newState.includeAnnotations = checked;\n        break;\n      }\n      case this.#includeResourceContentCheckbox: {\n        newState.includeResourceContent = checked;\n\n        // if the `Include Script` is checked off, cascade the change to `Include Script Source`\n        if (!newState.includeResourceContent) {\n          newState.includeSourceMaps = false;\n        }\n\n        break;\n      }\n      case this.#includeSourceMapsCheckbox: {\n        newState.includeSourceMaps = checked;\n        break;\n      }\n      case this.#shouldCompressCheckbox: {\n        newState.shouldCompress = checked;\n        break;\n      }\n    }\n\n    this.state = newState;\n  }\n\n  #accessibleLabelForInfoCheckbox(checkboxId: CheckboxId): string {\n    if (checkboxId === 'script-source-maps') {\n      return i18nString(UIStrings.moreInfoLabel) + ' ' + i18nString(UIStrings.sourceMapsContentPrivacyInfo);\n    }\n\n    if (checkboxId === 'resource-content') {\n      return i18nString(UIStrings.moreInfoLabel) + ' ' + i18nString(UIStrings.resourceContentPrivacyInfo);\n    }\n\n    return '';\n  }\n  #renderCheckbox(\n      checkboxId: CheckboxId, checkboxWithLabel: UI.UIUtils.CheckboxLabel, title: Common.UIString.LocalizedString,\n      checked: boolean): Lit.TemplateResult {\n    UI.Tooltip.Tooltip.install(checkboxWithLabel, title);\n    checkboxWithLabel.ariaLabel = title;\n    checkboxWithLabel.checked = checked;\n    checkboxWithLabel.addEventListener(\n        'change', this.#checkboxOptionChanged.bind(this, checkboxWithLabel, !checked), false);\n\n    // Disable the includeSourceMapsSetting when the includeScriptContentSetting is also disabled.\n    this.#includeSourceMapsCheckbox.disabled = !this.#state.includeResourceContent;\n\n    // clang-format off\n      return html`\n        <div class='export-trace-options-row'>\n          ${checkboxWithLabel}\n\n          ${checkboxesWithInfoDialog.has(checkboxId) ? html`\n            <devtools-button\n              aria-details=${`export-trace-tooltip-${checkboxId}`}\n              .accessibleLabel=${this.#accessibleLabelForInfoCheckbox(checkboxId)}\n              class=\"pen-icon\"\n              .iconName=${'info'}\n              .variant=${Buttons.Button.Variant.ICON}\n              ></devtools-button>\n            ` : Lit.nothing}\n        </div>\n      `;\n    // clang-format on\n  }\n\n  #renderInfoTooltip(checkboxId: CheckboxId): Lit.LitTemplate {\n    if (!checkboxesWithInfoDialog.has(checkboxId)) {\n      return Lit.nothing;\n    }\n\n    return html`\n    <devtools-tooltip\n      variant=\"rich\"\n      id=${`export-trace-tooltip-${checkboxId}`}\n    >\n      <div class=\"info-tooltip-container\">\n      <p>\n        ${checkboxId === 'resource-content' ? i18nString(UIStrings.resourceContentPrivacyInfo) : Lit.nothing}\n        ${checkboxId === 'script-source-maps' ? i18nString(UIStrings.sourceMapsContentPrivacyInfo) : Lit.nothing}\n      </p>\n      </div>\n    </devtools-tooltip>`;\n  }\n\n  #render(): void {\n    if (!ComponentHelpers.ScheduledRender.isScheduledRender(this)) {\n      throw new Error('Export trace options dialog render was not scheduled');\n    }\n\n    // clang-format off\n    const output = html`\n      <style>${exportTraceOptionsStyles}</style>\n      <devtools-button-dialog class=\"export-trace-dialog\"\n      @click=${this.#onButtonDialogClick.bind(this)}\n      .data=${{\n          openOnRender: false,\n          jslogContext: 'timeline.export-trace-options',\n          variant: Buttons.Button.Variant.TOOLBAR,\n          iconName: 'download',\n          disabled: !this.#data?.buttonEnabled,\n          iconTitle: i18nString(UIStrings.showExportTraceOptionsDialogTitle),\n          horizontalAlignment: Dialogs.Dialog.DialogHorizontalAlignment.AUTO,\n          closeButton: false,\n          dialogTitle: i18nString(UIStrings.exportTraceOptionsDialogTitle),\n          state: this.#state.dialogState,\n          closeOnESC: true,\n        } as Dialogs.ButtonDialog.ButtonDialogData}>\n        <div class='export-trace-options-content'>\n\n          ${this.#state.displayAnnotationsCheckbox ? this.#renderCheckbox('annotations', this.#includeAnnotationsCheckbox,\n            i18nString(UIStrings.includeAnnotations),\n            this.#state.includeAnnotations): ''}\n          ${this.#state.displayResourceContentCheckbox ? this.#renderCheckbox('resource-content', this.#includeResourceContentCheckbox,\n            i18nString(UIStrings.includeResourceContent), this.#state.includeResourceContent): ''}\n          ${this.#state.displayResourceContentCheckbox && this.#state.displaySourceMapsCheckbox ? this.#renderCheckbox(\n            'script-source-maps',\n            this.#includeSourceMapsCheckbox, i18nString(UIStrings.includeSourcemap), this.#state.includeSourceMaps): ''}\n          ${this.#renderCheckbox('compress-with-gzip', this.#shouldCompressCheckbox, i18nString(UIStrings.shouldCompress), this.#state.shouldCompress)}\n          <div class='export-trace-options-row'><div class='export-trace-blank'></div><devtools-button\n                  class=\"setup-button\"\n                  data-export-button\n                  @click=${this.#onExportClick.bind(this)}\n                  .data=${{\n                    variant: Buttons.Button.Variant.PRIMARY,\n                    title: i18nString(UIStrings.saveButtonTitle),\n                  } as Buttons.Button.ButtonData}\n                >${i18nString(UIStrings.saveButtonTitle)}</devtools-button>\n                </div>\n          ${this.#state.displayResourceContentCheckbox ? this.#renderInfoTooltip('resource-content') : Lit.nothing}\n          ${this.#state.displayResourceContentCheckbox && this.#state.displaySourceMapsCheckbox ? this.#renderInfoTooltip('script-source-maps') : Lit.nothing}\n        </div>\n      </devtools-button-dialog>\n    `;\n    // clang-format on\n    Lit.render(output, this.#shadow, {host: this});\n  }\n\n  async #onButtonDialogClick(): Promise<void> {\n    this.state = Object.assign({}, this.#state, {dialogState: Dialogs.Dialog.DialogState.EXPANDED});\n  }\n\n  async #onExportCallback(): Promise<void> {\n    // Calls passed onExport function with current settings.\n    await this.#data?.onExport({\n      includeResourceContent: this.#state.includeResourceContent,\n      includeSourceMaps: this.#state.includeSourceMaps,\n      // Note: this also includes track configuration ...\n      addModifications: this.#state.includeAnnotations,\n      shouldCompress: this.#state.shouldCompress,\n    });\n\n    Host.userMetrics.actionTaken(Host.UserMetrics.Action.PerfPanelTraceExported);\n  }\n\n  async #onExportClick(): Promise<void> {\n    // Handles save button click that lived inside the dialog.\n    // Exports trace and collapses dialog.\n    await this.#onExportCallback();\n    this.state = Object.assign({}, this.#state, {dialogState: Dialogs.Dialog.DialogState.COLLAPSED});\n  }\n}\n\ncustomElements.define('devtools-perf-export-trace-options', ExportTraceOptions);\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    'devtools-perf-export-trace-options': ExportTraceOptions;\n  }\n}\n"]}