{"version":3,"file":"FieldSettingsDialog.js","sourceRoot":"","sources":["../../../../../../../front_end/panels/timeline/components/FieldSettingsDialog.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright 2024 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n/* eslint-disable @devtools/no-lit-render-outside-of-view */\n\nimport './OriginMap.js';\n\nimport * as i18n from '../../../core/i18n/i18n.js';\nimport * as CrUXManager from '../../../models/crux-manager/crux-manager.js';\nimport * as Buttons from '../../../ui/components/buttons/buttons.js';\nimport * as Dialogs from '../../../ui/components/dialogs/dialogs.js';\nimport * as ComponentHelpers from '../../../ui/components/helpers/helpers.js';\nimport * as Input from '../../../ui/components/input/input.js';\nimport * as uiI18n from '../../../ui/i18n/i18n.js';\nimport * as UI from '../../../ui/legacy/legacy.js';\nimport * as Lit from '../../../ui/lit/lit.js';\nimport * as VisualLogging from '../../../ui/visual_logging/visual_logging.js';\n\nimport fieldSettingsDialogStyles from './fieldSettingsDialog.css.js';\nimport type {OriginMap} from './OriginMap.js';\n\nconst UIStrings = {\n  /**\n   * @description Text label for a button that opens a dialog to set up field metrics.\n   */\n  setUp: 'Set up',\n  /**\n   * @description Text label for a button that opens a dialog to configure field metrics.\n   */\n  configure: 'Configure',\n  /**\n   * @description Text label for a button that enables the collection of field metrics.\n   */\n  ok: 'Ok',\n  /**\n   * @description Text label for a button that opts out of the collection of field metrics.\n   */\n  optOut: 'Opt out',\n  /**\n   * @description Text label for a button that cancels the setup of field metrics collection.\n   */\n  cancel: 'Cancel',\n  /**\n   * @description Text label for a checkbox that controls if a manual URL override is enabled for field metrics.\n   */\n  onlyFetchFieldData: 'Always show field metrics for the below URL',\n  /**\n   * @description Text label for a text box that that contains the manual override URL for fetching field metrics.\n   */\n  url: 'URL',\n  /**\n   * @description Warning message explaining that the Chrome UX Report could not find enough real world speed data for the page. \"Chrome UX Report\" is a product name and should not be translated.\n   */\n  doesNotHaveSufficientData: 'The Chrome UX Report does not have sufficient real-world speed data for this page.',\n  /**\n   * @description Title for a dialog that contains information and settings related to fetching field metrics.\n   */\n  configureFieldData: 'Configure field metrics fetching',\n  /**\n   * @description Paragraph explaining where field metrics comes from and and how it can be used. PH1 will be a link with text \"Chrome UX Report\" that is untranslated because it is a product name.\n   * @example {Chrome UX Report} PH1\n   */\n  fetchAggregated:\n      'Fetch aggregated field metrics from the {PH1} to help you contextualize local measurements with what real users experience on the site.',\n  /**\n   * @description Heading for a section that explains what user data needs to be collected to fetch field metrics.\n   */\n  privacyDisclosure: 'Privacy disclosure',\n  /**\n   * @description Paragraph explaining what data needs to be sent to Google to fetch field metrics, and when that data will be sent.\n   */\n  whenPerformanceIsShown:\n      'When DevTools is open, the URLs you visit will be sent to Google to query field metrics. These requests are not tied to your Google account.',\n  /**\n   * @description Header for a section containing advanced settings\n   */\n  advanced: 'Advanced',\n  /**\n   * @description Paragraph explaining that the user can associate a development origin with a production origin for the purposes of fetching real user data.\n   */\n  mapDevelopmentOrigins:\n      'Set a development origin to automatically get relevant field metrics for its production origin.',\n  /**\n   * @description Text label for a button that adds a new editable row to a data table\n   */\n  new: 'New',\n  /**\n   * @description Warning message explaining that an input origin is not a valid origin or URL.\n   * @example {http//malformed.com} PH1\n   */\n  invalidOrigin: '\"{PH1}\" is not a valid origin or URL.',\n} as const;\n\nconst str_ = i18n.i18n.registerUIStrings('panels/timeline/components/FieldSettingsDialog.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\n\nconst {html, nothing, Directives: {ifDefined}} = Lit;\n\nexport class ShowDialog extends Event {\n  static readonly eventName = 'showdialog';\n\n  constructor() {\n    super(ShowDialog.eventName);\n  }\n}\n\nexport class FieldSettingsDialog extends HTMLElement {\n  readonly #shadow = this.attachShadow({mode: 'open'});\n\n  #dialog?: Dialogs.Dialog.Dialog;\n\n  #configSetting = CrUXManager.CrUXManager.instance().getConfigSetting();\n\n  #urlOverride = '';\n  #urlOverrideEnabled = false;\n  #urlOverrideWarning = '';\n  #originMap?: OriginMap;\n\n  constructor() {\n    super();\n\n    const cruxManager = CrUXManager.CrUXManager.instance();\n\n    this.#configSetting = cruxManager.getConfigSetting();\n\n    this.#resetToSettingState();\n\n    this.#render();\n  }\n\n  #resetToSettingState(): void {\n    const configSetting = this.#configSetting.get();\n    this.#urlOverride = configSetting.override || '';\n    this.#urlOverrideEnabled = configSetting.overrideEnabled || false;\n    this.#urlOverrideWarning = '';\n  }\n\n  #flushToSetting(enabled: boolean): void {\n    const value = this.#configSetting.get();\n    this.#configSetting.set({\n      ...value,\n      enabled,\n      override: this.#urlOverride,\n      overrideEnabled: this.#urlOverrideEnabled,\n    });\n  }\n\n  #onSettingsChanged(): void {\n    void ComponentHelpers.ScheduledRender.scheduleRender(this, this.#render);\n  }\n\n  async #urlHasFieldData(url: string): Promise<boolean> {\n    const cruxManager = CrUXManager.CrUXManager.instance();\n    const result = await cruxManager.getFieldDataForPage(url);\n    return Object.entries(result).some(([key, value]) => {\n      if (key === 'warnings') {\n        return false;\n      }\n      return Boolean(value);\n    });\n  }\n\n  async #submit(enabled: boolean): Promise<void> {\n    if (enabled && this.#urlOverrideEnabled) {\n      const origin = this.#getOrigin(this.#urlOverride);\n      if (!origin) {\n        this.#urlOverrideWarning = i18nString(UIStrings.invalidOrigin, {PH1: this.#urlOverride});\n        void ComponentHelpers.ScheduledRender.scheduleRender(this, this.#render);\n        return;\n      }\n\n      const hasFieldData = await this.#urlHasFieldData(this.#urlOverride);\n      if (!hasFieldData) {\n        this.#urlOverrideWarning = i18nString(UIStrings.doesNotHaveSufficientData);\n        void ComponentHelpers.ScheduledRender.scheduleRender(this, this.#render);\n        return;\n      }\n    }\n    this.#flushToSetting(enabled);\n    this.#closeDialog();\n  }\n\n  #showDialog(): void {\n    if (!this.#dialog) {\n      throw new Error('Dialog not found');\n    }\n    this.#resetToSettingState();\n    void this.#dialog.setDialogVisible(true);\n    void ComponentHelpers.ScheduledRender.scheduleRender(this, this.#render);\n    this.dispatchEvent(new ShowDialog());\n  }\n\n  #closeDialog(evt?: Dialogs.Dialog.ClickOutsideDialogEvent): void {\n    if (!this.#dialog) {\n      throw new Error('Dialog not found');\n    }\n    void this.#dialog.setDialogVisible(false);\n    if (evt) {\n      evt.stopImmediatePropagation();\n    }\n    void ComponentHelpers.ScheduledRender.scheduleRender(this, this.#render);\n  }\n\n  connectedCallback(): void {\n    this.#configSetting.addChangeListener(this.#onSettingsChanged, this);\n\n    void ComponentHelpers.ScheduledRender.scheduleRender(this, this.#render);\n  }\n\n  disconnectedCallback(): void {\n    this.#configSetting.removeChangeListener(this.#onSettingsChanged, this);\n  }\n\n  #renderOpenButton(): Lit.LitTemplate {\n    if (this.#configSetting.get().enabled) {\n      // clang-format off\n      return html`\n        <devtools-button\n          class=\"config-button\"\n          @click=${this.#showDialog}\n          .data=${{\n            variant: Buttons.Button.Variant.OUTLINED,\n            title: i18nString(UIStrings.configure),\n          } as Buttons.Button.ButtonData}\n        jslog=${VisualLogging.action('timeline.field-data.configure').track({click: true})}\n        >${i18nString(UIStrings.configure)}</devtools-button>\n      `;\n      // clang-format on\n    }\n    // clang-format off\n    return html`\n      <devtools-button\n        class=\"setup-button\"\n        @click=${this.#showDialog}\n        .data=${{\n          variant: Buttons.Button.Variant.PRIMARY,\n          title: i18nString(UIStrings.setUp),\n        } as Buttons.Button.ButtonData}\n        jslog=${VisualLogging.action('timeline.field-data.setup').track({click: true})}\n        data-field-data-setup\n      >${i18nString(UIStrings.setUp)}</devtools-button>\n    `;\n    // clang-format on\n  }\n\n  #renderEnableButton(): Lit.LitTemplate {\n    // clang-format off\n    return html`\n      <devtools-button\n        @click=${() => {\n          void this.#submit(true);\n        }}\n        .data=${{\n          variant: Buttons.Button.Variant.PRIMARY,\n          title: i18nString(UIStrings.ok),\n        } as Buttons.Button.ButtonData}\n        class=\"enable\"\n        jslog=${VisualLogging.action('timeline.field-data.enable').track({click: true})}\n        data-field-data-enable\n      >${i18nString(UIStrings.ok)}</devtools-button>\n    `;\n    // clang-format on\n  }\n\n  #renderDisableButton(): Lit.LitTemplate {\n    const label = this.#configSetting.get().enabled ? i18nString(UIStrings.optOut) : i18nString(UIStrings.cancel);\n    // clang-format off\n    return html`\n      <devtools-button\n        @click=${() => {\n          void this.#submit(false);\n        }}\n        .data=${{\n          variant: Buttons.Button.Variant.OUTLINED,\n          title: label,\n        } as Buttons.Button.ButtonData}\n        jslog=${VisualLogging.action('timeline.field-data.disable').track({click: true})}\n        data-field-data-disable\n      >${label}</devtools-button>\n    `;\n    // clang-format on\n  }\n\n  #onUrlOverrideChange(event: Event): void {\n    event.stopPropagation();\n    const input = event.target as HTMLInputElement;\n    this.#urlOverride = input.value;\n    this.#urlOverrideWarning = '';\n    void ComponentHelpers.ScheduledRender.scheduleRender(this, this.#render);\n  }\n\n  #onUrlOverrideEnabledChange(event: Event): void {\n    event.stopPropagation();\n    const input = event.target as HTMLInputElement;\n    this.#urlOverrideEnabled = input.checked;\n    this.#urlOverrideWarning = '';\n    void ComponentHelpers.ScheduledRender.scheduleRender(this, this.#render);\n  }\n\n  #getOrigin(url: string): string|null {\n    try {\n      return new URL(url).origin;\n    } catch {\n      return null;\n    }\n  }\n\n  #renderOriginMapGrid(): Lit.LitTemplate {\n    // clang-format off\n    return html`\n      <div class=\"origin-mapping-description\">${i18nString(UIStrings.mapDevelopmentOrigins)}</div>\n      <devtools-origin-map\n        on-render=${ComponentHelpers.Directives.nodeRenderedCallback(node => {\n          this.#originMap = node as OriginMap;\n        })}\n      ></devtools-origin-map>\n      <div class=\"origin-mapping-button-section\">\n        <devtools-button\n          @click=${() => this.#originMap?.startCreation()}\n          .data=${{\n            variant: Buttons.Button.Variant.TEXT,\n            title: i18nString(UIStrings.new),\n            iconName: 'plus',\n          } as Buttons.Button.ButtonData}\n          jslogContext=${'new-origin-mapping'}\n        >${i18nString(UIStrings.new)}</devtools-button>\n      </div>\n    `;\n    // clang-format on\n  }\n\n  #render = (): void => {\n    const linkEl =\n        UI.XLink.XLink.create('https://developer.chrome.com/docs/crux', i18n.i18n.lockedString('Chrome UX Report'));\n    const descriptionEl = uiI18n.getFormatLocalizedString(str_, UIStrings.fetchAggregated, {PH1: linkEl});\n\n    // clang-format off\n    const output = html`\n      <style>${fieldSettingsDialogStyles}</style>\n      <style>${Input.textInputStyles}</style>\n      <style>${Input.checkboxStyles}</style>\n      <div class=\"open-button-section\">${this.#renderOpenButton()}</div>\n      <devtools-dialog\n        @clickoutsidedialog=${this.#closeDialog}\n        .position=${Dialogs.Dialog.DialogVerticalPosition.AUTO}\n        .horizontalAlignment=${Dialogs.Dialog.DialogHorizontalAlignment.CENTER}\n        .jslogContext=${'timeline.field-data.settings'}\n        .expectedMutationsSelector=${'.timeline-settings-pane option'}\n        .dialogTitle=${i18nString(UIStrings.configureFieldData)}\n        on-render=${ComponentHelpers.Directives.nodeRenderedCallback(node => {\n          this.#dialog = node as Dialogs.Dialog.Dialog;\n        })}\n      >\n        <div class=\"content\">\n          <div>${descriptionEl}</div>\n          <div class=\"privacy-disclosure\">\n            <h3 class=\"section-title\">${i18nString(UIStrings.privacyDisclosure)}</h3>\n            <div>${i18nString(UIStrings.whenPerformanceIsShown)}</div>\n          </div>\n          <details aria-label=${i18nString(UIStrings.advanced)}>\n            <summary>${i18nString(UIStrings.advanced)}</summary>\n            <div class=\"advanced-section-contents\">\n              ${this.#renderOriginMapGrid()}\n              <hr class=\"divider\">\n              <label class=\"url-override\">\n                <input\n                  type=\"checkbox\"\n                  .checked=${this.#urlOverrideEnabled}\n                  @change=${this.#onUrlOverrideEnabledChange}\n                  aria-label=${i18nString(UIStrings.onlyFetchFieldData)}\n                  jslog=${VisualLogging.toggle().track({click: true}).context('field-url-override-enabled')}\n                />\n                ${i18nString(UIStrings.onlyFetchFieldData)}\n              </label>\n              <input\n                type=\"text\"\n                @keyup=${this.#onUrlOverrideChange}\n                @change=${this.#onUrlOverrideChange}\n                class=\"devtools-text-input\"\n                .disabled=${!this.#urlOverrideEnabled}\n                .value=${this.#urlOverride}\n                placeholder=${ifDefined(this.#urlOverrideEnabled ? i18nString(UIStrings.url) : undefined)}\n              />\n              ${\n                this.#urlOverrideWarning\n                  ? html`<div class=\"warning\" role=\"alert\" aria-label=${this.#urlOverrideWarning}>${this.#urlOverrideWarning}</div>`\n                  : nothing\n              }\n            </div>\n          </details>\n          <div class=\"buttons-section\">\n            ${this.#renderDisableButton()}\n            ${this.#renderEnableButton()}\n          </div>\n        </div>\n      </devtools-dialog>\n    `;\n    // clang-format on\n    Lit.render(output, this.#shadow, {host: this});\n  };\n}\n\ncustomElements.define('devtools-field-settings-dialog', FieldSettingsDialog);\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    'devtools-field-settings-dialog': FieldSettingsDialog;\n  }\n}\n"]}