{"version":3,"file":"LayoutShiftDetails.js","sourceRoot":"","sources":["../../../../../../../front_end/panels/timeline/components/LayoutShiftDetails.ts"],"names":[],"mappings":"AAAA,sCAAsC;AACtC,yEAAyE;AACzE,6BAA6B;AAE7B,OAAO,KAAK,IAAI,MAAM,4BAA4B,CAAC;AAEnD,OAAO,KAAK,GAAG,MAAM,0BAA0B,CAAC;AAEhD,OAAO,KAAK,OAAO,MAAM,0CAA0C,CAAC;AACpE,OAAO,KAAK,KAAK,MAAM,gCAAgC,CAAC;AACxD,OAAO,KAAK,OAAO,MAAM,2CAA2C,CAAC;AACrE,OAAO,KAAK,gBAAgB,MAAM,8CAA8C,CAAC;AACjF,OAAO,KAAK,EAAE,MAAM,8BAA8B,CAAC;AACnD,OAAO,KAAK,GAAG,MAAM,wBAAwB,CAAC;AAE9C,OAAO,KAAK,QAAQ,MAAM,wBAAwB,CAAC;AACnD,OAAO,wBAAwB,MAAM,6BAA6B,CAAC;AAEnE,MAAM,EAAC,IAAI,EAAE,MAAM,EAAC,GAAG,GAAG,CAAC;AAE3B,MAAM,cAAc,GAAG,EAAE,CAAC;AAE1B,MAAM,SAAS,GAAG;IAChB;;OAEG;IACH,SAAS,EAAE,YAAY;IACvB;;OAEG;IACH,UAAU,EAAE,aAAa;IACzB;;OAEG;IACH,eAAe,EAAE,kBAAkB;IACnC;;OAEG;IACH,OAAO,EAAE,SAAS;IAClB;;OAEG;IACH,cAAc,EAAE,iBAAiB;IACjC;;OAEG;IACH,WAAW,EAAE,cAAc;IAC3B;;OAEG;IACH,sBAAsB,EAAE,0BAA0B;IAClD;;OAEG;IACH,SAAS,EAAE,WAAW;IACtB;;OAEG;IACH,aAAa,EAAE,gBAAgB;IAC/B;;;OAGG;IACH,OAAO,EAAE,8BAA8B;IACvC;;;OAGG;IACH,WAAW,EAAE,sBAAsB;IACnC;;OAEG;IACH,KAAK,EAAE,OAAO;IACd;;OAEG;IACH,YAAY,EAAE,eAAe;CACrB,CAAC;AAEX,MAAM,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC,iBAAiB,CAAC,kDAAkD,EAAE,SAAS,CAAC,CAAC;AACxG,MAAM,UAAU,GAAG,IAAI,CAAC,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,SAAS,EAAE,IAAI,CAAC,CAAC;AAUtE,MAAM,OAAO,kBAAmB,SAAQ,EAAE,CAAC,MAAM,CAAC,MAAM;IACtD,KAAK,CAAsB;IAC3B,MAAM,GAAgG,IAAI,CAAC;IAC3G,YAAY,GAAsC,IAAI,CAAC;IACvD,iBAAiB,GAAG,KAAK,CAAC;IAE1B,YAAY,OAAqB,EAAE,IAAI,GAAG,YAAY;QACpD,KAAK,CAAC,OAAO,CAAC,CAAC;QACf,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC;IACpB,CAAC;IAED,IAAI,KAAK,CAAC,KAA6F;QACrG,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC;QACpB,KAAK,IAAI,CAAC,aAAa,EAAE,CAAC;IAC5B,CAAC;IAED,IAAI,WAAW,CAAC,WAA8C;QAC5D,IAAI,CAAC,YAAY,GAAG,WAAW,CAAC;QAChC,KAAK,IAAI,CAAC,aAAa,EAAE,CAAC;IAC5B,CAAC;IAED,IAAI,gBAAgB,CAAC,gBAAyB;QAC5C,IAAI,CAAC,iBAAiB,GAAG,gBAAgB,CAAC;QAC1C,KAAK,IAAI,CAAC,aAAa,EAAE,CAAC;IAC5B,CAAC;IAED,kDAAkD;IAClD,sBAAsB,CAAC,KAA+B;QACpD,IAAI,CAAC,cAAc,CAAC,aAAa,CAAC,IAAI,QAAQ,CAAC,QAAQ,CAAC,mBAAmB,CAAC,KAAK,CAAC,CAAC,CAAC;IACtF,CAAC;IAED,cAAc,CAAC,CAAa;QAC1B,MAAM,IAAI,GAAG,CAAC,CAAC,IAAI,KAAK,WAAW,CAAC;QACpC,IAAI,CAAC,CAAC,IAAI,KAAK,YAAY,EAAE,CAAC;YAC5B,IAAI,CAAC,cAAc,CAAC,aAAa,CAC7B,IAAI,WAAW,CAAC,gBAAgB,EAAE,EAAC,MAAM,EAAE,EAAC,IAAI,EAAC,EAAE,OAAO,EAAE,IAAI,EAAE,QAAQ,EAAE,IAAI,EAAC,CAAC,CAAC,CAAC;QAC1F,CAAC;QAED,IAAI,CAAC,CAAC,CAAC,CAAC,MAAM,YAAY,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,EAAE,CAAC;YACvD,OAAO;QACT,CAAC;QACD,MAAM,KAAK,GAAG,CAAC,CAAC,MAAM,CAAC,OAAO,CAAC,UAAU,CAAC,CAAC;QAC3C,IAAI,CAAC,KAAK,EAAE,aAAa,EAAE,CAAC;YAC1B,OAAO;QACT,CAAC;QAED,+CAA+C;QAC/C,MAAM,KAAK,GAAG,KAAK,CAAC,KAAK,CAAC,MAAM,CAAC,sBAAsB,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC;YAClE,IAAI,CAAC,MAAM,CAAC,CAAC;YACb,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,KAAK,QAAQ,CAAC,KAAK,CAAC,YAAY,CAAC,SAAS,CAAC,IAAI,EAAE,EAAE,EAAE,CAAC,CAAC,CAAC;QAC7F,IAAI,CAAC,cAAc,CAAC,aAAa,CAC7B,IAAI,WAAW,CAAC,gBAAgB,EAAE,EAAC,MAAM,EAAE,EAAC,KAAK,EAAE,IAAI,EAAC,EAAE,OAAO,EAAE,IAAI,EAAE,QAAQ,EAAE,IAAI,EAAC,CAAC,CAAC,CAAC;IACjG,CAAC;IAEQ,aAAa;QACpB,IAAI,CAAC,KAAK,CACN;YACE,KAAK,EAAE,IAAI,CAAC,MAAM;YAClB,WAAW,EAAE,IAAI,CAAC,YAAY;YAC9B,gBAAgB,EAAE,IAAI,CAAC,iBAAiB;YACxC,aAAa,EAAE,CAAC,CAAC,EAAE,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC,CAAC;YAC1C,YAAY,EAAE,CAAC,CAAC,EAAE,CAAC,IAAI,CAAC,sBAAsB,CAAC,CAAC,CAAC;SAClD,EACD,EAAE,EAAE,IAAI,CAAC,cAAc,CAAC,CAAC;IAC/B,CAAC;CACF;AAED,MAAM,CAAC,MAAM,YAAY,GACrB,CAAC,KAAK,EAAE,OAAO,EAAE,MAAM,EAAE,EAAE;IACzB,IAAI,CAAC,KAAK,CAAC,KAAK,IAAI,CAAC,KAAK,CAAC,WAAW,EAAE,CAAC;QACvC,MAAM,CAAC,GAAG,CAAC,OAAO,EAAE,MAAM,CAAC,CAAC;QAC5B,OAAO;IACT,CAAC;IAED,MAAM,KAAK,GAAG,KAAK,CAAC,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;IAC/C,mBAAmB;IACnB,MAAM,CAAC,IAAI,CAAA;iBACA,wBAAwB;iBACxB,OAAO,CAAC,gBAAgB;;;;;uBAKlB,KAAK,CAAC,aAAa;wBAClB,KAAK,CAAC,aAAa;;;;YAI/B,KAAK;;UAEP,KAAK,CAAC,KAAK,CAAC,MAAM,CAAC,sBAAsB,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,CAAC;QACxD,wBAAwB,CACtB,KAAK,CAAC,KAAK,EAAE,KAAK,CAAC,WAAW,CAAC,QAAQ,EAAE,KAAK,CAAC,WAAW,EAAE,KAAK,CAAC,gBAAgB,EAAE,KAAK,CAAC,YAAY,CACxG,CAAC,CAAC,CAAC,+BAA+B,CACjC,KAAK,CAAC,KAAK,EAAE,KAAK,CAAC,WAAW,CAAC,QAAQ,EAAE,KAAK,CAAC,WAAW,EAAE,KAAK,CAAC,YAAY,CAC/E;;;OAGH,EAAE,MAAM,CAAC,CAAC;IACX,kBAAkB;AACpB,CAAC,CAAC;AAEN,SAAS,wBAAwB,CAC7B,WAAoD,EAAE,iBAA6D,EACnH,WAAyC,EAAE,gBAAyB,EACpE,YAAmD;IACrD,IAAI,CAAC,iBAAiB,EAAE,CAAC;QACvB,OAAO,GAAG,CAAC,OAAO,CAAC;IACrB,CAAC;IACD,MAAM,UAAU,GAAG,WAAW,CAAC,IAAI,CAAC,IAAI,EAAE,YAAY,IAAI,KAAK,CAAC,KAAK,CAAC,MAAM,CAAC,aAAa,CAAC;IAC3F,MAAM,UAAU,GAAG,iBAAiB,CAAC,GAAG,CAAC,UAAU,CAAC,EAAE,KAAK,CAAC,WAAW,CAAC;IACxE,IAAI,CAAC,UAAU,IAAI,UAAU,YAAY,KAAK,EAAE,CAAC;QAC/C,OAAO,GAAG,CAAC,OAAO,CAAC;IACrB,CAAC;IAED,MAAM,UAAU,GAAG,UAAU,CAAC,MAAM,CAAC,GAAG,CAAC,WAAW,CAAC,CAAC;IAEtD,IAAI,eAAe,GAAG,WAAW,CAAC,IAAI,CAAC,IAAI,EAAE,cAAc,IAAI,EAAE,CAAC;IAClE,IAAI,CAAC,gBAAgB,EAAE,CAAC;QACtB,eAAe,GAAG,eAAe,EAAE,MAAM,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,UAAU,CAAC,CAAC;IACjE,CAAC;IAED,MAAM,WAAW,GAAG,UAAU;QAC1B,CAAC,UAAU,CAAC,QAAQ,CAAC,MAAM,IAAI,UAAU,CAAC,OAAO,CAAC,MAAM,IAAI,UAAU,CAAC,uBAAuB,CAAC,MAAM;YACpG,UAAU,CAAC,aAAa,CAAC,MAAM,CAAC,CAAC;IACtC,MAAM,kBAAkB,GAAG,eAAe,EAAE,MAAM,CAAC;IAEnD,MAAM,aAAa,GAAG,UAAU,CAAC,QAAQ,CAAC,IAAI,CAAC,OAAO,CAAC,EAAE;QACvD,OAAO,OAAO,CAAC,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,EAAE,CAAC,KAAK,KAAK,WAAW,CAAC,CAAC;IAC7D,CAAC,CAAC,CAAC;IAEH,mBAAmB;IACjB,OAAO,IAAI,CAAA;;;;kBAIG,UAAU,CAAC,SAAS,CAAC,SAAS,CAAC;kBAC/B,UAAU,CAAC,SAAS,CAAC,UAAU,CAAC;cACpC,kBAAkB,CAAC,CAAC,CAAC,IAAI,CAAA;oBACnB,UAAU,CAAC,SAAS,CAAC,eAAe,CAAC,OAAO,CAAC,CAAC,CAAC,GAAG,CAAC,OAAO;cAChE,WAAW,CAAC,CAAC,CAAC,IAAI,CAAA;oBACZ,UAAU,CAAC,SAAS,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC,CAAC,GAAG,CAAC,OAAO;;;;YAI3D,cAAc,CAAC,WAAW,EAAE,IAAI,EAAE,WAAW,EAAE,eAAe,EAAE,YAAY,EAAE,UAAU,CAAC;;;QAG7F,mBAAmB,CAAC,aAAa,EAAE,YAAY,EAAE,WAAW,CAAC;KAChE,CAAC;IACJ,kBAAkB;AACpB,CAAC;AAED,SAAS,+BAA+B,CACpC,OAAuD,EACvD,iBAA6D,EAAE,WAAyC,EACxG,YAAmD;IACrD,IAAI,CAAC,iBAAiB,EAAE,CAAC;QACvB,OAAO,GAAG,CAAC,OAAO,CAAC;IACrB,CAAC;IACD,MAAM,UAAU,GAAG,OAAO,CAAC,YAAY,IAAI,KAAK,CAAC,KAAK,CAAC,MAAM,CAAC,aAAa,CAAC;IAC5E,MAAM,UAAU,GAAG,iBAAiB,CAAC,GAAG,CAAC,UAAU,CAAC,EAAE,KAAK,CAAC,WAAW,CAAC;IACxE,IAAI,CAAC,UAAU,IAAI,UAAU,YAAY,KAAK,EAAE,CAAC;QAC/C,OAAO,GAAG,CAAC,OAAO,CAAC;IACrB,CAAC;IAED,+EAA+E;IAC/E,MAAM,eAAe,GAAG,KAAK,CAAC,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,OAAO,EAAE,CAAC;SAClC,MAAM,CAAC,CAAC,CAAC,GAAG,CAAC,EAAE,EAAE,CAAC,OAAO,CAAC,MAAM,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC;SAC/C,GAAG,CAAC,CAAC,CAAC,EAAE,KAAK,CAAC,EAAE,EAAE,CAAC,KAAK,CAAC;SACzB,OAAO,CAAC,CAAC,CAAC,EAAE,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;SAC9B,IAAI,EAAE,CAAC;IAEpC,MAAM,WAAW,GAAG,OAAO,CAAC,eAAe,CAAC,MAAM,CAAC,CAAC;IAEpD,mBAAmB;IACnB,OAAO,IAAI,CAAA;;;;gBAIG,UAAU,CAAC,SAAS,CAAC,SAAS,CAAC;gBAC/B,UAAU,CAAC,SAAS,CAAC,UAAU,CAAC;gBAChC,UAAU,CAAC,SAAS,CAAC,eAAe,CAAC;YACzC,WAAW,CAAC,CAAC,CAAC,IAAI,CAAA;kBACZ,UAAU,CAAC,SAAS,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC,CAAC,GAAG,CAAC,OAAO;;;;UAI3D,OAAO,CAAC,MAAM,CAAC,GAAG,CAAC,KAAK,CAAC,EAAE;QAC3B,MAAM,UAAU,GAAG,UAAU,CAAC,MAAM,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;QAChD,MAAM,eAAe,GAAG,KAAK,CAAC,IAAI,CAAC,IAAI,EAAE,cAAc,IAAI,EAAE,CAAC;QAC9D,OAAO,cAAc,CAAC,KAAK,EAAE,KAAK,EAAE,WAAW,EAAE,eAAe,EAAE,YAAY,EAAE,UAAU,CAAC,CAAC;IAC9F,CAAC,CAAC;;;kCAGwB,UAAU,CAAC,SAAS,CAAC,KAAK,CAAC;kCAC3B,CAAC,OAAO,CAAC,sBAAsB,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;;;;GAI1E,CAAC;IACF,kBAAkB;AACpB,CAAC;AAED,SAAS,cAAc,CACnB,YAAqD,EAAE,0BAAmC,EAC1F,WAAyC,EAAE,eAAuD,EAClG,YAAmD,EACnD,UAAiF;IACnF,MAAM,KAAK,GAAG,YAAY,CAAC,IAAI,CAAC,IAAI,EAAE,oBAAoB,CAAC;IAC3D,IAAI,CAAC,KAAK,EAAE,CAAC;QACX,OAAO,GAAG,CAAC,OAAO,CAAC;IACrB,CAAC;IACD,MAAM,WAAW,GAAG,OAAO,CACvB,UAAU;QACV,CAAC,UAAU,CAAC,QAAQ,CAAC,MAAM,IAAI,UAAU,CAAC,OAAO,CAAC,MAAM,IAAI,UAAU,CAAC,uBAAuB,CAAC,MAAM;YACpG,UAAU,CAAC,aAAa,CAAC,MAAM,CAAC,CAAC,CAAC;IAEvC,mBAAmB;IACjB,OAAO,IAAI,CAAA;sCACuB,YAAY,CAAC,EAAE;cACvC,eAAe,CAAC,YAAY,EAAE,0BAA0B,EAAE,WAAW,EAAE,YAAY,CAAC;cACpF,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;UACtB,eAAe,CAAC,MAAM,CAAC,CAAC,CAAC,IAAI,CAAA;;;gBAGvB,qBAAqB,CAAC,YAAY,EAAE,eAAe,CAAC;;gBAEpD,CAAC,CAAC,CAAC,GAAG,CAAC,OAAO;UACpB,WAAW,CAAC,CAAC,CAAC,IAAI,CAAA;;cAEd,UAAU,EAAE,QAAQ,CAAC,GAAG,CAAC,OAAO,CAAC,EAAE,CAAC,iBAAiB,CAAC,OAAO,CAAC,CAAC;cAC/D,UAAU,EAAE,OAAO,CAAC,GAAG,CAAC,MAAM,CAAC,EAAE,CAAC,YAAY,CAAC,MAAM,CAAC,CAAC;cACvD,UAAU,EAAE,uBAAuB,CAAC,GAAG,CAAC,OAAO,CAAC,EAAE,CAAC,eAAe,CAAC,OAAO,EAAE,YAAY,CAAC,CAAC;cAC1F,UAAU,EAAE,aAAa,CAAC,GAAG,CAAC,YAAY,CAAC,EAAE,CAAC,kBAAkB,CAAC,YAAY,CAAC,IAAI,CAAC,KAAK,EAAE,YAAY,CAAC,CAAC;gBACtG,CAAC,CAAC,CAAC,GAAG,CAAC,OAAO;YAClB,CAAC;IACX,kBAAkB;AACpB,CAAC;AAED,SAAS,eAAe,CACpB,KAA8C,EAC9C,0BAAmC,EACnC,WAAyC,EACzC,YAAmD;IAErD,MAAM,EAAE,GAAG,KAAK,CAAC,KAAK,CAAC,MAAM,CAAC,KAAK,CAAC,KAAK,CAAC,EAAE,GAAG,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,GAAG,CAAC,CAAC;IACtF,IAAI,0BAA0B,EAAE,CAAC;QAC/B,OAAO,IAAI,CAAA,GAAG,IAAI,CAAC,aAAa,CAAC,qBAAqB,CAAC,OAAO,CAAC,MAAM,CAAC,YAAY,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC;IAC5F,CAAC;IACD,MAAM,OAAO,GAAG,IAAI,CAAC,aAAa,CAAC,sBAAsB,CAAC,EAAE,CAAC,CAAC;IAC9D,mBAAmB;IACjB,OAAO,IAAI,CAAA;8DAC+C,GAAG,EAAE,CAAC,YAAY,CAAC,KAAK,CAAC,IAAI,UAAU,CAAC,SAAS,CAAC,WAAW,EAAE,EAAC,GAAG,EAAE,OAAO,EAAC,CAAC,WAAW,CAAC;IACtJ,kBAAkB;AACpB,CAAC;AAED,SAAS,mBAAmB,CACxB,OAAiE,EACjE,YAAmD,EAAE,WAAyC;IAChG,IAAI,CAAC,OAAO,EAAE,CAAC;QACb,OAAO,GAAG,CAAC,OAAO,CAAC;IACrB,CAAC;IACD,MAAM,EAAE,GAAG,KAAK,CAAC,KAAK,CAAC,MAAM,CAAC,KAAK,CAAC,OAAO,CAAC,EAAE,GAAG,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,GAAG,IAAI,CAAC,CAAC,CAAC,CAAC;IAC/F,MAAM,SAAS,GAAG,IAAI,CAAC,aAAa,CAAC,sBAAsB,CAAC,EAAE,CAAC,CAAC;IAEhE,mBAAmB;IACjB,OAAO,IAAI,CAAA;qCACsB,UAAU,CAAC,SAAS,CAAC,aAAa,CAAC,2EAA2E,GAAG,EAAE,CAAC,YAAY,CAAC,OAAO,CAAC,IAAI,UAAU,CAAC,SAAS,CAAC,OAAO,EAAE,EAAC,GAAG,EAAE,SAAS,EAAC,CAAC;cACnN,CAAC;IACb,kBAAkB;AACpB,CAAC;AAED,SAAS,qBAAqB,CAC1B,KAA8C,EAC9C,eAAiE;IACnE,mBAAmB;IACjB,OAAO,IAAI,CAAA;QACP,eAAe,EAAE,GAAG,CAAC,EAAE,CAAC,EAAE;QAC1B,IAAI,EAAE,CAAC,OAAO,KAAK,SAAS,EAAE,CAAC;YAC7B,OAAO,IAAI,CAAA;;sBAEC;gBACN,aAAa,EAAE,EAAE,CAAC,OAAO;gBACzB,KAAK,EAAE,KAAK,CAAC,IAAI,CAAC,KAAK;gBACvB,mBAAmB,EAAE,EAAE,CAAC,UAAU;aACD;8CACH,CAAC;QACvC,CAAC;QACC,OAAO,GAAG,CAAC,OAAO,CAAC;IACvB,CAAC,CAAC,EAAE,CAAC;IACT,kBAAkB;AACpB,CAAC;AAED,SAAS,eAAe,CACpB,OAAwE,EACxE,YAAmD;IAGrD,MAAM,KAAK,GAAG,OAAO,CAAC,SAAS,CAAC;IAChC,IAAI,CAAC,KAAK,EAAE,CAAC;QACX,OAAO,GAAG,CAAC,OAAO,CAAC;IACrB,CAAC;IACD,mBAAmB;IACjB,OAAO,IAAI,CAAA;;qCAEsB,UAAU,CAAC,SAAS,CAAC,sBAAsB,CAAC;2EACN,GAAG,EAAE,CAAC,YAAY,CAAC,KAAK,CAAC,IAAI,UAAU,CAAC,SAAS,CAAC,SAAS,CAAC;cACzH,CAAC;IACb,kBAAkB;AACpB,CAAC;AAED,SAAS,kBAAkB,CACvB,KAAa,EAAE,YAA4D;IAC7E,mBAAmB;IACjB,MAAM,EAAE,GAAG,IAAI,CAAA;;gBAEH;QACN,aAAa,EAAE,YAAY,CAAC,aAAa;QACzC,KAAK;QACL,WAAW,EAAE,YAAY,CAAC,eAAe,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG;KACtB;wCACH,CAAC;IACrC,OAAO,IAAI,CAAA;;qCAEsB,UAAU,CAAC,SAAS,CAAC,YAAY,CAAC;sCACjC,EAAE;cAC1B,CAAC;IACb,kBAAkB;AACpB,CAAC;AAED,SAAS,iBAAiB,CAAC,OAAmD;IAC5E,MAAM,YAAY,GAAG,UAAU,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,GAAsC,CAAC,CAAC;IAE1F,mBAAmB;IACjB,OAAO,IAAI,CAAA;;qCAEsB,UAAU,CAAC,SAAS,CAAC,WAAW,CAAC;sCAChC,YAAY;cACpC,CAAC;IACb,kBAAkB;AACpB,CAAC;AAED,SAAS,UAAU,CAAC,GAAoC;IACtD,OAAO,gBAAgB,CAAC,SAAS,CAAC,SAAS,CAAC,UAAU,CAAC,GAAG,EAAE;QAC1D,OAAO,EAAE,IAAI;QACb,gBAAgB,EAAE,KAAK;QACvB,gBAAgB,EAAE,CAAC;QACnB,SAAS,EAAE,cAAc;KAC1B,CAAC,CAAC;AACL,CAAC;AAED,SAAS,YAAY,CAAC,eAAkE;IACtF,MAAM,YAAY,GAAG,eAAe,CAAC,KAA8B,CAAC;IACpE,MAAM,eAAe,GAAG,GAAG,CAAC,YAAY,CAAC,YAAY,CAAC,QAAQ,EAAE,CAAC,QAAQ,CAAC,YAAY,CAAC,CAAC;IAExF,IAAI,EAAE,CAAC;IACP,IAAI,eAAe,EAAE,CAAC;QACpB,EAAE,GAAG,gBAAgB,CAAC,SAAS,CAAC,SAAS,CAAC,iBAAiB,CAAC,eAAe,EAAE,eAAe,CAAC,WAAW,EAAE,CAAC,CAAC;IAC9G,CAAC;SAAM,CAAC;QACN,EAAE,GAAG,UAAU,CAAC,eAAe,CAAC,GAAsC,CAAC,CAAC;IAC1E,CAAC;IAED,mBAAmB;IACjB,OAAO,IAAI,CAAA;;sCAEuB,UAAU,CAAC,SAAS,CAAC,cAAc,CAAC;sCACpC,EAAE;cAC1B,CAAC;IACb,kBAAkB;AACpB,CAAC","sourcesContent":["// Copyright 2024 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as i18n from '../../../core/i18n/i18n.js';\nimport type * as Platform from '../../../core/platform/platform.js';\nimport * as SDK from '../../../core/sdk/sdk.js';\nimport type * as Protocol from '../../../generated/protocol.js';\nimport * as Helpers from '../../../models/trace/helpers/helpers.js';\nimport * as Trace from '../../../models/trace/trace.js';\nimport * as Buttons from '../../../ui/components/buttons/buttons.js';\nimport * as LegacyComponents from '../../../ui/legacy/components/utils/utils.js';\nimport * as UI from '../../../ui/legacy/legacy.js';\nimport * as Lit from '../../../ui/lit/lit.js';\n\nimport * as Insights from './insights/insights.js';\nimport layoutShiftDetailsStyles from './layoutShiftDetails.css.js';\n\nconst {html, render} = Lit;\n\nconst MAX_URL_LENGTH = 20;\n\nconst UIStrings = {\n  /**\n   * @description Text referring to the start time of a given event.\n   */\n  startTime: 'Start time',\n  /**\n   * @description Text for a table header referring to the score of a Layout Shift event.\n   */\n  shiftScore: 'Shift score',\n  /**\n   * @description Text for a table header referring to the elements shifted for a Layout Shift event.\n   */\n  elementsShifted: 'Elements shifted',\n  /**\n   * @description Text for a table header referring to the culprit of a Layout Shift event.\n   */\n  culprit: 'Culprit',\n  /**\n   * @description Text for a culprit type of Injected iframe.\n   */\n  injectedIframe: 'Injected iframe',\n  /**\n   * @description Text for a culprit type of Font request.\n   */\n  fontRequest: 'Font request',\n  /**\n   * @description Text for a culprit type of non-composited animation.\n   */\n  nonCompositedAnimation: 'Non-composited animation',\n  /**\n   * @description Text referring to an animation.\n   */\n  animation: 'Animation',\n  /**\n   * @description Text referring to a parent cluster.\n   */\n  parentCluster: 'Parent cluster',\n  /**\n   * @description Text referring to a layout shift cluster and its start time.\n   * @example {32 ms} PH1\n   */\n  cluster: 'Layout shift cluster @ {PH1}',\n  /**\n   * @description Text referring to a layout shift and its start time.\n   * @example {32 ms} PH1\n   */\n  layoutShift: 'Layout shift @ {PH1}',\n  /**\n   * @description Text referring to the total cumulative score of a layout shift cluster.\n   */\n  total: 'Total',\n  /**\n   * @description Text for a culprit type of Unsized image.\n   */\n  unsizedImage: 'Unsized image',\n} as const;\n\nconst str_ = i18n.i18n.registerUIStrings('panels/timeline/components/LayoutShiftDetails.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\n\nexport interface ViewInput {\n  event: Trace.Types.Events.SyntheticLayoutShift|Trace.Types.Events.SyntheticLayoutShiftCluster|null;\n  parsedTrace: Trace.TraceModel.ParsedTrace|null;\n  isFreshRecording: boolean;\n  togglePopover: (e: MouseEvent) => void;\n  onEventClick: (event: Trace.Types.Events.Event) => void;\n}\n\nexport class LayoutShiftDetails extends UI.Widget.Widget {\n  #view: typeof DEFAULT_VIEW;\n  #event: Trace.Types.Events.SyntheticLayoutShift|Trace.Types.Events.SyntheticLayoutShiftCluster|null = null;\n  #parsedTrace: Trace.TraceModel.ParsedTrace|null = null;\n  #isFreshRecording = false;\n\n  constructor(element?: HTMLElement, view = DEFAULT_VIEW) {\n    super(element);\n    this.#view = view;\n  }\n\n  set event(event: Trace.Types.Events.SyntheticLayoutShift|Trace.Types.Events.SyntheticLayoutShiftCluster) {\n    this.#event = event;\n    void this.requestUpdate();\n  }\n\n  set parsedTrace(parsedTrace: Trace.TraceModel.ParsedTrace|null) {\n    this.#parsedTrace = parsedTrace;\n    void this.requestUpdate();\n  }\n\n  set isFreshRecording(isFreshRecording: boolean) {\n    this.#isFreshRecording = isFreshRecording;\n    void this.requestUpdate();\n  }\n\n  // TODO(crbug.com/368170718): use eventRef instead\n  #handleTraceEventClick(event: Trace.Types.Events.Event): void {\n    this.contentElement.dispatchEvent(new Insights.EventRef.EventReferenceClick(event));\n  }\n\n  #togglePopover(e: MouseEvent): void {\n    const show = e.type === 'mouseover';\n    if (e.type === 'mouseleave') {\n      this.contentElement.dispatchEvent(\n          new CustomEvent('toggle-popover', {detail: {show}, bubbles: true, composed: true}));\n    }\n\n    if (!(e.target instanceof HTMLElement) || !this.#event) {\n      return;\n    }\n    const rowEl = e.target.closest('tbody tr');\n    if (!rowEl?.parentElement) {\n      return;\n    }\n\n    // Grab the associated trace event of this row.\n    const event = Trace.Types.Events.isSyntheticLayoutShift(this.#event) ?\n        this.#event :\n        this.#event.events.find(e => e.ts === parseInt(rowEl.getAttribute('data-ts') ?? '', 10));\n    this.contentElement.dispatchEvent(\n        new CustomEvent('toggle-popover', {detail: {event, show}, bubbles: true, composed: true}));\n  }\n\n  override performUpdate(): Promise<void>|void {\n    this.#view(\n        {\n          event: this.#event,\n          parsedTrace: this.#parsedTrace,\n          isFreshRecording: this.#isFreshRecording,\n          togglePopover: e => this.#togglePopover(e),\n          onEventClick: e => this.#handleTraceEventClick(e)\n        },\n        {}, this.contentElement);\n  }\n}\n\nexport const DEFAULT_VIEW: (input: ViewInput, output: object, target: HTMLElement) => void =\n    (input, _output, target) => {\n      if (!input.event || !input.parsedTrace) {\n        render(Lit.nothing, target);\n        return;\n      }\n\n      const title = Trace.Name.forEntry(input.event);\n      // clang-format off\n      render(html`\n        <style>${layoutShiftDetailsStyles}</style>\n        <style>${Buttons.textButtonStyles}</style>\n\n      <div class=\"layout-shift-summary-details\">\n        <div\n          class=\"event-details\"\n          @mouseover=${input.togglePopover}\n          @mouseleave=${input.togglePopover}\n        >\n        <div class=\"layout-shift-details-title\">\n          <div class=\"layout-shift-event-title\"></div>\n          ${title}\n        </div>\n        ${Trace.Types.Events.isSyntheticLayoutShift(input.event) ?\n          renderLayoutShiftDetails(\n            input.event, input.parsedTrace.insights, input.parsedTrace, input.isFreshRecording, input.onEventClick,\n         ) : renderLayoutShiftClusterDetails(\n           input.event, input.parsedTrace.insights, input.parsedTrace, input.onEventClick,\n         )}\n        </div>\n      </div>\n      `, target);\n      // clang-format on\n    };\n\nfunction renderLayoutShiftDetails(\n    layoutShift: Trace.Types.Events.SyntheticLayoutShift, traceInsightsSets: Trace.Insights.Types.TraceInsightSets|null,\n    parsedTrace: Trace.TraceModel.ParsedTrace, isFreshRecording: boolean,\n    onEventClick: (e: Trace.Types.Events.Event) => void): Lit.LitTemplate {\n  if (!traceInsightsSets) {\n    return Lit.nothing;\n  }\n  const insightsId = layoutShift.args.data?.navigationId ?? Trace.Types.Events.NO_NAVIGATION;\n  const clsInsight = traceInsightsSets.get(insightsId)?.model.CLSCulprits;\n  if (!clsInsight || clsInsight instanceof Error) {\n    return Lit.nothing;\n  }\n\n  const rootCauses = clsInsight.shifts.get(layoutShift);\n\n  let elementsShifted = layoutShift.args.data?.impacted_nodes ?? [];\n  if (!isFreshRecording) {\n    elementsShifted = elementsShifted?.filter(el => el.debug_name);\n  }\n\n  const hasCulprits = rootCauses &&\n      (rootCauses.webFonts.length || rootCauses.iframes.length || rootCauses.nonCompositedAnimations.length ||\n       rootCauses.unsizedImages.length);\n  const hasShiftedElements = elementsShifted?.length;\n\n  const parentCluster = clsInsight.clusters.find(cluster => {\n    return cluster.events.find(event => event === layoutShift);\n  });\n\n  // clang-format off\n    return html`\n      <table class=\"layout-shift-details-table\">\n        <thead class=\"table-title\">\n          <tr>\n            <th>${i18nString(UIStrings.startTime)}</th>\n            <th>${i18nString(UIStrings.shiftScore)}</th>\n            ${hasShiftedElements ? html`\n              <th>${i18nString(UIStrings.elementsShifted)}</th>` : Lit.nothing}\n            ${hasCulprits ? html`\n              <th>${i18nString(UIStrings.culprit)}</th> ` : Lit.nothing}\n          </tr>\n        </thead>\n        <tbody>\n          ${renderShiftRow(layoutShift, true, parsedTrace, elementsShifted, onEventClick, rootCauses)}\n        </tbody>\n      </table>\n      ${renderParentCluster(parentCluster, onEventClick, parsedTrace)}\n    `;\n  // clang-format on\n}\n\nfunction renderLayoutShiftClusterDetails(\n    cluster: Trace.Types.Events.SyntheticLayoutShiftCluster,\n    traceInsightsSets: Trace.Insights.Types.TraceInsightSets|null, parsedTrace: Trace.TraceModel.ParsedTrace,\n    onEventClick: (e: Trace.Types.Events.Event) => void): Lit.LitTemplate {\n  if (!traceInsightsSets) {\n    return Lit.nothing;\n  }\n  const insightsId = cluster.navigationId ?? Trace.Types.Events.NO_NAVIGATION;\n  const clsInsight = traceInsightsSets.get(insightsId)?.model.CLSCulprits;\n  if (!clsInsight || clsInsight instanceof Error) {\n    return Lit.nothing;\n  }\n\n  // This finds the culprits of the cluster and returns an array of the culprits.\n  const clusterCulprits = Array.from(clsInsight.shifts.entries())\n                              .filter(([key]) => cluster.events.includes(key))\n                              .map(([, value]) => value)\n                              .flatMap(x => Object.values(x))\n                              .flat();\n\n  const hasCulprits = Boolean(clusterCulprits.length);\n\n  // clang-format off\n  return html`\n    <table class=\"layout-shift-details-table\">\n      <thead class=\"table-title\">\n        <tr>\n          <th>${i18nString(UIStrings.startTime)}</th>\n          <th>${i18nString(UIStrings.shiftScore)}</th>\n          <th>${i18nString(UIStrings.elementsShifted)}</th>\n          ${hasCulprits ? html`\n            <th>${i18nString(UIStrings.culprit)}</th> ` : Lit.nothing}\n        </tr>\n      </thead>\n      <tbody>\n        ${cluster.events.map(shift => {\n          const rootCauses = clsInsight.shifts.get(shift);\n          const elementsShifted = shift.args.data?.impacted_nodes ?? [];\n          return renderShiftRow(shift, false, parsedTrace, elementsShifted, onEventClick, rootCauses);\n        })}\n\n        <tr>\n          <td class=\"total-row\">${i18nString(UIStrings.total)}</td>\n          <td class=\"total-row\">${(cluster.clusterCumulativeScore.toFixed(4))}</td>\n        </tr>\n      </tbody>\n    </table>\n  `;\n  // clang-format on\n}\n\nfunction renderShiftRow(\n    currentShift: Trace.Types.Events.SyntheticLayoutShift, userHasSingleShiftSelected: boolean,\n    parsedTrace: Trace.TraceModel.ParsedTrace, elementsShifted: Trace.Types.Events.TraceImpactedNode[],\n    onEventClick: (e: Trace.Types.Events.Event) => void,\n    rootCauses: Trace.Insights.Models.CLSCulprits.LayoutShiftRootCausesData|undefined): Lit.LitTemplate {\n  const score = currentShift.args.data?.weighted_score_delta;\n  if (!score) {\n    return Lit.nothing;\n  }\n  const hasCulprits = Boolean(\n      rootCauses &&\n      (rootCauses.webFonts.length || rootCauses.iframes.length || rootCauses.nonCompositedAnimations.length ||\n       rootCauses.unsizedImages.length));\n\n  // clang-format off\n    return html`\n      <tr class=\"shift-row\" data-ts=${currentShift.ts}>\n        <td>${renderStartTime(currentShift, userHasSingleShiftSelected, parsedTrace, onEventClick)}</td>\n        <td>${(score.toFixed(4))}</td>\n        ${elementsShifted.length ? html`\n          <td>\n            <div class=\"elements-shifted\">\n              ${renderShiftedElements(currentShift, elementsShifted)}\n            </div>\n          </td>` : Lit.nothing}\n        ${hasCulprits ? html`\n          <td class=\"culprits\">\n            ${rootCauses?.webFonts.map(fontReq => renderFontRequest(fontReq))}\n            ${rootCauses?.iframes.map(iframe => renderIframe(iframe))}\n            ${rootCauses?.nonCompositedAnimations.map(failure => renderAnimation(failure, onEventClick))}\n            ${rootCauses?.unsizedImages.map(unsizedImage => renderUnsizedImage(currentShift.args.frame, unsizedImage))}\n          </td>` : Lit.nothing}\n      </tr>`;\n  // clang-format on\n}\n\nfunction renderStartTime(\n    shift: Trace.Types.Events.SyntheticLayoutShift,\n    userHasSingleShiftSelected: boolean,\n    parsedTrace: Trace.TraceModel.ParsedTrace,\n    onEventClick: (e: Trace.Types.Events.Event) => void,\n    ): Lit.TemplateResult {\n  const ts = Trace.Types.Timing.Micro(shift.ts - parsedTrace.data.Meta.traceBounds.min);\n  if (userHasSingleShiftSelected) {\n    return html`${i18n.TimeUtilities.preciseMillisToString(Helpers.Timing.microToMilli(ts))}`;\n  }\n  const shiftTs = i18n.TimeUtilities.formatMicroSecondsTime(ts);\n  // clang-format off\n    return html`\n         <button type=\"button\" class=\"timeline-link\" @click=${() => onEventClick(shift)}>${i18nString(UIStrings.layoutShift, {PH1: shiftTs})}</button>`;\n  // clang-format on\n}\n\nfunction renderParentCluster(\n    cluster: Trace.Types.Events.SyntheticLayoutShiftCluster|undefined,\n    onEventClick: (e: Trace.Types.Events.Event) => void, parsedTrace: Trace.TraceModel.ParsedTrace): Lit.LitTemplate {\n  if (!cluster) {\n    return Lit.nothing;\n  }\n  const ts = Trace.Types.Timing.Micro(cluster.ts - (parsedTrace.data.Meta.traceBounds.min ?? 0));\n  const clusterTs = i18n.TimeUtilities.formatMicroSecondsTime(ts);\n\n  // clang-format off\n    return html`\n      <span class=\"parent-cluster\">${i18nString(UIStrings.parentCluster)}:<button type=\"button\" class=\"timeline-link parent-cluster-link\" @click=${() => onEventClick(cluster)}>${i18nString(UIStrings.cluster, {PH1: clusterTs})}</button>\n      </span>`;\n  // clang-format on\n}\n\nfunction renderShiftedElements(\n    shift: Trace.Types.Events.SyntheticLayoutShift,\n    elementsShifted: Trace.Types.Events.TraceImpactedNode[]|undefined): Lit.TemplateResult {\n  // clang-format off\n    return html`\n      ${elementsShifted?.map(el => {\n        if (el.node_id !== undefined) {\n          return html`\n            <devtools-performance-node-link\n              .data=${{\n                backendNodeId: el.node_id,\n                frame: shift.args.frame,\n                fallbackHtmlSnippet: el.debug_name,\n              } as Insights.NodeLink.NodeLinkData}>\n            </devtools-performance-node-link>`;\n        }\n          return Lit.nothing;\n      })}`;\n  // clang-format on\n}\n\nfunction renderAnimation(\n    failure: Trace.Insights.Models.CLSCulprits.NoncompositedAnimationFailure,\n    onEventClick: (e: Trace.Types.Events.Event) => void,\n\n    ): Lit.LitTemplate {\n  const event = failure.animation;\n  if (!event) {\n    return Lit.nothing;\n  }\n  // clang-format off\n    return html`\n        <span class=\"culprit\">\n        <span class=\"culprit-type\">${i18nString(UIStrings.nonCompositedAnimation)}: </span>\n        <button type=\"button\" class=\"culprit-value timeline-link\" @click=${() => onEventClick(event)}>${i18nString(UIStrings.animation)}</button>\n      </span>`;\n  // clang-format on\n}\n\nfunction renderUnsizedImage(\n    frame: string, unsizedImage: Trace.Insights.Models.CLSCulprits.UnsizedImage): Lit.LitTemplate {\n  // clang-format off\n    const el = html`\n      <devtools-performance-node-link\n        .data=${{\n          backendNodeId: unsizedImage.backendNodeId,\n          frame,\n          fallbackUrl: unsizedImage.paintImageEvent.args.data.url,\n        } as Insights.NodeLink.NodeLinkData}>\n      </devtools-performance-node-link>`;\n    return html`\n      <span class=\"culprit\">\n        <span class=\"culprit-type\">${i18nString(UIStrings.unsizedImage)}: </span>\n        <span class=\"culprit-value\">${el}</span>\n      </span>`;\n  // clang-format on\n}\n\nfunction renderFontRequest(request: Trace.Types.Events.SyntheticNetworkRequest): Lit.LitTemplate {\n  const linkifiedURL = linkifyURL(request.args.data.url as Platform.DevToolsPath.UrlString);\n\n  // clang-format off\n    return html`\n      <span class=\"culprit\">\n        <span class=\"culprit-type\">${i18nString(UIStrings.fontRequest)}: </span>\n        <span class=\"culprit-value\">${linkifiedURL}</span>\n      </span>`;\n  // clang-format on\n}\n\nfunction linkifyURL(url: Platform.DevToolsPath.UrlString): HTMLElement {\n  return LegacyComponents.Linkifier.Linkifier.linkifyURL(url, {\n    tabStop: true,\n    showColumnNumber: false,\n    inlineFrameIndex: 0,\n    maxLength: MAX_URL_LENGTH,\n  });\n}\n\nfunction renderIframe(iframeRootCause: Trace.Insights.Models.CLSCulprits.IframeRootCause): Lit.LitTemplate {\n  const domLoadingId = iframeRootCause.frame as Protocol.Page.FrameId;\n  const domLoadingFrame = SDK.FrameManager.FrameManager.instance().getFrame(domLoadingId);\n\n  let el;\n  if (domLoadingFrame) {\n    el = LegacyComponents.Linkifier.Linkifier.linkifyRevealable(domLoadingFrame, domLoadingFrame.displayName());\n  } else {\n    el = linkifyURL(iframeRootCause.url as Platform.DevToolsPath.UrlString);\n  }\n\n  // clang-format off\n    return html`\n      <span class=\"culprit\">\n        <span class=\"culprit-type\"> ${i18nString(UIStrings.injectedIframe)}: </span>\n        <span class=\"culprit-value\">${el}</span>\n      </span>`;\n  // clang-format on\n}\n"]}