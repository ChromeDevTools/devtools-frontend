{"version":3,"file":"NetworkRequestTooltip.js","sourceRoot":"","sources":["../../../../../../../front_end/panels/timeline/components/NetworkRequestTooltip.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright 2024 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n/* eslint-disable @devtools/no-lit-render-outside-of-view */\n\nimport '../../../ui/kit/kit.js';\n\nimport * as i18n from '../../../core/i18n/i18n.js';\nimport * as Platform from '../../../core/platform/platform.js';\nimport * as SDK from '../../../core/sdk/sdk.js';\nimport * as Trace from '../../../models/trace/trace.js';\nimport * as PerfUI from '../../../ui/legacy/components/perf_ui/perf_ui.js';\nimport * as Lit from '../../../ui/lit/lit.js';\nimport * as TimelineUtils from '../utils/utils.js';\n\nimport networkRequestTooltipStyles from './networkRequestTooltip.css.js';\nimport {colorForNetworkRequest, networkResourceCategory} from './Utils.js';\n\nconst {html, nothing, Directives: {classMap, ifDefined}} = Lit;\n\nconst MAX_URL_LENGTH = 60;\n\nconst UIStrings = {\n  /**\n   * @description Text that refers to the priority of network request\n   */\n  priority: 'Priority',\n  /**\n   * @description Text for the duration of a network request\n   */\n  duration: 'Duration',\n  /**\n   * @description Text that refers to the queueing and connecting time of a network request\n   */\n  queuingAndConnecting: 'Queuing and connecting',\n  /**\n   * @description Text that refers to the request sent and waiting time of a network request\n   */\n  requestSentAndWaiting: 'Request sent and waiting',\n  /**\n   * @description Text that refers to the content downloading time of a network request\n   */\n  contentDownloading: 'Content downloading',\n  /**\n   * @description Text that refers to the waiting on main thread time of a network request\n   */\n  waitingOnMainThread: 'Waiting on main thread',\n  /**\n   * @description Text that refers to a network request is render blocking\n   */\n  renderBlocking: 'Render blocking',\n  /**\n   * @description Text to refer to the list of redirects.\n   */\n  redirects: 'Redirects',\n  /**\n   * @description Cell title in Network Data Grid Node of the Network panel\n   * @example {Fast 4G} PH1\n   */\n  wasThrottled: 'Request was throttled ({PH1})',\n} as const;\nconst str_ = i18n.i18n.registerUIStrings('panels/timeline/components/NetworkRequestTooltip.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\n\nexport interface NetworkTooltipData {\n  networkRequest: Trace.Types.Events.SyntheticNetworkRequest|null;\n  entityMapper: Trace.EntityMapper.EntityMapper|null;\n}\n\nexport class NetworkRequestTooltip extends HTMLElement {\n  readonly #shadow = this.attachShadow({mode: 'open'});\n\n  #data: NetworkTooltipData = {networkRequest: null, entityMapper: null};\n\n  connectedCallback(): void {\n    this.#render();\n  }\n\n  set data(data: NetworkTooltipData) {\n    if (this.#data.networkRequest === data.networkRequest) {\n      return;\n    }\n    if (this.#data.entityMapper === data.entityMapper) {\n      return;\n    }\n    this.#data = {networkRequest: data.networkRequest, entityMapper: data.entityMapper};\n    this.#render();\n  }\n\n  static renderPriorityValue(networkRequest: Trace.Types.Events.SyntheticNetworkRequest): Lit.TemplateResult {\n    if (networkRequest.args.data.priority === networkRequest.args.data.initialPriority) {\n      return html`${PerfUI.NetworkPriorities.uiLabelForNetworkPriority(networkRequest.args.data.priority)}`;\n    }\n    return html`${PerfUI.NetworkPriorities.uiLabelForNetworkPriority(networkRequest.args.data.initialPriority)}\n        <devtools-icon name=\"arrow-forward\" class=\"priority\"></devtools-icon>\n        ${PerfUI.NetworkPriorities.uiLabelForNetworkPriority(networkRequest.args.data.priority)}`;\n  }\n\n  static renderTimings(networkRequest: Trace.Types.Events.SyntheticNetworkRequest): Lit.TemplateResult|null {\n    const syntheticData = networkRequest.args.data.syntheticData;\n    const queueing = (syntheticData.sendStartTime - networkRequest.ts) as Trace.Types.Timing.Micro;\n    const requestPlusWaiting = (syntheticData.downloadStart - syntheticData.sendStartTime) as Trace.Types.Timing.Micro;\n    const download = (syntheticData.finishTime - syntheticData.downloadStart) as Trace.Types.Timing.Micro;\n    const waitingOnMainThread =\n        (networkRequest.ts + networkRequest.dur - syntheticData.finishTime) as Trace.Types.Timing.Micro;\n\n    const color = colorForNetworkRequest(networkRequest);\n    const styleForWaiting = {\n      backgroundColor: `color-mix(in srgb, ${color}, hsla(0, 100%, 100%, 0.8))`,\n    };\n    const styleForDownloading = {\n      backgroundColor: color,\n    };\n\n    const sdkNetworkRequest = SDK.TraceObject.RevealableNetworkRequest.create(networkRequest);\n    const wasThrottled = sdkNetworkRequest &&\n        SDK.NetworkManager.MultitargetNetworkManager.instance().appliedRequestConditions(\n            sdkNetworkRequest.networkRequest);\n    const throttledTitle = wasThrottled ? i18nString(UIStrings.wasThrottled, {\n      PH1: typeof wasThrottled.conditions.title === 'string' ? wasThrottled.conditions.title :\n                                                               wasThrottled.conditions.title()\n    }) :\n                                          undefined;\n\n    // The outside spans are transparent with a border on the outside edge.\n    // The inside spans are 1px tall rectangles, vertically centered, with background color.\n    //                   |\n    //                   |----\n    //   whisker-left->  |  ^ horizontal\n    const leftWhisker = html`<span class=\"whisker-left\"> <span class=\"horizontal\"></span> </span>`;\n    const rightWhisker = html`<span class=\"whisker-right\"> <span class=\"horizontal\"></span> </span>`;\n\n    const classes = classMap({\n      ['timings-row timings-row--duration']: true,\n      throttled: Boolean(wasThrottled?.urlPattern),\n    });\n    return html`\n      <div\n        class=${classes}\n        title=${ifDefined(throttledTitle)}>\n        ${\n        wasThrottled?.urlPattern ? html`<devtools-icon\n          class=indicator\n          name=watch\n          ></devtools-icon>` :\n                                   html`<span class=\"indicator\"></span>`}\n        ${i18nString(UIStrings.duration)}\n         <span class=\"time\"> ${i18n.TimeUtilities.formatMicroSecondsTime(networkRequest.dur)} </span>\n      </div>\n      <div class=\"timings-row\">\n        ${leftWhisker}\n        ${i18nString(UIStrings.queuingAndConnecting)}\n        <span class=\"time\"> ${i18n.TimeUtilities.formatMicroSecondsTime(queueing)} </span>\n      </div>\n      <div class=\"timings-row\">\n        <span class=\"indicator\" style=${Lit.Directives.styleMap(styleForWaiting)}></span>\n        ${i18nString(UIStrings.requestSentAndWaiting)}\n        <span class=\"time\"> ${i18n.TimeUtilities.formatMicroSecondsTime(requestPlusWaiting)} </span>\n      </div>\n      <div class=\"timings-row\">\n        <span class=\"indicator\" style=${Lit.Directives.styleMap(styleForDownloading)}></span>\n        ${i18nString(UIStrings.contentDownloading)}\n        <span class=\"time\"> ${i18n.TimeUtilities.formatMicroSecondsTime(download)} </span>\n      </div>\n      <div class=\"timings-row\">\n        ${rightWhisker}\n        ${i18nString(UIStrings.waitingOnMainThread)}\n        <span class=\"time\"> ${i18n.TimeUtilities.formatMicroSecondsTime(waitingOnMainThread)} </span>\n      </div>\n    `;\n  }\n\n  static renderRedirects(networkRequest: Trace.Types.Events.SyntheticNetworkRequest): Lit.TemplateResult|null {\n    const redirectRows = [];\n    if (networkRequest.args.data.redirects.length > 0) {\n      redirectRows.push(html`\n        <div class=\"redirects-row\">\n          ${i18nString(UIStrings.redirects)}\n        </div>\n      `);\n      for (const redirect of networkRequest.args.data.redirects) {\n        redirectRows.push(html`<div class=\"redirects-row\"> ${redirect.url}</div>`);\n      }\n      return html`${redirectRows}`;\n    }\n\n    return null;\n  }\n\n  #render(): void {\n    if (!this.#data.networkRequest) {\n      return;\n    }\n    const chipStyle = {\n      backgroundColor: `${colorForNetworkRequest(this.#data.networkRequest)}`,\n    };\n    const url = new URL(this.#data.networkRequest.args.data.url);\n    const entity = (this.#data.entityMapper) ? this.#data.entityMapper.entityForEvent(this.#data.networkRequest) : null;\n    const originWithEntity = TimelineUtils.Helpers.formatOriginWithEntity(url, entity, true);\n\n    const redirectsHtml = NetworkRequestTooltip.renderRedirects(this.#data.networkRequest);\n\n    const sdkNetworkRequest = SDK.TraceObject.RevealableNetworkRequest.create(this.#data.networkRequest);\n    const wasThrottled = sdkNetworkRequest &&\n        SDK.NetworkManager.MultitargetNetworkManager.instance().appliedRequestConditions(\n            sdkNetworkRequest.networkRequest);\n\n    // clang-format off\n    const output = html`\n      <style>${networkRequestTooltipStyles}</style>\n      <div class=\"performance-card\">\n        <div class=\"url\">${Platform.StringUtilities.trimMiddle(url.href.replace(url.origin, ''), MAX_URL_LENGTH)}</div>\n        <div class=\"url url--host\">${originWithEntity}</div>\n\n        <div class=\"divider\"></div>\n        <div class=\"network-category\">\n          <span class=\"network-category-chip\" style=${Lit.Directives.styleMap(chipStyle)}>\n          </span>${networkResourceCategory(this.#data.networkRequest)}\n        </div>\n        <div class=\"priority-row\">${i18nString(UIStrings.priority)}: ${NetworkRequestTooltip.renderPriorityValue(this.#data.networkRequest)}</div>\n        ${wasThrottled ? html`\n        <div class=\"throttled-row\">\n          ${i18nString(UIStrings.wasThrottled, {\n            PH1: typeof wasThrottled.conditions.title === 'string' ? wasThrottled.conditions.title :\n              wasThrottled.conditions.title()\n          })}\n        </div>` : nothing}\n        ${Trace.Helpers.Network.isSyntheticNetworkRequestEventRenderBlocking(this.#data.networkRequest) ?\n          html`<div class=\"render-blocking\"> ${i18nString(UIStrings.renderBlocking)} </div>` :  Lit.nothing\n        }\n        <div class=\"divider\"></div>\n\n        ${NetworkRequestTooltip.renderTimings(this.#data.networkRequest)}\n\n        ${redirectsHtml ? html `\n          <div class=\"divider\"></div>\n          ${redirectsHtml}\n        ` : Lit.nothing}\n      </div>\n    `;\n    // clang-format on\n    Lit.render(output, this.#shadow, {host: this});\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    'devtools-performance-network-request-tooltip': NetworkRequestTooltip;\n  }\n}\n\ncustomElements.define('devtools-performance-network-request-tooltip', NetworkRequestTooltip);\n"]}