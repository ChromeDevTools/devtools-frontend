{"version":3,"file":"NetworkRequestTooltip.js","sourceRoot":"","sources":["../../../../../../../front_end/panels/timeline/components/NetworkRequestTooltip.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright 2024 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport '../../../ui/kit/kit.js';\n\nimport * as i18n from '../../../core/i18n/i18n.js';\nimport * as Platform from '../../../core/platform/platform.js';\nimport * as SDK from '../../../core/sdk/sdk.js';\nimport * as Trace from '../../../models/trace/trace.js';\nimport * as PerfUI from '../../../ui/legacy/components/perf_ui/perf_ui.js';\nimport * as UI from '../../../ui/legacy/legacy.js';\nimport * as Lit from '../../../ui/lit/lit.js';\nimport * as TimelineUtils from '../utils/utils.js';\n\nimport networkRequestTooltipStyles from './networkRequestTooltip.css.js';\nimport {colorForNetworkRequest, networkResourceCategory} from './Utils.js';\n\nconst {html, nothing, Directives: {classMap, ifDefined}} = Lit;\n\nconst MAX_URL_LENGTH = 60;\n\nconst UIStrings = {\n  /**\n   * @description Text that refers to the priority of network request\n   */\n  priority: 'Priority',\n  /**\n   * @description Text for the duration of a network request\n   */\n  duration: 'Duration',\n  /**\n   * @description Text that refers to the queueing and connecting time of a network request\n   */\n  queuingAndConnecting: 'Queuing and connecting',\n  /**\n   * @description Text that refers to the request sent and waiting time of a network request\n   */\n  requestSentAndWaiting: 'Request sent and waiting',\n  /**\n   * @description Text that refers to the content downloading time of a network request\n   */\n  contentDownloading: 'Content downloading',\n  /**\n   * @description Text that refers to the waiting on main thread time of a network request\n   */\n  waitingOnMainThread: 'Waiting on main thread',\n  /**\n   * @description Text that refers to a network request is render blocking\n   */\n  renderBlocking: 'Render blocking',\n  /**\n   * @description Text to refer to the list of redirects.\n   */\n  redirects: 'Redirects',\n  /**\n   * @description Cell title in Network Data Grid Node of the Network panel\n   * @example {Fast 4G} PH1\n   */\n  wasThrottled: 'Request was throttled ({PH1})',\n} as const;\n\nconst str_ = i18n.i18n.registerUIStrings('panels/timeline/components/NetworkRequestTooltip.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\n\ninterface ViewInput {\n  networkRequest: Trace.Types.Events.SyntheticNetworkRequest;\n  entityMapper?: Trace.EntityMapper.EntityMapper;\n  throttlingTitle?: string;\n}\n\ntype View = (input: ViewInput, output: undefined, target: HTMLElement) => void;\n\nexport const DEFAULT_VIEW: View = (input, output, target) => {\n  const {\n    networkRequest,\n    entityMapper,\n    throttlingTitle,\n  } = input;\n\n  const chipStyle = {\n    backgroundColor: `${colorForNetworkRequest(networkRequest)}`,\n  };\n  const url = new URL(networkRequest.args.data.url);\n  const entity = entityMapper ? entityMapper.entityForEvent(networkRequest) : null;\n  const originWithEntity = TimelineUtils.Helpers.formatOriginWithEntity(url, entity, true);\n\n  const redirectsHtml = NetworkRequestTooltip.renderRedirects(networkRequest);\n\n  // clang-format off\n  Lit.render(html`\n    <style>${networkRequestTooltipStyles}</style>\n    <div class=\"performance-card\">\n      <div class=\"url\">${Platform.StringUtilities.trimMiddle(url.href.replace(url.origin, ''), MAX_URL_LENGTH)}</div>\n      <div class=\"url url--host\">${originWithEntity}</div>\n\n      <div class=\"divider\"></div>\n      <div class=\"network-category\">\n        <span class=\"network-category-chip\" style=${Lit.Directives.styleMap(chipStyle)}>\n        </span>${networkResourceCategory(networkRequest)}\n      </div>\n      <div class=\"priority-row\">${i18nString(UIStrings.priority)}: ${NetworkRequestTooltip.renderPriorityValue(networkRequest)}</div>\n      ${throttlingTitle ? html`\n        <div class=\"throttled-row\">\n          ${i18nString(UIStrings.wasThrottled, {PH1: throttlingTitle})}\n        </div>` : nothing}\n      ${Trace.Helpers.Network.isSyntheticNetworkRequestEventRenderBlocking(networkRequest) ?\n        html`<div class=\"render-blocking\"> ${i18nString(UIStrings.renderBlocking)} </div>` :  Lit.nothing\n      }\n      <div class=\"divider\"></div>\n\n      ${NetworkRequestTooltip.renderTimings(networkRequest)}\n\n      ${redirectsHtml ? html `\n        <div class=\"divider\"></div>\n        ${redirectsHtml}\n      ` : Lit.nothing}\n    </div>\n  `, target);\n  // clang-format on\n};\n\nexport class NetworkRequestTooltip extends UI.Widget.Widget {\n  static createWidgetElement(\n      request: Trace.Types.Events.SyntheticNetworkRequest,\n      entityMapper?: Trace.EntityMapper.EntityMapper): UI.Widget.WidgetElement<NetworkRequestTooltip> {\n    const widgetElement = document.createElement('devtools-widget') as UI.Widget.WidgetElement<NetworkRequestTooltip>;\n    widgetElement.widgetConfig = UI.Widget.widgetConfig(NetworkRequestTooltip, {\n      networkRequest: request,\n      entityMapper,\n    });\n    return widgetElement;\n  }\n\n  #view: View;\n  #networkRequest?: Trace.Types.Events.SyntheticNetworkRequest;\n  #entityMapper?: Trace.EntityMapper.EntityMapper;\n\n  constructor(element?: HTMLElement, view: View = DEFAULT_VIEW) {\n    super(element, {useShadowDom: true});\n    this.#view = view;\n  }\n\n  set networkRequest(networkRequest: Trace.Types.Events.SyntheticNetworkRequest) {\n    this.#networkRequest = networkRequest;\n    this.requestUpdate();\n  }\n\n  set entityMapper(entityMapper: Trace.EntityMapper.EntityMapper|undefined) {\n    this.#entityMapper = entityMapper;\n    this.requestUpdate();\n  }\n\n  static renderPriorityValue(networkRequest: Trace.Types.Events.SyntheticNetworkRequest): Lit.TemplateResult {\n    if (networkRequest.args.data.priority === networkRequest.args.data.initialPriority) {\n      return html`${PerfUI.NetworkPriorities.uiLabelForNetworkPriority(networkRequest.args.data.priority)}`;\n    }\n    return html`${PerfUI.NetworkPriorities.uiLabelForNetworkPriority(networkRequest.args.data.initialPriority)}\n        <devtools-icon name=\"arrow-forward\" class=\"priority\"></devtools-icon>\n        ${PerfUI.NetworkPriorities.uiLabelForNetworkPriority(networkRequest.args.data.priority)}`;\n  }\n\n  static renderTimings(networkRequest: Trace.Types.Events.SyntheticNetworkRequest): Lit.TemplateResult|null {\n    const syntheticData = networkRequest.args.data.syntheticData;\n    const queueing = (syntheticData.sendStartTime - networkRequest.ts) as Trace.Types.Timing.Micro;\n    const requestPlusWaiting = (syntheticData.downloadStart - syntheticData.sendStartTime) as Trace.Types.Timing.Micro;\n    const download = (syntheticData.finishTime - syntheticData.downloadStart) as Trace.Types.Timing.Micro;\n    const waitingOnMainThread =\n        (networkRequest.ts + networkRequest.dur - syntheticData.finishTime) as Trace.Types.Timing.Micro;\n\n    const color = colorForNetworkRequest(networkRequest);\n    const styleForWaiting = {\n      backgroundColor: `color-mix(in srgb, ${color}, hsla(0, 100%, 100%, 0.8))`,\n    };\n    const styleForDownloading = {\n      backgroundColor: color,\n    };\n\n    const sdkNetworkRequest = SDK.TraceObject.RevealableNetworkRequest.create(networkRequest);\n    const wasThrottled = sdkNetworkRequest &&\n        SDK.NetworkManager.MultitargetNetworkManager.instance().appliedRequestConditions(\n            sdkNetworkRequest.networkRequest);\n    const throttledTitle = wasThrottled ? i18nString(UIStrings.wasThrottled, {\n      PH1: typeof wasThrottled.conditions.title === 'string' ? wasThrottled.conditions.title :\n                                                               wasThrottled.conditions.title()\n    }) :\n                                          undefined;\n\n    // The outside spans are transparent with a border on the outside edge.\n    // The inside spans are 1px tall rectangles, vertically centered, with background color.\n    //                   |\n    //                   |----\n    //   whisker-left->  |  ^ horizontal\n    const leftWhisker = html`<span class=\"whisker-left\"> <span class=\"horizontal\"></span> </span>`;\n    const rightWhisker = html`<span class=\"whisker-right\"> <span class=\"horizontal\"></span> </span>`;\n\n    const classes = classMap({\n      ['timings-row timings-row--duration']: true,\n      throttled: Boolean(wasThrottled?.urlPattern),\n    });\n    return html`\n      <div\n        class=${classes}\n        title=${ifDefined(throttledTitle)}>\n        ${\n        wasThrottled?.urlPattern ? html`<devtools-icon\n          class=indicator\n          name=watch\n          ></devtools-icon>` :\n                                   html`<span class=\"indicator\"></span>`}\n        ${i18nString(UIStrings.duration)}\n         <span class=\"time\"> ${i18n.TimeUtilities.formatMicroSecondsTime(networkRequest.dur)} </span>\n      </div>\n      <div class=\"timings-row\">\n        ${leftWhisker}\n        ${i18nString(UIStrings.queuingAndConnecting)}\n        <span class=\"time\"> ${i18n.TimeUtilities.formatMicroSecondsTime(queueing)} </span>\n      </div>\n      <div class=\"timings-row\">\n        <span class=\"indicator\" style=${Lit.Directives.styleMap(styleForWaiting)}></span>\n        ${i18nString(UIStrings.requestSentAndWaiting)}\n        <span class=\"time\"> ${i18n.TimeUtilities.formatMicroSecondsTime(requestPlusWaiting)} </span>\n      </div>\n      <div class=\"timings-row\">\n        <span class=\"indicator\" style=${Lit.Directives.styleMap(styleForDownloading)}></span>\n        ${i18nString(UIStrings.contentDownloading)}\n        <span class=\"time\"> ${i18n.TimeUtilities.formatMicroSecondsTime(download)} </span>\n      </div>\n      <div class=\"timings-row\">\n        ${rightWhisker}\n        ${i18nString(UIStrings.waitingOnMainThread)}\n        <span class=\"time\"> ${i18n.TimeUtilities.formatMicroSecondsTime(waitingOnMainThread)} </span>\n      </div>\n    `;\n  }\n\n  static renderRedirects(networkRequest: Trace.Types.Events.SyntheticNetworkRequest): Lit.TemplateResult|null {\n    const redirectRows = [];\n    if (networkRequest.args.data.redirects.length > 0) {\n      redirectRows.push(html`\n        <div class=\"redirects-row\">\n          ${i18nString(UIStrings.redirects)}\n        </div>\n      `);\n      for (const redirect of networkRequest.args.data.redirects) {\n        redirectRows.push(html`<div class=\"redirects-row\"> ${redirect.url}</div>`);\n      }\n      return html`${redirectRows}`;\n    }\n\n    return null;\n  }\n\n  override performUpdate(): void {\n    if (!this.#networkRequest) {\n      return;\n    }\n\n    // TODO(crbug.com/466124088): Seems broken.\n    const sdkNetworkRequest = SDK.TraceObject.RevealableNetworkRequest.create(this.#networkRequest);\n    const networkConditions = sdkNetworkRequest &&\n        SDK.NetworkManager.MultitargetNetworkManager.instance().appliedRequestConditions(\n            sdkNetworkRequest.networkRequest);\n    let throttlingTitle: string|undefined = undefined;\n    if (networkConditions) {\n      throttlingTitle = typeof networkConditions.conditions.title === 'string' ? networkConditions.conditions.title :\n                                                                                 networkConditions.conditions.title();\n    }\n\n    const input: ViewInput = {\n      networkRequest: this.#networkRequest,\n      entityMapper: this.#entityMapper,\n      throttlingTitle,\n    };\n    this.#view(input, undefined, this.contentElement);\n  }\n}\n"]}