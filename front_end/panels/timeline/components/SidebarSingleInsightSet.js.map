{"version":3,"file":"SidebarSingleInsightSet.js","sourceRoot":"","sources":["../../../../../../../front_end/panels/timeline/components/SidebarSingleInsightSet.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright 2024 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as i18n from '../../../core/i18n/i18n.js';\nimport * as Platform from '../../../core/platform/platform.js';\nimport * as AIAssistance from '../../../models/ai_assistance/ai_assistance.js';\nimport * as CrUXManager from '../../../models/crux-manager/crux-manager.js';\nimport * as Trace from '../../../models/trace/trace.js';\nimport * as Buttons from '../../../ui/components/buttons/buttons.js';\nimport * as UI from '../../../ui/legacy/legacy.js';\nimport * as Lit from '../../../ui/lit/lit.js';\nimport * as VisualLogging from '../../../ui/visual_logging/visual_logging.js';\n\nimport {md, shouldRenderForCategory} from './insights/Helpers.js';\nimport * as Insights from './insights/insights.js';\nimport type {ActiveInsight} from './Sidebar.js';\nimport sidebarSingleInsightSetStyles from './sidebarSingleInsightSet.css.js';\nimport {isFieldWorseThanLocal, NumberWithUnit} from './Utils.js';\n\nconst {html} = Lit.StaticHtml;\n\nconst UIStrings = {\n  /**\n   * @description title used for a metric value to tell the user about its score classification\n   * @example {INP} PH1\n   * @example {1.2s} PH2\n   * @example {poor} PH3\n   */\n  metricScore: '{PH1}: {PH2} {PH3} score',\n  /**\n   * @description title used for a metric value to tell the user that the data is unavailable\n   * @example {INP} PH1\n   */\n  metricScoreUnavailable: '{PH1}: unavailable',\n  /**\n   * @description Summary text for an expandable dropdown that contains all insights in a passing state.\n   * @example {4} PH1\n   */\n  passedInsights: 'Passed insights ({PH1})',\n  /**\n   * @description Label denoting that metrics were observed in the field, from real use data (CrUX). Also denotes if from URL or Origin dataset.\n   * @example {URL} PH1\n   */\n  fieldScoreLabel: 'Field ({PH1})',\n  /**\n   * @description Label for an option that selects the page's specific URL as opposed to it's entire origin/domain.\n   */\n  urlOption: 'URL',\n  /**\n   * @description Label for an option that selects the page's entire origin/domain as opposed to it's specific URL.\n   */\n  originOption: 'Origin',\n  /**\n   * @description Title for button that closes a warning popup.\n   */\n  dismissTitle: 'Dismiss',\n  /**\n   * @description Title shown in a warning dialog when field metrics (collected from real users) is worse than the locally observed metrics.\n   */\n  fieldMismatchTitle: 'Field & local metrics mismatch',\n  /**\n   * @description Text shown in a warning dialog when field metrics (collected from real users) is worse than the locally observed metrics.\n   * Asks user to use features such as throttling and device emulation.\n   */\n  fieldMismatchNotice:\n      'There are many reasons why local and field metrics [may not match](https://web.dev/articles/lab-and-field-data-differences). ' +\n      'Adjust [throttling settings and device emulation](https://developer.chrome.com/docs/devtools/device-mode) to analyze traces more similar to the average user\\'s environment.',\n} as const;\n\nconst str_ = i18n.i18n.registerUIStrings('panels/timeline/components/SidebarSingleInsightSet.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\n\nexport interface SidebarSingleInsightSetData {\n  insightSetKey: Trace.Types.Events.NavigationId|null;\n  activeCategory: Trace.Insights.Types.InsightCategory;\n  activeInsight: ActiveInsight|null;\n  parsedTrace: Trace.TraceModel.ParsedTrace|null;\n}\n\ninterface InsightData {\n  insightName: string;\n  model: Trace.Insights.Types.InsightModel;\n}\n\ninterface LocalMetrics {\n  lcp: {value: Trace.Types.Timing.Micro, event: Trace.Types.Events.LargestContentfulPaintCandidate}|null;\n  cls: {value: number, worstClusterEvent: Trace.Types.Events.Event|null};\n  inp: {value: Trace.Types.Timing.Micro, event: Trace.Types.Events.SyntheticInteractionPair}|null;\n}\n\ninterface ViewInput {\n  shownInsights: InsightData[];\n  passedInsights: InsightData[];\n  local: LocalMetrics|null;\n  field: Trace.Insights.Common.CrUXFieldMetricResults|null;\n  activeCategory: Trace.Insights.Types.InsightCategory;\n  showFieldMismatchNotice: boolean;\n  onDismisFieldMismatchNotice: () => void;\n  onClickMetric: (traceEvent: Trace.Types.Events.Event) => void;\n  renderInsightComponent: (insightData: InsightData) => Lit.LitTemplate;\n}\n\ntype View = (input: ViewInput, output: undefined, target: HTMLElement) => void;\n\nexport const DEFAULT_VIEW: View = (input, output, target) => {\n  const {\n    shownInsights,\n    passedInsights,\n    local,\n    field,\n    activeCategory,\n    showFieldMismatchNotice,\n    onDismisFieldMismatchNotice,\n    onClickMetric,\n    renderInsightComponent,\n  } = input;\n\n  function renderMetrics(): Lit.TemplateResult {\n    const lcpEl = renderMetricValue('LCP', local?.lcp?.value ?? null, local?.lcp?.event ?? null);\n    const inpEl = renderMetricValue('INP', local?.inp?.value ?? null, local?.inp?.event ?? null);\n    const clsEl = renderMetricValue('CLS', local?.cls?.value ?? null, local?.cls?.worstClusterEvent ?? null);\n\n    const localMetricsTemplateResult = html`\n      <div class=\"metrics-row\">\n        <span>${lcpEl}</span>\n        <span>${inpEl}</span>\n        <span>${clsEl}</span>\n        <span class=\"row-label\">Local</span>\n      </div>\n      <span class=\"row-border\"></span>\n    `;\n\n    let fieldMetricsTemplateResult;\n    if (field) {\n      const {lcp, inp, cls} = field;\n\n      const lcpEl = renderMetricValue('LCP', lcp?.value ?? null, null);\n      const inpEl = renderMetricValue('INP', inp?.value ?? null, null);\n      const clsEl = renderMetricValue('CLS', cls?.value ?? null, null);\n\n      let scope = i18nString(UIStrings.originOption);\n      if (lcp?.pageScope === 'url' || inp?.pageScope === 'url') {\n        scope = i18nString(UIStrings.urlOption);\n      }\n\n      // clang-format off\n      fieldMetricsTemplateResult = html`\n        <div class=\"metrics-row\">\n          <span>${lcpEl}</span>\n          <span>${inpEl}</span>\n          <span>${clsEl}</span>\n          <span class=\"row-label\">${i18nString(UIStrings.fieldScoreLabel, {PH1: scope})}</span>\n        </div>\n        <span class=\"row-border\"></span>\n      `;\n      // clang-format on\n    }\n\n    let fieldIsDifferentEl;\n    if (showFieldMismatchNotice) {\n      // clang-format off\n      fieldIsDifferentEl = html`\n        <div class=\"field-mismatch-notice\" jslog=${VisualLogging.section('timeline.insights.field-mismatch')}>\n          <h3>${i18nString(UIStrings.fieldMismatchTitle)}</h3>\n          <devtools-button\n            title=${i18nString(UIStrings.dismissTitle)}\n            .iconName=${'cross'}\n            .variant=${Buttons.Button.Variant.ICON}\n            .jslogContext=${'timeline.insights.dismiss-field-mismatch'}\n            @click=${onDismisFieldMismatchNotice}\n          ></devtools-button>\n          <div class=\"field-mismatch-notice__body\">${md(i18nString(UIStrings.fieldMismatchNotice))}</div>\n        </div>\n      `;\n      // clang-format on\n    }\n\n    const classes = {metrics: true, 'metrics--field': Boolean(fieldMetricsTemplateResult)};\n    const metricsTableEl = html`<div class=${Lit.Directives.classMap(classes)}>\n      <div class=\"metrics-row\">\n        <span class=\"metric-label\">LCP</span>\n        <span class=\"metric-label\">INP</span>\n        <span class=\"metric-label\">CLS</span>\n        <span class=\"row-label\"></span>\n      </div>\n      ${localMetricsTemplateResult}\n      ${fieldMetricsTemplateResult}\n    </div>`;\n\n    return html`\n      ${metricsTableEl}\n      ${fieldIsDifferentEl}\n    `;\n  }\n\n  function renderMetricValue(\n      metric: 'LCP'|'CLS'|'INP', value: number|null, relevantEvent: Trace.Types.Events.Event|null): Lit.LitTemplate {\n    let valueText: string;\n    let valueDisplay: HTMLElement|string;\n    let classification;\n    if (value === null) {\n      valueText = valueDisplay = '-';\n      classification = Trace.Handlers.ModelHandlers.PageLoadMetrics.ScoreClassification.UNCLASSIFIED;\n    } else if (metric === 'LCP') {\n      const micros = value as Trace.Types.Timing.Micro;\n      const {text, element} = NumberWithUnit.formatMicroSecondsAsSeconds(micros);\n      valueText = text;\n      valueDisplay = element;\n      classification =\n          Trace.Handlers.ModelHandlers.PageLoadMetrics.scoreClassificationForLargestContentfulPaint(micros);\n    } else if (metric === 'CLS') {\n      valueText = valueDisplay = value ? value.toFixed(2) : '0';\n      classification = Trace.Handlers.ModelHandlers.LayoutShifts.scoreClassificationForLayoutShift(value);\n    } else if (metric === 'INP') {\n      const micros = value as Trace.Types.Timing.Micro;\n      const {text, element} = NumberWithUnit.formatMicroSecondsAsMillisFixed(micros);\n      valueText = text;\n      valueDisplay = element;\n      classification =\n          Trace.Handlers.ModelHandlers.UserInteractions.scoreClassificationForInteractionToNextPaint(micros);\n    } else {\n      Platform.TypeScriptUtilities.assertNever(metric, `Unexpected metric ${metric}`);\n    }\n\n    // NOTE: it is deliberate to use the same value for the title and\n    // aria-label; the aria-label is used to give more context to\n    // screen-readers, and the title is to aid users who may not know what\n    // the red/orange/green classification is, or those who are unable to\n    // easily distinguish the visual colour differences.\n    // clang-format off\n    const title = value !== null ?\n      i18nString(UIStrings.metricScore, {PH1: metric, PH2: valueText, PH3: classification}) :\n      i18nString(UIStrings.metricScoreUnavailable, {PH1: metric});\n\n    return metricIsVisible(activeCategory, metric) ? html`\n      <button class=\"metric\"\n        @click=${relevantEvent ? onClickMetric.bind(relevantEvent) : null}\n        title=${title}\n        aria-label=${title}\n      >\n        <div class=\"metric-value metric-value-${classification}\">${valueDisplay}</div>\n      </button>\n    ` : Lit.nothing;\n    // clang-format on\n  }\n\n  function renderInsights(): Lit.LitTemplate {\n    const shownInsightTemplates = shownInsights.map(renderInsightComponent);\n    const passedInsightsTemplates = passedInsights.map(renderInsightComponent);\n\n    // clang-format off\n    return html`\n      ${shownInsightTemplates}\n      ${passedInsightsTemplates.length ? html`\n        <details class=\"passed-insights-section\">\n          <summary>${i18nString(UIStrings.passedInsights, {\n            PH1: passedInsightsTemplates.length,\n          })}</summary>\n          ${passedInsightsTemplates}\n        </details>\n      ` : Lit.nothing}\n    `;\n    // clang-format on\n  }\n\n  // clang-format off\n  Lit.render(html`\n    <style>${sidebarSingleInsightSetStyles}</style>\n    <div class=\"navigation\">\n      ${renderMetrics()}\n      ${renderInsights()}\n    </div>\n  `, target);\n  // clang-format on\n};\n\nfunction metricIsVisible(activeCategory: Trace.Insights.Types.InsightCategory, label: 'LCP'|'CLS'|'INP'): boolean {\n  if (activeCategory === Trace.Insights.Types.InsightCategory.ALL) {\n    return true;\n  }\n\n  return label === activeCategory;\n}\n\nexport class SidebarSingleInsightSet extends UI.Widget.Widget {\n  #view: View;\n  #insightRenderer = new Insights.InsightRenderer.InsightRenderer();\n  #activeInsightElement: HTMLElement|null = null;\n  #activeHighlightTimeout = -1;\n\n  #data: SidebarSingleInsightSetData = {\n    insightSetKey: null,\n    activeCategory: Trace.Insights.Types.InsightCategory.ALL,\n    activeInsight: null,\n    parsedTrace: null,\n  };\n\n  #didDismissFieldMismatchNotice = false;\n\n  constructor(element?: HTMLElement, view: View = DEFAULT_VIEW) {\n    super(element, {useShadowDom: true});\n    this.#view = view;\n  }\n\n  set data(data: SidebarSingleInsightSetData) {\n    this.#data = data;\n    this.requestUpdate();\n  }\n\n  override willHide(): void {\n    super.willHide();\n    window.clearTimeout(this.#activeHighlightTimeout);\n  }\n\n  highlightActiveInsight(): void {\n    if (!this.#activeInsightElement) {\n      return;\n    }\n\n    // First clear any existing highlight that is going on.\n    this.#activeInsightElement.removeAttribute('highlight-insight');\n    window.clearTimeout(this.#activeHighlightTimeout);\n\n    requestAnimationFrame(() => {\n      this.#activeInsightElement?.setAttribute('highlight-insight', 'true');\n      this.#activeHighlightTimeout = window.setTimeout(() => {\n        this.#activeInsightElement?.removeAttribute('highlight-insight');\n      }, 2_000);\n    });\n  }\n\n  #onClickMetric(traceEvent: Trace.Types.Events.Event): void {\n    this.element.dispatchEvent(new Insights.EventRef.EventReferenceClick(traceEvent));\n  }\n\n  #getLocalMetrics(insightSetKey: string): LocalMetrics|null {\n    if (!this.#data.parsedTrace) {\n      return null;\n    }\n\n    const insightSet = this.#data.parsedTrace.insights?.get(insightSetKey);\n    if (!insightSet) {\n      return null;\n    }\n\n    const lcp = Trace.Insights.Common.getLCP(insightSet);\n    const cls = Trace.Insights.Common.getCLS(insightSet);\n    const inp = Trace.Insights.Common.getINP(insightSet);\n\n    return {lcp, cls, inp};\n  }\n\n  #getFieldMetrics(insightSetKey: string): Trace.Insights.Common.CrUXFieldMetricResults|null {\n    if (!this.#data.parsedTrace) {\n      return null;\n    }\n\n    const insightSet = this.#data.parsedTrace.insights?.get(insightSetKey);\n    if (!insightSet) {\n      return null;\n    }\n\n    const fieldMetricsResults = Trace.Insights.Common.getFieldMetricsForInsightSet(\n        insightSet, this.#data.parsedTrace.metadata, CrUXManager.CrUXManager.instance().getSelectedScope());\n    if (!fieldMetricsResults) {\n      return null;\n    }\n\n    return fieldMetricsResults;\n  }\n\n  #onDismisFieldMismatchNotice(): void {\n    this.#didDismissFieldMismatchNotice = true;\n    this.requestUpdate();\n  }\n\n  static categorizeInsights(\n      insightSets: Trace.Insights.Types.TraceInsightSets|null,\n      insightSetKey: string,\n      activeCategory: Trace.Insights.Types.InsightCategory,\n      ): {shownInsights: InsightData[], passedInsights: InsightData[]} {\n    const insightSet = insightSets?.get(insightSetKey);\n    if (!insightSet) {\n      return {shownInsights: [], passedInsights: []};\n    }\n\n    const shownInsights: InsightData[] = [];\n    const passedInsights: InsightData[] = [];\n\n    for (const [insightName, model] of Object.entries(insightSet.model)) {\n      if (!model || !shouldRenderForCategory({activeCategory, insightCategory: model.category})) {\n        continue;\n      }\n\n      if (model.state === 'pass') {\n        passedInsights.push({insightName, model});\n      } else {\n        shownInsights.push({insightName, model});\n      }\n    }\n    return {shownInsights, passedInsights};\n  }\n\n  #renderInsightComponent(\n      insightSet: Trace.Insights.Types.InsightSet, insightData: InsightData,\n      fieldMetrics: Trace.Insights.Common.CrUXFieldMetricResults|null): Lit.LitTemplate {\n    if (!this.#data.parsedTrace) {\n      return Lit.nothing;\n    }\n\n    const {insightName, model} = insightData;\n    const activeInsight = this.#data.activeInsight;\n    const agentFocus = AIAssistance.AIContext.AgentFocus.fromInsight(this.#data.parsedTrace, model);\n\n    const widgetElement =\n        this.#insightRenderer.renderInsightToWidgetElement(this.#data.parsedTrace, insightSet, model, insightName, {\n          selected: activeInsight?.model === model,\n          agentFocus,\n          fieldMetrics,\n        });\n\n    if (activeInsight?.model === model) {\n      this.#activeInsightElement = widgetElement;\n    }\n\n    return html`${widgetElement}`;\n  }\n\n  override performUpdate(): void {\n    const {\n      parsedTrace,\n      insightSetKey,\n    } = this.#data;\n\n    if (!parsedTrace?.insights || !insightSetKey) {\n      return;\n    }\n\n    const insightSet = parsedTrace.insights.get(insightSetKey);\n    if (!insightSet) {\n      return;\n    }\n\n    const local = this.#getLocalMetrics(insightSetKey);\n    const field = this.#getFieldMetrics(insightSetKey);\n    const {shownInsights, passedInsights} = SidebarSingleInsightSet.categorizeInsights(\n        parsedTrace.insights,\n        insightSetKey,\n        this.#data.activeCategory,\n    );\n\n    const localValues = {\n      lcp: local?.lcp?.value !== undefined ? Trace.Helpers.Timing.microToMilli(local?.lcp.value) : undefined,\n      inp: local?.inp?.value !== undefined ? Trace.Helpers.Timing.microToMilli(local?.inp.value) : undefined,\n    };\n    const fieldValues = field && {\n      lcp: field.lcp?.value !== undefined ? Trace.Helpers.Timing.microToMilli(field.lcp.value) : undefined,\n      inp: field.inp?.value !== undefined ? Trace.Helpers.Timing.microToMilli(field.inp.value) : undefined,\n    };\n    const showFieldMismatchNotice =\n        !this.#didDismissFieldMismatchNotice && !!fieldValues && isFieldWorseThanLocal(localValues, fieldValues);\n\n    const input: ViewInput = {\n      shownInsights,\n      passedInsights,\n      local,\n      field,\n      activeCategory: this.#data.activeCategory,\n      showFieldMismatchNotice,\n      onDismisFieldMismatchNotice: this.#onDismisFieldMismatchNotice.bind(this),\n      onClickMetric: this.#onClickMetric.bind(this),\n      renderInsightComponent: insightData => this.#renderInsightComponent(insightSet, insightData, field),\n    };\n    this.#view(input, undefined, this.contentElement);\n  }\n}\n"]}