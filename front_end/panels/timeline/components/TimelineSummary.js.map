{"version":3,"file":"TimelineSummary.js","sourceRoot":"","sources":["../../../../../../../front_end/panels/timeline/components/TimelineSummary.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright 2024 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as i18n from '../../../core/i18n/i18n.js';\nimport * as Buttons from '../../../ui/components/buttons/buttons.js';\nimport * as UI from '../../../ui/legacy/legacy.js';\nimport * as Lit from '../../../ui/lit/lit.js';\n\nimport timelineSummaryStyles from './timelineSummary.css.js';\n\nconst {render, html} = Lit;\n\nconst UIStrings = {\n  /**\n   * @description Text for total\n   */\n  total: 'Total',\n  /**\n   * @description Range in Timeline Details View's Summary\n   * @example {1ms} PH1\n   * @example {10ms} PH2\n   */\n  rangeSS: 'Range:  {PH1} â€“ {PH2}',\n} as const;\nconst str_ = i18n.i18n.registerUIStrings('panels/timeline/components/TimelineSummary.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\n\nexport interface CategoryData {\n  value: number;\n  color: string;\n  title: string;\n}\n\ninterface ViewInput {\n  rangeStart: number;\n  rangeEnd: number;\n  total: number;\n  categories: CategoryData[];\n}\n\ntype View = (input: ViewInput, output: undefined, target: HTMLElement) => void;\n\nexport const CATEGORY_SUMMARY_DEFAULT_VIEW: View = (input, _output, target): void => {\n  // clang-format off\n  render(html`\n        <style>${timelineSummaryStyles}</style>\n        <style>@scope to (devtools-widget > *) { ${UI.inspectorCommonStyles} }</style>\n        <style>@scope to (devtools-widget > *) { ${Buttons.textButtonStyles} }</style>\n        <div class=\"timeline-summary\">\n            <div class=\"summary-range\">${i18nString(UIStrings.rangeSS, {PH1: i18n.TimeUtilities.millisToString(input.rangeStart), PH2: i18n.TimeUtilities.millisToString(input.rangeEnd)})}</div>\n            <div class=\"category-summary\">\n                ${input.categories.map(category => {\n                    return html`\n                        <div class=\"category-row\">\n                        <div class=\"category-swatch\" style=\"background-color: ${category.color};\"></div>\n                        <div class=\"category-name\">${category.title}</div>\n                        <div class=\"category-value\">\n                            ${i18n.TimeUtilities.preciseMillisToString(category.value)}\n                            <div class=\"background-bar-container\">\n                                <div class=\"background-bar\" style='width: ${(category.value * 100 / input.total).toFixed(1)}%;'></div>\n                            </div>\n                        </div>\n                        </div>`;\n                })}\n                <div class=\"category-row\">\n                    <div class=\"category-swatch\"></div>\n                    <div class=\"category-name\">${i18nString(UIStrings.total)}</div>\n                    <div class=\"category-value\">\n                        ${i18n.TimeUtilities.preciseMillisToString(input.total)}\n                        <div class=\"background-bar-container\">\n                            <div class=\"background-bar\"></div>\n                        </div>\n                    </div>\n                </div>\n              </div>\n        </div>\n        </div>\n\n      </div>`, target);\n  // clang-format on\n};\n\nexport class CategorySummary extends UI.Widget.Widget {\n  #view: View;\n\n  #rangeStart = 0;\n  #rangeEnd = 0;\n  #total = 0;\n  #categories: CategoryData[] = [];\n\n  constructor(view?: View) {\n    super();\n    this.#view = view ?? CATEGORY_SUMMARY_DEFAULT_VIEW;\n    this.requestUpdate();\n  }\n\n  set total(total: number) {\n    this.#total = total;\n    this.requestUpdate();\n  }\n\n  set rangeStart(rangeStart: number) {\n    this.#rangeStart = rangeStart;\n    this.requestUpdate();\n  }\n\n  set rangeEnd(rangeEnd: number) {\n    this.#rangeEnd = rangeEnd;\n    this.requestUpdate();\n  }\n\n  set categories(categories: CategoryData[]) {\n    this.#categories = categories;\n    this.requestUpdate();\n  }\n\n  override performUpdate(): void {\n    const viewInput: ViewInput = {\n      rangeStart: this.#rangeStart,\n      rangeEnd: this.#rangeEnd,\n      total: this.#total,\n      categories: this.#categories,\n    };\n    this.#view(viewInput, undefined, this.contentElement);\n  }\n}\n"]}