{"version":3,"file":"BaseInsightComponent.js","sourceRoot":"","sources":["../../../../../../../../front_end/panels/timeline/components/insights/BaseInsightComponent.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright 2024 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport '../../../../ui/components/markdown_view/markdown_view.js';\n\nimport * as i18n from '../../../../core/i18n/i18n.js';\nimport * as Root from '../../../../core/root/root.js';\nimport * as AIAssistance from '../../../../models/ai_assistance/ai_assistance.js';\nimport * as Badges from '../../../../models/badges/badges.js';\nimport * as GreenDev from '../../../../models/greendev/greendev.js';\nimport type {InsightModel} from '../../../../models/trace/insights/types.js';\nimport type * as Trace from '../../../../models/trace/trace.js';\nimport * as Buttons from '../../../../ui/components/buttons/buttons.js';\nimport * as UI from '../../../../ui/legacy/legacy.js';\nimport * as Lit from '../../../../ui/lit/lit.js';\nimport * as VisualLogging from '../../../../ui/visual_logging/visual_logging.js';\nimport type * as Overlays from '../../overlays/overlays.js';\n\nimport baseInsightComponentStyles from './baseInsightComponent.css.js';\nimport {md} from './Helpers.js';\nimport * as SidebarInsight from './SidebarInsight.js';\nimport type {TableState} from './Table.js';\n\nconst {html} = Lit;\n\nconst UIStrings = {\n  /**\n   * @description Text to tell the user the estimated time or size savings for this insight. \"&\" means \"and\" - space is limited to prefer abbreviated terms if possible. Text will still fit if not short, it just won't look very good, so using no abbreviations is fine if necessary.\n   * @example {401 ms} PH1\n   * @example {112 kB} PH1\n   */\n  estimatedSavings: 'Est savings: {PH1}',\n  /**\n   * @description Text to tell the user the estimated time and size savings for this insight. \"&\" means \"and\", \"Est\" means \"Estimated\" - space is limited to prefer abbreviated terms if possible. Text will still fit if not short, it just won't look very good, so using no abbreviations is fine if necessary.\n   * @example {401 ms} PH1\n   * @example {112 kB} PH2\n   */\n  estimatedSavingsTimingAndBytes: 'Est savings: {PH1} & {PH2}',\n  /**\n   * @description Text to tell the user the estimated time savings for this insight that is used for screen readers.\n   * @example {401 ms} PH1\n   * @example {112 kB} PH1\n   */\n  estimatedSavingsAriaTiming: 'Estimated savings for this insight: {PH1}',\n  /**\n   * @description Text to tell the user the estimated size savings for this insight that is used for screen readers. Value is in terms of \"transfer size\", aka encoded/compressed data length.\n   * @example {401 ms} PH1\n   * @example {112 kB} PH1\n   */\n  estimatedSavingsAriaBytes: 'Estimated savings for this insight: {PH1} transfer size',\n  /**\n   * @description Text to tell the user the estimated time and size savings for this insight that is used for screen readers.\n   * @example {401 ms} PH1\n   * @example {112 kB} PH2\n   */\n  estimatedSavingsTimingAndBytesAria: 'Estimated savings for this insight: {PH1} and {PH2} transfer size',\n  /**\n   * @description Used for screen-readers as a label on the button to expand an insight to view details\n   * @example {LCP breakdown} PH1\n   */\n  viewDetails: 'View details for {PH1} insight.',\n} as const;\n\nconst str_ = i18n.i18n.registerUIStrings('panels/timeline/components/insights/BaseInsightComponent.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\n\ninterface ViewInput {\n  internalName: string;\n  model: InsightModel;\n  selected: boolean;\n  isAIAssistanceContext: boolean;\n  showAskAI: boolean;\n  estimatedSavingsString: string|null;\n  estimatedSavingsAriaLabel: string|null;\n  renderContent: () => Lit.LitTemplate;\n  dispatchInsightToggle: () => void;\n  onHeaderKeyDown: () => void;\n  onAskAIButtonClick: () => void;\n}\n\ntype View = (input: ViewInput, output: undefined, target: HTMLElement) => void;\n\nconst DEFAULT_VIEW: View = (input, output, target) => {\n  const {\n    internalName,\n    model,\n    selected,\n    estimatedSavingsString,\n    estimatedSavingsAriaLabel,\n    isAIAssistanceContext,\n    showAskAI,\n    dispatchInsightToggle,\n    renderContent,\n    onHeaderKeyDown,\n    onAskAIButtonClick,\n  } = input;\n\n  const containerClasses = Lit.Directives.classMap({\n    insight: true,\n    closed: !selected || isAIAssistanceContext,\n    'ai-assistance-context': isAIAssistanceContext,\n  });\n\n  let ariaLabel = `${i18nString(UIStrings.viewDetails, {PH1: model.title})}`;\n  if (estimatedSavingsAriaLabel) {\n    // space prefix is deliberate to add a gap after the view details text\n    ariaLabel += ` ${estimatedSavingsAriaLabel}`;\n  }\n\n  function renderInsightContent(): Lit.LitTemplate {\n    if (!selected) {\n      return Lit.nothing;\n    }\n\n    const aiLabel = 'Debug with AI';\n    const ariaLabel = `Ask AI about ${model.title} insight`;\n    const content = renderContent();\n\n    // clang-format off\n    return html`\n      <div class=\"insight-body\">\n        <div class=\"insight-description\">${md(model.description)}</div>\n        <div class=\"insight-content\">${content}</div>\n        ${showAskAI ? html`\n          <div class=\"ask-ai-btn-wrap\">\n            <devtools-button class=\"ask-ai\"\n              .variant=${Buttons.Button.Variant.OUTLINED}\n              .iconName=${'smart-assistant'}\n              data-insights-ask-ai\n              jslog=${VisualLogging.action(`timeline.insight-ask-ai.${internalName}`).track({click: true})}\n              @click=${onAskAIButtonClick}\n              aria-label=${ariaLabel}\n            >${aiLabel}</devtools-button>\n          </div>\n        `: Lit.nothing}\n      </div>`;\n    // clang-format on\n  }\n\n  function renderHoverIcon(): Lit.LitTemplate {\n    if (isAIAssistanceContext) {\n      return Lit.nothing;\n    }\n\n    const containerClasses = Lit.Directives.classMap({\n      'insight-hover-icon': true,\n      active: selected,\n    });\n\n    // clang-format off\n    return html`\n      <div class=${containerClasses} inert>\n        <devtools-button .data=${{\n          variant: Buttons.Button.Variant.ICON,\n          iconName: 'chevron-down',\n          size: Buttons.Button.Size.SMALL,\n        } as Buttons.Button.ButtonData}\n      ></devtools-button>\n      </div>\n    `;\n    // clang-format on\n  }\n\n  // clang-format off\n  Lit.render(html`\n    <style>${baseInsightComponentStyles}</style>\n    <div class=${containerClasses}>\n      <header @click=${dispatchInsightToggle}\n        @keydown=${onHeaderKeyDown}\n        jslog=${VisualLogging.action(`timeline.toggle-insight.${internalName}`).track({click: true})}\n        data-insight-header-title=${model?.title}\n        tabIndex=\"0\"\n        role=\"button\"\n        aria-expanded=${selected}\n        aria-label=${ariaLabel}\n      >\n        ${renderHoverIcon()}\n        <h3 class=\"insight-title\">${model?.title}</h3>\n        ${estimatedSavingsString ?\n          html`\n          <slot name=\"insight-savings\" class=\"insight-savings\">\n            <span title=${estimatedSavingsAriaLabel ?? ''}>${estimatedSavingsString}</span>\n          </slot>\n        </div>`\n        : Lit.nothing}\n      </header>\n      ${renderInsightContent()}\n    </div>\n  `, target);\n  // clang-format on\n\n  if (selected) {\n    requestAnimationFrame(() => requestAnimationFrame(() => target.scrollIntoViewIfNeeded()));\n  }\n};\n\nexport interface BaseInsightData {\n  /** The trace bounds for the insight set that contains this insight. */\n  bounds: Trace.Types.Timing.TraceWindowMicro|null;\n  /** The key into `insights` that contains this particular insight. */\n  insightSetKey: string|null;\n}\n\nexport abstract class BaseInsightComponent<T extends InsightModel> extends UI.Widget.Widget {\n  #view: View;\n  abstract internalName: string;\n\n  // Tracks if this component is rendered withing the AI assistance panel.\n  // Currently only relevant to GreenDev.\n  #isAIAssistanceContext = false;\n  #selected = false;\n  #model: T|null = null;\n  #agentFocus: AIAssistance.AIContext.AgentFocus|null = null;\n  #fieldMetrics: Trace.Insights.Common.CrUXFieldMetricResults|null = null;\n  #parsedTrace: Trace.TraceModel.ParsedTrace|null = null;\n  #initialOverlays: Trace.Types.Overlays.Overlay[]|null = null;\n\n  constructor(element?: HTMLElement, view: View = DEFAULT_VIEW) {\n    super(element, {useShadowDom: true});\n    this.#view = view;\n  }\n\n  get model(): T|null {\n    return this.#model;\n  }\n\n  protected data: BaseInsightData = {\n    bounds: null,\n    insightSetKey: null,\n  };\n\n  readonly sharedTableState: TableState = {\n    selectedRowEl: null,\n    selectionIsSticky: false,\n  };\n\n  // Insights that do support the AI feature can override this to return true.\n  // The \"Ask AI\" button will only be shown for an Insight if this\n  // is true and if the feature has been enabled by the user and they meet the\n  // requirements to use AI.\n  protected hasAskAiSupport(): boolean {\n    return false;\n  }\n\n  set isAIAssistanceContext(isAIAssistanceContext: boolean) {\n    this.#isAIAssistanceContext = isAIAssistanceContext;\n    this.requestUpdate();\n  }\n\n  set selected(selected: boolean) {\n    if (!this.#selected && selected) {\n      const options = this.getOverlayOptionsForInitialOverlays();\n      this.element.dispatchEvent(new SidebarInsight.InsightProvideOverlays(this.getInitialOverlays(), options));\n    }\n\n    if (this.#selected !== selected) {\n      this.#selected = selected;\n      this.requestUpdate();\n    }\n  }\n\n  get selected(): boolean {\n    return this.#selected;\n  }\n\n  set parsedTrace(trace: Trace.TraceModel.ParsedTrace|null) {\n    this.#parsedTrace = trace;\n  }\n\n  set model(model: T) {\n    this.#model = model;\n    this.requestUpdate();\n  }\n\n  set insightSetKey(insightSetKey: string|null) {\n    this.data.insightSetKey = insightSetKey;\n    this.requestUpdate();\n  }\n\n  get bounds(): Trace.Types.Timing.TraceWindowMicro|null {\n    return this.data.bounds;\n  }\n\n  set bounds(bounds: Trace.Types.Timing.TraceWindowMicro|null) {\n    this.data.bounds = bounds;\n    this.requestUpdate();\n  }\n\n  set agentFocus(agentFocus: AIAssistance.AIContext.AgentFocus|null) {\n    this.#agentFocus = agentFocus;\n  }\n\n  set fieldMetrics(fieldMetrics: Trace.Insights.Common.CrUXFieldMetricResults|null) {\n    this.#fieldMetrics = fieldMetrics;\n  }\n\n  get fieldMetrics(): Trace.Insights.Common.CrUXFieldMetricResults|null {\n    return this.#fieldMetrics;\n  }\n\n  getOverlayOptionsForInitialOverlays(): Overlays.Overlays.TimelineOverlaySetOptions {\n    return {updateTraceWindow: true};\n  }\n\n  #dispatchInsightToggle(): void {\n    if (!this.data.insightSetKey || !this.#model) {\n      // Shouldn't happen, but needed to satisfy TS.\n      return;\n    }\n\n    if (this.#parsedTrace && GreenDev.Prototypes.instance().isEnabled('inDevToolsFloaty')) {\n      const floatyHandled = UI.Floaty.onFloatyClick({\n        type: UI.Floaty.FloatyContextTypes.PERFORMANCE_INSIGHT,\n        data: {\n          insight: this.#model,\n          trace: this.#parsedTrace,\n        }\n      });\n      if (floatyHandled) {\n        return;\n      }\n    }\n\n    const focus = UI.Context.Context.instance().flavor(AIAssistance.AIContext.AgentFocus);\n    if (this.#selected) {\n      this.element.dispatchEvent(new SidebarInsight.InsightDeactivated());\n\n      // Clear agent (but only if currently focused on an insight).\n      if (focus) {\n        UI.Context.Context.instance().setFlavor(AIAssistance.AIContext.AgentFocus, focus.withInsight(null));\n      }\n      return;\n    }\n\n    if (focus) {\n      UI.Context.Context.instance().setFlavor(AIAssistance.AIContext.AgentFocus, focus.withInsight(this.#model));\n    }\n\n    Badges.UserBadges.instance().recordAction(Badges.BadgeAction.PERFORMANCE_INSIGHT_CLICKED);\n\n    this.sharedTableState.selectedRowEl?.classList.remove('selected');\n    this.sharedTableState.selectedRowEl = null;\n    this.sharedTableState.selectionIsSticky = false;\n\n    this.element.dispatchEvent(new SidebarInsight.InsightActivated(this.#model, this.data.insightSetKey));\n  }\n\n  /**\n   * Ensure that if the user presses enter or space on a header, we treat it\n   * like a click and toggle the insight.\n   */\n  #onHeaderKeyDown(event: KeyboardEvent): void {\n    if (event.key === 'Enter' || event.key === ' ') {\n      event.preventDefault();\n      event.stopPropagation();\n      this.#dispatchInsightToggle();\n    }\n  }\n\n  /**\n   * Replaces the initial insight overlays with the ones provided.\n   *\n   * If `overlays` is null, reverts back to the initial overlays.\n   *\n   * This allows insights to provide an initial set of overlays,\n   * and later temporarily replace all of those insights with a different set.\n   * This enables the hover/click table interactions.\n   */\n  toggleTemporaryOverlays(\n      overlays: Trace.Types.Overlays.Overlay[]|null, options: Overlays.Overlays.TimelineOverlaySetOptions): void {\n    if (!this.#selected) {\n      return;\n    }\n\n    if (!overlays) {\n      this.element.dispatchEvent(new SidebarInsight.InsightProvideOverlays(\n          this.getInitialOverlays(), this.getOverlayOptionsForInitialOverlays()));\n      return;\n    }\n\n    this.element.dispatchEvent(new SidebarInsight.InsightProvideOverlays(overlays, options));\n  }\n\n  getInitialOverlays(): Trace.Types.Overlays.Overlay[] {\n    if (this.#initialOverlays) {\n      return this.#initialOverlays;\n    }\n\n    this.#initialOverlays = this.createOverlays();\n    return this.#initialOverlays;\n  }\n\n  protected createOverlays(): Trace.Types.Overlays.Overlay[] {\n    return this.#model?.createOverlays?.() ?? [];\n  }\n\n  protected abstract renderContent(): Lit.LitTemplate;\n\n  override performUpdate(): void {\n    if (!this.#model) {\n      return;\n    }\n\n    const input: ViewInput = {\n      internalName: this.internalName,\n      model: this.#model,\n      selected: this.#selected,\n      estimatedSavingsString: this.getEstimatedSavingsString(),\n      estimatedSavingsAriaLabel: this.#getEstimatedSavingsAriaLabel(),\n      isAIAssistanceContext: this.#isAIAssistanceContext,\n      showAskAI: this.#canShowAskAI(),\n      dispatchInsightToggle: () => this.#dispatchInsightToggle(),\n      renderContent: () => this.renderContent(),\n      onHeaderKeyDown: () => this.#onHeaderKeyDown,\n      onAskAIButtonClick: () => this.#onAskAIButtonClick(),\n    };\n    this.#view(input, undefined, this.contentElement);\n  }\n\n  getEstimatedSavingsTime(): Trace.Types.Timing.Milli|null {\n    return null;\n  }\n\n  getEstimatedSavingsBytes(): number|null {\n    return this.#model?.wastedBytes ?? null;\n  }\n\n  #getEstimatedSavingsTextParts(): {bytesString?: string, timeString?: string} {\n    const savingsTime = this.getEstimatedSavingsTime();\n    const savingsBytes = this.getEstimatedSavingsBytes();\n\n    let timeString, bytesString;\n    if (savingsTime) {\n      timeString = i18n.TimeUtilities.millisToString(savingsTime);\n    }\n    if (savingsBytes) {\n      bytesString = i18n.ByteUtilities.bytesToString(savingsBytes);\n    }\n    return {\n      timeString,\n      bytesString,\n    };\n  }\n\n  #getEstimatedSavingsAriaLabel(): string|null {\n    const {bytesString, timeString} = this.#getEstimatedSavingsTextParts();\n\n    if (timeString && bytesString) {\n      return i18nString(UIStrings.estimatedSavingsTimingAndBytesAria, {\n        PH1: timeString,\n        PH2: bytesString,\n      });\n    }\n    if (timeString) {\n      return i18nString(UIStrings.estimatedSavingsAriaTiming, {\n        PH1: timeString,\n      });\n    }\n    if (bytesString) {\n      return i18nString(UIStrings.estimatedSavingsAriaBytes, {\n        PH1: bytesString,\n      });\n    }\n\n    return null;\n  }\n\n  getEstimatedSavingsString(): string|null {\n    const {bytesString, timeString} = this.#getEstimatedSavingsTextParts();\n\n    if (timeString && bytesString) {\n      return i18nString(UIStrings.estimatedSavingsTimingAndBytes, {\n        PH1: timeString,\n        PH2: bytesString,\n      });\n    }\n    if (timeString) {\n      return i18nString(UIStrings.estimatedSavings, {\n        PH1: timeString,\n      });\n    }\n    if (bytesString) {\n      return i18nString(UIStrings.estimatedSavings, {\n        PH1: bytesString,\n      });\n    }\n\n    return null;\n  }\n\n  #onAskAIButtonClick(): void {\n    if (!this.#agentFocus) {\n      return;\n    }\n\n    // matches the one in ai_assistance-meta.ts\n    const actionId = 'drjones.performance-panel-context';\n    if (!UI.ActionRegistry.ActionRegistry.instance().hasAction(actionId)) {\n      return;\n    }\n\n    let focus = UI.Context.Context.instance().flavor(AIAssistance.AIContext.AgentFocus);\n    if (focus) {\n      focus = focus.withInsight(this.#model);\n    } else {\n      focus = this.#agentFocus;\n    }\n    UI.Context.Context.instance().setFlavor(AIAssistance.AIContext.AgentFocus, focus);\n\n    // Trigger the AI Assistance panel to open.\n    const action = UI.ActionRegistry.ActionRegistry.instance().getAction(actionId);\n    void action.execute();\n  }\n\n  #canShowAskAI(): boolean {\n    if (this.#isAIAssistanceContext || !this.hasAskAiSupport()) {\n      return false;\n    }\n\n    // Check if the Insights AI feature enabled within Chrome for the active user.\n    const {devToolsAiAssistancePerformanceAgent} = Root.Runtime.hostConfig;\n    const askAiEnabled = Boolean(devToolsAiAssistancePerformanceAgent?.enabled);\n    if (!askAiEnabled) {\n      return false;\n    }\n\n    const {aidaAvailability} = Root.Runtime.hostConfig;\n    return aidaAvailability?.enterprisePolicyValue !== Root.Runtime.GenAiEnterprisePolicyValue.DISABLE &&\n        aidaAvailability?.enabled === true;\n  }\n}\n"]}