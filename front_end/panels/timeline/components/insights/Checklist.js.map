{"version":3,"file":"Checklist.js","sourceRoot":"","sources":["../../../../../../../../front_end/panels/timeline/components/insights/Checklist.ts"],"names":[],"mappings":"AAAA,sCAAsC;AACtC,yEAAyE;AACzE,6BAA6B;AAE7B;;GAEG;AAEH,OAAO,2BAA2B,CAAC;AAEnC,OAAO,KAAK,IAAI,MAAM,+BAA+B,CAAC;AAEtD,OAAO,KAAK,EAAE,MAAM,iCAAiC,CAAC;AACtD,OAAO,KAAK,GAAG,MAAM,2BAA2B,CAAC;AAEjD,OAAO,eAAe,MAAM,oBAAoB,CAAC;AAEjD,MAAM,EAAC,IAAI,EAAC,GAAG,GAAG,CAAC;AAEnB,MAAM,SAAS,GAAG;IAChB;;;OAGG;IACH,gBAAgB,EAAE,6BAA6B;IAC/C;;;OAGG;IACH,eAAe,EAAE,6BAA6B;CACtC,CAAC;AAEX,MAAM,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC,iBAAiB,CAAC,kDAAkD,EAAE,SAAS,CAAC,CAAC;AACxG,MAAM,UAAU,GAAG,IAAI,CAAC,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,SAAS,EAAE,IAAI,CAAC,CAAC;AAQtE,MAAM,CAAC,MAAM,YAAY,GAAS,CAAC,KAAK,EAAE,MAAM,EAAE,MAAM,EAAE,EAAE;IAC1D,MAAM,EACJ,SAAS,GACV,GAAG,KAAK,CAAC;IAEV,SAAS,OAAO,CAAC,KAA2B;QAC1C,MAAM,IAAI,GAAG,KAAK,CAAC,KAAK,CAAC,CAAC,CAAC,cAAc,CAAC,CAAC,CAAC,OAAO,CAAC;QAEpD,MAAM,SAAS,GAAG,KAAK,CAAC,KAAK,CAAC,CAAC,CAAC,UAAU,CAAC,SAAS,CAAC,gBAAgB,EAAE,EAAC,GAAG,EAAE,KAAK,CAAC,KAAK,EAAC,CAAC,CAAC,CAAC;YAC5D,UAAU,CAAC,SAAS,CAAC,eAAe,EAAE,EAAC,GAAG,EAAE,KAAK,CAAC,KAAK,EAAC,CAAC,CAAC;QAC1F,OAAO,IAAI,CAAA;;uBAEQ,SAAS;iBACf,IAAI;kBACH,KAAK,CAAC,KAAK,CAAC,CAAC,CAAC,cAAc,CAAC,CAAC,CAAC,cAAc;;OAExD,CAAC;IACN,CAAC;IAED,mBAAmB;IACnB,GAAG,CAAC,MAAM,CAAC,IAAI,CAAA;aACJ,eAAe;;QAEpB,MAAM,CAAC,MAAM,CAAC,SAAS,CAAC,CAAC,GAAG,CAAC,KAAK,CAAC,EAAE,CAAC,IAAI,CAAA;YACtC,OAAO,CAAC,KAAK,CAAC;uCACa,KAAK,CAAC,KAAK;YACtC,CAAC;;GAEV,EAAE,MAAM,CAAC,CAAC;IACX,kBAAkB;AACpB,CAAC,CAAC;AAcF,MAAM,OAAO,SAAU,SAAQ,EAAE,CAAC,MAAM,CAAC,MAAM;IAC7C,KAAK,CAAO;IACZ,UAAU,CAAoB;IAE9B,YAAY,OAAqB,EAAE,OAAa,YAAY;QAC1D,KAAK,CAAC,OAAO,EAAE,EAAC,YAAY,EAAE,IAAI,EAAC,CAAC,CAAC;QACrC,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC;IACpB,CAAC;IAED,IAAI,SAAS,CAAC,SAA2B;QACvC,IAAI,CAAC,UAAU,GAAG,SAAS,CAAC;QAC5B,IAAI,CAAC,aAAa,EAAE,CAAC;IACvB,CAAC;IAEQ,aAAa;QACpB,IAAI,CAAC,IAAI,CAAC,UAAU,EAAE,CAAC;YACrB,OAAO;QACT,CAAC;QAED,MAAM,KAAK,GAAc;YACvB,SAAS,EAAE,IAAI,CAAC,UAAU;SAC3B,CAAC;QACF,IAAI,CAAC,KAAK,CAAC,KAAK,EAAE,SAAS,EAAE,IAAI,CAAC,cAAc,CAAC,CAAC;IACpD,CAAC;CACF","sourcesContent":["// Copyright 2024 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\n/**\n * @file A list of pass/fail conditions for an insight.\n */\n\nimport '../../../../ui/kit/kit.js';\n\nimport * as i18n from '../../../../core/i18n/i18n.js';\nimport type * as Trace from '../../../../models/trace/trace.js';\nimport * as UI from '../../../../ui/legacy/legacy.js';\nimport * as Lit from '../../../../ui/lit/lit.js';\n\nimport checklistStyles from './checklist.css.js';\n\nconst {html} = Lit;\n\nconst UIStrings = {\n  /**\n   * @description Text for a screen-reader label to tell the user that the icon represents a successful insight check\n   * @example {Server response time} PH1\n   */\n  successAriaLabel: 'Insight check passed: {PH1}',\n  /**\n   * @description Text for a screen-reader label to tell the user that the icon represents an unsuccessful insight check\n   * @example {Server response time} PH1\n   */\n  failedAriaLabel: 'Insight check failed: {PH1}',\n} as const;\n\nconst str_ = i18n.i18n.registerUIStrings('panels/timeline/components/insights/Checklist.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\n\ninterface ViewInput {\n  checklist: GenericChecklist;\n}\n\ntype View = (input: ViewInput, output: undefined, target: HTMLElement) => void;\n\nexport const DEFAULT_VIEW: View = (input, output, target) => {\n  const {\n    checklist,\n  } = input;\n\n  function getIcon(check: GenericChecklist['']): Lit.TemplateResult {\n    const icon = check.value ? 'check-circle' : 'clear';\n\n    const ariaLabel = check.value ? i18nString(UIStrings.successAriaLabel, {PH1: check.label}) :\n                                    i18nString(UIStrings.failedAriaLabel, {PH1: check.label});\n    return html`\n        <devtools-icon\n          aria-label=${ariaLabel}\n          name=${icon}\n          class=${check.value ? 'check-passed' : 'check-failed'}\n        ></devtools-icon>\n      `;\n  }\n\n  // clang-format off\n  Lit.render(html`\n    <style>${checklistStyles}</style>\n    <ul>\n      ${Object.values(checklist).map(check => html`<li>\n          ${getIcon(check)}\n          <span data-checklist-label>${check.label}</span>\n      </li>`)}\n    </ul>\n  `, target);\n  // clang-format on\n};\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\ntype GenericChecklist = Trace.Insights.Types.Checklist<any>;\n\nexport interface ChecklistData {\n  checklist: GenericChecklist;\n}\n\nexport interface TableDataRow {\n  values: Array<number|string|Lit.LitTemplate>;\n  overlays?: Trace.Types.Overlays.Overlay[];\n}\n\nexport class Checklist extends UI.Widget.Widget {\n  #view: View;\n  #checklist?: GenericChecklist;\n\n  constructor(element?: HTMLElement, view: View = DEFAULT_VIEW) {\n    super(element, {useShadowDom: true});\n    this.#view = view;\n  }\n\n  set checklist(checklist: GenericChecklist) {\n    this.#checklist = checklist;\n    this.requestUpdate();\n  }\n\n  override performUpdate(): void {\n    if (!this.#checklist) {\n      return;\n    }\n\n    const input: ViewInput = {\n      checklist: this.#checklist,\n    };\n    this.#view(input, undefined, this.contentElement);\n  }\n}\n"]}