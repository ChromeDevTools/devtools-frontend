# Traces

This folder contains traces saved by the DevTools Performance Panel that can be used in tests.

To add a trace, copy the `*.json.gz` file into this folder, and add it to the `BUILD.gn`. You can also add the unzipped `*.json` file, but these are git-ignored. However, it's useful when working with a trace file to have it extracted and inspectable!

There are two helpers you can use to load a trace file into a test, depending on which model you are working with:

## OPP "legacy" model

Use `loadTraceEventsLegacyEventPayload`. This loads the file and assumes it returns a list of `SDK.TracingManager.EventPayload` events.

### Insights model

The Insights model supports trace files in two forms:

1. An array of events.
2. An object, with an array of `traceEvents` and associated `metadata`

You can use `loadEventsFromTraceFile` to return all the events in a trace file. If you want to load the entire file, you can use `loadTraceFile`.

If you have created an example website to generate a trace, consider contributing it to the [Performance Stories repository](https://github.com/ChromeDevTools/performance-stories).

# Trace descriptions

**If you add a trace, please update this file with a description of the file and how it was generated**.

NOTE: The list of traces below is alphabetically-sorted.

### about-blank-first.json.gz

Contains a navigation to about:blank first and then to another URL. Includes data from about:blank to ensure a track for that URL is rendered.

### animation.json.gz

Generated by https://github.com/ChromeDevTools/performance-stories/tree/main/animation.

### async-js-calls.json.gz

Contains `setTimeout`, `requestAnimationFrame` and `requestIdleCallback` calls and the JS async
call stack tracking trace events ("v8::Debugger::AsyncTaskScheduled" and "v8::Debugger::AsyncTaskRun")

### basic.json.gz

A very barebones trace; contains info on browser processes and threads but very little else.

### byte-efficiency.json.gz

A recording of a page load of the Lighthouse byte-efficiency tester. https://github.com/GoogleChrome/lighthouse/blob/main/cli/test/fixtures/byte-efficiency/tester.html

### chrome-ext-sourcemap-script-content.json.gz

Trace generated after installing https://chromewebstore.google.com/detail/react-developer-tools/. A regular trace that contains two sections
not found in other traces:

1. A sourcemap in the metadata array with a 'chrome-extension' protocol.
2. 'V8SourceRundownSourcesScriptCatchupEvent' traces that have a 'chrome-extension' protocol with associated source text.

### dom-size.json.gz

Generate from a recording of [this HTML file](https://gist.github.com/adamraine/bfdb3cecca2322bf74f1e725d9a4699d) with the following steps:

1. Set CPU throttling to 20x
2. Start recording without reloading the page
3. Click the button once
4. Reload the page
5. Click the button once
6. End recording

### dom-size-long.json.gz

Contains a trace from a site with a large DOM. It also happens to have many flows with duplicated flow bindings, so it's useful to test the FlowsHandler remains quick.

### dom-size-overlap.json.gz

Trace containing a cross-origin navigation where DOM size events from the pre-navigation page are emitted _after_ the navigation event.

### dpr.json.gz

Mobile emulated trace, DPR 1.75, host DPR 2.0.

https://misc-hoten.surge.sh/display-dpr/

https://b.corp.google.com/issues/416580500#comment4

### dupe-js.json.gz

A bunch of bundles with the exact same content: https://dupe-modules-lh-2.surge.sh/

### dupe-js-inline-maps.json.gz

Like above, but the source maps are inline data urls. https://dupe-modules-lh-inline-data.surge.sh/smaller.html

### enhanced-traces.json.gz

a) Contains traces with metadata needed to power a rehydrated session for enhanced tracing.
b) (faked) script contents and source map urls, from the new "enhanced traces" feature. See http://crbug.com/337909145

### forced-layouts-and-no-gpu.json.gz

A trace that contains a button that, when clicked, will iterate over 30 paragraphs and increment their width to the width of a div. This causes a forced layout event for each one. Additionally this trace contains no GPU thread.

### http1.1.json.gz

Contains several image requests from the same 3P origin that use HTTP/1.1

### idle-callback.json.gz

A trace with an idle callback that exceeds its allotted time.

### iframe-shift.json.gz

Generated from the shift-attribution page in https://github.com/GoogleChrome/lighthouse/blob/main/cli/test/fixtures/shift-attribution.html. Contains an iframe and layout shifts.

### image-delivery.json.gz

Generate from a page load [this HTML file](https://gist.github.com/adamraine/397e2bd08665f9e45f6072e446715115). Contains a series of test cases for the image delivery insight.

### initiators.json.gz

Contains a recording with network request's initiator information.

### large-layout-small-recalc.json.gz

Generated from https://github.com/ChromeDevTools/performance-stories/tree/main/forced-layout-main-thread. Has a large layout event (126ms) and a smaller recalc style event (4.07ms).

### large-recalc-style.json.gz

Generated from https://github.com/ChromeDevTools/performance-stories/tree/main/forced-layout-main-thread. Has a large recalc style event that isn't forced by JS.

### layout-shifts-root-causes.json.gz

A trace generated from the internal layout shifts example page (ask jacktfranklin@ for info). It also was run after crrev.com/c/6491448 landed, which means all the `PaintImage` events have `nodeName` in `args.data`.

### lcp-lates-paint-event.json.gz

This is a trace where a `LargestImagePaint` event occurs after the last `largestContentfulPaint::Candidate` event.

### lcp-discovery-delay.json.gz

A page that has an LCP image but is delayed by main thread blocking JS. Generated from https://github.com/ChromeDevTools/performance-stories/tree/main/lcp-discovery-delay.

### lcp-images.json.gz

Generated from https://github.com/ChromeDevTools/performance-stories/tree/main/lcp-large-image

### lcp-fetchpriority-high.json.gz

A page that loads an image as the LCP resource with fetchpriority=high set.

### lcp-multiple-frames.json.gz

Generated from [lcp-iframes story](https://github.com/ChromeDevTools/performance-stories/tree/main/lcp-iframes).

Contains a page load that has two frames (main frame + iframe). There are two images loaded in each:

- the iframe loads placeholder.co/50.jpg and placeholder.co/2000.jpg
- the main frame loads placeholder.co/100.jpg and placeholder.co/1000.jpg

This trace is used to verify the fix for a bug [crbug.com/384000716] where we incorrectly associated image requests to the wrong navigation when calculating the LCP image.

### lcp-web-font.json.gz

Generated from https://github.com/ChromeDevTools/performance-stories/tree/main/lcp-web-font

### long-task-from-worker-thread

A trace with a worker task that takes longer to complete than the LONG_TASK threshold allows,
generated by navigating to https://worker-long-task.glitch.me/ and clicking the 'do it' button.

### many-redirects.json.gz

Generated by https://github.com/ChromeDevTools/performance-stories/tree/main/many-redirects. Performs three redirects before loading the requested resource.

### many-requests.json.gz

Generated by https://github.com/ChromeDevTools/performance-stories/tree/main/lots-of-network-requests. Loads 20 images from the placeholder API and an extra script and stylesheet. Trace was recorded on 3G throttling, so some of the requests have not even finished.

### missing-process-data.json.gz

A trace missing the renderer process.

### missing-tracing-start.json.gz

A trace missing the start event.

### multiple-navigations.json.gz

This is a trace that includes multiple navigations:

- Starts on google.com
- Navigates to Google Images search (google.com/imghp)
- Search for "dogs" (https://www.google.com/search?q=dogs&...)

### multiple-navigations-render-blocking.json.gz

Contains a navigation to a page with a render blocking request `script.js` followed by a page refresh.

### multiple-navigations-same-id.json.gz

Contains a trace with two identical navigation events with matching IDs. See crbug.com/1503982 for the context and comments in MetaHandler.ts for the fix. This trace is included to avoid a regression.

### multiple-navigations-with-iframes.json.gz

This trace loads `index.html`, with an iframe to load `example.com`. It then
loads `page2.html`, which also loads `example.com` in an iFrame. This trace is
used to make sure we filter out events in iFrames (such as MarkDOMContent).

### multiple-top-level-renderers.json.gz

A trace containing multiple top level renderers.

### nytimes-bad-mobile-viewport.json.gz

Trace of a site with a non-mobile optimized viewport, plus some click/tap interactions.

crbug.com/371566378#comment3

### over-20-invalidations-per-event.json.gz

Contains a trace where one Layout event has 26 invalidations associated with it.

### parser-blocking-after-paint.json.gz

Contains a navigation to a page with a `in_body_parser_blocking` request `script.js` that is downloaded after first paint.

### postmessage-initiators.json.gz

Contains a `postMessage.Handler`, and associating `postMessage.Dispatch` call.

### primary-page-frame.json.gz

Created from the speculation-rules demo page (https://speculative-rules.glitch.me/common-fruits.html). Contains a trace that includes the `isInPrimaryPageFrame` flag added to Chromium in crrev.com/c/5595033, which allows the trace engine to more accurately identify the main thread via the primary frame.

### react-console-timestamp.json.gz

A React app that contains with a version of React that uses console.timeStamp to extend the Performance panel. Calls to the API are part of async tasks tagged with console.createTask.

### recursive-blocking-js.json.gz

A trace that contains 3 invocations of a JS function, spaced 1 second apart,
which recurses 10 times, and blocks for one second in total with performance.now.

### recursive-counting-js.json.gz

A trace that contains 3 invocations of a JS function, spaced 1 second apart,
which recurses 3 times, and blocks for one second in total by summing over all
integers until 1_000_000_000.

### reload-and-trace-page.json.gz

This trace is a trace of example.com which was recorded via the OPP's "Start profiling and reload the page" button.

### render-blocking-in-body.json.gz

Contains the following requests in the document body:

- `frame.html`: an iframe document fetched before the image
- `style.css`: a stylesheet fetched before the image
- `script.js?beforeImage`: a script fetched before the image
- `chrome.jpeg`: a normal image
- `script.js?afterImage`: a script fetched after the image

### render-blocking-in-iframe.json.gz

Contains a navigation to a page with a render blocking request `style.css?main` and an iframe. The iframe also contains a render blocking request `style.css?iframe`.

### render-blocking-requests.json.gz

A page that has a few render blocking requests:

- jQuery from a CDN
- a stylesheet
- a script including some blocking `sleepFor` call that blocks the main thread

All of which delays the LCP image from rendering.

### scheduler-post-task.json.gz

Generated from the [scheduler story](https://github.com/ChromeDevTools/performance-stories/tree/main/scheduler). Contains a series of `scheduler.postTask()` calls of different priority and delay, some nested and some ending up cancelled.

### slow-interaction-button-click.json.gz

Generated from the [long-interaction story](https://github.com/ChromeDevTools/performance-stories/tree/main/long-interaction). Contains one slow interaction which is the user clicking on a button.

### slow-interaction-keydown.json.gz

Generated from the [long-interaction story](https://github.com/ChromeDevTools/performance-stories/tree/main/long-interaction). Contains one slow interaction which is the user typing into the input field. There is also another interaction representing the user clicking into the text field to focus it, but this is not a long interaction.

### threejs-gpu.json.gz

A trace containing a lot of GPU activity.

### timer-initiators.json.gz

Contains a `setTimeout`, `requestAnimationFrame` and `requestIdleCallback` call.

### two-workers.json.gz

Generated from https://github.com/ChromeDevTools/performance-stories/tree/main/two-workers. Runs two workers that both calculate fibonacci numbers.

### user-timings.json.gz

Generated from https://github.com/ChromeDevTools/performance-stories/tree/main/user-timings

### user-timings-details.json.gz

A trace that contains one `performance.mark` and one `performance.measure` call, both of which have
details. The measure contains the `devtools` property in details.

### web-dev.json.gz

A trace of web.dev being loaded.

### web-dev-initial-url.json.gz

This is a trace where we loaded web.dev/inp, but the initial URL reported by the TraceStartedInBrowser event states google.com (the previous page). In this situation the MetaHandler would produce google.com as the mainFrameURL which is incorrect. This trace was used to write a test to ensure in this instance if we can we try to calculate the actual domain by looking at the first navigation.

### web-dev-modifications.json.gz

Contains a recording of web-dev with the following modifications:

- One entry with hidden children
- A child breadcrumb under the total trace window.

### web-dev-screenshot-source-ids.json.gz

A trace generated from crrev.com/c/6197645 (January 2025), which changed the format of screenshots from the legacy OBJECT_SNAPSHOT format to be instant events with more information attached to them.

### web-dev-with-commit.json.gz

The web-dev trace is old (recorded in 2021) and since its recording the events relating to frames have changed. In particular CompositeLayers was replaced by Commit, and frameSeqId was added to more events. This is a more recent (Nov 2023) trace that has the newer frame-related events in it. This was used when migrating the TimelineFrameModel to the new engine.

### web-dev-with-timings.json.gz

A trace of web.dev recorded in May 2025. Done because it contains performance timings marks and measures, which are useful and in this case used as a repro case for crbug.com/418223469.

### preconnect-advice

A trace with generated with a simple html page that has three `<link rel=preconnect>`, and with
HTTP [Link](https://developer.mozilla.org/en-US/docs/Web/HTTP/Reference/Headers/Link) header (by Header override)

### perfettotrace-track

A trace with a "PerfettoTrack" in the trace, which is a new track we want to filter out on the frontnend.

### user-timings-overlaps

A trace with a bunch of user timings - created from https://github.com/ChromeDevTools/performance-stories/pull/49.

In July 2025 Perfetto changed how it outputs IDs, meaning that performance.measure events could have IDs that were non-unique. They were unique if the events overlap, but if they don't, then IDs can be reused. This trace exists to test our parsing code against this new code.

https://chromium.googlesource.com/external/github.com/google/perfetto.git/+/aef636b27ffbf379fd722e7798030da2c5c4d699
