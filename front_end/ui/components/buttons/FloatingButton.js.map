{"version":3,"file":"FloatingButton.js","sourceRoot":"","sources":["../../../../../../../front_end/ui/components/buttons/FloatingButton.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright 2024 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n/* eslint-disable @devtools/no-lit-render-outside-of-view */\nimport '../icon_button/icon_button.js';\n\nimport * as VisualLogging from '../../../ui/visual_logging/visual_logging.js';\nimport * as Lit from '../../lit/lit.js';\n\nimport floatingButtonStyles from './floatingButton.css.js';\n\nconst {html} = Lit;\n\n/**\n * A simple floating button component, primarily used to display the 'Ask AI!'\n * teaser when hovering over specific UI elements.\n *\n * Usage is simple:\n *\n * ```js\n * // Instantiate programmatically via the `create()` helper:\n * const button = Buttons.FloatingButton.create('smart-assistant', 'Ask AI!');\n *\n * // Use within a template:\n * html`\n * <devtools-floating-button icon-name=\"smart-assistant\"\n *                           title=\"Ask AI!\">\n * </devtools-floating-button>\n * `;\n * ```\n *\n * @property iconName - The `\"icon-name\"` attribute is reflected as a property.\n * @property jslogContext - The `\"jslogcontext\"` attribute is reflected as a property.\n * @attribute icon-name - The basename of the icon file (not including the `.svg`\n *                   suffix).\n * @attribute jslogcontext - The context for the `jslog` attribute. A `jslog`\n *                      attribute is generated automatically with the\n *                      provided context.\n */\nexport class FloatingButton extends HTMLElement {\n  static readonly observedAttributes = ['icon-name', 'jslogcontext'];\n\n  readonly #shadow = this.attachShadow({mode: 'open'});\n\n  constructor() {\n    super();\n    this.role = 'presentation';\n    this.#render();\n  }\n\n  /**\n   * Yields the value of the `\"icon-name\"` attribute of this `FloatingButton`\n   * (`null` in case there's no `\"icon-name\"` on this element).\n   */\n  get iconName(): string|null {\n    return this.getAttribute('icon-name');\n  }\n\n  /**\n   * Changes the value of the `\"icon-name\"` attribute of this `FloatingButton`.\n   * If you pass `null`, the `\"icon-name\"` attribute will be removed from this\n   * element.\n   *\n   * @param the new icon name or `null` to unset.\n   */\n  set iconName(iconName: string|null) {\n    if (iconName === null) {\n      this.removeAttribute('icon-name');\n    } else {\n      this.setAttribute('icon-name', iconName);\n    }\n  }\n\n  get jslogContext(): string|null {\n    return this.getAttribute('jslogcontext');\n  }\n\n  set jslogContext(jslogContext: string|null) {\n    if (jslogContext === null) {\n      this.removeAttribute('jslogcontext');\n    } else {\n      this.setAttribute('jslogcontext', jslogContext);\n    }\n  }\n\n  attributeChangedCallback(name: string, oldValue: string|null, newValue: string|null): void {\n    if (oldValue === newValue) {\n      return;\n    }\n    if (name === 'icon-name') {\n      this.#render();\n    }\n    if (name === 'jslogcontext') {\n      this.#updateJslog();\n    }\n  }\n\n  #render(): void {\n    // clang-format off\n    Lit.render(html`\n        <style>${floatingButtonStyles}</style>\n        <button><devtools-icon .name=${this.iconName}></devtools-icon></button>`,\n        this.#shadow, {host: this});\n    // clang-format on\n  }\n\n  #updateJslog(): void {\n    if (this.jslogContext) {\n      this.setAttribute('jslog', `${VisualLogging.action().track({click: true}).context(this.jslogContext)}`);\n    } else {\n      this.removeAttribute('jslog');\n    }\n  }\n}\n\n/**\n * Helper function to programmatically create a `FloatingButton` instance with a\n * given `iconName` and `title`.\n *\n * @param iconName the name of the icon to use\n * @param title the tooltip for the `FloatingButton`\n * @param jslogContext the context string for the `jslog` attribute\n * @returns the newly created `FloatingButton` instance.\n */\nexport const create = (iconName: string, title: string, jslogContext?: string): FloatingButton => {\n  const floatingButton = new FloatingButton();\n  floatingButton.iconName = iconName;\n  floatingButton.title = title;\n  if (jslogContext) {\n    floatingButton.jslogContext = jslogContext;\n  }\n  return floatingButton;\n};\n\ncustomElements.define('devtools-floating-button', FloatingButton);\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    'devtools-floating-button': FloatingButton;\n  }\n}\n"]}