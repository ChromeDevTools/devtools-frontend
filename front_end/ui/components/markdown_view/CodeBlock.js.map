{"version":3,"file":"CodeBlock.js","sourceRoot":"","sources":["../../../../../../../front_end/ui/components/markdown_view/CodeBlock.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright 2023 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n/* eslint-disable @devtools/no-lit-render-outside-of-view */\n\nimport '../../../ui/legacy/legacy.js'; // for x-link\n\nimport * as i18n from '../../../core/i18n/i18n.js';\nimport * as CodeMirror from '../../../third_party/codemirror.next/codemirror.next.js';\nimport * as Buttons from '../../../ui/components/buttons/buttons.js';\nimport * as TextEditor from '../../../ui/components/text_editor/text_editor.js';\nimport * as UI from '../../../ui/legacy/legacy.js';\nimport * as Lit from '../../lit/lit.js';\nimport * as VisualLogging from '../../visual_logging/visual_logging.js';\n\nimport styles from './codeBlock.css.js';\n\nconst {html} = Lit;\n\nconst UIStrings = {\n  /**\n   * @description The header text if not present and language is not set.\n   */\n  code: 'Code',\n  /**\n   * @description The title of the button to copy the codeblock from a Markdown view.\n   */\n  copy: 'Copy code',\n  /**\n   * @description The title of the button after it was pressed and the text was copied to clipboard.\n   */\n  copied: 'Copied to clipboard',\n  /**\n   * @description Disclaimer shown in the code blocks.\n   */\n  disclaimer: 'Use code snippets with caution',\n} as const;\nconst str_ = i18n.i18n.registerUIStrings('ui/components/markdown_view/CodeBlock.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\n\nexport interface Citation {\n  index: Number;\n  clickHandler: () => void;\n}\n\nexport async function languageFromToken(lang: string): Promise<CodeMirror.LanguageSupport> {\n  switch (lang) {\n    case 'javascript':\n    case 'js':\n    case 'jsx':\n      // We intentionally allow JSX in normal .js as well as .jsx files,\n      // because there are simply too many existing applications and\n      // examples out there that use JSX within .js files, and we don't\n      // want to break them.\n      return CodeMirror.javascript.javascript({jsx: true});\n    case 'typescript':\n    case 'ts':\n      return CodeMirror.javascript.javascript({typescript: true});\n    case 'tsx':\n      return CodeMirror.javascript.javascript({typescript: true, jsx: true});\n\n    case 'less':\n    case 'scss':\n    case 'sass':\n    case 'css':\n      return CodeMirror.css.css();\n\n    case 'html':\n      return CodeMirror.html.html({autoCloseTags: false, selfClosingTags: true});\n\n    case 'xml':\n      return (await CodeMirror.xml()).xml();\n\n    case 'cpp':\n      return (await CodeMirror.cpp()).cpp();\n\n    case 'go':\n      return new CodeMirror.LanguageSupport(await CodeMirror.go());\n\n    case 'java':\n      return (await CodeMirror.java()).java();\n\n    case 'kotlin':\n      return new CodeMirror.LanguageSupport(await CodeMirror.kotlin());\n\n    case 'json': {\n      const jsonLanguage = CodeMirror.javascript.javascriptLanguage.configure({top: 'SingleExpression'});\n      return new CodeMirror.LanguageSupport(jsonLanguage);\n    }\n\n    case 'php':\n      return (await CodeMirror.php()).php();\n\n    case 'python':\n    case 'py':\n      return (await CodeMirror.python()).python();\n\n    case 'markdown':\n    case 'md':\n      return (await CodeMirror.markdown()).markdown();\n\n    case 'sh':\n    case 'bash':\n      return new CodeMirror.LanguageSupport(await CodeMirror.shell());\n\n    case 'dart':\n      return new CodeMirror.LanguageSupport(await CodeMirror.dart());\n\n    case 'angular':\n      return (await CodeMirror.angular()).angular();\n\n    case 'svelte':\n      return (await CodeMirror.svelte()).svelte();\n\n    case 'vue':\n      return (await CodeMirror.vue()).vue();\n\n    default:\n      return CodeMirror.html.html({autoCloseTags: false, selfClosingTags: true});\n  }\n}\n\nexport class CodeBlock extends HTMLElement {\n  readonly #shadow = this.attachShadow({mode: 'open'});\n\n  #code = '';\n  #codeLang = '';\n  #copyTimeout = 1000;\n  #timer?: ReturnType<typeof setTimeout>;\n  #copied = false;\n  #editorState?: CodeMirror.EditorState;\n  #languageConf = new CodeMirror.Compartment();\n  /**\n   * Whether to display a notice \"​​Use code snippets with caution\" in code\n   * blocks.\n   */\n  #displayNotice = false;\n  #header?: string;\n  #showCopyButton = true;\n  #citations: Citation[] = [];\n\n  connectedCallback(): void {\n    void this.#render();\n  }\n\n  set code(value: string) {\n    this.#code = value;\n    this.#editorState = CodeMirror.EditorState.create({\n      doc: this.#code,\n      extensions: [\n        TextEditor.Config.baseConfiguration(this.#code),\n        CodeMirror.EditorState.readOnly.of(true),\n        CodeMirror.EditorView.lineWrapping,\n        this.#languageConf.of(CodeMirror.javascript.javascript()),\n      ],\n    });\n    void this.#render();\n  }\n\n  get code(): string {\n    return this.#code;\n  }\n\n  set codeLang(value: string) {\n    this.#codeLang = value;\n    void this.#render();\n  }\n\n  set timeout(value: number) {\n    this.#copyTimeout = value;\n    void this.#render();\n  }\n\n  set displayNotice(value: boolean) {\n    this.#displayNotice = value;\n    void this.#render();\n  }\n\n  set header(header: string) {\n    this.#header = header;\n    void this.#render();\n  }\n\n  set showCopyButton(show: boolean) {\n    this.#showCopyButton = show;\n    void this.#render();\n  }\n\n  set citations(citations: Citation[]) {\n    this.#citations = citations;\n  }\n\n  #onCopy(): void {\n    UI.UIUtils.copyTextToClipboard(this.#code, i18nString(UIStrings.copied));\n    this.#copied = true;\n    void this.#render();\n    clearTimeout(this.#timer);\n    this.#timer = setTimeout(() => {\n      this.#copied = false;\n      void this.#render();\n    }, this.#copyTimeout);\n  }\n\n  #renderNotice(): Lit.TemplateResult {\n    // clang-format off\n    return html`<p class=\"notice\">\n      <x-link class=\"link\" href=\"https://support.google.com/legal/answer/13505487\" jslog=${\n        VisualLogging.link('code-disclaimer').track({\n          click: true,\n        })}>\n        ${i18nString(UIStrings.disclaimer)}\n      </x-link>\n    </p>`;\n    // clang-format on\n  }\n\n  #renderCopyButton(): Lit.LitTemplate {\n    // clang-format off\n    return html`\n      <div class=\"copy-button-container\">\n        <devtools-button\n          .data=${\n            {\n              variant: Buttons.Button.Variant.ICON,\n              size: Buttons.Button.Size.SMALL,\n              jslogContext: 'copy',\n              iconName: 'copy',\n              title: i18nString(UIStrings.copy),\n            } as Buttons.Button.ButtonData\n          }\n          @click=${this.#onCopy}\n        ></devtools-button>\n        ${this.#copied ? html`<span>${i18nString(UIStrings.copied)}</span>` : Lit.nothing}\n      </div>`;\n    // clang-format on\n  }\n\n  #maybeRenderCitations(): Lit.LitTemplate {\n    if (!this.#citations.length) {\n      return Lit.nothing;\n    }\n    // clang-format off\n    return html`\n      ${this.#citations.map(citation => html`\n        <button\n          class=\"citation\"\n          jslog=${VisualLogging.link('inline-citation').track({click: true})}\n          @click=${citation.clickHandler}\n        >[${citation.index}]</button>\n      `)}\n    `;\n    // clang-format on\n  }\n\n  async #render(): Promise<void> {\n    const header = (this.#header ?? this.#codeLang) || i18nString(UIStrings.code);\n\n    if (!this.#editorState) {\n      throw new Error('Unexpected: trying to render the text editor without editorState');\n    }\n\n    // clang-format off\n    Lit.render(\n      html`<div class='codeblock' jslog=${VisualLogging.section('code')}>\n      <style>${styles}</style>\n        <div class=\"editor-wrapper\">\n        <div class=\"heading\">\n          <div class=\"heading-text-wrapper\">\n            <h4 class=\"heading-text\">${header}</h4>\n            ${this.#maybeRenderCitations()}\n          </div>\n          ${this.#showCopyButton ? this.#renderCopyButton() : Lit.nothing}\n        </div>\n        <div class=\"code\">\n          <devtools-text-editor .state=${this.#editorState}></devtools-text-editor>\n        </div>\n      </div>\n      ${this.#displayNotice ? this.#renderNotice() : Lit.nothing}\n    </div>`,\n      this.#shadow,\n      {\n        host: this,\n      },\n    );\n    // clang-format on\n\n    const editor = this.#shadow?.querySelector('devtools-text-editor')?.editor;\n\n    if (!editor) {\n      return;\n    }\n\n    const language = await languageFromToken(this.#codeLang);\n    editor.dispatch({\n      effects: this.#languageConf.reconfigure(language),\n    });\n  }\n}\n\ncustomElements.define('devtools-code-block', CodeBlock);\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    'devtools-code-block': CodeBlock;\n  }\n}\n"]}