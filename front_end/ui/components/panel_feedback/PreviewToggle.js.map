{"version":3,"file":"PreviewToggle.js","sourceRoot":"","sources":["../../../../../../../front_end/ui/components/panel_feedback/PreviewToggle.ts"],"names":[],"mappings":"AAAA,sCAAsC;AACtC,yEAAyE;AACzE,6BAA6B;AAC7B,4DAA4D;AAE5D,OAAO,8BAA8B,CAAC;AAEtC,OAAO,KAAK,IAAI,MAAM,4BAA4B,CAAC;AACnD,OAAO,KAAK,IAAI,MAAM,4BAA4B,CAAC;AACnD,OAAO,EAAC,IAAI,EAAE,OAAO,EAAE,MAAM,EAAC,MAAM,wBAAwB,CAAC;AAE7D,OAAO,mBAAmB,MAAM,wBAAwB,CAAC;AAWzD,MAAM,SAAS,GAAG;IAChB;;OAEG;IACH,uBAAuB,EAAE,wBAAwB;IACjD;;OAEG;IACH,iBAAiB,EAAE,eAAe;IAClC;;OAEG;IACH,aAAa,EAAE,YAAY;CACnB,CAAC;AAEX,MAAM,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC,iBAAiB,CAAC,+CAA+C,EAAE,SAAS,CAAC,CAAC;AACrG,MAAM,UAAU,GAAG,IAAI,CAAC,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,SAAS,EAAE,IAAI,CAAC,CAAC;AAEtE,MAAM,OAAO,aAAc,SAAQ,WAAW;IACnC,OAAO,GAAG,IAAI,CAAC,YAAY,CAAC,EAAC,IAAI,EAAE,MAAM,EAAC,CAAC,CAAC;IAErD,KAAK,GAAG,EAAE,CAAC;IACX,WAAW,GAAgB,IAAI,CAAC;IAChC,YAAY,GAAgB,IAAI,CAAC;IACjC,aAAa,CAAmB;IAChC,WAAW,GAAG,EAAE,CAAC;IACjB,iBAAiB,CAA8B;IAE/C,IAAI,IAAI,CAAC,IAAuB;QAC9B,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,IAAI,CAAC;QACvB,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,UAAU,CAAC;QACnC,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,WAAW,CAAC;QACrC,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,YAAY,CAAC;QACvC,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,UAAU,CAAC;QACnC,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC,gBAAgB,CAAC;QAC/C,IAAI,CAAC,OAAO,EAAE,CAAC;IACjB,CAAC;IAED,OAAO;QACL,MAAM,OAAO,GAAG,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,SAAS,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;QACrE,qDAAqD;QACrD,mBAAmB;QACnB,MAAM,CACJ,IAAI,CAAA;eACK,mBAAmB;;;uBAGX,OAAO;sBACR,IAAI,CAAC,gBAAgB;yBAClB,IAAI,CAAC,KAAK;;4BAEP,IAAI,CAAC,KAAK;;;UAG5B,IAAI,CAAC,YAAY,IAAI,CAAC,IAAI,CAAC,WAAW;YACtC,CAAC,CAAC,IAAI,CAAA,qDAAqD,IAAI,CAAC,YAAY,IAAI,UAAU,CAAC,SAAS,CAAC,iBAAiB,CAAC,iBAAiB;YACxI,CAAC,CAAC,OAAO;UACT,IAAI,CAAC,aAAa;YAClB,CAAC,CAAC,IAAI,CAAA,uDAAuD,IAAI,CAAC,aAAa,IAAI,UAAU,CAAC,SAAS,CAAC,aAAa,CAAC,iBAAiB;YACvI,CAAC,CAAC,OAAO;;YAEP,IAAI,CAAC,WAAW,IAAI,IAAI,CAAC,YAAY;YACrC,CAAC,CAAC,IAAI,CAAA,MAAM,IAAI,CAAC,WAAW,gCAAgC,IAAI,CAAC,YAAY,IAAI,UAAU,CAAC,SAAS,CAAC,uBAAuB,CAAC,eAAe;YAC7I,CAAC,CAAC,OAAO;;aAER,EACP,IAAI,CAAC,OAAO,EACZ;YACE,IAAI,EAAE,IAAI;SACX,CAAC,CAAC;QACL,kBAAkB;IACpB,CAAC;IAED,gBAAgB,CAAC,KAAY;QAC3B,MAAM,OAAO,GAAI,KAAK,CAAC,MAA2B,CAAC,OAAO,CAAC;QAC3D,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,UAAU,CAAC,IAAI,CAAC,WAAW,EAAE,OAAO,CAAC,CAAC;QAC/D,IAAI,CAAC,iBAAiB,EAAE,CAAC,OAAO,CAAC,CAAC;IACpC,CAAC;CACF;AAED,cAAc,CAAC,MAAM,CAAC,yBAAyB,EAAE,aAAa,CAAC,CAAC","sourcesContent":["// Copyright 2021 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n/* eslint-disable @devtools/no-lit-render-outside-of-view */\n\nimport '../../../ui/legacy/legacy.js';\n\nimport * as i18n from '../../../core/i18n/i18n.js';\nimport * as Root from '../../../core/root/root.js';\nimport {html, nothing, render} from '../../../ui/lit/lit.js';\n\nimport previewToggleStyles from './previewToggle.css.js';\n\nexport interface PreviewToggleData {\n  name: string;\n  helperText: string|null;\n  feedbackURL: string|null;\n  experiment: Root.Runtime.ExperimentName;\n  learnMoreURL?: string;\n  onChangeCallback?: (checked: boolean) => void;\n}\n\nconst UIStrings = {\n  /**\n   * @description Link text the user can click to provide feedback to the team.\n   */\n  previewTextFeedbackLink: 'Send us your feedback.',\n  /**\n   * @description Link text the user can click to provide feedback to the team.\n   */\n  shortFeedbackLink: 'Send feedback',\n  /**\n   * @description Link text the user can click to see documentation.\n   */\n  learnMoreLink: 'Learn More',\n} as const;\n\nconst str_ = i18n.i18n.registerUIStrings('ui/components/panel_feedback/PreviewToggle.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\n\nexport class PreviewToggle extends HTMLElement {\n  readonly #shadow = this.attachShadow({mode: 'open'});\n\n  #name = '';\n  #helperText: string|null = null;\n  #feedbackURL: string|null = null;\n  #learnMoreURL: string|undefined;\n  #experiment = '';\n  #onChangeCallback?: (checked: boolean) => void;\n\n  set data(data: PreviewToggleData) {\n    this.#name = data.name;\n    this.#helperText = data.helperText;\n    this.#feedbackURL = data.feedbackURL;\n    this.#learnMoreURL = data.learnMoreURL;\n    this.#experiment = data.experiment;\n    this.#onChangeCallback = data.onChangeCallback;\n    this.#render();\n  }\n\n  #render(): void {\n    const checked = Root.Runtime.experiments.isEnabled(this.#experiment);\n    // Disabled until https://crbug.com/1079231 is fixed.\n    // clang-format off\n    render(\n      html`\n      <style>${previewToggleStyles}</style>\n      <div class=\"container\">\n          <devtools-checkbox\n            ?checked=${checked}\n            @change=${this.#checkboxChanged}\n            aria-label=${this.#name} >\n            <devtools-icon name=\"experiment\" class=\"medium\">\n          </devtools-icon>${this.#name}\n          </devtools-checkbox>\n        <div class=\"spacer\"></div>\n        ${this.#feedbackURL && !this.#helperText\n          ? html`<div class=\"feedback\"><x-link class=\"x-link\" href=${this.#feedbackURL}>${i18nString(UIStrings.shortFeedbackLink)}</x-link></div>`\n          : nothing}\n        ${this.#learnMoreURL\n          ? html`<div class=\"learn-more\"><x-link class=\"x-link\" href=${this.#learnMoreURL}>${i18nString(UIStrings.learnMoreLink)}</x-link></div>`\n          : nothing}\n        <div class=\"helper\">\n          ${this.#helperText && this.#feedbackURL\n            ? html`<p>${this.#helperText} <x-link class=\"x-link\" href=${this.#feedbackURL}>${i18nString(UIStrings.previewTextFeedbackLink)}</x-link></p>`\n            : nothing}\n        </div>\n      </div>`,\n      this.#shadow,\n      {\n        host: this,\n      });\n    // clang-format on\n  }\n\n  #checkboxChanged(event: Event): void {\n    const checked = (event.target as HTMLInputElement).checked;\n    Root.Runtime.experiments.setEnabled(this.#experiment, checked);\n    this.#onChangeCallback?.(checked);\n  }\n}\n\ncustomElements.define('devtools-preview-toggle', PreviewToggle);\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    'devtools-preview-toggle': PreviewToggle;\n  }\n}\n"]}