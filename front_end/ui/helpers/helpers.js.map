{
  "version": 3,
  "sources": ["../../../../../../front_end/ui/helpers/OpenInNewTab.ts"],
  "sourcesContent": ["// Copyright 2021 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\n/*\n * Copyright (C) 2011 Google Inc.  All rights reserved.\n * Copyright (C) 2006, 2007, 2008 Apple Inc.  All rights reserved.\n * Copyright (C) 2007 Matt Lilek (pewtermoose@gmail.com).\n * Copyright (C) 2009 Joseph Pecoraro\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions\n * are met:\n *\n * 1.  Redistributions of source code must retain the above copyright\n *     notice, this list of conditions and the following disclaimer.\n * 2.  Redistributions in binary form must reproduce the above copyright\n *     notice, this list of conditions and the following disclaimer in the\n *     documentation and/or other materials provided with the distribution.\n * 3.  Neither the name of Apple Computer, Inc. (\"Apple\") nor the names of\n *     its contributors may be used to endorse or promote products derived\n *     from this software without specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY APPLE AND ITS CONTRIBUTORS \"AS IS\" AND ANY\n * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL APPLE OR ITS CONTRIBUTORS BE LIABLE FOR ANY\n * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF\n * THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\nimport * as Common from '../../core/common/common.js';\nimport * as Host from '../../core/host/host.js';\nimport * as Platform from '../../core/platform/platform.js';\nimport * as Root from '../../core/root/root.js';\nimport * as SDK from '../../core/sdk/sdk.js';\n\n/**\n * Opens the given `url` in a new Chrome tab.\n *\n * If the `url` is a Google owned documentation page (currently that includes\n * `web.dev`, `developers.google.com`, and `developer.chrome.com`), the `url`\n * will also be checked for UTM parameters:\n *\n * - If no `utm_source` search parameter is present, this method will add a new\n *   search parameter `utm_source=devtools` to `url`.\n * - If no `utm_campaign` search parameter is present, and DevTools is running\n *   within a branded build, this method will add `utm_campaign=<channel>` to\n *   the search parameters, with `<channel>` being the release channel of\n *   Chrome (\"stable\", \"beta\", \"dev\", or \"canary\").\n *\n * @param url the URL to open in a new tab.\n * @throws TypeError if `url` is not a valid URL.\n * @see https://en.wikipedia.org/wiki/UTM_parameters\n */\nexport function openInNewTab(url: URL|string): void {\n  url = new URL(url);\n  if (Common.ParsedURL.schemeIs(url, 'javascript:')) {\n    return;\n  }\n\n  // Navigating to a chrome:// link via a normal anchor doesn't work, so we \"navigate\"\n  // there using CDP.\n  if (Common.ParsedURL.schemeIs(url, 'chrome:')) {\n    const rootTarget = SDK.TargetManager.TargetManager.instance().rootTarget();\n    if (rootTarget === null) {\n      return;\n    }\n\n    void rootTarget.targetAgent().invoke_createTarget({url: url.toString()}).then(result => {\n      if (result.getError()) {\n        Host.InspectorFrontendHost.InspectorFrontendHostInstance.openInNewTab(Platform.DevToolsPath.urlString`${url}`);\n      }\n    });\n  } else {\n    if (['developer.chrome.com', 'developers.google.com', 'web.dev'].includes(url.hostname)) {\n      if (!url.searchParams.has('utm_source')) {\n        url.searchParams.append('utm_source', 'devtools');\n      }\n      const {channel} = Root.Runtime.hostConfig;\n      if (!url.searchParams.has('utm_campaign') && typeof channel === 'string') {\n        url.searchParams.append('utm_campaign', channel);\n      }\n    }\n    Host.InspectorFrontendHost.InspectorFrontendHostInstance.openInNewTab(Platform.DevToolsPath.urlString`${url}`);\n  }\n}\n"],
  "mappings": ";AAmCA,YAAY,YAAY;AACxB,YAAY,UAAU;AACtB,YAAY,cAAc;AAC1B,YAAY,UAAU;AACtB,YAAY,SAAS;AAoBf,SAAU,aAAa,KAAe;AAC1C,QAAM,IAAI,IAAI,GAAG;AACjB,MAAW,iBAAU,SAAS,KAAK,aAAa,GAAG;AACjD;EACF;AAIA,MAAW,iBAAU,SAAS,KAAK,SAAS,GAAG;AAC7C,UAAM,aAAiB,kBAAc,cAAc,SAAQ,EAAG,WAAU;AACxE,QAAI,eAAe,MAAM;AACvB;IACF;AAEA,SAAK,WAAW,YAAW,EAAG,oBAAoB,EAAC,KAAK,IAAI,SAAQ,EAAE,CAAC,EAAE,KAAK,YAAS;AACrF,UAAI,OAAO,SAAQ,GAAI;AACrB,QAAK,2BAAsB,8BAA8B,aAAsB,sBAAa,YAAY,GAAG,EAAE;MAC/G;IACF,CAAC;EACH,OAAO;AACL,QAAI,CAAC,wBAAwB,yBAAyB,SAAS,EAAE,SAAS,IAAI,QAAQ,GAAG;AACvF,UAAI,CAAC,IAAI,aAAa,IAAI,YAAY,GAAG;AACvC,YAAI,aAAa,OAAO,cAAc,UAAU;MAClD;AACA,YAAM,EAAC,QAAO,IAAS,aAAQ;AAC/B,UAAI,CAAC,IAAI,aAAa,IAAI,cAAc,KAAK,OAAO,YAAY,UAAU;AACxE,YAAI,aAAa,OAAO,gBAAgB,OAAO;MACjD;IACF;AACA,IAAK,2BAAsB,8BAA8B,aAAsB,sBAAa,YAAY,GAAG,EAAE;EAC/G;AACF;",
  "names": []
}
