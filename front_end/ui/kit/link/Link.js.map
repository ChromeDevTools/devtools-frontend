{"version":3,"file":"Link.js","sourceRoot":"","sources":["../../../../../../../front_end/ui/kit/link/Link.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright 2025 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n/* eslint-disable @devtools/no-lit-render-outside-of-view */\n\nimport * as Platform from '../../../core/platform/platform.js';\nimport * as UIHelpers from '../../helpers/helpers.js';\nimport {html, render} from '../../lit/lit.js';\nimport * as VisualLogging from '../../visual_logging/visual_logging.js';\n\nimport linkStyles from './link.css.js';\n\n/**\n * A simple icon component to handle external links.\n * Handles both normal links `https://example.com`\n * and chrome links `chrome://flags`.\n *\n * html`\n *   <devtools-link href=\"\"></devtools-link>\n * `;\n * ```\n *\n * @property href - The href to the place the link wants to navigate\n * @property jslogContext - The `\"jslogcontext\"` attribute is reflected as a property.\n *\n * @attribute href - The href to the place the link wants to navigate\n * @attribute jslogcontext -\n * The context for the `jslog` attribute. A `jslog`\n * attribute is generated automatically with the\n * provided context.\n */\nexport class Link extends HTMLElement {\n  readonly #shadow = this.attachShadow({mode: 'open'});\n\n  static readonly observedAttributes = ['href', 'jslogcontext'];\n\n  connectedCallback(): void {\n    if (!this.hasAttribute('tabindex')) {\n      this.setAttribute('tabindex', '0');\n    }\n    this.#setDefaultTitle();\n\n    this.setAttribute('role', 'link');\n    this.setAttribute('target', '_blank');\n\n    this.addEventListener('click', this.#onClick);\n    this.addEventListener('keydown', this.#onKeyDown);\n    this.#render();\n  }\n\n  disconnectedCallback(): void {\n    this.removeEventListener('click', this.#onClick);\n    this.removeEventListener('keydown', this.#onKeyDown);\n  }\n\n  #handleOpeningLink(event: Event): void {\n    const href = this.href as Platform.DevToolsPath.UrlString | undefined;\n    if (!href) {\n      return;\n    }\n\n    UIHelpers.openInNewTab(href);\n\n    event.consume();\n  }\n\n  get href(): string|null {\n    return this.getAttribute('href');\n  }\n\n  set href(href: Platform.DevToolsPath.UrlString) {\n    this.setAttribute('href', href);\n  }\n\n  get jslogContext(): string|null {\n    return this.getAttribute('jslogcontext');\n  }\n\n  set jslogContext(jslogContext: string) {\n    this.setAttribute('jslogcontext', jslogContext);\n  }\n\n  #onJslogContextChange(): void {\n    const href = this.href;\n    if (!href) {\n      throw new Error('`href` is a required attribute.');\n    }\n    const urlForContext = new URL(href);\n    urlForContext.search = '';\n    const jslogContext = Platform.StringUtilities.toKebabCase(\n        this.jslogContext ?? urlForContext.toString(),\n    );\n    const jslog = VisualLogging.link().track({click: true, keydown: 'Enter|Space'}).context(jslogContext);\n    this.setAttribute('jslog', jslog.toString());\n  }\n\n  #setDefaultTitle(): void {\n    if (!this.hasAttribute('title') && this.href) {\n      this.setAttribute('title', this.href);\n    }\n  }\n\n  attributeChangedCallback(\n      name: string,\n      oldValue: string|null,\n      newValue: string|null,\n      ): void {\n    if (oldValue !== newValue) {\n      return;\n    }\n    if (name === 'jslogcontext') {\n      return this.#onJslogContextChange();\n    }\n\n    if (name === 'href') {\n      this.#setDefaultTitle();\n    }\n\n    this.#render();\n  }\n\n  #onClick = (event: Event): void => {\n    this.#handleOpeningLink(event);\n  };\n\n  #onKeyDown = (event: KeyboardEvent): void => {\n    if (Platform.KeyboardUtilities.isEnterOrSpaceKey(event)) {\n      this.#handleOpeningLink(event);\n    }\n  };\n\n  #render(): void {\n    // clang-format off\n    render(\n      html`<style>\n          ${linkStyles}\n        </style><slot></slot>`,\n      this.#shadow,\n      { host: this },\n    );\n    // clang-format on\n  }\n}\n\ncustomElements.define('devtools-link', Link);\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    'devtools-link': Link;\n  }\n}\n"]}