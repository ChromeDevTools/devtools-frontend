{"version":3,"file":"ReportView.js","sourceRoot":"","sources":["../../../../../../front_end/ui/legacy/ReportView.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright 2016 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n/* eslint-disable @devtools/no-imperative-dom-api */\n\nimport './Toolbar.js';\n\nimport type * as Buttons from '../components/buttons/buttons.js';\nimport * as VisualLogging from '../visual_logging/visual_logging.js';\n\nimport * as ARIAUtils from './ARIAUtils.js';\nimport reportViewStyles from './reportView.css.js';\nimport type {Toolbar} from './Toolbar.js';\nimport {Tooltip} from './Tooltip.js';\nimport {VBox} from './Widget.js';\nexport class ReportView extends VBox {\n  private readonly contentBox: HTMLElement;\n  private headerElement: HTMLElement;\n  private titleElement: HTMLElement;\n  private readonly sectionList: HTMLElement;\n  private subtitleElement?: HTMLElement;\n  private urlElement?: HTMLElement;\n  constructor(title?: string) {\n    super({useShadowDom: true});\n    this.registerRequiredCSS(reportViewStyles);\n\n    this.contentBox = this.contentElement.createChild('div', 'report-content-box');\n    this.headerElement = this.contentBox.createChild('div', 'report-header vbox');\n    this.titleElement = this.headerElement.createChild('div', 'report-title');\n    if (title) {\n      this.titleElement.textContent = title;\n    } else {\n      this.headerElement.classList.add('hidden');\n    }\n    ARIAUtils.markAsHeading(this.titleElement, 1);\n\n    this.sectionList = this.contentBox.createChild('div', 'vbox');\n  }\n\n  getHeaderElement(): Element {\n    return this.headerElement;\n  }\n\n  setTitle(title: string): void {\n    if (this.titleElement.textContent === title) {\n      return;\n    }\n    this.titleElement.textContent = title;\n    this.headerElement.classList.toggle('hidden', Boolean(title));\n  }\n\n  setSubtitle(subtitle: string): void {\n    if (this.subtitleElement?.textContent === subtitle) {\n      return;\n    }\n    if (!this.subtitleElement) {\n      this.subtitleElement = this.headerElement.createChild('div', 'report-subtitle');\n    }\n    this.subtitleElement.textContent = subtitle;\n  }\n\n  setURL(link: Element|null): void {\n    if (!this.urlElement) {\n      this.urlElement = this.headerElement.createChild('div', 'report-url link');\n    }\n    this.urlElement.removeChildren();\n    if (link) {\n      this.urlElement.appendChild(link);\n    }\n    this.urlElement.setAttribute('jslog', `${VisualLogging.link('source-location').track({click: true})}`);\n  }\n\n  createToolbar(): Toolbar {\n    return this.headerElement.createChild('devtools-toolbar');\n  }\n\n  appendSection(title: string, className?: string, jslogContext?: string): Section {\n    const section = new Section(title, className, jslogContext);\n    section.show(this.sectionList);\n    return section;\n  }\n\n  sortSections(comparator: (arg0: Section, arg1: Section) => number): void {\n    const sections = (this.children().slice() as Section[]);\n    const sorted = sections.every((_, i, a) => !i || comparator(a[i - 1], a[i]) <= 0);\n    if (sorted) {\n      return;\n    }\n\n    this.detachChildWidgets();\n    sections.sort(comparator);\n    for (const section of sections) {\n      section.show(this.sectionList);\n    }\n  }\n\n  setHeaderVisible(visible: boolean): void {\n    this.headerElement.classList.toggle('hidden', !visible);\n  }\n\n  setBodyScrollable(scrollable: boolean): void {\n    this.contentBox.classList.toggle('no-scroll', !scrollable);\n  }\n}\n\nexport class Section extends VBox {\n  private readonly headerElement: HTMLElement;\n  private headerButtons: Buttons.Button.Button[] = [];\n  private titleElement: HTMLElement;\n  private fieldList: HTMLElement;\n  private readonly fieldMap = new Map<string, Element>();\n  constructor(title: string, className?: string, public jslogContext?: string) {\n    super();\n    this.element.classList.add('report-section');\n    if (className) {\n      this.element.classList.add(className);\n    }\n    if (jslogContext) {\n      this.element.setAttribute('jslog', `${VisualLogging.section(jslogContext)}`);\n    }\n    this.jslogContext = jslogContext;\n    this.headerElement = this.element.createChild('div', 'report-section-header');\n    this.titleElement = this.headerElement.createChild('div', 'report-section-title');\n    this.setTitle(title);\n    ARIAUtils.markAsHeading(this.titleElement, 2);\n    this.fieldList = this.element.createChild('div', 'vbox');\n  }\n\n  title(): string {\n    return this.titleElement.textContent || '';\n  }\n\n  getTitleElement(): Element {\n    return this.titleElement;\n  }\n\n  getFieldElement(): HTMLElement {\n    return this.fieldList;\n  }\n  appendFieldWithCustomView(customElement: HTMLElement): void {\n    this.fieldList.append(customElement);\n  }\n\n  setTitle(title: string, tooltip?: string): void {\n    if (this.titleElement.textContent !== title) {\n      this.titleElement.textContent = title;\n    }\n    Tooltip.install(this.titleElement, tooltip || '');\n    this.titleElement.classList.toggle('hidden', !this.titleElement.textContent);\n  }\n\n  /**\n   * Declares the overall container to be a group and assigns a title.\n   */\n  setUiGroupTitle(groupTitle: string): void {\n    ARIAUtils.markAsGroup(this.element);\n    ARIAUtils.setLabel(this.element, groupTitle);\n  }\n\n  appendButtonToHeader(button: Buttons.Button.Button): void {\n    this.headerButtons.push(button);\n    this.headerElement.appendChild(button);\n  }\n\n  setHeaderButtonsState(disabled: boolean): void {\n    this.headerButtons.map(button => {\n      button.disabled = disabled;\n    });\n  }\n\n  appendField(title: string, textValue?: string): HTMLElement {\n    let row = this.fieldMap.get(title);\n    if (!row) {\n      row = this.fieldList.createChild('div', 'report-field');\n      row.createChild('div', 'report-field-name').textContent = title;\n      this.fieldMap.set(title, row);\n      row.createChild('div', 'report-field-value');\n    }\n    if (textValue && row.lastElementChild) {\n      row.lastElementChild.textContent = textValue;\n    }\n    return row.lastElementChild as HTMLElement;\n  }\n\n  appendFlexedField(title: string, textValue?: string): HTMLElement {\n    const field = this.appendField(title, textValue);\n    field.classList.add('report-field-value-is-flexed');\n    return field;\n  }\n\n  removeField(title: string): void {\n    const row = this.fieldMap.get(title);\n    if (row) {\n      row.remove();\n    }\n    this.fieldMap.delete(title);\n  }\n\n  setFieldVisible(title: string, visible: boolean): void {\n    const row = this.fieldMap.get(title);\n    if (row) {\n      row.classList.toggle('hidden', !visible);\n    }\n  }\n\n  fieldValue(title: string): Element|null {\n    const row = this.fieldMap.get(title);\n    return row ? row.lastElementChild : null;\n  }\n\n  appendRow(): HTMLElement {\n    return this.fieldList.createChild('div', 'report-row');\n  }\n\n  appendSelectableRow(): HTMLElement {\n    return this.fieldList.createChild('div', 'report-row report-row-selectable');\n  }\n\n  clearContent(): void {\n    this.fieldList.removeChildren();\n    this.fieldMap.clear();\n  }\n\n  markFieldListAsGroup(): void {\n    ARIAUtils.markAsGroup(this.fieldList);\n    ARIAUtils.setLabel(this.fieldList, this.title());\n  }\n\n  setIconMasked(masked: boolean): void {\n    this.element.classList.toggle('show-mask', masked);\n  }\n}\n"]}