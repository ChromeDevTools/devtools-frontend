{"version":3,"file":"SearchableView.js","sourceRoot":"","sources":["../../../../../../front_end/ui/legacy/SearchableView.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright 2021 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n/* eslint-disable @devtools/no-imperative-dom-api */\n\n/*\n * Copyright (C) 2006, 2007, 2008 Apple Inc.  All rights reserved.\n * Copyright (C) 2007 Matt Lilek (pewtermoose@gmail.com).\n * Copyright (C) 2009 Joseph Pecoraro\n * Copyright (C) 2011 Google Inc. All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions\n * are met:\n *\n * 1.  Redistributions of source code must retain the above copyright\n *     notice, this list of conditions and the following disclaimer.\n * 2.  Redistributions in binary form must reproduce the above copyright\n *     notice, this list of conditions and the following disclaimer in the\n *     documentation and/or other materials provided with the distribution.\n * 3.  Neither the name of Apple Computer, Inc. (\"Apple\") nor the names of\n *     its contributors may be used to endorse or promote products derived\n *     from this software without specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY APPLE AND ITS CONTRIBUTORS \"AS IS\" AND ANY\n * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL APPLE OR ITS CONTRIBUTORS BE LIABLE FOR ANY\n * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF\n * THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\nimport './Toolbar.js'; // eslint-disable-line import/no-duplicates\n\nimport * as Common from '../../core/common/common.js';\nimport * as i18n from '../../core/i18n/i18n.js';\nimport * as Platform from '../../core/platform/platform.js';\nimport * as VisualLogging from '../../ui/visual_logging/visual_logging.js';\nimport * as Buttons from '../components/buttons/buttons.js';\nimport * as IconButton from '../components/icon_button/icon_button.js';\n\nimport * as ARIAUtils from './ARIAUtils.js';\nimport {InspectorView} from './InspectorView.js';\nimport searchableViewStyles from './searchableView.css.js';\nimport {ToolbarButton, ToolbarText, ToolbarToggle} from './Toolbar.js';  // eslint-disable-line import/no-duplicates\nimport {createHistoryInput, createTextButton} from './UIUtils.js';\nimport {VBox} from './Widget.js';\n\nconst UIStrings = {\n  /**\n   * @description Text on a button to replace one instance with input text for the ctrl+F search bar\n   */\n  replace: 'Replace',\n  /**\n   * @description Tooltip text on a toggle to enable replacing one instance with input text for the ctrl+F search bar\n   */\n  enableFindAndReplace: 'Find and replace',\n  /**\n   * @description Tooltip text on a toggle to disable replacing one instance with input text for the ctrl+F search bar\n   */\n  disableFindAndReplace: 'Disable find and replace',\n  /**\n   * @description Text to find an item\n   */\n  findString: 'Find',\n  /**\n   * @description Tooltip text on a button to search previous instance for the ctrl+F search bar\n   */\n  searchPrevious: 'Show previous result',\n  /**\n   * @description Tooltip text on a button to search next instance for the ctrl+F search bar\n   */\n  searchNext: 'Show next result',\n  /**\n   * @description Tooltip text on a toggle to enable/disable search by matching the exact case.\n   */\n  matchCase: 'Match case',\n  /**\n   * @description Tooltip text on a toggle to enable/disable search by matching the exact word.\n   */\n  matchWholeWord: 'Match whole word',\n  /**\n   * @description Tooltip text on a toggle to enable/disable searching with regular expression.\n   */\n  useRegularExpression: 'Use regular expression',\n  /**\n   * @description Tooltip text on a button to close the search bar\n   */\n  closeSearchBar: 'Close search bar',\n  /**\n   * @description Text on a button to replace all instances with input text for the ctrl+F search bar\n   */\n  replaceAll: 'Replace all',\n  /**\n   * @description Text to indicate the current match index and the total number of matches for the ctrl+F search bar\n   * @example {2} PH1\n   * @example {3} PH2\n   */\n  dOfD: '{PH1} of {PH2}',\n  /**\n   * @description Tooltip text to indicate the current match index and the total number of matches for the ctrl+F search bar\n   * @example {2} PH1\n   * @example {3} PH2\n   */\n  accessibledOfD: 'Shows result {PH1} of {PH2}',\n  /**\n   * @description Text to indicate search result for the ctrl+F search bar\n   */\n  matchString: '1 match',\n  /**\n   * @description Text to indicate search result for the ctrl+F search bar\n   * @example {2} PH1\n   */\n  dMatches: '{PH1} matches',\n  /**\n   * @description Text on a button to search previous instance for the ctrl+F search bar\n   */\n  clearInput: 'Clear',\n} as const;\nconst str_ = i18n.i18n.registerUIStrings('ui/legacy/SearchableView.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\n\nfunction createClearButton(jslogContext: string): Buttons.Button.Button {\n  const button = new Buttons.Button.Button();\n  button.data = {\n    variant: Buttons.Button.Variant.ICON,\n    size: Buttons.Button.Size.SMALL,\n    jslogContext,\n    title: i18nString(UIStrings.clearInput),\n    iconName: 'cross-circle-filled',\n  };\n  button.ariaLabel = i18nString(UIStrings.clearInput);\n  button.classList.add('clear-button');\n  button.tabIndex = -1;\n  return button;\n}\nexport class SearchableView extends VBox {\n  protected searchProvider: Searchable;\n  private replaceProvider: Replaceable|null;\n  // TODO(crbug.com/1172300) Ignored during the jsdoc to ts migration\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  private setting: Common.Settings.Setting<any>|null;\n  private replaceable: boolean;\n  private readonly footerElementContainer: HTMLElement;\n  private readonly footerElement: HTMLElement;\n  private replaceToggleButton: ToolbarToggle;\n  private searchInputElement: HTMLInputElement;\n  private matchesElement: HTMLElement;\n  private searchNavigationPrevElement: ToolbarButton;\n  private searchNavigationNextElement: ToolbarButton;\n  private readonly replaceInputElement: HTMLInputElement;\n  private caseSensitiveButton: Buttons.Button.Button|undefined;\n  private wholeWordButton: Buttons.Button.Button|undefined;\n  private regexButton: Buttons.Button.Button|undefined;\n  private replaceButtonElement: Buttons.Button.Button;\n  private replaceAllButtonElement: Buttons.Button.Button;\n  private minimalSearchQuerySize: number;\n  private searchIsVisible?: boolean;\n  private currentQuery?: string;\n  private valueChangedTimeoutId?: number;\n\n  constructor(searchable: Searchable, replaceable: Replaceable|null, settingName?: string, element?: HTMLElement) {\n    super(element, {useShadowDom: true});\n    this.registerRequiredCSS(searchableViewStyles);\n    searchableViewsByElement.set(this.element, this);\n\n    this.searchProvider = searchable;\n    this.replaceProvider = replaceable;\n    this.setting = settingName ? Common.Settings.Settings.instance().createSetting(settingName, {}) : null;\n    this.replaceable = false;\n\n    this.contentElement.createChild('slot');\n    this.footerElementContainer = this.contentElement.createChild('div', 'search-bar hidden');\n    this.footerElementContainer.style.order = '100';\n    this.footerElement = this.footerElementContainer.createChild('div', 'toolbar-search');\n    this.footerElement.setAttribute('jslog', `${VisualLogging.toolbar('search').track({resize: true})}`);\n\n    const replaceToggleToolbar = this.footerElement.createChild('devtools-toolbar', 'replace-toggle-toolbar');\n    this.replaceToggleButton =\n        new ToolbarToggle(i18nString(UIStrings.enableFindAndReplace), 'replace', undefined, 'replace');\n    ARIAUtils.setLabel(this.replaceToggleButton.element, i18nString(UIStrings.enableFindAndReplace));\n    this.replaceToggleButton.addEventListener(ToolbarButton.Events.CLICK, this.toggleReplace, this);\n    replaceToggleToolbar.appendToolbarItem(this.replaceToggleButton);\n\n    // Elements within `searchInputElements` are added according to their expected tab order.\n    const searchInputElements = this.footerElement.createChild('div', 'search-inputs');\n    const iconAndInput = searchInputElements.createChild('div', 'icon-and-input');\n    const searchIcon = IconButton.Icon.create('search');\n    iconAndInput.appendChild(searchIcon);\n\n    this.searchInputElement = createHistoryInput('search', 'search-replace search');\n    this.searchInputElement.id = 'search-input-field';\n    this.searchInputElement.autocomplete = 'off';\n    this.searchInputElement.placeholder = i18nString(UIStrings.findString);\n    this.searchInputElement.setAttribute(\n        'jslog',\n        `${VisualLogging.textField('search').track({change: true, keydown: 'ArrowUp|ArrowDown|Enter|Escape'})}`);\n    this.searchInputElement.addEventListener('keydown', this.onSearchKeyDown.bind(this), true);\n    this.searchInputElement.addEventListener('input', this.onInput.bind(this), false);\n    iconAndInput.appendChild(this.searchInputElement);\n\n    const replaceInputElements = searchInputElements.createChild('div', 'replace-element input-line');\n    this.replaceInputElement = replaceInputElements.createChild('input', 'search-replace');\n    this.replaceInputElement.addEventListener('keydown', this.onReplaceKeyDown.bind(this), true);\n    this.replaceInputElement.placeholder = i18nString(UIStrings.replace);\n    this.replaceInputElement.setAttribute(\n        'jslog', `${VisualLogging.textField('replace').track({change: true, keydown: 'Enter'})}`);\n\n    const replaceInputClearButton = createClearButton('clear-replace-input');\n    replaceInputClearButton.addEventListener('click', () => {\n      this.replaceInputElement.value = '';\n      this.replaceInputElement.focus();\n    });\n    replaceInputElements.appendChild(replaceInputClearButton);\n\n    const searchConfigButtons = searchInputElements.createChild('div', 'search-config-buttons');\n    const clearButton = createClearButton('clear-search-input');\n    clearButton.addEventListener('click', () => {\n      this.searchInputElement.value = '';\n      this.clearSearch();\n      this.searchInputElement.focus();\n    });\n    searchConfigButtons.appendChild(clearButton);\n\n    const saveSettingAndPerformSearch = (): void => {\n      this.saveSetting();\n      this.performSearch(false, true);\n    };\n\n    if (this.searchProvider.supportsCaseSensitiveSearch()) {\n      const iconName = 'match-case';\n      this.caseSensitiveButton = new Buttons.Button.Button();\n      this.caseSensitiveButton.data = {\n        variant: Buttons.Button.Variant.ICON_TOGGLE,\n        size: Buttons.Button.Size.SMALL,\n        iconName,\n        toggledIconName: iconName,\n        toggled: false,\n        toggleType: Buttons.Button.ToggleType.PRIMARY,\n        title: i18nString(UIStrings.matchCase),\n        jslogContext: iconName,\n      };\n      ARIAUtils.setLabel(this.caseSensitiveButton, i18nString(UIStrings.matchCase));\n      this.caseSensitiveButton.addEventListener('click', saveSettingAndPerformSearch);\n      searchConfigButtons.appendChild(this.caseSensitiveButton);\n    }\n\n    if (this.searchProvider.supportsWholeWordSearch()) {\n      const iconName = 'match-whole-word';\n      this.wholeWordButton = new Buttons.Button.Button();\n      this.wholeWordButton.data = {\n        variant: Buttons.Button.Variant.ICON_TOGGLE,\n        size: Buttons.Button.Size.SMALL,\n        iconName,\n        toggledIconName: iconName,\n        toggled: false,\n        toggleType: Buttons.Button.ToggleType.PRIMARY,\n        title: i18nString(UIStrings.matchWholeWord),\n        jslogContext: iconName,\n      };\n      ARIAUtils.setLabel(this.wholeWordButton, i18nString(UIStrings.matchWholeWord));\n      this.wholeWordButton.addEventListener('click', saveSettingAndPerformSearch);\n      searchConfigButtons.appendChild(this.wholeWordButton);\n    }\n\n    if (this.searchProvider.supportsRegexSearch()) {\n      const iconName = 'regular-expression';\n      this.regexButton = new Buttons.Button.Button();\n      this.regexButton.data = {\n        variant: Buttons.Button.Variant.ICON_TOGGLE,\n        size: Buttons.Button.Size.SMALL,\n        iconName,\n        toggledIconName: iconName,\n        toggleType: Buttons.Button.ToggleType.PRIMARY,\n        toggled: false,\n        jslogContext: iconName,\n        title: i18nString(UIStrings.useRegularExpression),\n      };\n      ARIAUtils.setLabel(this.regexButton, i18nString(UIStrings.useRegularExpression));\n      this.regexButton.addEventListener('click', saveSettingAndPerformSearch);\n      searchConfigButtons.appendChild(this.regexButton);\n    }\n\n    // Introduce a separate element for the background of the `Find` input line (instead of\n    // grouping together the `Find` input together with all search config option buttons\n    // and styling the parent's background).\n    // This allows for a tabbing order that can jump from the `Find` input, to\n    // the `Replace` input, and back to all search config option buttons.\n    searchInputElements.createChild('div', 'input-line search-input-background');\n\n    const buttonsContainer = this.footerElement.createChild('div', 'toolbar-search-buttons');\n    const firstRowButtons = buttonsContainer.createChild('div', 'first-row-buttons');\n\n    const toolbar = firstRowButtons.createChild('devtools-toolbar', 'toolbar-search-options');\n    this.searchNavigationPrevElement =\n        new ToolbarButton(i18nString(UIStrings.searchPrevious), 'chevron-up', undefined, 'select-previous');\n    this.searchNavigationPrevElement.addEventListener(ToolbarButton.Events.CLICK, () => this.onPrevButtonSearch());\n    toolbar.appendToolbarItem(this.searchNavigationPrevElement);\n    ARIAUtils.setLabel(this.searchNavigationPrevElement.element, i18nString(UIStrings.searchPrevious));\n\n    this.searchNavigationNextElement =\n        new ToolbarButton(i18nString(UIStrings.searchNext), 'chevron-down', undefined, 'select-next');\n    this.searchNavigationNextElement.addEventListener(ToolbarButton.Events.CLICK, () => this.onNextButtonSearch());\n    ARIAUtils.setLabel(this.searchNavigationNextElement.element, i18nString(UIStrings.searchNext));\n    toolbar.appendToolbarItem(this.searchNavigationNextElement);\n\n    const matchesText = new ToolbarText();\n    this.matchesElement = matchesText.element;\n    this.matchesElement.style.fontVariantNumeric = 'tabular-nums';\n    this.matchesElement.style.color = 'var(--sys-color-on-surface-subtle)';\n    this.matchesElement.style.padding = '0 var(--sys-size-3)';\n    this.matchesElement.classList.add('search-results-matches');\n    toolbar.appendToolbarItem(matchesText);\n\n    const cancelButtonElement = new Buttons.Button.Button();\n    cancelButtonElement.data = {\n      variant: Buttons.Button.Variant.TOOLBAR,\n      size: Buttons.Button.Size.REGULAR,\n      iconName: 'cross',\n      title: i18nString(UIStrings.closeSearchBar),\n      jslogContext: 'close-search',\n    };\n\n    cancelButtonElement.classList.add('close-search-button');\n    cancelButtonElement.addEventListener('click', () => this.closeSearch());\n    firstRowButtons.appendChild(cancelButtonElement);\n\n    const secondRowButtons = buttonsContainer.createChild('div', 'second-row-buttons replace-element');\n\n    this.replaceButtonElement = createTextButton(i18nString(UIStrings.replace), this.replace.bind(this), {\n      className: 'search-action-button',\n      jslogContext: 'replace',\n    });\n    this.replaceButtonElement.disabled = true;\n    secondRowButtons.appendChild(this.replaceButtonElement);\n\n    this.replaceAllButtonElement = createTextButton(i18nString(UIStrings.replaceAll), this.replaceAll.bind(this), {\n      className: 'search-action-button',\n      jslogContext: 'replace-all',\n    });\n\n    secondRowButtons.appendChild(this.replaceAllButtonElement);\n    this.replaceAllButtonElement.disabled = true;\n\n    this.minimalSearchQuerySize = 3;\n    this.loadSetting();\n  }\n\n  static fromElement(element: Element|null): SearchableView|null {\n    let view: (SearchableView|null)|null = null;\n    while (element && !view) {\n      view = searchableViewsByElement.get(element) || null;\n      element = element.parentElementOrShadowHost();\n    }\n    return view;\n  }\n\n  private toggleReplace(): void {\n    const replaceEnabled = this.replaceToggleButton.isToggled();\n    const label =\n        replaceEnabled ? i18nString(UIStrings.disableFindAndReplace) : i18nString(UIStrings.enableFindAndReplace);\n    ARIAUtils.setLabel(this.replaceToggleButton.element, label);\n    this.replaceToggleButton.element.title = label;\n    this.updateSecondRowVisibility();\n  }\n\n  private saveSetting(): void {\n    if (!this.setting) {\n      return;\n    }\n    const settingValue = this.setting.get() || {};\n    if (this.caseSensitiveButton) {\n      settingValue.caseSensitive = this.caseSensitiveButton.toggled;\n    }\n    if (this.wholeWordButton) {\n      settingValue.wholeWord = this.wholeWordButton.toggled;\n    }\n    if (this.regexButton) {\n      settingValue.isRegex = this.regexButton.toggled;\n    }\n    this.setting.set(settingValue);\n  }\n\n  private loadSetting(): void {\n    const settingValue = this.setting ? (this.setting.get() || {}) : {};\n    if (this.caseSensitiveButton) {\n      this.caseSensitiveButton.toggled = Boolean(settingValue.caseSensitive);\n    }\n    if (this.wholeWordButton) {\n      this.wholeWordButton.toggled = Boolean(settingValue.wholeWord);\n    }\n    if (this.regexButton) {\n      this.regexButton.toggled = Boolean(settingValue.isRegex);\n    }\n  }\n\n  setMinimalSearchQuerySize(minimalSearchQuerySize: number): void {\n    this.minimalSearchQuerySize = minimalSearchQuerySize;\n  }\n\n  setPlaceholder(placeholder: string, ariaLabel?: string): void {\n    this.searchInputElement.placeholder = placeholder;\n    if (ariaLabel) {\n      ARIAUtils.setLabel(this.searchInputElement, ariaLabel);\n    }\n  }\n\n  setReplaceable(replaceable: boolean): void {\n    this.replaceable = replaceable;\n  }\n\n  updateSearchMatchesCount(matches: number): void {\n    if (this.searchProvider.currentSearchMatches === matches) {\n      return;\n    }\n    this.searchProvider.currentSearchMatches = matches;\n    this.updateSearchMatchesCountAndCurrentMatchIndex(this.searchProvider.currentQuery ? matches : 0, -1);\n  }\n\n  updateCurrentMatchIndex(currentMatchIndex: number): void {\n    if (!this.searchProvider.currentSearchMatches) {\n      return;\n    }\n\n    this.updateSearchMatchesCountAndCurrentMatchIndex(this.searchProvider.currentSearchMatches, currentMatchIndex);\n  }\n\n  closeSearch(): void {\n    this.cancelSearch();\n    if (this.footerElementContainer.hasFocus()) {\n      this.focus();\n    }\n\n    this.searchProvider.onSearchClosed?.();\n  }\n\n  private toggleSearchBar(toggled: boolean): void {\n    this.footerElementContainer.classList.toggle('hidden', !toggled);\n    this.doResize();\n  }\n\n  cancelSearch(): void {\n    if (!this.searchIsVisible) {\n      return;\n    }\n    this.resetSearch();\n    delete this.searchIsVisible;\n    this.toggleSearchBar(false);\n  }\n\n  resetSearch(): void {\n    this.clearSearch();\n    this.updateReplaceVisibility();\n    this.matchesElement.textContent = '';\n  }\n\n  refreshSearch(): void {\n    if (!this.searchIsVisible) {\n      return;\n    }\n    this.resetSearch();\n    this.performSearch(false, false);\n  }\n\n  handleFindNextShortcut(): boolean {\n    if (!this.searchIsVisible) {\n      return false;\n    }\n    this.searchProvider.jumpToNextSearchResult();\n    return true;\n  }\n\n  handleFindPreviousShortcut(): boolean {\n    if (!this.searchIsVisible) {\n      return false;\n    }\n    this.searchProvider.jumpToPreviousSearchResult();\n    return true;\n  }\n\n  handleFindShortcut(): boolean {\n    this.showSearchField();\n    return true;\n  }\n\n  handleCancelSearchShortcut(): boolean {\n    if (!this.searchIsVisible) {\n      return false;\n    }\n    this.closeSearch();\n    return true;\n  }\n\n  private updateSearchNavigationButtonState(enabled: boolean): void {\n    this.replaceButtonElement.disabled = !enabled;\n    this.replaceAllButtonElement.disabled = !enabled;\n    this.searchNavigationPrevElement.setEnabled(enabled);\n    this.searchNavigationNextElement.setEnabled(enabled);\n  }\n\n  private updateSearchMatchesCountAndCurrentMatchIndex(matches: number, currentMatchIndex: number): void {\n    if (!this.currentQuery) {\n      this.matchesElement.textContent = '';\n    } else if (matches === 0 || currentMatchIndex >= 0) {\n      this.matchesElement.textContent = i18nString(UIStrings.dOfD, {PH1: currentMatchIndex + 1, PH2: matches});\n      ARIAUtils.setLabel(\n          this.matchesElement, i18nString(UIStrings.accessibledOfD, {PH1: currentMatchIndex + 1, PH2: matches}));\n    } else if (matches === 1) {\n      this.matchesElement.textContent = i18nString(UIStrings.matchString);\n    } else {\n      this.matchesElement.textContent = i18nString(UIStrings.dMatches, {PH1: matches});\n    }\n    this.updateSearchNavigationButtonState(matches > 0);\n  }\n\n  showSearchField(): void {\n    if (this.searchIsVisible) {\n      this.cancelSearch();\n    }\n\n    let queryCandidate;\n    if (!this.searchInputElement.hasFocus()) {\n      const selection = InspectorView.instance().element.window().getSelection();\n      if (selection?.rangeCount) {\n        queryCandidate = selection.toString().replace(/\\r?\\n.*/, '');\n      }\n    }\n\n    this.toggleSearchBar(true);\n    this.updateReplaceVisibility();\n    if (queryCandidate) {\n      this.searchInputElement.value = queryCandidate;\n    }\n    this.performSearch(false, false);\n    this.searchInputElement.focus();\n    this.searchInputElement.select();\n    this.searchIsVisible = true;\n  }\n\n  private updateReplaceVisibility(): void {\n    this.replaceToggleButton.setVisible(this.replaceable);\n    if (!this.replaceable) {\n      this.replaceToggleButton.setToggled(false);\n      this.updateSecondRowVisibility();\n    }\n  }\n\n  private onSearchKeyDown(event: KeyboardEvent): void {\n    if (Platform.KeyboardUtilities.isEscKey(event)) {\n      this.closeSearch();\n      event.consume(true);\n      return;\n    }\n    if (!(event.key === 'Enter')) {\n      return;\n    }\n\n    if (!this.currentQuery) {\n      this.performSearch(true, true, event.shiftKey);\n    } else {\n      this.jumpToNextSearchResult(event.shiftKey);\n    }\n  }\n\n  private onReplaceKeyDown(event: KeyboardEvent): void {\n    if (event.key === 'Enter') {\n      this.replace();\n    }\n  }\n\n  private jumpToNextSearchResult(isBackwardSearch?: boolean): void {\n    if (!this.currentQuery) {\n      return;\n    }\n\n    if (isBackwardSearch) {\n      this.searchProvider.jumpToPreviousSearchResult();\n    } else {\n      this.searchProvider.jumpToNextSearchResult();\n    }\n  }\n\n  private onNextButtonSearch(): void {\n    this.jumpToNextSearchResult();\n  }\n\n  private onPrevButtonSearch(): void {\n    this.jumpToNextSearchResult(true);\n  }\n\n  private clearSearch(): void {\n    this.currentQuery = undefined;\n    if (Boolean(this.searchProvider.currentQuery)) {\n      this.searchProvider.currentQuery = undefined;\n      this.searchProvider.onSearchCanceled();\n    }\n    this.updateSearchMatchesCountAndCurrentMatchIndex(0, -1);\n  }\n\n  private performSearch(forceSearch: boolean, shouldJump: boolean, jumpBackwards?: boolean): void {\n    const query = this.searchInputElement.value;\n    if (!query || (!forceSearch && query.length < this.minimalSearchQuerySize && !this.currentQuery)) {\n      this.clearSearch();\n      return;\n    }\n\n    this.currentQuery = query;\n    this.searchProvider.currentQuery = query;\n\n    const searchConfig = this.currentSearchConfig();\n    this.searchProvider.performSearch(searchConfig, shouldJump, jumpBackwards);\n  }\n\n  private currentSearchConfig(): SearchConfig {\n    const query = this.searchInputElement.value;\n    const caseSensitive = this.caseSensitiveButton ? this.caseSensitiveButton.toggled : false;\n    const wholeWord = this.wholeWordButton ? this.wholeWordButton.toggled : false;\n    const isRegex = this.regexButton ? this.regexButton.toggled : false;\n    return new SearchConfig(query, caseSensitive, wholeWord, isRegex);\n  }\n\n  private updateSecondRowVisibility(): void {\n    const secondRowVisible = this.replaceToggleButton.isToggled();\n    this.footerElementContainer.classList.toggle('replaceable', secondRowVisible);\n\n    if (secondRowVisible) {\n      this.replaceInputElement.focus();\n    } else {\n      this.searchInputElement.focus();\n    }\n    this.doResize();\n  }\n\n  private replace(): void {\n    if (!this.replaceProvider) {\n      throw new Error('No \\'replaceable\\' provided to SearchableView!');\n    }\n    const searchConfig = this.currentSearchConfig();\n    this.replaceProvider.replaceSelectionWith(searchConfig, this.replaceInputElement.value);\n    this.currentQuery = undefined;\n    this.performSearch(true, true);\n  }\n\n  private replaceAll(): void {\n    if (!this.replaceProvider) {\n      throw new Error('No \\'replaceable\\' provided to SearchableView!');\n    }\n    const searchConfig = this.currentSearchConfig();\n    this.replaceProvider.replaceAllWith(searchConfig, this.replaceInputElement.value);\n  }\n\n  private onInput(): void {\n    if (!Common.Settings.Settings.instance().moduleSetting('search-as-you-type').get()) {\n      this.clearSearch();\n      return;\n    }\n\n    clearTimeout(this.valueChangedTimeoutId);\n    const timeout = this.searchInputElement.value.length < 3 ? 200 : 0;\n    this.valueChangedTimeoutId = window.setTimeout(this.onValueChanged.bind(this), timeout);\n  }\n\n  private onValueChanged(): void {\n    if (!this.searchIsVisible) {\n      return;\n    }\n    this.valueChangedTimeoutId = undefined;\n    this.performSearch(false, true);\n  }\n}\n\nconst searchableViewsByElement = new WeakMap<Element, SearchableView>();\n\nexport interface Searchable {\n  currentQuery?: string;\n  currentSearchMatches?: number;\n  onSearchCanceled(): void;\n  // Called when the search toolbar is closed\n  onSearchClosed?: () => void;\n  performSearch(searchConfig: SearchConfig, shouldJump: boolean, jumpBackwards?: boolean): void;\n  jumpToNextSearchResult(): void;\n  jumpToPreviousSearchResult(): void;\n  supportsCaseSensitiveSearch(): boolean;\n  supportsWholeWordSearch(): boolean;\n  supportsRegexSearch(): boolean;\n}\n\nexport interface Replaceable {\n  replaceSelectionWith(searchConfig: SearchConfig, replacement: string): void;\n  replaceAllWith(searchConfig: SearchConfig, replacement: string): void;\n}\n\nexport interface SearchRegexResult {\n  regex: RegExp;\n  fromQuery: boolean;\n}\n\nexport class SearchConfig {\n  query: string;\n  caseSensitive: boolean;\n  wholeWord: boolean;\n  isRegex: boolean;\n\n  constructor(query: string, caseSensitive: boolean, wholeWord: boolean, isRegex: boolean) {\n    this.query = query;\n    this.caseSensitive = caseSensitive;\n    this.wholeWord = wholeWord;\n    this.isRegex = isRegex;\n  }\n\n  toSearchRegex(global?: boolean): SearchRegexResult {\n    let modifiers = this.caseSensitive ? '' : 'i';\n    if (global) {\n      modifiers += 'g';\n    }\n\n    // Check if query is surrounded by forward slashes\n    const isRegexFormatted = this.query.startsWith('/') && this.query.endsWith('/');\n    const query = this.isRegex && !isRegexFormatted ? '/' + this.query + '/' : this.query;\n    let regex: RegExp|undefined;\n    let fromQuery = false;\n\n    // First try creating regex if user knows the / / hint.\n    try {\n      if (/^\\/.+\\/$/.test(query) && this.isRegex) {\n        regex = new RegExp(query.substring(1, query.length - 1), modifiers);\n        fromQuery = true;\n      }\n    } catch {\n      // Silent catch.\n    }\n\n    // Otherwise just do a plain text search.\n    if (!regex) {\n      regex = Platform.StringUtilities.createPlainTextSearchRegex(query, modifiers);\n    }\n\n    if (this.wholeWord) {\n      let {source} = regex;\n      if (!source.startsWith('^') && !source.startsWith('\\\\b')) {\n        source = '\\\\b' + source;\n      }\n      if (!source.endsWith('$') && !source.endsWith('\\\\b')) {\n        source = source + '\\\\b';\n      }\n      regex = new RegExp(source, regex.flags);\n    }\n\n    return {\n      regex,\n      fromQuery,\n    };\n  }\n}\n"]}