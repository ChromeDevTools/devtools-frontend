{"version":3,"file":"ShortcutRegistry.js","sourceRoot":"","sources":["../../../../../../front_end/ui/legacy/ShortcutRegistry.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright 2014 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as Common from '../../core/common/common.js';\nimport * as Host from '../../core/host/host.js';\nimport * as Platform from '../../core/platform/platform.js';\nimport * as VisualLogging from '../../ui/visual_logging/visual_logging.js';\n\nimport {type Action, getRegisteredActionExtensions, KeybindSet} from './ActionRegistration.js';\nimport type {ActionRegistry} from './ActionRegistry.js';\nimport {Context} from './Context.js';\nimport {Dialog} from './Dialog.js';\nimport {type Key, KeyboardShortcut, type Modifier, Modifiers, Type} from './KeyboardShortcut.js';\nimport {isEditing} from './UIUtils.js';\n\nlet shortcutRegistryInstance: ShortcutRegistry|undefined;\n\nexport class ShortcutRegistry {\n  private readonly actionRegistry: ActionRegistry;\n  private readonly actionToShortcut: Platform.MapUtilities.Multimap<string, KeyboardShortcut>;\n  private readonly keyMap: ShortcutTreeNode;\n  private activePrefixKey: ShortcutTreeNode|null;\n  private activePrefixTimeout: number|null;\n  private consumePrefix: (() => Promise<void>)|null;\n  private readonly devToolsDefaultShortcutActions: Set<string>;\n  private readonly disabledDefaultShortcutsForAction: Platform.MapUtilities.Multimap<string, KeyboardShortcut>;\n  private readonly keybindSetSetting: Common.Settings.Setting<string>;\n  private readonly userShortcutsSetting: Common.Settings.Setting<KeyboardShortcut[]>;\n\n  constructor(actionRegistry: ActionRegistry) {\n    this.actionRegistry = actionRegistry;\n    this.actionToShortcut = new Platform.MapUtilities.Multimap();\n    this.keyMap = new ShortcutTreeNode(0, 0);\n    this.activePrefixKey = null;\n    this.activePrefixTimeout = null;\n    this.consumePrefix = null;\n    this.devToolsDefaultShortcutActions = new Set();\n    this.disabledDefaultShortcutsForAction = new Platform.MapUtilities.Multimap();\n    this.keybindSetSetting = Common.Settings.Settings.instance().moduleSetting('active-keybind-set');\n    this.keybindSetSetting.addChangeListener(event => {\n      Host.userMetrics.keybindSetSettingChanged(event.data);\n      this.registerBindings();\n    });\n    this.userShortcutsSetting = Common.Settings.Settings.instance().moduleSetting('user-shortcuts');\n    this.userShortcutsSetting.addChangeListener(this.registerBindings, this);\n\n    this.registerBindings();\n  }\n\n  static instance(opts: {\n    forceNew: boolean|null,\n    actionRegistry: ActionRegistry|null,\n  } = {forceNew: null, actionRegistry: null}): ShortcutRegistry {\n    const {forceNew, actionRegistry} = opts;\n    if (!shortcutRegistryInstance || forceNew) {\n      if (!actionRegistry) {\n        throw new Error('Missing actionRegistry for shortcutRegistry');\n      }\n      shortcutRegistryInstance = new ShortcutRegistry(actionRegistry);\n    }\n\n    return shortcutRegistryInstance;\n  }\n\n  static removeInstance(): void {\n    shortcutRegistryInstance = undefined;\n  }\n  private applicableActions(key: number, handlers: Record<string, () => Promise<boolean>>|undefined = {}): Action[] {\n    let actions: string[] = [];\n    const keyMap = this.activePrefixKey || this.keyMap;\n    const keyNode = keyMap.getNode(key);\n    if (keyNode) {\n      actions = keyNode.actions();\n    }\n    const applicableActions = this.actionRegistry.applicableActions(actions, Context.instance());\n    if (keyNode) {\n      for (const actionId of Object.keys(handlers)) {\n        if (keyNode.actions().indexOf(actionId) >= 0) {\n          if (this.actionRegistry.hasAction(actionId)) {\n            const action = this.actionRegistry.getAction(actionId);\n            applicableActions.push(action);\n          }\n        }\n      }\n    }\n    return applicableActions;\n  }\n\n  shortcutsForAction(action: string): KeyboardShortcut[] {\n    return [...this.actionToShortcut.get(action)];\n  }\n\n  actionsForDescriptors(descriptors: Array<{\n    key: number,\n    name: string,\n  }>): string[] {\n    let keyMapNode: (ShortcutTreeNode|null)|ShortcutTreeNode = this.keyMap;\n    for (const {key} of descriptors) {\n      if (!keyMapNode) {\n        return [];\n      }\n      keyMapNode = keyMapNode.getNode(key);\n    }\n    return keyMapNode ? keyMapNode.actions() : [];\n  }\n\n  globalShortcutKeys(): number[] {\n    const keys = [];\n    for (const node of this.keyMap.chords().values()) {\n      const actions = node.actions();\n      const applicableActions = this.actionRegistry.applicableActions(actions, Context.instance());\n      if (applicableActions.length || node.hasChords()) {\n        keys.push(node.key());\n      }\n    }\n    return keys;\n  }\n\n  keysForAction(actionId: string): number[] {\n    const keys = [...this.actionToShortcut.get(actionId)].flatMap(\n        shortcut => shortcut.descriptors.map(descriptor => descriptor.key));\n    return keys;\n  }\n\n  shortcutTitleForAction(actionId: string): string|undefined {\n    for (const shortcut of this.actionToShortcut.get(actionId)) {\n      return shortcut.title();\n    }\n    return undefined;\n  }\n\n  keyAndModifiersForAction(actionId: string): {key: Key, modifier: Modifier}|undefined {\n    for (const keys of this.keysForAction(actionId)) {\n      const {keyCode, modifiers} = KeyboardShortcut.keyCodeAndModifiersFromKey(keys);\n      const key = KeyboardShortcut.keyCodeToKey(keyCode);\n      if (key) {\n        return {key, modifier: KeyboardShortcut.modifierValueToModifier(modifiers) || Modifiers.None};\n      }\n    }\n    return undefined;\n  }\n\n  // DevTools and Chrome modifier values do not match, see latter here: crsrc.org/c/ui/events/event_constants.h;l=24\n  devToolsToChromeModifier(devToolsModifier: Modifier): number {\n    return devToolsModifier.value * 2;\n  }\n\n  handleShortcut(event: KeyboardEvent, handlers?: Record<string, () => Promise<boolean>>): void {\n    void this.handleKey(KeyboardShortcut.makeKeyFromEvent(event), event.key, event, handlers);\n  }\n\n  actionHasDefaultShortcut(actionId: string): boolean {\n    return this.devToolsDefaultShortcutActions.has(actionId);\n  }\n\n  getShortcutListener(handlers: Record<string, () => Promise<boolean>>): (event: KeyboardEvent) => void {\n    const shortcuts = Object.keys(handlers).flatMap(action => [...this.actionToShortcut.get(action)]);\n    // We only want keys for these specific actions to get handled this\n    // way; all others should be allowed to bubble up.\n    const allowlistKeyMap = new ShortcutTreeNode(0, 0);\n    shortcuts.forEach(shortcut => {\n      allowlistKeyMap.addKeyMapping(shortcut.descriptors.map(descriptor => descriptor.key), shortcut.action);\n    });\n\n    return (event: KeyboardEvent) => {\n      const key = KeyboardShortcut.makeKeyFromEvent(event);\n      const keyMap = this.activePrefixKey ? allowlistKeyMap.getNode(this.activePrefixKey.key()) : allowlistKeyMap;\n      if (!keyMap) {\n        return;\n      }\n      if (keyMap.getNode(key)) {\n        this.handleShortcut(event, handlers);\n      }\n    };\n  }\n\n  addShortcutListener(element: Element, handlers: Record<string, () => Promise<boolean>>): (arg0: Event) => void {\n    const listener = this.getShortcutListener(handlers) as (event: Event) => void;\n    element.addEventListener('keydown', listener);\n    return listener;\n  }\n\n  async handleKey(\n      key: number,\n      domKey: string,\n      event?: KeyboardEvent,\n      handlers?: Record<string, () => Promise<boolean>>,\n      ): Promise<void> {\n    const keyModifiers = key >> 8;\n    const hasHandlersOrPrefixKey = Boolean(handlers) || Boolean(this.activePrefixKey);\n    const keyMapNode = this.keyMap.getNode(key);\n    const actions = this.applicableActions(key, handlers);\n    const maybeHasActions = actions.length > 0 || (keyMapNode?.hasChords());\n    if ((!hasHandlersOrPrefixKey && isPossiblyInputKey()) || !maybeHasActions ||\n        KeyboardShortcut.isModifier(KeyboardShortcut.keyCodeAndModifiersFromKey(key).keyCode)) {\n      return;\n    }\n    if (event) {\n      event.consume(true);\n    }\n\n    // We allow the use of Ctrl/Meta+Plus/Minus/0 even when a modal dialog is open,\n    // so that users are able to zoom in and out even while for example the Settings\n    // dialog is shown.\n    const DIALOG_ALLOWED_ACTION_IDS = ['main.zoom-in', 'main.zoom-out', 'main.zoom-reset'];\n    if (!hasHandlersOrPrefixKey && Dialog.hasInstance() &&\n        (actions.length !== 1 || !DIALOG_ALLOWED_ACTION_IDS.includes(actions[0].id()))) {\n      return;\n    }\n\n    if (this.activePrefixTimeout) {\n      clearTimeout(this.activePrefixTimeout);\n      const handled = await maybeExecuteActionForKey.call(this, event);\n      this.activePrefixKey = null;\n      this.activePrefixTimeout = null;\n      if (handled) {\n        return;\n      }\n      if (this.consumePrefix) {\n        await this.consumePrefix();\n      }\n    }\n    if (keyMapNode?.hasChords()) {\n      this.activePrefixKey = keyMapNode;\n      this.consumePrefix = async () => {\n        this.activePrefixKey = null;\n        this.activePrefixTimeout = null;\n        await maybeExecuteActionForKey.call(this, event);\n      };\n      this.activePrefixTimeout = window.setTimeout(this.consumePrefix, KeyTimeout);\n    } else {\n      await maybeExecuteActionForKey.call(this, event);\n    }\n\n    function isPossiblyInputKey(): boolean {\n      if (!event || !isEditing() || /^F\\d+|Control|Shift|Alt|Meta|Escape|Win|U\\+001B$/.test(domKey)) {\n        return false;\n      }\n\n      if (!keyModifiers) {\n        return true;\n      }\n\n      const modifiers = Modifiers;\n      // Undo/Redo will also cause input, so textual undo should take precedence over DevTools undo when editing.\n      if (Host.Platform.isMac()) {\n        if (KeyboardShortcut.makeKey('z', modifiers.Meta.value) === key) {\n          return true;\n        }\n        if (KeyboardShortcut.makeKey('z', modifiers.Meta.value | modifiers.Shift.value) === key) {\n          return true;\n        }\n      } else {\n        if (KeyboardShortcut.makeKey('z', modifiers.Ctrl.value) === key) {\n          return true;\n        }\n        if (KeyboardShortcut.makeKey('y', modifiers.Ctrl.value) === key) {\n          return true;\n        }\n        if (!Host.Platform.isWin() &&\n            KeyboardShortcut.makeKey('z', modifiers.Ctrl.value | modifiers.Shift.value) === key) {\n          return true;\n        }\n      }\n\n      if ((keyModifiers & (modifiers.Ctrl.value | modifiers.Alt.value)) ===\n          (modifiers.Ctrl.value | modifiers.Alt.value)) {\n        return Host.Platform.isWin();\n      }\n\n      return !hasModifier(modifiers.Ctrl.value) && !hasModifier(modifiers.Alt.value) &&\n          !hasModifier(modifiers.Meta.value);\n    }\n\n    function hasModifier(mod: number): boolean {\n      return Boolean(keyModifiers & mod);\n    }\n\n    /**\n     * ;\n     */\n    async function maybeExecuteActionForKey(this: ShortcutRegistry, event?: KeyboardEvent): Promise<boolean> {\n      const actions = this.applicableActions(key, handlers);\n      if (!actions.length) {\n        return false;\n      }\n      for (const action of actions) {\n        let handled;\n        if (event) {\n          void VisualLogging.logKeyDown(null, event, action.id());\n        }\n        if (handlers?.[action.id()]) {\n          handled = await handlers[action.id()]();\n        }\n        if (!handlers) {\n          handled = await action.execute();\n        }\n        if (handled) {\n          Host.userMetrics.keyboardShortcutFired(action.id());\n          return true;\n        }\n      }\n      return false;\n    }\n  }\n\n  registerUserShortcut(shortcut: KeyboardShortcut): void {\n    for (const otherShortcut of this.disabledDefaultShortcutsForAction.get(shortcut.action)) {\n      if (otherShortcut.descriptorsMatch(shortcut.descriptors) &&\n          otherShortcut.hasKeybindSet(this.keybindSetSetting.get())) {\n        // this user shortcut is the same as a disabled default shortcut,\n        // so we should just enable the default\n        this.removeShortcut(otherShortcut);\n        return;\n      }\n    }\n    for (const otherShortcut of this.actionToShortcut.get(shortcut.action)) {\n      if (otherShortcut.descriptorsMatch(shortcut.descriptors)) {\n        // don't allow duplicate shortcuts\n        return;\n      }\n    }\n    this.addShortcutToSetting(shortcut);\n  }\n\n  removeShortcut(shortcut: KeyboardShortcut): void {\n    if (shortcut.type === Type.DEFAULT_SHORTCUT || shortcut.type === Type.KEYBIND_SET_SHORTCUT) {\n      this.addShortcutToSetting(shortcut.changeType(Type.DISABLED_DEFAULT));\n    } else {\n      this.removeShortcutFromSetting(shortcut);\n    }\n  }\n\n  disabledDefaultsForAction(actionId: string): Set<KeyboardShortcut> {\n    return this.disabledDefaultShortcutsForAction.get(actionId);\n  }\n\n  private addShortcutToSetting(shortcut: KeyboardShortcut): void {\n    const userShortcuts = this.userShortcutsSetting.get();\n    userShortcuts.push(shortcut);\n    this.userShortcutsSetting.set(userShortcuts);\n  }\n\n  private removeShortcutFromSetting(shortcut: KeyboardShortcut): void {\n    const userShortcuts = this.userShortcutsSetting.get();\n    const index = userShortcuts.findIndex(shortcut.equals, shortcut);\n    if (index !== -1) {\n      userShortcuts.splice(index, 1);\n      this.userShortcutsSetting.set(userShortcuts);\n    }\n  }\n\n  private registerShortcut(shortcut: KeyboardShortcut): void {\n    this.actionToShortcut.set(shortcut.action, shortcut);\n    this.keyMap.addKeyMapping(shortcut.descriptors.map(descriptor => descriptor.key), shortcut.action);\n  }\n\n  private registerBindings(): void {\n    this.actionToShortcut.clear();\n    this.keyMap.clear();\n    const keybindSet = this.keybindSetSetting.get();\n    this.disabledDefaultShortcutsForAction.clear();\n    this.devToolsDefaultShortcutActions.clear();\n    const forwardedKeys: Array<{\n      keyCode: number,\n      modifiers: number,\n    }> = [];\n    const userShortcuts = this.userShortcutsSetting.get();\n    for (const userShortcut of userShortcuts) {\n      const shortcut = KeyboardShortcut.createShortcutFromSettingObject(userShortcut);\n      if (shortcut.type === Type.DISABLED_DEFAULT) {\n        this.disabledDefaultShortcutsForAction.set(shortcut.action, shortcut);\n      } else {\n        if (ForwardedActions.has(shortcut.action)) {\n          forwardedKeys.push(\n              ...shortcut.descriptors.map(descriptor => KeyboardShortcut.keyCodeAndModifiersFromKey(descriptor.key)));\n        }\n        this.registerShortcut(shortcut);\n      }\n    }\n    for (const actionExtension of getRegisteredActionExtensions()) {\n      const actionId = actionExtension.id();\n      const bindings = actionExtension.bindings();\n      for (let i = 0; bindings && i < bindings.length; ++i) {\n        const keybindSets = bindings[i].keybindSets;\n        if (!platformMatches(bindings[i].platform) || !keybindSetsMatch(keybindSets)) {\n          continue;\n        }\n        const keys = bindings[i].shortcut.split(/\\s+/);\n        const shortcutDescriptors = keys.map(KeyboardShortcut.makeDescriptorFromBindingShortcut);\n        if (shortcutDescriptors.length > 0) {\n          if (this.isDisabledDefault(shortcutDescriptors, actionId)) {\n            this.devToolsDefaultShortcutActions.add(actionId);\n            continue;\n          }\n\n          if (ForwardedActions.has(actionId)) {\n            forwardedKeys.push(\n                ...shortcutDescriptors.map(shortcut => KeyboardShortcut.keyCodeAndModifiersFromKey(shortcut.key)));\n          }\n          if (!keybindSets) {\n            this.devToolsDefaultShortcutActions.add(actionId);\n            this.registerShortcut(new KeyboardShortcut(shortcutDescriptors, actionId, Type.DEFAULT_SHORTCUT));\n          } else {\n            if (keybindSets.includes(KeybindSet.DEVTOOLS_DEFAULT)) {\n              this.devToolsDefaultShortcutActions.add(actionId);\n            }\n            this.registerShortcut(\n                new KeyboardShortcut(shortcutDescriptors, actionId, Type.KEYBIND_SET_SHORTCUT, new Set(keybindSets)));\n          }\n        }\n      }\n    }\n    Host.InspectorFrontendHost.InspectorFrontendHostInstance.setWhitelistedShortcuts(JSON.stringify(forwardedKeys));\n\n    function platformMatches(platformsString?: string): boolean {\n      if (!platformsString) {\n        return true;\n      }\n      const platforms = platformsString.split(',');\n      let isMatch = false;\n      const currentPlatform = Host.Platform.platform();\n      for (let i = 0; !isMatch && i < platforms.length; ++i) {\n        isMatch = platforms[i] === currentPlatform;\n      }\n      return isMatch;\n    }\n\n    function keybindSetsMatch(keybindSets?: string[]): boolean {\n      if (!keybindSets) {\n        return true;\n      }\n      return keybindSets.includes(keybindSet);\n    }\n  }\n\n  private isDisabledDefault(\n      shortcutDescriptors: Array<{\n        key: number,\n        name: string,\n      }>,\n      action: string): boolean {\n    const disabledDefaults = this.disabledDefaultShortcutsForAction.get(action);\n    for (const disabledDefault of disabledDefaults) {\n      if (disabledDefault.descriptorsMatch(shortcutDescriptors)) {\n        return true;\n      }\n    }\n    return false;\n  }\n}\n\nexport class ShortcutTreeNode {\n  readonly #key: number;\n  #actions: string[];\n  #chords: Map<number, ShortcutTreeNode>;\n  private readonly depth: number;\n\n  constructor(key: number, depth = 0) {\n    this.#key = key;\n    this.#actions = [];\n    this.#chords = new Map();\n    this.depth = depth;\n  }\n\n  addAction(action: string): void {\n    this.#actions.push(action);\n  }\n\n  key(): number {\n    return this.#key;\n  }\n\n  chords(): Map<number, ShortcutTreeNode> {\n    return this.#chords;\n  }\n\n  hasChords(): boolean {\n    return this.#chords.size > 0;\n  }\n\n  addKeyMapping(keys: number[], action: string): void {\n    if (keys.length < this.depth) {\n      return;\n    }\n\n    if (keys.length === this.depth) {\n      this.addAction(action);\n    } else {\n      const key = keys[this.depth];\n      if (!this.#chords.has(key)) {\n        this.#chords.set(key, new ShortcutTreeNode(key, this.depth + 1));\n      }\n      (this.#chords.get(key) as ShortcutTreeNode).addKeyMapping(keys, action);\n    }\n  }\n\n  getNode(key: number): ShortcutTreeNode|null {\n    return this.#chords.get(key) || null;\n  }\n\n  actions(): string[] {\n    return this.#actions;\n  }\n\n  clear(): void {\n    this.#actions = [];\n    this.#chords = new Map();\n  }\n}\n\nexport class ForwardedShortcut {\n  static instance = new ForwardedShortcut();\n}\n\nexport const ForwardedActions = new Set<string>([\n  'main.toggle-dock',\n  'debugger.toggle-breakpoints-active',\n  'debugger.toggle-pause',\n  'quick-open.show-command-menu',\n  'console.toggle',\n]);\nexport const KeyTimeout = 1000;\nexport const DefaultShortcutSetting = 'devToolsDefault';\n"]}