{"version":3,"file":"SoftDropDown.js","sourceRoot":"","sources":["../../../../../../front_end/ui/legacy/SoftDropDown.ts"],"names":[],"mappings":"AAAA,sCAAsC;AACtC,yEAAyE;AACzE,6BAA6B;AAC7B,oDAAoD;AAGpD,OAAO,KAAK,IAAI,MAAM,yBAAyB,CAAC;AAChD,OAAO,KAAK,QAAQ,MAAM,mCAAmC,CAAC;AAC9D,OAAO,KAAK,UAAU,MAAM,0CAA0C,CAAC;AACvE,OAAO,KAAK,aAAa,MAAM,qCAAqC,CAAC;AAErE,OAAO,KAAK,SAAS,MAAM,gBAAgB,CAAC;AAC5C,OAAO,EAAC,WAAW,EAAC,MAAM,mBAAmB,CAAC;AAC9C,OAAO,EAAiB,SAAS,EAAwC,MAAM,gBAAgB,CAAC;AAChG,OAAO,EAAC,WAAW,EAAqB,QAAQ,EAAC,MAAM,kBAAkB,CAAC;AAE1E,OAAO,kBAAkB,MAAM,uBAAuB,CAAC;AACvD,OAAO,wBAAwB,MAAM,6BAA6B,CAAC;AACnE,OAAO,EAAC,8BAA8B,EAAC,MAAM,cAAc,CAAC;AAE5D,MAAM,SAAS,GAAG;IAChB;;OAEG;IACH,cAAc,EAAE,oBAAoB;CAC5B,CAAC;AACX,MAAM,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC,iBAAiB,CAAC,2BAA2B,EAAE,SAAS,CAAC,CAAC;AACjF,MAAM,UAAU,GAAG,IAAI,CAAC,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,SAAS,EAAE,IAAI,CAAC,CAAC;AAEtE,MAAM,OAAO,YAAY;IACf,QAAQ,CAAc;IACtB,YAAY,CAAS;IACZ,KAAK,CAAe;IAC7B,eAAe,CAAkC;IACzD,OAAO,CAAoB;IACnB,YAAY,CAAc;IACjB,SAAS,CAAY;IAC9B,IAAI,CAAiB;IACrB,SAAS,CAAS;IAClB,KAAK,CAAS;IAEtB,YAAY,KAAmB,EAAE,QAAqB,EAAE,YAAqB;QAC3E,IAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC;QACzB,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC;QACzB,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;QAEnB,IAAI,CAAC,eAAe,GAAG,UAAU,CAAC,SAAS,CAAC,cAAc,CAAC,CAAC;QAE5D,IAAI,CAAC,OAAO,GAAG,QAAQ,CAAC,aAAa,CAAC,QAAQ,CAAC,CAAC;QAChD,IAAI,YAAY,EAAE,CAAC;YACjB,IAAI,CAAC,OAAO,CAAC,YAAY,CACrB,OAAO,EACP,GAAG,aAAa,CAAC,QAAQ,EAAE,CAAC,KAAK,CAAC,EAAC,KAAK,EAAE,IAAI,EAAE,OAAO,EAAE,yBAAyB,EAAC,CAAC,CAAC,OAAO,CAAC,YAAY,CAAC,EAAE,CAC/G,CAAC;QACJ,CAAC;QACD,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,GAAG,CAAC,eAAe,CAAC,CAAC;QAC5C,WAAW,CAAC,IAAI,CAAC,OAAO,EAAE,wBAAwB,CAAC,CAAC;QACpD,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,MAAM,EAAE,OAAO,CAAC,CAAC;QAC9D,MAAM,iBAAiB,GAAG,UAAU,CAAC,IAAI,CAAC,MAAM,CAAC,eAAe,CAAC,CAAC;QAClE,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,iBAAiB,CAAC,CAAC;QAC5C,SAAS,CAAC,WAAW,CAAC,IAAI,CAAC,OAAO,EAAE,KAAK,CAAC,CAAC;QAE3C,IAAI,CAAC,SAAS,GAAG,IAAI,SAAS,EAAE,CAAC;QACjC,IAAI,CAAC,SAAS,CAAC,iBAAiB,2CAA0B,CAAC;QAC3D,IAAI,CAAC,SAAS,CAAC,iBAAiB,mDAA8B,CAAC;QAC/D,IAAI,CAAC,SAAS,CAAC,uBAAuB,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;QAC7D,IAAI,CAAC,SAAS,CAAC,wBAAwB,wEAA6C,CAAC;QACrF,IAAI,CAAC,IAAI,GAAG,IAAI,WAAW,CAAC,KAAK,EAAE,IAAI,EAAE,QAAQ,CAAC,gBAAgB,CAAC,CAAC;QACpE,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,GAAG,CAAC,WAAW,CAAC,CAAC;QAC7C,IAAI,CAAC,SAAS,GAAG,EAAE,CAAC;QACpB,IAAI,CAAC,KAAK,GAAG,GAAG,CAAC;QACjB,8BAA8B,CAAC,IAAI,CAAC,SAAS,CAAC,cAAc,EAAE;YAC5D,OAAO,EAAE,kBAAkB;SAC5B,CAAC,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;QAClC,SAAS,CAAC,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;QACxC,aAAa,CAAC,eAAe,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE,IAAI,CAAC,OAAO,CAAC,CAAC;QAC/D,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,YAAY,CAC1B,OAAO,EACP,GAAG,aAAa,CAAC,IAAI,EAAE,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,KAAK,CAAC,EAAC,MAAM,EAAE,IAAI,EAAE,OAAO,EAAE,mCAAmC,EAAC,CAAC,EAAE,CAAC,CAAC;QAEpH,IAAI,CAAC,OAAO,CAAC,gBAAgB,CAAC,WAAW,EAAE,KAAK,CAAC,EAAE;YACjD,IAAI,IAAI,CAAC,SAAS,CAAC,SAAS,EAAE,EAAE,CAAC;gBAC/B,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;YACnB,CAAC;iBAAM,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,QAAQ,EAAE,CAAC;gBAClC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;YACnB,CAAC;QACH,CAAC,EAAE,KAAK,CAAC,CAAC;QACV,IAAI,CAAC,OAAO,CAAC,gBAAgB,CAAC,SAAS,EAAE,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,KAAK,CAAC,CAAC;QACjF,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,gBAAgB,CAAC,SAAS,EAAE,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,KAAK,CAAC,CAAC;QACpF,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,gBAAgB,CAAC,UAAU,EAAE,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,KAAK,CAAC,CAAC;QAC5E,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,gBAAgB,CAAC,WAAW,EAAE,KAAK,CAAC,EAAE,CAAC,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE,KAAK,CAAC,CAAC;QACrF,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,gBAAgB,CAAC,SAAS,EAAE,KAAK,CAAC,EAAE;YACpD,IAAI,KAAK,CAAC,MAAM,KAAK,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE,CAAC;gBACvC,OAAO;YACT,CAAC;YAED,IAAI,CAAC,qBAAqB,EAAE,CAAC;YAC7B,IAAI,KAAK,CAAC,MAAM,YAAY,OAAO,IAAI,KAAK,CAAC,MAAM,EAAE,aAAa,EAAE,CAAC;gBACnE,qEAAqE;gBACrE,KAAK,aAAa,CAAC,QAAQ,CAAC,KAAK,CAAC,MAAM,CAAC,aAAa,EAAE,KAAK,CAAC,CAAC;YACjE,CAAC;YACD,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;QACnB,CAAC,EAAE,KAAK,CAAC,CAAC;QACV,KAAK,CAAC,gBAAgB,uDAAiC,IAAI,CAAC,aAAa,EAAE,IAAI,CAAC,CAAC;IACnF,CAAC;IAEO,IAAI,CAAC,KAAY;QACvB,IAAI,IAAI,CAAC,SAAS,CAAC,SAAS,EAAE,EAAE,CAAC;YAC/B,OAAO;QACT,CAAC;QACD,IAAI,CAAC,SAAS,CAAC,mBAAmB,CAAC,IAAI,CAAC,OAAO,CAAC,WAAW,EAAE,CAAC,CAAC;QAC/D,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,aAAa,CAAC,CAAC,CAAC;QAClD,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,KAAK,EAAE,CAAC;QAC1B,SAAS,CAAC,WAAW,CAAC,IAAI,CAAC,OAAO,EAAE,IAAI,CAAC,CAAC;QAC1C,IAAI,CAAC,mBAAmB,EAAE,CAAC;QAC3B,IAAI,IAAI,CAAC,YAAY,EAAE,CAAC;YACtB,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;QAC1C,CAAC;QACD,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;IACtB,CAAC;IAEO,mBAAmB;QACzB,MAAM,SAAS,GAAG,IAAI,CAAC,SAAS,GAAG,CAAC,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,KAAK,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC,CAAC;QACpE,IAAI,CAAC,SAAS,CAAC,iBAAiB,CAAC,IAAI,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,EAAE,SAAS,CAAC,CAAC,CAAC;QAC3E,IAAI,CAAC,IAAI,CAAC,eAAe,EAAE,CAAC;IAC9B,CAAC;IAEO,IAAI,CAAC,KAAY;QACvB,IAAI,CAAC,SAAS,CAAC,IAAI,EAAE,CAAC;QACtB,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC;QAC3B,SAAS,CAAC,WAAW,CAAC,IAAI,CAAC,OAAO,EAAE,KAAK,CAAC,CAAC;QAC3C,IAAI,CAAC,OAAO,CAAC,KAAK,EAAE,CAAC;QACrB,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;IACtB,CAAC;IAEO,eAAe,CAAC,KAAoB;QAC1C,IAAI,OAAO,GAAG,KAAK,CAAC;QACpB,QAAQ,KAAK,CAAC,GAAG,EAAE,CAAC;YAClB,KAAK,SAAS;gBACZ,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;gBACjB,IAAI,CAAC,IAAI,CAAC,kBAAkB,EAAE,CAAC;gBAC/B,OAAO,GAAG,IAAI,CAAC;gBACf,MAAM;YACR,KAAK,WAAW;gBACd,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;gBACjB,IAAI,CAAC,IAAI,CAAC,sBAAsB,EAAE,CAAC;gBACnC,OAAO,GAAG,IAAI,CAAC;gBACf,MAAM;YACR,KAAK,OAAO,CAAC;YACb,KAAK,GAAG;gBACN,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;gBACjB,OAAO,GAAG,IAAI,CAAC;gBACf,MAAM;YACR;gBACE,MAAM;QACV,CAAC;QAED,IAAI,OAAO,EAAE,CAAC;YACZ,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;QACtB,CAAC;IACH,CAAC;IAEO,aAAa,CAAC,KAAoB;QACxC,IAAI,OAAO,GAAG,KAAK,CAAC;QACpB,QAAQ,KAAK,CAAC,GAAG,EAAE,CAAC;YAClB,KAAK,WAAW;gBACd,OAAO,GAAG,IAAI,CAAC,IAAI,CAAC,kBAAkB,CAAC,KAAK,EAAE,KAAK,CAAC,CAAC;gBACrD,MAAM;YACR,KAAK,YAAY;gBACf,OAAO,GAAG,IAAI,CAAC,IAAI,CAAC,cAAc,CAAC,KAAK,EAAE,KAAK,CAAC,CAAC;gBACjD,MAAM;YACR,KAAK,MAAM;gBACT,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE,CAAC;oBAC3C,IAAI,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,KAAK,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC;wBAC5C,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,KAAK,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;wBACvC,OAAO,GAAG,IAAI,CAAC;wBACf,MAAM;oBACR,CAAC;gBACH,CAAC;gBACD,MAAM;YACR,KAAK,KAAK;gBACR,KAAK,IAAI,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,MAAM,GAAG,CAAC,EAAE,CAAC,IAAI,CAAC,EAAE,CAAC,EAAE,EAAE,CAAC;oBAChD,IAAI,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,KAAK,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC;wBAC5C,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,KAAK,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;wBACvC,OAAO,GAAG,IAAI,CAAC;wBACf,MAAM;oBACR,CAAC;gBACH,CAAC;gBACD,MAAM;YACR,KAAK,QAAQ;gBACX,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;gBACjB,OAAO,GAAG,IAAI,CAAC;gBACf,MAAM;YACR,KAAK,KAAK,CAAC;YACX,KAAK,OAAO,CAAC;YACb,KAAK,GAAG;gBACN,IAAI,CAAC,qBAAqB,EAAE,CAAC;gBAC7B,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;gBACjB,OAAO,GAAG,IAAI,CAAC;gBACf,MAAM;YACR;gBACE,IAAI,KAAK,CAAC,GAAG,CAAC,MAAM,KAAK,CAAC,EAAE,CAAC;oBAC3B,MAAM,aAAa,GAAG,IAAI,CAAC,IAAI,CAAC,aAAa,EAAE,CAAC;oBAChD,MAAM,MAAM,GAAG,KAAK,CAAC,GAAG,CAAC,WAAW,EAAE,CAAC;oBACvC,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE,CAAC;wBAC3C,MAAM,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,EAAE,CAAC,CAAC,aAAa,GAAG,CAAC,GAAG,CAAC,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC;wBACxE,IAAI,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC,WAAW,EAAE,CAAC,UAAU,CAAC,MAAM,CAAC,EAAE,CAAC;4BAClE,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC;4BAC3B,MAAM;wBACR,CAAC;oBACH,CAAC;oBACD,OAAO,GAAG,IAAI,CAAC;gBACjB,CAAC;gBACD,MAAM;QACV,CAAC;QAED,IAAI,OAAO,EAAE,CAAC;YACZ,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;QACtB,CAAC;IACH,CAAC;IAED,QAAQ,CAAC,KAAa;QACpB,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;QACnB,IAAI,CAAC,mBAAmB,EAAE,CAAC;IAC7B,CAAC;IAED,YAAY,CAAC,SAAiB;QAC5B,IAAI,CAAC,SAAS,GAAG,SAAS,CAAC;IAC7B,CAAC;IAED,kBAAkB,CAAC,IAAqC;QACtD,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC;QAC5B,IAAI,CAAC,IAAI,CAAC,YAAY,EAAE,CAAC;YACvB,IAAI,CAAC,YAAY,CAAC,WAAW,GAAG,IAAI,CAAC,eAAe,CAAC;QACvD,CAAC;IACH,CAAC;IAEO,aAAa,CAAC,KAAiE;QACrF,MAAM,EAAC,OAAO,EAAC,GAAG,KAAK,CAAC,IAAI,CAAC;QAC7B,IAAI,IAAI,CAAC,YAAY,IAAI,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,YAAY,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC;YACnE,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC;YACzB,IAAI,CAAC,qBAAqB,EAAE,CAAC;QAC/B,CAAC;QACD,IAAI,CAAC,mBAAmB,EAAE,CAAC;IAC7B,CAAC;IAED,eAAe;QACb,OAAO,IAAI,CAAC,YAAY,CAAC;IAC3B,CAAC;IAED,UAAU,CAAC,IAAY;QACrB,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC;QACzB,IAAI,IAAI,CAAC,YAAY,EAAE,CAAC;YACtB,IAAI,CAAC,YAAY,CAAC,WAAW,GAAG,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;QAC5E,CAAC;aAAM,CAAC;YACN,IAAI,CAAC,YAAY,CAAC,WAAW,GAAG,IAAI,CAAC,eAAe,CAAC;QACvD,CAAC;QACD,IAAI,CAAC,QAAQ,CAAC,YAAY,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;IAChD,CAAC;IAED,oBAAoB,CAAC,IAAO;QAC1B,MAAM,OAAO,GAAG,QAAQ,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;QAC9C,OAAO,CAAC,SAAS,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;QAC9B,OAAO,CAAC,gBAAgB,CAAC,WAAW,EAAE,CAAC,CAAC,EAAE;YACxC,IAAI,CAAC,CAAC,CAAC,SAAS,IAAI,CAAC,CAAC,SAAS,CAAC,IAAI,IAAI,CAAC,QAAQ,CAAC,gBAAgB,CAAC,IAAI,CAAC,EAAE,CAAC;gBACzE,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,IAAI,EAAE,KAAK,EAAE,kBAAkB,CAAC,IAAI,CAAC,CAAC;YAC7D,CAAC;QACH,CAAC,CAAC,CAAC;QACH,OAAO,CAAC,SAAS,CAAC,MAAM,CAAC,UAAU,EAAE,CAAC,IAAI,CAAC,QAAQ,CAAC,gBAAgB,CAAC,IAAI,CAAC,CAAC,CAAC;QAC5E,OAAO,CAAC,SAAS,CAAC,MAAM,CAAC,aAAa,EAAE,IAAI,CAAC,IAAI,CAAC,YAAY,EAAE,KAAK,IAAI,CAAC,CAAC;QAE3E,SAAS,CAAC,cAAc,CAAC,OAAO,CAAC,CAAC;QAClC,OAAO,CAAC,WAAW,CAAC,IAAI,CAAC,QAAQ,CAAC,oBAAoB,CAAC,IAAI,CAAC,CAAC,CAAC;QAE9D,OAAO,OAAO,CAAC;IACjB,CAAC;IAED,aAAa,CAAC,KAAQ;QACpB,OAAO,IAAI,CAAC,SAAS,CAAC;IACxB,CAAC;IAED,gBAAgB,CAAC,IAAO;QACtB,OAAO,IAAI,CAAC,QAAQ,CAAC,gBAAgB,CAAC,IAAI,CAAC,CAAC;IAC9C,CAAC;IAED,mBAAmB,CAAC,IAAY,EAAE,EAAU,EAAE,WAAyB,EAAE,SAAuB;QAC9F,IAAI,WAAW,EAAE,CAAC;YAChB,WAAW,CAAC,SAAS,CAAC,MAAM,CAAC,aAAa,CAAC,CAAC;QAC9C,CAAC;QACD,IAAI,SAAS,EAAE,CAAC;YACd,SAAS,CAAC,SAAS,CAAC,GAAG,CAAC,aAAa,CAAC,CAAC;QACzC,CAAC;QAED,SAAS,CAAC,mBAAmB,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE,SAAS,CAAC,CAAC;QAC5D,IAAI,CAAC,QAAQ,CAAC,sBAAsB,CAChC,IAAI,EAAE,EAAE,EAAE,WAAW,EAAE,iBAAiB,IAAI,IAAI,EAAE,SAAS,EAAE,iBAAiB,IAAI,IAAI,CAAC,CAAC;IAC9F,CAAC;IAED,sBAAsB,CAAC,YAA0B,EAAE,UAAwB;QACzE,OAAO,KAAK,CAAC;IACf,CAAC;IAEO,qBAAqB;QAC3B,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,YAAY,EAAE,CAAC,CAAC;IAC5C,CAAC;IAED,WAAW,CAAC,IAAO;QACjB,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC;IAC9B,CAAC;CACF","sourcesContent":["// Copyright 2017 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n/* eslint-disable @devtools/no-imperative-dom-api */\n\nimport type * as Common from '../../core/common/common.js';\nimport * as i18n from '../../core/i18n/i18n.js';\nimport * as Geometry from '../../models/geometry/geometry.js';\nimport * as IconButton from '../components/icon_button/icon_button.js';\nimport * as VisualLogging from '../visual_logging/visual_logging.js';\n\nimport * as ARIAUtils from './ARIAUtils.js';\nimport {appendStyle} from './DOMUtilities.js';\nimport {AnchorBehavior, GlassPane, MarginBehavior, PointerEventsBehavior} from './GlassPane.js';\nimport {ListControl, type ListDelegate, ListMode} from './ListControl.js';\nimport {Events as ListModelEvents, type ItemsReplacedEvent, type ListModel} from './ListModel.js';\nimport softDropDownStyles from './softDropDown.css.js';\nimport softDropDownButtonStyles from './softDropDownButton.css.js';\nimport {createShadowRootWithCoreStyles} from './UIUtils.js';\n\nconst UIStrings = {\n  /**\n   * @description Placeholder text in Soft Drop Down\n   */\n  noItemSelected: '(no item selected)',\n} as const;\nconst str_ = i18n.i18n.registerUIStrings('ui/legacy/SoftDropDown.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\n\nexport class SoftDropDown<T> implements ListDelegate<T> {\n  private delegate: Delegate<T>;\n  private selectedItem: T|null;\n  private readonly model: ListModel<T>;\n  private placeholderText: Common.UIString.LocalizedString;\n  element: HTMLButtonElement;\n  private titleElement: HTMLElement;\n  private readonly glassPane: GlassPane;\n  private list: ListControl<T>;\n  private rowHeight: number;\n  private width: number;\n\n  constructor(model: ListModel<T>, delegate: Delegate<T>, jslogContext?: string) {\n    this.delegate = delegate;\n    this.selectedItem = null;\n    this.model = model;\n\n    this.placeholderText = i18nString(UIStrings.noItemSelected);\n\n    this.element = document.createElement('button');\n    if (jslogContext) {\n      this.element.setAttribute(\n          'jslog',\n          `${VisualLogging.dropDown().track({click: true, keydown: 'ArrowUp|ArrowDown|Enter'}).context(jslogContext)}`,\n      );\n    }\n    this.element.classList.add('soft-dropdown');\n    appendStyle(this.element, softDropDownButtonStyles);\n    this.titleElement = this.element.createChild('span', 'title');\n    const dropdownArrowIcon = IconButton.Icon.create('triangle-down');\n    this.element.appendChild(dropdownArrowIcon);\n    ARIAUtils.setExpanded(this.element, false);\n\n    this.glassPane = new GlassPane();\n    this.glassPane.setMarginBehavior(MarginBehavior.NO_MARGIN);\n    this.glassPane.setAnchorBehavior(AnchorBehavior.PREFER_BOTTOM);\n    this.glassPane.setOutsideClickCallback(this.hide.bind(this));\n    this.glassPane.setPointerEventsBehavior(PointerEventsBehavior.BLOCKED_BY_GLASS_PANE);\n    this.list = new ListControl(model, this, ListMode.EqualHeightItems);\n    this.list.element.classList.add('item-list');\n    this.rowHeight = 36;\n    this.width = 315;\n    createShadowRootWithCoreStyles(this.glassPane.contentElement, {\n      cssFile: softDropDownStyles,\n    }).appendChild(this.list.element);\n    ARIAUtils.markAsMenu(this.list.element);\n    VisualLogging.setMappedParent(this.list.element, this.element);\n    this.list.element.setAttribute(\n        'jslog',\n        `${VisualLogging.menu().parent('mapped').track({resize: true, keydown: 'ArrowUp|ArrowDown|PageUp|PageDown'})}`);\n\n    this.element.addEventListener('mousedown', event => {\n      if (this.glassPane.isShowing()) {\n        this.hide(event);\n      } else if (!this.element.disabled) {\n        this.show(event);\n      }\n    }, false);\n    this.element.addEventListener('keydown', this.onKeyDownButton.bind(this), false);\n    this.list.element.addEventListener('keydown', this.onKeyDownList.bind(this), false);\n    this.list.element.addEventListener('focusout', this.hide.bind(this), false);\n    this.list.element.addEventListener('mousedown', event => event.consume(true), false);\n    this.list.element.addEventListener('mouseup', event => {\n      if (event.target === this.list.element) {\n        return;\n      }\n\n      this.selectHighlightedItem();\n      if (event.target instanceof Element && event.target?.parentElement) {\n        // hide() will consume the mouseup event and click won't be triggered\n        void VisualLogging.logClick(event.target.parentElement, event);\n      }\n      this.hide(event);\n    }, false);\n    model.addEventListener(ListModelEvents.ITEMS_REPLACED, this.itemsReplaced, this);\n  }\n\n  private show(event: Event): void {\n    if (this.glassPane.isShowing()) {\n      return;\n    }\n    this.glassPane.setContentAnchorBox(this.element.boxInWindow());\n    this.glassPane.show((this.element.ownerDocument));\n    this.list.element.focus();\n    ARIAUtils.setExpanded(this.element, true);\n    this.updateGlasspaneSize();\n    if (this.selectedItem) {\n      this.list.selectItem(this.selectedItem);\n    }\n    event.consume(true);\n  }\n\n  private updateGlasspaneSize(): void {\n    const maxHeight = this.rowHeight * (Math.min(this.model.length, 9));\n    this.glassPane.setMaxContentSize(new Geometry.Size(this.width, maxHeight));\n    this.list.viewportResized();\n  }\n\n  private hide(event: Event): void {\n    this.glassPane.hide();\n    this.list.selectItem(null);\n    ARIAUtils.setExpanded(this.element, false);\n    this.element.focus();\n    event.consume(true);\n  }\n\n  private onKeyDownButton(event: KeyboardEvent): void {\n    let handled = false;\n    switch (event.key) {\n      case 'ArrowUp':\n        this.show(event);\n        this.list.selectItemNextPage();\n        handled = true;\n        break;\n      case 'ArrowDown':\n        this.show(event);\n        this.list.selectItemPreviousPage();\n        handled = true;\n        break;\n      case 'Enter':\n      case ' ':\n        this.show(event);\n        handled = true;\n        break;\n      default:\n        break;\n    }\n\n    if (handled) {\n      event.consume(true);\n    }\n  }\n\n  private onKeyDownList(event: KeyboardEvent): void {\n    let handled = false;\n    switch (event.key) {\n      case 'ArrowLeft':\n        handled = this.list.selectPreviousItem(false, false);\n        break;\n      case 'ArrowRight':\n        handled = this.list.selectNextItem(false, false);\n        break;\n      case 'Home':\n        for (let i = 0; i < this.model.length; i++) {\n          if (this.isItemSelectable(this.model.at(i))) {\n            this.list.selectItem(this.model.at(i));\n            handled = true;\n            break;\n          }\n        }\n        break;\n      case 'End':\n        for (let i = this.model.length - 1; i >= 0; i--) {\n          if (this.isItemSelectable(this.model.at(i))) {\n            this.list.selectItem(this.model.at(i));\n            handled = true;\n            break;\n          }\n        }\n        break;\n      case 'Escape':\n        this.hide(event);\n        handled = true;\n        break;\n      case 'Tab':\n      case 'Enter':\n      case ' ':\n        this.selectHighlightedItem();\n        this.hide(event);\n        handled = true;\n        break;\n      default:\n        if (event.key.length === 1) {\n          const selectedIndex = this.list.selectedIndex();\n          const letter = event.key.toUpperCase();\n          for (let i = 0; i < this.model.length; i++) {\n            const item = this.model.at((selectedIndex + i + 1) % this.model.length);\n            if (this.delegate.titleFor(item).toUpperCase().startsWith(letter)) {\n              this.list.selectItem(item);\n              break;\n            }\n          }\n          handled = true;\n        }\n        break;\n    }\n\n    if (handled) {\n      event.consume(true);\n    }\n  }\n\n  setWidth(width: number): void {\n    this.width = width;\n    this.updateGlasspaneSize();\n  }\n\n  setRowHeight(rowHeight: number): void {\n    this.rowHeight = rowHeight;\n  }\n\n  setPlaceholderText(text: Common.UIString.LocalizedString): void {\n    this.placeholderText = text;\n    if (!this.selectedItem) {\n      this.titleElement.textContent = this.placeholderText;\n    }\n  }\n\n  private itemsReplaced(event: Common.EventTarget.EventTargetEvent<ItemsReplacedEvent<T>>): void {\n    const {removed} = event.data;\n    if (this.selectedItem && removed.indexOf(this.selectedItem) !== -1) {\n      this.selectedItem = null;\n      this.selectHighlightedItem();\n    }\n    this.updateGlasspaneSize();\n  }\n\n  getSelectedItem(): T|null {\n    return this.selectedItem;\n  }\n\n  selectItem(item: T|null): void {\n    this.selectedItem = item;\n    if (this.selectedItem) {\n      this.titleElement.textContent = this.delegate.titleFor(this.selectedItem);\n    } else {\n      this.titleElement.textContent = this.placeholderText;\n    }\n    this.delegate.itemSelected(this.selectedItem);\n  }\n\n  createElementForItem(item: T): Element {\n    const element = document.createElement('div');\n    element.classList.add('item');\n    element.addEventListener('mousemove', e => {\n      if ((e.movementX || e.movementY) && this.delegate.isItemSelectable(item)) {\n        this.list.selectItem(item, false, /* Don't scroll */ true);\n      }\n    });\n    element.classList.toggle('disabled', !this.delegate.isItemSelectable(item));\n    element.classList.toggle('highlighted', this.list.selectedItem() === item);\n\n    ARIAUtils.markAsMenuItem(element);\n    element.appendChild(this.delegate.createElementForItem(item));\n\n    return element;\n  }\n\n  heightForItem(_item: T): number {\n    return this.rowHeight;\n  }\n\n  isItemSelectable(item: T): boolean {\n    return this.delegate.isItemSelectable(item);\n  }\n\n  selectedItemChanged(from: T|null, to: T|null, fromElement: Element|null, toElement: Element|null): void {\n    if (fromElement) {\n      fromElement.classList.remove('highlighted');\n    }\n    if (toElement) {\n      toElement.classList.add('highlighted');\n    }\n\n    ARIAUtils.setActiveDescendant(this.list.element, toElement);\n    this.delegate.highlightedItemChanged(\n        from, to, fromElement?.firstElementChild ?? null, toElement?.firstElementChild ?? null);\n  }\n\n  updateSelectedItemARIA(_fromElement: Element|null, _toElement: Element|null): boolean {\n    return false;\n  }\n\n  private selectHighlightedItem(): void {\n    this.selectItem(this.list.selectedItem());\n  }\n\n  refreshItem(item: T): void {\n    this.list.refreshItem(item);\n  }\n}\n\nexport interface Delegate<T> {\n  titleFor(item: T): string;\n  createElementForItem(item: T): Element;\n  isItemSelectable(item: T): boolean;\n  itemSelected(item: T|null): void;\n  highlightedItemChanged(from: T|null, to: T|null, fromElement: Element|null, toElement: Element|null): void;\n}\n"]}