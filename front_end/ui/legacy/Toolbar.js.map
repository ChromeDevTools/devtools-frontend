{"version":3,"file":"Toolbar.js","sourceRoot":"","sources":["../../../../../../front_end/ui/legacy/Toolbar.ts"],"names":[],"mappings":"AAAA,sCAAsC;AACtC,yEAAyE;AACzE,6BAA6B;AAE7B,oDAAoD;AAEpD,OAAO,KAAK,MAAM,MAAM,6BAA6B,CAAC;AACtD,OAAO,KAAK,IAAI,MAAM,yBAAyB,CAAC;AAChD,OAAO,KAAK,QAAQ,MAAM,iCAAiC,CAAC;AAC5D,OAAO,KAAK,IAAI,MAAM,yBAAyB,CAAC;AAChD,OAAO,KAAK,OAAO,MAAM,wCAAwC,CAAC;AAClE,OAAO,KAAK,aAAa,MAAM,2CAA2C,CAAC;AAC3E,OAAO,EAAC,UAAU,EAAC,MAAM,eAAe,CAAC;AAGzC,OAAO,EAAC,cAAc,EAAC,MAAM,qBAAqB,CAAC;AACnD,OAAO,KAAK,SAAS,MAAM,gBAAgB,CAAC;AAC5C,OAAO,EAAC,WAAW,EAAC,MAAM,kBAAkB,CAAC;AAC7C,OAAO,EAAC,SAAS,EAAwB,MAAM,gBAAgB,CAAC;AAEhE,OAAO,EAA6B,UAAU,EAAC,MAAM,iBAAiB,CAAC;AACvE,OAAO,aAAa,MAAM,kBAAkB,CAAC;AAC7C,OAAO,EAAC,OAAO,EAAC,MAAM,cAAc,CAAC;AACrC,OAAO,EAAC,YAAY,EAAE,aAAa,EAAE,mBAAmB,EAAC,MAAM,cAAc,CAAC;AAE9E,MAAM,SAAS,GAAG;IAChB;;OAEG;IACH,OAAO,EAAE,SAAS;IAClB;;OAEG;IACH,UAAU,EAAE,aAAa;IACzB;;OAEG;IACH,UAAU,EAAE,OAAO;IACnB;;OAEG;IACH,MAAM,EAAE,QAAQ;CACR,CAAC;AACX,MAAM,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC,iBAAiB,CAAC,sBAAsB,EAAE,SAAS,CAAC,CAAC;AAC5E,MAAM,UAAU,GAAG,IAAI,CAAC,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,SAAS,EAAE,IAAI,CAAC,CAAC;AAEtE;;;;;;;;;;;GAWG;AACH,MAAM,OAAO,OAAQ,SAAQ,WAAW;IACtC,WAAW,GAAG,IAAI,CAAC,YAAY,CAAC,EAAC,IAAI,EAAE,MAAM,EAAC,CAAC,CAAC;IACxC,KAAK,GAAkB,EAAE,CAAC;IAClC,OAAO,GAAG,IAAI,CAAC;IACP,aAAa,GAAG,KAAK,CAAC;IAE9B;QACE,KAAK,EAAE,CAAC;QACR,IAAI,CAAC,WAAW,CAAC,WAAW,CAAC,OAAO,CAAC,CAAC,WAAW,GAAG,aAAa,CAAC;QAClE,IAAI,CAAC,WAAW,CAAC,WAAW,CAAC,MAAM,CAAC,CAAC;IACvC,CAAC;IAED,aAAa,CAAC,YAA8B;QAC1C,KAAK,MAAM,QAAQ,IAAI,YAAY,EAAE,CAAC;YACpC,KAAK,MAAM,OAAO,IAAI,QAAQ,CAAC,YAAY,EAAE,CAAC;gBAC5C,IAAI,CAAC,CAAC,OAAO,YAAY,WAAW,CAAC,EAAE,CAAC;oBACtC,SAAS;gBACX,CAAC;gBACD,KAAK,MAAM,IAAI,IAAI,IAAI,CAAC,KAAK,EAAE,CAAC;oBAC9B,IAAI,IAAI,CAAC,OAAO,KAAK,OAAO,EAAE,CAAC;wBAC7B,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC;wBAC/C,MAAM;oBACR,CAAC;gBACH,CAAC;YACH,CAAC;YACD,KAAK,MAAM,OAAO,IAAI,QAAQ,CAAC,UAAU,EAAE,CAAC;gBAC1C,IAAI,CAAC,CAAC,OAAO,YAAY,WAAW,CAAC,EAAE,CAAC;oBACtC,SAAS;gBACX,CAAC;gBACD,IAAI,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,OAAO,KAAK,OAAO,CAAC,EAAE,CAAC;oBACtD,SAAS;gBACX,CAAC;gBACD,IAAI,IAAiB,CAAC;gBACtB,IAAI,OAAO,YAAY,OAAO,CAAC,MAAM,CAAC,MAAM,EAAE,CAAC;oBAC7C,IAAI,GAAG,IAAI,aAAa,CAAC,EAAE,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,OAAO,CAAC,CAAC;gBACzE,CAAC;qBAAM,IAAI,OAAO,YAAY,mBAAmB,EAAE,CAAC;oBAClD,IAAI,GAAG,OAAO,CAAC,IAAmB,CAAC;gBACrC,CAAC;qBAAM,IAAI,OAAO,YAAY,iBAAiB,EAAE,CAAC;oBAChD,IAAI,GAAG,IAAI,eAAe,CAAC,IAAI,EAAE,OAAO,CAAC,KAAK,EAAE,SAAS,EAAE,SAAS,EAAE,OAAO,CAAC,CAAC;gBACjF,CAAC;qBAAM,CAAC;oBACN,IAAI,GAAG,IAAI,WAAW,CAAC,OAAO,CAAC,CAAC;gBAClC,CAAC;gBACD,IAAI,IAAI,EAAE,CAAC;oBACT,IAAI,CAAC,iBAAiB,CAAC,IAAI,CAAC,CAAC;gBAC/B,CAAC;YACH,CAAC;QACH,CAAC;IACH,CAAC;IAED,iBAAiB;QACf,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,MAAM,CAAC,EAAE,CAAC;YAC/B,IAAI,CAAC,YAAY,CAAC,MAAM,EAAE,SAAS,CAAC,CAAC;QACvC,CAAC;IACH,CAAC;IAED;;;;;OAKG;IACH,IAAI,QAAQ;QACV,OAAO,IAAI,CAAC,YAAY,CAAC,UAAU,CAAC,CAAC;IACvC,CAAC;IAED;;;;OAIG;IACH,IAAI,QAAQ,CAAC,QAAiB;QAC5B,IAAI,CAAC,eAAe,CAAC,UAAU,EAAE,QAAQ,CAAC,CAAC;IAC7C,CAAC;IAED;;;;;OAKG;IACH,IAAI,SAAS;QACX,OAAO,IAAI,CAAC,YAAY,CAAC,WAAW,CAAC,CAAC;IACxC,CAAC;IAED;;;;;OAKG;IACH,IAAI,SAAS,CAAC,SAAkB;QAC9B,IAAI,CAAC,eAAe,CAAC,WAAW,EAAE,SAAS,CAAC,CAAC;IAC/C,CAAC;IAED,gBAAgB;QACd,OAAO,IAAI,CAAC,aAAa,CAAC;IAC5B,CAAC;IAED,gBAAgB,CAAC,MAAe;QAC9B,IAAI,IAAI,CAAC,aAAa,KAAK,MAAM,EAAE,CAAC;YAClC,OAAO;QACT,CAAC;QACD,IAAI,CAAC,aAAa,GAAG,MAAM,CAAC;QAC5B,KAAK,MAAM,IAAI,IAAI,IAAI,CAAC,KAAK,EAAE,CAAC;YAC9B,IAAI,CAAC,gBAAgB,CAAC,MAAM,CAAC,CAAC;QAChC,CAAC;IACH,CAAC;IAED,MAAM,CAAC,2BAA2B,CAC9B,MAAc,EAAE,cAA+B,EAAE,gBAAiC;QACpF,MAAM,MAAM,GAAG,OAAO,CAAC,kBAAkB,CAAC,MAAM,CAAC,CAAC;QAClD,MAAM,eAAe,GAAG,OAAO,CAAC,kBAAkB,CAAC,MAAM,CAAC,CAAC;QAE3D,IAAI,mBAAmB,GAA6B,IAAI,CAAC;QACzD,IAAI,gBAAgB,GAAyB,IAAI,CAAC;QAElD,MAAM,CAAC,gBAAgB,uCAAuB,aAAa,CAAC,CAAC;QAC7D,aAAa,EAAE,CAAC;QAChB,OAAO,MAAM,CAAC;QAEd,SAAS,aAAa;YACpB,MAAM,OAAO,GAAG,MAAM,CAAC,OAAO,EAAE,CAAC,CAAC,CAAC,CAAC,cAAc,IAAI,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,gBAAgB,IAAI,IAAI,CAAC,CAAC;YAEzF,IAAI,OAAO,EAAE,MAAM,EAAE,CAAC;gBACpB,IAAI,CAAC,mBAAmB,EAAE,CAAC;oBACzB,mBAAmB,GAAG,IAAI,mBAAmB,CAAC,MAAM,CAAC,OAAO,EAAE,WAAW,CAAC,CAAC;oBAC3E,MAAM,CAAC,gBAAgB,CAAC,IAAI,CAAC,CAAC;oBAC9B,gBAAgB,GAAG,OAAO,CAAC;gBAC7B,CAAC;YACH,CAAC;iBAAM,IAAI,mBAAmB,EAAE,CAAC;gBAC/B,mBAAmB,CAAC,OAAO,EAAE,CAAC;gBAC9B,mBAAmB,GAAG,IAAI,CAAC;gBAC3B,MAAM,CAAC,gBAAgB,CAAC,KAAK,CAAC,CAAC;gBAC/B,gBAAgB,GAAG,IAAI,CAAC;YAC1B,CAAC;QACH,CAAC;QAED,SAAS,WAAW;YAClB,IAAI,OAAO,GAAoB,gBAAgB,CAAC,CAAC,CAAC,gBAAgB,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC;YAChF,OAAO,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC;YAE9B,MAAM,QAAQ,GAAG,MAAM,CAAC,OAAO,CAAC,aAAa,CAAC;YAC9C,QAAQ,CAAC,eAAe,CAAC,gBAAgB,CAAC,SAAS,EAAE,OAAO,EAAE,KAAK,CAAC,CAAC;YAErE,MAAM,gBAAgB,GAAG,IAAI,SAAS,EAAE,CAAC;YACzC,gBAAgB,CAAC,wBAAwB,wEAA6C,CAAC;YACvF,gBAAgB,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;YAChC,MAAM,UAAU,GAAG,gBAAgB,CAAC,cAAc,CAAC,WAAW,CAAC,kBAAkB,CAAC,CAAC;YACnF,UAAU,CAAC,QAAQ,GAAG,IAAI,CAAC;YAC3B,MAAM,YAAY,GAAG,EAAE,CAAC;YAExB,MAAM,kBAAkB,GAAG,MAAM,CAAC,OAAO,CAAC,WAAW,EAAE,CAAC,iBAAiB,CAAC,SAAS,CAAC,SAAS,CAAC,QAAQ,CAAC,CAAC,CAAC;YAEzG,MAAM,YAAY,GAAG,kBAAkB,CAAC,CAAC,GAAG,YAAY,GAAG,OAAO,CAAC,MAAM,GAAG,QAAQ,CAAC,eAAe,CAAC,YAAY,CAAC;YAElH,IAAI,YAAY,EAAE,CAAC;gBACjB,OAAO,GAAG,OAAO,CAAC,OAAO,EAAE,CAAC;YAC9B,CAAC;YAED,UAAU,CAAC,KAAK,CAAC,MAAM,GAAG,CAAC,YAAY,GAAG,OAAO,CAAC,MAAM,CAAC,GAAG,IAAI,CAAC;YACjE,IAAI,YAAY,EAAE,CAAC;gBACjB,UAAU,CAAC,KAAK,CAAC,GAAG,GAAG,CAAC,kBAAkB,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,IAAI,CAAC;YAC3D,CAAC;iBAAM,CAAC;gBACN,UAAU,CAAC,KAAK,CAAC,GAAG,GAAG,CAAC,kBAAkB,CAAC,CAAC,GAAG,CAAC,YAAY,GAAG,CAAC,OAAO,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,IAAI,CAAC;YACnG,CAAC;YACD,UAAU,CAAC,KAAK,CAAC,IAAI,GAAG,CAAC,kBAAkB,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,IAAI,CAAC;YAE1D,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,OAAO,CAAC,MAAM,EAAE,EAAE,CAAC,EAAE,CAAC;gBACxC,OAAO,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,gBAAgB,CAAC,WAAW,EAAE,SAAS,EAAE,KAAK,CAAC,CAAC;gBACnE,OAAO,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,gBAAgB,CAAC,UAAU,EAAE,QAAQ,EAAE,KAAK,CAAC,CAAC;gBACjE,UAAU,CAAC,iBAAiB,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC;YAC3C,CAAC;YACD,MAAM,eAAe,GAAG,YAAY,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,MAAM,GAAG,CAAC,CAAC;YAC9D,OAAO,CAAC,eAAe,CAAC,CAAC,OAAO,CAAC,SAAS,CAAC,GAAG,CAAC,gBAAgB,CAAC,CAAC;YAEjE,SAAS,SAAS,CAAC,CAAQ;gBACzB,IAAK,CAAgB,CAAC,KAAK,KAAK,CAAC,EAAE,CAAC;oBAClC,OAAO;gBACT,CAAC;gBACD,IAAI,CAAC,CAAC,MAAM,YAAY,WAAW,EAAE,CAAC;oBACpC,MAAM,aAAa,GAAG,CAAC,CAAC,MAAM,CAAC,4BAA4B,CAAC,gBAAgB,CAAC,CAAC;oBAC9E,aAAa,CAAC,SAAS,CAAC,GAAG,CAAC,gBAAgB,CAAC,CAAC;gBAChD,CAAC;YACH,CAAC;YAED,SAAS,QAAQ,CAAC,CAAQ;gBACxB,IAAK,CAAgB,CAAC,KAAK,KAAK,CAAC,EAAE,CAAC;oBAClC,OAAO;gBACT,CAAC;gBACD,IAAI,CAAC,CAAC,MAAM,YAAY,WAAW,EAAE,CAAC;oBACpC,MAAM,aAAa,GAAG,CAAC,CAAC,MAAM,CAAC,4BAA4B,CAAC,gBAAgB,CAAC,CAAC;oBAC9E,aAAa,CAAC,SAAS,CAAC,MAAM,CAAC,gBAAgB,CAAC,CAAC;gBACnD,CAAC;YACH,CAAC;YAED,SAAS,OAAO,CAAC,CAAQ;gBACvB,IAAK,CAAgB,CAAC,KAAK,KAAK,CAAC,EAAE,CAAC;oBAClC,OAAO;gBACT,CAAC;gBACD,gBAAgB,CAAC,IAAI,EAAE,CAAC;gBACxB,QAAQ,CAAC,eAAe,CAAC,mBAAmB,CAAC,SAAS,EAAE,OAAO,EAAE,KAAK,CAAC,CAAC;gBAExE,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,OAAO,CAAC,MAAM,EAAE,EAAE,CAAC,EAAE,CAAC;oBACxC,IAAI,OAAO,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,SAAS,CAAC,QAAQ,CAAC,gBAAgB,CAAC,EAAE,CAAC;wBAC5D,OAAO,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,SAAS,CAAC,MAAM,CAAC,gBAAgB,CAAC,CAAC;wBACtD,OAAO,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;wBACtB,MAAM;oBACR,CAAC;gBACH,CAAC;YACH,CAAC;QACH,CAAC;IACH,CAAC;IAID,MAAM,CAAC,kBAAkB,CAAC,gBAA+B,EAAE,UAAgC,EAAE;QAC3F,MAAM,MAAM,GACR,OAAO,gBAAgB,KAAK,QAAQ,CAAC,CAAC,CAAC,cAAc,CAAC,QAAQ,EAAE,CAAC,SAAS,CAAC,gBAAgB,CAAC,CAAC,CAAC,CAAC,gBAAgB,CAAC;QAEpH,MAAM,MAAM,GAAG,MAAM,CAAC,UAAU,EAAE,CAAC,CAAC,CAAC,UAAU,EAAE,CAAC,CAAC,CAAC,UAAU,EAAE,CAAC;QAEjE,IAAI,OAAO,CAAC,KAAK,EAAE,CAAC;YAClB,MAAM,CAAC,OAAO,CAAC,OAAO,CAAC,KAAK,EAAE,IAAI,MAAM,CAAC,KAAK,EAAE,CAAC,CAAC;QACpD,CAAC;QAED,MAAM,OAAO,GAAG,GAAS,EAAE;YACzB,KAAK,MAAM,CAAC,OAAO,EAAE,CAAC;QACxB,CAAC,CAAC;QACF,MAAM,CAAC,gBAAgB,2CAA6B,OAAO,EAAE,MAAM,CAAC,CAAC;QACrE,MAAM,CAAC,gBAAgB,uCAAuB,cAAc,CAAC,CAAC;QAC9D,MAAM,CAAC,UAAU,CAAC,MAAM,CAAC,OAAO,EAAE,CAAC,CAAC;QACpC,OAAO,MAAM,CAAC;QAEd,SAAS,UAAU;YACjB,MAAM,MAAM,GAAG,IAAI,aAAa,CAAC,MAAM,CAAC,KAAK,EAAE,EAAE,MAAM,CAAC,IAAI,EAAE,EAAE,SAAS,EAAE,MAAM,CAAC,EAAE,EAAE,CAAC,CAAC;YACxF,IAAI,MAAM,CAAC,KAAK,EAAE,EAAE,CAAC;gBACnB,OAAO,CAAC,wBAAwB,CAAC,MAAM,CAAC,OAAO,EAAE,MAAM,CAAC,KAAK,EAAE,EAAE,MAAM,CAAC,EAAE,EAAE,CAAC,CAAC;YAChF,CAAC;YACD,OAAO,MAAM,CAAC;QAChB,CAAC;QAED,SAAS,UAAU;YACjB,MAAM,YAAY,GAAG,IAAI,aAAa,CAAC,MAAM,CAAC,KAAK,EAAE,EAAE,MAAM,CAAC,IAAI,EAAE,EAAE,MAAM,CAAC,WAAW,EAAE,EAAE,MAAM,CAAC,EAAE,EAAE,CAAC,CAAC;YACzG,IAAI,MAAM,CAAC,kBAAkB,EAAE,EAAE,CAAC;gBAChC,YAAY,CAAC,wBAAwB,EAAE,CAAC;YAC1C,CAAC;YACD,MAAM,CAAC,gBAAgB,uCAAuB,OAAO,CAAC,CAAC;YACvD,OAAO,EAAE,CAAC;YACV,OAAO,YAAY,CAAC;YAEpB,SAAS,OAAO;gBACd,YAAY,CAAC,UAAU,CAAC,MAAM,CAAC,OAAO,EAAE,CAAC,CAAC;gBAC1C,IAAI,MAAM,CAAC,KAAK,EAAE,EAAE,CAAC;oBACnB,YAAY,CAAC,QAAQ,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC,CAAC;oBACtC,OAAO,CAAC,wBAAwB,CAAC,YAAY,CAAC,OAAO,EAAE,MAAM,CAAC,KAAK,EAAE,EAAE,MAAM,CAAC,EAAE,EAAE,CAAC,CAAC;gBACtF,CAAC;YACH,CAAC;QACH,CAAC;QAED,SAAS,cAAc,CAAC,KAAmD;YACzE,MAAM,CAAC,UAAU,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;QAChC,CAAC;IACH,CAAC;IAED,KAAK;QACH,OAAO,CAAC,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC;IAC5B,CAAC;IAED,UAAU,CAAC,OAAgB;QACzB,IAAI,CAAC,OAAO,GAAG,OAAO,CAAC;QACvB,KAAK,MAAM,IAAI,IAAI,IAAI,CAAC,KAAK,EAAE,CAAC;YAC9B,IAAI,CAAC,iBAAiB,CAAC,IAAI,CAAC,OAAO,IAAI,IAAI,CAAC,OAAO,CAAC,CAAC;QACvD,CAAC;IACH,CAAC;IAED,iBAAiB,CAAC,IAAiB;QACjC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QACtB,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC;QACpB,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,gBAAgB,EAAE,CAAC,CAAC;QAC/C,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE,CAAC;YAClB,IAAI,CAAC,iBAAiB,CAAC,KAAK,CAAC,CAAC;QAChC,CAAC;QACD,IAAI,IAAI,CAAC,OAAO,CAAC,aAAa,KAAK,IAAI,EAAE,CAAC;YACxC,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;QACjC,CAAC;QACD,IAAI,CAAC,kBAAkB,EAAE,CAAC;IAC5B,CAAC;IAED,OAAO,CAAC,IAAiB;QACvB,OAAO,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC;IACnC,CAAC;IAED,kBAAkB,CAAC,IAAiB;QAClC,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;QACzB,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC;QACpB,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,gBAAgB,EAAE,CAAC,CAAC;QAC/C,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE,CAAC;YAClB,IAAI,CAAC,iBAAiB,CAAC,KAAK,CAAC,CAAC;QAChC,CAAC;QACD,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;QAC3B,IAAI,CAAC,kBAAkB,EAAE,CAAC;IAC5B,CAAC;IAED,eAAe;QACb,IAAI,CAAC,iBAAiB,CAAC,IAAI,gBAAgB,EAAE,CAAC,CAAC;IACjD,CAAC;IAED,YAAY;QACV,IAAI,CAAC,iBAAiB,CAAC,IAAI,gBAAgB,CAAC,IAAI,CAAC,CAAC,CAAC;IACrD,CAAC;IAED,UAAU,CAAC,IAAY;QACrB,IAAI,CAAC,iBAAiB,CAAC,IAAI,WAAW,CAAC,IAAI,CAAC,CAAC,CAAC;IAChD,CAAC;IAED,iBAAiB,CAAC,YAAyB;QACzC,MAAM,YAAY,GAAG,EAAE,CAAC;QACxB,KAAK,MAAM,IAAI,IAAI,IAAI,CAAC,KAAK,EAAE,CAAC;YAC9B,IAAI,IAAI,KAAK,YAAY,EAAE,CAAC;gBAC1B,IAAI,CAAC,OAAO,CAAC,MAAM,EAAE,CAAC;YACxB,CAAC;iBAAM,CAAC;gBACN,YAAY,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;YAC1B,CAAC;QACH,CAAC;QACD,IAAI,CAAC,KAAK,GAAG,YAAY,CAAC;IAC5B,CAAC;IAED,kBAAkB;QAChB,KAAK,MAAM,IAAI,IAAI,IAAI,CAAC,KAAK,EAAE,CAAC;YAC9B,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC;QACtB,CAAC;QACD,IAAI,CAAC,KAAK,GAAG,EAAE,CAAC;QAChB,IAAI,CAAC,cAAc,EAAE,CAAC;IACxB,CAAC;IAED,kBAAkB;QAChB,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,MAAM,EAAE,CAAC;YACvB,OAAO;QACT,CAAC;QACD,sEAAsE;QACtE,IAAI,mBAAmB,GAAG,KAAK,CAAC;QAChC,IAAI,aAAa,CAAC;QAClB,IAAI,mBAAmB,GAAG,KAAK,CAAC;QAChC,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,MAAM,EAAE,EAAE,CAAC,EAAE,CAAC;YAC3C,IAAI,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,YAAY,gBAAgB,EAAE,CAAC;gBAC9C,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,UAAU,CAAC,CAAC,mBAAmB,CAAC,CAAC;gBAC/C,mBAAmB,GAAG,IAAI,CAAC;gBAC3B,aAAa,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;gBAC9B,SAAS;YACX,CAAC;YACD,IAAI,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,OAAO,EAAE,EAAE,CAAC;gBAC5B,mBAAmB,GAAG,KAAK,CAAC;gBAC5B,aAAa,GAAG,IAAI,CAAC;gBACrB,mBAAmB,GAAG,IAAI,CAAC;YAC7B,CAAC;QACH,CAAC;QACD,IAAI,aAAa,IAAI,aAAa,KAAK,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,KAAK,CAAC,MAAM,GAAG,CAAC,CAAC,EAAE,CAAC;YACzE,aAAa,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC;QAClC,CAAC;QAED,IAAI,CAAC,SAAS,CAAC,MAAM,CACjB,QAAQ,EACR,aAAa,KAAK,IAAI,IAAI,aAAa,KAAK,SAAS,IAAI,aAAa,CAAC,OAAO,EAAE,IAAI,CAAC,mBAAmB,CAAC,CAAC;IAChH,CAAC;IAED,KAAK,CAAC,qBAAqB,CAAC,QAAgB;QAC1C,MAAM,UAAU,GAA8B,yBAAyB,EAAE,CAAC;QAE1E,UAAU,CAAC,IAAI,CAAC,CAAC,UAAU,EAAE,UAAU,EAAE,EAAE;YACzC,MAAM,MAAM,GAAG,UAAU,CAAC,KAAK,IAAI,CAAC,CAAC;YACrC,MAAM,MAAM,GAAG,UAAU,CAAC,KAAK,IAAI,CAAC,CAAC;YACrC,OAAO,MAAM,GAAG,MAAM,CAAC;QACzB,CAAC,CAAC,CAAC;QAEH,MAAM,QAAQ,GAAG,UAAU,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,QAAQ,KAAK,QAAQ,CAAC,CAAC;QACjE,MAAM,KAAK,GAAG,MAAM,OAAO,CAAC,GAAG,CAAC,QAAQ,CAAC,GAAG,CAAC,SAAS,CAAC,EAAE;YACvD,MAAM,EAAC,SAAS,EAAE,QAAQ,EAAE,KAAK,EAAE,QAAQ,EAAC,GAAG,SAAS,CAAC;YACzD,IAAI,SAAS,EAAE,CAAC;gBACd,OAAO,IAAI,gBAAgB,EAAE,CAAC;YAChC,CAAC;YACD,IAAI,QAAQ,EAAE,CAAC;gBACb,OAAO,OAAO,CAAC,kBAAkB,CAAC,QAAQ,EAAE,EAAC,KAAK,EAAC,CAAC,CAAC;YACvD,CAAC;YACD,sHAAsH;YACtH,IAAI,CAAC,QAAQ,EAAE,CAAC;gBACd,MAAM,IAAI,KAAK,CAAC,sEAAsE,CAAC,CAAC;YAC1F,CAAC;YACD,OAAO,QAAQ,EAAE,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,EAAE,CAAC,CAAC;QAC1C,CAAC,CAAC,CAAC,CAAC;QAEJ,KAAK,MAAM,IAAI,IAAI,KAAK,EAAE,CAAC;YACzB,IAAI,IAAI,EAAE,CAAC;gBACT,IAAI,CAAC,iBAAiB,CAAC,IAAI,CAAC,CAAC;YAC/B,CAAC;QACH,CAAC;IACH,CAAC;CACF;AAED,cAAc,CAAC,MAAM,CAAC,kBAAkB,EAAE,OAAO,CAAC,CAAC;AAMnD,iFAAiF;AACjF,8DAA8D;AAC9D,MAAM,OAAO,WAA0D,SAAQ,MAAM,CAAC,aAAa,CAAC,aAAgB;IAClH,OAAO,CAAI;IACX,QAAQ,CAAU;IAClB,OAAO,CAAU;IACjB,OAAO,CAAe;IACZ,KAAK,CAAU;IAEzB,YAAY,OAAU;QACpB,KAAK,EAAE,CAAC;QACR,IAAI,CAAC,OAAO,GAAG,OAAO,CAAC;QACvB,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;QACrB,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC;QAEpB;;WAEG;QACH,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC;IACtB,CAAC;IAED,QAAQ,CAAC,KAAa,EAAE,WAA6B,SAAS;QAC5D,IAAI,IAAI,CAAC,KAAK,KAAK,KAAK,EAAE,CAAC;YACzB,OAAO;QACT,CAAC;QACD,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;QACnB,SAAS,CAAC,QAAQ,CAAC,IAAI,CAAC,OAAO,EAAE,KAAK,CAAC,CAAC;QACxC,IAAI,QAAQ,KAAK,SAAS,EAAE,CAAC;YAC3B,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,OAAO,EAAE,KAAK,CAAC,CAAC;QACvC,CAAC;aAAM,CAAC;YACN,OAAO,CAAC,wBAAwB,CAAC,IAAI,CAAC,OAAO,EAAE,KAAK,EAAE,QAAQ,CAAC,CAAC;QAClE,CAAC;IACH,CAAC;IAED,UAAU,CAAC,KAAc;QACvB,IAAI,IAAI,CAAC,OAAO,KAAK,KAAK,EAAE,CAAC;YAC3B,OAAO;QACT,CAAC;QACD,IAAI,CAAC,OAAO,GAAG,KAAK,CAAC;QACrB,IAAI,CAAC,iBAAiB,CAAC,IAAI,CAAC,OAAO,IAAI,CAAC,CAAC,IAAI,CAAC,OAAO,IAAI,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC,CAAC;IAClF,CAAC;IAED,iBAAiB,CAAC,OAAgB;QAChC,qFAAqF;QACrF,0EAA0E;QAC1E,IAAI,CAAC,OAAO,CAAC,QAAQ,GAAG,CAAC,OAAO,CAAC;IACnC,CAAC;IAED,OAAO;QACL,OAAO,IAAI,CAAC,QAAQ,CAAC;IACvB,CAAC;IAED,UAAU,CAAC,CAAU;QACnB,IAAI,IAAI,CAAC,QAAQ,KAAK,CAAC,EAAE,CAAC;YACxB,OAAO;QACT,CAAC;QACD,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,MAAM,CAAC,QAAQ,EAAE,CAAC,CAAC,CAAC,CAAC;QAC5C,IAAI,CAAC,QAAQ,GAAG,CAAC,CAAC;QAClB,IAAI,IAAI,CAAC,OAAO,IAAI,CAAC,CAAC,IAAI,YAAY,gBAAgB,CAAC,EAAE,CAAC;YACxD,IAAI,CAAC,OAAO,CAAC,kBAAkB,EAAE,CAAC;QACpC,CAAC;IACH,CAAC;IAED,gBAAgB,CAAC,OAAgB;IACjC,CAAC;IAED,WAAW,CAAC,KAAa;QACvB,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,QAAQ,GAAG,KAAK,GAAG,IAAI,CAAC;IAC7C,CAAC;IAED,WAAW,CAAC,KAAa;QACvB,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,QAAQ,GAAG,KAAK,GAAG,IAAI,CAAC;IAC7C,CAAC;CACF;AAUD,MAAM,OAAO,4BAA6B,SAAQ,WAAmD;IAC1F,gBAAgB,CAAC,MAAe;QACvC,IAAI,CAAC,wBAAwB,yFAA4D,MAAM,CAAC,CAAC;IACnG,CAAC;CACF;AAED,MAAM,OAAO,WAAY,SAAQ,WAA8B;IAC7D,YAAY,IAAI,GAAG,EAAE;QACnB,MAAM,OAAO,GAAG,QAAQ,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;QAC9C,OAAO,CAAC,SAAS,CAAC,GAAG,CAAC,cAAc,CAAC,CAAC;QACtC,KAAK,CAAC,OAAO,CAAC,CAAC;QACf,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;IACrB,CAAC;IAED,IAAI;QACF,OAAO,IAAI,CAAC,OAAO,CAAC,WAAW,IAAI,EAAE,CAAC;IACxC,CAAC;IAED,OAAO,CAAC,IAAY;QAClB,IAAI,CAAC,OAAO,CAAC,WAAW,GAAG,IAAI,CAAC;IAClC,CAAC;CACF;AAED,MAAM,OAAO,aAAc,SAAQ,WAA4D;IACrF,MAAM,CAAwB;IAC9B,IAAI,CAAU;IACd,OAAO,CAAe;IAE9B,YAAY,KAAa,EAAE,KAAc,EAAE,IAAa,EAAE,YAAqB,EAAE,MAA8B;QAC7G,IAAI,CAAC,MAAM,EAAE,CAAC;YACZ,MAAM,GAAG,IAAI,OAAO,CAAC,MAAM,CAAC,MAAM,EAAE,CAAC;YACrC,IAAI,KAAK,IAAI,CAAC,IAAI,EAAE,CAAC;gBACnB,MAAM,CAAC,IAAI,GAAG,EAAC,OAAO,0CAA6B,EAAE,QAAQ,EAAE,KAAK,EAAC,CAAC;YACxE,CAAC;iBAAM,CAAC;gBACN,MAAM,CAAC,OAAO,2CAA8B,CAAC;gBAC7C,MAAM,CAAC,gBAAgB,GAAG,IAAI,CAAC;gBAC/B,IAAI,KAAK,EAAE,CAAC;oBACV,MAAM,CAAC,QAAQ,GAAG,KAAK,CAAC;gBAC1B,CAAC;YACH,CAAC;QACH,CAAC;QACD,KAAK,CAAC,MAAM,CAAC,CAAC;QACd,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC;QACrB,MAAM,CAAC,SAAS,CAAC,GAAG,CAAC,gBAAgB,CAAC,CAAC;QACvC,IAAI,CAAC,OAAO,CAAC,gBAAgB,CAAC,OAAO,EAAE,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,KAAK,CAAC,CAAC;QACvE,MAAM,CAAC,WAAW,GAAG,IAAI,IAAI,EAAE,CAAC;QAChC,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC;QACrB,IAAI,YAAY,EAAE,CAAC;YACjB,MAAM,CAAC,YAAY,GAAG,YAAY,CAAC;QACrC,CAAC;IACH,CAAC;IAED,KAAK;QACH,IAAI,CAAC,OAAO,CAAC,KAAK,EAAE,CAAC;IACvB,CAAC;IAED,OAAO,CAAC,OAAgB;QACtB,IAAI,CAAC,MAAM,CAAC,OAAO,GAAG,OAAO,CAAC;IAChC,CAAC;IAED,aAAa,CAAC,aAAsB;QAClC,IAAI,CAAC,MAAM,CAAC,aAAa,GAAG,aAAa,CAAC;IAC5C,CAAC;IAED,SAAS;QACP,OAAO,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC;IAC7B,CAAC;IAED,OAAO,CAAC,OAAgB;QACtB,IAAI,CAAC,MAAM,CAAC,OAAO,GAAG,OAAO,CAAC;IAChC,CAAC;IAED,aAAa,CAAC,IAA+B;QAC3C,IAAI,CAAC,MAAM,CAAC,UAAU,GAAG,IAAI,CAAC;IAChC,CAAC;IAED,gBAAgB,CAAC,aAAsB;QACrC,IAAI,CAAC,MAAM,CAAC,aAAa,GAAG,aAAa,CAAC;IAC5C,CAAC;IAED,OAAO,CAAC,IAAyB;QAC/B,IAAI,CAAC,MAAM,CAAC,IAAI,GAAG,IAAI,CAAC;IAC1B,CAAC;IAED,mBAAmB;QACjB,IAAI,CAAC,MAAM,CAAC,gBAAgB,GAAG,IAAI,CAAC;IACtC,CAAC;IAED,OAAO,CAAC,IAAY;QAClB,IAAI,IAAI,CAAC,IAAI,KAAK,IAAI,EAAE,CAAC;YACvB,OAAO;QACT,CAAC;QACD,IAAI,CAAC,MAAM,CAAC,WAAW,GAAG,IAAI,CAAC;QAC/B,IAAI,CAAC,MAAM,CAAC,OAAO,2CAA8B,CAAC;QAClD,IAAI,CAAC,MAAM,CAAC,gBAAgB,GAAG,IAAI,CAAC;QACpC,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;IACnB,CAAC;IAED,UAAU,CAAC,OAAoB;QAC7B,IAAI,IAAI,CAAC,OAAO,EAAE,CAAC;YACjB,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,OAAO,CAAC,CAAC;QACpC,CAAC;aAAM,CAAC;YACN,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC;QAChC,CAAC;QACD,IAAI,CAAC,OAAO,GAAG,OAAO,CAAC;IACzB,CAAC;IAED,QAAQ,CAAC,QAAgB;QACvB,IAAI,CAAC,MAAM,CAAC,QAAQ,GAAG,QAAQ,CAAC;IAClC,CAAC;IAED,cAAc,CAAC,eAAuB;QACpC,IAAI,CAAC,MAAM,CAAC,OAAO,yDAAqC,CAAC;QACzD,IAAI,CAAC,MAAM,CAAC,eAAe,GAAG,eAAe,CAAC;IAChD,CAAC;IAED,kBAAkB,CAAC,OAAe;QAChC,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,eAAe,GAAG,MAAM,GAAG,OAAO,GAAG,GAAG,CAAC;IAC9D,CAAC;IAED,YAAY;QACV,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,GAAG,CAAC,0BAA0B,CAAC,CAAC;IACzD,CAAC;IAED,WAAW;QACT,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,GAAG,CAAC,WAAW,CAAC,CAAC;IAC1C,CAAC;IAED,OAAO,CAAC,KAAY;QAClB,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE,CAAC;YAClB,OAAO;QACT,CAAC;QACD,IAAI,CAAC,wBAAwB,2CAA6B,KAAK,CAAC,CAAC;QACjE,KAAK,CAAC,OAAO,EAAE,CAAC;IAClB,CAAC;CACF;AAYD,MAAM,OAAO,YAAa,SAAQ,WAAoC;IAC5D,MAAM,CAAa;IACV,YAAY,CAAU;IAEvC,YACI,WAAmB,EAAE,qBAA8B,EAAE,UAAmB,EAAE,YAAqB,EAAE,OAAgB,EACjH,WAA+F,EAC/F,kBAA4B,EAAE,YAAqB,EAAE,OAAqB;QAC5E,IAAI,CAAC,OAAO,EAAE,CAAC;YACb,OAAO,GAAG,QAAQ,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;QAC1C,CAAC;QACD,OAAO,CAAC,SAAS,CAAC,GAAG,CAAC,eAAe,CAAC,CAAC;QACvC,KAAK,CAAC,OAAO,CAAC,CAAC;QAEf,MAAM,qBAAqB,GAAG,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,KAAK,EAAE,sBAAsB,CAAC,CAAC;QACtF,SAAS,CAAC,QAAQ,CAAC,qBAAqB,EAAE,qBAAqB,IAAI,WAAW,CAAC,CAAC;QAChF,qBAAqB,CAAC,gBAAgB,CAAC,OAAO,EAAE,GAAG,EAAE,CAAC,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC,CAAC;QAC7F,qBAAqB,CAAC,gBAAgB,CAAC,MAAM,EAAE,GAAG,EAAE,CAAC,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,MAAM,CAAC,SAAS,CAAC,CAAC,CAAC;QAE/F,IAAI,CAAC,MAAM,GAAG,IAAI,UAAU,EAAE,CAAC;QAC/B,IAAI,CAAC,MAAM,CAAC,YAAY,GAAG,YAAY,CAAC;QACxC,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,qBAAqB,CAAC,CAAC;QAC9D,IAAI,CAAC,YAAY,CAAC,SAAS,CAAC,GAAG,CAAC,sBAAsB,CAAC,CAAC;QACxD,IAAI,CAAC,YAAY,CAAC,gBAAgB,CAAC,SAAS,EAAE,CAAC,KAAY,EAAE,EAAE,CAAC,IAAI,CAAC,iBAAiB,CAAC,KAAsB,CAAC,CAAC,CAAC;QAChH,IAAI,CAAC,MAAM,CAAC,UAAU,CAClB,WAAW,IAAI,CAAC,GAAG,EAAE,CAAC,OAAO,CAAC,OAAO,CAAC,EAAE,CAAC,CAAC,EAC1C,GAAG,EACH,kBAAkB,CACrB,CAAC;QACF,IAAI,OAAO,EAAE,CAAC;YACZ,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,OAAO,CAAC,CAAC;QAChC,CAAC;QACD,IAAI,CAAC,MAAM,CAAC,cAAc,CAAC,WAAW,EAAE,qBAAqB,CAAC,CAAC;QAC/D,IAAI,CAAC,MAAM,CAAC,gBAAgB,oDAAgC,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;QAE9F,IAAI,UAAU,EAAE,CAAC;YACf,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,QAAQ,GAAG,MAAM,CAAC,UAAU,CAAC,CAAC;QACnD,CAAC;QACD,IAAI,YAAY,EAAE,CAAC;YACjB,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,UAAU,GAAG,MAAM,CAAC,YAAY,CAAC,CAAC;QACvD,CAAC;QAED,MAAM,eAAe,GAAG,UAAU,CAAC,SAAS,CAAC,UAAU,CAAC,CAAC;QACzD,MAAM,WAAW,GAAG,IAAI,OAAO,CAAC,MAAM,CAAC,MAAM,EAAE,CAAC;QAChD,WAAW,CAAC,IAAI,GAAG;YACjB,OAAO,0CAA6B;YACpC,QAAQ,EAAE,qBAAqB;YAC/B,IAAI,yCAA2B;YAC/B,KAAK,EAAE,eAAe;SACvB,CAAC;QACF,WAAW,CAAC,SAAS,GAAG,4BAA4B,CAAC;QACrD,WAAW,CAAC,YAAY,CAAC,OAAO,EAAE,GAAG,aAAa,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC,KAAK,CAAC,EAAC,KAAK,EAAE,IAAI,EAAC,CAAC,CAAC,MAAM,CAAC,QAAQ,CAAC,EAAE,CAAC,CAAC;QAC5G,aAAa,CAAC,eAAe,CAAC,WAAW,EAAE,qBAAqB,CAAC,CAAC;QAClE,WAAW,CAAC,OAAO,2CAA8B,CAAC;QAClD,WAAW,CAAC,IAAI,0CAA4B,CAAC;QAC7C,WAAW,CAAC,QAAQ,GAAG,qBAAqB,CAAC;QAC7C,WAAW,CAAC,KAAK,GAAG,eAAe,CAAC;QACpC,WAAW,CAAC,SAAS,GAAG,eAAe,CAAC;QACxC,WAAW,CAAC,QAAQ,GAAG,CAAC,CAAC,CAAC;QAE1B,WAAW,CAAC,gBAAgB,CAAC,OAAO,EAAE,GAAG,EAAE;YACzC,IAAI,CAAC,QAAQ,CAAC,EAAE,EAAE,IAAI,CAAC,CAAC;YACxB,IAAI,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC;QACtB,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,WAAW,CAAC,CAAC;QACtC,IAAI,CAAC,iBAAiB,EAAE,CAAC;IAC3B,CAAC;IAEQ,iBAAiB,CAAC,OAAgB;QACzC,IAAI,OAAO,EAAE,CAAC;YACZ,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,MAAM,CAAC,UAAU,CAAC,CAAC;QAC5C,CAAC;aAAM,CAAC;YACN,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,GAAG,CAAC,UAAU,CAAC,CAAC;QACzC,CAAC;QAED,IAAI,CAAC,MAAM,CAAC,UAAU,CAAC,OAAO,CAAC,CAAC;IAClC,CAAC;IAED,QAAQ,CAAC,KAAa,EAAE,MAAgB;QACtC,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;QAC3B,IAAI,MAAM,EAAE,CAAC;YACX,IAAI,CAAC,gBAAgB,EAAE,CAAC;QAC1B,CAAC;QACD,IAAI,CAAC,iBAAiB,EAAE,CAAC;IAC3B,CAAC;IAED,KAAK;QACH,OAAO,IAAI,CAAC,MAAM,CAAC,yBAAyB,EAAE,CAAC;IACjD,CAAC;IAED,sBAAsB;QACpB,OAAO,IAAI,CAAC,MAAM,CAAC,IAAI,EAAE,CAAC;IAC5B,CAAC;IAED,iBAAiB;QACf,IAAI,CAAC,MAAM,CAAC,iBAAiB,EAAE,CAAC;IAClC,CAAC;IAED,KAAK;QACH,IAAI,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC;IACtB,CAAC;IAEO,iBAAiB,CAAC,KAAoB;QAC5C,IAAI,KAAK,CAAC,GAAG,KAAK,OAAO,IAAI,IAAI,CAAC,MAAM,CAAC,IAAI,EAAE,EAAE,CAAC;YAChD,IAAI,CAAC,wBAAwB,wDAAmC,IAAI,CAAC,MAAM,CAAC,IAAI,EAAE,CAAC,CAAC;QACtF,CAAC;QACD,IAAI,CAAC,QAAQ,CAAC,iBAAiB,CAAC,QAAQ,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,IAAI,EAAE,EAAE,CAAC;YACvE,OAAO;QACT,CAAC;QACD,IAAI,CAAC,QAAQ,CAAC,EAAE,EAAE,IAAI,CAAC,CAAC;QACxB,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;IACtB,CAAC;IAEO,gBAAgB;QACtB,IAAI,CAAC,iBAAiB,EAAE,CAAC;QACzB,IAAI,CAAC,wBAAwB,sDAAkC,IAAI,CAAC,MAAM,CAAC,IAAI,EAAE,CAAC,CAAC;IACrF,CAAC;IAEO,iBAAiB;QACvB,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,MAAM,CAAC,qBAAqB,EAAE,CAAC,IAAI,CAAC,MAAM,CAAC,IAAI,EAAE,CAAC,CAAC;IAC5E,CAAC;CACF;AAED,MAAM,OAAO,aAAc,SAAQ,YAAY;IAC7C,YACI,QAA0C,EAAE,UAAmB,EAAE,YAAqB,EAAE,OAAgB,EACxG,WAA+F,EAC/F,kBAA4B,EAAE,YAAqB,EAAE,OAAqB;QAC5E,MAAM,iBAAiB,GAAG,QAAQ,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC,UAAU,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC;QAC7E,KAAK,CACD,iBAAiB,EAAE,iBAAiB,EAAE,UAAU,EAAE,YAAY,EAAE,OAAO,EAAE,WAAW,EAAE,kBAAkB,EACxG,YAAY,IAAI,QAAQ,EAAE,OAAO,CAAC,CAAC;QAEvC,MAAM,UAAU,GAAG,UAAU,CAAC,QAAQ,CAAC,CAAC;QACxC,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,UAAU,CAAC,CAAC;QACjC,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,GAAG,CAAC,gBAAgB,CAAC,CAAC;IAC/C,CAAC;CACF;AAED,MAAM,OAAO,mBAAoB,SAAQ,WAAW;IAClD,MAAM,CAAC,kBAAkB,GAAG,CAAC,OAAO,EAAE,UAAU,CAAC,CAAC;IAElD,IAAI,CAAgB;IACpB,QAAQ,GAA6B,IAAI,CAAC;IAC1C,KAAK,GAAqB,SAAS,CAAC;IACpC,SAAS,GAAG,KAAK,CAAC;IAElB,iBAAiB;QACf,IAAI,IAAI,CAAC,IAAI,EAAE,CAAC;YACd,OAAO;QACT,CAAC;QACD,MAAM,IAAI,GAAG,IAAI,CAAC,YAAY,CAAC,MAAM,CAAC,CAAC;QACvC,IAAI,IAAI,EAAE,CAAC;YACT,IAAI,CAAC,QAAQ,GAAI,IAAI,CAAC,WAAW,EAA4B,CAAC,aAAa,CAAC,gBAAgB,IAAI,IAAI,CAAC,CAAC;QACxG,CAAC;QACD,MAAM,WAAW,GAAG,IAAI,CAAC,YAAY,CAAC,aAAa,CAAC,IAAI,EAAE,CAAC;QAC3D,MAAM,qBAAqB,GAAG,IAAI,CAAC,YAAY,CAAC,kBAAkB,CAAC,IAAI,SAAS,CAAC;QACjF,MAAM,OAAO,GAAG,IAAI,CAAC,YAAY,CAAC,OAAO,CAAC,IAAI,SAAS,CAAC;QACxD,MAAM,YAAY,GAAG,IAAI,CAAC,EAAE,IAAI,SAAS,CAAC;QAC1C,MAAM,QAAQ,GAAG,IAAI,CAAC,YAAY,CAAC,MAAM,CAAC,KAAK,QAAQ,CAAC;QACxD,IAAI,QAAQ,EAAE,CAAC;YACb,IAAI,CAAC,IAAI,GAAG,IAAI,aAAa,CACzB,WAAgD,EAAE,gBAAgB,CAAC,SAAS;YAC5E,kBAAkB,CAAC,SAAS,EAAE,OAAO,EAAE,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,SAAS;YAClG,wBAAwB,CAAC,SAAS,EAAE,YAAY,IAAI,QAAQ,EAAE,IAAI,CAAC,CAAC;QAC1E,CAAC;aAAM,CAAC;YACN,IAAI,CAAC,IAAI,GAAG,IAAI,YAAY,CACxB,WAAW,EAAE,qBAAqB,EAAE,gBAAgB,CAAC,SAAS;YAC9D,kBAAkB,CAAC,SAAS,EAAE,OAAO,EAAE,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,SAAS;YAClG,wBAAwB,CAAC,SAAS,EAAE,YAAY,EAAE,IAAI,CAAC,CAAC;QAC9D,CAAC;QACD,IAAI,IAAI,CAAC,KAAK,EAAE,CAAC;YACf,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;QACjC,CAAC;QACD,IAAI,IAAI,CAAC,SAAS,EAAE,CAAC;YACnB,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC;QAC9B,CAAC;QACD,IAAI,CAAC,IAAI,CAAC,gBAAgB,sDAAkC,KAAK,CAAC,EAAE;YAClE,IAAI,CAAC,aAAa,CAAC,IAAI,WAAW,CAAC,QAAQ,EAAE,EAAC,MAAM,EAAE,KAAK,CAAC,IAAI,EAAC,CAAC,CAAC,CAAC;QACtE,CAAC,CAAC,CAAC;QACH,IAAI,CAAC,IAAI,CAAC,gBAAgB,wDAAmC,KAAK,CAAC,EAAE;YACnE,IAAI,CAAC,aAAa,CAAC,IAAI,WAAW,CAAC,QAAQ,EAAE,EAAC,MAAM,EAAE,KAAK,CAAC,IAAI,EAAC,CAAC,CAAC,CAAC;QACtE,CAAC,CAAC,CAAC;IACL,CAAC;IAEQ,KAAK;QACZ,IAAI,CAAC,IAAI,EAAE,KAAK,EAAE,CAAC;IACrB,CAAC;IAED,KAAK,CAAC,eAAe,CAAC,UAAkB,EAAE,MAAc,EAAE,KAAe;QACvE,IAAI,CAAC,MAAM,IAAI,CAAC,KAAK,IAAI,UAAU,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE,CAAC;YACtD,OAAO,EAAE,CAAC;QACZ,CAAC;QAED,MAAM,OAAO,GAAG,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC;QACtC,OAAO,CAAC,GAAG,OAAO,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,EAAC,KAAK,EAAC,EAAE,EAAE,CAAC,KAAK,CAAC,CAAC,CAAC,MAAM,CAAC,KAAK,CAAC,EAAE,CAAC,KAAK,CAAC,UAAU,CAAC,MAAM,CAAC,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,EAAC,IAAI,EAAC,CAAC,CAAC,CAAC;IAChH,CAAC;IAED,wBAAwB,CAAC,IAAY,EAAE,SAAiB,EAAE,QAAgB;QACxE,IAAI,IAAI,KAAK,OAAO,EAAE,CAAC;YACrB,IAAI,IAAI,CAAC,IAAI,IAAI,IAAI,CAAC,IAAI,CAAC,KAAK,EAAE,KAAK,QAAQ,EAAE,CAAC;gBAChD,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,QAAQ,EAAE,IAAI,CAAC,CAAC;YACrC,CAAC;iBAAM,CAAC;gBACN,IAAI,CAAC,KAAK,GAAG,QAAQ,CAAC;YACxB,CAAC;QACH,CAAC;aAAM,IAAI,IAAI,KAAK,UAAU,EAAE,CAAC;YAC/B,IAAI,CAAC,SAAS,GAAG,OAAO,QAAQ,KAAK,QAAQ,CAAC;YAC9C,IAAI,IAAI,CAAC,IAAI,EAAE,CAAC;gBACd,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;YACxC,CAAC;QACH,CAAC;IACH,CAAC;IAED,IAAI,QAAQ,CAAC,QAAiB;QAC5B,IAAI,QAAQ,EAAE,CAAC;YACb,IAAI,CAAC,YAAY,CAAC,UAAU,EAAE,EAAE,CAAC,CAAC;QACpC,CAAC;aAAM,CAAC;YACN,IAAI,CAAC,eAAe,CAAC,UAAU,CAAC,CAAC;QACnC,CAAC;IACH,CAAC;IAED,IAAI,QAAQ;QACV,OAAO,IAAI,CAAC,YAAY,CAAC,UAAU,CAAC,CAAC;IACvC,CAAC;;AAEH,cAAc,CAAC,MAAM,CAAC,wBAAwB,EAAE,mBAAmB,CAAC,CAAC;AAcrE,MAAM,OAAO,aAAc,SAAQ,aAAa;IAC7B,YAAY,CAAmB;IAEhD,YAAY,KAAa,EAAE,KAAc,EAAE,YAAqB,EAAE,YAAqB,EAAE,aAAuB;QAC9G,KAAK,CAAC,KAAK,EAAE,KAAK,EAAE,EAAE,CAAC,CAAC;QACxB,IAAI,CAAC,YAAY,GAAG,YAAY,CAAC,CAAC,CAAC,YAAY,CAAC,CAAC,CAAC,KAAK,CAAC;QACxD,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,YAAY,IAAI,EAAE,CAAC,CAAC;QAC7C,IAAI,CAAC,aAAa,0DAAmC,CAAC;QACtD,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;QAEpB,IAAI,YAAY,EAAE,CAAC;YACjB,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,OAAO,EAAE,GAAG,aAAa,CAAC,MAAM,EAAE,CAAC,KAAK,CAAC,EAAC,KAAK,EAAE,IAAI,EAAC,CAAC,CAAC,OAAO,CAAC,YAAY,CAAC,EAAE,CAAC,CAAC;QAC7G,CAAC;QACD,IAAI,aAAa,KAAK,SAAS,EAAE,CAAC;YAChC,IAAI,CAAC,gBAAgB,CAAC,aAAa,CAAC,CAAC;QACvC,CAAC;IACH,CAAC;IAED,gBAAgB,CAAC,aAAsB;QACrC,IAAI,CAAC,aAAa,CAAC,aAAa,CAAC,CAAC;IACpC,CAAC;IAED,UAAU,CAAC,OAAgB;QACzB,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC;IACxB,CAAC;IAED,UAAU,CAAC,OAAgB;QACzB,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC;IACxB,CAAC;IAED,wBAAwB;QACtB,IAAI,CAAC,aAAa,kDAA+B,CAAC;IACpD,CAAC;CACF;AAED,MAAM,OAAO,iBAAkB,SAAQ,WAAqC;IAClE,WAAW,CAAe;IAC1B,IAAI,CAAU;IACd,QAAQ,CAAU;IAClB,OAAO,CAAe;IACb,kBAAkB,CAA8B;IAChD,WAAW,CAAU;IACrB,QAAQ,CAAU;IAClB,cAAc,CAAU;IACjC,gBAAgB,CAAU;IAClC,aAAa,GAAG,GAAG,CAAC;IAEpB,YACI,kBAA+C,EAAE,cAAwB,EAAE,WAAqB,EAChG,YAAqB,EAAE,QAAiB,EAAE,QAAkB;QAC9D,IAAI,OAAO,CAAC;QACZ,IAAI,QAAQ,EAAE,CAAC;YACb,OAAO,GAAG,IAAI,OAAO,CAAC,MAAM,CAAC,MAAM,EAAE,CAAC;YACtC,OAAO,CAAC,IAAI,GAAG,EAAC,OAAO,0CAA6B,EAAE,QAAQ,EAAC,CAAC;QAClE,CAAC;aAAM,CAAC;YACN,OAAO,GAAG,QAAQ,CAAC,aAAa,CAAC,QAAQ,CAAC,CAAC;QAC7C,CAAC;QACD,OAAO,CAAC,SAAS,CAAC,GAAG,CAAC,gBAAgB,CAAC,CAAC;QACxC,KAAK,CAAC,OAAO,CAAC,CAAC;QACf,IAAI,CAAC,OAAO,CAAC,gBAAgB,CAAC,OAAO,EAAE,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,KAAK,CAAC,CAAC;QAEvE,IAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC;QAEzB,IAAI,CAAC,QAAQ,CAAC,EAAE,CAAC,CAAC;QAClB,IAAI,CAAC,KAAK,GAAG,EAAE,CAAC;QAChB,IAAI,CAAC,cAAc,EAAE,CAAC;YACpB,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,GAAG,CAAC,sBAAsB,CAAC,CAAC;YACnD,MAAM,iBAAiB,GAAG,UAAU,CAAC,eAAe,EAAE,wBAAwB,CAAC,CAAC;YAChF,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,iBAAiB,CAAC,CAAC;QAC9C,CAAC;QACD,IAAI,YAAY,EAAE,CAAC;YACjB,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,OAAO,EAAE,GAAG,aAAa,CAAC,QAAQ,EAAE,CAAC,KAAK,CAAC,EAAC,KAAK,EAAE,IAAI,EAAC,CAAC,CAAC,OAAO,CAAC,YAAY,CAAC,EAAE,CAAC,CAAC;QAC/G,CAAC;QACD,IAAI,CAAC,OAAO,CAAC,gBAAgB,CAAC,WAAW,EAAE,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,KAAK,CAAC,CAAC;QAC7E,IAAI,CAAC,kBAAkB,GAAG,kBAAkB,CAAC;QAC7C,IAAI,CAAC,WAAW,GAAG,OAAO,CAAC,WAAW,CAAC,CAAC;QACxC,IAAI,CAAC,QAAQ,GAAG,OAAO,CAAC,QAAQ,CAAC,CAAC;QAClC,IAAI,CAAC,cAAc,GAAG,OAAO,CAAC,cAAc,CAAC,CAAC;QAC9C,SAAS,CAAC,gBAAgB,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;IAC3C,CAAC;IAED,OAAO,CAAC,IAAY;QAClB,IAAI,IAAI,CAAC,IAAI,KAAK,IAAI,IAAI,IAAI,CAAC,QAAQ,EAAE,CAAC;YACxC,OAAO;QACT,CAAC;QACD,IAAI,CAAC,IAAI,CAAC,WAAW,EAAE,CAAC;YACtB,IAAI,CAAC,WAAW,GAAG,QAAQ,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;YACjD,IAAI,CAAC,WAAW,CAAC,SAAS,CAAC,GAAG,CAAC,cAAc,EAAE,QAAQ,CAAC,CAAC;YACzD,MAAM,aAAa,GAAG,IAAI,CAAC,OAAO,CAAC,aAAa,CAAC,yBAAyB,CAAC,CAAC;YAC5E,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,IAAI,CAAC,WAAW,EAAE,aAAa,CAAC,CAAC;QAC7D,CAAC;QACD,IAAI,CAAC,WAAW,CAAC,WAAW,GAAG,IAAI,CAAC;QACpC,IAAI,CAAC,WAAW,CAAC,SAAS,CAAC,MAAM,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,CAAC;QACnD,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;IACnB,CAAC;IAED,UAAU,CAAC,OAAoB;QAC7B,IAAI,IAAI,CAAC,QAAQ,EAAE,CAAC;YAClB,OAAO;QACT,CAAC;QACD,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE,CAAC;YAClB,IAAI,CAAC,OAAO,GAAG,OAAO,CAAC;QACzB,CAAC;aAAM,CAAC;YACN,OAAO,CAAC,WAAW,CAAC,OAAO,CAAC,CAAC;YAC7B,IAAI,IAAI,CAAC,OAAO,CAAC,UAAU,EAAE,CAAC;gBAC5B,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,IAAI,CAAC,OAAO,CAAC,UAAU,CAAC,CAAC;YACpD,CAAC;QACH,CAAC;QACD,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC;IAChC,CAAC;IAED,WAAW;QACT,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,GAAG,CAAC,WAAW,CAAC,CAAC;IAC1C,CAAC;IAED,cAAc;QACZ,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,GAAG,CAAC,iCAAiC,CAAC,CAAC;IAChE,CAAC;IAED,eAAe,CAAC,CAAS;QACvB,IAAI,CAAC,aAAa,GAAG,CAAC,CAAC;IACzB,CAAC;IAED,SAAS,CAAC,KAAiB;QACzB,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE,CAAC;YAClB,OAAO;QACT,CAAC;QACD,IAAI,KAAK,CAAC,OAAO,KAAK,CAAC,EAAE,CAAC;YACxB,OAAO;QACT,CAAC;QAED,IAAI,CAAC,IAAI,CAAC,gBAAgB,EAAE,CAAC;YAC3B,IAAI,CAAC,gBAAgB,GAAG,MAAM,CAAC,UAAU,CAAC,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,EAAE,KAAK,CAAC,EAAE,IAAI,CAAC,aAAa,CAAC,CAAC;QAChG,CAAC;IACH,CAAC;IAEO,OAAO,CAAC,KAAY;QAC1B,OAAO,IAAI,CAAC,gBAAgB,CAAC;QAE7B,MAAM,kBAAkB,GACpB,IAAI,CAAC,cAAc,CAAC,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,qBAAqB,EAAE,CAAC,KAAK,CAAC,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,qBAAqB,EAAE,CAAC,IAAI,CAAC;QACjH,MAAM,WAAW,GAAG,IAAI,WAAW,CAAC,KAAK,EAAE;YACzC,WAAW,EAAE,IAAI,CAAC,WAAW;YAC7B,QAAQ,EAAE,IAAI,CAAC,QAAQ;YACvB,CAAC,EAAE,kBAAkB;YACrB,CAAC,EAAE,IAAI,CAAC,OAAO,CAAC,qBAAqB,EAAE,CAAC,GAAG,GAAG,IAAI,CAAC,OAAO,CAAC,YAAY;YACvE,iGAAiG;YACjG,oGAAoG;YACpG,gBAAgB,EAAE,GAAG,EAAE,CAAC,UAAU,CAAC,GAAG,EAAE,CAAC,IAAI,CAAC,OAAO,CAAC,eAAe,CAAC,eAAe,CAAC,EAAE,EAAE,CAAC;SAC5F,CAAC,CAAC;QACH,IAAI,CAAC,kBAAkB,CAAC,WAAW,CAAC,CAAC;QACrC,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,eAAe,EAAE,MAAM,CAAC,CAAC;QACnD,KAAK,WAAW,CAAC,IAAI,EAAE,CAAC;IAC1B,CAAC;IAED,OAAO,CAAC,KAAY;QAClB,IAAI,IAAI,CAAC,gBAAgB,EAAE,CAAC;YAC1B,YAAY,CAAC,IAAI,CAAC,gBAAgB,CAAC,CAAC;QACtC,CAAC;QACD,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;IACtB,CAAC;CACF;AAED,MAAM,OAAO,oBAAqB,SAAQ,aAAa;IACpC,YAAY,CAAS;IACrB,OAAO,CAAmC;IACnD,iBAAiB,CAAU;IAEnC,YACI,OAAyC,EAAE,KAAa,EAAE,KAAa,EAAE,YAAqB,EAC9F,YAAqB;QACvB,KAAK,CAAC,KAAK,EAAE,KAAK,EAAE,YAAY,EAAE,YAAY,CAAC,CAAC;QAChD,IAAI,CAAC,YAAY,GAAG,KAAK,CAAC;QAC1B,IAAI,CAAC,OAAO,GAAG,OAAO,CAAC;QACvB,IAAI,CAAC,cAAc,EAAE,CAAC;QACtB,IAAI,CAAC,OAAO,CAAC,iBAAiB,CAAC,IAAI,CAAC,cAAc,EAAE,IAAI,CAAC,CAAC;QAE1D,2EAA2E;QAC3E,IAAI,CAAC,iBAAiB,GAAG,KAAK,CAAC;IACjC,CAAC;IAEO,cAAc;QACpB,MAAM,OAAO,GAAG,IAAI,CAAC,OAAO,CAAC,GAAG,EAAE,CAAC;QACnC,IAAI,CAAC,UAAU,CAAC,OAAO,CAAC,CAAC;QACzB,MAAM,kBAAkB,GAAG,OAAO,CAAC,CAAC,CAAC,UAAU,CAAC,SAAS,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,UAAU,CAAC,SAAS,CAAC,UAAU,CAAC,CAAC;QACtG,IAAI,IAAI,CAAC,iBAAiB,EAAE,CAAC;YAC3B,SAAS,CAAC,aAAa,CAAC,KAAK,CAAC,kBAAkB,CAAC,CAAC;QACpD,CAAC;QACD,IAAI,CAAC,iBAAiB,GAAG,KAAK,CAAC;QAC/B,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;IACnC,CAAC;IAEQ,OAAO,CAAC,KAAY;QAC3B,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC;QAC9B,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,SAAS,EAAE,CAAC,CAAC;QACnC,KAAK,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;IACvB,CAAC;CACF;AAED,MAAM,OAAO,gBAAiB,SAAQ,WAAiB;IACrD,YAAY,MAAgB;QAC1B,MAAM,OAAO,GAAG,QAAQ,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;QAC9C,OAAO,CAAC,SAAS,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,CAAC,gBAAgB,CAAC,CAAC,CAAC,iBAAiB,CAAC,CAAC;QACrE,KAAK,CAAC,OAAO,CAAC,CAAC;IACjB,CAAC;CACF;AAUD,MAAM,OAAO,eAAgB,SAAQ,WAAoC;IACvE,YACI,aAA2C,EAAE,KAAa,EAAE,SAAkB,EAAE,YAAqB,EACrG,OAA2B;QAC7B,IAAI,CAAC,OAAO,EAAE,CAAC;YACb,OAAO,GAAG,QAAQ,CAAC,aAAa,CAAC,QAAQ,CAAC,CAAC;QAC7C,CAAC;QACD,KAAK,CAAC,OAAO,CAAC,CAAC;QACf,IAAI,aAAa,EAAE,CAAC;YAClB,IAAI,CAAC,OAAO,CAAC,gBAAgB,CAAC,QAAQ,EAAE,aAAa,EAAE,KAAK,CAAC,CAAC;QAChE,CAAC;QACD,SAAS,CAAC,QAAQ,CAAC,IAAI,CAAC,OAAO,EAAE,KAAK,CAAC,CAAC;QACxC,KAAK,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC;QACtB,IAAI,SAAS,EAAE,CAAC;YACd,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC;QACxC,CAAC;QACD,IAAI,YAAY,EAAE,CAAC;YACjB,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,OAAO,EAAE,GAAG,aAAa,CAAC,QAAQ,EAAE,CAAC,KAAK,CAAC,EAAC,MAAM,EAAE,IAAI,EAAC,CAAC,CAAC,OAAO,CAAC,YAAY,CAAC,EAAE,CAAC,CAAC;QAChH,CAAC;IACH,CAAC;IAED,IAAI;QACF,OAAO,IAAI,CAAC,OAAO,CAAC,iBAAiB,CAAC;IACxC,CAAC;IAED,OAAO;QACL,OAAO,KAAK,CAAC,SAAS,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,QAAQ,EAAE,CAAC,CAAC,CAAC;IAC9D,CAAC;IAED,SAAS,CAAC,MAAe;QACvB,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,MAAM,CAAC,CAAC;IACnC,CAAC;IAED,YAAY,CAAC,KAAa,EAAE,KAAc,EAAE,YAAqB;QAC/D,MAAM,MAAM,GAAG,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,QAAQ,CAAC,CAAC;QAClD,MAAM,CAAC,IAAI,GAAG,KAAK,CAAC;QACpB,IAAI,OAAO,KAAK,KAAK,WAAW,EAAE,CAAC;YACjC,MAAM,CAAC,KAAK,GAAG,KAAK,CAAC;QACvB,CAAC;QACD,IAAI,CAAC,YAAY,EAAE,CAAC;YAClB,YAAY,GAAG,KAAK,CAAC,CAAC,CAAC,QAAQ,CAAC,eAAe,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC;QACjF,CAAC;QACD,MAAM,CAAC,YAAY,CAAC,OAAO,EAAE,GAAG,aAAa,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC,KAAK,CAAC,EAAC,KAAK,EAAE,IAAI,EAAC,CAAC,EAAE,CAAC,CAAC;QACzF,OAAO,MAAM,CAAC;IAChB,CAAC;IAEQ,iBAAiB,CAAC,OAAgB;QACzC,KAAK,CAAC,iBAAiB,CAAC,OAAO,CAAC,CAAC;QACjC,IAAI,CAAC,OAAO,CAAC,QAAQ,GAAG,CAAC,OAAO,CAAC;IACnC,CAAC;IAED,YAAY,CAAC,MAAe;QAC1B,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,MAAM,CAAC,CAAC;IACnC,CAAC;IAED,aAAa;QACX,IAAI,CAAC,OAAO,CAAC,cAAc,EAAE,CAAC;IAChC,CAAC;IAED,cAAc;QACZ,IAAI,IAAI,CAAC,OAAO,CAAC,aAAa,IAAI,CAAC,EAAE,CAAC;YACpC,OAAO,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,OAAO,CAAC,aAAa,CAAsB,CAAC;QACvE,CAAC;QACD,OAAO,IAAI,CAAC;IACd,CAAC;IAED,MAAM,CAAC,MAAe;QACpB,IAAI,CAAC,OAAO,CAAC,aAAa,GAAG,KAAK,CAAC,SAAS,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE,MAAM,CAAC,CAAC;IAClF,CAAC;IAED,gBAAgB,CAAC,KAAa;QAC5B,IAAI,CAAC,OAAO,CAAC,aAAa,GAAG,KAAK,CAAC;IACrC,CAAC;IAED,aAAa;QACX,OAAO,IAAI,CAAC,OAAO,CAAC,aAAa,CAAC;IACpC,CAAC;CACF;AAOD,MAAM,OAAO,sBAAuB,SAAQ,eAAe;IACzD,QAAQ,CAAW;IACF,OAAO,CAAkC;IAClD,mBAAmB,CAAW;IACtC,YAAY,OAAiB,EAAE,OAAwC,EAAE,cAAsB;QAC7F,KAAK,CAAC,IAAI,EAAE,cAAc,EAAE,SAAS,EAAE,OAAO,CAAC,IAAI,CAAC,CAAC;QACrD,IAAI,CAAC,QAAQ,GAAG,OAAO,CAAC;QACxB,IAAI,CAAC,OAAO,GAAG,OAAO,CAAC;QACvB,IAAI,CAAC,OAAO,CAAC,gBAAgB,CAAC,QAAQ,EAAE,IAAI,CAAC,mBAAmB,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,KAAK,CAAC,CAAC;QACpF,IAAI,CAAC,UAAU,CAAC,OAAO,CAAC,CAAC;QACzB,OAAO,CAAC,iBAAiB,CAAC,IAAI,CAAC,wBAAwB,EAAE,IAAI,CAAC,CAAC;IACjE,CAAC;IAED,UAAU,CAAC,OAAiB;QAC1B,IAAI,CAAC,QAAQ,GAAG,OAAO,CAAC;QACxB,IAAI,CAAC,OAAO,CAAC,cAAc,EAAE,CAAC;QAC9B,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,OAAO,CAAC,MAAM,EAAE,EAAE,CAAC,EAAE,CAAC;YACxC,MAAM,UAAU,GAAG,OAAO,CAAC,CAAC,CAAC,CAAC;YAC9B,MAAM,MAAM,GAAG,IAAI,CAAC,YAAY,CAAC,UAAU,CAAC,KAAK,EAAE,UAAU,CAAC,KAAK,CAAC,CAAC;YACrE,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,MAAM,CAAC,CAAC;YACjC,IAAI,IAAI,CAAC,OAAO,CAAC,GAAG,EAAE,KAAK,UAAU,CAAC,KAAK,EAAE,CAAC;gBAC5C,IAAI,CAAC,gBAAgB,CAAC,CAAC,CAAC,CAAC;YAC3B,CAAC;QACH,CAAC;IACH,CAAC;IAED,KAAK;QACH,OAAO,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,aAAa,EAAE,CAAC,CAAC,KAAK,CAAC;IACnD,CAAC;IAEQ,MAAM,CAAC,MAAe;QAC7B,MAAM,KAAK,GAAG,KAAK,CAAC,SAAS,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE,MAAM,CAAC,CAAC;QACjE,IAAI,CAAC,gBAAgB,CAAC,KAAK,CAAC,CAAC;IAC/B,CAAC;IAEQ,gBAAgB,CAAC,KAAa;QACrC,KAAK,CAAC,gBAAgB,CAAC,KAAK,CAAC,CAAC;QAC9B,MAAM,MAAM,GAAG,IAAI,CAAC,QAAQ,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC;QACvC,IAAI,MAAM,EAAE,CAAC;YACX,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;QAC9B,CAAC;IACH,CAAC;IAED;;;;;;;OAOG;IAEH;;OAEG;IACK,wBAAwB;QAC9B,IAAI,IAAI,CAAC,mBAAmB,EAAE,CAAC;YAC7B,OAAO;QACT,CAAC;QAED,MAAM,KAAK,GAAG,IAAI,CAAC,OAAO,CAAC,GAAG,EAAE,CAAC;QACjC,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,QAAQ,CAAC,MAAM,EAAE,EAAE,CAAC,EAAE,CAAC;YAC9C,IAAI,KAAK,KAAK,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,KAAK,EAAE,CAAC;gBACrC,IAAI,CAAC,gBAAgB,CAAC,CAAC,CAAC,CAAC;gBACzB,MAAM;YACR,CAAC;QACH,CAAC;IACH,CAAC;IAED;;OAEG;IACK,mBAAmB,CAAC,MAAa;QACvC,MAAM,MAAM,GAAG,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,aAAa,EAAE,CAAC,CAAC;QACnD,IAAI,CAAC,mBAAmB,GAAG,IAAI,CAAC;QAChC,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;QAC/B,IAAI,CAAC,mBAAmB,GAAG,KAAK,CAAC;QACjC,mEAAmE;QACnE,kCAAkC;QAClC,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;IAC9B,CAAC;CACF;AAED,MAAM,OAAO,eAAgB,SAAQ,WAAiB;IACpD,cAAc,CAAgB;IAC9B,YACI,IAAqC,EAAE,OAAyC,EAChF,QAAuC,EAAE,YAAqB;QAChE,MAAM,aAAa,GAAG,aAAa,CAAC,MAAM,CAAC,IAAI,EAAE,SAAS,EAAE,SAAS,EAAE,YAAY,CAAC,CAAC;QACrF,KAAK,CAAC,aAAa,CAAC,CAAC;QACrB,IAAI,OAAO,EAAE,CAAC;YACZ,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,OAAO,EAAE,OAAO,CAAC,CAAC;QACzC,CAAC;QACD,IAAI,QAAQ,EAAE,CAAC;YACb,IAAI,CAAC,OAAO,CAAC,gBAAgB,CAAC,OAAO,EAAE,QAAQ,EAAE,KAAK,CAAC,CAAC;QAC1D,CAAC;QAED,IAAI,CAAC,cAAc,GAAG,aAAa,CAAC;IACtC,CAAC;IAED,OAAO;QACL,OAAQ,IAAI,CAAC,OAAyB,CAAC,OAAO,CAAC;IACjD,CAAC;IAED,UAAU,CAAC,KAAc;QACtB,IAAI,CAAC,OAAyB,CAAC,OAAO,GAAG,KAAK,CAAC;IAClD,CAAC;IAEQ,iBAAiB,CAAC,OAAgB;QACzC,KAAK,CAAC,iBAAiB,CAAC,OAAO,CAAC,CAAC;QAChC,IAAI,CAAC,OAAyB,CAAC,QAAQ,GAAG,CAAC,OAAO,CAAC;IACtD,CAAC;IAED,gBAAgB,CAAC,aAAsB;QACpC,IAAI,CAAC,OAAyB,CAAC,aAAa,GAAG,aAAa,CAAC;IAChE,CAAC;IAED;;;OAGG;IACH,YAAY,CAAC,OAAwC;QACnD,IAAI,CAAC,cAAc,CAAC,YAAY,CAAC,OAAO,CAAC,CAAC;IAC5C,CAAC;CACF;AAED,MAAM,OAAO,sBAAuB,SAAQ,eAAe;IACzD,YACI,OAAyC,EAAE,OAAyC,EACpF,cAAgD;QAClD,KAAK,CAAC,cAAc,IAAI,OAAO,CAAC,KAAK,EAAE,EAAE,OAAO,EAAE,SAAS,EAAE,OAAO,CAAC,IAAI,CAAC,CAAC;QAC3E,YAAY,CAAC,IAAI,CAAC,OAAwB,EAAE,OAAO,CAAC,CAAC;IACvD,CAAC;CACF;AAED,MAAM,sBAAsB,GAA8B,EAAE,CAAC;AAE7D,MAAM,UAAU,mBAAmB,CAAC,YAAqC;IACvE,sBAAsB,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;AAC5C,CAAC;AAED,SAAS,yBAAyB;IAChC,OAAO,sBAAsB,CAAC,MAAM,CAChC,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,mBAAmB,CAAC,EAAC,UAAU,EAAE,IAAI,CAAC,UAAU,EAAE,SAAS,EAAE,IAAI,CAAC,SAAS,EAAC,CAAC,CAAC,CAAC;AAClH,CAAC","sourcesContent":["// Copyright 2009 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\n/* eslint-disable @devtools/no-imperative-dom-api */\n\nimport * as Common from '../../core/common/common.js';\nimport * as i18n from '../../core/i18n/i18n.js';\nimport * as Platform from '../../core/platform/platform.js';\nimport * as Root from '../../core/root/root.js';\nimport * as Buttons from '../../ui/components/buttons/buttons.js';\nimport * as VisualLogging from '../../ui/visual_logging/visual_logging.js';\nimport {createIcon} from '../kit/kit.js';\n\nimport {type Action, Events as ActionEvents} from './ActionRegistration.js';\nimport {ActionRegistry} from './ActionRegistry.js';\nimport * as ARIAUtils from './ARIAUtils.js';\nimport {ContextMenu} from './ContextMenu.js';\nimport {GlassPane, PointerEventsBehavior} from './GlassPane.js';\nimport type {Suggestion} from './SuggestBox.js';\nimport {Events as TextPromptEvents, TextPrompt} from './TextPrompt.js';\nimport toolbarStyles from './toolbar.css.js';\nimport {Tooltip} from './Tooltip.js';\nimport {bindCheckbox, CheckboxLabel, LongClickController} from './UIUtils.js';\n\nconst UIStrings = {\n  /**\n   * @description Announced screen reader message for ToolbarSettingToggle when the setting is toggled on.\n   */\n  pressed: 'pressed',\n  /**\n   * @description Announced screen reader message for ToolbarSettingToggle when the setting is toggled off.\n   */\n  notPressed: 'not pressed',\n  /**\n   * @description Tooltip shown when the user hovers over the clear icon to empty the text input.\n   */\n  clearInput: 'Clear',\n  /**\n   * @description Placeholder for filter bars that shows before the user types in a filter keyword.\n   */\n  filter: 'Filter',\n} as const;\nconst str_ = i18n.i18n.registerUIStrings('ui/legacy/Toolbar.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\n\n/**\n * Custom element for toolbars.\n *\n * @property floating - The `\"floating\"` attribute is reflected as property.\n * @property wrappable - The `\"wrappable\"` attribute is reflected as property.\n * @attribute floating - If present the toolbar is rendered in columns, with a border\n *                  around it, and a non-transparent background. This is used to\n *                  build vertical toolbars that open with long-click. Defaults\n *                  to `false`.\n * @attribute wrappable - If present the toolbar items will wrap to a new row and the\n *                   toolbar height increases.\n */\nexport class Toolbar extends HTMLElement {\n  #shadowRoot = this.attachShadow({mode: 'open'});\n  private items: ToolbarItem[] = [];\n  enabled = true;\n  private compactLayout = false;\n\n  constructor() {\n    super();\n    this.#shadowRoot.createChild('style').textContent = toolbarStyles;\n    this.#shadowRoot.createChild('slot');\n  }\n\n  onItemsChange(mutationList: MutationRecord[]): void {\n    for (const mutation of mutationList) {\n      for (const element of mutation.removedNodes) {\n        if (!(element instanceof HTMLElement)) {\n          continue;\n        }\n        for (const item of this.items) {\n          if (item.element === element) {\n            this.items.splice(this.items.indexOf(item), 1);\n            break;\n          }\n        }\n      }\n      for (const element of mutation.addedNodes) {\n        if (!(element instanceof HTMLElement)) {\n          continue;\n        }\n        if (this.items.some(item => item.element === element)) {\n          continue;\n        }\n        let item: ToolbarItem;\n        if (element instanceof Buttons.Button.Button) {\n          item = new ToolbarButton('', undefined, undefined, undefined, element);\n        } else if (element instanceof ToolbarInputElement) {\n          item = element.item as ToolbarItem;\n        } else if (element instanceof HTMLSelectElement) {\n          item = new ToolbarComboBox(null, element.title, undefined, undefined, element);\n        } else {\n          item = new ToolbarItem(element);\n        }\n        if (item) {\n          this.appendToolbarItem(item);\n        }\n      }\n    }\n  }\n\n  connectedCallback(): void {\n    if (!this.hasAttribute('role')) {\n      this.setAttribute('role', 'toolbar');\n    }\n  }\n\n  /**\n   * Returns whether this toolbar is floating.\n   *\n   * @returns `true` if the `\"floating\"` attribute is present on this toolbar,\n   *         otherwise `false`.\n   */\n  get floating(): boolean {\n    return this.hasAttribute('floating');\n  }\n\n  /**\n   * Changes the value of the `\"floating\"` attribute on this toolbar.\n   *\n   * @param floating `true` to make the toolbar floating.\n   */\n  set floating(floating: boolean) {\n    this.toggleAttribute('floating', floating);\n  }\n\n  /**\n   * Returns whether this toolbar is wrappable.\n   *\n   * @returns `true` if the `\"wrappable\"` attribute is present on this toolbar,\n   *         otherwise `false`.\n   */\n  get wrappable(): boolean {\n    return this.hasAttribute('wrappable');\n  }\n\n  /**\n   * Changes the value of the `\"wrappable\"` attribute on this toolbar.\n   *\n   * @param wrappable `true` to make the toolbar items wrap to a new row and\n   *                  have the toolbar height adjust.\n   */\n  set wrappable(wrappable: boolean) {\n    this.toggleAttribute('wrappable', wrappable);\n  }\n\n  hasCompactLayout(): boolean {\n    return this.compactLayout;\n  }\n\n  setCompactLayout(enable: boolean): void {\n    if (this.compactLayout === enable) {\n      return;\n    }\n    this.compactLayout = enable;\n    for (const item of this.items) {\n      item.setCompactLayout(enable);\n    }\n  }\n\n  static createLongPressActionButton(\n      action: Action, toggledOptions: ToolbarButton[], untoggledOptions: ToolbarButton[]): ToolbarButton {\n    const button = Toolbar.createActionButton(action);\n    const mainButtonClone = Toolbar.createActionButton(action);\n\n    let longClickController: LongClickController|null = null;\n    let longClickButtons: ToolbarButton[]|null = null;\n\n    action.addEventListener(ActionEvents.TOGGLED, updateOptions);\n    updateOptions();\n    return button;\n\n    function updateOptions(): void {\n      const buttons = action.toggled() ? (toggledOptions || null) : (untoggledOptions || null);\n\n      if (buttons?.length) {\n        if (!longClickController) {\n          longClickController = new LongClickController(button.element, showOptions);\n          button.setLongClickable(true);\n          longClickButtons = buttons;\n        }\n      } else if (longClickController) {\n        longClickController.dispose();\n        longClickController = null;\n        button.setLongClickable(false);\n        longClickButtons = null;\n      }\n    }\n\n    function showOptions(): void {\n      let buttons: ToolbarButton[] = longClickButtons ? longClickButtons.slice() : [];\n      buttons.push(mainButtonClone);\n\n      const document = button.element.ownerDocument;\n      document.documentElement.addEventListener('mouseup', mouseUp, false);\n\n      const optionsGlassPane = new GlassPane();\n      optionsGlassPane.setPointerEventsBehavior(PointerEventsBehavior.BLOCKED_BY_GLASS_PANE);\n      optionsGlassPane.show(document);\n      const optionsBar = optionsGlassPane.contentElement.createChild('devtools-toolbar');\n      optionsBar.floating = true;\n      const buttonHeight = 26;\n\n      const hostButtonPosition = button.element.boxInWindow().relativeToElement(GlassPane.container(document));\n\n      const topNotBottom = hostButtonPosition.y + buttonHeight * buttons.length < document.documentElement.offsetHeight;\n\n      if (topNotBottom) {\n        buttons = buttons.reverse();\n      }\n\n      optionsBar.style.height = (buttonHeight * buttons.length) + 'px';\n      if (topNotBottom) {\n        optionsBar.style.top = (hostButtonPosition.y - 5) + 'px';\n      } else {\n        optionsBar.style.top = (hostButtonPosition.y - (buttonHeight * (buttons.length - 1)) - 6) + 'px';\n      }\n      optionsBar.style.left = (hostButtonPosition.x - 5) + 'px';\n\n      for (let i = 0; i < buttons.length; ++i) {\n        buttons[i].element.addEventListener('mousemove', mouseOver, false);\n        buttons[i].element.addEventListener('mouseout', mouseOut, false);\n        optionsBar.appendToolbarItem(buttons[i]);\n      }\n      const hostButtonIndex = topNotBottom ? 0 : buttons.length - 1;\n      buttons[hostButtonIndex].element.classList.add('emulate-active');\n\n      function mouseOver(e: Event): void {\n        if ((e as MouseEvent).which !== 1) {\n          return;\n        }\n        if (e.target instanceof HTMLElement) {\n          const buttonElement = e.target.enclosingNodeOrSelfWithClass('toolbar-button');\n          buttonElement.classList.add('emulate-active');\n        }\n      }\n\n      function mouseOut(e: Event): void {\n        if ((e as MouseEvent).which !== 1) {\n          return;\n        }\n        if (e.target instanceof HTMLElement) {\n          const buttonElement = e.target.enclosingNodeOrSelfWithClass('toolbar-button');\n          buttonElement.classList.remove('emulate-active');\n        }\n      }\n\n      function mouseUp(e: Event): void {\n        if ((e as MouseEvent).which !== 1) {\n          return;\n        }\n        optionsGlassPane.hide();\n        document.documentElement.removeEventListener('mouseup', mouseUp, false);\n\n        for (let i = 0; i < buttons.length; ++i) {\n          if (buttons[i].element.classList.contains('emulate-active')) {\n            buttons[i].element.classList.remove('emulate-active');\n            buttons[i].clicked(e);\n            break;\n          }\n        }\n      }\n    }\n  }\n\n  static createActionButton(action: Action, options?: ToolbarButtonOptions): ToolbarButton;\n  static createActionButton(actionId: string, options?: ToolbarButtonOptions): ToolbarButton;\n  static createActionButton(actionOrActionId: Action|string, options: ToolbarButtonOptions = {}): ToolbarButton {\n    const action =\n        typeof actionOrActionId === 'string' ? ActionRegistry.instance().getAction(actionOrActionId) : actionOrActionId;\n\n    const button = action.toggleable() ? makeToggle() : makeButton();\n\n    if (options.label) {\n      button.setText(options.label() || action.title());\n    }\n\n    const handler = (): void => {\n      void action.execute();\n    };\n    button.addEventListener(ToolbarButton.Events.CLICK, handler, action);\n    action.addEventListener(ActionEvents.ENABLED, enabledChanged);\n    button.setEnabled(action.enabled());\n    return button;\n\n    function makeButton(): ToolbarButton {\n      const button = new ToolbarButton(action.title(), action.icon(), undefined, action.id());\n      if (action.title()) {\n        Tooltip.installWithActionBinding(button.element, action.title(), action.id());\n      }\n      return button;\n    }\n\n    function makeToggle(): ToolbarToggle {\n      const toggleButton = new ToolbarToggle(action.title(), action.icon(), action.toggledIcon(), action.id());\n      if (action.toggleWithRedColor()) {\n        toggleButton.enableToggleWithRedColor();\n      }\n      action.addEventListener(ActionEvents.TOGGLED, toggled);\n      toggled();\n      return toggleButton;\n\n      function toggled(): void {\n        toggleButton.setToggled(action.toggled());\n        if (action.title()) {\n          toggleButton.setTitle(action.title());\n          Tooltip.installWithActionBinding(toggleButton.element, action.title(), action.id());\n        }\n      }\n    }\n\n    function enabledChanged(event: Common.EventTarget.EventTargetEvent<boolean>): void {\n      button.setEnabled(event.data);\n    }\n  }\n\n  empty(): boolean {\n    return !this.items.length;\n  }\n\n  setEnabled(enabled: boolean): void {\n    this.enabled = enabled;\n    for (const item of this.items) {\n      item.applyEnabledState(this.enabled && item.enabled);\n    }\n  }\n\n  appendToolbarItem(item: ToolbarItem): void {\n    this.items.push(item);\n    item.toolbar = this;\n    item.setCompactLayout(this.hasCompactLayout());\n    if (!this.enabled) {\n      item.applyEnabledState(false);\n    }\n    if (item.element.parentElement !== this) {\n      this.appendChild(item.element);\n    }\n    this.hideSeparatorDupes();\n  }\n\n  hasItem(item: ToolbarItem): boolean {\n    return this.items.includes(item);\n  }\n\n  prependToolbarItem(item: ToolbarItem): void {\n    this.items.unshift(item);\n    item.toolbar = this;\n    item.setCompactLayout(this.hasCompactLayout());\n    if (!this.enabled) {\n      item.applyEnabledState(false);\n    }\n    this.prepend(item.element);\n    this.hideSeparatorDupes();\n  }\n\n  appendSeparator(): void {\n    this.appendToolbarItem(new ToolbarSeparator());\n  }\n\n  appendSpacer(): void {\n    this.appendToolbarItem(new ToolbarSeparator(true));\n  }\n\n  appendText(text: string): void {\n    this.appendToolbarItem(new ToolbarText(text));\n  }\n\n  removeToolbarItem(itemToRemove: ToolbarItem): void {\n    const updatedItems = [];\n    for (const item of this.items) {\n      if (item === itemToRemove) {\n        item.element.remove();\n      } else {\n        updatedItems.push(item);\n      }\n    }\n    this.items = updatedItems;\n  }\n\n  removeToolbarItems(): void {\n    for (const item of this.items) {\n      item.toolbar = null;\n    }\n    this.items = [];\n    this.removeChildren();\n  }\n\n  hideSeparatorDupes(): void {\n    if (!this.items.length) {\n      return;\n    }\n    // Don't hide first and last separators if they were added explicitly.\n    let previousIsSeparator = false;\n    let lastSeparator;\n    let nonSeparatorVisible = false;\n    for (let i = 0; i < this.items.length; ++i) {\n      if (this.items[i] instanceof ToolbarSeparator) {\n        this.items[i].setVisible(!previousIsSeparator);\n        previousIsSeparator = true;\n        lastSeparator = this.items[i];\n        continue;\n      }\n      if (this.items[i].visible()) {\n        previousIsSeparator = false;\n        lastSeparator = null;\n        nonSeparatorVisible = true;\n      }\n    }\n    if (lastSeparator && lastSeparator !== this.items[this.items.length - 1]) {\n      lastSeparator.setVisible(false);\n    }\n\n    this.classList.toggle(\n        'hidden',\n        lastSeparator !== null && lastSeparator !== undefined && lastSeparator.visible() && !nonSeparatorVisible);\n  }\n\n  async appendItemsAtLocation(location: string): Promise<void> {\n    const extensions: ToolbarItemRegistration[] = getRegisteredToolbarItems();\n\n    extensions.sort((extension1, extension2) => {\n      const order1 = extension1.order || 0;\n      const order2 = extension2.order || 0;\n      return order1 - order2;\n    });\n\n    const filtered = extensions.filter(e => e.location === location);\n    const items = await Promise.all(filtered.map(extension => {\n      const {separator, actionId, label, loadItem} = extension;\n      if (separator) {\n        return new ToolbarSeparator();\n      }\n      if (actionId) {\n        return Toolbar.createActionButton(actionId, {label});\n      }\n      // TODO(crbug.com/1134103) constratint the case checked with this if using TS type definitions once UI is TS-authored.\n      if (!loadItem) {\n        throw new Error('Could not load a toolbar item registration with no loadItem function');\n      }\n      return loadItem().then(p => (p).item());\n    }));\n\n    for (const item of items) {\n      if (item) {\n        this.appendToolbarItem(item);\n      }\n    }\n  }\n}\n\ncustomElements.define('devtools-toolbar', Toolbar);\n\nexport interface ToolbarButtonOptions {\n  label?: () => Platform.UIString.LocalizedString;\n}\n\n// We need any here because Common.ObjectWrapper.ObjectWrapper is invariant in T.\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport class ToolbarItem<T = any, E extends HTMLElement = HTMLElement> extends Common.ObjectWrapper.ObjectWrapper<T> {\n  element: E;\n  #visible: boolean;\n  enabled: boolean;\n  toolbar: Toolbar|null;\n  protected title?: string;\n\n  constructor(element: E) {\n    super();\n    this.element = element;\n    this.#visible = true;\n    this.enabled = true;\n\n    /**\n     * Set by the parent toolbar during appending.\n     */\n    this.toolbar = null;\n  }\n\n  setTitle(title: string, actionId: string|undefined = undefined): void {\n    if (this.title === title) {\n      return;\n    }\n    this.title = title;\n    ARIAUtils.setLabel(this.element, title);\n    if (actionId === undefined) {\n      Tooltip.install(this.element, title);\n    } else {\n      Tooltip.installWithActionBinding(this.element, title, actionId);\n    }\n  }\n\n  setEnabled(value: boolean): void {\n    if (this.enabled === value) {\n      return;\n    }\n    this.enabled = value;\n    this.applyEnabledState(this.enabled && (!this.toolbar || this.toolbar.enabled));\n  }\n\n  applyEnabledState(enabled: boolean): void {\n    // @ts-expect-error: Ignoring in favor of an `instanceof` check for all the different\n    //             kind of HTMLElement classes that have a disabled attribute.\n    this.element.disabled = !enabled;\n  }\n\n  visible(): boolean {\n    return this.#visible;\n  }\n\n  setVisible(x: boolean): void {\n    if (this.#visible === x) {\n      return;\n    }\n    this.element.classList.toggle('hidden', !x);\n    this.#visible = x;\n    if (this.toolbar && !(this instanceof ToolbarSeparator)) {\n      this.toolbar.hideSeparatorDupes();\n    }\n  }\n\n  setCompactLayout(_enable: boolean): void {\n  }\n\n  setMaxWidth(width: number): void {\n    this.element.style.maxWidth = width + 'px';\n  }\n\n  setMinWidth(width: number): void {\n    this.element.style.minWidth = width + 'px';\n  }\n}\n\nexport const enum ToolbarItemWithCompactLayoutEvents {\n  COMPACT_LAYOUT_UPDATED = 'CompactLayoutUpdated',\n}\n\ninterface ToolbarItemWithCompactLayoutEventTypes {\n  [ToolbarItemWithCompactLayoutEvents.COMPACT_LAYOUT_UPDATED]: boolean;\n}\n\nexport class ToolbarItemWithCompactLayout extends ToolbarItem<ToolbarItemWithCompactLayoutEventTypes> {\n  override setCompactLayout(enable: boolean): void {\n    this.dispatchEventToListeners(ToolbarItemWithCompactLayoutEvents.COMPACT_LAYOUT_UPDATED, enable);\n  }\n}\n\nexport class ToolbarText extends ToolbarItem<void, HTMLElement> {\n  constructor(text = '') {\n    const element = document.createElement('div');\n    element.classList.add('toolbar-text');\n    super(element);\n    this.setText(text);\n  }\n\n  text(): string {\n    return this.element.textContent ?? '';\n  }\n\n  setText(text: string): void {\n    this.element.textContent = text;\n  }\n}\n\nexport class ToolbarButton extends ToolbarItem<ToolbarButton.EventTypes, Buttons.Button.Button> {\n  private button: Buttons.Button.Button;\n  private text?: string;\n  private adorner?: HTMLElement;\n\n  constructor(title: string, glyph?: string, text?: string, jslogContext?: string, button?: Buttons.Button.Button) {\n    if (!button) {\n      button = new Buttons.Button.Button();\n      if (glyph && !text) {\n        button.data = {variant: Buttons.Button.Variant.ICON, iconName: glyph};\n      } else {\n        button.variant = Buttons.Button.Variant.TEXT;\n        button.reducedFocusRing = true;\n        if (glyph) {\n          button.iconName = glyph;\n        }\n      }\n    }\n    super(button);\n    this.button = button;\n    button.classList.add('toolbar-button');\n    this.element.addEventListener('click', this.clicked.bind(this), false);\n    button.textContent = text || '';\n    this.setTitle(title);\n    if (jslogContext) {\n      button.jslogContext = jslogContext;\n    }\n  }\n\n  focus(): void {\n    this.element.focus();\n  }\n\n  checked(checked: boolean): void {\n    this.button.checked = checked;\n  }\n\n  toggleOnClick(toggleOnClick: boolean): void {\n    this.button.toggleOnClick = toggleOnClick;\n  }\n\n  isToggled(): boolean {\n    return this.button.toggled;\n  }\n\n  toggled(toggled: boolean): void {\n    this.button.toggled = toggled;\n  }\n\n  setToggleType(type: Buttons.Button.ToggleType): void {\n    this.button.toggleType = type;\n  }\n\n  setLongClickable(longClickable: boolean): void {\n    this.button.longClickable = longClickable;\n  }\n\n  setSize(size: Buttons.Button.Size): void {\n    this.button.size = size;\n  }\n\n  setReducedFocusRing(): void {\n    this.button.reducedFocusRing = true;\n  }\n\n  setText(text: string): void {\n    if (this.text === text) {\n      return;\n    }\n    this.button.textContent = text;\n    this.button.variant = Buttons.Button.Variant.TEXT;\n    this.button.reducedFocusRing = true;\n    this.text = text;\n  }\n\n  setAdorner(adorner: HTMLElement): void {\n    if (this.adorner) {\n      this.adorner.replaceWith(adorner);\n    } else {\n      this.element.prepend(adorner);\n    }\n    this.adorner = adorner;\n  }\n\n  setGlyph(iconName: string): void {\n    this.button.iconName = iconName;\n  }\n\n  setToggledIcon(toggledIconName: string): void {\n    this.button.variant = Buttons.Button.Variant.ICON_TOGGLE;\n    this.button.toggledIconName = toggledIconName;\n  }\n\n  setBackgroundImage(iconURL: string): void {\n    this.element.style.backgroundImage = 'url(' + iconURL + ')';\n  }\n\n  setSecondary(): void {\n    this.element.classList.add('toolbar-button-secondary');\n  }\n\n  setDarkText(): void {\n    this.element.classList.add('dark-text');\n  }\n\n  clicked(event: Event): void {\n    if (!this.enabled) {\n      return;\n    }\n    this.dispatchEventToListeners(ToolbarButton.Events.CLICK, event);\n    event.consume();\n  }\n}\n\nexport namespace ToolbarButton {\n  export const enum Events {\n    CLICK = 'Click',\n  }\n\n  export interface EventTypes {\n    [Events.CLICK]: Event;\n  }\n}\n\nexport class ToolbarInput extends ToolbarItem<ToolbarInput.EventTypes> {\n  private prompt: TextPrompt;\n  private readonly proxyElement: Element;\n\n  constructor(\n      placeholder: string, accessiblePlaceholder?: string, growFactor?: number, shrinkFactor?: number, tooltip?: string,\n      completions?: ((arg0: string, arg1: string, arg2?: boolean|undefined) => Promise<Suggestion[]>),\n      dynamicCompletions?: boolean, jslogContext?: string, element?: HTMLElement) {\n    if (!element) {\n      element = document.createElement('div');\n    }\n    element.classList.add('toolbar-input');\n    super(element);\n\n    const internalPromptElement = this.element.createChild('div', 'toolbar-input-prompt');\n    ARIAUtils.setLabel(internalPromptElement, accessiblePlaceholder || placeholder);\n    internalPromptElement.addEventListener('focus', () => this.element.classList.add('focused'));\n    internalPromptElement.addEventListener('blur', () => this.element.classList.remove('focused'));\n\n    this.prompt = new TextPrompt();\n    this.prompt.jslogContext = jslogContext;\n    this.proxyElement = this.prompt.attach(internalPromptElement);\n    this.proxyElement.classList.add('toolbar-prompt-proxy');\n    this.proxyElement.addEventListener('keydown', (event: Event) => this.onKeydownCallback(event as KeyboardEvent));\n    this.prompt.initialize(\n        completions || (() => Promise.resolve([])),\n        ' ',\n        dynamicCompletions,\n    );\n    if (tooltip) {\n      this.prompt.setTitle(tooltip);\n    }\n    this.prompt.setPlaceholder(placeholder, accessiblePlaceholder);\n    this.prompt.addEventListener(TextPromptEvents.TEXT_CHANGED, this.onChangeCallback.bind(this));\n\n    if (growFactor) {\n      this.element.style.flexGrow = String(growFactor);\n    }\n    if (shrinkFactor) {\n      this.element.style.flexShrink = String(shrinkFactor);\n    }\n\n    const clearButtonText = i18nString(UIStrings.clearInput);\n    const clearButton = new Buttons.Button.Button();\n    clearButton.data = {\n      variant: Buttons.Button.Variant.ICON,\n      iconName: 'cross-circle-filled',\n      size: Buttons.Button.Size.SMALL,\n      title: clearButtonText,\n    };\n    clearButton.className = 'toolbar-input-clear-button';\n    clearButton.setAttribute('jslog', `${VisualLogging.action('clear').track({click: true}).parent('mapped')}`);\n    VisualLogging.setMappedParent(clearButton, internalPromptElement);\n    clearButton.variant = Buttons.Button.Variant.ICON;\n    clearButton.size = Buttons.Button.Size.SMALL;\n    clearButton.iconName = 'cross-circle-filled';\n    clearButton.title = clearButtonText;\n    clearButton.ariaLabel = clearButtonText;\n    clearButton.tabIndex = -1;\n\n    clearButton.addEventListener('click', () => {\n      this.setValue('', true);\n      this.prompt.focus();\n    });\n\n    this.element.appendChild(clearButton);\n    this.updateEmptyStyles();\n  }\n\n  override applyEnabledState(enabled: boolean): void {\n    if (enabled) {\n      this.element.classList.remove('disabled');\n    } else {\n      this.element.classList.add('disabled');\n    }\n\n    this.prompt.setEnabled(enabled);\n  }\n\n  setValue(value: string, notify?: boolean): void {\n    this.prompt.setText(value);\n    if (notify) {\n      this.onChangeCallback();\n    }\n    this.updateEmptyStyles();\n  }\n\n  value(): string {\n    return this.prompt.textWithCurrentSuggestion();\n  }\n\n  valueWithoutSuggestion(): string {\n    return this.prompt.text();\n  }\n\n  clearAutocomplete(): void {\n    this.prompt.clearAutocomplete();\n  }\n\n  focus(): void {\n    this.prompt.focus();\n  }\n\n  private onKeydownCallback(event: KeyboardEvent): void {\n    if (event.key === 'Enter' && this.prompt.text()) {\n      this.dispatchEventToListeners(ToolbarInput.Event.ENTER_PRESSED, this.prompt.text());\n    }\n    if (!Platform.KeyboardUtilities.isEscKey(event) || !this.prompt.text()) {\n      return;\n    }\n    this.setValue('', true);\n    event.consume(true);\n  }\n\n  private onChangeCallback(): void {\n    this.updateEmptyStyles();\n    this.dispatchEventToListeners(ToolbarInput.Event.TEXT_CHANGED, this.prompt.text());\n  }\n\n  private updateEmptyStyles(): void {\n    this.element.classList.toggle('toolbar-input-empty', !this.prompt.text());\n  }\n}\n\nexport class ToolbarFilter extends ToolbarInput {\n  constructor(\n      filterBy?: Common.UIString.LocalizedString, growFactor?: number, shrinkFactor?: number, tooltip?: string,\n      completions?: ((arg0: string, arg1: string, arg2?: boolean|undefined) => Promise<Suggestion[]>),\n      dynamicCompletions?: boolean, jslogContext?: string, element?: HTMLElement) {\n    const filterPlaceholder = filterBy ? filterBy : i18nString(UIStrings.filter);\n    super(\n        filterPlaceholder, filterPlaceholder, growFactor, shrinkFactor, tooltip, completions, dynamicCompletions,\n        jslogContext || 'filter', element);\n\n    const filterIcon = createIcon('filter');\n    this.element.prepend(filterIcon);\n    this.element.classList.add('toolbar-filter');\n  }\n}\n\nexport class ToolbarInputElement extends HTMLElement {\n  static observedAttributes = ['value', 'disabled'];\n\n  item?: ToolbarInput;\n  datalist: HTMLDataListElement|null = null;\n  value: string|undefined = undefined;\n  #disabled = false;\n\n  connectedCallback(): void {\n    if (this.item) {\n      return;\n    }\n    const list = this.getAttribute('list');\n    if (list) {\n      this.datalist = (this.getRootNode() as ShadowRoot | Document).querySelector(`datalist[id=\"${list}\"]`);\n    }\n    const placeholder = this.getAttribute('placeholder') || '';\n    const accessiblePlaceholder = this.getAttribute('aria-placeholder') ?? undefined;\n    const tooltip = this.getAttribute('title') ?? undefined;\n    const jslogContext = this.id ?? undefined;\n    const isFilter = this.getAttribute('type') === 'filter';\n    if (isFilter) {\n      this.item = new ToolbarFilter(\n          placeholder as Platform.UIString.LocalizedString, /* growFactor=*/ undefined,\n          /* shrinkFactor=*/ undefined, tooltip, this.datalist ? this.#onAutocomplete.bind(this) : undefined,\n          /* dynamicCompletions=*/ undefined, jslogContext || 'filter', this);\n    } else {\n      this.item = new ToolbarInput(\n          placeholder, accessiblePlaceholder, /* growFactor=*/ undefined,\n          /* shrinkFactor=*/ undefined, tooltip, this.datalist ? this.#onAutocomplete.bind(this) : undefined,\n          /* dynamicCompletions=*/ undefined, jslogContext, this);\n    }\n    if (this.value) {\n      this.item.setValue(this.value);\n    }\n    if (this.#disabled) {\n      this.item.setEnabled(false);\n    }\n    this.item.addEventListener(ToolbarInput.Event.TEXT_CHANGED, event => {\n      this.dispatchEvent(new CustomEvent('change', {detail: event.data}));\n    });\n    this.item.addEventListener(ToolbarInput.Event.ENTER_PRESSED, event => {\n      this.dispatchEvent(new CustomEvent('submit', {detail: event.data}));\n    });\n  }\n\n  override focus(): void {\n    this.item?.focus();\n  }\n\n  async #onAutocomplete(expression: string, prefix: string, force?: boolean): Promise<Suggestion[]> {\n    if (!prefix && !force && expression || !this.datalist) {\n      return [];\n    }\n\n    const options = this.datalist.options;\n    return [...options].map((({value}) => value)).filter(value => value.startsWith(prefix)).map(text => ({text}));\n  }\n\n  attributeChangedCallback(name: string, _oldValue: string, newValue: string): void {\n    if (name === 'value') {\n      if (this.item && this.item.value() !== newValue) {\n        this.item.setValue(newValue, true);\n      } else {\n        this.value = newValue;\n      }\n    } else if (name === 'disabled') {\n      this.#disabled = typeof newValue === 'string';\n      if (this.item) {\n        this.item.setEnabled(!this.#disabled);\n      }\n    }\n  }\n\n  set disabled(disabled: boolean) {\n    if (disabled) {\n      this.setAttribute('disabled', '');\n    } else {\n      this.removeAttribute('disabled');\n    }\n  }\n\n  get disabled(): boolean {\n    return this.hasAttribute('disabled');\n  }\n}\ncustomElements.define('devtools-toolbar-input', ToolbarInputElement);\n\nexport namespace ToolbarInput {\n  export const enum Event {\n    TEXT_CHANGED = 'TextChanged',\n    ENTER_PRESSED = 'EnterPressed',\n  }\n\n  export interface EventTypes {\n    [Event.TEXT_CHANGED]: string;\n    [Event.ENTER_PRESSED]: string;\n  }\n}\n\nexport class ToolbarToggle extends ToolbarButton {\n  private readonly toggledGlyph: string|undefined;\n\n  constructor(title: string, glyph?: string, toggledGlyph?: string, jslogContext?: string, toggleOnClick?: boolean) {\n    super(title, glyph, '');\n    this.toggledGlyph = toggledGlyph ? toggledGlyph : glyph;\n    this.setToggledIcon(this.toggledGlyph || '');\n    this.setToggleType(Buttons.Button.ToggleType.PRIMARY);\n    this.toggled(false);\n\n    if (jslogContext) {\n      this.element.setAttribute('jslog', `${VisualLogging.toggle().track({click: true}).context(jslogContext)}`);\n    }\n    if (toggleOnClick !== undefined) {\n      this.setToggleOnClick(toggleOnClick);\n    }\n  }\n\n  setToggleOnClick(toggleOnClick: boolean): void {\n    this.toggleOnClick(toggleOnClick);\n  }\n\n  setToggled(toggled: boolean): void {\n    this.toggled(toggled);\n  }\n\n  setChecked(checked: boolean): void {\n    this.checked(checked);\n  }\n\n  enableToggleWithRedColor(): void {\n    this.setToggleType(Buttons.Button.ToggleType.RED);\n  }\n}\n\nexport class ToolbarMenuButton extends ToolbarItem<ToolbarButton.EventTypes> {\n  private textElement?: HTMLElement;\n  private text?: string;\n  private iconName?: string;\n  private adorner?: HTMLElement;\n  private readonly contextMenuHandler: (arg0: ContextMenu) => void;\n  private readonly useSoftMenu: boolean;\n  private readonly keepOpen: boolean;\n  private readonly isIconDropdown: boolean;\n  private triggerTimeoutId?: number;\n  #triggerDelay = 200;\n\n  constructor(\n      contextMenuHandler: (arg0: ContextMenu) => void, isIconDropdown?: boolean, useSoftMenu?: boolean,\n      jslogContext?: string, iconName?: string, keepOpen?: boolean) {\n    let element;\n    if (iconName) {\n      element = new Buttons.Button.Button();\n      element.data = {variant: Buttons.Button.Variant.ICON, iconName};\n    } else {\n      element = document.createElement('button');\n    }\n    element.classList.add('toolbar-button');\n    super(element);\n    this.element.addEventListener('click', this.clicked.bind(this), false);\n\n    this.iconName = iconName;\n\n    this.setTitle('');\n    this.title = '';\n    if (!isIconDropdown) {\n      this.element.classList.add('toolbar-has-dropdown');\n      const dropdownArrowIcon = createIcon('triangle-down', 'toolbar-dropdown-arrow');\n      this.element.appendChild(dropdownArrowIcon);\n    }\n    if (jslogContext) {\n      this.element.setAttribute('jslog', `${VisualLogging.dropDown().track({click: true}).context(jslogContext)}`);\n    }\n    this.element.addEventListener('mousedown', this.mouseDown.bind(this), false);\n    this.contextMenuHandler = contextMenuHandler;\n    this.useSoftMenu = Boolean(useSoftMenu);\n    this.keepOpen = Boolean(keepOpen);\n    this.isIconDropdown = Boolean(isIconDropdown);\n    ARIAUtils.markAsMenuButton(this.element);\n  }\n\n  setText(text: string): void {\n    if (this.text === text || this.iconName) {\n      return;\n    }\n    if (!this.textElement) {\n      this.textElement = document.createElement('div');\n      this.textElement.classList.add('toolbar-text', 'hidden');\n      const dropDownArrow = this.element.querySelector('.toolbar-dropdown-arrow');\n      this.element.insertBefore(this.textElement, dropDownArrow);\n    }\n    this.textElement.textContent = text;\n    this.textElement.classList.toggle('hidden', !text);\n    this.text = text;\n  }\n\n  setAdorner(adorner: HTMLElement): void {\n    if (this.iconName) {\n      return;\n    }\n    if (!this.adorner) {\n      this.adorner = adorner;\n    } else {\n      adorner.replaceWith(adorner);\n      if (this.element.firstChild) {\n        this.element.removeChild(this.element.firstChild);\n      }\n    }\n    this.element.prepend(adorner);\n  }\n\n  setDarkText(): void {\n    this.element.classList.add('dark-text');\n  }\n\n  turnShrinkable(): void {\n    this.element.classList.add('toolbar-has-dropdown-shrinkable');\n  }\n\n  setTriggerDelay(x: number): void {\n    this.#triggerDelay = x;\n  }\n\n  mouseDown(event: MouseEvent): void {\n    if (!this.enabled) {\n      return;\n    }\n    if (event.buttons !== 1) {\n      return;\n    }\n\n    if (!this.triggerTimeoutId) {\n      this.triggerTimeoutId = window.setTimeout(this.trigger.bind(this, event), this.#triggerDelay);\n    }\n  }\n\n  private trigger(event: Event): void {\n    delete this.triggerTimeoutId;\n\n    const horizontalPosition =\n        this.isIconDropdown ? this.element.getBoundingClientRect().right : this.element.getBoundingClientRect().left;\n    const contextMenu = new ContextMenu(event, {\n      useSoftMenu: this.useSoftMenu,\n      keepOpen: this.keepOpen,\n      x: horizontalPosition,\n      y: this.element.getBoundingClientRect().top + this.element.offsetHeight,\n      // Without adding a delay, pointer events will be un-ignored too early, and a single click causes\n      // the context menu to be closed and immediately re-opened on Windows (https://crbug.com/339560549).\n      onSoftMenuClosed: () => setTimeout(() => this.element.removeAttribute('aria-expanded'), 50),\n    });\n    this.contextMenuHandler(contextMenu);\n    this.element.setAttribute('aria-expanded', 'true');\n    void contextMenu.show();\n  }\n\n  clicked(event: Event): void {\n    if (this.triggerTimeoutId) {\n      clearTimeout(this.triggerTimeoutId);\n    }\n    this.trigger(event);\n  }\n}\n\nexport class ToolbarSettingToggle extends ToolbarToggle {\n  private readonly defaultTitle: string;\n  private readonly setting: Common.Settings.Setting<boolean>;\n  private willAnnounceState: boolean;\n\n  constructor(\n      setting: Common.Settings.Setting<boolean>, glyph: string, title: string, toggledGlyph?: string,\n      jslogContext?: string) {\n    super(title, glyph, toggledGlyph, jslogContext);\n    this.defaultTitle = title;\n    this.setting = setting;\n    this.settingChanged();\n    this.setting.addChangeListener(this.settingChanged, this);\n\n    // Determines whether the toggle state will be announced to a screen reader\n    this.willAnnounceState = false;\n  }\n\n  private settingChanged(): void {\n    const toggled = this.setting.get();\n    this.setToggled(toggled);\n    const toggleAnnouncement = toggled ? i18nString(UIStrings.pressed) : i18nString(UIStrings.notPressed);\n    if (this.willAnnounceState) {\n      ARIAUtils.LiveAnnouncer.alert(toggleAnnouncement);\n    }\n    this.willAnnounceState = false;\n    this.setTitle(this.defaultTitle);\n  }\n\n  override clicked(event: Event): void {\n    this.willAnnounceState = true;\n    this.setting.set(this.isToggled());\n    super.clicked(event);\n  }\n}\n\nexport class ToolbarSeparator extends ToolbarItem<void> {\n  constructor(spacer?: boolean) {\n    const element = document.createElement('div');\n    element.classList.add(spacer ? 'toolbar-spacer' : 'toolbar-divider');\n    super(element);\n  }\n}\n\nexport interface Provider {\n  item(): ToolbarItem|null;\n}\n\nexport interface ItemsProvider {\n  toolbarItems(): ToolbarItem[];\n}\n\nexport class ToolbarComboBox extends ToolbarItem<void, HTMLSelectElement> {\n  constructor(\n      changeHandler: ((arg0: Event) => void)|null, title: string, className?: string, jslogContext?: string,\n      element?: HTMLSelectElement) {\n    if (!element) {\n      element = document.createElement('select');\n    }\n    super(element);\n    if (changeHandler) {\n      this.element.addEventListener('change', changeHandler, false);\n    }\n    ARIAUtils.setLabel(this.element, title);\n    super.setTitle(title);\n    if (className) {\n      this.element.classList.add(className);\n    }\n    if (jslogContext) {\n      this.element.setAttribute('jslog', `${VisualLogging.dropDown().track({change: true}).context(jslogContext)}`);\n    }\n  }\n\n  size(): number {\n    return this.element.childElementCount;\n  }\n\n  options(): HTMLOptionElement[] {\n    return Array.prototype.slice.call(this.element.children, 0);\n  }\n\n  addOption(option: Element): void {\n    this.element.appendChild(option);\n  }\n\n  createOption(label: string, value?: string, jslogContext?: string): HTMLOptionElement {\n    const option = this.element.createChild('option');\n    option.text = label;\n    if (typeof value !== 'undefined') {\n      option.value = value;\n    }\n    if (!jslogContext) {\n      jslogContext = value ? Platform.StringUtilities.toKebabCase(value) : undefined;\n    }\n    option.setAttribute('jslog', `${VisualLogging.item(jslogContext).track({click: true})}`);\n    return option;\n  }\n\n  override applyEnabledState(enabled: boolean): void {\n    super.applyEnabledState(enabled);\n    this.element.disabled = !enabled;\n  }\n\n  removeOption(option: Element): void {\n    this.element.removeChild(option);\n  }\n\n  removeOptions(): void {\n    this.element.removeChildren();\n  }\n\n  selectedOption(): HTMLOptionElement|null {\n    if (this.element.selectedIndex >= 0) {\n      return this.element[this.element.selectedIndex] as HTMLOptionElement;\n    }\n    return null;\n  }\n\n  select(option: Element): void {\n    this.element.selectedIndex = Array.prototype.indexOf.call(this.element, option);\n  }\n\n  setSelectedIndex(index: number): void {\n    this.element.selectedIndex = index;\n  }\n\n  selectedIndex(): number {\n    return this.element.selectedIndex;\n  }\n}\n\nexport interface Option {\n  value: string;\n  label: string;\n}\n\nexport class ToolbarSettingComboBox extends ToolbarComboBox {\n  #options: Option[];\n  private readonly setting: Common.Settings.Setting<string>;\n  private muteSettingListener?: boolean;\n  constructor(options: Option[], setting: Common.Settings.Setting<string>, accessibleName: string) {\n    super(null, accessibleName, undefined, setting.name);\n    this.#options = options;\n    this.setting = setting;\n    this.element.addEventListener('change', this.onSelectValueChange.bind(this), false);\n    this.setOptions(options);\n    setting.addChangeListener(this.onDevToolsSettingChanged, this);\n  }\n\n  setOptions(options: Option[]): void {\n    this.#options = options;\n    this.element.removeChildren();\n    for (let i = 0; i < options.length; ++i) {\n      const dataOption = options[i];\n      const option = this.createOption(dataOption.label, dataOption.value);\n      this.element.appendChild(option);\n      if (this.setting.get() === dataOption.value) {\n        this.setSelectedIndex(i);\n      }\n    }\n  }\n\n  value(): string {\n    return this.#options[this.selectedIndex()].value;\n  }\n\n  override select(option: Element): void {\n    const index = Array.prototype.indexOf.call(this.element, option);\n    this.setSelectedIndex(index);\n  }\n\n  override setSelectedIndex(index: number): void {\n    super.setSelectedIndex(index);\n    const option = this.#options.at(index);\n    if (option) {\n      this.setTitle(option.label);\n    }\n  }\n\n  /**\n   * Note: wondering why there are two event listeners and what the difference is?\n   * It is because this combo box <select> is backed by a Devtools setting and\n   * at any time there could be multiple instances of these elements that are\n   * backed by the same setting. So they have to listen to two things:\n   * 1. When the setting is changed via a different method.\n   * 2. When the value of the select is changed, triggering a change to the setting.\n   */\n\n  /**\n   * Runs when the DevTools setting is changed\n   */\n  private onDevToolsSettingChanged(): void {\n    if (this.muteSettingListener) {\n      return;\n    }\n\n    const value = this.setting.get();\n    for (let i = 0; i < this.#options.length; ++i) {\n      if (value === this.#options[i].value) {\n        this.setSelectedIndex(i);\n        break;\n      }\n    }\n  }\n\n  /**\n   * Run when the user interacts with the <select> element.\n   */\n  private onSelectValueChange(_event: Event): void {\n    const option = this.#options[this.selectedIndex()];\n    this.muteSettingListener = true;\n    this.setting.set(option.value);\n    this.muteSettingListener = false;\n    // Because we mute the DevTools setting change listener, we need to\n    // manually update the title here.\n    this.setTitle(option.label);\n  }\n}\n\nexport class ToolbarCheckbox extends ToolbarItem<void> {\n  #checkboxLabel: CheckboxLabel;\n  constructor(\n      text: Common.UIString.LocalizedString, tooltip?: Common.UIString.LocalizedString,\n      listener?: ((arg0: MouseEvent) => void), jslogContext?: string) {\n    const checkboxLabel = CheckboxLabel.create(text, undefined, undefined, jslogContext);\n    super(checkboxLabel);\n    if (tooltip) {\n      Tooltip.install(this.element, tooltip);\n    }\n    if (listener) {\n      this.element.addEventListener('click', listener, false);\n    }\n\n    this.#checkboxLabel = checkboxLabel;\n  }\n\n  checked(): boolean {\n    return (this.element as CheckboxLabel).checked;\n  }\n\n  setChecked(value: boolean): void {\n    (this.element as CheckboxLabel).checked = value;\n  }\n\n  override applyEnabledState(enabled: boolean): void {\n    super.applyEnabledState(enabled);\n    (this.element as CheckboxLabel).disabled = !enabled;\n  }\n\n  setIndeterminate(indeterminate: boolean): void {\n    (this.element as CheckboxLabel).indeterminate = indeterminate;\n  }\n\n  /**\n   * Sets the user visible text shown alongside the checkbox.\n   * If you want to update the title/aria-label, use setTitle.\n   */\n  setLabelText(content: Common.UIString.LocalizedString): void {\n    this.#checkboxLabel.setLabelText(content);\n  }\n}\n\nexport class ToolbarSettingCheckbox extends ToolbarCheckbox {\n  constructor(\n      setting: Common.Settings.Setting<boolean>, tooltip?: Common.UIString.LocalizedString,\n      alternateTitle?: Common.UIString.LocalizedString) {\n    super(alternateTitle || setting.title(), tooltip, undefined, setting.name);\n    bindCheckbox(this.element as CheckboxLabel, setting);\n  }\n}\n\nconst registeredToolbarItems: ToolbarItemRegistration[] = [];\n\nexport function registerToolbarItem(registration: ToolbarItemRegistration): void {\n  registeredToolbarItems.push(registration);\n}\n\nfunction getRegisteredToolbarItems(): ToolbarItemRegistration[] {\n  return registeredToolbarItems.filter(\n      item => Root.Runtime.Runtime.isDescriptorEnabled({experiment: item.experiment, condition: item.condition}));\n}\n\nexport interface ToolbarItemRegistration {\n  order?: number;\n  location: ToolbarItemLocation;\n  separator?: boolean;\n  label?: () => Platform.UIString.LocalizedString;\n  actionId?: string;\n  condition?: Root.Runtime.Condition;\n  loadItem?: (() => Promise<Provider>);\n  experiment?: string;\n  jslog?: string;\n}\n\nexport const enum ToolbarItemLocation {\n  FILES_NAVIGATION_TOOLBAR = 'files-navigator-toolbar',\n  MAIN_TOOLBAR_RIGHT = 'main-toolbar-right',\n  MAIN_TOOLBAR_LEFT = 'main-toolbar-left',\n  STYLES_SIDEBARPANE_TOOLBAR = 'styles-sidebarpane-toolbar',\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    'devtools-toolbar': Toolbar;\n    'devtools-toolbar-input': ToolbarInputElement;\n  }\n}\n"]}