{"version":3,"file":"RemoteObjectPreviewFormatter.js","sourceRoot":"","sources":["../../../../../../../../front_end/ui/legacy/components/object_ui/RemoteObjectPreviewFormatter.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright 2015 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n/* eslint-disable @devtools/no-imperative-dom-api */\n\nimport * as i18n from '../../../../core/i18n/i18n.js';\nimport * as Platform from '../../../../core/platform/platform.js';\nimport * as SDK from '../../../../core/sdk/sdk.js';\nimport * as Protocol from '../../../../generated/protocol.js';\nimport * as UI from '../../legacy.js';\n\nconst UIStrings = {\n  /**\n   * @description Text shown in the console object preview. Shown when the user is inspecting a\n   * JavaScript object and there are multiple empty properties on the object (x =\n   * 'times'/'multiply').\n   * @example {3} PH1\n   */\n  emptyD: 'empty × {PH1}',\n  /**\n   * @description Shown when the user is inspecting a JavaScript object in the console and there is\n   * an empty property on the object..\n   */\n  empty: 'empty',\n  /**\n   * @description Text shown when the user is inspecting a JavaScript object, but of the properties\n   * is not immediately available because it is a JavaScript 'getter' function, which means we have\n   * to run some code first in order to compute this property.\n   */\n  thePropertyIsComputedWithAGetter: 'The property is computed with a getter',\n} as const;\nconst str_ = i18n.i18n.registerUIStrings('ui/legacy/components/object_ui/RemoteObjectPreviewFormatter.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\nexport class RemoteObjectPreviewFormatter {\n  private static objectPropertyComparator(a: Protocol.Runtime.PropertyPreview, b: Protocol.Runtime.PropertyPreview):\n      number {\n    return sortValue(a) - sortValue(b);\n\n    function sortValue(property: Protocol.Runtime.PropertyPreview): number {\n      // TODO(einbinder) expose whether preview properties are actually internal.\n      if (property.name === InternalName.PROMISE_STATE) {\n        return 1;\n      }\n      if (property.name === InternalName.PROMISE_RESULT) {\n        return 2;\n      }\n      if (property.name === InternalName.GENERATOR_STATE || property.name === InternalName.PRIMITIVE_VALUE ||\n          property.name === InternalName.WEAK_REF_TARGET) {\n        return 3;\n      }\n      if (property.type !== Protocol.Runtime.PropertyPreviewType.Function && !property.name.startsWith('#')) {\n        return 4;\n      }\n      return 5;\n    }\n  }\n\n  appendObjectPreview(\n      parentElement: DocumentFragment|Element, preview: Protocol.Runtime.ObjectPreview, isEntry: boolean): void {\n    const description = preview.description;\n    const subTypesWithoutValuePreview = new Set<Protocol.Runtime.ObjectPreviewSubtype|'internal#entry'|'trustedtype'>([\n      Protocol.Runtime.ObjectPreviewSubtype.Arraybuffer,\n      Protocol.Runtime.ObjectPreviewSubtype.Dataview,\n      Protocol.Runtime.ObjectPreviewSubtype.Error,\n      Protocol.Runtime.ObjectPreviewSubtype.Null,\n      Protocol.Runtime.ObjectPreviewSubtype.Regexp,\n      Protocol.Runtime.ObjectPreviewSubtype.Webassemblymemory,\n      'internal#entry',\n      'trustedtype',\n    ]);\n    if (preview.type !== Protocol.Runtime.ObjectPreviewType.Object ||\n        (preview.subtype && subTypesWithoutValuePreview.has(preview.subtype)) || isEntry) {\n      parentElement.appendChild(this.renderPropertyPreview(preview.type, preview.subtype, undefined, description));\n      return;\n    }\n    const isArrayOrTypedArray = preview.subtype === Protocol.Runtime.ObjectPreviewSubtype.Array ||\n        preview.subtype === Protocol.Runtime.ObjectPreviewSubtype.Typedarray;\n    if (description) {\n      let text;\n      if (isArrayOrTypedArray) {\n        const arrayLength = SDK.RemoteObject.RemoteObject.arrayLength(preview);\n        const arrayLengthText = arrayLength > 1 ? ('(' + arrayLength + ')') : '';\n        const arrayName = SDK.RemoteObject.RemoteObject.arrayNameFromDescription(description);\n        text = arrayName === 'Array' ? arrayLengthText : (arrayName + arrayLengthText);\n      } else {\n        const hideDescription = description === 'Object';\n        text = hideDescription ? '' : description;\n      }\n      if (text.length > 0) {\n        parentElement.createChild('span', 'object-description').textContent = text + '\\xA0';\n      }\n    }\n\n    const propertiesElement = parentElement.createChild('span', 'object-properties-preview');\n    UI.UIUtils.createTextChild(propertiesElement, isArrayOrTypedArray ? '[' : '{');\n    if (preview.entries) {\n      this.appendEntriesPreview(propertiesElement, preview);\n    } else if (isArrayOrTypedArray) {\n      this.appendArrayPropertiesPreview(propertiesElement, preview);\n    } else {\n      this.appendObjectPropertiesPreview(propertiesElement, preview);\n    }\n    if (preview.overflow) {\n      const ellipsisText = propertiesElement.textContent && propertiesElement.textContent.length > 1 ? ',\\xA0…' : '…';\n      propertiesElement.createChild('span').textContent = ellipsisText;\n    }\n    UI.UIUtils.createTextChild(propertiesElement, isArrayOrTypedArray ? ']' : '}');\n  }\n\n  private abbreviateFullQualifiedClassName(description: string): string {\n    const abbreviatedDescription = description.split('.');\n    for (let i = 0; i < abbreviatedDescription.length - 1; ++i) {\n      abbreviatedDescription[i] = Platform.StringUtilities.trimMiddle(abbreviatedDescription[i], 3);\n    }\n    return abbreviatedDescription.join('.');\n  }\n\n  private appendObjectPropertiesPreview(parentElement: Element, preview: Protocol.Runtime.ObjectPreview): void {\n    const properties = preview.properties.filter(p => p.type !== 'accessor')\n                           .sort(RemoteObjectPreviewFormatter.objectPropertyComparator);\n    for (let i = 0; i < properties.length; ++i) {\n      if (i > 0) {\n        UI.UIUtils.createTextChild(parentElement, ', ');\n      }\n\n      const property = properties[i];\n      const name = property.name;\n      // Internal properties are given special formatting, e.g. Promises `<rejected>: 123`.\n      if (preview.subtype === Protocol.Runtime.ObjectPreviewSubtype.Promise && name === InternalName.PROMISE_STATE) {\n        parentElement.appendChild(this.renderDisplayName('<' + property.value + '>'));\n        const nextProperty = i + 1 < properties.length ? properties[i + 1] : null;\n        if (nextProperty && nextProperty.name === InternalName.PROMISE_RESULT) {\n          if (property.value !== 'pending') {\n            UI.UIUtils.createTextChild(parentElement, ': ');\n            parentElement.appendChild(this.renderPropertyPreviewOrAccessor([nextProperty]));\n          }\n          i++;\n        }\n      } else if (preview.subtype === 'generator' && name === InternalName.GENERATOR_STATE) {\n        parentElement.appendChild(this.renderDisplayName('<' + property.value + '>'));\n      } else if (name === InternalName.PRIMITIVE_VALUE) {\n        parentElement.appendChild(this.renderPropertyPreviewOrAccessor([property]));\n      } else if (name === InternalName.WEAK_REF_TARGET) {\n        if (property.type === Protocol.Runtime.PropertyPreviewType.Undefined) {\n          parentElement.appendChild(this.renderDisplayName('<cleared>'));\n        } else {\n          parentElement.appendChild(this.renderPropertyPreviewOrAccessor([property]));\n        }\n      } else {\n        parentElement.appendChild(this.renderDisplayName(name));\n        UI.UIUtils.createTextChild(parentElement, ': ');\n        parentElement.appendChild(this.renderPropertyPreviewOrAccessor([property]));\n      }\n    }\n  }\n\n  private appendArrayPropertiesPreview(parentElement: Element, preview: Protocol.Runtime.ObjectPreview): void {\n    const arrayLength = SDK.RemoteObject.RemoteObject.arrayLength(preview);\n    const indexProperties = preview.properties.filter(p => toArrayIndex(p.name) !== -1).sort(arrayEntryComparator);\n    const otherProperties = preview.properties.filter(p => toArrayIndex(p.name) === -1)\n                                .sort(RemoteObjectPreviewFormatter.objectPropertyComparator);\n\n    function arrayEntryComparator(a: Protocol.Runtime.PropertyPreview, b: Protocol.Runtime.PropertyPreview): number {\n      return toArrayIndex(a.name) - toArrayIndex(b.name);\n    }\n\n    function toArrayIndex(name: string): number {\n      // We need to differentiate between property accesses and array index accesses\n      // Therefore, we need to make sure we are always dealing with an i32, in the event\n      // that a particular property also exists, but as the literal string. For example\n      // for {[\"1.5\"]: true}, we don't want to return `true` if we provide `1.5` as the\n      // value, but only want to do that if we provide `\"1.5\"`.\n      const index = Number(name) >>> 0;\n      if (String(index) === name && index < arrayLength) {\n        return index;\n      }\n      return -1;\n    }\n\n    // Gaps can be shown when all properties are guaranteed to be in the preview.\n    const canShowGaps = !preview.overflow;\n    let lastNonEmptyArrayIndex = -1;\n    let elementsAdded = false;\n    for (let i = 0; i < indexProperties.length; ++i) {\n      if (elementsAdded) {\n        UI.UIUtils.createTextChild(parentElement, ', ');\n      }\n\n      const property = indexProperties[i];\n      const index = toArrayIndex(property.name);\n      if (canShowGaps && index - lastNonEmptyArrayIndex > 1) {\n        appendUndefined(index);\n        UI.UIUtils.createTextChild(parentElement, ', ');\n      }\n      if (!canShowGaps && i !== index) {\n        parentElement.appendChild(this.renderDisplayName(property.name));\n        UI.UIUtils.createTextChild(parentElement, ': ');\n      }\n      parentElement.appendChild(this.renderPropertyPreviewOrAccessor([property]));\n      lastNonEmptyArrayIndex = index;\n      elementsAdded = true;\n    }\n\n    if (canShowGaps && arrayLength - lastNonEmptyArrayIndex > 1) {\n      if (elementsAdded) {\n        UI.UIUtils.createTextChild(parentElement, ', ');\n      }\n      appendUndefined(arrayLength);\n    }\n\n    for (let i = 0; i < otherProperties.length; ++i) {\n      if (elementsAdded) {\n        UI.UIUtils.createTextChild(parentElement, ', ');\n      }\n\n      const property = otherProperties[i];\n      parentElement.appendChild(this.renderDisplayName(property.name));\n      UI.UIUtils.createTextChild(parentElement, ': ');\n      parentElement.appendChild(this.renderPropertyPreviewOrAccessor([property]));\n      elementsAdded = true;\n    }\n\n    function appendUndefined(index: number): void {\n      const span = parentElement.createChild('span', 'object-value-undefined');\n      const count = index - lastNonEmptyArrayIndex - 1;\n      // TODO(l10n): Plurals. Tricky because of a bug in the presubmit check for plurals.\n      span.textContent = count !== 1 ? i18nString(UIStrings.emptyD, {PH1: count}) : i18nString(UIStrings.empty);\n      elementsAdded = true;\n    }\n  }\n\n  private appendEntriesPreview(parentElement: Element, preview: Protocol.Runtime.ObjectPreview): void {\n    if (!preview.entries) {\n      return;\n    }\n    for (let i = 0; i < preview.entries.length; ++i) {\n      if (i > 0) {\n        UI.UIUtils.createTextChild(parentElement, ', ');\n      }\n\n      const entry = preview.entries[i];\n      if (entry.key) {\n        this.appendObjectPreview(parentElement, entry.key, true /* isEntry */);\n        UI.UIUtils.createTextChild(parentElement, ' => ');\n      }\n      this.appendObjectPreview(parentElement, entry.value, true /* isEntry */);\n    }\n  }\n\n  private renderDisplayName(name: string): Element {\n    const result = document.createElement('span');\n    result.classList.add('name');\n    const needsQuotes = /^\\s|\\s$|^$|\\n/.test(name);\n    result.textContent = needsQuotes ? '\"' + name.replace(/\\n/g, '\\u21B5') + '\"' : name;\n    return result;\n  }\n\n  private renderPropertyPreviewOrAccessor(propertyPath: Protocol.Runtime.PropertyPreview[]): Element {\n    const property = propertyPath[propertyPath.length - 1];\n    if (!property) {\n      throw new Error('Could not find property');\n    }\n    return this.renderPropertyPreview(property.type, (property.subtype as string), property.name, property.value);\n  }\n\n  renderPropertyPreview(type: string, subtype?: string, className?: string|null, description?: string): HTMLElement {\n    const span = document.createElement('span');\n    span.classList.add('object-value-' + (subtype || type));\n    description = description || '';\n\n    if (type === 'accessor') {\n      span.textContent = '(...)';\n      UI.Tooltip.Tooltip.install(span, i18nString(UIStrings.thePropertyIsComputedWithAGetter));\n      return span;\n    }\n\n    if (type === 'function') {\n      span.textContent = '\\u0192';\n      return span;\n    }\n\n    if (type === 'object' && subtype === 'trustedtype' && className) {\n      createSpanForTrustedType(span, description, className);\n      return span;\n    }\n\n    if (type === 'object' && subtype === 'node' && description) {\n      createSpansForNodeTitle(span, description);\n      return span;\n    }\n\n    if (type === 'string') {\n      UI.UIUtils.createTextChildren(span, Platform.StringUtilities.formatAsJSLiteral(description));\n      return span;\n    }\n\n    if (type === 'object' && !subtype) {\n      let preview = this.abbreviateFullQualifiedClassName(description);\n      if (preview === 'Object') {\n        preview = '{…}';\n      }\n      span.textContent = preview;\n      UI.Tooltip.Tooltip.install(span, description);\n      return span;\n    }\n\n    span.textContent = description;\n    return span;\n  }\n}\n\nconst enum InternalName {\n  GENERATOR_STATE = '[[GeneratorState]]',\n  PRIMITIVE_VALUE = '[[PrimitiveValue]]',\n  PROMISE_STATE = '[[PromiseState]]',\n  PROMISE_RESULT = '[[PromiseResult]]',\n  WEAK_REF_TARGET = '[[WeakRefTarget]]',\n}\n\nexport const createSpansForNodeTitle = function(container: Element, nodeTitle: string): void {\n  const match = nodeTitle.match(/([^#.]+)(#[^.]+)?(\\..*)?/);\n  if (!match) {\n    return;\n  }\n  container.createChild('span', 'webkit-html-tag-name').textContent = match[1];\n  if (match[2]) {\n    container.createChild('span', 'webkit-html-attribute-value').textContent = match[2];\n  }\n  if (match[3]) {\n    container.createChild('span', 'webkit-html-attribute-name').textContent = match[3];\n  }\n};\n\nexport const createSpanForTrustedType = function(span: Element, description: string, className: string): void {\n  UI.UIUtils.createTextChildren(span, `${className} `);\n  const trustedContentSpan = document.createElement('span');\n  trustedContentSpan.classList.add('object-value-string');\n  UI.UIUtils.createTextChildren(trustedContentSpan, '\"', description.replace(/\\n/g, '\\u21B5'), '\"');\n  span.appendChild(trustedContentSpan);\n};\n"]}