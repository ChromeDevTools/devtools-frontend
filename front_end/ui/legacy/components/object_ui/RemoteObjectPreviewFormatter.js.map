{"version":3,"file":"RemoteObjectPreviewFormatter.js","sourceRoot":"","sources":["../../../../../../../../front_end/ui/legacy/components/object_ui/RemoteObjectPreviewFormatter.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright 2015 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as i18n from '../../../../core/i18n/i18n.js';\nimport * as Platform from '../../../../core/platform/platform.js';\nimport * as SDK from '../../../../core/sdk/sdk.js';\nimport * as Protocol from '../../../../generated/protocol.js';\nimport {Directives, html, type LitTemplate, nothing, render} from '../../../lit/lit.js';\n\nconst {ifDefined, repeat} = Directives;\nconst UIStrings = {\n  /**\n   * @description Text shown in the console object preview. Shown when the user is inspecting a\n   * JavaScript object and there are multiple empty properties on the object (x =\n   * 'times'/'multiply').\n   * @example {3} PH1\n   */\n  emptyD: 'empty × {PH1}',\n  /**\n   * @description Shown when the user is inspecting a JavaScript object in the console and there is\n   * an empty property on the object..\n   */\n  empty: 'empty',\n  /**\n   * @description Text shown when the user is inspecting a JavaScript object, but of the properties\n   * is not immediately available because it is a JavaScript 'getter' function, which means we have\n   * to run some code first in order to compute this property.\n   */\n  thePropertyIsComputedWithAGetter: 'The property is computed with a getter',\n} as const;\nconst str_ = i18n.i18n.registerUIStrings('ui/legacy/components/object_ui/RemoteObjectPreviewFormatter.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\n\ninterface PropertyPreviewValue {\n  name?: string;\n  entry?: Protocol.Runtime.EntryPreview;\n  value?: Protocol.Runtime.PropertyPreview;\n  placeholder?: string;\n}\n\nexport class RemoteObjectPreviewFormatter {\n  private static objectPropertyComparator(a: Protocol.Runtime.PropertyPreview, b: Protocol.Runtime.PropertyPreview):\n      number {\n    return sortValue(a) - sortValue(b);\n\n    function sortValue(property: Protocol.Runtime.PropertyPreview): number {\n      // TODO(einbinder) expose whether preview properties are actually internal.\n      if (property.name === InternalName.PROMISE_STATE) {\n        return 1;\n      }\n      if (property.name === InternalName.PROMISE_RESULT) {\n        return 2;\n      }\n      if (property.name === InternalName.GENERATOR_STATE || property.name === InternalName.PRIMITIVE_VALUE ||\n          property.name === InternalName.WEAK_REF_TARGET) {\n        return 3;\n      }\n      if (property.type !== Protocol.Runtime.PropertyPreviewType.Function && !property.name.startsWith('#')) {\n        return 4;\n      }\n      return 5;\n    }\n  }\n\n  renderObjectPreview(preview: Protocol.Runtime.ObjectPreview): LitTemplate {\n    const description = preview.description;\n    const subTypesWithoutValuePreview = new Set<Protocol.Runtime.ObjectPreviewSubtype|'internal#entry'|'trustedtype'>([\n      Protocol.Runtime.ObjectPreviewSubtype.Arraybuffer,\n      Protocol.Runtime.ObjectPreviewSubtype.Dataview,\n      Protocol.Runtime.ObjectPreviewSubtype.Error,\n      Protocol.Runtime.ObjectPreviewSubtype.Null,\n      Protocol.Runtime.ObjectPreviewSubtype.Regexp,\n      Protocol.Runtime.ObjectPreviewSubtype.Webassemblymemory,\n      'internal#entry',\n      'trustedtype',\n    ]);\n    if (preview.type !== Protocol.Runtime.ObjectPreviewType.Object ||\n        (preview.subtype && subTypesWithoutValuePreview.has(preview.subtype))) {\n      return this.renderPropertyPreview(preview.type, preview.subtype, undefined, description);\n    }\n    const isArrayOrTypedArray = preview.subtype === Protocol.Runtime.ObjectPreviewSubtype.Array ||\n        preview.subtype === Protocol.Runtime.ObjectPreviewSubtype.Typedarray;\n    let objectDescription = '';\n    if (description) {\n      if (isArrayOrTypedArray) {\n        const arrayLength = SDK.RemoteObject.RemoteObject.arrayLength(preview);\n        const arrayLengthText = arrayLength > 1 ? ('(' + arrayLength + ')') : '';\n        const arrayName = SDK.RemoteObject.RemoteObject.arrayNameFromDescription(description);\n        objectDescription = arrayName === 'Array' ? arrayLengthText : (arrayName + arrayLengthText);\n      } else {\n        const hideDescription = description === 'Object';\n        objectDescription = hideDescription ? '' : description;\n      }\n    }\n\n    const items = Array.from(\n        preview.entries         ? this.renderEntries(preview) :\n            isArrayOrTypedArray ? this.renderArrayProperties(preview) :\n                                  this.renderObjectProperties(preview));\n\n    // clang-format off\n    const renderName = (name: string): LitTemplate  => html`<span class=name>${\n      /^\\s|\\s$|^$|\\n/.test(name)? '\"' + name.replace(/\\n/g, '\\u21B5') + '\"' : name}</span>`;\n\n    const renderPlaceholder = (placeholder: string): LitTemplate =>\n          html`<span class=object-value-undefined>${placeholder}</span>`;\n\n    const renderValue = (value: Protocol.Runtime.PropertyPreview): LitTemplate=>\n          this.renderPropertyPreview(value.type, value.subtype, value.name, value.value);\n\n    const renderEntry = (entry: Protocol.Runtime.EntryPreview): LitTemplate=> html`${entry.key &&\n          html`${this.renderPropertyPreview(entry.key.type, entry.key.subtype, undefined, entry.key.description)} => `}\n          ${this.renderPropertyPreview(entry.value.type, entry.value.subtype, undefined, entry.value.description)}`;\n\n    const renderItem = ({name, entry, value, placeholder}: PropertyPreviewValue, index: number): LitTemplate => html`${\n        index > 0 ? ', ' : ''}${\n        placeholder !== undefined ? renderPlaceholder(placeholder) : nothing}${\n        name !== undefined ? renderName(name) : nothing}${\n        name !== undefined && value ? ': ' : ''}${\n        value ? renderValue(value) : nothing}${\n        entry ? renderEntry(entry) : nothing}`;\n    // clang-format on\n\n    return html`${\n        objectDescription.length > 0 ?\n            html`<span class=object-description>${objectDescription + '\\xA0'}</span>` :\n            nothing}<span class=object-properties-preview>${isArrayOrTypedArray ? '[' : '{'}${\n        repeat(items, renderItem)}${preview.overflow ? html`<span>${items.length > 0 ? ',\\xA0…' : '…'}</span>` : ''}\n    ${isArrayOrTypedArray ? ']' : '}'}</span>`;\n  }\n\n  private * renderObjectProperties(preview: Protocol.Runtime.ObjectPreview): Generator<PropertyPreviewValue> {\n    const properties = preview.properties.filter(p => p.type !== 'accessor')\n                           .sort(RemoteObjectPreviewFormatter.objectPropertyComparator);\n    for (let i = 0; i < properties.length; ++i) {\n      const property = properties[i];\n      const name = property.name;\n      // Internal properties are given special formatting, e.g. Promises `<rejected>: 123`.\n      if (preview.subtype === Protocol.Runtime.ObjectPreviewSubtype.Promise && name === InternalName.PROMISE_STATE) {\n        const promiseResult =\n            properties.at(i + 1)?.name === InternalName.PROMISE_RESULT ? properties.at(i + 1) : undefined;\n        if (promiseResult) {\n          i++;\n        }\n        yield {name: '<' + property.value + '>', value: property.value !== 'pending' ? promiseResult : undefined};\n      } else if (preview.subtype === 'generator' && name === InternalName.GENERATOR_STATE) {\n        yield {name: '<' + property.value + '>'};\n      } else if (name === InternalName.PRIMITIVE_VALUE) {\n        yield {value: property};\n      } else if (name === InternalName.WEAK_REF_TARGET) {\n        if (property.type === Protocol.Runtime.PropertyPreviewType.Undefined) {\n          yield {name: '<cleared>'};\n        } else {\n          yield {value: property};\n        }\n      } else {\n        yield {name, value: property};\n      }\n    }\n  }\n\n  private * renderArrayProperties(preview: Protocol.Runtime.ObjectPreview): Generator<PropertyPreviewValue> {\n    const arrayLength = SDK.RemoteObject.RemoteObject.arrayLength(preview);\n    const indexProperties = preview.properties.filter(p => toArrayIndex(p.name) !== -1).sort(arrayEntryComparator);\n    const otherProperties = preview.properties.filter(p => toArrayIndex(p.name) === -1)\n                                .sort(RemoteObjectPreviewFormatter.objectPropertyComparator);\n\n    function arrayEntryComparator(a: Protocol.Runtime.PropertyPreview, b: Protocol.Runtime.PropertyPreview): number {\n      return toArrayIndex(a.name) - toArrayIndex(b.name);\n    }\n\n    function toArrayIndex(name: string): number {\n      // We need to differentiate between property accesses and array index accesses\n      // Therefore, we need to make sure we are always dealing with an i32, in the event\n      // that a particular property also exists, but as the literal string. For example\n      // for {[\"1.5\"]: true}, we don't want to return `true` if we provide `1.5` as the\n      // value, but only want to do that if we provide `\"1.5\"`.\n      const index = Number(name) >>> 0;\n      if (String(index) === name && index < arrayLength) {\n        return index;\n      }\n      return -1;\n    }\n\n    // Gaps can be shown when all properties are guaranteed to be in the preview.\n    const canShowGaps = !preview.overflow;\n\n    const indexedProperties:\n        Array<{property: Protocol.Runtime.PropertyPreview, index: number, gap: number, hasGaps: boolean}> = [];\n    for (const property of indexProperties) {\n      const index = toArrayIndex(property.name);\n      const gap = index - (indexedProperties.at(-1)?.index ?? -1) - 1;\n      const hasGaps = index !== indexedProperties.length;\n      indexedProperties.push({property, index, gap, hasGaps});\n    }\n    const trailingGap = arrayLength - (indexedProperties.at(-1)?.index ?? -1) - 1;\n\n    // TODO(l10n): Plurals. Tricky because of a bug in the presubmit check for plurals.\n    const renderGap = (count: number): {placeholder: string} =>\n        ({placeholder: count !== 1 ? i18nString(UIStrings.emptyD, {PH1: count}) : i18nString(UIStrings.empty)});\n    for (const {property, gap, hasGaps} of indexedProperties) {\n      if (canShowGaps && gap > 0) {\n        yield renderGap(gap);\n      }\n      yield {name: !canShowGaps && hasGaps ? property.name : undefined, value: property};\n    }\n    if (canShowGaps && trailingGap > 0) {\n      yield renderGap(trailingGap);\n    }\n\n    for (const property of otherProperties) {\n      yield {name: property.name, value: property};\n    }\n  }\n\n  private * renderEntries(preview: Protocol.Runtime.ObjectPreview): Generator<PropertyPreviewValue> {\n    for (const entry of preview.entries ?? []) {\n      yield {entry};\n    }\n  }\n\n  renderPropertyPreview(type: string, subtype?: string, className?: string|null, description?: string): LitTemplate {\n    const title = type === 'accessor'   ? i18nString(UIStrings.thePropertyIsComputedWithAGetter) :\n        (type === 'object' && !subtype) ? description :\n                                          undefined;\n\n    const abbreviateFullQualifiedClassName = (description: string): string => {\n      const abbreviatedDescription = description.split('.');\n      for (let i = 0; i < abbreviatedDescription.length - 1; ++i) {\n        abbreviatedDescription[i] = Platform.StringUtilities.trimMiddle(abbreviatedDescription[i], 3);\n      }\n      return abbreviatedDescription.length === 1 && abbreviatedDescription[0] === 'Object' ?\n          '{…}' :\n          abbreviatedDescription.join('.');\n    };\n\n    const preview = (): string|LitTemplate|undefined|null => type === 'accessor' ? '(...)' :\n        type === 'function'                                                      ? '\\u0192' :\n        type === 'object' && subtype === 'trustedtype' && className ? renderTrustedType(description ?? '', className) :\n        type === 'object' && subtype === 'node' && description      ? renderNodeTitle(description) :\n        type === 'string'             ? Platform.StringUtilities.formatAsJSLiteral(description ?? '') :\n        type === 'object' && !subtype ? abbreviateFullQualifiedClassName(description ?? '') :\n                                        description;\n\n    return html`<span class='object-value-${(subtype || type)}' title=${ifDefined(title)}>${preview()}</span>`;\n  }\n\n  renderEvaluationResultPreview(result: SDK.RuntimeModel.EvaluationResult, allowErrors?: boolean): DocumentFragment {\n    // TODO(crbug.com/457388389): Return a `LitTemplate` here once callers can handle that.\n    const fragment = document.createDocumentFragment();\n    if ('error' in result) {\n      return fragment;\n    }\n\n    if (result.exceptionDetails?.exception?.description) {\n      const exception = result.exceptionDetails.exception.description;\n      if (exception.startsWith('TypeError: ') || allowErrors) {\n        /* eslint-disable-next-line  @devtools/no-lit-render-outside-of-view */\n        render(html`<span>${result.exceptionDetails.text} ${exception}</span>`, fragment);\n      }\n      return fragment;\n    }\n\n    const {preview, type, subtype, className, description} = result.object;\n    if (preview && type === 'object' && subtype !== 'node' && subtype !== 'trustedtype') {\n      /* eslint-disable-next-line  @devtools/no-lit-render-outside-of-view */\n      render(this.renderObjectPreview(preview), fragment);\n    } else {\n      /* eslint-disable-next-line  @devtools/no-lit-render-outside-of-view */\n      render(\n          this.renderPropertyPreview(\n              type, subtype, className, Platform.StringUtilities.trimEndWithMaxLength(description || '', 400)),\n          fragment);\n    }\n    return fragment;\n  }\n}\n\nconst enum InternalName {\n  GENERATOR_STATE = '[[GeneratorState]]',\n  PRIMITIVE_VALUE = '[[PrimitiveValue]]',\n  PROMISE_STATE = '[[PromiseState]]',\n  PROMISE_RESULT = '[[PromiseResult]]',\n  WEAK_REF_TARGET = '[[WeakRefTarget]]',\n}\n\nexport function renderNodeTitle(nodeTitle: string): LitTemplate|null {\n  const match = nodeTitle.match(/([^#.]+)(#[^.]+)?(\\..*)?/);\n  if (!match) {\n    return null;\n  }\n  return html`<span class=webkit-html-tag-name>${match[1]}</span>${\n      match[2] && html`<span class=webkit-html-attribute-value>${match[2]}</span>`}${\n      match[3] && html`<span class=webkit-html-attribute-name>${match[3]}</span>`}`;\n}\n\nexport function renderTrustedType(description: string, className: string): LitTemplate {\n  return html`${className} <span class=object-value-string>\"${description.replace(/\\n/g, '\\u21B5')}\"</span>`;\n}\n"]}