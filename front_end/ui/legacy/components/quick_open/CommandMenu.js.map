{"version":3,"file":"CommandMenu.js","sourceRoot":"","sources":["../../../../../../../../front_end/ui/legacy/components/quick_open/CommandMenu.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright 2016 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport '../../../kit/kit.js';\nimport '../../../components/highlighting/highlighting.js';\n\nimport * as Common from '../../../../core/common/common.js';\nimport * as Host from '../../../../core/host/host.js';\nimport * as i18n from '../../../../core/i18n/i18n.js';\nimport * as Platform from '../../../../core/platform/platform.js';\nimport * as Diff from '../../../../third_party/diff/diff.js';\nimport {html, nothing, type TemplateResult} from '../../../lit/lit.js';\nimport * as UI from '../../legacy.js';\n\nimport {FilteredListWidget, Provider, registerProvider} from './FilteredListWidget.js';\nimport {QuickOpenImpl} from './QuickOpen.js';\n\nconst UIStrings = {\n  /**\n   * @description Message to display if a setting change requires a reload of DevTools\n   */\n  oneOrMoreSettingsHaveChanged: 'One or more settings have changed which requires a reload to take effect',\n  /**\n   * @description Text in Command Menu of the Command Menu\n   */\n  noCommandsFound: 'No commands found',\n  /**\n   * @description Text for command prefix of run a command\n   */\n  run: 'Run',\n  /**\n   * @description Text for command suggestion of run a command\n   */\n  command: 'Command',\n  /**\n   * @description Text for help title of run command menu\n   */\n  runCommand: 'Run command',\n  /**\n   * @description Hint text to indicate that a selected command is deprecated\n   */\n  deprecated: 'â€” deprecated',\n} as const;\nconst str_ = i18n.i18n.registerUIStrings('ui/legacy/components/quick_open/CommandMenu.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\n\nlet commandMenuInstance: CommandMenu;\n\nexport class CommandMenu {\n  readonly #commands: Command[];\n  private constructor() {\n    this.#commands = [];\n    this.loadCommands();\n  }\n\n  static instance(opts: {\n    forceNew: boolean|null,\n  } = {forceNew: null}): CommandMenu {\n    const {forceNew} = opts;\n    if (!commandMenuInstance || forceNew) {\n      commandMenuInstance = new CommandMenu();\n    }\n    return commandMenuInstance;\n  }\n\n  static createCommand(options: CreateCommandOptions): Command {\n    const {\n      category,\n      keys,\n      title,\n      shortcut,\n      jslogContext,\n      executeHandler,\n      availableHandler,\n      userActionCode,\n      deprecationWarning,\n      isPanelOrDrawer,\n      featurePromotionId,\n    } = options;\n\n    let handler = executeHandler;\n    if (userActionCode) {\n      const actionCode = userActionCode;\n      handler = () => {\n        Host.userMetrics.actionTaken(actionCode);\n        executeHandler();\n        // not here\n      };\n    }\n    return new Command(\n        category, title, keys, shortcut, jslogContext, handler, availableHandler, deprecationWarning, isPanelOrDrawer,\n        featurePromotionId);\n  }\n\n  static createSettingCommand<V>(setting: Common.Settings.Setting<V>, title: Common.UIString.LocalizedString, value: V):\n      Command {\n    const category = setting.category();\n    if (!category) {\n      throw new Error(`Creating '${title}' setting command failed. Setting has no category.`);\n    }\n    const tags = setting.tags() || '';\n    const reloadRequired = Boolean(setting.reloadRequired());\n\n    return CommandMenu.createCommand({\n      category: Common.Settings.getLocalizedSettingsCategory(category),\n      keys: tags,\n      title,\n      shortcut: '',\n      jslogContext: Platform.StringUtilities.toKebabCase(`${setting.name}-${value}`),\n      executeHandler: () => {\n        if (setting.deprecation?.disabled &&\n            (!setting.deprecation?.experiment || setting.deprecation.experiment.isEnabled())) {\n          void Common.Revealer.reveal(setting);\n          return;\n        }\n        setting.set(value);\n\n        if (setting.name === 'emulate-page-focus') {\n          Host.userMetrics.actionTaken(Host.UserMetrics.Action.ToggleEmulateFocusedPageFromCommandMenu);\n        }\n\n        if (reloadRequired) {\n          UI.InspectorView.InspectorView.instance().displayReloadRequiredWarning(\n              i18nString(UIStrings.oneOrMoreSettingsHaveChanged));\n        }\n      },\n      availableHandler,\n      deprecationWarning: setting.deprecation?.warning,\n    });\n\n    function availableHandler(): boolean {\n      return setting.get() !== value;\n    }\n  }\n\n  static createActionCommand(options: ActionCommandOptions): Command {\n    const {action, userActionCode} = options;\n    const category = action.category();\n    if (!category) {\n      throw new Error(`Creating '${action.title()}' action command failed. Action has no category.`);\n    }\n\n    let panelOrDrawer = undefined;\n    if (category === UI.ActionRegistration.ActionCategory.DRAWER) {\n      panelOrDrawer = PanelOrDrawer.DRAWER;\n    }\n\n    const shortcut = UI.ShortcutRegistry.ShortcutRegistry.instance().shortcutTitleForAction(action.id()) || '';\n\n    return CommandMenu.createCommand({\n      category: UI.ActionRegistration.getLocalizedActionCategory(category),\n      keys: action.tags() || '',\n      title: action.title(),\n      shortcut,\n      jslogContext: action.id(),\n      executeHandler: action.execute.bind(action),\n      userActionCode,\n      availableHandler: undefined,\n      isPanelOrDrawer: panelOrDrawer,\n    });\n  }\n\n  static createRevealViewCommand(options: RevealViewCommandOptions): Command {\n    const {title, tags, category, userActionCode, id, featurePromotionId} = options;\n    if (!category) {\n      throw new Error(`Creating '${title}' reveal view command failed. Reveal view has no category.`);\n    }\n    let panelOrDrawer = undefined;\n    if (category === UI.ViewManager.ViewLocationCategory.PANEL) {\n      panelOrDrawer = PanelOrDrawer.PANEL;\n    } else if (category === UI.ViewManager.ViewLocationCategory.DRAWER) {\n      panelOrDrawer = PanelOrDrawer.DRAWER;\n    }\n\n    const executeHandler = (): Promise<void> => {\n      if (id === 'issues-pane') {\n        Host.userMetrics.issuesPanelOpenedFrom(Host.UserMetrics.IssueOpener.COMMAND_MENU);\n      }\n      if (featurePromotionId) {\n        UI.UIUtils.PromotionManager.instance().recordFeatureInteraction(featurePromotionId);\n      }\n      return UI.ViewManager.ViewManager.instance().showView(id, /* userGesture */ true);\n    };\n\n    return CommandMenu.createCommand({\n      category: UI.ViewManager.getLocalizedViewLocationCategory(category),\n      keys: tags,\n      title,\n      shortcut: '',\n      jslogContext: id,\n      executeHandler,\n      userActionCode,\n      availableHandler: undefined,\n      isPanelOrDrawer: panelOrDrawer,\n      featurePromotionId,\n    });\n  }\n\n  private loadCommands(): void {\n    const locations = new Map<UI.ViewManager.ViewLocationValues, UI.ViewManager.ViewLocationCategory>();\n    for (const {category, name} of UI.ViewManager.getRegisteredLocationResolvers()) {\n      if (category && name) {\n        locations.set(name, category);\n      }\n    }\n    const views = UI.ViewManager.ViewManager.instance().getRegisteredViewExtensions();\n    for (const view of views) {\n      const viewLocation = view.location();\n      const category = viewLocation && locations.get(viewLocation);\n      if (!category) {\n        continue;\n      }\n\n      const options: RevealViewCommandOptions = {\n        title: view.commandPrompt(),\n        tags: view.tags() || '',\n        category,\n        id: view.viewId(),\n        featurePromotionId: view.featurePromotionId(),\n      };\n      this.#commands.push(CommandMenu.createRevealViewCommand(options));\n    }\n    // Populate allowlisted settings.\n    const settingsRegistrations = Common.Settings.Settings.instance().getRegisteredSettings();\n    for (const settingRegistration of settingsRegistrations) {\n      const options = settingRegistration.options;\n      if (!options || !settingRegistration.category) {\n        continue;\n      }\n      for (const pair of options) {\n        const setting = Common.Settings.Settings.instance().moduleSetting(settingRegistration.settingName);\n        this.#commands.push(CommandMenu.createSettingCommand(setting, pair.title(), pair.value));\n      }\n    }\n  }\n\n  commands(): Command[] {\n    return this.#commands;\n  }\n}\nexport interface ActionCommandOptions {\n  action: UI.ActionRegistration.Action;\n  userActionCode?: number;\n}\n\nexport interface RevealViewCommandOptions {\n  id: string;\n  title: Common.UIString.LocalizedString;\n  tags: string;\n  category: UI.ViewManager.ViewLocationCategory;\n  userActionCode?: number;\n  featurePromotionId?: string;\n}\n\nexport interface CreateCommandOptions {\n  category: Platform.UIString.LocalizedString;\n  keys: string;\n  title: Common.UIString.LocalizedString;\n  shortcut: string;\n  jslogContext: string;\n  executeHandler: () => void;\n  availableHandler?: () => boolean;\n  userActionCode?: number;\n  deprecationWarning?: Platform.UIString.LocalizedString;\n  isPanelOrDrawer?: PanelOrDrawer;\n  featurePromotionId?: string;\n}\n\nexport const enum PanelOrDrawer {\n  PANEL = 'PANEL',\n  DRAWER = 'DRAWER',\n}\n\nexport class CommandMenuProvider extends Provider {\n  private commands: Command[];\n\n  constructor(commandsForTest: Command[] = []) {\n    super('command');\n    this.commands = commandsForTest;\n  }\n\n  override attach(): void {\n    const allCommands = CommandMenu.instance().commands();\n\n    // Populate allowlisted actions.\n    const actions = UI.ActionRegistry.ActionRegistry.instance().availableActions();\n    for (const action of actions) {\n      const category = action.category();\n      if (!category) {\n        continue;\n      }\n      this.commands.push(CommandMenu.createActionCommand({action}));\n    }\n\n    for (const command of allCommands) {\n      if (!command.available()) {\n        continue;\n      }\n      if (this.commands.find(({title, category}) => title === command.title && category === command.category)) {\n        continue;\n      }\n      this.commands.push(command);\n    }\n\n    this.commands = this.commands.sort(commandComparator);\n\n    function commandComparator(left: Command, right: Command): number {\n      const cats = Platform.StringUtilities.compare(left.category, right.category);\n      return cats ? cats : Platform.StringUtilities.compare(left.title, right.title);\n    }\n  }\n\n  override detach(): void {\n    this.commands = [];\n  }\n\n  override itemCount(): number {\n    return this.commands.length;\n  }\n\n  override itemKeyAt(itemIndex: number): string {\n    return this.commands[itemIndex].key;\n  }\n\n  override itemScoreAt(itemIndex: number, query: string): number {\n    const command = this.commands[itemIndex];\n    let score = Diff.Diff.DiffWrapper.characterScore(query.toLowerCase(), command.title.toLowerCase());\n    // Increase score of promoted items so that these appear on top of the list\n    const promotionId = command.featurePromotionId;\n    if (promotionId && UI.UIUtils.PromotionManager.instance().canShowPromotion(promotionId)) {\n      score = Number.MAX_VALUE;\n      return score;\n    }\n\n    // Score panel/drawer reveals above regular actions.\n    if (command.isPanelOrDrawer === PanelOrDrawer.PANEL) {\n      score += 2;\n    } else if (command.isPanelOrDrawer === PanelOrDrawer.DRAWER) {\n      score += 1;\n    }\n\n    return score;\n  }\n\n  override renderItem(itemIndex: number, query: string): TemplateResult {\n    const command = this.commands[itemIndex];\n    const badge = command.featurePromotionId ? UI.UIUtils.maybeCreateNewBadge(command.featurePromotionId) : undefined;\n    const deprecationWarning = command.deprecationWarning;\n    // clang-format off\n    return html`\n      <devtools-icon name=${categoryIcons[command.category]}></devtools-icon>\n      <div>\n        <devtools-highlight type=\"markup\" ranges=${FilteredListWidget.getHighlightRanges(command.title, query, true)}>\n          ${command.title}\n        </devtools-highlight>\n        ${badge ?? nothing}\n        <div>${command.shortcut}</div>\n        ${deprecationWarning ? html`\n          <span class=\"deprecated-tag\" title=${deprecationWarning}>\n            ${i18nString(UIStrings.deprecated)}\n          </span>` : nothing}\n      </div>\n      <span class=\"tag\">${command.category}</span>`;\n    // clang-format on\n  }\n\n  override jslogContextAt(itemIndex: number): string {\n    return this.commands[itemIndex].jslogContext;\n  }\n\n  override selectItem(itemIndex: number|null, _promptValue: string): void {\n    if (itemIndex === null) {\n      return;\n    }\n    this.commands[itemIndex].execute();\n    Host.userMetrics.actionTaken(Host.UserMetrics.Action.SelectCommandFromCommandMenu);\n  }\n\n  override notFoundText(): string {\n    return i18nString(UIStrings.noCommandsFound);\n  }\n}\n\nconst categoryIcons: Record<string, string> = {\n  Appearance: 'palette',\n  Console: 'terminal',\n  Debugger: 'bug',\n  Drawer: 'keyboard-full',\n  Elements: 'code',\n  Global: 'global',\n  Grid: 'grid-on',\n  Help: 'help',\n  Mobile: 'devices',\n  Navigation: 'refresh',\n  Network: 'arrow-up-down',\n  Panel: 'frame',\n  Performance: 'performance',\n  Persistence: 'override',\n  Recorder: 'record-start',\n  Rendering: 'tonality',\n  Resources: 'bin',\n  Screenshot: 'photo-camera',\n  Settings: 'gear',\n  Sources: 'label',\n};\n\nexport class Command {\n  readonly category: Common.UIString.LocalizedString;\n  readonly title: Common.UIString.LocalizedString;\n  readonly key: string;\n  readonly shortcut: string;\n  readonly jslogContext: string;\n  readonly deprecationWarning?: Platform.UIString.LocalizedString;\n  readonly isPanelOrDrawer?: PanelOrDrawer;\n  readonly featurePromotionId?: string;\n\n  readonly #executeHandler: () => unknown;\n  readonly #availableHandler?: () => boolean;\n\n  constructor(\n      category: Common.UIString.LocalizedString, title: Common.UIString.LocalizedString, key: string, shortcut: string,\n      jslogContext: string, executeHandler: () => unknown, availableHandler?: () => boolean,\n      deprecationWarning?: Platform.UIString.LocalizedString, isPanelOrDrawer?: PanelOrDrawer,\n      featurePromotionId?: string) {\n    this.category = category;\n    this.title = title;\n    this.key = category + '\\0' + title + '\\0' + key;\n    this.shortcut = shortcut;\n    this.jslogContext = jslogContext;\n    this.#executeHandler = executeHandler;\n    this.#availableHandler = availableHandler;\n    this.deprecationWarning = deprecationWarning;\n    this.isPanelOrDrawer = isPanelOrDrawer;\n    this.featurePromotionId = featurePromotionId;\n  }\n\n  available(): boolean {\n    return this.#availableHandler ? this.#availableHandler() : true;\n  }\n\n  execute(): unknown {\n    return this.#executeHandler();  // Tests might want to await the action in case it's async.\n  }\n}\n\nexport class ShowActionDelegate implements UI.ActionRegistration.ActionDelegate {\n  handleAction(_context: UI.Context.Context, _actionId: string): boolean {\n    Host.InspectorFrontendHost.InspectorFrontendHostInstance.bringToFront();\n    QuickOpenImpl.show('>');\n    return true;\n  }\n}\n\nregisterProvider({\n  prefix: '>',\n  iconName: 'chevron-right',\n  provider: () => Promise.resolve(new CommandMenuProvider()),\n  helpTitle: () => i18nString(UIStrings.runCommand),\n  titlePrefix: () => i18nString(UIStrings.run),\n  titleSuggestion: () => i18nString(UIStrings.command),\n});\n"]}