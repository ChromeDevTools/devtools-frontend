{"version":3,"file":"JSONView.js","sourceRoot":"","sources":["../../../../../../../../front_end/ui/legacy/components/source_frame/JSONView.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright 2011 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n/* eslint-disable @devtools/no-imperative-dom-api */\n\nimport * as i18n from '../../../../core/i18n/i18n.js';\nimport * as Platform from '../../../../core/platform/platform.js';\nimport * as SDK from '../../../../core/sdk/sdk.js';\nimport * as VisualLogging from '../../../visual_logging/visual_logging.js';\nimport * as UI from '../../legacy.js';\nimport * as ObjectUI from '../object_ui/object_ui.js';\n\nimport jsonViewStyles from './jsonView.css.js';\n\nconst UIStrings = {\n  /**\n   * @description Text to find an item\n   */\n  find: 'Find',\n} as const;\nconst str_ = i18n.i18n.registerUIStrings('ui/legacy/components/source_frame/JSONView.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\n\nexport class JSONView extends UI.Widget.VBox implements UI.SearchableView.Searchable {\n  private initialized: boolean;\n  private readonly parsedJSON: ParsedJSON;\n  private startCollapsed: boolean;\n  private searchableView!: UI.SearchableView.SearchableView|null;\n  private treeOutline!: ObjectUI.ObjectPropertiesSection.ObjectPropertiesSection;\n  private currentSearchFocusIndex: number;\n  private currentSearchTreeElements: ObjectUI.ObjectPropertiesSection.ObjectPropertyTreeElement[];\n  private searchRegex: RegExp|null;\n  constructor(parsedJSON: ParsedJSON, startCollapsed?: boolean) {\n    super();\n    this.initialized = false;\n    this.registerRequiredCSS(jsonViewStyles);\n    this.parsedJSON = parsedJSON;\n    this.startCollapsed = Boolean(startCollapsed);\n    this.element.classList.add('json-view');\n    this.element.setAttribute('jslog', `${VisualLogging.section('json-view')}`);\n    this.currentSearchFocusIndex = 0;\n    this.currentSearchTreeElements = [];\n    this.searchRegex = null;\n  }\n\n  static async createView(content: string): Promise<UI.SearchableView.SearchableView|null> {\n    // We support non-strict JSON parsing by parsing an AST tree which is why we offload it to a worker.\n    const parsedJSON = await JSONView.parseJSON(content);\n    if (!parsedJSON || typeof parsedJSON.data !== 'object') {\n      return null;\n    }\n\n    const jsonView = new JSONView(parsedJSON);\n    const searchableView = new UI.SearchableView.SearchableView(jsonView, null);\n    searchableView.setPlaceholder(i18nString(UIStrings.find));\n    jsonView.searchableView = searchableView;\n    jsonView.show(searchableView.element);\n    return searchableView;\n  }\n\n  static createViewSync(obj: Object|null, element?: HTMLElement): UI.SearchableView.SearchableView {\n    const jsonView = new JSONView(new ParsedJSON(obj, '', ''));\n    const searchableView = new UI.SearchableView.SearchableView(jsonView, null, undefined, element);\n    searchableView.setPlaceholder(i18nString(UIStrings.find));\n    jsonView.searchableView = searchableView;\n    jsonView.show(searchableView.element);\n    jsonView.element.tabIndex = 0;\n    return searchableView;\n  }\n\n  setSearchableView(searchableView: UI.SearchableView.SearchableView): void {\n    this.searchableView = searchableView;\n  }\n\n  private static parseJSON(text: string|null): Promise<ParsedJSON|null> {\n    let returnObj: ParsedJSON<string>|null = null;\n    if (text) {\n      returnObj = JSONView.extractJSON(text);\n    }\n    if (!returnObj) {\n      return Promise.resolve(null);\n    }\n    try {\n      const json = JSON.parse(returnObj.data);\n      if (!json) {\n        return Promise.resolve(null);\n      }\n      returnObj.data = json;\n    } catch {\n      returnObj = null;\n    }\n\n    return Promise.resolve(returnObj);\n  }\n\n  private static extractJSON(text: string): ParsedJSON<string>|null {\n    // Do not treat HTML as JSON.\n    if (text.startsWith('<')) {\n      return null;\n    }\n    let inner = JSONView.findBrackets(text, '{', '}');\n    const inner2 = JSONView.findBrackets(text, '[', ']');\n    inner = inner2.length > inner.length ? inner2 : inner;\n\n    // Return on blank payloads or on payloads significantly smaller than original text.\n    if (inner.length === -1 || text.length - inner.length > 80) {\n      return null;\n    }\n\n    const prefix = text.substring(0, inner.start);\n    const suffix = text.substring(inner.end + 1);\n    text = text.substring(inner.start, inner.end + 1);\n\n    // Only process valid JSONP.\n    if (suffix.trim().length && !(suffix.trim().startsWith(')') && prefix.trim().endsWith('('))) {\n      return null;\n    }\n\n    return new ParsedJSON(text, prefix, suffix);\n  }\n\n  private static findBrackets(text: string, open: string, close: string): {\n    start: number,\n    end: number,\n    length: number,\n  } {\n    const start = text.indexOf(open);\n    const end = text.lastIndexOf(close);\n    let length: -1|number = end - start - 1;\n    if (start === -1 || end === -1 || end < start) {\n      length = -1;\n    }\n    return {start, end, length};\n  }\n\n  override wasShown(): void {\n    super.wasShown();\n    this.initialize();\n  }\n\n  private initialize(): void {\n    if (this.initialized) {\n      return;\n    }\n    this.initialized = true;\n\n    const obj = SDK.RemoteObject.RemoteObject.fromLocalObject(this.parsedJSON.data);\n    const title = this.parsedJSON.prefix + obj.description + this.parsedJSON.suffix;\n    this.treeOutline =\n        new ObjectUI.ObjectPropertiesSection.ObjectPropertiesSection(obj, title, undefined, true /* showOverflow */);\n    this.treeOutline.enableContextMenu();\n    this.treeOutline.setEditable(false);\n    if (!this.startCollapsed) {\n      this.treeOutline.expand();\n    }\n    this.element.appendChild(this.treeOutline.element);\n    const firstChild = this.treeOutline.firstChild();\n    if (firstChild) {\n      firstChild.select(true /* omitFocus */, false /* selectedByUser */);\n    }\n  }\n\n  private jumpToMatch(index: number): void {\n    if (!this.searchRegex) {\n      return;\n    }\n    const previousFocusElement = this.currentSearchTreeElements[this.currentSearchFocusIndex];\n    if (previousFocusElement) {\n      previousFocusElement.setSearchRegex(this.searchRegex);\n    }\n\n    const newFocusElement = this.currentSearchTreeElements[index];\n    if (newFocusElement) {\n      this.updateSearchIndex(index);\n      newFocusElement.setSearchRegex(this.searchRegex, UI.UIUtils.highlightedCurrentSearchResultClassName);\n      newFocusElement.reveal();\n    } else {\n      this.updateSearchIndex(0);\n    }\n  }\n\n  private updateSearchCount(count: number): void {\n    if (!this.searchableView) {\n      return;\n    }\n    this.searchableView.updateSearchMatchesCount(count);\n  }\n\n  private updateSearchIndex(index: number): void {\n    this.currentSearchFocusIndex = index;\n    if (!this.searchableView) {\n      return;\n    }\n    this.searchableView.updateCurrentMatchIndex(index);\n  }\n\n  onSearchCanceled(): void {\n    this.searchRegex = null;\n    this.currentSearchTreeElements = [];\n\n    let element: UI.TreeOutline.TreeElement|null;\n    for (element = this.treeOutline.rootElement(); element; element = element.traverseNextTreeElement(false)) {\n      if (!(element instanceof ObjectUI.ObjectPropertiesSection.ObjectPropertyTreeElement)) {\n        continue;\n      }\n      element.revertHighlightChanges();\n    }\n    this.updateSearchCount(0);\n    this.updateSearchIndex(0);\n  }\n\n  performSearch(searchConfig: UI.SearchableView.SearchConfig, _shouldJump: boolean, jumpBackwards?: boolean): void {\n    let newIndex: number = this.currentSearchFocusIndex;\n    const previousSearchFocusElement = this.currentSearchTreeElements[newIndex];\n    this.onSearchCanceled();\n    this.searchRegex = searchConfig.toSearchRegex(true).regex;\n\n    let element: UI.TreeOutline.TreeElement|null;\n    for (element = this.treeOutline.rootElement(); element; element = element.traverseNextTreeElement(false)) {\n      if (!(element instanceof ObjectUI.ObjectPropertiesSection.ObjectPropertyTreeElement)) {\n        continue;\n      }\n      const hasMatch = element.setSearchRegex(this.searchRegex);\n      if (hasMatch) {\n        this.currentSearchTreeElements.push(element);\n      }\n      if (previousSearchFocusElement === element) {\n        const currentIndex = this.currentSearchTreeElements.length - 1;\n        if (hasMatch || jumpBackwards) {\n          newIndex = currentIndex;\n        } else {\n          newIndex = currentIndex + 1;\n        }\n      }\n    }\n    this.updateSearchCount(this.currentSearchTreeElements.length);\n\n    if (!this.currentSearchTreeElements.length) {\n      this.updateSearchIndex(-1);\n      return;\n    }\n    newIndex = Platform.NumberUtilities.mod(newIndex, this.currentSearchTreeElements.length);\n\n    this.jumpToMatch(newIndex);\n  }\n\n  jumpToNextSearchResult(): void {\n    if (!this.currentSearchTreeElements.length) {\n      return;\n    }\n    const newIndex =\n        Platform.NumberUtilities.mod(this.currentSearchFocusIndex + 1, this.currentSearchTreeElements.length);\n    this.jumpToMatch(newIndex);\n  }\n\n  jumpToPreviousSearchResult(): void {\n    if (!this.currentSearchTreeElements.length) {\n      return;\n    }\n    const newIndex =\n        Platform.NumberUtilities.mod(this.currentSearchFocusIndex - 1, this.currentSearchTreeElements.length);\n    this.jumpToMatch(newIndex);\n  }\n\n  supportsCaseSensitiveSearch(): boolean {\n    return true;\n  }\n\n  supportsWholeWordSearch(): boolean {\n    return true;\n  }\n\n  supportsRegexSearch(): boolean {\n    return true;\n  }\n}\n\nexport class ParsedJSON<T extends unknown = unknown> {\n  data: T;\n  prefix: string;\n  suffix: string;\n\n  constructor(data: T, prefix: string, suffix: string) {\n    this.data = data;\n    this.prefix = prefix;\n    this.suffix = suffix;\n  }\n}\n\nexport class SearchableJsonView extends UI.SearchableView.SearchableView {\n  #jsonView: JSONView;\n\n  constructor(element: HTMLElement) {\n    const jsonView = new JSONView(new ParsedJSON('', '', ''));\n    super(jsonView, null, undefined, element);\n    this.#jsonView = jsonView;\n    this.setPlaceholder(i18nString(UIStrings.find));\n    jsonView.setSearchableView(this);\n    jsonView.show(this.element);\n    jsonView.element.tabIndex = 0;\n  }\n\n  set jsonObject(obj: Object) {\n    const jsonView = new JSONView(new ParsedJSON(obj, '', ''));\n    this.#jsonView.detach();\n    this.#jsonView = jsonView;\n    this.searchProvider = jsonView;\n    jsonView.show(this.element);\n    this.requestUpdate();\n  }\n}\n"]}