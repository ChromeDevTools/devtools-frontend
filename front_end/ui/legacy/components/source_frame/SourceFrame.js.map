{"version":3,"file":"SourceFrame.js","sourceRoot":"","sources":["../../../../../../../../front_end/ui/legacy/components/source_frame/SourceFrame.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright 2011 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n/* eslint-disable @devtools/no-imperative-dom-api */\n\nimport * as Common from '../../../../core/common/common.js';\nimport * as Host from '../../../../core/host/host.js';\nimport * as i18n from '../../../../core/i18n/i18n.js';\nimport * as Platform from '../../../../core/platform/platform.js';\nimport * as Root from '../../../../core/root/root.js';\nimport * as SDK from '../../../../core/sdk/sdk.js';\nimport * as Formatter from '../../../../models/formatter/formatter.js';\nimport * as TextUtils from '../../../../models/text_utils/text_utils.js';\nimport * as PanelCommon from '../../../../panels/common/common.js';\nimport * as CodeMirror from '../../../../third_party/codemirror.next/codemirror.next.js';\nimport * as CodeHighlighter from '../../../components/code_highlighter/code_highlighter.js';\nimport * as TextEditor from '../../../components/text_editor/text_editor.js';\nimport * as VisualLogging from '../../../visual_logging/visual_logging.js';\nimport * as UI from '../../legacy.js';\n\nconst UIStrings = {\n  /**\n   * @description Text for the source of something\n   */\n  source: 'Source',\n  /**\n   * @description Text to pretty print a file\n   */\n  prettyPrint: 'Pretty print',\n  /**\n   * @description Text when something is loading\n   */\n  loading: 'Loadingâ€¦',\n  /**\n   * @description Shown at the bottom of the Sources panel when the user has made multiple\n   * simultaneous text selections in the text editor.\n   * @example {2} PH1\n   */\n  dSelectionRegions: '{PH1} selection regions',\n  /**\n   * @description Position indicator in Source Frame of the Sources panel. The placeholder is a\n   * hexadecimal number value, which is why it is prefixed with '0x'.\n   * @example {abc} PH1\n   */\n  bytecodePositionXs: 'Bytecode position `0x`{PH1}',\n  /**\n   * @description Text in Source Frame of the Sources panel\n   * @example {2} PH1\n   * @example {2} PH2\n   */\n  lineSColumnS: 'Line {PH1}, Column {PH2}',\n  /**\n   * @description Text in Source Frame of the Sources panel\n   * @example {2} PH1\n   */\n  dCharactersSelected: '{PH1} characters selected',\n  /**\n   * @description Text in Source Frame of the Sources panel\n   * @example {2} PH1\n   * @example {2} PH2\n   */\n  dLinesDCharactersSelected: '{PH1} lines, {PH2} characters selected',\n  /**\n   * @description Headline of warning shown to users when pasting text/code into DevTools.\n   */\n  doYouTrustThisCode: 'Do you trust this code?',\n  /**\n   * @description Warning shown to users when pasting text/code into DevTools.\n   * @example {allow pasting} PH1\n   */\n  doNotPaste:\n      'Don\\'t paste code you do not understand or have not reviewed yourself into DevTools. This could allow attackers to steal your identity or take control of your computer. Please type \\'\\'{PH1}\\'\\' below to allow pasting.',\n  /**\n   * @description Text a user needs to type in order to confirm that they are aware of the danger of pasting code into the DevTools console.\n   */\n  allowPasting: 'allow pasting',\n  /**\n   * @description Input box placeholder which instructs the user to type 'allow pasting' into the input box.\n   * @example {allow pasting} PH1\n   */\n  typeAllowPasting: 'Type \\'\\'{PH1}\\'\\'',\n  /**\n   * @description Error message shown when the user tries to open a file that contains non-readable data. \"Editor\" refers to\n   * a text editor.\n   */\n  binaryContentError:\n      'Editor can\\'t show binary data. Use the \"Response\" tab in the \"Network\" panel to inspect this resource.',\n} as const;\nconst str_ = i18n.i18n.registerUIStrings('ui/legacy/components/source_frame/SourceFrame.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\n\nexport interface SourceFrameOptions {\n  // Whether to show line numbers. Defaults to true.\n  lineNumbers?: boolean;\n  // Whether to wrap lines. Defaults to false.\n  lineWrapping?: boolean;\n}\n\nexport const enum Events {\n  EDITOR_UPDATE = 'EditorUpdate',\n  EDITOR_SCROLL = 'EditorScroll',\n}\n\nexport interface EventTypes {\n  [Events.EDITOR_UPDATE]: CodeMirror.ViewUpdate;\n  [Events.EDITOR_SCROLL]: void;\n}\n\ntype FormatFn = (lineNo: number, state: CodeMirror.EditorState) => string;\nexport const LINE_NUMBER_FORMATTER = CodeMirror.Facet.define<FormatFn, FormatFn>({\n  combine(value): FormatFn {\n    if (value.length === 0) {\n      return (lineNo: number) => lineNo.toString();\n    }\n    return value[0];\n  },\n});\n\nexport class SourceFrameImpl extends Common.ObjectWrapper.eventMixin<EventTypes, typeof UI.View.SimpleView>(\n    UI.View.SimpleView) implements UI.SearchableView.Searchable, UI.SearchableView.Replaceable, Transformer {\n  private readonly lazyContent: () => Promise<TextUtils.ContentData.ContentDataOrError>;\n  private prettyInternal: boolean;\n  private rawContent: string|CodeMirror.Text|null;\n  private formattedMap: Formatter.ScriptFormatter.FormatterSourceMapping|null;\n  private readonly prettyToggle: UI.Toolbar.ToolbarToggle;\n  private shouldAutoPrettyPrint: boolean;\n  private readonly progressToolbarItem: UI.Toolbar.ToolbarItem;\n  private textEditorInternal: TextEditor.TextEditor.TextEditor;\n  // The 'clean' document, before editing\n  private baseDoc: CodeMirror.Text;\n  private prettyBaseDoc: CodeMirror.Text|null = null;\n  private displayedSelection: CodeMirror.EditorSelection|null = null;\n  private searchConfig: UI.SearchableView.SearchConfig|null;\n  private delayedFindSearchMatches: (() => void)|null;\n  private currentSearchResultIndex: number;\n  private searchResults: SearchMatch[];\n  private searchRegex: UI.SearchableView.SearchRegexResult|null;\n  private loadError: boolean;\n  private readonly sourcePosition: UI.Toolbar.ToolbarText;\n  private searchableView: UI.SearchableView.SearchableView|null;\n  private editable: boolean;\n  private positionToReveal: {\n    to: {lineNumber: number, columnNumber: number},\n    from?: {lineNumber: number, columnNumber: number},\n    shouldHighlight?: boolean,\n  }|null;\n  private lineToScrollTo: number|null;\n  private selectionToSet: TextUtils.TextRange.TextRange|null;\n  private loadedInternal: boolean;\n  private contentRequested: boolean;\n  private wasmDisassemblyInternal: TextUtils.WasmDisassembly.WasmDisassembly|null;\n  contentSet: boolean;\n  private selfXssWarningDisabledSetting: Common.Settings.Setting<boolean>;\n\n  constructor(\n      lazyContent: () => Promise<TextUtils.ContentData.ContentDataOrError>,\n      private readonly options: SourceFrameOptions = {}) {\n    super({\n      title: i18nString(UIStrings.source),\n      viewId: 'source',\n    });\n\n    this.lazyContent = lazyContent;\n\n    this.prettyInternal = false;\n    this.rawContent = null;\n    this.formattedMap = null;\n    this.prettyToggle =\n        new UI.Toolbar.ToolbarToggle(i18nString(UIStrings.prettyPrint), 'brackets', undefined, 'pretty-print');\n    this.prettyToggle.addEventListener(UI.Toolbar.ToolbarButton.Events.CLICK, () => {\n      void this.setPretty(this.prettyToggle.isToggled());\n    });\n    this.shouldAutoPrettyPrint = false;\n    this.prettyToggle.setVisible(false);\n\n    this.progressToolbarItem = new UI.Toolbar.ToolbarItem(document.createElement('div'));\n\n    this.textEditorInternal = new TextEditor.TextEditor.TextEditor(this.placeholderEditorState(''));\n    this.textEditorInternal.style.flexGrow = '1';\n\n    this.element.appendChild(this.textEditorInternal);\n    this.element.addEventListener('keydown', (event: KeyboardEvent) => {\n      if (event.defaultPrevented) {\n        event.stopPropagation();\n      }\n    });\n\n    this.baseDoc = this.textEditorInternal.state.doc;\n\n    this.searchConfig = null;\n    this.delayedFindSearchMatches = null;\n    this.currentSearchResultIndex = -1;\n    this.searchResults = [];\n    this.searchRegex = null;\n    this.loadError = false;\n\n    this.sourcePosition = new UI.Toolbar.ToolbarText();\n\n    this.searchableView = null;\n    this.editable = false;\n\n    this.positionToReveal = null;\n    this.lineToScrollTo = null;\n    this.selectionToSet = null;\n    this.loadedInternal = false;\n    this.contentRequested = false;\n\n    this.wasmDisassemblyInternal = null;\n    this.contentSet = false;\n\n    this.selfXssWarningDisabledSetting = Common.Settings.Settings.instance().createSetting(\n        'disable-self-xss-warning', false, Common.Settings.SettingStorageType.SYNCED);\n    Common.Settings.Settings.instance()\n        .moduleSetting('text-editor-indent')\n        .addChangeListener(this.#textEditorIndentChanged, this);\n  }\n\n  override disposeView(): void {\n    Common.Settings.Settings.instance()\n        .moduleSetting('text-editor-indent')\n        .removeChangeListener(this.#textEditorIndentChanged, this);\n  }\n\n  async #textEditorIndentChanged(): Promise<void> {\n    if (this.prettyInternal) {\n      // Indentation settings changed, which are used for pretty printing as well,\n      // so if the editor is currently pretty printed, just toggle the state here\n      // to apply the new indentation settings.\n      await this.setPretty(false);\n      await this.setPretty(true);\n    }\n  }\n\n  private placeholderEditorState(content: string): CodeMirror.EditorState {\n    return CodeMirror.EditorState.create({\n      doc: content,\n      extensions: [\n        CodeMirror.EditorState.readOnly.of(true),\n        this.options.lineNumbers !== false ? CodeMirror.lineNumbers() : [],\n        TextEditor.Config.theme(),\n      ],\n    });\n  }\n\n  protected editorConfiguration(doc: string|CodeMirror.Text): CodeMirror.Extension {\n    return [\n      CodeMirror.EditorView.updateListener.of(update => this.dispatchEventToListeners(Events.EDITOR_UPDATE, update)),\n      TextEditor.Config.baseConfiguration(doc),\n      TextEditor.Config.closeBrackets.instance(),\n      TextEditor.Config.autocompletion.instance(),\n      TextEditor.Config.showWhitespace.instance(),\n      TextEditor.Config.allowScrollPastEof.instance(),\n      CodeMirror.Prec.lowest(TextEditor.Config.codeFolding.instance()),\n      TextEditor.Config.autoDetectIndent.instance(),\n      sourceFrameTheme,\n      CodeMirror.EditorView.domEventHandlers({\n        focus: () => this.onFocus(),\n        blur: () => this.onBlur(),\n        paste: () => this.onPaste(),\n        scroll: () => this.dispatchEventToListeners(Events.EDITOR_SCROLL),\n        contextmenu: event => this.onContextMenu(event),\n      }),\n      CodeMirror.lineNumbers({\n        domEventHandlers:\n            {contextmenu: (_view, block, event) => this.onLineGutterContextMenu(block.from, event as MouseEvent)},\n      }),\n      CodeMirror.EditorView.updateListener.of(\n          (update):\n              void => {\n                if (update.selectionSet || update.docChanged) {\n                  this.updateSourcePosition();\n                }\n                if (update.docChanged) {\n                  this.onTextChanged();\n                }\n              }),\n      activeSearchState,\n      CodeMirror.Prec.lowest(searchHighlighter),\n      config.language.of([]),\n      this.wasmDisassemblyInternal ? markNonBreakableLines(this.wasmDisassemblyInternal) : nonBreakableLines,\n      this.options.lineWrapping ? CodeMirror.EditorView.lineWrapping : [],\n      this.options.lineNumbers !== false ? CodeMirror.lineNumbers() : [],\n      CodeMirror.indentationMarkers({\n        colors: {\n          light: 'var(--sys-color-divider)',\n          activeLight: 'var(--sys-color-divider-prominent)',\n          dark: 'var(--sys-color-divider)',\n          activeDark: 'var(--sys-color-divider-prominent)',\n        },\n      }),\n      sourceFrameInfobarState,\n    ];\n  }\n\n  protected onBlur(): void {\n  }\n\n  protected onFocus(): void {\n  }\n\n  protected onPaste(): boolean {\n    if (Root.Runtime.Runtime.queryParam('isChromeForTesting') ||\n        Root.Runtime.Runtime.queryParam('disableSelfXssWarnings') || this.selfXssWarningDisabledSetting.get()) {\n      return false;\n    }\n    void this.showSelfXssWarning();\n    return true;\n  }\n\n  async showSelfXssWarning(): Promise<void> {\n    // Hack to circumvent Chrome issue which would show a tooltip for the newly opened\n    // dialog if pasting via keyboard.\n    await new Promise(resolve => setTimeout(resolve, 0));\n\n    const allowPasting = await PanelCommon.TypeToAllowDialog.show({\n      jslogContext: {\n        dialog: 'self-xss-warning',\n        input: 'allow-pasting',\n      },\n      header: i18nString(UIStrings.doYouTrustThisCode),\n      message: i18nString(UIStrings.doNotPaste, {PH1: i18nString(UIStrings.allowPasting)}),\n      typePhrase: i18nString(UIStrings.allowPasting),\n      inputPlaceholder: i18nString(UIStrings.typeAllowPasting, {PH1: i18nString(UIStrings.allowPasting)})\n    });\n    if (allowPasting) {\n      this.selfXssWarningDisabledSetting.set(true);\n      Host.userMetrics.actionTaken(Host.UserMetrics.Action.SelfXssAllowPastingInDialog);\n    }\n  }\n\n  get wasmDisassembly(): TextUtils.WasmDisassembly.WasmDisassembly|null {\n    return this.wasmDisassemblyInternal;\n  }\n\n  editorLocationToUILocation(lineNumber: number, columnNumber: number): {\n    lineNumber: number,\n    columnNumber: number,\n  };\n  editorLocationToUILocation(lineNumber: number): {\n    lineNumber: number,\n    columnNumber: number|undefined,\n  };\n  editorLocationToUILocation(lineNumber: number, columnNumber?: number): {\n    lineNumber: number,\n    columnNumber?: number|undefined,\n  } {\n    if (this.wasmDisassemblyInternal) {\n      columnNumber = this.wasmDisassemblyInternal.lineNumberToBytecodeOffset(lineNumber);\n      lineNumber = 0;\n    } else if (this.prettyInternal) {\n      [lineNumber, columnNumber] = this.prettyToRawLocation(lineNumber, columnNumber);\n    }\n    return {lineNumber, columnNumber};\n  }\n\n  uiLocationToEditorLocation(lineNumber: number, columnNumber: number|undefined = 0): {\n    lineNumber: number,\n    columnNumber: number,\n  } {\n    if (this.wasmDisassemblyInternal) {\n      lineNumber = this.wasmDisassemblyInternal.bytecodeOffsetToLineNumber(columnNumber);\n      columnNumber = 0;\n    } else if (this.prettyInternal) {\n      [lineNumber, columnNumber] = this.rawToPrettyLocation(lineNumber, columnNumber);\n    }\n    return {lineNumber, columnNumber};\n  }\n\n  setCanPrettyPrint(canPrettyPrint: boolean, autoPrettyPrint?: boolean): void {\n    this.shouldAutoPrettyPrint = autoPrettyPrint === true &&\n        Common.Settings.Settings.instance().moduleSetting('auto-pretty-print-minified').get();\n    this.prettyToggle.setVisible(canPrettyPrint);\n  }\n\n  setEditable(editable: boolean): void {\n    this.editable = editable;\n    if (this.loaded && editable !== !this.textEditor.state.readOnly) {\n      this.textEditor.dispatch({effects: config.editable.reconfigure(CodeMirror.EditorState.readOnly.of(!editable))});\n    }\n  }\n\n  private async setPretty(value: boolean): Promise<void> {\n    this.prettyInternal = value;\n    this.prettyToggle.setEnabled(false);\n\n    const wasLoaded = this.loaded;\n    const {textEditor} = this;\n    const selection = textEditor.state.selection.main;\n    const startPos = textEditor.toLineColumn(selection.from), endPos = textEditor.toLineColumn(selection.to);\n    let newSelection;\n    if (this.prettyInternal) {\n      const content =\n          this.rawContent instanceof CodeMirror.Text ? this.rawContent.sliceString(0) : this.rawContent || '';\n      const formatInfo = await Formatter.ScriptFormatter.formatScriptContent(this.contentType, content);\n      this.formattedMap = formatInfo.formattedMapping;\n      await this.setContent(formatInfo.formattedContent);\n      this.prettyBaseDoc = textEditor.state.doc;\n      const start = this.rawToPrettyLocation(startPos.lineNumber, startPos.columnNumber);\n      const end = this.rawToPrettyLocation(endPos.lineNumber, endPos.columnNumber);\n      newSelection = textEditor.createSelection(\n          {lineNumber: start[0], columnNumber: start[1]}, {lineNumber: end[0], columnNumber: end[1]});\n    } else {\n      await this.setContent(this.rawContent || '');\n      this.baseDoc = textEditor.state.doc;\n      const start = this.prettyToRawLocation(startPos.lineNumber, startPos.columnNumber);\n      const end = this.prettyToRawLocation(endPos.lineNumber, endPos.columnNumber);\n      newSelection = textEditor.createSelection(\n          {lineNumber: start[0], columnNumber: start[1]}, {lineNumber: end[0], columnNumber: end[1]});\n    }\n    if (wasLoaded) {\n      textEditor.revealPosition(newSelection, false);\n    }\n    this.prettyToggle.setEnabled(true);\n    this.updatePrettyPrintState();\n  }\n\n  // If this is a disassembled WASM file or a pretty-printed file,\n  // wire in a line number formatter that shows binary offsets or line\n  // numbers in the original source.\n  private getLineNumberFormatter(): CodeMirror.Extension {\n    if (this.options.lineNumbers === false) {\n      return [];\n    }\n    let formatNumber = undefined;\n    if (this.wasmDisassemblyInternal) {\n      const disassembly = this.wasmDisassemblyInternal;\n      const lastBytecodeOffset = disassembly.lineNumberToBytecodeOffset(disassembly.lineNumbers - 1);\n      const bytecodeOffsetDigits = lastBytecodeOffset.toString(16).length + 1;\n      formatNumber = (lineNumber: number) => {\n        const bytecodeOffset =\n            disassembly.lineNumberToBytecodeOffset(Math.min(disassembly.lineNumbers, lineNumber) - 1);\n        return `0x${bytecodeOffset.toString(16).padStart(bytecodeOffsetDigits, '0')}`;\n      };\n    } else if (this.prettyInternal) {\n      formatNumber = (lineNumber: number, state: CodeMirror.EditorState) => {\n        // @codemirror/view passes a high number here to estimate the\n        // maximum width to allocate for the line number gutter.\n        if (lineNumber < 2 || lineNumber > state.doc.lines) {\n          return String(lineNumber);\n        }\n        const [currLine] = this.prettyToRawLocation(lineNumber - 1);\n        const [prevLine] = this.prettyToRawLocation(lineNumber - 2);\n        if (currLine !== prevLine) {\n          return String(currLine + 1);\n        }\n        return '-';\n      };\n    }\n    return formatNumber ? [CodeMirror.lineNumbers({formatNumber}), LINE_NUMBER_FORMATTER.of(formatNumber)] : [];\n  }\n\n  private updateLineNumberFormatter(): void {\n    this.textEditor.dispatch({effects: config.lineNumbers.reconfigure(this.getLineNumberFormatter())});\n    this.textEditor.shadowRoot?.querySelector('.cm-lineNumbers')\n        ?.setAttribute('jslog', `${VisualLogging.gutter('line-numbers').track({click: true})}`);\n  }\n\n  private updatePrettyPrintState(): void {\n    this.prettyToggle.setToggled(this.prettyInternal);\n    this.textEditorInternal.classList.toggle('pretty-printed', this.prettyInternal);\n    this.updateLineNumberFormatter();\n  }\n\n  private prettyToRawLocation(line: number, column: number|undefined = 0): number[] {\n    if (!this.formattedMap) {\n      return [line, column];\n    }\n    return this.formattedMap.formattedToOriginal(line, column);\n  }\n\n  private rawToPrettyLocation(line: number, column: number): number[] {\n    if (!this.formattedMap) {\n      return [line, column];\n    }\n    return this.formattedMap.originalToFormatted(line, column);\n  }\n\n  hasLoadError(): boolean {\n    return this.loadError;\n  }\n\n  override wasShown(): void {\n    super.wasShown();\n    void this.ensureContentLoaded();\n    this.wasShownOrLoaded();\n  }\n\n  override willHide(): void {\n    super.willHide();\n\n    this.clearPositionToReveal();\n  }\n\n  override async toolbarItems(): Promise<UI.Toolbar.ToolbarItem[]> {\n    return [this.prettyToggle, this.sourcePosition, this.progressToolbarItem];\n  }\n\n  get loaded(): boolean {\n    return this.loadedInternal;\n  }\n\n  get textEditor(): TextEditor.TextEditor.TextEditor {\n    return this.textEditorInternal;\n  }\n\n  get pretty(): boolean {\n    return this.prettyInternal;\n  }\n\n  get contentType(): string {\n    return this.loadError ? '' : this.getContentType();\n  }\n\n  protected getContentType(): string {\n    return '';\n  }\n\n  private async ensureContentLoaded(): Promise<void> {\n    if (!this.contentRequested) {\n      this.contentRequested = true;\n      await this.setContentDataOrError(this.lazyContent());\n\n      this.contentSet = true;\n    }\n  }\n\n  protected async setContentDataOrError(contentDataPromise: Promise<TextUtils.ContentData.ContentDataOrError>):\n      Promise<void> {\n    const progressIndicator = document.createElement('devtools-progress');\n    progressIndicator.title = i18nString(UIStrings.loading);\n    progressIndicator.totalWork = 100;\n    this.progressToolbarItem.element.appendChild(progressIndicator);\n\n    progressIndicator.worked = 1;\n    const contentData = await contentDataPromise;\n\n    let error: string|undefined;\n    let content: CodeMirror.Text|string|null;\n    let isMinified = false;\n    if (TextUtils.ContentData.ContentData.isError(contentData)) {\n      error = contentData.error;\n      content = contentData.error;\n    } else if (contentData instanceof TextUtils.WasmDisassembly.WasmDisassembly) {\n      content = CodeMirror.Text.of(contentData.lines);\n      this.wasmDisassemblyInternal = contentData;\n    } else if (contentData.isTextContent) {\n      content = contentData.text;\n      isMinified = TextUtils.TextUtils.isMinified(contentData.text);\n      this.wasmDisassemblyInternal = null;\n    } else if (contentData.mimeType === 'application/wasm') {\n      // The network panel produces ContentData with raw WASM inside. We have to manually disassemble that\n      // as V8 might not know about it.\n      this.wasmDisassemblyInternal = await SDK.Script.disassembleWasm(contentData.base64);\n      content = CodeMirror.Text.of(this.wasmDisassemblyInternal.lines);\n    } else {\n      error = i18nString(UIStrings.binaryContentError);\n      content = null;\n      this.wasmDisassemblyInternal = null;\n    }\n\n    progressIndicator.worked = 100;\n    progressIndicator.done = true;\n\n    if (this.rawContent === content && error === undefined) {\n      return;\n    }\n    this.rawContent = content;\n\n    this.formattedMap = null;\n    this.prettyToggle.setEnabled(true);\n\n    if (error) {\n      this.loadError = true;\n      this.textEditor.state = this.placeholderEditorState(error);\n      this.prettyToggle.setEnabled(false);\n    } else if (this.shouldAutoPrettyPrint && isMinified) {\n      await this.setPretty(true);\n    } else {\n      await this.setContent(this.rawContent || '');\n    }\n  }\n\n  revealPosition(position: RevealPosition, shouldHighlight?: boolean): void {\n    this.lineToScrollTo = null;\n    this.selectionToSet = null;\n    if (typeof position === 'number') {\n      let line = 0, column = 0;\n      const {doc} = this.textEditor.state;\n      if (position > doc.length) {\n        line = doc.lines - 1;\n      } else if (position >= 0) {\n        const lineObj = doc.lineAt(position);\n        line = lineObj.number - 1;\n        column = position - lineObj.from;\n      }\n      this.positionToReveal = {to: {lineNumber: line, columnNumber: column}, shouldHighlight};\n    } else if ('lineNumber' in position) {\n      const {lineNumber, columnNumber} = position;\n      this.positionToReveal = {to: {lineNumber, columnNumber: columnNumber ?? 0}, shouldHighlight};\n    } else {\n      this.positionToReveal = {...position, shouldHighlight};\n    }\n    this.#revealPositionIfNeeded();\n  }\n\n  #revealPositionIfNeeded(): void {\n    if (!this.positionToReveal) {\n      return;\n    }\n\n    if (!this.loaded || !this.isShowing()) {\n      return;\n    }\n\n    const {from, to, shouldHighlight} = this.positionToReveal;\n    const toLocation = this.uiLocationToEditorLocation(to.lineNumber, to.columnNumber);\n    const fromLocation = from ? this.uiLocationToEditorLocation(from.lineNumber, from.columnNumber) : undefined;\n\n    const {textEditor} = this;\n    textEditor.revealPosition(textEditor.createSelection(toLocation, fromLocation), shouldHighlight);\n    this.positionToReveal = null;\n  }\n\n  private clearPositionToReveal(): void {\n    this.positionToReveal = null;\n  }\n\n  scrollToLine(line: number): void {\n    this.clearPositionToReveal();\n    this.lineToScrollTo = line;\n    this.#scrollToLineIfNeeded();\n  }\n\n  #scrollToLineIfNeeded(): void {\n    if (this.lineToScrollTo !== null) {\n      if (this.loaded && this.isShowing()) {\n        const {textEditor} = this;\n        const position = textEditor.toOffset({lineNumber: this.lineToScrollTo, columnNumber: 0});\n        textEditor.dispatch({effects: CodeMirror.EditorView.scrollIntoView(position, {y: 'start', yMargin: 0})});\n        this.lineToScrollTo = null;\n      }\n    }\n  }\n\n  setSelection(textRange: TextUtils.TextRange.TextRange): void {\n    this.selectionToSet = textRange;\n    this.#setSelectionIfNeeded();\n  }\n\n  #setSelectionIfNeeded(): void {\n    const sel = this.selectionToSet;\n    if (sel && this.loaded && this.isShowing()) {\n      const {textEditor} = this;\n      textEditor.dispatch({\n        selection: textEditor.createSelection(\n            {lineNumber: sel.startLine, columnNumber: sel.startColumn},\n            {lineNumber: sel.endLine, columnNumber: sel.endColumn}),\n      });\n      this.selectionToSet = null;\n    }\n  }\n\n  private wasShownOrLoaded(): void {\n    this.#revealPositionIfNeeded();\n    this.#setSelectionIfNeeded();\n    this.#scrollToLineIfNeeded();\n    this.textEditor.shadowRoot?.querySelector('.cm-lineNumbers')\n        ?.setAttribute('jslog', `${VisualLogging.gutter('line-numbers').track({click: true})}`);\n    this.textEditor.shadowRoot?.querySelector('.cm-foldGutter')\n        ?.setAttribute('jslog', `${VisualLogging.gutter('fold')}`);\n    this.textEditor.setAttribute('jslog', `${VisualLogging.textField().track({change: true})}`);\n  }\n\n  onTextChanged(): void {\n    const wasPretty = this.pretty;\n    this.prettyInternal = Boolean(this.prettyBaseDoc && this.textEditor.state.doc.eq(this.prettyBaseDoc));\n    if (this.prettyInternal !== wasPretty) {\n      this.updatePrettyPrintState();\n    }\n    this.prettyToggle.setEnabled(this.isClean());\n\n    if (this.searchConfig && this.searchableView) {\n      this.performSearch(this.searchConfig, false, false);\n    }\n  }\n\n  isClean(): boolean {\n    return this.textEditor.state.doc.eq(this.baseDoc) ||\n        (this.prettyBaseDoc !== null && this.textEditor.state.doc.eq(this.prettyBaseDoc));\n  }\n\n  contentCommitted(): void {\n    this.baseDoc = this.textEditorInternal.state.doc;\n    this.prettyBaseDoc = null;\n    this.rawContent = this.textEditor.state.doc.toString();\n    this.formattedMap = null;\n    if (this.prettyInternal) {\n      this.prettyInternal = false;\n      this.updatePrettyPrintState();\n    }\n    this.prettyToggle.setEnabled(true);\n  }\n\n  protected async getLanguageSupport(content: string|CodeMirror.Text): Promise<CodeMirror.Extension> {\n    // This is a pretty horrible work-around for webpack-based Vue2 setups. See\n    // https://crbug.com/1416562 for the full story behind this.\n    let {contentType} = this;\n    if (contentType === 'text/x.vue') {\n      content = typeof content === 'string' ? content : content.sliceString(0);\n      if (!content.trimStart().startsWith('<')) {\n        contentType = 'text/javascript';\n      }\n    }\n    const languageDesc = await CodeHighlighter.CodeHighlighter.languageFromMIME(contentType);\n    if (!languageDesc) {\n      return [];\n    }\n    return [\n      languageDesc,\n      CodeMirror.javascript.javascriptLanguage.data.of({autocomplete: CodeMirror.completeAnyWord}),\n    ];\n  }\n\n  async updateLanguageMode(content: string): Promise<void> {\n    const langExtension = await this.getLanguageSupport(content);\n    this.textEditor.dispatch({effects: config.language.reconfigure(langExtension)});\n  }\n\n  async setContent(content: string|CodeMirror.Text): Promise<void> {\n    const {textEditor} = this;\n    const wasLoaded = this.loadedInternal;\n    const scrollTop = textEditor.editor.scrollDOM.scrollTop;\n    this.loadedInternal = true;\n\n    const languageSupport = await this.getLanguageSupport(content);\n    const editorState = CodeMirror.EditorState.create({\n      doc: content,\n      extensions: [\n        this.editorConfiguration(content),\n        languageSupport,\n        config.lineNumbers.of(this.getLineNumberFormatter()),\n        config.editable.of(this.editable ? [] : CodeMirror.EditorState.readOnly.of(true)),\n      ],\n    });\n    this.baseDoc = editorState.doc;\n    textEditor.state = editorState;\n    if (wasLoaded) {\n      textEditor.editor.scrollDOM.scrollTop = scrollTop;\n    }\n    this.wasShownOrLoaded();\n\n    if (this.delayedFindSearchMatches) {\n      this.delayedFindSearchMatches();\n      this.delayedFindSearchMatches = null;\n    }\n  }\n\n  setSearchableView(view: UI.SearchableView.SearchableView|null): void {\n    this.searchableView = view;\n  }\n\n  private doFindSearchMatches(\n      searchConfig: UI.SearchableView.SearchConfig, shouldJump: boolean, jumpBackwards: boolean): void {\n    this.currentSearchResultIndex = -1;\n\n    this.searchRegex = searchConfig.toSearchRegex(true);\n    this.searchResults = this.collectRegexMatches(this.searchRegex);\n\n    if (this.searchableView) {\n      this.searchableView.updateSearchMatchesCount(this.searchResults.length);\n    }\n\n    const editor = this.textEditor;\n    if (!this.searchResults.length) {\n      if (editor.state.field(activeSearchState)) {\n        editor.dispatch({effects: setActiveSearch.of(null)});\n      }\n    } else if (shouldJump && jumpBackwards) {\n      this.jumpToPreviousSearchResult();\n    } else if (shouldJump) {\n      this.jumpToNextSearchResult();\n    } else {\n      editor.dispatch({effects: setActiveSearch.of(new ActiveSearch(this.searchRegex, null))});\n    }\n  }\n\n  performSearch(searchConfig: UI.SearchableView.SearchConfig, shouldJump: boolean, jumpBackwards?: boolean): void {\n    if (this.searchableView) {\n      this.searchableView.updateSearchMatchesCount(0);\n    }\n\n    this.resetSearch();\n    this.searchConfig = searchConfig;\n    if (this.loaded) {\n      this.doFindSearchMatches(searchConfig, shouldJump, Boolean(jumpBackwards));\n    } else {\n      this.delayedFindSearchMatches =\n          this.doFindSearchMatches.bind(this, searchConfig, shouldJump, Boolean(jumpBackwards));\n    }\n\n    void this.ensureContentLoaded();\n  }\n\n  private resetCurrentSearchResultIndex(): void {\n    if (!this.searchResults.length) {\n      return;\n    }\n    this.currentSearchResultIndex = -1;\n    if (this.searchableView) {\n      this.searchableView.updateCurrentMatchIndex(this.currentSearchResultIndex);\n    }\n    const editor = this.textEditor;\n    const currentActiveSearch = editor.state.field(activeSearchState);\n    if (currentActiveSearch?.currentRange) {\n      editor.dispatch({effects: setActiveSearch.of(new ActiveSearch(currentActiveSearch.regexp, null))});\n    }\n  }\n\n  private resetSearch(): void {\n    this.searchConfig = null;\n    this.delayedFindSearchMatches = null;\n    this.currentSearchResultIndex = -1;\n    this.searchResults = [];\n    this.searchRegex = null;\n  }\n\n  onSearchCanceled(): void {\n    const range = this.currentSearchResultIndex !== -1 ? this.searchResults[this.currentSearchResultIndex] : null;\n    this.resetSearch();\n    if (!this.loaded) {\n      return;\n    }\n    const editor = this.textEditor;\n    editor.dispatch({\n      effects: setActiveSearch.of(null),\n      selection: range ? {anchor: range.from, head: range.to} : undefined,\n      scrollIntoView: true,\n      userEvent: 'select.search.cancel',\n    });\n  }\n\n  jumpToLastSearchResult(): void {\n    this.jumpToSearchResult(this.searchResults.length - 1);\n  }\n\n  private searchResultIndexForCurrentSelection(): number {\n    return Platform.ArrayUtilities.lowerBound(\n        this.searchResults, this.textEditor.state.selection.main, (a, b) => a.to - b.to);\n  }\n\n  jumpToNextSearchResult(): void {\n    const currentIndex = this.searchResultIndexForCurrentSelection();\n    const nextIndex = this.currentSearchResultIndex === -1 ? currentIndex : currentIndex + 1;\n    this.jumpToSearchResult(nextIndex);\n  }\n\n  jumpToPreviousSearchResult(): void {\n    const currentIndex = this.searchResultIndexForCurrentSelection();\n    this.jumpToSearchResult(currentIndex - 1);\n  }\n\n  supportsCaseSensitiveSearch(): boolean {\n    return true;\n  }\n\n  supportsWholeWordSearch(): boolean {\n    return true;\n  }\n\n  supportsRegexSearch(): boolean {\n    return true;\n  }\n\n  jumpToSearchResult(index: number): void {\n    if (!this.loaded || !this.searchResults.length || !this.searchRegex) {\n      return;\n    }\n    this.currentSearchResultIndex = (index + this.searchResults.length) % this.searchResults.length;\n    if (this.searchableView) {\n      this.searchableView.updateCurrentMatchIndex(this.currentSearchResultIndex);\n    }\n    const editor = this.textEditor;\n    const range = this.searchResults[this.currentSearchResultIndex];\n    editor.dispatch({\n      effects: setActiveSearch.of(new ActiveSearch(this.searchRegex, range)),\n      selection: {anchor: range.from, head: range.to},\n      scrollIntoView: true,\n      userEvent: 'select.search',\n    });\n  }\n\n  replaceSelectionWith(_searchConfig: UI.SearchableView.SearchConfig, replacement: string): void {\n    const range = this.searchResults[this.currentSearchResultIndex];\n    if (!range) {\n      return;\n    }\n\n    const insert = this.searchRegex?.fromQuery ? range.insertPlaceholders(replacement) : replacement;\n    const editor = this.textEditor;\n    const changes = editor.state.changes({from: range.from, to: range.to, insert});\n    editor.dispatch(\n        {changes, selection: {anchor: changes.mapPos(editor.state.selection.main.to, 1)}, userEvent: 'input.replace'});\n  }\n\n  replaceAllWith(searchConfig: UI.SearchableView.SearchConfig, replacement: string): void {\n    this.resetCurrentSearchResultIndex();\n\n    const regex = searchConfig.toSearchRegex(true);\n    const ranges = this.collectRegexMatches(regex);\n    if (!ranges.length) {\n      return;\n    }\n\n    const isRegExp = regex.fromQuery;\n    const changes = ranges.map(\n        match =>\n            ({from: match.from, to: match.to, insert: isRegExp ? match.insertPlaceholders(replacement) : replacement}));\n\n    this.textEditor.dispatch({changes, scrollIntoView: true, userEvent: 'input.replace.all'});\n  }\n\n  private collectRegexMatches({regex}: UI.SearchableView.SearchRegexResult): SearchMatch[] {\n    const ranges = [];\n    let pos = 0;\n    for (const line of this.textEditor.state.doc.iterLines()) {\n      regex.lastIndex = 0;\n      for (;;) {\n        const match = regex.exec(line);\n        if (!match) {\n          break;\n        }\n        if (match[0].length) {\n          const from = pos + match.index;\n          ranges.push(new SearchMatch(from, from + match[0].length, match));\n        } else {\n          regex.lastIndex = match.index + 1;\n        }\n      }\n      pos += line.length + 1;\n    }\n    return ranges;\n  }\n\n  canEditSource(): boolean {\n    return this.editable;\n  }\n\n  private updateSourcePosition(): void {\n    const {textEditor} = this, {state} = textEditor, {selection} = state;\n    if (this.displayedSelection?.eq(selection)) {\n      return;\n    }\n    this.displayedSelection = selection;\n\n    if (selection.ranges.length > 1) {\n      this.sourcePosition.setText(i18nString(UIStrings.dSelectionRegions, {PH1: selection.ranges.length}));\n      return;\n    }\n    const {main} = state.selection;\n    if (main.empty) {\n      const {lineNumber, columnNumber} = textEditor.toLineColumn(main.head);\n      const location = this.prettyToRawLocation(lineNumber, columnNumber);\n      if (this.wasmDisassemblyInternal) {\n        const disassembly = this.wasmDisassemblyInternal;\n        const lastBytecodeOffset = disassembly.lineNumberToBytecodeOffset(disassembly.lineNumbers - 1);\n        const bytecodeOffsetDigits = lastBytecodeOffset.toString(16).length;\n        const bytecodeOffset = disassembly.lineNumberToBytecodeOffset(location[0]);\n        this.sourcePosition.setText(i18nString(\n            UIStrings.bytecodePositionXs, {PH1: bytecodeOffset.toString(16).padStart(bytecodeOffsetDigits, '0')}));\n      } else {\n        this.sourcePosition.setText(i18nString(UIStrings.lineSColumnS, {PH1: location[0] + 1, PH2: location[1] + 1}));\n      }\n    } else {\n      const startLine = state.doc.lineAt(main.from), endLine = state.doc.lineAt(main.to);\n      if (startLine.number === endLine.number) {\n        this.sourcePosition.setText(i18nString(UIStrings.dCharactersSelected, {PH1: main.to - main.from}));\n      } else {\n        this.sourcePosition.setText(i18nString(\n            UIStrings.dLinesDCharactersSelected,\n            {PH1: endLine.number - startLine.number + 1, PH2: main.to - main.from}));\n      }\n    }\n  }\n\n  onContextMenu(event: MouseEvent): boolean {\n    event.consume(true);  // Consume event now to prevent document from handling the async menu\n    const contextMenu = new UI.ContextMenu.ContextMenu(event);\n    const {state} = this.textEditor;\n    const pos = state.selection.main.from, line = state.doc.lineAt(pos);\n    this.populateTextAreaContextMenu(contextMenu, line.number - 1, pos - line.from);\n    contextMenu.appendApplicableItems(this);\n    void contextMenu.show();\n    return true;\n  }\n\n  protected populateTextAreaContextMenu(_menu: UI.ContextMenu.ContextMenu, _lineNumber: number, _columnNumber: number):\n      void {\n  }\n\n  onLineGutterContextMenu(position: number, event: MouseEvent): boolean {\n    event.consume(true);  // Consume event now to prevent document from handling the async menu\n    const contextMenu = new UI.ContextMenu.ContextMenu(event);\n    const lineNumber = this.textEditor.state.doc.lineAt(position).number - 1;\n    this.populateLineGutterContextMenu(contextMenu, lineNumber);\n    contextMenu.appendApplicableItems(this);\n    void contextMenu.show();\n    return true;\n  }\n\n  protected populateLineGutterContextMenu(_menu: UI.ContextMenu.ContextMenu, _lineNumber: number): void {\n  }\n\n  override focus(): void {\n    this.textEditor.focus();\n  }\n}\n\nclass SearchMatch {\n  constructor(readonly from: number, readonly to: number, readonly match: RegExpMatchArray) {\n  }\n\n  insertPlaceholders(replacement: string): string {\n    return replacement.replace(/\\$(\\$|&|\\d+|<[^>]+>)/g, (_, selector) => {\n      if (selector === '$') {\n        return '$';\n      }\n      if (selector === '&') {\n        return this.match[0];\n      }\n      if (selector[0] === '<') {\n        return (this.match.groups?.[selector.slice(1, selector.length - 1)]) || '';\n      }\n      return this.match[Number.parseInt(selector, 10)] || '';\n    });\n  }\n}\n\nexport interface Transformer {\n  editorLocationToUILocation(lineNumber: number, columnNumber: number): {\n    lineNumber: number,\n    columnNumber: number,\n  };\n  editorLocationToUILocation(lineNumber: number): {\n    lineNumber: number,\n    columnNumber: number|undefined,\n  };\n\n  uiLocationToEditorLocation(lineNumber: number, columnNumber?: number): {\n    lineNumber: number,\n    columnNumber: number,\n  };\n}\n\nexport const enum DecoratorType {\n  PERFORMANCE = 'performance',\n  MEMORY = 'memory',\n  COVERAGE = 'coverage',\n}\n\nconst config = {\n  editable: new CodeMirror.Compartment(),\n  language: new CodeMirror.Compartment(),\n  lineNumbers: new CodeMirror.Compartment(),\n};\n\nclass ActiveSearch {\n  constructor(\n      readonly regexp: UI.SearchableView.SearchRegexResult, readonly currentRange: {from: number, to: number}|null) {\n  }\n\n  map(change: CodeMirror.ChangeDesc): ActiveSearch {\n    return change.empty || !this.currentRange ?\n        this :\n        new ActiveSearch(\n            this.regexp, {from: change.mapPos(this.currentRange.from), to: change.mapPos(this.currentRange.to)});\n  }\n\n  static eq(a: ActiveSearch|null, b: ActiveSearch|null): boolean {\n    return Boolean(\n        a === b ||\n        a && b && a.currentRange?.from === b.currentRange?.from && a.currentRange?.to === b.currentRange?.to &&\n            a.regexp.regex.source === b.regexp.regex.source && a.regexp.regex.flags === b.regexp.regex.flags);\n  }\n}\n\nconst setActiveSearch =\n    CodeMirror.StateEffect.define<ActiveSearch|null>({map: (value, mapping) => value?.map(mapping)});\n\nconst activeSearchState = CodeMirror.StateField.define<ActiveSearch|null>({\n  create(): null {\n    return null;\n  },\n  update(state, tr): ActiveSearch |\n      null {\n        return tr.effects.reduce(\n            (state, effect) => effect.is(setActiveSearch) ? effect.value : state, state?.map(tr.changes) ?? null);\n      },\n});\n\nconst searchMatchDeco = CodeMirror.Decoration.mark({class: 'cm-searchMatch'});\nconst currentSearchMatchDeco = CodeMirror.Decoration.mark({class: 'cm-searchMatch cm-searchMatch-selected'});\n\nconst searchHighlighter = CodeMirror.ViewPlugin.fromClass(class {\n  decorations: CodeMirror.DecorationSet;\n\n  constructor(view: CodeMirror.EditorView) {\n    this.decorations = this.computeDecorations(view);\n  }\n\n  update(update: CodeMirror.ViewUpdate): void {\n    const active = update.state.field(activeSearchState);\n    if (!ActiveSearch.eq(active, update.startState.field(activeSearchState)) ||\n        (active && (update.viewportChanged || update.docChanged))) {\n      this.decorations = this.computeDecorations(update.view);\n    }\n  }\n\n  private computeDecorations(view: CodeMirror.EditorView): CodeMirror.DecorationSet {\n    const active = view.state.field(activeSearchState);\n    if (!active) {\n      return CodeMirror.Decoration.none;\n    }\n\n    const builder = new CodeMirror.RangeSetBuilder<CodeMirror.Decoration>();\n    const {doc} = view.state;\n    for (const {from, to} of view.visibleRanges) {\n      let pos = from;\n      for (const part of doc.iterRange(from, to)) {\n        if (part !== '\\n') {\n          active.regexp.regex.lastIndex = 0;\n          for (;;) {\n            const match = active.regexp.regex.exec(part);\n            if (!match) {\n              break;\n            }\n            if (match[0].length) {\n              const start = pos + match.index, end = start + match[0].length;\n              const current =\n                  active.currentRange && active.currentRange.from === start && active.currentRange.to === end;\n              builder.add(start, end, current ? currentSearchMatchDeco : searchMatchDeco);\n            } else {\n              active.regexp.regex.lastIndex = match.index + 1;\n            }\n          }\n        }\n        pos += part.length;\n      }\n    }\n    return builder.finish();\n  }\n}, {decorations: value => value.decorations});\n\nconst nonBreakableLineMark = new (class extends CodeMirror.GutterMarker {\n  override elementClass = 'cm-nonBreakableLine';\n})();\n\n/** Effect to add lines (by position) to the set of non-breakable lines. **/\nexport const addNonBreakableLines = CodeMirror.StateEffect.define<readonly number[]>();\n\nconst nonBreakableLines = CodeMirror.StateField.define<CodeMirror.RangeSet<CodeMirror.GutterMarker>>({\n  create(): CodeMirror.RangeSet<CodeMirror.GutterMarker> {\n    return CodeMirror.RangeSet.empty;\n  },\n  update(deco, tr): CodeMirror.RangeSet<CodeMirror.GutterMarker> {\n    return tr.effects.reduce((deco, effect) => {\n      return !effect.is(addNonBreakableLines) ?\n          deco :\n          deco.update({add: effect.value.map(pos => nonBreakableLineMark.range(pos))});\n    }, deco.map(tr.changes));\n  },\n  provide: field => CodeMirror.lineNumberMarkers.from(field),\n});\n\nexport function isBreakableLine(state: CodeMirror.EditorState, line: CodeMirror.Line): boolean {\n  const nonBreakable = state.field(nonBreakableLines);\n  if (!nonBreakable.size) {\n    return true;\n  }\n  let found = false;\n  nonBreakable.between(line.from, line.from, () => {\n    found = true;\n  });\n  return !found;\n}\n\nfunction markNonBreakableLines(disassembly: TextUtils.WasmDisassembly.WasmDisassembly): CodeMirror.Extension {\n  // Mark non-breakable lines in the Wasm disassembly after setting\n  // up the content for the text editor (which creates the gutter).\n  return nonBreakableLines.init(state => {\n    const marks = [];\n    for (const lineNumber of disassembly.nonBreakableLineNumbers()) {\n      if (lineNumber < state.doc.lines) {\n        marks.push(nonBreakableLineMark.range(state.doc.line(lineNumber + 1).from));\n      }\n    }\n    return CodeMirror.RangeSet.of(marks);\n  });\n}\n\nconst sourceFrameTheme = CodeMirror.EditorView.theme({\n  '&.cm-editor': {height: '100%'},\n  '.cm-scroller': {overflow: 'auto'},\n  '.cm-lineNumbers .cm-gutterElement.cm-nonBreakableLine': {color: 'var(--sys-color-state-disabled) !important'},\n  '.cm-searchMatch': {\n    border: '1px solid var(--sys-color-outline)',\n    borderRadius: '3px',\n    margin: '0 -1px',\n    '&.cm-searchMatch-selected': {\n      borderRadius: '1px',\n      backgroundColor: 'var(--sys-color-yellow-container)',\n      borderColor: 'var(--sys-color-yellow-outline)',\n      '&, & *': {\n        color: 'var(--sys-color-on-surface) !important',\n      },\n    },\n  },\n  ':host-context(.pretty-printed) & .cm-lineNumbers .cm-gutterElement': {\n    color: 'var(--sys-color-primary)',\n  },\n});\n\n/**\n * Reveal position can either be a single point or a range.\n *\n * A single point can either be specified as a line/column combo or as an absolute\n * editor offset.\n */\nexport type RevealPosition = number|{lineNumber: number, columnNumber?: number}|\n    {from: {lineNumber: number, columnNumber: number}, to: {lineNumber: number, columnNumber: number}};\n\n/** This is usually an Infobar but is also used for AiCodeCompletionSummaryToolbar **/\nexport interface SourceFrameInfobar {\n  element: HTMLElement;\n  order?: number;\n}\n\n/** Infobar panel state, used to show additional panels below the editor. **/\nexport const addSourceFrameInfobar = CodeMirror.StateEffect.define<SourceFrameInfobar>();\nexport const removeSourceFrameInfobar = CodeMirror.StateEffect.define<SourceFrameInfobar>();\n\nconst sourceFrameInfobarState = CodeMirror.StateField.define<SourceFrameInfobar[]>({\n  create(): SourceFrameInfobar[] {\n    return [];\n  },\n  update(current, tr): SourceFrameInfobar[] {\n    for (const effect of tr.effects) {\n      if (effect.is(addSourceFrameInfobar)) {\n        current = current.concat(effect.value);\n      } else if (effect.is(removeSourceFrameInfobar)) {\n        current = current.filter(b => b.element !== effect.value.element);\n      }\n    }\n    return current;\n  },\n  provide: (field): CodeMirror.Extension => CodeMirror.showPanel.computeN(\n      [field],\n      (state): Array<() => CodeMirror.Panel> =>\n          state.field(field)\n              .sort((a, b) => (a.order ?? 0) - (b.order ?? 0))\n              .map((bar): (() => CodeMirror.Panel) => (): CodeMirror.Panel => ({dom: bar.element}))),\n});\n"]}