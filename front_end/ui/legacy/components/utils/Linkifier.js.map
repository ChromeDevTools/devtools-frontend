{"version":3,"file":"Linkifier.js","sourceRoot":"","sources":["../../../../../../../../front_end/ui/legacy/components/utils/Linkifier.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright 2012 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\n/* eslint-disable @devtools/no-imperative-dom-api, @devtools/no-lit-render-outside-of-view */\n\nimport * as Common from '../../../../core/common/common.js';\nimport * as Host from '../../../../core/host/host.js';\nimport * as i18n from '../../../../core/i18n/i18n.js';\nimport * as Platform from '../../../../core/platform/platform.js';\nimport * as SDK from '../../../../core/sdk/sdk.js';\nimport type * as Protocol from '../../../../generated/protocol.js';\nimport * as Bindings from '../../../../models/bindings/bindings.js';\nimport * as Breakpoints from '../../../../models/breakpoints/breakpoints.js';\nimport type * as StackTrace from '../../../../models/stack_trace/stack_trace.js';\nimport * as TextUtils from '../../../../models/text_utils/text_utils.js';\nimport type * as Trace from '../../../../models/trace/trace.js';\nimport * as Workspace from '../../../../models/workspace/workspace.js';\nimport * as UIHelpers from '../../../helpers/helpers.js';\nimport {html, type LitTemplate, render} from '../../../lit/lit.js';\nimport * as VisualLogging from '../../../visual_logging/visual_logging.js';\nimport * as UI from '../../legacy.js';\n\nconst UIStrings = {\n  /**\n   * @description Text in Linkifier\n   */\n  unknown: '(unknown)',\n  /**\n   * @description Text short for automatic\n   */\n  auto: 'auto',\n  /**\n   * @description Text in Linkifier\n   * @example {Sources panel} PH1\n   */\n  revealInS: 'Reveal in {PH1}',\n  /**\n   * @description Text for revealing an item in its destination\n   */\n  reveal: 'Reveal',\n  /**\n   * @description A context menu item in the Linkifier\n   * @example {Extension} PH1\n   */\n  openUsingS: 'Open using {PH1}',\n  /**\n   * @description The name of a setting which controls how links are handled in the UI. 'Handling'\n   * refers to the ability of extensions to DevTools to be able to intercept link clicks so that they\n   * can react to them.\n   */\n  linkHandling: 'Link handling:',\n} as const;\nconst str_ = i18n.i18n.registerUIStrings('ui/legacy/components/utils/Linkifier.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\nconst instances = new Set<Linkifier>();\n\nlet decorator: LinkDecorator|null = null;\n\nconst anchorsByUISourceCode = new WeakMap<Workspace.UISourceCode.UISourceCode, Set<Element>>();\n\nconst infoByAnchor = new WeakMap<Node, LinkInfo>();\n\nconst textByAnchor = new WeakMap<Node, string>();\n\n// Maps a DevTools Extension origin to a particular LinkHandler.\nconst linkHandlers = new Map<string, LinkHandlerRegistration>();\n\nlet linkHandlerSettingInstance: Common.Settings.Setting<string>;\n\nexport class Linkifier extends Common.ObjectWrapper.ObjectWrapper<EventTypes> implements SDK.TargetManager.Observer {\n  private readonly maxLength: number;\n  private readonly anchorsByTarget = new Map<SDK.Target.Target, Element[]>();\n  private readonly locationPoolByTarget = new Map<SDK.Target.Target, Bindings.LiveLocation.LiveLocationPool>();\n  private useLinkDecorator: boolean;\n  readonly #anchorUpdaters: WeakMap<Element, (this: Linkifier, anchor: HTMLElement) => void>;\n\n  constructor(maxLengthForDisplayedURLs?: number, useLinkDecorator?: boolean) {\n    super();\n    this.maxLength = maxLengthForDisplayedURLs || UI.UIUtils.MaxLengthForDisplayedURLs;\n    this.useLinkDecorator = Boolean(useLinkDecorator);\n    this.#anchorUpdaters = new WeakMap();\n    instances.add(this);\n    SDK.TargetManager.TargetManager.instance().observeTargets(this);\n    Workspace.Workspace.WorkspaceImpl.instance().addEventListener(\n        Workspace.Workspace.Events.WorkingCopyChanged, this.#onWorkingCopyChangedOrCommitted, this);\n    Workspace.Workspace.WorkspaceImpl.instance().addEventListener(\n        Workspace.Workspace.Events.WorkingCopyCommitted, this.#onWorkingCopyChangedOrCommitted, this);\n  }\n\n  #onWorkingCopyChangedOrCommitted({\n    data: {uiSourceCode}\n  }: Common.EventTarget.EventTargetEvent<{uiSourceCode: Workspace.UISourceCode.UISourceCode}>): void {\n    const anchors = anchorsByUISourceCode.get(uiSourceCode);\n    if (!anchors) {\n      return;\n    }\n    for (const anchor of anchors) {\n      const updater = this.#anchorUpdaters.get(anchor);\n      if (!updater) {\n        continue;\n      }\n      updater.call(this, anchor as HTMLElement);\n    }\n  }\n\n  static setLinkDecorator(linkDecorator: LinkDecorator): void {\n    console.assert(!decorator, 'Cannot re-register link decorator.');\n    decorator = linkDecorator;\n    linkDecorator.addEventListener(LinkDecorator.Events.LINK_ICON_CHANGED, onLinkIconChanged);\n    for (const linkifier of instances) {\n      linkifier.updateAllAnchorDecorations();\n    }\n\n    function onLinkIconChanged(event: Common.EventTarget.EventTargetEvent<Workspace.UISourceCode.UISourceCode>): void {\n      const uiSourceCode = event.data;\n      const links = anchorsByUISourceCode.get(uiSourceCode) || [];\n      for (const link of links) {\n        Linkifier.updateLinkDecorations(link);\n      }\n    }\n  }\n\n  private updateAllAnchorDecorations(): void {\n    for (const anchors of this.anchorsByTarget.values()) {\n      for (const anchor of anchors) {\n        Linkifier.updateLinkDecorations(anchor);\n      }\n    }\n  }\n\n  private static bindUILocation(anchor: Element, uiLocation: Workspace.UISourceCode.UILocation): void {\n    const linkInfo = Linkifier.linkInfo(anchor);\n    if (!linkInfo) {\n      return;\n    }\n    linkInfo.uiLocation = uiLocation;\n    if (!uiLocation) {\n      return;\n    }\n    const uiSourceCode = uiLocation.uiSourceCode;\n    let sourceCodeAnchors = anchorsByUISourceCode.get(uiSourceCode);\n    if (!sourceCodeAnchors) {\n      sourceCodeAnchors = new Set();\n      anchorsByUISourceCode.set(uiSourceCode, sourceCodeAnchors);\n    }\n    sourceCodeAnchors.add(anchor);\n  }\n\n  static bindUILocationForTest(anchor: Element, uiLocation: Workspace.UISourceCode.UILocation): void {\n    Linkifier.bindUILocation(anchor, uiLocation);\n  }\n\n  private static unbindUILocation(anchor: Element): void {\n    const info = Linkifier.linkInfo(anchor);\n    if (!info?.uiLocation) {\n      return;\n    }\n\n    const uiSourceCode = info.uiLocation.uiSourceCode;\n    info.uiLocation = null;\n    const sourceCodeAnchors = anchorsByUISourceCode.get(uiSourceCode);\n    if (sourceCodeAnchors) {\n      sourceCodeAnchors.delete(anchor);\n    }\n  }\n\n  /**\n   * When we link to a breakpoint condition, we need to stash the BreakpointLocation as the revealable\n   * in the LinkInfo.\n   */\n  private static bindBreakpoint(anchor: Element, uiLocation: Workspace.UISourceCode.UILocation): void {\n    const info = Linkifier.linkInfo(anchor);\n    if (!info) {\n      return;\n    }\n\n    const breakpoint = Breakpoints.BreakpointManager.BreakpointManager.instance().findBreakpoint(uiLocation);\n    if (breakpoint) {\n      info.revealable = breakpoint;\n    }\n  }\n\n  /**\n   * When we link to a breakpoint condition, we store the BreakpointLocation in the revealable.\n   * Clear it when the LiveLocation updates.\n   */\n  private static unbindBreakpoint(anchor: Element): void {\n    const info = Linkifier.linkInfo(anchor);\n    if (info?.revealable) {\n      info.revealable = null;\n    }\n  }\n\n  targetAdded(target: SDK.Target.Target): void {\n    this.anchorsByTarget.set(target, []);\n    this.locationPoolByTarget.set(target, new Bindings.LiveLocation.LiveLocationPool());\n  }\n\n  targetRemoved(target: SDK.Target.Target): void {\n    const locationPool = this.locationPoolByTarget.get(target);\n    this.locationPoolByTarget.delete(target);\n    if (!locationPool) {\n      return;\n    }\n    locationPool.disposeAll();\n    const anchors = (this.anchorsByTarget.get(target) as HTMLElement[] | null);\n    if (!anchors) {\n      return;\n    }\n    this.anchorsByTarget.delete(target);\n    for (const anchor of anchors) {\n      const info = Linkifier.linkInfo(anchor);\n      if (!info) {\n        continue;\n      }\n      info.liveLocation = null;\n      Linkifier.unbindUILocation(anchor);\n      const fallback = info.fallback;\n      if (fallback) {\n        anchor.replaceWith(fallback);\n      }\n    }\n  }\n\n  maybeLinkifyScriptLocation(\n      target: SDK.Target.Target|null, scriptId: Protocol.Runtime.ScriptId|null,\n      sourceURL: Platform.DevToolsPath.UrlString, lineNumber: number|undefined, options?: LinkifyOptions): HTMLElement\n      |null {\n    let fallbackAnchor: HTMLElement|null = null;\n    const linkifyURLOptions: LinkifyURLOptions = {\n      lineNumber,\n      maxLength: options?.maxLength ?? this.maxLength,\n      columnNumber: options?.columnNumber,\n      showColumnNumber: Boolean(options?.showColumnNumber),\n      className: options?.className,\n      tabStop: options?.tabStop,\n      inlineFrameIndex: options?.inlineFrameIndex ?? 0,\n      userMetric: options?.userMetric,\n      jslogContext: options?.jslogContext || 'script-location',\n      omitOrigin: options?.omitOrigin,\n    };\n    const {columnNumber, className = ''} = linkifyURLOptions;\n    if (sourceURL) {\n      fallbackAnchor = Linkifier.linkifyURL(sourceURL, linkifyURLOptions);\n    }\n    if (!target || target.isDisposed()) {\n      return fallbackAnchor;\n    }\n    const debuggerModel = target.model(SDK.DebuggerModel.DebuggerModel);\n    if (!debuggerModel) {\n      return fallbackAnchor;\n    }\n\n    // Prefer createRawLocationByScriptId() here, since it will always produce a correct\n    // link, since the script ID is unique. Only fall back to createRawLocationByURL()\n    // when all we have is an URL, which is not guaranteed to be unique.\n    const rawLocation = scriptId ? debuggerModel.createRawLocationByScriptId(\n                                       scriptId, lineNumber || 0, columnNumber, linkifyURLOptions.inlineFrameIndex) :\n                                   debuggerModel.createRawLocationByURL(\n                                       sourceURL, lineNumber || 0, columnNumber, linkifyURLOptions.inlineFrameIndex);\n    if (!rawLocation) {\n      return fallbackAnchor;\n    }\n\n    const createLinkOptions: CreateLinkOptions = {\n      tabStop: options?.tabStop,\n      jslogContext: 'script-location',\n    };\n    const {link, linkInfo} = Linkifier.createLink(\n        fallbackAnchor?.textContent ? fallbackAnchor.textContent : '', className, createLinkOptions);\n    linkInfo.enableDecorator = this.useLinkDecorator;\n    linkInfo.fallback = fallbackAnchor;\n    linkInfo.userMetric = options?.userMetric;\n\n    const pool = this.locationPoolByTarget.get(rawLocation.debuggerModel.target());\n    if (!pool) {\n      return fallbackAnchor;\n    }\n\n    const linkDisplayOptions: LinkDisplayOptions = {\n      showColumnNumber: linkifyURLOptions.showColumnNumber ?? false,\n      revealBreakpoint: options?.revealBreakpoint,\n    };\n\n    const updateDelegate = async(liveLocation: Bindings.LiveLocation.LiveLocation): Promise<void> => {\n      await this.updateAnchor(link, linkDisplayOptions, liveLocation);\n      this.dispatchEventToListeners(Events.LIVE_LOCATION_UPDATED, liveLocation);\n    };\n    void Bindings.DebuggerWorkspaceBinding.DebuggerWorkspaceBinding.instance()\n        .createLiveLocation(rawLocation, updateDelegate.bind(this), pool)\n        .then(liveLocation => {\n          if (liveLocation) {\n            linkInfo.liveLocation = liveLocation;\n          }\n        });\n\n    const anchors = (this.anchorsByTarget.get(rawLocation.debuggerModel.target()) as Element[]);\n    anchors.push(link);\n    return link;\n  }\n\n  linkifyScriptLocation(\n      target: SDK.Target.Target|null, scriptId: Protocol.Runtime.ScriptId|null,\n      sourceURL: Platform.DevToolsPath.UrlString, lineNumber: number|undefined, options?: LinkifyOptions): HTMLElement {\n    const scriptLink = this.maybeLinkifyScriptLocation(target, scriptId, sourceURL, lineNumber, options);\n    const linkifyURLOptions: LinkifyURLOptions = {\n      lineNumber,\n      maxLength: this.maxLength,\n      className: options?.className,\n      columnNumber: options?.columnNumber,\n      showColumnNumber: Boolean(options?.showColumnNumber),\n      inlineFrameIndex: options?.inlineFrameIndex ?? 0,\n      tabStop: options?.tabStop,\n      userMetric: options?.userMetric,\n      jslogContext: options?.jslogContext || 'script-source-url',\n    };\n\n    return scriptLink || Linkifier.linkifyURL(sourceURL, linkifyURLOptions);\n  }\n\n  linkifyRawLocation(\n      rawLocation: SDK.DebuggerModel.Location, fallbackUrl: Platform.DevToolsPath.UrlString, className?: string,\n      options?: LinkifyOptions): HTMLElement {\n    return this.linkifyScriptLocation(\n        rawLocation.debuggerModel.target(), rawLocation.scriptId, fallbackUrl, rawLocation.lineNumber, {\n          columnNumber: rawLocation.columnNumber,\n          className,\n          inlineFrameIndex: rawLocation.inlineFrameIndex,\n          tabStop: options?.tabStop,\n        });\n  }\n\n  maybeLinkifyConsoleCallFrame(\n      target: SDK.Target.Target|null, callFrame: Protocol.Runtime.CallFrame|Trace.Types.Events.CallFrame,\n      options?: LinkifyOptions): HTMLElement|null {\n    const linkifyOptions: LinkifyOptions = {\n      ...options,\n      columnNumber: callFrame.columnNumber,\n      inlineFrameIndex: options?.inlineFrameIndex ?? 0,\n    };\n    return this.maybeLinkifyScriptLocation(\n        target, String(callFrame.scriptId) as Protocol.Runtime.ScriptId,\n        callFrame.url as Platform.DevToolsPath.UrlString, callFrame.lineNumber, linkifyOptions);\n  }\n\n  maybeLinkifyStackTraceFrame(\n      target: SDK.Target.Target|null, frame: StackTrace.StackTrace.Frame, options?: LinkifyOptions): HTMLElement|null {\n    let fallbackAnchor: HTMLElement|null = null;\n    const linkifyURLOptions: LinkifyURLOptions = {\n      ...options,\n      lineNumber: frame.line,\n      maxLength: this.maxLength,\n      columnNumber: frame.column,\n      showColumnNumber: Boolean(options?.showColumnNumber),\n      className: options?.className,\n      tabStop: options?.tabStop,\n      inlineFrameIndex: options?.inlineFrameIndex ?? 0,\n      userMetric: options?.userMetric,\n      jslogContext: options?.jslogContext || 'script-location',\n      omitOrigin: options?.omitOrigin,\n    };\n    const {className = ''} = linkifyURLOptions;\n    if (frame.url) {\n      fallbackAnchor = Linkifier.linkifyURL(frame.url as Platform.DevToolsPath.UrlString, linkifyURLOptions);\n    }\n    if (!target || target.isDisposed()) {\n      return fallbackAnchor;\n    }\n\n    const createLinkOptions: CreateLinkOptions = {\n      tabStop: options?.tabStop,\n      jslogContext: 'script-location',\n    };\n    const {link, linkInfo} = Linkifier.createLink(\n        fallbackAnchor?.textContent ? fallbackAnchor.textContent : '', className, createLinkOptions);\n    linkInfo.enableDecorator = this.useLinkDecorator;\n    linkInfo.fallback = fallbackAnchor;\n    linkInfo.userMetric = options?.userMetric;\n\n    const linkDisplayOptions: LinkDisplayOptions = {\n      showColumnNumber: linkifyURLOptions.showColumnNumber ?? false,\n      revealBreakpoint: options?.revealBreakpoint,\n    };\n\n    const uiLocation = frame.uiSourceCode?.uiLocation(frame.line, frame.column) ?? null;\n    this.updateAnchorFromUILocation(link, linkDisplayOptions, uiLocation);\n\n    const anchors = (this.anchorsByTarget.get(target) as Element[]);\n    anchors.push(link);\n    return link;\n  }\n\n  linkifyStackTraceTopFrame(target: SDK.Target.Target|null, stackTrace: Protocol.Runtime.StackTrace): HTMLElement {\n    console.assert(stackTrace.callFrames.length > 0);\n\n    const {url, lineNumber, columnNumber} = stackTrace.callFrames[0];\n    const fallbackAnchor = Linkifier.linkifyURL(url as Platform.DevToolsPath.UrlString, {\n      lineNumber,\n      columnNumber,\n      showColumnNumber: false,\n      inlineFrameIndex: 0,\n      maxLength: this.maxLength,\n      preventClick: true,\n      jslogContext: 'script-source-url',\n    });\n\n    // HAR imported network logs have no associated NetworkManager.\n    if (!target) {\n      return fallbackAnchor;\n    }\n\n    // The contract is that disposed targets don't have a LiveLocationPool\n    // associated, whereas all active targets have one such pool. This ensures\n    // that the fallbackAnchor is only ever used when the target was disposed.\n    const pool = this.locationPoolByTarget.get(target);\n    if (!pool || target.isDisposed()) {\n      return fallbackAnchor;\n    }\n\n    // All targets that can report stack traces also have a debugger model.\n    const debuggerModel = target.model(SDK.DebuggerModel.DebuggerModel) as SDK.DebuggerModel.DebuggerModel;\n\n    const {link, linkInfo} = Linkifier.createLink('', '', {jslogContext: 'script-location'});\n    linkInfo.enableDecorator = this.useLinkDecorator;\n    linkInfo.fallback = fallbackAnchor;\n\n    const linkDisplayOptions = {showColumnNumber: false};\n\n    const updateDelegate = async(liveLocation: Bindings.LiveLocation.LiveLocation): Promise<void> => {\n      await this.updateAnchor(link, linkDisplayOptions, liveLocation);\n      this.dispatchEventToListeners(Events.LIVE_LOCATION_UPDATED, liveLocation);\n    };\n    void Bindings.DebuggerWorkspaceBinding.DebuggerWorkspaceBinding.instance()\n        .createStackTraceTopFrameLiveLocation(\n            debuggerModel.createRawLocationsByStackTrace(stackTrace), updateDelegate.bind(this), pool)\n        .then(liveLocation => {\n          linkInfo.liveLocation = liveLocation;\n        });\n\n    const anchors = (this.anchorsByTarget.get(target) as Element[]);\n    anchors.push(link);\n    return link;\n  }\n\n  linkifyCSSLocation(rawLocation: SDK.CSSModel.CSSLocation, classes?: string): Element {\n    const createLinkOptions: CreateLinkOptions = {\n      tabStop: true,\n      jslogContext: 'css-location',\n    };\n    const {link, linkInfo} = Linkifier.createLink('', classes || '', createLinkOptions);\n    linkInfo.enableDecorator = this.useLinkDecorator;\n\n    const pool = this.locationPoolByTarget.get(rawLocation.cssModel().target());\n    if (!pool) {\n      return link;\n    }\n\n    const linkDisplayOptions = {showColumnNumber: false};\n\n    const updateDelegate = async(liveLocation: Bindings.LiveLocation.LiveLocation): Promise<void> => {\n      await this.updateAnchor(link, linkDisplayOptions, liveLocation);\n      this.dispatchEventToListeners(Events.LIVE_LOCATION_UPDATED, liveLocation);\n    };\n    void Bindings.CSSWorkspaceBinding.CSSWorkspaceBinding.instance()\n        .createLiveLocation(rawLocation, updateDelegate.bind(this), pool)\n        .then(liveLocation => {\n          linkInfo.liveLocation = liveLocation;\n        });\n\n    const anchors = (this.anchorsByTarget.get(rawLocation.cssModel().target()) as Element[]);\n    anchors.push(link);\n    return link;\n  }\n\n  reset(): void {\n    // Create a copy of {keys} so {targetRemoved} can safely modify the map.\n    for (const target of [...this.anchorsByTarget.keys()]) {\n      this.targetRemoved(target);\n      this.targetAdded(target);\n    }\n    this.listeners?.clear();\n  }\n\n  dispose(): void {\n    Workspace.Workspace.WorkspaceImpl.instance().removeEventListener(\n        Workspace.Workspace.Events.WorkingCopyChanged, this.#onWorkingCopyChangedOrCommitted, this);\n    Workspace.Workspace.WorkspaceImpl.instance().removeEventListener(\n        Workspace.Workspace.Events.WorkingCopyCommitted, this.#onWorkingCopyChangedOrCommitted, this);\n    // Create a copy of {keys} so {targetRemoved} can safely modify the map.\n    for (const target of [...this.anchorsByTarget.keys()]) {\n      this.targetRemoved(target);\n    }\n    SDK.TargetManager.TargetManager.instance().unobserveTargets(this);\n    instances.delete(this);\n  }\n\n  private async updateAnchor(\n      anchor: HTMLElement, options: LinkDisplayOptions,\n      liveLocation: Bindings.LiveLocation.LiveLocation): Promise<void> {\n    Linkifier.unbindUILocation(anchor);\n    if (options.revealBreakpoint) {\n      Linkifier.unbindBreakpoint(anchor);\n    }\n    const uiLocation = await liveLocation.uiLocation();\n    if (!uiLocation) {\n      anchor.classList.add('invalid-link');\n      anchor.removeAttribute('role');\n      return;\n    }\n\n    this.#anchorUpdaters.set(anchor, function(this: Linkifier, anchor: HTMLElement) {\n      void this.updateAnchor(anchor, options, liveLocation);\n    });\n    this.updateAnchorFromUILocation(anchor, options, uiLocation);\n  }\n\n  private updateAnchorFromUILocation(\n      anchor: HTMLElement, options: LinkDisplayOptions, uiLocation: Workspace.UISourceCode.UILocation|null): void {\n    if (!uiLocation) {\n      anchor.classList.add('invalid-link');\n      anchor.removeAttribute('role');\n      return;\n    }\n\n    Linkifier.bindUILocation(anchor, uiLocation);\n    if (options.revealBreakpoint) {\n      Linkifier.bindBreakpoint(anchor, uiLocation);\n    }\n\n    const text = uiLocation.linkText(true /* skipTrim */, options.showColumnNumber);\n    Linkifier.setTrimmedText(anchor, text, this.maxLength);\n\n    let titleText: string = uiLocation.uiSourceCode.url();\n    if (uiLocation.uiSourceCode.mimeType() === 'application/wasm') {\n      // For WebAssembly locations, we follow the conventions described in\n      // github.com/WebAssembly/design/blob/master/Web.md#developer-facing-display-conventions\n      if (typeof uiLocation.columnNumber === 'number') {\n        titleText += `:0x${uiLocation.columnNumber.toString(16)}`;\n      }\n    } else {\n      titleText += ':' + (uiLocation.lineNumber + 1);\n      if (options.showColumnNumber && typeof uiLocation.columnNumber === 'number') {\n        titleText += ':' + (uiLocation.columnNumber + 1);\n      }\n    }\n    UI.Tooltip.Tooltip.install(anchor, titleText);\n    const isIgnoreListed = Boolean(uiLocation?.isIgnoreListed());\n    anchor.classList.toggle('ignore-list-link', isIgnoreListed);\n    Linkifier.updateLinkDecorations(anchor);\n  }\n\n  private static updateLinkDecorations(anchor: Element): void {\n    const info = Linkifier.linkInfo(anchor);\n    if (!info?.enableDecorator) {\n      return;\n    }\n    if (!decorator || !info.uiLocation) {\n      return;\n    }\n    const icon = decorator.linkIcon(info.uiLocation.uiSourceCode);\n    if (icon && anchor instanceof HTMLElement && anchor.firstElementChild instanceof HTMLElement) {\n      anchor.firstElementChild?.style.setProperty('margin-left', '2px');\n      render(icon, anchor, {renderBefore: anchor.firstElementChild});\n    }\n    info.icon = icon;\n  }\n\n  static linkifyURL(url: Platform.DevToolsPath.UrlString, options?: LinkifyURLOptions): HTMLElement {\n    options = options || {\n      showColumnNumber: false,\n      inlineFrameIndex: 0,\n    };\n\n    const text = options.text;\n    const className = options.className || '';\n    const lineNumber = options.lineNumber;\n    const columnNumber = options.columnNumber;\n    const showColumnNumber = options.showColumnNumber;\n    const preventClick = options.preventClick;\n    const maxLength = options.maxLength || UI.UIUtils.MaxLengthForDisplayedURLs;\n    const bypassURLTrimming = options.bypassURLTrimming;\n    const omitOrigin = options.omitOrigin;\n    if (!url || Common.ParsedURL.schemeIs(url, 'javascript:')) {\n      const element = document.createElement('span');\n      if (className) {\n        element.className = className;\n      }\n\n      element.textContent = text || url || i18nString(UIStrings.unknown);\n      return element;\n    }\n\n    let linkText = text || Bindings.ResourceUtils.displayNameForURL(url);\n\n    if (omitOrigin) {\n      const parsedUrl = URL.parse(url);\n      if (parsedUrl) {\n        linkText = url.replace(parsedUrl.origin, '');\n      }\n    }\n\n    if (typeof lineNumber === 'number' && !text) {\n      linkText += ':' + (lineNumber + 1);\n      if (showColumnNumber && typeof columnNumber === 'number') {\n        linkText += ':' + (columnNumber + 1);\n      }\n    }\n    const title = linkText !== url ? url : '';\n    const linkOptions = {\n      maxLength,\n      title,\n      href: url,\n      preventClick,\n      tabStop: options.tabStop,\n      bypassURLTrimming,\n      jslogContext: options.jslogContext || 'url',\n    };\n    const {link, linkInfo} = Linkifier.createLink(linkText, className, linkOptions);\n    if (lineNumber) {\n      linkInfo.lineNumber = lineNumber;\n    }\n    if (columnNumber) {\n      linkInfo.columnNumber = columnNumber;\n    }\n    linkInfo.userMetric = options?.userMetric;\n    return link;\n  }\n\n  static linkifyRevealable(\n      revealable: Object, text: string|HTMLElement, fallbackHref?: Platform.DevToolsPath.UrlString, title?: string,\n      className?: string, jslogContext?: string): HTMLElement {\n    const createLinkOptions: CreateLinkOptions = {\n      maxLength: UI.UIUtils.MaxLengthForDisplayedURLs,\n      href: (fallbackHref),\n      title,\n      jslogContext,\n    };\n    const {link, linkInfo} = Linkifier.createLink(text, className || '', createLinkOptions);\n    linkInfo.revealable = revealable;\n    return link;\n  }\n\n  private static createLink(text: string|HTMLElement, className: string, options: CreateLinkOptions = {}):\n      {link: HTMLElement, linkInfo: LinkInfo} {\n    const {maxLength, title, href, preventClick, tabStop, bypassURLTrimming, jslogContext} = options;\n    const link = document.createElement(options.preventClick ? 'span' : 'button');\n    if (className) {\n      link.className = className;\n    }\n    link.classList.add('devtools-link');\n    if (!options.preventClick) {\n      link.classList.add('text-button', 'link-style');\n    }\n    if (title) {\n      UI.Tooltip.Tooltip.install(link, title);\n    }\n    if (href) {\n      // @ts-expect-error\n      link.href = href;\n    }\n    link.setAttribute('jslog', `${VisualLogging.link(jslogContext).track({click: true})}`);\n\n    if (text instanceof HTMLElement) {\n      link.appendChild(text);\n    } else if (bypassURLTrimming) {\n      link.classList.add('devtools-link-styled-trim');\n      Linkifier.appendTextWithoutHashes(link, text);\n    } else {\n      Linkifier.setTrimmedText(link, text, maxLength);\n    }\n\n    const linkInfo = {\n      icon: null,\n      enableDecorator: false,\n      uiLocation: null,\n      liveLocation: null,\n      url: href || null,\n      lineNumber: null,\n      columnNumber: null,\n      inlineFrameIndex: 0,\n      revealable: null,\n      fallback: null,\n    };\n    infoByAnchor.set(link, linkInfo);\n    if (!preventClick) {\n      const handler = (event: MouseEvent|KeyboardEvent): void => {\n        if (event instanceof KeyboardEvent && event.key !== Platform.KeyboardUtilities.ENTER_KEY && event.key !== ' ') {\n          return;\n        }\n        if (Linkifier.handleClick(event)) {\n          event.consume(true);\n        }\n      };\n      link.onclick = handler;\n      link.onkeydown = handler;\n    } else {\n      link.classList.add('devtools-link-prevent-click');\n    }\n    UI.ARIAUtils.markAsLink(link);\n    link.tabIndex = tabStop ? 0 : -1;\n    return {link, linkInfo};\n  }\n\n  private static setTrimmedText(link: Element, text: string, maxLength?: number): void {\n    link.removeChildren();\n    if (maxLength && text.length > maxLength) {\n      const middleSplit = splitMiddle(text, maxLength);\n      Linkifier.appendTextWithoutHashes(link, middleSplit[0]);\n      Linkifier.appendHiddenText(link, middleSplit[1]);\n      Linkifier.appendTextWithoutHashes(link, middleSplit[2]);\n    } else {\n      Linkifier.appendTextWithoutHashes(link, text);\n    }\n\n    function splitMiddle(string: string, maxLength: number): string[] {\n      let leftIndex = Math.floor(maxLength / 2);\n      let rightIndex = string.length - Math.ceil(maxLength / 2) + 1;\n\n      const codePointAtRightIndex = string.codePointAt(rightIndex - 1);\n      // Do not truncate between characters that use multiple code points (emojis).\n      if (typeof codePointAtRightIndex !== 'undefined' && codePointAtRightIndex >= 0x10000) {\n        rightIndex++;\n        leftIndex++;\n      }\n      const codePointAtLeftIndex = string.codePointAt(leftIndex - 1);\n      if (typeof codePointAtLeftIndex !== 'undefined' && leftIndex > 0 && codePointAtLeftIndex >= 0x10000) {\n        leftIndex--;\n      }\n      return [string.substring(0, leftIndex), string.substring(leftIndex, rightIndex), string.substring(rightIndex)];\n    }\n  }\n\n  private static appendTextWithoutHashes(link: Element, string: string): void {\n    const hashSplit = TextUtils.TextUtils.Utils.splitStringByRegexes(string, [/[a-f0-9]{20,}/g]);\n    for (const match of hashSplit) {\n      if (match.regexIndex === -1) {\n        UI.UIUtils.createTextChild(link, match.value);\n      } else {\n        UI.UIUtils.createTextChild(link, match.value.substring(0, 7));\n        Linkifier.appendHiddenText(link, match.value.substring(7));\n      }\n    }\n  }\n\n  private static appendHiddenText(link: Element, string: string): void {\n    const ellipsisNode = UI.UIUtils.createTextChild(link.createChild('span', 'devtools-link-ellipsis'), '');\n    textByAnchor.set(ellipsisNode, string);\n  }\n\n  static untruncatedNodeText(node: Node): string {\n    return textByAnchor.get(node) || node.textContent || '';\n  }\n\n  static linkInfo(link: Element|null): LinkInfo|null {\n    return link ? infoByAnchor.get(link) || null : null as LinkInfo | null;\n  }\n\n  private static handleClick(event: Event): boolean {\n    const link = (event.currentTarget as Element);\n    if (UI.UIUtils.isBeingEdited((event.target as Node)) || link.hasSelection()) {\n      return false;\n    }\n    const linkInfo = Linkifier.linkInfo(link);\n    if (!linkInfo) {\n      return false;\n    }\n    return Linkifier.invokeFirstAction(linkInfo);\n  }\n\n  static handleClickFromNewComponentLand(linkInfo: LinkInfo): void {\n    Linkifier.invokeFirstAction(linkInfo);\n  }\n\n  static invokeFirstAction(linkInfo: LinkInfo): boolean {\n    const actions = Linkifier.linkActions(linkInfo);\n    if (actions.length) {\n      void actions[0].handler.call(null);\n      if (linkInfo.userMetric) {\n        Host.userMetrics.actionTaken(linkInfo.userMetric);\n      }\n      return true;\n    }\n    return false;\n  }\n\n  static linkHandlerSetting(): Common.Settings.Setting<string> {\n    if (!linkHandlerSettingInstance) {\n      linkHandlerSettingInstance =\n          Common.Settings.Settings.instance().createSetting('open-link-handler', i18nString(UIStrings.auto));\n    }\n    return linkHandlerSettingInstance;\n  }\n\n  static registerLinkHandler(registration: LinkHandlerRegistration): void {\n    for (const origin of linkHandlers.keys()) {\n      const existingHandler = linkHandlers.get(origin);\n      if (existingHandler?.scheme === registration.scheme) {\n        const schemeString = registration.scheme ? `scheme '${registration.scheme}'` : 'all schemes';\n        Common.Console.Console.instance().warn(\n            `DevTools extension '${registration.title}' registered with setOpenResourceHandler for ${\n                schemeString}, which is already registered by '${\n                existingHandler?.title}'. This can lead to unexpected results.`);\n      }\n    }\n\n    linkHandlers.set(registration.origin, registration);\n    LinkHandlerSettingUI.instance().update();\n  }\n\n  static unregisterLinkHandler(registration: LinkHandlerRegistration): void {\n    const {origin} = registration;\n    linkHandlers.delete(origin);\n    LinkHandlerSettingUI.instance().update();\n  }\n\n  // The primary filter implementation for the openResourceHandlers. Returns false\n  // if the handler is NOT supposed to handle the `url`. Usually, this happens if\n  // a handler has registered for a particular `scheme` and the scheme for that url\n  // does not match. If no openResourceScheme is provided, it means the handler is\n  // interested in all urls (except those handled by scheme-specific handlers, see\n  // otherSchemeRegistrations).\n  static shouldHandleOpenResource(\n      openResourceScheme: string|null, url: Platform.DevToolsPath.UrlString,\n      otherSchemeRegistrations: Set<string>): boolean {\n    // If this is a scheme-specific handler, make sure the registered scheme is\n    // present in the url.\n    if (openResourceScheme) {\n      return url.startsWith(openResourceScheme);\n    }\n\n    // Global handlers (that register for no scheme) can handle all urls, with the\n    // exception of urls that scheme-specific handlers have registered for.\n    const scheme = URL.parse(url)?.protocol || '';\n    return !otherSchemeRegistrations.has(scheme);\n  }\n\n  static uiLocation(link: Element): Workspace.UISourceCode.UILocation|null {\n    const info = Linkifier.linkInfo(link);\n    return info ? info.uiLocation : null;\n  }\n\n  static linkActions(info: LinkInfo): Array<{\n    section: string,\n    title: string,\n    jslogContext: string,\n    handler: () => Promise<void>| void,\n  }> {\n    const result: Array<{\n      section: string,\n      title: string,\n      jslogContext: string,\n      handler: () => Promise<void>| void,\n    }> = [];\n\n    if (!info) {\n      return result;\n    }\n\n    let url = Platform.DevToolsPath.EmptyUrlString;\n    let uiLocation: Workspace.UISourceCode.UILocation|(Workspace.UISourceCode.UILocation | null)|null = null;\n    if (info.uiLocation) {\n      uiLocation = info.uiLocation;\n      url = uiLocation.uiSourceCode.contentURL();\n    } else if (info.url) {\n      url = info.url;\n      const uiSourceCode = Workspace.Workspace.WorkspaceImpl.instance().uiSourceCodeForURL(url) ||\n          Workspace.Workspace.WorkspaceImpl.instance().uiSourceCodeForURL(\n              Common.ParsedURL.ParsedURL.urlWithoutHash(url) as Platform.DevToolsPath.UrlString);\n      uiLocation = uiSourceCode ? uiSourceCode.uiLocation(info.lineNumber || 0, info.columnNumber || 0) : null;\n    }\n    const resource = url ? Bindings.ResourceUtils.resourceForURL(url) : null;\n    const contentProvider = uiLocation ? uiLocation.uiSourceCode : resource;\n\n    const revealable = info.revealable || uiLocation || resource;\n    if (revealable) {\n      const destination = Common.Revealer.revealDestination(revealable);\n      result.push({\n        section: 'reveal',\n        title: destination ? i18nString(UIStrings.revealInS, {PH1: destination}) : i18nString(UIStrings.reveal),\n        jslogContext: 'reveal',\n        handler: () => Common.Revealer.reveal(revealable),\n      });\n    }\n\n    const contentProviderOrUrl = contentProvider || url;\n    const lineNumber = uiLocation ? uiLocation.lineNumber : info.lineNumber || 0;\n    const columnNumber = uiLocation ? uiLocation.columnNumber : info.columnNumber || 0;\n\n    // Build the set of schemes that the currently registered extensions handle\n    // (not counting ones that are scheme-agnostic).\n    const specificSchemeHandlers = new Set<string>();\n    for (const registration of linkHandlers.values()) {\n      if (registration.scheme) {\n        specificSchemeHandlers.add(registration.scheme);\n      }\n    }\n\n    for (const registration of linkHandlers.values().filter(r => r.handler)) {\n      const {title, handler, shouldHandleOpenResource} = registration;\n      if (url && !shouldHandleOpenResource(url, specificSchemeHandlers)) {\n        continue;\n      }\n      const action = {\n        section: 'reveal',\n        title: i18nString(UIStrings.openUsingS, {PH1: title}),\n        jslogContext: 'open-using',\n        handler: handler.bind(null, contentProviderOrUrl, lineNumber, columnNumber),\n      };\n      if (title === Linkifier.linkHandlerSetting().get()) {\n        result.unshift(action);\n      } else {\n        result.push(action);\n      }\n    }\n    if (resource || info.url) {\n      result.push({\n        section: 'reveal',\n        title: UI.UIUtils.openLinkExternallyLabel(),\n        jslogContext: 'open-in-new-tab',\n        handler: () => UIHelpers.openInNewTab(url),\n      });\n      result.push({\n        section: 'clipboard',\n        title: UI.UIUtils.copyLinkAddressLabel(),\n        jslogContext: 'copy-link-address',\n        handler: () => Host.InspectorFrontendHost.InspectorFrontendHostInstance.copyText(url),\n      });\n    }\n\n    if (uiLocation?.uiSourceCode) {\n      const contentProvider = uiLocation.uiSourceCode;\n      result.push({\n        section: 'clipboard',\n        title: UI.UIUtils.copyFileNameLabel(),\n        jslogContext: 'copy-file-name',\n        handler: () => Host.InspectorFrontendHost.InspectorFrontendHostInstance.copyText(contentProvider.displayName()),\n      });\n    }\n\n    return result;\n  }\n}\n\nexport interface LinkDecorator extends Common.EventTarget.EventTarget<LinkDecorator.EventTypes> {\n  linkIcon(uiSourceCode: Workspace.UISourceCode.UISourceCode): LitTemplate|null;\n}\n\nexport namespace LinkDecorator {\n  export const enum Events {\n    LINK_ICON_CHANGED = 'LinkIconChanged',\n  }\n\n  export interface EventTypes {\n    [Events.LINK_ICON_CHANGED]: Workspace.UISourceCode.UISourceCode;\n  }\n}\n\nexport class LinkContextMenuProvider implements UI.ContextMenu.Provider<Node> {\n  appendApplicableItems(_event: Event, contextMenu: UI.ContextMenu.ContextMenu, target: Node): void {\n    let targetNode: Node|null = target;\n    while (targetNode && !infoByAnchor.get(targetNode)) {\n      targetNode = targetNode.parentNodeOrShadowHost();\n    }\n    const link = (targetNode as Element | null);\n    const linkInfo = Linkifier.linkInfo(link);\n    if (!linkInfo) {\n      return;\n    }\n\n    const actions = Linkifier.linkActions(linkInfo);\n    for (const action of actions) {\n      contextMenu.section(action.section).appendItem(action.title, action.handler, {jslogContext: action.jslogContext});\n    }\n  }\n}\n\nlet linkHandlerSettingUIInstance: LinkHandlerSettingUI;\n\nexport class LinkHandlerSettingUI {\n  private element: HTMLSelectElement;\n\n  private constructor() {\n    this.element = document.createElement('select');\n    this.element.addEventListener('change', this.onChange.bind(this), false);\n    this.update();\n  }\n\n  static instance(opts: {\n    forceNew: boolean|null,\n  } = {forceNew: null}): LinkHandlerSettingUI {\n    const {forceNew} = opts;\n    if (!linkHandlerSettingUIInstance || forceNew) {\n      linkHandlerSettingUIInstance = new LinkHandlerSettingUI();\n    }\n\n    return linkHandlerSettingUIInstance;\n  }\n\n  update(): void {\n    this.element.removeChildren();\n    const names = [...linkHandlers.keys()];\n    names.unshift(i18nString(UIStrings.auto));\n    for (const name of names) {\n      const option = document.createElement('option');\n      option.textContent = name;\n      option.selected = name === Linkifier.linkHandlerSetting().get();\n      this.element.appendChild(option);\n    }\n    this.element.disabled = names.length <= 1;\n  }\n\n  private onChange(event: Event): void {\n    if (!event.target) {\n      return;\n    }\n    const value = (event.target as HTMLSelectElement).value;\n    Linkifier.linkHandlerSetting().set(value);\n  }\n\n  settingElement(): Element {\n    const p = document.createElement('p');\n    p.classList.add('settings-select');\n    const label = p.createChild('label');\n    label.textContent = i18nString(UIStrings.linkHandling);\n    UI.ARIAUtils.bindLabelToControl(label, this.element);\n    p.appendChild(this.element);\n    return p;\n  }\n}\n\nlet listeningToNewEvents = false;\nfunction listenForNewComponentLinkifierEvents(): void {\n  if (listeningToNewEvents) {\n    return;\n  }\n\n  listeningToNewEvents = true;\n\n  window.addEventListener('linkifieractivated', function(event: Event) {\n    const eventWithData = (event as unknown as {\n      data: LinkInfo,\n    });\n    Linkifier.handleClickFromNewComponentLand(eventWithData.data);\n  });\n}\n\nlistenForNewComponentLinkifierEvents();\n\nexport class ContentProviderContextMenuProvider implements\n    UI.ContextMenu\n        .Provider<Workspace.UISourceCode.UISourceCode|SDK.Resource.Resource|SDK.NetworkRequest.NetworkRequest> {\n  appendApplicableItems(\n      _event: Event, contextMenu: UI.ContextMenu.ContextMenu,\n      contentProvider: Workspace.UISourceCode.UISourceCode|SDK.Resource.Resource|\n      SDK.NetworkRequest.NetworkRequest): void {\n    const contentUrl = contentProvider.contentURL();\n    if (!contentUrl) {\n      return;\n    }\n\n    if (!Common.ParsedURL.schemeIs(contentUrl, 'file:')) {\n      contextMenu.revealSection().appendItem(\n          UI.UIUtils.openLinkExternallyLabel(),\n          () => Host.InspectorFrontendHost.InspectorFrontendHostInstance.openInNewTab(\n              contentUrl.endsWith(':formatted') ?\n                  Common.ParsedURL.ParsedURL.slice(contentUrl, 0, contentUrl.lastIndexOf(':')) :\n                  contentUrl),\n          {jslogContext: 'open-in-new-tab'});\n    }\n    for (const origin of linkHandlers.keys()) {\n      const registration = linkHandlers.get(origin);\n      if (!registration) {\n        continue;\n      }\n      const {title} = registration;\n      contextMenu.revealSection().appendItem(\n          i18nString(UIStrings.openUsingS, {PH1: title}), registration.handler.bind(null, contentProvider, 0),\n          {jslogContext: 'open-using'});\n    }\n    if (contentProvider instanceof SDK.NetworkRequest.NetworkRequest) {\n      return;\n    }\n\n    contextMenu.clipboardSection().appendItem(\n        UI.UIUtils.copyLinkAddressLabel(),\n        () => Host.InspectorFrontendHost.InspectorFrontendHostInstance.copyText(contentUrl),\n        {jslogContext: 'copy-link-address'});\n\n    // TODO(bmeurer): `displayName` should be an accessor/data property consistently.\n    if (contentProvider instanceof Workspace.UISourceCode.UISourceCode) {\n      contextMenu.clipboardSection().appendItem(\n          UI.UIUtils.copyFileNameLabel(),\n          () => Host.InspectorFrontendHost.InspectorFrontendHostInstance.copyText(contentProvider.displayName()),\n          {jslogContext: 'copy-file-name'});\n    } else {\n      contextMenu.clipboardSection().appendItem(\n          UI.UIUtils.copyFileNameLabel(),\n          () => Host.InspectorFrontendHost.InspectorFrontendHostInstance.copyText(contentProvider.displayName),\n          {jslogContext: 'copy-file-name'});\n    }\n  }\n}\n\ninterface LinkInfo {\n  icon: LitTemplate|null;\n  enableDecorator: boolean;\n  uiLocation: Workspace.UISourceCode.UILocation|null;\n  liveLocation: Bindings.LiveLocation.LiveLocation|null;\n  url: Platform.DevToolsPath.UrlString|null;\n  lineNumber: number|null;\n  columnNumber: number|null;\n  inlineFrameIndex: number;\n  revealable: Object|null;\n  fallback: Element|null;\n  userMetric?: Host.UserMetrics.Action;\n  jslogContext?: string;\n}\n\nexport interface LinkifyURLOptions {\n  text?: string;\n  className?: string;\n  lineNumber?: number;\n  columnNumber?: number;\n  showColumnNumber?: boolean;\n  inlineFrameIndex?: number;\n  preventClick?: boolean;\n  maxLength?: number;\n  tabStop?: boolean;\n  bypassURLTrimming?: boolean;\n  userMetric?: Host.UserMetrics.Action;\n  jslogContext?: string;\n  omitOrigin?: boolean;\n}\n\nexport interface LinkifyOptions {\n  className?: string;\n  columnNumber?: number;\n  showColumnNumber?: boolean;\n  inlineFrameIndex?: number;\n  tabStop?: boolean;\n  userMetric?: Host.UserMetrics.Action;\n  jslogContext?: string;\n  omitOrigin?: boolean;\n\n  /**\n   * {@link LinkDisplayOptions.revealBreakpoint}\n   */\n  revealBreakpoint?: boolean;\n  maxLength?: number;\n}\n\ninterface CreateLinkOptions {\n  maxLength?: number;\n  title?: string;\n  href?: Platform.DevToolsPath.UrlString;\n  preventClick?: boolean;\n  tabStop?: boolean;\n  bypassURLTrimming?: boolean;\n  jslogContext?: string;\n}\n\ninterface LinkDisplayOptions {\n  showColumnNumber: boolean;\n\n  /**\n   * If true, we'll check if there is a breakpoint at the UILocation we get\n   * from the LiveLocation. If we find a breakpoint, we'll reveal the corresponding\n   * {@link Breakpoints.BreakpointManager.BreakpointLocation}. Which opens the\n   * breakpoint edit dialog.\n   */\n  revealBreakpoint?: boolean;\n}\n\n/**\n * The filter function for the openResourceHandlers. Returns true if the `url`\n * should be considered for a particular handler. `specificSchemeHandlers`\n * is the set of all schemes handled by all registered DevTools extensions\n * (that specify a particular scheme).\n **/\nexport type LinkHandlerPredicate = (url: Platform.DevToolsPath.UrlString, specificSchemeHandlers: Set<string>) =>\n    boolean;\n\nexport type LinkHandler =\n    (arg0: TextUtils.ContentProvider.ContentProvider|Platform.DevToolsPath.UrlString, lineNumber: number,\n     columnNumber?: number) => void;\n\nexport interface LinkHandlerRegistration {\n  // The title (read: manifest name) of DevTools extension registering as an openResourceHandler.\n  // This value is provided by the developer of the extension.\n  title: string;\n  // The origin of the DevTools extension handling the url.\n  origin: Platform.DevToolsPath.UrlString;\n  // The scheme that the handler wants to register for. If set, only links that match this scheme\n  // will be considered, otherwise all links will be considered.\n  scheme?: string;\n  // The openResourceHandler handling the requests to open a resource.\n  handler: LinkHandler;\n  // A filter function used to determine whether the `handler` wants to handle the link clicks.\n  shouldHandleOpenResource: LinkHandlerPredicate;\n}\n\nexport const enum Events {\n  LIVE_LOCATION_UPDATED = 'liveLocationUpdated',\n}\n\nexport interface EventTypes {\n  [Events.LIVE_LOCATION_UPDATED]: Bindings.LiveLocation.LiveLocation;\n}\n\ninterface ScriptLocationViewInput {\n  target?: SDK.Target.Target;\n  scriptId?: Protocol.Runtime.ScriptId;\n  sourceURL: Platform.DevToolsPath.UrlString;\n  lineNumber?: number;\n  options?: LinkifyOptions;\n  linkifier: Linkifier;\n}\n\ntype ScriptLocationView = (input: ScriptLocationViewInput, output: undefined, target: HTMLElement) => void;\n\nconst DEFAULT_SCRIPT_LOCATION_VIEW: ScriptLocationView = (input, _output, target) => {\n  render(\n      html`${\n          input.linkifier.linkifyScriptLocation(\n              input.target ?? null, input.scriptId ?? null, input.sourceURL, input.lineNumber, input.options)}`,\n      target);\n};\n\nexport class ScriptLocationLink extends UI.Widget.Widget {\n  target?: SDK.Target.Target;\n  scriptId?: Protocol.Runtime.ScriptId;\n  sourceURL = '' as Platform.DevToolsPath.UrlString;\n  lineNumber?: number;\n  options?: LinkifyOptions;\n  linkifier = new Linkifier();\n  #view: ScriptLocationView;\n\n  constructor(element: HTMLElement, view = DEFAULT_SCRIPT_LOCATION_VIEW) {\n    super(element);\n    this.#view = view;\n  }\n\n  override performUpdate(): void {\n    this.#view(this, undefined, this.contentElement);\n  }\n\n  override onDetach(): void {\n    this.linkifier.dispose();\n  }\n}\n"]}