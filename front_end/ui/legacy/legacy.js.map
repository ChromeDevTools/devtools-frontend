{
  "version": 3,
  "sources": ["../../../../../../front_end/ui/legacy/ActionRegistration.ts", "../../../../../../front_end/ui/legacy/Context.ts", "../../../../../../front_end/ui/legacy/ActionRegistry.ts", "../../../../../../front_end/ui/legacy/ARIAUtils.ts", "../../../../../../front_end/ui/legacy/Dialog.ts", "dialog.css.js", "../../../../../../front_end/ui/legacy/GlassPane.ts", "glassPane.css.js", "../../../../../../front_end/ui/legacy/UIUtils.ts", "../../../../../../front_end/ui/legacy/Toolbar.ts", "../../../../../../front_end/ui/legacy/ContextMenu.ts", "../../../../../../front_end/ui/legacy/ShortcutRegistry.ts", "../../../../../../front_end/ui/legacy/KeyboardShortcut.ts", "../../../../../../front_end/ui/legacy/SoftContextMenu.ts", "../../../../../../front_end/ui/legacy/InspectorView.ts", "../../../../../../front_end/ui/legacy/DockController.ts", "../../../../../../front_end/ui/legacy/Floaty.ts", "floaty.css.js", "../../../../../../front_end/ui/legacy/Widget.ts", "../../../../../../front_end/ui/legacy/DOMUtilities.ts", "../../../../../../front_end/ui/legacy/Infobar.ts", "infobar.css.js", "../../../../../../front_end/ui/legacy/SplitWidget.ts", "../../../../../../front_end/ui/legacy/ResizerWidget.ts", "splitWidget.css.js", "../../../../../../front_end/ui/legacy/ZoomManager.ts", "../../../../../../front_end/ui/legacy/TabbedPane.ts", "tabbedPane.css.js", "../../../../../../front_end/ui/legacy/Tooltip.ts", "../../../../../../front_end/ui/legacy/ViewManager.ts", "viewContainers.css.js", "../../../../../../front_end/ui/legacy/ViewRegistration.ts", "softContextMenu.css.js", "../../../../../../front_end/ui/legacy/TextPrompt.ts", "../../../../../../front_end/ui/legacy/SuggestBox.ts", "../../../../../../front_end/ui/legacy/ListControl.ts", "../../../../../../front_end/ui/legacy/ListModel.ts", "suggestBox.css.js", "textPrompt.css.js", "toolbar.css.js", "checkboxTextLabel.css.js", "confirmDialog.css.js", "inspectorCommon.css.js", "smallBubble.css.js", "../../../../../../front_end/ui/legacy/ContextFlavorListener.ts", "../../../../../../front_end/ui/legacy/DropTarget.ts", "dropTarget.css.js", "../../../../../../front_end/ui/legacy/EmptyWidget.ts", "emptyWidget.css.js", "../../../../../../front_end/ui/legacy/XLink.ts", "../../../../../../front_end/ui/legacy/Fragment.ts", "../../../../../../front_end/ui/legacy/XElement.ts", "../../../../../../front_end/ui/legacy/FilterBar.ts", "filter.css.js", "../../../../../../front_end/ui/legacy/FilterSuggestionBuilder.ts", "../../../../../../front_end/ui/legacy/ForwardedInputEventHandler.ts", "../../../../../../front_end/ui/legacy/InplaceEditor.ts", "../../../../../../front_end/ui/legacy/ListWidget.ts", "listWidget.css.js", "../../../../../../front_end/ui/legacy/Panel.ts", "../../../../../../front_end/ui/legacy/PopoverHelper.ts", "popover.css.js", "../../../../../../front_end/ui/legacy/ProgressIndicator.ts", "progressIndicator.css.js", "../../../../../../front_end/ui/legacy/RemoteDebuggingTerminatedScreen.ts", "remoteDebuggingTerminatedScreen.css.js", "../../../../../../front_end/ui/legacy/ReportView.ts", "reportView.css.js", "../../../../../../front_end/ui/legacy/RootView.ts", "rootView.css.js", "../../../../../../front_end/ui/legacy/SearchableView.ts", "searchableView.css.js", "../../../../../../front_end/ui/legacy/SoftDropDown.ts", "softDropDown.css.js", "softDropDownButton.css.js", "../../../../../../front_end/ui/legacy/TargetCrashedScreen.ts", "targetCrashedScreen.css.js", "../../../../../../front_end/ui/legacy/Treeoutline.ts", "treeoutline.css.js", "../../../../../../front_end/ui/legacy/View.ts"],
  "sourcesContent": ["// Copyright 2020 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as Common from '../../core/common/common.js';\nimport * as i18n from '../../core/i18n/i18n.js';\nimport * as Platform from '../../core/platform/platform.js';\nimport * as Root from '../../core/root/root.js';\n\nimport {Context} from './Context.js';\n\nconst UIStrings = {\n  /**\n   * @description Title of the keybind category 'Elements' in Settings' Shortcuts pannel.\n   */\n  elements: 'Elements',\n  /**\n   * @description Title of the keybind category 'Screenshot' in Settings' Shortcuts pannel.\n   */\n  screenshot: 'Screenshot',\n  /**\n   * @description Title of the keybind category 'Network' in Settings' Shortcuts pannel.\n   */\n  network: 'Network',\n  /**\n   * @description Title of the keybind category 'Memory' in Settings' Shortcuts pannel.\n   */\n  memory: 'Memory',\n  /**\n   * @description Title of the keybind category 'JavaScript Profiler' in Settings' Shortcuts pannel.\n   */\n  javascript_profiler: 'JavaScript Profiler',\n  /**\n   * @description Title of the keybind category 'Console' in Settings' Shortcuts pannel.\n   */\n  console: 'Console',\n  /**\n   * @description Title of the keybind category 'Performance' in Settings' Shortcuts pannel.\n   */\n  performance: 'Performance',\n  /**\n   * @description Title of the keybind category 'Mobile' in Settings' Shortcuts pannel.\n   */\n  mobile: 'Mobile',\n  /**\n   * @description Title of the keybind category 'Help' in Settings' Shortcuts pannel.\n   */\n  help: 'Help',\n  /**\n   * @description Title of the keybind category 'Layers' in Settings' Shortcuts pannel.\n   */\n  layers: 'Layers',\n  /**\n   * @description Title of the keybind category 'Navigation' in Settings' Shortcuts pannel.\n   */\n  navigation: 'Navigation',\n  /**\n   * @description Title of the keybind category 'Drawer' in Settings' Shortcuts pannel.\n   */\n  drawer: 'Drawer',\n  /**\n   * @description Title of the keybind category 'Global' in Settings' Shortcuts pannel.\n   */\n  global: 'Global',\n  /**\n   * @description Title of the keybind category 'Resources' in Settings' Shortcuts pannel.\n   */\n  resources: 'Resources',\n  /**\n   * @description Title of the keybind category 'Background Services' in Settings' Shortcuts pannel.\n   */\n  background_services: 'Background Services',\n  /**\n   * @description Title of the keybind category 'Settings' in Settings' Shortcuts pannel.\n   */\n  settings: 'Settings',\n  /**\n   * @description Title of the keybind category 'Debugger' in Settings' Shortcuts pannel.\n   */\n  debugger: 'Debugger',\n  /**\n   * @description Title of the keybind category 'Sources' in Settings' Shortcuts pannel.\n   */\n  sources: 'Sources',\n  /**\n   * @description Title of the keybind category 'Rendering' in Settings' Shortcuts pannel.\n   */\n  rendering: 'Rendering',\n  /**\n   * @description Title of the keybind category 'Recorder' in Settings' Shortcuts pannel.\n   */\n  recorder: 'Recorder',\n  /**\n   * @description Title of the keybind category 'Changes' in Settings' Shortcuts pannel.\n   */\n  changes: 'Changes',\n} as const;\nconst str_ = i18n.i18n.registerUIStrings('ui/legacy/ActionRegistration.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\n\nexport interface ActionDelegate {\n  handleAction(context: Context, actionId: string, opts?: Record<string, unknown>): boolean;\n}\n\nexport class Action extends Common.ObjectWrapper.ObjectWrapper<EventTypes> {\n  #enabled = true;\n  #toggled = false;\n  private actionRegistration: ActionRegistration;\n  constructor(actionRegistration: ActionRegistration) {\n    super();\n    this.actionRegistration = actionRegistration;\n  }\n\n  id(): string {\n    return this.actionRegistration.actionId;\n  }\n\n  async execute(opts?: Record<string, unknown>): Promise<boolean> {\n    if (!this.actionRegistration.loadActionDelegate) {\n      return false;\n    }\n    const delegate = await this.actionRegistration.loadActionDelegate();\n    const actionId = this.id();\n    return delegate.handleAction(Context.instance(), actionId, opts);\n  }\n\n  icon(): string|undefined {\n    return this.actionRegistration.iconClass;\n  }\n\n  toggledIcon(): string|undefined {\n    return this.actionRegistration.toggledIconClass;\n  }\n\n  toggleWithRedColor(): boolean {\n    return Boolean(this.actionRegistration.toggleWithRedColor);\n  }\n\n  setEnabled(enabled: boolean): void {\n    if (this.#enabled === enabled) {\n      return;\n    }\n\n    this.#enabled = enabled;\n    this.dispatchEventToListeners(Events.ENABLED, enabled);\n  }\n\n  enabled(): boolean {\n    return this.#enabled;\n  }\n\n  category(): ActionCategory {\n    return this.actionRegistration.category;\n  }\n\n  tags(): string|void {\n    if (this.actionRegistration.tags) {\n      // Get localized keys and separate by null character to prevent fuzzy matching from matching across them.\n      return this.actionRegistration.tags.map(tag => tag()).join('\\0');\n    }\n  }\n\n  toggleable(): boolean {\n    return Boolean(this.actionRegistration.toggleable);\n  }\n\n  title(): Common.UIString.LocalizedString {\n    let title = this.actionRegistration.title ? this.actionRegistration.title() : i18n.i18n.lockedString('');\n    const options = this.actionRegistration.options;\n    if (options) {\n      // Actions with an 'options' property don't have a title field. Instead, the displayed\n      // title is taken from the 'title' property of the option that is not active. Only one of the\n      // two options can be active at a given moment and the 'toggled' property of the action along\n      // with the 'value' of the options are used to determine which one it is.\n\n      for (const pair of options) {\n        if (pair.value !== this.#toggled) {\n          title = pair.title();\n        }\n      }\n    }\n    return title;\n  }\n\n  toggled(): boolean {\n    return this.#toggled;\n  }\n\n  setToggled(toggled: boolean): void {\n    console.assert(this.toggleable(), 'Shouldn\\'t be toggling an untoggleable action', this.id());\n    if (this.#toggled === toggled) {\n      return;\n    }\n\n    this.#toggled = toggled;\n    this.dispatchEventToListeners(Events.TOGGLED, toggled);\n  }\n\n  options(): undefined|ExtensionOption[] {\n    return this.actionRegistration.options;\n  }\n\n  contextTypes(): undefined|Array<Platform.Constructor.Constructor<unknown>> {\n    if (this.actionRegistration.contextTypes) {\n      return this.actionRegistration.contextTypes();\n    }\n    return undefined;\n  }\n\n  canInstantiate(): boolean {\n    return Boolean(this.actionRegistration.loadActionDelegate);\n  }\n\n  bindings(): Binding[]|undefined {\n    return this.actionRegistration.bindings;\n  }\n\n  configurableBindings(): boolean {\n    return this.actionRegistration.configurableBindings ?? true;\n  }\n\n  experiment(): string|undefined {\n    return this.actionRegistration.experiment;\n  }\n\n  featurePromotionId(): string|undefined {\n    return this.actionRegistration.featurePromotionId;\n  }\n\n  setting(): string|undefined {\n    return this.actionRegistration.setting;\n  }\n\n  condition(): Root.Runtime.Condition|undefined {\n    return this.actionRegistration.condition;\n  }\n\n  order(): number|undefined {\n    return this.actionRegistration.order;\n  }\n}\n\nconst registeredActions = new Map<string, Action>();\n\nexport function registerActionExtension(registration: ActionRegistration): void {\n  const actionId = registration.actionId;\n  if (registeredActions.has(actionId)) {\n    throw new Error(`Duplicate action ID '${actionId}'`);\n  }\n  if (!Platform.StringUtilities.isExtendedKebabCase(actionId)) {\n    throw new Error(`Invalid action ID '${actionId}'`);\n  }\n  registeredActions.set(actionId, new Action(registration));\n}\n\nexport function reset(): void {\n  registeredActions.clear();\n}\n\nexport function getRegisteredActionExtensions(): Action[] {\n  return Array.from(registeredActions.values())\n      .filter(action => {\n        const settingName = action.setting();\n        try {\n          if (settingName && !Common.Settings.moduleSetting(settingName).get()) {\n            return false;\n          }\n        } catch (err) {\n          if (err.message.startsWith('No setting registered')) {\n            return false;\n          }\n        }\n\n        return Root.Runtime.Runtime.isDescriptorEnabled({\n          experiment: action.experiment(),\n          condition: action.condition(),\n        });\n      })\n      .sort((firstAction, secondAction) => {\n        const order1 = firstAction.order() || 0;\n        const order2 = secondAction.order() || 0;\n        return order1 - order2;\n      });\n}\n\nexport function maybeRemoveActionExtension(actionId: string): boolean {\n  return registeredActions.delete(actionId);\n}\n\nexport const enum Platforms {\n  ALL = 'All platforms',\n  MAC = 'mac',\n  WINDOWS_LINUX = 'windows,linux',\n  ANDROID = 'Android',\n  WINDOWS = 'windows',\n}\n\nexport const enum Events {\n  ENABLED = 'Enabled',\n  TOGGLED = 'Toggled',\n}\n\nexport interface EventTypes {\n  [Events.ENABLED]: boolean;\n  [Events.TOGGLED]: boolean;\n}\n\nexport const enum ActionCategory {\n  NONE = '',  // `NONE` must be a falsy value. Legacy code uses if-checks for the category.\n  ELEMENTS = 'ELEMENTS',\n  SCREENSHOT = 'SCREENSHOT',\n  NETWORK = 'NETWORK',\n  MEMORY = 'MEMORY',\n  JAVASCRIPT_PROFILER = 'JAVASCRIPT_PROFILER',\n  CONSOLE = 'CONSOLE',\n  PERFORMANCE = 'PERFORMANCE',\n  MOBILE = 'MOBILE',\n  HELP = 'HELP',\n  LAYERS = 'LAYERS',\n  NAVIGATION = 'NAVIGATION',\n  DRAWER = 'DRAWER',\n  GLOBAL = 'GLOBAL',\n  RESOURCES = 'RESOURCES',\n  BACKGROUND_SERVICES = 'BACKGROUND_SERVICES',\n  SETTINGS = 'SETTINGS',\n  DEBUGGER = 'DEBUGGER',\n  SOURCES = 'SOURCES',\n  RENDERING = 'RENDERING',\n  RECORDER = 'RECORDER',\n  CHANGES = 'CHANGES',\n}\n\nexport function getLocalizedActionCategory(category: ActionCategory): Platform.UIString.LocalizedString {\n  switch (category) {\n    case ActionCategory.ELEMENTS:\n      return i18nString(UIStrings.elements);\n    case ActionCategory.SCREENSHOT:\n      return i18nString(UIStrings.screenshot);\n    case ActionCategory.NETWORK:\n      return i18nString(UIStrings.network);\n    case ActionCategory.MEMORY:\n      return i18nString(UIStrings.memory);\n    case ActionCategory.JAVASCRIPT_PROFILER:\n      return i18nString(UIStrings.javascript_profiler);\n    case ActionCategory.CONSOLE:\n      return i18nString(UIStrings.console);\n    case ActionCategory.PERFORMANCE:\n      return i18nString(UIStrings.performance);\n    case ActionCategory.MOBILE:\n      return i18nString(UIStrings.mobile);\n    case ActionCategory.HELP:\n      return i18nString(UIStrings.help);\n    case ActionCategory.LAYERS:\n      return i18nString(UIStrings.layers);\n    case ActionCategory.NAVIGATION:\n      return i18nString(UIStrings.navigation);\n    case ActionCategory.DRAWER:\n      return i18nString(UIStrings.drawer);\n    case ActionCategory.GLOBAL:\n      return i18nString(UIStrings.global);\n    case ActionCategory.RESOURCES:\n      return i18nString(UIStrings.resources);\n    case ActionCategory.BACKGROUND_SERVICES:\n      return i18nString(UIStrings.background_services);\n    case ActionCategory.SETTINGS:\n      return i18nString(UIStrings.settings);\n    case ActionCategory.DEBUGGER:\n      return i18nString(UIStrings.debugger);\n    case ActionCategory.SOURCES:\n      return i18nString(UIStrings.sources);\n    case ActionCategory.RENDERING:\n      return i18nString(UIStrings.rendering);\n    case ActionCategory.RECORDER:\n      return i18nString(UIStrings.recorder);\n    case ActionCategory.CHANGES:\n      return i18nString(UIStrings.changes);\n    case ActionCategory.NONE:\n      return i18n.i18n.lockedString('');\n  }\n  // Not all categories are cleanly typed yet. Return the category as-is in this case.\n  return i18n.i18n.lockedString(category);\n}\n\nexport const enum IconClass {\n  LARGEICON_NODE_SEARCH = 'select-element',\n  START_RECORDING = 'record-start',\n  STOP_RECORDING = 'record-stop',\n  REFRESH = 'refresh',\n  CLEAR = 'clear',\n  EYE = 'eye',\n  LARGEICON_PHONE = 'devices',\n  PLAY = 'play',\n  DOWNLOAD = 'download',\n  LARGEICON_PAUSE = 'pause',\n  LARGEICON_RESUME = 'resume',\n  MOP = 'mop',\n  BIN = 'bin',\n  LARGEICON_SETTINGS_GEAR = 'gear',\n  LARGEICON_STEP_OVER = 'step-over',\n  LARGE_ICON_STEP_INTO = 'step-into',\n  LARGE_ICON_STEP = 'step',\n  LARGE_ICON_STEP_OUT = 'step-out',\n  BREAKPOINT_CROSSED_FILLED = 'breakpoint-crossed-filled',\n  BREAKPOINT_CROSSED = 'breakpoint-crossed',\n  PLUS = 'plus',\n  UNDO = 'undo',\n  COPY = 'copy',\n  IMPORT = 'import',\n}\n\nexport const enum KeybindSet {\n  DEVTOOLS_DEFAULT = 'devToolsDefault',\n  VS_CODE = 'vsCode',\n}\n\nexport interface ExtensionOption {\n  value: boolean;\n  title: () => Platform.UIString.LocalizedString;\n  text?: string;\n}\n\nexport interface Binding {\n  platform?: Platforms;\n  shortcut: string;\n  keybindSets?: KeybindSet[];\n}\n\n/**\n * The representation of an action extension to be registered.\n */\nexport interface ActionRegistration {\n  /**\n   * The unique id of an Action extension.\n   */\n  actionId: string;\n  /**\n   * The category with which the action is displayed in the UI.\n   */\n  category: ActionCategory;\n  /**\n   * The title with which the action is displayed in the UI.\n   */\n  title?: () => Platform.UIString.LocalizedString;\n  /**\n   * The type of the icon used to trigger the action.\n   */\n  iconClass?: IconClass;\n  /**\n   * Whether the style of the icon toggles on interaction.\n   */\n  toggledIconClass?: IconClass;\n  /**\n   * Whether the class 'toolbar-toggle-with-red-color' is toggled on the icon on interaction.\n   */\n  toggleWithRedColor?: boolean;\n  /**\n   * Words used to find an action in the Command Menu.\n   */\n  tags?: Array<() => Platform.UIString.LocalizedString>;\n  /**\n   * Whether the action is toggleable.\n   */\n  toggleable?: boolean;\n  /**\n   * Loads the class that handles the action when it is triggered. The common pattern for implementing\n   * this function relies on having the module that contains the actionâ€™s handler lazily loaded. For example:\n   * ```js\n   *  let loadedElementsModule;\n   *\n   *  async function loadElementsModule() {\n   *\n   *    if (!loadedElementsModule) {\n   *      loadedElementsModule = await import('./elements.js');\n   *    }\n   *    return loadedElementsModule;\n   *  }\n   *  UI.ActionRegistration.registerActionExtension({\n   *   <...>\n   *    async loadActionDelegate() {\n   *      const Elements = await loadElementsModule();\n   *      return new Elements.ElementsPanel.ElementsActionDelegate();\n   *    },\n   *   <...>\n   *  });\n   * ```\n   */\n  loadActionDelegate?: () => Promise<ActionDelegate>;\n  /**\n   * Returns the classes that represent the 'context flavors' under which the action is available for triggering.\n   * The context of the application is described in 'flavors' that are usually views added and removed to the context\n   * as the user interacts with the application (e.g when the user moves across views). (See UI.Context)\n   * When the action is supposed to be available globally, that is, it does not depend on the application to have\n   * a specific context, the value of this property should be undefined.\n   *\n   * Because the method is synchronous, context types should be already loaded when the method is invoked.\n   * In the case that an action has context types it depends on, and they haven't been loaded yet, the function should\n   * return an empty array. Once the context types have been loaded, the function should return an array with all types\n   * that it depends on.\n   *\n   * The common pattern for implementing this function is relying on having the module with the corresponding context\n   * types loaded and stored when the related 'view' extension is loaded asynchronously. As an example:\n   *\n   * ```js\n   * let loadedElementsModule;\n   *\n   * async function loadElementsModule() {\n   *\n   *   if (!loadedElementsModule) {\n   *     loadedElementsModule = await import('./elements.js');\n   *   }\n   *   return loadedElementsModule;\n   * }\n   * function maybeRetrieveContextTypes(getClassCallBack: (elementsModule: typeof Elements) => unknown[]): unknown[] {\n   *\n   *   if (loadedElementsModule === undefined) {\n   *     return [];\n   *   }\n   *   return getClassCallBack(loadedElementsModule);\n   * }\n   * UI.ActionRegistration.registerActionExtension({\n   *\n   *   contextTypes() {\n   *     return maybeRetrieveContextTypes(Elements => [Elements.ElementsPanel.ElementsPanel]);\n   *   }\n   *   <...>\n   * });\n   * ```\n   */\n  contextTypes?: () => Array<Platform.Constructor.Constructor<unknown>>;\n  /**\n   * The descriptions for each of the two states in which a toggleable action can be.\n   */\n  options?: ExtensionOption[];\n  /**\n   * The description of the variables (e.g. platform, keys and keybind sets) under which a keyboard shortcut triggers the action.\n   * If a keybind must be available on all platforms, its 'platform' property must be undefined. The same applies to keybind sets\n   * and the keybindSet property.\n   *\n   * Keybinds also depend on the context types of their corresponding action, and so they will only be available when such context types\n   * are flavors of the current appliaction context.\n   */\n  bindings?: Binding[];\n  /**\n   * Whether the action's bindings should be displayed for configuration in the\n   * Settings UI. Setting this to `false` will hide the action from the Shortcuts\n   * tab. Defaults to `true`.\n   */\n  // TODO(crbug.com/436764687): Consider removing this again if parametrized actions get moved to a separate mechanism\n  configurableBindings?: boolean;\n  /**\n   * The name of the experiment an action is associated with. Enabling and disabling the declared\n   * experiment will enable and disable the action respectively.\n   */\n  experiment?: Root.Runtime.ExperimentName;\n  /**\n   * Whether an action needs to be promoted. A new badge is shown next to the menu items then.\n   */\n  featurePromotionId?: string;\n  /**\n   * The name of the setting an action is associated with. Enabling and\n   * disabling the declared setting will enable and disable the action\n   * respectively. Note that changing the setting requires a reload for it to\n   * apply to action registration.\n   */\n  setting?: string;\n  /**\n   * A condition is a function that will make the action available if it\n   * returns true, and not available, otherwise. Make sure that objects you\n   * access from inside the condition function are ready at the time when the\n   * setting conditions are checked.\n   */\n  condition?: Root.Runtime.Condition;\n  /**\n   * Used to sort actions when all registered actions are queried.\n   */\n  order?: number;\n}\n", "// Copyright 2014 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as Common from '../../core/common/common.js';\nimport type * as Platform from '../../core/platform/platform.js';\n\nimport type {ContextFlavorListener} from './ContextFlavorListener.js';\n\nlet contextInstance: Context|undefined;\n\nexport class Context {\n  readonly #flavors = new Map<Platform.Constructor.Constructor<unknown>, object|null>();\n  readonly #eventDispatchers =\n      new Map<Platform.Constructor.Constructor<unknown>, Common.ObjectWrapper.ObjectWrapper<EventTypes>>();\n\n  private constructor() {\n  }\n\n  static instance(opts: {\n    forceNew: boolean|null,\n  } = {forceNew: null}): Context {\n    const {forceNew} = opts;\n    if (!contextInstance || forceNew) {\n      contextInstance = new Context();\n    }\n\n    return contextInstance;\n  }\n\n  static removeInstance(): void {\n    contextInstance = undefined;\n  }\n\n  setFlavor<T extends Object>(flavorType: Platform.Constructor.Constructor<T>, flavorValue: T|null): void {\n    const value = this.#flavors.get(flavorType) || null;\n    if (value === flavorValue) {\n      return;\n    }\n    if (flavorValue) {\n      this.#flavors.set(flavorType, flavorValue);\n    } else {\n      this.#flavors.delete(flavorType);\n    }\n\n    this.#dispatchFlavorChange(flavorType, flavorValue);\n  }\n\n  #dispatchFlavorChange<T extends Object>(flavorType: Platform.Constructor.Constructor<T>, flavorValue: T|null): void {\n    for (const extension of getRegisteredListeners()) {\n      if (extension.contextTypes().includes(flavorType)) {\n        void extension.loadListener().then(instance => instance.flavorChanged(flavorValue));\n      }\n    }\n    const dispatcher = this.#eventDispatchers.get(flavorType);\n    if (!dispatcher) {\n      return;\n    }\n    dispatcher.dispatchEventToListeners(Events.FLAVOR_CHANGED, flavorValue);\n  }\n\n  addFlavorChangeListener<T>(\n      flavorType: Platform.Constructor.Constructor<T>, listener: (arg0: Common.EventTarget.EventTargetEvent<T>) => void,\n      thisObject?: Object): void {\n    let dispatcher = this.#eventDispatchers.get(flavorType);\n    if (!dispatcher) {\n      dispatcher = new Common.ObjectWrapper.ObjectWrapper<EventTypes>();\n      this.#eventDispatchers.set(flavorType, dispatcher);\n    }\n    dispatcher.addEventListener(\n        Events.FLAVOR_CHANGED,\n        listener as Common.EventTarget.EventListener<EventTypes, Events.FLAVOR_CHANGED>,\n        thisObject,\n    );\n  }\n\n  removeFlavorChangeListener<T>(\n      flavorType: Platform.Constructor.Constructor<T>,\n      listener: (arg0: Common.EventTarget.EventTargetEvent<T>) => void,\n      thisObject?: Object,\n      ): void {\n    const dispatcher = this.#eventDispatchers.get(flavorType);\n    if (!dispatcher) {\n      return;\n    }\n    dispatcher.removeEventListener(\n        Events.FLAVOR_CHANGED,\n        listener as Common.EventTarget.EventListener<EventTypes, Events.FLAVOR_CHANGED>,\n        thisObject,\n    );\n    if (!dispatcher.hasEventListeners(Events.FLAVOR_CHANGED)) {\n      this.#eventDispatchers.delete(flavorType);\n    }\n  }\n\n  flavor<T>(flavorType: Platform.Constructor.Constructor<T>): T|null {\n    return (this.#flavors.get(flavorType) as T | null) || null;\n  }\n\n  flavors(): Set<Platform.Constructor.Constructor<unknown>> {\n    return new Set(this.#flavors.keys());\n  }\n}\n\nconst enum Events {\n  FLAVOR_CHANGED = 'FlavorChanged',\n}\n\nexport type EventListenerDirect = Common.EventTarget.EventListener<EventTypes, Events.FLAVOR_CHANGED>;\nexport interface EventTypes {\n  [Events.FLAVOR_CHANGED]: InstanceType<Platform.Constructor.Constructor<unknown>>;\n}\n\nconst registeredListeners: ContextFlavorListenerRegistration[] = [];\n\nexport function registerListener(registration: ContextFlavorListenerRegistration): void {\n  registeredListeners.push(registration);\n}\n\nfunction getRegisteredListeners(): ContextFlavorListenerRegistration[] {\n  return registeredListeners;\n}\nexport interface ContextFlavorListenerRegistration {\n  contextTypes: () => Array<Platform.Constructor.Constructor<unknown>>;\n  loadListener: () => Promise<ContextFlavorListener>;\n}\n", "// Copyright 2014 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport {type Action, getRegisteredActionExtensions, reset as resetActionRegistrations} from './ActionRegistration.js';\nimport {Context} from './Context.js';\n\nlet actionRegistryInstance: ActionRegistry|undefined;\n\nexport class ActionRegistry {\n  private readonly actionsById: Map<string, Action>;\n  private constructor() {\n    this.actionsById = new Map();\n    this.registerActions();\n  }\n\n  static instance(opts: {\n    forceNew: boolean|null,\n  } = {forceNew: null}): ActionRegistry {\n    const {forceNew} = opts;\n    if (!actionRegistryInstance || forceNew) {\n      actionRegistryInstance = new ActionRegistry();\n    }\n\n    return actionRegistryInstance;\n  }\n\n  static removeInstance(): void {\n    actionRegistryInstance = undefined;\n  }\n\n  static reset(): void {\n    ActionRegistry.removeInstance();\n    resetActionRegistrations();\n  }\n\n  private registerActions(): void {\n    for (const action of getRegisteredActionExtensions()) {\n      this.actionsById.set(action.id(), action);\n      if (!action.canInstantiate()) {\n        action.setEnabled(false);\n      }\n    }\n  }\n\n  availableActions(): Action[] {\n    return this.applicableActions([...this.actionsById.keys()], Context.instance());\n  }\n\n  actions(): Action[] {\n    return [...this.actionsById.values()];\n  }\n\n  applicableActions(actionIds: string[], context: Context): Action[] {\n    const applicableActions: Action[] = [];\n    for (const actionId of actionIds) {\n      const action = this.actionsById.get(actionId);\n      if (action?.enabled()) {\n        if (isActionApplicableToContextTypes(action, context.flavors())) {\n          applicableActions.push(action);\n        }\n      }\n    }\n    return applicableActions;\n\n    function isActionApplicableToContextTypes(action: Action, currentContextTypes: Set<unknown>): boolean {\n      const contextTypes = action.contextTypes();\n      if (!contextTypes) {\n        return true;\n      }\n      for (let i = 0; i < contextTypes.length; ++i) {\n        const contextType = contextTypes[i];\n        const isMatching = Boolean(contextType) && currentContextTypes.has(contextType);\n        if (isMatching) {\n          return true;\n        }\n      }\n      return false;\n    }\n  }\n\n  hasAction(actionId: string): boolean {\n    return this.actionsById.has(actionId);\n  }\n\n  getAction(actionId: string): Action {\n    const action = this.actionsById.get(actionId);\n    if (action) {\n      return action;\n    }\n    throw new Error(`Cannot find registered action with ID '${actionId}'`);\n  }\n}\n", "// Copyright 2017 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as Platform from '../../core/platform/platform.js';\n\nimport {Dialog} from './Dialog.js';\nimport {getEnclosingShadowRootForNode} from './DOMUtilities.js';\n\nlet id = 0;\n\nexport function nextId(prefix: string): string {\n  return (prefix || '') + ++id;\n}\n\nexport function bindLabelToControl(label: Element, control: Element): void {\n  const controlId = nextId('labelledControl');\n  control.id = controlId;\n  label.setAttribute('for', controlId);\n}\n\nexport function markAsAlert(element: Element): void {\n  element.setAttribute('role', 'alert');\n  element.setAttribute('aria-live', 'polite');\n}\n\nexport function markAsApplication(element: Element): void {\n  element.setAttribute('role', 'application');\n}\n\nexport function markAsButton(element: Element): void {\n  element.setAttribute('role', 'button');\n}\n\nexport function markAsCheckbox(element: Element): void {\n  element.setAttribute('role', 'checkbox');\n}\n\nexport function markAsCombobox(element: Element): void {\n  element.setAttribute('role', 'combobox');\n}\n\nexport function markAsModalDialog(element: Element): void {\n  element.setAttribute('role', 'dialog');\n  element.setAttribute('aria-modal', 'true');\n}\n\nexport function markAsGroup(element: Element): void {\n  element.setAttribute('role', 'group');\n}\n\nexport function markAsLink(element: Element): void {\n  element.setAttribute('role', 'link');\n}\n\nexport function markAsMenuButton(element: Element): void {\n  markAsButton(element);\n  element.setAttribute('aria-haspopup', 'true');\n}\n\nexport function markAsProgressBar(element: Element, min: number|undefined = 0, max: number|undefined = 100): void {\n  element.setAttribute('role', 'progressbar');\n  element.setAttribute('aria-valuemin', min.toString());\n  element.setAttribute('aria-valuemax', max.toString());\n}\n\nexport function markAsTab(element: Element): void {\n  element.setAttribute('role', 'tab');\n}\n\nexport function markAsTablist(element: Element): void {\n  element.setAttribute('role', 'tablist');\n}\n\nexport function markAsTabpanel(element: Element): void {\n  element.setAttribute('role', 'tabpanel');\n}\n\nexport function markAsTree(element: Element): void {\n  element.setAttribute('role', 'tree');\n}\n\nexport function markAsTreeitem(element: Element): void {\n  element.setAttribute('role', 'treeitem');\n}\n\nexport function markAsTextBox(element: Element): void {\n  element.setAttribute('role', 'textbox');\n}\n\nexport function markAsMenu(element: Element): void {\n  element.setAttribute('role', 'menu');\n}\n\nexport function markAsMenuItem(element: Element): void {\n  element.setAttribute('role', 'menuitem');\n}\n\nexport function markAsMenuItemCheckBox(element: Element): void {\n  element.setAttribute('role', 'menuitemcheckbox');\n}\n\nexport function markAsMenuItemSubMenu(element: Element): void {\n  markAsMenuItem(element);\n  element.setAttribute('aria-haspopup', 'true');\n}\n\nexport function markAsList(element: Element): void {\n  element.setAttribute('role', 'list');\n}\n\nexport function markAsListitem(element: Element): void {\n  element.setAttribute('role', 'listitem');\n}\n\nexport function markAsMain(element: Element): void {\n  element.setAttribute('role', 'main');\n}\n\nexport function markAsComplementary(element: Element): void {\n  element.setAttribute('role', 'complementary');\n}\n\nexport function markAsNavigation(element: Element): void {\n  element.setAttribute('role', 'navigation');\n}\n\n/**\n * Must contain children whose role is option.\n */\nexport function markAsListBox(element: Element): void {\n  element.setAttribute('role', 'listbox');\n}\n\nexport function markAsMultiSelectable(element: Element): void {\n  element.setAttribute('aria-multiselectable', 'true');\n}\n\n/**\n * Must be contained in, or owned by, an element with the role listbox.\n */\nexport function markAsOption(element: Element): void {\n  element.setAttribute('role', 'option');\n}\n\nexport function markAsRadioGroup(element: Element): void {\n  element.setAttribute('role', 'radiogroup');\n}\n\nexport function markAsSlider(element: Element, min: number|undefined = 0, max: number|undefined = 100): void {\n  element.setAttribute('role', 'slider');\n  element.setAttribute('aria-valuemin', String(min));\n  element.setAttribute('aria-valuemax', String(max));\n}\n\nexport function markAsHeading(element: Element, level: number): void {\n  element.setAttribute('role', 'heading');\n  element.setAttribute('aria-level', level.toString());\n}\n\nexport function markAsPoliteLiveRegion(element: Element, isAtomic: boolean): void {\n  element.setAttribute('aria-live', 'polite');\n  if (isAtomic) {\n    element.setAttribute('aria-atomic', 'true');\n  }\n}\n\nexport function hasRole(element: Element): boolean {\n  return element.hasAttribute('role');\n}\n\nexport function removeRole(element: Element): void {\n  element.removeAttribute('role');\n}\n\nexport function setPlaceholder(element: Element, placeholder: string|null): void {\n  if (placeholder) {\n    element.setAttribute('aria-placeholder', placeholder);\n  } else {\n    element.removeAttribute('aria-placeholder');\n  }\n}\n\nexport function markAsPresentation(element: Element): void {\n  element.setAttribute('role', 'presentation');\n}\n\nexport function markAsStatus(element: Element): void {\n  element.setAttribute('role', 'status');\n}\n\nexport function ensureId(element: Element): void {\n  if (!element.id) {\n    element.id = nextId('ariaElement');\n  }\n}\n\nexport function setAriaValueText(element: Element, valueText: string): void {\n  element.setAttribute('aria-valuetext', valueText);\n}\n\nexport function setAriaValueNow(element: Element, value: string): void {\n  element.setAttribute('aria-valuenow', value);\n}\n\nexport function setAriaValueMinMax(element: Element, min: string, max: string): void {\n  element.setAttribute('aria-valuemin', min);\n  element.setAttribute('aria-valuemax', max);\n}\n\nexport function setControls(element: Element, controlledElement: Element|null): void {\n  if (!controlledElement) {\n    element.removeAttribute('aria-controls');\n    return;\n  }\n\n  ensureId(controlledElement);\n  element.setAttribute('aria-controls', controlledElement.id);\n}\n\nexport function setChecked(element: Element, value: boolean): void {\n  element.setAttribute('aria-checked', (Boolean(value)).toString());\n}\n\nexport function setCheckboxAsIndeterminate(element: Element): void {\n  element.setAttribute('aria-checked', 'mixed');\n}\n\nexport function setDisabled(element: Element, value: boolean): void {\n  element.setAttribute('aria-disabled', (Boolean(value)).toString());\n}\n\nexport function setExpanded(element: Element, value: boolean): void {\n  element.setAttribute('aria-expanded', (Boolean(value)).toString());\n}\n\nexport function unsetExpandable(element: Element): void {\n  element.removeAttribute('aria-expanded');\n}\n\nexport function setHidden(element: Element, value: boolean): void {\n  element.setAttribute('aria-hidden', value.toString());\n}\n\nexport function setLevel(element: Element, level: number): void {\n  element.setAttribute('aria-level', level.toString());\n}\n\nexport const enum AutocompleteInteractionModel {\n  INLINE = 'inline',\n  LIST = 'list',\n  BOTH = 'both',\n  NONE = 'none',\n}\n\nexport function setAutocomplete(\n    element: Element, interactionModel: AutocompleteInteractionModel = AutocompleteInteractionModel.NONE): void {\n  element.setAttribute('aria-autocomplete', interactionModel);\n}\n\nexport function clearAutocomplete(element: Element): void {\n  element.removeAttribute('aria-autocomplete');\n}\n\nexport const enum PopupRole {\n  FALSE = 'false',       // (default) Indicates the element does not have a popup.\n  TRUE = 'true',         // Indicates the popup is a menu.\n  MENU = 'menu',         // Indicates the popup is a menu.\n  LIST_BOX = 'listbox',  // Indicates the popup is a listbox.\n  TREE = 'tree',         // Indicates the popup is a tree.\n  GRID = 'grid',         // Indicates the popup is a grid.\n  DIALOG = 'dialog',     // Indicates the popup is a dialog.\n}\n\nexport function setHasPopup(element: Element, value: PopupRole = PopupRole.FALSE): void {\n  if (value !== PopupRole.FALSE) {\n    element.setAttribute('aria-haspopup', value);\n  } else {\n    element.removeAttribute('aria-haspopup');\n  }\n}\n\nexport function setSelected(element: Element, value: boolean): void {\n  // aria-selected behaves differently for false and undefined.\n  // Often times undefined values are unintentionally typed as booleans.\n  // Use !! to make sure this is true or false.\n  element.setAttribute('aria-selected', (Boolean(value)).toString());\n}\n\nexport function clearSelected(element: Element): void {\n  element.removeAttribute('aria-selected');\n}\n\nexport function setInvalid(element: Element, value: boolean): void {\n  if (value) {\n    element.setAttribute('aria-invalid', value.toString());\n  } else {\n    element.removeAttribute('aria-invalid');\n  }\n}\n\nexport function setPressed(element: Element, value: boolean): void {\n  // aria-pressed behaves differently for false and undefined.\n  // Often times undefined values are unintentionally typed as booleans.\n  // Use !! to make sure this is true or false.\n  element.setAttribute('aria-pressed', (Boolean(value)).toString());\n}\n\nexport function setValueNow(element: Element, value: number): void {\n  element.setAttribute('aria-valuenow', value.toString());\n}\n\nexport function setValueText(element: Element, value: number): void {\n  element.setAttribute('aria-valuetext', value.toString());\n}\n\nexport function setProgressBarValue(element: Element, valueNow: number, valueText?: string): void {\n  element.setAttribute('aria-valuenow', valueNow.toString());\n\n  if (valueText) {\n    element.setAttribute('aria-valuetext', valueText);\n  }\n}\n\nexport function setLabel(element: Element, name: string): void {\n  element.setAttribute('aria-label', name);\n}\n\nexport function setDescription(element: Element, description: string): void {\n  // Nodes in the accessibility tree are made up of a core\n  // triplet of \"name\", \"value\", \"description\"\n  // The \"description\" field is taken from either\n  // 1. The title html attribute\n  // 2. The value of the aria-description attribute.\n  // 3. The textContent of an element specified by aria-describedby\n  //\n  // The title attribute has the side effect of causing tooltips\n  // to appear with the description when the element is hovered.\n  // This is usually fine, except that DevTools has its own styled\n  // tooltips which would interfere with the browser tooltips.\n  element.setAttribute('aria-description', description);\n}\n\nexport function setActiveDescendant(element: Element, activedescendant: Element|null): void {\n  if (!activedescendant) {\n    element.removeAttribute('aria-activedescendant');\n    return;\n  }\n\n  if (activedescendant.isConnected && element.isConnected) {\n    console.assert(\n        getEnclosingShadowRootForNode(activedescendant) === getEnclosingShadowRootForNode(element),\n        'elements are not in the same shadow dom');\n  }\n\n  ensureId(activedescendant);\n  element.setAttribute('aria-activedescendant', activedescendant.id);\n}\n\nexport function setSetSize(element: Element, size: number): void {\n  element.setAttribute('aria-setsize', size.toString());\n}\n\nexport function setPositionInSet(element: Element, position: number): void {\n  element.setAttribute('aria-posinset', position.toString());\n}\n\nexport const enum AnnouncerRole {\n  ALERT = 'alert',\n  STATUS = 'status',\n}\nexport class LiveAnnouncer {\n  static #announcerElementsByRole: Record<AnnouncerRole, WeakMap<HTMLElement, HTMLElement>> = {\n    [AnnouncerRole.ALERT]: new WeakMap<HTMLElement, HTMLElement>(),\n    [AnnouncerRole.STATUS]: new WeakMap<HTMLElement, HTMLElement>(),\n  };\n\n  static #hideFromLayout(element: HTMLElement): void {\n    element.style.position = 'absolute';\n    element.style.left = '-999em';\n    element.style.width = '100em';\n    element.style.overflow = 'hidden';\n  }\n\n  static #createAnnouncerElement(container: HTMLElement, role: AnnouncerRole): HTMLDivElement {\n    const element = container.createChild('div');\n    LiveAnnouncer.#hideFromLayout(element);\n    element.setAttribute('role', role);\n    element.setAttribute('aria-atomic', 'true');\n    return element;\n  }\n\n  static #removeAnnouncerElement(container: HTMLElement, role: AnnouncerRole): void {\n    const element = LiveAnnouncer.#announcerElementsByRole[role].get(container);\n    if (element) {\n      element.remove();\n      LiveAnnouncer.#announcerElementsByRole[role].delete(container);\n    }\n  }\n\n  /**\n   * Announces the provided message using a dedicated ARIA alert element (`role=\"alert\"`).\n   * Ensures messages are announced even if identical to the previous message by appending\n   * a non-breaking space ('\\u00A0') when necessary. This works around screen reader\n   * optimizations that might otherwise silence repeated identical alerts. The element's\n   * `aria-atomic=\"true\"` attribute ensures the entire message is announced upon change.\n   *\n   * The alert element is associated with the currently active dialog's content element\n   * if a dialog is showing, otherwise defaults to an element associated with the document body.\n   * Messages longer than 10000 characters will be trimmed.\n   *\n   * @param message The message to be announced.\n   */\n  static #announce(message: string, role: AnnouncerRole): void {\n    const dialog = Dialog.getInstance();\n    const element =\n        LiveAnnouncer.getOrCreateAnnouncerElement(dialog?.isShowing() ? dialog.contentElement : undefined, role);\n\n    const announcedMessage = element.textContent === message ? `${message}\\u00A0` : message;\n    element.textContent = Platform.StringUtilities.trimEndWithMaxLength(announcedMessage, 10000);\n  }\n\n  static getOrCreateAnnouncerElement(container: HTMLElement = document.body, role: AnnouncerRole, opts?: {\n    force: boolean,\n  }): HTMLElement {\n    const existingAnnouncerElement = LiveAnnouncer.#announcerElementsByRole[role].get(container);\n    if (existingAnnouncerElement && existingAnnouncerElement.isConnected && !opts?.force) {\n      return existingAnnouncerElement;\n    }\n\n    const newAnnouncerElement = LiveAnnouncer.#createAnnouncerElement(container, role);\n    LiveAnnouncer.#announcerElementsByRole[role].set(container, newAnnouncerElement);\n    return newAnnouncerElement;\n  }\n\n  static initializeAnnouncerElements(container: HTMLElement = document.body): void {\n    LiveAnnouncer.getOrCreateAnnouncerElement(container, AnnouncerRole.ALERT);\n    LiveAnnouncer.getOrCreateAnnouncerElement(container, AnnouncerRole.STATUS);\n  }\n\n  static removeAnnouncerElements(container: HTMLElement = document.body): void {\n    LiveAnnouncer.#removeAnnouncerElement(container, AnnouncerRole.ALERT);\n    LiveAnnouncer.#removeAnnouncerElement(container, AnnouncerRole.STATUS);\n  }\n\n  static alert(message: string): void {\n    LiveAnnouncer.#announce(message, AnnouncerRole.ALERT);\n  }\n\n  static status(message: string): void {\n    LiveAnnouncer.#announce(message, AnnouncerRole.STATUS);\n  }\n}\n", "// Copyright 2012 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\n/* eslint-disable @devtools/no-imperative-dom-api */\n\nimport * as Common from '../../core/common/common.js';\nimport * as VisualLogging from '../visual_logging/visual_logging.js';\n\nimport * as ARIAUtils from './ARIAUtils.js';\nimport dialogStyles from './dialog.css.js';\nimport {GlassPane, PointerEventsBehavior} from './GlassPane.js';\nimport {InspectorView} from './InspectorView.js';\nimport {KeyboardShortcut, Keys} from './KeyboardShortcut.js';\nimport type {SplitWidget} from './SplitWidget.js';\nimport {WidgetFocusRestorer} from './Widget.js';\n\nexport class Dialog extends Common.ObjectWrapper.eventMixin<EventTypes, typeof GlassPane>(GlassPane) {\n  private tabIndexBehavior = OutsideTabIndexBehavior.DISABLE_ALL_OUTSIDE_TAB_INDEX;\n  private tabIndexMap = new Map<HTMLElement, number>();\n  private focusRestorer: WidgetFocusRestorer|null = null;\n  private closeOnEscape = true;\n  private targetDocument: Document|null = null;\n  private readonly targetDocumentKeyDownHandler: (event: KeyboardEvent) => void;\n  private escapeKeyCallback: ((arg0: KeyboardEvent) => void)|null = null;\n\n  constructor(jslogContext?: string) {\n    super();\n    this.registerRequiredCSS(dialogStyles);\n    this.contentElement.tabIndex = 0;\n    this.contentElement.addEventListener('focus', () => this.widget().focus(), false);\n    if (jslogContext) {\n      this.contentElement.setAttribute(\n          'jslog', `${VisualLogging.dialog(jslogContext).track({resize: true, keydown: 'Escape'})}`);\n    }\n    this.setPointerEventsBehavior(PointerEventsBehavior.BLOCKED_BY_GLASS_PANE);\n    this.setOutsideClickCallback(event => {\n      // If there are stacked dialogs, we only want to\n      // handle the outside click for the top most dialog.\n      if (Dialog.getInstance() !== this) {\n        return;\n      }\n\n      this.hide();\n      event.consume(true);\n    });\n    ARIAUtils.markAsModalDialog(this.contentElement);\n    this.targetDocumentKeyDownHandler = this.onKeyDown.bind(this);\n  }\n\n  static hasInstance(): boolean {\n    return Dialog.dialogs.length > 0;\n  }\n\n  /**\n   * If there is only one dialog, returns that.\n   * If there are stacked dialogs, returns the topmost one.\n   */\n  static getInstance(): Dialog|null {\n    return Dialog.dialogs[Dialog.dialogs.length - 1] || null;\n  }\n\n  /**\n   * `stack` parameter is needed for being able to open a dialog on top\n   * of an existing dialog. The main reason is, Settings Tab is\n   * implemented as a Dialog. So, if we want to open a dialog on the\n   * Settings Tab, we need to stack it on top of that dialog.\n   *\n   * @param where Container element of the dialog.\n   * @param stack Whether to open this dialog on top of an existing dialog.\n   */\n  override show(where?: Document|Element, stack?: boolean): void {\n    const document = (where instanceof Document ? where : (where || InspectorView.instance().element).ownerDocument);\n    this.targetDocument = document;\n    this.targetDocument.addEventListener('keydown', this.targetDocumentKeyDownHandler, true);\n\n    if (!stack && Dialog.dialogs.length) {\n      Dialog.dialogs.forEach(dialog => dialog.hide());\n    }\n    Dialog.dialogs.push(this);\n    this.disableTabIndexOnElements(document);\n    super.show(document);\n    this.focusRestorer = new WidgetFocusRestorer(this.widget());\n  }\n\n  override hide(): void {\n    if (this.focusRestorer) {\n      this.focusRestorer.restore();\n    }\n    super.hide();\n\n    if (this.targetDocument) {\n      this.targetDocument.removeEventListener('keydown', this.targetDocumentKeyDownHandler, true);\n    }\n    this.restoreTabIndexOnElements();\n    this.dispatchEventToListeners(Events.HIDDEN);\n    const index = Dialog.dialogs.indexOf(this);\n    if (index !== -1) {\n      Dialog.dialogs.splice(index, 1);\n    }\n  }\n\n  setAriaLabel(label: string): void {\n    ARIAUtils.setLabel(this.contentElement, label);\n  }\n\n  setCloseOnEscape(close: boolean): void {\n    this.closeOnEscape = close;\n  }\n\n  setEscapeKeyCallback(callback: (arg0: KeyboardEvent) => void): void {\n    this.escapeKeyCallback = callback;\n  }\n\n  addCloseButton(): void {\n    const closeButton = this.contentElement.createChild('dt-close-button', 'dialog-close-button');\n    closeButton.addEventListener('click', this.hide.bind(this), false);\n  }\n\n  setOutsideTabIndexBehavior(tabIndexBehavior: OutsideTabIndexBehavior): void {\n    this.tabIndexBehavior = tabIndexBehavior;\n  }\n\n  private disableTabIndexOnElements(document: Document): void {\n    if (this.tabIndexBehavior === OutsideTabIndexBehavior.PRESERVE_TAB_INDEX) {\n      return;\n    }\n\n    let exclusionSet: Set<HTMLElement>|(Set<HTMLElement>| null) = (null as Set<HTMLElement>| null);\n    if (this.tabIndexBehavior === OutsideTabIndexBehavior.PRESERVE_MAIN_VIEW_TAB_INDEX) {\n      exclusionSet = this.getMainWidgetTabIndexElements(InspectorView.instance().ownerSplit());\n    }\n\n    this.tabIndexMap.clear();\n    let node: (Node|null)|Document = document;\n    for (; node; node = node.traverseNextNode(document)) {\n      if (node instanceof HTMLElement) {\n        const element = (node);\n        const tabIndex = element.tabIndex;\n        if (!exclusionSet?.has(element)) {\n          if (tabIndex >= 0) {\n            this.tabIndexMap.set(element, tabIndex);\n            element.tabIndex = -1;\n          } else if (element.hasAttribute('contenteditable')) {\n            this.tabIndexMap.set(element, element.hasAttribute('tabindex') ? tabIndex : 0);\n            element.tabIndex = -1;\n          }\n        }\n      }\n    }\n  }\n\n  private getMainWidgetTabIndexElements(splitWidget: SplitWidget|null): Set<HTMLElement> {\n    const elementSet = new Set<HTMLElement>();\n    if (!splitWidget) {\n      return elementSet;\n    }\n\n    const mainWidget = splitWidget.mainWidget();\n    if (!mainWidget?.element) {\n      return elementSet;\n    }\n\n    let node: Node|null = mainWidget.element;\n    for (; node; node = node.traverseNextNode(mainWidget.element)) {\n      if (!(node instanceof HTMLElement)) {\n        continue;\n      }\n\n      const element = (node);\n      const tabIndex = element.tabIndex;\n      if (tabIndex < 0) {\n        continue;\n      }\n\n      elementSet.add(element);\n    }\n\n    return elementSet;\n  }\n\n  private restoreTabIndexOnElements(): void {\n    for (const element of this.tabIndexMap.keys()) {\n      element.tabIndex = (this.tabIndexMap.get(element) as number);\n    }\n    this.tabIndexMap.clear();\n  }\n\n  private onKeyDown(event: KeyboardEvent): void {\n    const keyboardEvent = event;\n    if (Dialog.getInstance() !== this) {\n      return;\n    }\n    if (keyboardEvent.keyCode === Keys.Esc.code && KeyboardShortcut.hasNoModifiers(event)) {\n      if (this.escapeKeyCallback) {\n        this.escapeKeyCallback(event);\n      }\n\n      if (event.handled) {\n        return;\n      }\n\n      if (this.closeOnEscape) {\n        event.consume(true);\n        this.hide();\n      }\n    }\n  }\n\n  private static dialogs: Dialog[] = [];\n}\n\nexport const enum Events {\n  HIDDEN = 'hidden',\n}\n\nexport interface EventTypes {\n  [Events.HIDDEN]: void;\n}\n\nexport const enum OutsideTabIndexBehavior {\n  DISABLE_ALL_OUTSIDE_TAB_INDEX = 'DisableAllTabIndex',\n  PRESERVE_MAIN_VIEW_TAB_INDEX = 'PreserveMainViewTabIndex',\n  PRESERVE_TAB_INDEX = 'PreserveTabIndex',\n}\n", "// Copyright 2025 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n// IMPORTANT: this file is auto generated. Please do not edit this file.\n/* istanbul ignore file */\nexport default `/*\n * Copyright 2015 The Chromium Authors\n * Use of this source code is governed by a BSD-style license that can be\n * found in the LICENSE file.\n */\n\n.widget {\n  border-radius: var(--sys-shape-corner-small);\n  box-shadow: var(--sys-elevation-level3);\n  background: var(--sys-color-cdt-base-container);\n  justify-content: flex-start;\n  align-items: stretch;\n  display: flex;\n  min-width: min(100vw, var(--sys-size-30));\n}\n\n.dialog-close-button {\n  position: absolute;\n  right: 9px;\n  top: 9px;\n  z-index: 1;\n}\n\n/*# sourceURL=${import.meta.resolve('./dialog.css')} */`;", "// Copyright 2017 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n/* eslint-disable @devtools/no-imperative-dom-api */\nimport type {Size} from '../../models/geometry/geometry.js';\n\nimport glassPaneStyles from './glassPane.css.js';\nimport {deepElementFromEvent, measuredScrollbarWidth} from './UIUtils.js';\nimport {Widget} from './Widget.js';\n\nexport class GlassPane {\n  readonly #widget;\n\n  element: typeof Widget.prototype.element;\n  contentElement: typeof Widget.prototype.contentElement;\n  private readonly onMouseDownBound: (event: Event) => void;\n  private onClickOutsideCallback: ((arg0: Event) => void)|null = null;\n  #onHideCallback: (() => void)|null = null;\n  private maxSize: Size|null = null;\n  private positionX: number|null = null;\n  private positionY: number|null = null;\n  private anchorBox: AnchorBox|null = null;\n  private anchorBehavior = AnchorBehavior.PREFER_TOP;\n  private sizeBehavior = SizeBehavior.SET_EXACT_SIZE;\n  private marginBehavior = MarginBehavior.DEFAULT_MARGIN;\n  #ignoreLeftMargin = false;\n\n  constructor(jslog?: string) {\n    this.#widget = new Widget({jslog, useShadowDom: true});\n    this.#widget.markAsRoot();\n    this.#widget.onDetach = this.#onDetach.bind(this);\n    this.element = this.#widget.element;\n    this.contentElement = this.#widget.contentElement;\n\n    this.registerRequiredCSS(glassPaneStyles);\n    this.setPointerEventsBehavior(PointerEventsBehavior.PIERCE_GLASS_PANE);\n\n    this.onMouseDownBound = this.onMouseDown.bind(this);\n  }\n\n  setJsLog(jslog: string): void {\n    this.contentElement.setAttribute('jslog', jslog);\n  }\n\n  isShowing(): boolean {\n    return this.#widget.isShowing();\n  }\n\n  registerRequiredCSS(...cssFiles: Array<string&{_tag: 'CSS-in-JS'}>): void {\n    this.#widget.registerRequiredCSS(...cssFiles);\n  }\n\n  setDefaultFocusedElement(element: Element|null): void {\n    this.#widget.setDefaultFocusedElement(element);\n  }\n\n  setDimmed(dimmed: boolean): void {\n    this.element.classList.toggle('dimmed-pane', dimmed);\n  }\n\n  setPointerEventsBehavior(pointerEventsBehavior: PointerEventsBehavior): void {\n    this.element.classList.toggle(\n        'no-pointer-events', pointerEventsBehavior !== PointerEventsBehavior.BLOCKED_BY_GLASS_PANE);\n    this.contentElement.classList.toggle(\n        'no-pointer-events', pointerEventsBehavior === PointerEventsBehavior.PIERCE_CONTENTS);\n  }\n\n  setOutsideClickCallback(callback: ((arg0: Event) => void)|null): void {\n    this.onClickOutsideCallback = callback;\n  }\n\n  setOnHideCallback(cb: () => void): void {\n    this.#onHideCallback = cb;\n  }\n\n  setMaxContentSize(size: Size|null): void {\n    this.maxSize = size;\n    this.positionContent();\n  }\n\n  setSizeBehavior(sizeBehavior: SizeBehavior): void {\n    this.sizeBehavior = sizeBehavior;\n    this.positionContent();\n  }\n\n  setContentPosition(x: number|null, y: number|null): void {\n    this.positionX = x;\n    this.positionY = y;\n    this.positionContent();\n  }\n\n  setContentAnchorBox(anchorBox: AnchorBox|null): void {\n    this.anchorBox = anchorBox;\n    this.positionContent();\n  }\n\n  setAnchorBehavior(behavior: AnchorBehavior): void {\n    this.anchorBehavior = behavior;\n  }\n\n  setMarginBehavior(behavior: MarginBehavior): void {\n    this.marginBehavior = behavior;\n  }\n\n  setIgnoreLeftMargin(ignore: boolean): void {\n    this.#ignoreLeftMargin = ignore;\n  }\n\n  show(document: Document): void {\n    if (this.isShowing()) {\n      return;\n    }\n    // TODO(crbug.com/1006759): Extract the magic number\n    // Deliberately starts with 3000 to hide other z-indexed elements below.\n    this.element.style.zIndex = `${3000 + 1000 * panes.size}`;\n    this.element.setAttribute('data-devtools-glass-pane', '');\n    document.body.addEventListener('mousedown', this.onMouseDownBound, true);\n    document.body.addEventListener('pointerdown', this.onMouseDownBound, true);\n    this.#widget.show(document.body);\n    panes.add(this);\n    this.positionContent();\n  }\n\n  hide(): void {\n    if (!this.isShowing()) {\n      return;\n    }\n    this.#widget.detach();\n    if (this.#onHideCallback) {\n      this.#onHideCallback();\n    }\n  }\n\n  #onDetach(): void {\n    panes.delete(this);\n    this.element.ownerDocument.body.removeEventListener('mousedown', this.onMouseDownBound, true);\n    this.element.ownerDocument.body.removeEventListener('pointerdown', this.onMouseDownBound, true);\n  }\n\n  private onMouseDown(event: Event): void {\n    if (!this.onClickOutsideCallback) {\n      return;\n    }\n    const node = deepElementFromEvent(event);\n    if (!node || this.contentElement.isSelfOrAncestor(node)) {\n      return;\n    }\n    this.onClickOutsideCallback.call(null, event);\n  }\n\n  positionContent(): void {\n    if (!this.isShowing()) {\n      return;\n    }\n\n    const gutterSize = this.marginBehavior === MarginBehavior.NO_MARGIN ? 0 : 3;\n    const scrollbarSize = measuredScrollbarWidth(this.element.ownerDocument);\n    const offsetSize = 10;\n\n    const container = (containers.get((this.element.ownerDocument))) as HTMLElement;\n    if (this.sizeBehavior === SizeBehavior.MEASURE_CONTENT) {\n      this.contentElement.positionAt(0, 0);\n      this.contentElement.style.width = '';\n      this.contentElement.style.maxWidth = '';\n      this.contentElement.style.height = '';\n      this.contentElement.style.maxHeight = '';\n    }\n\n    const containerWidth = container.offsetWidth;\n    const containerHeight = container.offsetHeight;\n\n    let width = containerWidth - gutterSize * 2;\n    let height = containerHeight - gutterSize * 2;\n    let positionX = gutterSize;\n    let positionY = gutterSize;\n\n    if (this.maxSize) {\n      width = Math.min(width, this.maxSize.width);\n      height = Math.min(height, this.maxSize.height);\n    }\n\n    if (this.sizeBehavior === SizeBehavior.MEASURE_CONTENT) {\n      const measuredRect = this.contentElement.getBoundingClientRect();\n      const widthOverflow = height < measuredRect.height ? scrollbarSize : 0;\n      const heightOverflow = width < measuredRect.width ? scrollbarSize : 0;\n      width = Math.min(width, measuredRect.width + widthOverflow);\n      height = Math.min(height, measuredRect.height + heightOverflow);\n    }\n\n    if (this.anchorBox) {\n      const anchorBox = this.anchorBox.relativeToElement(container);\n      let behavior: AnchorBehavior.PREFER_BOTTOM|AnchorBehavior.PREFER_TOP|AnchorBehavior.PREFER_RIGHT|\n          AnchorBehavior.PREFER_LEFT|AnchorBehavior = this.anchorBehavior;\n\n      if (behavior === AnchorBehavior.PREFER_TOP || behavior === AnchorBehavior.PREFER_BOTTOM) {\n        const top = anchorBox.y - 2 * gutterSize;\n        const bottom = containerHeight - anchorBox.y - anchorBox.height - 2 * gutterSize;\n        if (behavior === AnchorBehavior.PREFER_TOP && top < height && bottom > top) {\n          behavior = AnchorBehavior.PREFER_BOTTOM;\n        }\n        if (behavior === AnchorBehavior.PREFER_BOTTOM && bottom < height && top > bottom) {\n          behavior = AnchorBehavior.PREFER_TOP;\n        }\n\n        let enoughHeight = true;\n        if (behavior === AnchorBehavior.PREFER_TOP) {\n          positionY = Math.max(gutterSize, anchorBox.y - height - gutterSize);\n          const spaceTop = anchorBox.y - positionY - gutterSize;\n          if (this.sizeBehavior === SizeBehavior.MEASURE_CONTENT) {\n            if (height > spaceTop) {\n              enoughHeight = false;\n            }\n          } else {\n            height = Math.min(height, spaceTop);\n          }\n        } else {\n          positionY = anchorBox.y + anchorBox.height + gutterSize;\n          const spaceBottom = containerHeight - positionY - gutterSize;\n          if (this.sizeBehavior === SizeBehavior.MEASURE_CONTENT) {\n            if (height > spaceBottom) {\n              positionY = containerHeight - gutterSize - height;\n              enoughHeight = false;\n            }\n          } else {\n            height = Math.min(height, spaceBottom);\n          }\n        }\n\n        const naturalPositionX = Math.min(anchorBox.x, containerWidth - width - gutterSize);\n        positionX = Math.max(gutterSize, naturalPositionX);\n        if (this.#ignoreLeftMargin && gutterSize > naturalPositionX) {\n          positionX = 0;\n        }\n\n        if (!enoughHeight) {\n          positionX = Math.min(positionX + offsetSize, containerWidth - width - gutterSize);\n        } else if (positionX - offsetSize >= gutterSize) {\n          positionX -= offsetSize;\n        }\n        width = Math.min(width, containerWidth - positionX - gutterSize);\n      } else {\n        const left = anchorBox.x - 2 * gutterSize;\n        const right = containerWidth - anchorBox.x - anchorBox.width - 2 * gutterSize;\n        if (behavior === AnchorBehavior.PREFER_LEFT && left < width && right > left) {\n          behavior = AnchorBehavior.PREFER_RIGHT;\n        }\n        if (behavior === AnchorBehavior.PREFER_RIGHT && right < width && left > right) {\n          behavior = AnchorBehavior.PREFER_LEFT;\n        }\n\n        let enoughWidth = true;\n        if (behavior === AnchorBehavior.PREFER_LEFT) {\n          positionX = Math.max(gutterSize, anchorBox.x - width - gutterSize);\n          const spaceLeft = anchorBox.x - positionX - gutterSize;\n          if (this.sizeBehavior === SizeBehavior.MEASURE_CONTENT) {\n            if (width > spaceLeft) {\n              enoughWidth = false;\n            }\n          } else {\n            width = Math.min(width, spaceLeft);\n          }\n        } else {\n          positionX = anchorBox.x + anchorBox.width + gutterSize;\n          const spaceRight = containerWidth - positionX - gutterSize;\n          if (this.sizeBehavior === SizeBehavior.MEASURE_CONTENT) {\n            if (width > spaceRight) {\n              positionX = containerWidth - gutterSize - width;\n              enoughWidth = false;\n            }\n          } else {\n            width = Math.min(width, spaceRight);\n          }\n        }\n\n        positionY = Math.max(gutterSize, Math.min(anchorBox.y, containerHeight - height - gutterSize));\n        if (!enoughWidth) {\n          positionY = Math.min(positionY + offsetSize, containerHeight - height - gutterSize);\n        } else if (positionY - offsetSize >= gutterSize) {\n          positionY -= offsetSize;\n        }\n        height = Math.min(height, containerHeight - positionY - gutterSize);\n      }\n    } else {\n      positionX = this.positionX !== null ? this.positionX : (containerWidth - width) / 2;\n      positionY = this.positionY !== null ? this.positionY : (containerHeight - height) / 2;\n      width = Math.min(width, containerWidth - positionX - gutterSize);\n      height = Math.min(height, containerHeight - positionY - gutterSize);\n    }\n\n    this.contentElement.style.width = width + 'px';\n    if (this.sizeBehavior === SizeBehavior.SET_EXACT_WIDTH_MAX_HEIGHT) {\n      this.contentElement.style.maxHeight = height + 'px';\n    } else {\n      this.contentElement.style.height = height + 'px';\n    }\n\n    this.contentElement.positionAt(positionX, positionY, container);\n    this.#widget.doResize();\n  }\n\n  widget(): Widget {\n    return this.#widget;\n  }\n\n  static setContainer(element: Element): void {\n    containers.set((element.ownerDocument), element);\n    GlassPane.containerMoved(element);\n  }\n\n  static container(document: Document): Element {\n    return containers.get(document) as Element;\n  }\n\n  static containerMoved(element: Element): void {\n    for (const pane of panes) {\n      if (pane.isShowing() && pane.element.ownerDocument === element.ownerDocument) {\n        pane.positionContent();\n      }\n    }\n  }\n}\n\nexport const enum PointerEventsBehavior {\n  BLOCKED_BY_GLASS_PANE = 'BlockedByGlassPane',\n  PIERCE_GLASS_PANE = 'PierceGlassPane',\n  PIERCE_CONTENTS = 'PierceContents',\n}\n\nexport const enum AnchorBehavior {\n  PREFER_TOP = 'PreferTop',\n  PREFER_BOTTOM = 'PreferBottom',\n  PREFER_LEFT = 'PreferLeft',\n  PREFER_RIGHT = 'PreferRight',\n}\n\nexport const enum SizeBehavior {\n  SET_EXACT_SIZE = 'SetExactSize',\n  SET_EXACT_WIDTH_MAX_HEIGHT = 'SetExactWidthMaxHeight',\n  MEASURE_CONTENT = 'MeasureContent',\n}\n\nexport const enum MarginBehavior {\n  DEFAULT_MARGIN = 'DefaultMargin',\n  NO_MARGIN = 'NoMargin',\n}\n\nconst containers = new Map<Document, Element>();\nconst panes = new Set<GlassPane>();\n\n/** Exported for layout tests. **/\nexport const GlassPanePanes = panes;\n", "// Copyright 2025 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n// IMPORTANT: this file is auto generated. Please do not edit this file.\n/* istanbul ignore file */\nexport default `/*\n * Copyright 2017 The Chromium Authors\n * Use of this source code is governed by a BSD-style license that can be\n * found in the LICENSE file.\n */\n\n:host {\n  position: absolute !important; /* stylelint-disable-line declaration-no-important */\n  inset: 0;\n  overflow: hidden;\n  contain: strict;\n  background-color: transparent;\n}\n\n:host-context(.dimmed-pane) {\n  background-color: var(--sys-color-state-scrim);\n}\n\n:host-context(.no-pointer-events) {\n  pointer-events: none;\n}\n\n.widget {\n  display: flex;\n  background-color: transparent;\n  pointer-events: auto;\n  flex: none;\n}\n\n.no-pointer-events {\n  pointer-events: none;\n}\n\n/*# sourceURL=${import.meta.resolve('./glassPane.css')} */`;", "// Copyright 2021 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n/* eslint-disable @devtools/no-imperative-dom-api */\n\n/*\n * Copyright (C) 2011 Google Inc.  All rights reserved.\n * Copyright (C) 2006, 2007, 2008 Apple Inc.  All rights reserved.\n * Copyright (C) 2007 Matt Lilek (pewtermoose@gmail.com).\n * Copyright (C) 2009 Joseph Pecoraro\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions\n * are met:\n *\n * 1.  Redistributions of source code must retain the above copyright\n *     notice, this list of conditions and the following disclaimer.\n * 2.  Redistributions in binary form must reproduce the above copyright\n *     notice, this list of conditions and the following disclaimer in the\n *     documentation and/or other materials provided with the distribution.\n * 3.  Neither the name of Apple Computer, Inc. (\"Apple\") nor the names of\n *     its contributors may be used to endorse or promote products derived\n *     from this software without specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY APPLE AND ITS CONTRIBUTORS \"AS IS\" AND ANY\n * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL APPLE OR ITS CONTRIBUTORS BE LIABLE FOR ANY\n * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF\n * THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\nimport './Toolbar.js';\n\nimport * as Common from '../../core/common/common.js';\nimport * as Host from '../../core/host/host.js';\nimport * as i18n from '../../core/i18n/i18n.js';\nimport * as Platform from '../../core/platform/platform.js';\nimport * as Geometry from '../../models/geometry/geometry.js';\nimport * as Buttons from '../components/buttons/buttons.js';\nimport {Icon, type IconData} from '../kit/kit.js';\nimport * as Lit from '../lit/lit.js';\nimport * as VisualLogging from '../visual_logging/visual_logging.js';\n\nimport * as ActionRegistration from './ActionRegistration.js';\nimport {ActionRegistry} from './ActionRegistry.js';\nimport * as ARIAUtils from './ARIAUtils.js';\nimport checkboxTextLabelStyles from './checkboxTextLabel.css.js';\nimport confirmDialogStyles from './confirmDialog.css.js';\nimport {Dialog} from './Dialog.js';\nimport {appendStyle, deepActiveElement, rangeOfWord} from './DOMUtilities.js';\nimport {GlassPane, PointerEventsBehavior, SizeBehavior} from './GlassPane.js';\nimport inspectorCommonStyles from './inspectorCommon.css.js';\nimport {InspectorView} from './InspectorView.js';\nimport {KeyboardShortcut, Keys} from './KeyboardShortcut.js';\nimport smallBubbleStyles from './smallBubble.css.js';\nimport {Tooltip} from './Tooltip.js';\nimport {Widget} from './Widget.js';\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    'devtools-checkbox': CheckboxLabel;\n    'dt-close-button': DevToolsCloseButton;\n    'dt-icon-label': DevToolsIconLabel;\n    'dt-small-bubble': DevToolsSmallBubble;\n  }\n}\nconst {Directives, render} = Lit;\n\nconst UIStrings = {\n  /**\n   * @description label to open link externally\n   */\n  openInNewTab: 'Open in new tab',\n  /**\n   * @description label to copy link address\n   */\n  copyLinkAddress: 'Copy link address',\n  /**\n   * @description label to copy file name\n   */\n  copyFileName: 'Copy file name',\n  /**\n   * @description label for the profiler control button\n   */\n  anotherProfilerIsAlreadyActive: 'Another profiler is already active',\n  /**\n   * @description Text in UIUtils\n   */\n  promiseResolvedAsync: 'Promise resolved (async)',\n  /**\n   * @description Text in UIUtils\n   */\n  promiseRejectedAsync: 'Promise rejected (async)',\n  /**\n   * @description Text for the title of asynchronous function calls group in Call Stack\n   */\n  asyncCall: 'Async Call',\n  /**\n   * @description Text for the name of anonymous functions\n   */\n  anonymous: '(anonymous)',\n  /**\n   * @description Text to close something\n   */\n  close: 'Close',\n  /**\n   * @description Text on a button for message dialog\n   */\n  ok: 'OK',\n  /**\n   * @description Text to cancel something\n   */\n  cancel: 'Cancel',\n  /**\n   * @description Text for the new badge appearing next to some menu items\n   */\n  new: 'NEW',\n} as const;\nconst str_ = i18n.i18n.registerUIStrings('ui/legacy/UIUtils.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\n\nexport function installDragHandle(\n    element: Element, elementDragStart: ((arg0: MouseEvent) => boolean)|null, elementDrag: (arg0: MouseEvent) => void,\n    elementDragEnd: ((arg0: MouseEvent) => void)|null, cursor: string|null, hoverCursor?: string|null,\n    startDelay?: number, mouseDownPreventDefault = true): void {\n  function onMouseDown(event: Event): void {\n    const dragHandler = new DragHandler();\n    const dragStart = (): void => dragHandler.elementDragStart(\n        element, elementDragStart, elementDrag, elementDragEnd, cursor, event, mouseDownPreventDefault);\n    if (startDelay) {\n      startTimer = window.setTimeout(dragStart, startDelay);\n    } else {\n      dragStart();\n    }\n  }\n\n  function onMouseUp(): void {\n    if (startTimer) {\n      window.clearTimeout(startTimer);\n    }\n    startTimer = null;\n  }\n\n  let startTimer: number|null;\n  element.addEventListener('pointerdown', onMouseDown, false);\n  if (startDelay) {\n    element.addEventListener('pointerup', onMouseUp, false);\n  }\n  if (hoverCursor !== null) {\n    (element as HTMLElement).style.cursor = hoverCursor || cursor || '';\n  }\n}\n\nexport function elementDragStart(\n    targetElement: Element, elementDragStart: ((arg0: MouseEvent) => boolean)|null,\n    elementDrag: (arg0: MouseEvent) => void, elementDragEnd: ((arg0: MouseEvent) => void)|null, cursor: string|null,\n    event: Event): void {\n  const dragHandler = new DragHandler();\n  dragHandler.elementDragStart(targetElement, elementDragStart, elementDrag, elementDragEnd, cursor, event);\n}\n\nclass DragHandler {\n  private glassPaneInUse?: boolean;\n  private elementDraggingEventListener?: ((arg0: MouseEvent) => void|boolean);\n  private elementEndDraggingEventListener?: ((arg0: MouseEvent) => void)|null;\n  private dragEventsTargetDocument?: Document;\n  private dragEventsTargetDocumentTop?: Document;\n  private restoreCursorAfterDrag?: (() => void);\n\n  constructor() {\n    this.elementDragMove = this.elementDragMove.bind(this);\n    this.elementDragEnd = this.elementDragEnd.bind(this);\n    this.mouseOutWhileDragging = this.mouseOutWhileDragging.bind(this);\n  }\n\n  private createGlassPane(): void {\n    this.glassPaneInUse = true;\n    if (!DragHandler.glassPaneUsageCount++) {\n      DragHandler.glassPane = new GlassPane();\n      DragHandler.glassPane.setPointerEventsBehavior(PointerEventsBehavior.BLOCKED_BY_GLASS_PANE);\n      if (DragHandler.documentForMouseOut) {\n        DragHandler.glassPane.show(DragHandler.documentForMouseOut);\n      }\n    }\n  }\n\n  private disposeGlassPane(): void {\n    if (!this.glassPaneInUse) {\n      return;\n    }\n    this.glassPaneInUse = false;\n    if (--DragHandler.glassPaneUsageCount) {\n      return;\n    }\n    if (DragHandler.glassPane) {\n      DragHandler.glassPane.hide();\n      DragHandler.glassPane = null;\n    }\n    DragHandler.documentForMouseOut = null;\n    DragHandler.rootForMouseOut = null;\n  }\n\n  elementDragStart(\n      targetElement: Element, elementDragStart: ((arg0: MouseEvent) => boolean)|null,\n      elementDrag: (arg0: MouseEvent) => void|boolean, elementDragEnd: ((arg0: MouseEvent) => void)|null,\n      cursor: string|null, ev: Event, preventDefault = true): void {\n    const event = (ev as MouseEvent);\n    // Only drag upon left button. Right will likely cause a context menu. So will ctrl-click on mac.\n    if (event.button || (Host.Platform.isMac() && event.ctrlKey)) {\n      return;\n    }\n\n    if (this.elementDraggingEventListener) {\n      return;\n    }\n\n    if (elementDragStart && !elementDragStart((event))) {\n      return;\n    }\n\n    const targetDocument = (event.target instanceof Node && event.target.ownerDocument) as Document;\n    this.elementDraggingEventListener = elementDrag;\n    this.elementEndDraggingEventListener = elementDragEnd;\n    console.assert(\n        (DragHandler.documentForMouseOut || targetDocument) === targetDocument, 'Dragging on multiple documents.');\n    DragHandler.documentForMouseOut = targetDocument;\n    DragHandler.rootForMouseOut = event.target instanceof Node && event.target.getRootNode() || null;\n    this.dragEventsTargetDocument = targetDocument;\n    try {\n      if (targetDocument.defaultView && targetDocument.defaultView.top) {\n        this.dragEventsTargetDocumentTop = targetDocument.defaultView.top.document;\n      }\n    } catch {\n      this.dragEventsTargetDocumentTop = this.dragEventsTargetDocument;\n    }\n\n    targetDocument.addEventListener('pointermove', this.elementDragMove, true);\n    targetDocument.addEventListener('pointerup', this.elementDragEnd, true);\n    DragHandler.rootForMouseOut?.addEventListener('pointerout', this.mouseOutWhileDragging, {capture: true});\n    if (this.dragEventsTargetDocumentTop && targetDocument !== this.dragEventsTargetDocumentTop) {\n      this.dragEventsTargetDocumentTop.addEventListener('pointerup', this.elementDragEnd, true);\n    }\n\n    const targetHtmlElement = (targetElement as HTMLElement);\n    if (typeof cursor === 'string') {\n      this.restoreCursorAfterDrag = restoreCursor.bind(this, targetHtmlElement.style.cursor);\n      targetHtmlElement.style.cursor = cursor;\n      targetDocument.body.style.cursor = cursor;\n    }\n    function restoreCursor(this: DragHandler, oldCursor: string): void {\n      targetDocument.body.style.removeProperty('cursor');\n      targetHtmlElement.style.cursor = oldCursor;\n      this.restoreCursorAfterDrag = undefined;\n    }\n\n    if (preventDefault) {\n      event.preventDefault();\n    }\n  }\n\n  private mouseOutWhileDragging(): void {\n    this.unregisterMouseOutWhileDragging();\n    this.createGlassPane();\n  }\n\n  private unregisterMouseOutWhileDragging(): void {\n    if (!DragHandler.rootForMouseOut) {\n      return;\n    }\n    DragHandler.rootForMouseOut.removeEventListener('pointerout', this.mouseOutWhileDragging, {capture: true});\n  }\n\n  private unregisterDragEvents(): void {\n    if (!this.dragEventsTargetDocument) {\n      return;\n    }\n    this.dragEventsTargetDocument.removeEventListener('pointermove', this.elementDragMove, true);\n    this.dragEventsTargetDocument.removeEventListener('pointerup', this.elementDragEnd, true);\n    if (this.dragEventsTargetDocumentTop && this.dragEventsTargetDocument !== this.dragEventsTargetDocumentTop) {\n      this.dragEventsTargetDocumentTop.removeEventListener('pointerup', this.elementDragEnd, true);\n    }\n    delete this.dragEventsTargetDocument;\n    delete this.dragEventsTargetDocumentTop;\n  }\n\n  private elementDragMove(event: MouseEvent): void {\n    if (event.buttons !== 1) {\n      this.elementDragEnd(event);\n      return;\n    }\n    if (this.elementDraggingEventListener?.(event)) {\n      this.cancelDragEvents(event);\n    }\n  }\n\n  private cancelDragEvents(_event: Event): void {\n    this.unregisterDragEvents();\n    this.unregisterMouseOutWhileDragging();\n\n    if (this.restoreCursorAfterDrag) {\n      this.restoreCursorAfterDrag();\n    }\n\n    this.disposeGlassPane();\n\n    delete this.elementDraggingEventListener;\n    delete this.elementEndDraggingEventListener;\n  }\n\n  private elementDragEnd(event: Event): void {\n    const elementDragEnd = this.elementEndDraggingEventListener;\n    this.cancelDragEvents((event as MouseEvent));\n    event.preventDefault();\n    if (elementDragEnd) {\n      elementDragEnd((event as MouseEvent));\n    }\n  }\n\n  private static glassPaneUsageCount = 0;\n  private static glassPane: GlassPane|null = null;\n  private static documentForMouseOut: Document|null = null;\n  private static rootForMouseOut: Node|null = null;\n}\n\nexport function isBeingEdited(node?: Node|null): boolean {\n  if (!node || node.nodeType !== Node.ELEMENT_NODE) {\n    return false;\n  }\n  const element = (node as Element);\n  if (element.classList.contains('text-prompt') || element.nodeName === 'INPUT' || element.nodeName === 'TEXTAREA') {\n    return true;\n  }\n\n  if (!elementsBeingEdited.size) {\n    return false;\n  }\n\n  let currentElement: (Element|null)|Element = element;\n  while (currentElement) {\n    if (elementsBeingEdited.has(element)) {\n      return true;\n    }\n    currentElement = currentElement.parentElementOrShadowHost();\n  }\n  return false;\n}\n\nexport function isEditing(): boolean {\n  if (elementsBeingEdited.size) {\n    return true;\n  }\n\n  const focused = deepActiveElement(document);\n  if (!focused) {\n    return false;\n  }\n  return focused.classList.contains('text-prompt') || focused.nodeName === 'INPUT' || focused.nodeName === 'TEXTAREA' ||\n      ((focused as HTMLElement).contentEditable === 'true' ||\n       (focused as HTMLElement).contentEditable === 'plaintext-only');\n}\n\nexport function markBeingEdited(element: Element, value: boolean): boolean {\n  if (value) {\n    if (elementsBeingEdited.has(element)) {\n      return false;\n    }\n    element.classList.add('being-edited');\n    elementsBeingEdited.add(element);\n  } else {\n    if (!elementsBeingEdited.has(element)) {\n      return false;\n    }\n    element.classList.remove('being-edited');\n    elementsBeingEdited.delete(element);\n  }\n  return true;\n}\n\nconst elementsBeingEdited = new Set<Element>();\n\n// Avoids Infinity, NaN, and scientific notation (e.g. 1e20), see crbug.com/81165.\nconst numberRegex = /^(-?(?:\\d+(?:\\.\\d+)?|\\.\\d+))$/;\n\nexport const StyleValueDelimiters = ' \\xA0\\t\\n\"\\':;,/()';\n\nexport function getValueModificationDirection(event: Event): string|null {\n  let direction: 'Up'|'Down'|null = null;\n  if (event instanceof WheelEvent) {\n    // When shift is pressed while spinning mousewheel, delta comes as wheelDeltaX.\n    if (event.deltaY < 0 || event.deltaX < 0) {\n      direction = 'Up';\n    } else if (event.deltaY > 0 || event.deltaX > 0) {\n      direction = 'Down';\n    }\n  } else if (event instanceof MouseEvent) {\n    if (event.movementX < 0) {\n      direction = 'Down';\n    } else if (event.movementX > 0) {\n      direction = 'Up';\n    }\n  } else if (event instanceof KeyboardEvent) {\n    if (event.key === 'ArrowUp' || event.key === 'PageUp') {\n      direction = 'Up';\n    } else if (event.key === 'ArrowDown' || event.key === 'PageDown') {\n      direction = 'Down';\n    }\n  }\n\n  return direction;\n}\n\nfunction modifiedHexValue(hexString: string, event: Event): string|null {\n  const direction = getValueModificationDirection(event);\n  if (!direction) {\n    return null;\n  }\n\n  const mouseEvent = (event as MouseEvent);\n  const number = parseInt(hexString, 16);\n  if (isNaN(number) || !isFinite(number)) {\n    return null;\n  }\n\n  const hexStrLen = hexString.length;\n  const channelLen = hexStrLen / 3;\n\n  // Colors are either rgb or rrggbb.\n  if (channelLen !== 1 && channelLen !== 2) {\n    return null;\n  }\n\n  // Precision modifier keys work with both mousewheel and up/down keys.\n  // When ctrl is pressed, increase R by 1.\n  // When shift is pressed, increase G by 1.\n  // When alt is pressed, increase B by 1.\n  // If no shortcut keys are pressed then increase hex value by 1.\n  // Keys can be pressed together to increase RGB channels. e.g trying different shades.\n  let delta = 0;\n  if (KeyboardShortcut.eventHasCtrlEquivalentKey(mouseEvent)) {\n    delta += Math.pow(16, channelLen * 2);\n  }\n  if (mouseEvent.shiftKey) {\n    delta += Math.pow(16, channelLen);\n  }\n  if (mouseEvent.altKey) {\n    delta += 1;\n  }\n  if (delta === 0) {\n    delta = 1;\n  }\n  if (direction === 'Down') {\n    delta *= -1;\n  }\n\n  // Increase hex value by 1 and clamp from 0 ... maxValue.\n  const maxValue = Math.pow(16, hexStrLen) - 1;\n  const result = Platform.NumberUtilities.clamp(number + delta, 0, maxValue);\n\n  // Ensure the result length is the same as the original hex value.\n  let resultString = result.toString(16).toUpperCase();\n  for (let i = 0, lengthDelta = hexStrLen - resultString.length; i < lengthDelta; ++i) {\n    resultString = '0' + resultString;\n  }\n  return resultString;\n}\n\nexport function modifiedFloatNumber(\n    number: number, event: Event, modifierMultiplier?: number, range?: {min?: number, max?: number}): number|null {\n  const direction = getValueModificationDirection(event);\n  if (!direction) {\n    return null;\n  }\n\n  const mouseEvent = (event as MouseEvent);\n\n  // Precision modifier keys work with both mousewheel and up/down keys.\n  // When ctrl is pressed, increase by 100.\n  // When shift is pressed, increase by 10.\n  // When alt is pressed, increase by 0.1.\n  // Otherwise increase by 1.\n  let delta = mouseEvent.type === 'mousemove' ? Math.abs(mouseEvent.movementX) : 1;\n  if (KeyboardShortcut.eventHasCtrlEquivalentKey(mouseEvent)) {\n    delta *= 100;\n  } else if (mouseEvent.shiftKey) {\n    delta *= 10;\n  } else if (mouseEvent.altKey) {\n    delta *= 0.1;\n  }\n\n  if (direction === 'Down') {\n    delta *= -1;\n  }\n  if (modifierMultiplier) {\n    delta *= modifierMultiplier;\n  }\n\n  // Make the new number and constrain it to a precision of 6, this matches numbers the engine returns.\n  // Use the Number constructor to forget the fixed precision, so 1.100000 will print as 1.1.\n  let result = Number((number + delta).toFixed(6));\n  if (range?.min !== undefined) {\n    result = Math.max(result, range.min);\n  }\n  if (range?.max !== undefined) {\n    result = Math.min(result, range.max);\n  }\n  if (!String(result).match(numberRegex)) {\n    return null;\n  }\n  return result;\n}\n\nexport function createReplacementString(\n    wordString: string, event: Event,\n    customNumberHandler?: ((prefix: string, number: number, suffix: string) => string),\n    stepping?: {step?: number, range?: {min?: number, max?: number}}): string|null {\n  let prefix;\n  let suffix;\n  let number;\n  let replacementString: string|null = null;\n  let matches = /(.*#)([\\da-fA-F]+)(.*)/.exec(wordString);\n  if (matches?.length) {\n    prefix = matches[1];\n    suffix = matches[3];\n    number = modifiedHexValue(matches[2], event);\n    if (number !== null) {\n      replacementString = prefix + number + suffix;\n    }\n  } else {\n    matches = /(.*?)(-?(?:\\d+(?:\\.\\d+)?|\\.\\d+))(.*)/.exec(wordString);\n    if (matches?.length) {\n      prefix = matches[1];\n      suffix = matches[3];\n      number = modifiedFloatNumber(parseFloat(matches[2]), event, stepping?.step, stepping?.range);\n      if (number !== null) {\n        replacementString =\n            customNumberHandler ? customNumberHandler(prefix, number, suffix) : prefix + number + suffix;\n      }\n    }\n  }\n  return replacementString;\n}\n\nexport function isElementValueModification(event: Event): boolean {\n  if (event instanceof MouseEvent) {\n    const {type} = event;\n    return type === 'mousemove' || type === 'wheel';\n  }\n  if (event instanceof KeyboardEvent) {\n    const {key} = event;\n    return key === 'ArrowUp' || key === 'ArrowDown' || key === 'PageUp' || key === 'PageDown';\n  }\n  return false;\n}\n\nexport function handleElementValueModifications(\n    event: Event, element: Element, finishHandler?: ((arg0: string, arg1: string) => void),\n    suggestionHandler?: ((arg0: string) => boolean),\n    customNumberHandler?: ((arg0: string, arg1: number, arg2: string) => string)): boolean {\n  if (!isElementValueModification(event)) {\n    return false;\n  }\n  void VisualLogging.logKeyDown(event.currentTarget, event, 'element-value-modification');\n\n  const selection = element.getComponentSelection();\n  if (!selection?.rangeCount) {\n    return false;\n  }\n\n  const selectionRange = selection.getRangeAt(0);\n  if (!selectionRange.commonAncestorContainer.isSelfOrDescendant(element)) {\n    return false;\n  }\n\n  const originalValue = element.textContent;\n  const wordRange =\n      rangeOfWord(selectionRange.startContainer, selectionRange.startOffset, StyleValueDelimiters, element);\n  const wordString = wordRange.toString();\n\n  if (suggestionHandler?.(wordString)) {\n    return false;\n  }\n\n  const replacementString = createReplacementString(wordString, event, customNumberHandler);\n\n  if (replacementString) {\n    const replacementTextNode = document.createTextNode(replacementString);\n\n    wordRange.deleteContents();\n    wordRange.insertNode(replacementTextNode);\n\n    const finalSelectionRange = document.createRange();\n    finalSelectionRange.setStart(replacementTextNode, 0);\n    finalSelectionRange.setEnd(replacementTextNode, replacementString.length);\n\n    selection.removeAllRanges();\n    selection.addRange(finalSelectionRange);\n\n    event.handled = true;\n    event.preventDefault();\n\n    if (finishHandler) {\n      finishHandler(originalValue || '', replacementString);\n    }\n\n    return true;\n  }\n  return false;\n}\n\nexport function openLinkExternallyLabel(): string {\n  return i18nString(UIStrings.openInNewTab);\n}\n\nexport function copyLinkAddressLabel(): string {\n  return i18nString(UIStrings.copyLinkAddress);\n}\n\nexport function copyFileNameLabel(): string {\n  return i18nString(UIStrings.copyFileName);\n}\n\nexport function anotherProfilerActiveLabel(): string {\n  return i18nString(UIStrings.anotherProfilerIsAlreadyActive);\n}\n\nexport function asyncStackTraceLabel(\n    description: string|undefined, previousCallFrames: Array<{functionName: string}>): string {\n  if (description) {\n    if (description === 'Promise.resolve') {\n      return i18nString(UIStrings.promiseResolvedAsync);\n    }\n    if (description === 'Promise.reject') {\n      return i18nString(UIStrings.promiseRejectedAsync);\n    }\n    if (description === 'await' && previousCallFrames.length !== 0) {\n      const lastPreviousFrame = previousCallFrames[previousCallFrames.length - 1];\n      const lastPreviousFrameName = beautifyFunctionName(lastPreviousFrame.functionName);\n      description = `await in ${lastPreviousFrameName}`;\n    }\n    return description;\n  }\n  return i18nString(UIStrings.asyncCall);\n}\n\nexport function addPlatformClass(element: HTMLElement): void {\n  element.classList.add('platform-' + Host.Platform.platform());\n}\n\nexport function installComponentRootStyles(element: HTMLElement): void {\n  appendStyle(element, inspectorCommonStyles);\n  appendStyle(element, Buttons.textButtonStyles);\n\n  // Detect overlay scrollbar enable by checking for nonzero scrollbar width.\n  if (!Host.Platform.isMac() && measuredScrollbarWidth(element.ownerDocument) === 0) {\n    element.classList.add('overlay-scrollbar-enabled');\n  }\n}\n\nfunction windowFocused(document: Document, event: Event): void {\n  if (event.target instanceof Window && event.target.document.nodeType === Node.DOCUMENT_NODE) {\n    document.body.classList.remove('inactive');\n  }\n}\n\nfunction windowBlurred(document: Document, event: Event): void {\n  if (event.target instanceof Window && event.target.document.nodeType === Node.DOCUMENT_NODE) {\n    document.body.classList.add('inactive');\n  }\n}\n\nexport class ElementFocusRestorer {\n  private element: HTMLElement|null;\n  private previous: HTMLElement|null;\n  constructor(element: Element) {\n    this.element = (element as HTMLElement | null);\n    this.previous = (deepActiveElement(element.ownerDocument) as HTMLElement | null);\n    (element as HTMLElement).focus();\n  }\n\n  restore(): void {\n    if (!this.element) {\n      return;\n    }\n    if (this.element.hasFocus() && this.previous) {\n      this.previous.focus();\n    }\n    this.previous = null;\n    this.element = null;\n  }\n}\n\nexport function runCSSAnimationOnce(element: Element, className: string): void {\n  function animationEndCallback(): void {\n    element.classList.remove(className);\n    element.removeEventListener('webkitAnimationEnd', animationEndCallback, false);\n    element.removeEventListener('animationcancel', animationEndCallback, false);\n  }\n\n  if (element.classList.contains(className)) {\n    element.classList.remove(className);\n  }\n\n  element.addEventListener('webkitAnimationEnd', animationEndCallback, false);\n  element.addEventListener('animationcancel', animationEndCallback, false);\n  element.classList.add(className);\n}\n\nexport function measurePreferredSize(element: Element, containerElement?: Element|null): Geometry.Size {\n  const oldParent = element.parentElement;\n  const oldNextSibling = element.nextSibling;\n  containerElement = containerElement || element.ownerDocument.body;\n  containerElement.appendChild(element);\n  element.positionAt(0, 0);\n  const result = element.getBoundingClientRect();\n\n  element.positionAt(undefined, undefined);\n  if (oldParent) {\n    oldParent.insertBefore(element, oldNextSibling);\n  } else {\n    element.remove();\n  }\n  return new Geometry.Size(result.width, result.height);\n}\n\nclass InvokeOnceHandlers {\n  private handlers: Map<object, Set<(...args: any[]) => void>>|null;\n  private readonly autoInvoke: boolean;\n  constructor(autoInvoke: boolean) {\n    this.handlers = null;\n    this.autoInvoke = autoInvoke;\n  }\n\n  add(object: Object, method: () => void): void {\n    if (!this.handlers) {\n      this.handlers = new Map();\n      if (this.autoInvoke) {\n        this.scheduleInvoke();\n      }\n    }\n    let methods = this.handlers.get(object);\n    if (!methods) {\n      methods = new Set();\n      this.handlers.set(object, methods);\n    }\n    methods.add(method);\n  }\n  scheduleInvoke(): void {\n    if (this.handlers) {\n      requestAnimationFrame(this.invoke.bind(this));\n    }\n  }\n\n  private invoke(): void {\n    const handlers = this.handlers;\n    this.handlers = null;\n    if (handlers) {\n      for (const [object, methods] of handlers) {\n        for (const method of methods) {\n          method.call(object);\n        }\n      }\n    }\n  }\n}\n\nlet coalescingLevel = 0;\nlet postUpdateHandlers: InvokeOnceHandlers|null = null;\n\nexport function startBatchUpdate(): void {\n  if (!coalescingLevel++) {\n    postUpdateHandlers = new InvokeOnceHandlers(false);\n  }\n}\n\nexport function endBatchUpdate(): void {\n  if (--coalescingLevel) {\n    return;\n  }\n\n  if (postUpdateHandlers) {\n    postUpdateHandlers.scheduleInvoke();\n    postUpdateHandlers = null;\n  }\n}\n\nexport function animateFunction(\n    window: Window, func: (...args: any[]) => void, params: Array<{\n      from: number,\n      to: number,\n    }>,\n    duration: number, animationComplete?: (() => void)): () => void {\n  const start = window.performance.now();\n  let raf = window.requestAnimationFrame(animationStep);\n\n  function animationStep(timestamp: number): void {\n    const progress = Platform.NumberUtilities.clamp((timestamp - start) / duration, 0, 1);\n    func(...params.map(p => p.from + (p.to - p.from) * progress));\n    if (progress < 1) {\n      raf = window.requestAnimationFrame(animationStep);\n    } else if (animationComplete) {\n      animationComplete();\n    }\n  }\n\n  return () => window.cancelAnimationFrame(raf);\n}\n\nexport class LongClickController {\n  private readonly element: Element;\n  private readonly callback: (arg0: Event) => void;\n  private readonly editKey: (arg0: KeyboardEvent) => boolean;\n  private longClickData!: {\n    mouseUp: (arg0: Event) => void,\n    mouseDown: (arg0: Event) => void,\n    reset: () => void,\n  }|undefined;\n  private longClickInterval!: number|undefined;\n\n  constructor(\n      element: Element, callback: (arg0: Event) => void,\n      isEditKeyFunc: (arg0: KeyboardEvent) => boolean = (event):\n          boolean => Platform.KeyboardUtilities.isEnterOrSpaceKey(event)) {\n    this.element = element;\n    this.callback = callback;\n    this.editKey = isEditKeyFunc;\n    this.enable();\n  }\n\n  reset(): void {\n    if (this.longClickInterval) {\n      clearInterval(this.longClickInterval);\n      delete this.longClickInterval;\n    }\n  }\n\n  private enable(): void {\n    if (this.longClickData) {\n      return;\n    }\n    const boundKeyDown = keyDown.bind(this);\n    const boundKeyUp = keyUp.bind(this);\n    const boundMouseDown = mouseDown.bind(this);\n    const boundMouseUp = mouseUp.bind(this);\n    const boundReset = this.reset.bind(this);\n\n    this.element.addEventListener('keydown', boundKeyDown, false);\n    this.element.addEventListener('keyup', boundKeyUp, false);\n    this.element.addEventListener('pointerdown', boundMouseDown, false);\n    this.element.addEventListener('pointerout', boundReset, false);\n    this.element.addEventListener('pointerup', boundMouseUp, false);\n    this.element.addEventListener('click', boundReset, true);\n\n    this.longClickData = {mouseUp: boundMouseUp, mouseDown: boundMouseDown, reset: boundReset};\n\n    function keyDown(this: LongClickController, e: Event): void {\n      if (this.editKey(e as KeyboardEvent)) {\n        const callback = this.callback;\n        this.longClickInterval = window.setTimeout(callback.bind(null, e), LongClickController.TIME_MS);\n      }\n    }\n\n    function keyUp(this: LongClickController, e: Event): void {\n      if (this.editKey(e as KeyboardEvent)) {\n        this.reset();\n      }\n    }\n\n    function mouseDown(this: LongClickController, e: Event): void {\n      if ((e as MouseEvent).which !== 1) {\n        return;\n      }\n      const callback = this.callback;\n      this.longClickInterval = window.setTimeout(callback.bind(null, e), LongClickController.TIME_MS);\n    }\n\n    function mouseUp(this: LongClickController, e: Event): void {\n      if ((e as MouseEvent).which !== 1) {\n        return;\n      }\n      this.reset();\n    }\n  }\n\n  dispose(): void {\n    if (!this.longClickData) {\n      return;\n    }\n    this.element.removeEventListener('pointerdown', this.longClickData.mouseDown, false);\n    this.element.removeEventListener('pointerout', this.longClickData.reset, false);\n    this.element.removeEventListener('pointerup', this.longClickData.mouseUp, false);\n    this.element.addEventListener('click', this.longClickData.reset, true);\n    delete this.longClickData;\n  }\n\n  static readonly TIME_MS = 200;\n}\n\nexport function initializeUIUtils(document: Document): void {\n  document.body.classList.toggle('inactive', !document.hasFocus());\n  if (document.defaultView) {\n    document.defaultView.addEventListener('focus', windowFocused.bind(undefined, document), false);\n    document.defaultView.addEventListener('blur', windowBlurred.bind(undefined, document), false);\n  }\n  document.addEventListener('focus', focusChanged.bind(undefined), true);\n\n  const body = (document.body as Element);\n  GlassPane.setContainer(body);\n}\n\nexport function beautifyFunctionName(name: string): string {\n  return name || i18nString(UIStrings.anonymous);\n}\n\nexport const createTextChild = (element: Element|DocumentFragment, text: string): Text => {\n  const textNode = element.ownerDocument.createTextNode(text);\n  element.appendChild(textNode);\n  return textNode;\n};\n\nexport const createTextChildren = (element: Element|DocumentFragment, ...childrenText: string[]): void => {\n  for (const child of childrenText) {\n    createTextChild(element, child);\n  }\n};\n\nexport function createTextButton(text: string, clickHandler?: ((arg0: Event) => void), opts?: {\n  className?: string,\n  jslogContext?: string,\n  variant?: Buttons.Button.Variant,\n  title?: string,\n  icon?: string,\n}): Buttons.Button.Button {\n  const button = new Buttons.Button.Button();\n  if (opts?.className) {\n    button.className = opts.className;\n  }\n\n  button.textContent = text;\n  button.iconName = opts?.icon;\n  button.variant = opts?.variant ? opts.variant : Buttons.Button.Variant.OUTLINED;\n  if (clickHandler) {\n    button.addEventListener('click', clickHandler);\n    button.addEventListener('keydown', (event: KeyboardEvent): void => {\n      if (event.key === 'Enter' || event.key === 'Space') {\n        // Make sure we don't propagate 'Enter' or 'Space' key events to parents,\n        // so that these get turned into 'click' events properly.\n        event.stopImmediatePropagation();\n      }\n    });\n  }\n  if (opts?.jslogContext) {\n    button.setAttribute('jslog', `${VisualLogging.action().track({click: true}).context(opts.jslogContext)}`);\n  }\n  if (opts?.title) {\n    button.setAttribute('title', opts.title);\n  }\n  button.type = 'button';\n  return button;\n}\n\nexport function createInput(className?: string, type?: string, jslogContext?: string): HTMLInputElement {\n  const element = document.createElement('input');\n  if (className) {\n    element.className = className;\n  }\n  element.spellcheck = false;\n  element.classList.add('harmony-input');\n  if (type) {\n    element.type = type;\n  }\n  if (jslogContext) {\n    element.setAttribute(\n        'jslog', `${VisualLogging.textField().track({keydown: 'Enter', change: true}).context(jslogContext)}`);\n  }\n  return element;\n}\n\nexport function createHistoryInput(type = 'search', className?: string): HTMLInputElement {\n  const history = [''];\n  let historyPosition = 0;\n\n  const historyInput = document.createElement('input');\n  historyInput.type = type;\n  if (className) {\n    historyInput.className = className;\n  }\n  historyInput.addEventListener('input', onInput, false);\n  historyInput.addEventListener('keydown', onKeydown, false);\n  return historyInput;\n\n  function onInput(_event: Event): void {\n    if (history.length === historyPosition + 1) {\n      history[historyPosition] = historyInput.value;\n    }\n  }\n\n  function onKeydown(event: KeyboardEvent): void {\n    if (event.keyCode === Keys.Up.code) {\n      historyPosition = Math.max(historyPosition - 1, 0);\n      historyInput.value = history[historyPosition];\n      historyInput.dispatchEvent(new Event('input', {bubbles: true, cancelable: true}));\n      event.consume(true);\n    } else if (event.keyCode === Keys.Down.code) {\n      historyPosition = Math.min(historyPosition + 1, history.length - 1);\n      historyInput.value = history[historyPosition];\n      historyInput.dispatchEvent(new Event('input', {bubbles: true, cancelable: true}));\n      event.consume(true);\n    } else if (event.keyCode === Keys.Enter.code) {\n      if (history.length > 1 && history[history.length - 2] === historyInput.value) {\n        return;\n      }\n      history[history.length - 1] = historyInput.value;\n      historyPosition = history.length - 1;\n      history.push('');\n    }\n  }\n}\n\nexport function createSelect(\n    name: string, options: string[]|Array<Map<string, string[]>>|Set<string>): HTMLSelectElement {\n  const select = document.createElement('select');\n  ARIAUtils.setLabel(select, name);\n  for (const option of options) {\n    if (option instanceof Map) {\n      for (const [key, value] of option) {\n        const optGroup = select.createChild('optgroup');\n        optGroup.label = key;\n        for (const child of value) {\n          if (typeof child === 'string') {\n            optGroup.appendChild(createOption(child, child, Platform.StringUtilities.toKebabCase(child)));\n          }\n        }\n      }\n    } else if (typeof option === 'string') {\n      select.add(createOption(option, option, Platform.StringUtilities.toKebabCase(option)));\n    }\n  }\n  return select;\n}\n\nexport function createOption(title: string, value?: string, jslogContext?: string): HTMLOptionElement {\n  const result = new Option(title, value || title);\n  if (jslogContext) {\n    result.setAttribute('jslog', `${VisualLogging.item(jslogContext).track({click: true})}`);\n  }\n  return result;\n}\n\nexport function createLabel(title: string, className?: string, associatedControl?: Element): Element {\n  const element = document.createElement('label');\n  if (className) {\n    element.className = className;\n  }\n  element.textContent = title;\n  if (associatedControl) {\n    ARIAUtils.bindLabelToControl(element, associatedControl);\n  }\n\n  return element;\n}\n\nexport function createIconLabel(\n    options: {iconName: string, title?: string, color?: string, width?: '14px'|'20px', height?: '14px'|'20px'}):\n    DevToolsIconLabel {\n  const element = document.createElement('dt-icon-label');\n  if (options.title) {\n    element.createChild('span').textContent = options.title;\n  }\n  element.data = {\n    iconName: options.iconName,\n    color: options.color ?? 'var(--icon-default)',\n    width: options.width ?? '14px',\n    height: options.height ?? '14px',\n  };\n  return element;\n}\n\n/**\n * Creates a radio button, which is comprised of a `<label>` and an `<input type=\"radio\">` element.\n *\n * The returned pair contains the `label` element and and the `radio` input element. The latter is\n * a child of the `label`, and therefore no association via `for` attribute is necessary to make\n * the radio button accessible.\n *\n * The element is automatically styled correctly, as long as the core styles (in particular\n * `inspectorCommon.css` is injected into the current document / shadow root). The lit\n * equivalent of calling this method is:\n *\n * ```js\n * const jslog = VisualLogging.toggle().track({change: true}).context(jslogContext);\n * html`<label><input type=\"radio\" name=${name} jslog=${jslog}>${title}</label>`\n * ```\n *\n * @param name the name of the radio group.\n * @param title the label text for the radio button.\n * @param jslogContext the context string for the `jslog` attribute.\n * @returns the pair of `HTMLLabelElement` and `HTMLInputElement`.\n * @see https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input/radio\n */\nexport function createRadioButton(\n    name: string, title: string, jslogContext: string): {label: HTMLLabelElement, radio: HTMLInputElement} {\n  const label = document.createElement('label');\n  const radio = label.createChild('input');\n  radio.type = 'radio';\n  radio.name = name;\n  radio.setAttribute('jslog', `${VisualLogging.toggle().track({change: true}).context(jslogContext)}`);\n  createTextChild(label, title);\n  return {label, radio};\n}\n\n/**\n * Creates an `<input type=\"range\">` element with the specified parameters (a slider)\n * and a `step` of 1 (the default for the element).\n *\n * The element is automatically styled correctly, as long as the core styles (in particular\n * `inspectorCommon.css` is injected into the current document / shadow root). The lit\n * equivalent of calling this method is:\n *\n * ```js\n * html`<input type=\"range\" min=${min} max=${max} tabindex=${tabIndex}>`\n * ```\n *\n * @param min the minimum allowed value.\n * @param max the maximum allowed value.\n * @param tabIndex the value for the `tabindex` attribute.\n * @returns the newly created `HTMLInputElement` for the slider.\n * @see https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input/range\n */\nexport function createSlider(min: number, max: number, tabIndex: number): HTMLInputElement {\n  const element = document.createElement('input');\n  element.type = 'range';\n  element.min = String(min);\n  element.max = String(max);\n  element.tabIndex = tabIndex;\n  return element;\n}\n\nexport function setTitle(element: HTMLElement, title: string): void {\n  ARIAUtils.setLabel(element, title);\n  Tooltip.install(element, title);\n}\n\nexport class CheckboxLabel extends HTMLElement {\n  static readonly observedAttributes = ['checked', 'disabled', 'indeterminate', 'name', 'title', 'aria-label'];\n\n  readonly #shadowRoot!: DocumentFragment;\n  #checkboxElement!: HTMLInputElement;\n  #textElement!: HTMLElement;\n\n  constructor() {\n    super();\n    CheckboxLabel.lastId = CheckboxLabel.lastId + 1;\n    const id = 'ui-checkbox-label' + CheckboxLabel.lastId;\n    this.#shadowRoot = createShadowRootWithCoreStyles(this, {cssFile: checkboxTextLabelStyles, delegatesFocus: true});\n    this.#checkboxElement = this.#shadowRoot.createChild('input');\n    this.#checkboxElement.type = 'checkbox';\n    this.#checkboxElement.setAttribute('id', id);\n    // Change event is not composable, so it doesn't bubble up through the shadow root.\n    this.#checkboxElement.addEventListener('change', () => this.dispatchEvent(new Event('change')));\n    this.#textElement = this.#shadowRoot.createChild('label', 'devtools-checkbox-text');\n    this.#textElement.setAttribute('for', id);\n    // Click events are composable, so both label and checkbox bubble up through the shadow root.\n    // However, clicking the label, also triggers the checkbox click, so we stop the label event\n    // propagation here to avoid duplicate events.\n    this.#textElement.addEventListener('click', e => e.stopPropagation());\n    this.#textElement.createChild('slot');\n  }\n\n  static create(\n      title?: Platform.UIString.LocalizedString, checked?: boolean, subtitle?: Platform.UIString.LocalizedString,\n      jslogContext?: string, small?: boolean): CheckboxLabel {\n    const element = document.createElement('devtools-checkbox');\n    element.#checkboxElement.checked = Boolean(checked);\n    if (jslogContext) {\n      element.#checkboxElement.setAttribute(\n          'jslog', `${VisualLogging.toggle().track({change: true}).context(jslogContext)}`);\n    }\n    if (title !== undefined) {\n      element.#textElement.textContent = title;\n      element.#checkboxElement.title = title;\n      if (subtitle !== undefined) {\n        element.#textElement.createChild('div', 'devtools-checkbox-subtitle').textContent = subtitle;\n      }\n    }\n    element.#checkboxElement.classList.toggle('small', small);\n    return element;\n  }\n\n  attributeChangedCallback(name: string, _oldValue: string|null, newValue: string|null): void {\n    if (name === 'checked') {\n      this.#checkboxElement.checked = newValue !== null;\n    } else if (name === 'disabled') {\n      this.#checkboxElement.disabled = newValue !== null;\n    } else if (name === 'indeterminate') {\n      this.#checkboxElement.indeterminate = newValue !== null;\n    } else if (name === 'name') {\n      this.#checkboxElement.name = newValue ?? '';\n    } else if (name === 'title') {\n      this.#checkboxElement.title = newValue ?? '';\n      this.#textElement.title = newValue ?? '';\n    } else if (name === 'aria-label') {\n      this.#checkboxElement.ariaLabel = newValue;\n    }\n  }\n\n  getLabelText(): string|null {\n    return this.#textElement.textContent;\n  }\n\n  setLabelText(content: string): void {\n    this.#textElement.textContent = content;\n  }\n\n  override get ariaLabel(): string|null {\n    return this.#checkboxElement.ariaLabel;\n  }\n\n  override set ariaLabel(ariaLabel: string) {\n    this.setAttribute('aria-label', ariaLabel);\n  }\n\n  get checked(): boolean {\n    return this.#checkboxElement.checked;\n  }\n\n  set checked(checked: boolean) {\n    this.toggleAttribute('checked', checked);\n  }\n\n  set disabled(disabled: boolean) {\n    this.toggleAttribute('disabled', disabled);\n  }\n\n  get disabled(): boolean {\n    return this.#checkboxElement.disabled;\n  }\n\n  set indeterminate(indeterminate: boolean) {\n    this.toggleAttribute('indeterminate', indeterminate);\n  }\n\n  get indeterminate(): boolean {\n    return this.#checkboxElement.indeterminate;\n  }\n\n  override set title(title: string) {\n    this.setAttribute('title', title);\n  }\n\n  override get title(): string {\n    return this.#checkboxElement.title;\n  }\n\n  set name(name: string) {\n    this.setAttribute('name', name);\n  }\n\n  get name(): string {\n    return this.#checkboxElement.name;\n  }\n\n  override click(): void {\n    this.#checkboxElement.click();\n  }\n\n  /** Only to be used when the checkbox label is 'generated' (a regex, a className, etc). Most checkboxes should be create()'d with UIStrings */\n  static createWithStringLiteral(title?: string, checked?: boolean, jslogContext?: string, small?: boolean):\n      CheckboxLabel {\n    const stringLiteral = title as Platform.UIString.LocalizedString;\n    return CheckboxLabel.create(stringLiteral, checked, undefined, jslogContext, small);\n  }\n\n  private static lastId = 0;\n}\n\ncustomElements.define('devtools-checkbox', CheckboxLabel);\n\nexport class DevToolsIconLabel extends HTMLElement {\n  readonly #icon: Icon;\n\n  constructor() {\n    super();\n    const root = createShadowRootWithCoreStyles(this);\n    this.#icon = new Icon();\n    this.#icon.style.setProperty('margin-right', '4px');\n    this.#icon.style.setProperty('vertical-align', 'baseline');\n    root.appendChild(this.#icon);\n    root.createChild('slot');\n  }\n\n  set data(data: IconData) {\n    this.#icon.data = data;\n    if (data.height === '14px') {\n      this.#icon.style.setProperty('margin-bottom', '-2px');\n    } else if (data.height === '20px') {\n      this.#icon.style.setProperty('margin-bottom', '2px');\n    }\n  }\n}\n\n// eslint-disable-next-line @devtools/enforce-custom-element-prefix\ncustomElements.define('dt-icon-label', DevToolsIconLabel);\n\nexport class DevToolsSmallBubble extends HTMLElement {\n  private textElement: Element;\n\n  constructor() {\n    super();\n    const root = createShadowRootWithCoreStyles(this, {cssFile: smallBubbleStyles});\n    this.textElement = root.createChild('div');\n    this.textElement.className = 'info';\n    this.textElement.createChild('slot');\n  }\n\n  set type(type: string) {\n    this.textElement.className = type;\n  }\n}\n\n// eslint-disable-next-line @devtools/enforce-custom-element-prefix\ncustomElements.define('dt-small-bubble', DevToolsSmallBubble);\n\nexport class DevToolsCloseButton extends HTMLElement {\n  #button: Buttons.Button.Button;\n\n  constructor() {\n    super();\n    const root = createShadowRootWithCoreStyles(this);\n    this.#button = new Buttons.Button.Button();\n    this.#button.data = {variant: Buttons.Button.Variant.ICON, iconName: 'cross'};\n    this.#button.classList.add('close-button');\n    this.#button.setAttribute('jslog', `${VisualLogging.close().track({click: true})}`);\n    Tooltip.install(this.#button, i18nString(UIStrings.close));\n    ARIAUtils.setLabel(this.#button, i18nString(UIStrings.close));\n    root.appendChild(this.#button);\n  }\n\n  setAccessibleName(name: string): void {\n    ARIAUtils.setLabel(this.#button, name);\n  }\n\n  setSize(size: Buttons.Button.Size): void {\n    this.#button.size = size;\n  }\n\n  setTabbable(tabbable: boolean): void {\n    if (tabbable) {\n      this.#button.tabIndex = 0;\n    } else {\n      this.#button.tabIndex = -1;\n    }\n  }\n\n  override focus(): void {\n    this.#button.focus();\n  }\n}\n\n// eslint-disable-next-line @devtools/enforce-custom-element-prefix\ncustomElements.define('dt-close-button', DevToolsCloseButton);\n\nexport function bindInput(\n    input: HTMLInputElement, apply: (arg0: string) => void, validate: (arg0: string) => boolean, numeric: boolean,\n    modifierMultiplier?: number): (arg0: string) => void {\n  input.addEventListener('change', onChange, false);\n  input.addEventListener('input', onInput, false);\n  input.addEventListener('keydown', onKeyDown, false);\n  input.addEventListener('focus', input.select.bind(input), false);\n\n  function onInput(): void {\n    input.classList.toggle('error-input', !validate(input.value));\n  }\n\n  function onChange(): void {\n    const valid = validate(input.value);\n    input.classList.toggle('error-input', !valid);\n    if (valid) {\n      apply(input.value);\n    }\n  }\n\n  function onKeyDown(event: KeyboardEvent): void {\n    if (event.key === 'Enter') {\n      const valid = validate(input.value);\n      if (valid) {\n        apply(input.value);\n      }\n      event.preventDefault();\n      return;\n    }\n\n    if (!numeric) {\n      return;\n    }\n\n    const value = modifiedFloatNumber(parseFloat(input.value), event, modifierMultiplier);\n    if (value === null) {\n      return;\n    }\n    const stringValue = String(value);\n    const valid = validate(stringValue);\n    if (valid) {\n      setValue(stringValue);\n    }\n    event.preventDefault();\n  }\n\n  function setValue(value: string): void {\n    if (value === input.value) {\n      return;\n    }\n    const valid = validate(value);\n    input.classList.toggle('error-input', !valid);\n    input.value = value;\n  }\n\n  return setValue;\n}\n\nexport function trimText(\n    context: CanvasRenderingContext2D, text: string, maxWidth: number,\n    trimFunction: (arg0: string, arg1: number) => string): string {\n  const maxLength = 200;\n  if (maxWidth <= 10) {\n    return '';\n  }\n  if (text.length > maxLength) {\n    text = trimFunction(text, maxLength);\n  }\n  const textWidth = measureTextWidth(context, text);\n  if (textWidth <= maxWidth) {\n    return text;\n  }\n\n  let l = 0;\n  let r: number = text.length;\n  let lv = 0;\n  let rv: number = textWidth;\n  while (l < r && lv !== rv && lv !== maxWidth) {\n    const m = Math.ceil(l + (r - l) * (maxWidth - lv) / (rv - lv));\n    const mv = measureTextWidth(context, trimFunction(text, m));\n    if (mv <= maxWidth) {\n      l = m;\n      lv = mv;\n    } else {\n      r = m - 1;\n      rv = mv;\n    }\n  }\n  text = trimFunction(text, l);\n  return text !== 'â€¦' ? text : '';\n}\n\nexport function trimTextMiddle(context: CanvasRenderingContext2D, text: string, maxWidth: number): string {\n  return trimText(context, text, maxWidth, (text, width) => Platform.StringUtilities.trimMiddle(text, width));\n}\n\nexport function trimTextEnd(context: CanvasRenderingContext2D, text: string, maxWidth: number): string {\n  return trimText(context, text, maxWidth, (text, width) => Platform.StringUtilities.trimEndWithMaxLength(text, width));\n}\n\nexport function measureTextWidth(context: CanvasRenderingContext2D, text: string): number {\n  const maxCacheableLength = 200;\n  if (text.length > maxCacheableLength) {\n    return context.measureText(text).width;\n  }\n\n  if (!measureTextWidthCache) {\n    measureTextWidthCache = new Map();\n  }\n  const font = context.font;\n  let textWidths = measureTextWidthCache.get(font);\n  if (!textWidths) {\n    textWidths = new Map();\n    measureTextWidthCache.set(font, textWidths);\n  }\n  let width = textWidths.get(text);\n  if (!width) {\n    width = context.measureText(text).width;\n    textWidths.set(text, width);\n  }\n  return width;\n}\n\nlet measureTextWidthCache: Map<string, Map<string, number>>|null = null;\n\nexport function loadImage(url: string): Promise<HTMLImageElement|null> {\n  return new Promise(fulfill => {\n    const image = new Image();\n    image.addEventListener('load', () => fulfill(image));\n    image.addEventListener('error', () => fulfill(null));\n    image.src = url;\n  });\n}\n\n/**\n * Creates a file selector element.\n * @param callback the function that will be called with the file the user selected\n * @param accept optionally used to set the [`accept`](https://developer.mozilla.org/en-US/docs/Web/HTML/Attributes/accept) parameter to limit file-types the user can pick.\n */\nexport function createFileSelectorElement(callback: (arg0: File) => void, accept?: string): HTMLInputElement {\n  const fileSelectorElement = document.createElement('input');\n  fileSelectorElement.type = 'file';\n  if (accept) {\n    fileSelectorElement.setAttribute('accept', accept);\n  }\n  fileSelectorElement.style.display = 'none';\n  fileSelectorElement.tabIndex = -1;\n  fileSelectorElement.addEventListener('change', () => {\n    if (fileSelectorElement.files?.length) {\n      callback(fileSelectorElement.files[0]);\n    }\n  });\n  fileSelectorElement.addEventListener('click', () => {\n    fileSelectorElement.value = '';\n  });\n\n  return fileSelectorElement;\n}\n\nexport const MaxLengthForDisplayedURLs = 150;\n\nexport class MessageDialog {\n  static async show(header: string, message: string, where?: Element|Document, jslogContext?: string): Promise<void> {\n    const dialog = new Dialog(jslogContext);\n    dialog.setSizeBehavior(SizeBehavior.MEASURE_CONTENT);\n    dialog.setDimmed(true);\n    const shadowRoot = createShadowRootWithCoreStyles(dialog.contentElement, {cssFile: confirmDialogStyles});\n    const content = shadowRoot.createChild('div', 'widget');\n    await new Promise(resolve => {\n      const okButton = createTextButton(\n          i18nString(UIStrings.ok), resolve, {jslogContext: 'confirm', variant: Buttons.Button.Variant.PRIMARY});\n      content.createChild('span', 'header').textContent = header;\n      content.createChild('div', 'message').createChild('span').textContent = message;\n      content.createChild('div', 'button').appendChild(okButton);\n      dialog.setOutsideClickCallback(event => {\n        event.consume();\n        resolve(undefined);\n      });\n      dialog.show(where);\n      okButton.focus();\n    });\n    dialog.hide();\n  }\n}\n\nexport class ConfirmDialog {\n  static async show(message: string, header?: string, where?: Element|Document, options?: ConfirmDialogOptions):\n      Promise<boolean> {\n    const dialog = new Dialog(options?.jslogContext);\n    dialog.setSizeBehavior(SizeBehavior.MEASURE_CONTENT);\n    dialog.setDimmed(true);\n    ARIAUtils.setLabel(dialog.contentElement, message);\n    const shadowRoot = createShadowRootWithCoreStyles(dialog.contentElement, {cssFile: confirmDialogStyles});\n    const content = shadowRoot.createChild('div', 'widget');\n    if (header) {\n      content.createChild('span', 'header').textContent = header;\n    }\n    content.createChild('div', 'message').createChild('span').textContent = message;\n    const buttonsBar = content.createChild('div', 'button');\n    const result = await new Promise<boolean>(resolve => {\n      const okButton = createTextButton(\n          /* text= */ options?.okButtonLabel || i18nString(UIStrings.ok), /* clickHandler= */ () => resolve(true),\n          {jslogContext: 'confirm', variant: Buttons.Button.Variant.PRIMARY});\n      buttonsBar.appendChild(okButton);\n      buttonsBar.appendChild(createTextButton(\n          options?.cancelButtonLabel || i18nString(UIStrings.cancel), () => resolve(false), {jslogContext: 'cancel'}));\n      dialog.setOutsideClickCallback(event => {\n        event.consume();\n        resolve(false);\n      });\n      dialog.show(where);\n      okButton.focus();\n    });\n    dialog.hide();\n    return result;\n  }\n}\n\nexport interface RenderedObject {\n  element: HTMLElement;\n  forceSelect(): void;\n}\n\nexport abstract class Renderer {\n  abstract render(object: Object, options?: Options): Promise<RenderedObject|null>;\n\n  static async render(object: Object, options?: Options): Promise<RenderedObject|null> {\n    if (!object) {\n      throw new Error('Can\\'t render ' + object);\n    }\n    const extension = getApplicableRegisteredRenderers(object)[0];\n    if (!extension) {\n      return null;\n    }\n    const renderer = await extension.loadRenderer();\n    return await renderer.render(object, options);\n  }\n}\n\nexport function formatTimestamp(timestamp: number, full: boolean): string {\n  const date = new Date(timestamp);\n  const yymmdd = date.getFullYear() + '-' + leadZero(date.getMonth() + 1, 2) + '-' + leadZero(date.getDate(), 2);\n  const hhmmssfff = leadZero(date.getHours(), 2) + ':' + leadZero(date.getMinutes(), 2) + ':' +\n      leadZero(date.getSeconds(), 2) + '.' + leadZero(date.getMilliseconds(), 3);\n  return full ? (yymmdd + ' ' + hhmmssfff) : hhmmssfff;\n\n  function leadZero(value: number, length: number): string {\n    const valueString = String(value);\n    return valueString.padStart(length, '0');\n  }\n}\n\nexport interface Options {\n  title?: string|Element;\n  editable?: boolean;\n  /**\n   * Should the resulting object be expanded.\n   */\n  expand?: boolean;\n}\n\nexport const isScrolledToBottom = (element: Element): boolean => {\n  // This code works only for 0-width border.\n  // The scrollTop, clientHeight and scrollHeight are computed in double values internally.\n  // However, they are exposed to javascript differently, each being either rounded (via\n  // round, ceil or floor functions) or left intouch.\n  // This adds up a total error up to 2.\n  return Math.abs(element.scrollTop + element.clientHeight - element.scrollHeight) <= 2;\n};\n\nexport function createSVGChild<K extends keyof SVGElementTagNameMap>(\n    element: Element, childType: K, className?: string): SVGElementTagNameMap[K] {\n  const child = element.ownerDocument.createElementNS('http://www.w3.org/2000/svg', childType);\n  if (className) {\n    child.setAttribute('class', className);\n  }\n  element.appendChild(child);\n  return child;\n}\n\nexport const enclosingNodeOrSelfWithNodeNameInArray = (initialNode: Node, nameArray: string[]): Node|null => {\n  let node: (Node|null)|Node = initialNode;\n  for (; node && node !== initialNode.ownerDocument; node = node.parentNodeOrShadowHost()) {\n    for (let i = 0; i < nameArray.length; ++i) {\n      if (node.nodeName.toLowerCase() === nameArray[i].toLowerCase()) {\n        return node;\n      }\n    }\n  }\n  return null;\n};\n\nexport const enclosingNodeOrSelfWithNodeName = function(node: Node, nodeName: string): Node|null {\n  return enclosingNodeOrSelfWithNodeNameInArray(node, [nodeName]);\n};\n\nexport const deepElementFromPoint = (document: Document|ShadowRoot|null|undefined, x: number, y: number): Node|null => {\n  let container: (ShadowRoot|null)|(Document | ShadowRoot | null | undefined) = document;\n  let node: Element|null = null;\n  while (container) {\n    const innerNode = container.elementFromPoint(x, y);\n    if (!innerNode || node === innerNode) {\n      break;\n    }\n    node = innerNode;\n    container = node.shadowRoot;\n  }\n  return node;\n};\n\nexport const deepElementFromEvent = (ev: Event): Node|null => {\n  const event = (ev as MouseEvent);\n  // Some synthetic events have zero coordinates which lead to a wrong element.\n  // Better return nothing in this case.\n  if (!event.which && !event.pageX && !event.pageY && !event.clientX && !event.clientY && !event.movementX &&\n      !event.movementY) {\n    return null;\n  }\n  const root = event.target && (event.target as Element).getComponentRoot();\n  return root ? deepElementFromPoint((root as Document | ShadowRoot), event.pageX, event.pageY) : null;\n};\n\nconst registeredRenderers: RendererRegistration[] = [];\n\nexport function registerRenderer(registration: RendererRegistration): void {\n  registeredRenderers.push(registration);\n}\nexport function getApplicableRegisteredRenderers(object: Object): RendererRegistration[] {\n  return registeredRenderers.filter(isRendererApplicableToContextTypes);\n\n  function isRendererApplicableToContextTypes(rendererRegistration: RendererRegistration): boolean {\n    if (!rendererRegistration.contextTypes) {\n      return true;\n    }\n    for (const contextType of rendererRegistration.contextTypes()) {\n      if (object instanceof contextType) {\n        return true;\n      }\n    }\n    return false;\n  }\n}\n\nexport interface RendererRegistration {\n  loadRenderer: () => Promise<Renderer>;\n  contextTypes: () => Array<Platform.Constructor.ConstructorOrAbstract<unknown>>;\n}\n\nexport interface ConfirmDialogOptions {\n  okButtonLabel?: string;\n  cancelButtonLabel?: string;\n  jslogContext?: string;\n}\n\nfunction updateWidgetfocusWidgetForNode(node: Node|null): void {\n  while (node) {\n    if (Widget.get(node)) {\n      break;\n    }\n\n    node = node.parentNodeOrShadowHost();\n  }\n  if (!node) {\n    return;\n  }\n\n  let widget = Widget.get(node);\n  while (widget?.parentWidget()) {\n    const parentWidget = widget.parentWidget();\n    if (!parentWidget) {\n      break;\n    }\n\n    parentWidget.setDefaultFocusedChild(widget);\n    widget = parentWidget;\n  }\n}\n\nfunction focusChanged(event: Event): void {\n  const target = event.target as HTMLElement;\n  const document = target ? target.ownerDocument : null;\n  const element = document ? deepActiveElement(document) : null;\n  updateWidgetfocusWidgetForNode(element);\n}\n\n/**\n * Creates a new shadow DOM tree with the core styles and an optional list of\n * additional styles, and attaches it to the specified `element`.\n *\n * @param element the `Element` to attach the shadow DOM tree to.\n * @param options optional additional style sheets and options for `Element#attachShadow()`.\n * @returns the newly created `ShadowRoot`.\n * @see https://developer.mozilla.org/en-US/docs/Web/API/Element/attachShadow\n */\nexport function createShadowRootWithCoreStyles(element: Element, options: {\n  cssFile?: CSSInJS[]|CSSInJS,\n  delegatesFocus?: boolean,\n} = {\n  delegatesFocus: undefined,\n  cssFile: undefined,\n}): ShadowRoot {\n  const {cssFile, delegatesFocus} = options;\n\n  const shadowRoot = element.attachShadow({mode: 'open', delegatesFocus});\n  appendStyle(shadowRoot, inspectorCommonStyles, Buttons.textButtonStyles);\n  if (Array.isArray(cssFile)) {\n    appendStyle(shadowRoot, ...cssFile);\n  } else if (cssFile) {\n    appendStyle(shadowRoot, cssFile);\n  }\n  shadowRoot.addEventListener('focus', focusChanged, true);\n  return shadowRoot;\n}\n\nlet cachedMeasuredScrollbarWidth: number|undefined;\n\nexport function resetMeasuredScrollbarWidthForTest(): void {\n  cachedMeasuredScrollbarWidth = undefined;\n}\n\nexport function measuredScrollbarWidth(document?: Document|null): number {\n  if (typeof cachedMeasuredScrollbarWidth === 'number') {\n    return cachedMeasuredScrollbarWidth;\n  }\n  if (!document) {\n    return 16;\n  }\n\n  const scrollDiv = document.createElement('div');\n  const innerDiv = document.createElement('div');\n  scrollDiv.setAttribute('style', 'display: block; width: 100px; height: 100px; overflow: scroll;');\n  innerDiv.setAttribute('style', 'height: 200px');\n  scrollDiv.appendChild(innerDiv);\n  document.body.appendChild(scrollDiv);\n  cachedMeasuredScrollbarWidth = scrollDiv.offsetWidth - scrollDiv.clientWidth;\n  document.body.removeChild(scrollDiv);\n  return cachedMeasuredScrollbarWidth;\n}\n\nexport interface PromotionDisplayState {\n  displayCount: number;\n  firstRegistered: number;\n  featureInteractionCount: number;\n}\n\nconst MAX_DISPLAY_COUNT = 10;\n// 60 days in ms\nconst MAX_DURATION = 60 * 24 * 60 * 60 * 1000;\nconst MAX_INTERACTION_COUNT = 2;\n\nexport class PromotionManager {\n  static #instance?: PromotionManager;\n\n  static instance(): PromotionManager {\n    if (!PromotionManager.#instance) {\n      PromotionManager.#instance = new PromotionManager();\n    }\n    return PromotionManager.#instance;\n  }\n\n  private getPromotionDisplayState(id: string): PromotionDisplayState|null {\n    const displayStateString = localStorage.getItem(id);\n    return displayStateString ? JSON.parse(displayStateString) : null;\n  }\n\n  private setPromotionDisplayState(id: string, promotionDisplayState: PromotionDisplayState): void {\n    localStorage.setItem(id, JSON.stringify(promotionDisplayState));\n  }\n\n  private registerPromotion(id: string): void {\n    this.setPromotionDisplayState(id, {\n      displayCount: 0,\n      firstRegistered: Date.now(),\n      featureInteractionCount: 0,\n    });\n  }\n\n  private recordPromotionShown(id: string): void {\n    const displayState = this.getPromotionDisplayState(id);\n    if (!displayState) {\n      throw new Error(`Cannot record promotion shown for unregistered promotion ${id}`);\n    }\n    this.setPromotionDisplayState(id, {\n      ...displayState,\n      displayCount: displayState.displayCount + 1,\n    });\n  }\n\n  canShowPromotion(id: string): boolean {\n    const displayState = this.getPromotionDisplayState(id);\n    if (!displayState) {\n      this.registerPromotion(id);\n      return true;\n    }\n    return displayState.displayCount < MAX_DISPLAY_COUNT && Date.now() - displayState.firstRegistered < MAX_DURATION &&\n        displayState.featureInteractionCount < MAX_INTERACTION_COUNT;\n  }\n\n  recordFeatureInteraction(id: string): void {\n    const displayState = this.getPromotionDisplayState(id);\n    if (!displayState) {\n      throw new Error(`Cannot record feature interaction for unregistered promotion ${id}`);\n    }\n    this.setPromotionDisplayState(id, {\n      ...displayState,\n      featureInteractionCount: displayState.featureInteractionCount + 1,\n    });\n  }\n\n  maybeShowPromotion(id: string): boolean {\n    if (this.canShowPromotion(id)) {\n      this.recordPromotionShown(id);\n      return true;\n    }\n    return false;\n  }\n}\n\n/**\n * Creates a `<div>` element with the localized text NEW.\n *\n * The element is automatically styled correctly, as long as the core styles (in particular\n * `inspectorCommon.css` is injected into the current document / shadow root). The lit\n * equivalent of calling this method is:\n *\n * ```js\n * const jslog = VisualLogging.badge('new-badge');\n * html`<div class='new-badge' jsog=${jslog}>i18nString(UIStrings.new)</div>`\n *\n * @returns the newly created `HTMLDivElement` for the new badge.\n */\nexport function maybeCreateNewBadge(promotionId: string): HTMLDivElement|undefined {\n  const promotionManager = PromotionManager.instance();\n  if (promotionManager.maybeShowPromotion(promotionId)) {\n    const badge = document.createElement('div');\n    badge.className = 'new-badge';\n    badge.textContent = i18nString(UIStrings.new);\n    badge.setAttribute('jslog', `${VisualLogging.badge('new-badge')}`);\n    return badge;\n  }\n  return undefined;\n}\n\nexport function bindToAction(actionName: string): ReturnType<typeof Directives.ref> {\n  const action = ActionRegistry.instance().getAction(actionName);\n\n  let setEnabled: (enabled: boolean) => void;\n  let toggled: () => void;\n  function actionEnabledChanged(event: Common.EventTarget.EventTargetEvent<boolean>): void {\n    setEnabled(event.data);\n  }\n\n  return Directives.ref((e: Element|undefined) => {\n    if (!e || !(e instanceof Buttons.Button.Button)) {\n      action.removeEventListener(ActionRegistration.Events.ENABLED, actionEnabledChanged);\n      action.removeEventListener(ActionRegistration.Events.TOGGLED, toggled);\n      return;\n    }\n\n    setEnabled = enabled => {\n      e.disabled = !enabled;\n    };\n\n    action.addEventListener(ActionRegistration.Events.ENABLED, actionEnabledChanged);\n\n    const toggleable = action.toggleable();\n    const title = action.title();\n    const iconName = action.icon() ?? '';\n    const jslogContext = action.id();\n    const toggledIconName = action.toggledIcon() ?? iconName;\n    const toggleType = action.toggleWithRedColor() ? Buttons.Button.ToggleType.RED : Buttons.Button.ToggleType.PRIMARY;\n    if (e.childNodes.length) {\n      e.jslogContext = jslogContext;\n    } else if (toggleable) {\n      toggled = () => {\n        e.toggled = action.toggled();\n        if (action.title()) {\n          e.title = action.title();\n          Tooltip.installWithActionBinding(e, action.title(), action.id());\n        }\n      };\n      action.addEventListener(ActionRegistration.Events.TOGGLED, toggled);\n      e.data = {\n        jslogContext,\n        title,\n        variant: Buttons.Button.Variant.ICON_TOGGLE,\n        iconName,\n        toggledIconName,\n        toggleType,\n        toggled: action.toggled(),\n      };\n      toggled();\n    } else if (iconName) {\n      e.data = {iconName, jslogContext, title, variant: Buttons.Button.Variant.ICON};\n    } else {\n      e.data = {jslogContext, title, variant: Buttons.Button.Variant.TEXT};\n    }\n    setEnabled(action.enabled());\n    e.onclick = () => action.execute();\n  });\n}\n\n/* eslint-disable-next-line @typescript-eslint/no-explicit-any */\ntype BindingEventListener = (arg: any) => any;\nexport class InterceptBindingDirective extends Lit.Directive.Directive {\n  static readonly #interceptedBindings = new WeakMap<Element, Map<string, BindingEventListener>>();\n\n  override update(part: Lit.Directive.Part, [listener]: [BindingEventListener]): unknown {\n    if (part.type !== Lit.Directive.PartType.EVENT) {\n      return listener;\n    }\n    let eventListeners = InterceptBindingDirective.#interceptedBindings.get(part.element);\n    if (!eventListeners) {\n      eventListeners = new Map();\n      InterceptBindingDirective.#interceptedBindings.set(part.element, eventListeners);\n    }\n    eventListeners.set(part.name, listener);\n\n    return this.render(listener);\n  }\n\n  /* eslint-disable-next-line @typescript-eslint/no-unsafe-function-type */\n  render(_listener: Function): undefined {\n    return undefined;\n  }\n\n  static attachEventListeners(templateElement: Element, renderedElement: Element): void {\n    const eventListeners = InterceptBindingDirective.#interceptedBindings.get(templateElement);\n    if (!eventListeners) {\n      return;\n    }\n    for (const [name, listener] of eventListeners) {\n      renderedElement.addEventListener(name, listener);\n    }\n  }\n}\n\nexport const cloneCustomElement = <T extends HTMLElement>(element: T, deep?: boolean): T => {\n  const clone = document.createElement(element.localName) as T;\n  for (const attribute of element.attributes) {\n    clone.setAttribute(attribute.name, attribute.value);\n  }\n  if (deep) {\n    for (const child of element.childNodes) {\n      clone.appendChild(child.cloneNode(deep));\n    }\n  }\n  return clone;\n};\n\nexport class HTMLElementWithLightDOMTemplate extends HTMLElement {\n  readonly #mutationObserver = new MutationObserver(this.#onChange.bind(this));\n  #contentTemplate: HTMLTemplateElement|null = null;\n\n  constructor() {\n    super();\n    this.#mutationObserver.observe(this, {childList: true, attributes: true, subtree: true, characterData: true});\n  }\n\n  static cloneNode(node: Node): Node {\n    const clone = node.cloneNode(false);\n    for (const child of node.childNodes) {\n      clone.appendChild(HTMLElementWithLightDOMTemplate.cloneNode(child));\n    }\n    if (node instanceof Element && clone instanceof Element) {\n      InterceptBindingDirective.attachEventListeners(node, clone);\n    }\n    return clone;\n  }\n\n  private static patchLitTemplate(template: Lit.LitTemplate): void {\n    const wrapper = Lit.Directive.directive(InterceptBindingDirective);\n    if (template === Lit.nothing) {\n      return;\n    }\n    template.values = template.values.map(patchValue);\n\n    function isLitTemplate(value: unknown): value is Lit.TemplateResult<1> {\n      return Boolean(\n          typeof value === 'object' && value && '_$litType$' in value && 'strings' in value && 'values' in value &&\n          value['_$litType$'] === 1);\n    }\n\n    function patchValue(value: unknown): unknown {\n      if (typeof value === 'function') {\n        try {\n          return wrapper(value);\n        } catch {\n          return value;\n        }\n      }\n      if (isLitTemplate(value)) {\n        HTMLElementWithLightDOMTemplate.patchLitTemplate(value);\n        return value;\n      }\n      if (Array.isArray(value)) {\n        return value.map(patchValue);\n      }\n\n      return value;\n    }\n  }\n\n  get templateRoot(): DocumentFragment|HTMLElement {\n    return this.#contentTemplate?.content ?? this;\n  }\n\n  set template(template: Lit.LitTemplate) {\n    if (!this.#contentTemplate) {\n      this.removeChildren();\n      this.#contentTemplate = this.createChild('template');\n      this.#mutationObserver.disconnect();\n      this.#mutationObserver.observe(\n          this.#contentTemplate.content, {childList: true, attributes: true, subtree: true, characterData: true});\n    }\n    HTMLElementWithLightDOMTemplate.patchLitTemplate(template);\n    // eslint-disable-next-line @devtools/no-lit-render-outside-of-view\n    render(template, this.#contentTemplate.content);\n  }\n\n  #onChange(mutationList: MutationRecord[]): void {\n    this.onChange(mutationList);\n    for (const mutation of mutationList) {\n      this.removeNodes(mutation.removedNodes);\n      this.addNodes(mutation.addedNodes, mutation.nextSibling);\n      this.updateNode(mutation.target, mutation.attributeName);\n    }\n  }\n\n  protected onChange(_mutationList: MutationRecord[]): void {\n  }\n\n  protected updateNode(_node: Node, _attributeName: string|null): void {\n  }\n\n  protected addNodes(_nodes: NodeList|Node[], _nextSibling?: Node|null): void {\n  }\n\n  protected removeNodes(_nodes: NodeList): void {\n  }\n\n  static findCorrespondingElement(\n      sourceElement: HTMLElement, sourceRootElement: HTMLElement, targetRootElement: Element): Element|null {\n    let currentElement = sourceElement;\n    const childIndexesOnPathToRoot: number[] = [];\n    while (currentElement?.parentElement && currentElement !== sourceRootElement) {\n      childIndexesOnPathToRoot.push([...currentElement.parentElement.children].indexOf(currentElement));\n      currentElement = currentElement.parentElement;\n    }\n    if (!currentElement) {\n      return null;\n    }\n    let targetElement = targetRootElement;\n    for (const index of childIndexesOnPathToRoot.reverse()) {\n      targetElement = targetElement.children[index];\n    }\n    return targetElement;\n  }\n}\n\n/**\n * @param text Text to copy to clipboard\n * @param alert Message to send for a11y only required if there\n * were other UI changes that visually indicated this copy happened.\n */\nexport function copyTextToClipboard(text: string, alert?: string): void {\n  Host.InspectorFrontendHost.InspectorFrontendHostInstance.copyText(text);\n  if (alert) {\n    ARIAUtils.LiveAnnouncer.alert(alert);\n  }\n}\n\nexport function getDevToolsBoundingElement(): HTMLElement {\n  return InspectorView.maybeGetInspectorViewInstance()?.element || document.body;\n}\n\n/**\n * @deprecated Prefer {@link bindToSetting} as this function leaks the checkbox via the setting listener.\n */\nexport const bindCheckbox = function(\n    input: CheckboxLabel, setting: Common.Settings.Setting<boolean>, metric?: UserMetricOptions): void {\n  const setValue = bindCheckboxImpl(input, setting.set.bind(setting), metric);\n  setting.addChangeListener(event => setValue(event.data));\n  setValue(setting.get());\n};\n\nexport const bindCheckboxImpl = function(\n    input: CheckboxLabel, apply: (value: boolean) => void, metric?: UserMetricOptions): (value: boolean) => void {\n  input.addEventListener('change', onInputChanged, false);\n\n  function onInputChanged(): void {\n    apply(input.checked);\n\n    if (input.checked && metric?.enable) {\n      Host.userMetrics.actionTaken(metric.enable);\n    }\n\n    if (!input.checked && metric?.disable) {\n      Host.userMetrics.actionTaken(metric.disable);\n    }\n\n    if (metric?.toggle) {\n      Host.userMetrics.actionTaken(metric.toggle);\n    }\n  }\n\n  return function setValue(value: boolean): void {\n    if (value !== input.checked) {\n      input.checked = value;\n    }\n  };\n};\n\nexport const bindToSetting =\n    (settingOrName: string|Common.Settings.Setting<boolean|string>|Common.Settings.RegExpSetting,\n     stringValidator?: (newSettingValue: string) => boolean): ReturnType<typeof Directives.ref> => {\n      const setting = typeof settingOrName === 'string' ?\n          Common.Settings.Settings.instance().moduleSetting(settingOrName) :\n          settingOrName;\n\n      // We can't use `setValue` as the change listener directly, otherwise we won't\n      // be able to remove it again.\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      let setValue: (value: any) => void;\n      function settingChanged(): void {\n        setValue(setting.get());\n      }\n\n      if (setting.type() === Common.Settings.SettingType.BOOLEAN || typeof setting.defaultValue === 'boolean') {\n        return Directives.ref(e => {\n          if (e === undefined) {\n            setting.removeChangeListener(settingChanged);\n            return;\n          }\n\n          setting.addChangeListener(settingChanged);\n          setValue =\n              bindCheckboxImpl(e as CheckboxLabel, (setting as Common.Settings.Setting<boolean>).set.bind(setting));\n          setValue(setting.get());\n        });\n      }\n\n      if (setting.type() === Common.Settings.SettingType.REGEX || setting instanceof Common.Settings.RegExpSetting) {\n        return Directives.ref(e => {\n          if (e === undefined) {\n            setting.removeChangeListener(settingChanged);\n            return;\n          }\n\n          setting.addChangeListener(settingChanged);\n          setValue = bindInput(e as HTMLInputElement, setting.set.bind(setting), (value: string) => {\n            try {\n              new RegExp(value);\n              return true;\n            } catch {\n              return false;\n            }\n          }, /* numeric */ false);\n          setValue(setting.get());\n        });\n      }\n\n      if (typeof setting.defaultValue === 'string') {\n        return Directives.ref(e => {\n          if (e === undefined) {\n            setting.removeChangeListener(settingChanged);\n            return;\n          }\n\n          setting.addChangeListener(settingChanged);\n          setValue = bindInput(\n              e as HTMLInputElement, setting.set.bind(setting), stringValidator ?? (() => true), /* numeric */ false);\n          setValue(setting.get());\n        });\n      }\n\n      throw new Error(`Cannot infer type for setting  '${setting.name}'`);\n    };\n\n/**\n * Track toggle action as a whole or\n * track on and off action separately.\n */\nexport interface UserMetricOptions {\n  toggle?: Host.UserMetrics.Action;\n  enable?: Host.UserMetrics.Action;\n  disable?: Host.UserMetrics.Action;\n}\n", "// Copyright 2009 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\n/* eslint-disable @devtools/no-imperative-dom-api */\n\nimport * as Common from '../../core/common/common.js';\nimport * as i18n from '../../core/i18n/i18n.js';\nimport * as Platform from '../../core/platform/platform.js';\nimport * as Root from '../../core/root/root.js';\nimport * as Buttons from '../../ui/components/buttons/buttons.js';\nimport * as VisualLogging from '../../ui/visual_logging/visual_logging.js';\nimport {createIcon} from '../kit/kit.js';\n\nimport {type Action, Events as ActionEvents} from './ActionRegistration.js';\nimport {ActionRegistry} from './ActionRegistry.js';\nimport * as ARIAUtils from './ARIAUtils.js';\nimport {ContextMenu} from './ContextMenu.js';\nimport {GlassPane, PointerEventsBehavior} from './GlassPane.js';\nimport type {Suggestion} from './SuggestBox.js';\nimport {Events as TextPromptEvents, TextPrompt} from './TextPrompt.js';\nimport toolbarStyles from './toolbar.css.js';\nimport {Tooltip} from './Tooltip.js';\nimport {bindCheckbox, CheckboxLabel, LongClickController} from './UIUtils.js';\n\nconst UIStrings = {\n  /**\n   * @description Announced screen reader message for ToolbarSettingToggle when the setting is toggled on.\n   */\n  pressed: 'pressed',\n  /**\n   * @description Announced screen reader message for ToolbarSettingToggle when the setting is toggled off.\n   */\n  notPressed: 'not pressed',\n  /**\n   * @description Tooltip shown when the user hovers over the clear icon to empty the text input.\n   */\n  clearInput: 'Clear',\n  /**\n   * @description Placeholder for filter bars that shows before the user types in a filter keyword.\n   */\n  filter: 'Filter',\n} as const;\nconst str_ = i18n.i18n.registerUIStrings('ui/legacy/Toolbar.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\n\n/**\n * Custom element for toolbars.\n *\n * @property floating - The `\"floating\"` attribute is reflected as property.\n * @property wrappable - The `\"wrappable\"` attribute is reflected as property.\n * @attribute floating - If present the toolbar is rendered in columns, with a border\n *                  around it, and a non-transparent background. This is used to\n *                  build vertical toolbars that open with long-click. Defaults\n *                  to `false`.\n * @attribute wrappable - If present the toolbar items will wrap to a new row and the\n *                   toolbar height increases.\n */\nexport class Toolbar extends HTMLElement {\n  #shadowRoot = this.attachShadow({mode: 'open'});\n  private items: ToolbarItem[] = [];\n  enabled = true;\n  private compactLayout = false;\n\n  constructor() {\n    super();\n    this.#shadowRoot.createChild('style').textContent = toolbarStyles;\n    this.#shadowRoot.createChild('slot');\n  }\n\n  onItemsChange(mutationList: MutationRecord[]): void {\n    for (const mutation of mutationList) {\n      for (const element of mutation.removedNodes) {\n        if (!(element instanceof HTMLElement)) {\n          continue;\n        }\n        for (const item of this.items) {\n          if (item.element === element) {\n            this.items.splice(this.items.indexOf(item), 1);\n            break;\n          }\n        }\n      }\n      for (const element of mutation.addedNodes) {\n        if (!(element instanceof HTMLElement)) {\n          continue;\n        }\n        if (this.items.some(item => item.element === element)) {\n          continue;\n        }\n        let item: ToolbarItem;\n        if (element instanceof Buttons.Button.Button) {\n          item = new ToolbarButton('', undefined, undefined, undefined, element);\n        } else if (element instanceof ToolbarInputElement) {\n          item = element.item as ToolbarItem;\n        } else if (element instanceof HTMLSelectElement) {\n          item = new ToolbarComboBox(null, element.title, undefined, undefined, element);\n        } else {\n          item = new ToolbarItem(element);\n        }\n        if (item) {\n          this.appendToolbarItem(item);\n        }\n      }\n    }\n  }\n\n  connectedCallback(): void {\n    if (!this.hasAttribute('role')) {\n      this.setAttribute('role', 'toolbar');\n    }\n  }\n\n  /**\n   * Returns whether this toolbar is floating.\n   *\n   * @returns `true` if the `\"floating\"` attribute is present on this toolbar,\n   *         otherwise `false`.\n   */\n  get floating(): boolean {\n    return this.hasAttribute('floating');\n  }\n\n  /**\n   * Changes the value of the `\"floating\"` attribute on this toolbar.\n   *\n   * @param floating `true` to make the toolbar floating.\n   */\n  set floating(floating: boolean) {\n    this.toggleAttribute('floating', floating);\n  }\n\n  /**\n   * Returns whether this toolbar is wrappable.\n   *\n   * @returns `true` if the `\"wrappable\"` attribute is present on this toolbar,\n   *         otherwise `false`.\n   */\n  get wrappable(): boolean {\n    return this.hasAttribute('wrappable');\n  }\n\n  /**\n   * Changes the value of the `\"wrappable\"` attribute on this toolbar.\n   *\n   * @param wrappable `true` to make the toolbar items wrap to a new row and\n   *                  have the toolbar height adjust.\n   */\n  set wrappable(wrappable: boolean) {\n    this.toggleAttribute('wrappable', wrappable);\n  }\n\n  hasCompactLayout(): boolean {\n    return this.compactLayout;\n  }\n\n  setCompactLayout(enable: boolean): void {\n    if (this.compactLayout === enable) {\n      return;\n    }\n    this.compactLayout = enable;\n    for (const item of this.items) {\n      item.setCompactLayout(enable);\n    }\n  }\n\n  static createLongPressActionButton(\n      action: Action, toggledOptions: ToolbarButton[], untoggledOptions: ToolbarButton[]): ToolbarButton {\n    const button = Toolbar.createActionButton(action);\n    const mainButtonClone = Toolbar.createActionButton(action);\n\n    let longClickController: LongClickController|null = null;\n    let longClickButtons: ToolbarButton[]|null = null;\n\n    action.addEventListener(ActionEvents.TOGGLED, updateOptions);\n    updateOptions();\n    return button;\n\n    function updateOptions(): void {\n      const buttons = action.toggled() ? (toggledOptions || null) : (untoggledOptions || null);\n\n      if (buttons?.length) {\n        if (!longClickController) {\n          longClickController = new LongClickController(button.element, showOptions);\n          button.setLongClickable(true);\n          longClickButtons = buttons;\n        }\n      } else if (longClickController) {\n        longClickController.dispose();\n        longClickController = null;\n        button.setLongClickable(false);\n        longClickButtons = null;\n      }\n    }\n\n    function showOptions(): void {\n      let buttons: ToolbarButton[] = longClickButtons ? longClickButtons.slice() : [];\n      buttons.push(mainButtonClone);\n\n      const document = button.element.ownerDocument;\n      document.documentElement.addEventListener('mouseup', mouseUp, false);\n\n      const optionsGlassPane = new GlassPane();\n      optionsGlassPane.setPointerEventsBehavior(PointerEventsBehavior.BLOCKED_BY_GLASS_PANE);\n      optionsGlassPane.show(document);\n      const optionsBar = optionsGlassPane.contentElement.createChild('devtools-toolbar');\n      optionsBar.floating = true;\n      const buttonHeight = 26;\n\n      const hostButtonPosition = button.element.boxInWindow().relativeToElement(GlassPane.container(document));\n\n      const topNotBottom = hostButtonPosition.y + buttonHeight * buttons.length < document.documentElement.offsetHeight;\n\n      if (topNotBottom) {\n        buttons = buttons.reverse();\n      }\n\n      optionsBar.style.height = (buttonHeight * buttons.length) + 'px';\n      if (topNotBottom) {\n        optionsBar.style.top = (hostButtonPosition.y - 5) + 'px';\n      } else {\n        optionsBar.style.top = (hostButtonPosition.y - (buttonHeight * (buttons.length - 1)) - 6) + 'px';\n      }\n      optionsBar.style.left = (hostButtonPosition.x - 5) + 'px';\n\n      for (let i = 0; i < buttons.length; ++i) {\n        buttons[i].element.addEventListener('mousemove', mouseOver, false);\n        buttons[i].element.addEventListener('mouseout', mouseOut, false);\n        optionsBar.appendToolbarItem(buttons[i]);\n      }\n      const hostButtonIndex = topNotBottom ? 0 : buttons.length - 1;\n      buttons[hostButtonIndex].element.classList.add('emulate-active');\n\n      function mouseOver(e: Event): void {\n        if ((e as MouseEvent).which !== 1) {\n          return;\n        }\n        if (e.target instanceof HTMLElement) {\n          const buttonElement = e.target.enclosingNodeOrSelfWithClass('toolbar-button');\n          buttonElement.classList.add('emulate-active');\n        }\n      }\n\n      function mouseOut(e: Event): void {\n        if ((e as MouseEvent).which !== 1) {\n          return;\n        }\n        if (e.target instanceof HTMLElement) {\n          const buttonElement = e.target.enclosingNodeOrSelfWithClass('toolbar-button');\n          buttonElement.classList.remove('emulate-active');\n        }\n      }\n\n      function mouseUp(e: Event): void {\n        if ((e as MouseEvent).which !== 1) {\n          return;\n        }\n        optionsGlassPane.hide();\n        document.documentElement.removeEventListener('mouseup', mouseUp, false);\n\n        for (let i = 0; i < buttons.length; ++i) {\n          if (buttons[i].element.classList.contains('emulate-active')) {\n            buttons[i].element.classList.remove('emulate-active');\n            buttons[i].clicked(e);\n            break;\n          }\n        }\n      }\n    }\n  }\n\n  static createActionButton(action: Action, options?: ToolbarButtonOptions): ToolbarButton;\n  static createActionButton(actionId: string, options?: ToolbarButtonOptions): ToolbarButton;\n  static createActionButton(actionOrActionId: Action|string, options: ToolbarButtonOptions = {}): ToolbarButton {\n    const action =\n        typeof actionOrActionId === 'string' ? ActionRegistry.instance().getAction(actionOrActionId) : actionOrActionId;\n\n    const button = action.toggleable() ? makeToggle() : makeButton();\n\n    if (options.label) {\n      button.setText(options.label() || action.title());\n    }\n\n    const handler = (): void => {\n      void action.execute();\n    };\n    button.addEventListener(ToolbarButton.Events.CLICK, handler, action);\n    action.addEventListener(ActionEvents.ENABLED, enabledChanged);\n    button.setEnabled(action.enabled());\n    return button;\n\n    function makeButton(): ToolbarButton {\n      const button = new ToolbarButton(action.title(), action.icon(), undefined, action.id());\n      if (action.title()) {\n        Tooltip.installWithActionBinding(button.element, action.title(), action.id());\n      }\n      return button;\n    }\n\n    function makeToggle(): ToolbarToggle {\n      const toggleButton = new ToolbarToggle(action.title(), action.icon(), action.toggledIcon(), action.id());\n      if (action.toggleWithRedColor()) {\n        toggleButton.enableToggleWithRedColor();\n      }\n      action.addEventListener(ActionEvents.TOGGLED, toggled);\n      toggled();\n      return toggleButton;\n\n      function toggled(): void {\n        toggleButton.setToggled(action.toggled());\n        if (action.title()) {\n          toggleButton.setTitle(action.title());\n          Tooltip.installWithActionBinding(toggleButton.element, action.title(), action.id());\n        }\n      }\n    }\n\n    function enabledChanged(event: Common.EventTarget.EventTargetEvent<boolean>): void {\n      button.setEnabled(event.data);\n    }\n  }\n\n  empty(): boolean {\n    return !this.items.length;\n  }\n\n  setEnabled(enabled: boolean): void {\n    this.enabled = enabled;\n    for (const item of this.items) {\n      item.applyEnabledState(this.enabled && item.enabled);\n    }\n  }\n\n  appendToolbarItem(item: ToolbarItem): void {\n    this.items.push(item);\n    item.toolbar = this;\n    item.setCompactLayout(this.hasCompactLayout());\n    if (!this.enabled) {\n      item.applyEnabledState(false);\n    }\n    if (item.element.parentElement !== this) {\n      this.appendChild(item.element);\n    }\n    this.hideSeparatorDupes();\n  }\n\n  hasItem(item: ToolbarItem): boolean {\n    return this.items.includes(item);\n  }\n\n  prependToolbarItem(item: ToolbarItem): void {\n    this.items.unshift(item);\n    item.toolbar = this;\n    item.setCompactLayout(this.hasCompactLayout());\n    if (!this.enabled) {\n      item.applyEnabledState(false);\n    }\n    this.prepend(item.element);\n    this.hideSeparatorDupes();\n  }\n\n  appendSeparator(): void {\n    this.appendToolbarItem(new ToolbarSeparator());\n  }\n\n  appendSpacer(): void {\n    this.appendToolbarItem(new ToolbarSeparator(true));\n  }\n\n  appendText(text: string): void {\n    this.appendToolbarItem(new ToolbarText(text));\n  }\n\n  removeToolbarItem(itemToRemove: ToolbarItem): void {\n    const updatedItems = [];\n    for (const item of this.items) {\n      if (item === itemToRemove) {\n        item.element.remove();\n      } else {\n        updatedItems.push(item);\n      }\n    }\n    this.items = updatedItems;\n  }\n\n  removeToolbarItems(): void {\n    for (const item of this.items) {\n      item.toolbar = null;\n    }\n    this.items = [];\n    this.removeChildren();\n  }\n\n  hideSeparatorDupes(): void {\n    if (!this.items.length) {\n      return;\n    }\n    // Don't hide first and last separators if they were added explicitly.\n    let previousIsSeparator = false;\n    let lastSeparator;\n    let nonSeparatorVisible = false;\n    for (let i = 0; i < this.items.length; ++i) {\n      if (this.items[i] instanceof ToolbarSeparator) {\n        this.items[i].setVisible(!previousIsSeparator);\n        previousIsSeparator = true;\n        lastSeparator = this.items[i];\n        continue;\n      }\n      if (this.items[i].visible()) {\n        previousIsSeparator = false;\n        lastSeparator = null;\n        nonSeparatorVisible = true;\n      }\n    }\n    if (lastSeparator && lastSeparator !== this.items[this.items.length - 1]) {\n      lastSeparator.setVisible(false);\n    }\n\n    this.classList.toggle(\n        'hidden',\n        lastSeparator !== null && lastSeparator !== undefined && lastSeparator.visible() && !nonSeparatorVisible);\n  }\n\n  async appendItemsAtLocation(location: string): Promise<void> {\n    const extensions: ToolbarItemRegistration[] = getRegisteredToolbarItems();\n\n    extensions.sort((extension1, extension2) => {\n      const order1 = extension1.order || 0;\n      const order2 = extension2.order || 0;\n      return order1 - order2;\n    });\n\n    const filtered = extensions.filter(e => e.location === location);\n    const items = await Promise.all(filtered.map(extension => {\n      const {separator, actionId, label, loadItem} = extension;\n      if (separator) {\n        return new ToolbarSeparator();\n      }\n      if (actionId) {\n        return Toolbar.createActionButton(actionId, {label});\n      }\n      // TODO(crbug.com/1134103) constratint the case checked with this if using TS type definitions once UI is TS-authored.\n      if (!loadItem) {\n        throw new Error('Could not load a toolbar item registration with no loadItem function');\n      }\n      return loadItem().then(p => (p).item());\n    }));\n\n    for (const item of items) {\n      if (item) {\n        this.appendToolbarItem(item);\n      }\n    }\n  }\n}\n\ncustomElements.define('devtools-toolbar', Toolbar);\n\nexport interface ToolbarButtonOptions {\n  label?: () => Platform.UIString.LocalizedString;\n}\n\n// We need any here because Common.ObjectWrapper.ObjectWrapper is invariant in T.\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport class ToolbarItem<T = any, E extends HTMLElement = HTMLElement> extends Common.ObjectWrapper.ObjectWrapper<T> {\n  element: E;\n  #visible: boolean;\n  enabled: boolean;\n  toolbar: Toolbar|null;\n  protected title?: string;\n\n  constructor(element: E) {\n    super();\n    this.element = element;\n    this.#visible = true;\n    this.enabled = true;\n\n    /**\n     * Set by the parent toolbar during appending.\n     */\n    this.toolbar = null;\n  }\n\n  setTitle(title: string, actionId: string|undefined = undefined): void {\n    if (this.title === title) {\n      return;\n    }\n    this.title = title;\n    ARIAUtils.setLabel(this.element, title);\n    if (actionId === undefined) {\n      Tooltip.install(this.element, title);\n    } else {\n      Tooltip.installWithActionBinding(this.element, title, actionId);\n    }\n  }\n\n  setEnabled(value: boolean): void {\n    if (this.enabled === value) {\n      return;\n    }\n    this.enabled = value;\n    this.applyEnabledState(this.enabled && (!this.toolbar || this.toolbar.enabled));\n  }\n\n  applyEnabledState(enabled: boolean): void {\n    // @ts-expect-error: Ignoring in favor of an `instanceof` check for all the different\n    //             kind of HTMLElement classes that have a disabled attribute.\n    this.element.disabled = !enabled;\n  }\n\n  visible(): boolean {\n    return this.#visible;\n  }\n\n  setVisible(x: boolean): void {\n    if (this.#visible === x) {\n      return;\n    }\n    this.element.classList.toggle('hidden', !x);\n    this.#visible = x;\n    if (this.toolbar && !(this instanceof ToolbarSeparator)) {\n      this.toolbar.hideSeparatorDupes();\n    }\n  }\n\n  setCompactLayout(_enable: boolean): void {\n  }\n\n  setMaxWidth(width: number): void {\n    this.element.style.maxWidth = width + 'px';\n  }\n\n  setMinWidth(width: number): void {\n    this.element.style.minWidth = width + 'px';\n  }\n}\n\nexport const enum ToolbarItemWithCompactLayoutEvents {\n  COMPACT_LAYOUT_UPDATED = 'CompactLayoutUpdated',\n}\n\ninterface ToolbarItemWithCompactLayoutEventTypes {\n  [ToolbarItemWithCompactLayoutEvents.COMPACT_LAYOUT_UPDATED]: boolean;\n}\n\nexport class ToolbarItemWithCompactLayout extends ToolbarItem<ToolbarItemWithCompactLayoutEventTypes> {\n  override setCompactLayout(enable: boolean): void {\n    this.dispatchEventToListeners(ToolbarItemWithCompactLayoutEvents.COMPACT_LAYOUT_UPDATED, enable);\n  }\n}\n\nexport class ToolbarText extends ToolbarItem<void, HTMLElement> {\n  constructor(text = '') {\n    const element = document.createElement('div');\n    element.classList.add('toolbar-text');\n    super(element);\n    this.setText(text);\n  }\n\n  text(): string {\n    return this.element.textContent ?? '';\n  }\n\n  setText(text: string): void {\n    this.element.textContent = text;\n  }\n}\n\nexport class ToolbarButton extends ToolbarItem<ToolbarButton.EventTypes, Buttons.Button.Button> {\n  private button: Buttons.Button.Button;\n  private text?: string;\n  private adorner?: HTMLElement;\n\n  constructor(title: string, glyph?: string, text?: string, jslogContext?: string, button?: Buttons.Button.Button) {\n    if (!button) {\n      button = new Buttons.Button.Button();\n      if (glyph && !text) {\n        button.data = {variant: Buttons.Button.Variant.ICON, iconName: glyph};\n      } else {\n        button.variant = Buttons.Button.Variant.TEXT;\n        button.reducedFocusRing = true;\n        if (glyph) {\n          button.iconName = glyph;\n        }\n      }\n    }\n    super(button);\n    this.button = button;\n    button.classList.add('toolbar-button');\n    this.element.addEventListener('click', this.clicked.bind(this), false);\n    button.textContent = text || '';\n    this.setTitle(title);\n    if (jslogContext) {\n      button.jslogContext = jslogContext;\n    }\n  }\n\n  focus(): void {\n    this.element.focus();\n  }\n\n  checked(checked: boolean): void {\n    this.button.checked = checked;\n  }\n\n  toggleOnClick(toggleOnClick: boolean): void {\n    this.button.toggleOnClick = toggleOnClick;\n  }\n\n  isToggled(): boolean {\n    return this.button.toggled;\n  }\n\n  toggled(toggled: boolean): void {\n    this.button.toggled = toggled;\n  }\n\n  setToggleType(type: Buttons.Button.ToggleType): void {\n    this.button.toggleType = type;\n  }\n\n  setLongClickable(longClickable: boolean): void {\n    this.button.longClickable = longClickable;\n  }\n\n  setSize(size: Buttons.Button.Size): void {\n    this.button.size = size;\n  }\n\n  setReducedFocusRing(): void {\n    this.button.reducedFocusRing = true;\n  }\n\n  setText(text: string): void {\n    if (this.text === text) {\n      return;\n    }\n    this.button.textContent = text;\n    this.button.variant = Buttons.Button.Variant.TEXT;\n    this.button.reducedFocusRing = true;\n    this.text = text;\n  }\n\n  setAdorner(adorner: HTMLElement): void {\n    if (this.adorner) {\n      this.adorner.replaceWith(adorner);\n    } else {\n      this.element.prepend(adorner);\n    }\n    this.adorner = adorner;\n  }\n\n  setGlyph(iconName: string): void {\n    this.button.iconName = iconName;\n  }\n\n  setToggledIcon(toggledIconName: string): void {\n    this.button.variant = Buttons.Button.Variant.ICON_TOGGLE;\n    this.button.toggledIconName = toggledIconName;\n  }\n\n  setBackgroundImage(iconURL: string): void {\n    this.element.style.backgroundImage = 'url(' + iconURL + ')';\n  }\n\n  setSecondary(): void {\n    this.element.classList.add('toolbar-button-secondary');\n  }\n\n  setDarkText(): void {\n    this.element.classList.add('dark-text');\n  }\n\n  clicked(event: Event): void {\n    if (!this.enabled) {\n      return;\n    }\n    this.dispatchEventToListeners(ToolbarButton.Events.CLICK, event);\n    event.consume();\n  }\n}\n\nexport namespace ToolbarButton {\n  export const enum Events {\n    CLICK = 'Click',\n  }\n\n  export interface EventTypes {\n    [Events.CLICK]: Event;\n  }\n}\n\nexport class ToolbarInput extends ToolbarItem<ToolbarInput.EventTypes> {\n  private prompt: TextPrompt;\n  private readonly proxyElement: Element;\n\n  constructor(\n      placeholder: string, accessiblePlaceholder?: string, growFactor?: number, shrinkFactor?: number, tooltip?: string,\n      completions?: ((arg0: string, arg1: string, arg2?: boolean|undefined) => Promise<Suggestion[]>),\n      dynamicCompletions?: boolean, jslogContext?: string, element?: HTMLElement) {\n    if (!element) {\n      element = document.createElement('div');\n    }\n    element.classList.add('toolbar-input');\n    super(element);\n\n    const internalPromptElement = this.element.createChild('div', 'toolbar-input-prompt');\n    ARIAUtils.setLabel(internalPromptElement, accessiblePlaceholder || placeholder);\n    internalPromptElement.addEventListener('focus', () => this.element.classList.add('focused'));\n    internalPromptElement.addEventListener('blur', () => this.element.classList.remove('focused'));\n\n    this.prompt = new TextPrompt();\n    this.prompt.jslogContext = jslogContext;\n    this.proxyElement = this.prompt.attach(internalPromptElement);\n    this.proxyElement.classList.add('toolbar-prompt-proxy');\n    this.proxyElement.addEventListener('keydown', (event: Event) => this.onKeydownCallback(event as KeyboardEvent));\n    this.prompt.initialize(\n        completions || (() => Promise.resolve([])),\n        ' ',\n        dynamicCompletions,\n    );\n    if (tooltip) {\n      this.prompt.setTitle(tooltip);\n    }\n    this.prompt.setPlaceholder(placeholder, accessiblePlaceholder);\n    this.prompt.addEventListener(TextPromptEvents.TEXT_CHANGED, this.onChangeCallback.bind(this));\n\n    if (growFactor) {\n      this.element.style.flexGrow = String(growFactor);\n    }\n    if (shrinkFactor) {\n      this.element.style.flexShrink = String(shrinkFactor);\n    }\n\n    const clearButtonText = i18nString(UIStrings.clearInput);\n    const clearButton = new Buttons.Button.Button();\n    clearButton.data = {\n      variant: Buttons.Button.Variant.ICON,\n      iconName: 'cross-circle-filled',\n      size: Buttons.Button.Size.SMALL,\n      title: clearButtonText,\n    };\n    clearButton.className = 'toolbar-input-clear-button';\n    clearButton.setAttribute('jslog', `${VisualLogging.action('clear').track({click: true}).parent('mapped')}`);\n    VisualLogging.setMappedParent(clearButton, internalPromptElement);\n    clearButton.variant = Buttons.Button.Variant.ICON;\n    clearButton.size = Buttons.Button.Size.SMALL;\n    clearButton.iconName = 'cross-circle-filled';\n    clearButton.title = clearButtonText;\n    clearButton.ariaLabel = clearButtonText;\n    clearButton.tabIndex = -1;\n\n    clearButton.addEventListener('click', () => {\n      this.setValue('', true);\n      this.prompt.focus();\n    });\n\n    this.element.appendChild(clearButton);\n    this.updateEmptyStyles();\n  }\n\n  override applyEnabledState(enabled: boolean): void {\n    if (enabled) {\n      this.element.classList.remove('disabled');\n    } else {\n      this.element.classList.add('disabled');\n    }\n\n    this.prompt.setEnabled(enabled);\n  }\n\n  setValue(value: string, notify?: boolean): void {\n    this.prompt.setText(value);\n    if (notify) {\n      this.onChangeCallback();\n    }\n    this.updateEmptyStyles();\n  }\n\n  value(): string {\n    return this.prompt.textWithCurrentSuggestion();\n  }\n\n  valueWithoutSuggestion(): string {\n    return this.prompt.text();\n  }\n\n  clearAutocomplete(): void {\n    this.prompt.clearAutocomplete();\n  }\n\n  focus(): void {\n    this.prompt.focus();\n  }\n\n  private onKeydownCallback(event: KeyboardEvent): void {\n    if (event.key === 'Enter' && this.prompt.text()) {\n      this.dispatchEventToListeners(ToolbarInput.Event.ENTER_PRESSED, this.prompt.text());\n    }\n    if (!Platform.KeyboardUtilities.isEscKey(event) || !this.prompt.text()) {\n      return;\n    }\n    this.setValue('', true);\n    event.consume(true);\n  }\n\n  private onChangeCallback(): void {\n    this.updateEmptyStyles();\n    this.dispatchEventToListeners(ToolbarInput.Event.TEXT_CHANGED, this.prompt.text());\n  }\n\n  private updateEmptyStyles(): void {\n    this.element.classList.toggle('toolbar-input-empty', !this.prompt.text());\n  }\n}\n\nexport class ToolbarFilter extends ToolbarInput {\n  constructor(\n      filterBy?: Common.UIString.LocalizedString, growFactor?: number, shrinkFactor?: number, tooltip?: string,\n      completions?: ((arg0: string, arg1: string, arg2?: boolean|undefined) => Promise<Suggestion[]>),\n      dynamicCompletions?: boolean, jslogContext?: string, element?: HTMLElement) {\n    const filterPlaceholder = filterBy ? filterBy : i18nString(UIStrings.filter);\n    super(\n        filterPlaceholder, filterPlaceholder, growFactor, shrinkFactor, tooltip, completions, dynamicCompletions,\n        jslogContext || 'filter', element);\n\n    const filterIcon = createIcon('filter');\n    this.element.prepend(filterIcon);\n    this.element.classList.add('toolbar-filter');\n  }\n}\n\nexport class ToolbarInputElement extends HTMLElement {\n  static observedAttributes = ['value', 'disabled'];\n\n  item?: ToolbarInput;\n  datalist: HTMLDataListElement|null = null;\n  value: string|undefined = undefined;\n  #disabled = false;\n\n  connectedCallback(): void {\n    if (this.item) {\n      return;\n    }\n    const list = this.getAttribute('list');\n    if (list) {\n      this.datalist = (this.getRootNode() as ShadowRoot | Document).querySelector(`datalist[id=\"${list}\"]`);\n    }\n    const placeholder = this.getAttribute('placeholder') || '';\n    const accessiblePlaceholder = this.getAttribute('aria-placeholder') ?? undefined;\n    const tooltip = this.getAttribute('title') ?? undefined;\n    const jslogContext = this.id ?? undefined;\n    const isFilter = this.getAttribute('type') === 'filter';\n    if (isFilter) {\n      this.item = new ToolbarFilter(\n          placeholder as Platform.UIString.LocalizedString, /* growFactor=*/ undefined,\n          /* shrinkFactor=*/ undefined, tooltip, this.datalist ? this.#onAutocomplete.bind(this) : undefined,\n          /* dynamicCompletions=*/ undefined, jslogContext || 'filter', this);\n    } else {\n      this.item = new ToolbarInput(\n          placeholder, accessiblePlaceholder, /* growFactor=*/ undefined,\n          /* shrinkFactor=*/ undefined, tooltip, this.datalist ? this.#onAutocomplete.bind(this) : undefined,\n          /* dynamicCompletions=*/ undefined, jslogContext, this);\n    }\n    if (this.value) {\n      this.item.setValue(this.value);\n    }\n    if (this.#disabled) {\n      this.item.setEnabled(false);\n    }\n    this.item.addEventListener(ToolbarInput.Event.TEXT_CHANGED, event => {\n      this.dispatchEvent(new CustomEvent('change', {detail: event.data}));\n    });\n    this.item.addEventListener(ToolbarInput.Event.ENTER_PRESSED, event => {\n      this.dispatchEvent(new CustomEvent('submit', {detail: event.data}));\n    });\n  }\n\n  override focus(): void {\n    this.item?.focus();\n  }\n\n  async #onAutocomplete(expression: string, prefix: string, force?: boolean): Promise<Suggestion[]> {\n    if (!prefix && !force && expression || !this.datalist) {\n      return [];\n    }\n\n    const options = this.datalist.options;\n    return [...options].map((({value}) => value)).filter(value => value.startsWith(prefix)).map(text => ({text}));\n  }\n\n  attributeChangedCallback(name: string, _oldValue: string, newValue: string): void {\n    if (name === 'value') {\n      if (this.item && this.item.value() !== newValue) {\n        this.item.setValue(newValue, true);\n      } else {\n        this.value = newValue;\n      }\n    } else if (name === 'disabled') {\n      this.#disabled = typeof newValue === 'string';\n      if (this.item) {\n        this.item.setEnabled(!this.#disabled);\n      }\n    }\n  }\n\n  set disabled(disabled: boolean) {\n    if (disabled) {\n      this.setAttribute('disabled', '');\n    } else {\n      this.removeAttribute('disabled');\n    }\n  }\n\n  get disabled(): boolean {\n    return this.hasAttribute('disabled');\n  }\n}\ncustomElements.define('devtools-toolbar-input', ToolbarInputElement);\n\nexport namespace ToolbarInput {\n  export const enum Event {\n    TEXT_CHANGED = 'TextChanged',\n    ENTER_PRESSED = 'EnterPressed',\n  }\n\n  export interface EventTypes {\n    [Event.TEXT_CHANGED]: string;\n    [Event.ENTER_PRESSED]: string;\n  }\n}\n\nexport class ToolbarToggle extends ToolbarButton {\n  private readonly toggledGlyph: string|undefined;\n\n  constructor(title: string, glyph?: string, toggledGlyph?: string, jslogContext?: string, toggleOnClick?: boolean) {\n    super(title, glyph, '');\n    this.toggledGlyph = toggledGlyph ? toggledGlyph : glyph;\n    this.setToggledIcon(this.toggledGlyph || '');\n    this.setToggleType(Buttons.Button.ToggleType.PRIMARY);\n    this.toggled(false);\n\n    if (jslogContext) {\n      this.element.setAttribute('jslog', `${VisualLogging.toggle().track({click: true}).context(jslogContext)}`);\n    }\n    if (toggleOnClick !== undefined) {\n      this.setToggleOnClick(toggleOnClick);\n    }\n  }\n\n  setToggleOnClick(toggleOnClick: boolean): void {\n    this.toggleOnClick(toggleOnClick);\n  }\n\n  setToggled(toggled: boolean): void {\n    this.toggled(toggled);\n  }\n\n  setChecked(checked: boolean): void {\n    this.checked(checked);\n  }\n\n  enableToggleWithRedColor(): void {\n    this.setToggleType(Buttons.Button.ToggleType.RED);\n  }\n}\n\nexport class ToolbarMenuButton extends ToolbarItem<ToolbarButton.EventTypes> {\n  private textElement?: HTMLElement;\n  private text?: string;\n  private iconName?: string;\n  private adorner?: HTMLElement;\n  private readonly contextMenuHandler: (arg0: ContextMenu) => void;\n  private readonly useSoftMenu: boolean;\n  private readonly keepOpen: boolean;\n  private readonly isIconDropdown: boolean;\n  private triggerTimeoutId?: number;\n  #triggerDelay = 200;\n\n  constructor(\n      contextMenuHandler: (arg0: ContextMenu) => void, isIconDropdown?: boolean, useSoftMenu?: boolean,\n      jslogContext?: string, iconName?: string, keepOpen?: boolean) {\n    let element;\n    if (iconName) {\n      element = new Buttons.Button.Button();\n      element.data = {variant: Buttons.Button.Variant.ICON, iconName};\n    } else {\n      element = document.createElement('button');\n    }\n    element.classList.add('toolbar-button');\n    super(element);\n    this.element.addEventListener('click', this.clicked.bind(this), false);\n\n    this.iconName = iconName;\n\n    this.setTitle('');\n    this.title = '';\n    if (!isIconDropdown) {\n      this.element.classList.add('toolbar-has-dropdown');\n      const dropdownArrowIcon = createIcon('triangle-down', 'toolbar-dropdown-arrow');\n      this.element.appendChild(dropdownArrowIcon);\n    }\n    if (jslogContext) {\n      this.element.setAttribute('jslog', `${VisualLogging.dropDown().track({click: true}).context(jslogContext)}`);\n    }\n    this.element.addEventListener('mousedown', this.mouseDown.bind(this), false);\n    this.contextMenuHandler = contextMenuHandler;\n    this.useSoftMenu = Boolean(useSoftMenu);\n    this.keepOpen = Boolean(keepOpen);\n    this.isIconDropdown = Boolean(isIconDropdown);\n    ARIAUtils.markAsMenuButton(this.element);\n  }\n\n  setText(text: string): void {\n    if (this.text === text || this.iconName) {\n      return;\n    }\n    if (!this.textElement) {\n      this.textElement = document.createElement('div');\n      this.textElement.classList.add('toolbar-text', 'hidden');\n      const dropDownArrow = this.element.querySelector('.toolbar-dropdown-arrow');\n      this.element.insertBefore(this.textElement, dropDownArrow);\n    }\n    this.textElement.textContent = text;\n    this.textElement.classList.toggle('hidden', !text);\n    this.text = text;\n  }\n\n  setAdorner(adorner: HTMLElement): void {\n    if (this.iconName) {\n      return;\n    }\n    if (!this.adorner) {\n      this.adorner = adorner;\n    } else {\n      adorner.replaceWith(adorner);\n      if (this.element.firstChild) {\n        this.element.removeChild(this.element.firstChild);\n      }\n    }\n    this.element.prepend(adorner);\n  }\n\n  setDarkText(): void {\n    this.element.classList.add('dark-text');\n  }\n\n  turnShrinkable(): void {\n    this.element.classList.add('toolbar-has-dropdown-shrinkable');\n  }\n\n  setTriggerDelay(x: number): void {\n    this.#triggerDelay = x;\n  }\n\n  mouseDown(event: MouseEvent): void {\n    if (!this.enabled) {\n      return;\n    }\n    if (event.buttons !== 1) {\n      return;\n    }\n\n    if (!this.triggerTimeoutId) {\n      this.triggerTimeoutId = window.setTimeout(this.trigger.bind(this, event), this.#triggerDelay);\n    }\n  }\n\n  private trigger(event: Event): void {\n    delete this.triggerTimeoutId;\n\n    const horizontalPosition =\n        this.isIconDropdown ? this.element.getBoundingClientRect().right : this.element.getBoundingClientRect().left;\n    const contextMenu = new ContextMenu(event, {\n      useSoftMenu: this.useSoftMenu,\n      keepOpen: this.keepOpen,\n      x: horizontalPosition,\n      y: this.element.getBoundingClientRect().top + this.element.offsetHeight,\n      // Without adding a delay, pointer events will be un-ignored too early, and a single click causes\n      // the context menu to be closed and immediately re-opened on Windows (https://crbug.com/339560549).\n      onSoftMenuClosed: () => setTimeout(() => this.element.removeAttribute('aria-expanded'), 50),\n    });\n    this.contextMenuHandler(contextMenu);\n    this.element.setAttribute('aria-expanded', 'true');\n    void contextMenu.show();\n  }\n\n  clicked(event: Event): void {\n    if (this.triggerTimeoutId) {\n      clearTimeout(this.triggerTimeoutId);\n    }\n    this.trigger(event);\n  }\n}\n\nexport class ToolbarSettingToggle extends ToolbarToggle {\n  private readonly defaultTitle: string;\n  private readonly setting: Common.Settings.Setting<boolean>;\n  private willAnnounceState: boolean;\n\n  constructor(\n      setting: Common.Settings.Setting<boolean>, glyph: string, title: string, toggledGlyph?: string,\n      jslogContext?: string) {\n    super(title, glyph, toggledGlyph, jslogContext);\n    this.defaultTitle = title;\n    this.setting = setting;\n    this.settingChanged();\n    this.setting.addChangeListener(this.settingChanged, this);\n\n    // Determines whether the toggle state will be announced to a screen reader\n    this.willAnnounceState = false;\n  }\n\n  private settingChanged(): void {\n    const toggled = this.setting.get();\n    this.setToggled(toggled);\n    const toggleAnnouncement = toggled ? i18nString(UIStrings.pressed) : i18nString(UIStrings.notPressed);\n    if (this.willAnnounceState) {\n      ARIAUtils.LiveAnnouncer.alert(toggleAnnouncement);\n    }\n    this.willAnnounceState = false;\n    this.setTitle(this.defaultTitle);\n  }\n\n  override clicked(event: Event): void {\n    this.willAnnounceState = true;\n    this.setting.set(this.isToggled());\n    super.clicked(event);\n  }\n}\n\nexport class ToolbarSeparator extends ToolbarItem<void> {\n  constructor(spacer?: boolean) {\n    const element = document.createElement('div');\n    element.classList.add(spacer ? 'toolbar-spacer' : 'toolbar-divider');\n    super(element);\n  }\n}\n\nexport interface Provider {\n  item(): ToolbarItem|null;\n}\n\nexport interface ItemsProvider {\n  toolbarItems(): ToolbarItem[];\n}\n\nexport class ToolbarComboBox extends ToolbarItem<void, HTMLSelectElement> {\n  constructor(\n      changeHandler: ((arg0: Event) => void)|null, title: string, className?: string, jslogContext?: string,\n      element?: HTMLSelectElement) {\n    if (!element) {\n      element = document.createElement('select');\n    }\n    super(element);\n    if (changeHandler) {\n      this.element.addEventListener('change', changeHandler, false);\n    }\n    ARIAUtils.setLabel(this.element, title);\n    super.setTitle(title);\n    if (className) {\n      this.element.classList.add(className);\n    }\n    if (jslogContext) {\n      this.element.setAttribute('jslog', `${VisualLogging.dropDown().track({change: true}).context(jslogContext)}`);\n    }\n  }\n\n  turnShrinkable(): void {\n    this.element.classList.add('toolbar-has-dropdown-shrinkable');\n  }\n\n  size(): number {\n    return this.element.childElementCount;\n  }\n\n  options(): HTMLOptionElement[] {\n    return Array.prototype.slice.call(this.element.children, 0);\n  }\n\n  addOption(option: Element): void {\n    this.element.appendChild(option);\n  }\n\n  createOption(label: string, value?: string, jslogContext?: string): HTMLOptionElement {\n    const option = this.element.createChild('option');\n    option.text = label;\n    if (typeof value !== 'undefined') {\n      option.value = value;\n    }\n    if (!jslogContext) {\n      jslogContext = value ? Platform.StringUtilities.toKebabCase(value) : undefined;\n    }\n    option.setAttribute('jslog', `${VisualLogging.item(jslogContext).track({click: true})}`);\n    return option;\n  }\n\n  override applyEnabledState(enabled: boolean): void {\n    super.applyEnabledState(enabled);\n    this.element.disabled = !enabled;\n  }\n\n  removeOption(option: Element): void {\n    this.element.removeChild(option);\n  }\n\n  removeOptions(): void {\n    this.element.removeChildren();\n  }\n\n  selectedOption(): HTMLOptionElement|null {\n    if (this.element.selectedIndex >= 0) {\n      return this.element[this.element.selectedIndex] as HTMLOptionElement;\n    }\n    return null;\n  }\n\n  select(option: Element): void {\n    this.element.selectedIndex = Array.prototype.indexOf.call(this.element, option);\n  }\n\n  setSelectedIndex(index: number): void {\n    this.element.selectedIndex = index;\n  }\n\n  selectedIndex(): number {\n    return this.element.selectedIndex;\n  }\n}\n\nexport interface Option {\n  value: string;\n  label: string;\n}\n\nexport class ToolbarSettingComboBox extends ToolbarComboBox {\n  #options: Option[];\n  private readonly setting: Common.Settings.Setting<string>;\n  private muteSettingListener?: boolean;\n  constructor(options: Option[], setting: Common.Settings.Setting<string>, accessibleName: string) {\n    super(null, accessibleName, undefined, setting.name);\n    this.#options = options;\n    this.setting = setting;\n    this.element.addEventListener('change', this.onSelectValueChange.bind(this), false);\n    this.setOptions(options);\n    setting.addChangeListener(this.onDevToolsSettingChanged, this);\n  }\n\n  setOptions(options: Option[]): void {\n    this.#options = options;\n    this.element.removeChildren();\n    for (let i = 0; i < options.length; ++i) {\n      const dataOption = options[i];\n      const option = this.createOption(dataOption.label, dataOption.value);\n      this.element.appendChild(option);\n      if (this.setting.get() === dataOption.value) {\n        this.setSelectedIndex(i);\n      }\n    }\n  }\n\n  value(): string {\n    return this.#options[this.selectedIndex()].value;\n  }\n\n  override select(option: Element): void {\n    const index = Array.prototype.indexOf.call(this.element, option);\n    this.setSelectedIndex(index);\n  }\n\n  override setSelectedIndex(index: number): void {\n    super.setSelectedIndex(index);\n    const option = this.#options.at(index);\n    if (option) {\n      this.setTitle(option.label);\n    }\n  }\n\n  /**\n   * Note: wondering why there are two event listeners and what the difference is?\n   * It is because this combo box <select> is backed by a Devtools setting and\n   * at any time there could be multiple instances of these elements that are\n   * backed by the same setting. So they have to listen to two things:\n   * 1. When the setting is changed via a different method.\n   * 2. When the value of the select is changed, triggering a change to the setting.\n   */\n\n  /**\n   * Runs when the DevTools setting is changed\n   */\n  private onDevToolsSettingChanged(): void {\n    if (this.muteSettingListener) {\n      return;\n    }\n\n    const value = this.setting.get();\n    for (let i = 0; i < this.#options.length; ++i) {\n      if (value === this.#options[i].value) {\n        this.setSelectedIndex(i);\n        break;\n      }\n    }\n  }\n\n  /**\n   * Run when the user interacts with the <select> element.\n   */\n  private onSelectValueChange(_event: Event): void {\n    const option = this.#options[this.selectedIndex()];\n    this.muteSettingListener = true;\n    this.setting.set(option.value);\n    this.muteSettingListener = false;\n    // Because we mute the DevTools setting change listener, we need to\n    // manually update the title here.\n    this.setTitle(option.label);\n  }\n}\n\nexport class ToolbarCheckbox extends ToolbarItem<void> {\n  #checkboxLabel: CheckboxLabel;\n  constructor(\n      text: Common.UIString.LocalizedString, tooltip?: Common.UIString.LocalizedString,\n      listener?: ((arg0: MouseEvent) => void), jslogContext?: string) {\n    const checkboxLabel = CheckboxLabel.create(text, undefined, undefined, jslogContext);\n    super(checkboxLabel);\n    if (tooltip) {\n      Tooltip.install(this.element, tooltip);\n    }\n    if (listener) {\n      this.element.addEventListener('click', listener, false);\n    }\n\n    this.#checkboxLabel = checkboxLabel;\n  }\n\n  checked(): boolean {\n    return (this.element as CheckboxLabel).checked;\n  }\n\n  setChecked(value: boolean): void {\n    (this.element as CheckboxLabel).checked = value;\n  }\n\n  override applyEnabledState(enabled: boolean): void {\n    super.applyEnabledState(enabled);\n    (this.element as CheckboxLabel).disabled = !enabled;\n  }\n\n  setIndeterminate(indeterminate: boolean): void {\n    (this.element as CheckboxLabel).indeterminate = indeterminate;\n  }\n\n  /**\n   * Sets the user visible text shown alongside the checkbox.\n   * If you want to update the title/aria-label, use setTitle.\n   */\n  setLabelText(content: Common.UIString.LocalizedString): void {\n    this.#checkboxLabel.setLabelText(content);\n  }\n}\n\nexport class ToolbarSettingCheckbox extends ToolbarCheckbox {\n  constructor(\n      setting: Common.Settings.Setting<boolean>, tooltip?: Common.UIString.LocalizedString,\n      alternateTitle?: Common.UIString.LocalizedString) {\n    super(alternateTitle || setting.title(), tooltip, undefined, setting.name);\n    bindCheckbox(this.element as CheckboxLabel, setting);\n  }\n}\n\nconst registeredToolbarItems: ToolbarItemRegistration[] = [];\n\nexport function registerToolbarItem(registration: ToolbarItemRegistration): void {\n  registeredToolbarItems.push(registration);\n}\n\nfunction getRegisteredToolbarItems(): ToolbarItemRegistration[] {\n  return registeredToolbarItems.filter(\n      item => Root.Runtime.Runtime.isDescriptorEnabled({experiment: item.experiment, condition: item.condition}));\n}\n\nexport interface ToolbarItemRegistration {\n  order?: number;\n  location: ToolbarItemLocation;\n  separator?: boolean;\n  label?: () => Platform.UIString.LocalizedString;\n  actionId?: string;\n  condition?: Root.Runtime.Condition;\n  loadItem?: (() => Promise<Provider>);\n  experiment?: string;\n  jslog?: string;\n}\n\nexport const enum ToolbarItemLocation {\n  FILES_NAVIGATION_TOOLBAR = 'files-navigator-toolbar',\n  MAIN_TOOLBAR_RIGHT = 'main-toolbar-right',\n  MAIN_TOOLBAR_LEFT = 'main-toolbar-left',\n  STYLES_SIDEBARPANE_TOOLBAR = 'styles-sidebarpane-toolbar',\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    'devtools-toolbar': Toolbar;\n    'devtools-toolbar-input': ToolbarInputElement;\n  }\n}\n", "// Copyright 2009 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport type * as Common from '../../core/common/common.js';\nimport * as Host from '../../core/host/host.js';\nimport type * as Platform from '../../core/platform/platform.js';\nimport * as Root from '../../core/root/root.js';\nimport * as Buttons from '../components/buttons/buttons.js';\nimport {html, render} from '../lit/lit.js';\nimport * as VisualLogging from '../visual_logging/visual_logging.js';\n\nimport {ActionRegistry} from './ActionRegistry.js';\nimport type {Key, Modifier} from './KeyboardShortcut.js';\nimport {ShortcutRegistry} from './ShortcutRegistry.js';\nimport {SoftContextMenu, type SoftContextMenuDescriptor} from './SoftContextMenu.js';\nimport {deepElementFromEvent, maybeCreateNewBadge} from './UIUtils.js';\n\n/**\n * Represents a single item in a context menu.\n * @property jslogContext - An optional string identifying the element for visual logging.\n * @property customElement - A custom HTML element to be rendered for this item.\n * @property idInternal - The unique ID of this item. Undefined for separators.\n * @property contextMenu - The parent `ContextMenu` or `null` if this item is not part of a menu (e.g. a SubMenu).\n * @property isDevToolsPerformanceMenuItem - Controls whether the shortcuts will be shown in Mac native menus. Use only in exceptional cases where shortcuts are heavily context dependent and critical for a smooth user interaction.\n * @property disabled - Whether the item should be disabled.\n * @property previewFeature - Whether this item represents an experimental feature. Adds an experiment icon next to the menu item.\n * @property accelerator - Describes a keyboard shortcut for the item. Shortcut will not show in native Menus on Mac.\n * @property label - The text to display for the item. Not used for 'separator' type.\n */\nexport class Item {\n  private readonly typeInternal: string;\n  protected readonly label: string|undefined;\n  protected accelerator?: Host.InspectorFrontendHostAPI.AcceleratorDescriptor;\n  protected featureName?: string;\n  protected readonly previewFeature: boolean;\n  protected disabled: boolean|undefined;\n  private readonly checked: boolean|undefined;\n  protected isDevToolsPerformanceMenuItem: boolean;\n  protected contextMenu: ContextMenu|null;\n  protected idInternal: number|undefined;\n  customElement?: Element;\n  private shortcut?: string;\n  #tooltip: Common.UIString.LocalizedString|undefined;\n  protected jslogContext: string|undefined;\n\n  constructor(\n      contextMenu: ContextMenu|null, type: 'checkbox'|'item'|'separator'|'subMenu', label?: string,\n      isPreviewFeature?: boolean, disabled?: boolean, checked?: boolean,\n      accelerator?: Host.InspectorFrontendHostAPI.AcceleratorDescriptor, tooltip?: Platform.UIString.LocalizedString,\n      jslogContext?: string, featureName?: string) {\n    this.typeInternal = type;\n    this.label = label;\n    this.previewFeature = Boolean(isPreviewFeature);\n    this.accelerator = accelerator;\n    this.disabled = disabled;\n    this.checked = checked;\n    this.isDevToolsPerformanceMenuItem = false;\n    this.contextMenu = contextMenu;\n    this.idInternal = undefined;\n    this.#tooltip = tooltip;\n    if (type === 'item' || type === 'checkbox') {\n      this.idInternal = contextMenu ? contextMenu.nextId() : 0;\n    }\n    this.jslogContext = jslogContext;\n    this.featureName = featureName;\n  }\n\n  /**\n   * Returns the unique ID of this item.\n   * @throws If the item ID was not set (e.g. for a separator).\n   */\n  id(): number {\n    if (this.idInternal === undefined) {\n      throw new Error('Tried to access a ContextMenu Item ID but none was set.');\n    }\n    return this.idInternal;\n  }\n\n  /**\n   * Returns the type of this item (e.g. 'item', 'checkbox').\n   */\n  type(): string {\n    return this.typeInternal;\n  }\n\n  /**\n   * Returns whether this item is marked as a preview feature (experimental).\n   */\n  isPreviewFeature(): boolean {\n    return this.previewFeature;\n  }\n\n  /**\n   * Returns whether this item is enabled.\n   */\n  isEnabled(): boolean {\n    return !this.disabled;\n  }\n\n  /**\n   * Sets the enabled state of this item.\n   * @param enabled True to enable the item, false to disable it.\n   */\n  setEnabled(enabled: boolean): void {\n    this.disabled = !enabled;\n  }\n\n  /**\n   * Builds a descriptor object for this item.\n   * This descriptor is used to create the actual menu item in either\n   * a soft-rendered menu or a native menu.\n   * @returns The descriptor for the item.\n   * @throws If the item type is invalid.\n   */\n  buildDescriptor(): SoftContextMenuDescriptor|Host.InspectorFrontendHostAPI.ContextMenuDescriptor {\n    switch (this.typeInternal) {\n      case 'item': {\n        const result: SoftContextMenuDescriptor = {\n          type: 'item',\n          id: this.idInternal,\n          label: this.label,\n          isExperimentalFeature: this.previewFeature,\n          enabled: !this.disabled,\n          checked: undefined,\n          subItems: undefined,\n          tooltip: this.#tooltip,\n          jslogContext: this.jslogContext,\n          featureName: this.featureName,\n        };\n        if (this.customElement) {\n          result.element = this.customElement;\n        }\n        if (this.shortcut) {\n          result.shortcut = this.shortcut;\n        }\n        if (this.accelerator) {\n          result.accelerator = this.accelerator;\n          if (this.isDevToolsPerformanceMenuItem) {\n            result.isDevToolsPerformanceMenuItem = true;\n          }\n        }\n        return result;\n      }\n      case 'separator': {\n        return {\n          type: 'separator',\n          id: undefined,\n          label: undefined,\n          enabled: undefined,\n          checked: undefined,\n          subItems: undefined,\n        };\n      }\n      case 'checkbox': {\n        const result: SoftContextMenuDescriptor = {\n          type: 'checkbox',\n          id: this.idInternal,\n          label: this.label,\n          checked: Boolean(this.checked),\n          isExperimentalFeature: this.previewFeature,\n          enabled: !this.disabled,\n          subItems: undefined,\n          tooltip: this.#tooltip,\n          jslogContext: this.jslogContext,\n        };\n        if (this.customElement) {\n          result.element = this.customElement;\n        }\n        return result;\n      }\n    }\n    throw new Error('Invalid item type:' + this.typeInternal);\n  }\n\n  /**\n   * Sets a keyboard accelerator for this item.\n   * @param key The key code for the accelerator.\n   * @param modifiers An array of modifiers (e.g. Ctrl, Shift).\n   */\n  setAccelerator(key: Key, modifiers: Modifier[]): void {\n    const modifierSum = modifiers.reduce(\n        (result, modifier) => result + ShortcutRegistry.instance().devToolsToChromeModifier(modifier), 0);\n    this.accelerator = {keyCode: key.code, modifiers: modifierSum};\n  }\n\n  /**\n   * This influences whether accelerators will be shown for native menus on Mac.\n   * Use this ONLY for performance menus and ONLY where accelerators are critical\n   * for a smooth user journey and heavily context dependent.\n   * @param isDevToolsPerformanceMenuItem True if this is a DevTools performance menu item.\n   */\n  setIsDevToolsPerformanceMenuItem(isDevToolsPerformanceMenuItem: boolean): void {\n    this.isDevToolsPerformanceMenuItem = isDevToolsPerformanceMenuItem;\n  }\n\n  /**\n   * Sets a display string for the shortcut associated with this item.\n   * This is typically used when the shortcut is managed by `ActionRegistry`.\n   * @param shortcut The shortcut string to display.\n   */\n  setShortcut(shortcut: string): void {\n    this.shortcut = shortcut;\n  }\n}\n\n/**\n * Represents a section within a `ContextMenu` or `SubMenu`.\n * Sections are used to group related items and are often visually separated.\n * @property items - The list of items in this section.\n * @property contextMenu - The parent `ContextMenu` or `null`.\n */\nexport class Section {\n  readonly contextMenu: ContextMenu|null;\n  readonly items: Item[];\n\n  constructor(contextMenu: ContextMenu|null) {\n    this.contextMenu = contextMenu;\n    this.items = [];\n  }\n\n  /**\n   * Appends a standard clickable item to this section.\n   * @param label The text to display for the item.\n   * @param handler The function to execute when the item is clicked.\n   * @param options Optional settings for the item.\n   * @returns The newly created `Item`.\n   */\n  appendItem(label: string, handler: () => void, options?: {\n    accelerator?: Host.InspectorFrontendHostAPI.AcceleratorDescriptor,\n    isPreviewFeature?: boolean,\n    disabled?: boolean,\n    additionalElement?: Element,\n    tooltip?: Platform.UIString.LocalizedString,\n    jslogContext?: string,\n    featureName?: string,\n  }): Item {\n    const item = new Item(\n        this.contextMenu, 'item', label, options?.isPreviewFeature, options?.disabled, undefined, options?.accelerator,\n        options?.tooltip, options?.jslogContext, options?.featureName);\n    if (options?.additionalElement) {\n      item.customElement = options?.additionalElement;\n    }\n    this.items.push(item);\n    if (this.contextMenu) {\n      this.contextMenu.setHandler(item.id(), handler);\n    }\n    return item;\n  }\n\n  /**\n   * Appends an item that contains a custom HTML element (for non-native menus only).\n   * @param element The custom `Element` to display in the menu item.\n   * @param jslogContext An optional string identifying the element for visual logging.\n   * @returns The newly created `Item`.\n   */\n  appendCustomItem(element: Element, jslogContext?: string): Item {\n    const item = new Item(\n        this.contextMenu, 'item', undefined, undefined, undefined, undefined, undefined, undefined, jslogContext);\n    item.customElement = element;\n    this.items.push(item);\n    return item;\n  }\n\n  /**\n   * Appends a visual separator to this section.\n   * @returns The newly created separator `Item`.\n   */\n  appendSeparator(): Item {\n    const item = new Item(this.contextMenu, 'separator');\n    this.items.push(item);\n    return item;\n  }\n\n  /**\n   * Appends an item that triggers a registered `Action`.\n   * The item's label, handler, enabled state, and shortcut are derived from the action.\n   * @param actionId The ID of the action to append.\n   * @param label Optional label to override the action's title.\n   * @param optional If true and the action is not registered, this method does nothing.\n   */\n  appendAction(actionId: string, label?: string, optional?: boolean, jslogContext?: string, feature?: string): void {\n    if (optional && !ActionRegistry.instance().hasAction(actionId)) {\n      return;\n    }\n    const action = ActionRegistry.instance().getAction(actionId);\n    if (!label) {\n      label = action.title();\n    }\n    const promotionId = action.featurePromotionId();\n    let additionalElement = undefined;\n    if (promotionId) {\n      additionalElement = maybeCreateNewBadge(promotionId);\n    }\n    const result = this.appendItem(\n        label, action.execute.bind(action),\n        {disabled: !action.enabled(), jslogContext: jslogContext ?? actionId, featureName: feature, additionalElement});\n    const shortcut = ShortcutRegistry.instance().shortcutTitleForAction(actionId);\n    const keyAndModifier = ShortcutRegistry.instance().keyAndModifiersForAction(actionId);\n    if (keyAndModifier) {\n      result.setAccelerator(keyAndModifier.key, [keyAndModifier.modifier]);\n    }\n    if (shortcut) {\n      result.setShortcut(shortcut);\n    }\n  }\n\n  /**\n   * Appends an item that, when clicked, opens a sub-menu.\n   * @param label The text to display for the sub-menu item.\n   * @param disabled Whether the sub-menu item should be disabled.\n   * @param jslogContext An optional string identifying the element for visual logging.\n   * @returns The newly created `SubMenu` instance.\n   */\n  appendSubMenuItem(label: string, disabled?: boolean, jslogContext?: string, featureName?: string): SubMenu {\n    const item = new SubMenu(this.contextMenu, label, disabled, jslogContext, featureName);\n    item.init();\n    this.items.push(item);\n    return item;\n  }\n\n  /**\n   * Appends a checkbox item to this section.\n   * @param label The text to display for the checkbox item.\n   * @param handler The function to execute when the checkbox state changes.\n   * @param options Optional settings for the checkbox item.\n   * @returns The newly created checkbox `Item`.\n   */\n  appendCheckboxItem(label: string, handler: () => void, options?: {\n    checked?: boolean,\n    disabled?: boolean,\n    experimental?: boolean,\n    additionalElement?: Element,\n    tooltip?: Platform.UIString.LocalizedString,\n    jslogContext?: string,\n    featureName?: string,\n  }): Item {\n    const item = new Item(\n        this.contextMenu, 'checkbox', label, options?.experimental, options?.disabled, options?.checked, undefined,\n        options?.tooltip, options?.jslogContext, options?.featureName);\n    this.items.push(item);\n    if (this.contextMenu) {\n      this.contextMenu.setHandler(item.id(), handler);\n    }\n    if (options?.additionalElement) {\n      item.customElement = options.additionalElement;\n    }\n    return item;\n  }\n}\n\n/**\n * Represents an `Item` that opens a nested menu (a sub-menu).\n * It extends `Item` and manages its own set of `Section`s.\n * @property sections - A map of section names to `Section` objects.\n */\nexport class SubMenu extends Item {\n  readonly sections: Map<string, Section>;\n  private readonly sectionList: Section[];\n\n  constructor(\n      contextMenu: ContextMenu|null, label?: string, disabled?: boolean, jslogContext?: string, featureName?: string) {\n    super(\n        contextMenu, 'subMenu', label, undefined, disabled, undefined, undefined, undefined, jslogContext, featureName);\n    this.sections = new Map();\n    this.sectionList = [];\n  }\n\n  /**\n   * Initializes the standard sections for this sub-menu based on `ContextMenu.groupWeights`.\n   */\n  init(): void {\n    ContextMenu.groupWeights.forEach(name => this.section(name));\n  }\n\n  /**\n   * Retrieves an existing section by its name or creates a new one if it doesn't exist.\n   *\n   * If a section with the given `name` (or 'default' if `name` is unspecified) is not found,\n   * a new `Section` instance is created, stored internally for future lookups by that name,\n   * and added to the ordered list of sections for this submenu.\n   *\n   * @param name The optional name of the section. Defaults to 'default' if not provided.\n   * @returns The `Section` object, either pre-existing or newly created.\n   */\n  section(name?: string): Section {\n    if (!name) {\n      name = 'default';\n    }\n    let section: Section|(Section | null | undefined) = name ? this.sections.get(name) : null;\n    if (!section) {\n      section = new Section(this.contextMenu);\n      if (name) {\n        this.sections.set(name, section);\n        this.sectionList.push(section);\n      } else {\n        this.sectionList.splice(ContextMenu.groupWeights.indexOf('default'), 0, section);\n      }\n    }\n    return section;\n  }\n\n  /**\n   * Retrieves or creates the 'header' section.\n   * @returns The 'header' `Section` object.\n   */\n  headerSection(): Section {\n    return this.section('header');\n  }\n\n  /**\n   * Retrieves or creates the 'new' section.\n   * @returns The 'new' `Section` object.\n   */\n  newSection(): Section {\n    return this.section('new');\n  }\n\n  /**\n   * Retrieves or creates the 'reveal' section.\n   * @returns The 'reveal' `Section` object.\n   */\n\n  revealSection(): Section {\n    return this.section('reveal');\n  }\n\n  /**\n   * Retrieves or creates the 'clipboard' section.\n   * @returns The 'clipboard' `Section` object.\n   */\n  clipboardSection(): Section {\n    return this.section('clipboard');\n  }\n\n  /**\n   * Retrieves or creates the 'edit' section.\n   * @returns The 'edit' `Section` object.\n   */\n  editSection(): Section {\n    return this.section('edit');\n  }\n\n  /**\n   * Retrieves or creates the 'debug' section.\n   * @returns The 'debug' `Section` object.\n   */\n  debugSection(): Section {\n    return this.section('debug');\n  }\n\n  /**\n   * Retrieves or creates the 'view' section.\n   * @returns The 'view' `Section` object.\n   */\n  viewSection(): Section {\n    return this.section('view');\n  }\n\n  /**\n   * Retrieves or creates the 'default' section.\n   * This is often used for general-purpose menu items.\n   * @returns The 'default' `Section` object.\n   */\n  defaultSection(): Section {\n    return this.section('default');\n  }\n\n  /**\n   * Retrieves or creates the 'override' section.\n   * @returns The 'override' `Section` object.\n   */\n  overrideSection(): Section {\n    return this.section('override');\n  }\n\n  /**\n   * Retrieves or creates the 'save' section.\n   * @returns The 'save' `Section` object.\n   */\n  saveSection(): Section {\n    return this.section('save');\n  }\n\n  /**\n   * Retrieves or creates the 'annotation' section.\n   * @returns The 'annotation' `Section` object.\n   */\n  annotationSection(): Section {\n    return this.section('annotation');\n  }\n\n  /**\n   * Retrieves or creates the 'footer' section.\n   * @returns The 'footer' `Section` object.\n   */\n  footerSection(): Section {\n    return this.section('footer');\n  }\n\n  override buildDescriptor(): SoftContextMenuDescriptor|Host.InspectorFrontendHostAPI.ContextMenuDescriptor {\n    const result: Host.InspectorFrontendHostAPI.ContextMenuDescriptor|SoftContextMenuDescriptor = {\n      type: 'subMenu',\n      label: this.label,\n      accelerator: this.accelerator,\n      isDevToolsPerformanceMenuItem: this.accelerator ? this.isDevToolsPerformanceMenuItem : undefined,\n      isExperimentalFeature: this.previewFeature,\n      enabled: !this.disabled,\n      subItems: [],\n      id: undefined,\n      checked: undefined,\n      jslogContext: this.jslogContext,\n      featureName: this.featureName,\n    };\n\n    const nonEmptySections = this.sectionList.filter(section => Boolean(section.items.length));\n    for (const section of nonEmptySections) {\n      for (const item of section.items) {\n        if (!result.subItems) {\n          result.subItems = [];\n        }\n        result.subItems.push(item.buildDescriptor());\n      }\n      if (section !== nonEmptySections[nonEmptySections.length - 1]) {\n        if (!result.subItems) {\n          result.subItems = [];\n        }\n        result.subItems.push({\n          type: 'separator',\n          id: undefined,\n          subItems: undefined,\n          checked: undefined,\n          enabled: undefined,\n          label: undefined,\n        });\n      }\n    }\n    return result;\n  }\n\n  /**\n   * Appends registered context menu items that are configured to appear under a specific `location` path.\n   * Items are sorted by their `order` property.\n   * Experimental items are only added if their corresponding experiment is enabled.\n   * @param location The base location path (e.g. 'mainMenu'). Items with locations like 'mainMenu/default' will be appended.\n   */\n  appendItemsAtLocation(location: string): void {\n    const items: ContextMenuItemRegistration[] = getRegisteredItems();\n    items.sort((firstItem, secondItem) => {\n      const order1 = firstItem.order || 0;\n      const order2 = secondItem.order || 0;\n      return order1 - order2;\n    });\n    for (const item of items) {\n      if (item.experiment && !Root.Runtime.experiments.isEnabled(item.experiment)) {\n        continue;\n      }\n\n      const itemLocation = item.location;\n      const actionId = item.actionId;\n      if (!itemLocation?.startsWith(location + '/')) {\n        continue;\n      }\n\n      const section = itemLocation.substr(location.length + 1);\n      if (!section || section.includes('/')) {\n        continue;\n      }\n\n      if (actionId) {\n        this.section(section).appendAction(actionId);\n      }\n    }\n  }\n}\n\n/**\n * Options for configuring a `ContextMenu`.\n */\nexport interface ContextMenuOptions {\n  /**\n   * Whether to use the soft (HTML-based) menu implementation.\n   * Defaults to `false` unless globally overridden or in hosted mode.\n   * Set this to true ONLY in exceptional cases where native context menu lacks desired functionality (e.g. keeping menu open after clicking items etc.)\n   */\n  useSoftMenu?: boolean;\n  /** Whether the menu should remain open after an item is clicked. Defaults to `false`. */\n  keepOpen?: boolean;\n  /** A callback function that is invoked when a soft menu is closed. */\n  onSoftMenuClosed?: () => void;\n  /** The x-coordinate for the menu's position. Defaults to the mouse event's x-coordinate. */\n  x?: number;\n  /** The y-coordinate for the menu's position. Defaults to the mouse event's y-coordinate. */\n  y?: number;\n}\n\nconst MENU_ITEM_HEIGHT_FOR_LOGGING = 20;\nconst MENU_ITEM_WIDTH_FOR_LOGGING = 200;\n\n/**\n * Represents the main context menu. It extends `SubMenu` because a `ContextMenu`\n * is essentially a top-level menu that can contain sections and items, similar to a sub-menu.\n * It handles the display of the menu (either soft or native), event handling, and\n * integration with registered context menu providers.\n */\nexport class ContextMenu extends SubMenu {\n  protected override contextMenu: this;\n  private pendingTargets: unknown[];\n  private readonly event: MouseEvent;\n  private readonly useSoftMenu: boolean;\n  private readonly keepOpen: boolean;\n  private x: number;\n  private y: number;\n  private onSoftMenuClosed?: () => void;\n  private readonly handlers: Map<number, () => void>;\n  override idInternal: number;\n  private softMenu?: SoftContextMenu;\n  private contextMenuLabel?: string;\n  private openHostedMenu: Host.InspectorFrontendHostAPI.ContextMenuDescriptor[]|null;\n  private eventTarget: EventTarget|null;\n  private loggableParent: Element|null = null;\n\n  /**\n   * Creates an instance of `ContextMenu`.\n   * @param event The mouse event that triggered the menu.\n   * @param options Optional configuration for the context menu.\n   */\n  constructor(event: Event, options: ContextMenuOptions = {}) {\n    super(null);\n    const mouseEvent = (event as MouseEvent);\n    this.contextMenu = this;\n    super.init();\n    this.pendingTargets = [];\n    this.event = mouseEvent;\n    this.eventTarget = this.event.target;\n    this.useSoftMenu = Boolean(options.useSoftMenu);\n    this.keepOpen = Boolean(options.keepOpen);\n    this.x = options.x === undefined ? mouseEvent.x : options.x;\n    this.y = options.y === undefined ? mouseEvent.y : options.y;\n    this.onSoftMenuClosed = options.onSoftMenuClosed;\n    this.handlers = new Map();\n    this.idInternal = 0;\n    this.openHostedMenu = null;\n\n    let target = (deepElementFromEvent(event) || event.target) as Element | null;\n    if (target) {\n      this.appendApplicableItems((target as Object));\n      while (target instanceof Element && !target.hasAttribute('jslog')) {\n        target = target.parentElementOrShadowHost() ?? null;\n      }\n      if (target instanceof Element) {\n        this.loggableParent = target;\n      }\n    }\n  }\n\n  /**\n   * Initializes global settings for context menus, such as listening for\n   * commands from the host to toggle soft menu usage.\n   */\n  static initialize(): void {\n    Host.InspectorFrontendHost.InspectorFrontendHostInstance.events.addEventListener(\n        Host.InspectorFrontendHostAPI.Events.SetUseSoftMenu, setUseSoftMenu);\n    /**\n     * Sets the global preference for using soft menus.\n     * @param event The event containing the new preference.\n     */\n    function setUseSoftMenu(event: Common.EventTarget.EventTargetEvent<boolean>): void {\n      ContextMenu.useSoftMenu = event.data;\n    }\n  }\n\n  /**\n   * Installs a global context menu handler on the provided document's body.\n   * This handler will create and show a `ContextMenu` when a contextmenu event is detected.\n   * @param doc The `Document` to install the handler on.\n   */\n  static installHandler(doc: Document): void {\n    doc.body.addEventListener('contextmenu', handler, false);\n\n    function handler(event: Event): void {\n      const contextMenu = new ContextMenu(event);\n      void contextMenu.show();\n    }\n  }\n\n  /**\n   * Generates the next unique ID for a menu item within this `ContextMenu`.\n   * @returns A unique number for the item ID.\n   */\n  nextId(): number {\n    return this.idInternal++;\n  }\n\n  /**\n   * Checks if a native (hosted) context menu is currently open.\n   * @returns `true` if a native menu is open, `false` otherwise.\n   */\n  isHostedMenuOpen(): boolean {\n    return Boolean(this.openHostedMenu);\n  }\n\n  /**\n   * Retrieves the item descriptors if a soft menu is currently active.\n   * @returns An array of `SoftContextMenuDescriptor`s or an empty array if no soft menu is active.\n   */\n  getItems(): SoftContextMenuDescriptor[] {\n    return this.softMenu?.getItems() || [];\n  }\n\n  /**\n   * Sets the checked state of an item in an active soft menu.\n   * @param item The descriptor of the item to update.\n   * @param checked `true` to check the item, `false` to uncheck it.\n   */\n  setChecked(item: SoftContextMenuDescriptor, checked: boolean): void {\n    this.softMenu?.setChecked(item, checked);\n  }\n\n  /**\n   * Shows the context menu. This involves loading items from registered providers\n   * and then displaying either a soft or native menu.\n   */\n  async show(): Promise<void> {\n    ContextMenu.pendingMenu = this;\n    this.event.consume(true);\n    const loadedProviders = await Promise.all(this.pendingTargets.map(async target => {\n      const providers = await loadApplicableRegisteredProviders(target);\n      return {target, providers};\n    }));\n\n    // After loading all providers, the contextmenu might be hidden again, so bail out.\n    if (ContextMenu.pendingMenu !== this) {\n      return;\n    }\n    ContextMenu.pendingMenu = null;\n\n    for (const {target, providers} of loadedProviders) {\n      for (const provider of providers) {\n        provider.appendApplicableItems(this.event, this, target);\n      }\n    }\n\n    this.pendingTargets = [];\n\n    this.#show();\n  }\n\n  /**\n   * Discards (closes) the soft context menu if it's currently shown.\n   */\n  discard(): void {\n    if (this.softMenu) {\n      this.softMenu.discard();\n    }\n  }\n\n  private registerLoggablesWithin(\n      descriptors: Host.InspectorFrontendHostAPI.ContextMenuDescriptor[],\n      parent?: Host.InspectorFrontendHostAPI.ContextMenuDescriptor): void {\n    for (const descriptor of descriptors) {\n      if (descriptor.jslogContext) {\n        if (descriptor.type === 'checkbox') {\n          VisualLogging.registerLoggable(\n              descriptor, `${VisualLogging.toggle().track({click: true}).context(descriptor.jslogContext)}`,\n              parent || descriptors, new DOMRect(0, 0, MENU_ITEM_WIDTH_FOR_LOGGING, MENU_ITEM_HEIGHT_FOR_LOGGING));\n        } else if (descriptor.type === 'item') {\n          VisualLogging.registerLoggable(\n              descriptor, `${VisualLogging.action().track({click: true}).context(descriptor.jslogContext)}`,\n              parent || descriptors, new DOMRect(0, 0, MENU_ITEM_WIDTH_FOR_LOGGING, MENU_ITEM_HEIGHT_FOR_LOGGING));\n        } else if (descriptor.type === 'subMenu') {\n          VisualLogging.registerLoggable(\n              descriptor, `${VisualLogging.item().context(descriptor.jslogContext)}`, parent || descriptors,\n              new DOMRect(0, 0, MENU_ITEM_WIDTH_FOR_LOGGING, MENU_ITEM_HEIGHT_FOR_LOGGING));\n        }\n        if (descriptor.subItems) {\n          this.registerLoggablesWithin(descriptor.subItems, descriptor);\n        }\n      }\n    }\n  }\n\n  #show(): void {\n    if (!this.eventTarget) {\n      return;\n    }\n\n    const menuObject = this.buildMenuDescriptors();\n    const ownerDocument = (this.eventTarget as HTMLElement).ownerDocument;\n\n    let useSoftMenu = this.useSoftMenu || ContextMenu.useSoftMenu ||\n        Host.InspectorFrontendHost.InspectorFrontendHostInstance.isHostedMode();\n\n    // Allow force opening a Native menu when DevTools is under test.\n    // This allows opening DevTools on DevTools\n    if (!this.useSoftMenu && ContextMenu.useSoftMenu && this.event.altKey) {\n      useSoftMenu = false;\n    }\n\n    if (useSoftMenu) {\n      this.softMenu = new SoftContextMenu(\n          (menuObject as SoftContextMenuDescriptor[]), this.itemSelected.bind(this), this.keepOpen, undefined,\n          this.onSoftMenuClosed, this.loggableParent);\n      // let soft context menu focus on the first item when the event is triggered by a non-mouse event\n      // add another check of button value to differentiate mouse event with 'shift + f10' keyboard event\n      const isMouseEvent =\n          (this.event as PointerEvent).pointerType === 'mouse' && (this.event as PointerEvent).button >= 0;\n      this.softMenu.setFocusOnTheFirstItem(!isMouseEvent);\n      this.softMenu.show((ownerDocument), new AnchorBox(this.x, this.y, 0, 0));\n      if (this.contextMenuLabel) {\n        this.softMenu.setContextMenuElementLabel(this.contextMenuLabel);\n      }\n    } else {\n      Host.InspectorFrontendHost.InspectorFrontendHostInstance.showContextMenuAtPoint(\n          this.x, this.y, menuObject, (ownerDocument));\n\n      function listenToEvents(this: ContextMenu): void {\n        Host.InspectorFrontendHost.InspectorFrontendHostInstance.events.addEventListener(\n            Host.InspectorFrontendHostAPI.Events.ContextMenuCleared, this.menuCleared, this);\n        Host.InspectorFrontendHost.InspectorFrontendHostInstance.events.addEventListener(\n            Host.InspectorFrontendHostAPI.Events.ContextMenuItemSelected, this.onItemSelected, this);\n      }\n      VisualLogging.registerLoggable(\n          menuObject, `${VisualLogging.menu()}`, this.loggableParent,\n          new DOMRect(0, 0, MENU_ITEM_WIDTH_FOR_LOGGING, MENU_ITEM_HEIGHT_FOR_LOGGING * menuObject.length));\n      this.registerLoggablesWithin(menuObject);\n      this.openHostedMenu = menuObject;\n      // showContextMenuAtPoint call above synchronously issues a clear event for previous context menu (if any),\n      // so we skip it before subscribing to the clear event.\n      queueMicrotask(listenToEvents.bind(this));\n    }\n  }\n\n  /**\n   * Sets the x-coordinate for the menu's position.\n   * @param x The new x-coordinate.\n   */\n  setX(x: number): void {\n    this.x = x;\n  }\n\n  /**\n   * Sets the y-coordinate for the menu's position.\n   * @param y The new y-coordinate.\n   */\n  setY(y: number): void {\n    this.y = y;\n  }\n\n  /**\n   * Associates a handler function with a menu item ID.\n   * @param id The ID of the menu item.\n   * @param handler The function to execute when the item is selected.\n   */\n  setHandler(id: number, handler: () => void): void {\n    if (handler) {\n      this.handlers.set(id, handler);\n    }\n  }\n\n  /**\n   * Invokes the handler associated with the given menu item ID.\n   * @param id The ID of the selected menu item.\n   */\n  invokeHandler(id: number): void {\n    const handler = this.handlers.get(id);\n    if (handler) {\n      handler.call(this);\n    }\n  }\n\n  private buildMenuDescriptors(): Array<SoftContextMenuDescriptor|Host.InspectorFrontendHostAPI.ContextMenuDescriptor> {\n    return super.buildDescriptor().subItems as\n        Array<SoftContextMenuDescriptor|Host.InspectorFrontendHostAPI.ContextMenuDescriptor>;\n  }\n\n  private onItemSelected(event: Common.EventTarget.EventTargetEvent<number>): void {\n    this.itemSelected(event.data);\n  }\n\n  private itemSelected(id: number): void {\n    this.invokeHandler(id);\n    // Collect all features used along the way when searching for the clicked item.\n    // I.e. a 'feature' on a submenu should be counted as 'used' if its submenu items are clicked.\n    const featuresUsed: string[] = [];\n    if (this.openHostedMenu) {\n      const itemWithId = (items: Host.InspectorFrontendHostAPI.ContextMenuDescriptor[],\n                          id: number): Host.InspectorFrontendHostAPI.ContextMenuDescriptor|null => {\n        for (const item of items) {\n          if (item.id === id) {\n            if (item.featureName) {\n              featuresUsed.push(item.featureName);\n            }\n\n            return item;\n          }\n          const subitem = item.subItems && itemWithId(item.subItems, id);\n          if (subitem) {\n            // Record submenu feature.\n            if (item.featureName) {\n              featuresUsed.push(item.featureName);\n            }\n            return subitem;\n          }\n        }\n        return null;\n      };\n      const item = itemWithId(this.openHostedMenu, id);\n      if (item?.jslogContext) {\n        void VisualLogging.logClick(item, new MouseEvent('click'));\n      }\n      if (item && featuresUsed.length > 0) {\n        featuresUsed.map(\n            feature => Host.InspectorFrontendHost.InspectorFrontendHostInstance.recordNewBadgeUsage(feature));\n      }\n    }\n\n    this.menuCleared();\n  }\n\n  private menuCleared(): void {\n    Host.InspectorFrontendHost.InspectorFrontendHostInstance.events.removeEventListener(\n        Host.InspectorFrontendHostAPI.Events.ContextMenuCleared, this.menuCleared, this);\n    Host.InspectorFrontendHost.InspectorFrontendHostInstance.events.removeEventListener(\n        Host.InspectorFrontendHostAPI.Events.ContextMenuItemSelected, this.onItemSelected, this);\n    if (this.openHostedMenu) {\n      void VisualLogging.logResize(this.openHostedMenu, new DOMRect(0, 0, 0, 0));\n    }\n    this.openHostedMenu = null;\n    if (!this.keepOpen) {\n      this.onSoftMenuClosed?.();\n    }\n  }\n\n  /**\n   * Appends the `target` to the list of pending targets for which context menu providers\n   * will be loaded when showing the context menu.\n   *\n   * @param target an object for which we can have registered menu item providers.\n   */\n  appendApplicableItems(target: unknown): void {\n    if (this.pendingTargets.includes(target)) {\n      return;\n    }\n    this.pendingTargets.push(target);\n  }\n\n  /**\n   * Marks the soft context menu (if one exists) to visually indicate that its items behave like checkboxes.\n   */\n  markAsMenuItemCheckBox(): void {\n    if (this.softMenu) {\n      this.softMenu.markAsMenuItemCheckBox();\n    }\n  }\n\n  private static pendingMenu: ContextMenu|null = null;\n  private static useSoftMenu = false;\n  static readonly groupWeights = [\n    'header', 'new', 'reveal', 'edit', 'clipboard', 'debug', 'view', 'default', 'override', 'save', 'annotation',\n    'footer'\n  ];\n}\n\n/* eslint-disable @devtools/no-lit-render-outside-of-view */\n/**\n * @property jslogContext - Reflects the `\"jslogContext\"` attribute.\n * @property populateMenuCall - Callback function to populate the menu.\n * @property softMenu - Reflects the `\"soft-menu\"` attribute.\n * @property keepOpen -Reflects the `\"keep-open\"` attribute.\n * @property iconName - Reflects the `\"icon-name\"` attribute.\n * @property disabled - Reflects the `\"disabled\"` attribute.\n * @attribute soft-menu - Whether to use the soft menu implementation.\n * @attribute keep-open - Whether the menu should stay open after an item is clicked.\n * @attribute icon-name - Name of the icon to display on the button.\n * @attribute disabled - Whether the menu button is disabled\n * @attribute jslogContext - The jslog context for the button.\n *\n */\nexport class MenuButton extends HTMLElement {\n  static readonly observedAttributes = ['icon-name', 'disabled'];\n  readonly #shadow = this.attachShadow({mode: 'open'});\n  #triggerTimeoutId?: number;\n  #populateMenuCall?: (arg0: ContextMenu) => void;\n\n  /**\n   * Sets the callback function used to populate the context menu when the button is clicked.\n   * @param populateCall A function that takes a `ContextMenu` instance and adds items to it.\n   */\n  set populateMenuCall(populateCall: (arg0: ContextMenu) => void) {\n    this.#populateMenuCall = populateCall;\n  }\n\n  /**\n   * Reflects the `soft-menu` attribute. If true, uses the `SoftContextMenu` implementation.\n   * @default false\n   */\n  get softMenu(): boolean {\n    return Boolean(this.getAttribute('soft-menu'));\n  }\n\n  set softMenu(softMenu: boolean) {\n    this.toggleAttribute('soft-menu', softMenu);\n  }\n\n  /**\n   * Reflects the `keep-open` attribute. If true, the menu stays open after an item click.\n   * @default false\n   */\n  get keepOpen(): boolean {\n    return Boolean(this.getAttribute('keep-open'));\n  }\n\n  set keepOpen(keepOpen: boolean) {\n    this.toggleAttribute('keep-open', keepOpen);\n  }\n\n  /**\n   * Reflects the `icon-name` attribute. Sets the icon to display on the button.\n   */\n  set iconName(iconName: string) {\n    this.setAttribute('icon-name', iconName);\n  }\n\n  get iconName(): string|null {\n    return this.getAttribute('icon-name');\n  }\n\n  /**\n   * Reflects the `jslogContext` attribute. Sets the visual logging context for the button.\n   */\n  set jslogContext(jslogContext: string) {\n    this.setAttribute('jslog', VisualLogging.dropDown(jslogContext).track({click: true}).toString());\n  }\n\n  get jslogContext(): string|null {\n    return this.getAttribute('jslogContext');\n  }\n\n  /**\n   * Reflects the `disabled` attribute. If true, the button cannot be clicked.\n   * @default false\n   */\n  get disabled(): boolean {\n    return this.hasAttribute('disabled');\n  }\n\n  set disabled(disabled: boolean) {\n    this.toggleAttribute('disabled', disabled);\n  }\n\n  /**\n   * Creates and shows the `ContextMenu`. It calls the `populateMenuCall`\n   * callback to fill the menu with items before displaying it relative to the button.\n   * Manages the `aria-expanded` state.\n   * @param event The event that triggered the menu\n   */\n  #openMenu(event: Event): void {\n    this.#triggerTimeoutId = undefined;\n    if (!this.#populateMenuCall) {\n      return;\n    }\n    const button = this.#shadow.querySelector('devtools-button');\n    const contextMenu = new ContextMenu(event, {\n      useSoftMenu: this.softMenu,\n      keepOpen: this.keepOpen,\n      x: this.getBoundingClientRect().right,\n      y: this.getBoundingClientRect().top + this.offsetHeight,\n      // Without adding a delay, pointer events will be un-ignored too early, and a single click causes\n      // the context menu to be closed and immediately re-opened on Windows (https://crbug.com/339560549).\n      onSoftMenuClosed: () => setTimeout(() => button?.removeAttribute('aria-expanded'), 50),\n    });\n    this.#populateMenuCall(contextMenu);\n    button?.setAttribute('aria-expanded', 'true');\n    void contextMenu.show();\n  }\n\n  /**\n   * Handles the click event on the button. It clears any pending trigger timeout\n   * and immediately calls the `openMenu` method to show the context menu.\n   * @param event The click event.\n   */\n  #triggerContextMenu(event: MouseEvent): void {\n    const triggerTimeout = 50;\n    if (!this.#triggerTimeoutId) {\n      this.#triggerTimeoutId = window.setTimeout(this.#openMenu.bind(this, event), triggerTimeout);\n    }\n  }\n\n  attributeChangedCallback(_: string, oldValue: string, newValue: string): void {\n    if (oldValue !== newValue) {\n      this.#render();\n    }\n  }\n\n  connectedCallback(): void {\n    this.#render();\n  }\n\n  #render(): void {\n    if (!this.iconName) {\n      throw new Error('<devtools-menu-button> expects an icon.');\n    }\n\n    // clang-format off\n    render(html`\n        <devtools-button .disabled=${this.disabled}\n                         .iconName=${this.iconName}\n                         .variant=${Buttons.Button.Variant.ICON}\n                         .title=${this.title}\n                         aria-haspopup='menu'\n                         @click=${this.#triggerContextMenu}>\n        </devtools-button>`,\n        this.#shadow, { host: this });\n    // clang-format on\n  }\n}\ncustomElements.define('devtools-menu-button', MenuButton);\n/* eslint-enable @devtools/no-lit-render-outside-of-view */\n\nexport interface Provider<T> {\n  /**\n   * Appends menu items to the `contextMenu` for the given `target` object.\n   * @param event The event that triggered the context menu.\n   * @param contextMenu The `ContextMenu` to which items should be appended.\n   * @param target The object for which context menu items are being provided.\n   */\n  appendApplicableItems(event: Event, contextMenu: ContextMenu, target: T): void;\n}\n\n/**\n * Stores all registered context menu provider registrations.\n */\nconst registeredProviders: Array<ProviderRegistration<unknown>> = [];\n\n/**\n * Registers a new context menu provider.\n * @template T The type of the object for which the provider supplies context menu items.\n * @param registration The provider registration object, specifying context types and how to load the provider.\n */\nexport function registerProvider<T>(registration: ProviderRegistration<T>): void {\n  registeredProviders.push(registration);\n}\n\n/**\n * Asynchronously loads all registered providers that are applicable to the given `target` object.\n * A provider is applicable if the `target` is an instance of one of its specified `contextTypes`\n * and if its associated experiment (if any) is enabled.\n * @param target The object for which to load applicable providers.\n * @returns A promise that resolves to an array of loaded `Provider` instances.\n */\nasync function loadApplicableRegisteredProviders(target: unknown): Promise<Array<Provider<unknown>>> {\n  const providers: Array<Provider<unknown>> = [];\n  for (const providerRegistration of registeredProviders) {\n    if (!Root.Runtime.Runtime.isDescriptorEnabled(\n            {experiment: providerRegistration.experiment, condition: undefined})) {\n      continue;\n    }\n    if (providerRegistration.contextTypes) {\n      for (const contextType of providerRegistration.contextTypes()) {\n        if (target instanceof contextType) {\n          providers.push(await providerRegistration.loadProvider());\n        }\n      }\n    }\n  }\n  return providers;\n}\n\n/**\n * Stores all registered context menu item registrations.\n */\nconst registeredItemsProviders: ContextMenuItemRegistration[] = [];\n\n/**\n * Registers a new context menu item.\n * These items are typically actions that appear in predefined locations in the menu.\n * @param registration The item registration object, specifying its location, action ID, and optional order/experiment.\n */\nexport function registerItem(registration: ContextMenuItemRegistration): void {\n  registeredItemsProviders.push(registration);\n}\n\n/**\n * Attempts to remove a registered context menu item.\n * The item is identified by its `actionId` and `location`.\n * @param registration The registration details of the item to remove.\n * @returns `true` if the item was found and removed, `false` otherwise.\n */\nexport function maybeRemoveItem(registration: ContextMenuItemRegistration): boolean {\n  const itemIndex = registeredItemsProviders.findIndex(\n      item => item.actionId === registration.actionId && item.location === registration.location);\n  if (itemIndex < 0) {\n    return false;\n  }\n  registeredItemsProviders.splice(itemIndex, 1);\n  return true;\n}\n\n/**\n * Retrieves all currently registered context menu items.\n * @returns An array of `ContextMenuItemRegistration` objects.\n */\nfunction getRegisteredItems(): ContextMenuItemRegistration[] {\n  return registeredItemsProviders;\n}\n\n/**\n * Defines specific locations within the DevTools UI where context menu items can be registered.\n */\nexport const enum ItemLocation {\n  DEVICE_MODE_MENU_SAVE = 'deviceModeMenu/save',\n  MAIN_MENU = 'mainMenu',\n  MAIN_MENU_DEFAULT = 'mainMenu/default',\n  MAIN_MENU_FOOTER = 'mainMenu/footer',\n  MAIN_MENU_HELP_DEFAULT = 'mainMenuHelp/default',\n  NAVIGATOR_MENU_DEFAULT = 'navigatorMenu/default',\n  PROFILER_MENU_DEFAULT = 'profilerMenu/default',\n  TIMELINE_MENU_OPEN = 'timelineMenu/open',\n}\n\nexport interface ProviderRegistration<T> {\n  /** A function that returns an array of constructor functions that this provider applies to. */\n  contextTypes: () => Array<abstract new(...any: any[]) => T>;\n  /** A function that asynchronously loads the provider instance. */\n  loadProvider: () => Promise<Provider<T>>;\n  /** Optional. The experiment that enables this provider. */\n  experiment?: Root.Runtime.ExperimentName;\n}\n\nexport interface ContextMenuItemRegistration {\n  /** The location in the menu where this item should appear. */\n  location: ItemLocation;\n  /** The ID of the action to be triggered by this item. */\n  actionId: string;\n  /** Optional. A number used for sorting items within the same location. Lower numbers appear first. */\n  order?: number;\n  /** Optional. The experiment that enables this item. */\n  experiment?: Root.Runtime.ExperimentName;\n}\n", "// Copyright 2014 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as Common from '../../core/common/common.js';\nimport * as Host from '../../core/host/host.js';\nimport * as Platform from '../../core/platform/platform.js';\nimport * as VisualLogging from '../../ui/visual_logging/visual_logging.js';\n\nimport {type Action, getRegisteredActionExtensions, KeybindSet} from './ActionRegistration.js';\nimport type {ActionRegistry} from './ActionRegistry.js';\nimport {Context} from './Context.js';\nimport {Dialog} from './Dialog.js';\nimport {type Key, KeyboardShortcut, type Modifier, Modifiers, Type} from './KeyboardShortcut.js';\nimport {isEditing} from './UIUtils.js';\n\nlet shortcutRegistryInstance: ShortcutRegistry|undefined;\n\nexport class ShortcutRegistry {\n  private readonly actionRegistry: ActionRegistry;\n  private readonly actionToShortcut: Platform.MapUtilities.Multimap<string, KeyboardShortcut>;\n  private readonly keyMap: ShortcutTreeNode;\n  private activePrefixKey: ShortcutTreeNode|null;\n  private activePrefixTimeout: number|null;\n  private consumePrefix: (() => Promise<void>)|null;\n  private readonly devToolsDefaultShortcutActions: Set<string>;\n  private readonly disabledDefaultShortcutsForAction: Platform.MapUtilities.Multimap<string, KeyboardShortcut>;\n  private readonly keybindSetSetting: Common.Settings.Setting<string>;\n  private readonly userShortcutsSetting: Common.Settings.Setting<KeyboardShortcut[]>;\n\n  constructor(actionRegistry: ActionRegistry) {\n    this.actionRegistry = actionRegistry;\n    this.actionToShortcut = new Platform.MapUtilities.Multimap();\n    this.keyMap = new ShortcutTreeNode(0, 0);\n    this.activePrefixKey = null;\n    this.activePrefixTimeout = null;\n    this.consumePrefix = null;\n    this.devToolsDefaultShortcutActions = new Set();\n    this.disabledDefaultShortcutsForAction = new Platform.MapUtilities.Multimap();\n    this.keybindSetSetting = Common.Settings.Settings.instance().moduleSetting('active-keybind-set');\n    this.keybindSetSetting.addChangeListener(event => {\n      Host.userMetrics.keybindSetSettingChanged(event.data);\n      this.registerBindings();\n    });\n    this.userShortcutsSetting = Common.Settings.Settings.instance().moduleSetting('user-shortcuts');\n    this.userShortcutsSetting.addChangeListener(this.registerBindings, this);\n\n    this.registerBindings();\n  }\n\n  static instance(opts: {\n    forceNew: boolean|null,\n    actionRegistry: ActionRegistry|null,\n  } = {forceNew: null, actionRegistry: null}): ShortcutRegistry {\n    const {forceNew, actionRegistry} = opts;\n    if (!shortcutRegistryInstance || forceNew) {\n      if (!actionRegistry) {\n        throw new Error('Missing actionRegistry for shortcutRegistry');\n      }\n      shortcutRegistryInstance = new ShortcutRegistry(actionRegistry);\n    }\n\n    return shortcutRegistryInstance;\n  }\n\n  static removeInstance(): void {\n    shortcutRegistryInstance = undefined;\n  }\n  private applicableActions(key: number, handlers: Record<string, () => Promise<boolean>>|undefined = {}): Action[] {\n    let actions: string[] = [];\n    const keyMap = this.activePrefixKey || this.keyMap;\n    const keyNode = keyMap.getNode(key);\n    if (keyNode) {\n      actions = keyNode.actions();\n    }\n    const applicableActions = this.actionRegistry.applicableActions(actions, Context.instance());\n    if (keyNode) {\n      for (const actionId of Object.keys(handlers)) {\n        if (keyNode.actions().indexOf(actionId) >= 0) {\n          if (this.actionRegistry.hasAction(actionId)) {\n            const action = this.actionRegistry.getAction(actionId);\n            applicableActions.push(action);\n          }\n        }\n      }\n    }\n    return applicableActions;\n  }\n\n  shortcutsForAction(action: string): KeyboardShortcut[] {\n    return [...this.actionToShortcut.get(action)];\n  }\n\n  actionsForDescriptors(descriptors: Array<{\n    key: number,\n    name: string,\n  }>): string[] {\n    let keyMapNode: (ShortcutTreeNode|null)|ShortcutTreeNode = this.keyMap;\n    for (const {key} of descriptors) {\n      if (!keyMapNode) {\n        return [];\n      }\n      keyMapNode = keyMapNode.getNode(key);\n    }\n    return keyMapNode ? keyMapNode.actions() : [];\n  }\n\n  globalShortcutKeys(): number[] {\n    const keys = [];\n    for (const node of this.keyMap.chords().values()) {\n      const actions = node.actions();\n      const applicableActions = this.actionRegistry.applicableActions(actions, Context.instance());\n      if (applicableActions.length || node.hasChords()) {\n        keys.push(node.key());\n      }\n    }\n    return keys;\n  }\n\n  keysForAction(actionId: string): number[] {\n    const keys = [...this.actionToShortcut.get(actionId)].flatMap(\n        shortcut => shortcut.descriptors.map(descriptor => descriptor.key));\n    return keys;\n  }\n\n  shortcutTitleForAction(actionId: string): string|undefined {\n    for (const shortcut of this.actionToShortcut.get(actionId)) {\n      return shortcut.title();\n    }\n    return undefined;\n  }\n\n  keyAndModifiersForAction(actionId: string): {key: Key, modifier: Modifier}|undefined {\n    for (const keys of this.keysForAction(actionId)) {\n      const {keyCode, modifiers} = KeyboardShortcut.keyCodeAndModifiersFromKey(keys);\n      const key = KeyboardShortcut.keyCodeToKey(keyCode);\n      if (key) {\n        return {key, modifier: KeyboardShortcut.modifierValueToModifier(modifiers) || Modifiers.None};\n      }\n    }\n    return undefined;\n  }\n\n  // DevTools and Chrome modifier values do not match, see latter here: crsrc.org/c/ui/events/event_constants.h;l=24\n  devToolsToChromeModifier(devToolsModifier: Modifier): number {\n    return devToolsModifier.value * 2;\n  }\n\n  handleShortcut(event: KeyboardEvent, handlers?: Record<string, () => Promise<boolean>>): void {\n    void this.handleKey(KeyboardShortcut.makeKeyFromEvent(event), event.key, event, handlers);\n  }\n\n  actionHasDefaultShortcut(actionId: string): boolean {\n    return this.devToolsDefaultShortcutActions.has(actionId);\n  }\n\n  getShortcutListener(handlers: Record<string, () => Promise<boolean>>): (event: KeyboardEvent) => void {\n    const shortcuts = Object.keys(handlers).flatMap(action => [...this.actionToShortcut.get(action)]);\n    // We only want keys for these specific actions to get handled this\n    // way; all others should be allowed to bubble up.\n    const allowlistKeyMap = new ShortcutTreeNode(0, 0);\n    shortcuts.forEach(shortcut => {\n      allowlistKeyMap.addKeyMapping(shortcut.descriptors.map(descriptor => descriptor.key), shortcut.action);\n    });\n\n    return (event: KeyboardEvent) => {\n      const key = KeyboardShortcut.makeKeyFromEvent(event);\n      const keyMap = this.activePrefixKey ? allowlistKeyMap.getNode(this.activePrefixKey.key()) : allowlistKeyMap;\n      if (!keyMap) {\n        return;\n      }\n      if (keyMap.getNode(key)) {\n        this.handleShortcut(event, handlers);\n      }\n    };\n  }\n\n  addShortcutListener(element: Element, handlers: Record<string, () => Promise<boolean>>): (arg0: Event) => void {\n    const listener = this.getShortcutListener(handlers) as (event: Event) => void;\n    element.addEventListener('keydown', listener);\n    return listener;\n  }\n\n  async handleKey(\n      key: number,\n      domKey: string,\n      event?: KeyboardEvent,\n      handlers?: Record<string, () => Promise<boolean>>,\n      ): Promise<void> {\n    const keyModifiers = key >> 8;\n    const hasHandlersOrPrefixKey = Boolean(handlers) || Boolean(this.activePrefixKey);\n    const keyMapNode = this.keyMap.getNode(key);\n    const actions = this.applicableActions(key, handlers);\n    const maybeHasActions = actions.length > 0 || (keyMapNode?.hasChords());\n    if ((!hasHandlersOrPrefixKey && isPossiblyInputKey()) || !maybeHasActions ||\n        KeyboardShortcut.isModifier(KeyboardShortcut.keyCodeAndModifiersFromKey(key).keyCode)) {\n      return;\n    }\n    if (event) {\n      event.consume(true);\n    }\n\n    // We allow the use of Ctrl/Meta+Plus/Minus/0 even when a modal dialog is open,\n    // so that users are able to zoom in and out even while for example the Settings\n    // dialog is shown.\n    const DIALOG_ALLOWED_ACTION_IDS = ['main.zoom-in', 'main.zoom-out', 'main.zoom-reset'];\n    if (!hasHandlersOrPrefixKey && Dialog.hasInstance() &&\n        (actions.length !== 1 || !DIALOG_ALLOWED_ACTION_IDS.includes(actions[0].id()))) {\n      return;\n    }\n\n    if (this.activePrefixTimeout) {\n      clearTimeout(this.activePrefixTimeout);\n      const handled = await maybeExecuteActionForKey.call(this, event);\n      this.activePrefixKey = null;\n      this.activePrefixTimeout = null;\n      if (handled) {\n        return;\n      }\n      if (this.consumePrefix) {\n        await this.consumePrefix();\n      }\n    }\n    if (keyMapNode?.hasChords()) {\n      this.activePrefixKey = keyMapNode;\n      this.consumePrefix = async () => {\n        this.activePrefixKey = null;\n        this.activePrefixTimeout = null;\n        await maybeExecuteActionForKey.call(this, event);\n      };\n      this.activePrefixTimeout = window.setTimeout(this.consumePrefix, KeyTimeout);\n    } else {\n      await maybeExecuteActionForKey.call(this, event);\n    }\n\n    function isPossiblyInputKey(): boolean {\n      if (!event || !isEditing() || /^F\\d+|Control|Shift|Alt|Meta|Escape|Win|U\\+001B$/.test(domKey)) {\n        return false;\n      }\n\n      if (!keyModifiers) {\n        return true;\n      }\n\n      const modifiers = Modifiers;\n      // Undo/Redo will also cause input, so textual undo should take precedence over DevTools undo when editing.\n      if (Host.Platform.isMac()) {\n        if (KeyboardShortcut.makeKey('z', modifiers.Meta.value) === key) {\n          return true;\n        }\n        if (KeyboardShortcut.makeKey('z', modifiers.Meta.value | modifiers.Shift.value) === key) {\n          return true;\n        }\n      } else {\n        if (KeyboardShortcut.makeKey('z', modifiers.Ctrl.value) === key) {\n          return true;\n        }\n        if (KeyboardShortcut.makeKey('y', modifiers.Ctrl.value) === key) {\n          return true;\n        }\n        if (!Host.Platform.isWin() &&\n            KeyboardShortcut.makeKey('z', modifiers.Ctrl.value | modifiers.Shift.value) === key) {\n          return true;\n        }\n      }\n\n      if ((keyModifiers & (modifiers.Ctrl.value | modifiers.Alt.value)) ===\n          (modifiers.Ctrl.value | modifiers.Alt.value)) {\n        return Host.Platform.isWin();\n      }\n\n      return !hasModifier(modifiers.Ctrl.value) && !hasModifier(modifiers.Alt.value) &&\n          !hasModifier(modifiers.Meta.value);\n    }\n\n    function hasModifier(mod: number): boolean {\n      return Boolean(keyModifiers & mod);\n    }\n\n    /**\n     * ;\n     */\n    async function maybeExecuteActionForKey(this: ShortcutRegistry, event?: KeyboardEvent): Promise<boolean> {\n      const actions = this.applicableActions(key, handlers);\n      if (!actions.length) {\n        return false;\n      }\n      for (const action of actions) {\n        let handled;\n        if (event) {\n          void VisualLogging.logKeyDown(null, event, action.id());\n        }\n        if (handlers?.[action.id()]) {\n          handled = await handlers[action.id()]();\n        }\n        if (!handlers) {\n          handled = await action.execute();\n        }\n        if (handled) {\n          Host.userMetrics.keyboardShortcutFired(action.id());\n          return true;\n        }\n      }\n      return false;\n    }\n  }\n\n  registerUserShortcut(shortcut: KeyboardShortcut): void {\n    for (const otherShortcut of this.disabledDefaultShortcutsForAction.get(shortcut.action)) {\n      if (otherShortcut.descriptorsMatch(shortcut.descriptors) &&\n          otherShortcut.hasKeybindSet(this.keybindSetSetting.get())) {\n        // this user shortcut is the same as a disabled default shortcut,\n        // so we should just enable the default\n        this.removeShortcut(otherShortcut);\n        return;\n      }\n    }\n    for (const otherShortcut of this.actionToShortcut.get(shortcut.action)) {\n      if (otherShortcut.descriptorsMatch(shortcut.descriptors)) {\n        // don't allow duplicate shortcuts\n        return;\n      }\n    }\n    this.addShortcutToSetting(shortcut);\n  }\n\n  removeShortcut(shortcut: KeyboardShortcut): void {\n    if (shortcut.type === Type.DEFAULT_SHORTCUT || shortcut.type === Type.KEYBIND_SET_SHORTCUT) {\n      this.addShortcutToSetting(shortcut.changeType(Type.DISABLED_DEFAULT));\n    } else {\n      this.removeShortcutFromSetting(shortcut);\n    }\n  }\n\n  disabledDefaultsForAction(actionId: string): Set<KeyboardShortcut> {\n    return this.disabledDefaultShortcutsForAction.get(actionId);\n  }\n\n  private addShortcutToSetting(shortcut: KeyboardShortcut): void {\n    const userShortcuts = this.userShortcutsSetting.get();\n    userShortcuts.push(shortcut);\n    this.userShortcutsSetting.set(userShortcuts);\n  }\n\n  private removeShortcutFromSetting(shortcut: KeyboardShortcut): void {\n    const userShortcuts = this.userShortcutsSetting.get();\n    const index = userShortcuts.findIndex(shortcut.equals, shortcut);\n    if (index !== -1) {\n      userShortcuts.splice(index, 1);\n      this.userShortcutsSetting.set(userShortcuts);\n    }\n  }\n\n  private registerShortcut(shortcut: KeyboardShortcut): void {\n    this.actionToShortcut.set(shortcut.action, shortcut);\n    this.keyMap.addKeyMapping(shortcut.descriptors.map(descriptor => descriptor.key), shortcut.action);\n  }\n\n  private registerBindings(): void {\n    this.actionToShortcut.clear();\n    this.keyMap.clear();\n    const keybindSet = this.keybindSetSetting.get();\n    this.disabledDefaultShortcutsForAction.clear();\n    this.devToolsDefaultShortcutActions.clear();\n    const forwardedKeys: Array<{\n      keyCode: number,\n      modifiers: number,\n    }> = [];\n    const userShortcuts = this.userShortcutsSetting.get();\n    for (const userShortcut of userShortcuts) {\n      const shortcut = KeyboardShortcut.createShortcutFromSettingObject(userShortcut);\n      if (shortcut.type === Type.DISABLED_DEFAULT) {\n        this.disabledDefaultShortcutsForAction.set(shortcut.action, shortcut);\n      } else {\n        if (ForwardedActions.has(shortcut.action)) {\n          forwardedKeys.push(\n              ...shortcut.descriptors.map(descriptor => KeyboardShortcut.keyCodeAndModifiersFromKey(descriptor.key)));\n        }\n        this.registerShortcut(shortcut);\n      }\n    }\n    for (const actionExtension of getRegisteredActionExtensions()) {\n      const actionId = actionExtension.id();\n      const bindings = actionExtension.bindings();\n      for (let i = 0; bindings && i < bindings.length; ++i) {\n        const keybindSets = bindings[i].keybindSets;\n        if (!platformMatches(bindings[i].platform) || !keybindSetsMatch(keybindSets)) {\n          continue;\n        }\n        const keys = bindings[i].shortcut.split(/\\s+/);\n        const shortcutDescriptors = keys.map(KeyboardShortcut.makeDescriptorFromBindingShortcut);\n        if (shortcutDescriptors.length > 0) {\n          if (this.isDisabledDefault(shortcutDescriptors, actionId)) {\n            this.devToolsDefaultShortcutActions.add(actionId);\n            continue;\n          }\n\n          if (ForwardedActions.has(actionId)) {\n            forwardedKeys.push(\n                ...shortcutDescriptors.map(shortcut => KeyboardShortcut.keyCodeAndModifiersFromKey(shortcut.key)));\n          }\n          if (!keybindSets) {\n            this.devToolsDefaultShortcutActions.add(actionId);\n            this.registerShortcut(new KeyboardShortcut(shortcutDescriptors, actionId, Type.DEFAULT_SHORTCUT));\n          } else {\n            if (keybindSets.includes(KeybindSet.DEVTOOLS_DEFAULT)) {\n              this.devToolsDefaultShortcutActions.add(actionId);\n            }\n            this.registerShortcut(\n                new KeyboardShortcut(shortcutDescriptors, actionId, Type.KEYBIND_SET_SHORTCUT, new Set(keybindSets)));\n          }\n        }\n      }\n    }\n    Host.InspectorFrontendHost.InspectorFrontendHostInstance.setWhitelistedShortcuts(JSON.stringify(forwardedKeys));\n\n    function platformMatches(platformsString?: string): boolean {\n      if (!platformsString) {\n        return true;\n      }\n      const platforms = platformsString.split(',');\n      let isMatch = false;\n      const currentPlatform = Host.Platform.platform();\n      for (let i = 0; !isMatch && i < platforms.length; ++i) {\n        isMatch = platforms[i] === currentPlatform;\n      }\n      return isMatch;\n    }\n\n    function keybindSetsMatch(keybindSets?: string[]): boolean {\n      if (!keybindSets) {\n        return true;\n      }\n      return keybindSets.includes(keybindSet);\n    }\n  }\n\n  private isDisabledDefault(\n      shortcutDescriptors: Array<{\n        key: number,\n        name: string,\n      }>,\n      action: string): boolean {\n    const disabledDefaults = this.disabledDefaultShortcutsForAction.get(action);\n    for (const disabledDefault of disabledDefaults) {\n      if (disabledDefault.descriptorsMatch(shortcutDescriptors)) {\n        return true;\n      }\n    }\n    return false;\n  }\n}\n\nexport class ShortcutTreeNode {\n  readonly #key: number;\n  #actions: string[];\n  #chords: Map<number, ShortcutTreeNode>;\n  private readonly depth: number;\n\n  constructor(key: number, depth = 0) {\n    this.#key = key;\n    this.#actions = [];\n    this.#chords = new Map();\n    this.depth = depth;\n  }\n\n  addAction(action: string): void {\n    this.#actions.push(action);\n  }\n\n  key(): number {\n    return this.#key;\n  }\n\n  chords(): Map<number, ShortcutTreeNode> {\n    return this.#chords;\n  }\n\n  hasChords(): boolean {\n    return this.#chords.size > 0;\n  }\n\n  addKeyMapping(keys: number[], action: string): void {\n    if (keys.length < this.depth) {\n      return;\n    }\n\n    if (keys.length === this.depth) {\n      this.addAction(action);\n    } else {\n      const key = keys[this.depth];\n      if (!this.#chords.has(key)) {\n        this.#chords.set(key, new ShortcutTreeNode(key, this.depth + 1));\n      }\n      (this.#chords.get(key) as ShortcutTreeNode).addKeyMapping(keys, action);\n    }\n  }\n\n  getNode(key: number): ShortcutTreeNode|null {\n    return this.#chords.get(key) || null;\n  }\n\n  actions(): string[] {\n    return this.#actions;\n  }\n\n  clear(): void {\n    this.#actions = [];\n    this.#chords = new Map();\n  }\n}\n\nexport class ForwardedShortcut {\n  static instance = new ForwardedShortcut();\n}\n\nexport const ForwardedActions = new Set<string>([\n  'main.toggle-dock',\n  'debugger.toggle-breakpoints-active',\n  'debugger.toggle-pause',\n  'quick-open.show-command-menu',\n  'console.toggle',\n]);\nexport const KeyTimeout = 1000;\nexport const DefaultShortcutSetting = 'devToolsDefault';\n", "// Copyright 2021 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\n/*\n * Copyright (C) 2009 Apple Inc. All rights reserved.\n * Copyright (C) 2009 Google Inc. All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions\n * are met:\n *\n * 1.  Redistributions of source code must retain the above copyright\n *     notice, this list of conditions and the following disclaimer.\n * 2.  Redistributions in binary form must reproduce the above copyright\n *     notice, this list of conditions and the following disclaimer in the\n *     documentation and/or other materials provided with the distribution.\n * 3.  Neither the name of Apple Computer, Inc. (\"Apple\") nor the names of\n *     its contributors may be used to endorse or promote products derived\n *     from this software without specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY APPLE AND ITS CONTRIBUTORS \"AS IS\" AND ANY\n * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL APPLE OR ITS CONTRIBUTORS BE LIABLE FOR ANY\n * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF\n * THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\nimport * as Host from '../../core/host/host.js';\n\nimport {DefaultShortcutSetting} from './ShortcutRegistry.js';\n\nexport class KeyboardShortcut {\n  descriptors: Descriptor[];\n  action: string;\n  type: Type;\n  keybindSets: Set<string>;\n\n  constructor(descriptors: Descriptor[], action: string, type: Type, keybindSets?: Set<string>) {\n    this.descriptors = descriptors;\n    this.action = action;\n    this.type = type;\n    this.keybindSets = keybindSets || new Set();\n  }\n\n  title(): string {\n    return this.descriptors.map(descriptor => descriptor.name).join(' ');\n  }\n\n  isDefault(): boolean {\n    return this.type === Type.DEFAULT_SHORTCUT || this.type === Type.DISABLED_DEFAULT ||\n        (this.type === Type.KEYBIND_SET_SHORTCUT && this.keybindSets.has(DefaultShortcutSetting));\n  }\n\n  changeType(type: Type): KeyboardShortcut {\n    return new KeyboardShortcut(this.descriptors, this.action, type);\n  }\n\n  changeKeys(descriptors: Descriptor[]): KeyboardShortcut {\n    this.descriptors = descriptors;\n    return this;\n  }\n\n  descriptorsMatch(descriptors: Descriptor[]): boolean {\n    if (descriptors.length !== this.descriptors.length) {\n      return false;\n    }\n    return descriptors.every((descriptor, index) => descriptor.key === this.descriptors[index].key);\n  }\n\n  hasKeybindSet(keybindSet: string): boolean {\n    return !this.keybindSets || this.keybindSets.has(keybindSet);\n  }\n\n  equals(shortcut: KeyboardShortcut): boolean {\n    return this.descriptorsMatch(shortcut.descriptors) && this.type === shortcut.type &&\n        this.action === shortcut.action;\n  }\n\n  static createShortcutFromSettingObject(settingObject: {\n    action: string,\n    descriptors: Descriptor[],\n    type: Type,\n  }): KeyboardShortcut {\n    return new KeyboardShortcut(settingObject.descriptors, settingObject.action, settingObject.type);\n  }\n\n  /**\n   * Creates a number encoding keyCode in the lower 8 bits and modifiers mask in the higher 8 bits.\n   * It is useful for matching pressed keys.\n   */\n  static makeKey(keyCode: string|number, modifiers?: number): number {\n    if (typeof keyCode === 'string') {\n      keyCode = keyCode.charCodeAt(0) - (/^[a-z]/.test(keyCode) ? 32 : 0);\n    }\n    modifiers = modifiers || Modifiers.None.value;\n    return KeyboardShortcut.makeKeyFromCodeAndModifiers(keyCode, modifiers);\n  }\n\n  static makeKeyFromEvent(keyboardEvent: KeyboardEvent): number {\n    let modifiers = Modifiers.None.value;\n    if (keyboardEvent.shiftKey) {\n      modifiers |= Modifiers.Shift.value;\n    }\n    if (keyboardEvent.ctrlKey) {\n      modifiers |= Modifiers.Ctrl.value;\n    }\n    if (keyboardEvent.altKey) {\n      modifiers |= Modifiers.Alt.value;\n    }\n    if (keyboardEvent.metaKey) {\n      modifiers |= Modifiers.Meta.value;\n    }\n\n    // Use either a real or a synthetic keyCode (for events originating from extensions).\n    // @ts-expect-error ExtensionServer.js installs '__keyCode' on some events.\n    const keyCode = keyboardEvent.keyCode || keyboardEvent['__keyCode'];\n    return KeyboardShortcut.makeKeyFromCodeAndModifiers(keyCode, modifiers);\n  }\n\n  // This checks if a \"control equivalent\" key is pressed. For non-mac platforms this means checking\n  // if control is pressed but not meta. On mac, we instead check if meta is pressed but not control.\n  static eventHasCtrlEquivalentKey(event: KeyboardEvent|MouseEvent): boolean {\n    return Host.Platform.isMac() ? event.metaKey && !event.ctrlKey : event.ctrlKey && !event.metaKey;\n  }\n\n  static eventHasEitherCtrlOrMeta(event: KeyboardEvent|MouseEvent): boolean {\n    return event.metaKey || event.ctrlKey;\n  }\n\n  static hasNoModifiers(event: Event): boolean {\n    const keyboardEvent = (event as KeyboardEvent);\n    return !keyboardEvent.ctrlKey && !keyboardEvent.shiftKey && !keyboardEvent.altKey && !keyboardEvent.metaKey;\n  }\n\n  static hasAtLeastOneModifier(event: Event): boolean {\n    return KeyboardShortcut.hasNoModifiers(event) === false;\n  }\n\n  static makeDescriptor(key: string|Key, modifiers?: number): Descriptor {\n    return {\n      key: KeyboardShortcut.makeKey(typeof key === 'string' ? key : key.code, modifiers),\n      name: KeyboardShortcut.shortcutToString(key, modifiers),\n    };\n  }\n\n  static makeDescriptorFromBindingShortcut(shortcut: string): Descriptor {\n    const [keyString, ...modifierStrings] = shortcut.split(/\\+(?!$)/).reverse();\n    let modifiers = 0;\n    for (const modifierString of modifierStrings) {\n      const modifier = Modifiers[modifierString].value;\n      console.assert(\n          typeof modifier !== 'undefined', `Only one key other than modifier is allowed in shortcut <${shortcut}>`);\n      modifiers |= modifier;\n    }\n    console.assert(keyString.length > 0, `Modifiers-only shortcuts are not allowed (encountered <${shortcut}>)`);\n\n    const key = Keys[keyString] || KeyBindings[keyString];\n    if (key && 'shiftKey' in key && key.shiftKey) {\n      modifiers |= Modifiers.Shift.value;\n    }\n    return KeyboardShortcut.makeDescriptor(key ? key : keyString, modifiers);\n  }\n\n  static shortcutToString(key: string|Key, modifiers?: number): string {\n    if (typeof key !== 'string' && KeyboardShortcut.isModifier(key.code)) {\n      return KeyboardShortcut.modifiersToString(modifiers);\n    }\n    return KeyboardShortcut.modifiersToString(modifiers) + KeyboardShortcut.keyName(key);\n  }\n\n  private static keyName(key: string|Key): string {\n    if (typeof key === 'string') {\n      return key.toUpperCase();\n    }\n    if (typeof key.name === 'string') {\n      return key.name;\n    }\n    return key.name[Host.Platform.platform()] || key.name.other || '';\n  }\n\n  private static makeKeyFromCodeAndModifiers(keyCode: number, modifiers: number|null): number {\n    return (keyCode & 255) | ((modifiers || 0) << 8);\n  }\n\n  static keyCodeAndModifiersFromKey(key: number): {\n    keyCode: number,\n    modifiers: number,\n  } {\n    return {keyCode: key & 255, modifiers: key >> 8};\n  }\n\n  static isModifier(key: number): boolean {\n    const {keyCode} = KeyboardShortcut.keyCodeAndModifiersFromKey(key);\n    return keyCode === Keys.Shift.code || keyCode === Keys.Ctrl.code || keyCode === Keys.Alt.code ||\n        keyCode === Keys.Meta.code;\n  }\n\n  private static modifiersToString(modifiers: number|undefined): string {\n    const isMac = Host.Platform.isMac();\n    const m = Modifiers;\n    const modifierNames = new Map([\n      [m.Ctrl, isMac ? 'Ctrl\\u2004' : 'Ctrl\\u200A+\\u200A'],\n      [m.Alt, isMac ? '\\u2325\\u2004' : 'Alt\\u200A+\\u200A'],\n      [m.Shift, isMac ? '\\u21e7\\u2004' : 'Shift\\u200A+\\u200A'],\n      [m.Meta, isMac ? '\\u2318\\u2004' : 'Win\\u200A+\\u200A'],\n    ]);\n    return [m.Meta, m.Ctrl, m.Alt, m.Shift].map(mapModifiers).join('');\n\n    function mapModifiers(m: Modifier): string {\n      return (modifiers || 0) & m.value ? /** @type {string} */ modifierNames.get(m) as string : '';\n    }\n  }\n\n  static keyCodeToKey(keyCode: number): Key|undefined {\n    return Object.values(Keys).find(key => key.code === keyCode);\n  }\n\n  static modifierValueToModifier(modifierValue: number): Modifier|undefined {\n    return Object.values(Modifiers).find(modifier => modifier.value === modifierValue);\n  }\n}\n\nexport interface Modifier {\n  value: number;\n  name: string;\n}\n\n/**\n * Constants for encoding modifier key set as a bit mask.\n * see #makeKeyFromCodeAndModifiers\n */\nexport const Modifiers: Record<string, Modifier> = {\n  None: {value: 0, name: 'None'},\n  Shift: {value: 1, name: 'Shift'},\n  Ctrl: {value: 2, name: 'Ctrl'},\n  Alt: {value: 4, name: 'Alt'},\n  Meta: {value: 8, name: 'Meta'},\n  CtrlOrMeta: {\n    value: Host.Platform.isMac() ? 8 /* Meta */ : 2 /* Ctrl */,\n    name: Host.Platform.isMac() ? 'Meta' : 'Ctrl',\n  },\n  ShiftOrOption: {\n    value: Host.Platform.isMac() ? 4 /* Alt */ : 1 /* Shift */,\n    name: Host.Platform.isMac() ? 'Alt' : 'Shift',\n  },\n};\n\nconst leftKey = {\n  code: 37,\n  name: 'â†',\n};\nconst upKey = {\n  code: 38,\n  name: 'â†‘',\n};\nconst rightKey = {\n  code: 39,\n  name: 'â†’',\n};\nconst downKey = {\n  code: 40,\n  name: 'â†“',\n};\nconst ctrlKey = {\n  code: 17,\n  name: 'Ctrl',\n};\nconst escKey = {\n  code: 27,\n  name: 'Esc',\n};\nconst spaceKey = {\n  code: 32,\n  name: 'Space',\n};\nconst plusKey = {\n  code: 187,\n  name: '+',\n};\nconst backquoteKey = {\n  code: 192,\n  name: '`',\n};\nconst quoteKey = {\n  code: 222,\n  name: '\\'',\n};\nconst metaKey = {\n  code: 91,\n  name: 'Meta',\n};\n\nexport const Keys: Record<string, Key> = {\n  Backspace: {code: 8, name: '\\u21a4'},\n  Tab: {code: 9, name: {mac: '\\u21e5', other: 'Tab'}},\n  Enter: {code: 13, name: {mac: '\\u21a9', other: 'Enter'}},\n  Shift: {code: 16, name: {mac: '\\u21e7', other: 'Shift'}},\n  Ctrl: ctrlKey,\n  Control: ctrlKey,\n  Alt: {code: 18, name: 'Alt'},\n  Esc: escKey,\n  Escape: escKey,\n  Space: spaceKey,\n  ' ': spaceKey,\n  PageUp: {code: 33, name: {mac: '\\u21de', other: 'PageUp'}},      // also NUM_NORTH_EAST\n  PageDown: {code: 34, name: {mac: '\\u21df', other: 'PageDown'}},  // also NUM_SOUTH_EAST\n  End: {code: 35, name: {mac: '\\u2197', other: 'End'}},            // also NUM_SOUTH_WEST\n  Home: {code: 36, name: {mac: '\\u2196', other: 'Home'}},          // also NUM_NORTH_WEST\n  Left: leftKey,                                                   // also NUM_WEST\n  Up: upKey,                                                       // also NUM_NORTH\n  Right: rightKey,                                                 // also NUM_EAST\n  Down: downKey,                                                   // also NUM_SOUTH\n  ArrowLeft: leftKey,\n  ArrowUp: upKey,\n  ArrowRight: rightKey,\n  ArrowDown: downKey,\n  Delete: {code: 46, name: 'Del'},\n  Zero: {code: 48, name: '0'},\n  C: {code: 67, name: 'C'},\n  H: {code: 72, name: 'H'},\n  N: {code: 78, name: 'N'},\n  O: {code: 79, name: 'O'},\n  P: {code: 80, name: 'P'},\n  R: {code: 82, name: 'R'},\n  S: {code: 83, name: 'S'},\n  U: {code: 85, name: 'U'},\n  V: {code: 86, name: 'V'},\n  X: {code: 88, name: 'X'},\n  Meta: metaKey,\n  F1: {code: 112, name: 'F1'},\n  F2: {code: 113, name: 'F2'},\n  F3: {code: 114, name: 'F3'},\n  F4: {code: 115, name: 'F4'},\n  F5: {code: 116, name: 'F5'},\n  F6: {code: 117, name: 'F6'},\n  F7: {code: 118, name: 'F7'},\n  F8: {code: 119, name: 'F8'},\n  F9: {code: 120, name: 'F9'},\n  F10: {code: 121, name: 'F10'},\n  F11: {code: 122, name: 'F11'},\n  F12: {code: 123, name: 'F12'},\n  Semicolon: {code: 186, name: ';'},\n  NumpadPlus: {code: 107, name: 'Numpad +'},\n  NumpadMinus: {code: 109, name: 'Numpad -'},\n  Numpad0: {code: 96, name: 'Numpad 0'},\n  Plus: plusKey,\n  Equal: plusKey,\n  Comma: {code: 188, name: ','},\n  Minus: {code: 189, name: '-'},\n  Period: {code: 190, name: '.'},\n  Slash: {code: 191, name: '/'},\n  QuestionMark: {code: 191, name: '?'},\n  Apostrophe: backquoteKey,\n  Tilde: {code: 192, name: 'Tilde'},\n  Backquote: backquoteKey,\n  IntlBackslash: backquoteKey,\n  LeftSquareBracket: {code: 219, name: '['},\n  RightSquareBracket: {code: 221, name: ']'},\n  Backslash: {code: 220, name: '\\\\'},\n  SingleQuote: quoteKey,\n  Quote: quoteKey,\n  // \"default\" command/ctrl key for platform, Command on Mac, Ctrl on other platforms\n  CtrlOrMeta: Host.Platform.isMac() ? metaKey : ctrlKey,\n};\n\nexport const enum Type {\n  USER_SHORTCUT = 'UserShortcut',\n  DEFAULT_SHORTCUT = 'DefaultShortcut',\n  DISABLED_DEFAULT = 'DisabledDefault',\n  UNSET_SHORTCUT = 'UnsetShortcut',\n  KEYBIND_SET_SHORTCUT = 'KeybindSetShortcut',\n}\n\nexport const KeyBindings: Record<string, Key> = {};\n\n(function(): void {\nfor (const key in Keys) {\n  const descriptor = Keys[key];\n  if (typeof descriptor === 'object' && descriptor['code']) {\n    const name = typeof descriptor['name'] === 'string' ? descriptor['name'] : key;\n    KeyBindings[name] = descriptor;\n  }\n}\n})();\nexport interface Key {\n  code: number;\n  name: string|Record<string, string>;\n  shiftKey?: boolean;\n}\nexport interface Descriptor {\n  key: number;\n  name: string;\n}\n", "// Copyright 2011 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\n/* eslint-disable @devtools/no-imperative-dom-api */\n\nimport * as i18n from '../../core/i18n/i18n.js';\nimport type * as Platform from '../../core/platform/platform.js';\nimport {createIcon} from '../../ui/kit/kit.js';\nimport * as VisualLogging from '../../ui/visual_logging/visual_logging.js';\n\nimport * as ARIAUtils from './ARIAUtils.js';\nimport {AnchorBehavior, GlassPane, MarginBehavior, PointerEventsBehavior, SizeBehavior} from './GlassPane.js';\nimport {InspectorView} from './InspectorView.js';\nimport softContextMenuStyles from './softContextMenu.css.js';\nimport {Tooltip} from './Tooltip.js';\nimport {createTextChild, ElementFocusRestorer} from './UIUtils.js';\n\nconst UIStrings = {\n  /**\n   * @description Text exposed to screen readers on checked items.\n   */\n  checked: 'checked',\n  /**\n   * @description Accessible text exposed to screen readers when the screen reader encounters an unchecked checkbox.\n   */\n  unchecked: 'unchecked',\n  /**\n   * @description Accessibility label for checkable SoftContextMenuItems with shortcuts\n   * @example {Open File} PH1\n   * @example {Ctrl + P} PH2\n   * @example {checked} PH3\n   */\n  sSS: '{PH1}, {PH2}, {PH3}',\n  /**\n   * @description Generic text with two placeholders separated by a comma\n   * @example {1 613 680} PH1\n   * @example {44 %} PH2\n   */\n  sS: '{PH1}, {PH2}',\n  /**\n   * @description Accessible text exposed to screen readers appended to menu items that have a new badge.\n   */\n  newFeature: 'This is a new feature',\n} as const;\nconst str_ = i18n.i18n.registerUIStrings('ui/legacy/SoftContextMenu.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\n\nexport class SoftContextMenu {\n  private items: SoftContextMenuDescriptor[];\n  private itemSelectedCallback: (arg0: number) => void;\n  private parentMenu: SoftContextMenu|undefined;\n  private highlightedMenuItemElement: HTMLElement|null;\n  detailsForElementMap: WeakMap<HTMLElement, ElementMenuDetails>;\n  private document?: Document;\n  private glassPane?: GlassPane;\n  private contextMenuElement?: HTMLElement;\n  private focusRestorer?: ElementFocusRestorer;\n  private hideOnUserMouseDownUnlessInMenu?: ((event: Event) => void);\n  private activeSubMenuElement?: HTMLElement;\n  private subMenu?: SoftContextMenu;\n  private onMenuClosed?: () => void;\n  private focusOnTheFirstItem = true;\n  private keepOpen: boolean;\n  private loggableParent: Element|null;\n\n  constructor(\n      items: SoftContextMenuDescriptor[], itemSelectedCallback: (arg0: number) => void, keepOpen: boolean,\n      parentMenu?: SoftContextMenu, onMenuClosed?: () => void, loggableParent?: Element|null) {\n    this.items = items;\n    this.itemSelectedCallback = itemSelectedCallback;\n    this.parentMenu = parentMenu;\n    this.highlightedMenuItemElement = null;\n\n    this.detailsForElementMap = new WeakMap();\n    this.onMenuClosed = onMenuClosed;\n    this.keepOpen = keepOpen;\n    this.loggableParent = loggableParent || null;\n  }\n\n  getItems(): SoftContextMenuDescriptor[] {\n    return this.items;\n  }\n\n  show(document: Document, anchorBox: AnchorBox): void {\n    if (!this.items.length) {\n      return;\n    }\n\n    this.document = document;\n\n    this.glassPane = new GlassPane();\n    this.glassPane.setPointerEventsBehavior(\n        this.parentMenu ? PointerEventsBehavior.PIERCE_GLASS_PANE : PointerEventsBehavior.BLOCKED_BY_GLASS_PANE);\n    this.glassPane.registerRequiredCSS(softContextMenuStyles);\n    this.glassPane.setContentAnchorBox(anchorBox);\n    this.glassPane.setSizeBehavior(SizeBehavior.MEASURE_CONTENT);\n    this.glassPane.setMarginBehavior(MarginBehavior.NO_MARGIN);\n    this.glassPane.setAnchorBehavior(this.parentMenu ? AnchorBehavior.PREFER_RIGHT : AnchorBehavior.PREFER_BOTTOM);\n\n    this.contextMenuElement = this.glassPane.contentElement.createChild('div', 'soft-context-menu');\n    this.contextMenuElement.setAttribute('jslog', `${VisualLogging.menu().track({resize: true}).parent('mapped').track({\n                                           keydown: 'ArrowUp|ArrowDown|ArrowLeft|ArrowRight|Enter|Space|Escape',\n                                         })}`);\n    if (this.loggableParent) {\n      VisualLogging.setMappedParent(this.contextMenuElement, this.loggableParent);\n    }\n    this.contextMenuElement.tabIndex = -1;\n    ARIAUtils.markAsMenu(this.contextMenuElement);\n    this.contextMenuElement.addEventListener('mouseup', e => e.consume(), false);\n    this.contextMenuElement.addEventListener('keydown', this.menuKeyDown.bind(this), false);\n\n    const menuContainsCheckbox = this.items.find(item => item.type === 'checkbox') ? true : false;\n    for (let i = 0; i < this.items.length; ++i) {\n      this.contextMenuElement.appendChild(this.createMenuItem(this.items[i], menuContainsCheckbox));\n    }\n\n    this.glassPane.show(document);\n    this.focusRestorer = new ElementFocusRestorer(this.contextMenuElement);\n\n    if (!this.parentMenu) {\n      this.hideOnUserMouseDownUnlessInMenu = (event: Event) => {\n        // If a user clicks on any submenu, prevent the menu system from closing.\n        let subMenu: (SoftContextMenu|undefined) = this.subMenu;\n        while (subMenu) {\n          if (subMenu.contextMenuElement === event.composedPath()[0]) {\n            return;\n          }\n          subMenu = subMenu.subMenu;\n        }\n\n        this.discard();\n        event.consume(true);\n      };\n\n      this.document.body.addEventListener('mousedown', this.hideOnUserMouseDownUnlessInMenu, false);\n\n      // To reliably get resize events when 1) the browser window is resized,\n      // 2) DevTools is undocked and resized and 3) DevTools is docked &\n      // resized, we have to use ResizeObserver.\n      const devToolsElem = InspectorView.maybeGetInspectorViewInstance()?.element;\n      if (devToolsElem) {\n        // The resize-observer will fire immediately upon starting observation.\n        // So we have to ignore that first fire, and then the moment we get a\n        // second, we know that it's been resized so we can act accordingly.\n        let firedOnce = false;\n        const observer = new ResizeObserver(() => {\n          if (firedOnce) {\n            observer.disconnect();\n            this.discard();\n            return;\n          }\n          firedOnce = true;\n        });\n        observer.observe(devToolsElem);\n      }\n\n      // focus on the first menu item\n      if (this.contextMenuElement.children && this.focusOnTheFirstItem) {\n        const focusElement = this.contextMenuElement.children[0] as HTMLElement;\n        this.highlightMenuItem(focusElement, /* scheduleSubMenu */ false);\n      }\n    }\n  }\n\n  setContextMenuElementLabel(label: string): void {\n    if (this.contextMenuElement) {\n      ARIAUtils.setLabel(this.contextMenuElement, label);\n    }\n  }\n\n  discard(): void {\n    if (this.subMenu) {\n      this.subMenu.discard();\n    }\n    if (this.focusRestorer) {\n      this.focusRestorer.restore();\n    }\n    if (this.glassPane) {\n      this.glassPane.hide();\n      delete this.glassPane;\n      if (this.hideOnUserMouseDownUnlessInMenu) {\n        if (this.document) {\n          this.document.body.removeEventListener('mousedown', this.hideOnUserMouseDownUnlessInMenu, false);\n        }\n        delete this.hideOnUserMouseDownUnlessInMenu;\n      }\n    }\n    if (this.parentMenu) {\n      delete this.parentMenu.subMenu;\n      if (this.parentMenu.activeSubMenuElement) {\n        ARIAUtils.setExpanded(this.parentMenu.activeSubMenuElement, false);\n        delete this.parentMenu.activeSubMenuElement;\n      }\n    }\n    this.onMenuClosed?.();\n  }\n\n  private createMenuItem(item: SoftContextMenuDescriptor, menuContainsCheckbox: boolean): HTMLElement {\n    if (item.type === 'separator') {\n      return this.createSeparator();\n    }\n\n    if (item.type === 'subMenu') {\n      return this.createSubMenu(item, menuContainsCheckbox);\n    }\n\n    const menuItemElement = document.createElement('div');\n    menuItemElement.classList.add('soft-context-menu-item');\n    menuItemElement.tabIndex = -1;\n    ARIAUtils.markAsMenuItem(menuItemElement);\n    if (item.checked) {\n      menuItemElement.setAttribute('checked', '');\n    }\n    if (item.id !== undefined) {\n      menuItemElement.setAttribute('data-action-id', item.id.toString());\n    }\n\n    // If the menu contains a checkbox, add checkbox space in front of the label to align the items\n    if (menuContainsCheckbox) {\n      const checkMarkElement = createIcon('checkmark', 'checkmark');\n      menuItemElement.appendChild(checkMarkElement);\n    }\n    if (item.tooltip) {\n      Tooltip.install(menuItemElement, item.tooltip);\n    }\n    const detailsForElement: ElementMenuDetails = {\n      actionId: undefined,\n      isSeparator: undefined,\n      customElement: undefined,\n      subItems: undefined,\n      subMenuTimer: undefined,\n    };\n\n    // Only add a jslog context if the item has a label. Menu items without a\n    // label are containers for custom elements, which are responsible for adding\n    // their own `jslog` attributes.\n    if (item.jslogContext && item.label) {\n      if (item.type === 'checkbox') {\n        menuItemElement.setAttribute(\n            'jslog', `${VisualLogging.toggle().track({click: true}).context(item.jslogContext)}`);\n      } else {\n        menuItemElement.setAttribute(\n            'jslog', `${VisualLogging.action().track({click: true}).context(item.jslogContext)}`);\n      }\n    }\n    if (item.element && !item.label) {\n      const wrapper = menuItemElement.createChild('div', 'soft-context-menu-custom-item');\n      wrapper.appendChild(item.element);\n      if (item.element?.classList.contains('location-menu')) {\n        const label = item.element.ariaLabel || '';\n        item.element.ariaLabel = '';\n        ARIAUtils.setLabel(menuItemElement, label);\n      }\n      detailsForElement.customElement = (item.element as HTMLElement);\n      this.detailsForElementMap.set(menuItemElement, detailsForElement);\n      return menuItemElement;\n    }\n\n    if (!item.enabled) {\n      menuItemElement.classList.add('soft-context-menu-disabled');\n    }\n    createTextChild(menuItemElement, item.label || '');\n    if (item.element) {\n      menuItemElement.appendChild(item.element);\n    }\n    menuItemElement.createChild('span', 'soft-context-menu-shortcut').textContent = item.shortcut || '';\n\n    menuItemElement.addEventListener('mousedown', this.menuItemMouseDown.bind(this), false);\n    menuItemElement.addEventListener('mouseup', this.menuItemMouseUp.bind(this), false);\n\n    // Manually manage hover highlight since :hover does not work in case of click-and-hold menu invocation.\n    menuItemElement.addEventListener('mouseover', this.menuItemMouseOver.bind(this), false);\n    menuItemElement.addEventListener('mouseleave', (this.menuItemMouseLeave.bind(this) as EventListener), false);\n\n    detailsForElement.actionId = item.id;\n\n    let accessibleName: Platform.UIString.LocalizedString|string = item.label || '';\n\n    if (item.type === 'checkbox') {\n      const checkedState = item.checked ? i18nString(UIStrings.checked) : i18nString(UIStrings.unchecked);\n      if (item.shortcut) {\n        accessibleName = i18nString(UIStrings.sSS, {PH1: String(item.label), PH2: item.shortcut, PH3: checkedState});\n      } else {\n        accessibleName = i18nString(UIStrings.sS, {PH1: String(item.label), PH2: checkedState});\n      }\n    } else if (item.shortcut) {\n      accessibleName = i18nString(UIStrings.sS, {PH1: String(item.label), PH2: item.shortcut});\n    }\n    if (item.element?.className === 'new-badge') {\n      accessibleName = i18nString(UIStrings.sS, {PH1: String(item.label), PH2: i18nString(UIStrings.newFeature)});\n    }\n    ARIAUtils.setLabel(menuItemElement, accessibleName);\n\n    if (item.isExperimentalFeature) {\n      const experimentIcon = createIcon('experiment');\n      menuItemElement.appendChild(experimentIcon);\n    }\n\n    this.detailsForElementMap.set(menuItemElement, detailsForElement);\n\n    return menuItemElement;\n  }\n\n  private createSubMenu(item: SoftContextMenuDescriptor, menuContainsCheckbox: boolean): HTMLElement {\n    const menuItemElement = document.createElement('div');\n    menuItemElement.classList.add('soft-context-menu-item');\n    menuItemElement.tabIndex = -1;\n    ARIAUtils.markAsMenuItemSubMenu(menuItemElement);\n    this.detailsForElementMap.set(menuItemElement, {\n      subItems: item.subItems,\n      actionId: undefined,\n      isSeparator: undefined,\n      customElement: undefined,\n      subMenuTimer: undefined,\n    });\n\n    // If the menu contains a checkbox, add checkbox space in front of the label to align the items\n    if (menuContainsCheckbox) {\n      const checkMarkElement = createIcon('checkmark', 'checkmark soft-context-menu-item-checkmark');\n      menuItemElement.appendChild(checkMarkElement);\n    }\n\n    createTextChild(menuItemElement, item.label || '');\n    ARIAUtils.setExpanded(menuItemElement, false);\n\n    const subMenuArrowElement = createIcon('keyboard-arrow-right', 'soft-context-menu-item-submenu-arrow');\n    menuItemElement.appendChild(subMenuArrowElement);\n\n    menuItemElement.addEventListener('mousedown', this.menuItemMouseDown.bind(this), false);\n    menuItemElement.addEventListener('mouseup', this.menuItemMouseUp.bind(this), false);\n\n    // Manually manage hover highlight since :hover does not work in case of click-and-hold menu invocation.\n    menuItemElement.addEventListener('mouseover', this.menuItemMouseOver.bind(this), false);\n    menuItemElement.addEventListener('mouseleave', (this.menuItemMouseLeave.bind(this) as EventListener), false);\n\n    if (item.jslogContext) {\n      menuItemElement.setAttribute('jslog', `${VisualLogging.item().context(item.jslogContext)}`);\n    }\n    return menuItemElement;\n  }\n\n  private createSeparator(): HTMLElement {\n    const separatorElement = document.createElement('div');\n    separatorElement.classList.add('soft-context-menu-separator');\n    this.detailsForElementMap.set(separatorElement, {\n      subItems: undefined,\n      actionId: undefined,\n      isSeparator: true,\n      customElement: undefined,\n      subMenuTimer: undefined,\n    });\n    separatorElement.createChild('div', 'separator-line');\n    return separatorElement;\n  }\n\n  private menuItemMouseDown(event: Event): void {\n    // Do not let separator's mouse down hit menu's handler - we need to receive mouse up!\n    event.consume(true);\n  }\n\n  private menuItemMouseUp(event: Event): void {\n    this.triggerAction((event.target as HTMLElement), event);\n    void VisualLogging.logClick(event.target as HTMLElement, event);\n    event.consume();\n  }\n\n  private root(): SoftContextMenu {\n    let root: SoftContextMenu = this;\n    while (root.parentMenu) {\n      root = root.parentMenu;\n    }\n    return root;\n  }\n\n  setChecked(item: SoftContextMenuDescriptor, checked: boolean): void {\n    item.checked = checked;\n    const element = this.contextMenuElement?.querySelector(`[data-action-id=\"${item.id}\"]`);\n    if (!element) {\n      return;\n    }\n    if (checked) {\n      element.setAttribute('checked', '');\n    } else {\n      element.removeAttribute('checked');\n    }\n\n    const checkedState = item.checked ? i18nString(UIStrings.checked) : i18nString(UIStrings.unchecked);\n    const accessibleName = item.shortcut ?\n        i18nString(UIStrings.sSS, {PH1: String(item.label), PH2: item.shortcut, PH3: checkedState}) :\n        i18nString(UIStrings.sS, {PH1: String(item.label), PH2: checkedState});\n    ARIAUtils.setLabel(element, accessibleName);\n  }\n\n  private triggerAction(menuItemElement: HTMLElement, event: Event): void {\n    const detailsForElement = this.detailsForElementMap.get(menuItemElement);\n    if (!detailsForElement || detailsForElement.subItems) {\n      this.showSubMenu(menuItemElement);\n      event.consume();\n      return;\n    }\n    if (this.keepOpen) {\n      event.consume(true);\n      const item = this.items.find(item => item.id === detailsForElement.actionId);\n      if (item?.id !== undefined) {\n        this.setChecked(item, !item.checked);\n        this.itemSelectedCallback(item.id);\n      }\n      return;\n    }\n    this.root().discard();\n    event.consume(true);\n    if (typeof detailsForElement.actionId !== 'undefined') {\n      this.itemSelectedCallback(detailsForElement.actionId);\n      delete detailsForElement.actionId;\n    }\n    return;\n  }\n\n  private showSubMenu(menuItemElement: HTMLElement): void {\n    const detailsForElement = this.detailsForElementMap.get(menuItemElement);\n    if (!detailsForElement) {\n      return;\n    }\n    if (detailsForElement.subMenuTimer) {\n      window.clearTimeout(detailsForElement.subMenuTimer);\n      delete detailsForElement.subMenuTimer;\n    }\n    if (this.subMenu || !this.document) {\n      return;\n    }\n\n    this.activeSubMenuElement = menuItemElement;\n    ARIAUtils.setExpanded(menuItemElement, true);\n    if (!detailsForElement.subItems) {\n      return;\n    }\n    this.subMenu = new SoftContextMenu(detailsForElement.subItems, this.itemSelectedCallback, false, this);\n    const anchorBox = menuItemElement.boxInWindow();\n    // Adjust for padding.\n    anchorBox.y -= 9;\n    anchorBox.x += 3;\n    anchorBox.width -= 6;\n    anchorBox.height += 18;\n    this.subMenu.show(this.document, anchorBox);\n  }\n\n  private menuItemMouseOver(event: Event): void {\n    this.highlightMenuItem((event.target as HTMLElement), true);\n  }\n\n  private menuItemMouseLeave(event: MouseEvent): void {\n    if (!this.subMenu || !event.relatedTarget) {\n      this.highlightMenuItem(null, true);\n      return;\n    }\n\n    const relatedTarget = event.relatedTarget;\n    if (relatedTarget === this.contextMenuElement) {\n      this.highlightMenuItem(null, true);\n    }\n  }\n\n  private highlightMenuItem(menuItemElement: HTMLElement|null, scheduleSubMenu: boolean): void {\n    if (this.highlightedMenuItemElement === menuItemElement) {\n      return;\n    }\n    if (this.subMenu) {\n      this.subMenu.discard();\n    }\n    if (this.highlightedMenuItemElement) {\n      const detailsForElement = this.detailsForElementMap.get(this.highlightedMenuItemElement);\n      this.highlightedMenuItemElement.classList.remove('force-white-icons');\n      this.highlightedMenuItemElement.classList.remove('soft-context-menu-item-mouse-over');\n      if (detailsForElement?.subItems && detailsForElement.subMenuTimer) {\n        window.clearTimeout(detailsForElement.subMenuTimer);\n        delete detailsForElement.subMenuTimer;\n      }\n    }\n\n    this.highlightedMenuItemElement = menuItemElement;\n    if (this.highlightedMenuItemElement) {\n      this.highlightedMenuItemElement.classList.add('force-white-icons');\n      this.highlightedMenuItemElement.classList.add('soft-context-menu-item-mouse-over');\n      const detailsForElement = this.detailsForElementMap.get(this.highlightedMenuItemElement);\n      if (detailsForElement?.customElement && !detailsForElement.customElement.classList.contains('location-menu')) {\n        detailsForElement.customElement.focus();\n      } else {\n        this.highlightedMenuItemElement.focus();\n      }\n      if (scheduleSubMenu && detailsForElement?.subItems && !detailsForElement.subMenuTimer) {\n        detailsForElement.subMenuTimer =\n            window.setTimeout(this.showSubMenu.bind(this, this.highlightedMenuItemElement), 150);\n      }\n    }\n\n    if (this.contextMenuElement) {\n      ARIAUtils.setActiveDescendant(this.contextMenuElement, menuItemElement);\n    }\n  }\n\n  private highlightPrevious(): void {\n    let menuItemElement: (ChildNode|null) = this.highlightedMenuItemElement ?\n        this.highlightedMenuItemElement.previousSibling :\n        this.contextMenuElement ? this.contextMenuElement.lastChild :\n                                  null;\n    let menuItemDetails: (ElementMenuDetails|undefined) =\n        menuItemElement ? this.detailsForElementMap.get((menuItemElement as HTMLElement)) : undefined;\n    while (menuItemElement && menuItemDetails &&\n           (menuItemDetails.isSeparator ||\n            (menuItemElement as HTMLElement).classList.contains('soft-context-menu-disabled'))) {\n      menuItemElement = menuItemElement.previousSibling;\n      menuItemDetails = menuItemElement ? this.detailsForElementMap.get((menuItemElement as HTMLElement)) : undefined;\n    }\n    if (menuItemElement) {\n      this.highlightMenuItem((menuItemElement as HTMLElement), false);\n    }\n  }\n\n  private highlightNext(): void {\n    let menuItemElement: (ChildNode|null) = this.highlightedMenuItemElement ?\n        this.highlightedMenuItemElement.nextSibling :\n        this.contextMenuElement ? this.contextMenuElement.firstChild :\n                                  null;\n    let menuItemDetails: (ElementMenuDetails|undefined) =\n        menuItemElement ? this.detailsForElementMap.get((menuItemElement as HTMLElement)) : undefined;\n    while (menuItemElement &&\n           (menuItemDetails?.isSeparator ||\n            (menuItemElement as HTMLElement).classList.contains('soft-context-menu-disabled'))) {\n      menuItemElement = menuItemElement.nextSibling;\n      menuItemDetails = menuItemElement ? this.detailsForElementMap.get((menuItemElement as HTMLElement)) : undefined;\n    }\n    if (menuItemElement) {\n      this.highlightMenuItem((menuItemElement as HTMLElement), false);\n    }\n  }\n\n  private menuKeyDown(keyboardEvent: KeyboardEvent): void {\n    function onEnterOrSpace(this: SoftContextMenu): void {\n      if (!this.highlightedMenuItemElement) {\n        return;\n      }\n      const detailsForElement = this.detailsForElementMap.get(this.highlightedMenuItemElement);\n      if (!detailsForElement || detailsForElement.customElement) {\n        // The custom element will handle the event, so return early and do not consume it.\n        return;\n      }\n      VisualLogging.logClick(this.highlightedMenuItemElement, keyboardEvent);\n      this.triggerAction(this.highlightedMenuItemElement, keyboardEvent);\n      if (detailsForElement.subItems && this.subMenu) {\n        this.subMenu.highlightNext();\n      }\n      keyboardEvent.consume(true);\n    }\n\n    switch (keyboardEvent.key) {\n      case 'ArrowUp':\n        this.highlightPrevious();\n        keyboardEvent.consume(true);\n        break;\n      case 'ArrowDown':\n        this.highlightNext();\n        keyboardEvent.consume(true);\n        break;\n      case 'ArrowLeft':\n        if (this.parentMenu) {\n          this.highlightMenuItem(null, false);\n          this.discard();\n        }\n        keyboardEvent.consume(true);\n        break;\n      case 'ArrowRight': {\n        if (!this.highlightedMenuItemElement) {\n          break;\n        }\n        const detailsForElement = this.detailsForElementMap.get(this.highlightedMenuItemElement);\n        if (detailsForElement?.subItems) {\n          this.showSubMenu(this.highlightedMenuItemElement);\n          if (this.subMenu) {\n            this.subMenu.highlightNext();\n          }\n        }\n        if (detailsForElement?.customElement?.classList.contains('location-menu')) {\n          detailsForElement.customElement.dispatchEvent(new KeyboardEvent('keydown', {key: 'ArrowRight'}));\n          this.highlightMenuItem(null, true);\n        }\n        keyboardEvent.consume(true);\n        break;\n      }\n      case 'Escape':\n        this.discard();\n        keyboardEvent.consume(true);\n        break;\n      /**\n       * Important: we don't consume the event by default for `Enter` or `Space`\n       * key events, as if there's a custom sub menu we pass the event onto\n       * that.\n       */\n      case 'Enter':\n        if (!(keyboardEvent.key === 'Enter')) {\n          return;\n        }\n        onEnterOrSpace.call(this);\n        break;\n      case ' ':\n        onEnterOrSpace.call(this);\n        break;\n      default:\n        keyboardEvent.consume(true);\n    }\n  }\n\n  markAsMenuItemCheckBox(): void {\n    if (!this.contextMenuElement) {\n      return;\n    }\n    for (const child of this.contextMenuElement.children) {\n      if (child.className !== 'soft-context-menu-separator') {\n        ARIAUtils.markAsMenuItemCheckBox(child);\n      }\n    }\n  }\n\n  setFocusOnTheFirstItem(focusOnTheFirstItem: boolean): void {\n    this.focusOnTheFirstItem = focusOnTheFirstItem;\n  }\n}\nexport interface SoftContextMenuDescriptor {\n  type: 'checkbox'|'item'|'separator'|'subMenu';\n  id?: number;\n  label?: string;\n  accelerator?: {keyCode: number, modifiers: number};\n  isExperimentalFeature?: boolean;\n  enabled?: boolean;\n  checked?: boolean;\n  isDevToolsPerformanceMenuItem?: boolean;\n  subItems?: SoftContextMenuDescriptor[];\n  element?: Element;\n  shortcut?: string;\n  tooltip?: Platform.UIString.LocalizedString;\n  jslogContext?: string;\n  /** A no-op. For native context menus, feature name will request showing a new badge. */\n  featureName?: string;\n}\ninterface ElementMenuDetails {\n  customElement?: HTMLElement;\n  isSeparator?: boolean;\n  subMenuTimer?: number;\n  subItems?: SoftContextMenuDescriptor[];\n  actionId?: number;\n}\n", "// Copyright 2011 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n/* eslint-disable @devtools/no-imperative-dom-api */\n\nimport * as Common from '../../core/common/common.js';\nimport * as Host from '../../core/host/host.js';\nimport * as i18n from '../../core/i18n/i18n.js';\nimport * as Root from '../../core/root/root.js';\nimport * as SDK from '../../core/sdk/sdk.js';\nimport * as GreenDev from '../../models/greendev/greendev.js';\nimport * as Buttons from '../../ui/components/buttons/buttons.js';\nimport {createIcon, type Icon} from '../kit/kit.js';\nimport * as VisualLogging from '../visual_logging/visual_logging.js';\n\nimport type {ActionDelegate as ActionDelegateInterface} from './ActionRegistration.js';\nimport {ActionRegistry} from './ActionRegistry.js';\nimport * as ARIAUtils from './ARIAUtils.js';\nimport type {Context} from './Context.js';\nimport type {ContextMenu} from './ContextMenu.js';\nimport {Dialog} from './Dialog.js';\nimport {DockController, DockState, Events as DockControllerEvents} from './DockController.js';\nimport {Floaty} from './Floaty.js';\nimport {GlassPane} from './GlassPane.js';\nimport {Infobar, Type as InfobarType} from './Infobar.js';\nimport {KeyboardShortcut} from './KeyboardShortcut.js';\nimport type {Panel} from './Panel.js';\nimport {ShowMode, SplitWidget} from './SplitWidget.js';\nimport {type EventData, Events as TabbedPaneEvents, type TabbedPane, type TabbedPaneTabDelegate} from './TabbedPane.js';\nimport {ToolbarButton} from './Toolbar.js';\nimport {Tooltip} from './Tooltip.js';\nimport type {TabbedViewLocation, View, ViewLocation, ViewLocationResolver} from './View.js';\nimport {ViewManager} from './ViewManager.js';\nimport {VBox, type Widget, WidgetFocusRestorer} from './Widget.js';\n\nconst UIStrings = {\n  /**\n   * @description Title of more tabs button in inspector view\n   */\n  moreTools: 'More Tools',\n  /**\n   * @description Text that appears when hovor over the close button on the drawer view\n   */\n  closeDrawer: 'Close drawer',\n  /**\n   * @description The ARIA label for the main tab bar that contains the DevTools panels\n   */\n  panels: 'Panels',\n  /**\n   * @description Title of an action that reloads the tab currently being debugged by DevTools\n   */\n  reloadDebuggedTab: 'Reload page',\n  /**\n   * @description Title of an action that reloads the DevTools\n   */\n  reloadDevtools: 'Reload DevTools',\n  /**\n   * @description Text for context menu action to move a tab to the main tab bar\n   */\n  moveToMainTabBar: 'Move to main tab bar',\n  /**\n   * @description Text for context menu action to move a tab to the drawer\n   */\n  moveToDrawer: 'Move to drawer',\n  /**\n   * @description Text shown in a prompt to the user when DevTools is started and the\n   * currently selected DevTools locale does not match Chrome's locale.\n   * The placeholder is the current Chrome language.\n   * @example {German} PH1\n   */\n  devToolsLanguageMissmatch: 'DevTools is now available in {PH1}',\n  /**\n   * @description An option the user can select when we notice that DevTools\n   * is configured with a different locale than Chrome. This option means DevTools will\n   * always try and display the DevTools UI in the same language as Chrome.\n   */\n  setToBrowserLanguage: 'Always match Chrome\\'s language',\n  /**\n   * @description An option the user can select when DevTools notices that DevTools\n   * is configured with a different locale than Chrome. This option means DevTools UI\n   * will be switched to the language specified in the placeholder.\n   * @example {German} PH1\n   */\n  setToSpecificLanguage: 'Switch DevTools to {PH1}',\n  /**\n   * @description The aria label for main toolbar\n   */\n  mainToolbar: 'Main toolbar',\n  /**\n   * @description The aria label for the drawer.\n   */\n  drawer: 'Tool drawer',\n  /**\n   * @description The aria label for the drawer shown.\n   */\n  drawerShown: 'Drawer shown',\n  /**\n   * @description The aria label for the drawer hidden.\n   */\n  drawerHidden: 'Drawer hidden',\n  /**\n   * @description Request for the user to select a local file system folder for DevTools\n   * to store local overrides in.\n   */\n  selectOverrideFolder: 'Select a folder to store override files in',\n  /**\n   * @description Label for a button which opens a file picker.\n   */\n  selectFolder: 'Select folder',\n  /**\n   * @description Text that appears when hover the toggle orientation button\n   */\n  toggleDrawerOrientation: 'Toggle drawer orientation',\n} as const;\nconst str_ = i18n.i18n.registerUIStrings('ui/legacy/InspectorView.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\nlet inspectorViewInstance: InspectorView|null = null;\n\nconst MIN_MAIN_PANEL_WIDTH = 240;\nconst MIN_VERTICAL_DRAWER_WIDTH = 200;\n// Inspector need to have space for both main panel and the drawer + some slack for borders\nconst MIN_INSPECTOR_WIDTH_HORIZONTAL_DRAWER = 250;\nconst MIN_INSPECTOR_WIDTH_VERTICAL_DRAWER = 450;\nconst MIN_INSPECTOR_HEIGHT = 72;\n\nexport enum DrawerOrientation {\n  VERTICAL = 'vertical',\n  HORIZONTAL = 'horizontal',\n  UNSET = 'unset',\n}\n\nexport enum DockMode {\n  BOTTOM = 'bottom',\n  SIDE = 'side',  // For LEFT and RIGHT\n  UNDOCKED = 'undocked',\n}\n\nexport interface DrawerOrientationByDockMode {\n  [DockMode.BOTTOM]: DrawerOrientation;\n  [DockMode.SIDE]: DrawerOrientation;\n  [DockMode.UNDOCKED]: DrawerOrientation;\n}\n\nexport class InspectorView extends VBox implements ViewLocationResolver {\n  private readonly drawerOrientationByDockSetting: Common.Settings.Setting<DrawerOrientationByDockMode>;\n  private readonly drawerSplitWidget: SplitWidget;\n  private readonly tabDelegate: InspectorViewTabDelegate;\n  private readonly drawerTabbedLocation: TabbedViewLocation;\n  private drawerTabbedPane: TabbedPane;\n  private infoBarDiv!: HTMLDivElement|null;\n  private readonly tabbedLocation: TabbedViewLocation;\n  readonly tabbedPane: TabbedPane;\n  private readonly keyDownBound: (event: KeyboardEvent) => void;\n  private currentPanelLocked?: boolean;\n  private focusRestorer?: WidgetFocusRestorer|null;\n  private ownerSplitWidget?: SplitWidget;\n  private reloadRequiredInfobar?: Infobar;\n  #selectOverrideFolderInfobar?: Infobar;\n  #resizeObserver: ResizeObserver;\n  #toggleOrientationButton: ToolbarButton;\n\n  constructor() {\n    super();\n    GlassPane.setContainer(this.element);\n    this.setMinimumSize(MIN_INSPECTOR_WIDTH_HORIZONTAL_DRAWER, MIN_INSPECTOR_HEIGHT);\n\n    // DevTools sidebar is a vertical split of main tab bar panels and a drawer.\n    this.drawerOrientationByDockSetting =\n        Common.Settings.Settings.instance().createSetting('inspector.drawer-orientation-by-dock-mode', {\n          [DockMode.BOTTOM]: DrawerOrientation.UNSET,\n          [DockMode.SIDE]: DrawerOrientation.UNSET,\n          [DockMode.UNDOCKED]: DrawerOrientation.UNSET,\n        });\n    const initialOrientation = this.#getOrientationForDockMode();\n    const isVertical = initialOrientation === DrawerOrientation.VERTICAL;\n    this.drawerSplitWidget = new SplitWidget(isVertical, true, 'inspector.drawer-split-view-state', 200, 200);\n    this.drawerSplitWidget.hideSidebar();\n    this.drawerSplitWidget.enableShowModeSaving();\n    this.drawerSplitWidget.show(this.element);\n\n    this.tabDelegate = new InspectorViewTabDelegate();\n\n    // Create drawer tabbed pane.\n    this.drawerTabbedLocation = ViewManager.instance().createTabbedLocation(\n        this.showDrawer.bind(this, {\n          focus: false,\n          hasTargetDrawer: true,\n        }),\n        'drawer-view', true, true);\n    const moreTabsButton = this.drawerTabbedLocation.enableMoreTabsButton();\n    moreTabsButton.setTitle(i18nString(UIStrings.moreTools));\n    this.drawerTabbedPane = this.drawerTabbedLocation.tabbedPane();\n    this.setDrawerRelatedMinimumSizes();\n    this.drawerTabbedPane.element.classList.add('drawer-tabbed-pane');\n    this.drawerTabbedPane.element.setAttribute('jslog', `${VisualLogging.drawer()}`);\n    const closeDrawerButton = new ToolbarButton(i18nString(UIStrings.closeDrawer), 'cross');\n    closeDrawerButton.element.setAttribute('jslog', `${VisualLogging.close().track({click: true})}`);\n    closeDrawerButton.addEventListener(ToolbarButton.Events.CLICK, this.closeDrawer, this);\n    this.#toggleOrientationButton = new ToolbarButton(\n        i18nString(UIStrings.toggleDrawerOrientation),\n        this.drawerSplitWidget.isVertical() ? 'dock-bottom' : 'dock-right');\n    this.#toggleOrientationButton.element.setAttribute(\n        'jslog', `${VisualLogging.toggle('toggle-drawer-orientation').track({click: true})}`);\n    this.#toggleOrientationButton.addEventListener(\n        ToolbarButton.Events.CLICK, () => this.toggleDrawerOrientation(), this);\n    this.drawerTabbedPane.addEventListener(\n        TabbedPaneEvents.TabSelected,\n        (event: Common.EventTarget.EventTargetEvent<EventData>) => this.tabSelected(event.data.tabId), this);\n    const selectedDrawerTab = this.drawerTabbedPane.selectedTabId;\n    if (this.drawerSplitWidget.showMode() !== ShowMode.ONLY_MAIN && selectedDrawerTab) {\n      Host.userMetrics.panelShown(selectedDrawerTab, true);\n    }\n    this.drawerTabbedPane.setTabDelegate(this.tabDelegate);\n\n    const drawerElement = this.drawerTabbedPane.element;\n    ARIAUtils.markAsComplementary(drawerElement);\n    ARIAUtils.setLabel(drawerElement, i18nString(UIStrings.drawer));\n\n    this.drawerSplitWidget.installResizer(this.drawerTabbedPane.headerElement());\n    this.drawerSplitWidget.setSidebarWidget(this.drawerTabbedPane);\n    if (Root.Runtime.hostConfig.devToolsFlexibleLayout?.verticalDrawerEnabled) {\n      this.drawerTabbedPane.rightToolbar().appendToolbarItem(this.#toggleOrientationButton);\n    }\n    this.drawerTabbedPane.rightToolbar().appendToolbarItem(closeDrawerButton);\n    this.drawerTabbedPane.headerElement().setAttribute('jslog', `${VisualLogging.toolbar('drawer').track({\n                                                         drag: true,\n                                                         keydown: 'ArrowUp|ArrowLeft|ArrowDown|ArrowRight|Enter|Space',\n                                                       })}`);\n\n    // Create main area tabbed pane.\n    this.tabbedLocation = ViewManager.instance().createTabbedLocation(\n        Host.InspectorFrontendHost.InspectorFrontendHostInstance.bringToFront.bind(\n            Host.InspectorFrontendHost.InspectorFrontendHostInstance),\n        'panel', true, true, Root.Runtime.Runtime.queryParam('panel'));\n\n    this.tabbedPane = this.tabbedLocation.tabbedPane();\n    this.tabbedPane.setMinimumSize(MIN_MAIN_PANEL_WIDTH, 0);\n    this.tabbedPane.element.classList.add('main-tabbed-pane');\n    // The 'Inspect element' and 'Device mode' buttons in the tabs toolbar takes longer to load than\n    // the tabs themselves, so a space equal to the buttons' total width is preemptively allocated\n    // to prevent to prevent a shift in the tab layout. Note that when DevTools cannot be docked,\n    // the Device mode button is not added and so the allocated space is smaller.\n    const allocatedSpace = Root.Runtime.conditions.canDock() ? '69px' : '41px';\n    this.tabbedPane.leftToolbar().style.minWidth = allocatedSpace;\n    this.tabbedPane.addEventListener(\n        TabbedPaneEvents.TabSelected,\n        (event: Common.EventTarget.EventTargetEvent<EventData>) => this.tabSelected(event.data.tabId), this);\n    const selectedTab = this.tabbedPane.selectedTabId;\n    if (selectedTab) {\n      Host.userMetrics.panelShown(selectedTab, true);\n    }\n    this.tabbedPane.setAccessibleName(i18nString(UIStrings.panels));\n    this.tabbedPane.setTabDelegate(this.tabDelegate);\n\n    const mainHeaderElement = this.tabbedPane.headerElement();\n    ARIAUtils.markAsNavigation(mainHeaderElement);\n    ARIAUtils.setLabel(mainHeaderElement, i18nString(UIStrings.mainToolbar));\n    mainHeaderElement.setAttribute('jslog', `${VisualLogging.toolbar('main').track({\n                                     drag: true,\n                                     keydown: 'ArrowUp|ArrowLeft|ArrowDown|ArrowRight|Enter|Space',\n                                   })}`);\n\n    // Store the initial selected panel for use in launch histograms\n    Host.userMetrics.setLaunchPanel(this.tabbedPane.selectedTabId);\n\n    if (Host.InspectorFrontendHost.isUnderTest()) {\n      this.tabbedPane.setAutoSelectFirstItemOnShow(false);\n    }\n    this.drawerSplitWidget.setMainWidget(this.tabbedPane);\n    this.drawerSplitWidget.setDefaultFocusedChild(this.tabbedPane);\n\n    this.keyDownBound = this.keyDown.bind(this);\n    Host.InspectorFrontendHost.InspectorFrontendHostInstance.events.addEventListener(\n        Host.InspectorFrontendHostAPI.Events.ShowPanel, showPanel.bind(this));\n\n    function showPanel(this: InspectorView, {data: panelName}: Common.EventTarget.EventTargetEvent<string>): void {\n      void this.showPanel(panelName);\n    }\n\n    if (shouldShowLocaleInfobar()) {\n      const infobar = createLocaleInfobar();\n      infobar.setParentView(this);\n      this.attachInfobar(infobar);\n    }\n    this.#resizeObserver = new ResizeObserver(this.#observedResize.bind(this));\n  }\n\n  static instance(opts: {\n    forceNew: boolean|null,\n  }|undefined = {forceNew: null}): InspectorView {\n    const {forceNew} = opts;\n    if (!inspectorViewInstance || forceNew) {\n      inspectorViewInstance = new InspectorView();\n    }\n\n    return inspectorViewInstance;\n  }\n\n  static maybeGetInspectorViewInstance(): InspectorView|null {\n    return inspectorViewInstance;\n  }\n\n  static removeInstance(): void {\n    inspectorViewInstance = null;\n  }\n\n  applyDrawerOrientationForDockSideForTest(): void {\n  }\n\n  #applyDrawerOrientationForDockSide(): void {\n    if (!this.drawerVisible()) {\n      this.applyDrawerOrientationForDockSideForTest();\n      return;\n    }\n    const newOrientation = this.#getOrientationForDockMode();\n    this.#applyDrawerOrientation(newOrientation);\n    this.applyDrawerOrientationForDockSideForTest();\n  }\n\n  #getDockMode(): DockMode {\n    const dockSide = DockController.instance().dockSide();\n    if (dockSide === DockState.BOTTOM) {\n      return DockMode.BOTTOM;\n    }\n    if (dockSide === DockState.UNDOCKED) {\n      return DockMode.UNDOCKED;\n    }\n\n    return DockMode.SIDE;\n  }\n\n  #getOrientationForDockMode(): Omit<DrawerOrientation, DrawerOrientation.UNSET> {\n    const dockMode = this.#getDockMode();\n    const orientationSetting = this.drawerOrientationByDockSetting.get();\n\n    let orientation = orientationSetting[dockMode];\n    if (orientation === DrawerOrientation.UNSET) {\n      // Apply defaults: horizontal for side-dock, vertical for bottom-dock.\n      orientation = dockMode === DockMode.BOTTOM ? DrawerOrientation.VERTICAL : DrawerOrientation.HORIZONTAL;\n    }\n    return orientation;\n  }\n\n  #applyDrawerOrientation(orientation: Omit<DrawerOrientation, DrawerOrientation.UNSET>): void {\n    const shouldBeVertical = orientation === DrawerOrientation.VERTICAL;\n    const isVertical = this.drawerSplitWidget.isVertical();\n    if (shouldBeVertical === isVertical) {\n      return;\n    }\n\n    this.#toggleOrientationButton.setGlyph(shouldBeVertical ? 'dock-bottom' : 'dock-right');\n    this.drawerSplitWidget.setVertical(shouldBeVertical);\n    this.setDrawerRelatedMinimumSizes();\n  }\n\n  #observedResize(): void {\n    const rect = this.element.getBoundingClientRect();\n    this.element.style.setProperty('--devtools-window-left', `${rect.left}px`);\n    this.element.style.setProperty('--devtools-window-right', `${window.innerWidth - rect.right}px`);\n    this.element.style.setProperty('--devtools-window-width', `${rect.width}px`);\n    this.element.style.setProperty('--devtools-window-top', `${rect.top}px`);\n    this.element.style.setProperty('--devtools-window-bottom', `${window.innerHeight - rect.bottom}px`);\n    this.element.style.setProperty('--devtools-window-height', `${rect.height}px`);\n\n    if (Floaty.exists()) {\n      Floaty.instance().setDevToolsRect(rect);\n    }\n  }\n\n  override wasShown(): void {\n    super.wasShown();\n    this.#resizeObserver.observe(this.element);\n    this.#observedResize();\n    this.element.ownerDocument.addEventListener('keydown', this.keyDownBound, false);\n    DockController.instance().addEventListener(\n        DockControllerEvents.DOCK_SIDE_CHANGED, this.#applyDrawerOrientationForDockSide, this);\n    this.#applyDrawerOrientationForDockSide();\n\n    if (GreenDev.Prototypes.instance().isEnabled('inDevToolsFloaty')) {\n      Floaty.instance({\n        forceNew: true,\n        document: this.element.ownerDocument,\n      });\n    }\n  }\n\n  override willHide(): void {\n    super.willHide();\n    this.#resizeObserver.unobserve(this.element);\n    this.element.ownerDocument.removeEventListener('keydown', this.keyDownBound, false);\n    DockController.instance().removeEventListener(\n        DockControllerEvents.DOCK_SIDE_CHANGED, this.#applyDrawerOrientationForDockSide, this);\n  }\n\n  resolveLocation(locationName: string): ViewLocation|null {\n    if (locationName === 'drawer-view') {\n      return this.drawerTabbedLocation;\n    }\n    if (locationName === 'panel') {\n      return this.tabbedLocation;\n    }\n    return null;\n  }\n\n  async createToolbars(): Promise<void> {\n    await this.tabbedPane.leftToolbar().appendItemsAtLocation('main-toolbar-left');\n    await this.tabbedPane.rightToolbar().appendItemsAtLocation('main-toolbar-right');\n  }\n\n  addPanel(view: View): void {\n    this.tabbedLocation.appendView(view);\n  }\n\n  hasPanel(panelName: string): boolean {\n    return this.tabbedPane.hasTab(panelName);\n  }\n\n  async panel(panelName: string): Promise<Panel> {\n    const view = ViewManager.instance().view(panelName);\n    if (!view) {\n      throw new Error(`Expected view for panel '${panelName}'`);\n    }\n    return await (view.widget() as Promise<Panel>);\n  }\n\n  onSuspendStateChanged(allTargetsSuspended: boolean): void {\n    this.currentPanelLocked = allTargetsSuspended;\n    this.tabbedPane.setCurrentTabLocked(this.currentPanelLocked);\n    this.tabbedPane.leftToolbar().setEnabled(!this.currentPanelLocked);\n    this.tabbedPane.rightToolbar().setEnabled(!this.currentPanelLocked);\n  }\n\n  canSelectPanel(panelName: string): boolean {\n    return !this.currentPanelLocked || this.tabbedPane.selectedTabId === panelName;\n  }\n\n  async showPanel(panelName: string): Promise<void> {\n    await ViewManager.instance().showView(panelName);\n  }\n\n  setPanelWarnings(tabId: string, warnings: string[]): void {\n    // Find the tabbed location where the panel lives\n    const tabbedPane = this.getTabbedPaneForTabId(tabId);\n    if (tabbedPane) {\n      let icon: Icon|null = null;\n      if (warnings.length !== 0) {\n        const warning = warnings.length === 1 ? warnings[0] : 'Â· ' + warnings.join('\\nÂ· ');\n        icon = createIcon('warning-filled', 'small');\n        icon.classList.add('warning');\n        Tooltip.install(icon, warning);\n      }\n      tabbedPane.setTrailingTabIcon(tabId, icon);\n    }\n  }\n\n  private getTabbedPaneForTabId(tabId: string): TabbedPane|null {\n    // Tab exists in the main panel\n    if (this.tabbedPane.hasTab(tabId)) {\n      return this.tabbedPane;\n    }\n\n    // Tab exists in the drawer\n    if (this.drawerTabbedPane.hasTab(tabId)) {\n      return this.drawerTabbedPane;\n    }\n\n    // Tab is not open\n    return null;\n  }\n\n  currentPanelDeprecated(): Widget|null {\n    return (ViewManager.instance().materializedWidget(this.tabbedPane.selectedTabId || ''));\n  }\n\n  showDrawer({focus, hasTargetDrawer}: {focus: boolean, hasTargetDrawer: boolean}): void {\n    if (this.drawerTabbedPane.isShowing()) {\n      return;\n    }\n    // Only auto-select the first drawer (console) when no drawer is chosen specifically.\n    this.drawerTabbedPane.setAutoSelectFirstItemOnShow(!hasTargetDrawer);\n    this.drawerSplitWidget.showBoth();\n    if (focus) {\n      this.focusRestorer = new WidgetFocusRestorer(this.drawerTabbedPane);\n    } else {\n      this.focusRestorer = null;\n    }\n    this.#applyDrawerOrientationForDockSide();\n    ARIAUtils.LiveAnnouncer.alert(i18nString(UIStrings.drawerShown));\n  }\n\n  drawerVisible(): boolean {\n    return this.drawerTabbedPane.isShowing();\n  }\n\n  closeDrawer(): void {\n    if (!this.drawerTabbedPane.isShowing()) {\n      return;\n    }\n    if (this.focusRestorer) {\n      this.focusRestorer.restore();\n    }\n    this.drawerSplitWidget.hideSidebar(true);\n\n    ARIAUtils.LiveAnnouncer.alert(i18nString(UIStrings.drawerHidden));\n  }\n\n  toggleDrawerOrientation({force}: {force?: Omit<DrawerOrientation, DrawerOrientation.UNSET>} = {}): void {\n    if (!this.drawerTabbedPane.isShowing()) {\n      return;\n    }\n\n    const dockMode = this.#getDockMode();\n    const currentSettings = this.drawerOrientationByDockSetting.get();\n\n    let newOrientation: Omit<DrawerOrientation, DrawerOrientation.UNSET>;\n    if (force) {\n      newOrientation = force;\n    } else {\n      const currentOrientation = this.#getOrientationForDockMode();\n      newOrientation =\n          currentOrientation === DrawerOrientation.VERTICAL ? DrawerOrientation.HORIZONTAL : DrawerOrientation.VERTICAL;\n    }\n\n    currentSettings[dockMode] = newOrientation as DrawerOrientation;\n    this.drawerOrientationByDockSetting.set(currentSettings);\n\n    this.#applyDrawerOrientation(newOrientation);\n  }\n\n  isUserExplicitlyUpdatedDrawerOrientation(): boolean {\n    const orientationSetting = this.drawerOrientationByDockSetting.get();\n    const dockMode = this.#getDockMode();\n    return orientationSetting[dockMode] !== DrawerOrientation.UNSET;\n  }\n\n  setDrawerRelatedMinimumSizes(): void {\n    const drawerIsVertical = this.drawerSplitWidget.isVertical();\n    if (drawerIsVertical) {\n      // Set minimum size when the drawer is vertical to ensure the buttons will always be\n      // visible during resizing.\n      this.drawerTabbedPane.setMinimumSize(MIN_VERTICAL_DRAWER_WIDTH, 27);\n      this.setMinimumSize(MIN_INSPECTOR_WIDTH_VERTICAL_DRAWER, MIN_INSPECTOR_HEIGHT);\n    } else {\n      this.drawerTabbedPane.setMinimumSize(0, 27);\n      this.setMinimumSize(MIN_INSPECTOR_WIDTH_HORIZONTAL_DRAWER, MIN_INSPECTOR_HEIGHT);\n    }\n  }\n\n  setDrawerMinimized(minimized: boolean): void {\n    this.drawerSplitWidget.setSidebarMinimized(minimized);\n    this.drawerSplitWidget.setResizable(!minimized);\n  }\n\n  drawerSize(): number {\n    return this.drawerSplitWidget.sidebarSize();\n  }\n\n  setDrawerSize(size: number): void {\n    this.drawerSplitWidget.setSidebarSize(size);\n  }\n\n  totalSize(): number {\n    return this.drawerSplitWidget.totalSize();\n  }\n\n  isDrawerMinimized(): boolean {\n    return this.drawerSplitWidget.isSidebarMinimized();\n  }\n\n  isDrawerOrientationVertical(): boolean {\n    return this.drawerSplitWidget.isVertical();\n  }\n\n  private keyDown(event: KeyboardEvent): void {\n    if (!KeyboardShortcut.eventHasCtrlEquivalentKey(event) || event.altKey || event.shiftKey) {\n      return;\n    }\n\n    // Ctrl/Cmd + 1-9 should show corresponding panel.\n    const panelShortcutEnabled = Common.Settings.moduleSetting('shortcut-panel-switch').get();\n    if (panelShortcutEnabled) {\n      let panelIndex = -1;\n      if (event.keyCode > 0x30 && event.keyCode < 0x3A) {\n        panelIndex = event.keyCode - 0x31;\n      } else if (\n          event.keyCode > 0x60 && event.keyCode < 0x6A && event.location === KeyboardEvent.DOM_KEY_LOCATION_NUMPAD) {\n        panelIndex = event.keyCode - 0x61;\n      }\n      if (panelIndex !== -1) {\n        const panelName = this.tabbedPane.tabIds()[panelIndex];\n        if (panelName) {\n          if (!Dialog.hasInstance() && !this.currentPanelLocked) {\n            void this.showPanel(panelName);\n            void VisualLogging.logKeyDown(null, event, `panel-by-index-${panelName}`);\n          }\n          event.consume(true);\n        }\n      }\n    }\n  }\n\n  override onResize(): void {\n    GlassPane.containerMoved(this.element);\n  }\n\n  topResizerElement(): Element {\n    return this.tabbedPane.headerElement();\n  }\n\n  toolbarItemResized(): void {\n    this.tabbedPane.headerResized();\n  }\n\n  private tabSelected(tabId: string): void {\n    Host.userMetrics.panelShown(tabId);\n  }\n\n  setOwnerSplit(splitWidget: SplitWidget): void {\n    this.ownerSplitWidget = splitWidget;\n  }\n\n  ownerSplit(): SplitWidget|null {\n    return this.ownerSplitWidget || null;\n  }\n\n  minimize(): void {\n    if (this.ownerSplitWidget) {\n      this.ownerSplitWidget.setSidebarMinimized(true);\n    }\n  }\n\n  restore(): void {\n    if (this.ownerSplitWidget) {\n      this.ownerSplitWidget.setSidebarMinimized(false);\n    }\n  }\n\n  displayDebuggedTabReloadRequiredWarning(message: string): void {\n    if (!this.reloadRequiredInfobar) {\n      const infobar = new Infobar(\n          InfobarType.INFO, message,\n          [\n            {\n              text: i18nString(UIStrings.reloadDebuggedTab),\n              delegate: () => {\n                reloadDebuggedTab();\n                this.removeDebuggedTabReloadRequiredWarning();\n              },\n              dismiss: false,\n              buttonVariant: Buttons.Button.Variant.PRIMARY,\n              jslogContext: 'main.debug-reload',\n            },\n          ],\n          undefined, 'reload-required');\n      infobar.setParentView(this);\n      this.attachInfobar(infobar);\n      this.reloadRequiredInfobar = infobar;\n      infobar.setCloseCallback(() => {\n        delete this.reloadRequiredInfobar;\n      });\n\n      SDK.TargetManager.TargetManager.instance().addModelListener(\n          SDK.ResourceTreeModel.ResourceTreeModel, SDK.ResourceTreeModel.Events.PrimaryPageChanged,\n          this.removeDebuggedTabReloadRequiredWarning, this);\n    }\n  }\n\n  removeDebuggedTabReloadRequiredWarning(): void {\n    if (this.reloadRequiredInfobar) {\n      this.reloadRequiredInfobar.dispose();\n      SDK.TargetManager.TargetManager.instance().removeModelListener(\n          SDK.ResourceTreeModel.ResourceTreeModel, SDK.ResourceTreeModel.Events.PrimaryPageChanged,\n          this.removeDebuggedTabReloadRequiredWarning, this);\n    }\n  }\n\n  displayReloadRequiredWarning(message: string): void {\n    if (!this.reloadRequiredInfobar) {\n      const infobar = new Infobar(\n          InfobarType.INFO, message,\n          [\n            {\n              text: i18nString(UIStrings.reloadDevtools),\n              delegate: () => reloadDevTools(),\n              dismiss: false,\n              buttonVariant: Buttons.Button.Variant.PRIMARY,\n              jslogContext: 'main.debug-reload',\n            },\n          ],\n          undefined, 'reload-required');\n      infobar.setParentView(this);\n      this.attachInfobar(infobar);\n      this.reloadRequiredInfobar = infobar;\n      infobar.setCloseCallback(() => {\n        delete this.reloadRequiredInfobar;\n      });\n    }\n  }\n\n  displaySelectOverrideFolderInfobar(callback: () => void): void {\n    if (!this.#selectOverrideFolderInfobar) {\n      const infobar = new Infobar(\n          InfobarType.INFO, i18nString(UIStrings.selectOverrideFolder),\n          [\n            {\n              text: i18nString(UIStrings.selectFolder),\n              delegate: () => callback(),\n              dismiss: true,\n              buttonVariant: Buttons.Button.Variant.TONAL,\n              jslogContext: 'select-folder',\n            },\n          ],\n          undefined, 'select-override-folder');\n      infobar.setParentView(this);\n      this.attachInfobar(infobar);\n      this.#selectOverrideFolderInfobar = infobar;\n      infobar.setCloseCallback(() => {\n        this.#selectOverrideFolderInfobar = undefined;\n      });\n    }\n  }\n\n  private createInfoBarDiv(): void {\n    if (!this.infoBarDiv) {\n      this.infoBarDiv = document.createElement('div');\n      this.infoBarDiv.classList.add('flex-none');\n      this.contentElement.insertBefore(this.infoBarDiv, this.contentElement.firstChild);\n    }\n  }\n\n  private attachInfobar(infobar: Infobar): void {\n    this.createInfoBarDiv();\n    this.infoBarDiv?.appendChild(infobar.element);\n  }\n}\n\nfunction getDisableLocaleInfoBarSetting(): Common.Settings.Setting<boolean> {\n  return Common.Settings.Settings.instance().createSetting('disable-locale-info-bar', false);\n}\n\nfunction shouldShowLocaleInfobar(): boolean {\n  if (getDisableLocaleInfoBarSetting().get()) {\n    return false;\n  }\n\n  // If the language setting is different than 'en-US', the user already\n  // used the setting before, so don't show the toolbar.\n  const languageSettingValue = Common.Settings.Settings.instance().moduleSetting<string>('language').get();\n  if (languageSettingValue !== 'en-US') {\n    return false;\n  }\n\n  // When the selected DevTools locale differs from the locale of the browser UI, we want to notify\n  // users only once, that they have the opportunity to adjust DevTools locale to match Chrome's locale.\n  return !i18n.DevToolsLocale.localeLanguagesMatch(navigator.language, languageSettingValue) &&\n      i18n.DevToolsLocale.DevToolsLocale.instance().languageIsSupportedByDevTools(navigator.language);\n}\n\nfunction createLocaleInfobar(): Infobar {\n  const devtoolsLocale = i18n.DevToolsLocale.DevToolsLocale.instance();\n  const closestSupportedLocale = devtoolsLocale.lookupClosestDevToolsLocale(navigator.language);\n  const locale = new Intl.Locale(closestSupportedLocale);\n  const closestSupportedLanguageInCurrentLocale =\n      new Intl.DisplayNames([devtoolsLocale.locale], {type: 'language'}).of(locale.language || 'en') || 'English';\n\n  const languageSetting = Common.Settings.Settings.instance().moduleSetting<string>('language');\n  return new Infobar(\n      InfobarType.INFO, i18nString(UIStrings.devToolsLanguageMissmatch, {PH1: closestSupportedLanguageInCurrentLocale}),\n      [\n        {\n          text: i18nString(UIStrings.setToBrowserLanguage),\n          delegate: () => {\n            languageSetting.set('browserLanguage');\n            getDisableLocaleInfoBarSetting().set(true);\n            reloadDevTools();\n          },\n          dismiss: true,\n          jslogContext: 'set-to-browser-language',\n        },\n        {\n          text: i18nString(UIStrings.setToSpecificLanguage, {PH1: closestSupportedLanguageInCurrentLocale}),\n          delegate: () => {\n            languageSetting.set(closestSupportedLocale);\n            getDisableLocaleInfoBarSetting().set(true);\n            reloadDevTools();\n          },\n          dismiss: true,\n          jslogContext: 'set-to-specific-language',\n        },\n      ],\n      getDisableLocaleInfoBarSetting(), 'language-mismatch');\n}\n\nfunction reloadDevTools(): void {\n  if (DockController.instance().canDock() && DockController.instance().dockSide() === DockState.UNDOCKED) {\n    Host.InspectorFrontendHost.InspectorFrontendHostInstance.setIsDocked(true, function() {});\n  }\n  Host.InspectorFrontendHost.InspectorFrontendHostInstance.reattach(() => window.location.reload());\n}\n\nfunction reloadDebuggedTab(): void {\n  void ActionRegistry.instance().getAction('inspector-main.reload').execute();\n}\n\nexport class ActionDelegate implements ActionDelegateInterface {\n  handleAction(_context: Context, actionId: string): boolean {\n    switch (actionId) {\n      case 'main.toggle-drawer':\n        if (InspectorView.instance().drawerVisible()) {\n          InspectorView.instance().closeDrawer();\n        } else {\n          InspectorView.instance().showDrawer({\n            focus: true,\n            hasTargetDrawer: false,\n          });\n        }\n        return true;\n      case 'main.toggle-drawer-orientation':\n        InspectorView.instance().toggleDrawerOrientation();\n        return true;\n      case 'main.next-tab':\n        InspectorView.instance().tabbedPane.selectNextTab();\n        InspectorView.instance().tabbedPane.focus();\n        return true;\n      case 'main.previous-tab':\n        InspectorView.instance().tabbedPane.selectPrevTab();\n        InspectorView.instance().tabbedPane.focus();\n        return true;\n    }\n    return false;\n  }\n}\n\nexport class InspectorViewTabDelegate implements TabbedPaneTabDelegate {\n  closeTabs(tabbedPane: TabbedPane, ids: string[]): void {\n    tabbedPane.closeTabs(ids, true);\n  }\n\n  moveToDrawer(tabId: string): void {\n    Host.userMetrics.actionTaken(Host.UserMetrics.Action.TabMovedToDrawer);\n    ViewManager.instance().moveView(tabId, 'drawer-view');\n  }\n\n  moveToMainTabBar(tabId: string): void {\n    Host.userMetrics.actionTaken(Host.UserMetrics.Action.TabMovedToMainPanel);\n    ViewManager.instance().moveView(tabId, 'panel');\n  }\n\n  onContextMenu(tabId: string, contextMenu: ContextMenu): void {\n    // Special case for console, we don't show the movable context panel for this two tabs\n    if (tabId === 'console' || tabId === 'console-view') {\n      return;\n    }\n\n    const locationName = ViewManager.instance().locationNameForViewId(tabId);\n    if (locationName === 'drawer-view') {\n      contextMenu.defaultSection().appendItem(\n          i18nString(UIStrings.moveToMainTabBar), this.moveToMainTabBar.bind(this, tabId),\n          {jslogContext: 'move-to-top'});\n    } else {\n      contextMenu.defaultSection().appendItem(\n          i18nString(UIStrings.moveToDrawer), this.moveToDrawer.bind(this, tabId), {jslogContext: 'move-to-bottom'});\n    }\n  }\n}\n", "// Copyright 2012 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as Common from '../../core/common/common.js';\nimport * as Host from '../../core/host/host.js';\nimport * as i18n from '../../core/i18n/i18n.js';\nimport * as VisualLogging from '../../ui/visual_logging/visual_logging.js';\n\nimport type {ActionDelegate} from './ActionRegistration.js';\nimport {LiveAnnouncer} from './ARIAUtils.js';\nimport type {Context} from './Context.js';\nimport {type Provider, ToolbarButton, type ToolbarItem} from './Toolbar.js';\n\nconst UIStrings = {\n  /**\n   * @description Text to close something\n   */\n  close: 'Close',\n  /**\n   * @description Text announced when the DevTools are undocked\n   */\n  devtoolsUndocked: 'DevTools is undocked',\n  /**\n   * @description Text announced when the DevTools are docked to the left, right, or bottom of the browser tab\n   * @example {bottom} PH1\n   */\n  devToolsDockedTo: 'DevTools is docked to {PH1}',\n} as const;\nconst str_ = i18n.i18n.registerUIStrings('ui/legacy/DockController.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\nlet dockControllerInstance: DockController;\n\nexport class DockController extends Common.ObjectWrapper.ObjectWrapper<EventTypes> {\n  #canDock: boolean;\n  readonly closeButton: ToolbarButton;\n  private readonly currentDockStateSetting: Common.Settings.Setting<DockState>;\n  private readonly lastDockStateSetting: Common.Settings.Setting<DockState>;\n  #dockSide: DockState|undefined = undefined;\n\n  constructor(canDock: boolean) {\n    super();\n    this.#canDock = canDock;\n\n    this.closeButton = new ToolbarButton(i18nString(UIStrings.close), 'cross');\n    this.closeButton.element.setAttribute('jslog', `${VisualLogging.close().track({click: true})}`);\n    this.closeButton.element.classList.add('close-devtools');\n    this.closeButton.addEventListener(\n        ToolbarButton.Events.CLICK,\n        Host.InspectorFrontendHost.InspectorFrontendHostInstance.closeWindow.bind(\n            Host.InspectorFrontendHost.InspectorFrontendHostInstance));\n\n    this.currentDockStateSetting = Common.Settings.Settings.instance().moduleSetting('currentDockState');\n    this.lastDockStateSetting = Common.Settings.Settings.instance().createSetting('last-dock-state', DockState.BOTTOM);\n\n    if (!canDock) {\n      this.#dockSide = DockState.UNDOCKED;\n      this.closeButton.setVisible(false);\n      return;\n    }\n\n    this.currentDockStateSetting.addChangeListener(this.dockSideChanged, this);\n    if (states.indexOf(this.currentDockStateSetting.get()) === -1) {\n      this.currentDockStateSetting.set(DockState.RIGHT);\n    }\n    if (states.indexOf(this.lastDockStateSetting.get()) === -1) {\n      this.currentDockStateSetting.set(DockState.BOTTOM);\n    }\n  }\n\n  static instance(opts: {\n    forceNew: boolean|null,\n    canDock: boolean,\n  } = {forceNew: null, canDock: false}): DockController {\n    const {forceNew, canDock} = opts;\n    if (!dockControllerInstance || forceNew) {\n      dockControllerInstance = new DockController(canDock);\n    }\n\n    return dockControllerInstance;\n  }\n\n  initialize(): void {\n    if (!this.#canDock) {\n      return;\n    }\n\n    this.dockSideChanged();\n  }\n\n  private dockSideChanged(): void {\n    this.setDockSide(this.currentDockStateSetting.get());\n  }\n\n  dockSide(): DockState|undefined {\n    return this.#dockSide;\n  }\n\n  /**\n   * Whether the DevTools can be docked, used to determine if we show docking UI.\n   * Set via `Root.Runtime.Runtime.queryParam('can_dock')`. See https://cs.chromium.org/can_dock+f:window\n   *\n   * Shouldn't be used as a heuristic for target connection state.\n   */\n  canDock(): boolean {\n    return this.#canDock;\n  }\n\n  isVertical(): boolean {\n    return this.#dockSide === DockState.RIGHT || this.#dockSide === DockState.LEFT;\n  }\n\n  setDockSide(dockSide: DockState): void {\n    if (states.indexOf(dockSide) === -1) {\n      // If the side is invalid, default to a valid one\n      dockSide = states[0];\n    }\n\n    if (this.#dockSide === dockSide) {\n      return;\n    }\n\n    if (this.#dockSide !== undefined) {\n      document.body.classList.remove(this.#dockSide);\n    }\n    document.body.classList.add(dockSide);\n\n    if (this.#dockSide) {\n      this.lastDockStateSetting.set(this.#dockSide);\n    }\n\n    const eventData = {from: this.#dockSide, to: dockSide};\n    this.dispatchEventToListeners(Events.BEFORE_DOCK_SIDE_CHANGED, eventData);\n    console.timeStamp('DockController.setIsDocked');\n    this.#dockSide = dockSide;\n    this.currentDockStateSetting.set(dockSide);\n    Host.InspectorFrontendHost.InspectorFrontendHostInstance.setIsDocked(\n        dockSide !== DockState.UNDOCKED, this.setIsDockedResponse.bind(this, eventData));\n    this.closeButton.setVisible(this.#dockSide !== DockState.UNDOCKED);\n    this.dispatchEventToListeners(Events.DOCK_SIDE_CHANGED, eventData);\n  }\n\n  private setIsDockedResponse(eventData: ChangeEvent): void {\n    this.dispatchEventToListeners(Events.AFTER_DOCK_SIDE_CHANGED, eventData);\n    this.announceDockLocation();\n  }\n\n  toggleDockSide(): void {\n    if (this.lastDockStateSetting.get() === this.currentDockStateSetting.get()) {\n      const index = states.indexOf(this.currentDockStateSetting.get()) || 0;\n      this.lastDockStateSetting.set(states[(index + 1) % states.length]);\n    }\n    this.setDockSide(this.lastDockStateSetting.get());\n  }\n\n  announceDockLocation(): void {\n    if (this.#dockSide === DockState.UNDOCKED) {\n      LiveAnnouncer.alert(i18nString(UIStrings.devtoolsUndocked));\n    } else {\n      LiveAnnouncer.alert(i18nString(UIStrings.devToolsDockedTo, {PH1: this.#dockSide || ''}));\n    }\n  }\n}\n\nexport const enum DockState {\n  BOTTOM = 'bottom',\n  RIGHT = 'right',\n  LEFT = 'left',\n  UNDOCKED = 'undocked',\n}\n\nconst states = [DockState.RIGHT, DockState.BOTTOM, DockState.LEFT, DockState.UNDOCKED];\n\n// Use BeforeDockSideChanged to do something before all the UI bits are updated,\n// DockSideChanged to update UI, and AfterDockSideChanged to perform actions\n// after frontend is docked/undocked in the browser.\n\nexport const enum Events {\n  BEFORE_DOCK_SIDE_CHANGED = 'BeforeDockSideChanged',\n  DOCK_SIDE_CHANGED = 'DockSideChanged',\n  AFTER_DOCK_SIDE_CHANGED = 'AfterDockSideChanged',\n}\n\nexport interface ChangeEvent {\n  from: DockState|undefined;\n  to: DockState;\n}\n\nexport interface EventTypes {\n  [Events.BEFORE_DOCK_SIDE_CHANGED]: ChangeEvent;\n  [Events.DOCK_SIDE_CHANGED]: ChangeEvent;\n  [Events.AFTER_DOCK_SIDE_CHANGED]: ChangeEvent;\n}\n\nexport class ToggleDockActionDelegate implements ActionDelegate {\n  handleAction(_context: Context, _actionId: string): boolean {\n    DockController.instance().toggleDockSide();\n    return true;\n  }\n}\n\nlet closeButtonProviderInstance: CloseButtonProvider;\n\nexport class CloseButtonProvider implements Provider {\n  static instance(opts: {\n    forceNew: boolean|null,\n  } = {forceNew: null}): CloseButtonProvider {\n    const {forceNew} = opts;\n    if (!closeButtonProviderInstance || forceNew) {\n      closeButtonProviderInstance = new CloseButtonProvider();\n    }\n\n    return closeButtonProviderInstance;\n  }\n\n  item(): ToolbarItem|null {\n    return DockController.instance().closeButton;\n  }\n}\n", "// Copyright 2025 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as i18n from '../../core/i18n/i18n.js';\nimport * as Platform from '../../core/platform/platform.js';\nimport * as SDK from '../../core/sdk/sdk.js';\nimport type * as Protocol from '../../generated/protocol.js';\nimport * as GreenDev from '../../models/greendev/greendev.js';\nimport * as Logs from '../../models/logs/logs.js';\nimport * as Trace from '../../models/trace/trace.js';\nimport * as Buttons from '../components/buttons/buttons.js';\nimport {html, render, type TemplateResult} from '../lit/lit.js';\n\nimport {Context} from './Context.js';\nimport floatyStyles from './floaty.css.js';\nimport {Widget} from './Widget.js';\n\nlet instance: Floaty|null = null;\n\nexport const enum FloatyContextTypes {\n  ELEMENT_NODE_ID = 'ELEMENT_NODE_ID',\n  NETWORK_REQUEST = 'NETWORK_REQUEST',\n  PERFORMANCE_EVENT = 'PERFORMANCE_EVENT',\n  PERFORMANCE_INSIGHT = 'PERFORMANCE_INSIGHT'\n}\n\nexport type FloatyContextSelection = SDK.DOMModel.DOMNode|SDK.NetworkRequest.NetworkRequest|\n                                     {event: Trace.Types.Events.Event, traceStartTime: Trace.Types.Timing.Micro}|\n                                     {insight: Trace.Insights.Types.InsightModel, trace: Trace.TraceModel.ParsedTrace};\n\nconst enum State {\n  READONLY = 'readonly',\n  INSPECT_MODE = 'inspect',\n}\n\nexport class FloatyFlavor {\n  selectedContexts: FloatyContextSelection[] = [];\n\n  constructor(contexts: Set<FloatyContextSelection>) {\n    this.selectedContexts = Array.from(contexts);\n  }\n}\n\nexport class Floaty {\n  static defaultVisibility = false;\n\n  #container: HTMLElement;\n  #floaty: FloatyUI;\n\n  #boundKeyDown = this.#onKeyShortcut.bind(this);\n\n  static exists(): boolean {\n    return instance !== null;\n  }\n\n  static instance(opts: {\n    forceNew: boolean|null,\n    document: Document|null,\n  } = {forceNew: null, document: null}): Floaty {\n    if (instance) {\n      return instance;\n    }\n    if (!opts.document) {\n      throw new Error('document required');\n    }\n    instance = new Floaty(opts.document);\n    return instance;\n  }\n\n  private constructor(document: Document) {\n    // eslint-disable-next-line @devtools/no-imperative-dom-api\n    this.#container = document.createElement('div');\n    this.#container.classList.add('floaty-container');\n    this.#floaty = new FloatyUI();\n    this.#floaty.markAsRoot();\n    this.#insertIntoDOM();\n  }\n\n  #onKeyShortcut(e: KeyboardEvent): void {\n    const origin = e.composedPath().at(0);\n    // If the user was typing into an input field, don't make it trigger the Floaty.\n    if (origin && (origin instanceof HTMLTextAreaElement || origin instanceof HTMLInputElement)) {\n      return;\n    }\n    if (e.key === 'f') {\n      this.open();\n    }\n  }\n\n  #insertIntoDOM(): void {\n    if (GreenDev.Prototypes.instance().isEnabled('inDevToolsFloaty')) {\n      this.#floaty.show(this.#container);\n      document.body.appendChild(this.#container);\n      document.body.addEventListener('keydown', this.#boundKeyDown);\n    }\n  }\n\n  setDevToolsRect(rect: DOMRect): void {\n    this.#floaty.devtoolsRect = rect;\n  }\n\n  open(): void {\n    this.#floaty.open = true;\n  }\n\n  registerClick(input: Readonly<FloatyClickInput>): void {\n    if (this.#floaty.state !== State.INSPECT_MODE) {\n      return;\n    }\n\n    const type = input.type;  // Switching on type, rather than input.type, means TS narrows it properly.\n    switch (type) {\n      case FloatyContextTypes.ELEMENT_NODE_ID: {\n        const mainTarget = SDK.TargetManager.TargetManager.instance().primaryPageTarget();\n        if (!mainTarget) {\n          return;\n        }\n        const domModel = mainTarget.model(SDK.DOMModel.DOMModel);\n        const node = domModel?.nodeForId(input.data.nodeId);\n        if (node) {\n          this.#floaty.addSelectedContext(node);\n        }\n        break;\n      }\n      case FloatyContextTypes.NETWORK_REQUEST: {\n        const networkRequests = Logs.NetworkLog.NetworkLog.instance().requestsForId(input.data.requestId);\n        for (const req of networkRequests) {\n          this.#floaty.addSelectedContext(req);\n        }\n        break;\n      }\n      case FloatyContextTypes.PERFORMANCE_EVENT: {\n        this.#floaty.addSelectedContext(input.data);\n        break;\n      }\n      case FloatyContextTypes.PERFORMANCE_INSIGHT: {\n        this.#floaty.addSelectedContext(input.data);\n        break;\n      }\n      default:\n        Platform.assertNever(type, 'Unsupported Floaty Context type');\n    }\n  }\n\n  inInspectMode(): boolean {\n    return this.#floaty.state === State.INSPECT_MODE;\n  }\n\n  deleteContext(context: FloatyContextSelection): void {\n    this.#floaty.removeSelectedContext(context);\n  }\n}\n\ntype FloatyClickInput = {\n  type: FloatyContextTypes.ELEMENT_NODE_ID,\n  data: {nodeId: Protocol.DOM.NodeId},\n}|{\n  type: FloatyContextTypes.NETWORK_REQUEST,\n  data: {requestId: string},\n}|{\n  type: FloatyContextTypes.PERFORMANCE_EVENT,\n  data: {event: Trace.Types.Events.Event, traceStartTime: Trace.Types.Timing.Micro},\n}|{\n  type: FloatyContextTypes.PERFORMANCE_INSIGHT,\n  data: {\n    insight: Trace.Insights.Types.InsightModel,\n    trace: Trace.TraceModel.ParsedTrace,\n  },\n};\n\nexport function onFloatyOpen(): void {\n  if (!GreenDev.Prototypes.instance().isEnabled('inDevToolsFloaty')) {\n    return;\n  }\n  Floaty.instance().open();\n}\n\nexport function onFloatyContextDelete(context: FloatyContextSelection): void {\n  if (!GreenDev.Prototypes.instance().isEnabled('inDevToolsFloaty')) {\n    return;\n  }\n  Floaty.instance().deleteContext(context);\n}\n\n/**\n * Registers a click to the Floaty.\n * @returns true if the element was added to the floaty context, and false\n * otherwise. This lets callers determine if this should override the default\n * click behaviour.\n */\nexport function onFloatyClick(input: FloatyClickInput): boolean {\n  if (!GreenDev.Prototypes.instance().isEnabled('inDevToolsFloaty')) {\n    return false;\n  }\n  const floaty = Floaty.instance();\n  if (floaty.inInspectMode()) {\n    floaty.registerClick(input);\n    return true;\n  }\n  return false;\n}\n\nexport class FloatyUI extends Widget {\n  #view: (input: ViewInput, output: null, target: HTMLElement) => void;\n  #dialog: HTMLDialogElement|null = null;\n  #initialMouseX = 0;\n  #initialMouseY = 0;\n  #initialDialogLeft = 0;\n  #initialDialogTop = 0;\n  #devtoolsRect: DOMRect|null = null;\n  #selectedContexts = new Set<FloatyContextSelection>();\n  #open = Floaty.defaultVisibility;\n  #state = State.READONLY;\n\n  constructor(element?: HTMLElement, view = VIEW) {\n    super(element);\n    this.#view = view;\n  }\n\n  get devtoolsRect(): DOMRect|null {\n    return this.#devtoolsRect;\n  }\n\n  get state(): State {\n    return this.#state;\n  }\n\n  set state(x: State) {\n    this.#state = x;\n    this.requestUpdate();\n  }\n\n  set devtoolsRect(rect: DOMRect) {\n    this.#devtoolsRect = rect;\n    this.#repositionWithNewRect(rect);\n    this.requestUpdate();\n  }\n\n  addSelectedContext(context: FloatyContextSelection): void {\n    if (this.#selectedContexts.has(context)) {\n      return;\n    }\n\n    this.#selectedContexts.add(context);\n    Context.instance().setFlavor(FloatyFlavor, new FloatyFlavor(this.#selectedContexts));\n    this.requestUpdate();\n  }\n\n  removeSelectedContext(context: FloatyContextSelection): void {\n    this.#selectedContexts.delete(context);\n    this.#state = State.READONLY;\n    Context.instance().setFlavor(FloatyFlavor, new FloatyFlavor(this.#selectedContexts));\n    this.requestUpdate();\n  }\n\n  get open(): boolean {\n    return this.#open;\n  }\n\n  set open(open: boolean) {\n    this.#open = open;\n    this.requestUpdate();\n  }\n\n  override wasShown(): void {\n    super.wasShown();\n    this.requestUpdate();\n  }\n\n  #repositionWithNewRect(rect: DOMRect): void {\n    if (!this.#dialog) {\n      return;\n    }\n    const computedStyle = window.getComputedStyle(this.#dialog);\n    const currentLeft = parseInt(computedStyle.left, 10);\n    const currentTop = parseInt(computedStyle.top, 10);\n    this.#dialog.style.left = `${Math.max(currentLeft, rect.left)}px`;\n    this.#dialog.style.top = `${Math.max(currentTop, rect.top)}px`;\n  }\n\n  #onInspectClick(): void {\n    if (this.#state === State.INSPECT_MODE) {\n      this.#state = State.READONLY;\n    } else {\n      this.#state = State.INSPECT_MODE;\n    }\n    this.requestUpdate();\n  }\n\n  #onDialogClose(e: PointerEvent): void {\n    e.preventDefault();\n    this.#open = false;\n    this.requestUpdate();\n  }\n\n  #onContextDelete(context: FloatyContextSelection): (e: MouseEvent) => void {\n    return e => {\n      e.preventDefault();\n      this.removeSelectedContext(context);\n    };\n  }\n\n  override performUpdate(): void {\n    this.#view(\n        {\n          open: this.open,\n          onDragStart: this.#onDragStart,\n          selectedContexts: this.#selectedContexts,\n          state: this.#state,\n          onInspectClick: this.#onInspectClick.bind(this),\n          onDialogClose: this.#onDialogClose.bind(this),\n          onContextDelete: this.#onContextDelete.bind(this)\n        },\n        null, this.contentElement);\n    this.#dialog = this.contentElement.querySelector('dialog');\n  }\n\n  #onDragStart = (event: MouseEvent): void => {\n    if (!this.#dialog) {\n      return;\n    }\n    this.#initialMouseX = event.clientX;\n    this.#initialMouseY = event.clientY;\n    const computedStyle = window.getComputedStyle(this.#dialog);\n    this.#initialDialogLeft = parseInt(computedStyle.left, 10);\n    this.#initialDialogTop = parseInt(computedStyle.top, 10);\n\n    document.addEventListener('mousemove', this.#onDrag);\n    document.addEventListener('mouseup', this.#onDragEnd);\n  };\n\n  #onDrag = (event: MouseEvent): void => {\n    if (!this.#dialog) {\n      return;\n    }\n    const deltaX = event.clientX - this.#initialMouseX;\n    const deltaY = event.clientY - this.#initialMouseY;\n\n    const minLeft = this.#devtoolsRect?.left ?? 0;\n    const minTop = this.#devtoolsRect?.top ?? 0;\n    const newLeft = Math.max(minLeft, this.#initialDialogLeft + deltaX);\n    const newTop = Math.max(minTop, this.#initialDialogTop + deltaY);\n    this.#dialog.style.left = `${newLeft}px`;\n    this.#dialog.style.top = `${newTop}px`;\n  };\n\n  #onDragEnd = (): void => {\n    document.removeEventListener('mousemove', this.#onDrag);\n    document.removeEventListener('mouseup', this.#onDragEnd);\n  };\n}\n\ninterface ViewInput {\n  onDragStart: (event: MouseEvent) => void;\n  selectedContexts: ReadonlySet<FloatyContextSelection>;\n  open: boolean;\n  state: State;\n  onInspectClick: () => void;\n  onDialogClose: (e: PointerEvent) => void;\n  onContextDelete: (item: FloatyContextSelection) => (e: MouseEvent) => void;\n}\n\nconst VIEW = (input: ViewInput, _output: null, target: HTMLElement): void => {\n  const contexts = Array.from(input.selectedContexts);\n  // clang-format off\n  render(html`\n   <style>${floatyStyles}</style>\n   <dialog ?open=${input.open} @mousedown=${input.onDragStart}>\n    <header>\n      <span>DevTools context picker</span>\n      <devtools-button\n        class=\"close-button\"\n        @click=${input.onDialogClose}\n        .data=${{\n          variant: Buttons.Button.Variant.TOOLBAR,\n          iconName: 'cross',\n          title: 'Close',\n          size: Buttons.Button.Size.SMALL,\n        } as Buttons.Button.ButtonData}\n      ></devtools-button>\n    </header>\n    <section class=\"body\">\n      <section class=\"contexts\">\n      ${contexts.length === 0 ? html`\n        <span class=\"no-context\">Select items to add them to the AI agent's context.</span>\n        ` : html`\n        <ul class=\"floaty-contexts\">\n          ${contexts.map(context => {\n            return html`<li>\n            <span class=\"context-item\">\n              ${floatyContextToUI(context)}\n            </span>\n            <devtools-button\n              class=\"close-button\"\n              @click=${input.onContextDelete(context)}\n              .data=${{\n                variant: Buttons.Button.Variant.TOOLBAR,\n                iconName: 'cross',\n                title: 'Delete',\n                size: Buttons.Button.Size.SMALL,\n              } as Buttons.Button.ButtonData}\n            ></devtools-button>\n            </li>`;\n          })}\n        </ul>\n      `}\n      </section>\n      <section class=\"actions\">\n          <devtools-button title=\"Select\" @click=${input.onInspectClick}\n            .active=${input.state === State.INSPECT_MODE}\n            .variant=${Buttons.Button.Variant.TONAL} .iconName=${'select-element'}\n          >Select</devtools-button>\n        </devtools-toolbar>\n      </section>\n    </section>\n   </dialog>`,\n  target);\n  // clang-format on\n};\n\nfunction floatyContextToUI(context: FloatyContextSelection): TemplateResult {\n  if (context instanceof SDK.NetworkRequest.NetworkRequest) {\n    return html`${context.url()}`;\n  }\n  if (context instanceof SDK.DOMModel.DOMNode) {\n    return html`${context.simpleSelector()}`;\n  }\n  if ('insight' in context) {\n    return html`Insight: ${context.insight.title}`;\n  }\n  if ('event' in context && 'traceStartTime' in context) {\n    const time = Trace.Types.Timing.Micro(context.event.ts - context.traceStartTime);\n    return html`${context.event.name} @ ${i18n.TimeUtilities.formatMicroSecondsAsMillisFixed(time)}`;\n  }\n\n  Platform.assertNever(context, '');\n}\n", "// Copyright 2025 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n// IMPORTANT: this file is auto generated. Please do not edit this file.\n/* istanbul ignore file */\nexport default `/*\n * Copyright 2025 The Chromium Authors\n * Use of this source code is governed by a BSD-style license that can be\n * found in the LICENSE file.\n */\n\ndialog {\n  position: absolute;\n  top: 20px;\n  left: 20px;\n  max-width: 400px;\n  min-width: 200px;\n  min-height: 100px;\n  max-height: 400px;\n  overflow-y: auto;\n  margin: 0;\n  padding: 0;\n  box-shadow: var(--drop-shadow);\n  background: var(--sys-color-tonal-container);\n  border-radius: var(--sys-shape-corner-medium-small);\n  border: none;\n  flex-direction: column;\n\n  header {\n    padding: var(--sys-size-6);\n\n    span {\n      font: var(--sys-typescale-headline5);\n    }\n\n    display: flex;\n    align-items: flex-start;\n\n    .close-button {\n      margin-left: auto;\n    }\n  }\n\n  section.body {\n    border-radius: var(--sys-shape-corner-medium-small);\n    background: var(--sys-color-surface);\n    height: 100%;\n    padding: var(--sys-size-6);\n  }\n\n  .floaty-contexts {\n    padding: 0;\n    margin: 0;\n    display: flex;\n    flex-direction: column;\n    gap: 5px;\n\n    li {\n      overflow: hidden;\n      text-overflow: ellipsis;\n      padding: var(--sys-size-2) var(--sys-size-3);\n      border-radius: var(--sys-shape-corner-extra-small);\n      border: 1px solid var(--sys-color-tonal-outline);\n      font: var(--sys-typescale-monospace-regular);\n      display: flex;\n      align-items: center;\n      justify-content: flex-start;\n\n      devtools-button {\n        margin-left: auto;\n      }\n    }\n  }\n\n  section.actions {\n    margin-top: var(--sys-size-7);\n  }\n}\n\ndialog[open] {\n  display: flex;\n}\n\n/*# sourceURL=${import.meta.resolve('./floaty.css')} */`;", "// Copyright 2021 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n/* eslint-disable @devtools/no-imperative-dom-api */\n\n/*\n * Copyright (C) 2008 Apple Inc. All Rights Reserved.\n * Copyright (C) 2011 Google Inc. All Rights Reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions\n * are met:\n * 1. Redistributions of source code must retain the above copyright\n *    notice, this list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright\n *    notice, this list of conditions and the following disclaimer in the\n *    documentation and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY APPLE INC. ``AS IS'' AND ANY\n * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR\n * PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL APPLE INC. OR\n * CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,\n * EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,\n * PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\n * PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY\n * OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\nimport '../../core/dom_extension/dom_extension.js';\n\nimport * as Platform from '../../core/platform/platform.js';\nimport * as Geometry from '../../models/geometry/geometry.js';\nimport * as Lit from '../../ui/lit/lit.js';\n\nimport {appendStyle, deepActiveElement} from './DOMUtilities.js';\nimport {cloneCustomElement, createShadowRootWithCoreStyles} from './UIUtils.js';\n\n// Remember the original DOM mutation methods here, since we\n// will override them below to sanity check the Widget system.\nconst originalAppendChild = Element.prototype.appendChild;\nconst originalInsertBefore = Element.prototype.insertBefore;\nconst originalRemoveChild = Element.prototype.removeChild;\nconst originalRemoveChildren = Element.prototype.removeChildren;\n\nfunction assert(condition: unknown, message: string): void {\n  if (!condition) {\n    throw new Error(message);\n  }\n}\n\ntype WidgetConstructor<WidgetT extends Widget> = new (element: WidgetElement<WidgetT>) => WidgetT;\ntype WidgetProducer<WidgetT extends Widget> = (element: WidgetElement<WidgetT>) => WidgetT;\ntype WidgetFactory<WidgetT extends Widget> = WidgetConstructor<WidgetT>|WidgetProducer<WidgetT>;\ntype InferWidgetTFromFactory<F> = F extends WidgetFactory<infer WidgetT>? WidgetT : never;\n\nexport class WidgetConfig<WidgetT extends Widget> {\n  constructor(readonly widgetClass: WidgetFactory<WidgetT>, readonly widgetParams?: Partial<WidgetT>) {\n  }\n}\n\nexport function widgetConfig<F extends WidgetFactory<Widget>, ParamKeys extends keyof InferWidgetTFromFactory<F>>(\n    widgetClass: F, widgetParams?: Pick<InferWidgetTFromFactory<F>, ParamKeys>&Partial<InferWidgetTFromFactory<F>>):\n    // This is a workaround for https://github.com/runem/lit-analyzer/issues/163\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    WidgetConfig<any> {\n  return new WidgetConfig(widgetClass, widgetParams);\n}\n\nlet currentUpdateQueue: Map<Widget, PromiseWithResolvers<void>>|null = null;\nconst currentlyProcessed = new Set<Widget>();\nlet nextUpdateQueue = new Map<Widget, PromiseWithResolvers<void>>();\nlet pendingAnimationFrame: number|null = null;\n\nfunction enqueueIntoNextUpdateQueue(widget: Widget): Promise<void> {\n  const scheduledUpdate = nextUpdateQueue.get(widget) ?? Promise.withResolvers<void>();\n  nextUpdateQueue.delete(widget);\n  nextUpdateQueue.set(widget, scheduledUpdate);\n  if (pendingAnimationFrame === null) {\n    pendingAnimationFrame = requestAnimationFrame(runNextUpdate);\n  }\n  return scheduledUpdate.promise;\n}\n\nfunction enqueueWidgetUpdate(widget: Widget): Promise<void> {\n  if (currentUpdateQueue) {\n    if (currentlyProcessed.has(widget)) {\n      return enqueueIntoNextUpdateQueue(widget);\n    }\n    const scheduledUpdate = currentUpdateQueue.get(widget) ?? Promise.withResolvers<void>();\n    currentUpdateQueue.delete(widget);\n    currentUpdateQueue.set(widget, scheduledUpdate);\n    return scheduledUpdate.promise;\n  }\n  return enqueueIntoNextUpdateQueue(widget);\n}\n\nfunction cancelUpdate(widget: Widget): void {\n  if (currentUpdateQueue) {\n    const scheduledUpdate = currentUpdateQueue.get(widget);\n    if (scheduledUpdate) {\n      scheduledUpdate.resolve();\n      currentUpdateQueue.delete(widget);\n    }\n  }\n  const scheduledUpdate = nextUpdateQueue.get(widget);\n  if (scheduledUpdate) {\n    scheduledUpdate.resolve();\n    nextUpdateQueue.delete(widget);\n  }\n}\n\nfunction runNextUpdate(): void {\n  pendingAnimationFrame = null;\n  if (!currentUpdateQueue) {\n    currentUpdateQueue = nextUpdateQueue;\n    nextUpdateQueue = new Map();\n  }\n  for (const [widget, {resolve}] of currentUpdateQueue) {\n    currentlyProcessed.add(widget);\n    void (async () => {\n      await widget.performUpdate();\n      resolve();\n    })();\n  }\n  currentUpdateQueue.clear();\n  queueMicrotask(() => {\n    if (currentUpdateQueue && currentUpdateQueue.size > 0) {\n      runNextUpdate();\n    } else {\n      currentUpdateQueue = null;\n      currentlyProcessed.clear();\n    }\n  });\n}\n\nexport class WidgetElement<WidgetT extends Widget> extends HTMLElement {\n  #widgetClass?: WidgetFactory<WidgetT>;\n  #widgetParams?: Partial<WidgetT>;\n\n  createWidget(): WidgetT {\n    const widget = this.#instantiateWidget();\n    if (this.#widgetParams) {\n      Object.assign(widget, this.#widgetParams);\n    }\n    widget.requestUpdate();\n    return widget;\n  }\n\n  #instantiateWidget(): WidgetT {\n    if (!this.#widgetClass) {\n      throw new Error('No widgetClass defined');\n    }\n\n    if (Widget.isPrototypeOf(this.#widgetClass)) {\n      const ctor = this.#widgetClass as WidgetConstructor<WidgetT>;\n      return new ctor(this);\n    }\n\n    const factory = this.#widgetClass as WidgetProducer<WidgetT>;\n    return factory(this);\n  }\n\n  set widgetConfig(config: WidgetConfig<WidgetT>) {\n    const widget = Widget.get(this);\n    if (widget) {\n      let needsUpdate = false;\n      for (const key in config.widgetParams) {\n        if (config.widgetParams.hasOwnProperty(key) && config.widgetParams[key] !== this.#widgetParams?.[key]) {\n          needsUpdate = true;\n        }\n      }\n      if (needsUpdate) {\n        Object.assign(widget, config.widgetParams);\n        widget.requestUpdate();\n      }\n    }\n    this.#widgetClass = config.widgetClass;\n    this.#widgetParams = config.widgetParams;\n  }\n\n  getWidget(): WidgetT|undefined {\n    return Widget.get(this) as WidgetT | undefined;\n  }\n\n  connectedCallback(): void {\n    const widget = Widget.getOrCreateWidget(this);\n    if (!widget.element.parentElement) {\n      widget.markAsRoot();\n    }\n    widget.show(this.parentElement as HTMLElement, undefined, /* suppressOrphanWidgetError= */ true);\n  }\n\n  disconnectedCallback(): void {\n    const widget = Widget.get(this);\n    if (widget) {\n      widget.setHideOnDetach();\n      widget.detach();\n    }\n  }\n\n  override appendChild<T extends Node>(child: T): T {\n    if (child instanceof HTMLElement && child.tagName !== 'STYLE') {\n      Widget.getOrCreateWidget(child).show(this);\n      return child;\n    }\n    return super.appendChild(child);\n  }\n\n  override insertBefore<T extends Node>(child: T, referenceChild: Node): T {\n    if (child instanceof HTMLElement && child.tagName !== 'STYLE') {\n      Widget.getOrCreateWidget(child).show(this, referenceChild, true);\n      return child;\n    }\n    return super.insertBefore(child, referenceChild);\n  }\n\n  override removeChild<T extends Node>(child: T): T {\n    const childWidget = Widget.get(child as unknown as HTMLElement);\n    if (childWidget) {\n      childWidget.detach();\n      return child;\n    }\n    return super.removeChild(child);\n  }\n\n  override removeChildren(): void {\n    for (const child of this.children) {\n      const childWidget = Widget.get(child as unknown as HTMLElement);\n      if (childWidget) {\n        childWidget.detach();\n      }\n    }\n    super.removeChildren();\n  }\n\n  override cloneNode(deep: boolean): Node {\n    const clone = cloneCustomElement(this, deep);\n    if (!this.#widgetClass) {\n      throw new Error('No widgetClass defined');\n    }\n    clone.widgetConfig = {\n      widgetClass: this.#widgetClass,\n      widgetParams: this.#widgetParams,\n    };\n    return clone;\n  }\n\n  override focus(): void {\n    const widget = Widget.get(this);\n    if (widget) {\n      widget.focus();\n    }\n  }\n}\n\ncustomElements.define('devtools-widget', WidgetElement);\n\nexport function widgetRef<T extends Widget, Args extends unknown[]>(\n    type: Platform.Constructor.Constructor<T, Args>, callback: (_: T) => void): ReturnType<typeof Lit.Directives.ref> {\n  return Lit.Directives.ref((e?: Element) => {\n    if (!(e instanceof HTMLElement)) {\n      return;\n    }\n    const widget = Widget.getOrCreateWidget(e);\n    if (!(widget instanceof type)) {\n      throw new Error(`Expected an element with a widget of type ${type.name} but got ${e?.constructor?.name}`);\n    }\n    callback(widget);\n  });\n}\n\nconst widgetCounterMap = new WeakMap<Node, number>();\nconst widgetMap = new WeakMap<Node, Widget>();\n\nfunction incrementWidgetCounter(parentElement: Element, childElement: Element): void {\n  const count = (widgetCounterMap.get(childElement) || 0) + (widgetMap.get(childElement) ? 1 : 0);\n  for (let el: Element|null = parentElement; el; el = el.parentElementOrShadowHost()) {\n    widgetCounterMap.set(el, (widgetCounterMap.get(el) || 0) + count);\n  }\n}\n\nfunction decrementWidgetCounter(parentElement: Element, childElement: Element): void {\n  const count = (widgetCounterMap.get(childElement) || 0) + (widgetMap.get(childElement) ? 1 : 0);\n  for (let el: Element|null = parentElement; el; el = el.parentElementOrShadowHost()) {\n    const elCounter = widgetCounterMap.get(el);\n    if (elCounter) {\n      widgetCounterMap.set(el, elCounter - count);\n    }\n  }\n}\n\n// The resolved `updateComplete` promise, which is used as a marker for the\n// Widget's `#updateComplete` private property to indicate that there's no\n// pending update.\nconst UPDATE_COMPLETE = Promise.resolve();\n\n/**\n * Additional options passed to the `Widget` constructor to configure the\n * behavior of the resulting instance.\n */\nexport interface WidgetOptions {\n  /**\n   * If you pass `true` here, the `contentElement` of the resulting `Widget`\n   * will be placed into the shadow DOM of its `element`. If the `element`\n   * doesn't already have a `shadowRoot`, a new one will be created.\n   *\n   * Otherwise, the `contentElement` will be a regular child of the `element`.\n   *\n   * Its default value is `false`.\n   */\n  useShadowDom?: boolean;\n\n  /**\n   * A boolean that, when set to `true`, specifies behavior that mitigates\n   * custom element issues around focusability. When a non-focusable part of\n   * the shadow DOM is clicked, the first focusable part is given focus, and\n   * the shadow host is given any available `:focus` styling.\n   *\n   * Its default value is `false`.\n   *\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/Element/attachShadow\n   */\n  delegatesFocus?: boolean;\n\n  /**\n   * The Visual Logging configuration to put onto the `element` of the resulting\n   * `Widget`.\n   */\n  jslog?: string;\n  /**\n   * The additional classes to put onto the `element` of the resulting `Widget`.\n   */\n  classes?: string[];\n}\nexport class Widget {\n  readonly element: HTMLElement;\n  contentElement: HTMLElement;\n  #shadowRoot: typeof Element.prototype.shadowRoot;\n  #visible = false;\n  #isRoot = false;\n  #isShowing = false;\n  readonly #children: Widget[] = [];\n  #hideOnDetach = false;\n  #notificationDepth = 0;\n  #invalidationsSuspended = 0;\n  #parentWidget: Widget|null = null;\n  #cachedConstraints?: Geometry.Constraints;\n  #constraints?: Geometry.Constraints;\n  #invalidationsRequested?: boolean;\n  #externallyManaged?: boolean;\n  #updateComplete = UPDATE_COMPLETE;\n\n  /**\n   * Constructs a new `Widget` with the given `options`.\n   *\n   * @param options optional settings to configure the behavior.\n   */\n  constructor(options?: WidgetOptions);\n\n  /**\n   * Constructs a new `Widget` with the given `options` and attached to the\n   * given `element`.\n   *\n   * If `element` is `undefined`, a new `<div>` element will be created instead\n   * and the widget will be attached to that.\n   *\n   * @param element an (optional) `HTMLElement` to attach the `Widget` to.\n   * @param options optional settings to configure the behavior.\n   */\n  constructor(element?: HTMLElement, options?: WidgetOptions);\n\n  constructor(elementOrOptions?: HTMLElement|WidgetOptions, options?: WidgetOptions) {\n    if (elementOrOptions instanceof HTMLElement) {\n      this.element = elementOrOptions;\n    } else {\n      this.element = document.createElement('div');\n      if (elementOrOptions !== undefined) {\n        options = elementOrOptions;\n      }\n    }\n    this.#shadowRoot = this.element.shadowRoot;\n    if (options?.useShadowDom && !this.#shadowRoot) {\n      this.element.classList.add('vbox');\n      this.element.classList.add('flex-auto');\n      this.#shadowRoot = createShadowRootWithCoreStyles(this.element, {\n        delegatesFocus: options?.delegatesFocus,\n      });\n      this.contentElement = document.createElement('div');\n      this.#shadowRoot.appendChild(this.contentElement);\n    } else {\n      this.contentElement = this.element;\n    }\n    if (options?.classes) {\n      this.element.classList.add(...options.classes);\n    }\n    if (options?.jslog) {\n      this.contentElement.setAttribute('jslog', options.jslog);\n    }\n    this.contentElement.classList.add('widget');\n    widgetMap.set(this.element, this);\n  }\n\n  /**\n   * Returns the {@link Widget} whose element is the given `node`, or `undefined`\n   * if the `node` is not an element for a widget.\n   *\n   * @param node a DOM node.\n   * @returns the {@link Widget} that is attached to the `node` or `undefined`.\n   */\n  static get(node: Node): Widget|undefined {\n    return widgetMap.get(node);\n  }\n\n  static getOrCreateWidget(element: HTMLElement): Widget {\n    const widget = Widget.get(element);\n    if (widget) {\n      return widget;\n    }\n    if (element instanceof WidgetElement) {\n      return element.createWidget();\n    }\n    return new Widget(element);\n  }\n\n  markAsRoot(): void {\n    assert(!this.element.parentElement, 'Attempt to mark as root attached node');\n    this.#isRoot = true;\n  }\n\n  parentWidget(): Widget|null {\n    return this.#parentWidget;\n  }\n\n  children(): Widget[] {\n    return this.#children;\n  }\n\n  childWasDetached(_widget: Widget): void {\n  }\n\n  isShowing(): boolean {\n    return this.#isShowing;\n  }\n\n  shouldHideOnDetach(): boolean {\n    if (!this.element.parentElement) {\n      return false;\n    }\n    if (this.#hideOnDetach) {\n      return true;\n    }\n    for (const child of this.#children) {\n      if (child.shouldHideOnDetach()) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  setHideOnDetach(): void {\n    this.#hideOnDetach = true;\n  }\n\n  private inNotification(): boolean {\n    return Boolean(this.#notificationDepth) || Boolean(this.#parentWidget?.inNotification());\n  }\n\n  private parentIsShowing(): boolean {\n    if (this.#isRoot) {\n      return true;\n    }\n    return this.#parentWidget?.isShowing() ?? false;\n  }\n\n  protected callOnVisibleChildren(method: (this: Widget) => void): void {\n    const copy = this.#children.slice();\n    for (let i = 0; i < copy.length; ++i) {\n      if (copy[i].#parentWidget === this && copy[i].#visible) {\n        method.call(copy[i]);\n      }\n    }\n  }\n\n  private processWillShow(): void {\n    this.callOnVisibleChildren(this.processWillShow);\n    this.#isShowing = true;\n  }\n\n  private processWasShown(): void {\n    if (this.inNotification()) {\n      return;\n    }\n    this.restoreScrollPositions();\n    this.notify(this.wasShown);\n    this.callOnVisibleChildren(this.processWasShown);\n  }\n\n  private processWillHide(): void {\n    if (this.inNotification()) {\n      return;\n    }\n    this.storeScrollPositions();\n\n    this.callOnVisibleChildren(this.processWillHide);\n    this.notify(this.willHide);\n    this.#isShowing = false;\n  }\n\n  private processWasHidden(): void {\n    this.callOnVisibleChildren(this.processWasHidden);\n    this.notify(this.wasHidden);\n  }\n\n  private processOnResize(): void {\n    if (this.inNotification()) {\n      return;\n    }\n    if (!this.isShowing()) {\n      return;\n    }\n    this.notify(this.onResize);\n    this.callOnVisibleChildren(this.processOnResize);\n  }\n\n  private notify(notification: (this: Widget) => void): void {\n    ++this.#notificationDepth;\n    try {\n      notification.call(this);\n    } finally {\n      --this.#notificationDepth;\n    }\n  }\n\n  wasShown(): void {\n  }\n\n  willHide(): void {\n  }\n\n  wasHidden(): void {\n  }\n\n  onResize(): void {\n  }\n\n  onLayout(): void {\n  }\n\n  onDetach(): void {\n  }\n\n  async ownerViewDisposed(): Promise<void> {\n  }\n\n  show(parentElement: Element, insertBefore?: Node|null, suppressOrphanWidgetError = false): void {\n    assert(parentElement, 'Attempt to attach widget with no parent element');\n\n    if (!this.#isRoot) {\n      // Update widget hierarchy.\n      let currentParent: Element|null = parentElement;\n      let currentWidget = undefined;\n      while (!currentWidget) {\n        if (!currentParent) {\n          if (suppressOrphanWidgetError) {\n            this.#isRoot = true;\n            this.show(parentElement, insertBefore);\n            return;\n          }\n          throw new Error('Attempt to attach widget to orphan node');\n        }\n        currentWidget = widgetMap.get(currentParent);\n        currentParent = currentParent.parentElementOrShadowHost();\n      }\n      this.attach(currentWidget);\n    }\n    this.#showWidget(parentElement, insertBefore);\n  }\n\n  private attach(parentWidget: Widget): void {\n    if (parentWidget === this.#parentWidget) {\n      return;\n    }\n    if (this.#parentWidget) {\n      this.detach();\n    }\n    this.#parentWidget = parentWidget;\n    this.#parentWidget.#children.push(this);\n    this.#isRoot = false;\n  }\n\n  showWidget(): void {\n    if (this.#visible) {\n      return;\n    }\n    if (!this.element.parentElement) {\n      throw new Error('Attempt to show widget that is not hidden using hideWidget().');\n    }\n    this.#showWidget(this.element.parentElement, this.element.nextSibling);\n  }\n\n  #showWidget(parentElement: Element, insertBefore?: Node|null): void {\n    let currentParent: Element|null = parentElement;\n    while (currentParent && !widgetMap.get(currentParent)) {\n      currentParent = currentParent.parentElementOrShadowHost();\n    }\n\n    if (this.#isRoot) {\n      assert(!currentParent, 'Attempt to show root widget under another widget');\n    } else {\n      assert(\n          currentParent && widgetMap.get(currentParent) === this.#parentWidget,\n          'Attempt to show under node belonging to alien widget');\n    }\n\n    const wasVisible = this.#visible;\n    if (wasVisible && this.element.parentElement === parentElement) {\n      return;\n    }\n\n    this.#visible = true;\n\n    if (!wasVisible && this.parentIsShowing()) {\n      this.processWillShow();\n    }\n\n    this.element.classList.remove('hidden');\n\n    // Reparent\n    if (this.element.parentElement !== parentElement) {\n      if (!this.#externallyManaged) {\n        incrementWidgetCounter(parentElement, this.element);\n      }\n      if (insertBefore) {\n        originalInsertBefore.call(parentElement, this.element, insertBefore);\n      } else {\n        originalAppendChild.call(parentElement, this.element);\n      }\n    }\n    const focusedElementsCount = this.#parentWidget?.getDefaultFocusedElements?.()?.length ?? 0;\n    if (this.element.hasAttribute('autofocus') && focusedElementsCount > 1) {\n      this.element.removeAttribute('autofocus');\n    }\n\n    if (!wasVisible && this.parentIsShowing()) {\n      this.processWasShown();\n    }\n\n    if (this.#parentWidget && this.hasNonZeroConstraints()) {\n      this.#parentWidget.invalidateConstraints();\n    } else {\n      this.processOnResize();\n    }\n  }\n\n  hideWidget(): void {\n    if (!this.#visible) {\n      return;\n    }\n    this.#hideWidget(false);\n  }\n\n  #hideWidget(removeFromDOM: boolean): void {\n    this.#visible = false;\n    const {parentElement} = this.element;\n\n    if (this.parentIsShowing()) {\n      this.processWillHide();\n    }\n\n    if (removeFromDOM) {\n      if (parentElement) {\n        // Force legal removal\n        decrementWidgetCounter(parentElement, this.element);\n        originalRemoveChild.call(parentElement, this.element);\n      }\n      this.onDetach();\n    } else {\n      this.element.classList.add('hidden');\n    }\n\n    if (this.parentIsShowing()) {\n      this.processWasHidden();\n    }\n    if (this.#parentWidget && this.hasNonZeroConstraints()) {\n      this.#parentWidget.invalidateConstraints();\n    }\n  }\n\n  detach(overrideHideOnDetach?: boolean): void {\n    if (!this.#parentWidget && !this.#isRoot) {\n      return;\n    }\n\n    cancelUpdate(this);\n\n    // hideOnDetach means that we should never remove element from dom - content\n    // has iframes and detaching it will hurt.\n    //\n    // overrideHideOnDetach will override hideOnDetach and the client takes\n    // responsibility for the consequences.\n    const removeFromDOM = overrideHideOnDetach || !this.shouldHideOnDetach();\n    if (this.#visible) {\n      this.#hideWidget(removeFromDOM);\n    } else if (removeFromDOM) {\n      const {parentElement} = this.element;\n      if (parentElement) {\n        // Force kick out from DOM.\n        decrementWidgetCounter(parentElement, this.element);\n        originalRemoveChild.call(parentElement, this.element);\n      }\n    }\n\n    // Update widget hierarchy.\n    if (this.#parentWidget) {\n      const childIndex = this.#parentWidget.#children.indexOf(this);\n      assert(childIndex >= 0, 'Attempt to remove non-child widget');\n      this.#parentWidget.#children.splice(childIndex, 1);\n      this.#parentWidget.childWasDetached(this);\n      this.#parentWidget = null;\n    } else {\n      assert(this.#isRoot, 'Removing non-root widget from DOM');\n    }\n  }\n\n  detachChildWidgets(): void {\n    const children = this.#children.slice();\n    for (let i = 0; i < children.length; ++i) {\n      children[i].detach();\n    }\n  }\n\n  elementsToRestoreScrollPositionsFor(): Element[] {\n    return [this.element];\n  }\n\n  storeScrollPositions(): void {\n    const elements = this.elementsToRestoreScrollPositionsFor();\n    for (const container of elements) {\n      storedScrollPositions.set(container, {scrollLeft: container.scrollLeft, scrollTop: container.scrollTop});\n    }\n  }\n\n  restoreScrollPositions(): void {\n    const elements = this.elementsToRestoreScrollPositionsFor();\n    for (const container of elements) {\n      const storedPositions = storedScrollPositions.get(container);\n      if (storedPositions) {\n        container.scrollLeft = storedPositions.scrollLeft;\n        container.scrollTop = storedPositions.scrollTop;\n      }\n    }\n  }\n\n  doResize(): void {\n    if (!this.isShowing()) {\n      return;\n    }\n    // No matter what notification we are in, dispatching onResize is not needed.\n    if (!this.inNotification()) {\n      this.callOnVisibleChildren(this.processOnResize);\n    }\n  }\n\n  doLayout(): void {\n    if (!this.isShowing()) {\n      return;\n    }\n    this.notify(this.onLayout);\n    this.doResize();\n  }\n\n  registerRequiredCSS(...cssFiles: Array<string&{_tag: 'CSS-in-JS'}>): void {\n    for (const cssFile of cssFiles) {\n      appendStyle(this.#shadowRoot ?? this.element, cssFile);\n    }\n  }\n\n  // Unused, but useful for debugging.\n  printWidgetHierarchy(): void {\n    const lines: string[] = [];\n    this.collectWidgetHierarchy('', lines);\n    console.log(lines.join('\\n'));  // eslint-disable-line no-console\n  }\n\n  private collectWidgetHierarchy(prefix: string, lines: string[]): void {\n    lines.push(prefix + '[' + this.element.className + ']' + (this.#children.length ? ' {' : ''));\n\n    for (let i = 0; i < this.#children.length; ++i) {\n      this.#children[i].collectWidgetHierarchy(prefix + '    ', lines);\n    }\n\n    if (this.#children.length) {\n      lines.push(prefix + '}');\n    }\n  }\n\n  setDefaultFocusedElement(element: Element|null): void {\n    const defaultFocusedElement = this.getDefaultFocusedElement();\n    if (defaultFocusedElement) {\n      defaultFocusedElement.removeAttribute('autofocus');\n    }\n    if (element) {\n      element.setAttribute('autofocus', '');\n    }\n  }\n\n  setDefaultFocusedChild(child: Widget): void {\n    assert(child.#parentWidget === this, 'Attempt to set non-child widget as default focused.');\n\n    const defaultFocusedElement = this.getDefaultFocusedElement();\n    if (defaultFocusedElement) {\n      defaultFocusedElement.removeAttribute('autofocus');\n    }\n    child.element.setAttribute('autofocus', '');\n  }\n\n  getDefaultFocusedElements(): HTMLElement[] {\n    const autofocusElements = [...this.contentElement.querySelectorAll<HTMLElement>('[autofocus]')];\n    if (this.contentElement !== this.element) {\n      if (this.contentElement.hasAttribute('autofocus')) {\n        autofocusElements.push(this.contentElement);\n      }\n      if (autofocusElements.length === 0) {\n        autofocusElements.push(...this.element.querySelectorAll<HTMLElement>('[autofocus]'));\n      }\n    }\n    return autofocusElements.filter(autofocusElement => {\n      let widgetElement: Element|null = autofocusElement;\n      while (widgetElement) {\n        const widget = Widget.get(widgetElement);\n        if (widget) {\n          if (widgetElement === autofocusElement && widget.#parentWidget === this && widget.#visible) {\n            return true;\n          }\n          return widget === this;\n        }\n        widgetElement = widgetElement.parentElementOrShadowHost();\n      }\n      return false;\n    });\n  }\n\n  getDefaultFocusedElement(): HTMLElement|null {\n    const elements = this.getDefaultFocusedElements();\n    if (elements.length > 1) {\n      console.error(\n          'Multiple autofocus elements found', this.constructor.name,\n          ...elements.map(e => Platform.StringUtilities.trimMiddle(e.outerHTML, 250)));\n    }\n    return elements[0] || null;\n  }\n\n  focus(): void {\n    if (!this.isShowing()) {\n      return;\n    }\n    const autofocusElement = this.getDefaultFocusedElement();\n    if (autofocusElement) {\n      const widget = Widget.get(autofocusElement);\n      if (widget && widget !== this) {\n        widget.focus();\n      } else {\n        autofocusElement.focus();\n      }\n      return;\n    }\n\n    for (const child of this.#children) {\n      if (child.#visible) {\n        child.focus();\n        return;\n      }\n    }\n\n    if (this.element === this.contentElement && this.element.hasAttribute('autofocus')) {\n      this.element.focus();\n    }\n  }\n\n  hasFocus(): boolean {\n    return this.element.hasFocus();\n  }\n\n  calculateConstraints(): Geometry.Constraints {\n    return new Geometry.Constraints();\n  }\n\n  constraints(): Geometry.Constraints {\n    if (typeof this.#constraints !== 'undefined') {\n      return this.#constraints;\n    }\n    if (typeof this.#cachedConstraints === 'undefined') {\n      this.#cachedConstraints = this.calculateConstraints();\n    }\n    return this.#cachedConstraints;\n  }\n\n  setMinimumAndPreferredSizes(width: number, height: number, preferredWidth: number, preferredHeight: number): void {\n    this.#constraints =\n        new Geometry.Constraints(new Geometry.Size(width, height), new Geometry.Size(preferredWidth, preferredHeight));\n    this.invalidateConstraints();\n  }\n\n  setMinimumSize(width: number, height: number): void {\n    this.minimumSize = new Geometry.Size(width, height);\n  }\n\n  set minimumSize(size: Geometry.Size) {\n    this.#constraints = new Geometry.Constraints(size);\n    this.invalidateConstraints();\n  }\n\n  private hasNonZeroConstraints(): boolean {\n    const constraints = this.constraints();\n    return Boolean(\n        constraints.minimum.width || constraints.minimum.height || constraints.preferred.width ||\n        constraints.preferred.height);\n  }\n\n  suspendInvalidations(): void {\n    ++this.#invalidationsSuspended;\n  }\n\n  resumeInvalidations(): void {\n    --this.#invalidationsSuspended;\n    if (!this.#invalidationsSuspended && this.#invalidationsRequested) {\n      this.invalidateConstraints();\n    }\n  }\n\n  invalidateConstraints(): void {\n    if (this.#invalidationsSuspended) {\n      this.#invalidationsRequested = true;\n      return;\n    }\n    this.#invalidationsRequested = false;\n    const cached = this.#cachedConstraints;\n    this.#cachedConstraints = undefined;\n    const actual = this.constraints();\n    if (!actual.isEqual(cached || null) && this.#parentWidget) {\n      this.#parentWidget.invalidateConstraints();\n    } else {\n      this.doLayout();\n    }\n  }\n\n  // Excludes the widget from being tracked by its parents/ancestors via\n  // widgetCounter because the widget is being handled by external code.\n  // Widgets marked as being externally managed are responsible for\n  // finishing out their own lifecycle (i.e. calling detach() before being\n  // removed from the DOM). This is e.g. used for CodeMirror.\n  //\n  // Also note that this must be called before the widget is shown so that\n  // so that its ancestor's widgetCounter is not incremented.\n  markAsExternallyManaged(): void {\n    assert(!this.#parentWidget, 'Attempt to mark widget as externally managed after insertion to the DOM');\n    this.#externallyManaged = true;\n  }\n\n  /**\n   * Override this method in derived classes to perform the actual view update.\n   *\n   * This is not meant to be called directly, but invoked (indirectly) through\n   * the `requestAnimationFrame` and executed with the animation frame. Instead,\n   * use the `requestUpdate()` method to schedule an asynchronous update.\n   *\n   * @returns can either return nothing or a promise; in that latter case, the\n   *          update logic will await the resolution of the returned promise\n   *          before proceeding.\n   */\n  performUpdate(): Promise<void>|void {\n  }\n\n  /**\n   * Schedules an asynchronous update for this widget.\n   *\n   * The update will be deduplicated and executed with the next animation\n   * frame.\n   */\n  requestUpdate(): void {\n    this.#updateComplete = enqueueWidgetUpdate(this);\n  }\n\n  /**\n   * The `updateComplete` promise resolves when the widget has finished updating.\n   *\n   * Use `updateComplete` to wait for an update:\n   * ```js\n   * await widget.updateComplete;\n   * // do stuff\n   * ```\n   *\n   * This method is primarily useful for unit tests, to wait for widgets to build\n   * their DOM. For example:\n   * ```js\n   * // Set up the test widget, and wait for the initial update cycle to complete.\n   * const widget = new SomeWidget(someData);\n   * widget.requestUpdate();\n   * await widget.updateComplete;\n   *\n   * // Assert state of the widget.\n   * assert.isTrue(widget.someDataLoaded);\n   * ```\n   *\n   * @returns a promise that resolves when the widget has finished updating.\n   */\n  get updateComplete(): Promise<void> {\n    return this.#updateComplete;\n  }\n}\n\nconst storedScrollPositions = new WeakMap<Element, {\n  scrollLeft: number,\n  scrollTop: number,\n}>();\n\nexport class VBox extends Widget {\n  /**\n   * Constructs a new `VBox` with the given `options`.\n   *\n   * @param options optional settings to configure the behavior.\n   */\n  constructor(options?: WidgetOptions);\n\n  /**\n   * Constructs a new `VBox` with the given `options` and attached to the\n   * given `element`.\n   *\n   * If `element` is `undefined`, a new `<div>` element will be created instead\n   * and the widget will be attached to that.\n   *\n   * @param element an (optional) `HTMLElement` to attach the `VBox` to.\n   * @param options optional settings to configure the behavior.\n   */\n  constructor(element?: HTMLElement, options?: WidgetOptions);\n\n  constructor() {\n    super(...arguments);\n    this.contentElement.classList.add('vbox');\n  }\n\n  override calculateConstraints(): Geometry.Constraints {\n    let constraints: Geometry.Constraints = new Geometry.Constraints();\n\n    function updateForChild(this: Widget): void {\n      const child = this.constraints();\n      constraints = constraints.widthToMax(child);\n      constraints = constraints.addHeight(child);\n    }\n\n    this.callOnVisibleChildren(updateForChild);\n    return constraints;\n  }\n}\n\nexport class HBox extends Widget {\n  /**\n   * Constructs a new `HBox` with the given `options`.\n   *\n   * @param options optional settings to configure the behavior.\n   */\n  constructor(options?: WidgetOptions);\n\n  /**\n   * Constructs a new `HBox` with the given `options` and attached to the\n   * given `element`.\n   *\n   * If `element` is `undefined`, a new `<div>` element will be created instead\n   * and the widget will be attached to that.\n   *\n   * @param element an (optional) `HTMLElement` to attach the `HBox` to.\n   * @param options optional settings to configure the behavior.\n   */\n  constructor(element?: HTMLElement, options?: WidgetOptions);\n\n  constructor() {\n    super(...arguments);\n    this.contentElement.classList.add('hbox');\n  }\n\n  override calculateConstraints(): Geometry.Constraints {\n    let constraints: Geometry.Constraints = new Geometry.Constraints();\n\n    function updateForChild(this: Widget): void {\n      const child = this.constraints();\n      constraints = constraints.addWidth(child);\n      constraints = constraints.heightToMax(child);\n    }\n\n    this.callOnVisibleChildren(updateForChild);\n    return constraints;\n  }\n}\n\nexport class VBoxWithResizeCallback extends VBox {\n  private readonly resizeCallback: () => void;\n  constructor(resizeCallback: () => void) {\n    super();\n    this.resizeCallback = resizeCallback;\n  }\n\n  override onResize(): void {\n    this.resizeCallback();\n  }\n}\n\nexport class WidgetFocusRestorer {\n  private widget: Widget|null;\n  private previous: HTMLElement|null;\n  constructor(widget: Widget) {\n    this.widget = widget;\n    this.previous = (deepActiveElement(widget.element.ownerDocument) as HTMLElement | null);\n    widget.focus();\n  }\n\n  restore(): void {\n    if (!this.widget) {\n      return;\n    }\n    if (this.widget.hasFocus() && this.previous) {\n      this.previous.focus();\n    }\n    this.previous = null;\n    this.widget = null;\n  }\n}\n\nfunction domOperationError(funcName: 'appendChild'|'insertBefore'|'removeChild'|'removeChildren'): Error {\n  return new Error(`Attempt to modify widget with native DOM method \\`${funcName}\\``);\n}\n\nElement.prototype.appendChild = function<T extends Node>(node: T): T {\n  if (widgetMap.get(node) && node.parentElement !== this) {\n    throw domOperationError('appendChild');\n  }\n  return originalAppendChild.call(this, node) as T;\n};\n\nElement.prototype.insertBefore = function<T extends Node>(node: T, child: Node|null): T {\n  if (widgetMap.get(node) && node.parentElement !== this) {\n    throw domOperationError('insertBefore');\n  }\n  return originalInsertBefore.call(this, node, child) as T;\n};\n\nElement.prototype.removeChild = function<T extends Node>(child: T): T {\n  if (widgetCounterMap.get(child) || widgetMap.get(child)) {\n    throw domOperationError('removeChild');\n  }\n  return originalRemoveChild.call(this, child) as T;\n};\n\nElement.prototype.removeChildren = function(): void {\n  if (widgetCounterMap.get(this)) {\n    throw domOperationError('removeChildren');\n  }\n  return originalRemoveChildren.call(this);\n};\n", "// Copyright 2022 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\n/**\n * `document.activeElement` will not enter shadow roots to find the element\n * that has focus; use this method if you need to traverse through any shadow\n * roots to find the actual, specific focused element.\n */\nexport function deepActiveElement(doc: Document): Element|null {\n  let activeElement: Element|null = doc.activeElement;\n  while (activeElement?.shadowRoot?.activeElement) {\n    activeElement = activeElement.shadowRoot.activeElement;\n  }\n  return activeElement;\n}\n\nexport function getEnclosingShadowRootForNode(node: Node): Node|null {\n  let parentNode = node.parentNodeOrShadowHost();\n  while (parentNode) {\n    if (parentNode instanceof ShadowRoot) {\n      return parentNode;\n    }\n    parentNode = parentNode.parentNodeOrShadowHost();\n  }\n  return null;\n}\n\nexport function rangeOfWord(\n    rootNode: Node, offset: number, stopCharacters: string, stayWithinNode: Node, direction?: string): Range {\n  let startNode;\n  let startOffset = 0;\n  let endNode;\n  let endOffset = 0;\n\n  if (!stayWithinNode) {\n    stayWithinNode = rootNode;\n  }\n\n  if (!direction || direction === 'backward' || direction === 'both') {\n    let node: Node|null = rootNode;\n    while (node) {\n      if (node === stayWithinNode) {\n        if (!startNode) {\n          startNode = stayWithinNode;\n        }\n        break;\n      }\n\n      if (node.nodeType === Node.TEXT_NODE && node.nodeValue !== null) {\n        const start = (node === rootNode ? (offset - 1) : (node.nodeValue.length - 1));\n        for (let i = start; i >= 0; --i) {\n          if (stopCharacters.indexOf(node.nodeValue[i]) !== -1) {\n            startNode = node;\n            startOffset = i + 1;\n            break;\n          }\n        }\n      }\n\n      if (startNode) {\n        break;\n      }\n\n      node = node.traversePreviousNode(stayWithinNode);\n    }\n\n    if (!startNode) {\n      startNode = stayWithinNode;\n      startOffset = 0;\n    }\n  } else {\n    startNode = rootNode;\n    startOffset = offset;\n  }\n\n  if (!direction || direction === 'forward' || direction === 'both') {\n    let node: (Node|null)|Node = rootNode;\n    while (node) {\n      if (node === stayWithinNode) {\n        if (!endNode) {\n          endNode = stayWithinNode;\n        }\n        break;\n      }\n\n      if (node.nodeType === Node.TEXT_NODE && node.nodeValue !== null) {\n        const start = (node === rootNode ? offset : 0);\n        for (let i = start; i < node.nodeValue.length; ++i) {\n          if (stopCharacters.indexOf(node.nodeValue[i]) !== -1) {\n            endNode = node;\n            endOffset = i;\n            break;\n          }\n        }\n      }\n\n      if (endNode) {\n        break;\n      }\n\n      node = node.traverseNextNode(stayWithinNode);\n    }\n\n    if (!endNode) {\n      endNode = stayWithinNode;\n      endOffset = stayWithinNode.nodeType === Node.TEXT_NODE ? stayWithinNode.nodeValue?.length || 0 :\n                                                               stayWithinNode.childNodes.length;\n    }\n  } else {\n    endNode = rootNode;\n    endOffset = offset;\n  }\n\n  if (!rootNode.ownerDocument) {\n    throw new Error('No `ownerDocument` found for rootNode');\n  }\n  const result = rootNode.ownerDocument.createRange();\n  result.setStart(startNode, startOffset);\n  result.setEnd(endNode, endOffset);\n\n  return result;\n}\n\n/**\n * Appends the list of `styles` as individual `<style>` elements to the\n * given `node`.\n *\n * @param node the `Node` to append the `<style>` elements to.\n * @param styles an optional list of styles to append to the `node`.\n */\nexport function appendStyle(node: Node, ...styles: CSSInJS[]): void {\n  for (const cssText of styles) {\n    const style = (node.ownerDocument ?? document).createElement('style');\n    style.textContent = cssText;\n    node.appendChild(style);\n  }\n}\n", "// Copyright 2015 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n/* eslint-disable @devtools/no-imperative-dom-api */\n\nimport type * as Common from '../../core/common/common.js';\nimport * as i18n from '../../core/i18n/i18n.js';\nimport * as Buttons from '../../ui/components/buttons/buttons.js';\nimport * as VisualLogging from '../../ui/visual_logging/visual_logging.js';\nimport {createIcon} from '../kit/kit.js';\n\nimport * as ARIAUtils from './ARIAUtils.js';\nimport infobarStyles from './infobar.css.js';\nimport {Keys} from './KeyboardShortcut.js';\nimport {createShadowRootWithCoreStyles, createTextButton, type DevToolsCloseButton} from './UIUtils.js';\nimport type {Widget} from './Widget.js';\n\nconst UIStrings = {\n  /**\n   * @description Text on a button to close the infobar and never show the infobar in the future\n   */\n  dontShowAgain: 'Don\\'t show again',\n  /**\n   * @description Text to close something\n   */\n  close: 'Close',\n} as const;\nconst str_ = i18n.i18n.registerUIStrings('ui/legacy/Infobar.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\n\nexport class Infobar {\n  element: HTMLElement;\n  private readonly shadowRoot: ShadowRoot;\n  private readonly contentElement: HTMLDivElement;\n  private detailsRows?: HTMLElement;\n  private readonly infoContainer: HTMLElement;\n  private readonly infoMessage: HTMLElement;\n  private infoText: HTMLElement;\n  private readonly actionContainer: HTMLElement;\n  private readonly disableSetting: Common.Settings.Setting<boolean>|null;\n  private readonly closeButton: DevToolsCloseButton;\n  private closeCallback: (() => void)|null;\n  private parentView?: Widget;\n  mainRow: HTMLElement;\n\n  constructor(\n      type: Type, text: string, actions?: InfobarAction[], disableSetting?: Common.Settings.Setting<boolean>,\n      jslogContext?: string) {\n    this.element = document.createElement('div');\n    if (jslogContext) {\n      this.element.setAttribute(\n          'jslog', `${VisualLogging.dialog(jslogContext).track({resize: true, keydown: 'Enter|Escape'})}`);\n    }\n    this.element.classList.add('flex-none');\n    this.shadowRoot = createShadowRootWithCoreStyles(this.element, {cssFile: infobarStyles});\n\n    this.contentElement = this.shadowRoot.createChild('div', 'infobar infobar-' + type);\n    const icon = createIcon(TYPE_TO_ICON[type], type + '-icon');\n    this.contentElement.createChild('div', 'icon-container').appendChild(icon);\n\n    this.mainRow = this.contentElement.createChild('div', 'infobar-main-row');\n    this.infoContainer = this.mainRow.createChild('div', 'infobar-info-container');\n    this.infoMessage = this.infoContainer.createChild('div', 'infobar-info-message');\n\n    this.infoText = this.infoMessage.createChild('div', 'infobar-info-text');\n    this.infoText.textContent = text;\n    ARIAUtils.markAsAlert(this.infoText);\n\n    this.actionContainer = this.infoContainer.createChild('div', 'infobar-info-actions');\n\n    let defaultActionButtonVariant = Buttons.Button.Variant.OUTLINED;\n    this.disableSetting = disableSetting || null;\n    if (disableSetting) {\n      const disableButton = createTextButton(\n          i18nString(UIStrings.dontShowAgain), this.onDisable.bind(this),\n          {className: 'infobar-button', jslogContext: 'dont-show-again'});\n      this.actionContainer.appendChild(disableButton);\n\n      // If we have a disable button, make the other buttons tonal (if not otherwise specified).\n      defaultActionButtonVariant = Buttons.Button.Variant.TONAL;\n    }\n    if (actions) {\n      this.contentElement.setAttribute('role', 'group');\n\n      for (const action of actions) {\n        const actionCallback = this.actionCallbackFactory(action);\n        const buttonVariant = action.buttonVariant ?? defaultActionButtonVariant;\n\n        const button = createTextButton(action.text, actionCallback, {\n          className: 'infobar-button',\n          jslogContext: action.jslogContext,\n          variant: buttonVariant,\n        });\n        this.actionContainer.appendChild(button);\n      }\n    }\n\n    this.closeButton = this.contentElement.createChild('dt-close-button', 'icon-container');\n    this.closeButton.setTabbable(true);\n    this.closeButton.setSize(Buttons.Button.Size.SMALL);\n    ARIAUtils.setDescription(this.closeButton, i18nString(UIStrings.close));\n    self.onInvokeElement(this.closeButton, this.dispose.bind(this));\n\n    if (type !== Type.ISSUE) {\n      this.contentElement.tabIndex = 0;\n    }\n    ARIAUtils.setLabel(this.contentElement, text);\n    this.contentElement.addEventListener('keydown', event => {\n      if (event.keyCode === Keys.Esc.code) {\n        this.dispose();\n        event.consume();\n        return;\n      }\n    });\n\n    this.closeCallback = null;\n  }\n\n  static create(\n      type: Type, text: string, actions?: InfobarAction[], disableSetting?: Common.Settings.Setting<boolean>,\n      jslogContext?: string): Infobar|null {\n    if (disableSetting?.get()) {\n      return null;\n    }\n    return new Infobar(type, text, actions, disableSetting, jslogContext);\n  }\n\n  dispose(): void {\n    this.element.remove();\n    this.onResize();\n    if (this.closeCallback) {\n      this.closeCallback.call(null);\n    }\n  }\n\n  setText(text: string): void {\n    this.infoText.textContent = text;\n    this.onResize();\n  }\n\n  setCloseCallback(callback: (() => void)|null): void {\n    this.closeCallback = callback;\n  }\n\n  setParentView(parentView: Widget): void {\n    this.parentView = parentView;\n  }\n\n  private actionCallbackFactory(action: InfobarAction): () => void {\n    if (!action.delegate) {\n      return action.dismiss ? this.dispose.bind(this) : (): void => {};\n    }\n\n    if (!action.dismiss) {\n      return action.delegate;\n    }\n\n    return ((): void => {\n             if (action.delegate) {\n               action.delegate();\n             }\n             this.dispose();\n           }).bind(this);\n  }\n\n  private onResize(): void {\n    if (this.parentView) {\n      this.parentView.doResize();\n    }\n  }\n\n  private onDisable(): void {\n    if (this.disableSetting) {\n      this.disableSetting.set(true);\n    }\n    this.dispose();\n  }\n\n  createDetailsRowMessage(message: Element|string): Element {\n    if (!this.detailsRows) {\n      const details = document.createElement('details');\n      const summary = details.createChild('summary');\n      const triangleIcon = createIcon('arrow-drop-down');\n      summary.createChild('div', 'icon-container').appendChild(triangleIcon);\n      this.contentElement.insertBefore(details, this.mainRow);\n      summary.appendChild(this.mainRow);\n      this.detailsRows = details.createChild('div', 'infobar-details-rows');\n    }\n    const infobarDetailsRow = this.detailsRows.createChild('div', 'infobar-details-row');\n    const detailsRowMessage = infobarDetailsRow.createChild('span', 'infobar-row-message');\n    if (typeof message === 'string') {\n      detailsRowMessage.textContent = message;\n    } else {\n      detailsRowMessage.appendChild(message);\n    }\n    return detailsRowMessage;\n  }\n}\nexport interface InfobarAction {\n  text: string;\n  delegate: (() => void)|null;\n  dismiss: boolean;\n  buttonVariant?: Buttons.Button.Variant;\n  jslogContext?: string;\n}\n\nexport const enum Type {\n  WARNING = 'warning',\n  INFO = 'info',\n  ISSUE = 'issue',\n  ERROR = 'error',\n}\n\nconst TYPE_TO_ICON = {\n  [Type.WARNING]: 'warning',\n  [Type.INFO]: 'info',\n  [Type.ISSUE]: 'issue-text-filled',\n  [Type.ERROR]: 'cross-circle',\n};\n", "// Copyright 2025 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n// IMPORTANT: this file is auto generated. Please do not edit this file.\n/* istanbul ignore file */\nexport default `/*\n * Copyright 2015 The Chromium Authors\n * Use of this source code is governed by a BSD-style license that can be\n * found in the LICENSE file.\n */\n@media (prefers-reduced-motion: no-preference) {\n  :host {\n    transition: all var(--sys-motion-duration-long2);\n    transition-timing-function: var(--sys-motion-curve-spatial);\n  }\n}\n\n@starting-style {\n  :host {\n    height: 0;\n    opacity: 0%;\n  }\n}\n\n.infobar {\n  --summary-header-height: var(--sys-size-11);\n\n  color: var(--sys-color-on-surface);\n  background-color: var(--sys-color-cdt-base-container);\n  display: flex;\n  flex: auto;\n  flex-direction: row;\n  position: relative;\n  padding: var(--sys-size-5) var(--sys-size-8);\n  min-width: fit-content;\n  min-height: calc(var(--summary-header-height) + var(--sys-size-5) * 2);\n\n  .icon-container {\n    display: flex;\n    flex-shrink: 0;\n    align-items: center;\n    height: var(--summary-header-height);\n  }\n\n  dt-close-button {\n    margin-left: var(--sys-size-3);\n  }\n}\n\n.infobar:focus {\n  outline: 2px solid var(--sys-color-state-focus-ring);\n  outline-offset: -2px;\n}\n\n.infobar-warning {\n  background-color: var(--sys-color-surface-yellow);\n  color: var(--sys-color-on-surface-yellow);\n}\n\n.infobar-error {\n  --override-infobar-error-background: var(--sys-color-surface-error);\n  --override-infobar-error-text: var(--sys-color-on-surface-error);\n\n  background-color: var(--override-infobar-error-background);\n  color: var(--override-infobar-error-text);\n}\n\n.infobar-main-row {\n  display: inline-flex;\n  flex-direction: row;\n  margin-right: auto;\n}\n\n.infobar-info-container {\n  display: flex;\n  row-gap: var(--sys-size-4);\n  align-items: center;\n  flex-grow: 1;\n  flex-wrap: wrap;\n}\n\n.infobar-info-text {\n  font: var(--sys-typescale-body3-regular);\n  margin-right: var(--sys-size-8);\n}\n\n.infobar-details-row {\n  display: flex;\n  flex-direction: column;\n  line-height: 18px;\n\n  + .infobar-details-row {\n    padding-top: var(--sys-size-3);\n  }\n}\n\n.infobar-selectable {\n  user-select: text;\n}\n\n.infobar-button {\n  color: var(--sys-color-token-subtle);\n}\n\n.info-icon {\n  color: var(--sys-color-primary);\n}\n\n.warning-icon {\n  color: var(--icon-warning);\n}\n\n.error-icon {\n  color: var(--icon-error);\n}\n\n.issue-icon {\n  color: var(--sys-color-primary);\n}\n\n.info-icon,\n.warning-icon,\n.error-icon,\n.issue-icon {\n  margin-right: var(--sys-size-8);\n  width: var(--sys-size-8);\n  height: var(--sys-size-8);\n  flex-shrink: 0;\n}\n\n.infobar-info-actions {\n  display: flex;\n  gap: var(--sys-size-5);\n}\n\n.devtools-link.text-button:hover,\n.devtools-link.text-button:focus,\n.devtools-link.text-button:active {\n  background-color: transparent;\n  box-shadow: none;\n}\n\ndetails {\n  margin-right: auto;\n\n  summary {\n    display: flex;\n    min-height: var(--summary-header-height);\n\n    &:focus-visible {\n      outline: var(--sys-color-state-focus-ring) auto var(--sys-size-1);\n      outline-offset: var(--sys-size-3);\n    }\n\n    &::marker {\n      content: '';\n    }\n  }\n\n  devtools-icon[name=\"arrow-drop-down\"] {\n    align-self: center;\n    transform: rotate(270deg);\n  }\n\n  &[open] {\n    devtools-icon[name=\"arrow-drop-down\"] {\n      transform: rotate(0deg);\n    }\n\n    &::details-content {\n      padding: var(--sys-size-4) 0 0 var(--sys-size-9);\n    }\n\n  }\n}\n\n/*# sourceURL=${import.meta.resolve('./infobar.css')} */`;", "// Copyright 2012 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\n/* eslint-disable @devtools/no-imperative-dom-api */\n\nimport * as Common from '../../core/common/common.js';\nimport * as Platform from '../../core/platform/platform.js';\nimport * as Geometry from '../../models/geometry/geometry.js';\nimport * as VisualLogging from '../visual_logging/visual_logging.js';\n\nimport * as ARIAUtils from './ARIAUtils.js';\nimport {Events as ResizerWidgetEvents, type ResizeUpdatePositionEvent, SimpleResizerWidget} from './ResizerWidget.js';\nimport splitWidgetStyles from './splitWidget.css.js';\nimport {ToolbarButton} from './Toolbar.js';\nimport {Widget, WidgetElement} from './Widget.js';\nimport {Events as ZoomManagerEvents, ZoomManager} from './ZoomManager.js';\n\nexport class SplitWidget extends Common.ObjectWrapper.eventMixin<EventTypes, typeof Widget>(Widget) {\n  #sidebarElement: HTMLElement;\n  #mainElement: HTMLElement;\n  #resizerElement: HTMLElement;\n  #resizerElementSize: number|null = null;\n  readonly #resizerWidget: SimpleResizerWidget;\n  #defaultSidebarWidth: number;\n  #defaultSidebarHeight: number;\n  readonly #constraintsInDip: boolean;\n  #resizeStartSizeDIP = 0;\n  // TODO: Used in WebTests\n  private setting: Common.Settings.Setting<{\n    vertical?: SettingForOrientation,\n    horizontal?: SettingForOrientation,\n  }>|null;\n  #totalSizeCSS = 0;\n  #totalSizeOtherDimensionCSS = 0;\n  #mainWidget: Widget|null = null;\n  #sidebarWidget: Widget|null = null;\n  #animationFrameHandle = 0;\n  #animationCallback: (() => void)|null = null;\n  #showSidebarButtonTitle: Common.UIString.LocalizedString = Common.UIString.LocalizedEmptyString;\n  #hideSidebarButtonTitle: Common.UIString.LocalizedString = Common.UIString.LocalizedEmptyString;\n  #shownSidebarString: Common.UIString.LocalizedString = Common.UIString.LocalizedEmptyString;\n  #hiddenSidebarString: Common.UIString.LocalizedString = Common.UIString.LocalizedEmptyString;\n  #showHideSidebarButton: ToolbarButton|null = null;\n  #isVertical = false;\n  #sidebarMinimized = false;\n  #detaching = false;\n  #sidebarSizeDIP = -1;\n  #savedSidebarSizeDIP: number;\n  #secondIsSidebar = false;\n  #shouldSaveShowMode = false;\n  #savedVerticalMainSize: number|null = null;\n  #savedHorizontalMainSize: number|null = null;\n  #showMode: ShowMode = ShowMode.BOTH;\n  #savedShowMode: ShowMode;\n  #autoAdjustOrientation = false;\n\n  constructor(\n      isVertical: boolean,\n      secondIsSidebar: boolean,\n      settingName?: string,\n      defaultSidebarWidth?: number,\n      defaultSidebarHeight?: number,\n      constraintsInDip?: boolean,\n      element?: SplitWidgetElement,\n  ) {\n    super(element, {useShadowDom: true});\n    this.element.classList.add('split-widget');\n    this.registerRequiredCSS(splitWidgetStyles);\n\n    this.contentElement.classList.add('shadow-split-widget');\n    this.#sidebarElement =\n        this.contentElement.createChild('div', 'shadow-split-widget-contents shadow-split-widget-sidebar vbox');\n    this.#mainElement =\n        this.contentElement.createChild('div', 'shadow-split-widget-contents shadow-split-widget-main vbox');\n    const mainSlot = this.#mainElement.createChild('slot');\n    mainSlot.name = 'main';\n    mainSlot.addEventListener('slotchange', (_: Event) => {\n      const assignedNode = mainSlot.assignedNodes()[0];\n      const widget = assignedNode instanceof HTMLElement ? Widget.getOrCreateWidget(assignedNode) : null;\n      if (widget && widget !== this.#mainWidget) {\n        this.setMainWidget(widget);\n      }\n    });\n    const sidebarSlot = this.#sidebarElement.createChild('slot');\n    sidebarSlot.name = 'sidebar';\n    sidebarSlot.addEventListener('slotchange', (_: Event) => {\n      const assignedNode = sidebarSlot.assignedNodes()[0];\n      const widget = assignedNode instanceof HTMLElement ? Widget.getOrCreateWidget(assignedNode) : null;\n      if (widget && widget !== this.#sidebarWidget) {\n        this.setSidebarWidget(widget);\n      }\n    });\n    this.#resizerElement = this.contentElement.createChild('div', 'shadow-split-widget-resizer');\n\n    this.#resizerWidget = new SimpleResizerWidget();\n    this.#resizerWidget.setEnabled(true);\n    this.#resizerWidget.addEventListener(ResizerWidgetEvents.RESIZE_START, this.#onResizeStart, this);\n    this.#resizerWidget.addEventListener(ResizerWidgetEvents.RESIZE_UPDATE_POSITION, this.#onResizeUpdate, this);\n    this.#resizerWidget.addEventListener(ResizerWidgetEvents.RESIZE_END, this.#onResizeEnd, this);\n\n    this.#defaultSidebarWidth = defaultSidebarWidth || 200;\n    this.#defaultSidebarHeight = defaultSidebarHeight || this.#defaultSidebarWidth;\n    this.#constraintsInDip = Boolean(constraintsInDip);\n\n    this.setting = settingName ? Common.Settings.Settings.instance().createSetting(settingName, {}) : null;\n    this.#savedSidebarSizeDIP = this.#sidebarSizeDIP;\n\n    this.setSecondIsSidebar(secondIsSidebar);\n\n    this.#setVertical(isVertical);\n    this.#savedShowMode = this.#showMode;\n\n    // Should be called after isVertical has the right value.\n    this.installResizer(this.#resizerElement);\n  }\n\n  isVertical(): boolean {\n    return this.#isVertical;\n  }\n\n  setVertical(isVertical: boolean): void {\n    if (this.#isVertical === isVertical) {\n      return;\n    }\n\n    this.#setVertical(isVertical);\n\n    if (this.isShowing()) {\n      this.#updateLayout();\n    }\n  }\n\n  setAutoAdjustOrientation(autoAdjustOrientation: boolean): void {\n    this.#autoAdjustOrientation = autoAdjustOrientation;\n    this.#maybeAutoAdjustOrientation();\n  }\n\n  #setVertical(isVertical: boolean): void {\n    this.contentElement.classList.toggle('vbox', !isVertical);\n    this.contentElement.classList.toggle('hbox', isVertical);\n    this.#isVertical = isVertical;\n\n    this.#resizerElementSize = null;\n    this.#sidebarSizeDIP = -1;\n    this.#restoreSidebarSizeFromSettings();\n    if (this.#shouldSaveShowMode) {\n      this.#restoreAndApplyShowModeFromSettings();\n    }\n    this.#updateShowHideSidebarButton();\n    // FIXME: reverse SplitWidget.isVertical meaning.\n    this.#resizerWidget.setVertical(!isVertical);\n    this.invalidateConstraints();\n  }\n\n  #updateLayout(animate?: boolean): void {\n    this.#totalSizeCSS = 0;  // Lazy update.\n    this.#totalSizeOtherDimensionCSS = 0;\n\n    // Remove properties that might affect total size calculation.\n    this.#mainElement.style.removeProperty('width');\n    this.#mainElement.style.removeProperty('height');\n    this.#sidebarElement.style.removeProperty('width');\n    this.#sidebarElement.style.removeProperty('height');\n\n    this.#setSidebarSizeDIP(this.#preferredSidebarSizeDIP(), Boolean(animate));\n  }\n\n  setMainWidget(widget: Widget): void {\n    if (this.#mainWidget === widget) {\n      return;\n    }\n    this.suspendInvalidations();\n    if (this.#mainWidget) {\n      this.#mainWidget.detach();\n    }\n    this.#mainWidget = widget;\n    if (widget) {\n      widget.element.slot = 'main';\n      if (this.#showMode === ShowMode.ONLY_MAIN || this.#showMode === ShowMode.BOTH) {\n        widget.show(this.element);\n      }\n    }\n    this.resumeInvalidations();\n  }\n\n  setSidebarWidget(widget: Widget): void {\n    if (this.#sidebarWidget === widget) {\n      return;\n    }\n    this.suspendInvalidations();\n    if (this.#sidebarWidget) {\n      this.#sidebarWidget.detach();\n    }\n    this.#sidebarWidget = widget;\n    if (widget) {\n      widget.element.slot = 'sidebar';\n      if (this.#showMode === ShowMode.ONLY_SIDEBAR || this.#showMode === ShowMode.BOTH) {\n        widget.show(this.element);\n      }\n    }\n    this.resumeInvalidations();\n  }\n\n  mainWidget(): Widget|null {\n    return this.#mainWidget;\n  }\n\n  sidebarWidget(): Widget|null {\n    return this.#sidebarWidget;\n  }\n\n  sidebarElement(): HTMLElement {\n    return this.#sidebarElement;\n  }\n\n  override childWasDetached(widget: Widget): void {\n    if (this.#detaching) {\n      return;\n    }\n    if (this.#mainWidget === widget) {\n      this.#mainWidget = null;\n    }\n    if (this.#sidebarWidget === widget) {\n      this.#sidebarWidget = null;\n    }\n    this.invalidateConstraints();\n  }\n\n  isSidebarSecond(): boolean {\n    return this.#secondIsSidebar;\n  }\n\n  enableShowModeSaving(): void {\n    this.#shouldSaveShowMode = true;\n    this.#restoreAndApplyShowModeFromSettings();\n  }\n\n  showMode(): ShowMode {\n    return this.#showMode;\n  }\n\n  sidebarIsShowing(): boolean {\n    return this.#showMode !== ShowMode.ONLY_MAIN;\n  }\n\n  setSecondIsSidebar(secondIsSidebar: boolean): void {\n    if (secondIsSidebar === this.#secondIsSidebar) {\n      return;\n    }\n    this.#secondIsSidebar = secondIsSidebar;\n    if (!this.#mainWidget?.shouldHideOnDetach()) {\n      if (secondIsSidebar) {\n        this.contentElement.insertBefore(this.#mainElement, this.#sidebarElement);\n      } else {\n        this.contentElement.insertBefore(this.#mainElement, this.#resizerElement);\n      }\n    } else if (!this.#sidebarWidget?.shouldHideOnDetach()) {\n      if (secondIsSidebar) {\n        this.contentElement.insertBefore(this.#sidebarElement, this.#resizerElement);\n      } else {\n        this.contentElement.insertBefore(this.#sidebarElement, this.#mainElement);\n      }\n    } else {\n      console.error('Could not swap split widget side. Both children widgets contain iframes.');\n      this.#secondIsSidebar = !secondIsSidebar;\n    }\n  }\n\n  resizerElement(): Element {\n    return this.#resizerElement;\n  }\n\n  hideMain(animate?: boolean): void {\n    this.#showOnly(this.#sidebarWidget, this.#mainWidget, this.#sidebarElement, this.#mainElement, animate);\n    this.#updateShowMode(ShowMode.ONLY_SIDEBAR);\n  }\n\n  hideSidebar(animate?: boolean): void {\n    this.#showOnly(this.#mainWidget, this.#sidebarWidget, this.#mainElement, this.#sidebarElement, animate);\n    this.#updateShowMode(ShowMode.ONLY_MAIN);\n  }\n\n  setSidebarMinimized(minimized: boolean): void {\n    this.#sidebarMinimized = minimized;\n    this.invalidateConstraints();\n  }\n\n  isSidebarMinimized(): boolean {\n    return this.#sidebarMinimized;\n  }\n\n  #showOnly(\n      sideToShow: Widget|null,\n      sideToHide: Widget|null,\n      shadowToShow: Element,\n      shadowToHide: Element,\n      animate?: boolean,\n      ): void {\n    this.#cancelAnimation();\n\n    function callback(this: SplitWidget): void {\n      if (sideToShow) {\n        // Make sure main is first in the children list.\n        if (sideToShow === this.#mainWidget) {\n          this.#mainWidget.show(this.element, this.#sidebarWidget ? this.#sidebarWidget.element : null);\n        } else if (this.#sidebarWidget) {\n          this.#sidebarWidget.show(this.element);\n        }\n      }\n      if (sideToHide) {\n        this.#detaching = true;\n        sideToHide.detach();\n        this.#detaching = false;\n      }\n\n      this.#resizerElement.classList.add('hidden');\n      shadowToShow.classList.remove('hidden');\n      shadowToShow.classList.add('maximized');\n      shadowToHide.classList.add('hidden');\n      shadowToHide.classList.remove('maximized');\n      this.#removeAllLayoutProperties();\n      this.doResize();\n      this.showFinishedForTest();\n    }\n\n    if (animate) {\n      this.#animate(true, callback.bind(this));\n    } else {\n      callback.call(this);\n    }\n\n    this.#sidebarSizeDIP = -1;\n    this.setResizable(false);\n  }\n\n  protected showFinishedForTest(): void {\n    // This method is sniffed in tests.\n  }\n\n  #removeAllLayoutProperties(): void {\n    this.#sidebarElement.style.removeProperty('flexBasis');\n\n    this.#mainElement.style.removeProperty('width');\n    this.#mainElement.style.removeProperty('height');\n    this.#sidebarElement.style.removeProperty('width');\n    this.#sidebarElement.style.removeProperty('height');\n\n    this.#resizerElement.style.removeProperty('left');\n    this.#resizerElement.style.removeProperty('right');\n    this.#resizerElement.style.removeProperty('top');\n    this.#resizerElement.style.removeProperty('bottom');\n\n    this.#resizerElement.style.removeProperty('margin-left');\n    this.#resizerElement.style.removeProperty('margin-right');\n    this.#resizerElement.style.removeProperty('margin-top');\n    this.#resizerElement.style.removeProperty('margin-bottom');\n  }\n\n  showBoth(animate?: boolean): void {\n    if (this.#showMode === ShowMode.BOTH) {\n      animate = false;\n    }\n\n    this.#cancelAnimation();\n    this.#mainElement.classList.remove('maximized', 'hidden');\n    this.#sidebarElement.classList.remove('maximized', 'hidden');\n    this.#resizerElement.classList.remove('hidden');\n    this.setResizable(true);\n\n    // Make sure main is the first in the children list.\n    this.suspendInvalidations();\n    if (this.#sidebarWidget) {\n      this.#sidebarWidget.show(this.element);\n    }\n    if (this.#mainWidget) {\n      this.#mainWidget.show(this.element, this.#sidebarWidget ? this.#sidebarWidget.element : null);\n    }\n    this.resumeInvalidations();\n    // Order widgets in DOM properly.\n    this.setSecondIsSidebar(this.#secondIsSidebar);\n\n    this.#sidebarSizeDIP = -1;\n    this.#updateShowMode(ShowMode.BOTH);\n    this.#updateLayout(animate);\n  }\n\n  setResizable(resizable: boolean): void {\n    this.#resizerWidget.setEnabled(resizable);\n  }\n\n  // Currently unused\n  forceSetSidebarWidth(width: number): void {\n    this.#defaultSidebarWidth = width;\n    this.#savedSidebarSizeDIP = width;\n    this.#updateLayout();\n  }\n\n  isResizable(): boolean {\n    return this.#resizerWidget.isEnabled();\n  }\n\n  setSidebarSize(size: number): void {\n    const sizeDIP = ZoomManager.instance().cssToDIP(size);\n    this.#savedSidebarSizeDIP = sizeDIP;\n    this.#saveSetting();\n    this.#setSidebarSizeDIP(sizeDIP, false, true);\n  }\n\n  sidebarSize(): number {\n    const sizeDIP = Math.max(0, this.#sidebarSizeDIP);\n    return ZoomManager.instance().dipToCSS(sizeDIP);\n  }\n\n  totalSize(): number {\n    const sizeDIP = Math.max(0, this.#totalSizeDIP());\n    return ZoomManager.instance().dipToCSS(sizeDIP);\n  }\n\n  /**\n   * Returns total size in DIP.\n   */\n  #totalSizeDIP(): number {\n    if (!this.#totalSizeCSS) {\n      this.#totalSizeCSS = this.#isVertical ? this.contentElement.offsetWidth : this.contentElement.offsetHeight;\n      this.#totalSizeOtherDimensionCSS =\n          this.#isVertical ? this.contentElement.offsetHeight : this.contentElement.offsetWidth;\n    }\n    return ZoomManager.instance().cssToDIP(this.#totalSizeCSS);\n  }\n\n  #updateShowMode(showMode: ShowMode): void {\n    this.#showMode = showMode;\n    this.#saveShowModeToSettings();\n    this.#updateShowHideSidebarButton();\n    this.dispatchEventToListeners(Events.SHOW_MODE_CHANGED, showMode);\n    this.invalidateConstraints();\n  }\n\n  #setSidebarSizeDIP(sizeDIP: number, animate: boolean, userAction?: boolean): void {\n    if (this.#showMode !== ShowMode.BOTH || !this.isShowing()) {\n      return;\n    }\n\n    sizeDIP = this.#applyConstraints(sizeDIP, userAction);\n    if (this.#sidebarSizeDIP === sizeDIP) {\n      return;\n    }\n\n    if (!this.#resizerElementSize) {\n      this.#resizerElementSize =\n          this.#isVertical ? this.#resizerElement.offsetWidth : this.#resizerElement.offsetHeight;\n    }\n\n    // Invalidate layout below.\n\n    this.#removeAllLayoutProperties();\n\n    // this.#totalSizeDIP is available below since we successfully applied constraints.\n    const roundSizeCSS = Math.round(ZoomManager.instance().dipToCSS(sizeDIP));\n    const sidebarSizeValue = roundSizeCSS + 'px';\n    const mainSizeValue = (this.#totalSizeCSS - roundSizeCSS) + 'px';\n    this.#sidebarElement.style.flexBasis = sidebarSizeValue;\n\n    // Make both sides relayout boundaries.\n    if (this.#isVertical) {\n      this.#sidebarElement.style.width = sidebarSizeValue;\n      this.#mainElement.style.width = mainSizeValue;\n      this.#sidebarElement.style.height = this.#totalSizeOtherDimensionCSS + 'px';\n      this.#mainElement.style.height = this.#totalSizeOtherDimensionCSS + 'px';\n    } else {\n      this.#sidebarElement.style.height = sidebarSizeValue;\n      this.#mainElement.style.height = mainSizeValue;\n      this.#sidebarElement.style.width = this.#totalSizeOtherDimensionCSS + 'px';\n      this.#mainElement.style.width = this.#totalSizeOtherDimensionCSS + 'px';\n    }\n\n    // Position resizer.\n    if (this.#isVertical) {\n      if (this.#secondIsSidebar) {\n        this.#resizerElement.style.right = sidebarSizeValue;\n        this.#resizerElement.style.marginRight = -this.#resizerElementSize / 2 + 'px';\n      } else {\n        this.#resizerElement.style.left = sidebarSizeValue;\n        this.#resizerElement.style.marginLeft = -this.#resizerElementSize / 2 + 'px';\n      }\n    } else if (this.#secondIsSidebar) {\n      this.#resizerElement.style.bottom = sidebarSizeValue;\n      this.#resizerElement.style.marginBottom = -this.#resizerElementSize / 2 + 'px';\n    } else {\n      this.#resizerElement.style.top = sidebarSizeValue;\n      this.#resizerElement.style.marginTop = -this.#resizerElementSize / 2 + 'px';\n    }\n\n    this.#sidebarSizeDIP = sizeDIP;\n\n    // Force layout.\n\n    if (animate) {\n      this.#animate(false);\n    } else {\n      // No need to recalculate this.sidebarSizeDIP and this.#totalSizeDIP again.\n      this.doResize();\n      this.dispatchEventToListeners(Events.SIDEBAR_SIZE_CHANGED, this.sidebarSize());\n    }\n  }\n\n  #animate(reverse: boolean, callback?: (() => void)): void {\n    const animationTime = 50;\n    this.#animationCallback = callback || null;\n\n    let animatedMarginPropertyName: string;\n    if (this.#isVertical) {\n      animatedMarginPropertyName = this.#secondIsSidebar ? 'margin-right' : 'margin-left';\n    } else {\n      animatedMarginPropertyName = this.#secondIsSidebar ? 'margin-bottom' : 'margin-top';\n    }\n\n    const marginFrom = reverse ? '0' : '-' + ZoomManager.instance().dipToCSS(this.#sidebarSizeDIP) + 'px';\n    const marginTo = reverse ? '-' + ZoomManager.instance().dipToCSS(this.#sidebarSizeDIP) + 'px' : '0';\n\n    // This order of things is important.\n    // 1. Resize main element early and force layout.\n    this.contentElement.style.setProperty(animatedMarginPropertyName, marginFrom);\n    this.contentElement.style.setProperty('overflow', 'hidden');\n    if (!reverse) {\n      suppressUnused(this.#mainElement.offsetWidth);\n      suppressUnused(this.#sidebarElement.offsetWidth);\n    }\n\n    // 2. Issue onresize to the sidebar element, its size won't change.\n    if (!reverse && this.#sidebarWidget) {\n      this.#sidebarWidget.doResize();\n    }\n\n    // 3. Configure and run animation\n    this.contentElement.style.setProperty('transition', animatedMarginPropertyName + ' ' + animationTime + 'ms linear');\n\n    const boundAnimationFrame = animationFrame.bind(this);\n    let startTime: number|null = null;\n    function animationFrame(this: SplitWidget): void {\n      this.#animationFrameHandle = 0;\n\n      if (!startTime) {\n        // Kick animation on first frame.\n        this.contentElement.style.setProperty(animatedMarginPropertyName, marginTo);\n        startTime = window.performance.now();\n      } else if (window.performance.now() < startTime + animationTime) {\n        // Process regular animation frame.\n        if (this.#mainWidget) {\n          this.#mainWidget.doResize();\n        }\n      } else {\n        // Complete animation.\n        this.#cancelAnimation();\n        if (this.#mainWidget) {\n          this.#mainWidget.doResize();\n        }\n        this.dispatchEventToListeners(Events.SIDEBAR_SIZE_CHANGED, this.sidebarSize());\n        return;\n      }\n      this.#animationFrameHandle = this.contentElement.window().requestAnimationFrame(boundAnimationFrame);\n    }\n    this.#animationFrameHandle = this.contentElement.window().requestAnimationFrame(boundAnimationFrame);\n  }\n\n  #cancelAnimation(): void {\n    this.contentElement.style.removeProperty('margin-top');\n    this.contentElement.style.removeProperty('margin-right');\n    this.contentElement.style.removeProperty('margin-bottom');\n    this.contentElement.style.removeProperty('margin-left');\n    this.contentElement.style.removeProperty('transition');\n    this.contentElement.style.removeProperty('overflow');\n\n    if (this.#animationFrameHandle) {\n      this.contentElement.window().cancelAnimationFrame(this.#animationFrameHandle);\n      this.#animationFrameHandle = 0;\n    }\n    if (this.#animationCallback) {\n      this.#animationCallback();\n      this.#animationCallback = null;\n    }\n  }\n\n  #applyConstraints(sidebarSize: number, userAction?: boolean): number {\n    const totalSize = this.#totalSizeDIP();\n    const zoomFactor = this.#constraintsInDip ? 1 : ZoomManager.instance().zoomFactor();\n\n    let constraints: Geometry.Constraints =\n        this.#sidebarWidget ? this.#sidebarWidget.constraints() : new Geometry.Constraints();\n    let minSidebarSize: 20|number = this.isVertical() ? constraints.minimum.width : constraints.minimum.height;\n    if (!minSidebarSize) {\n      minSidebarSize = MinPadding;\n    }\n    minSidebarSize *= zoomFactor;\n    if (this.#sidebarMinimized) {\n      sidebarSize = minSidebarSize;\n    }\n\n    let preferredSidebarSize: 20|number =\n        this.isVertical() ? constraints.preferred.width : constraints.preferred.height;\n    if (!preferredSidebarSize) {\n      preferredSidebarSize = MinPadding;\n    }\n    preferredSidebarSize *= zoomFactor;\n    // Allow sidebar to be less than preferred by explicit user action.\n    if (sidebarSize < preferredSidebarSize) {\n      preferredSidebarSize = Math.max(sidebarSize, minSidebarSize);\n    }\n    preferredSidebarSize += zoomFactor;  // 1 css pixel for splitter border.\n\n    constraints = this.#mainWidget ? this.#mainWidget.constraints() : new Geometry.Constraints();\n    let minMainSize: 20|number = this.isVertical() ? constraints.minimum.width : constraints.minimum.height;\n    if (!minMainSize) {\n      minMainSize = MinPadding;\n    }\n    minMainSize *= zoomFactor;\n\n    let preferredMainSize: 20|number = this.isVertical() ? constraints.preferred.width : constraints.preferred.height;\n    if (!preferredMainSize) {\n      preferredMainSize = MinPadding;\n    }\n    preferredMainSize *= zoomFactor;\n    const savedMainSize = this.isVertical() ? this.#savedVerticalMainSize : this.#savedHorizontalMainSize;\n    if (savedMainSize !== null) {\n      preferredMainSize = Math.min(preferredMainSize, savedMainSize * zoomFactor);\n    }\n    if (userAction) {\n      preferredMainSize = minMainSize;\n    }\n\n    // Enough space for preferred.\n    const totalPreferred = preferredMainSize + preferredSidebarSize;\n    if (totalPreferred <= totalSize) {\n      return Platform.NumberUtilities.clamp(sidebarSize, preferredSidebarSize, totalSize - preferredMainSize);\n    }\n\n    // Enough space for minimum.\n    if (minMainSize + minSidebarSize <= totalSize) {\n      const delta = totalPreferred - totalSize;\n      const sidebarDelta = delta * preferredSidebarSize / totalPreferred;\n      sidebarSize = preferredSidebarSize - sidebarDelta;\n      return Platform.NumberUtilities.clamp(sidebarSize, minSidebarSize, totalSize - minMainSize);\n    }\n\n    // Not enough space even for minimum sizes.\n    return Math.max(0, totalSize - minMainSize);\n  }\n\n  override wasShown(): void {\n    super.wasShown();\n    this.#forceUpdateLayout();\n    ZoomManager.instance().addEventListener(ZoomManagerEvents.ZOOM_CHANGED, this.onZoomChanged, this);\n  }\n\n  override willHide(): void {\n    super.willHide();\n    ZoomManager.instance().removeEventListener(ZoomManagerEvents.ZOOM_CHANGED, this.onZoomChanged, this);\n  }\n\n  override onResize(): void {\n    this.#maybeAutoAdjustOrientation();\n    this.#updateLayout();\n  }\n\n  override onLayout(): void {\n    this.#updateLayout();\n  }\n\n  override calculateConstraints(): Geometry.Constraints {\n    if (this.#showMode === ShowMode.ONLY_MAIN) {\n      return this.#mainWidget ? this.#mainWidget.constraints() : new Geometry.Constraints();\n    }\n    if (this.#showMode === ShowMode.ONLY_SIDEBAR) {\n      return this.#sidebarWidget ? this.#sidebarWidget.constraints() : new Geometry.Constraints();\n    }\n\n    let mainConstraints: Geometry.Constraints =\n        this.#mainWidget ? this.#mainWidget.constraints() : new Geometry.Constraints();\n    let sidebarConstraints: Geometry.Constraints =\n        this.#sidebarWidget ? this.#sidebarWidget.constraints() : new Geometry.Constraints();\n    const min = MinPadding;\n    if (this.#isVertical) {\n      mainConstraints = mainConstraints.widthToMax(min).addWidth(1);  // 1 for splitter\n      sidebarConstraints = sidebarConstraints.widthToMax(min);\n      return mainConstraints.addWidth(sidebarConstraints).heightToMax(sidebarConstraints);\n    }\n    mainConstraints = mainConstraints.heightToMax(min).addHeight(1);  // 1 for splitter\n    sidebarConstraints = sidebarConstraints.heightToMax(min);\n    return mainConstraints.widthToMax(sidebarConstraints).addHeight(sidebarConstraints);\n  }\n\n  #maybeAutoAdjustOrientation(): void {\n    if (this.#autoAdjustOrientation) {\n      const width = this.isVertical() ? this.#totalSizeCSS : this.#totalSizeOtherDimensionCSS;\n      const height = this.isVertical() ? this.#totalSizeOtherDimensionCSS : this.#totalSizeCSS;\n      if (width <= 600 && height >= 600) {\n        this.setVertical(false);\n      } else {\n        this.setVertical(true);\n      }\n    }\n  }\n\n  #onResizeStart(): void {\n    this.#resizeStartSizeDIP = this.#sidebarSizeDIP;\n  }\n\n  #onResizeUpdate(event: Common.EventTarget.EventTargetEvent<ResizeUpdatePositionEvent>): void {\n    const offset = event.data.currentPosition - event.data.startPosition;\n    const offsetDIP = ZoomManager.instance().cssToDIP(offset);\n    const newSizeDIP =\n        this.#secondIsSidebar ? this.#resizeStartSizeDIP - offsetDIP : this.#resizeStartSizeDIP + offsetDIP;\n    const constrainedSizeDIP = this.#applyConstraints(newSizeDIP, true);\n    this.#savedSidebarSizeDIP = constrainedSizeDIP;\n    this.#saveSetting();\n    this.#setSidebarSizeDIP(constrainedSizeDIP, false, true);\n    if (this.isVertical()) {\n      this.#savedVerticalMainSize = this.#totalSizeDIP() - this.#sidebarSizeDIP;\n    } else {\n      this.#savedHorizontalMainSize = this.#totalSizeDIP() - this.#sidebarSizeDIP;\n    }\n  }\n\n  #onResizeEnd(): void {\n    this.#resizeStartSizeDIP = 0;\n  }\n\n  hideDefaultResizer(noSplitter?: boolean): void {\n    this.#resizerElement.classList.toggle('hidden', Boolean(noSplitter));\n    this.uninstallResizer(this.#resizerElement);\n    this.#sidebarElement.classList.toggle('no-default-splitter', Boolean(noSplitter));\n  }\n\n  installResizer(resizerElement: Element): void {\n    this.#resizerWidget.addElement((resizerElement as HTMLElement));\n  }\n\n  uninstallResizer(resizerElement: Element): void {\n    this.#resizerWidget.removeElement((resizerElement as HTMLElement));\n  }\n\n  toggleResizer(resizer: Element, on: boolean): void {\n    if (on) {\n      this.installResizer(resizer);\n    } else {\n      this.uninstallResizer(resizer);\n    }\n  }\n\n  #settingForOrientation(): SettingForOrientation|null {\n    const state = this.setting ? this.setting.get() : {};\n    const orientationState = this.#isVertical ? state.vertical : state.horizontal;\n    return orientationState ?? null;\n  }\n\n  #preferredSidebarSizeDIP(): number {\n    let size: number = this.#savedSidebarSizeDIP;\n    if (!size) {\n      size = this.#isVertical ? this.#defaultSidebarWidth : this.#defaultSidebarHeight;\n      // If we have default value in percents, calculate it on first use.\n      if (0 < size && size < 1) {\n        size *= this.#totalSizeDIP();\n      }\n    }\n    return size;\n  }\n\n  #restoreSidebarSizeFromSettings(): void {\n    const settingForOrientation = this.#settingForOrientation();\n    this.#savedSidebarSizeDIP = settingForOrientation ? settingForOrientation.size : 0;\n  }\n\n  #restoreAndApplyShowModeFromSettings(): void {\n    const orientationState = this.#settingForOrientation();\n    this.#savedShowMode = orientationState?.showMode ? orientationState.showMode : this.#showMode;\n    this.#showMode = this.#savedShowMode;\n\n    switch (this.#savedShowMode) {\n      case ShowMode.BOTH:\n        this.showBoth();\n        break;\n      case ShowMode.ONLY_MAIN:\n        this.hideSidebar();\n        break;\n      case ShowMode.ONLY_SIDEBAR:\n        this.hideMain();\n        break;\n    }\n  }\n\n  #saveShowModeToSettings(): void {\n    this.#savedShowMode = this.#showMode;\n    this.#saveSetting();\n  }\n\n  #saveSetting(): void {\n    if (!this.setting) {\n      return;\n    }\n    const state = this.setting.get();\n    const orientationState = (this.#isVertical ? state.vertical : state.horizontal) || {} as SettingForOrientation;\n\n    orientationState.size = this.#savedSidebarSizeDIP;\n    if (this.#shouldSaveShowMode) {\n      orientationState.showMode = this.#savedShowMode;\n    }\n\n    if (this.#isVertical) {\n      state.vertical = orientationState;\n    } else {\n      state.horizontal = orientationState;\n    }\n    this.setting.set(state);\n  }\n\n  #forceUpdateLayout(): void {\n    // Force layout even if sidebar size does not change.\n    this.#sidebarSizeDIP = -1;\n    this.#updateLayout();\n  }\n\n  onZoomChanged(): void {\n    this.#forceUpdateLayout();\n  }\n\n  createShowHideSidebarButton(\n      showTitle: Common.UIString.LocalizedString, hideTitle: Common.UIString.LocalizedString,\n      shownString: Common.UIString.LocalizedString, hiddenString: Common.UIString.LocalizedString,\n      jslogContext?: string): ToolbarButton {\n    this.#showSidebarButtonTitle = showTitle;\n    this.#hideSidebarButtonTitle = hideTitle;\n    this.#shownSidebarString = shownString;\n    this.#hiddenSidebarString = hiddenString;\n    this.#showHideSidebarButton = new ToolbarButton('', 'right-panel-open');\n    this.#showHideSidebarButton.addEventListener(ToolbarButton.Events.CLICK, buttonClicked, this);\n    if (jslogContext) {\n      this.#showHideSidebarButton.element.setAttribute(\n          'jslog', `${VisualLogging.toggleSubpane().track({click: true}).context(jslogContext)}`);\n    }\n    this.#updateShowHideSidebarButton();\n\n    function buttonClicked(this: SplitWidget): void {\n      this.toggleSidebar();\n    }\n\n    return this.#showHideSidebarButton;\n  }\n\n  /**\n   * @returns true if this call makes the sidebar visible, and false otherwise.\n   */\n  toggleSidebar(): boolean {\n    if (this.#showMode !== ShowMode.BOTH) {\n      this.showBoth(true);\n      ARIAUtils.LiveAnnouncer.alert(this.#shownSidebarString);\n      return true;\n    }\n    this.hideSidebar(true);\n    ARIAUtils.LiveAnnouncer.alert(this.#hiddenSidebarString);\n    return false;\n  }\n\n  #updateShowHideSidebarButton(): void {\n    if (!this.#showHideSidebarButton) {\n      return;\n    }\n    const sidebarHidden = this.#showMode === ShowMode.ONLY_MAIN;\n    let glyph = '';\n    if (sidebarHidden) {\n      glyph = this.isVertical() ? (this.isSidebarSecond() ? 'right-panel-open' : 'left-panel-open') :\n                                  (this.isSidebarSecond() ? 'bottom-panel-open' : 'top-panel-open');\n    } else {\n      glyph = this.isVertical() ? (this.isSidebarSecond() ? 'right-panel-close' : 'left-panel-close') :\n                                  (this.isSidebarSecond() ? 'bottom-panel-close' : 'top-panel-close');\n    }\n    this.#showHideSidebarButton.setGlyph(glyph);\n    this.#showHideSidebarButton.setTitle(sidebarHidden ? this.#showSidebarButtonTitle : this.#hideSidebarButtonTitle);\n  }\n}\n\nexport class SplitWidgetElement extends WidgetElement<SplitWidget> {\n  static readonly observedAttributes = ['direction', 'sidebar-position', 'sidebar-initial-size', 'sidebar-visibility'];\n\n  override createWidget(): SplitWidget {\n    const vertical = this.getAttribute('direction') === 'column';\n    const autoAdjustOrientation = this.getAttribute('direction') === 'auto';\n    const secondIsSidebar = this.getAttribute('sidebar-position') === 'second';\n    const settingName = this.getAttribute('name') ?? undefined;\n    const sidebarSize = parseInt(this.getAttribute('sidebar-initial-size') || '', 10);\n    const defaultSidebarWidth = !isNaN(sidebarSize) ? sidebarSize : undefined;\n    const defaultSidebarHeight = !isNaN(sidebarSize) ? sidebarSize : undefined;\n    const widget = new SplitWidget(\n        vertical, secondIsSidebar, settingName, defaultSidebarWidth, defaultSidebarHeight,\n        /* constraintsInDip=*/ false, this);\n    if (this.getAttribute('sidebar-initial-size') === 'minimized') {\n      widget.setSidebarMinimized(true);\n    }\n    if (autoAdjustOrientation) {\n      widget.setAutoAdjustOrientation(true);\n    }\n    const sidebarHidden = this.getAttribute('sidebar-visibility') === 'hidden';\n    if (sidebarHidden) {\n      widget.hideSidebar();\n    }\n    widget.addEventListener(Events.SHOW_MODE_CHANGED, () => {\n      this.dispatchEvent(new CustomEvent('change', {detail: widget.showMode()}));\n    });\n\n    return widget;\n  }\n\n  attributeChangedCallback(name: string, _oldValue: string, newValue: string): void {\n    const widget = Widget.get(this) as SplitWidget | null;\n    if (!widget) {\n      return;\n    }\n    if (name === 'direction') {\n      widget.setVertical(newValue === 'column');\n      widget.setAutoAdjustOrientation(newValue === 'auto');\n    } else if (name === 'sidebar-position') {\n      widget.setSecondIsSidebar(newValue === 'second');\n    } else if (name === 'sidebar-visibility') {\n      if (newValue === 'hidden') {\n        widget.hideSidebar();\n      } else {\n        widget.showBoth();\n      }\n    }\n  }\n}\n\ncustomElements.define('devtools-split-view', SplitWidgetElement);\n\nexport const enum ShowMode {\n  BOTH = 'Both',\n  ONLY_MAIN = 'OnlyMain',\n  ONLY_SIDEBAR = 'OnlySidebar',\n}\n\nexport const enum Events {\n  SIDEBAR_SIZE_CHANGED = 'SidebarSizeChanged',\n  SHOW_MODE_CHANGED = 'ShowModeChanged',\n}\n\nexport interface EventTypes {\n  [Events.SIDEBAR_SIZE_CHANGED]: number;\n  [Events.SHOW_MODE_CHANGED]: string;\n}\n\nconst MinPadding = 20;\nexport interface SettingForOrientation {\n  showMode: ShowMode;\n  size: number;\n}\n\nconst suppressUnused = function(_value: unknown): void {};\n", "// Copyright 2014 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as Common from '../../core/common/common.js';\n\nimport {elementDragStart} from './UIUtils.js';\n\nexport class ResizerWidget extends Common.ObjectWrapper.ObjectWrapper<EventTypes> {\n  #isEnabled = true;\n  #elements = new Set<HTMLElement>();\n  readonly #installDragOnMouseDownBound: (event: Event) => false | undefined;\n  #cursor = 'nwse-resize';\n  #startX?: number;\n  #startY?: number;\n\n  constructor() {\n    super();\n\n    this.#installDragOnMouseDownBound = this.#installDragOnMouseDown.bind(this);\n  }\n\n  isEnabled(): boolean {\n    return this.#isEnabled;\n  }\n\n  setEnabled(enabled: boolean): void {\n    this.#isEnabled = enabled;\n    this.updateElementCursors();\n  }\n\n  elements(): Element[] {\n    return [...this.#elements];\n  }\n\n  addElement(element: HTMLElement): void {\n    if (!this.#elements.has(element)) {\n      this.#elements.add(element);\n      element.addEventListener('pointerdown', this.#installDragOnMouseDownBound, false);\n      this.#updateElementCursor(element);\n    }\n  }\n\n  removeElement(element: HTMLElement): void {\n    if (this.#elements.has(element)) {\n      this.#elements.delete(element);\n      element.removeEventListener('pointerdown', this.#installDragOnMouseDownBound, false);\n      element.style.removeProperty('cursor');\n    }\n  }\n\n  updateElementCursors(): void {\n    this.#elements.forEach(this.#updateElementCursor.bind(this));\n  }\n\n  #updateElementCursor(element: HTMLElement): void {\n    if (this.#isEnabled) {\n      element.style.setProperty('cursor', this.cursor());\n      element.style.setProperty('touch-action', 'none');\n    } else {\n      element.style.removeProperty('cursor');\n      element.style.removeProperty('touch-action');\n    }\n  }\n\n  cursor(): string {\n    return this.#cursor;\n  }\n\n  setCursor(cursor: string): void {\n    this.#cursor = cursor;\n    this.updateElementCursors();\n  }\n\n  #installDragOnMouseDown(event: Event): false|undefined {\n    const element = (event.target as HTMLElement);\n    // Only handle drags of the nodes specified.\n    if (!this.#elements.has(element)) {\n      return false;\n    }\n    elementDragStart(element, this.#dragStart.bind(this), event => {\n      this.#drag(event);\n    }, this.#dragEnd.bind(this), this.cursor(), event);\n    return undefined;\n  }\n\n  #dragStart(event: MouseEvent): boolean {\n    if (!this.#isEnabled) {\n      return false;\n    }\n    this.#startX = event.pageX;\n    this.#startY = event.pageY;\n    this.sendDragStart(this.#startX, this.#startY);\n    return true;\n  }\n\n  sendDragStart(x: number, y: number): void {\n    this.dispatchEventToListeners(Events.RESIZE_START, {startX: x, currentX: x, startY: y, currentY: y});\n  }\n\n  #drag(event: MouseEvent): boolean {\n    if (!this.#isEnabled) {\n      this.#dragEnd(event);\n      return true;  // Cancel drag.\n    }\n    this.sendDragMove((this.#startX as number), event.pageX, (this.#startY as number), event.pageY, event.shiftKey);\n    event.preventDefault();\n    return false;  // Continue drag.\n  }\n\n  sendDragMove(startX: number, currentX: number, startY: number, currentY: number, shiftKey: boolean): void {\n    this.dispatchEventToListeners(Events.RESIZE_UPDATE_XY, {startX, currentX, startY, currentY, shiftKey});\n  }\n\n  #dragEnd(_event: MouseEvent): void {\n    this.dispatchEventToListeners(Events.RESIZE_END);\n    this.#startX = undefined;\n    this.#startY = undefined;\n  }\n}\n\nexport const enum Events {\n  RESIZE_START = 'ResizeStart',\n  RESIZE_UPDATE_XY = 'ResizeUpdateXY',\n  RESIZE_UPDATE_POSITION = 'ResizeUpdatePosition',\n  RESIZE_END = 'ResizeEnd',\n}\n\nexport interface ResizeStartXYEvent {\n  startX: number;\n  currentX: number;\n  startY: number;\n  currentY: number;\n}\n\nexport interface ResizeStartPositionEvent {\n  startPosition: number;\n  currentPosition: number;\n}\n\nexport interface ResizeUpdateXYEvent {\n  startX: number;\n  currentX: number;\n  startY: number;\n  currentY: number;\n  shiftKey: boolean;\n}\n\nexport interface ResizeUpdatePositionEvent {\n  startPosition: number;\n  currentPosition: number;\n  shiftKey: boolean;\n}\n\nexport interface EventTypes {\n  [Events.RESIZE_START]: ResizeStartXYEvent|ResizeStartPositionEvent;\n  [Events.RESIZE_UPDATE_XY]: ResizeUpdateXYEvent;\n  [Events.RESIZE_UPDATE_POSITION]: ResizeUpdatePositionEvent;\n  [Events.RESIZE_END]: void;\n}\n\nexport class SimpleResizerWidget extends ResizerWidget {\n  #isVertical = true;\n\n  isVertical(): boolean {\n    return this.#isVertical;\n  }\n\n  /**\n   * Vertical widget resizes height (along y-axis).\n   */\n  setVertical(vertical: boolean): void {\n    this.#isVertical = vertical;\n    this.updateElementCursors();\n  }\n\n  override cursor(): string {\n    return this.#isVertical ? 'ns-resize' : 'ew-resize';\n  }\n\n  override sendDragStart(x: number, y: number): void {\n    const position = this.#isVertical ? y : x;\n    this.dispatchEventToListeners(Events.RESIZE_START, {startPosition: position, currentPosition: position});\n  }\n\n  override sendDragMove(startX: number, currentX: number, startY: number, currentY: number, shiftKey: boolean): void {\n    if (this.#isVertical) {\n      this.dispatchEventToListeners(\n          Events.RESIZE_UPDATE_POSITION, {startPosition: startY, currentPosition: currentY, shiftKey});\n    } else {\n      this.dispatchEventToListeners(\n          Events.RESIZE_UPDATE_POSITION, {startPosition: startX, currentPosition: currentX, shiftKey});\n    }\n  }\n}\n", "// Copyright 2025 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n// IMPORTANT: this file is auto generated. Please do not edit this file.\n/* istanbul ignore file */\nexport default `/*\n * Copyright (C) 2011 Google Inc. All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are\n * met:\n *\n * 1. Redistributions of source code must retain the above copyright\n * notice, this list of conditions and the following disclaimer.\n *\n * 2. Redistributions in binary form must reproduce the above\n * copyright notice, this list of conditions and the following disclaimer\n * in the documentation and/or other materials provided with the\n * distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY GOOGLE INC. AND ITS CONTRIBUTORS\n * \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n * A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL GOOGLE INC.\n * OR ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n * THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n.shadow-split-widget {\n  display: flex;\n  overflow: hidden;\n}\n\n.shadow-split-widget-contents {\n  display: flex;\n  position: relative;\n  flex-direction: column;\n  contain: layout size style;\n}\n\n.shadow-split-widget-sidebar {\n  flex: none;\n}\n\n.shadow-split-widget-main,\n.shadow-split-widget-sidebar.maximized {\n  flex: auto;\n}\n\n.shadow-split-widget.hbox > .shadow-split-widget-resizer {\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  width: 6px;\n  z-index: 4000;\n}\n\n.shadow-split-widget.vbox > .shadow-split-widget-resizer {\n  position: absolute;\n  left: 0;\n  right: 0;\n  height: 6px;\n  z-index: 4000;\n}\n\n.shadow-split-widget.vbox > .shadow-split-widget-sidebar.no-default-splitter {\n  border: 0 !important; /* stylelint-disable-line declaration-no-important */\n}\n\n.shadow-split-widget.vbox > .shadow-split-widget-sidebar:not(.maximized) {\n  border: 0;\n  border-top: 1px solid var(--sys-color-divider);\n}\n\n.shadow-split-widget.hbox > .shadow-split-widget-sidebar:not(.maximized) {\n  border: 0;\n  border-left: 1px solid var(--sys-color-divider);\n}\n\n.shadow-split-widget.vbox > .shadow-split-widget-sidebar:first-child:not(.maximized) {\n  border: 0;\n  border-bottom: 1px solid var(--sys-color-divider);\n}\n\n.shadow-split-widget.hbox > .shadow-split-widget-sidebar:first-child:not(.maximized) {\n  border: 0;\n  border-right: 1px solid var(--sys-color-divider);\n}\n\n:host-context(.disable-resizer-for-elements-hack) .shadow-split-widget-resizer {\n  pointer-events: none;\n}\n\n:host {\n  display: flex;\n}\n\n/*# sourceURL=${import.meta.resolve('./splitWidget.css')} */`;", "// Copyright 2014 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as Common from '../../core/common/common.js';\nimport type * as Host from '../../core/host/host.js';\n\nlet zoomManagerInstance: ZoomManager|undefined;\n\nexport class ZoomManager extends Common.ObjectWrapper.ObjectWrapper<EventTypes> {\n  private frontendHost: Host.InspectorFrontendHostAPI.InspectorFrontendHostAPI;\n  #zoomFactor: number;\n\n  private constructor(window: Window, frontendHost: Host.InspectorFrontendHostAPI.InspectorFrontendHostAPI) {\n    super();\n    this.frontendHost = frontendHost;\n    this.#zoomFactor = this.frontendHost.zoomFactor();\n    window.addEventListener('resize', this.onWindowResize.bind(this), true);\n  }\n\n  static instance(opts: {\n    forceNew: boolean|null,\n    win: Window|null,\n    frontendHost: Host.InspectorFrontendHostAPI.InspectorFrontendHostAPI|null,\n  } = {forceNew: null, win: null, frontendHost: null}): ZoomManager {\n    const {forceNew, win, frontendHost} = opts;\n    if (!zoomManagerInstance || forceNew) {\n      if (!win || !frontendHost) {\n        throw new Error(\n            `Unable to create zoom manager: window and frontendHost must be provided: ${new Error().stack}`);\n      }\n\n      zoomManagerInstance = new ZoomManager(win, frontendHost);\n    }\n\n    return zoomManagerInstance;\n  }\n\n  static removeInstance(): void {\n    zoomManagerInstance = undefined;\n  }\n\n  zoomFactor(): number {\n    return this.#zoomFactor;\n  }\n\n  cssToDIP(value: number): number {\n    return value * this.#zoomFactor;\n  }\n\n  dipToCSS(valueDIP: number): number {\n    return valueDIP / this.#zoomFactor;\n  }\n\n  private onWindowResize(): void {\n    const oldZoomFactor = this.#zoomFactor;\n    this.#zoomFactor = this.frontendHost.zoomFactor();\n    if (oldZoomFactor !== this.#zoomFactor) {\n      this.dispatchEventToListeners(Events.ZOOM_CHANGED, {from: oldZoomFactor, to: this.#zoomFactor});\n    }\n  }\n}\n\nexport const enum Events {\n  ZOOM_CHANGED = 'ZoomChanged',\n}\n\nexport interface ZoomChangedEvent {\n  from: number;\n  to: number;\n}\n\nexport interface EventTypes {\n  [Events.ZOOM_CHANGED]: ZoomChangedEvent;\n}\n", "// Copyright 2010 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\n/* eslint-disable @devtools/no-imperative-dom-api, @devtools/no-lit-render-outside-of-view */\n\nimport './Toolbar.js';\n\nimport * as Common from '../../core/common/common.js';\nimport * as i18n from '../../core/i18n/i18n.js';\nimport * as Platform from '../../core/platform/platform.js';\nimport * as Annotations from '../../models/annotations/annotations.js';\nimport * as Geometry from '../../models/geometry/geometry.js';\nimport * as Buttons from '../../ui/components/buttons/buttons.js';\nimport {type LitTemplate, render} from '../../ui/lit/lit.js';\nimport * as VisualLogging from '../../ui/visual_logging/visual_logging.js';\nimport {createIcon, Icon} from '../kit/kit.js';\n\nimport * as ARIAUtils from './ARIAUtils.js';\nimport {ContextMenu} from './ContextMenu.js';\nimport tabbedPaneStyles from './tabbedPane.css.js';\nimport type {Toolbar} from './Toolbar.js';\nimport {Tooltip} from './Tooltip.js';\nimport {installDragHandle} from './UIUtils.js';\nimport {VBox, type Widget} from './Widget.js';\nimport {Events as ZoomManagerEvents, ZoomManager} from './ZoomManager.js';\n\nconst UIStrings = {\n  /**\n   * @description The aria label for the button to open more tabs at the right tabbed pane in Elements tools\n   */\n  moreTabs: 'More tabs',\n  /**\n   * @description Text in Tabbed Pane\n   * @example {tab} PH1\n   */\n  closeS: 'Close {PH1}',\n  /**\n   * @description Text to close something\n   */\n  close: 'Close',\n  /**\n   * @description Text on a menu option to close other drawers when right click on a drawer title\n   */\n  closeOthers: 'Close others',\n  /**\n   * @description Text on a menu option to close the drawer to the right when right click on a drawer title\n   */\n  closeTabsToTheRight: 'Close tabs to the right',\n  /**\n   * @description Text on a menu option to close all the drawers except Console when right click on a drawer title\n   */\n  closeAll: 'Close all',\n  /**\n   * @description Indicates that a tab contains a preview feature (i.e., a beta / experimental feature).\n   */\n  previewFeature: 'Preview feature',\n  /**\n   * @description Indicates that a tab contains annotation(s).\n   */\n  panelContainsAnnotation: 'This panel has one or more annotations',\n  /**\n   * @description Text to move a tab forwar.\n   */\n  moveTabRight: 'Move right',\n  /**\n   * @description Text to move a tab backward.\n   */\n  moveTabLeft: 'Move left',\n} as const;\n\nconst str_ = i18n.i18n.registerUIStrings('ui/legacy/TabbedPane.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\n\nexport interface TabInfo {\n  id: string;\n  title: string;\n  view: Widget;\n  tabTooltip?: string;\n  isCloseable?: boolean;\n  previewFeature?: boolean;\n  index?: number;\n  jslogContext?: string;\n  enabled?: boolean;\n  selected?: boolean;\n}\n\nexport class TabbedPane extends Common.ObjectWrapper.eventMixin<EventTypes, typeof VBox>(VBox) {\n  readonly #headerElement: HTMLElement;\n  private readonly headerContentsElement: HTMLElement;\n  tabSlider: HTMLDivElement;\n  readonly tabsElement: HTMLElement;\n  readonly #contentElement: HTMLElement;\n  #tabs: TabbedPaneTab[];\n  private readonly tabsHistory: TabbedPaneTab[];\n  tabsById: Map<string, TabbedPaneTab>;\n  private currentTabLocked: boolean;\n  private autoSelectFirstItemOnShow: boolean;\n  private triggerDropDownTimeout: number|null;\n  private dropDownButton: HTMLDivElement;\n  private currentDevicePixelRatio: number;\n  private shrinkableTabs?: boolean;\n  private verticalTabLayout?: boolean;\n  private closeableTabs?: boolean;\n  private delegate?: TabbedPaneTabDelegate;\n  private currentTab?: TabbedPaneTab;\n  private sliderEnabled?: boolean;\n  private placeholderElement?: Element;\n  private focusedPlaceholderElement?: Element;\n  private placeholderContainerElement?: HTMLElement;\n  private lastSelectedOverflowTab?: TabbedPaneTab;\n  private measuredDropDownButtonWidth?: number;\n  #leftToolbar?: Toolbar;\n  #rightToolbar?: Toolbar;\n  allowTabReorder?: boolean;\n  private automaticReorder?: boolean;\n\n  constructor(element?: HTMLElement) {\n    super(element, {useShadowDom: true});\n    this.registerRequiredCSS(tabbedPaneStyles);\n    this.element.classList.add('tabbed-pane');\n    this.contentElement.classList.add('tabbed-pane-shadow');\n    this.contentElement.tabIndex = -1;\n    this.setDefaultFocusedElement(this.contentElement);\n    this.#headerElement = this.contentElement.createChild('div', 'tabbed-pane-header');\n    this.headerContentsElement = this.#headerElement.createChild('div', 'tabbed-pane-header-contents');\n    this.tabSlider = document.createElement('div');\n    this.tabSlider.classList.add('tabbed-pane-tab-slider');\n    this.tabsElement = this.headerContentsElement.createChild('div', 'tabbed-pane-header-tabs');\n    this.tabsElement.setAttribute('role', 'tablist');\n    this.tabsElement.addEventListener('keydown', this.keyDown.bind(this), false);\n    this.#contentElement = this.contentElement.createChild('div', 'tabbed-pane-content');\n    this.#contentElement.createChild('slot');\n    this.#tabs = [];\n    this.tabsHistory = [];\n    this.tabsById = new Map();\n    this.currentTabLocked = false;\n    this.autoSelectFirstItemOnShow = true;\n\n    this.triggerDropDownTimeout = null;\n    this.dropDownButton = this.createDropDownButton();\n    this.currentDevicePixelRatio = window.devicePixelRatio;\n    ZoomManager.instance().addEventListener(ZoomManagerEvents.ZOOM_CHANGED, this.zoomChanged, this);\n    this.makeTabSlider();\n\n    if (Annotations.AnnotationRepository.annotationsEnabled()) {\n      Annotations.AnnotationRepository.instance().addEventListener(\n          Annotations.Events.ANNOTATION_ADDED, this.#onUpdateAnnotations, this);\n      Annotations.AnnotationRepository.instance().addEventListener(\n          Annotations.Events.ANNOTATION_DELETED, this.#onUpdateAnnotations, this);\n      Annotations.AnnotationRepository.instance().addEventListener(\n          Annotations.Events.ALL_ANNOTATIONS_DELETED, this.#onUpdateAnnotations, this);\n    }\n  }\n\n  setAccessibleName(name: string): void {\n    ARIAUtils.setLabel(this.tabsElement, name);\n  }\n\n  setCurrentTabLocked(locked: boolean): void {\n    this.currentTabLocked = locked;\n    this.#headerElement.classList.toggle('locked', this.currentTabLocked);\n  }\n\n  setAutoSelectFirstItemOnShow(autoSelect: boolean): void {\n    this.autoSelectFirstItemOnShow = autoSelect;\n  }\n\n  get visibleView(): Widget|null {\n    return this.currentTab ? this.currentTab.view : null;\n  }\n\n  tabIds(): string[] {\n    return this.#tabs.map(tab => tab.id);\n  }\n\n  tabIndex(tabId: string): number {\n    return this.#tabs.findIndex(tab => tab.id === tabId);\n  }\n\n  tabViews(): Widget[] {\n    return this.#tabs.map(tab => tab.view);\n  }\n\n  tabView(tabId: string): Widget|null {\n    const tab = this.tabsById.get(tabId);\n    return tab ? tab.view : null;\n  }\n\n  get selectedTabId(): string|null {\n    return this.currentTab ? this.currentTab.id : null;\n  }\n\n  setShrinkableTabs(shrinkableTabs: boolean): void {\n    this.shrinkableTabs = shrinkableTabs;\n  }\n\n  makeVerticalTabLayout(): void {\n    this.verticalTabLayout = true;\n    this.setTabSlider(false);\n    this.contentElement.classList.add('vertical-tab-layout');\n    this.invalidateConstraints();\n  }\n\n  setCloseableTabs(closeableTabs: boolean): void {\n    this.closeableTabs = closeableTabs;\n  }\n\n  override focus(): void {\n    if (this.visibleView) {\n      this.visibleView.focus();\n    } else {\n      this.contentElement.focus();\n    }\n  }\n\n  focusSelectedTabHeader(): void {\n    const selectedTab = this.currentTab;\n    if (selectedTab) {\n      selectedTab.tabElement.focus();\n    }\n  }\n\n  headerElement(): Element {\n    return this.#headerElement;\n  }\n\n  tabbedPaneContentElement(): Element {\n    return this.#contentElement;\n  }\n\n  setTabDelegate(delegate: TabbedPaneTabDelegate): void {\n    const tabs = this.#tabs.slice();\n    for (let i = 0; i < tabs.length; ++i) {\n      tabs[i].setDelegate(delegate);\n    }\n    this.delegate = delegate;\n  }\n\n  appendTab(\n      id: string, tabTitle: string, view: Widget, tabTooltip?: string, userGesture?: boolean, isCloseable?: boolean,\n      isPreviewFeature?: boolean, index?: number, jslogContext?: string): void {\n    const closeable = typeof isCloseable === 'boolean' ? isCloseable : Boolean(this.closeableTabs);\n    const tab =\n        new TabbedPaneTab(this, id, tabTitle, closeable, Boolean(isPreviewFeature), view, tabTooltip, jslogContext);\n    tab.setDelegate((this.delegate as TabbedPaneTabDelegate));\n    console.assert(!this.tabsById.has(id), `Tabbed pane already contains a tab with id '${id}'`);\n    this.tabsById.set(id, tab);\n    tab.tabElement.tabIndex = -1;\n    tab.tabElement.setAttribute(\n        'jslog', `${VisualLogging.panelTabHeader().track({click: true, drag: true}).context(tab.jslogContext)}`);\n    if (index !== undefined) {\n      this.#tabs.splice(index, 0, tab);\n    } else {\n      this.#tabs.push(tab);\n    }\n    this.tabsHistory.push(tab);\n    if (this.tabsHistory[0] === tab && this.isShowing()) {\n      this.selectTab(tab.id, userGesture);\n    }\n    this.requestUpdate();\n  }\n\n  closeTab(id: string, userGesture?: boolean): void {\n    this.closeTabs([id], userGesture);\n  }\n\n  closeTabs(ids: string[], userGesture?: boolean): void {\n    if (ids.length === 0) {\n      return;\n    }\n\n    const focused = this.hasFocus();\n    for (let i = 0; i < ids.length; ++i) {\n      this.#closeTab(ids[i], userGesture);\n    }\n    this.requestUpdate();\n    if (this.tabsHistory.length) {\n      this.selectTab(this.tabsHistory[0].id, false);\n    }\n    if (focused) {\n      this.focus();\n    }\n  }\n\n  #closeTab(id: string, userGesture?: boolean): true|undefined {\n    const tab = this.tabsById.get(id);\n    if (!tab) {\n      return;\n    }\n    if (userGesture && !tab.closeable) {\n      return;\n    }\n    if (this.currentTab?.id === id) {\n      this.hideCurrentTab();\n    }\n\n    this.tabsById.delete(id);\n\n    this.tabsHistory.splice(this.tabsHistory.indexOf(tab), 1);\n    this.#tabs.splice(this.#tabs.indexOf(tab), 1);\n    if (tab.shown) {\n      this.hideTabElement(tab);\n    }\n\n    const eventData: EventData = {prevTabId: undefined, tabId: id, view: tab.view, isUserGesture: userGesture};\n    this.dispatchEventToListeners(Events.TabClosed, eventData);\n    return true;\n  }\n\n  hasTab(tabId: string): boolean {\n    return this.tabsById.has(tabId);\n  }\n\n  otherTabs(id: string): string[] {\n    const result = [];\n    for (let i = 0; i < this.#tabs.length; ++i) {\n      if (this.#tabs[i].id !== id) {\n        result.push(this.#tabs[i].id);\n      }\n    }\n    return result;\n  }\n\n  tabsToTheRight(id: string): string[] {\n    let index = -1;\n    for (let i = 0; i < this.#tabs.length; ++i) {\n      if (this.tabs[i].id === id) {\n        index = i;\n        break;\n      }\n    }\n    if (index === -1) {\n      return [];\n    }\n    return this.#tabs.slice(index + 1).map(function(tab) {\n      return tab.id;\n    });\n  }\n\n  private viewHasFocus(): boolean {\n    if (this.visibleView?.hasFocus()) {\n      return true;\n    }\n    const root = this.contentElement.getComponentRoot();\n    return root instanceof Document && this.contentElement === root.activeElement;\n  }\n\n  selectTab(id: string, userGesture?: boolean, forceFocus?: boolean): boolean {\n    if (this.currentTabLocked) {\n      return false;\n    }\n    const focused = this.viewHasFocus();\n    const tab = this.tabsById.get(id);\n    if (!tab) {\n      return false;\n    }\n\n    this.lastSelectedOverflowTab = tab;\n\n    const eventData: EventData = {\n      prevTabId: this.currentTab ? this.currentTab.id : undefined,\n      tabId: id,\n      view: tab.view,\n      isUserGesture: userGesture,\n    };\n    this.dispatchEventToListeners(Events.TabInvoked, eventData);\n    if (this.currentTab?.id === id) {\n      return true;\n    }\n\n    this.suspendInvalidations();\n    this.hideCurrentTab();\n    this.showTab(tab);\n    this.resumeInvalidations();\n    this.currentTab = tab;\n\n    this.tabsHistory.splice(this.tabsHistory.indexOf(tab), 1);\n    this.tabsHistory.splice(0, 0, tab);\n\n    this.requestUpdate();\n    if (focused || forceFocus) {\n      this.focus();\n    }\n\n    this.dispatchEventToListeners(Events.TabSelected, eventData);\n    return true;\n  }\n\n  selectNextTab(): void {\n    const index = this.#tabs.indexOf((this.currentTab as TabbedPaneTab));\n    const nextIndex = Platform.NumberUtilities.mod(index + 1, this.#tabs.length);\n    this.selectTab(this.#tabs[nextIndex].id, true);\n  }\n\n  selectPrevTab(): void {\n    const index = this.#tabs.indexOf((this.currentTab as TabbedPaneTab));\n    const nextIndex = Platform.NumberUtilities.mod(index - 1, this.#tabs.length);\n    this.selectTab(this.#tabs[nextIndex].id, true);\n  }\n\n  getTabIndex(id: string): number {\n    const index = this.#tabs.indexOf((this.tabsById.get(id) as TabbedPaneTab));\n    return index;\n  }\n\n  moveTabBackward(id: string, index: number): void {\n    this.insertBefore((this.tabsById.get(id) as TabbedPaneTab), index - 1);\n    this.updateTabSlider();\n  }\n\n  moveTabForward(id: string, index: number): void {\n    this.insertBefore((this.tabsById.get(id) as TabbedPaneTab), index + 2);\n    this.updateTabSlider();\n  }\n\n  lastOpenedTabIds(tabsCount: number): string[] {\n    function tabToTabId(tab: TabbedPaneTab): string {\n      return tab.id;\n    }\n\n    return this.tabsHistory.slice(0, tabsCount).map(tabToTabId);\n  }\n\n  setTabIcon(id: string, icon: Icon|null): void {\n    const tab = this.tabsById.get(id);\n    if (!tab) {\n      return;\n    }\n    tab.setIcon(icon);\n    this.requestUpdate();\n  }\n\n  setTrailingTabIcon(id: string, icon: Icon|LitTemplate|null): void {\n    const tab = this.tabsById.get(id);\n    if (!tab) {\n      return;\n    }\n    tab.setSuffixElement(icon);\n  }\n\n  setSuffixElement(id: string, suffixElement: HTMLElement|LitTemplate|null): void {\n    const tab = this.tabsById.get(id);\n    if (!tab) {\n      return;\n    }\n    tab.setSuffixElement(suffixElement);\n    this.requestUpdate();\n  }\n\n  setBadge(id: string, content: string|null): void {\n    const badge = document.createElement('span');\n    badge.textContent = content;\n    badge.classList.add('badge');\n    this.setSuffixElement(id, content ? badge : null);\n  }\n\n  setTabEnabled(id: string, enabled: boolean): void {\n    const tab = this.tabsById.get(id);\n    if (tab) {\n      tab.tabElement.classList.toggle('disabled', !enabled);\n    }\n  }\n\n  tabIsDisabled(id: string): boolean {\n    return !this.tabIsEnabled(id);\n  }\n\n  tabIsEnabled(id: string): boolean {\n    const tab = this.tabsById.get(id);\n    const disabled = tab?.tabElement.classList.contains('disabled') ?? false;\n    return !disabled;\n  }\n\n  private zoomChanged(): void {\n    this.clearMeasuredWidths();\n    if (this.isShowing()) {\n      this.requestUpdate();\n    }\n  }\n\n  private clearMeasuredWidths(): void {\n    for (let i = 0; i < this.#tabs.length; ++i) {\n      delete this.#tabs[i].measuredWidth;\n    }\n  }\n\n  changeTabTitle(id: string, tabTitle: string, tabTooltip?: string): void {\n    const tab = this.tabsById.get(id);\n    if (tab && tabTooltip !== undefined) {\n      tab.tooltip = tabTooltip;\n    }\n    if (tab && tab.title !== tabTitle) {\n      tab.title = tabTitle;\n      ARIAUtils.setLabel(tab.tabElement, tabTitle);\n      this.requestUpdate();\n    }\n  }\n\n  changeTabView(id: string, view: Widget): void {\n    const tab = this.tabsById.get(id);\n    if (!tab || tab.view === view) {\n      return;\n    }\n\n    this.suspendInvalidations();\n    const isSelected = this.currentTab?.id === id;\n    const shouldFocus = tab.view.hasFocus();\n    if (isSelected) {\n      this.hideTab(tab);\n    }\n    tab.view = view;\n    if (isSelected) {\n      this.showTab(tab);\n    }\n    if (shouldFocus) {\n      tab.view.focus();\n    }\n    this.resumeInvalidations();\n  }\n\n  get tabs(): TabInfo[] {\n    return this.#tabs.map(tab => ({\n                            id: tab.id,\n                            title: tab.title,\n                            view: tab.view,\n                            tabTooltip: tab.tooltip,\n                            isCloseable: tab.closeable,\n                            previewFeature: tab.previewFeature,\n                            index: this.#tabs.indexOf(tab),\n                            jslogContext: tab.jslogContext,\n                            enabled: this.tabIsEnabled(tab.id),\n                            selected: this.currentTab?.id === tab.id,\n                          }));\n  }\n\n  set tabs(tabs: TabInfo[]) {\n    const newIds = new Set(tabs.map(tab => tab.id));\n    for (const id of this.tabsById.keys()) {\n      if (!newIds.has(id)) {\n        this.#closeTab(id);\n      }\n    }\n    let index = 0;\n    for (const tab of tabs) {\n      const existingTab = this.tabsById.get(tab.id);\n      if (existingTab) {\n        this.changeTabView(tab.id, tab.view);\n        this.changeTabTitle(tab.id, tab.title, tab.tabTooltip);\n        if (tab.isCloseable !== undefined) {\n          existingTab.closeable = tab.isCloseable;\n        }\n        if (tab.previewFeature !== undefined) {\n          existingTab.previewFeature = tab.previewFeature;\n        }\n        const currentIndex = this.#tabs.indexOf(existingTab);\n        if (currentIndex !== index) {\n          this.insertBefore(existingTab, index);\n        }\n      } else {\n        this.appendTab(\n            tab.id, tab.title, tab.view, tab.tabTooltip, /* userGesture=*/ false, tab.isCloseable, tab.previewFeature,\n            index, tab.jslogContext);\n      }\n      if (tab.enabled !== undefined) {\n        this.setTabEnabled(tab.id, tab.enabled);\n      }\n      if (tab.selected) {\n        this.selectTab(tab.id);\n      }\n      ++index;\n    }\n  }\n\n  override onResize(): void {\n    if (this.currentDevicePixelRatio !== window.devicePixelRatio) {\n      // Force recalculation of all tab widths on a DPI change\n      this.clearMeasuredWidths();\n      this.currentDevicePixelRatio = window.devicePixelRatio;\n    }\n    this.requestUpdate();\n  }\n\n  headerResized(): void {\n    this.requestUpdate();\n  }\n\n  override wasShown(): void {\n    super.wasShown();\n    const effectiveTab = this.currentTab || this.tabsHistory[0];\n    if (effectiveTab && this.autoSelectFirstItemOnShow) {\n      this.selectTab(effectiveTab.id);\n    }\n    this.requestUpdate();\n    this.dispatchEventToListeners(Events.PaneVisibilityChanged, {isVisible: true});\n  }\n\n  override wasHidden(): void {\n    this.dispatchEventToListeners(Events.PaneVisibilityChanged, {isVisible: false});\n  }\n\n  makeTabSlider(): void {\n    if (this.verticalTabLayout) {\n      return;\n    }\n    this.setTabSlider(true);\n  }\n\n  private setTabSlider(enable: boolean): void {\n    this.sliderEnabled = enable;\n    this.tabSlider.classList.toggle('enabled', enable);\n  }\n\n  override calculateConstraints(): Geometry.Constraints {\n    let constraints = super.calculateConstraints();\n    const minContentConstraints = new Geometry.Constraints(new Geometry.Size(0, 0), new Geometry.Size(50, 50));\n    constraints = constraints.widthToMax(minContentConstraints).heightToMax(minContentConstraints);\n    if (this.verticalTabLayout) {\n      constraints = constraints.addWidth(new Geometry.Constraints(new Geometry.Size(120, 0)));\n    } else {\n      constraints = constraints.addHeight(new Geometry.Constraints(new Geometry.Size(0, 30)));\n    }\n    return constraints;\n  }\n\n  setPlaceholderElement(element: Element, focusedElement?: Element): void {\n    this.placeholderElement = element;\n    if (focusedElement) {\n      this.focusedPlaceholderElement = focusedElement;\n    }\n    if (this.placeholderContainerElement) {\n      this.placeholderContainerElement.removeChildren();\n      this.placeholderContainerElement.appendChild(element);\n    }\n  }\n\n  async waitForTabElementUpdate(): Promise<void> {\n    this.performUpdate();\n  }\n\n  updateTabAnnotationIcons(): void {\n    if (!Annotations.AnnotationRepository.annotationsEnabled()) {\n      return;\n    }\n\n    const annotations = Annotations.AnnotationRepository.instance();\n    if (!annotations) {\n      return;\n    }\n\n    for (const tab of this.tabs) {\n      let primaryType = -1;\n      let secondaryType = -1;\n      switch (tab.id) {\n        case 'elements':\n          primaryType = Annotations.AnnotationType.ELEMENT_NODE;\n          secondaryType = Annotations.AnnotationType.STYLE_RULE;\n          break;\n        case 'network':\n          primaryType = Annotations.AnnotationType.NETWORK_REQUEST;\n          secondaryType = Annotations.AnnotationType.NETWORK_REQUEST_SUBPANEL_HEADERS;\n          break;\n      }\n\n      const showTabAnnotationIcon = annotations.getAnnotationDataByType(primaryType).length > 0 ||\n          annotations.getAnnotationDataByType(secondaryType).length > 0;\n      this.setTabAnnotationIcon(tab.id, showTabAnnotationIcon);\n    }\n  }\n\n  override performUpdate(): void {\n    if (!this.isShowing()) {\n      return;\n    }\n\n    if (!this.#tabs.length) {\n      this.#contentElement.classList.add('has-no-tabs');\n      if (this.placeholderElement && !this.placeholderContainerElement) {\n        this.placeholderContainerElement = this.#contentElement.createChild('div', 'tabbed-pane-placeholder fill');\n        this.placeholderContainerElement.appendChild(this.placeholderElement);\n        if (this.focusedPlaceholderElement) {\n          this.setDefaultFocusedElement(this.focusedPlaceholderElement);\n        }\n      }\n    } else {\n      this.#contentElement.classList.remove('has-no-tabs');\n      if (this.placeholderContainerElement) {\n        this.placeholderContainerElement.remove();\n        this.setDefaultFocusedElement(this.contentElement);\n        delete this.placeholderContainerElement;\n      }\n    }\n\n    this.measureDropDownButton();\n    this.adjustToolbarWidth();\n    this.updateWidths();\n    this.updateTabsDropDown();\n    this.updateTabSlider();\n    this.updateTabAnnotationIcons();\n  }\n\n  private adjustToolbarWidth(): void {\n    if (!this.#rightToolbar || !this.measuredDropDownButtonWidth) {\n      return;\n    }\n    const leftToolbarWidth = this.#leftToolbar?.getBoundingClientRect().width ?? 0;\n    const rightToolbarWidth = this.#rightToolbar.getBoundingClientRect().width;\n    const totalWidth = this.#headerElement.getBoundingClientRect().width;\n    if (!this.#rightToolbar.hasCompactLayout() &&\n        totalWidth - rightToolbarWidth - leftToolbarWidth < this.measuredDropDownButtonWidth + 10) {\n      this.#rightToolbar.setCompactLayout(true);\n    } else if (\n        this.#rightToolbar.hasCompactLayout() &&\n        // Estimate the right toolbar size in non-compact mode as 2 times its compact size.\n        totalWidth - 2 * rightToolbarWidth - leftToolbarWidth > this.measuredDropDownButtonWidth + 10) {\n      this.#rightToolbar.setCompactLayout(false);\n    }\n  }\n\n  private showTabElement(index: number, tab: TabbedPaneTab): void {\n    if (index >= this.tabsElement.children.length) {\n      this.tabsElement.appendChild(tab.tabElement);\n    } else {\n      this.tabsElement.insertBefore(tab.tabElement, this.tabsElement.children[index]);\n    }\n    tab.shown = true;\n  }\n\n  private hideTabElement(tab: TabbedPaneTab): void {\n    this.tabsElement.removeChild(tab.tabElement);\n    tab.shown = false;\n  }\n\n  private createDropDownButton(): HTMLDivElement {\n    const dropDownContainer = document.createElement('div');\n    dropDownContainer.classList.add('tabbed-pane-header-tabs-drop-down-container');\n    dropDownContainer.setAttribute('jslog', `${VisualLogging.dropDown('more-tabs').track({click: true})}`);\n    const chevronIcon = createIcon('chevron-double-right', 'chevron-icon');\n    const moreTabsString = i18nString(UIStrings.moreTabs);\n    dropDownContainer.title = moreTabsString;\n    ARIAUtils.markAsMenuButton(dropDownContainer);\n    ARIAUtils.setLabel(dropDownContainer, moreTabsString);\n    ARIAUtils.setExpanded(dropDownContainer, false);\n    dropDownContainer.tabIndex = 0;\n    dropDownContainer.appendChild(chevronIcon);\n    dropDownContainer.addEventListener('click', this.dropDownClicked.bind(this));\n    dropDownContainer.addEventListener('keydown', this.dropDownKeydown.bind(this));\n    dropDownContainer.addEventListener('mousedown', event => {\n      if (event.button !== 0 || this.triggerDropDownTimeout) {\n        return;\n      }\n      this.triggerDropDownTimeout = window.setTimeout(this.dropDownClicked.bind(this, event), 200);\n    });\n    return dropDownContainer;\n  }\n\n  private dropDownClicked(event: MouseEvent): void {\n    if (event.button !== 0) {\n      return;\n    }\n    if (this.triggerDropDownTimeout) {\n      clearTimeout(this.triggerDropDownTimeout);\n      this.triggerDropDownTimeout = null;\n    }\n    const rect = this.dropDownButton.getBoundingClientRect();\n    const menu = new ContextMenu(event, {\n      x: rect.left,\n      y: rect.bottom,\n      onSoftMenuClosed: () => {\n        ARIAUtils.setExpanded(this.dropDownButton, false);\n      },\n    });\n    for (const tab of this.#tabs) {\n      if (tab.shown) {\n        continue;\n      }\n      if (this.numberOfTabsShown() === 0 && this.tabsHistory[0] === tab) {\n        menu.defaultSection().appendCheckboxItem(\n            tab.title, this.dropDownMenuItemSelected.bind(this, tab), {checked: true, jslogContext: tab.jslogContext});\n      } else {\n        menu.defaultSection().appendItem(\n            tab.title, this.dropDownMenuItemSelected.bind(this, tab), {jslogContext: tab.jslogContext});\n      }\n    }\n    void menu.show().then(() => ARIAUtils.setExpanded(this.dropDownButton, menu.isHostedMenuOpen()));\n  }\n\n  private dropDownKeydown(event: KeyboardEvent): void {\n    if (Platform.KeyboardUtilities.isEnterOrSpaceKey(event)) {\n      this.dropDownButton.click();\n      event.consume(true);\n    }\n  }\n\n  private dropDownMenuItemSelected(tab: TabbedPaneTab): void {\n    this.selectTab(tab.id, true, true);\n  }\n\n  private totalWidth(): number {\n    return this.headerContentsElement.getBoundingClientRect().width;\n  }\n\n  private numberOfTabsShown(): number {\n    let numTabsShown = 0;\n    for (const tab of this.#tabs) {\n      if (tab.shown) {\n        numTabsShown++;\n      }\n    }\n    return numTabsShown;\n  }\n\n  private updateTabsDropDown(): void {\n    const tabsToShowIndexes =\n        this.tabsToShowIndexes(this.#tabs, this.tabsHistory, this.totalWidth(), this.measuredDropDownButtonWidth || 0);\n    if (this.lastSelectedOverflowTab && this.numberOfTabsShown() !== tabsToShowIndexes.length) {\n      delete this.lastSelectedOverflowTab;\n      this.updateTabsDropDown();\n      return;\n    }\n\n    for (let i = 0; i < this.#tabs.length; ++i) {\n      if (this.#tabs[i].shown && tabsToShowIndexes.indexOf(i) === -1) {\n        this.hideTabElement(this.#tabs[i]);\n      }\n    }\n    for (let i = 0; i < tabsToShowIndexes.length; ++i) {\n      const tab = this.#tabs[tabsToShowIndexes[i]];\n      if (!tab.shown) {\n        this.showTabElement(i, tab);\n      }\n    }\n\n    this.maybeShowDropDown(tabsToShowIndexes.length !== this.#tabs.length);\n  }\n\n  private maybeShowDropDown(hasMoreTabs: boolean): void {\n    if (hasMoreTabs && !this.dropDownButton.parentElement) {\n      this.headerContentsElement.appendChild(this.dropDownButton);\n    } else if (!hasMoreTabs && this.dropDownButton.parentElement) {\n      this.headerContentsElement.removeChild(this.dropDownButton);\n    }\n  }\n\n  private measureDropDownButton(): void {\n    if (this.measuredDropDownButtonWidth) {\n      return;\n    }\n    this.dropDownButton.classList.add('measuring');\n    this.headerContentsElement.appendChild(this.dropDownButton);\n    this.measuredDropDownButtonWidth = this.dropDownButton.getBoundingClientRect().width;\n    this.headerContentsElement.removeChild(this.dropDownButton);\n    this.dropDownButton.classList.remove('measuring');\n  }\n\n  private updateWidths(): void {\n    const measuredWidths = this.measureWidths();\n    const maxWidth =\n        this.shrinkableTabs ? this.calculateMaxWidth(measuredWidths.slice(), this.totalWidth()) : Number.MAX_VALUE;\n\n    let i = 0;\n    for (const tab of this.#tabs) {\n      tab.setWidth(this.verticalTabLayout ? -1 : Math.min(maxWidth, measuredWidths[i++]));\n    }\n  }\n\n  private measureWidths(): number[] {\n    // Add all elements to measure into this.tabsElement\n    this.tabsElement.style.setProperty('width', '2000px');\n    const measuringTabElements = new Map<HTMLElement, TabbedPaneTab>();\n    for (const tab of this.#tabs) {\n      if (typeof tab.measuredWidth === 'number') {\n        continue;\n      }\n      const measuringTabElement = tab.createTabElement(/* measure */ true);\n      measuringTabElements.set(measuringTabElement, tab);\n      this.tabsElement.appendChild(measuringTabElement);\n    }\n\n    // Perform measurement\n    for (const [measuringTabElement, tab] of measuringTabElements) {\n      const width = measuringTabElement.getBoundingClientRect().width;\n      tab.measuredWidth = Math.ceil(width);\n    }\n\n    // Nuke elements from the UI\n    for (const measuringTabElement of measuringTabElements.keys()) {\n      measuringTabElement.remove();\n    }\n\n    // Combine the results.\n    const measuredWidths = [];\n    for (const tab of this.#tabs) {\n      measuredWidths.push(tab.measuredWidth || 0);\n    }\n    this.tabsElement.style.removeProperty('width');\n\n    return measuredWidths;\n  }\n\n  private calculateMaxWidth(measuredWidths: number[], totalWidth: number): number {\n    if (!measuredWidths.length) {\n      return 0;\n    }\n\n    measuredWidths.sort(function(x, y) {\n      return x - y;\n    });\n\n    let totalMeasuredWidth = 0;\n    for (let i = 0; i < measuredWidths.length; ++i) {\n      totalMeasuredWidth += measuredWidths[i];\n    }\n\n    if (totalWidth >= totalMeasuredWidth) {\n      return measuredWidths[measuredWidths.length - 1];\n    }\n\n    let totalExtraWidth = 0;\n    for (let i = measuredWidths.length - 1; i > 0; --i) {\n      const extraWidth = measuredWidths[i] - measuredWidths[i - 1];\n      totalExtraWidth += (measuredWidths.length - i) * extraWidth;\n\n      if (totalWidth + totalExtraWidth >= totalMeasuredWidth) {\n        return measuredWidths[i - 1] +\n            (totalWidth + totalExtraWidth - totalMeasuredWidth) / (measuredWidths.length - i);\n      }\n    }\n\n    return totalWidth / measuredWidths.length;\n  }\n\n  private tabsToShowIndexes(\n      tabsOrdered: TabbedPaneTab[], tabsHistory: TabbedPaneTab[], totalWidth: number,\n      measuredDropDownButtonWidth: number): number[] {\n    const tabsToShowIndexes = [];\n\n    let totalTabsWidth = 0;\n    const tabCount = tabsOrdered.length;\n    const tabsToLookAt = tabsOrdered.slice(0);\n    if (this.currentTab !== undefined) {\n      tabsToLookAt.unshift(tabsToLookAt.splice(tabsToLookAt.indexOf(this.currentTab), 1)[0]);\n    }\n    if (this.lastSelectedOverflowTab !== undefined) {\n      tabsToLookAt.unshift(tabsToLookAt.splice(tabsToLookAt.indexOf(this.lastSelectedOverflowTab), 1)[0]);\n    }\n    for (let i = 0; i < tabCount; ++i) {\n      const tab = this.automaticReorder ? tabsHistory[i] : tabsToLookAt[i];\n      totalTabsWidth += tab.width();\n      let minimalRequiredWidth = totalTabsWidth;\n      if (i !== tabCount - 1) {\n        minimalRequiredWidth += measuredDropDownButtonWidth;\n      }\n      if (!this.verticalTabLayout && minimalRequiredWidth > totalWidth) {\n        break;\n      }\n      tabsToShowIndexes.push(tabsOrdered.indexOf(tab));\n    }\n\n    tabsToShowIndexes.sort(function(x, y) {\n      return x - y;\n    });\n\n    return tabsToShowIndexes;\n  }\n\n  private hideCurrentTab(): void {\n    if (!this.currentTab) {\n      return;\n    }\n\n    this.hideTab(this.currentTab);\n    delete this.currentTab;\n  }\n\n  private showTab(tab: TabbedPaneTab): void {\n    tab.tabElement.tabIndex = 0;\n    tab.tabElement.classList.add('selected');\n    ARIAUtils.setSelected(tab.tabElement, true);\n    tab.view.show(this.element);\n    this.updateTabSlider();\n  }\n\n  updateTabSlider(): void {\n    if (!this.sliderEnabled) {\n      return;\n    }\n    if (!this.currentTab) {\n      this.tabSlider.style.width = '0';\n      return;\n    }\n    let left = 0;\n    for (let i = 0; i < this.#tabs.length && this.currentTab !== this.#tabs[i]; i++) {\n      if (this.#tabs[i].shown) {\n        left += this.#tabs[i].measuredWidth || 0;\n      }\n    }\n    const sliderWidth = this.currentTab.shown ? this.currentTab.measuredWidth : this.dropDownButton.offsetWidth;\n    const scaleFactor = window.devicePixelRatio >= 1.5 ? ' scaleY(0.75)' : '';\n    this.tabSlider.style.transform = 'translateX(' + left + 'px)' + scaleFactor;\n    this.tabSlider.style.width = sliderWidth + 'px';\n\n    if (this.tabSlider.parentElement !== this.headerContentsElement) {\n      this.headerContentsElement.appendChild(this.tabSlider);\n    }\n  }\n\n  private hideTab(tab: TabbedPaneTab): void {\n    tab.tabElement.removeAttribute('tabIndex');\n    tab.tabElement.classList.remove('selected');\n    tab.tabElement.tabIndex = -1;\n    tab.tabElement.setAttribute('aria-selected', 'false');\n    tab.view.detach();\n  }\n\n  override elementsToRestoreScrollPositionsFor(): Element[] {\n    return [this.#contentElement];\n  }\n\n  insertBefore(tab: TabbedPaneTab, index: number): void {\n    this.tabsElement.insertBefore(tab.tabElement, this.tabsElement.childNodes[index]);\n    const oldIndex = this.#tabs.indexOf(tab);\n    this.#tabs.splice(oldIndex, 1);\n    if (oldIndex < index) {\n      --index;\n    }\n    this.#tabs.splice(index, 0, tab);\n\n    const eventData: EventData = {prevTabId: undefined, tabId: tab.id, view: tab.view, isUserGesture: undefined};\n    this.dispatchEventToListeners(Events.TabOrderChanged, eventData);\n  }\n\n  leftToolbar(): Toolbar {\n    if (!this.#leftToolbar) {\n      this.#leftToolbar = document.createElement('devtools-toolbar');\n      this.#leftToolbar.classList.add('tabbed-pane-left-toolbar');\n      this.#headerElement.insertBefore(this.#leftToolbar, this.#headerElement.firstChild);\n    }\n    return this.#leftToolbar;\n  }\n\n  rightToolbar(): Toolbar {\n    if (!this.#rightToolbar) {\n      this.#rightToolbar = document.createElement('devtools-toolbar');\n      this.#rightToolbar.classList.add('tabbed-pane-right-toolbar');\n      this.#headerElement.appendChild(this.#rightToolbar);\n    }\n    return this.#rightToolbar;\n  }\n\n  setAllowTabReorder(allow: boolean, automatic?: boolean): void {\n    this.allowTabReorder = allow;\n    this.automaticReorder = automatic;\n  }\n\n  setTabAnnotationIcon(id: string, iconVisible: boolean): void {\n    const tab = this.tabsById.get(id);\n    if (tab) {\n      tab.tabAnnotationIcon = iconVisible;\n    }\n  }\n\n  #onUpdateAnnotations(): void {\n    this.updateTabAnnotationIcons();\n  }\n\n  private keyDown(event: KeyboardEvent): void {\n    if (!this.currentTab) {\n      return;\n    }\n    let nextTabElement: (Element|null)|null = null;\n    switch (event.key) {\n      case 'ArrowUp':\n      case 'ArrowLeft':\n        nextTabElement = this.currentTab.tabElement.previousElementSibling;\n        if (!nextTabElement && !this.dropDownButton.parentElement) {\n          nextTabElement = this.currentTab.tabElement.parentElement ?\n              this.currentTab.tabElement.parentElement.lastElementChild :\n              null;\n        }\n        break;\n      case 'ArrowDown':\n      case 'ArrowRight':\n        nextTabElement = this.currentTab.tabElement.nextElementSibling;\n        if (!nextTabElement && !this.dropDownButton.parentElement) {\n          nextTabElement = this.currentTab.tabElement.parentElement ?\n              this.currentTab.tabElement.parentElement.firstElementChild :\n              null;\n        }\n        break;\n      case 'Enter':\n      case ' ':\n        this.currentTab.view.focus();\n        return;\n      default:\n        return;\n    }\n    if (!nextTabElement) {\n      this.dropDownButton.click();\n      return;\n    }\n    const tab = this.#tabs.find(tab => tab.tabElement === nextTabElement);\n    if (tab) {\n      this.selectTab(tab.id, true);\n    }\n    (nextTabElement as HTMLElement).focus();\n  }\n}\nexport interface EventData {\n  prevTabId?: string;\n  tabId: string;\n  view?: Widget;\n  isUserGesture?: boolean;\n}\n\nexport enum Events {\n  /* eslint-disable @typescript-eslint/naming-convention -- Used by web_tests. */\n  TabInvoked = 'TabInvoked',\n  TabSelected = 'TabSelected',\n  TabClosed = 'TabClosed',\n  TabOrderChanged = 'TabOrderChanged',\n  PaneVisibilityChanged = 'PaneVisibilityChanged',\n  /* eslint-enable @typescript-eslint/naming-convention */\n}\n\nexport interface EventTypes {\n  [Events.TabInvoked]: EventData;\n  [Events.TabSelected]: EventData;\n  [Events.TabClosed]: EventData;\n  [Events.TabOrderChanged]: EventData;\n  [Events.PaneVisibilityChanged]: {isVisible: boolean};\n}\n\nexport class TabbedPaneTab {\n  closeable: boolean;\n  previewFeature = false;\n  #tabAnnotationIcon = false;\n  private readonly tabbedPane: TabbedPane;\n  #id: string;\n  #title: string;\n  #tooltip: string|undefined;\n  #view: Widget;\n  shown: boolean;\n  measuredWidth!: number|undefined;\n  #tabElement!: HTMLElement|undefined;\n  private icon: Icon|null = null;\n  private suffixElement: HTMLElement|LitTemplate|null = null;\n\n  #width?: number;\n  private delegate?: TabbedPaneTabDelegate;\n  private titleElement?: HTMLElement;\n  private dragStartX?: number;\n  #jslogContext?: string;\n  constructor(\n      tabbedPane: TabbedPane, id: string, title: string, closeable: boolean, previewFeature: boolean, view: Widget,\n      tooltip?: string, jslogContext?: string) {\n    this.closeable = closeable;\n    this.previewFeature = previewFeature;\n    this.tabbedPane = tabbedPane;\n    this.#id = id;\n    this.#title = title;\n    this.#tooltip = tooltip;\n    this.#view = view;\n    this.shown = false;\n    this.#jslogContext = jslogContext;\n  }\n\n  get id(): string {\n    return this.#id;\n  }\n\n  get title(): string {\n    return this.#title;\n  }\n\n  set title(title: string) {\n    if (title === this.#title) {\n      return;\n    }\n    this.#title = title;\n    if (this.titleElement) {\n      this.titleElement.textContent = title;\n      const closeIconContainer = this.#tabElement?.querySelector('.close-button');\n      closeIconContainer?.setAttribute('title', i18nString(UIStrings.closeS, {PH1: title}));\n      closeIconContainer?.setAttribute('aria-label', i18nString(UIStrings.closeS, {PH1: title}));\n    }\n    delete this.measuredWidth;\n  }\n\n  get jslogContext(): string {\n    return this.#jslogContext ?? (this.#id === 'console-view' ? 'console' : this.#id);\n  }\n\n  get tabAnnotationIcon(): boolean {\n    return this.#tabAnnotationIcon;\n  }\n\n  set tabAnnotationIcon(iconVisible: boolean) {\n    if (this.#tabAnnotationIcon === iconVisible) {\n      return;\n    }\n    this.#tabAnnotationIcon = iconVisible;\n    if (!this.#tabElement) {\n      return;\n    }\n    const iconElement = this.#tabElement.querySelector('.spark');\n    if (iconVisible) {\n      if (!iconElement) {\n        const spark = this.createTabAnnotationIcon();\n        this.#tabElement.appendChild(spark);\n\n        const parentRect = this.#tabElement.parentElement?.getBoundingClientRect();\n        if (!parentRect) {\n          return;\n        }\n        const containerRect = this.tabElement.getBoundingClientRect();\n        const iconWidth = spark.getBoundingClientRect().width;\n        // Position the icon so that its right edge is at the container's right edge.\n        const x = containerRect.x - parentRect.x + containerRect.width - iconWidth;\n        (spark as HTMLElement).style.left = `${x}px`;\n      }\n    } else {\n      iconElement?.remove();\n    }\n    this.#tabElement.classList.toggle('ai', iconVisible);\n    delete this.measuredWidth;\n    this.tabbedPane.requestUpdate();\n  }\n\n  isCloseable(): boolean {\n    return this.closeable;\n  }\n\n  setIcon(icon: Icon|null): void {\n    this.icon = icon;\n    if (this.#tabElement && this.titleElement) {\n      this.createIconElement(this.#tabElement, this.titleElement, false);\n    }\n    delete this.measuredWidth;\n  }\n\n  setSuffixElement(suffixElement: HTMLElement|LitTemplate|null): void {\n    this.suffixElement = suffixElement;\n    if (this.#tabElement && this.titleElement) {\n      this.createSuffixElement(this.#tabElement, this.titleElement, false);\n    }\n    delete this.measuredWidth;\n  }\n\n  toggleClass(className: string, force?: boolean): boolean {\n    const element = this.tabElement;\n    const hasClass = element.classList.contains(className);\n    if (hasClass === force) {\n      return false;\n    }\n    element.classList.toggle(className, force);\n    delete this.measuredWidth;\n    return true;\n  }\n\n  get view(): Widget {\n    return this.#view;\n  }\n\n  set view(view: Widget) {\n    this.#view = view;\n  }\n\n  get tooltip(): string|undefined {\n    return this.#tooltip;\n  }\n\n  set tooltip(tooltip: string|undefined) {\n    this.#tooltip = tooltip;\n    if (this.titleElement) {\n      Tooltip.install(this.titleElement, tooltip || '');\n    }\n  }\n\n  get tabElement(): HTMLElement {\n    if (!this.#tabElement) {\n      this.#tabElement = this.createTabElement(false);\n    }\n\n    return this.#tabElement;\n  }\n\n  width(): number {\n    return this.#width || 0;\n  }\n\n  setWidth(width: number): void {\n    this.tabElement.style.width = width === -1 ? '' : (width + 'px');\n    this.#width = width;\n  }\n\n  setDelegate(delegate: TabbedPaneTabDelegate): void {\n    this.delegate = delegate;\n  }\n\n  private createIconElement(tabElement: Element, titleElement: Element, measuring: boolean): void {\n    const iconElement = tabIcons.get(tabElement);\n    if (iconElement) {\n      iconElement.remove();\n      tabIcons.delete(tabElement);\n    }\n    if (!this.icon) {\n      return;\n    }\n\n    const iconContainer = document.createElement('span');\n    iconContainer.classList.add('tabbed-pane-header-tab-icon');\n    const iconNode = measuring ? this.createMeasureClone(this.icon) : this.icon;\n    iconContainer.appendChild(iconNode);\n    titleElement.insertAdjacentElement('beforebegin', iconContainer);\n    tabIcons.set(tabElement, iconContainer);\n  }\n\n  private createSuffixElement(tabElement: Element, titleElement: Element, measuring: boolean): void {\n    const tabSuffixElement = tabSuffixElements.get(tabElement);\n    if (tabSuffixElement) {\n      tabSuffixElement.remove();\n      tabSuffixElements.delete(tabElement);\n    }\n    if (!this.suffixElement) {\n      return;\n    }\n\n    const suffixElementContainer = document.createElement('span');\n    suffixElementContainer.classList.add('tabbed-pane-header-tab-suffix-element');\n    if (this.suffixElement instanceof HTMLElement) {\n      const suffixElement = measuring ? this.suffixElement.cloneNode() : this.suffixElement;\n      suffixElementContainer.appendChild(suffixElement);\n    } else {\n      render(this.suffixElement, suffixElementContainer);\n    }\n    titleElement.insertAdjacentElement('afterend', suffixElementContainer);\n    tabSuffixElements.set(tabElement, suffixElementContainer);\n  }\n\n  private createMeasureClone(original: Icon): Element {\n    // Cloning doesn't work for the icon component because the shadow\n    // root isn't copied, but it is sufficient to create a div styled\n    // to be the same size.\n    const fakeClone = document.createElement('div');\n    fakeClone.style.width = original.style.width;\n    fakeClone.style.height = original.style.height;\n    return fakeClone;\n  }\n\n  createTabElement(measuring: boolean): HTMLElement {\n    const tabElement = document.createElement('div');\n    tabElement.classList.add('tabbed-pane-header-tab');\n    tabElement.id = 'tab-' + this.#id;\n    ARIAUtils.setSelected(tabElement, false);\n    ARIAUtils.setLabel(tabElement, this.title);\n\n    const titleElement = tabElement.createChild('span', 'tabbed-pane-header-tab-title');\n    ARIAUtils.markAsTab(titleElement);\n    titleElement.textContent = this.title;\n    Tooltip.install(titleElement, this.tooltip || '');\n    this.createIconElement(tabElement, titleElement, measuring);\n    this.createSuffixElement(tabElement, titleElement, measuring);\n    if (!measuring) {\n      this.titleElement = titleElement;\n    }\n\n    if (this.previewFeature) {\n      const previewIcon = this.createPreviewIcon();\n      tabElement.appendChild(previewIcon);\n      tabElement.classList.add('preview');\n    }\n\n    if (this.tabAnnotationIcon) {\n      const tabAnnotationIcon = this.createTabAnnotationIcon();\n      tabElement.appendChild(tabAnnotationIcon);\n      tabElement.classList.add('ai');\n    }\n\n    if (this.closeable) {\n      const closeIcon = this.createCloseIconButton();\n      tabElement.appendChild(closeIcon);\n      tabElement.classList.add('closeable');\n    }\n\n    if (measuring) {\n      tabElement.classList.add('measuring');\n    } else {\n      tabElement.addEventListener('click', this.tabClicked.bind(this), false);\n      tabElement.addEventListener('keydown', this.tabKeyDown.bind(this), false);\n      tabElement.addEventListener('auxclick', this.tabClicked.bind(this), false);\n      tabElement.addEventListener('mousedown', this.tabMouseDown.bind(this), false);\n      tabElement.addEventListener('mouseup', this.tabMouseUp.bind(this), false);\n\n      tabElement.addEventListener('contextmenu', this.tabContextMenu.bind(this), false);\n      if (this.tabbedPane.allowTabReorder) {\n        installDragHandle(\n            tabElement, this.startTabDragging.bind(this), this.tabDragging.bind(this), this.endTabDragging.bind(this),\n            null, null, 200);\n      }\n    }\n\n    return tabElement as HTMLElement;\n  }\n\n  private createTabAnnotationIcon(): Icon {\n    const tabAnnotationIcon = new Icon();\n    tabAnnotationIcon.name = 'spark';\n    tabAnnotationIcon.classList.add('small');\n    tabAnnotationIcon.classList.add('spark');\n    tabAnnotationIcon.setAttribute('title', i18nString(UIStrings.panelContainsAnnotation));\n    tabAnnotationIcon.setAttribute('aria-label', i18nString(UIStrings.panelContainsAnnotation));\n    return tabAnnotationIcon;\n  }\n\n  private createCloseIconButton(): Buttons.Button.Button {\n    const closeButton = new Buttons.Button.Button();\n    closeButton.data = {\n      variant: Buttons.Button.Variant.ICON,\n      size: Buttons.Button.Size.MICRO,\n      iconName: 'cross',\n      title: i18nString(UIStrings.closeS, {PH1: this.title}),\n    };\n    closeButton.classList.add('close-button', 'tabbed-pane-close-button');\n    closeButton.setAttribute('jslog', `${VisualLogging.close().track({click: true})}`);\n\n    closeButton.setAttribute('aria-label', i18nString(UIStrings.closeS, {PH1: this.title}));\n    return closeButton;\n  }\n\n  private createPreviewIcon(): HTMLDivElement {\n    const iconContainer = document.createElement('div');\n    iconContainer.classList.add('preview-icon');\n    const previewIcon = new Icon();\n    previewIcon.name = 'experiment';\n    previewIcon.classList.add('small');\n    iconContainer.appendChild(previewIcon);\n    iconContainer.setAttribute('title', i18nString(UIStrings.previewFeature));\n    iconContainer.setAttribute('aria-label', i18nString(UIStrings.previewFeature));\n    return iconContainer;\n  }\n\n  private isCloseIconClicked(element: HTMLElement): boolean {\n    return element?.classList.contains('tabbed-pane-close-button') ||\n        element?.parentElement?.classList.contains('tabbed-pane-close-button') || false;\n  }\n\n  private tabKeyDown(ev: Event): void {\n    const event = ev as KeyboardEvent;\n    switch (event.key) {\n      case 'Enter':\n      case ' ':\n        if (this.isCloseIconClicked(event.target as HTMLElement)) {\n          this.closeTabs([this.id]);\n          ev.consume(true);\n          return;\n        }\n    }\n  }\n\n  private tabClicked(event: MouseEvent): void {\n    const middleButton = event.button === 1;\n    const shouldClose = this.closeable && (middleButton || this.isCloseIconClicked(event.target as HTMLElement));\n    if (!shouldClose) {\n      this.tabbedPane.focus();\n      return;\n    }\n    this.closeTabs([this.id]);\n    event.consume(true);\n  }\n\n  private tabMouseDown(event: MouseEvent): void {\n    if (this.isCloseIconClicked(event.target as HTMLElement) || event.button !== 0) {\n      return;\n    }\n    this.tabbedPane.selectTab(this.id, true);\n  }\n\n  private tabMouseUp(event: MouseEvent): void {\n    // This is needed to prevent middle-click pasting on linux when tabs are clicked.\n    if (event.button === 1) {\n      event.consume(true);\n    }\n  }\n\n  private closeTabs(ids: string[]): void {\n    if (this.delegate) {\n      this.delegate.closeTabs(this.tabbedPane, ids);\n      return;\n    }\n    this.tabbedPane.closeTabs(ids, true);\n  }\n\n  private tabContextMenu(event: Event): void {\n    function close(this: TabbedPaneTab): void {\n      this.closeTabs([this.id]);\n    }\n\n    function closeOthers(this: TabbedPaneTab): void {\n      this.closeTabs(this.tabbedPane.otherTabs(this.id));\n    }\n\n    function closeAll(this: TabbedPaneTab): void {\n      this.closeTabs(this.tabbedPane.tabIds());\n    }\n\n    function closeToTheRight(this: TabbedPaneTab): void {\n      this.closeTabs(this.tabbedPane.tabsToTheRight(this.id));\n    }\n\n    function moveTabForward(this: TabbedPaneTab, tabIndex: number): void {\n      this.tabbedPane.moveTabForward(this.id, tabIndex);\n    }\n\n    function moveTabBackward(this: TabbedPaneTab, tabIndex: number): void {\n      this.tabbedPane.moveTabBackward(this.id, tabIndex);\n    }\n\n    const contextMenu = new ContextMenu(event);\n    if (this.closeable) {\n      contextMenu.defaultSection().appendItem(i18nString(UIStrings.close), close.bind(this), {jslogContext: 'close'});\n      contextMenu.defaultSection().appendItem(\n          i18nString(UIStrings.closeOthers), closeOthers.bind(this), {jslogContext: 'close-others'});\n      contextMenu.defaultSection().appendItem(\n          i18nString(UIStrings.closeTabsToTheRight), closeToTheRight.bind(this),\n          {jslogContext: 'close-tabs-to-the-right'});\n      contextMenu.defaultSection().appendItem(\n          i18nString(UIStrings.closeAll), closeAll.bind(this), {jslogContext: 'close-all'});\n    }\n    if (this.delegate) {\n      this.delegate.onContextMenu(this.id, contextMenu);\n    }\n    const tabIndex = this.tabbedPane.getTabIndex(this.id);\n    if (tabIndex > 0) {\n      contextMenu.defaultSection().appendItem(\n          i18nString(UIStrings.moveTabLeft), moveTabBackward.bind(this, tabIndex), {jslogContext: 'move-tab-backward'});\n    }\n    if (tabIndex < this.tabbedPane.tabsElement.childNodes.length - 1) {\n      contextMenu.defaultSection().appendItem(\n          i18nString(UIStrings.moveTabRight), moveTabForward.bind(this, tabIndex), {jslogContext: 'move-tab-forward'});\n    }\n    void contextMenu.show();\n  }\n\n  private startTabDragging(event: MouseEvent): boolean {\n    if (this.isCloseIconClicked(event.target as HTMLElement)) {\n      return false;\n    }\n    this.dragStartX = event.pageX;\n    if (this.#tabElement) {\n      this.#tabElement.classList.add('dragging');\n    }\n    this.tabbedPane.tabSlider.remove();\n    return true;\n  }\n\n  private tabDragging(event: MouseEvent): void {\n    const tabElements = this.tabbedPane.tabsElement.childNodes;\n    for (let i = 0; i < tabElements.length; ++i) {\n      let tabElement: HTMLElement = (tabElements[i] as HTMLElement);\n      if (!this.#tabElement || tabElement === this.#tabElement) {\n        continue;\n      }\n\n      const intersects = tabElement.offsetLeft + tabElement.clientWidth > this.#tabElement.offsetLeft &&\n          this.#tabElement.offsetLeft + this.#tabElement.clientWidth > tabElement.offsetLeft;\n      if (!intersects) {\n        continue;\n      }\n\n      const dragStartX = (this.dragStartX as number);\n      if (Math.abs(event.pageX - dragStartX) < tabElement.clientWidth / 2 + 5) {\n        break;\n      }\n\n      if (event.pageX - dragStartX > 0) {\n        tabElement = (tabElement.nextSibling as HTMLElement);\n        ++i;\n      }\n\n      const oldOffsetLeft = this.#tabElement.offsetLeft;\n      this.tabbedPane.insertBefore(this, i);\n      this.dragStartX = dragStartX + this.#tabElement.offsetLeft - oldOffsetLeft;\n      break;\n    }\n\n    const dragStartX = (this.dragStartX as number);\n    const tabElement = (this.#tabElement as HTMLElement);\n    if (!tabElement.previousSibling && event.pageX - dragStartX < 0) {\n      tabElement.style.setProperty('left', '0px');\n      return;\n    }\n    if (!tabElement.nextSibling && event.pageX - dragStartX > 0) {\n      tabElement.style.setProperty('left', '0px');\n      return;\n    }\n\n    tabElement.style.setProperty('left', (event.pageX - dragStartX) + 'px');\n  }\n\n  private endTabDragging(_event: Event): void {\n    const tabElement = (this.#tabElement as HTMLElement);\n    tabElement.classList.remove('dragging');\n    tabElement.style.removeProperty('left');\n    delete this.dragStartX;\n    this.tabbedPane.updateTabSlider();\n  }\n}\n\nconst tabIcons = new WeakMap<Element, Element>();\nconst tabSuffixElements = new WeakMap<Element, Element>();\n\nexport interface TabbedPaneTabDelegate {\n  closeTabs(tabbedPane: TabbedPane, ids: string[]): void;\n  onContextMenu(tabId: string, contextMenu: ContextMenu): void;\n}\n", "// Copyright 2025 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n// IMPORTANT: this file is auto generated. Please do not edit this file.\n/* istanbul ignore file */\nexport default `/*\n * Copyright (C) 2006, 2007, 2008 Apple Inc.  All rights reserved.\n * Copyright (C) 2009 Anthony Ricaud <rik@webkit.org>\n * Copyright (C) 2011 Google Inc. All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are\n * met:\n *\n * 1. Redistributions of source code must retain the above copyright\n * notice, this list of conditions and the following disclaimer.\n *\n * 2. Redistributions in binary form must reproduce the above\n * copyright notice, this list of conditions and the following disclaimer\n * in the documentation and/or other materials provided with the\n * distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY GOOGLE INC. AND ITS CONTRIBUTORS\n * \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n * A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL GOOGLE INC.\n * OR ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n * THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n.tabbed-pane {\n  flex: auto;\n  overflow: hidden;\n}\n\n.tabbed-pane-content {\n  position: relative;\n  overflow: auto;\n  flex: auto;\n  display: flex;\n  flex-direction: column;\n}\n\n.tabbed-pane-content.has-no-tabs {\n  background-color: var(--sys-color-cdt-base-container);\n}\n\n.tabbed-pane-placeholder {\n  text-align: center;\n  align-content: center;\n\n  .sources-placeholder {\n    display: inline-block;\n  }\n}\n\n.tabbed-pane-placeholder-row {\n  max-width: var(--sys-size-32);\n  min-width: var(--sys-size-28);\n  margin: 0 var(--sys-size-8);\n\n  &.workspace {\n    line-height: 18px;\n    display: inline-flex;\n    align-items: center;\n    border: var(--sys-size-2) dashed var(--sys-color-divider);\n    padding: var(--sys-size-8);\n    border-radius: var(--sys-shape-corner-medium);\n    margin: var(--sys-size-8) var(--sys-size-8) var(--sys-size-11);\n\n    > .icon-container {\n      flex-shrink: 0;\n      width: var(--sys-size-13);\n      height: var(--sys-size-13);\n      background: var(--sys-color-tonal-container);\n      align-content: center;\n      border-radius: var(--sys-shape-corner-full);\n      margin-right: var(--sys-size-8);\n\n      > devtools-icon {\n        color: var(--sys-color-on-tonal-container);\n      }\n    }\n  }\n\n  &.shortcuts-list {\n    padding: 0 var(--sys-size-6);\n\n    .shortcut-line {\n      display: grid;\n      grid-template-columns: 1fr 1fr;\n      column-gap: var(--sys-size-10);\n      padding: var(--sys-size-4) 0;\n\n      &:not(:last-child) {\n        border-bottom: var(--sys-size-1) solid var(--sys-color-divider);\n      }\n\n      .shortcuts {\n        display: flex;\n        flex-direction: row;\n        gap: var(--sys-size-4);\n        align-items: center;\n      }\n\n      .keybinds-key {\n        display: flex;\n        flex-shrink: 0;\n        align-items: center;\n        justify-content: center;\n        height: var(--sys-size-11);\n        min-width: var(--sys-size-11);\n        font: var(--sys-typescale-body5-medium);\n        white-space: nowrap;\n        border-radius: var(--sys-shape-corner-small);\n        background: var(--sys-color-tonal-container);\n        padding: 0 var(--sys-size-4);\n      }\n\n      & button {\n        margin-inline: 0;\n      }\n    }\n  }\n\n  & button {\n    cursor: pointer;\n    color: var(--text-link);\n    background: transparent;\n    border: none;\n    padding: 0;\n    text-decoration: underline;\n    margin-inline: var(--sys-size-3);\n    text-align: left;\n\n    &:focus-visible {\n      outline: 2px solid var(--sys-color-state-focus-ring);\n      outline-offset: 2px;\n      border-radius: 2px;\n    }\n  }\n}\n\n.tabbed-pane-header {\n  display: flex;\n  flex: 0 0 27px;\n  border-bottom: 1px solid var(--sys-color-divider);\n  overflow: visible;\n  width: 100%;\n  background-color: var(--app-color-toolbar-background);\n\n  & > * {\n    cursor: initial;\n  }\n}\n\n.tabbed-pane-header-contents {\n  flex: auto;\n  pointer-events: none;\n  margin-left: 0;\n  position: relative;\n  cursor: default;\n}\n\n.tabbed-pane-header-contents > * {\n  pointer-events: initial;\n}\n\n.tabbed-pane-header-tab-icon {\n  min-width: 14px;\n  display: flex;\n  align-items: center;\n  margin-right: var(--sys-size-2);\n}\n\n.tabbed-pane-header-tab-suffix-element {\n  height: var(--sys-size-8);\n  width: var(--sys-size-8);\n  padding-left: var(--sys-size-2);\n  align-content: center;\n\n  &:has(.badge) {\n    width: 17px;\n    margin-left: var(--sys-size-2);\n  }\n\n  &:has(.status-dot) {\n    width: 9px;\n  }\n}\n\n.badge {\n  display: inline-flex;\n  justify-content: center;\n  align-items: center;\n  height: var(--sys-size-7);\n  min-width: var(--sys-size-7);\n  width: fit-content;\n  padding: 0 var(--sys-size-3);\n  line-height: var(--sys-size-7);\n  border-radius: var(--sys-shape-corner-full);\n  margin-left: var(--sys-size-2);\n  background-color: var(--sys-color-primary);\n  color: var(--sys-color-on-primary);\n  font-size: var(--sys-typescale-body5-size);\n  font-weight: var(--ref-typeface-weight-bold);\n\n  &.primary {\n    background: var(--sys-color-cdt-base-container);\n    color: var(--sys-color-primary);\n    border: var(--sys-size-1) solid var(--sys-color-primary);\n    font-weight: normal;\n  }\n}\n\n.status-dot {\n  height: var(--sys-size-4);\n  width: var(--sys-size-4);\n  border-radius: var(--sys-shape-corner-full);\n  background-color: var(--sys-color-purple-bright);\n  margin-left: var(--sys-size-1);\n  justify-self: center;\n  position: relative;\n  top: 0.75px;\n}\n\n.tabbed-pane-header-tab {\n  font: var(--sys-typescale-body4-medium);\n  color: var(--sys-color-on-surface-subtle);\n  height: var(--sys-size-12);\n  float: left;\n  padding: 0 10px;\n  white-space: nowrap;\n  cursor: default;\n  display: flex;\n  align-items: center;\n}\n\n.tabbed-pane-header-tab.closeable {\n  padding-right: var(--sys-size-3);\n}\n\n.tabbed-pane-header-tab devtools-icon.dot::before {\n  outline-color: var(--icon-gap-toolbar);\n}\n\n.tabbed-pane-header-tab:hover devtools-icon.dot::before {\n  outline-color: var(--icon-gap-toolbar-hover);\n}\n\n.tabbed-pane-header-tab:not(.vertical-tab-layout):hover,\n.tabbed-pane-shadow .tabbed-pane-header-tab:focus-visible {\n  color: var(--sys-color-on-surface);\n  background-color: var(--sys-color-state-hover-on-subtle);\n}\n\n.tabbed-pane-header-tab-title {\n  text-overflow: ellipsis;\n  overflow: hidden;\n}\n\n.tabbed-pane-header-tab.measuring {\n  visibility: hidden;\n}\n\n.tabbed-pane-header-tab.selected {\n  border-bottom: none;\n  color: var(--sys-color-primary);\n}\n\n.tabbed-pane-header-tab.selected.dragging {\n  --override-dragging-box-shadow-color: rgb(0 0 0 / 37%);\n\n  position: relative;\n  box-shadow: 0 1px 4px 0 var(--override-dragging-box-shadow-color);\n  background-color: var(--app-color-toolbar-background);\n}\n\n.theme-with-dark-background .tabbed-pane-header-tab.dragging,\n:host-context(.theme-with-dark-background) .tabbed-pane-header-tab.dragging {\n  --override-dragging-box-shadow-color: rgb(230 230 230 / 37%);\n}\n\n.tabbed-pane-header-tab .tabbed-pane-close-button {\n  visibility: hidden;\n}\n\n.tabbed-pane-header-tab:hover .tabbed-pane-close-button,\n.tabbed-pane-header-tab.selected .tabbed-pane-close-button {\n  visibility: visible;\n}\n\n.tabbed-pane-header-tabs-drop-down-container {\n  float: left;\n  opacity: 80%;\n  display: flex;\n  align-items: center;\n  height: 100%;\n}\n\n.tabbed-pane-header-tabs-drop-down-container > .chevron-icon:hover,\n.tabbed-pane-header-tabs-drop-down-container > .chevron-icon:focus-visible {\n  color: var(--icon-default-hover);\n}\n\n.tabbed-pane-header-tabs-drop-down-container:hover,\n.tabbed-pane-header-tabs-drop-down-container:focus-visible {\n  background-color: var(--sys-color-state-hover-on-subtle);\n}\n\n.tabbed-pane-header-tabs-drop-down-container.measuring {\n  visibility: hidden;\n}\n\n.tabbed-pane-header-tabs-drop-down-container:active {\n  opacity: 80%;\n}\n/* Web page style */\n\n.tabbed-pane-shadow.vertical-tab-layout {\n  flex-direction: row !important; /* stylelint-disable-line declaration-no-important */\n}\n\n.tabbed-pane-shadow.vertical-tab-layout .tabbed-pane-header {\n  background-color: transparent;\n  border: none transparent !important; /* stylelint-disable-line declaration-no-important */\n  width: auto;\n  flex: 0 0 auto;\n  flex-direction: column;\n  padding-top: 5px;\n  overflow: hidden;\n}\n\n.tabbed-pane-shadow.vertical-tab-layout .tabbed-pane-content {\n  padding-top: var(--sys-size-10);\n  overflow-x: hidden;\n}\n\n.tabbed-pane-shadow.vertical-tab-layout .tabbed-pane-header-contents {\n  margin: 0;\n  flex: none;\n}\n\n.tabbed-pane-shadow.vertical-tab-layout .tabbed-pane-header-tabs {\n  display: flex;\n  flex-direction: column;\n  width: var(--sys-size-24);\n  margin-right: var(--sys-size-5);\n}\n\n.tabbed-pane-shadow.vertical-tab-layout .tabbed-pane-header-tab {\n  height: var(--size-12, 28px);\n  padding: 0 var(--size-8, 16px) 0 var(--size-7, 14px);\n  border-radius: 0 100px 100px 0;\n  color: var(--sys-color-on-surface);\n  position: relative;\n\n  & > .tabbed-pane-header-tab-icon devtools-icon {\n    margin: 0;\n    margin-right: var(--sys-size-6);\n  }\n\n  &.selected {\n    color: var(--app-color-navigation-drawer-label-selected);\n    background-color: var(--app-color-navigation-drawer-background-selected);\n\n    & > .tabbed-pane-header-tab-icon devtools-icon {\n      color: var(--app-color-navigation-drawer-label-selected);\n    }\n  }\n\n  &:focus-visible {\n    outline: 2px solid var(--sys-color-state-focus-ring);\n  }\n\n  &:active::before {\n    background-color: var(--sys-color-state-ripple-neutral-on-subtle);\n    content: \"\";\n    height: 100%;\n    width: 100%;\n    border-radius: inherit;\n    position: absolute;\n    top: 0;\n    left: 0;\n  }\n}\n\n.tabbed-pane-tab-slider {\n  height: 3px;\n  position: absolute;\n  bottom: -1px;\n  background-color: var(--sys-color-primary);\n  border-radius: var(--sys-shape-corner-full) var(--sys-shape-corner-full) 0 0;\n  left: 0;\n  transform-origin: 0 100%;\n  transition: transform 150ms cubic-bezier(0, 0, 0.2, 1);\n  visibility: hidden;\n}\n\n@media (-webkit-min-device-pixel-ratio: 1.1) {\n  .tabbed-pane-tab-slider {\n    border-top: none;\n  }\n}\n\n.tabbed-pane-tab-slider.enabled {\n  visibility: visible;\n}\n\n.tabbed-pane-header-tab.disabled {\n  opacity: 50%;\n  pointer-events: none;\n}\n\n.tabbed-pane-left-toolbar {\n  margin-right: -4px;\n  flex: none;\n}\n\n.tabbed-pane-right-toolbar {\n  margin-left: -4px;\n  flex: none;\n}\n\n.preview-icon {\n  --override-tabbed-pane-preview-icon-color: var(--icon-default);\n\n  width: 16px;\n  height: 16px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  margin-left: var(--sys-size-2);\n  flex-shrink: 0;\n\n  devtools-icon {\n    color: var(--override-tabbed-pane-preview-icon-color);\n  }\n}\n\n@media (forced-colors: active) {\n  .tabbed-pane-tab-slider {\n    forced-color-adjust: none;\n    background-color: Highlight;\n  }\n\n  .tabbed-pane-header {\n    forced-color-adjust: none;\n    border-bottom: 1px solid transparent;\n    background-color: ButtonFace;\n  }\n\n  .tabbed-pane-header-contents .tabbed-pane-header-tabs .tabbed-pane-header-tab {\n    background: ButtonFace;\n    color: ButtonText;\n  }\n\n  .tabbed-pane-header-tabs .tabbed-pane-header-tab:hover,\n  .tabbed-pane-header-tabs .tabbed-pane-shadow .tabbed-pane-header-tab:focus-visible {\n    background-color: Highlight;\n    color: HighlightText;\n  }\n\n  .tabbed-pane-header-tab .tabbed-pane-header-tab-title {\n    color: inherit;\n  }\n\n  .tabbed-pane-header-contents .tabbed-pane-header-tabs .tabbed-pane-header-tab.selected,\n  .tabbed-pane-header-contents .tabbed-pane-header-tabs .tabbed-pane-header-tab.selected:focus-visible {\n    background-color: Highlight;\n    color: HighlightText;\n  }\n\n  .tabbed-pane-header-tab:hover .tabbed-pane-close-button,\n  .tabbed-pane-shadow .tabbed-pane-header-tab:focus-visible .tabbed-pane-close-button {\n    color: HighlightText;\n  }\n\n  .tabbed-pane-header-tabs-drop-down-container {\n    opacity: 100%;\n  }\n\n  .tabbed-pane-header-tabs-drop-down-container:hover,\n  .tabbed-pane-header-tabs-drop-down-container:focus-visible {\n    background-color: Highlight;\n  }\n\n  .tabbed-pane-header-tabs-drop-down-container > .chevron-icon {\n    color: ButtonText;\n  }\n\n  .tabbed-pane-header-tabs-drop-down-container:hover > .chevron-icon,\n  .tabbed-pane-header-tabs-drop-down-container:focus-visible > .chevron-icon {\n    color: HighlightText;\n  }\n\n  .tabbed-pane-header-tabs .tabbed-pane-header-tab .preview-icon {\n    --override-tabbed-pane-preview-icon-color: ButtonText;\n  }\n\n  .tabbed-pane-header-tab.selected .preview-icon,\n  .tabbed-pane-header-tab:hover .preview-icon {\n    --override-tabbed-pane-preview-icon-color: HighlightText;\n  }\n\n  .close-button {\n    --tabbed-pane-close-icon-color: ButtonText;\n\n    forced-color-adjust: none;\n  }\n\n  .close-button:hover,\n  .close-button:active {\n    --tabbed-pane-close-icon-color: HighlightText;\n\n    background-color: Highlight;\n  }\n\n  .selected .close-button {\n    --tabbed-pane-close-icon-color: HighlightText;\n  }\n}\n\n.spark {\n  position: absolute;\n  top: 2px;\n\n  --icon-default: var(--sys-color-primary);\n}\n\n/*# sourceURL=${import.meta.resolve('./tabbedPane.css')} */`;", "// Copyright 2015 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport {ShortcutRegistry} from './ShortcutRegistry.js';\n\nexport class Tooltip {\n  static install(element: HTMLElement, tooltipContent: string|null): void {\n    element.title = tooltipContent || '';\n  }\n\n  static installWithActionBinding(element: HTMLElement, tooltipContent: string, actionId: string): void {\n    let description: string = tooltipContent;\n    const shortcuts = ShortcutRegistry.instance().shortcutsForAction(actionId);\n    for (const shortcut of shortcuts) {\n      description += ` - ${shortcut.title()}`;\n    }\n    element.title = description;\n  }\n}\n", "// Copyright 2019 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n/* eslint-disable @devtools/no-imperative-dom-api */\n\nimport './Toolbar.js';\n\nimport * as Common from '../../core/common/common.js';\nimport * as Host from '../../core/host/host.js';\nimport * as i18n from '../../core/i18n/i18n.js';\nimport * as Platform from '../../core/platform/platform.js';\nimport type * as Root from '../../core/root/root.js';\nimport type * as Foundation from '../../foundation/foundation.js';\nimport {createIcon, type Icon} from '../kit/kit.js';\nimport * as VisualLogging from '../visual_logging/visual_logging.js';\n\nimport * as ARIAUtils from './ARIAUtils.js';\nimport type {ContextMenu} from './ContextMenu.js';\nimport {type EventData, Events as TabbedPaneEvents, TabbedPane} from './TabbedPane.js';\nimport {type ItemsProvider, type ToolbarItem, ToolbarMenuButton} from './Toolbar.js';\nimport {createTextChild} from './UIUtils.js';\nimport type {TabbedViewLocation, View, ViewLocation} from './View.js';\nimport viewContainersStyles from './viewContainers.css.js';\nimport {\n  getLocalizedViewLocationCategory,\n  getRegisteredLocationResolvers,\n  getRegisteredViewExtensions,\n  maybeRemoveViewExtension,\n  registerLocationResolver,\n  registerViewExtension,\n  resetViewRegistration,\n  ViewLocationCategory,\n  ViewLocationValues,\n  ViewPersistence,\n  type ViewRegistration,\n} from './ViewRegistration.js';\nimport {VBox, type Widget} from './Widget.js';\n\nconst UIStrings = {\n  /**\n   * @description Aria label for the tab panel view container\n   * @example {Sensors} PH1\n   */\n  sPanel: '{PH1} panel',\n} as const;\nconst str_ = i18n.i18n.registerUIStrings('ui/legacy/ViewManager.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\n\nexport const defaultOptionsForTabs = {\n  security: true,\n  freestyler: true,\n};\n\nexport class PreRegisteredView implements View {\n  private readonly viewRegistration: ViewRegistration;\n  private readonly universe?: Foundation.Universe.Universe;\n  private widgetPromise: Promise<Widget>|null;\n\n  constructor(viewRegistration: ViewRegistration, universe?: Foundation.Universe.Universe) {\n    this.viewRegistration = viewRegistration;\n    this.universe = universe;\n    this.widgetPromise = null;\n  }\n\n  title(): Common.UIString.LocalizedString {\n    return this.viewRegistration.title();\n  }\n\n  commandPrompt(): Common.UIString.LocalizedString {\n    return this.viewRegistration.commandPrompt();\n  }\n  isCloseable(): boolean {\n    return this.viewRegistration.persistence === ViewPersistence.CLOSEABLE;\n  }\n\n  isPreviewFeature(): boolean {\n    return Boolean(this.viewRegistration.isPreviewFeature);\n  }\n\n  featurePromotionId(): string|undefined {\n    return this.viewRegistration.featurePromotionId;\n  }\n\n  iconName(): string|undefined {\n    return this.viewRegistration.iconName;\n  }\n\n  isTransient(): boolean {\n    return this.viewRegistration.persistence === ViewPersistence.TRANSIENT;\n  }\n\n  viewId(): string {\n    return this.viewRegistration.id;\n  }\n\n  location(): ViewLocationValues|undefined {\n    return this.viewRegistration.location;\n  }\n\n  order(): number|undefined {\n    return this.viewRegistration.order;\n  }\n\n  settings(): string[]|undefined {\n    return this.viewRegistration.settings;\n  }\n\n  tags(): string|undefined {\n    if (this.viewRegistration.tags) {\n      // Get localized keys and separate by null character to prevent fuzzy matching from matching across them.\n      return this.viewRegistration.tags.map(tag => tag()).join('\\0');\n    }\n    return undefined;\n  }\n\n  persistence(): ViewPersistence|undefined {\n    return this.viewRegistration.persistence;\n  }\n\n  async toolbarItems(): Promise<ToolbarItem[]> {\n    if (!this.viewRegistration.hasToolbar) {\n      return [];\n    }\n    const provider = await this.widget() as unknown as ItemsProvider;\n    return provider.toolbarItems();\n  }\n\n  widget(): Promise<Widget> {\n    if (this.widgetPromise === null) {\n      if (!this.universe) {\n        throw new Error('Creating views via ViewManager requires a Foundation.Universe');\n      }\n      this.widgetPromise = this.viewRegistration.loadView(this.universe);\n    }\n    return this.widgetPromise;\n  }\n\n  async disposeView(): Promise<void> {\n    if (this.widgetPromise === null) {\n      return;\n    }\n\n    const widget = await this.widgetPromise;\n    await widget.ownerViewDisposed();\n  }\n\n  experiment(): string|undefined {\n    return this.viewRegistration.experiment;\n  }\n\n  condition(): Root.Runtime.Condition|undefined {\n    return this.viewRegistration.condition;\n  }\n}\n\nlet viewManagerInstance: ViewManager|undefined;\n\nexport const enum Events {\n  VIEW_VISIBILITY_CHANGED = 'ViewVisibilityChanged',\n}\n\nexport interface ViewVisibilityEventData {\n  location: string;\n  revealedViewId: string|undefined;\n  hiddenViewId: string|undefined;\n}\n\nexport interface EventTypes {\n  [Events.VIEW_VISIBILITY_CHANGED]: ViewVisibilityEventData;\n}\n\nexport class ViewManager extends Common.ObjectWrapper.ObjectWrapper<EventTypes> {\n  readonly views = new Map<string, View>();\n  private readonly locationNameByViewId = new Map<string, string>();\n  private readonly locationOverrideSetting: Common.Settings.Setting<Record<string, string>>;\n\n  private readonly preRegisteredViews: PreRegisteredView[] = [];\n\n  // TODO(crbug.com/458180550): Pass the universe unconditionally once tests no longer rely\n  //   on `instance()` to create ViewManagers lazily in after/afterEach blocks.\n  private constructor(universe?: Foundation.Universe.Universe) {\n    super();\n\n    // Read override setting for location\n    this.locationOverrideSetting = Common.Settings.Settings.instance().createSetting('views-location-override', {});\n    const preferredExtensionLocations = this.locationOverrideSetting.get();\n\n    // Views may define their initial ordering within a location. When the user has not reordered, we use the\n    // default ordering as defined by the views themselves.\n\n    const viewsByLocation = new Map<ViewLocationValues|'none', PreRegisteredView[]>();\n    for (const view of getRegisteredViewExtensions()) {\n      const location = view.location || 'none';\n      const views = viewsByLocation.get(location) || [];\n      views.push(new PreRegisteredView(view, universe));\n      viewsByLocation.set(location, views);\n    }\n\n    let sortedViewExtensions: PreRegisteredView[] = [];\n    for (const views of viewsByLocation.values()) {\n      views.sort((firstView, secondView) => {\n        const firstViewOrder = firstView.order();\n        const secondViewOrder = secondView.order();\n        if (firstViewOrder !== undefined && secondViewOrder !== undefined) {\n          return firstViewOrder - secondViewOrder;\n        }\n        return 0;\n      });\n      sortedViewExtensions = sortedViewExtensions.concat(views);\n    }\n\n    for (const view of sortedViewExtensions) {\n      const viewId = view.viewId();\n      const location = view.location();\n      if (this.views.has(viewId)) {\n        throw new Error(`Duplicate view id '${viewId}'`);\n      }\n      if (!Platform.StringUtilities.isExtendedKebabCase(viewId)) {\n        throw new Error(`Invalid view ID '${viewId}'`);\n      }\n      this.views.set(viewId, view);\n      this.preRegisteredViews.push(view);\n      // Use the preferred user location if available\n      const locationName = preferredExtensionLocations[viewId] || location;\n      this.locationNameByViewId.set(viewId, locationName as string);\n    }\n  }\n\n  static instance(opts: {\n    forceNew: boolean|null,\n    universe?: Foundation.Universe.Universe,\n  } = {forceNew: null}): ViewManager {\n    const {forceNew, universe} = opts;\n    if (!viewManagerInstance || forceNew) {\n      viewManagerInstance = new ViewManager(universe);\n    }\n\n    return viewManagerInstance;\n  }\n\n  static removeInstance(): void {\n    viewManagerInstance = undefined;\n  }\n\n  static createToolbar(toolbarItems: ToolbarItem[]): Element|null {\n    if (!toolbarItems.length) {\n      return null;\n    }\n    const toolbar = document.createElement('devtools-toolbar');\n    for (const item of toolbarItems) {\n      toolbar.appendToolbarItem(item);\n    }\n    return toolbar;\n  }\n\n  getRegisteredViewExtensions(): PreRegisteredView[] {\n    return this.preRegisteredViews;\n  }\n\n  locationNameForViewId(viewId: string): string {\n    const locationName = this.locationNameByViewId.get(viewId);\n    if (!locationName) {\n      throw new Error(`No location name for view with id ${viewId}`);\n    }\n    return locationName;\n  }\n\n  /**\n   * Moves a view to a new location\n   */\n  moveView(viewId: string, locationName: string, options?: {\n    shouldSelectTab: (boolean),\n    overrideSaving: (boolean),\n  }): void {\n    const defaultOptions = {shouldSelectTab: true, overrideSaving: false};\n    const {shouldSelectTab, overrideSaving} = options || defaultOptions;\n    if (!viewId || !locationName) {\n      return;\n    }\n\n    const view = this.view(viewId);\n    if (!view) {\n      return;\n    }\n\n    if (!overrideSaving) {\n      // Update the inner map of locations\n      this.locationNameByViewId.set(viewId, locationName);\n\n      // Update the settings of location overwrites\n      const locations = this.locationOverrideSetting.get();\n      locations[viewId] = locationName;\n      this.locationOverrideSetting.set(locations);\n    }\n\n    // Find new location and show view there\n    void this.resolveLocation(locationName).then(location => {\n      if (!location) {\n        throw new Error('Move view: Could not resolve location for view: ' + viewId);\n      }\n      location.reveal();\n      return location.showView(view, undefined, /* userGesture*/ true, /* omitFocus*/ false, shouldSelectTab);\n    });\n  }\n\n  revealView(view: View): Promise<void> {\n    const location = locationForView.get(view);\n    if (!location) {\n      return Promise.resolve();\n    }\n    location.reveal();\n    return location.showView(view);\n  }\n\n  /**\n   * Show view in location\n   */\n  showViewInLocation(viewId: string, locationName: string, shouldSelectTab: boolean|undefined = true): void {\n    this.moveView(viewId, locationName, {\n      shouldSelectTab,\n      overrideSaving: true,\n    });\n  }\n\n  view(viewId: string): View {\n    const view = this.views.get(viewId);\n    if (!view) {\n      throw new Error(`No view with id ${viewId} found!`);\n    }\n    return view;\n  }\n\n  materializedWidget(viewId: string): Widget|null {\n    const view = this.view(viewId);\n    if (!view) {\n      return null;\n    }\n    return widgetForView.get(view) || null;\n  }\n\n  hasView(viewId: string): boolean {\n    return this.views.has(viewId);\n  }\n\n  async showView(viewId: string, userGesture?: boolean, omitFocus?: boolean): Promise<void> {\n    const view = this.views.get(viewId);\n    if (!view) {\n      console.error('Could not find view for id: \\'' + viewId + '\\' ' + new Error().stack);\n      return;\n    }\n\n    const location = locationForView.get(view) ?? await this.resolveLocation(this.locationNameByViewId.get(viewId));\n    if (!location) {\n      throw new Error('Could not resolve location for view: ' + viewId);\n    }\n    location.reveal();\n    await location.showView(view, undefined, userGesture, omitFocus);\n  }\n\n  isViewVisible(viewId: string): boolean {\n    const view = this.views.get(viewId);\n    if (!view) {\n      return false;\n    }\n\n    const location = locationForView.get(view);\n    if (!location) {\n      return false;\n    }\n\n    return location.isViewVisible(view);\n  }\n\n  async resolveLocation(location?: string): Promise<Location|null> {\n    if (!location) {\n      return null;\n    }\n    const registeredResolvers = getRegisteredLocationResolvers().filter(resolver => resolver.name === location);\n\n    if (registeredResolvers.length > 1) {\n      throw new Error('Duplicate resolver for location: ' + location);\n    }\n    if (registeredResolvers.length) {\n      const resolver = await registeredResolvers[0].loadResolver();\n      return resolver.resolveLocation(location) as Location | null;\n    }\n    throw new Error('Unresolved location: ' + location);\n  }\n\n  createTabbedLocation(\n      revealCallback: (() => void), location: string, restoreSelection?: boolean, allowReorder?: boolean,\n      defaultTab?: string|null): TabbedViewLocation {\n    return new TabbedLocation(this, revealCallback, location, restoreSelection, allowReorder, defaultTab);\n  }\n\n  createStackLocation(revealCallback?: (() => void), location?: string, jslogContext?: string): ViewLocation {\n    return new StackLocation(this, revealCallback, location, jslogContext);\n  }\n\n  hasViewsForLocation(location: string): boolean {\n    return Boolean(this.viewsForLocation(location).length);\n  }\n\n  viewsForLocation(location: string): View[] {\n    const result = [];\n    for (const [id, view] of this.views.entries()) {\n      if (this.locationNameByViewId.get(id) === location) {\n        result.push(view);\n      }\n    }\n    return result;\n  }\n}\n\nconst widgetForView = new WeakMap<View, Widget>();\n\nexport class ContainerWidget extends VBox {\n  private readonly view: View;\n  private materializePromise?: Promise<void>;\n\n  constructor(view: View) {\n    super();\n    this.element.classList.add('flex-auto', 'view-container', 'overflow-auto');\n    this.view = view;\n    this.element.tabIndex = -1;\n    ARIAUtils.markAsTabpanel(this.element);\n    ARIAUtils.setLabel(this.element, i18nString(UIStrings.sPanel, {PH1: view.title()}));\n    this.setDefaultFocusedElement(this.element);\n  }\n\n  materialize(): Promise<void> {\n    if (this.materializePromise) {\n      return this.materializePromise;\n    }\n    const promises = [];\n    // TODO(crbug.com/1006759): Transform to async-await\n    promises.push(this.view.toolbarItems().then(toolbarItems => {\n      const toolbarElement = ViewManager.createToolbar(toolbarItems);\n      if (toolbarElement) {\n        this.element.insertBefore(toolbarElement, this.element.firstChild);\n      }\n    }));\n    promises.push(this.view.widget().then(widget => {\n      // Move focus from |this| to loaded |widget| if any.\n      const shouldFocus = this.element.hasFocus();\n      this.setDefaultFocusedElement(null);\n      widgetForView.set(this.view, widget);\n      widget.show(this.element);\n      if (shouldFocus) {\n        widget.focus();\n      }\n    }));\n    this.materializePromise = Promise.all(promises).then(() => {});\n    return this.materializePromise;\n  }\n\n  override wasShown(): void {\n    super.wasShown();\n    void this.materialize().then(() => {\n      const widget = widgetForView.get(this.view);\n      if (widget) {\n        widget.show(this.element);\n        this.wasShownForTest();\n      }\n    });\n  }\n\n  private wasShownForTest(): void {\n    // This method is sniffed in tests.\n  }\n}\n\nclass ExpandableContainerWidget extends VBox {\n  private titleElement: HTMLDivElement;\n  private readonly titleExpandIcon: Icon;\n  private readonly view: View;\n  private widget?: Widget;\n  private materializePromise?: Promise<void>;\n\n  constructor(view: View) {\n    super({useShadowDom: true});\n    this.element.classList.add('flex-none');\n    this.registerRequiredCSS(viewContainersStyles);\n\n    this.titleElement = document.createElement('div');\n    this.titleElement.classList.add('expandable-view-title');\n    this.titleElement.setAttribute('jslog', `${VisualLogging.sectionHeader().context(view.viewId()).track({\n                                     click: true,\n                                     keydown: 'Enter|Space|ArrowLeft|ArrowRight',\n                                   })}`);\n    ARIAUtils.markAsTreeitem(this.titleElement);\n    this.titleExpandIcon = createIcon('triangle-right', 'title-expand-icon');\n    this.titleElement.appendChild(this.titleExpandIcon);\n    const titleText = view.title();\n    createTextChild(this.titleElement, titleText);\n    ARIAUtils.setLabel(this.titleElement, titleText);\n    ARIAUtils.setExpanded(this.titleElement, false);\n    this.titleElement.tabIndex = 0;\n    self.onInvokeElement(this.titleElement, this.toggleExpanded.bind(this));\n    this.titleElement.addEventListener('keydown', this.onTitleKeyDown.bind(this), false);\n    this.contentElement.insertBefore(this.titleElement, this.contentElement.firstChild);\n\n    ARIAUtils.setControls(this.titleElement, this.contentElement.createChild('slot'));\n    this.view = view;\n    expandableContainerForView.set(view, this);\n  }\n\n  override wasShown(): void {\n    super.wasShown();\n    if (this.widget && this.materializePromise) {\n      void this.materializePromise.then(() => {\n        if (this.titleElement.classList.contains('expanded') && this.widget) {\n          this.widget.show(this.element);\n        }\n      });\n    }\n  }\n\n  private materialize(): Promise<void> {\n    if (this.materializePromise) {\n      return this.materializePromise;\n    }\n    // TODO(crbug.com/1006759): Transform to async-await\n    const promises = [];\n    promises.push(this.view.toolbarItems().then(toolbarItems => {\n      const toolbarElement = ViewManager.createToolbar(toolbarItems);\n      if (toolbarElement) {\n        this.titleElement.appendChild(toolbarElement);\n      }\n    }));\n    promises.push(this.view.widget().then(widget => {\n      this.widget = widget;\n      widgetForView.set(this.view, widget);\n      widget.show(this.element);\n    }));\n    this.materializePromise = Promise.all(promises).then(() => {});\n    return this.materializePromise;\n  }\n\n  expand(): Promise<void> {\n    if (this.titleElement.classList.contains('expanded')) {\n      return this.materialize();\n    }\n    this.titleElement.classList.add('expanded');\n    ARIAUtils.setExpanded(this.titleElement, true);\n    this.titleExpandIcon.name = 'triangle-down';\n    return this.materialize().then(() => {\n      if (this.widget) {\n        this.widget.show(this.element);\n      }\n    });\n  }\n\n  private collapse(): void {\n    if (!this.titleElement.classList.contains('expanded')) {\n      return;\n    }\n    this.titleElement.classList.remove('expanded');\n    ARIAUtils.setExpanded(this.titleElement, false);\n    this.titleExpandIcon.name = 'triangle-right';\n    void this.materialize().then(() => {\n      if (this.widget) {\n        this.widget.detach();\n      }\n    });\n  }\n\n  private toggleExpanded(event: Event): void {\n    if (event.type === 'keydown' && event.target !== this.titleElement) {\n      return;\n    }\n    if (this.titleElement.classList.contains('expanded')) {\n      this.collapse();\n    } else {\n      void this.expand();\n    }\n  }\n\n  private onTitleKeyDown(event: Event): void {\n    if (event.target !== this.titleElement) {\n      return;\n    }\n    const keyEvent = (event as KeyboardEvent);\n    if (keyEvent.key === 'ArrowLeft') {\n      this.collapse();\n    } else if (keyEvent.key === 'ArrowRight') {\n      if (!this.titleElement.classList.contains('expanded')) {\n        void this.expand();\n      } else if (this.widget) {\n        this.widget.focus();\n      }\n    }\n  }\n}\n\nconst expandableContainerForView = new WeakMap<View, ExpandableContainerWidget>();\n\nclass Location {\n  protected readonly manager: ViewManager;\n  private readonly revealCallback: (() => void)|undefined;\n  readonly #widget: Widget;\n\n  constructor(manager: ViewManager, widget: Widget, revealCallback?: (() => void)) {\n    this.manager = manager;\n    this.revealCallback = revealCallback;\n    this.#widget = widget;\n  }\n\n  widget(): Widget {\n    return this.#widget;\n  }\n\n  reveal(): void {\n    if (this.revealCallback) {\n      this.revealCallback();\n    }\n  }\n\n  showView(\n      _view: View, _insertBefore?: View|null, _userGesture?: boolean, _omitFocus?: boolean,\n      _shouldSelectTab?: boolean): Promise<void> {\n    throw new Error('not implemented');\n  }\n\n  removeView(_view: View): void {\n    throw new Error('not implemented');\n  }\n\n  isViewVisible(_view: View): boolean {\n    throw new Error('not implemented');\n  }\n}\n\nconst locationForView = new WeakMap<View, Location>();\n\ntype CloseableTabSetting = Record<string, boolean>;\n\ntype TabOrderSetting = Record<string, number>;\n\nclass TabbedLocation extends Location implements TabbedViewLocation {\n  #tabbedPane: TabbedPane;\n  private readonly location: string;\n  private readonly allowReorder: boolean|undefined;\n  private readonly closeableTabSetting: Common.Settings.Setting<CloseableTabSetting>;\n  private readonly tabOrderSetting: Common.Settings.Setting<TabOrderSetting>;\n  private readonly lastSelectedTabSetting?: Common.Settings.Setting<string>;\n  private readonly defaultTab: string|null|undefined;\n  private readonly views = new Map<string, View>();\n\n  constructor(\n      manager: ViewManager, revealCallback: (() => void), location: string, restoreSelection?: boolean,\n      allowReorder?: boolean, defaultTab?: string|null) {\n    const tabbedPane = new TabbedPane();\n    if (allowReorder) {\n      tabbedPane.setAllowTabReorder(true);\n    }\n\n    super(manager, tabbedPane, revealCallback);\n    this.location = location;\n    this.#tabbedPane = tabbedPane;\n    this.allowReorder = allowReorder;\n\n    this.#tabbedPane.addEventListener(TabbedPaneEvents.TabSelected, this.tabSelected, this);\n    this.#tabbedPane.addEventListener(TabbedPaneEvents.TabClosed, this.tabClosed, this);\n    this.#tabbedPane.addEventListener(TabbedPaneEvents.PaneVisibilityChanged, this.tabbedPaneVisibilityChanged, this);\n\n    this.closeableTabSetting = Common.Settings.Settings.instance().createSetting('closeable-tabs', {});\n    // As we give tabs the capability to be closed we also need to add them to the setting so they are still open\n    // until the user decide to close them\n    this.setOrUpdateCloseableTabsSetting();\n\n    this.tabOrderSetting = Common.Settings.Settings.instance().createSetting(location + '-tab-order', {});\n    this.#tabbedPane.addEventListener(TabbedPaneEvents.TabOrderChanged, this.persistTabOrder, this);\n    if (restoreSelection) {\n      this.lastSelectedTabSetting = Common.Settings.Settings.instance().createSetting(location + '-selected-tab', '');\n    }\n    this.defaultTab = defaultTab;\n\n    if (location) {\n      this.appendApplicableItems(location);\n    }\n  }\n\n  private setOrUpdateCloseableTabsSetting(): void {\n    // Update the setting value, we respect the closed state decided by the user\n    // and append the new tabs with value of true so they are shown open\n    const newClosable = {\n      ...defaultOptionsForTabs,\n      ...this.closeableTabSetting.get(),\n    };\n    this.closeableTabSetting.set(newClosable);\n  }\n\n  override widget(): Widget {\n    return this.#tabbedPane;\n  }\n\n  tabbedPane(): TabbedPane {\n    return this.#tabbedPane;\n  }\n\n  enableMoreTabsButton(): ToolbarMenuButton {\n    const moreTabsButton = new ToolbarMenuButton(\n        this.appendTabsToMenu.bind(this), /* isIconDropdown */ true, undefined, 'more-tabs', 'dots-vertical');\n    this.#tabbedPane.leftToolbar().appendToolbarItem(moreTabsButton);\n    return moreTabsButton;\n  }\n\n  appendApplicableItems(locationName: string): void {\n    const views = this.manager.viewsForLocation(locationName);\n    if (this.allowReorder) {\n      let i = 0;\n      const persistedOrders = this.tabOrderSetting.get();\n      const orders = new Map<string, number>();\n      for (const view of views) {\n        orders.set(view.viewId(), persistedOrders[view.viewId()] || (++i) * TabbedLocation.orderStep);\n      }\n      views.sort((a, b) => (orders.get(a.viewId()) as number) - (orders.get(b.viewId()) as number));\n    }\n\n    for (const view of views) {\n      const id = view.viewId();\n      this.views.set(id, view);\n      locationForView.set(view, this);\n      if (view.isTransient()) {\n        continue;\n      }\n      if (!view.isCloseable()) {\n        this.appendTab(view);\n      } else if (this.closeableTabSetting.get()[id]) {\n        this.appendTab(view);\n      }\n    }\n\n    // If a default tab was provided we open or select it\n    if (this.defaultTab) {\n      if (this.#tabbedPane.hasTab(this.defaultTab)) {\n        // If the tabbed pane already has the tab we just have to select it\n        this.#tabbedPane.selectTab(this.defaultTab);\n      } else {\n        // If the tab is not present already it can be because:\n        // it doesn't correspond to this tabbed location\n        // or because it is closed\n        const view = Array.from(this.views.values()).find(view => view.viewId() === this.defaultTab);\n        if (view) {\n          // defaultTab is indeed part of the views for this tabbed location\n          void this.showView(view);\n        }\n      }\n    } else if (this.lastSelectedTabSetting && this.#tabbedPane.hasTab(this.lastSelectedTabSetting.get())) {\n      this.#tabbedPane.selectTab(this.lastSelectedTabSetting.get());\n    }\n  }\n\n  private appendTabsToMenu(contextMenu: ContextMenu): void {\n    const views = Array.from(this.views.values());\n    views.sort((viewa, viewb) => viewa.title().localeCompare(viewb.title()));\n\n    for (const view of views) {\n      const title = view.title();\n\n      if (view.viewId() === 'issues-pane') {\n        contextMenu.defaultSection().appendItem(title, () => {\n          Host.userMetrics.issuesPanelOpenedFrom(Host.UserMetrics.IssueOpener.HAMBURGER_MENU);\n          void this.showView(view, undefined, true);\n        }, {jslogContext: 'issues-pane'});\n        continue;\n      }\n\n      const isPreviewFeature = view.isPreviewFeature();\n      contextMenu.defaultSection().appendItem(\n          title, this.showView.bind(this, view, undefined, true), {isPreviewFeature, jslogContext: view.viewId()});\n    }\n  }\n\n  private appendTab(view: View, index?: number): void {\n    this.#tabbedPane.appendTab(\n        view.viewId(), view.title(), new ContainerWidget(view), undefined, false,\n        view.isCloseable() || view.isTransient(), view.isPreviewFeature(), index);\n    const iconName = view.iconName();\n    if (iconName) {\n      const icon = createIcon(iconName);\n      this.#tabbedPane.setTabIcon(view.viewId(), icon);\n    }\n  }\n\n  appendView(view: View, insertBefore?: View|null): void {\n    if (this.#tabbedPane.hasTab(view.viewId())) {\n      return;\n    }\n    const oldLocation = locationForView.get(view);\n    if (oldLocation && oldLocation !== this) {\n      oldLocation.removeView(view);\n    }\n    locationForView.set(view, this);\n    this.manager.views.set(view.viewId(), view);\n    this.views.set(view.viewId(), view);\n    let index: number|undefined = undefined;\n    const tabIds = this.#tabbedPane.tabIds();\n    if (this.allowReorder) {\n      const orderSetting = this.tabOrderSetting.get();\n      const order = orderSetting[view.viewId()];\n      for (let i = 0; order && i < tabIds.length; ++i) {\n        if (orderSetting[tabIds[i]] && orderSetting[tabIds[i]] > order) {\n          index = i;\n          break;\n        }\n      }\n    } else if (insertBefore) {\n      for (let i = 0; i < tabIds.length; ++i) {\n        if (tabIds[i] === insertBefore.viewId()) {\n          index = i;\n          break;\n        }\n      }\n    }\n    this.appendTab(view, index);\n\n    if (view.isCloseable()) {\n      const tabs = this.closeableTabSetting.get();\n      const tabId = view.viewId();\n      if (!tabs[tabId]) {\n        tabs[tabId] = true;\n        this.closeableTabSetting.set(tabs);\n      }\n    }\n    this.persistTabOrder();\n  }\n\n  override async showView(\n      view: View, insertBefore?: View|null, userGesture?: boolean, omitFocus?: boolean,\n      shouldSelectTab: boolean|undefined = true): Promise<void> {\n    this.appendView(view, insertBefore);\n    if (shouldSelectTab) {\n      this.#tabbedPane.selectTab(view.viewId(), userGesture);\n    }\n    if (!omitFocus) {\n      this.#tabbedPane.focus();\n    }\n    const widget = (this.#tabbedPane.tabView(view.viewId()) as ContainerWidget);\n    await widget.materialize();\n  }\n\n  override removeView(view: View): void {\n    if (!this.#tabbedPane.hasTab(view.viewId())) {\n      return;\n    }\n\n    locationForView.delete(view);\n    this.manager.views.delete(view.viewId());\n    this.#tabbedPane.closeTab(view.viewId());\n    this.views.delete(view.viewId());\n  }\n\n  override isViewVisible(view: View): boolean {\n    return this.#tabbedPane.isShowing() && this.#tabbedPane?.selectedTabId === view.viewId();\n  }\n\n  private tabbedPaneVisibilityChanged(event: Common.EventTarget.EventTargetEvent<{isVisible: boolean}>): void {\n    if (!this.#tabbedPane.selectedTabId) {\n      return;\n    }\n    this.manager.dispatchEventToListeners(Events.VIEW_VISIBILITY_CHANGED, {\n      location: this.location,\n      revealedViewId: event.data.isVisible ? this.#tabbedPane.selectedTabId : undefined,\n      hiddenViewId: event.data.isVisible ? undefined : this.#tabbedPane.selectedTabId,\n    });\n  }\n\n  private tabSelected(event: Common.EventTarget.EventTargetEvent<EventData>): void {\n    const {tabId, prevTabId, isUserGesture} = event.data;\n    if (this.lastSelectedTabSetting && isUserGesture) {\n      this.lastSelectedTabSetting.set(tabId);\n    }\n    this.manager.dispatchEventToListeners(Events.VIEW_VISIBILITY_CHANGED, {\n      location: this.location,\n      revealedViewId: tabId,\n      hiddenViewId: prevTabId,\n    });\n  }\n\n  private tabClosed(event: Common.EventTarget.EventTargetEvent<EventData>): void {\n    const {tabId} = event.data;\n    const tabs = this.closeableTabSetting.get();\n    if (tabs[tabId]) {\n      tabs[tabId] = false;\n      this.closeableTabSetting.set(tabs);\n    }\n    const view = this.views.get(tabId);\n    if (view) {\n      void view.disposeView();\n    }\n  }\n\n  private persistTabOrder(): void {\n    const tabIds = this.#tabbedPane.tabIds();\n    const tabOrders: Record<string, number> = {};\n    for (let i = 0; i < tabIds.length; i++) {\n      tabOrders[tabIds[i]] = (i + 1) * TabbedLocation.orderStep;\n    }\n\n    const oldTabOrder = this.tabOrderSetting.get();\n    const oldTabArray = Object.keys(oldTabOrder);\n    oldTabArray.sort((a, b) => oldTabOrder[a] - oldTabOrder[b]);\n    let lastOrder = 0;\n    for (const key of oldTabArray) {\n      if (key in tabOrders) {\n        lastOrder = tabOrders[key];\n        continue;\n      }\n      tabOrders[key] = ++lastOrder;\n    }\n    this.tabOrderSetting.set(tabOrders);\n  }\n\n  static orderStep = 10;  // Keep in sync with descriptors.\n}\n\nclass StackLocation extends Location implements ViewLocation {\n  private readonly vbox: VBox;\n  private readonly expandableContainers: Map<string, ExpandableContainerWidget>;\n\n  constructor(manager: ViewManager, revealCallback?: (() => void), location?: string, jslogContext?: string) {\n    const vbox = new VBox();\n    vbox.element.setAttribute('jslog', `${VisualLogging.pane(jslogContext || 'sidebar').track({resize: true})}`);\n    super(manager, vbox, revealCallback);\n    this.vbox = vbox;\n    ARIAUtils.markAsTree(vbox.element);\n\n    this.expandableContainers = new Map();\n\n    if (location) {\n      this.appendApplicableItems(location);\n    }\n  }\n\n  appendView(view: View, insertBefore?: View|null): void {\n    const oldLocation = locationForView.get(view);\n    if (oldLocation && oldLocation !== this) {\n      oldLocation.removeView(view);\n    }\n\n    let container = this.expandableContainers.get(view.viewId());\n    if (!container) {\n      locationForView.set(view, this);\n      this.manager.views.set(view.viewId(), view);\n      container = new ExpandableContainerWidget(view);\n      let beforeElement: Node|null = null;\n      if (insertBefore) {\n        const beforeContainer = expandableContainerForView.get(insertBefore);\n        beforeElement = beforeContainer ? beforeContainer.element : null;\n      }\n      container.show(this.vbox.contentElement, beforeElement);\n      this.expandableContainers.set(view.viewId(), container);\n    }\n  }\n\n  override async showView(view: View, insertBefore?: View|null): Promise<void> {\n    this.appendView(view, insertBefore);\n    const container = this.expandableContainers.get(view.viewId());\n    if (container) {\n      await container.expand();\n    }\n  }\n\n  override removeView(view: View): void {\n    const container = this.expandableContainers.get(view.viewId());\n    if (!container) {\n      return;\n    }\n\n    container.detach();\n    this.expandableContainers.delete(view.viewId());\n    locationForView.delete(view);\n    this.manager.views.delete(view.viewId());\n  }\n\n  override isViewVisible(_view: View): boolean {\n    // TODO(crbug.com/435356108): Implement this\n    throw new Error('not implemented');\n  }\n\n  appendApplicableItems(locationName: string): void {\n    for (const view of this.manager.viewsForLocation(locationName)) {\n      this.appendView(view);\n    }\n  }\n}\n\nexport {\n  getLocalizedViewLocationCategory,\n  getRegisteredLocationResolvers,\n  maybeRemoveViewExtension,\n  registerLocationResolver,\n  registerViewExtension,\n  resetViewRegistration,\n  ViewLocationCategory,\n  ViewLocationValues,\n  ViewPersistence,\n  ViewRegistration,\n};\n", "// Copyright 2025 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n// IMPORTANT: this file is auto generated. Please do not edit this file.\n/* istanbul ignore file */\nexport default `/* Copyright 2025 The Chromium Authors\nUse of this source code is governed by a BSD-style license that can be\nfound in the LICENSE file. */\n\n/*\n * Copyright (C) 2006, 2007, 2008 Apple Inc.  All rights reserved.\n * Copyright (C) 2009 Anthony Ricaud <rik@webkit.org>\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions\n * are met:\n *\n * 1.  Redistributions of source code must retain the above copyright\n *     notice, this list of conditions and the following disclaimer.\n * 2.  Redistributions in binary form must reproduce the above copyright\n *     notice, this list of conditions and the following disclaimer in the\n *     documentation and/or other materials provided with the distribution.\n * 3.  Neither the name of Apple Computer, Inc. (\"Apple\") nor the names of\n *     its contributors may be used to endorse or promote products derived\n *     from this software without specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY APPLE AND ITS CONTRIBUTORS \"AS IS\" AND ANY\n * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL APPLE OR ITS CONTRIBUTORS BE LIABLE FOR ANY\n * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF\n * THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n.expandable-view-title {\n  display: flex;\n  align-items: center;\n  background-color: var(--sys-color-surface2);\n  height: 22px;\n  padding: 0 5px;\n  white-space: nowrap;\n  overflow: hidden;\n  position: relative;\n  border-bottom: 1px solid transparent;\n}\n\n.expandable-view-title.expanded,\n.expandable-view-title:last-child {\n  border-bottom: 1px solid var(--sys-color-divider);\n}\n\n.expandable-view-title devtools-toolbar {\n  margin-top: -3px;\n}\n\n.expandable-view-title > devtools-toolbar {\n  position: absolute;\n  right: 0;\n  top: 0;\n}\n\n.expandable-view-title:not(.expanded) devtools-toolbar {\n  display: none;\n}\n\n.title-expand-icon {\n  margin-right: 2px;\n  margin-bottom: -2px;\n}\n\n.expandable-view-title:focus-visible {\n  background-color: var(--sys-color-state-focus-highlight);\n\n  :host-context(.accessibility-sidebar-view) & {\n    background-color: var(--sys-color-tonal-container);\n  }\n}\n\n@media (forced-colors: active) {\n  .expandable-view-title:focus-visible {\n    forced-color-adjust: none;\n    color: HighlightText;\n    background-color: Highlight;\n    box-shadow: 0 0 0 2px Highlight inset;\n  }\n\n  .expandable-view-title:focus-visible .title-expand-icon {\n    color: HighlightText;\n  }\n}\n\n/*# sourceURL=${import.meta.resolve('./viewContainers.css')} */`;", "\n// Copyright 2020 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\nimport * as i18n from '../../core/i18n/i18n.js';\nimport type * as Platform from '../../core/platform/platform.js';\nimport * as Root from '../../core/root/root.js';\nimport type * as Foundation from '../../foundation/foundation.js';\n\nimport type {ViewLocationResolver} from './View.js';\nimport type {Widget} from './Widget.js';\n\nconst UIStrings = {\n  /**\n   * @description Badge label for an entry in the Quick Open menu. Selecting the entry opens the 'Elements' panel.\n   */\n  elements: 'Elements',\n  /**\n   * @description Badge label for an entry in the Quick Open menu. Selecting the entry opens the 'Drawer' panel.\n   */\n  drawer: 'Drawer',\n  /**\n   * @description Badge label for an entry in the Quick Open menu. Selecting the entry opens the 'Drawer sidebar' panel.\n   */\n  drawer_sidebar: 'Drawer sidebar',\n  /**\n   * @description Badge label for an entry in the Quick Open menu. Selecting the entry opens the 'Panel'.\n   */\n  panel: 'Panel',\n  /**\n   * @description Badge label for an entry in the Quick Open menu. Selecting the entry opens the 'Network' panel.\n   */\n  network: 'Network',\n  /**\n   * @description Badge label for an entry in the Quick Open menu. Selecting the entry opens the 'Settings' panel.\n   */\n  settings: 'Settings',\n  /**\n   * @description Badge label for an entry in the Quick Open menu. Selecting the entry opens the 'Sources' panel.\n   */\n  sources: 'Sources',\n} as const;\nconst str_ = i18n.i18n.registerUIStrings('ui/legacy/ViewRegistration.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\n\nexport const enum ViewPersistence {\n  CLOSEABLE = 'closeable',\n  PERMANENT = 'permanent',\n  TRANSIENT = 'transient',\n}\n\nexport const enum ViewLocationValues {\n  PANEL = 'panel',\n  SETTINGS_VIEW = 'settings-view',\n  ELEMENTS_SIDEBAR = 'elements-sidebar',\n  SOURCES_SIDEBAR_BOTTOM = 'sources.sidebar-bottom',\n  NAVIGATOR_VIEW = 'navigator-view',\n  DRAWER_VIEW = 'drawer-view',\n  DRAWER_SIDEBAR = 'drawer-sidebar',\n  NETWORK_SIDEBAR = 'network-sidebar',\n  SOURCES_SIDEBAR_TOP = 'sources.sidebar-top',\n  SOURCES_SIDEBAR_TABS = 'sources.sidebar-tabs',\n}\n\nexport interface ViewRegistration {\n  /**\n   * The name of the experiment a view is associated with. Enabling and disabling the declared\n   * experiment will enable and disable the view respectively.\n   */\n  experiment?: Root.Runtime.ExperimentName;\n  /**\n   * A condition is a function that will make the view available if it\n   * returns true, and not available, otherwise. Make sure that objects you\n   * access from inside the condition function are ready at the time when the\n   * setting conditions are checked.\n   */\n  condition?: Root.Runtime.Condition;\n  /**\n   * The command added to the command menu used to show the view. It usually follows the shape Show <title> as it must\n   * not be localized at declaration since it is localized internally when appending the commands to the command menu.\n   * The existing duplication of the declaration of the title is expected to be removed once the migration to the version\n   * 2 of the localization model has been completed (crbug.com/1136655).\n   */\n  commandPrompt: () => Platform.UIString.LocalizedString;\n\n  /**\n   * A UI string used as the title of the view.\n   */\n  title: () => Platform.UIString.LocalizedString;\n\n  /**\n   * Whether the view is permanently visible or can be opened temporarily.\n   */\n  persistence?: ViewPersistence;\n\n  /**\n   * Whether the view is a preview feature (a corresponding icon is shown then).\n   */\n  isPreviewFeature?: boolean;\n  /**\n   * Unique identifier of the view.\n   */\n  id: Lowercase<string>;\n  /**\n   * An identifier for the location of the view. The location is resolved by\n   * an extension of type '@UI.ViewLocationResolver'.\n   */\n  location?: ViewLocationValues;\n  /**\n   * Whether the view has a toolbar.\n   */\n  hasToolbar?: boolean;\n  /**\n   * Returns an instance of the class that wraps the view.\n   * The common pattern for implementing this function is loading the module with the wrapping 'Widget'\n   * lazily loaded.\n   * The DevTools universe is passed along, allowing `loadView` to retrieve necessary dependencies.\n   * Prefer passing individual dependencies one by one instead of forwarding the full universe. This\n   * makes testing easier.\n   * As an example:\n   *\n   * ```js\n   * let loadedElementsModule;\n   *\n   * async function loadElementsModule() {\n   *\n   *   if (!loadedElementsModule) {\n   *     loadedElementsModule = await import('./elements.js');\n   *   }\n   *   return loadedElementsModule;\n   * }\n   * UI.ViewManager.registerViewExtension({\n   *   <...>\n   *   async loadView(universe) {\n   *      const Elements = await loadElementsModule();\n   *      const pageResourceLoader = universe.context.get(SDK.PageResourceLoader.PageResourceLoader);\n   *      return new Elements.ElementsPanel.ElementsPanel(pageResourceLoader);\n   *   },\n   *   <...>\n   * });\n   * ```\n   */\n  loadView: (universe: Foundation.Universe.Universe) => Promise<Widget>;\n  /**\n   * Used to sort the views that appear in a shared location.\n   */\n  order?: number;\n  /**\n   * The names of the settings the registered view performs as UI for.\n   */\n  settings?: string[];\n  /**\n   * Words used to find the view in the Command Menu.\n   */\n  tags?: Array<() => Platform.UIString.LocalizedString>;\n  /**\n   * Icon to be used next to view's title.\n   */\n  iconName?: string;\n  /**\n   * Whether a view needs to be promoted. A new badge is shown next to the menu items then.\n   */\n  featurePromotionId?: string;\n}\n\nconst registeredViewExtensions = new Map<string, ViewRegistration>();\n\nexport function registerViewExtension(registration: ViewRegistration): void {\n  const viewId = registration.id;\n  if (registeredViewExtensions.has(viewId)) {\n    throw new Error(`Duplicate view id '${viewId}'`);\n  }\n  registeredViewExtensions.set(viewId, registration);\n}\n\nexport function getRegisteredViewExtensions(): ViewRegistration[] {\n  return registeredViewExtensions.values()\n      .filter(\n          view => Root.Runtime.Runtime.isDescriptorEnabled({experiment: view.experiment, condition: view.condition}))\n      .toArray();\n}\n\nexport function maybeRemoveViewExtension(viewId: string): boolean {\n  return registeredViewExtensions.delete(viewId);\n}\n\nconst registeredLocationResolvers: LocationResolverRegistration[] = [];\n\nconst viewLocationNameSet = new Set<ViewLocationValues>();\n\nexport function registerLocationResolver(registration: LocationResolverRegistration): void {\n  const locationName = registration.name;\n  if (viewLocationNameSet.has(locationName)) {\n    throw new Error(`Duplicate view location name registration '${locationName}'`);\n  }\n  viewLocationNameSet.add(locationName);\n  registeredLocationResolvers.push(registration);\n}\n\nexport function getRegisteredLocationResolvers(): LocationResolverRegistration[] {\n  return registeredLocationResolvers;\n}\n\nexport function resetViewRegistration(): void {\n  registeredViewExtensions.clear();\n  registeredLocationResolvers.length = 0;\n  viewLocationNameSet.clear();\n}\n\nexport const enum ViewLocationCategory {\n  NONE = '',  // `NONE` must be a falsy value. Legacy code uses if-checks for the category.\n  ELEMENTS = 'ELEMENTS',\n  DRAWER = 'DRAWER',\n  DRAWER_SIDEBAR = 'DRAWER_SIDEBAR',\n  PANEL = 'PANEL',\n  NETWORK = 'NETWORK',\n  SETTINGS = 'SETTINGS',\n  SOURCES = 'SOURCES',\n}\n\nexport function getLocalizedViewLocationCategory(category: ViewLocationCategory): Platform.UIString.LocalizedString {\n  switch (category) {\n    case ViewLocationCategory.ELEMENTS:\n      return i18nString(UIStrings.elements);\n    case ViewLocationCategory.DRAWER:\n      return i18nString(UIStrings.drawer);\n    case ViewLocationCategory.DRAWER_SIDEBAR:\n      return i18nString(UIStrings.drawer_sidebar);\n    case ViewLocationCategory.PANEL:\n      return i18nString(UIStrings.panel);\n    case ViewLocationCategory.NETWORK:\n      return i18nString(UIStrings.network);\n    case ViewLocationCategory.SETTINGS:\n      return i18nString(UIStrings.settings);\n    case ViewLocationCategory.SOURCES:\n      return i18nString(UIStrings.sources);\n    case ViewLocationCategory.NONE:\n      return i18n.i18n.lockedString('');\n  }\n}\n\nexport interface LocationResolverRegistration {\n  name: ViewLocationValues;\n  category: ViewLocationCategory;\n  loadResolver: () => Promise<ViewLocationResolver>;\n}\n", "// Copyright 2025 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n// IMPORTANT: this file is auto generated. Please do not edit this file.\n/* istanbul ignore file */\nexport default `/*\n * Copyright 2014 The Chromium Authors\n * Use of this source code is governed by a BSD-style license that can be\n * found in the LICENSE file.\n */\n\n.soft-context-menu {\n  overflow-y: auto;\n  min-width: 160px !important; /* stylelint-disable-line declaration-no-important */\n  /* NOTE: Keep padding in sync with padding adjustment in SoftContextMenu.ts */\n  padding: var(--sys-size-5) 0;\n  border: 1px solid var(--sys-color-neutral-outline);\n  border-radius: var(--sys-shape-corner-small);\n  background-color: var(--app-color-menu-background);\n  box-shadow: var(--sys-elevation-level3);\n}\n\n:host-context(.theme-with-dark-background) .soft-context-menu {\n  border: none;\n}\n\n.dockside-title {\n  padding-right: var(--sys-size-14);\n}\n\n.dockside-title + devtools-toolbar {\n  margin-right: -8px;\n}\n\n.soft-context-menu-item {\n  display: flex;\n  width: 100%;\n  font-size: 12px;\n  height: var(--sys-size-11);\n  padding: 0 var(--sys-size-8);\n  white-space: nowrap;\n  align-items: center;\n\n  &.soft-context-menu-item-mouse-over {\n    background-color: var(--sys-color-state-hover-on-subtle);\n  }\n\n  & .new-badge {\n    margin-left: var(--sys-size-4);\n  }\n\n  & devtools-icon {\n    width: var(--sys-size-8);\n    height: var(--sys-size-8);\n    pointer-events: none;\n\n    &.checkmark {\n      margin-right: var(--sys-size-3);\n      opacity: 0%;\n\n      .soft-context-menu-item[checked] & {\n        opacity: 100%;\n      }\n    }\n\n    &[name=\"experiment\"] {\n      width: var(--sys-size-11);\n      height: var(--sys-size-11);\n      padding: 0 var(--sys-size-3);\n    }\n  }\n}\n\n.soft-context-menu-disabled {\n  color: var(--sys-color-state-disabled);\n  pointer-events: none;\n}\n\n.soft-context-menu-separator {\n  padding: var(--sys-size-4) 0;\n\n  & > .separator-line {\n    height: var(--sys-size-1);\n    border-bottom: var(--sys-size-1) solid var(--sys-color-divider);\n    pointer-events: none;\n  }\n}\n\n.soft-context-menu-item-submenu-arrow {\n  pointer-events: none;\n  text-align: right;\n  align-self: center;\n  margin-left: auto;\n\n  & > devtools-icon {\n    width: var(--sys-size-8);\n    height: var(--sys-size-8);\n    color: var(--sys-color-on-surface-subtle);\n  }\n}\n\n.soft-context-menu-custom-item {\n  display: inline-flex;\n  justify-content: center;\n  align-items: center;\n  flex: auto;\n}\n\n.soft-context-menu-shortcut {\n  color: var(--sys-color-on-surface-subtle);\n  pointer-events: none;\n  flex: 1 1 auto;\n  text-align: right;\n  padding-left: var(--sys-size-6);\n\n  .soft-context-menu-disabled &,\n  .soft-context-menu-item-mouse-over & {\n    color: inherit;\n  }\n}\n\n@media (forced-colors: active) {\n  .soft-context-menu-item {\n    color: canvastext;\n  }\n\n  .soft-context-menu-item.soft-context-menu-item-mouse-over,\n  .theme-with-dark-background .soft-context-menu-item.soft-context-menu-item-mouse-over,\n  :host-context(.theme-with-dark-background) .soft-context-menu-item.soft-context-menu-item-mouse-over {\n    background-color: Highlight;\n    color: HighlightText;\n    forced-color-adjust: none;\n  }\n\n  .soft-context-menu .soft-context-menu-item devtools-icon,\n  .soft-context-menu .soft-context-menu-item .soft-context-menu-shortcut {\n    color: ButtonText;\n  }\n\n  .soft-context-menu .soft-context-menu-item.soft-context-menu-item-mouse-over devtools-icon,\n  .soft-context-menu .soft-context-menu-item.soft-context-menu-item-mouse-over .soft-context-menu-shortcut {\n    color: HighlightText;\n  }\n\n  .soft-context-menu:focus-visible {\n    forced-color-adjust: none;\n    background: canvas;\n    border-color: Highlight;\n  }\n\n  .soft-context-menu-separator > .separator-line {\n    border-bottom-color: ButtonText;\n  }\n}\n\n/*# sourceURL=${import.meta.resolve('./softContextMenu.css')} */`;", "// Copyright 2021 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n/* eslint-disable @devtools/no-imperative-dom-api */\n\n/*\n * Copyright (C) 2008 Apple Inc.  All rights reserved.\n * Copyright (C) 2011 Google Inc.  All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions\n * are met:\n *\n * 1.  Redistributions of source code must retain the above copyright\n *     notice, this list of conditions and the following disclaimer.\n * 2.  Redistributions in binary form must reproduce the above copyright\n *     notice, this list of conditions and the following disclaimer in the\n *     documentation and/or other materials provided with the distribution.\n * 3.  Neither the name of Apple Computer, Inc. (\"Apple\") nor the names of\n *     its contributors may be used to endorse or promote products derived\n *     from this software without specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY APPLE AND ITS CONTRIBUTORS \"AS IS\" AND ANY\n * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL APPLE OR ITS CONTRIBUTORS BE LIABLE FOR ANY\n * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF\n * THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\nimport * as Common from '../../core/common/common.js';\nimport * as Platform from '../../core/platform/platform.js';\nimport * as TextUtils from '../../models/text_utils/text_utils.js';\nimport * as VisualLogging from '../visual_logging/visual_logging.js';\n\nimport * as ARIAUtils from './ARIAUtils.js';\nimport {appendStyle, rangeOfWord} from './DOMUtilities.js';\nimport {SuggestBox, type SuggestBoxDelegate, type Suggestion} from './SuggestBox.js';\nimport textPromptStyles from './textPrompt.css.js';\nimport {Tooltip} from './Tooltip.js';\nimport {cloneCustomElement, ElementFocusRestorer} from './UIUtils.js';\n\n/**\n * A custom element wrapper around TextPrompt that allows text-editing contents in-place.\n *\n * ## Usage ##\n *\n * ```\n * <devtools-prompt>\n *  <b>Structured</b> content\n * </devtools-prompt>\n *\n * ```\n *\n * @property completionTimeout Sets the delay for showing the autocomplete suggestion box.\n * @event commit Editing is done and the result was accepted.\n * @event cancel Editing was canceled.\n * @event beforeautocomplete This is sent before the autocomplete suggestion box is triggered and before the <datalist>\n *                           is read.\n * @attribute editing Setting/removing this attribute starts/stops editing.\n * @attribute completions Sets the `id` of the <datalist> containing the autocomplete options.\n * @attribute placeholder Sets a placeholder that's shown in place of the text contents when editing if the text is too\n *            large.\n */\nexport class TextPromptElement extends HTMLElement {\n  static readonly observedAttributes = ['editing', 'completions', 'placeholder'];\n  readonly #shadow = this.attachShadow({mode: 'open'});\n  readonly #entrypoint = this.#shadow.createChild('span');\n  readonly #slot = this.#entrypoint.createChild('slot');\n  readonly #textPrompt = new TextPrompt();\n  #completionTimeout: number|null = null;\n  #completionObserver = new MutationObserver(this.#onMutate.bind(this));\n\n  constructor() {\n    super();\n    this.#textPrompt.initialize(this.#willAutoComplete.bind(this));\n  }\n\n  #onMutate(changes: MutationRecord[]): void {\n    const listId = this.getAttribute('completions');\n    if (!listId) {\n      return;\n    }\n    const checkIfNodeIsInCompletionList = (node: Node): boolean => {\n      if (node instanceof HTMLDataListElement) {\n        return node.id === listId;\n      }\n      if (node instanceof HTMLOptionElement) {\n        return Boolean(node.parentElement && checkIfNodeIsInCompletionList(node.parentElement));\n      }\n      return false;\n    };\n    const affectsCompletionList = (change: MutationRecord): boolean =>\n        change.addedNodes.values().some(checkIfNodeIsInCompletionList) ||\n        change.removedNodes.values().some(checkIfNodeIsInCompletionList) ||\n        checkIfNodeIsInCompletionList(change.target);\n\n    if (changes.some(affectsCompletionList)) {\n      this.#updateCompletions();\n    }\n  }\n\n  attributeChangedCallback(name: string, oldValue: string|null, newValue: string|null): void {\n    if (oldValue === newValue) {\n      return;\n    }\n\n    switch (name) {\n      case 'editing':\n        if (this.isConnected) {\n          if (newValue !== null && newValue !== 'false' && oldValue === null) {\n            this.#startEditing();\n          } else {\n            this.#stopEditing();\n          }\n        }\n        break;\n      case 'completions':\n        if (this.getAttribute('completions')) {\n          this.#completionObserver.observe(this, {childList: true, subtree: true});\n          this.#updateCompletions();\n        } else {\n          this.#textPrompt.clearAutocomplete();\n          this.#completionObserver.disconnect();\n        }\n        break;\n    }\n  }\n\n  #updateCompletions(): void {\n    if (this.isConnected) {\n      void this.#textPrompt.complete(/* force=*/ true);\n    }\n  }\n\n  async #willAutoComplete(expression: string, filter: string, force: boolean): Promise<Suggestion[]> {\n    this.dispatchEvent(new TextPromptElement.BeforeAutoCompleteEvent({expression, filter, force}));\n\n    const listId = this.getAttribute('completions');\n    if (!listId) {\n      return [];\n    }\n\n    const datalist = this.getComponentRoot()?.querySelectorAll<HTMLOptionElement>(`datalist#${listId} > option`);\n    if (!datalist?.length) {\n      return [];\n    }\n\n    return datalist.values()\n        .filter(option => option.textContent.startsWith(filter.toLowerCase()))\n        .map(option => ({text: option.textContent}))\n        .toArray();\n  }\n\n  #startEditing(): void {\n    const truncatedTextPlaceholder = this.getAttribute('placeholder');\n    const placeholder = this.#entrypoint.createChild('span');\n    if (truncatedTextPlaceholder === null) {\n      placeholder.textContent = this.#slot.deepInnerText();\n    } else {\n      placeholder.setTextContentTruncatedIfNeeded(this.#slot.deepInnerText(), truncatedTextPlaceholder);\n    }\n    this.#slot.remove();\n\n    const proxy = this.#textPrompt.attachAndStartEditing(placeholder, e => this.#done(e, /* commit=*/ true));\n    proxy.addEventListener('keydown', this.#editingValueKeyDown.bind(this));\n    placeholder.getComponentSelection()?.selectAllChildren(placeholder);\n  }\n\n  #stopEditing(): void {\n    this.#entrypoint.removeChildren();\n    this.#entrypoint.appendChild(this.#slot);\n    this.#textPrompt.detach();\n  }\n\n  connectedCallback(): void {\n    if (this.hasAttribute('editing')) {\n      this.attributeChangedCallback('editing', null, '');\n    }\n  }\n\n  #done(e: Event, commit: boolean): void {\n    const target = e.target as HTMLElement;\n    const text = target.textContent || '';\n    if (commit) {\n      this.dispatchEvent(new TextPromptElement.CommitEvent(text));\n    } else {\n      this.dispatchEvent(new TextPromptElement.CancelEvent());\n    }\n    e.consume();\n  }\n\n  #editingValueKeyDown(event: Event): void {\n    if (event.handled || !(event instanceof KeyboardEvent)) {\n      return;\n    }\n\n    if (event.key === 'Enter') {\n      this.#done(event, /* commit=*/ true);\n    } else if (Platform.KeyboardUtilities.isEscKey(event)) {\n      this.#done(event, /* commit=*/ false);\n    }\n  }\n\n  set completionTimeout(timeout: number) {\n    this.#completionTimeout = timeout;\n    this.#textPrompt.setAutocompletionTimeout(timeout);\n  }\n\n  override cloneNode(): Node {\n    const clone = cloneCustomElement(this);\n    if (this.#completionTimeout !== null) {\n      clone.completionTimeout = this.#completionTimeout;\n    }\n    return clone;\n  }\n}\n\nexport namespace TextPromptElement {\n  export class CommitEvent extends CustomEvent<string> {\n    constructor(detail: string) {\n      super('commit', {detail});\n    }\n  }\n  export class CancelEvent extends CustomEvent<string> {\n    constructor() {\n      super('cancel');\n    }\n  }\n  export class BeforeAutoCompleteEvent extends CustomEvent<{expression: string, filter: string, force: boolean}> {\n    constructor(detail: {expression: string, filter: string, force: boolean}) {\n      super('beforeautocomplete', {detail});\n    }\n  }\n}\n\ncustomElements.define('devtools-prompt', TextPromptElement);\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    'devtools-prompt': TextPromptElement;\n  }\n}\n\nexport class TextPrompt extends Common.ObjectWrapper.ObjectWrapper<EventTypes> implements SuggestBoxDelegate {\n  private proxyElement!: HTMLElement|undefined;\n  private proxyElementDisplay: string;\n  private autocompletionTimeout: number;\n  #title: string;\n  private queryRange: TextUtils.TextRange.TextRange|null;\n  private previousText: string;\n  private currentSuggestion: Suggestion|null;\n  private completionRequestId: number;\n  private ghostTextElement: HTMLSpanElement;\n  private leftParenthesesIndices: number[];\n  private loadCompletions!: (\n      this: null,\n      arg1: string,\n      arg2: string,\n      arg3: boolean,\n      ) => Promise<Suggestion[]>;\n  private completionStopCharacters!: string;\n  private usesSuggestionBuilder!: boolean;\n  #element?: Element;\n  private boundOnKeyDown?: ((ev: KeyboardEvent) => void);\n  private boundOnInput?: ((ev: Event) => void);\n  private boundOnMouseWheel?: ((event: Event) => void);\n  private boundClearAutocomplete?: (() => void);\n  private boundOnBlur?: ((ev: Event) => void);\n  private contentElement?: HTMLElement;\n  private suggestBox?: SuggestBox;\n  private isEditing?: boolean;\n  private focusRestorer?: ElementFocusRestorer;\n  private blurListener?: ((arg0: Event) => void);\n  private oldTabIndex?: number;\n  private completeTimeout?: number;\n  #disableDefaultSuggestionForEmptyInput?: boolean;\n  jslogContext: string|undefined = undefined;\n\n  constructor() {\n    super();\n    this.proxyElementDisplay = 'inline-block';\n    this.autocompletionTimeout = DefaultAutocompletionTimeout;\n    this.#title = '';\n    this.queryRange = null;\n    this.previousText = '';\n    this.currentSuggestion = null;\n    this.completionRequestId = 0;\n    this.ghostTextElement = document.createElement('span');\n    this.ghostTextElement.classList.add('auto-complete-text');\n    this.ghostTextElement.setAttribute('contenteditable', 'false');\n    this.leftParenthesesIndices = [];\n    ARIAUtils.setHidden(this.ghostTextElement, true);\n  }\n\n  initialize(\n      completions: (this: null, expression: string, filter: string, force: boolean) => Promise<Suggestion[]>,\n      stopCharacters?: string, usesSuggestionBuilder?: boolean): void {\n    this.loadCompletions = completions;\n    this.completionStopCharacters = stopCharacters || ' =:[({;,!+-*/&|^<>.';\n    this.usesSuggestionBuilder = usesSuggestionBuilder || false;\n  }\n\n  setAutocompletionTimeout(timeout: number): void {\n    this.autocompletionTimeout = timeout;\n  }\n\n  renderAsBlock(): void {\n    this.proxyElementDisplay = 'block';\n  }\n\n  /**\n   * Clients should never attach any event listeners to the |element|. Instead,\n   * they should use the result of this method to attach listeners for bubbling events.\n   */\n  attach(element: Element): Element {\n    return this.#attach(element);\n  }\n\n  /**\n   * Clients should never attach any event listeners to the |element|. Instead,\n   * they should use the result of this method to attach listeners for bubbling events\n   * or the |blurListener| parameter to register a \"blur\" event listener on the |element|\n   * (since the \"blur\" event does not bubble.)\n   */\n  attachAndStartEditing(element: Element, blurListener?: (arg0: Event) => void): Element {\n    const proxyElement = this.#attach(element);\n    this.startEditing(blurListener);\n    return proxyElement;\n  }\n\n  #attach(element: Element): Element {\n    if (this.proxyElement) {\n      throw new Error('Cannot attach an attached TextPrompt');\n    }\n    this.#element = element;\n\n    this.boundOnKeyDown = this.onKeyDown.bind(this);\n    this.boundOnInput = this.onInput.bind(this);\n    this.boundOnMouseWheel = this.onMouseWheel.bind(this);\n    this.boundClearAutocomplete = this.clearAutocomplete.bind(this);\n    this.boundOnBlur = this.onBlur.bind(this);\n    this.proxyElement = element.ownerDocument.createElement('span');\n    appendStyle(this.proxyElement, textPromptStyles);\n    this.contentElement = this.proxyElement.createChild('div', 'text-prompt-root');\n    this.proxyElement.style.display = this.proxyElementDisplay;\n    if (element.parentElement) {\n      element.parentElement.insertBefore(this.proxyElement, element);\n    }\n    this.contentElement.appendChild(element);\n    let jslog = VisualLogging.textField().track({\n      keydown: 'ArrowLeft|ArrowUp|PageUp|Home|PageDown|ArrowRight|ArrowDown|End|Space|Tab|Enter|Escape',\n      change: true,\n    });\n\n    if (this.jslogContext) {\n      jslog = jslog.context(this.jslogContext);\n    }\n    if (!this.#element.hasAttribute('jslog')) {\n      this.#element.setAttribute('jslog', `${jslog}`);\n    }\n    this.#element.classList.add('text-prompt');\n    ARIAUtils.markAsTextBox(this.#element);\n    ARIAUtils.setAutocomplete(this.#element, ARIAUtils.AutocompleteInteractionModel.BOTH);\n    ARIAUtils.setHasPopup(this.#element, ARIAUtils.PopupRole.LIST_BOX);\n    this.#element.setAttribute('contenteditable', 'plaintext-only');\n    this.element().addEventListener('keydown', this.boundOnKeyDown, false);\n    this.#element.addEventListener('input', this.boundOnInput, false);\n    this.#element.addEventListener('wheel', this.boundOnMouseWheel, false);\n    this.#element.addEventListener('selectstart', this.boundClearAutocomplete, false);\n    this.#element.addEventListener('blur', this.boundOnBlur, false);\n\n    this.suggestBox = new SuggestBox(this, 20);\n\n    if (this.#title) {\n      Tooltip.install(this.proxyElement, this.#title);\n    }\n\n    return this.proxyElement;\n  }\n\n  element(): HTMLElement {\n    if (!this.#element) {\n      throw new Error('Expected an already attached element!');\n    }\n    return this.#element as HTMLElement;\n  }\n\n  detach(): void {\n    this.removeFromElement();\n    if (this.focusRestorer) {\n      this.focusRestorer.restore();\n    }\n    if (this.proxyElement?.parentElement) {\n      this.proxyElement.parentElement.insertBefore(this.element(), this.proxyElement);\n      this.proxyElement.remove();\n    }\n    delete this.proxyElement;\n    this.element().classList.remove('text-prompt');\n    this.element().removeAttribute('contenteditable');\n    this.element().removeAttribute('role');\n    ARIAUtils.clearAutocomplete(this.element());\n    ARIAUtils.setHasPopup(this.element(), ARIAUtils.PopupRole.FALSE);\n  }\n\n  textWithCurrentSuggestion(): string {\n    const text = this.text();\n    if (!this.queryRange || !this.currentSuggestion) {\n      return text;\n    }\n    const suggestion = this.currentSuggestion.text;\n    return text.substring(0, this.queryRange.startColumn) + suggestion + text.substring(this.queryRange.endColumn);\n  }\n\n  text(): string {\n    let text: string = this.element().textContent || '';\n    if (this.ghostTextElement.parentNode) {\n      const addition = this.ghostTextElement.textContent || '';\n      text = text.substring(0, text.length - addition.length);\n    }\n    return text;\n  }\n\n  setText(text: string): void {\n    this.clearAutocomplete();\n    this.element().textContent = text;\n    this.previousText = this.text();\n    if (this.element().hasFocus()) {\n      this.moveCaretToEndOfPrompt();\n      this.element().scrollIntoView();\n    }\n  }\n\n  setSelectedRange(startIndex: number, endIndex: number): void {\n    if (startIndex < 0) {\n      throw new RangeError('Selected range start must be a nonnegative integer');\n    }\n    const textContent = this.element().textContent;\n    const textContentLength = textContent ? textContent.length : 0;\n    if (endIndex > textContentLength) {\n      endIndex = textContentLength;\n    }\n    if (endIndex < startIndex) {\n      endIndex = startIndex;\n    }\n\n    const textNode = (this.element().childNodes[0] as Node);\n    const range = new Range();\n    range.setStart(textNode, startIndex);\n    range.setEnd(textNode, endIndex);\n    const selection = window.getSelection();\n    if (selection) {\n      selection.removeAllRanges();\n      selection.addRange(range);\n    }\n  }\n\n  focus(): void {\n    this.element().focus();\n  }\n\n  title(): string {\n    return this.#title;\n  }\n\n  setTitle(title: string): void {\n    this.#title = title;\n    if (this.proxyElement) {\n      Tooltip.install(this.proxyElement, title);\n    }\n  }\n\n  setPlaceholder(placeholder: string, ariaPlaceholder?: string): void {\n    if (placeholder) {\n      this.element().setAttribute('data-placeholder', placeholder);\n      // TODO(https://github.com/nvaccess/nvda/issues/10164): Remove ariaPlaceholder once the NVDA bug is fixed\n      // ariaPlaceholder and placeholder may differ, like in case the placeholder contains a '?'\n      ARIAUtils.setPlaceholder(this.element(), ariaPlaceholder || placeholder);\n    } else {\n      this.element().removeAttribute('data-placeholder');\n      ARIAUtils.setPlaceholder(this.element(), null);\n    }\n  }\n\n  setEnabled(enabled: boolean): void {\n    if (enabled) {\n      this.element().setAttribute('contenteditable', 'plaintext-only');\n    } else {\n      this.element().removeAttribute('contenteditable');\n    }\n    this.element().classList.toggle('disabled', !enabled);\n  }\n\n  private removeFromElement(): void {\n    this.clearAutocomplete();\n    this.element().removeEventListener(\n        'keydown', (this.boundOnKeyDown as (this: HTMLElement, arg1: Event) => void), false);\n    this.element().removeEventListener('input', (this.boundOnInput as (this: HTMLElement, arg1: Event) => void), false);\n    this.element().removeEventListener(\n        'selectstart', (this.boundClearAutocomplete as (this: HTMLElement, arg1: Event) => void), false);\n    this.element().removeEventListener('blur', (this.boundOnBlur as (this: HTMLElement, arg1: Event) => void), false);\n    if (this.isEditing) {\n      this.stopEditing();\n    }\n    if (this.suggestBox) {\n      this.suggestBox.hide();\n    }\n  }\n\n  private startEditing(blurListener?: ((arg0: Event) => void)): void {\n    this.isEditing = true;\n    if (this.contentElement) {\n      this.contentElement.classList.add('text-prompt-editing');\n    }\n    this.focusRestorer = new ElementFocusRestorer(this.element());\n    if (blurListener) {\n      this.blurListener = blurListener;\n      this.element().addEventListener('blur', this.blurListener, false);\n    }\n    this.oldTabIndex = this.element().tabIndex;\n    if (this.element().tabIndex < 0) {\n      this.element().tabIndex = 0;\n    }\n    if (!this.text()) {\n      this.autoCompleteSoon();\n    }\n  }\n\n  private stopEditing(): void {\n    this.element().tabIndex = (this.oldTabIndex as number);\n    if (this.blurListener) {\n      this.element().removeEventListener('blur', this.blurListener, false);\n    }\n    if (this.contentElement) {\n      this.contentElement.classList.remove('text-prompt-editing');\n    }\n    delete this.isEditing;\n  }\n\n  onMouseWheel(_event: Event): void {\n    // Subclasses can implement.\n  }\n\n  onKeyDown(event: KeyboardEvent): void {\n    let handled = false;\n    if (this.isSuggestBoxVisible() && this.suggestBox?.keyPressed(event)) {\n      void VisualLogging.logKeyDown(this.suggestBox.element, event);\n      event.consume(true);\n      return;\n    }\n\n    switch (event.key) {\n      case 'Tab':\n        handled = this.tabKeyPressed(event);\n        break;\n      case 'ArrowLeft':\n      case 'ArrowUp':\n      case 'PageUp':\n      case 'Home':\n        this.clearAutocomplete();\n        break;\n      case 'PageDown':\n      case 'ArrowRight':\n      case 'ArrowDown':\n      case 'End':\n        if (this.isCaretAtEndOfPrompt()) {\n          handled = this.acceptAutoComplete();\n        } else {\n          this.clearAutocomplete();\n        }\n        break;\n      case 'Escape':\n        if (this.isSuggestBoxVisible() || this.currentSuggestion) {\n          this.clearAutocomplete();\n          handled = true;\n        }\n        break;\n      case ' ':  // Space\n        if (event.ctrlKey && !event.metaKey && !event.altKey && !event.shiftKey) {\n          this.autoCompleteSoon(true);\n          handled = true;\n        }\n        break;\n    }\n\n    if (event.key === 'Enter') {\n      event.preventDefault();\n    }\n\n    if (handled) {\n      event.consume(true);\n    }\n  }\n\n  private acceptSuggestionOnStopCharacters(key: string): boolean {\n    if (!this.currentSuggestion || !this.queryRange || key.length !== 1 ||\n        !this.completionStopCharacters?.includes(key)) {\n      return false;\n    }\n\n    const query = this.text().substring(this.queryRange.startColumn, this.queryRange.endColumn);\n    if (query && this.currentSuggestion.text.startsWith(query + key)) {\n      this.queryRange.endColumn += 1;\n      return this.acceptAutoComplete();\n    }\n    return false;\n  }\n\n  onInput(ev: Event): void {\n    const event = (ev as InputEvent);\n    let text = this.text();\n    const currentEntry = event.data;\n\n    if (event.inputType === 'insertFromPaste' && text.includes('\\n')) {\n      /* Ensure that we remove any linebreaks from copied/pasted content\n       * to avoid breaking the rendering of the filter bar.\n       * See crbug.com/849563.\n       * We don't let users enter linebreaks when\n       * typing manually, so we should escape them if copying text in.\n       */\n      text = Platform.StringUtilities.stripLineBreaks(text);\n      this.setText(text);\n    }\n\n    // Skip the current ')' entry if the caret is right before a ')' and there's an unmatched '('.\n    const caretPosition = this.getCaretPosition();\n    if (currentEntry === ')' && caretPosition >= 0 && this.leftParenthesesIndices.length > 0) {\n      const nextCharAtCaret = text[caretPosition];\n      if (nextCharAtCaret === ')' && this.tryMatchingLeftParenthesis(caretPosition)) {\n        text = text.substring(0, caretPosition) + text.substring(caretPosition + 1);\n        this.setText(text);\n        return;\n      }\n    }\n\n    if (currentEntry && !this.acceptSuggestionOnStopCharacters(currentEntry)) {\n      const hasCommonPrefix = text.startsWith(this.previousText) || this.previousText.startsWith(text);\n      if (this.queryRange && hasCommonPrefix) {\n        this.queryRange.endColumn += text.length - this.previousText.length;\n      }\n    }\n    this.refreshGhostText();\n    this.previousText = text;\n    this.dispatchEventToListeners(Events.TEXT_CHANGED);\n\n    this.autoCompleteSoon();\n  }\n\n  acceptAutoComplete(): boolean {\n    let result = false;\n    if (this.isSuggestBoxVisible() && this.suggestBox) {\n      result = this.suggestBox.acceptSuggestion();\n    }\n    if (!result) {\n      result = this.#acceptSuggestion();\n    }\n    if (this.usesSuggestionBuilder && result) {\n      // Trigger autocompletions for text prompts using suggestion builders\n      this.autoCompleteSoon();\n    }\n    return result;\n  }\n\n  clearAutocomplete(): void {\n    const beforeText = this.textWithCurrentSuggestion();\n\n    if (this.isSuggestBoxVisible() && this.suggestBox) {\n      this.suggestBox.hide();\n    }\n    this.clearAutocompleteTimeout();\n    this.queryRange = null;\n    this.refreshGhostText();\n\n    if (beforeText !== this.textWithCurrentSuggestion()) {\n      this.dispatchEventToListeners(Events.TEXT_CHANGED);\n    }\n    this.currentSuggestion = null;\n  }\n\n  private onBlur(): void {\n    this.clearAutocomplete();\n  }\n\n  private refreshGhostText(): void {\n    if (this.currentSuggestion?.hideGhostText) {\n      this.ghostTextElement.remove();\n      return;\n    }\n    if (this.queryRange && this.currentSuggestion && this.isCaretAtEndOfPrompt() &&\n        this.currentSuggestion.text.startsWith(this.text().substring(this.queryRange.startColumn))) {\n      this.ghostTextElement.textContent =\n          this.currentSuggestion.text.substring(this.queryRange.endColumn - this.queryRange.startColumn);\n      this.element().appendChild(this.ghostTextElement);\n    } else {\n      this.ghostTextElement.remove();\n    }\n  }\n\n  private clearAutocompleteTimeout(): void {\n    if (this.completeTimeout) {\n      clearTimeout(this.completeTimeout);\n      delete this.completeTimeout;\n    }\n    this.completionRequestId++;\n  }\n\n  autoCompleteSoon(force?: boolean): void {\n    const immediately = this.isSuggestBoxVisible() || force;\n    if (!this.completeTimeout) {\n      this.completeTimeout =\n          window.setTimeout(this.complete.bind(this, force), immediately ? 0 : this.autocompletionTimeout);\n    }\n  }\n\n  async complete(force?: boolean): Promise<void> {\n    this.clearAutocompleteTimeout();\n    if (!this.element().isConnected) {\n      return;\n    }\n\n    const selection = this.element().getComponentSelection();\n    if (!selection || selection.rangeCount === 0) {\n      return;\n    }\n    const selectionRange = selection.getRangeAt(0);\n\n    let shouldExit;\n\n    if (!force && !this.isCaretAtEndOfPrompt() && !this.isSuggestBoxVisible()) {\n      shouldExit = true;\n    } else if (!selection.isCollapsed) {\n      shouldExit = true;\n    }\n\n    if (shouldExit) {\n      this.clearAutocomplete();\n      return;\n    }\n\n    const wordQueryRange = rangeOfWord(\n        selectionRange.startContainer, selectionRange.startOffset, this.completionStopCharacters, this.element(),\n        'backward');\n\n    const expressionRange = wordQueryRange.cloneRange();\n    expressionRange.collapse(true);\n    expressionRange.setStartBefore(this.element());\n    const completionRequestId = ++this.completionRequestId;\n    const completions =\n        await this.loadCompletions.call(null, expressionRange.toString(), wordQueryRange.toString(), Boolean(force));\n    this.completionsReady(completionRequestId, (selection), wordQueryRange, Boolean(force), completions);\n  }\n\n  disableDefaultSuggestionForEmptyInput(): void {\n    this.#disableDefaultSuggestionForEmptyInput = true;\n  }\n\n  private boxForAnchorAtStart(selection: Selection, textRange: Range): AnchorBox {\n    const rangeCopy = selection.getRangeAt(0).cloneRange();\n    const anchorElement = document.createElement('span');\n    anchorElement.textContent = '\\u200B';\n    textRange.insertNode(anchorElement);\n    const box = anchorElement.boxInWindow(window);\n    anchorElement.remove();\n    selection.removeAllRanges();\n    selection.addRange(rangeCopy);\n    return box;\n  }\n\n  additionalCompletions(_query: string): Suggestion[] {\n    return [];\n  }\n\n  private completionsReady(\n      completionRequestId: number, selection: Selection, originalWordQueryRange: Range, force: boolean,\n      completions: Suggestion[]): void {\n    if (this.completionRequestId !== completionRequestId) {\n      return;\n    }\n\n    const query = originalWordQueryRange.toString();\n\n    // Filter out dupes.\n    const store = new Set<string>();\n    completions = completions.filter(item => !store.has(item.text) && Boolean(store.add(item.text)));\n\n    if (query || force) {\n      if (query) {\n        completions = completions.concat(this.additionalCompletions(query));\n      } else {\n        completions = this.additionalCompletions(query).concat(completions);\n      }\n    }\n\n    if (!completions.length) {\n      this.clearAutocomplete();\n      return;\n    }\n\n    const selectionRange = selection.getRangeAt(0);\n\n    const fullWordRange = document.createRange();\n    fullWordRange.setStart(originalWordQueryRange.startContainer, originalWordQueryRange.startOffset);\n    fullWordRange.setEnd(selectionRange.endContainer, selectionRange.endOffset);\n\n    if (query + selectionRange.toString() !== fullWordRange.toString()) {\n      return;\n    }\n\n    const beforeRange = document.createRange();\n    beforeRange.setStart(this.element(), 0);\n    beforeRange.setEnd(fullWordRange.startContainer, fullWordRange.startOffset);\n    this.queryRange = new TextUtils.TextRange.TextRange(\n        0, beforeRange.toString().length, 0, beforeRange.toString().length + fullWordRange.toString().length);\n\n    const shouldSelect = !this.#disableDefaultSuggestionForEmptyInput || Boolean(this.text());\n    if (this.suggestBox) {\n      this.suggestBox.updateSuggestions(\n          this.boxForAnchorAtStart(selection, fullWordRange), completions, shouldSelect, !this.isCaretAtEndOfPrompt(),\n          this.text());\n    }\n  }\n\n  applySuggestion(suggestion: Suggestion|null, isIntermediateSuggestion?: boolean): void {\n    this.currentSuggestion = suggestion;\n    this.refreshGhostText();\n    if (isIntermediateSuggestion) {\n      this.dispatchEventToListeners(Events.TEXT_CHANGED);\n    }\n  }\n\n  acceptSuggestion(): void {\n    this.#acceptSuggestion();\n  }\n\n  #acceptSuggestion(): boolean {\n    if (!this.queryRange) {\n      return false;\n    }\n\n    const suggestionLength = this.currentSuggestion ? this.currentSuggestion.text.length : 0;\n    const selectionRange = this.currentSuggestion ? this.currentSuggestion.selectionRange : null;\n    const endColumn = selectionRange ? selectionRange.endColumn : suggestionLength;\n    const startColumn = selectionRange ? selectionRange.startColumn : suggestionLength;\n    this.element().textContent = this.textWithCurrentSuggestion();\n    this.setDOMSelection(this.queryRange.startColumn + startColumn, this.queryRange.startColumn + endColumn);\n    this.updateLeftParenthesesIndices();\n\n    this.clearAutocomplete();\n    this.dispatchEventToListeners(Events.TEXT_CHANGED);\n\n    return true;\n  }\n\n  ownerElement(): Element {\n    return this.element();\n  }\n\n  setDOMSelection(startColumn: number, endColumn: number): void {\n    this.element().normalize();\n    const node = this.element().childNodes[0];\n    if (!node || node === this.ghostTextElement) {\n      return;\n    }\n    const range = document.createRange();\n    range.setStart(node, startColumn);\n    range.setEnd(node, endColumn);\n    const selection = this.element().getComponentSelection();\n    if (selection) {\n      selection.removeAllRanges();\n      selection.addRange(range);\n    }\n  }\n\n  isSuggestBoxVisible(): boolean {\n    return this.suggestBox?.visible() ?? false;\n  }\n\n  private isCaretAtEndOfPrompt(): boolean {\n    const selection = this.element().getComponentSelection();\n    if (!selection || selection.rangeCount === 0 || !selection.isCollapsed) {\n      return false;\n    }\n\n    const selectionRange = selection.getRangeAt(0);\n    let node: (Node|null)|Node = selectionRange.startContainer;\n    if (!node.isSelfOrDescendant(this.element())) {\n      return false;\n    }\n\n    if (this.ghostTextElement.isAncestor(node)) {\n      return true;\n    }\n\n    if (node.nodeType === Node.TEXT_NODE && selectionRange.startOffset < (node.nodeValue || '').length) {\n      return false;\n    }\n\n    let foundNextText = false;\n    while (node) {\n      if (node.nodeType === Node.TEXT_NODE && node.nodeValue?.length) {\n        if (foundNextText && !this.ghostTextElement.isAncestor(node)) {\n          return false;\n        }\n        foundNextText = true;\n      }\n\n      node = node.traverseNextNode(this.#element);\n    }\n\n    return true;\n  }\n\n  moveCaretToEndOfPrompt(): void {\n    const selection = this.element().getComponentSelection();\n    const selectionRange = document.createRange();\n\n    let container: Node = this.element();\n    while (container.lastChild) {\n      container = container.lastChild;\n    }\n    let offset = 0;\n    if (container.nodeType === Node.TEXT_NODE) {\n      const textNode = (container as Text);\n      offset = (textNode.textContent || '').length;\n    }\n    selectionRange.setStart(container, offset);\n    selectionRange.setEnd(container, offset);\n\n    if (selection) {\n      selection.removeAllRanges();\n      selection.addRange(selectionRange);\n    }\n  }\n\n  /**\n   * -1 if no caret can be found in text prompt\n   */\n  private getCaretPosition(): number {\n    if (!this.element().hasFocus()) {\n      return -1;\n    }\n\n    const selection = this.element().getComponentSelection();\n    if (!selection || selection.rangeCount === 0 || !selection.isCollapsed) {\n      return -1;\n    }\n    const selectionRange = selection.getRangeAt(0);\n    if (selectionRange.startOffset !== selectionRange.endOffset) {\n      return -1;\n    }\n    return selectionRange.startOffset;\n  }\n\n  tabKeyPressed(_event: Event): boolean {\n    return this.acceptAutoComplete();\n  }\n\n  /**\n   * Try matching the most recent open parenthesis with the given right\n   * parenthesis, and closes the matched left parenthesis if found.\n   * Return the result of the matching.\n   */\n  private tryMatchingLeftParenthesis(rightParenthesisIndex: number): boolean {\n    const leftParenthesesIndices = this.leftParenthesesIndices;\n    if (leftParenthesesIndices.length === 0 || rightParenthesisIndex < 0) {\n      return false;\n    }\n\n    for (let i = leftParenthesesIndices.length - 1; i >= 0; --i) {\n      if (leftParenthesesIndices[i] < rightParenthesisIndex) {\n        leftParenthesesIndices.splice(i, 1);\n        return true;\n      }\n    }\n\n    return false;\n  }\n\n  private updateLeftParenthesesIndices(): void {\n    const text = this.text();\n    const leftParenthesesIndices: number[] = this.leftParenthesesIndices = [];\n    for (let i = 0; i < text.length; ++i) {\n      if (text[i] === '(') {\n        leftParenthesesIndices.push(i);\n      }\n    }\n  }\n\n  suggestBoxForTest(): SuggestBox|undefined {\n    return this.suggestBox;\n  }\n}\n\nconst DefaultAutocompletionTimeout = 250;\n\nexport const enum Events {\n  TEXT_CHANGED = 'TextChanged',\n}\n\nexport interface EventTypes {\n  [Events.TEXT_CHANGED]: void;\n}\n", "// Copyright 2013 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\n/* eslint-disable @devtools/no-imperative-dom-api */\n\nimport * as i18n from '../../core/i18n/i18n.js';\nimport * as Platform from '../../core/platform/platform.js';\nimport * as Geometry from '../../models/geometry/geometry.js';\nimport type * as TextUtils from '../../models/text_utils/text_utils.js';\nimport * as VisualLogging from '../visual_logging/visual_logging.js';\n\nimport * as ARIAUtils from './ARIAUtils.js';\nimport {AnchorBehavior, GlassPane} from './GlassPane.js';\nimport {ListControl, type ListDelegate, ListMode} from './ListControl.js';\nimport {ListModel} from './ListModel.js';\nimport suggestBoxStyles from './suggestBox.css.js';\nimport {createShadowRootWithCoreStyles, measuredScrollbarWidth, measurePreferredSize} from './UIUtils.js';\n\nconst UIStrings = {\n  /**\n   * @description Aria alert to read the suggestion for the suggestion box when typing in text editor\n   * @example {name} PH1\n   * @example {2} PH2\n   * @example {5} PH3\n   */\n  sSuggestionSOfS: '{PH1}, suggestion {PH2} of {PH3}',\n  /**\n   * @description Aria alert to confirm the suggestion when it is selected from the suggestion box\n   * @example {name} PH1\n   */\n  sSuggestionSSelected: '{PH1}, suggestion selected',\n} as const;\nconst str_ = i18n.i18n.registerUIStrings('ui/legacy/SuggestBox.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\nexport interface SuggestBoxDelegate {\n  applySuggestion(suggestion: Suggestion|null, isIntermediateSuggestion?: boolean): void;\n\n  /**\n   * acceptSuggestion will be always called after call to applySuggestion with isIntermediateSuggestion being equal to false.\n   */\n  acceptSuggestion(): void;\n\n  /**\n   * Called to obtain the owner element.\n   */\n  ownerElement(): Element;\n}\n\nexport class SuggestBox implements ListDelegate<Suggestion> {\n  private readonly suggestBoxDelegate: SuggestBoxDelegate;\n  private readonly maxItemsHeight: number|undefined;\n  private rowHeight: number;\n  private userEnteredText: string;\n  private onlyCompletion: Suggestion|null;\n  private readonly items: ListModel<Suggestion>;\n  private readonly list: ListControl<Suggestion>;\n  element: HTMLDivElement;\n  private readonly glassPane: GlassPane;\n\n  constructor(suggestBoxDelegate: SuggestBoxDelegate, maxItemsHeight?: number) {\n    this.suggestBoxDelegate = suggestBoxDelegate;\n    this.maxItemsHeight = maxItemsHeight;\n    this.rowHeight = 17;\n    this.userEnteredText = '';\n\n    this.onlyCompletion = null;\n\n    this.items = new ListModel();\n    this.list = new ListControl(this.items, this, ListMode.EqualHeightItems);\n    this.element = this.list.element;\n    this.element.classList.add('suggest-box');\n    this.element.addEventListener('mousedown', event => event.preventDefault(), true);\n    this.element.addEventListener('click', this.onClick.bind(this), false);\n    this.element.setAttribute(\n        'jslog',\n        `${VisualLogging.menu().parent('mapped').track({resize: true, keydown: 'ArrowUp|ArrowDown|PageUp|PageDown'})}`);\n\n    this.glassPane = new GlassPane();\n    this.glassPane.setAnchorBehavior(AnchorBehavior.PREFER_BOTTOM);\n    this.glassPane.setOutsideClickCallback(this.hide.bind(this));\n    const shadowRoot = createShadowRootWithCoreStyles(this.glassPane.contentElement, {cssFile: suggestBoxStyles});\n    shadowRoot.appendChild(this.element);\n  }\n\n  visible(): boolean {\n    return this.glassPane.isShowing();\n  }\n\n  setPosition(anchorBox: AnchorBox): void {\n    this.glassPane.setContentAnchorBox(anchorBox);\n  }\n\n  setAnchorBehavior(behavior: AnchorBehavior): void {\n    this.glassPane.setAnchorBehavior(behavior);\n  }\n\n  private updateMaxSize(items: Suggestion[]): void {\n    const maxWidth = this.maxWidth(items);\n    const length = this.maxItemsHeight ? Math.min(this.maxItemsHeight, items.length) : items.length;\n    const maxHeight = length * this.rowHeight;\n    this.glassPane.setMaxContentSize(new Geometry.Size(maxWidth, maxHeight));\n  }\n\n  private maxWidth(items: Suggestion[]): number {\n    const kMaxWidth = 300;\n    if (!items.length) {\n      return kMaxWidth;\n    }\n    let maxItem;\n    let maxLength = -Infinity;\n    for (let i = 0; i < items.length; i++) {\n      const length = (items[i].title || items[i].text).length + (items[i].subtitle || '').length;\n      if (length > maxLength) {\n        maxLength = length;\n        maxItem = items[i];\n      }\n    }\n    const element = this.createElementForItem((maxItem as Suggestion));\n    const preferredWidth =\n        measurePreferredSize(element, this.element).width + measuredScrollbarWidth(this.element.ownerDocument);\n    return Math.min(kMaxWidth, preferredWidth);\n  }\n\n  private show(): void {\n    if (this.visible()) {\n      return;\n    }\n    VisualLogging.setMappedParent(this.element, this.suggestBoxDelegate.ownerElement());\n    // TODO(dgozman): take document as a parameter.\n    this.glassPane.show(document);\n    const suggestion: Suggestion = {text: '1', subtitle: '12'};\n    this.rowHeight = measurePreferredSize(this.createElementForItem(suggestion), this.element).height;\n    ARIAUtils.setControls(this.suggestBoxDelegate.ownerElement(), this.element);\n    ARIAUtils.setExpanded(this.suggestBoxDelegate.ownerElement(), true);\n  }\n\n  hide(): void {\n    if (!this.visible()) {\n      return;\n    }\n    this.glassPane.hide();\n    ARIAUtils.setControls(this.suggestBoxDelegate.ownerElement(), null);\n    ARIAUtils.setExpanded(this.suggestBoxDelegate.ownerElement(), false);\n  }\n\n  private applySuggestion(isIntermediateSuggestion?: boolean): boolean {\n    if (this.onlyCompletion) {\n      isIntermediateSuggestion ?\n          ARIAUtils.LiveAnnouncer.alert(i18nString(\n              UIStrings.sSuggestionSOfS,\n              {PH1: this.onlyCompletion.text, PH2: this.list.selectedIndex() + 1, PH3: this.items.length})) :\n          ARIAUtils.LiveAnnouncer.alert(i18nString(UIStrings.sSuggestionSSelected, {PH1: this.onlyCompletion.text}));\n      this.suggestBoxDelegate.applySuggestion(this.onlyCompletion, isIntermediateSuggestion);\n      return true;\n    }\n    const suggestion = this.list.selectedItem();\n    if (suggestion?.text) {\n      isIntermediateSuggestion ? ARIAUtils.LiveAnnouncer.alert(i18nString(UIStrings.sSuggestionSOfS, {\n        PH1: suggestion.title || suggestion.text,\n        PH2: this.list.selectedIndex() + 1,\n        PH3: this.items.length,\n      })) :\n                                 ARIAUtils.LiveAnnouncer.alert(i18nString(\n                                     UIStrings.sSuggestionSSelected, {PH1: suggestion.title || suggestion.text}));\n    }\n    this.suggestBoxDelegate.applySuggestion(suggestion, isIntermediateSuggestion);\n\n    return this.visible() && Boolean(suggestion);\n  }\n\n  acceptSuggestion(): boolean {\n    const result = this.applySuggestion();\n    this.hide();\n    if (!result) {\n      return false;\n    }\n\n    this.suggestBoxDelegate.acceptSuggestion();\n\n    return true;\n  }\n\n  createElementForItem(item: Suggestion): Element {\n    const query = this.userEnteredText;\n    const element = document.createElement('div');\n    element.classList.add('suggest-box-content-item');\n    element.classList.add('source-code');\n    if (item.isSecondary) {\n      element.classList.add('secondary');\n    }\n    element.tabIndex = -1;\n    const maxTextLength = 50 + query.length;\n    const displayText = Platform.StringUtilities.trimEndWithMaxLength((item.title || item.text).trim(), maxTextLength)\n                            .replace(/\\n/g, '\\u21B5');\n\n    const titleElement = element.createChild('span', 'suggestion-title');\n    const index = displayText.toLowerCase().indexOf(query.toLowerCase());\n    if (index > 0) {\n      titleElement.createChild('span').textContent = displayText.substring(0, index);\n    }\n    if (index > -1) {\n      titleElement.createChild('span', 'query').textContent = displayText.substring(index, index + query.length);\n    }\n    titleElement.createChild('span').textContent = displayText.substring(index > -1 ? index + query.length : 0);\n    titleElement.createChild('span', 'spacer');\n    if (item.subtitleRenderer) {\n      const subtitleElement = (item.subtitleRenderer.call(null) as HTMLElement);\n      subtitleElement.classList.add('suggestion-subtitle');\n      element.appendChild(subtitleElement);\n    } else if (item.subtitle) {\n      const subtitleElement = element.createChild('span', 'suggestion-subtitle');\n      subtitleElement.textContent =\n          Platform.StringUtilities.trimEndWithMaxLength(item.subtitle, maxTextLength - displayText.length);\n    }\n    if (item.iconElement) {\n      element.appendChild(item.iconElement);\n    }\n    return element;\n  }\n\n  heightForItem(_item: Suggestion): number {\n    return this.rowHeight;\n  }\n\n  isItemSelectable(_item: Suggestion): boolean {\n    return true;\n  }\n\n  selectedItemChanged(_from: Suggestion|null, _to: Suggestion|null, fromElement: Element|null, toElement: Element|null):\n      void {\n    if (fromElement) {\n      fromElement.classList.remove('selected', 'force-white-icons');\n    }\n    if (toElement) {\n      toElement.classList.add('selected');\n      toElement.classList.add('force-white-icons');\n    }\n    this.applySuggestion(true);\n  }\n\n  updateSelectedItemARIA(_fromElement: Element|null, _toElement: Element|null): boolean {\n    return false;\n  }\n\n  private onClick(event: Event): void {\n    const item = this.list.itemForNode((event.target as Node | null));\n    if (!item) {\n      return;\n    }\n\n    this.list.selectItem(item);\n    this.acceptSuggestion();\n    event.consume(true);\n  }\n\n  private canShowBox(\n      completions: Suggestion[], highestPriorityItem: Suggestion|null, canShowForSingleItem: boolean,\n      userEnteredText: string): boolean {\n    if (!completions?.length) {\n      return false;\n    }\n\n    if (completions.length > 1) {\n      return true;\n    }\n\n    if (!highestPriorityItem || highestPriorityItem.isSecondary ||\n        !highestPriorityItem.text.startsWith(userEnteredText)) {\n      return true;\n    }\n\n    // Do not show a single suggestion if it is the same as user-entered query, even if allowed to show single-item suggest boxes.\n    return canShowForSingleItem && highestPriorityItem.text !== userEnteredText;\n  }\n\n  updateSuggestions(\n      anchorBox: AnchorBox, completions: Suggestion[], selectHighestPriority: boolean, canShowForSingleItem: boolean,\n      userEnteredText: string): void {\n    this.onlyCompletion = null;\n    const highestPriorityItem =\n        selectHighestPriority ? completions.reduce((a, b) => (a.priority || 0) >= (b.priority || 0) ? a : b) : null;\n    if (this.canShowBox(completions, highestPriorityItem, canShowForSingleItem, userEnteredText)) {\n      this.userEnteredText = userEnteredText;\n\n      this.show();\n      this.updateMaxSize(completions);\n      this.glassPane.setContentAnchorBox(anchorBox);\n      this.list.invalidateItemHeight();\n      this.items.replaceAll(completions);\n\n      if (highestPriorityItem && !highestPriorityItem.isSecondary) {\n        this.list.selectItem(highestPriorityItem, true);\n      } else {\n        this.list.selectItem(null);\n      }\n    } else {\n      if (completions.length === 1) {\n        this.onlyCompletion = completions[0];\n        this.applySuggestion(true);\n      }\n      this.hide();\n    }\n  }\n\n  keyPressed(event: KeyboardEvent): boolean {\n    switch (event.key) {\n      case 'Enter':\n        return this.enterKeyPressed();\n      case 'ArrowUp':\n        return this.list.selectPreviousItem(true, false);\n      case 'ArrowDown':\n        return this.list.selectNextItem(true, false);\n      case 'PageUp':\n        return this.list.selectItemPreviousPage(false);\n      case 'PageDown':\n        return this.list.selectItemNextPage(false);\n    }\n    return false;\n  }\n\n  enterKeyPressed(): boolean {\n    const hasSelectedItem = Boolean(this.list.selectedItem()) || Boolean(this.onlyCompletion);\n    this.acceptSuggestion();\n\n    // Report the event as non-handled if there is no selected item,\n    // to commit the input or handle it otherwise.\n    return hasSelectedItem;\n  }\n}\nexport interface Suggestion {\n  text: string;\n  title?: string;\n  subtitle?: string;\n  priority?: number;\n  isSecondary?: boolean;\n  subtitleRenderer?: (() => Element);\n  selectionRange?: {\n    startColumn: number,\n    endColumn: number,\n  };\n  hideGhostText?: boolean;\n  iconElement?: HTMLElement;\n}\n\nexport type Suggestions = Suggestion[];\nexport interface AutocompleteConfig {\n  substituteRangeCallback?: ((arg0: number, arg1: number) => TextUtils.TextRange.TextRange | null);\n  tooltipCallback?: ((arg0: number, arg1: number) => Promise<Element|null>);\n  suggestionsCallback?:\n      ((arg0: TextUtils.TextRange.TextRange, arg1: TextUtils.TextRange.TextRange,\n        arg2?: boolean|undefined) => Promise<Suggestion[]>| null);\n  isWordChar?: ((arg0: string) => boolean);\n  anchorBehavior?: AnchorBehavior;\n}\n", "// Copyright 2016 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n/* eslint-disable @devtools/no-imperative-dom-api */\n\nimport type * as Common from '../../core/common/common.js';\nimport * as Platform from '../../core/platform/platform.js';\nimport * as VisualLogging from '../visual_logging/visual_logging.js';\n\nimport * as ARIAUtils from './ARIAUtils.js';\nimport {Events as ListModelEvents, type ItemsReplacedEvent, type ListModel} from './ListModel.js';\nimport {measurePreferredSize} from './UIUtils.js';\n\nexport interface ListDelegate<T> {\n  createElementForItem(item: T): Element;\n\n  /**\n   * This method is not called in NonViewport mode.\n   * Return zero to make list measure the item (only works in SameHeight mode).\n   */\n  heightForItem(item: T): number;\n  isItemSelectable(item: T): boolean;\n  selectedItemChanged(from: T|null, to: T|null, fromElement: HTMLElement|null, toElement: HTMLElement|null): void;\n  updateSelectedItemARIA(fromElement: Element|null, toElement: Element|null): boolean;\n}\n\nexport enum ListMode {\n  /* eslint-disable @typescript-eslint/naming-convention -- Used by web_tests. */\n  NonViewport = 'UI.ListMode.NonViewport',\n  EqualHeightItems = 'UI.ListMode.EqualHeightItems',\n  VariousHeightItems = 'UI.ListMode.VariousHeightItems',\n  /* eslint-enable @typescript-eslint/naming-convention */\n}\n\nexport class ListControl<T> {\n  element: HTMLDivElement;\n  private topElement: HTMLElement;\n  private bottomElement: HTMLElement;\n  private firstIndex: number;\n  private lastIndex: number;\n  private renderedHeight: number;\n  private topHeight: number;\n  private bottomHeight: number;\n  private model: ListModel<T>;\n  private itemToElement: Map<T, Element>;\n  #selectedIndex: number;\n  #selectedItem: T|null;\n  private delegate: ListDelegate<T>;\n  private readonly mode: ListMode;\n  private fixedHeight: number;\n  private variableOffsets: Int32Array;\n\n  constructor(model: ListModel<T>, delegate: ListDelegate<T>, mode?: ListMode) {\n    this.element = document.createElement('div');\n    this.element.style.overflowY = 'auto';\n    this.topElement = this.element.createChild('div');\n    this.bottomElement = this.element.createChild('div');\n    this.firstIndex = 0;\n    this.lastIndex = 0;\n    this.renderedHeight = 0;\n    this.topHeight = 0;\n    this.bottomHeight = 0;\n\n    this.model = model;\n    this.model.addEventListener(ListModelEvents.ITEMS_REPLACED, this.replacedItemsInRange, this);\n    this.itemToElement = new Map();\n    this.#selectedIndex = -1;\n    this.#selectedItem = null;\n\n    this.element.tabIndex = -1;\n    this.element.addEventListener('click', this.onClick.bind(this), false);\n    this.element.addEventListener('keydown', this.onKeyDown.bind(this), false);\n    ARIAUtils.markAsListBox(this.element);\n\n    this.delegate = delegate;\n    this.mode = mode || ListMode.EqualHeightItems;\n    this.fixedHeight = 0;\n    this.variableOffsets = new Int32Array(0);\n    this.clearContents();\n\n    if (this.mode !== ListMode.NonViewport) {\n      this.element.addEventListener('scroll', () => {\n        this.updateViewport(this.element.scrollTop, this.element.offsetHeight);\n      }, false);\n    }\n  }\n\n  setModel(model: ListModel<T>): void {\n    this.itemToElement.clear();\n    const length = this.model.length;\n    this.model.removeEventListener(ListModelEvents.ITEMS_REPLACED, this.replacedItemsInRange, this);\n    this.model = model;\n    this.model.addEventListener(ListModelEvents.ITEMS_REPLACED, this.replacedItemsInRange, this);\n    this.invalidateRange(0, length);\n  }\n\n  private replacedItemsInRange(event: Common.EventTarget.EventTargetEvent<ItemsReplacedEvent<T>>): void {\n    const data = event.data;\n    const from = data.index;\n    const to = from + data.removed.length;\n    const keepSelectedIndex = data.keepSelectedIndex;\n\n    const oldSelectedItem = this.#selectedItem;\n    const oldSelectedElement = oldSelectedItem !== null ? (this.itemToElement.get(oldSelectedItem) || null) : null;\n    for (let i = 0; i < data.removed.length; i++) {\n      this.itemToElement.delete(data.removed[i]);\n    }\n    this.invalidate(from, to, data.inserted);\n\n    if (this.#selectedIndex >= to) {\n      this.#selectedIndex += data.inserted - (to - from);\n      this.#selectedItem = this.model.at(this.#selectedIndex);\n    } else if (this.#selectedIndex >= from) {\n      const selectableIndex = keepSelectedIndex ? from : from + data.inserted;\n      let index = this.findFirstSelectable(selectableIndex, +1, false);\n      if (index === -1) {\n        const alternativeSelectableIndex = keepSelectedIndex ? from : from - 1;\n        index = this.findFirstSelectable(alternativeSelectableIndex, -1, false);\n      }\n      this.select(index, oldSelectedItem, oldSelectedElement);\n    }\n  }\n\n  refreshItem(item: T): void {\n    const index = this.model.indexOf(item);\n    if (index === -1) {\n      console.error('Item to refresh is not present');\n      return;\n    }\n    this.refreshItemByIndex(index);\n  }\n\n  refreshItemByIndex(index: number): void {\n    const item = this.model.at(index);\n    this.itemToElement.delete(item);\n    this.invalidateRange(index, index + 1);\n    if (this.#selectedIndex !== -1) {\n      this.select(this.#selectedIndex, null, null);\n    }\n  }\n\n  refreshAllItems(): void {\n    this.itemToElement.clear();\n    this.invalidateRange(0, this.model.length);\n    if (this.#selectedIndex !== -1) {\n      this.select(this.#selectedIndex, null, null);\n    }\n  }\n\n  invalidateRange(from: number, to: number): void {\n    this.invalidate(from, to, to - from);\n  }\n\n  viewportResized(): void {\n    if (this.mode === ListMode.NonViewport) {\n      return;\n    }\n    // TODO(dgozman): try to keep visible scrollTop the same.\n    const scrollTop = this.element.scrollTop;\n    const viewportHeight = this.element.offsetHeight;\n    this.clearViewport();\n    this.updateViewport(\n        Platform.NumberUtilities.clamp(scrollTop, 0, this.totalHeight() - viewportHeight), viewportHeight);\n  }\n\n  invalidateItemHeight(): void {\n    if (this.mode !== ListMode.EqualHeightItems) {\n      console.error('Only supported in equal height items mode');\n      return;\n    }\n    this.fixedHeight = 0;\n    if (this.model.length) {\n      this.itemToElement.clear();\n      this.invalidate(0, this.model.length, this.model.length);\n    }\n  }\n\n  itemForNode(node: Node|null): T|null {\n    while (node && node.parentNodeOrShadowHost() !== this.element) {\n      node = node.parentNodeOrShadowHost();\n    }\n    if (!node) {\n      return null;\n    }\n    const element = (node as Element);\n    const index = this.model.findIndex(item => this.itemToElement.get(item) === element);\n    return index !== -1 ? this.model.at(index) : null;\n  }\n\n  scrollItemIntoView(item: T, center?: boolean): void {\n    const index = this.model.indexOf(item);\n    if (index === -1) {\n      console.error('Attempt to scroll onto missing item');\n      return;\n    }\n    this.scrollIntoView(index, center);\n  }\n\n  selectedItem(): T|null {\n    return this.#selectedItem;\n  }\n\n  selectedIndex(): number {\n    return this.#selectedIndex;\n  }\n\n  selectItem(item: T|null, center?: boolean, dontScroll?: boolean): void {\n    let index = -1;\n    if (item !== null) {\n      index = this.model.indexOf(item);\n      if (index === -1) {\n        console.error('Attempt to select missing item');\n        return;\n      }\n      if (!this.delegate.isItemSelectable(item)) {\n        console.error('Attempt to select non-selectable item');\n        return;\n      }\n    }\n    // Scrolling the item before selection ensures it is in the DOM.\n    if (index !== -1 && !dontScroll) {\n      this.scrollIntoView(index, center);\n    }\n    if (this.#selectedIndex !== index) {\n      this.select(index);\n    }\n  }\n\n  selectPreviousItem(canWrap?: boolean, center?: boolean): boolean {\n    if (this.#selectedIndex === -1 && !canWrap) {\n      return false;\n    }\n    let index: number = this.#selectedIndex === -1 ? this.model.length - 1 : this.#selectedIndex - 1;\n    index = this.findFirstSelectable(index, -1, Boolean(canWrap));\n    if (index !== -1) {\n      this.scrollIntoView(index, center);\n      this.select(index);\n      return true;\n    }\n    return false;\n  }\n\n  selectNextItem(canWrap?: boolean, center?: boolean): boolean {\n    if (this.#selectedIndex === -1 && !canWrap) {\n      return false;\n    }\n    let index: number = this.#selectedIndex === -1 ? 0 : this.#selectedIndex + 1;\n    index = this.findFirstSelectable(index, +1, Boolean(canWrap));\n    if (index !== -1) {\n      this.scrollIntoView(index, center);\n      this.select(index);\n      return true;\n    }\n    return false;\n  }\n\n  selectItemPreviousPage(center?: boolean): boolean {\n    if (this.mode === ListMode.NonViewport) {\n      return false;\n    }\n    let index: number = this.#selectedIndex === -1 ? this.model.length - 1 : this.#selectedIndex;\n    index = this.findPageSelectable(index, -1);\n    if (index !== -1) {\n      this.scrollIntoView(index, center);\n      this.select(index);\n      return true;\n    }\n    return false;\n  }\n\n  selectItemNextPage(center?: boolean): boolean {\n    if (this.mode === ListMode.NonViewport) {\n      return false;\n    }\n    let index: number = this.#selectedIndex === -1 ? 0 : this.#selectedIndex;\n    index = this.findPageSelectable(index, +1);\n    if (index !== -1) {\n      this.scrollIntoView(index, center);\n      this.select(index);\n      return true;\n    }\n    return false;\n  }\n\n  private scrollIntoView(index: number, center?: boolean): void {\n    if (this.mode === ListMode.NonViewport) {\n      this.elementAtIndex(index).scrollIntoViewIfNeeded(Boolean(center));\n      return;\n    }\n\n    const top = this.offsetAtIndex(index);\n    const bottom = this.offsetAtIndex(index + 1);\n    const viewportHeight = this.element.offsetHeight;\n    if (center) {\n      const scrollTo = (top + bottom) / 2 - viewportHeight / 2;\n      this.updateViewport(\n          Platform.NumberUtilities.clamp(scrollTo, 0, this.totalHeight() - viewportHeight), viewportHeight);\n      return;\n    }\n\n    const scrollTop = this.element.scrollTop;\n    if (top < scrollTop) {\n      this.updateViewport(top, viewportHeight);\n    } else if (bottom > scrollTop + viewportHeight) {\n      this.updateViewport(bottom - viewportHeight, viewportHeight);\n    }\n  }\n\n  private onClick(event: Event): void {\n    const item = this.itemForNode((event.target as Node | null));\n    if (item !== null && this.delegate.isItemSelectable(item)) {\n      this.selectItem(item);\n    }\n  }\n\n  private onKeyDown(event: KeyboardEvent): void {\n    let selected = false;\n    switch (event.key) {\n      case 'ArrowUp':\n        selected = this.selectPreviousItem(true, false);\n        break;\n      case 'ArrowDown':\n        selected = this.selectNextItem(true, false);\n        break;\n      case 'PageUp':\n        selected = this.selectItemPreviousPage(false);\n        break;\n      case 'PageDown':\n        selected = this.selectItemNextPage(false);\n        break;\n    }\n    if (selected) {\n      event.consume(true);\n    }\n  }\n\n  private totalHeight(): number {\n    return this.offsetAtIndex(this.model.length);\n  }\n\n  private indexAtOffset(offset: number): number {\n    if (this.mode === ListMode.NonViewport) {\n      throw new Error('There should be no offset conversions in non-viewport mode');\n    }\n    if (!this.model.length || offset < 0) {\n      return 0;\n    }\n    if (this.mode === ListMode.VariousHeightItems) {\n      return Math.min(\n          this.model.length - 1,\n          Platform.ArrayUtilities.lowerBound(\n              this.variableOffsets, offset, Platform.ArrayUtilities.DEFAULT_COMPARATOR, 0, this.model.length));\n    }\n    if (!this.fixedHeight) {\n      this.measureHeight();\n    }\n    return Math.min(this.model.length - 1, Math.floor(offset / this.fixedHeight));\n  }\n\n  elementAtIndex(index: number): Element {\n    const item = this.model.at(index);\n    let element = this.itemToElement.get(item);\n    if (!element) {\n      element = this.delegate.createElementForItem(item);\n      if (!element.hasAttribute('jslog')) {\n        element.setAttribute(\n            'jslog', `${VisualLogging.item().track({click: true, keydown: 'ArrowUp|ArrowDown|PageUp|PageDown'})}`);\n      }\n      this.itemToElement.set(item, element);\n      this.updateElementARIA(element, index);\n    }\n    return element;\n  }\n\n  private refreshARIA(): void {\n    for (let index = this.firstIndex; index <= this.lastIndex; index++) {\n      const item = this.model.at(index);\n      const element = this.itemToElement.get(item);\n      if (element) {\n        this.updateElementARIA(element, index);\n      }\n    }\n  }\n\n  private updateElementARIA(element: Element, index: number): void {\n    if (!ARIAUtils.hasRole(element)) {\n      ARIAUtils.markAsOption(element);\n    }\n    ARIAUtils.setSetSize(element, this.model.length);\n    ARIAUtils.setPositionInSet(element, index + 1);\n  }\n\n  private offsetAtIndex(index: number): number {\n    if (this.mode === ListMode.NonViewport) {\n      throw new Error('There should be no offset conversions in non-viewport mode');\n    }\n    if (!this.model.length) {\n      return 0;\n    }\n    if (this.mode === ListMode.VariousHeightItems) {\n      return this.variableOffsets[index];\n    }\n    if (!this.fixedHeight) {\n      this.measureHeight();\n    }\n    return index * this.fixedHeight;\n  }\n\n  private measureHeight(): void {\n    this.fixedHeight = this.delegate.heightForItem(this.model.at(0));\n    if (!this.fixedHeight) {\n      this.fixedHeight = measurePreferredSize(this.elementAtIndex(0), this.element).height;\n    }\n  }\n\n  private select(index: number, oldItem?: T|null, oldElement?: Element|null): void {\n    if (oldItem === undefined) {\n      oldItem = this.#selectedItem;\n    }\n    if (oldElement === undefined) {\n      oldElement = this.itemToElement.get((oldItem as T)) || null;\n    }\n    this.#selectedIndex = index;\n    this.#selectedItem = index === -1 ? null : this.model.at(index);\n    const newItem = this.#selectedItem;\n    const newElement = this.#selectedIndex !== -1 ? this.elementAtIndex(index) : null;\n    this.delegate.selectedItemChanged(\n        oldItem, newItem, (oldElement as HTMLElement | null), (newElement as HTMLElement | null));\n    if (!this.delegate.updateSelectedItemARIA((oldElement), newElement)) {\n      if (oldElement) {\n        ARIAUtils.setSelected(oldElement, false);\n      }\n      if (newElement) {\n        ARIAUtils.setSelected(newElement, true);\n      }\n      ARIAUtils.setActiveDescendant(this.element, newElement);\n    }\n  }\n\n  private findFirstSelectable(index: number, direction: number, canWrap: boolean): number {\n    const length = this.model.length;\n    if (!length) {\n      return -1;\n    }\n    for (let step = 0; step <= length; step++) {\n      if (index < 0 || index >= length) {\n        if (!canWrap) {\n          return -1;\n        }\n        index = (index + length) % length;\n      }\n      if (this.delegate.isItemSelectable(this.model.at(index))) {\n        return index;\n      }\n      index += direction;\n    }\n    return -1;\n  }\n\n  private findPageSelectable(index: number, direction: number): number {\n    let lastSelectable = -1;\n    const startOffset = this.offsetAtIndex(index);\n    // Compensate for zoom rounding errors with -1.\n    const viewportHeight = this.element.offsetHeight - 1;\n    while (index >= 0 && index < this.model.length) {\n      if (this.delegate.isItemSelectable(this.model.at(index))) {\n        if (Math.abs(this.offsetAtIndex(index) - startOffset) >= viewportHeight) {\n          return index;\n        }\n        lastSelectable = index;\n      }\n      index += direction;\n    }\n    return lastSelectable;\n  }\n\n  private reallocateVariableOffsets(length: number, copyTo: number): void {\n    if (this.variableOffsets.length < length) {\n      const variableOffsets = new Int32Array(Math.max(length, this.variableOffsets.length * 2));\n      variableOffsets.set(this.variableOffsets.slice(0, copyTo), 0);\n      this.variableOffsets = variableOffsets;\n    } else if (this.variableOffsets.length >= 2 * length) {\n      const variableOffsets = new Int32Array(length);\n      variableOffsets.set(this.variableOffsets.slice(0, copyTo), 0);\n      this.variableOffsets = variableOffsets;\n    }\n  }\n\n  private invalidate(from: number, to: number, inserted: number): void {\n    if (this.mode === ListMode.NonViewport) {\n      this.invalidateNonViewportMode(from, to - from, inserted);\n      return;\n    }\n\n    if (this.mode === ListMode.VariousHeightItems) {\n      this.reallocateVariableOffsets(this.model.length + 1, from + 1);\n      for (let i = from + 1; i <= this.model.length; i++) {\n        this.variableOffsets[i] = this.variableOffsets[i - 1] + this.delegate.heightForItem(this.model.at(i - 1));\n      }\n    }\n\n    const viewportHeight = this.element.offsetHeight;\n    const totalHeight = this.totalHeight();\n    const scrollTop = this.element.scrollTop;\n\n    if (this.renderedHeight < viewportHeight || totalHeight < viewportHeight) {\n      this.clearViewport();\n      this.updateViewport(Platform.NumberUtilities.clamp(scrollTop, 0, totalHeight - viewportHeight), viewportHeight);\n      return;\n    }\n\n    const heightDelta = totalHeight - this.renderedHeight;\n    if (to <= this.firstIndex) {\n      const topHeight = this.topHeight + heightDelta;\n      this.topElement.style.height = topHeight + 'px';\n      this.element.scrollTop = scrollTop + heightDelta;\n      this.topHeight = topHeight;\n      this.renderedHeight = totalHeight;\n      const indexDelta = inserted - (to - from);\n      this.firstIndex += indexDelta;\n      this.lastIndex += indexDelta;\n      return;\n    }\n\n    if (from >= this.lastIndex) {\n      const bottomHeight = this.bottomHeight + heightDelta;\n      this.bottomElement.style.height = bottomHeight + 'px';\n      this.bottomHeight = bottomHeight;\n      this.renderedHeight = totalHeight;\n      return;\n    }\n\n    // TODO(dgozman): try to keep visible scrollTop the same\n    // when invalidating after firstIndex but before first visible element.\n    this.clearViewport();\n    this.updateViewport(Platform.NumberUtilities.clamp(scrollTop, 0, totalHeight - viewportHeight), viewportHeight);\n    this.refreshARIA();\n  }\n\n  private invalidateNonViewportMode(start: number, remove: number, add: number): void {\n    let startElement: HTMLElement = this.topElement;\n    for (let index = 0; index < start; index++) {\n      startElement = (startElement.nextElementSibling as HTMLElement);\n    }\n    while (remove--) {\n      (startElement.nextElementSibling as HTMLElement).remove();\n    }\n    while (add--) {\n      this.element.insertBefore(this.elementAtIndex(start + add), startElement.nextElementSibling);\n    }\n  }\n\n  private clearViewport(): void {\n    if (this.mode === ListMode.NonViewport) {\n      console.error('There should be no viewport updates in non-viewport mode');\n      return;\n    }\n    this.firstIndex = 0;\n    this.lastIndex = 0;\n    this.renderedHeight = 0;\n    this.topHeight = 0;\n    this.bottomHeight = 0;\n    this.clearContents();\n  }\n\n  private clearContents(): void {\n    // Note: this method should not force layout. Be careful.\n    this.topElement.style.height = '0';\n    this.bottomElement.style.height = '0';\n    this.element.removeChildren();\n    this.element.appendChild(this.topElement);\n    this.element.appendChild(this.bottomElement);\n  }\n\n  private updateViewport(scrollTop: number, viewportHeight: number): void {\n    // Note: this method should not force layout. Be careful.\n    if (this.mode === ListMode.NonViewport) {\n      console.error('There should be no viewport updates in non-viewport mode');\n      return;\n    }\n    const totalHeight = this.totalHeight();\n    if (!totalHeight) {\n      this.firstIndex = 0;\n      this.lastIndex = 0;\n      this.topHeight = 0;\n      this.bottomHeight = 0;\n      this.renderedHeight = 0;\n      this.topElement.style.height = '0';\n      this.bottomElement.style.height = '0';\n      return;\n    }\n\n    const firstIndex = this.indexAtOffset(scrollTop - viewportHeight);\n    const lastIndex = this.indexAtOffset(scrollTop + 2 * viewportHeight) + 1;\n\n    while (this.firstIndex < Math.min(firstIndex, this.lastIndex)) {\n      this.elementAtIndex(this.firstIndex).remove();\n      this.firstIndex++;\n    }\n    while (this.lastIndex > Math.max(lastIndex, this.firstIndex)) {\n      this.elementAtIndex(this.lastIndex - 1).remove();\n      this.lastIndex--;\n    }\n\n    this.firstIndex = Math.min(this.firstIndex, lastIndex);\n    this.lastIndex = Math.max(this.lastIndex, firstIndex);\n    for (let index = this.firstIndex - 1; index >= firstIndex; index--) {\n      const element = this.elementAtIndex(index);\n      this.element.insertBefore(element, this.topElement.nextSibling);\n    }\n    for (let index = this.lastIndex; index < lastIndex; index++) {\n      const element = this.elementAtIndex(index);\n      this.element.insertBefore(element, this.bottomElement);\n    }\n\n    this.firstIndex = firstIndex;\n    this.lastIndex = lastIndex;\n    this.topHeight = this.offsetAtIndex(firstIndex);\n    this.topElement.style.height = this.topHeight + 'px';\n    this.bottomHeight = totalHeight - this.offsetAtIndex(lastIndex);\n    this.bottomElement.style.height = this.bottomHeight + 'px';\n    this.renderedHeight = totalHeight;\n    this.element.scrollTop = scrollTop;\n  }\n}\n", "// Copyright 2017 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as Common from '../../core/common/common.js';\nimport * as Platform from '../../core/platform/platform.js';\n\nexport class ListModel<T> extends Common.ObjectWrapper.ObjectWrapper<EventTypes<T>> implements Iterable<T> {\n  private items: T[];\n  constructor(items?: T[]) {\n    super();\n    this.items = items || [];\n  }\n\n  [Symbol.iterator](): Iterator<T> {\n    return this.items[Symbol.iterator]();\n  }\n\n  get length(): number {\n    return this.items.length;\n  }\n\n  at(index: number): T {\n    return this.items[index];\n  }\n\n  every(callback: (arg0: T) => boolean): boolean {\n    return this.items.every(callback);\n  }\n\n  filter(callback: (arg0: T) => boolean): T[] {\n    return this.items.filter(callback);\n  }\n\n  find(callback: (arg0: T) => boolean): T|undefined {\n    return this.items.find(callback);\n  }\n\n  findIndex(callback: (arg0: T) => boolean): number {\n    return this.items.findIndex(callback);\n  }\n\n  indexOf(value: T, fromIndex?: number): number {\n    return this.items.indexOf(value, fromIndex);\n  }\n\n  insert(index: number, value: T): void {\n    this.items.splice(index, 0, value);\n    this.replaced(index, [], 1);\n  }\n\n  insertWithComparator(value: T, comparator: (arg0: T, arg1: T) => number): void {\n    this.insert(Platform.ArrayUtilities.lowerBound(this.items, value, comparator), value);\n  }\n\n  join(separator?: string): string {\n    return this.items.join(separator);\n  }\n\n  remove(index: number): T {\n    const result = this.items[index];\n    this.items.splice(index, 1);\n    this.replaced(index, [result], 0);\n    return result;\n  }\n\n  replace(index: number, value: T, keepSelectedIndex?: boolean): T {\n    const oldValue = this.items[index];\n    this.items[index] = value;\n    this.replaced(index, [oldValue], 1, keepSelectedIndex);\n    return oldValue;\n  }\n\n  replaceRange(from: number, to: number, items: T[]): T[] {\n    let removed;\n    if (items.length < 10000) {\n      removed = this.items.splice(from, to - from, ...items);\n    } else {\n      removed = this.items.slice(from, to);\n      // Splice may fail with too many arguments.\n      const before = this.items.slice(0, from);\n      const after = this.items.slice(to);\n      this.items = [...before, ...items, ...after];\n    }\n    this.replaced(from, removed, items.length);\n    return removed;\n  }\n\n  replaceAll(items: T[]): T[] {\n    const oldItems = this.items.slice();\n    this.items = items;\n    this.replaced(0, oldItems, items.length);\n    return oldItems;\n  }\n\n  slice(from?: number, to?: number): T[] {\n    return this.items.slice(from, to);\n  }\n\n  some(callback: (arg0: T) => boolean): boolean {\n    return this.items.some(callback);\n  }\n\n  private replaced(index: number, removed: T[], inserted: number, keepSelectedIndex?: boolean): void {\n    this.dispatchEventToListeners(Events.ITEMS_REPLACED, {index, removed, inserted, keepSelectedIndex});\n  }\n}\n\nexport const enum Events {\n  ITEMS_REPLACED = 'ItemsReplaced',\n}\n\nexport interface ItemsReplacedEvent<T> {\n  index: number;\n  removed: T[];\n  inserted: number;\n  keepSelectedIndex?: boolean;\n}\n\nexport interface EventTypes<T> {\n  [Events.ITEMS_REPLACED]: ItemsReplacedEvent<T>;\n}\n", "// Copyright 2025 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n// IMPORTANT: this file is auto generated. Please do not edit this file.\n/* istanbul ignore file */\nexport default `/*\n * Copyright 2011 The Chromium Authors\n * Use of this source code is governed by a BSD-style license that can be\n * found in the LICENSE file.\n */\n\n:host {\n  display: flex;\n  flex: auto;\n}\n\n.suggest-box {\n  flex: auto;\n  background-color: var(--sys-color-cdt-base-container);\n  pointer-events: auto;\n  margin-left: -3px;\n  box-shadow: var(--drop-shadow);\n  overflow-x: hidden;\n}\n\n.suggest-box-content-item {\n  padding: 1px 0 1px 1px;\n  margin: 0;\n  border: 1px solid transparent;\n  white-space: nowrap;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n}\n\n.suggest-box-content-item.secondary {\n  background-color: var(--sys-color-neutral-container);\n  justify-content: normal;\n}\n\n.suggestion-title {\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n.suggestion-title span {\n  white-space: pre;\n}\n\n.suggestion-subtitle {\n  flex: auto;\n  text-align: right;\n  color: var(--sys-color-token-subtle);\n  margin-right: 3px;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n.suggest-box-content-item devtools-icon {\n  color: var(--sys-color-on-surface-subtle);\n  margin-right: 1px;\n}\n\n.suggest-box-content-item .query {\n  font-weight: bold;\n}\n\n.suggest-box-content-item .spacer {\n  display: inline-block;\n  width: 20px;\n}\n\n.suggest-box-content-item.selected {\n  background-color: var(--sys-color-tonal-container);\n}\n\n.suggest-box-content-item.selected .suggestion-subtitle,\n.suggest-box-content-item.selected > span {\n  color: var(--sys-color-on-tonal-container);\n}\n\n.suggest-box-content-item:hover:not(.selected) {\n  background-color: var(--sys-color-state-hover-on-subtle);\n}\n\n@media (forced-colors: active) {\n  .suggest-box-content-item.selected {\n    forced-color-adjust: none;\n    background-color: Highlight;\n  }\n\n  .suggest-box-content-item.selected > span {\n    color: HighlightText;\n  }\n}\n\n/*# sourceURL=${import.meta.resolve('./suggestBox.css')} */`;", "// Copyright 2025 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n// IMPORTANT: this file is auto generated. Please do not edit this file.\n/* istanbul ignore file */\nexport default `/*\n * Copyright 2015 The Chromium Authors\n * Use of this source code is governed by a BSD-style license that can be\n * found in the LICENSE file.\n */\n\n.text-prompt-root {\n  display: flex;\n  align-items: center;\n}\n\n.text-prompt-editing {\n  box-shadow: var(--drop-shadow);\n  background-color: var(--sys-color-cdt-base-container);\n  text-overflow: clip !important; /* stylelint-disable-line declaration-no-important */\n  margin: 0 -2px -1px;\n  padding: 0 2px 1px;\n  opacity: 100% !important; /* stylelint-disable-line declaration-no-important */\n}\n\n.text-prompt {\n  cursor: text;\n  overflow-x: visible;\n}\n\n.text-prompt::-webkit-scrollbar {\n  display: none;\n}\n\n.text-prompt-editing > .text-prompt {\n  color: var(--sys-color-on-surface) !important; /* stylelint-disable-line declaration-no-important */\n  text-decoration: none !important; /* stylelint-disable-line declaration-no-important */\n  white-space: pre;\n}\n\n.text-prompt > .auto-complete-text {\n  color: var(--sys-color-token-subtle) !important; /* stylelint-disable-line declaration-no-important */\n}\n\n.text-prompt[data-placeholder] {\n  &:empty::before {\n    content: attr(data-placeholder);\n    color: var(--sys-color-on-surface-subtle);\n  }\n\n  &.disabled:empty::before {\n    color: var(--sys-color-state-disabled);\n  }\n}\n\n.text-prompt:not([data-placeholder]):empty::after {\n  content: \"\\\\00A0\";\n  width: 0;\n  display: block;\n}\n\n.text-prompt.disabled {\n  color: var(--sys-color-state-disabled);\n  cursor: default;\n}\n\n.text-prompt-editing br {\n  display: none;\n}\n\n.text-prompt-root:not(:focus-within) ::selection {\n  background: transparent;\n  color: currentcolor;\n}\n\n@media (forced-colors: active) {\n  .text-prompt[data-placeholder]:empty::before {\n    color: GrayText !important; /* stylelint-disable-line declaration-no-important */\n  }\n\n  .text-prompt.disabled {\n    opacity: 100%;\n  }\n}\n\n/*# sourceURL=${import.meta.resolve('./textPrompt.css')} */`;", "// Copyright 2025 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n// IMPORTANT: this file is auto generated. Please do not edit this file.\n/* istanbul ignore file */\nexport default `/*\n * Copyright 2025 The Chromium Authors\n * Use of this source code is governed by a BSD-style license that can be\n * found in the LICENSE file.\n */\n\n:host {\n  padding: 0 2px;\n  position: relative;\n  white-space: nowrap;\n  overflow: hidden;\n  display: flex;\n  flex: none;\n  align-items: center;\n  z-index: 0;\n\n  --toolbar-height: 26px;\n}\n\n:host([floating]) {\n  flex-direction: column;\n  inset: 0;\n  background-color: var(--sys-color-cdt-base-container);\n  border: 1px solid var(--sys-color-divider);\n  margin-top: -1px;\n  width: 28px;\n}\n\n:host([hidden]) {\n  display: none;\n}\n\n:host([wrappable]) {\n  flex-wrap: wrap;\n  overflow: visible;\n}\n\nslot {\n  height: var(--toolbar-height);\n}\n\ndevtools-toolbar-input {\n  display: flex;\n}\n\n/*# sourceURL=${import.meta.resolve('./toolbar.css')} */`;", "// Copyright 2025 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n// IMPORTANT: this file is auto generated. Please do not edit this file.\n/* istanbul ignore file */\nexport default `/*\n * Copyright 2014 The Chromium Authors\n * Use of this source code is governed by a BSD-style license that can be\n * found in the LICENSE file.\n */\n\n:host {\n  padding: 0;\n  margin: 0;\n  display: inline-flex;\n  flex-shrink: 0;\n  align-items: center !important; /* stylelint-disable-line declaration-no-important */\n  overflow: hidden;\n  white-space: nowrap;\n}\n\ninput {\n  height: 12px;\n  width: 12px;\n  flex-shrink: 0;\n  accent-color: var(--sys-color-primary-bright);\n  color: var(--sys-color-on-primary);\n}\n\n:host(:not(.small)) input:not(.small) {\n  margin: 6px;\n}\n\n:host(.inside-datagrid) input {\n  height: 10px;\n  width: 10px;\n}\n\n.devtools-checkbox-text {\n  overflow: hidden;\n  text-overflow: ellipsis;\n\n  input:disabled ~ & {\n    opacity: 38%;\n  }\n}\n\n.devtools-checkbox-subtitle {\n  color: var(--sys-color-token-subtle);\n  white-space: break-spaces;\n}\n\n@media (forced-colors: active) {\n  input.devtools-checkbox-theme-preserve {\n    forced-color-adjust: none;\n  }\n\n  input.devtools-checkbox-theme-preserve:active {\n    background: HighlightText;\n  }\n\n  input.devtools-checkbox-theme-preserve:checked,\n  input.devtools-checkbox-theme-preserve:active:checked {\n    background: Highlight;\n    border-color: Highlight;\n  }\n\n  input.devtools-checkbox-theme-preserve:hover:enabled {\n    border-color: Highlight;\n  }\n\n  input.devtools-checkbox-theme-preserve:active::before,\n  input.devtools-checkbox-theme-preserve:active::after {\n    background-color: Highlight;\n  }\n\n  input.devtools-checkbox-theme-preserve:checked::before,\n  input.devtools-checkbox-theme-preserve:checked::after,\n  input.devtools-checkbox-theme-preserve:active:checked::before,\n  input.devtools-checkbox-theme-preserve:active:checked::after {\n    background-color: HighlightText;\n  }\n\n  input.devtools-checkbox-theme-preserve:hover:checked::before,\n  input.devtools-checkbox-theme-preserve:hover:checked::after {\n    background-color: Highlight !important; /* stylelint-disable-line declaration-no-important */\n  }\n\n  input.devtools-checkbox-theme-preserve:hover:checked {\n    background: HighlightText;\n  }\n}\n\n/*# sourceURL=${import.meta.resolve('./checkboxTextLabel.css')} */`;", "// Copyright 2025 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n// IMPORTANT: this file is auto generated. Please do not edit this file.\n/* istanbul ignore file */\nexport default `/*\n * Copyright 2017 The Chromium Authors\n * Use of this source code is governed by a BSD-style license that can be\n * found in the LICENSE file.\n */\n\n.widget {\n  box-sizing: border-box;\n  max-width: 400px;\n  overflow: hidden;\n}\n\n.header {\n  display: flex;\n  margin: var(--sys-size-5) var(--sys-size-5) var(--sys-size-5) var(--sys-size-8);\n  padding-top: var(--sys-size-3);\n  font: var(--sys-typescale-body2-medium);\n}\n\n.message {\n  font: var(--sys-typescale-body4-regular);\n  white-space: pre;\n  margin: 0 var(--sys-size-8);\n}\n\n/* Center-align text and added margin to the button class */\n.button {\n  text-align: center;\n  margin: var(--sys-size-6) var(--sys-size-8) var(--sys-size-8) var(--sys-size-8);\n  display: flex;\n  flex-direction: row-reverse;\n  gap: var(--sys-size-5);\n}\n\n/* Ensure the button has a minimum width */\n.button button {\n  min-width: 100px; /* Increased minimum width for better appearance */\n}\n\n.reason {\n  color: var(--sys-color-error);\n  margin-top: 10px; /* Added top margin for better spacing */\n}\n\n/* Added white-space property to handle text overflow */\n.message span {\n  white-space: normal;\n  overflow-wrap: break-word; /* Allow long words to break and wrap to the next line */\n  max-width: 100%;\n  display: inline-block;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n/*# sourceURL=${import.meta.resolve('./confirmDialog.css')} */`;", "// Copyright 2025 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n// IMPORTANT: this file is auto generated. Please do not edit this file.\n/* istanbul ignore file */\nexport default `/*\n * Copyright 2015 The Chromium Authors\n * Use of this source code is governed by a BSD-style license that can be\n * found in the LICENSE file.\n */\n\n* {\n  box-sizing: border-box;\n  /* This is required for correct sizing of flex items because we rely\n     * on an old version of the flexbox spec. */\n\n  min-width: 0;\n  min-height: 0;\n}\n\n:root {\n  height: 100%;\n  overflow: hidden;\n  interpolate-size: allow-keywords;\n}\n\nbody {\n  height: 100%;\n  width: 100%;\n  position: relative;\n  overflow: hidden;\n  margin: 0;\n  cursor: default;\n  font-family: var(--default-font-family);\n  font-size: 12px;\n  tab-size: 4;\n  user-select: none;\n  color: var(--sys-color-on-surface);\n  background: var(--sys-color-cdt-base-container);\n}\n\n:focus {\n  outline-style: none;\n}\n\n/* Prevent UA stylesheet from overriding font-family for HTML elements. */\ncode, kbd, samp, pre {\n  font-family: var(--monospace-font-family);\n}\n\n.monospace {\n  font-family: var(--monospace-font-family);\n  font-size: var(\n    --monospace-font-size\n  ) !important; /* stylelint-disable-line declaration-no-important */\n}\n\n.source-code {\n  font-family: var(--source-code-font-family);\n  font-size: var(\n    --source-code-font-size\n  ) !important; /* stylelint-disable-line declaration-no-important */\n\n  white-space: pre-wrap;\n}\n\n.source-code.breakpoint {\n  white-space: nowrap;\n}\n\n.source-code .devtools-link.text-button {\n  max-width: 100%;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\nimg {\n  -webkit-user-drag: none;\n}\n\niframe,\na img {\n  border: none;\n}\n\n.fill {\n  position: absolute;\n  inset: 0;\n}\n\niframe.fill {\n  width: 100%;\n  height: 100%;\n}\n\n.widget {\n  position: relative;\n  flex: auto;\n  contain: style;\n}\n\n.hbox {\n  display: flex;\n  flex-direction: row !important; /* stylelint-disable-line declaration-no-important */\n  position: relative;\n}\n\n.vbox {\n  display: flex;\n  flex-direction: column !important; /* stylelint-disable-line declaration-no-important */\n  position: relative;\n}\n\n.view-container > devtools-toolbar {\n  border-bottom: 1px solid var(--sys-color-divider);\n}\n\n.flex-auto {\n  flex: auto;\n}\n\n.flex-none {\n  flex: none;\n}\n\n.flex-centered {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.overflow-auto {\n  overflow: auto;\n  background-color: var(--sys-color-cdt-base-container);\n}\n\niframe.widget {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  inset: 0;\n}\n\n[hidden],\n.hidden { /* TODO(crbug.com/458299714): remove the class */\n  display: none !important; /* stylelint-disable-line declaration-no-important */\n}\n\n.highlighted-search-result,:host::highlight(highlighted-search-result) {\n  border-radius: 1px;\n  background-color: var(--sys-color-yellow-container);\n  outline: 1px solid var(--sys-color-yellow-container);\n}\n\n.link {\n  cursor: pointer;\n  text-decoration: underline;\n  color: var(--text-link);\n  outline-offset: 2px;\n}\n\nbutton,\ninput,\nselect {\n  /* Form elements do not automatically inherit font style from ancestors. */\n  font-family: inherit;\n  font-size: inherit;\n}\n\nselect option,\nselect optgroup,\ninput {\n  background-color: var(--sys-color-cdt-base-container);\n}\n\ninput {\n  color: inherit;\n\n  &[type='checkbox'] {\n    position: relative;\n    outline: none;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n\n    &:hover::after,\n    &:active::before {\n      content: '';\n      height: 24px;\n      width: 24px;\n      border-radius: var(--sys-shape-corner-full);\n      position: absolute;\n    }\n\n    &:not(.-theme-preserve) {\n      accent-color: var(--sys-color-primary-bright);\n      color: var(--sys-color-on-primary);\n    }\n\n    &:not(:disabled):hover::after {\n      background-color: var(--sys-color-state-hover-on-subtle);\n    }\n\n    &:not(:disabled):active::before {\n      background-color: var(--sys-color-state-ripple-neutral-on-subtle);\n    }\n\n    &:not(:disabled):focus-visible::before {\n      content: '';\n      height: 15px;\n      width: 15px;\n      border-radius: 5px;\n      position: absolute;\n      border: 2px solid var(--sys-color-state-focus-ring);\n    }\n\n    &.small:hover::after,\n    &.small:active::before {\n      height: 12px;\n      width: 12px;\n      border-radius: 2px;\n    }\n  }\n}\n\ninput::placeholder {\n  --override-input-placeholder-color: rgb(0 0 0 / 54%);\n\n  color: var(--override-input-placeholder-color);\n}\n\n.theme-with-dark-background input::placeholder,\n:host-context(.theme-with-dark-background) input::placeholder {\n  --override-input-placeholder-color: rgb(230 230 230 / 54%);\n}\n\n.harmony-input:not([type]),\n.harmony-input[type='number'],\n.harmony-input[type='text'] {\n  padding: 3px 6px;\n  height: 24px;\n  border: 1px solid var(--sys-color-neutral-outline);\n  border-radius: 4px;\n\n  &.error-input,\n  &:invalid {\n    border-color: var(--sys-color-error);\n  }\n\n  &:not(.error-input, :invalid):focus {\n    border-color: var(--sys-color-state-focus-ring);\n  }\n\n  &:not(.error-input, :invalid):hover:not(:focus) {\n    background: var(--sys-color-state-hover-on-subtle);\n  }\n}\n\n/* Radio inputs */\ninput[type='radio'] {\n  height: 17px;\n  width: 17px;\n  min-width: 17px;\n  border-radius: 8px;\n  vertical-align: sub;\n  margin: 0 5px 5px 0;\n  accent-color: var(--sys-color-primary-bright);\n  color: var(--sys-color-on-primary);\n\n  &:focus-visible {\n    outline: var(--sys-size-2) solid var(--sys-color-state-focus-ring);\n  }\n}\n\n@media (forced-colors: active) {\n  input[type='radio'] {\n    --gradient-start: ButtonFace;\n    --gradient-end: ButtonFace;\n\n    &:checked {\n      --gradient-start: Highlight;\n      --gradient-end: Highlight;\n    }\n  }\n}\n\n/* Range inputs */\ninput[type='range'] {\n  appearance: none;\n  margin: 0;\n  padding: 0;\n  height: 10px;\n  width: 88px;\n  outline: none;\n  background: none;\n}\n\ninput[type='range']::-webkit-slider-thumb,\n.-theme-preserve {\n  appearance: none;\n  margin: 0;\n  padding: 0;\n  border: 0;\n  width: 12px;\n  height: 12px;\n  margin-top: -5px;\n  border-radius: 50%;\n  background-color: var(--sys-color-primary);\n}\n\ninput[type='range']::-webkit-slider-runnable-track {\n  appearance: none;\n  margin: 0;\n  padding: 0;\n  width: 100%;\n  height: 2px;\n  background-color: var(--sys-color-surface-variant);\n}\n\ninput[type='range']:focus::-webkit-slider-thumb {\n  box-shadow: 0 0 0 2px var(--sys-color-inverse-primary);\n}\n\ninput[type='range']:disabled::-webkit-slider-thumb {\n  background-color: var(--sys-color-state-disabled);\n}\n\n@media (forced-colors: active) {\n  input[type='range'] {\n    forced-color-adjust: none;\n  }\n}\n\n.highlighted-search-result.current-search-result,:host::highlight(current-search-result) {\n  /* Note: this value is used in light & dark mode */\n  --override-current-search-result-background-color: rgb(255 127 0 / 80%);\n\n  outline: 1px solid var(--sys-color-yellow-container);\n  border-radius: 1px;\n  padding: 1px;\n  margin: -1px;\n  background-color: var(--override-current-search-result-background-color);\n}\n\n.dimmed {\n  opacity: 60%;\n}\n\n.editing {\n  box-shadow: var(--drop-shadow);\n  background-color: var(--sys-color-cdt-base-container);\n  text-overflow: clip !important; /* stylelint-disable-line declaration-no-important */\n  padding-left: 2px;\n  margin-left: -2px;\n  padding-right: 2px;\n  margin-right: -2px;\n  margin-bottom: -1px;\n  padding-bottom: 1px;\n  opacity: 100% !important; /* stylelint-disable-line declaration-no-important */\n}\n\n.editing,\n.editing * {\n  color: var(\n    --sys-color-on-surface\n  ) !important; /* stylelint-disable-line declaration-no-important */\n\n  text-decoration: none !important; /* stylelint-disable-line declaration-no-important */\n}\n\n/* Combo boxes */\n\nselect {\n  appearance: none;\n  user-select: none;\n  height: var(--sys-size-11);\n  border: var(--sys-size-1) solid var(--sys-color-neutral-outline);\n  border-radius: var(--sys-shape-corner-extra-small);\n  color: var(--sys-color-on-surface);\n  font: inherit;\n  margin: 0;\n  outline: none;\n  padding: 0 var(--sys-size-9) 0 var(--sys-size-5);\n  background-image: var(--combobox-dropdown-arrow);\n  background-color: transparent;\n  background-position: right center;\n  background-repeat: no-repeat;\n\n  &:disabled {\n    opacity: 100%;\n    border-color: transparent;\n    color: var(--sys-color-state-disabled);\n    background-color: var(--sys-color-state-disabled-container);\n    pointer-events: none;\n  }\n\n  &:enabled {\n    &:hover {\n      background-color: var(--sys-color-state-hover-on-subtle);\n    }\n\n    &:active {\n      background-color: var(--sys-color-state-ripple-neutral-on-subtle);\n    }\n\n    &:hover:active {\n      background: var(--combobox-dropdown-arrow),\n        linear-gradient(\n          var(--sys-color-state-hover-on-subtle),\n          var(--sys-color-state-hover-on-subtle)\n        ),\n        linear-gradient(\n          var(--sys-color-state-ripple-neutral-on-subtle),\n          var(--sys-color-state-ripple-neutral-on-subtle)\n        );\n      background-position: right center;\n      background-repeat: no-repeat;\n    }\n\n    &:focus {\n      outline: var(--sys-size-2) solid var(--sys-color-state-focus-ring);\n      outline-offset: -1px;\n    }\n  }\n}\n\n@media (forced-colors: active) and (prefers-color-scheme: light) {\n  :root,\n  .theme-with-dark-background,\n  :host-context(.theme-with-dark-background) {\n    --combobox-dropdown-arrow: var(--image-file-arrow-drop-down-light);\n  }\n}\n\n@media (forced-colors: active) and (prefers-color-scheme: dark) {\n  :root,\n  .theme-with-dark-background,\n  :host-context(.theme-with-dark-background) {\n    --combobox-dropdown-arrow: var(--image-file-arrow-drop-down-dark);\n  }\n}\n\n.chrome-select-label {\n  margin: 0 var(--sys-size-10);\n  flex: none;\n\n  p p {\n    margin-top: 0;\n    color: var(--sys-color-token-subtle);\n  }\n\n  .reload-warning {\n    margin-left: var(--sys-size-5);\n  }\n}\n\n/* This class is used outside of the settings screen in the \"Renderer\" and\n   \"Sensors\" panel. As such we need to override their style globally */\n.settings-select {\n  margin: 0;\n}\n\nselect optgroup,\nselect option {\n  background-color: var(--sys-color-cdt-base-container);\n  color: var(--sys-color-on-surface);\n}\n\n.gray-info-message {\n  text-align: center;\n  font-style: italic;\n  padding: 6px;\n  color: var(--sys-color-token-subtle);\n  white-space: nowrap;\n}\n\n/* General empty state styles */\n.empty-state {\n  margin: var(--sys-size-5);\n  display: flex;\n  flex-grow: 1;\n  justify-content: center;\n  align-items: center;\n  flex-direction: column;\n  text-align: center;\n  min-height: fit-content;\n  min-width: fit-content;\n\n  > * {\n    max-width: var(--sys-size-29);\n  }\n\n  .empty-state-header {\n    font: var(--sys-typescale-headline5);\n    margin-bottom: var(--sys-size-3);\n  }\n\n  .empty-state-description {\n    font: var(--sys-typescale-body4-regular);\n    color: var(--sys-color-on-surface-subtle);\n\n    > x-link {\n      white-space: nowrap;\n      margin-left: var(--sys-size-3);\n    }\n  }\n\n  > devtools-button {\n    margin-top: var(--sys-size-7);\n  }\n}\n\ndt-icon-label {\n  flex: none;\n}\n\n.dot::before {\n  content: var(--image-file-empty);\n  width: 6px;\n  height: 6px;\n  border-radius: 50%;\n  outline: 1px solid var(--icon-gap-default);\n  left: 9px;\n  position: absolute;\n  top: 9px;\n  z-index: 1;\n}\n\n.green::before {\n  background-color: var(--sys-color-green-bright);\n}\n\n.purple::before {\n  background-color: var(--sys-color-purple-bright);\n}\n\n.new-badge {\n  width: fit-content;\n  height: var(--sys-size-8);\n  line-height: var(--sys-size-8);\n  border-radius: var(--sys-shape-corner-extra-small);\n  padding: 0 var(--sys-size-3);\n  background-color: var(--sys-color-tonal-container);\n  color: var(--sys-color-on-tonal-container);\n  font-weight: var(--ref-typeface-weight-bold);\n  font-size: 9px;\n  text-align: center;\n}\n\n:host-context(.platform-mac) .new-badge {\n  background-color: var(--sys-color-primary);\n  color: var(--sys-color-on-primary);\n}\n\n.expandable-inline-button {\n  background-color: var(--sys-color-cdt-base-container);\n  color: var(--sys-color-on-surface);\n  cursor: pointer;\n  border-radius: 3px;\n}\n\n.undisplayable-text,\n.expandable-inline-button {\n  border: none;\n  padding: 1px 3px;\n  margin: 0 2px;\n  font-size: 11px;\n  font-family: sans-serif;\n  white-space: nowrap;\n  display: inline-block;\n}\n\n.undisplayable-text::after,\n.expandable-inline-button::after {\n  content: attr(data-text);\n}\n\n.undisplayable-text {\n  color: var(--sys-color-state-disabled);\n  font-style: italic;\n}\n\n.expandable-inline-button:hover,\n.expandable-inline-button:focus-visible {\n  background-color: var(--sys-color-state-hover-on-subtle);\n}\n\n.expandable-inline-button:focus-visible {\n  background-color: var(--sys-color-state-focus-highlight);\n}\n\n::selection {\n  background-color: var(--sys-color-state-text-highlight);\n  color: var(--sys-color-state-on-text-highlight);\n}\n\nbutton.link {\n  border: none;\n  background: none;\n  padding: 3px;\n}\n\nbutton.link:focus-visible {\n  outline: 2px solid var(--sys-color-state-focus-ring);\n  outline-offset: 2px;\n  border-radius: var(--sys-shape-corner-full);\n}\n\n.data-grid-data-grid-node button.link:focus-visible {\n  border-radius: var(--sys-shape-corner-extra-small);\n  padding: 0;\n  margin-top: 3px;\n}\n\n@media (forced-colors: active) {\n  .dimmed,\n  select:disabled {\n    opacity: 100%;\n  }\n\n  .harmony-input:not([type]),\n  .harmony-input[type='number'],\n  .harmony-input[type='text'] {\n    border: 1px solid ButtonText;\n  }\n\n  .harmony-input:not([type]):focus,\n  .harmony-input[type='number']:focus,\n  .harmony-input[type='text']:focus {\n    border: 1px solid Highlight;\n  }\n}\n/* search input with customized styling */\ninput.custom-search-input::-webkit-search-cancel-button {\n  appearance: none;\n  width: 16px;\n  height: 15px;\n  margin-right: 0;\n  opacity: 70%;\n  mask-image: var(--image-file-cross-circle-filled);\n  mask-position: center;\n  mask-repeat: no-repeat;\n  mask-size: 99%;\n  background-color: var(--icon-default);\n}\n\ninput.custom-search-input::-webkit-search-cancel-button:hover {\n  opacity: 99%;\n}\n/* loading spinner */\n.spinner::before {\n  display: block;\n  width: var(--dimension, 24px);\n  height: var(--dimension, 24px);\n  border: var(--override-spinner-size, 3px) solid\n    var(--override-spinner-color, var(--sys-color-token-subtle));\n  border-radius: 12px;\n  clip-path: rect(0, var(--clip-size, 15px), var(--clip-size, 15px), 0);\n  content: '';\n  position: absolute;\n  animation: spinner-animation 1s linear infinite;\n  box-sizing: border-box;\n}\n\n@keyframes spinner-animation {\n  from {\n    transform: rotate(0);\n  }\n\n  to {\n    transform: rotate(360deg);\n  }\n}\n/** Adorner */\n.adorner-container {\n  display: inline-flex;\n  vertical-align: middle;\n}\n\n.adorner-container.hidden {\n  display: none;\n}\n\n.adorner-container devtools-adorner {\n  margin-left: 3px;\n}\n\n:host-context(.theme-with-dark-background) devtools-adorner {\n  --override-adorner-border-color: var(--sys-color-tonal-outline);\n  --override-adorner-active-background-color: var(\n    --sys-color-state-riple-neutral-on-subtle\n  );\n}\n\n/* General panel styles */\n.panel {\n  display: flex;\n  overflow: hidden;\n  position: absolute;\n  inset: 0;\n  z-index: 0;\n  background-color: var(--sys-color-cdt-base-container);\n}\n\n.panel-sidebar {\n  overflow-x: hidden;\n  background-color: var(--sys-color-cdt-base-container);\n}\n\niframe.extension {\n  flex: auto;\n  width: 100%;\n  height: 100%;\n}\n\niframe.panel.extension {\n  display: block;\n  height: 100%;\n}\n\n@media (forced-colors: active) {\n  :root {\n    --legacy-accent-color: Highlight;\n    --legacy-focus-ring-inactive-shadow-color: ButtonText;\n  }\n}\n\n/* Toolbar styles */\ndevtools-toolbar {\n  & > * {\n    position: relative;\n    display: flex;\n    background-color: transparent;\n    flex: none;\n    align-items: center;\n    justify-content: center;\n    height: var(--toolbar-height);\n    border: none;\n    white-space: pre;\n    overflow: hidden;\n    max-width: 100%;\n    color: var(--icon-default);\n\n    /* Some toolbars have a different cursor on hover (for example, resizeable\n     * ones which can be clicked + dragged to move). But we want to make sure\n     * by default each toolbar item shows the default cursor, because you\n     * cannot click + drag on the item to resize the toolbar container, you\n     * have to click + drag only on empty space. See crbug.com/371838044 for\n     * an example. */\n    cursor: default;\n\n    & .devtools-link {\n      color: var(--icon-default);\n    }\n  }\n\n  .status-buttons {\n    padding: 0 var(--sys-size-2);\n    gap: var(--sys-size-2);\n  }\n\n  & > :not(select) {\n    padding: 0;\n  }\n\n  & > devtools-issue-counter {\n    margin-top: -4px;\n    padding: 0 1px;\n  }\n\n  devtools-adorner.fix-perf-icon {\n    --override-adorner-text-color: transparent;\n    --override-adorner-border-color: transparent;\n    --override-adorner-background-color: transparent;\n  }\n\n  devtools-issue-counter.main-toolbar {\n    margin-left: 1px;\n    margin-right: 1px;\n  }\n\n  .toolbar-dropdown-arrow {\n    pointer-events: none;\n    flex: none;\n    top: var(--sys-size-1);\n  }\n\n  .toolbar-button.dark-text .toolbar-dropdown-arrow {\n    color: var(--sys-color-on-surface);\n  }\n\n  /* Toolbar item */\n\n  .toolbar-button {\n    white-space: nowrap;\n    overflow: hidden;\n    min-width: 28px;\n    background: transparent;\n    border-radius: 0;\n\n    &[aria-haspopup='true'][aria-expanded='true'] {\n      pointer-events: none;\n    }\n  }\n\n  .toolbar-item-search {\n    min-width: 5.2em;\n    max-width: 300px;\n    flex: 1 1 auto;\n    justify-content: start;\n    overflow: revert;\n  }\n\n  .toolbar-text {\n    margin: 0 5px;\n    flex: none;\n    color: var(--ui-text);\n  }\n\n  .toolbar-text:empty {\n    margin: 0;\n  }\n\n  .toolbar-has-dropdown {\n    justify-content: space-between;\n    height: var(--sys-size-9);\n    padding: 0 var(--sys-size-2) 0 var(--sys-size-4);\n    margin: 0 var(--sys-size-2);\n    gap: var(--sys-size-2);\n    border-radius: var(--sys-shape-corner-extra-small);\n\n    &:hover::after,\n    &:active::before {\n      content: '';\n      height: 100%;\n      width: 100%;\n      border-radius: inherit;\n      position: absolute;\n      top: 0;\n      left: 0;\n    }\n\n    &:hover::after {\n      background-color: var(--sys-color-state-hover-on-subtle);\n    }\n\n    &:active::before {\n      background-color: var(--sys-color-state-ripple-neutral-on-subtle);\n    }\n\n    &:focus-visible {\n      outline: var(--sys-size-2) solid var(--sys-color-state-focus-ring);\n    }\n\n    &[disabled] {\n      pointer-events: none;\n      background-color: var(--sys-color-state-disabled-container);\n      color: var(--sys-color-state-disabled);\n    }\n  }\n\n  .toolbar-has-dropdown-shrinkable {\n    flex-shrink: 1;\n  }\n\n  .toolbar-has-dropdown .toolbar-text {\n    margin: 0;\n    text-overflow: ellipsis;\n    flex: auto;\n    overflow: hidden;\n    text-align: right;\n  }\n\n  .toolbar-button:not(.toolbar-has-dropdown):focus-visible::before {\n    position: absolute;\n    inset: 2px;\n    background-color: var(--sys-color-state-focus-highlight);\n    border-radius: 2px;\n    content: '';\n    /* This ::before rule serves as a background for an element.\n    Setting z-index to make sure it's always below the content. */\n    z-index: -1;\n  }\n\n  .toolbar-glyph {\n    flex: none;\n  }\n  /* Button */\n\n  .toolbar-button:disabled {\n    opacity: 50%;\n  }\n\n  .toolbar-button.copied-to-clipboard::after {\n    content: attr(data-content);\n    position: fixed;\n    margin-top: calc(2 * var(--toolbar-height));\n    padding: 3px 5px;\n    color: var(--sys-color-token-subtle);\n    background: var(--sys-color-cdt-base-container);\n    animation: 2s fade-out;\n    font-weight: normal;\n    border: 1px solid var(--sys-color-divider);\n    border-radius: 3px;\n  }\n\n  .toolbar-button.toolbar-state-on .toolbar-glyph {\n    color: var(--icon-toggled);\n  }\n\n  .toolbar-state-on.toolbar-toggle-with-dot .toolbar-text::after {\n    content: '';\n    position: absolute;\n    bottom: 2px;\n    background-color: var(--sys-color-primary-bright);\n    width: 4.5px;\n    height: 4.5px;\n    border: 2px solid\n      var(--override-toolbar-background-color, --sys-color-cdt-base-container);\n    border-radius: 50%;\n    right: 0;\n  }\n\n  .toolbar-button.toolbar-state-on.toolbar-toggle-with-red-color .toolbar-glyph,\n  .toolbar-button.toolbar-state-off.toolbar-default-with-red-color\n    .toolbar-glyph {\n    color: var(\n      --icon-error\n    ) !important; /* stylelint-disable-line declaration-no-important */\n  }\n\n  .toolbar-button:not(\n      .toolbar-has-glyph,\n      .toolbar-has-dropdown,\n      .largeicon-menu,\n      .toolbar-button-secondary\n    ) {\n    font-weight: bold;\n  }\n\n  .toolbar-button.dark-text .toolbar-text {\n    color: var(\n      --sys-color-on-surface\n    ) !important; /* stylelint-disable-line declaration-no-important */\n  }\n\n  .toolbar-button.toolbar-state-on .toolbar-text {\n    color: var(--sys-color-primary);\n  }\n\n  .toolbar-button.toolbar-state-on:enabled:active .toolbar-text {\n    color: var(--sys-color-primary-bright);\n  }\n\n  .toolbar-button:enabled:hover:not(:active) .toolbar-glyph {\n    color: var(--sys-color-on-surface);\n  }\n\n  .toolbar-button:enabled:hover:not(:active) .toolbar-text {\n    color: var(--sys-color-on-surface);\n  }\n\n  .toolbar-button.toolbar-state-on:enabled:hover:not(:active) .toolbar-glyph {\n    color: var(--sys-color-primary);\n  }\n\n  .toolbar-button.toolbar-state-on:enabled:hover:not(:active) .toolbar-text {\n    color: var(--sys-color-primary);\n  }\n\n  /* Checkbox */\n\n  & > devtools-checkbox {\n    padding: 0 5px 0 0;\n    white-space: unset;\n  }\n\n  /* Select */\n\n  & > select {\n    height: var(--sys-size-9);\n    min-width: var(--sys-size-14);\n  }\n\n  /* Input */\n\n  .toolbar-input {\n    box-shadow: inset 0 0 0 2px transparent;\n    box-sizing: border-box;\n    width: 120px;\n    height: var(--sys-size-9);\n    padding: 0 var(--sys-size-2) 0 var(--sys-size-5);\n    margin: 1px 3px;\n    border-radius: 100px;\n    min-width: 35px;\n    position: relative;\n\n    &.focused {\n      box-shadow: inset 0 0 0 2px var(--sys-color-state-focus-ring);\n    }\n\n    &:not(:has(devtools-button:hover), .disabled):hover {\n      background-color: var(--sys-color-state-hover-on-subtle);\n    }\n\n    &::before {\n      content: '';\n      box-sizing: inherit;\n      height: 100%;\n      width: 100%;\n      position: absolute;\n      left: 0;\n      background: var(--sys-color-cdt-base);\n      z-index: -1;\n    }\n\n    & > devtools-icon {\n      color: var(--sys-color-on-surface-subtle);\n      width: var(--sys-size-8);\n      height: var(--sys-size-8);\n      margin-right: var(--sys-size-3);\n    }\n\n    &.disabled > devtools-icon {\n      color: var(--sys-color-state-disabled);\n    }\n  }\n\n  .toolbar-filter .toolbar-input-clear-button {\n    margin-right: var(--sys-size-4);\n  }\n\n  .toolbar-input-empty .toolbar-input-clear-button {\n    display: none;\n  }\n\n  .toolbar-prompt-proxy {\n    flex: 1;\n  }\n\n  .toolbar-input-prompt {\n    flex: 1;\n    overflow: hidden;\n    white-space: nowrap;\n    cursor: text;\n    color: var(--sys-color-on-surface);\n  }\n  /* Separator */\n\n  .toolbar-divider {\n    background-color: var(--sys-color-divider);\n    width: 1px;\n    margin: 5px 4px;\n    height: 16px;\n  }\n\n  .toolbar-spacer {\n    flex: auto;\n  }\n\n  .toolbar-button.emulate-active {\n    background-color: var(--sys-color-surface-variant);\n  }\n\n  &:not([floating]) > :last-child:not(:first-child, select) {\n    flex-shrink: 1;\n    justify-content: left;\n  }\n\n  &:not([floating]) > .toolbar-button:last-child:not(:first-child, select) {\n    justify-content: left;\n    margin-right: 2px;\n  }\n\n  & > .highlight::before {\n    content: '';\n    position: absolute;\n    inset: 2px;\n    border-radius: 2px;\n    background: var(--sys-color-neutral-container);\n    z-index: -1;\n  }\n\n  & > .highlight:focus-visible {\n    background: var(--sys-color-tonal-container);\n\n    & > .title {\n      color: var(--sys-color-on-tonal-container);\n    }\n  }\n\n  devtools-icon.leading-issue-icon {\n    margin: 0 7px;\n  }\n\n  @media (forced-colors: active) {\n    .toolbar-button:disabled {\n      opacity: 100%;\n      color: Graytext;\n    }\n\n    devtools-toolbar > *,\n    .toolbar-text {\n      color: ButtonText;\n    }\n\n    .toolbar-button:disabled .toolbar-text {\n      color: Graytext;\n    }\n\n    devtools-toolbar > select:disabled {\n      opacity: 100%;\n      color: Graytext;\n    }\n\n    .toolbar-button.toolbar-state-on .toolbar-glyph {\n      forced-color-adjust: none;\n      color: Highlight;\n    }\n\n    .toolbar-button.toolbar-state-on .toolbar-text {\n      forced-color-adjust: none;\n      color: Highlight;\n    }\n\n    .toolbar-button:enabled:hover:not(:active) .toolbar-text,\n    .toolbar-button:enabled:focus:not(:active) .toolbar-text {\n      color: HighlightText;\n    }\n\n    .toolbar-button:disabled devtools-icon {\n      color: GrayText;\n    }\n\n    .toolbar-button:disabled .toolbar-glyph {\n      color: GrayText;\n    }\n\n    .toolbar-button:enabled.hover:not(:active) .toolbar-glyph {\n      forced-color-adjust: none;\n      color: Highlight;\n    }\n\n    .toolbar-button:enabled:hover .toolbar-glyph,\n    .toolbar-button:enabled:focus .toolbar-glyph,\n    .toolbar-button:enabled:hover:not(:active) .toolbar-glyph,\n    .toolbar-button:enabled:hover devtools-icon,\n    .toolbar-button:enabled:focus devtools-icon {\n      color: HighlightText;\n    }\n\n    .toolbar-input {\n      forced-color-adjust: none;\n      background: canvas;\n      box-shadow: var(--legacy-focus-ring-inactive-shadow);\n    }\n\n    .toolbar-input.focused,\n    .toolbar-input:not(.toolbar-input-empty) {\n      forced-color-adjust: none;\n      background: canvas;\n      box-shadow: var(--legacy-focus-ring-active-shadow);\n    }\n\n    .toolbar-input:hover {\n      box-shadow: var(--legacy-focus-ring-active-shadow);\n    }\n\n    devtools-toolbar .devtools-link {\n      color: linktext;\n    }\n\n    .toolbar-has-dropdown {\n      forced-color-adjust: none;\n      background: ButtonFace;\n      color: ButtonText;\n    }\n  }\n}\n\n@keyframes fade-out {\n  from {\n    opacity: 100%;\n  }\n\n  to {\n    opacity: 0%;\n  }\n}\n\n/* Syntax highlighting */\n.webkit-css-property {\n  /* See: crbug.com/1152736 for color variable migration. */\n  /* stylelint-disable-next-line plugin/use_theme_colors */\n  color: var(\n    --webkit-css-property-color,\n    var(--sys-color-token-property-special)\n  );\n}\n\n.webkit-html-comment {\n  color: var(--sys-color-token-comment);\n  word-break: break-all;\n}\n\n.webkit-html-tag {\n  color: var(--sys-color-token-tag);\n}\n\n.webkit-html-tag-name,\n.webkit-html-close-tag-name {\n  /* Keep this in sync with view-source.css (.webkit-html-tag) */\n  color: var(--sys-color-token-tag);\n}\n\n.webkit-html-pseudo-element {\n  /* This one is non-standard. */\n  color: var(--sys-color-token-pseudo-element);\n}\n\n.webkit-html-js-node,\n.webkit-html-css-node {\n  color: var(--text-primary);\n  white-space: pre-wrap;\n}\n\n.webkit-html-text-node {\n  color: var(--text-primary);\n  unicode-bidi: -webkit-isolate;\n}\n\n.webkit-html-entity-value {\n  /* This one is non-standard. */\n  /* See: crbug.com/1152736 for color variable migration. */\n  /* stylelint-disable-next-line plugin/use_theme_colors */\n  background-color: rgb(0 0 0 / 15%);\n  unicode-bidi: -webkit-isolate;\n}\n\n.webkit-html-doctype {\n  /* Keep this in sync with view-source.css (.webkit-html-doctype) */\n  color: var(--text-secondary);\n  /* See: crbug.com/1152736 for color variable migration. */\n}\n\n.webkit-html-attribute-name {\n  /* Keep this in sync with view-source.css (.webkit-html-attribute-name) */\n  color: var(--sys-color-token-attribute);\n  unicode-bidi: -webkit-isolate;\n}\n\n.webkit-html-attribute-value {\n  /* Keep this in sync with view-source.css (.webkit-html-attribute-value) */\n  color: var(--sys-color-token-attribute-value);\n  unicode-bidi: -webkit-isolate;\n  word-break: break-all;\n}\n\n.devtools-link {\n  color: var(--text-link);\n  text-decoration: underline;\n  outline-offset: 2px;\n\n  .elements-disclosure & {\n    color: var(--text-link);\n  }\n\n  devtools-icon {\n    vertical-align: baseline;\n    color: var(--sys-color-primary);\n  }\n\n  :focus .selected & devtools-icon {\n    color: var(--sys-color-tonal-container);\n  }\n\n  &:focus-visible {\n    outline: var(--sys-size-2) solid var(--sys-color-state-focus-ring);\n    outline-offset: 0;\n    border-radius: var(--sys-shape-corner-extra-small);\n  }\n\n  &.invalid-link {\n    color: var(--text-disabled);\n    text-decoration: none;\n  }\n\n  &:not(.devtools-link-prevent-click, .invalid-link) {\n    cursor: pointer;\n  }\n\n  @media (forced-colors: active) {\n    &:not(.devtools-link-prevent-click) {\n      forced-color-adjust: none;\n      color: linktext;\n    }\n\n    &:focus-visible {\n      background: Highlight;\n      color: HighlightText;\n    }\n  }\n}\n\n/*# sourceURL=${import.meta.resolve('./inspectorCommon.css')} */`;", "// Copyright 2025 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n// IMPORTANT: this file is auto generated. Please do not edit this file.\n/* istanbul ignore file */\nexport default `/*\n * Copyright 2016 The Chromium Authors\n * Use of this source code is governed by a BSD-style license that can be\n * found in the LICENSE file.\n */\n\ndiv {\n  display: inline-flex;\n  height: 14px;\n  align-items: center;\n  vertical-align: middle;\n  white-space: nowrap;\n  padding: 1px 4px;\n  text-align: left;\n  font-size: 11px;\n  line-height: normal;\n  font-weight: bold;\n  text-shadow: none;\n  /*\n   * We need an \"inverted\" color here - because the text is on a darker background the regular foreground text colors don't work. It's been logged to the dark mode tracking spreadsheet\n   */\n  color: var(--sys-color-inverse-on-surface);\n  border-radius: 7px;\n}\n\ndiv.verbose {\n  background-color: var(--sys-color-token-attribute-value);\n}\n\n:host-context(.theme-with-dark-background) div.verbose {\n  /* --sys-color-token-attribute-value isn't blue in dark mode, but the text that gets logged is,\n  so we use a different syntax in dark mode that matches the text. Once the text\n  colors have been updated we can remove this. */\n  background-color: var(--sys-color-token-tag);\n}\n\ndiv.info {\n  background-color: var(--sys-color-token-meta);\n}\n\ndiv.warning {\n  background-color: var(--sys-color-token-attribute);\n}\n\n:host-context(.theme-with-dark-background) div.warning {\n  /* Pick a color that's closer to the color shown on the background of the\n  entire message */\n  background-color: var(--sys-color-token-attribute-value);\n}\n\ndiv.error {\n  background-color: var(--sys-color-error-bright);\n}\n\n/*# sourceURL=${import.meta.resolve('./smallBubble.css')} */`;", "// Copyright 2019 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nexport interface ContextFlavorListener {\n  flavorChanged(object: Object|null): void;\n}\n", "// Copyright 2015 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n/* eslint-disable @devtools/no-imperative-dom-api */\n\nimport dropTargetStyles from './dropTarget.css.js';\nimport {createShadowRootWithCoreStyles} from './UIUtils.js';\n\nexport class DropTarget {\n  private element: HTMLElement;\n  private readonly transferTypes: Array<{\n    kind: string,\n    type: RegExp,\n  }>;\n  private messageText: string;\n  private readonly handleDrop: (arg0: DataTransfer) => void;\n  private enabled: boolean;\n  private dragMaskElement: HTMLElement|null;\n\n  constructor(\n      element: HTMLElement, transferTypes: Array<{\n        kind: string,\n        type: RegExp,\n      }>,\n      messageText: string, handleDrop: (arg0: DataTransfer) => void) {\n    element.addEventListener('dragenter', this.onDragEnter.bind(this), true);\n    element.addEventListener('dragover', this.onDragOver.bind(this), true);\n    this.element = element;\n    this.transferTypes = transferTypes;\n    this.messageText = messageText;\n    this.handleDrop = handleDrop;\n    this.enabled = true;\n    this.dragMaskElement = null;\n  }\n\n  setEnabled(enabled: boolean): void {\n    this.enabled = enabled;\n  }\n\n  private onDragEnter(event: DragEvent): void {\n    if (this.enabled && this.hasMatchingType(event)) {\n      event.consume(true);\n    }\n  }\n\n  private hasMatchingType(event: DragEvent): boolean {\n    if (!event.dataTransfer) {\n      return false;\n    }\n    for (const transferType of this.transferTypes) {\n      const found = Array.from(event.dataTransfer.items).find(item => {\n        return transferType.kind === item.kind && Boolean(transferType.type.exec(item.type));\n      });\n      if (found) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  private onDragOver(event: DragEvent): void {\n    if (!this.enabled || !this.hasMatchingType(event)) {\n      return;\n    }\n    if (event.dataTransfer) {\n      event.dataTransfer.dropEffect = 'copy';\n    }\n    event.consume(true);\n    if (this.dragMaskElement) {\n      return;\n    }\n    this.dragMaskElement = this.element.createChild('div', '');\n    const shadowRoot = createShadowRootWithCoreStyles(this.dragMaskElement, {cssFile: dropTargetStyles});\n    shadowRoot.createChild('div', 'drop-target-message').textContent = this.messageText;\n    this.dragMaskElement.addEventListener('drop', this.onDrop.bind(this), true);\n    this.dragMaskElement.addEventListener('dragleave', this.onDragLeave.bind(this), true);\n  }\n\n  private onDrop(event: DragEvent): void {\n    event.consume(true);\n    this.removeMask();\n    if (this.enabled && event.dataTransfer) {\n      this.handleDrop(event.dataTransfer);\n    }\n  }\n\n  private onDragLeave(event: Event): void {\n    event.consume(true);\n    this.removeMask();\n  }\n\n  private removeMask(): void {\n    if (this.dragMaskElement) {\n      this.dragMaskElement.remove();\n      this.dragMaskElement = null;\n    }\n  }\n}\n\nexport const Type = {\n  URI: {kind: 'string', type: /text\\/uri-list/},\n  Folder: {kind: 'file', type: /$^/},\n  File: {kind: 'file', type: /.*/},\n  WebFile: {kind: 'file', type: /[\\w]+/},\n  ImageFile: {kind: 'file', type: /image\\/.*/},\n};\n", "// Copyright 2025 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n// IMPORTANT: this file is auto generated. Please do not edit this file.\n/* istanbul ignore file */\nexport default `/*\n * Copyright 2015 The Chromium Authors\n * Use of this source code is governed by a BSD-style license that can be\n * found in the LICENSE file.\n */\n\n:host {\n  position: absolute;\n  inset: 0;\n  display: flex;\n  background-color: var(--color-background-opacity-80);\n  z-index: 1000;\n}\n\n.drop-target-message {\n  flex: auto;\n  font-size: 30px;\n  color: var(--sys-color-token-subtle);\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  margin: 20px;\n  border: 4px dashed var(--sys-color-neutral-outline);\n  pointer-events: none;\n}\n\n/*# sourceURL=${import.meta.resolve('./dropTarget.css')} */`;", "// Copyright 2011 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as i18n from '../../core/i18n/i18n.js';\nimport type * as Platform from '../../core/platform/platform.js';\nimport {Directives, html, render} from '../lit/lit.js';\nimport * as VisualLogging from '../visual_logging/visual_logging.js';\n\nimport emptyWidgetStyles from './emptyWidget.css.js';\nimport inspectorCommonStyles from './inspectorCommon.css.js';\nimport {VBox} from './Widget.js';\nimport {XLink} from './XLink.js';\n\nconst UIStrings = {\n  /**\n   * @description Text that is usually a hyperlink to more documentation\n   */\n  learnMore: 'Learn more',\n} as const;\nconst str_ = i18n.i18n.registerUIStrings('ui/legacy/EmptyWidget.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\nconst {ref} = Directives;\n\ninterface EmptyWidgetInput {\n  header: string;\n  text: string;\n  link?: Platform.DevToolsPath.UrlString|undefined|null;\n  extraElements?: Element[];\n}\n\ninterface EmptyWidgetOutput {\n  contentElement: Element|undefined;\n}\n\ntype View = (input: EmptyWidgetInput, output: EmptyWidgetOutput, target: HTMLElement) => void;\n\nconst DEFAULT_VIEW: View = (input, output, target) => {\n  // clang-format off\n  render(html`\n    <style>${inspectorCommonStyles}</style>\n    <style>${emptyWidgetStyles}</style>\n    <div class=\"empty-state\" jslog=${VisualLogging.section('empty-view')}\n         ${ref(e => {output.contentElement = e;})}>\n      <div class=\"empty-state-header\">${input.header}</div>\n      <div class=\"empty-state-description\">\n        <span>${input.text}</span>\n        ${input.link ? XLink.create(\n            input.link, i18nString(UIStrings.learnMore), undefined, undefined, 'learn-more') : ''}\n      </div>\n      ${input.extraElements}\n    </div>`, target);\n  // clang-format on\n};\n\nexport class EmptyWidget extends VBox {\n  #header: string;\n  #text: string;\n  #link: Platform.DevToolsPath.UrlString|undefined|null;\n  #view: View;\n  #firstUpdate = true;\n  #extraElements: Element[] = [];\n\n  constructor(headerOrElement: string|HTMLElement, text = '', element?: HTMLElement, view = DEFAULT_VIEW) {\n    const header = typeof headerOrElement === 'string' ? headerOrElement : '';\n    if (!element && headerOrElement instanceof HTMLElement) {\n      element = headerOrElement;\n    }\n    super(element, {classes: ['empty-view-scroller']});\n    this.#header = header;\n    this.#text = text;\n    this.#link = undefined;\n    this.#view = view;\n    this.performUpdate();\n  }\n\n  set link(link: Platform.DevToolsPath.UrlString|undefined|null) {\n    this.#link = link;\n    this.performUpdate();\n  }\n\n  set text(text: string) {\n    this.#text = text;\n    this.performUpdate();\n  }\n\n  set header(header: string) {\n    this.#header = header;\n    this.performUpdate();\n  }\n\n  set extraElements(elements: HTMLElement[]) {\n    this.#extraElements = elements;\n    this.#firstUpdate = false;\n    this.requestUpdate();\n  }\n\n  override performUpdate(): void {\n    if (this.#firstUpdate) {\n      this.#extraElements = [...this.element.children];\n      this.#firstUpdate = false;\n    }\n    const output = {contentElement: undefined};\n    this.#view(\n        {header: this.#header, text: this.#text, link: this.#link, extraElements: this.#extraElements}, output,\n        this.element);\n    if (output.contentElement) {\n      this.contentElement = output.contentElement;\n    }\n  }\n}\n", "// Copyright 2025 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n// IMPORTANT: this file is auto generated. Please do not edit this file.\n/* istanbul ignore file */\nexport default `/*\n * Copyright 2015 The Chromium Authors\n * Use of this source code is governed by a BSD-style license that can be\n * found in the LICENSE file.\n */\n\n.empty-view-scroller {\n  overflow: auto;\n}\n\n/*# sourceURL=${import.meta.resolve('./emptyWidget.css')} */`;", "// Copyright 2017 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as Host from '../../core/host/host.js';\nimport * as Platform from '../../core/platform/platform.js';\nimport * as UIHelpers from '../helpers/helpers.js';\nimport * as VisualLogging from '../visual_logging/visual_logging.js';\n\nimport * as ARIAUtils from './ARIAUtils.js';\nimport type {ContextMenu, Provider} from './ContextMenu.js';\nimport {html as xhtml} from './Fragment.js';\nimport {Tooltip} from './Tooltip.js';\nimport {\n  copyLinkAddressLabel,\n  MaxLengthForDisplayedURLs,\n  openLinkExternallyLabel,\n} from './UIUtils.js';\nimport {XElement} from './XElement.js';\n\nexport class XLink extends XElement {\n  #href: Platform.DevToolsPath.UrlString|null;\n  private clickable: boolean;\n  private readonly onClick: (arg0: Event) => void;\n  private readonly onKeyDown: (arg0: KeyboardEvent) => void;\n  static create(\n      url: string, linkText?: string, className?: string, preventClick?: boolean, jsLogContext?: string,\n      tabindex = '0'): HTMLElement {\n    if (!linkText) {\n      linkText = url;\n    }\n    className = className || '';\n    // clang-format off\n    // TODO(dgozman): migrate css from 'devtools-link' to 'x-link'.\n    const element = xhtml `\n  <x-link href='${url}' tabindex='${tabindex}' class='${className} devtools-link' ${preventClick ? 'no-click' : ''}\n  jslog=${VisualLogging.link().track({click: true, keydown:'Enter|Space'}).context(jsLogContext)}>${Platform.StringUtilities.trimMiddle(linkText, MaxLengthForDisplayedURLs)}</x-link>`;\n    // clang-format on\n    return element as HTMLElement;\n  }\n\n  constructor() {\n    super();\n\n    this.style.setProperty('display', 'inline');\n    ARIAUtils.markAsLink(this);\n    this.setAttribute('tabindex', '0');\n    this.setAttribute('target', '_blank');\n    this.setAttribute('rel', 'noopener');\n\n    this.#href = null;\n    this.clickable = true;\n\n    this.onClick = (event: Event) => {\n      event.consume(true);\n      if (this.#href) {\n        UIHelpers.openInNewTab(this.#href);\n      }\n    };\n    this.onKeyDown = (event: KeyboardEvent) => {\n      if (Platform.KeyboardUtilities.isEnterOrSpaceKey(event)) {\n        event.consume(true);\n        if (this.#href) {\n          UIHelpers.openInNewTab(this.#href);\n        }\n      }\n    };\n  }\n\n  static override get observedAttributes(): string[] {\n    // TODO(dgozman): should be super.observedAttributes, but it does not compile.\n    return XElement.observedAttributes.concat(['href', 'no-click', 'title', 'tabindex']);\n  }\n\n  get href(): Platform.DevToolsPath.UrlString|null {\n    return this.#href;\n  }\n\n  override attributeChangedCallback(attr: string, oldValue: string|null, newValue: string|null): void {\n    if (attr === 'no-click') {\n      this.clickable = !newValue;\n      this.updateClick();\n      return;\n    }\n\n    if (attr === 'href') {\n      // For invalid or non-absolute URLs, `href` should remain `null`.\n      if (!newValue) {\n        newValue = '';\n      }\n      let href: Platform.DevToolsPath.UrlString|null = null;\n      try {\n        const url = new URL(newValue);\n        if (url.protocol !== 'javascript:') {\n          href = Platform.DevToolsPath.urlString`${url}`;\n        }\n      } catch {\n      }\n\n      this.#href = href;\n      if (!this.hasAttribute('title')) {\n        Tooltip.install(this, newValue);\n      }\n      this.updateClick();\n      return;\n    }\n\n    if (attr === 'tabindex') {\n      if (oldValue !== newValue) {\n        this.setAttribute('tabindex', newValue || '0');\n      }\n      return;\n    }\n\n    super.attributeChangedCallback(attr, oldValue, newValue);\n  }\n\n  private updateClick(): void {\n    if (this.#href !== null && this.clickable) {\n      this.addEventListener('click', this.onClick, false);\n      this.addEventListener('keydown', this.onKeyDown, false);\n      this.style.setProperty('cursor', 'pointer');\n    } else {\n      this.removeEventListener('click', this.onClick, false);\n      this.removeEventListener('keydown', this.onKeyDown, false);\n      this.style.removeProperty('cursor');\n    }\n  }\n}\n\nexport class ContextMenuProvider implements Provider<Node> {\n  appendApplicableItems(_event: Event, contextMenu: ContextMenu, target: Node): void {\n    let targetNode: Node|null = target;\n    while (targetNode && !(targetNode instanceof XLink)) {\n      targetNode = targetNode.parentNodeOrShadowHost();\n    }\n    if (!targetNode?.href) {\n      return;\n    }\n    const node: XLink = targetNode;\n    contextMenu.revealSection().appendItem(openLinkExternallyLabel(), () => {\n      if (node.href) {\n        UIHelpers.openInNewTab(node.href);\n      }\n    }, {jslogContext: 'open-in-new-tab'});\n    contextMenu.revealSection().appendItem(copyLinkAddressLabel(), () => {\n      if (node.href) {\n        Host.InspectorFrontendHost.InspectorFrontendHostInstance.copyText(node.href);\n      }\n    }, {jslogContext: 'copy-link-address'});\n  }\n}\n\n// eslint-disable-next-line @devtools/enforce-custom-element-prefix\ncustomElements.define('x-link', XLink);\n", "// Copyright 2017 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n/* eslint-disable @devtools/no-imperative-dom-api */\n\nfunction getNodeData(node: Node): string {\n  return (node as unknown as {\n           data: string,\n         })\n      .data;\n}\n\nfunction setNodeData<T>(node: Node, value: T): void {\n  (node as unknown as {\n    data: T,\n  }).data = value;\n}\n\nexport class Fragment {\n  readonly #element: Element;\n  private readonly elementsById = new Map<string, Element>();\n\n  constructor(element: Element) {\n    this.#element = element;\n  }\n\n  element(): Element {\n    return this.#element;\n  }\n\n  $(elementId: string): Element {\n    return this.elementsById.get(elementId) as Element;\n  }\n\n  static build(strings: TemplateDefinition, ...values: any[]): Fragment {\n    return Fragment.render(Fragment.template(strings), values);\n  }\n\n  static cached(strings: TemplateDefinition, ...values: any[]): Fragment {\n    let template = templateCache.get(strings);\n    if (!template) {\n      template = Fragment.template(strings);\n      templateCache.set(strings, template);\n    }\n    return Fragment.render(template, values);\n  }\n\n  private static template(strings: TemplateDefinition): Template {\n    let html = '';\n    let insideText = true;\n    for (let i = 0; i < strings.length - 1; i++) {\n      html += strings[i];\n      const close = strings[i].lastIndexOf('>');\n      const open = strings[i].indexOf('<', close + 1);\n      if (close !== -1 && open === -1) {\n        insideText = true;\n      } else if (open !== -1) {\n        insideText = false;\n      }\n      html += insideText ? textMarker : attributeMarker(i);\n    }\n    html += strings[strings.length - 1];\n\n    const template = document.createElement('template');\n    template.innerHTML = html;\n    const walker =\n        template.ownerDocument.createTreeWalker(template.content, NodeFilter.SHOW_ELEMENT | NodeFilter.SHOW_TEXT, null);\n    let valueIndex = 0;\n    const emptyTextNodes = [];\n    const binds: Bind[] = [];\n    const nodesToMark = [];\n    while (walker.nextNode()) {\n      const node = (walker.currentNode as HTMLElement);\n      if (node.nodeType === Node.ELEMENT_NODE && node.hasAttributes()) {\n        if (node.hasAttribute('$')) {\n          nodesToMark.push(node);\n          binds.push({replaceNodeIndex: undefined, attr: undefined, elementId: node.getAttribute('$') || ''});\n          node.removeAttribute('$');\n        }\n\n        const attributesToRemove = [];\n        for (let i = 0; i < node.attributes.length; i++) {\n          const name = node.attributes[i].name;\n\n          if (!attributeMarkerRegex.test(name) && !attributeMarkerRegex.test(node.attributes[i].value)) {\n            continue;\n          }\n\n          attributesToRemove.push(name);\n          nodesToMark.push(node);\n\n          const attr = {\n            index: valueIndex,\n            names: name.split(attributeMarkerRegex),\n            values: node.attributes[i].value.split(attributeMarkerRegex),\n          };\n          valueIndex += attr.names.length - 1;\n          valueIndex += attr.values.length - 1;\n          const bind: Bind = {\n            elementId: undefined,\n            replaceNodeIndex: undefined,\n            attr,\n          };\n          binds.push(bind);\n        }\n        for (let i = 0; i < attributesToRemove.length; i++) {\n          node.removeAttribute(attributesToRemove[i]);\n        }\n      }\n\n      if (node.nodeType === Node.TEXT_NODE && getNodeData(node).indexOf(textMarker) !== -1) {\n        const texts = getNodeData(node).split(textMarkerRegex);\n        setNodeData(node, texts[texts.length - 1]);\n        const parentNode = (node.parentNode as HTMLElement);\n        for (let i = 0; i < texts.length - 1; i++) {\n          if (texts[i]) {\n            parentNode.insertBefore(document.createTextNode(texts[i]), node);\n          }\n          const nodeToReplace = document.createElement('span');\n          nodesToMark.push(nodeToReplace);\n          binds.push({attr: undefined, elementId: undefined, replaceNodeIndex: valueIndex++});\n          parentNode.insertBefore(nodeToReplace, node);\n        }\n      }\n\n      if (node.nodeType === Node.TEXT_NODE &&\n          (!node.previousSibling || node.previousSibling.nodeType === Node.ELEMENT_NODE) &&\n          (!node.nextSibling || node.nextSibling.nodeType === Node.ELEMENT_NODE) && /^\\s*$/.test(getNodeData(node))) {\n        emptyTextNodes.push(node);\n      }\n    }\n\n    for (let i = 0; i < nodesToMark.length; i++) {\n      nodesToMark[i].classList.add(generateClassName(i));\n    }\n\n    for (const emptyTextNode of emptyTextNodes) {\n      emptyTextNode.remove();\n    }\n    return {template, binds};\n  }\n\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  private static render(template: Template, values: any[]): Fragment {\n    const content = template.template.ownerDocument.importNode(template.template.content, true);\n    const resultElement = (content.firstChild === content.lastChild ? content.firstChild : content) as Element;\n    const result = new Fragment(resultElement);\n\n    const boundElements = [];\n    for (let i = 0; i < template.binds.length; i++) {\n      const className = generateClassName(i);\n      const element = (content.querySelector('.' + className) as Element);\n      element.classList.remove(className);\n      boundElements.push(element);\n    }\n\n    for (let bindIndex = 0; bindIndex < template.binds.length; bindIndex++) {\n      const bind = template.binds[bindIndex];\n      const element = boundElements[bindIndex];\n      if (bind.elementId !== undefined) {\n        result.elementsById.set(bind.elementId, element);\n      } else if (bind.replaceNodeIndex !== undefined) {\n        const value = values[bind.replaceNodeIndex];\n        (element.parentNode as HTMLElement).replaceChild(this.nodeForValue(value), element);\n      } else if (bind.attr !== undefined) {\n        if (bind.attr.names.length === 2 && bind.attr.values.length === 1 &&\n            typeof values[bind.attr.index] === 'function') {\n          values[bind.attr.index].call(null, element);\n        } else {\n          let name = bind.attr.names[0];\n          for (let i = 1; i < bind.attr.names.length; i++) {\n            name += values[bind.attr.index + i - 1];\n            name += bind.attr.names[i];\n          }\n          if (name) {\n            let value = bind.attr.values[0];\n            for (let i = 1; i < bind.attr.values.length; i++) {\n              value += values[bind.attr.index + bind.attr.names.length - 1 + i - 1];\n              value += bind.attr.values[i];\n            }\n            element.setAttribute(name, value);\n          }\n        }\n      } else {\n        throw new Error('Unexpected bind');\n      }\n    }\n    return result;\n  }\n\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  private static nodeForValue(value: any): Node {\n    if (value instanceof Node) {\n      return value;\n    }\n    if (value instanceof Fragment) {\n      return value.#element;\n    }\n    if (Array.isArray(value)) {\n      const node = document.createDocumentFragment();\n      for (const v of value) {\n        node.appendChild(this.nodeForValue(v));\n      }\n      return node;\n    }\n    return document.createTextNode(String(value));\n  }\n}\n\nexport const textMarker = '{{template-text}}';\nconst textMarkerRegex = /{{template-text}}/;\nexport const attributeMarker = (index: number): string => 'template-attribute' + index;\nconst attributeMarkerRegex = /template-attribute\\d+/;\nconst generateClassName = (index: number): string => 'template-class-' + index;\nconst templateCache = new Map<TemplateDefinition, Template>();\n\nexport const html = (strings: TemplateDefinition, ...vararg: any[]): Element => {\n  return Fragment.cached(strings, ...vararg).element();\n};\n\nexport type TemplateDefinition = string[]|TemplateStringsArray;\n\nexport interface Bind {\n  elementId?: string;\n  attr?: {\n    index: number,\n    names: string[],\n    values: string[],\n  };\n  replaceNodeIndex?: number;\n}\n\nexport interface Template {\n  template: HTMLTemplateElement;\n  binds: Bind[];\n}\n", "// Copyright 2017 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nexport class XElement extends HTMLElement {\n  static get observedAttributes(): string[] {\n    return [\n      'flex',          'padding',     'padding-top',      'padding-bottom', 'padding-left',\n      'padding-right', 'margin',      'margin-top',       'margin-bottom',  'margin-left',\n      'margin-right',  'overflow',    'overflow-x',       'overflow-y',     'font-size',\n      'color',         'background',  'background-color', 'border',         'border-top',\n      'border-bottom', 'border-left', 'border-right',     'max-width',      'max-height',\n    ];\n  }\n\n  attributeChangedCallback(attr: string, _oldValue: string|null, newValue: string|null): void {\n    if (attr === 'flex') {\n      if (newValue === null) {\n        this.style.removeProperty('flex');\n      } else if (newValue === 'initial' || newValue === 'auto' || newValue === 'none' || newValue.indexOf(' ') !== -1) {\n        this.style.setProperty('flex', newValue);\n      } else {\n        this.style.setProperty('flex', '0 0 ' + newValue);\n      }\n      return;\n    }\n    if (newValue === null) {\n      this.style.removeProperty(attr);\n      if (attr.startsWith('padding-') || attr.startsWith('margin-') || attr.startsWith('border-') ||\n          attr.startsWith('background-') || attr.startsWith('overflow-')) {\n        const shorthand = attr.substring(0, attr.indexOf('-'));\n        const shorthandValue = this.getAttribute(shorthand);\n        if (shorthandValue !== null) {\n          this.style.setProperty(shorthand, shorthandValue);\n        }\n      }\n    } else {\n      this.style.setProperty(attr, newValue);\n    }\n  }\n}\n", "// Copyright 2013 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\n/* eslint-disable @devtools/no-imperative-dom-api */\n\nimport './Toolbar.js';\n\nimport * as Common from '../../core/common/common.js';\nimport * as Host from '../../core/host/host.js';\nimport * as i18n from '../../core/i18n/i18n.js';\nimport * as Platform from '../../core/platform/platform.js';\nimport * as VisualLogging from '../../ui/visual_logging/visual_logging.js';\n\nimport * as ARIAUtils from './ARIAUtils.js';\nimport filterStyles from './filter.css.js';\nimport {KeyboardShortcut, Modifiers} from './KeyboardShortcut.js';\nimport type {Suggestions} from './SuggestBox.js';\nimport {type ToolbarButton, ToolbarFilter, ToolbarInput, ToolbarSettingToggle} from './Toolbar.js';\nimport {Tooltip} from './Tooltip.js';\nimport {bindCheckbox, CheckboxLabel, createTextChild} from './UIUtils.js';\nimport {HBox} from './Widget.js';\n\nconst UIStrings = {\n  /**\n   * @description Text to filter result items\n   */\n  filter: 'Filter',\n  /**\n   * @description Text that appears when hover over the filter bar in the Network tool\n   */\n  egSmalldUrlacomb: 'e.g. `/small[\\d]+/ url:a.com/b`',\n  /**\n   * @description Text that appears when hover over the All button in the Network tool\n   * @example {Ctrl + } PH1\n   */\n  sclickToSelectMultipleTypes: '{PH1}Click to select multiple types',\n  /**\n   * @description Text for everything\n   */\n  allStrings: 'All',\n} as const;\nconst str_ = i18n.i18n.registerUIStrings('ui/legacy/FilterBar.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\nexport class FilterBar extends Common.ObjectWrapper.eventMixin<FilterBarEventTypes, typeof HBox>(HBox) {\n  private enabled: boolean;\n  private readonly stateSetting: Common.Settings.Setting<boolean>;\n  readonly #filterButton: ToolbarSettingToggle;\n  private filters: FilterUI[];\n  private alwaysShowFilters?: boolean;\n  private showingWidget?: boolean;\n\n  constructor(name: string, visibleByDefault?: boolean) {\n    super();\n    this.registerRequiredCSS(filterStyles);\n    this.enabled = true;\n    this.element.classList.add('filter-bar');\n    this.element.setAttribute('jslog', `${VisualLogging.toolbar('filter-bar')}`);\n\n    this.stateSetting =\n        Common.Settings.Settings.instance().createSetting('filter-bar-' + name + '-toggled', Boolean(visibleByDefault));\n    this.#filterButton =\n        new ToolbarSettingToggle(this.stateSetting, 'filter', i18nString(UIStrings.filter), 'filter-filled', 'filter');\n    this.#filterButton.element.style.setProperty('--dot-toggle-top', '13px');\n    this.#filterButton.element.style.setProperty('--dot-toggle-left', '14px');\n\n    this.filters = [];\n\n    this.updateFilterBar();\n    this.stateSetting.addChangeListener(this.updateFilterBar.bind(this));\n  }\n\n  filterButton(): ToolbarButton {\n    return this.#filterButton;\n  }\n\n  addDivider(): void {\n    const element = document.createElement('div');\n    element.classList.add('filter-divider');\n    this.element.appendChild(element);\n  }\n\n  addFilter(filter: FilterUI): void {\n    this.filters.push(filter);\n    this.element.appendChild(filter.element());\n    filter.addEventListener(FilterUIEvents.FILTER_CHANGED, this.filterChanged, this);\n    this.updateFilterButton();\n  }\n\n  setEnabled(enabled: boolean): void {\n    this.enabled = enabled;\n    this.#filterButton.setEnabled(enabled);\n    this.updateFilterBar();\n  }\n\n  private filterChanged(): void {\n    this.updateFilterButton();\n    this.dispatchEventToListeners(FilterBarEvents.CHANGED);\n  }\n\n  override wasShown(): void {\n    super.wasShown();\n    this.updateFilterBar();\n  }\n\n  private updateFilterBar(): void {\n    if (!this.parentWidget() || this.showingWidget) {\n      return;\n    }\n    if (this.visible()) {\n      this.showingWidget = true;\n      this.showWidget();\n      this.showingWidget = false;\n    } else {\n      this.hideWidget();\n    }\n  }\n\n  override focus(): void {\n    for (let i = 0; i < this.filters.length; ++i) {\n      if (this.filters[i] instanceof TextFilterUI) {\n        const textFilterUI = (this.filters[i] as TextFilterUI);\n        textFilterUI.focus();\n        break;\n      }\n    }\n  }\n\n  hasActiveFilter(): boolean {\n    for (const filter of this.filters) {\n      if (filter.isActive()) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  private updateFilterButton(): void {\n    const isActive = this.hasActiveFilter();\n    this.#filterButton.setChecked(isActive);\n  }\n\n  clear(): void {\n    this.element.removeChildren();\n    this.filters = [];\n    this.updateFilterButton();\n  }\n\n  setting(): Common.Settings.Setting<boolean> {\n    return this.stateSetting;\n  }\n\n  visible(): boolean {\n    return this.alwaysShowFilters || (this.stateSetting.get() && this.enabled);\n  }\n}\n\nexport const enum FilterBarEvents {\n  CHANGED = 'Changed',\n}\n\nexport interface FilterBarEventTypes {\n  [FilterBarEvents.CHANGED]: void;\n}\n\nexport interface FilterUI extends Common.EventTarget.EventTarget<FilterUIEventTypes> {\n  isActive(): boolean;\n  element(): Element;\n}\n\nexport const enum FilterUIEvents {\n  FILTER_CHANGED = 'FilterChanged',\n}\n\nexport interface FilterUIEventTypes {\n  [FilterUIEvents.FILTER_CHANGED]: void;\n}\n\nexport class TextFilterUI extends Common.ObjectWrapper.ObjectWrapper<FilterUIEventTypes> implements FilterUI {\n  private readonly filterElement: HTMLDivElement;\n  #filter: ToolbarFilter;\n  private suggestionProvider: ((arg0: string, arg1: string, arg2?: boolean|undefined) => Promise<Suggestions>)|null;\n  constructor() {\n    super();\n    this.filterElement = document.createElement('div');\n    this.filterElement.classList.add('text-filter');\n    const filterToolbar = this.filterElement.createChild('devtools-toolbar');\n    // Set the style directly on the element to overwrite parent css styling.\n    filterToolbar.style.borderBottom = 'none';\n    this.#filter =\n        new ToolbarFilter(undefined, 1, 1, i18nString(UIStrings.egSmalldUrlacomb), this.completions.bind(this));\n    filterToolbar.appendToolbarItem(this.#filter);\n    this.#filter.addEventListener(ToolbarInput.Event.TEXT_CHANGED, () => this.valueChanged());\n    this.suggestionProvider = null;\n  }\n\n  private completions(expression: string, prefix: string, force?: boolean): Promise<Suggestions> {\n    if (this.suggestionProvider) {\n      return this.suggestionProvider(expression, prefix, force);\n    }\n    return Promise.resolve([]);\n  }\n\n  isActive(): boolean {\n    return Boolean(this.#filter.valueWithoutSuggestion());\n  }\n\n  element(): Element {\n    return this.filterElement;\n  }\n\n  value(): string {\n    return this.#filter.valueWithoutSuggestion();\n  }\n\n  setValue(value: string): void {\n    this.#filter.setValue(value);\n    this.valueChanged();\n  }\n\n  focus(): void {\n    this.#filter.focus();\n  }\n\n  setSuggestionProvider(\n      suggestionProvider: (arg0: string, arg1: string, arg2?: boolean|undefined) => Promise<Suggestions>): void {\n    this.#filter.clearAutocomplete();\n    this.suggestionProvider = suggestionProvider;\n  }\n\n  private valueChanged(): void {\n    this.dispatchEventToListeners(FilterUIEvents.FILTER_CHANGED);\n  }\n\n  clear(): void {\n    this.setValue('');\n  }\n}\n\ninterface NamedBitSetFilterUIOptions {\n  items: Item[];\n  setting?: Common.Settings.Setting<Record<string, boolean>>;\n}\n\nexport class NamedBitSetFilterUIElement extends HTMLElement {\n  #options: NamedBitSetFilterUIOptions = {items: []};\n  readonly #shadow = this.attachShadow({mode: 'open'});\n  #namedBitSetFilterUI?: NamedBitSetFilterUI;\n\n  set options(options: NamedBitSetFilterUIOptions) {\n    // return if they are the same\n    if (this.#options.items.toString() === options.items.toString() && this.#options.setting === options.setting) {\n      return;\n    }\n\n    this.#options = options;\n    // When options are updated, clear the UI so that a new one is created with the new options\n    this.#shadow.innerHTML = '';\n    this.#namedBitSetFilterUI = undefined;\n  }\n\n  getOrCreateNamedBitSetFilterUI(): NamedBitSetFilterUI {\n    if (this.#namedBitSetFilterUI) {\n      return this.#namedBitSetFilterUI;\n    }\n\n    const namedBitSetFilterUI = new NamedBitSetFilterUI(this.#options.items, this.#options.setting);\n    namedBitSetFilterUI.element().classList.add('named-bitset-filter');\n\n    const styleElement = this.#shadow.createChild('style');\n    styleElement.textContent = filterStyles;\n\n    const disclosureElement = this.#shadow.createChild('div', 'named-bit-set-filter-disclosure');\n    disclosureElement.appendChild(namedBitSetFilterUI.element());\n\n    // Translate existing filter (\"ObjectWrapper\") events to DOM CustomEvents so clients can\n    // use lit templates to bind listeners.\n    namedBitSetFilterUI.addEventListener(FilterUIEvents.FILTER_CHANGED, this.#filterChanged.bind(this));\n\n    this.#namedBitSetFilterUI = namedBitSetFilterUI;\n    return this.#namedBitSetFilterUI;\n  }\n\n  #filterChanged(): void {\n    const domEvent = new CustomEvent('filterChanged');\n    this.dispatchEvent(domEvent);\n  }\n}\n\ncustomElements.define('devtools-named-bit-set-filter', NamedBitSetFilterUIElement);\n\nexport class NamedBitSetFilterUI extends Common.ObjectWrapper.ObjectWrapper<FilterUIEventTypes> implements FilterUI {\n  private readonly filtersElement: HTMLDivElement;\n  private readonly typeFilterElementTypeNames = new WeakMap<HTMLElement, string>();\n  private allowedTypes = new Set<string>();\n  private readonly typeFilterElements: HTMLElement[] = [];\n  private readonly setting: Common.Settings.Setting<Record<string, boolean>>|undefined;\n\n  constructor(items: Item[], setting?: Common.Settings.Setting<Record<string, boolean>>) {\n    super();\n    this.filtersElement = document.createElement('div');\n    this.filtersElement.classList.add('filter-bitset-filter');\n    this.filtersElement.setAttribute('jslog', `${VisualLogging.section('filter-bitset')}`);\n    ARIAUtils.markAsListBox(this.filtersElement);\n    ARIAUtils.markAsMultiSelectable(this.filtersElement);\n    Tooltip.install(this.filtersElement, i18nString(UIStrings.sclickToSelectMultipleTypes, {\n                      PH1: KeyboardShortcut.shortcutToString('', Modifiers.CtrlOrMeta.value),\n                    }));\n\n    this.addBit(NamedBitSetFilterUI.ALL_TYPES, i18nString(UIStrings.allStrings), NamedBitSetFilterUI.ALL_TYPES);\n    this.typeFilterElements[0].tabIndex = 0;\n    this.filtersElement.createChild('div', 'filter-bitset-filter-divider');\n\n    for (let i = 0; i < items.length; ++i) {\n      this.addBit(items[i].name, items[i].label(), items[i].jslogContext, items[i].title);\n    }\n\n    if (setting) {\n      this.setting = setting;\n      setting.addChangeListener(this.settingChanged.bind(this));\n      this.settingChanged();\n    } else {\n      this.toggleTypeFilter(NamedBitSetFilterUI.ALL_TYPES, false /* allowMultiSelect */);\n    }\n  }\n\n  reset(): void {\n    this.toggleTypeFilter(NamedBitSetFilterUI.ALL_TYPES, false /* allowMultiSelect */);\n  }\n\n  isActive(): boolean {\n    return !this.allowedTypes.has(NamedBitSetFilterUI.ALL_TYPES);\n  }\n\n  element(): Element {\n    return this.filtersElement;\n  }\n\n  accept(typeName: string): boolean {\n    return this.allowedTypes.has(NamedBitSetFilterUI.ALL_TYPES) || this.allowedTypes.has(typeName);\n  }\n\n  private settingChanged(): void {\n    const allowedTypesFromSetting = (this.setting as Common.Settings.Setting<Record<string, boolean>>).get();\n    this.allowedTypes = new Set();\n    for (const element of this.typeFilterElements) {\n      const typeName = this.typeFilterElementTypeNames.get(element);\n      if (typeName && allowedTypesFromSetting[typeName]) {\n        this.allowedTypes.add(typeName);\n      }\n    }\n    this.update();\n  }\n\n  private update(): void {\n    if (this.allowedTypes.size === 0 || this.allowedTypes.has(NamedBitSetFilterUI.ALL_TYPES)) {\n      this.allowedTypes = new Set();\n      this.allowedTypes.add(NamedBitSetFilterUI.ALL_TYPES);\n    }\n    for (const element of this.typeFilterElements) {\n      const typeName = this.typeFilterElementTypeNames.get(element);\n      const active = this.allowedTypes.has(typeName || '');\n      element.classList.toggle('selected', active);\n      ARIAUtils.setSelected(element, active);\n    }\n    this.dispatchEventToListeners(FilterUIEvents.FILTER_CHANGED);\n  }\n\n  private addBit(name: string, label: string, jslogContext: string, title?: string): void {\n    const typeFilterElement = this.filtersElement.createChild('span', name);\n    typeFilterElement.tabIndex = -1;\n    this.typeFilterElementTypeNames.set(typeFilterElement, name);\n    createTextChild(typeFilterElement, label);\n    ARIAUtils.markAsOption(typeFilterElement);\n    if (title) {\n      typeFilterElement.title = title;\n    }\n    typeFilterElement.addEventListener('click', this.onTypeFilterClicked.bind(this), false);\n    typeFilterElement.addEventListener('keydown', this.onTypeFilterKeydown.bind(this), false);\n    typeFilterElement.setAttribute('jslog', `${VisualLogging.item(jslogContext).track({click: true})}`);\n    this.typeFilterElements.push(typeFilterElement);\n  }\n\n  private onTypeFilterClicked(event: Event): void {\n    const e = (event as KeyboardEvent);\n    let toggle;\n    if (Host.Platform.isMac()) {\n      toggle = e.metaKey && !e.ctrlKey && !e.altKey && !e.shiftKey;\n    } else {\n      toggle = e.ctrlKey && !e.metaKey && !e.altKey && !e.shiftKey;\n    }\n    if (e.target) {\n      const element = (e.target as HTMLElement);\n      const typeName = (this.typeFilterElementTypeNames.get(element) as string);\n      this.toggleTypeFilter(typeName, toggle);\n    }\n  }\n\n  private onTypeFilterKeydown(event: KeyboardEvent): void {\n    const element = (event.target as HTMLElement | null);\n    if (!element) {\n      return;\n    }\n\n    if (event.key === 'ArrowLeft' || event.key === 'ArrowUp' || (event.key === 'Tab' && event.shiftKey)) {\n      if (this.keyFocusNextBit(element, true /* selectPrevious */)) {\n        event.consume(true);\n      }\n    } else if (event.key === 'ArrowRight' || event.key === 'ArrowDown' || (event.key === 'Tab' && !event.shiftKey)) {\n      if (this.keyFocusNextBit(element, false /* selectPrevious */)) {\n        event.consume(true);\n      }\n    } else if (Platform.KeyboardUtilities.isEnterOrSpaceKey(event)) {\n      this.onTypeFilterClicked(event);\n    }\n  }\n\n  private keyFocusNextBit(target: HTMLElement, selectPrevious: boolean): boolean {\n    let index = this.typeFilterElements.indexOf(target);\n\n    if (index === -1) {\n      index = this.typeFilterElements.findIndex(el => el.classList.contains('selected'));\n      if (index === -1) {\n        index = selectPrevious ? this.typeFilterElements.length : -1;\n      }\n    }\n\n    const nextIndex = selectPrevious ? index - 1 : index + 1;\n    if (nextIndex < 0 || nextIndex >= this.typeFilterElements.length) {\n      return false;\n    }\n\n    const nextElement = this.typeFilterElements[nextIndex];\n    nextElement.tabIndex = 0;\n    target.tabIndex = -1;\n    nextElement.focus();\n    return true;\n  }\n\n  private toggleTypeFilter(typeName: string, allowMultiSelect: boolean): void {\n    if (allowMultiSelect && typeName !== NamedBitSetFilterUI.ALL_TYPES) {\n      this.allowedTypes.delete(NamedBitSetFilterUI.ALL_TYPES);\n    } else {\n      this.allowedTypes = new Set();\n    }\n\n    if (this.allowedTypes.has(typeName)) {\n      this.allowedTypes.delete(typeName);\n    } else {\n      this.allowedTypes.add(typeName);\n    }\n\n    if (this.allowedTypes.size === 0) {\n      this.allowedTypes.add(NamedBitSetFilterUI.ALL_TYPES);\n    }\n\n    if (this.setting) {\n      // Settings do not support `Sets` so convert it back to the Map-like object.\n      const updatedSetting = ({} as Record<string, boolean>);\n      for (const type of this.allowedTypes) {\n        updatedSetting[type] = true;\n      }\n      this.setting.set(updatedSetting);\n    } else {\n      this.update();\n    }\n  }\n\n  static readonly ALL_TYPES = 'all';\n}\n\nexport class CheckboxFilterUI extends Common.ObjectWrapper.ObjectWrapper<FilterUIEventTypes> implements FilterUI {\n  private readonly filterElement: HTMLDivElement;\n  private readonly activeWhenChecked: boolean;\n  private checkbox: CheckboxLabel;\n  constructor(\n      title: Common.UIString.LocalizedString,\n      activeWhenChecked?: boolean,\n      setting?: Common.Settings.Setting<boolean>,\n      jslogContext?: string,\n  ) {\n    super();\n    this.filterElement = document.createElement('div');\n    this.filterElement.classList.add('filter-checkbox-filter');\n    this.activeWhenChecked = Boolean(activeWhenChecked);\n    this.checkbox = CheckboxLabel.create(title, undefined, undefined, jslogContext);\n    this.filterElement.appendChild(this.checkbox);\n    if (setting) {\n      bindCheckbox(this.checkbox, setting);\n    } else {\n      this.checkbox.checked = true;\n    }\n    this.checkbox.addEventListener('change', this.fireUpdated.bind(this), false);\n  }\n\n  isActive(): boolean {\n    return this.activeWhenChecked === this.checkbox.checked;\n  }\n\n  checked(): boolean {\n    return this.checkbox.checked;\n  }\n\n  setChecked(checked: boolean): void {\n    this.checkbox.checked = checked;\n  }\n\n  element(): HTMLDivElement {\n    return this.filterElement;\n  }\n\n  labelElement(): Element {\n    return this.checkbox;\n  }\n\n  private fireUpdated(): void {\n    this.dispatchEventToListeners(FilterUIEvents.FILTER_CHANGED);\n  }\n}\n\nexport interface Item {\n  name: string;\n  label: () => string;\n  title?: string;\n  jslogContext: string;\n}\n", "// Copyright 2025 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n// IMPORTANT: this file is auto generated. Please do not edit this file.\n/* istanbul ignore file */\nexport default `/*\n * Copyright 2013 The Chromium Authors\n * Use of this source code is governed by a BSD-style license that can be\n * found in the LICENSE file.\n */\n\n.filter-bar,\n.filter-bar.hbox {\n  background-color: var(--sys-color-cdt-base-container);\n  flex: none;\n  flex-wrap: wrap;\n  align-items: center;\n  border-bottom: 1px solid var(--sys-color-divider);\n  color: var(--sys-color-on-surface-subtle);\n}\n\n.text-filter {\n  flex-grow: 1;\n  min-width: var(--sys-size-25);\n  max-width: var(--sys-size-36);\n}\n\n.filter-bitset-filter {\n  padding: 2px;\n  display: inline-flex;\n  overflow: hidden;\n  min-height: var(--sys-size-11);\n  height: auto;\n  flex-wrap: wrap;\n  row-gap: var(--sys-size-2);\n  position: relative;\n  margin: 0;\n}\n\n.filter-bitset-filter span {\n  color: var(--sys-color-on-surface);\n  outline: 1px solid var(--sys-color-neutral-outline);\n  outline-offset: -1px;\n  box-sizing: border-box;\n  display: inline-block;\n  flex: none;\n  margin: auto 2px;\n  padding: 3px 6px;\n  background: transparent;\n  border-radius: 6px;\n  overflow: hidden;\n  cursor: pointer;\n  font-weight: 500;\n  font-size: 11px;\n}\n\n.filter-bitset-filter span:focus-visible {\n  outline: var(--sys-size-2) solid var(--sys-color-state-focus-ring);\n}\n\n.filter-bitset-filter span:hover {\n  background: var(--sys-color-state-hover-on-subtle);\n}\n\n.filter-bitset-filter span:hover:not(:focus-visible) {\n  outline: none;\n}\n\n.filter-bitset-filter span.selected,\n.filter-bitset-filter span:active {\n  color: var(--sys-color-on-tonal-container);\n  background-color: var(--sys-color-tonal-container);\n}\n\n.filter-bitset-filter span.selected:not(:focus-visible),\n.filter-bitset-filter span:active:not(:focus-visible) {\n  outline: none;\n}\n\n.filter-bitset-filter-divider {\n  background-color: var(--sys-color-divider);\n  height: 16px;\n  width: 1px;\n  margin: auto 2px;\n  display: inline-block;\n}\n\n.filter-checkbox-filter {\n  padding-left: 1px;\n  padding-right: 7px;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n  overflow: hidden;\n  display: inline-flex;\n  vertical-align: middle;\n  height: 24px;\n  position: relative;\n}\n\n.filter-checkbox-filter > devtools-checkbox {\n  display: flex;\n  margin: auto 0;\n}\n\n.toolbar-has-dropdown-shrinkable {\n  flex-shrink: 1;\n}\n\n.filter-divider {\n  background-color: var(--sys-color-divider);\n  width: 1px;\n  margin: 5px 4px;\n  height: 16px;\n}\n\n.toolbar-button {\n  white-space: nowrap;\n  overflow: hidden;\n  min-width: 28px;\n  background: transparent;\n  border-radius: 0;\n}\n\n.toolbar-button .active-filters-count {\n  margin-right: 5px;\n\n  --override-adorner-background-color: var(--sys-color-tonal-container);\n  --override-adorner-border-color: var(--sys-color-tonal-container);\n  --override-adorner-text-color: var(--sys-color-primary);\n  --override-adorner-font-size: 10px;\n\n  font-weight: 700;\n}\n\n.toolbar-text {\n  margin: 0 4px 0 0;\n  text-overflow: ellipsis;\n  flex: auto;\n  overflow: hidden;\n  text-align: right;\n}\n\n.dropdown-filterbar {\n  justify-content: space-between;\n  align-items: center;\n  height: var(--sys-size-9);\n  margin: 0 var(--sys-size-3) 0 var(--sys-size-5);\n  border: none;\n  border-radius: var(--sys-shape-corner-extra-small);\n  display: flex;\n  background-color: transparent;\n  color: var(--sys-color-on-surface-subtle);\n\n  .toolbar-dropdown-arrow {\n    top: var(--sys-size-1);\n  }\n\n  &:hover {\n    background-color: var(--sys-color-state-hover-on-subtle);\n  }\n\n  &:active {\n    background-color: var(--sys-color-state-ripple-neutral-on-subtle);\n  }\n\n  &:hover:active {\n    background:\n      linear-gradient(var(--sys-color-state-hover-on-subtle), var(--sys-color-state-hover-on-subtle)),\n      linear-gradient(var(--sys-color-state-ripple-neutral-on-subtle), var(--sys-color-state-ripple-neutral-on-subtle));\n  }\n\n  &:focus-visible {\n    outline: 2px solid var(--sys-color-state-focus-ring);\n  }\n}\n\n@media (forced-colors: active) {\n  .filter-bitset-filter span:hover,\n  .filter-bitset-filter span.selected,\n  .filter-bitset-filter span:active {\n    forced-color-adjust: none;\n    background: Highlight;\n    color: HighlightText;\n  }\n}\n\n/*# sourceURL=${import.meta.resolve('./filter.css')} */`;", "// Copyright 2017 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as Platform from '../../core/platform/platform.js';\n\nimport type {Suggestion} from './SuggestBox.js';\n\nexport class FilterSuggestionBuilder {\n  private readonly keys: string[];\n  private readonly valueSorter: ((arg0: string, arg1: string[]) => void)|((key: string, result: string[]) => string[]);\n  private readonly valuesMap = new Map<string, Set<string>>();\n\n  constructor(keys: string[], valueSorter?: ((arg0: string, arg1: string[]) => void)) {\n    this.keys = keys;\n    this.valueSorter = valueSorter || ((_: string, result: string[]) => result.sort());\n  }\n\n  completions(_expression: string, prefix: string, force?: boolean): Promise<Suggestion[]> {\n    if (!prefix && !force) {\n      return Promise.resolve([]);\n    }\n\n    const negative = prefix.startsWith('-');\n    if (negative) {\n      prefix = prefix.substring(1);\n    }\n    const modifier = negative ? '-' : '';\n    const valueDelimiterIndex = prefix.indexOf(':');\n\n    const suggestions: Suggestion[] = [];\n    if (valueDelimiterIndex === -1) {\n      const matcher = new RegExp('^' + Platform.StringUtilities.escapeForRegExp(prefix), 'i');\n      for (const key of this.keys) {\n        if (matcher.test(key)) {\n          suggestions.push(({text: modifier + key + ':'}));\n        }\n      }\n    } else {\n      const key = prefix.substring(0, valueDelimiterIndex).toLowerCase();\n      const value = prefix.substring(valueDelimiterIndex + 1);\n      const matcher = new RegExp('^' + Platform.StringUtilities.escapeForRegExp(value), 'i');\n      const values = Array.from(this.valuesMap.get(key) || new Set<string>());\n      this.valueSorter(key, values);\n      for (const item of values) {\n        if (matcher.test(item) && (item !== value)) {\n          suggestions.push(({text: modifier + key + ':' + item}));\n        }\n      }\n    }\n    return Promise.resolve(suggestions);\n  }\n\n  addItem(key: string, value?: string|null): void {\n    if (!value) {\n      return;\n    }\n\n    let set = this.valuesMap.get(key);\n    if (!set) {\n      set = (new Set());\n      this.valuesMap.set(key, set);\n    }\n    set.add(value);\n  }\n\n  clear(): void {\n    this.valuesMap.clear();\n  }\n}\n", "// Copyright 2014 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport type * as Common from '../../core/common/common.js';\nimport * as Host from '../../core/host/host.js';\n\nimport {Context} from './Context.js';\nimport {KeyboardShortcut} from './KeyboardShortcut.js';\nimport {ForwardedShortcut, ShortcutRegistry} from './ShortcutRegistry.js';\n\n/**\n * This handler only forwards the keystrokes if DevTools front-end is\n * not running in hosted mode.\n **/\nexport class ForwardedInputEventHandler {\n  constructor() {\n    Host.InspectorFrontendHost.InspectorFrontendHostInstance.events.addEventListener(\n        Host.InspectorFrontendHostAPI.Events.KeyEventUnhandled, this.onKeyEventUnhandled, this);\n  }\n\n  private async onKeyEventUnhandled(\n      event: Common.EventTarget.EventTargetEvent<Host.InspectorFrontendHostAPI.KeyEventUnhandledEvent>): Promise<void> {\n    const {type, key, keyCode, modifiers} = event.data;\n    if (type !== 'keydown') {\n      return;\n    }\n\n    const context = Context.instance();\n    const shortcutRegistry = ShortcutRegistry.instance();\n\n    context.setFlavor(ForwardedShortcut, ForwardedShortcut.instance);\n    await shortcutRegistry.handleKey(KeyboardShortcut.makeKey(keyCode, modifiers), key);\n    context.setFlavor(ForwardedShortcut, null);\n  }\n}\n\nnew ForwardedInputEventHandler();\n", "// Copyright 2014 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as Platform from '../../core/platform/platform.js';\n\nimport * as ARIAUtils from './ARIAUtils.js';\nimport {Keys} from './KeyboardShortcut.js';\nimport {ElementFocusRestorer, markBeingEdited} from './UIUtils.js';\n\nlet inplaceEditorInstance: InplaceEditor<unknown>|null = null;\n\nexport class InplaceEditor<T> {\n  private focusRestorer?: ElementFocusRestorer;\n  static startEditing<T>(element: Element, config: Config<T>): Controller|null {\n    if (!inplaceEditorInstance) {\n      inplaceEditorInstance = new InplaceEditor();\n    }\n    return inplaceEditorInstance.startEditing(element, config as Config<unknown>);\n  }\n\n  editorContent(editingContext: EditingContext<T>): string {\n    const element = editingContext.element;\n    if (element.tagName === 'INPUT' && (element as HTMLInputElement).type === 'text') {\n      return (element as HTMLInputElement).value;\n    }\n\n    return element.textContent || '';\n  }\n\n  setUpEditor(editingContext: EditingContext<T>): void {\n    const element = (editingContext.element as HTMLElement);\n    element.classList.add('editing');\n    element.setAttribute('contenteditable', 'plaintext-only');\n\n    const oldRole = element.getAttribute('role');\n    ARIAUtils.markAsTextBox(element);\n    editingContext.oldRole = oldRole;\n\n    // Using element.getAttribute('tabIndex') instead of element.tabIndex so\n    // that we do not get a default value if the tabIndex attribute is not set.\n    const oldTabIndex = element.getAttribute('tabIndex');\n    if (typeof oldTabIndex !== 'number' || oldTabIndex < 0) {\n      element.tabIndex = 0;\n    }\n    this.focusRestorer = new ElementFocusRestorer(element);\n    editingContext.oldTabIndex = oldTabIndex;\n  }\n\n  closeEditor(editingContext: EditingContext<T>): void {\n    const element = (editingContext.element as HTMLElement);\n    element.classList.remove('editing');\n    element.removeAttribute('contenteditable');\n\n    if (typeof editingContext.oldRole !== 'string') {\n      element.removeAttribute('role');\n    } else {\n      element.setAttribute('role', editingContext.oldRole);\n    }\n\n    if (typeof editingContext.oldTabIndex !== 'number') {\n      element.removeAttribute('tabIndex');\n    } else {\n      element.setAttribute('tabIndex', editingContext.oldTabIndex);\n    }\n    element.scrollTop = 0;\n    element.scrollLeft = 0;\n  }\n\n  cancelEditing(editingContext: EditingContext<T>): void {\n    const element = (editingContext.element as HTMLElement);\n    if (element.tagName === 'INPUT' && (element as HTMLInputElement).type === 'text') {\n      (element as HTMLInputElement).value = editingContext.oldText || '';\n    } else {\n      element.textContent = editingContext.oldText;\n    }\n  }\n\n  startEditing(element: Element, config: Config<T>): Controller|null {\n    if (!markBeingEdited(element, true)) {\n      return null;\n    }\n\n    const editingContext: EditingContext<T> = {element, config, oldRole: null, oldTabIndex: null, oldText: null};\n    const committedCallback = config.commitHandler;\n    const cancelledCallback = config.cancelHandler;\n    const pasteCallback = config.pasteHandler;\n    const context = config.context;\n    let moveDirection = '';\n    const self = this;\n\n    this.setUpEditor(editingContext);\n\n    editingContext.oldText = this.editorContent(editingContext);\n\n    function blurEventListener(e?: Event): void {\n      if (!config.blurHandler(element, e)) {\n        return;\n      }\n      editingCommitted.call(element);\n    }\n\n    function cleanUpAfterEditing(): void {\n      markBeingEdited(element, false);\n\n      element.removeEventListener('blur', blurEventListener, false);\n      element.removeEventListener('keydown', keyDownEventListener, true);\n      if (pasteCallback) {\n        element.removeEventListener('paste', pasteEventListener, true);\n      }\n\n      if (self.focusRestorer) {\n        self.focusRestorer.restore();\n      }\n      self.closeEditor(editingContext);\n    }\n\n    function editingCancelled(this: Element): void {\n      self.cancelEditing(editingContext);\n      cleanUpAfterEditing();\n      cancelledCallback(this, context);\n    }\n\n    function editingCommitted(this: Element): void {\n      cleanUpAfterEditing();\n\n      committedCallback(this, self.editorContent(editingContext), editingContext.oldText, context, moveDirection);\n      element.dispatchEvent(new Event('change'));\n    }\n\n    function defaultFinishHandler(event: KeyboardEvent): string {\n      if (event.key === 'Enter') {\n        return 'commit';\n      }\n      if (event.keyCode === Keys.Esc.code || event.key === Platform.KeyboardUtilities.ESCAPE_KEY) {\n        return 'cancel';\n      }\n      if (event.key === 'Tab') {\n        return 'move-' + (event.shiftKey ? 'backward' : 'forward');\n      }\n      return '';\n    }\n\n    function handleEditingResult(result: string|undefined, event: Event): void {\n      if (result === 'commit') {\n        editingCommitted.call(element);\n        event.consume(true);\n      } else if (result === 'cancel') {\n        editingCancelled.call(element);\n        event.consume(true);\n      } else if (result?.startsWith('move-')) {\n        moveDirection = result.substring(5);\n        if ((event as KeyboardEvent).key === 'Tab') {\n          event.consume(true);\n        }\n        blurEventListener();\n      }\n    }\n\n    function pasteEventListener(event: Event): void {\n      if (!pasteCallback) {\n        return;\n      }\n      const result = pasteCallback(event);\n      handleEditingResult(result, event);\n    }\n\n    function keyDownEventListener(event: Event): void {\n      let result = defaultFinishHandler((event as KeyboardEvent));\n      if (!result && config.postKeydownFinishHandler) {\n        const postKeydownResult = config.postKeydownFinishHandler(event);\n        if (postKeydownResult) {\n          result = postKeydownResult;\n        }\n      }\n      handleEditingResult(result, event);\n    }\n\n    element.addEventListener('blur', blurEventListener, false);\n    element.addEventListener('keydown', keyDownEventListener, true);\n    if (pasteCallback !== undefined) {\n      element.addEventListener('paste', pasteEventListener, true);\n    }\n\n    const handle = {cancel: editingCancelled.bind(element), commit: editingCommitted.bind(element)};\n    return handle;\n  }\n}\n\nexport type CommitHandler<T> =\n    (element: Element, newText: string, oldText: string|null, context: T, moveDirection: string) => void;\nexport type CancelHandler<T> = (element: Element, context: T) => void;\nexport type BlurHandler = (element: Element, event?: Event) => boolean;\n\nexport class Config<T> {\n  commitHandler: CommitHandler<T>;\n  cancelHandler: CancelHandler<T>;\n  context: T;\n  blurHandler: BlurHandler;\n  pasteHandler?: EventHandler;\n  postKeydownFinishHandler?: EventHandler;\n\n  constructor(\n      commitHandler: CommitHandler<T>,\n      cancelHandler: CancelHandler<T>,\n      context: T,\n      blurHandler: BlurHandler = () => true,\n  ) {\n    this.commitHandler = commitHandler;\n    this.cancelHandler = cancelHandler;\n    this.context = context;\n    this.blurHandler = blurHandler;\n  }\n\n  setPostKeydownFinishHandler(postKeydownFinishHandler: EventHandler): void {\n    this.postKeydownFinishHandler = postKeydownFinishHandler;\n  }\n}\n\nexport type EventHandler = (event: Event) => string|undefined;\n\nexport interface Controller {\n  cancel: () => void;\n  commit: () => void;\n}\n\nexport interface EditingContext<T> {\n  element: Element;\n  config: Config<T>;\n  oldRole: string|null;\n  oldText: string|null;\n  oldTabIndex: string|null;\n}\n", "// Copyright 2015 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n/* eslint-disable @devtools/no-imperative-dom-api */\n/* eslint-disable @devtools/no-lit-render-outside-of-view */\n\nimport './Toolbar.js';\n\nimport * as i18n from '../../core/i18n/i18n.js';\nimport * as Platform from '../../core/platform/platform.js';\nimport * as Buttons from '../../ui/components/buttons/buttons.js';\nimport {html, render} from '../lit/lit.js';\nimport * as VisualLogging from '../visual_logging/visual_logging.js';\n\nimport * as ARIAUtils from './ARIAUtils.js';\nimport listWidgetStyles from './listWidget.css.js';\nimport {Tooltip} from './Tooltip.js';\nimport {createInput, createTextButton, ElementFocusRestorer} from './UIUtils.js';\nimport {VBox} from './Widget.js';\n\nconst UIStrings = {\n  /**\n   * @description Text on a button to start editing text\n   */\n  editString: 'Edit',\n  /**\n   * @description Label for an item to remove something\n   */\n  removeString: 'Remove',\n  /**\n   * @description Text to save something\n   */\n  saveString: 'Save',\n  /**\n   * @description Text to add something\n   */\n  addString: 'Add',\n  /**\n   * @description Text to cancel something\n   */\n  cancelString: 'Cancel',\n  /**\n   * @description Text for screen reader to announce that an item has been saved.\n   */\n  changesSaved: 'Changes to item have been saved',\n  /**\n   * @description Text for screen reader to announce that an item has been removed.\n   */\n  removedItem: 'Item has been removed',\n} as const;\nconst str_ = i18n.i18n.registerUIStrings('ui/legacy/ListWidget.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\n\nexport class ListWidget<T> extends VBox {\n  private delegate: Delegate<T>;\n  private readonly list: HTMLElement;\n  private lastSeparator: boolean;\n  private focusRestorer: ElementFocusRestorer|null;\n  #items: T[];\n  private editable: boolean[];\n  private elements: HTMLElement[];\n  private editor: Editor<T>|null;\n  private editItem: T|null;\n  private editElement: HTMLElement|null;\n  private emptyPlaceholder: Element|null;\n  private isTable: boolean;\n  constructor(delegate: Delegate<T>, delegatesFocus = true, isTable = false) {\n    super({useShadowDom: true, delegatesFocus});\n    this.registerRequiredCSS(listWidgetStyles);\n    this.delegate = delegate;\n\n    this.list = this.contentElement.createChild('div', 'list');\n\n    this.lastSeparator = false;\n    this.focusRestorer = null;\n    this.#items = [];\n    this.editable = [];\n    this.elements = [];\n    this.editor = null;\n    this.editItem = null;\n    this.editElement = null;\n\n    this.emptyPlaceholder = null;\n\n    this.isTable = isTable;\n    if (isTable) {\n      this.list.role = 'table';\n    }\n\n    this.updatePlaceholder();\n  }\n\n  get items(): T[] {\n    return this.#items;\n  }\n\n  clear(): void {\n    this.#items = [];\n    this.editable = [];\n    this.elements = [];\n    this.lastSeparator = false;\n    this.list.removeChildren();\n    this.updatePlaceholder();\n    this.stopEditing();\n  }\n\n  updateItem(index: number, newItem: T, editable: boolean, focusable = true, controlLabels: {\n    edit?: string,\n    delete?: string,\n  } = {}): void {\n    if (index < 0 || index >= this.#items.length) {\n      this.appendItem(newItem, editable, focusable, controlLabels);\n      return;\n    }\n\n    this.#items[index] = newItem;\n    this.editable[index] = editable;\n    const element = this.elements[index];\n    const [content, controls] = element.children;\n    if (controls) {\n      element.removeChild(controls);\n    }\n    this.delegate.updateItem?.(content, newItem, editable, index);\n    element.classList.toggle('editable', editable);\n    if (editable) {\n      if (focusable) {\n        element.tabIndex = 0;\n      }\n      element.appendChild(this.createControls(newItem, element, controlLabels));\n    }\n  }\n\n  appendItem(item: T, editable: boolean, focusable = true, controlLabels: {edit?: string, delete?: string} = {}): void {\n    if (this.lastSeparator && this.#items.length) {\n      const element = document.createElement('div');\n      element.classList.add('list-separator');\n      if (this.isTable) {\n        element.role = 'rowgroup';\n      }\n      this.list.appendChild(element);\n    }\n    this.lastSeparator = false;\n\n    this.#items.push(item);\n    this.editable.push(editable);\n\n    const element = this.list.createChild('div', 'list-item');\n    if (this.isTable) {\n      element.role = 'rowgroup';\n    }\n    const content = this.delegate.renderItem(item, editable, this.#items.length - 1);\n    if (!content.hasAttribute('jslog')) {\n      element.setAttribute('jslog', `${VisualLogging.item()}`);\n    }\n    element.appendChild(content);\n    if (editable) {\n      element.classList.add('editable');\n      if (focusable) {\n        element.tabIndex = 0;\n      }\n      element.appendChild(this.createControls(item, element, controlLabels));\n    }\n    this.elements.push(element);\n    this.updatePlaceholder();\n  }\n\n  appendSeparator(): void {\n    this.lastSeparator = true;\n  }\n\n  removeItem(index: number): void {\n    if (this.editItem === this.#items[index]) {\n      this.stopEditing();\n    }\n\n    const element = this.elements[index];\n\n    const previous = element.previousElementSibling;\n    const previousIsSeparator = previous?.classList.contains('list-separator');\n\n    const next = element.nextElementSibling;\n    const nextIsSeparator = next?.classList.contains('list-separator');\n\n    if (previousIsSeparator && (nextIsSeparator || !next)) {\n      previous?.remove();\n    }\n    if (nextIsSeparator && !previous) {\n      next?.remove();\n    }\n    element.remove();\n\n    this.elements.splice(index, 1);\n    this.#items.splice(index, 1);\n    this.editable.splice(index, 1);\n    this.updatePlaceholder();\n  }\n\n  addNewItem(index: number, item: T): void {\n    this.startEditing(item, null, this.elements[index] || null);\n  }\n\n  setEmptyPlaceholder(element: Element|null): void {\n    this.emptyPlaceholder = element;\n    this.updatePlaceholder();\n  }\n\n  private createControls(item: T, element: HTMLElement, controlLabels: {edit?: string, delete?: string}): Element {\n    const controls = document.createElement('div');\n    controls.classList.add('controls-container');\n    controls.classList.add('fill');\n\n    // clang-format off\n    render(html`\n      <div class=\"controls-gradient\"></div>\n      <div class=\"controls-buttons\">\n        <devtools-toolbar>\n          <devtools-button class=toolbar-button\n                           .iconName=${'edit'}\n                           .jslogContext=${'edit-item'}\n                           .title=${controlLabels?.edit ?? i18nString(UIStrings.editString)}\n                           .variant=${Buttons.Button.Variant.ICON}\n                           @click=${onEditClicked}></devtools-button>\n          <devtools-button class=toolbar-button\n                           .iconName=${'bin'}\n                           .jslogContext=${'remove-item'}\n                           .title=${controlLabels?.delete ?? i18nString(UIStrings.removeString)}\n                           .variant=${Buttons.Button.Variant.ICON}\n                           @click=${onRemoveClicked}></devtools-button>\n        </devtools-toolbar>\n      </div>`, controls, {host: this});\n    // clang-format on\n\n    return controls;\n\n    function onEditClicked(this: ListWidget<T>): void {\n      const index = this.elements.indexOf(element);\n      const insertionPoint = this.elements[index + 1] || null;\n      this.startEditing(item, element, insertionPoint);\n    }\n\n    function onRemoveClicked(this: ListWidget<T>): void {\n      const index = this.elements.indexOf(element);\n      this.element.focus();\n      this.delegate.removeItemRequested(this.#items[index], index);\n      ARIAUtils.LiveAnnouncer.alert(i18nString(UIStrings.removedItem));\n      if (this.elements.length >= 1) {\n        // focus on the next item in the list, or the last item if we're removing the last item\n        (this.elements[Math.min(index, this.elements.length - 1)] as HTMLElement).focus();\n      }\n    }\n  }\n\n  override wasShown(): void {\n    super.wasShown();\n    this.stopEditing();\n  }\n\n  private updatePlaceholder(): void {\n    if (!this.emptyPlaceholder) {\n      return;\n    }\n\n    if (!this.elements.length && !this.editor) {\n      this.list.appendChild(this.emptyPlaceholder);\n    } else {\n      this.emptyPlaceholder.remove();\n    }\n  }\n\n  private startEditing(item: T, element: HTMLElement|null, insertionPoint: Element|null): void {\n    if (element && this.editElement === element) {\n      return;\n    }\n\n    this.stopEditing();\n    this.focusRestorer = new ElementFocusRestorer(this.element);\n\n    this.list.classList.add('list-editing');\n    this.element.classList.add('list-editing');\n    this.editItem = item;\n    this.editElement = element;\n    if (element) {\n      element.classList.add('hidden');\n    }\n\n    const index = element ? this.elements.indexOf(element) : -1;\n    this.editor = this.delegate.beginEdit(item);\n    this.updatePlaceholder();\n    this.list.insertBefore(this.editor.element, insertionPoint);\n    this.editor.beginEdit(\n        item, index, element ? i18nString(UIStrings.saveString) : i18nString(UIStrings.addString),\n        this.commitEditing.bind(this), this.stopEditing.bind(this));\n  }\n\n  private commitEditing(): void {\n    const editItem = this.editItem;\n    const isNew = !this.editElement;\n    const editor = (this.editor as Editor<T>);\n    // Focus on the current item or the new item after committing\n    const focusElementIndex = this.editElement ? this.elements.indexOf(this.editElement) : this.elements.length - 1;\n    this.stopEditing();\n    if (editItem !== null) {\n      this.delegate.commitEdit(editItem, editor, isNew);\n      ARIAUtils.LiveAnnouncer.alert(i18nString(UIStrings.changesSaved));\n      if (this.elements[focusElementIndex]) {\n        (this.elements[focusElementIndex] as HTMLElement).focus();\n      }\n    }\n  }\n\n  private stopEditing(): void {\n    this.list.classList.remove('list-editing');\n    this.element.classList.remove('list-editing');\n    if (this.focusRestorer) {\n      this.focusRestorer.restore();\n    }\n    if (this.editElement) {\n      this.editElement.classList.remove('hidden');\n    }\n    if (this.editor?.element.parentElement) {\n      this.editor.element.remove();\n    }\n\n    this.editor = null;\n    this.editItem = null;\n    this.editElement = null;\n    this.updatePlaceholder();\n  }\n}\n\nexport interface Delegate<T> {\n  updateItem?(content: Element, newItem: T, editable: boolean, index: number): void;\n  renderItem(item: T, editable: boolean, index: number): Element;\n  removeItemRequested(item: T, index: number): void;\n  beginEdit(item: T): Editor<T>;\n  commitEdit(item: T, editor: Editor<T>, isNew: boolean): void;\n}\n\nexport interface CustomEditorControl<T> extends HTMLElement {\n  value: T;\n  validate: () => ValidatorResult;\n}\n\nexport type EditorControl<T = string> = (HTMLInputElement|HTMLSelectElement|CustomEditorControl<T>);\n\nexport class Editor<T> {\n  element: HTMLDivElement;\n  readonly #contentElement: HTMLElement;\n  private commitButton: Buttons.Button.Button;\n  private readonly cancelButton: Buttons.Button.Button;\n  private errorMessageContainer: HTMLElement;\n  private readonly controls: EditorControl[] = [];\n  private readonly controlByName = new Map<string, EditorControl>();\n  private readonly validators: Array<(arg0: T, arg1: number, arg2: EditorControl) => ValidatorResult> = [];\n  private commit: (() => void)|null = null;\n  private cancel: (() => void)|null = null;\n  private item: T|null = null;\n  private index = -1;\n\n  constructor() {\n    this.element = document.createElement('div');\n    this.element.classList.add('editor-container');\n    this.element.setAttribute('jslog', `${VisualLogging.pane('editor').track({resize: true})}`);\n    this.element.addEventListener(\n        'keydown', onKeyDown.bind(null, Platform.KeyboardUtilities.isEscKey, this.cancelClicked.bind(this)), false);\n\n    this.#contentElement = this.element.createChild('div', 'editor-content');\n    this.#contentElement.addEventListener('keydown', onKeyDown.bind(null, event => {\n      if (event.key !== 'Enter') {\n        return false;\n      }\n      if (event.target instanceof HTMLSelectElement) {\n        // 'Enter' on <select> is supposed to open the drop down, so don't swallow that here.\n        return false;\n      }\n      return true;\n    }, this.commitClicked.bind(this)), false);\n\n    const buttonsRow = this.element.createChild('div', 'editor-buttons');\n    this.cancelButton = createTextButton(i18nString(UIStrings.cancelString), this.cancelClicked.bind(this), {\n      jslogContext: 'cancel',\n      variant: Buttons.Button.Variant.OUTLINED,\n    });\n    this.cancelButton.setAttribute('jslog', `${VisualLogging.action('cancel').track({click: true})}`);\n    buttonsRow.appendChild(this.cancelButton);\n    this.commitButton = createTextButton('', this.commitClicked.bind(this), {\n      jslogContext: 'commit',\n      variant: Buttons.Button.Variant.PRIMARY,\n    });\n    buttonsRow.appendChild(this.commitButton);\n\n    this.errorMessageContainer = this.element.createChild('div', 'list-widget-input-validation-error');\n    ARIAUtils.markAsAlert(this.errorMessageContainer);\n\n    function onKeyDown(predicate: (arg0: KeyboardEvent) => boolean, callback: () => void, event: KeyboardEvent): void {\n      if (predicate(event)) {\n        event.consume(true);\n        callback();\n      }\n    }\n  }\n\n  contentElement(): Element {\n    return this.#contentElement;\n  }\n\n  createInput(\n      name: string, type: string, title: string,\n      validator: (arg0: T, arg1: number, arg2: EditorControl) => ValidatorResult): HTMLInputElement {\n    const input = (createInput('', type));\n    input.placeholder = title;\n    input.addEventListener('input', this.validateControls.bind(this, false), false);\n    input.setAttribute('jslog', `${VisualLogging.textField().track({change: true, keydown: 'Enter'}).context(name)}`);\n    ARIAUtils.setLabel(input, title);\n    this.controlByName.set(name, input);\n    this.controls.push(input);\n    this.validators.push(validator);\n    return input;\n  }\n\n  createSelect(\n      name: string, options: string[], validator: (arg0: T, arg1: number, arg2: EditorControl) => ValidatorResult,\n      title?: string): HTMLSelectElement {\n    const select = document.createElement('select');\n    select.setAttribute('jslog', `${VisualLogging.dropDown().track({change: true}).context(name)}`);\n    for (let index = 0; index < options.length; ++index) {\n      const option = select.createChild('option');\n      option.value = options[index];\n      option.textContent = options[index];\n      option.setAttribute(\n          'jslog', `${VisualLogging.item(Platform.StringUtilities.toKebabCase(options[index])).track({click: true})}`);\n    }\n    if (title) {\n      Tooltip.install(select, title);\n      ARIAUtils.setLabel(select, title);\n    }\n    select.addEventListener('input', this.validateControls.bind(this, false), false);\n    select.addEventListener('blur', this.validateControls.bind(this, false), false);\n    this.controlByName.set(name, select);\n    this.controls.push(select);\n    this.validators.push(validator);\n    return select;\n  }\n\n  createCustomControl<S, U extends CustomEditorControl<S>>(\n      name: string, ctor: {new(): U},\n      validator: (arg0: T, arg1: number, arg2: EditorControl) => ValidatorResult): CustomEditorControl<S> {\n    const control = new ctor();\n    this.controlByName.set(name, control as unknown as CustomEditorControl<string>);\n    this.controls.push(control as unknown as CustomEditorControl<string>);\n    this.validators.push(validator);\n    return control;\n  }\n\n  control(name: string): EditorControl {\n    const control = this.controlByName.get(name);\n    if (!control) {\n      throw new Error(`Control with name ${name} does not exist, please verify.`);\n    }\n    return control;\n  }\n\n  private validateControls(forceValid: boolean): void {\n    let allValid = true;\n    this.errorMessageContainer.textContent = '';\n    for (let index = 0; index < this.controls.length; ++index) {\n      const input = this.controls[index];\n      const {valid, errorMessage} = this.validators[index].call(null, (this.item as T), this.index, input);\n\n      input.classList.toggle('error-input', !valid && !forceValid);\n      if (valid || forceValid) {\n        ARIAUtils.setInvalid(input, false);\n      } else {\n        ARIAUtils.setInvalid(input, true);\n      }\n\n      if (!forceValid && errorMessage) {\n        if (this.errorMessageContainer.textContent) {\n          const br = document.createElement('br');\n          this.errorMessageContainer.append(br);\n        }\n        this.errorMessageContainer.append(errorMessage);\n      }\n\n      allValid = allValid && valid;\n    }\n    this.commitButton.disabled = !allValid;\n  }\n\n  requestValidation(): void {\n    this.validateControls(false);\n  }\n\n  beginEdit(item: T, index: number, commitButtonTitle: string, commit: () => void, cancel: () => void): void {\n    this.commit = commit;\n    this.cancel = cancel;\n    this.item = item;\n    this.index = index;\n\n    this.commitButton.textContent = commitButtonTitle;\n    this.element.scrollIntoViewIfNeeded(false);\n    if (this.controls.length) {\n      this.controls[0].focus();\n    }\n    this.validateControls(true);\n  }\n\n  private commitClicked(): void {\n    if (this.commitButton.disabled) {\n      return;\n    }\n\n    const commit = this.commit;\n    this.commit = null;\n    this.cancel = null;\n    this.item = null;\n    this.index = -1;\n    if (commit) {\n      commit();\n    }\n  }\n\n  private cancelClicked(): void {\n    const cancel = this.cancel;\n    this.commit = null;\n    this.cancel = null;\n    this.item = null;\n    this.index = -1;\n    if (cancel) {\n      cancel();\n    }\n  }\n}\nexport interface ValidatorResult {\n  valid: boolean;\n  errorMessage?: string;\n}\n", "// Copyright 2025 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n// IMPORTANT: this file is auto generated. Please do not edit this file.\n/* istanbul ignore file */\nexport default `/*\n * Copyright 2015 The Chromium Authors\n * Use of this source code is governed by a BSD-style license that can be\n * found in the LICENSE file.\n */\n\n.list {\n  flex: auto 0 1;\n  overflow-y: auto;\n  flex-direction: column;\n\n  --override-background-list-item-color: hsl(0deg 0% 96%);\n\n  &:has(div) {\n    border: var(--sys-size-1) solid var(--sys-color-divider);\n  }\n}\n\n.theme-with-dark-background .list,\n:host-context(.theme-with-dark-background) .list {\n  --override-background-list-item-color: hsl(0deg 0% 16%);\n}\n\n.list-separator {\n  background: var(--sys-color-divider);\n  height: 1px;\n}\n\n.list-item {\n  flex: none;\n  min-height: 30px;\n  display: flex;\n  align-items: center;\n  position: relative;\n  overflow: hidden;\n}\n\n.list-item:focus-within:not(:active) {\n  background: var(--sys-color-state-hover-on-subtle);\n}\n\n.list-widget-input-validation-error {\n  color: var(--sys-color-error);\n  margin: 0 5px;\n}\n\n.controls-container {\n  display: flex;\n  flex-direction: row;\n  justify-content: flex-end;\n  align-items: stretch;\n  pointer-events: none;\n}\n\n.controls-gradient {\n  flex: 0 1 50px;\n\n  .list-item:hover & {\n    background-image: linear-gradient(90deg, transparent, var(--sys-color-cdt-base-container));\n  }\n\n  .list-item:focus-within:not(:active) & {\n    background-image: linear-gradient(90deg, transparent, var(--override-background-list-item-color));\n  }\n}\n\n.controls-buttons {\n  flex: none;\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  pointer-events: auto;\n  visibility: hidden;\n  background-color: var(--sys-color-cdt-base-container);\n\n  .list-item:hover & {\n    visibility: visible;\n  }\n\n  .list-item:focus-within:not(:active) & {\n    background-color: var(--override-background-list-item-color);\n    visibility: visible;\n  }\n}\n\n.editor-container {\n  display: flex;\n  flex-direction: column;\n  align-items: stretch;\n  flex: none;\n  background: var(--sys-color-surface3);\n  overflow: hidden;\n}\n\n.editor-content {\n  flex: auto;\n  display: flex;\n  flex-direction: column;\n  align-items: stretch;\n}\n\n.editor-buttons {\n  flex: none;\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  justify-content: flex-start;\n  padding: 5px;\n  gap: var(--sys-size-6);\n}\n\n.editor-buttons > button {\n  flex: none;\n  margin-right: 10px;\n}\n\n.editor-content input {\n  margin-right: 10px;\n}\n\n.editor-content input.error-input {\n  background-color: var(--sys-color-cdt-base-container);\n}\n\n.text-prompt-container {\n  padding: 3px 6px;\n  height: 24px;\n  border: none;\n  box-shadow: var(--legacy-focus-ring-inactive-shadow);\n  border-radius: 2px;\n  width: 100%;\n  background-color: var(--sys-color-cdt-base-container);\n\n  &:focus {\n    border: 1px solid var(--sys-color-state-focus-ring);\n  }\n\n  & .text-prompt {\n    width: 100%;\n  }\n}\n\n@media (forced-colors: active) {\n  .list-item:focus-within .controls-buttons,\n  .list-item:hover .controls-buttons {\n    background-color: canvas;\n  }\n\n  .list-item:focus-within,\n  .list-item:hover {\n    forced-color-adjust: none;\n    background: Highlight;\n  }\n\n  .list-item:focus-within *,\n  .list-item:hover * {\n    color: HighlightText;\n  }\n\n  .list-item:focus-within .controls-gradient,\n  .list-item:hover .controls-gradient {\n    background-image: unset;\n  }\n}\n\n/*# sourceURL=${import.meta.resolve('./listWidget.css')} */`;", "// Copyright 2021 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n/* eslint-disable @devtools/no-imperative-dom-api */\n\n/*\n * Copyright (C) 2007, 2008 Apple Inc.  All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions\n * are met:\n *\n * 1.  Redistributions of source code must retain the above copyright\n *     notice, this list of conditions and the following disclaimer.\n * 2.  Redistributions in binary form must reproduce the above copyright\n *     notice, this list of conditions and the following disclaimer in the\n *     documentation and/or other materials provided with the distribution.\n * 3.  Neither the name of Apple Computer, Inc. (\"Apple\") nor the names of\n *     its contributors may be used to endorse or promote products derived\n *     from this software without specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY APPLE AND ITS CONTRIBUTORS \"AS IS\" AND ANY\n * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL APPLE OR ITS CONTRIBUTORS BE LIABLE FOR ANY\n * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF\n * THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\nimport * as VisualLogging from '../../ui/visual_logging/visual_logging.js';\n\nimport type {SearchableView} from './SearchableView.js';\nimport {SplitWidget} from './SplitWidget.js';\nimport {VBox} from './Widget.js';\n\nexport class Panel extends VBox {\n  protected panelName: string;\n\n  constructor(name: string, useShadowDom?: boolean) {\n    super({useShadowDom});\n\n    this.element.setAttribute('jslog', `${VisualLogging.panel().context(name).track({resize: true})}`);\n    this.element.classList.add('panel');\n    this.element.setAttribute('aria-label', name);\n    this.element.classList.add(name);\n    this.panelName = name;\n\n    // @ts-expect-error: Legacy global. Requires rewriting tests to get rid of.\n    // For testing.\n    self.UI = self.UI || {};\n    // @ts-expect-error\n    self.UI.panels = self.UI.panels || {};\n    // @ts-expect-error\n    UI.panels[name] = this;\n  }\n\n  get name(): string {\n    return this.panelName;\n  }\n\n  searchableView(): SearchableView|null {\n    return null;\n  }\n\n  override elementsToRestoreScrollPositionsFor(): Element[] {\n    return [];\n  }\n}\n\nexport class PanelWithSidebar extends Panel {\n  private readonly panelSplitWidget: SplitWidget;\n  private readonly mainWidget: VBox;\n  private readonly sidebarWidget: VBox;\n\n  constructor(name: string, defaultWidth?: number) {\n    super(name);\n\n    this.panelSplitWidget =\n        new SplitWidget(true, false, this.panelName + '-panel-split-view-state', defaultWidth || 200);\n    this.panelSplitWidget.show(this.element);\n\n    this.mainWidget = new VBox();\n    this.panelSplitWidget.setMainWidget(this.mainWidget);\n\n    this.sidebarWidget = new VBox();\n    this.sidebarWidget.setMinimumSize(100, 25);\n    this.panelSplitWidget.setSidebarWidget(this.sidebarWidget);\n\n    this.sidebarWidget.element.classList.add('panel-sidebar');\n    this.sidebarWidget.element.setAttribute('jslog', `${VisualLogging.pane('sidebar').track({resize: true})}`);\n  }\n\n  panelSidebarElement(): Element {\n    return this.sidebarWidget.element;\n  }\n\n  mainElement(): Element {\n    return this.mainWidget.element;\n  }\n\n  splitWidget(): SplitWidget {\n    return this.panelSplitWidget;\n  }\n}\n", "// Copyright 2009 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as VisualLogging from '../visual_logging/visual_logging.js';\n\nimport {GlassPane, MarginBehavior, SizeBehavior} from './GlassPane.js';\nimport popoverStyles from './popover.css.js';\n\nexport class PopoverHelper {\n  static createPopover = (jslogContext?: string): GlassPane => {\n    const popover = new GlassPane(`${VisualLogging.popover(jslogContext).parent('mapped')}`);\n    popover.registerRequiredCSS(popoverStyles);\n    popover.setSizeBehavior(SizeBehavior.MEASURE_CONTENT);\n    popover.setMarginBehavior(MarginBehavior.DEFAULT_MARGIN);\n    return popover;\n  };\n  private disableOnClick: boolean;\n  private getRequest: (arg0: MouseEvent|KeyboardEvent) => PopoverRequest | null;\n  private scheduledRequest: PopoverRequest|null;\n  private hidePopoverCallback: (() => void)|null;\n  readonly container: HTMLElement;\n  private showTimeout: number;\n  private hideTimeout: number;\n  private hidePopoverTimer: number|null;\n  private showPopoverTimer: number|null;\n  private readonly boundMouseDown: (event: MouseEvent) => void;\n  private readonly boundMouseMove: (ev: MouseEvent) => void;\n  private readonly boundMouseOut: (event: MouseEvent) => void;\n  private readonly boundKeyUp: (ev: KeyboardEvent) => void;\n  jslogContext?: string;\n  constructor(\n      container: HTMLElement, getRequest: (arg0: MouseEvent|KeyboardEvent) => PopoverRequest | null,\n      jslogContext?: string) {\n    this.disableOnClick = false;\n    this.getRequest = getRequest;\n    this.jslogContext = jslogContext;\n    this.scheduledRequest = null;\n    this.hidePopoverCallback = null;\n    this.container = container;\n    this.showTimeout = 0;\n    this.hideTimeout = 0;\n    this.hidePopoverTimer = null;\n    this.showPopoverTimer = null;\n    this.boundMouseDown = this.mouseDown.bind(this);\n    this.boundMouseMove = this.mouseMove.bind(this);\n    this.boundMouseOut = this.mouseOut.bind(this);\n    this.boundKeyUp = this.keyUp.bind(this);\n    this.container.addEventListener('mousedown', this.boundMouseDown, false);\n    this.container.addEventListener('mousemove', this.boundMouseMove, false);\n    this.container.addEventListener('mouseout', this.boundMouseOut, false);\n    this.container.addEventListener('keyup', this.boundKeyUp, false);\n    this.setTimeout(1000);\n  }\n\n  setTimeout(showTimeout: number, hideTimeout?: number): void {\n    this.showTimeout = showTimeout;\n    this.hideTimeout = typeof hideTimeout === 'number' ? hideTimeout : showTimeout / 2;\n  }\n\n  setDisableOnClick(disableOnClick: boolean): void {\n    this.disableOnClick = disableOnClick;\n  }\n\n  private eventInScheduledContent(event: MouseEvent): boolean {\n    return this.scheduledRequest ? this.scheduledRequest.box.contains(event.clientX, event.clientY) : false;\n  }\n\n  private mouseDown(event: MouseEvent): void {\n    if (this.disableOnClick) {\n      this.hidePopover();\n      return;\n    }\n    if (this.eventInScheduledContent(event)) {\n      return;\n    }\n\n    this.startHidePopoverTimer(0);\n    this.stopShowPopoverTimer();\n    this.startShowPopoverTimer(event, 0);\n  }\n\n  private keyUp(event: KeyboardEvent): void {\n    if (event.altKey && event.key === 'ArrowDown') {\n      if (this.isPopoverVisible()) {\n        this.hidePopover();\n      } else {\n        this.stopShowPopoverTimer();\n        this.startHidePopoverTimer(0);\n        this.startShowPopoverTimer(event, 0);\n      }\n      event.stopPropagation();\n    } else if (event.key === 'Escape' && this.isPopoverVisible()) {\n      this.hidePopover();\n      event.stopPropagation();\n    }\n  }\n\n  private mouseMove(event: MouseEvent): void {\n    if (this.eventInScheduledContent(event)) {\n      // Reschedule showing popover since mouse moved and\n      // we only want to show the popover when the mouse is\n      // standing still on the container for some amount of time.\n      this.stopShowPopoverTimer();\n      this.startShowPopoverTimer(event, this.isPopoverVisible() ? this.showTimeout * 0.6 : this.showTimeout);\n      return;\n    }\n\n    this.startHidePopoverTimer(this.hideTimeout);\n    this.stopShowPopoverTimer();\n    if (event.buttons && this.disableOnClick) {\n      return;\n    }\n    this.startShowPopoverTimer(event, this.isPopoverVisible() ? this.showTimeout * 0.6 : this.showTimeout);\n  }\n\n  private popoverMouseMove(_event: Event): void {\n    this.stopHidePopoverTimer();\n  }\n\n  private popoverMouseOut(popover: GlassPane, event: MouseEvent): void {\n    if (!popover.isShowing()) {\n      return;\n    }\n    const node = (event.relatedTarget as Node | null);\n    if (node && !node.isSelfOrDescendant(popover.contentElement)) {\n      this.startHidePopoverTimer(this.hideTimeout);\n    }\n  }\n\n  private mouseOut(event: MouseEvent): void {\n    if (!this.isPopoverVisible()) {\n      return;\n    }\n    if (!this.eventInScheduledContent(event)) {\n      this.startHidePopoverTimer(this.hideTimeout);\n    }\n  }\n\n  private startHidePopoverTimer(timeout: number): void {\n    // User has |timeout| ms to reach the popup.\n    if (!this.hidePopoverCallback || this.hidePopoverTimer) {\n      return;\n    }\n\n    this.hidePopoverTimer = window.setTimeout(() => {\n      this.#hidePopover();\n      this.hidePopoverTimer = null;\n    }, timeout);\n  }\n\n  private startShowPopoverTimer(event: MouseEvent|KeyboardEvent, timeout: number): void {\n    this.scheduledRequest = this.getRequest.call(null, event);\n    if (!this.scheduledRequest) {\n      return;\n    }\n\n    this.showPopoverTimer = window.setTimeout(() => {\n      this.showPopoverTimer = null;\n      this.stopHidePopoverTimer();\n      this.#hidePopover();\n      const document = ((event.target as Node).ownerDocument) as Document;\n      this.showPopover(document);\n    }, timeout);\n  }\n\n  private stopShowPopoverTimer(): void {\n    if (!this.showPopoverTimer) {\n      return;\n    }\n    clearTimeout(this.showPopoverTimer);\n    this.showPopoverTimer = null;\n  }\n\n  isPopoverVisible(): boolean {\n    return Boolean(this.hidePopoverCallback);\n  }\n\n  hidePopover(): void {\n    this.stopShowPopoverTimer();\n    this.#hidePopover();\n  }\n\n  #hidePopover(): void {\n    if (!this.hidePopoverCallback) {\n      return;\n    }\n    this.hidePopoverCallback.call(null);\n    this.hidePopoverCallback = null;\n  }\n\n  private showPopover(document: Document): void {\n    const popover = PopoverHelper.createPopover(this.jslogContext);\n    const request = this.scheduledRequest;\n    if (!request) {\n      return;\n    }\n    void request.show.call(null, popover).then(success => {\n      if (!success) {\n        return;\n      }\n\n      if (this.scheduledRequest !== request) {\n        if (request.hide) {\n          request.hide.call(null);\n        }\n        return;\n      }\n\n      // This should not happen, but we hide previous popover to be on the safe side.\n      if (popoverHelperInstance) {\n        popoverHelperInstance.hidePopover();\n      }\n      popoverHelperInstance = this;\n\n      VisualLogging.setMappedParent(popover.contentElement, this.container);\n      popover.contentElement.style.scrollbarGutter = 'stable';\n      popover.contentElement.addEventListener('mousemove', this.popoverMouseMove.bind(this), true);\n      popover.contentElement.addEventListener('mouseout', this.popoverMouseOut.bind(this, popover), true);\n      popover.setContentAnchorBox(request.box);\n      popover.show(document);\n\n      this.hidePopoverCallback = () => {\n        if (request.hide) {\n          request.hide.call(null);\n        }\n        popover.hide();\n        popoverHelperInstance = null;\n      };\n    });\n  }\n\n  private stopHidePopoverTimer(): void {\n    if (!this.hidePopoverTimer) {\n      return;\n    }\n    clearTimeout(this.hidePopoverTimer);\n    this.hidePopoverTimer = null;\n\n    // We know that we reached the popup, but we might have moved over other elements.\n    // Discard pending command.\n    this.stopShowPopoverTimer();\n  }\n\n  dispose(): void {\n    this.container.removeEventListener('mousedown', this.boundMouseDown, false);\n    this.container.removeEventListener('mousemove', this.boundMouseMove, false);\n    this.container.removeEventListener('mouseout', this.boundMouseOut, false);\n  }\n}\n\nlet popoverHelperInstance: PopoverHelper|null = null;\nexport interface PopoverRequest {\n  box: AnchorBox;\n  show: (arg0: GlassPane) => Promise<boolean>;\n  hide?: (() => void);\n}\n", "// Copyright 2025 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n// IMPORTANT: this file is auto generated. Please do not edit this file.\n/* istanbul ignore file */\nexport default `/*\n * Copyright 2017 The Chromium Authors\n * Use of this source code is governed by a BSD-style license that can be\n * found in the LICENSE file.\n */\n@scope to (.widget > *) {\n  .widget {\n    display: flex;\n    font: var(--sys-typescale-body4-regular);\n    box-shadow: var(--sys-elevation-level2);\n    color: var(--sys-color-on-surface);\n    background-color: var(--sys-color-base-container-elevated);\n    border-radius: var(--sys-shape-corner-small);\n    padding: var(--sys-size-4);\n    user-select: text;\n    overflow: auto;\n  }\n}\n\n.squiggles-content {\n  display: flex;\n  flex-direction: column;\n  gap: 5px;\n}\n\n.squiggles-content-item {\n  display: flex;\n  align-items: center;\n  gap: 5px;\n\n  & devtools-icon {\n    cursor: pointer;\n  }\n}\n\n/*# sourceURL=${import.meta.resolve('./popover.css')} */`;", "// Copyright 2012 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport type * as Common from '../../core/common/common.js';\n\nimport progressIndicatorStyles from './progressIndicator.css.js';\nimport {createShadowRootWithCoreStyles} from './UIUtils.js';\n\nexport class ProgressIndicator extends HTMLElement implements Common.Progress.Progress {\n  readonly #shadowRoot: ShadowRoot;\n  readonly #contentElement: Element;\n  #labelElement: Element;\n  #progressElement: HTMLProgressElement;\n  #stopButton?: Element;\n  #isCanceled = false;\n  #worked = 0;\n  #isDone = false;\n\n  constructor() {\n    super();\n    this.#shadowRoot = createShadowRootWithCoreStyles(this, {cssFile: progressIndicatorStyles});\n    this.#contentElement = this.#shadowRoot.createChild('div', 'progress-indicator-shadow-container');\n\n    this.#labelElement = this.#contentElement.createChild('div', 'title');\n    this.#progressElement = this.#contentElement.createChild('progress');\n    this.#progressElement.value = 0;\n  }\n\n  connectedCallback(): void {\n    this.classList.add('progress-indicator');\n    // By default we show the stop button, but this can be controlled by\n    // using the 'no-stop-button' attribute on the element.\n    if (!this.hasAttribute('no-stop-button')) {\n      this.#stopButton = this.#contentElement.createChild('button', 'progress-indicator-shadow-stop-button');\n      this.#stopButton.addEventListener('click', () => {\n        this.canceled = true;\n      });\n    }\n  }\n\n  set done(done: boolean) {\n    if (this.#isDone === done) {\n      return;\n    }\n    this.#isDone = done;\n    if (done) {\n      this.remove();\n    }\n  }\n\n  get done(): boolean {\n    return this.#isDone;\n  }\n\n  set canceled(value: boolean) {\n    this.#isCanceled = value;\n  }\n\n  get canceled(): boolean {\n    return this.#isCanceled;\n  }\n\n  override set title(title: string) {\n    this.#labelElement.textContent = title;\n  }\n\n  override get title(): string {\n    return this.#labelElement.textContent ?? '';\n  }\n\n  set totalWork(totalWork: number) {\n    this.#progressElement.max = totalWork;\n  }\n\n  get totalWork(): number {\n    return this.#progressElement.max;\n  }\n\n  set worked(worked: number) {\n    this.#worked = worked;\n    this.#progressElement.value = worked;\n  }\n\n  get worked(): number {\n    return this.#worked;\n  }\n}\n\ncustomElements.define('devtools-progress', ProgressIndicator);\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    'devtools-progress': ProgressIndicator;\n  }\n}\n", "// Copyright 2025 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n// IMPORTANT: this file is auto generated. Please do not edit this file.\n/* istanbul ignore file */\nexport default `/*\n * Copyright 2014 The Chromium Authors\n * Use of this source code is governed by a BSD-style license that can be\n * found in the LICENSE file.\n */\n\n.progress-indicator-shadow-stop-button {\n  background-color: var(--sys-color-error-bright);\n  border: 0;\n  width: 10px;\n  height: 12px;\n  border-radius: 2px;\n}\n\n.progress-indicator-shadow-container {\n  display: flex;\n  flex: 1 0 auto;\n  align-items: center;\n}\n\n.progress-indicator-shadow-container .title {\n  text-overflow: ellipsis;\n  overflow: hidden;\n  max-width: 150px;\n  margin-right: 2px;\n  color: var(--sys-color-token-subtle);\n}\n\n.progress-indicator-shadow-container progress {\n  flex: auto;\n  margin: 0 2px;\n  width: 100px;\n}\n\n/*# sourceURL=${import.meta.resolve('./progressIndicator.css')} */`;", "// Copyright 2018 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as i18n from '../../core/i18n/i18n.js';\nimport * as Buttons from '../../ui/components/buttons/buttons.js';\nimport {html, render} from '../../ui/lit/lit.js';\n\nimport {Dialog} from './Dialog.js';\nimport {SizeBehavior} from './GlassPane.js';\nimport remoteDebuggingTerminatedScreenStyles from './remoteDebuggingTerminatedScreen.css.js';\nimport {VBox} from './Widget.js';\n\nconst UIStrings = {\n  /**\n   * @description Text in a dialog box in DevTools stating that remote debugging has been terminated.\n   * \"Remote debugging\" here means that DevTools on a PC is inspecting a website running on an actual mobile device\n   * (see https://developer.chrome.com/docs/devtools/remote-debugging/).\n   */\n  debuggingConnectionWasClosed: 'Debugging connection was closed',\n  /**\n   * @description Text in a dialog box in DevTools stating the reason for remote debugging being terminated.\n   * @example {target_closed} PH1\n   */\n  connectionClosedReason: 'Reason: {PH1}.',\n  /**\n   * @description Text in a dialog box showing how to reconnect to DevTools when remote debugging has been terminated.\n   * \"Remote debugging\" here means that DevTools on a PC is inspecting a website running on an actual mobile device\n   * (see https://developer.chrome.com/docs/devtools/remote-debugging/).\n   * \"Reconnect when ready\", refers to the state of the mobile device. The developer first has to put the mobile\n   * device back in a state where it can be inspected, before DevTools can reconnect to it.\n   */\n  reconnectWhenReadyByReopening: 'Reconnect when ready by reopening DevTools.',\n  /**\n   * @description Text on a button to reconnect Devtools when remote debugging terminated.\n   * \"Remote debugging\" here means that DevTools on a PC is inspecting a website running on an actual mobile device\n   * (see https://developer.chrome.com/docs/devtools/remote-debugging/).\n   */\n  reconnectDevtools: 'Reconnect `DevTools`',\n} as const;\nconst str_ = i18n.i18n.registerUIStrings('ui/legacy/RemoteDebuggingTerminatedScreen.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\n\ninterface ViewInput {\n  reason: string;\n  onReconnect: () => void;\n}\n\ntype View = (input: ViewInput, output: object, target: HTMLElement) => void;\n\nexport const DEFAULT_VIEW: View = (input, _output, target) => {\n  // clang-format off\n  render(html`\n    <style>${remoteDebuggingTerminatedScreenStyles}</style>\n    <div class=\"header\">${i18nString(UIStrings.debuggingConnectionWasClosed)}</div>\n    <div class=\"content\">\n      <div class=\"reason\">${i18nString(UIStrings.connectionClosedReason, {PH1: input.reason})}</div>\n      <div class=\"message\">${i18nString(UIStrings.reconnectWhenReadyByReopening)}</div>\n    </div>\n    <div class=\"button-container\">\n      <div class=\"button\">\n        <devtools-button @click=${input.onReconnect} .jslogContext=${'reconnect'}\n            .variant=${Buttons.Button.Variant.OUTLINED}>${i18nString(UIStrings.reconnectDevtools)}</devtools-button>\n      </div>\n    </div>`,\n    target);\n  // clang-format on\n};\n\nexport class RemoteDebuggingTerminatedScreen extends VBox {\n  constructor(reason: string, view: View = DEFAULT_VIEW) {\n    super({useShadowDom: true});\n    const input = {\n      reason,\n      onReconnect: () => {\n        window.location.reload();\n      },\n    };\n    view(input, {}, this.contentElement);\n  }\n\n  static show(reason: string): void {\n    const dialog = new Dialog('remote-debnugging-terminated');\n    dialog.setSizeBehavior(SizeBehavior.MEASURE_CONTENT);\n    dialog.addCloseButton();\n    dialog.setDimmed(true);\n    new RemoteDebuggingTerminatedScreen(reason).show(dialog.contentElement);\n    dialog.show();\n  }\n}\n", "// Copyright 2025 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n// IMPORTANT: this file is auto generated. Please do not edit this file.\n/* istanbul ignore file */\nexport default `/*\n * Copyright 2015 The Chromium Authors\n * Use of this source code is governed by a BSD-style license that can be\n * found in the LICENSE file.\n */\n@scope to (devtools-widget > *) {\n  .header {\n    padding-top: var(--sys-size-3);\n    margin: var(--sys-size-5) var(--sys-size-5) var(--sys-size-5) var(--sys-size-8);\n    font: var(--sys-typescale-body2-medium);\n  }\n\n  .close-button {\n    margin: var(--sys-size-3);\n  }\n\n  .content {\n    margin: 0 var(--sys-size-8);\n  }\n\n  .button-container {\n    margin: var(--sys-size-6) var(--sys-size-8) var(--sys-size-8) var(--sys-size-8);\n  }\n\n  .reason {\n    color: var(--sys-color-error);\n  }\n}\n\n/*# sourceURL=${import.meta.resolve('./remoteDebuggingTerminatedScreen.css')} */`;", "// Copyright 2016 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n/* eslint-disable @devtools/no-imperative-dom-api */\n\nimport './Toolbar.js';\n\nimport type * as Buttons from '../components/buttons/buttons.js';\nimport * as VisualLogging from '../visual_logging/visual_logging.js';\n\nimport * as ARIAUtils from './ARIAUtils.js';\nimport reportViewStyles from './reportView.css.js';\nimport type {Toolbar} from './Toolbar.js';\nimport {Tooltip} from './Tooltip.js';\nimport {VBox} from './Widget.js';\n\n/**\n * @deprecated Please consider using the web component version of this widget\n *             (`ui/components/report_view/ReportView.ts`) for new code.\n */\nexport class ReportView extends VBox {\n  private readonly contentBox: HTMLElement;\n  private headerElement: HTMLElement;\n  private titleElement: HTMLElement;\n  private readonly sectionList: HTMLElement;\n  private subtitleElement?: HTMLElement;\n  private urlElement?: HTMLElement;\n  constructor(title?: string) {\n    super({useShadowDom: true});\n    this.registerRequiredCSS(reportViewStyles);\n\n    this.contentBox = this.contentElement.createChild('div', 'report-content-box');\n    this.headerElement = this.contentBox.createChild('div', 'report-header vbox');\n    this.titleElement = this.headerElement.createChild('div', 'report-title');\n    if (title) {\n      this.titleElement.textContent = title;\n    } else {\n      this.headerElement.classList.add('hidden');\n    }\n    ARIAUtils.markAsHeading(this.titleElement, 1);\n\n    this.sectionList = this.contentBox.createChild('div', 'vbox');\n  }\n\n  getHeaderElement(): Element {\n    return this.headerElement;\n  }\n\n  setTitle(title: string): void {\n    if (this.titleElement.textContent === title) {\n      return;\n    }\n    this.titleElement.textContent = title;\n    this.headerElement.classList.toggle('hidden', Boolean(title));\n  }\n\n  setSubtitle(subtitle: string): void {\n    if (this.subtitleElement?.textContent === subtitle) {\n      return;\n    }\n    if (!this.subtitleElement) {\n      this.subtitleElement = this.headerElement.createChild('div', 'report-subtitle');\n    }\n    this.subtitleElement.textContent = subtitle;\n  }\n\n  setURL(link: Element|null): void {\n    if (!this.urlElement) {\n      this.urlElement = this.headerElement.createChild('div', 'report-url link');\n    }\n    this.urlElement.removeChildren();\n    if (link) {\n      this.urlElement.appendChild(link);\n    }\n    this.urlElement.setAttribute('jslog', `${VisualLogging.link('source-location').track({click: true})}`);\n  }\n\n  createToolbar(): Toolbar {\n    return this.headerElement.createChild('devtools-toolbar');\n  }\n\n  appendSection(title: string, className?: string, jslogContext?: string): Section {\n    const section = new Section(title, className, jslogContext);\n    section.show(this.sectionList);\n    return section;\n  }\n\n  sortSections(comparator: (arg0: Section, arg1: Section) => number): void {\n    const sections = (this.children().slice() as Section[]);\n    const sorted = sections.every((_, i, a) => !i || comparator(a[i - 1], a[i]) <= 0);\n    if (sorted) {\n      return;\n    }\n\n    this.detachChildWidgets();\n    sections.sort(comparator);\n    for (const section of sections) {\n      section.show(this.sectionList);\n    }\n  }\n\n  setHeaderVisible(visible: boolean): void {\n    this.headerElement.classList.toggle('hidden', !visible);\n  }\n\n  setBodyScrollable(scrollable: boolean): void {\n    this.contentBox.classList.toggle('no-scroll', !scrollable);\n  }\n}\n\nexport class Section extends VBox {\n  private readonly headerElement: HTMLElement;\n  private headerButtons: Buttons.Button.Button[] = [];\n  private titleElement: HTMLElement;\n  private fieldList: HTMLElement;\n  private readonly fieldMap = new Map<string, Element>();\n  constructor(title: string, className?: string, public jslogContext?: string) {\n    super();\n    this.element.classList.add('report-section');\n    if (className) {\n      this.element.classList.add(className);\n    }\n    if (jslogContext) {\n      this.element.setAttribute('jslog', `${VisualLogging.section(jslogContext)}`);\n    }\n    this.jslogContext = jslogContext;\n    this.headerElement = this.element.createChild('div', 'report-section-header');\n    this.titleElement = this.headerElement.createChild('div', 'report-section-title');\n    this.setTitle(title);\n    ARIAUtils.markAsHeading(this.titleElement, 2);\n    this.fieldList = this.element.createChild('div', 'vbox');\n  }\n\n  title(): string {\n    return this.titleElement.textContent || '';\n  }\n\n  getTitleElement(): Element {\n    return this.titleElement;\n  }\n\n  getFieldElement(): HTMLElement {\n    return this.fieldList;\n  }\n  appendFieldWithCustomView(customElement: HTMLElement): void {\n    this.fieldList.append(customElement);\n  }\n\n  setTitle(title: string, tooltip?: string): void {\n    if (this.titleElement.textContent !== title) {\n      this.titleElement.textContent = title;\n    }\n    Tooltip.install(this.titleElement, tooltip || '');\n    this.titleElement.classList.toggle('hidden', !this.titleElement.textContent);\n  }\n\n  /**\n   * Declares the overall container to be a group and assigns a title.\n   */\n  setUiGroupTitle(groupTitle: string): void {\n    ARIAUtils.markAsGroup(this.element);\n    ARIAUtils.setLabel(this.element, groupTitle);\n  }\n\n  appendButtonToHeader(button: Buttons.Button.Button): void {\n    this.headerButtons.push(button);\n    this.headerElement.appendChild(button);\n  }\n\n  setHeaderButtonsState(disabled: boolean): void {\n    this.headerButtons.map(button => {\n      button.disabled = disabled;\n    });\n  }\n\n  appendField(title: string, textValue?: string): HTMLElement {\n    let row = this.fieldMap.get(title);\n    if (!row) {\n      row = this.fieldList.createChild('div', 'report-field');\n      row.createChild('div', 'report-field-name').textContent = title;\n      this.fieldMap.set(title, row);\n      row.createChild('div', 'report-field-value');\n    }\n    if (textValue && row.lastElementChild) {\n      row.lastElementChild.textContent = textValue;\n    }\n    return row.lastElementChild as HTMLElement;\n  }\n\n  appendFlexedField(title: string, textValue?: string): HTMLElement {\n    const field = this.appendField(title, textValue);\n    field.classList.add('report-field-value-is-flexed');\n    return field;\n  }\n\n  removeField(title: string): void {\n    const row = this.fieldMap.get(title);\n    if (row) {\n      row.remove();\n    }\n    this.fieldMap.delete(title);\n  }\n\n  setFieldVisible(title: string, visible: boolean): void {\n    const row = this.fieldMap.get(title);\n    if (row) {\n      row.classList.toggle('hidden', !visible);\n    }\n  }\n\n  fieldValue(title: string): Element|null {\n    const row = this.fieldMap.get(title);\n    return row ? row.lastElementChild : null;\n  }\n\n  appendRow(): HTMLElement {\n    return this.fieldList.createChild('div', 'report-row');\n  }\n\n  appendSelectableRow(): HTMLElement {\n    return this.fieldList.createChild('div', 'report-row report-row-selectable');\n  }\n\n  clearContent(): void {\n    this.fieldList.removeChildren();\n    this.fieldMap.clear();\n  }\n\n  markFieldListAsGroup(): void {\n    ARIAUtils.markAsGroup(this.fieldList);\n    ARIAUtils.setLabel(this.fieldList, this.title());\n  }\n}\n", "// Copyright 2025 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n// IMPORTANT: this file is auto generated. Please do not edit this file.\n/* istanbul ignore file */\nexport default `/*\n * Copyright 2016 The Chromium Authors\n * Use of this source code is governed by a BSD-style license that can be\n * found in the LICENSE file.\n */\n\n:host {\n  background-color: var(--sys-color-cdt-base-container);\n}\n\n.report-content-box {\n  background-color: var(--sys-color-cdt-base-container);\n  overflow: auto;\n}\n\n.report-content-box.no-scroll {\n  overflow: visible;\n}\n\n.report-header {\n  border-bottom: 1px solid var(--sys-color-divider);\n  padding: var(--sys-size-7) var(--sys-size-9);\n}\n\n.report-header devtools-toolbar {\n  margin-bottom: -8px;\n  margin-top: 5px;\n  margin-left: -8px;\n}\n\n.report-title {\n  font: var(--sys-typescale-headline4);\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  user-select: none;\n}\n\n.report-url,\n.report-subtitle {\n  font: var(--sys-typescale-body4-regular);\n}\n\n.report-section {\n  display: flex;\n  padding: var(--sys-size-7) var(--sys-size-9) 11px var(--sys-size-9);\n  border-bottom: 1px solid var(--sys-color-divider);\n  flex-direction: column;\n}\n\n.report-section-header {\n  padding-bottom: var(--sys-size-5);\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n\n  devtools-button {\n    flex: 0 0 auto;\n  }\n\n  &:has(.report-section-title:empty) {\n    padding: 0;\n  }\n}\n\n.report-section-title {\n  font: var(--sys-typescale-headline5);\n  flex: 1 1 auto;\n  text-overflow: ellipsis;\n  overflow: hidden;\n  line-height: 16px;\n  color: var(--sys-color-on-surface);\n  min-width: var(--sys-size-21);\n  white-space: nowrap;\n}\n\n.report-field {\n  display: flex;\n  padding: var(--sys-size-3) 0;\n}\n\n.report-row {\n  font: var(--sys-typescale-body4-regular);\n  margin: var(--sys-size-3) 0;\n\n  > devtools-checkbox:first-child {\n    margin-left: calc(var(--sys-size-4) * -1);\n  }\n\n  > devtools-icon:first-child {\n    /* We have inline icons that would otherwise be mis-aligned */\n    margin-inline-start: 0;\n  }\n}\n\n.report-field-name {\n  font: var(--sys-typescale-body5-medium);\n  color: var(--sys-color-on-surface-subtle);\n  flex: 0 0 128px;\n  text-align: left;\n  white-space: pre-wrap;\n}\n\n.report-field-value {\n  font: var(--sys-typescale-body4-regular);\n  flex: auto;\n  padding: 0 var(--sys-size-6);\n  white-space: pre;\n  user-select: text;\n}\n\n.report-field-value-is-flexed {\n  display: flex;\n  white-space: pre-wrap;\n}\n\n.report-field-value-subtitle {\n  color: var(--sys-color-state-disabled);\n  line-height: 14px;\n}\n\n.report-row-selectable {\n  user-select: text;\n}\n\n@media (forced-colors: active) {\n  .report-field-value .inline-icon {\n    color: ButtonText;\n  }\n\n  .report-field-value .multiline-value {\n    color: ButtonText;\n  }\n}\n\n/*# sourceURL=${import.meta.resolve('./reportView.css')} */`;", "// Copyright 2014 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n/* eslint-disable @devtools/no-imperative-dom-api */\n\nimport rootViewStyles from './rootView.css.js';\nimport {VBox} from './Widget.js';\nimport {ZoomManager} from './ZoomManager.js';\n\nexport class RootView extends VBox {\n  private window?: (Window&typeof globalThis)|null;\n  constructor() {\n    super();\n    this.markAsRoot();\n    this.element.classList.add('root-view');\n    this.registerRequiredCSS(rootViewStyles);\n    this.element.setAttribute('spellcheck', 'false');\n  }\n\n  attachToDocument(document: Document): void {\n    if (document.defaultView) {\n      document.defaultView.addEventListener('resize', this.doResize.bind(this), false);\n    }\n    this.window = document.defaultView;\n    this.doResize();\n    this.show(document.body);\n  }\n\n  override doResize(): void {\n    if (this.window) {\n      const size = this.constraints().minimum;\n      const zoom = ZoomManager.instance().zoomFactor();\n      const right = Math.min(0, this.window.innerWidth - size.width / zoom);\n      this.element.style.marginRight = right + 'px';\n      const bottom = Math.min(0, this.window.innerHeight - size.height / zoom);\n      this.element.style.marginBottom = bottom + 'px';\n    }\n    super.doResize();\n  }\n}\n", "// Copyright 2025 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n// IMPORTANT: this file is auto generated. Please do not edit this file.\n/* istanbul ignore file */\nexport default `/*\n * Copyright 2016 The Chromium Authors\n * Use of this source code is governed by a BSD-style license that can be\n * found in the LICENSE file.\n */\n\n.root-view {\n  background-color: var(--sys-color-cdt-base-container);\n  overflow: hidden;\n  position: absolute !important; /* stylelint-disable-line declaration-no-important */\n  inset: 0;\n}\n\n/*# sourceURL=${import.meta.resolve('./rootView.css')} */`;", "// Copyright 2021 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n/* eslint-disable @devtools/no-imperative-dom-api */\n\n/*\n * Copyright (C) 2006, 2007, 2008 Apple Inc.  All rights reserved.\n * Copyright (C) 2007 Matt Lilek (pewtermoose@gmail.com).\n * Copyright (C) 2009 Joseph Pecoraro\n * Copyright (C) 2011 Google Inc. All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions\n * are met:\n *\n * 1.  Redistributions of source code must retain the above copyright\n *     notice, this list of conditions and the following disclaimer.\n * 2.  Redistributions in binary form must reproduce the above copyright\n *     notice, this list of conditions and the following disclaimer in the\n *     documentation and/or other materials provided with the distribution.\n * 3.  Neither the name of Apple Computer, Inc. (\"Apple\") nor the names of\n *     its contributors may be used to endorse or promote products derived\n *     from this software without specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY APPLE AND ITS CONTRIBUTORS \"AS IS\" AND ANY\n * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL APPLE OR ITS CONTRIBUTORS BE LIABLE FOR ANY\n * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF\n * THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\nimport './Toolbar.js'; // eslint-disable-line import/no-duplicates\n\nimport * as Common from '../../core/common/common.js';\nimport * as i18n from '../../core/i18n/i18n.js';\nimport * as Platform from '../../core/platform/platform.js';\nimport * as VisualLogging from '../../ui/visual_logging/visual_logging.js';\nimport * as Buttons from '../components/buttons/buttons.js';\nimport {createIcon} from '../kit/kit.js';\n\nimport * as ARIAUtils from './ARIAUtils.js';\nimport {InspectorView} from './InspectorView.js';\nimport searchableViewStyles from './searchableView.css.js';\nimport {ToolbarButton, ToolbarText, ToolbarToggle} from './Toolbar.js';  // eslint-disable-line import/no-duplicates\nimport {createHistoryInput, createTextButton} from './UIUtils.js';\nimport {VBox} from './Widget.js';\n\nconst UIStrings = {\n  /**\n   * @description Text on a button to replace one instance with input text for the ctrl+F search bar\n   */\n  replace: 'Replace',\n  /**\n   * @description Tooltip text on a toggle to enable replacing one instance with input text for the ctrl+F search bar\n   */\n  enableFindAndReplace: 'Find and replace',\n  /**\n   * @description Tooltip text on a toggle to disable replacing one instance with input text for the ctrl+F search bar\n   */\n  disableFindAndReplace: 'Disable find and replace',\n  /**\n   * @description Text to find an item\n   */\n  findString: 'Find',\n  /**\n   * @description Tooltip text on a button to search previous instance for the ctrl+F search bar\n   */\n  searchPrevious: 'Show previous result',\n  /**\n   * @description Tooltip text on a button to search next instance for the ctrl+F search bar\n   */\n  searchNext: 'Show next result',\n  /**\n   * @description Tooltip text on a toggle to enable/disable search by matching the exact case.\n   */\n  matchCase: 'Match case',\n  /**\n   * @description Tooltip text on a toggle to enable/disable search by matching the exact word.\n   */\n  matchWholeWord: 'Match whole word',\n  /**\n   * @description Tooltip text on a toggle to enable/disable searching with regular expression.\n   */\n  useRegularExpression: 'Use regular expression',\n  /**\n   * @description Tooltip text on a button to close the search bar\n   */\n  closeSearchBar: 'Close search bar',\n  /**\n   * @description Text on a button to replace all instances with input text for the ctrl+F search bar\n   */\n  replaceAll: 'Replace all',\n  /**\n   * @description Text to indicate the current match index and the total number of matches for the ctrl+F search bar\n   * @example {2} PH1\n   * @example {3} PH2\n   */\n  dOfD: '{PH1} of {PH2}',\n  /**\n   * @description Tooltip text to indicate the current match index and the total number of matches for the ctrl+F search bar\n   * @example {2} PH1\n   * @example {3} PH2\n   */\n  accessibledOfD: 'Shows result {PH1} of {PH2}',\n  /**\n   * @description Text to indicate search result for the ctrl+F search bar\n   */\n  matchString: '1 match',\n  /**\n   * @description Text to indicate search result for the ctrl+F search bar\n   * @example {2} PH1\n   */\n  dMatches: '{PH1} matches',\n  /**\n   * @description Text on a button to search previous instance for the ctrl+F search bar\n   */\n  clearInput: 'Clear',\n} as const;\nconst str_ = i18n.i18n.registerUIStrings('ui/legacy/SearchableView.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\n\nfunction createClearButton(jslogContext: string): Buttons.Button.Button {\n  const button = new Buttons.Button.Button();\n  button.data = {\n    variant: Buttons.Button.Variant.ICON,\n    size: Buttons.Button.Size.SMALL,\n    jslogContext,\n    title: i18nString(UIStrings.clearInput),\n    iconName: 'cross-circle-filled',\n  };\n  button.ariaLabel = i18nString(UIStrings.clearInput);\n  button.classList.add('clear-button');\n  button.tabIndex = -1;\n  return button;\n}\nexport class SearchableView extends VBox {\n  protected searchProvider: Searchable;\n  private replaceProvider: Replaceable|null;\n  // TODO(crbug.com/1172300) Ignored during the jsdoc to ts migration\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  private setting: Common.Settings.Setting<any>|null;\n  private replaceable: boolean;\n  private readonly footerElementContainer: HTMLElement;\n  private readonly footerElement: HTMLElement;\n  private replaceToggleButton: ToolbarToggle;\n  private searchInputElement: HTMLInputElement;\n  private matchesElement: HTMLElement;\n  private matchesElementValue: HTMLElement;\n  private searchNavigationPrevElement: ToolbarButton;\n  private searchNavigationNextElement: ToolbarButton;\n  private readonly replaceInputElement: HTMLInputElement;\n  private caseSensitiveButton: Buttons.Button.Button|undefined;\n  private wholeWordButton: Buttons.Button.Button|undefined;\n  private regexButton: Buttons.Button.Button|undefined;\n  private replaceButtonElement: Buttons.Button.Button;\n  private replaceAllButtonElement: Buttons.Button.Button;\n  private minimalSearchQuerySize: number;\n  private searchIsVisible?: boolean;\n  private currentQuery?: string;\n  private valueChangedTimeoutId?: number;\n\n  constructor(searchable: Searchable, replaceable: Replaceable|null, settingName?: string, element?: HTMLElement) {\n    super(element, {useShadowDom: true});\n    this.registerRequiredCSS(searchableViewStyles);\n    searchableViewsByElement.set(this.element, this);\n\n    this.searchProvider = searchable;\n    this.replaceProvider = replaceable;\n    this.setting = settingName ? Common.Settings.Settings.instance().createSetting(settingName, {}) : null;\n    this.replaceable = false;\n\n    this.contentElement.createChild('slot');\n    this.footerElementContainer = this.contentElement.createChild('div', 'search-bar hidden');\n    this.footerElementContainer.style.order = '100';\n    this.footerElement = this.footerElementContainer.createChild('div', 'toolbar-search');\n    this.footerElement.setAttribute('jslog', `${VisualLogging.toolbar('search').track({resize: true})}`);\n\n    const replaceToggleToolbar = this.footerElement.createChild('devtools-toolbar', 'replace-toggle-toolbar');\n    this.replaceToggleButton =\n        new ToolbarToggle(i18nString(UIStrings.enableFindAndReplace), 'replace', undefined, 'replace');\n    ARIAUtils.setLabel(this.replaceToggleButton.element, i18nString(UIStrings.enableFindAndReplace));\n    this.replaceToggleButton.addEventListener(ToolbarButton.Events.CLICK, this.toggleReplace, this);\n    replaceToggleToolbar.appendToolbarItem(this.replaceToggleButton);\n\n    // Elements within `searchInputElements` are added according to their expected tab order.\n    const searchInputElements = this.footerElement.createChild('div', 'search-inputs');\n    const iconAndInput = searchInputElements.createChild('div', 'icon-and-input');\n    const searchIcon = createIcon('search');\n    iconAndInput.appendChild(searchIcon);\n\n    this.searchInputElement = createHistoryInput('search', 'search-replace search');\n    this.searchInputElement.id = 'search-input-field';\n    this.searchInputElement.autocomplete = 'off';\n    this.searchInputElement.placeholder = i18nString(UIStrings.findString);\n    this.searchInputElement.setAttribute(\n        'jslog',\n        `${VisualLogging.textField('search').track({change: true, keydown: 'ArrowUp|ArrowDown|Enter|Escape'})}`);\n    this.searchInputElement.addEventListener('keydown', this.onSearchKeyDown.bind(this), true);\n    this.searchInputElement.addEventListener('input', this.onInput.bind(this), false);\n    iconAndInput.appendChild(this.searchInputElement);\n\n    const replaceInputElements = searchInputElements.createChild('div', 'replace-element input-line');\n    this.replaceInputElement = replaceInputElements.createChild('input', 'search-replace');\n    this.replaceInputElement.addEventListener('keydown', this.onReplaceKeyDown.bind(this), true);\n    this.replaceInputElement.placeholder = i18nString(UIStrings.replace);\n    this.replaceInputElement.setAttribute(\n        'jslog', `${VisualLogging.textField('replace').track({change: true, keydown: 'Enter'})}`);\n\n    const replaceInputClearButton = createClearButton('clear-replace-input');\n    replaceInputClearButton.addEventListener('click', () => {\n      this.replaceInputElement.value = '';\n      this.replaceInputElement.focus();\n    });\n    replaceInputElements.appendChild(replaceInputClearButton);\n\n    const searchConfigButtons = searchInputElements.createChild('div', 'search-config-buttons');\n    const clearButton = createClearButton('clear-search-input');\n    clearButton.addEventListener('click', () => {\n      this.searchInputElement.value = '';\n      this.clearSearch();\n      this.searchInputElement.focus();\n    });\n    searchConfigButtons.appendChild(clearButton);\n\n    const saveSettingAndPerformSearch = (): void => {\n      this.saveSetting();\n      this.performSearch(false, true);\n    };\n\n    if (this.searchProvider.supportsCaseSensitiveSearch()) {\n      const iconName = 'match-case';\n      this.caseSensitiveButton = new Buttons.Button.Button();\n      this.caseSensitiveButton.data = {\n        variant: Buttons.Button.Variant.ICON_TOGGLE,\n        size: Buttons.Button.Size.SMALL,\n        iconName,\n        toggledIconName: iconName,\n        toggled: false,\n        toggleType: Buttons.Button.ToggleType.PRIMARY,\n        title: i18nString(UIStrings.matchCase),\n        jslogContext: iconName,\n      };\n      ARIAUtils.setLabel(this.caseSensitiveButton, i18nString(UIStrings.matchCase));\n      this.caseSensitiveButton.addEventListener('click', saveSettingAndPerformSearch);\n      searchConfigButtons.appendChild(this.caseSensitiveButton);\n    }\n\n    if (this.searchProvider.supportsWholeWordSearch()) {\n      const iconName = 'match-whole-word';\n      this.wholeWordButton = new Buttons.Button.Button();\n      this.wholeWordButton.data = {\n        variant: Buttons.Button.Variant.ICON_TOGGLE,\n        size: Buttons.Button.Size.SMALL,\n        iconName,\n        toggledIconName: iconName,\n        toggled: false,\n        toggleType: Buttons.Button.ToggleType.PRIMARY,\n        title: i18nString(UIStrings.matchWholeWord),\n        jslogContext: iconName,\n      };\n      ARIAUtils.setLabel(this.wholeWordButton, i18nString(UIStrings.matchWholeWord));\n      this.wholeWordButton.addEventListener('click', saveSettingAndPerformSearch);\n      searchConfigButtons.appendChild(this.wholeWordButton);\n    }\n\n    if (this.searchProvider.supportsRegexSearch()) {\n      const iconName = 'regular-expression';\n      this.regexButton = new Buttons.Button.Button();\n      this.regexButton.data = {\n        variant: Buttons.Button.Variant.ICON_TOGGLE,\n        size: Buttons.Button.Size.SMALL,\n        iconName,\n        toggledIconName: iconName,\n        toggleType: Buttons.Button.ToggleType.PRIMARY,\n        toggled: false,\n        jslogContext: iconName,\n        title: i18nString(UIStrings.useRegularExpression),\n      };\n      ARIAUtils.setLabel(this.regexButton, i18nString(UIStrings.useRegularExpression));\n      this.regexButton.addEventListener('click', saveSettingAndPerformSearch);\n      searchConfigButtons.appendChild(this.regexButton);\n    }\n\n    // Introduce a separate element for the background of the `Find` input line (instead of\n    // grouping together the `Find` input together with all search config option buttons\n    // and styling the parent's background).\n    // This allows for a tabbing order that can jump from the `Find` input, to\n    // the `Replace` input, and back to all search config option buttons.\n    searchInputElements.createChild('div', 'input-line search-input-background');\n\n    const buttonsContainer = this.footerElement.createChild('div', 'toolbar-search-buttons');\n    const firstRowButtons = buttonsContainer.createChild('div', 'first-row-buttons');\n\n    const toolbar = firstRowButtons.createChild('devtools-toolbar', 'toolbar-search-options');\n    this.searchNavigationPrevElement =\n        new ToolbarButton(i18nString(UIStrings.searchPrevious), 'chevron-up', undefined, 'select-previous');\n    this.searchNavigationPrevElement.addEventListener(ToolbarButton.Events.CLICK, () => this.onPrevButtonSearch());\n    toolbar.appendToolbarItem(this.searchNavigationPrevElement);\n    ARIAUtils.setLabel(this.searchNavigationPrevElement.element, i18nString(UIStrings.searchPrevious));\n\n    this.searchNavigationNextElement =\n        new ToolbarButton(i18nString(UIStrings.searchNext), 'chevron-down', undefined, 'select-next');\n    this.searchNavigationNextElement.addEventListener(ToolbarButton.Events.CLICK, () => this.onNextButtonSearch());\n    ARIAUtils.setLabel(this.searchNavigationNextElement.element, i18nString(UIStrings.searchNext));\n    toolbar.appendToolbarItem(this.searchNavigationNextElement);\n\n    const matchesText = new ToolbarText();\n    this.matchesElement = matchesText.element;\n    this.matchesElement.style.fontVariantNumeric = 'tabular-nums';\n    this.matchesElement.style.color = 'var(--sys-color-on-surface-subtle)';\n    this.matchesElement.style.padding = '0 var(--sys-size-3)';\n    this.matchesElement.classList.add('search-results-matches');\n    ARIAUtils.markAsPoliteLiveRegion(this.matchesElement, false);\n    this.matchesElementValue = this.matchesElement.createChild('span');\n    ARIAUtils.setHidden(this.matchesElementValue, true);\n    toolbar.appendToolbarItem(matchesText);\n\n    const cancelButtonElement = new Buttons.Button.Button();\n    cancelButtonElement.data = {\n      variant: Buttons.Button.Variant.TOOLBAR,\n      size: Buttons.Button.Size.REGULAR,\n      iconName: 'cross',\n      title: i18nString(UIStrings.closeSearchBar),\n      jslogContext: 'close-search',\n    };\n\n    cancelButtonElement.classList.add('close-search-button');\n    cancelButtonElement.addEventListener('click', () => this.closeSearch());\n    firstRowButtons.appendChild(cancelButtonElement);\n\n    const secondRowButtons = buttonsContainer.createChild('div', 'second-row-buttons replace-element');\n\n    this.replaceButtonElement = createTextButton(i18nString(UIStrings.replace), this.replace.bind(this), {\n      className: 'search-action-button',\n      jslogContext: 'replace',\n    });\n    this.replaceButtonElement.disabled = true;\n    secondRowButtons.appendChild(this.replaceButtonElement);\n\n    this.replaceAllButtonElement = createTextButton(i18nString(UIStrings.replaceAll), this.replaceAll.bind(this), {\n      className: 'search-action-button',\n      jslogContext: 'replace-all',\n    });\n\n    secondRowButtons.appendChild(this.replaceAllButtonElement);\n    this.replaceAllButtonElement.disabled = true;\n\n    this.minimalSearchQuerySize = 3;\n    this.loadSetting();\n  }\n\n  static fromElement(element: Element|null): SearchableView|null {\n    let view: (SearchableView|null)|null = null;\n    while (element && !view) {\n      view = searchableViewsByElement.get(element) || null;\n      element = element.parentElementOrShadowHost();\n    }\n    return view;\n  }\n\n  private toggleReplace(): void {\n    const replaceEnabled = this.replaceToggleButton.isToggled();\n    const label =\n        replaceEnabled ? i18nString(UIStrings.disableFindAndReplace) : i18nString(UIStrings.enableFindAndReplace);\n    ARIAUtils.setLabel(this.replaceToggleButton.element, label);\n    this.replaceToggleButton.element.title = label;\n    this.updateSecondRowVisibility();\n  }\n\n  private saveSetting(): void {\n    if (!this.setting) {\n      return;\n    }\n    const settingValue = this.setting.get() || {};\n    if (this.caseSensitiveButton) {\n      settingValue.caseSensitive = this.caseSensitiveButton.toggled;\n    }\n    if (this.wholeWordButton) {\n      settingValue.wholeWord = this.wholeWordButton.toggled;\n    }\n    if (this.regexButton) {\n      settingValue.isRegex = this.regexButton.toggled;\n    }\n    this.setting.set(settingValue);\n  }\n\n  private loadSetting(): void {\n    const settingValue = this.setting ? (this.setting.get() || {}) : {};\n    if (this.caseSensitiveButton) {\n      this.caseSensitiveButton.toggled = Boolean(settingValue.caseSensitive);\n    }\n    if (this.wholeWordButton) {\n      this.wholeWordButton.toggled = Boolean(settingValue.wholeWord);\n    }\n    if (this.regexButton) {\n      this.regexButton.toggled = Boolean(settingValue.isRegex);\n    }\n  }\n\n  setMinimalSearchQuerySize(minimalSearchQuerySize: number): void {\n    this.minimalSearchQuerySize = minimalSearchQuerySize;\n  }\n\n  setPlaceholder(placeholder: string, ariaLabel?: string): void {\n    this.searchInputElement.placeholder = placeholder;\n    if (ariaLabel) {\n      ARIAUtils.setLabel(this.searchInputElement, ariaLabel);\n    }\n  }\n\n  setReplaceable(replaceable: boolean): void {\n    this.replaceable = replaceable;\n  }\n\n  updateSearchMatchesCount(matches: number): void {\n    if (this.searchProvider.currentSearchMatches === matches) {\n      return;\n    }\n    this.searchProvider.currentSearchMatches = matches;\n    this.updateSearchMatchesCountAndCurrentMatchIndex(this.searchProvider.currentQuery ? matches : 0, -1);\n  }\n\n  updateCurrentMatchIndex(currentMatchIndex: number): void {\n    if (!this.searchProvider.currentSearchMatches) {\n      return;\n    }\n\n    this.updateSearchMatchesCountAndCurrentMatchIndex(this.searchProvider.currentSearchMatches, currentMatchIndex);\n  }\n\n  closeSearch(): void {\n    this.cancelSearch();\n    if (this.footerElementContainer.hasFocus()) {\n      this.focus();\n    }\n\n    this.searchProvider.onSearchClosed?.();\n  }\n\n  private toggleSearchBar(toggled: boolean): void {\n    this.footerElementContainer.classList.toggle('hidden', !toggled);\n    this.doResize();\n  }\n\n  cancelSearch(): void {\n    if (!this.searchIsVisible) {\n      return;\n    }\n    this.resetSearch();\n    delete this.searchIsVisible;\n    this.toggleSearchBar(false);\n  }\n\n  resetSearch(): void {\n    this.clearSearch();\n    this.updateReplaceVisibility();\n    this.matchesElementValue.textContent = '';\n  }\n\n  refreshSearch(): void {\n    if (!this.searchIsVisible) {\n      return;\n    }\n    this.resetSearch();\n    this.performSearch(false, false);\n  }\n\n  handleFindNextShortcut(): boolean {\n    if (!this.searchIsVisible) {\n      return false;\n    }\n    this.searchProvider.jumpToNextSearchResult();\n    return true;\n  }\n\n  handleFindPreviousShortcut(): boolean {\n    if (!this.searchIsVisible) {\n      return false;\n    }\n    this.searchProvider.jumpToPreviousSearchResult();\n    return true;\n  }\n\n  handleFindShortcut(): boolean {\n    this.showSearchField();\n    return true;\n  }\n\n  handleCancelSearchShortcut(): boolean {\n    if (!this.searchIsVisible) {\n      return false;\n    }\n    this.closeSearch();\n    return true;\n  }\n\n  private updateSearchNavigationButtonState(enabled: boolean): void {\n    this.replaceButtonElement.disabled = !enabled;\n    this.replaceAllButtonElement.disabled = !enabled;\n    this.searchNavigationPrevElement.setEnabled(enabled);\n    this.searchNavigationNextElement.setEnabled(enabled);\n  }\n\n  private updateSearchMatchesCountAndCurrentMatchIndex(matches: number, currentMatchIndex: number): void {\n    if (!this.currentQuery) {\n      this.matchesElementValue.textContent = '';\n    } else if (matches === 0 || currentMatchIndex >= 0) {\n      this.matchesElementValue.textContent = i18nString(UIStrings.dOfD, {PH1: currentMatchIndex + 1, PH2: matches});\n      ARIAUtils.setLabel(\n          this.matchesElement, i18nString(UIStrings.accessibledOfD, {PH1: currentMatchIndex + 1, PH2: matches}));\n    } else if (matches === 1) {\n      this.matchesElementValue.textContent = i18nString(UIStrings.matchString);\n      ARIAUtils.setLabel(this.matchesElement, i18nString(UIStrings.matchString));\n    } else {\n      this.matchesElementValue.textContent = i18nString(UIStrings.dMatches, {PH1: matches});\n      ARIAUtils.setLabel(this.matchesElement, i18nString(UIStrings.dMatches, {PH1: matches}));\n    }\n    this.updateSearchNavigationButtonState(matches > 0);\n  }\n\n  showSearchField(): void {\n    if (this.searchIsVisible) {\n      this.cancelSearch();\n    }\n\n    let queryCandidate;\n    if (!this.searchInputElement.hasFocus()) {\n      const selection = InspectorView.instance().element.window().getSelection();\n      if (selection?.rangeCount) {\n        queryCandidate = selection.toString().replace(/\\r?\\n.*/, '');\n      }\n    }\n\n    this.toggleSearchBar(true);\n    this.updateReplaceVisibility();\n    if (queryCandidate) {\n      this.searchInputElement.value = queryCandidate;\n    }\n    this.performSearch(false, false);\n    this.searchInputElement.focus();\n    this.searchInputElement.select();\n    this.searchIsVisible = true;\n  }\n\n  private updateReplaceVisibility(): void {\n    this.replaceToggleButton.setVisible(this.replaceable);\n    if (!this.replaceable) {\n      this.replaceToggleButton.setToggled(false);\n      this.updateSecondRowVisibility();\n    }\n  }\n\n  private onSearchKeyDown(event: KeyboardEvent): void {\n    if (Platform.KeyboardUtilities.isEscKey(event)) {\n      this.closeSearch();\n      event.consume(true);\n      return;\n    }\n    if (!(event.key === 'Enter')) {\n      return;\n    }\n\n    if (!this.currentQuery) {\n      this.performSearch(true, true, event.shiftKey);\n    } else {\n      this.jumpToNextSearchResult(event.shiftKey);\n    }\n  }\n\n  private onReplaceKeyDown(event: KeyboardEvent): void {\n    if (event.key === 'Enter') {\n      this.replace();\n    }\n  }\n\n  private jumpToNextSearchResult(isBackwardSearch?: boolean): void {\n    if (!this.currentQuery) {\n      return;\n    }\n\n    if (isBackwardSearch) {\n      this.searchProvider.jumpToPreviousSearchResult();\n    } else {\n      this.searchProvider.jumpToNextSearchResult();\n    }\n  }\n\n  private onNextButtonSearch(): void {\n    this.jumpToNextSearchResult();\n  }\n\n  private onPrevButtonSearch(): void {\n    this.jumpToNextSearchResult(true);\n  }\n\n  private clearSearch(): void {\n    this.currentQuery = undefined;\n    if (Boolean(this.searchProvider.currentQuery)) {\n      this.searchProvider.currentQuery = undefined;\n      this.searchProvider.onSearchCanceled();\n    }\n    this.updateSearchMatchesCountAndCurrentMatchIndex(0, -1);\n  }\n\n  private performSearch(forceSearch: boolean, shouldJump: boolean, jumpBackwards?: boolean): void {\n    const query = this.searchInputElement.value;\n    if (!query || (!forceSearch && query.length < this.minimalSearchQuerySize && !this.currentQuery)) {\n      this.clearSearch();\n      return;\n    }\n\n    this.currentQuery = query;\n    this.searchProvider.currentQuery = query;\n\n    const searchConfig = this.currentSearchConfig();\n    this.searchProvider.performSearch(searchConfig, shouldJump, jumpBackwards);\n  }\n\n  private currentSearchConfig(): SearchConfig {\n    const query = this.searchInputElement.value;\n    const caseSensitive = this.caseSensitiveButton ? this.caseSensitiveButton.toggled : false;\n    const wholeWord = this.wholeWordButton ? this.wholeWordButton.toggled : false;\n    const isRegex = this.regexButton ? this.regexButton.toggled : false;\n    return new SearchConfig(query, caseSensitive, wholeWord, isRegex);\n  }\n\n  private updateSecondRowVisibility(): void {\n    const secondRowVisible = this.replaceToggleButton.isToggled();\n    this.footerElementContainer.classList.toggle('replaceable', secondRowVisible);\n\n    if (secondRowVisible) {\n      this.replaceInputElement.focus();\n    } else {\n      this.searchInputElement.focus();\n    }\n    this.doResize();\n  }\n\n  private replace(): void {\n    if (!this.replaceProvider) {\n      throw new Error('No \\'replaceable\\' provided to SearchableView!');\n    }\n    const searchConfig = this.currentSearchConfig();\n    this.replaceProvider.replaceSelectionWith(searchConfig, this.replaceInputElement.value);\n    this.currentQuery = undefined;\n    this.performSearch(true, true);\n  }\n\n  private replaceAll(): void {\n    if (!this.replaceProvider) {\n      throw new Error('No \\'replaceable\\' provided to SearchableView!');\n    }\n    const searchConfig = this.currentSearchConfig();\n    this.replaceProvider.replaceAllWith(searchConfig, this.replaceInputElement.value);\n  }\n\n  private onInput(): void {\n    if (!Common.Settings.Settings.instance().moduleSetting('search-as-you-type').get()) {\n      this.clearSearch();\n      return;\n    }\n\n    clearTimeout(this.valueChangedTimeoutId);\n    const timeout = this.searchInputElement.value.length < 3 ? 200 : 0;\n    this.valueChangedTimeoutId = window.setTimeout(this.onValueChanged.bind(this), timeout);\n  }\n\n  private onValueChanged(): void {\n    if (!this.searchIsVisible) {\n      return;\n    }\n    this.valueChangedTimeoutId = undefined;\n    this.performSearch(false, true);\n  }\n}\n\nconst searchableViewsByElement = new WeakMap<Element, SearchableView>();\n\nexport interface Searchable {\n  currentQuery?: string;\n  currentSearchMatches?: number;\n  onSearchCanceled(): void;\n  // Called when the search toolbar is closed\n  onSearchClosed?: () => void;\n  performSearch(searchConfig: SearchConfig, shouldJump: boolean, jumpBackwards?: boolean): void;\n  jumpToNextSearchResult(): void;\n  jumpToPreviousSearchResult(): void;\n  supportsCaseSensitiveSearch(): boolean;\n  supportsWholeWordSearch(): boolean;\n  supportsRegexSearch(): boolean;\n}\n\nexport interface Replaceable {\n  replaceSelectionWith(searchConfig: SearchConfig, replacement: string): void;\n  replaceAllWith(searchConfig: SearchConfig, replacement: string): void;\n}\n\nexport interface SearchRegexResult {\n  regex: RegExp;\n  fromQuery: boolean;\n}\n\nexport class SearchConfig {\n  query: string;\n  caseSensitive: boolean;\n  wholeWord: boolean;\n  isRegex: boolean;\n\n  constructor(query: string, caseSensitive: boolean, wholeWord: boolean, isRegex: boolean) {\n    this.query = query;\n    this.caseSensitive = caseSensitive;\n    this.wholeWord = wholeWord;\n    this.isRegex = isRegex;\n  }\n\n  toSearchRegex(global?: boolean): SearchRegexResult {\n    let modifiers = this.caseSensitive ? '' : 'i';\n    if (global) {\n      modifiers += 'g';\n    }\n\n    // Check if query is surrounded by forward slashes\n    const isRegexFormatted = this.query.startsWith('/') && this.query.endsWith('/');\n    const query = this.isRegex && !isRegexFormatted ? '/' + this.query + '/' : this.query;\n    let regex: RegExp|undefined;\n    let fromQuery = false;\n\n    // First try creating regex if user knows the / / hint.\n    try {\n      if (/^\\/.+\\/$/.test(query) && this.isRegex) {\n        regex = new RegExp(query.substring(1, query.length - 1), modifiers);\n        fromQuery = true;\n      }\n    } catch {\n      // Silent catch.\n    }\n\n    // Otherwise just do a plain text search.\n    if (!regex) {\n      regex = Platform.StringUtilities.createPlainTextSearchRegex(query, modifiers);\n    }\n\n    if (this.wholeWord) {\n      let {source} = regex;\n      if (!source.startsWith('^') && !source.startsWith('\\\\b')) {\n        source = '\\\\b' + source;\n      }\n      if (!source.endsWith('$') && !source.endsWith('\\\\b')) {\n        source = source + '\\\\b';\n      }\n      regex = new RegExp(source, regex.flags);\n    }\n\n    return {\n      regex,\n      fromQuery,\n    };\n  }\n}\n", "// Copyright 2025 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n// IMPORTANT: this file is auto generated. Please do not edit this file.\n/* istanbul ignore file */\nexport default `/*\n * Copyright 2014 The Chromium Authors\n * Use of this source code is governed by a BSD-style license that can be\n * found in the LICENSE file.\n */\n\n.search-bar {\n  flex: 0 0 33px;\n  border-top: 1px solid var(--sys-color-divider);\n\n  devtools-icon[name=\"search\"] {\n    width: var(--sys-size-8);\n    height: var(--sys-size-8);\n    color: var(--sys-color-on-surface-subtle);\n    margin-right: var(--sys-size-3);\n  }\n\n  &.replaceable {\n    & devtools-icon[name=\"search\"] {\n      display: none;\n    }\n  }\n\n  &:not(.replaceable) .replace-element {\n    display: none;\n  }\n\n  .search-replace {\n    appearance: none;\n    color: var(--sys-color-on-surface);\n    background-color: transparent;\n    border: 0;\n    z-index: 1;\n    flex: 1;\n\n    &::placeholder {\n      color: var(--sys-color-on-surface-subtle);\n    }\n\n    &:placeholder-shown + .clear-button {\n      display: none;\n    }\n\n    &::-webkit-search-cancel-button {\n      display: none;\n    }\n  }\n\n  .search-input-background {\n    grid-row: 1/2;\n  }\n\n  .icon-and-input {\n    margin-left: var(--sys-size-5);\n    grid-row: 1/2;\n    grid-column: 1/2;\n    display: inline-flex;\n\n    &:hover ~ .search-input-background {\n      background-color: var(--sys-color-state-hover-on-subtle);\n    }\n\n    &:has(.search-replace:placeholder-shown) ~ .search-config-buttons > .clear-button {\n      display: none;\n    }\n  }\n\n  .toolbar-search {\n    display: flex;\n    margin: var(--sys-size-2);\n  }\n\n  .second-row-buttons {\n    height: var(--sys-size-12);\n    display: inline-flex;\n\n    & > devtools-button {\n      margin-right: var(--sys-size-3);\n    }\n  }\n\n  .input-line {\n    grid-column: 1/3;\n    display: inline-flex;\n    padding: 0 var(--sys-size-2) 0 var(--sys-size-5);\n    border-radius: 100px;\n    height: var(--sys-size-10);\n    position: relative;\n\n    &:not(:has(devtools-button:hover)):hover {\n      background-color: var(--sys-color-state-hover-on-subtle);\n    }\n\n    &::before {\n      content: \"\";\n      box-sizing: inherit;\n      height: 100%;\n      width: 100%;\n      position: absolute;\n      left: 0;\n      background: var(--sys-color-cdt-base);\n      z-index: -10;\n      border-radius: 100px;\n      padding: var(--sys-size-2);\n    }\n\n    & > devtools-button {\n      width: var(--sys-size-11);\n      justify-content: center;\n      margin-right: var(--sys-size-4);\n    }\n  }\n\n  .search-inputs {\n    display: grid;\n    grid-template-columns: 1fr min-content;\n    grid-auto-rows: var(--sys-size-12);\n    flex-grow: 1;\n    align-items: center;\n    min-width: 150px;\n  }\n\n  .first-row-buttons {\n    display: flex;\n    justify-content: space-between;\n  }\n\n  devtools-toolbar {\n    padding: 0;\n    height: var(--sys-size-12);\n    display: flex;\n    align-items: center;\n  }\n\n  .search-config-buttons {\n    margin: 0 var(--sys-size-3) 0 auto;\n    z-index: 1;\n    display: inline-flex;\n    grid-row: 1/2;\n    grid-column: 2/3;\n\n    & > devtools-button:last-child {\n      margin-right: var(--sys-size-4);\n    }\n  }\n\n  .toolbar-search-buttons {\n    margin-left: var(--sys-size-3);\n  }\n\n  .replace-element:has(input:focus) {\n    box-shadow: inset 0 0 0 2px var(--sys-color-state-focus-ring);\n  }\n\n  .search-inputs:has(input[type=\"search\"]:focus) .search-input-background {\n    box-shadow: inset 0 0 0 2px var(--sys-color-state-focus-ring);\n  }\n}\n\n:host-context(#sources-panel-sources-view) .search-bar {\n  flex-basis: auto;\n}\n\n/*# sourceURL=${import.meta.resolve('./searchableView.css')} */`;", "// Copyright 2017 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n/* eslint-disable @devtools/no-imperative-dom-api */\n\nimport type * as Common from '../../core/common/common.js';\nimport * as i18n from '../../core/i18n/i18n.js';\nimport * as Geometry from '../../models/geometry/geometry.js';\nimport {createIcon} from '../kit/kit.js';\nimport * as VisualLogging from '../visual_logging/visual_logging.js';\n\nimport * as ARIAUtils from './ARIAUtils.js';\nimport {appendStyle} from './DOMUtilities.js';\nimport {AnchorBehavior, GlassPane, MarginBehavior, PointerEventsBehavior} from './GlassPane.js';\nimport {ListControl, type ListDelegate, ListMode} from './ListControl.js';\nimport {Events as ListModelEvents, type ItemsReplacedEvent, type ListModel} from './ListModel.js';\nimport softDropDownStyles from './softDropDown.css.js';\nimport softDropDownButtonStyles from './softDropDownButton.css.js';\nimport {createShadowRootWithCoreStyles} from './UIUtils.js';\n\nconst UIStrings = {\n  /**\n   * @description Placeholder text in Soft Drop Down\n   */\n  noItemSelected: '(no item selected)',\n} as const;\nconst str_ = i18n.i18n.registerUIStrings('ui/legacy/SoftDropDown.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\n\nexport class SoftDropDown<T> implements ListDelegate<T> {\n  private delegate: Delegate<T>;\n  private selectedItem: T|null;\n  private readonly model: ListModel<T>;\n  private placeholderText: Common.UIString.LocalizedString;\n  element: HTMLButtonElement;\n  private titleElement: HTMLElement;\n  private readonly glassPane: GlassPane;\n  private list: ListControl<T>;\n  private rowHeight: number;\n  private width: number;\n\n  constructor(model: ListModel<T>, delegate: Delegate<T>, jslogContext?: string) {\n    this.delegate = delegate;\n    this.selectedItem = null;\n    this.model = model;\n\n    this.placeholderText = i18nString(UIStrings.noItemSelected);\n\n    this.element = document.createElement('button');\n    if (jslogContext) {\n      this.element.setAttribute(\n          'jslog',\n          `${VisualLogging.dropDown().track({click: true, keydown: 'ArrowUp|ArrowDown|Enter'}).context(jslogContext)}`,\n      );\n    }\n    this.element.classList.add('soft-dropdown');\n    appendStyle(this.element, softDropDownButtonStyles);\n    this.titleElement = this.element.createChild('span', 'title');\n    const dropdownArrowIcon = createIcon('triangle-down');\n    this.element.appendChild(dropdownArrowIcon);\n    ARIAUtils.setExpanded(this.element, false);\n\n    this.glassPane = new GlassPane();\n    this.glassPane.setMarginBehavior(MarginBehavior.NO_MARGIN);\n    this.glassPane.setAnchorBehavior(AnchorBehavior.PREFER_BOTTOM);\n    this.glassPane.setOutsideClickCallback(this.hide.bind(this));\n    this.glassPane.setPointerEventsBehavior(PointerEventsBehavior.BLOCKED_BY_GLASS_PANE);\n    this.list = new ListControl(model, this, ListMode.EqualHeightItems);\n    this.list.element.classList.add('item-list');\n    this.rowHeight = 36;\n    this.width = 315;\n    createShadowRootWithCoreStyles(this.glassPane.contentElement, {\n      cssFile: softDropDownStyles,\n    }).appendChild(this.list.element);\n    ARIAUtils.markAsMenu(this.list.element);\n    VisualLogging.setMappedParent(this.list.element, this.element);\n    this.list.element.setAttribute(\n        'jslog',\n        `${VisualLogging.menu().parent('mapped').track({resize: true, keydown: 'ArrowUp|ArrowDown|PageUp|PageDown'})}`);\n\n    this.element.addEventListener('mousedown', event => {\n      if (this.glassPane.isShowing()) {\n        this.hide(event);\n      } else if (!this.element.disabled) {\n        this.show(event);\n      }\n    }, false);\n    this.element.addEventListener('keydown', this.onKeyDownButton.bind(this), false);\n    this.list.element.addEventListener('keydown', this.onKeyDownList.bind(this), false);\n    this.list.element.addEventListener('focusout', this.hide.bind(this), false);\n    this.list.element.addEventListener('mousedown', event => event.consume(true), false);\n    this.list.element.addEventListener('mouseup', event => {\n      if (event.target === this.list.element) {\n        return;\n      }\n\n      this.selectHighlightedItem();\n      if (event.target instanceof Element && event.target?.parentElement) {\n        // hide() will consume the mouseup event and click won't be triggered\n        void VisualLogging.logClick(event.target.parentElement, event);\n      }\n      this.hide(event);\n    }, false);\n    model.addEventListener(ListModelEvents.ITEMS_REPLACED, this.itemsReplaced, this);\n  }\n\n  private show(event: Event): void {\n    if (this.glassPane.isShowing()) {\n      return;\n    }\n    this.glassPane.setContentAnchorBox(this.element.boxInWindow());\n    this.glassPane.show((this.element.ownerDocument));\n    this.list.element.focus();\n    ARIAUtils.setExpanded(this.element, true);\n    this.updateGlasspaneSize();\n    if (this.selectedItem) {\n      this.list.selectItem(this.selectedItem);\n    }\n    event.consume(true);\n  }\n\n  private updateGlasspaneSize(): void {\n    const maxHeight = this.rowHeight * (Math.min(this.model.length, 9));\n    this.glassPane.setMaxContentSize(new Geometry.Size(this.width, maxHeight));\n    this.list.viewportResized();\n  }\n\n  private hide(event: Event): void {\n    this.glassPane.hide();\n    this.list.selectItem(null);\n    ARIAUtils.setExpanded(this.element, false);\n    this.element.focus();\n    event.consume(true);\n  }\n\n  private onKeyDownButton(event: KeyboardEvent): void {\n    let handled = false;\n    switch (event.key) {\n      case 'ArrowUp':\n        this.show(event);\n        this.list.selectItemNextPage();\n        handled = true;\n        break;\n      case 'ArrowDown':\n        this.show(event);\n        this.list.selectItemPreviousPage();\n        handled = true;\n        break;\n      case 'Enter':\n      case ' ':\n        this.show(event);\n        handled = true;\n        break;\n      default:\n        break;\n    }\n\n    if (handled) {\n      event.consume(true);\n    }\n  }\n\n  private onKeyDownList(event: KeyboardEvent): void {\n    let handled = false;\n    switch (event.key) {\n      case 'ArrowLeft':\n        handled = this.list.selectPreviousItem(false, false);\n        break;\n      case 'ArrowRight':\n        handled = this.list.selectNextItem(false, false);\n        break;\n      case 'Home':\n        for (let i = 0; i < this.model.length; i++) {\n          if (this.isItemSelectable(this.model.at(i))) {\n            this.list.selectItem(this.model.at(i));\n            handled = true;\n            break;\n          }\n        }\n        break;\n      case 'End':\n        for (let i = this.model.length - 1; i >= 0; i--) {\n          if (this.isItemSelectable(this.model.at(i))) {\n            this.list.selectItem(this.model.at(i));\n            handled = true;\n            break;\n          }\n        }\n        break;\n      case 'Escape':\n        this.hide(event);\n        handled = true;\n        break;\n      case 'Tab':\n      case 'Enter':\n      case ' ':\n        this.selectHighlightedItem();\n        this.hide(event);\n        handled = true;\n        break;\n      default:\n        if (event.key.length === 1) {\n          const selectedIndex = this.list.selectedIndex();\n          const letter = event.key.toUpperCase();\n          for (let i = 0; i < this.model.length; i++) {\n            const item = this.model.at((selectedIndex + i + 1) % this.model.length);\n            if (this.delegate.titleFor(item).toUpperCase().startsWith(letter)) {\n              this.list.selectItem(item);\n              break;\n            }\n          }\n          handled = true;\n        }\n        break;\n    }\n\n    if (handled) {\n      event.consume(true);\n    }\n  }\n\n  setWidth(width: number): void {\n    this.width = width;\n    this.updateGlasspaneSize();\n  }\n\n  setRowHeight(rowHeight: number): void {\n    this.rowHeight = rowHeight;\n  }\n\n  setPlaceholderText(text: Common.UIString.LocalizedString): void {\n    this.placeholderText = text;\n    if (!this.selectedItem) {\n      this.titleElement.textContent = this.placeholderText;\n    }\n  }\n\n  private itemsReplaced(event: Common.EventTarget.EventTargetEvent<ItemsReplacedEvent<T>>): void {\n    const {removed} = event.data;\n    if (this.selectedItem && removed.indexOf(this.selectedItem) !== -1) {\n      this.selectedItem = null;\n      this.selectHighlightedItem();\n    }\n    this.updateGlasspaneSize();\n  }\n\n  getSelectedItem(): T|null {\n    return this.selectedItem;\n  }\n\n  selectItem(item: T|null): void {\n    this.selectedItem = item;\n    if (this.selectedItem) {\n      this.titleElement.textContent = this.delegate.titleFor(this.selectedItem);\n    } else {\n      this.titleElement.textContent = this.placeholderText;\n    }\n    this.delegate.itemSelected(this.selectedItem);\n  }\n\n  createElementForItem(item: T): Element {\n    const element = document.createElement('div');\n    element.classList.add('item');\n    element.addEventListener('mousemove', e => {\n      if ((e.movementX || e.movementY) && this.delegate.isItemSelectable(item)) {\n        this.list.selectItem(item, false, /* Don't scroll */ true);\n      }\n    });\n    element.classList.toggle('disabled', !this.delegate.isItemSelectable(item));\n    element.classList.toggle('highlighted', this.list.selectedItem() === item);\n\n    ARIAUtils.markAsMenuItem(element);\n    element.appendChild(this.delegate.createElementForItem(item));\n\n    return element;\n  }\n\n  heightForItem(_item: T): number {\n    return this.rowHeight;\n  }\n\n  isItemSelectable(item: T): boolean {\n    return this.delegate.isItemSelectable(item);\n  }\n\n  selectedItemChanged(from: T|null, to: T|null, fromElement: Element|null, toElement: Element|null): void {\n    if (fromElement) {\n      fromElement.classList.remove('highlighted');\n    }\n    if (toElement) {\n      toElement.classList.add('highlighted');\n    }\n\n    ARIAUtils.setActiveDescendant(this.list.element, toElement);\n    this.delegate.highlightedItemChanged(\n        from, to, fromElement?.firstElementChild ?? null, toElement?.firstElementChild ?? null);\n  }\n\n  updateSelectedItemARIA(_fromElement: Element|null, _toElement: Element|null): boolean {\n    return false;\n  }\n\n  private selectHighlightedItem(): void {\n    this.selectItem(this.list.selectedItem());\n  }\n\n  refreshItem(item: T): void {\n    this.list.refreshItem(item);\n  }\n}\n\nexport interface Delegate<T> {\n  titleFor(item: T): string;\n  createElementForItem(item: T): Element;\n  isItemSelectable(item: T): boolean;\n  itemSelected(item: T|null): void;\n  highlightedItemChanged(from: T|null, to: T|null, fromElement: Element|null, toElement: Element|null): void;\n}\n", "// Copyright 2025 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n// IMPORTANT: this file is auto generated. Please do not edit this file.\n/* istanbul ignore file */\nexport default `/*\n * Copyright 2017 The Chromium Authors\n * Use of this source code is governed by a BSD-style license that can be\n * found in the LICENSE file.\n */\n\n.item.disabled {\n  opacity: 50%;\n}\n\n.item-list {\n  background-color: var(--sys-color-cdt-base-container);\n  box-shadow: var(--drop-shadow);\n  overflow: hidden auto;\n  width: 100%;\n}\n\n.item.highlighted {\n  background-color: var(--sys-color-state-hover-on-subtle);\n}\n\n@media (forced-colors: active) {\n  .item.disabled {\n    opacity: 100%;\n  }\n\n  .item-list {\n    border: 1px solid ButtonText;\n    background-color: ButtonFace;\n  }\n\n  .item.highlighted {\n    forced-color-adjust: none;\n    color: HighlightText;\n    background-color: Highlight;\n  }\n}\n\n/*# sourceURL=${import.meta.resolve('./softDropDown.css')} */`;", "// Copyright 2025 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n// IMPORTANT: this file is auto generated. Please do not edit this file.\n/* istanbul ignore file */\nexport default `/*\n * Copyright 2017 The Chromium Authors\n * Use of this source code is governed by a BSD-style license that can be\n * found in the LICENSE file.\n */\n\nbutton.soft-dropdown {\n  height: var(--sys-size-9);\n  text-align: left;\n  position: relative;\n  border: none;\n  background: none;\n  max-width: 120px;\n\n  &[disabled] {\n    background: var(--sys-color-state-disabled-container);\n    color: var(--sys-color-state-disabled);\n\n    devtools-icon {\n      color: var(--sys-color-state-disabled);\n    }\n  }\n\n  devtools-icon {\n    top: var(--sys-size-1);\n  }\n}\n\nbutton.soft-dropdown > .title {\n  flex: 0 1 auto;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\nbutton.soft-dropdown:hover:not(:active) > .title {\n  color: var(--sys-color-on-surface);\n}\n\n@media (forced-colors: active) {\n  button.soft-dropdown {\n    border: 1px solid ButtonText;\n    background: ButtonFace;\n    color: ButtonText;\n  }\n\n  button.soft-dropdown[disabled] {\n    opacity: 100%;\n  }\n}\n\n/*# sourceURL=${import.meta.resolve('./softDropDownButton.css')} */`;", "// Copyright 2018 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as i18n from '../../core/i18n/i18n.js';\nimport {html, render} from '../lit/lit.js';\n\nimport targetCrashedScreenStyles from './targetCrashedScreen.css.js';\nimport {VBox} from './Widget.js';\n\nconst UIStrings = {\n  /**\n   * @description Text in dialog box when the target page crashed\n   */\n  devtoolsWasDisconnectedFromThe: 'DevTools was disconnected from the page.',\n  /**\n   * @description Text content of content element\n   */\n  oncePageIsReloadedDevtoolsWill: 'Once page is reloaded, DevTools will automatically reconnect.',\n} as const;\nconst str_ = i18n.i18n.registerUIStrings('ui/legacy/TargetCrashedScreen.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\n\ntype View = (input: object, output: object, target: HTMLElement) => void;\n\nexport const DEFAULT_VIEW: View = (input, _output, target) => {\n  // clang-format off\n  render(html`\n    <style>${targetCrashedScreenStyles}</style>\n    <div class=\"message\">${i18nString(UIStrings.devtoolsWasDisconnectedFromThe)}</div>\n    <div class=\"message\">${i18nString(UIStrings.oncePageIsReloadedDevtoolsWill)}</div>`,\n    target);\n  // clang-format on\n};\n\nexport class TargetCrashedScreen extends VBox {\n  private readonly hideCallback: () => void;\n  constructor(hideCallback: () => void, view = DEFAULT_VIEW) {\n    super({useShadowDom: true});\n    view({}, {}, this.contentElement);\n    this.hideCallback = hideCallback;\n  }\n\n  override willHide(): void {\n    super.willHide();\n    this.hideCallback.call(null);\n  }\n}\n", "// Copyright 2025 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n// IMPORTANT: this file is auto generated. Please do not edit this file.\n/* istanbul ignore file */\nexport default `/*\n * Copyright 2015 The Chromium Authors\n * Use of this source code is governed by a BSD-style license that can be\n * found in the LICENSE file.\n */\n@scope to (devtools-widget > *) {\n  :scope {\n    padding: 25px;\n  }\n\n  .message {\n    font-size: larger;\n    white-space: pre;\n    margin: 5px;\n  }\n}\n\n/*# sourceURL=${import.meta.resolve('./targetCrashedScreen.css')} */`;", "// Copyright 2021 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n/* eslint-disable @devtools/no-imperative-dom-api */\n\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\n/*\n * Copyright (C) 2007 Apple Inc.  All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions\n * are met:\n *\n * 1.  Redistributions of source code must retain the above copyright\n *     notice, this list of conditions and the following disclaimer.\n * 2.  Redistributions in binary form must reproduce the above copyright\n *     notice, this list of conditions and the following disclaimer in the\n *     documentation and/or other materials provided with the distribution.\n * 3.  Neither the name of Apple Computer, Inc. (\"Apple\") nor the names of\n *     its contributors may be used to endorse or promote products derived\n *     from this software without specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY APPLE AND ITS CONTRIBUTORS \"AS IS\" AND ANY\n * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL APPLE OR ITS CONTRIBUTORS BE LIABLE FOR ANY\n * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF\n * THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\nimport * as Common from '../../core/common/common.js';\nimport * as Platform from '../../core/platform/platform.js';\nimport * as SDK from '../../core/sdk/sdk.js';\nimport type * as TextUtils from '../../models/text_utils/text_utils.js';\nimport type * as Buttons from '../components/buttons/buttons.js';\nimport * as Highlighting from '../components/highlighting/highlighting.js';\nimport type {Icon} from '../kit/kit.js';\nimport * as Lit from '../lit/lit.js';\nimport * as VisualLogging from '../visual_logging/visual_logging.js';\n\nimport * as ARIAUtils from './ARIAUtils.js';\nimport {appendStyle} from './DOMUtilities.js';\nimport {type Config, InplaceEditor} from './InplaceEditor.js';\nimport {Keys} from './KeyboardShortcut.js';\nimport type {SearchableView} from './SearchableView.js';\nimport {Tooltip} from './Tooltip.js';\nimport treeoutlineStyles from './treeoutline.css.js';\nimport {\n  createShadowRootWithCoreStyles,\n  deepElementFromPoint,\n  enclosingNodeOrSelfWithNodeNameInArray,\n  HTMLElementWithLightDOMTemplate,\n  InterceptBindingDirective,\n  isEditing,\n} from './UIUtils.js';\n\nconst nodeToParentTreeElementMap = new WeakMap<Node, TreeElement>();\nconst {render} = Lit;\n\nexport enum Events {\n  /* eslint-disable @typescript-eslint/naming-convention -- Used by web_tests. */\n  ElementAttached = 'ElementAttached',\n  ElementsDetached = 'ElementsDetached',\n  ElementExpanded = 'ElementExpanded',\n  ElementCollapsed = 'ElementCollapsed',\n  ElementSelected = 'ElementSelected',\n  /* eslint-enable @typescript-eslint/naming-convention */\n}\n\nexport interface EventTypes {\n  [Events.ElementAttached]: TreeElement;\n  [Events.ElementsDetached]: void;\n  [Events.ElementExpanded]: TreeElement;\n  [Events.ElementCollapsed]: TreeElement;\n  [Events.ElementSelected]: TreeElement;\n}\n\nexport class TreeOutline extends Common.ObjectWrapper.ObjectWrapper<EventTypes> {\n  readonly rootElementInternal: TreeElement;\n  renderSelection: boolean;\n  selectedTreeElement: TreeElement|null;\n  expandTreeElementsWhenArrowing: boolean;\n  comparator: ((arg0: TreeElement, arg1: TreeElement) => number)|null;\n  contentElement: HTMLOListElement;\n  preventTabOrder: boolean;\n  showSelectionOnKeyboardFocus: boolean;\n  private focusable: boolean;\n  element: HTMLElement;\n  private useLightSelectionColor: boolean;\n  private treeElementToScrollIntoView: TreeElement|null;\n  private centerUponScrollIntoView: boolean;\n\n  constructor() {\n    super();\n    this.rootElementInternal = this.createRootElement();\n    this.renderSelection = false;\n\n    this.selectedTreeElement = null;\n    this.expandTreeElementsWhenArrowing = false;\n    this.comparator = null;\n\n    this.contentElement = this.rootElementInternal.childrenListNode;\n    this.contentElement.addEventListener('keydown', this.treeKeyDown.bind(this), false);\n\n    this.preventTabOrder = false;\n    this.showSelectionOnKeyboardFocus = false;\n    this.focusable = true;\n    this.setFocusable(true);\n    this.element = this.contentElement;\n    this.element.setAttribute('jslog', `${VisualLogging.tree()}`);\n    ARIAUtils.markAsTree(this.element);\n    this.useLightSelectionColor = false;\n    this.treeElementToScrollIntoView = null;\n    this.centerUponScrollIntoView = false;\n  }\n\n  setShowSelectionOnKeyboardFocus(show: boolean, preventTabOrder?: boolean): void {\n    this.contentElement.classList.toggle('hide-selection-when-blurred', show);\n    this.preventTabOrder = Boolean(preventTabOrder);\n    if (this.focusable) {\n      this.contentElement.tabIndex = Boolean(preventTabOrder) ? -1 : 0;\n    }\n    this.showSelectionOnKeyboardFocus = show;\n  }\n\n  private createRootElement(): TreeElement {\n    const rootElement = new TreeElement();\n    rootElement.treeOutline = this;\n    rootElement.root = true;\n    rootElement.selectable = false;\n    rootElement.expanded = true;\n    rootElement.childrenListNode.classList.remove('children');\n    return rootElement;\n  }\n\n  rootElement(): TreeElement {\n    return this.rootElementInternal;\n  }\n\n  firstChild(): TreeElement|null {\n    return this.rootElementInternal.firstChild();\n  }\n\n  private lastDescendent(): TreeElement|null {\n    let last = this.rootElementInternal.lastChild();\n    while (last && last.expanded && last.childCount()) {\n      last = last.lastChild();\n    }\n    return last;\n  }\n\n  appendChild(child: TreeElement, comparator?: ((arg0: TreeElement, arg1: TreeElement) => number)): void {\n    this.rootElementInternal.appendChild(child, comparator);\n  }\n\n  insertChild(child: TreeElement, index: number): void {\n    this.rootElementInternal.insertChild(child, index);\n  }\n\n  removeChild(child: TreeElement): void {\n    this.rootElementInternal.removeChild(child);\n  }\n\n  removeChildren(): void {\n    this.rootElementInternal.removeChildren();\n  }\n\n  treeElementFromPoint(x: number, y: number): TreeElement|null {\n    const node = deepElementFromPoint(this.contentElement.ownerDocument, x, y);\n    if (!node) {\n      return null;\n    }\n\n    const listNode = enclosingNodeOrSelfWithNodeNameInArray(node, ['ol', 'li']);\n    if (listNode) {\n      return nodeToParentTreeElementMap.get(listNode) || treeElementBylistItemNode.get(listNode) || null;\n    }\n    return null;\n  }\n\n  treeElementFromEvent(event: MouseEvent|null): TreeElement|null {\n    return event ? this.treeElementFromPoint(event.pageX, event.pageY) : null;\n  }\n\n  setComparator(comparator: ((arg0: TreeElement, arg1: TreeElement) => number)|null): void {\n    this.comparator = comparator;\n  }\n\n  setFocusable(focusable: boolean): void {\n    this.focusable = focusable;\n    this.updateFocusable();\n  }\n\n  updateFocusable(): void {\n    if (this.focusable) {\n      this.contentElement.tabIndex = (this.preventTabOrder || Boolean(this.selectedTreeElement)) ? -1 : 0;\n      if (this.selectedTreeElement) {\n        this.selectedTreeElement.setFocusable(true);\n      }\n    } else {\n      this.contentElement.removeAttribute('tabIndex');\n      if (this.selectedTreeElement) {\n        this.selectedTreeElement.setFocusable(false);\n      }\n    }\n  }\n\n  focus(): void {\n    if (this.selectedTreeElement) {\n      this.selectedTreeElement.listItemElement.focus();\n    } else {\n      this.contentElement.focus();\n    }\n  }\n\n  setUseLightSelectionColor(flag: boolean): void {\n    this.useLightSelectionColor = flag;\n  }\n\n  getUseLightSelectionColor(): boolean {\n    return this.useLightSelectionColor;\n  }\n\n  bindTreeElement(element: TreeElement): void {\n    if (element.treeOutline) {\n      console.error('Binding element for the second time: ' + new Error().stack);\n    }\n    element.treeOutline = this;\n    element.onbind();\n  }\n\n  unbindTreeElement(element: TreeElement): void {\n    if (!element.treeOutline) {\n      console.error('Unbinding element that was not bound: ' + new Error().stack);\n    }\n\n    element.deselect();\n    element.onunbind();\n    element.treeOutline = null;\n  }\n\n  selectPrevious(): boolean {\n    let nextSelectedElement = this.selectedTreeElement?.traversePreviousTreeElement(true) ?? null;\n    while (nextSelectedElement && !nextSelectedElement.selectable) {\n      nextSelectedElement = nextSelectedElement.traversePreviousTreeElement(!this.expandTreeElementsWhenArrowing);\n    }\n    if (!nextSelectedElement) {\n      return false;\n    }\n    nextSelectedElement.select(false, true);\n    return true;\n  }\n\n  selectNext(): boolean {\n    let nextSelectedElement = this.selectedTreeElement?.traverseNextTreeElement(true) ?? null;\n    while (nextSelectedElement && !nextSelectedElement.selectable) {\n      nextSelectedElement = nextSelectedElement.traverseNextTreeElement(!this.expandTreeElementsWhenArrowing);\n    }\n    if (!nextSelectedElement) {\n      return false;\n    }\n    nextSelectedElement.select(false, true);\n    return true;\n  }\n\n  forceSelect(omitFocus: boolean|undefined = false, selectedByUser: boolean|undefined = true): void {\n    if (this.selectedTreeElement) {\n      this.selectedTreeElement.deselect();\n    }\n    this.selectFirst(omitFocus, selectedByUser);\n  }\n\n  private selectFirst(omitFocus: boolean|undefined = false, selectedByUser: boolean|undefined = true): boolean {\n    let first = this.firstChild();\n    while (first && !first.selectable) {\n      first = first.traverseNextTreeElement(true);\n    }\n    if (!first) {\n      return false;\n    }\n    first.select(omitFocus, selectedByUser);\n    return true;\n  }\n\n  private selectLast(): boolean {\n    let last = this.lastDescendent();\n    while (last && !last.selectable) {\n      last = last.traversePreviousTreeElement(true);\n    }\n    if (!last) {\n      return false;\n    }\n    last.select(false, true);\n    return true;\n  }\n\n  private treeKeyDown(event: KeyboardEvent): void {\n    if (event.shiftKey || event.metaKey || event.ctrlKey || isEditing()) {\n      return;\n    }\n\n    let handled = false;\n    if (!this.selectedTreeElement) {\n      if (event.key === 'ArrowUp' && !event.altKey) {\n        handled = this.selectLast();\n      } else if (event.key === 'ArrowDown' && !event.altKey) {\n        handled = this.selectFirst();\n      }\n    } else if (event.key === 'ArrowUp' && !event.altKey) {\n      handled = this.selectPrevious();\n    } else if (event.key === 'ArrowDown' && !event.altKey) {\n      handled = this.selectNext();\n    } else if (event.key === 'ArrowLeft') {\n      handled = this.selectedTreeElement.collapseOrAscend(event.altKey);\n    } else if (event.key === 'ArrowRight') {\n      if (!this.selectedTreeElement.revealed()) {\n        this.selectedTreeElement.reveal();\n        handled = true;\n      } else {\n        handled = this.selectedTreeElement.descendOrExpand(event.altKey);\n      }\n    } else if (event.keyCode === 8 /* Backspace */ || event.keyCode === 46 /* Delete */) {\n      handled = this.selectedTreeElement.ondelete();\n    } else if (event.key === 'Enter') {\n      handled = this.selectedTreeElement.onenter();\n    } else if (event.keyCode === Keys.Space.code) {\n      handled = this.selectedTreeElement.onspace();\n    } else if (event.key === 'Home') {\n      handled = this.selectFirst();\n    } else if (event.key === 'End') {\n      handled = this.selectLast();\n    }\n\n    if (handled) {\n      event.consume(true);\n    }\n  }\n\n  deferredScrollIntoView(treeElement: TreeElement, center: boolean): void {\n    const deferredScrollIntoView = (): void => {\n      if (!this.treeElementToScrollIntoView) {\n        return;\n      }\n\n      // This function doesn't use scrollIntoViewIfNeeded because it always\n      // scrolls in both directions even if only one is necessary to bring the\n      // item into view.\n      const itemRect = this.treeElementToScrollIntoView.listItemElement.getBoundingClientRect();\n      const treeRect = this.contentElement.getBoundingClientRect();\n\n      // Usually, this.element is the tree container that scrolls. But sometimes\n      // (i.e. in the Elements panel), its parent is.\n      let scrollParentElement: Element = this.element;\n      while (getComputedStyle(scrollParentElement).overflow === 'visible' &&\n             scrollParentElement.parentElementOrShadowHost()) {\n        const parent = scrollParentElement.parentElementOrShadowHost();\n        Platform.assertNotNullOrUndefined(parent);\n        scrollParentElement = parent;\n      }\n\n      const viewRect = scrollParentElement.getBoundingClientRect();\n\n      const currentScrollX = viewRect.left - treeRect.left;\n      const currentScrollY = viewRect.top - treeRect.top + this.contentElement.offsetTop;\n\n      // Only scroll into view on each axis if the item is not visible at all\n      // but if we do scroll and centerUponScrollIntoView is true\n      // then we center the top left corner of the item in view.\n      let deltaLeft: number = itemRect.left - treeRect.left;\n      if (deltaLeft > currentScrollX && deltaLeft < currentScrollX + viewRect.width) {\n        deltaLeft = currentScrollX;\n      } else if (this.centerUponScrollIntoView) {\n        deltaLeft = deltaLeft - viewRect.width / 2;\n      }\n      let deltaTop: number = itemRect.top - treeRect.top;\n      if (deltaTop > currentScrollY && deltaTop < currentScrollY + viewRect.height) {\n        deltaTop = currentScrollY;\n      } else if (this.centerUponScrollIntoView) {\n        deltaTop = deltaTop - viewRect.height / 2;\n      }\n      scrollParentElement.scrollTo(deltaLeft, deltaTop);\n      this.treeElementToScrollIntoView = null;\n    };\n\n    if (!this.treeElementToScrollIntoView) {\n      this.element.window().requestAnimationFrame(deferredScrollIntoView);\n    }\n    this.treeElementToScrollIntoView = treeElement;\n    this.centerUponScrollIntoView = center;\n  }\n\n  onStartedEditingTitle(_treeElement: TreeElement): void {\n  }\n}\n\nexport const enum TreeVariant {\n  NAVIGATION_TREE = 'NavigationTree',\n  OTHER = 'Other',\n}\n\nexport class TreeOutlineInShadow extends TreeOutline {\n  override element: HTMLElement;\n  shadowRoot: ShadowRoot;\n  private readonly disclosureElement: Element;\n  override renderSelection: boolean;\n  constructor(variant: TreeVariant = TreeVariant.OTHER, element?: HTMLElement) {\n    super();\n    this.contentElement.classList.add('tree-outline');\n    this.element = element ?? document.createElement('div');\n    this.shadowRoot = createShadowRootWithCoreStyles(this.element, {cssFile: treeoutlineStyles});\n    this.disclosureElement = this.shadowRoot.createChild('div', 'tree-outline-disclosure');\n    this.disclosureElement.appendChild(this.contentElement);\n    this.renderSelection = true;\n\n    if (variant === TreeVariant.NAVIGATION_TREE) {\n      this.contentElement.classList.add('tree-variant-navigation');\n    }\n  }\n\n  setVariant(variant: TreeVariant): void {\n    this.contentElement.classList.toggle('tree-variant-navigation', variant === TreeVariant.NAVIGATION_TREE);\n  }\n\n  registerRequiredCSS(...cssFiles: Array<string&{_tag: 'CSS-in-JS'}>): void {\n    for (const cssFile of cssFiles) {\n      appendStyle(this.shadowRoot, cssFile);\n    }\n  }\n\n  setHideOverflow(hideOverflow: boolean): void {\n    this.disclosureElement.classList.toggle('tree-outline-disclosure-hide-overflow', hideOverflow);\n  }\n\n  setDense(dense: boolean): void {\n    this.contentElement.classList.toggle('tree-outline-dense', dense);\n  }\n\n  override onStartedEditingTitle(treeElement: TreeElement): void {\n    const selection = this.shadowRoot.getSelection();\n    if (selection) {\n      selection.selectAllChildren(treeElement.titleElement);\n    }\n  }\n}\n\nexport const treeElementBylistItemNode = new WeakMap<Node, TreeElement>();\nexport class TreeElement {\n  treeOutline: TreeOutline|null;\n  parent: TreeElement|null;\n  previousSibling: TreeElement|null;\n  nextSibling: TreeElement|null;\n  private readonly boundOnFocus: () => void;\n  private readonly boundOnBlur: () => void;\n  readonly listItemNode: HTMLLIElement;\n  titleElement: Node;\n  titleInternal: string|Node;\n  private childrenInternal: TreeElement[]|null;\n  childrenListNode: HTMLOListElement;\n  private expandLoggable = {};\n  private hiddenInternal: boolean;\n  private selectableInternal: boolean;\n  expanded: boolean;\n  selected: boolean;\n  private expandable!: boolean;\n  #expandRecursively = true;\n  private collapsible: boolean;\n  toggleOnClick: boolean;\n  button: Buttons.Button.Button|null;\n  root: boolean;\n  private tooltipInternal: string;\n  private leadingIconsElement: HTMLElement|null;\n  private trailingIconsElement: HTMLElement|null;\n  protected selectionElementInternal: HTMLElement|null;\n  private disableSelectFocus: boolean;\n  constructor(title?: string|Node, expandable?: boolean, jslogContext?: string|number) {\n    this.treeOutline = null;\n    this.parent = null;\n    this.previousSibling = null;\n    this.nextSibling = null;\n    this.boundOnFocus = this.onFocus.bind(this);\n    this.boundOnBlur = this.onBlur.bind(this);\n    this.listItemNode = document.createElement('li');\n\n    this.titleElement = this.listItemNode.createChild('span', 'tree-element-title');\n    treeElementBylistItemNode.set(this.listItemNode, this);\n    this.titleInternal = '';\n    if (title) {\n      this.title = title;\n    }\n    this.listItemNode.addEventListener('mousedown', (this.handleMouseDown.bind(this) as EventListener), false);\n    this.listItemNode.addEventListener('click', (this.treeElementToggled.bind(this) as EventListener), false);\n    this.listItemNode.addEventListener('dblclick', this.handleDoubleClick.bind(this), false);\n    this.listItemNode.setAttribute(\n        'jslog', `${VisualLogging.treeItem().parent('parentTreeItem').context(jslogContext).track({\n          click: true,\n          keydown: 'ArrowUp|ArrowDown|ArrowLeft|ArrowRight|Backspace|Delete|Enter|Space|Home|End',\n        })}`);\n    ARIAUtils.markAsTreeitem(this.listItemNode);\n\n    this.childrenInternal = null;\n    this.childrenListNode = document.createElement('ol');\n    nodeToParentTreeElementMap.set(this.childrenListNode, this);\n    this.childrenListNode.classList.add('children');\n    ARIAUtils.markAsGroup(this.childrenListNode);\n\n    this.hiddenInternal = false;\n    this.selectableInternal = true;\n    this.expanded = false;\n    this.selected = false;\n    this.setExpandable(expandable || false);\n    this.collapsible = true;\n    this.toggleOnClick = false;\n    this.button = null;\n    this.root = false;\n    this.tooltipInternal = '';\n    this.leadingIconsElement = null;\n    this.trailingIconsElement = null;\n    this.selectionElementInternal = null;\n    this.disableSelectFocus = false;\n  }\n\n  static getTreeElementBylistItemNode(node: Node): TreeElement|undefined {\n    return treeElementBylistItemNode.get(node);\n  }\n\n  hasAncestor(ancestor: TreeElement|null): boolean {\n    if (!ancestor) {\n      return false;\n    }\n\n    let currentNode: (TreeElement|null) = this.parent;\n    while (currentNode) {\n      if (ancestor === currentNode) {\n        return true;\n      }\n      currentNode = currentNode.parent;\n    }\n\n    return false;\n  }\n\n  hasAncestorOrSelf(ancestor: TreeElement|null): boolean {\n    return this === ancestor || this.hasAncestor(ancestor);\n  }\n\n  isHidden(): boolean {\n    if (this.hidden) {\n      return true;\n    }\n\n    let currentNode: (TreeElement|null) = this.parent;\n    while (currentNode) {\n      if (currentNode.hidden) {\n        return true;\n      }\n      currentNode = currentNode.parent;\n    }\n\n    return false;\n  }\n\n  children(): TreeElement[] {\n    return this.childrenInternal || [];\n  }\n\n  childCount(): number {\n    return this.childrenInternal ? this.childrenInternal.length : 0;\n  }\n\n  firstChild(): TreeElement|null {\n    return this.childrenInternal ? this.childrenInternal[0] : null;\n  }\n\n  lastChild(): TreeElement|null {\n    return this.childrenInternal ? this.childrenInternal[this.childrenInternal.length - 1] : null;\n  }\n\n  childAt(index: number): TreeElement|null {\n    return this.childrenInternal ? this.childrenInternal[index] : null;\n  }\n\n  indexOfChild(child: TreeElement): number {\n    return this.childrenInternal ? this.childrenInternal.indexOf(child) : -1;\n  }\n\n  appendChild(child: TreeElement, comparator?: ((arg0: TreeElement, arg1: TreeElement) => number)): void {\n    if (!this.childrenInternal) {\n      this.childrenInternal = [];\n    }\n\n    let insertionIndex;\n    if (comparator) {\n      insertionIndex = Platform.ArrayUtilities.lowerBound(this.childrenInternal, child, comparator);\n    } else if (this.treeOutline?.comparator) {\n      insertionIndex = Platform.ArrayUtilities.lowerBound(this.childrenInternal, child, this.treeOutline.comparator);\n    } else {\n      insertionIndex = this.childrenInternal.length;\n    }\n    this.insertChild(child, insertionIndex);\n  }\n\n  insertChild(child: TreeElement, index: number): void {\n    if (!this.childrenInternal) {\n      this.childrenInternal = [];\n    }\n\n    if (!child) {\n      throw new Error('child can\\'t be undefined or null');\n    }\n\n    console.assert(\n        !child.parent, 'Attempting to insert a child that is already in the tree, reparenting is not supported.');\n\n    const previousChild = (index > 0 ? this.childrenInternal[index - 1] : null);\n    if (previousChild) {\n      previousChild.nextSibling = child;\n      child.previousSibling = previousChild;\n    } else {\n      child.previousSibling = null;\n    }\n\n    const nextChild = this.childrenInternal[index];\n    if (nextChild) {\n      nextChild.previousSibling = child;\n      child.nextSibling = nextChild;\n    } else {\n      child.nextSibling = null;\n    }\n\n    this.childrenInternal.splice(index, 0, child);\n\n    this.setExpandable(true);\n    child.parent = this;\n\n    if (this.treeOutline) {\n      this.treeOutline.bindTreeElement(child);\n    }\n    for (let current = child.firstChild(); this.treeOutline && current;\n         current = current.traverseNextTreeElement(false, child, true)) {\n      this.treeOutline.bindTreeElement(current);\n    }\n    child.onattach();\n    child.ensureSelection();\n    if (this.treeOutline) {\n      this.treeOutline.dispatchEventToListeners(Events.ElementAttached, child);\n    }\n    const nextSibling = child.nextSibling ? child.nextSibling.listItemNode : null;\n    this.childrenListNode.insertBefore(child.listItemNode, nextSibling);\n    this.childrenListNode.insertBefore(child.childrenListNode, nextSibling);\n    if (child.selected) {\n      child.select();\n    }\n    if (child.expanded) {\n      child.expand();\n    }\n  }\n\n  removeChildAtIndex(childIndex: number): void {\n    if (!this.childrenInternal || childIndex < 0 || childIndex >= this.childrenInternal.length) {\n      throw new Error('childIndex out of range');\n    }\n\n    const child = this.childrenInternal[childIndex];\n    this.childrenInternal.splice(childIndex, 1);\n\n    const parent = child.parent;\n    if (this.treeOutline?.selectedTreeElement?.hasAncestorOrSelf(child)) {\n      if (child.nextSibling) {\n        child.nextSibling.select(true);\n      } else if (child.previousSibling) {\n        child.previousSibling.select(true);\n      } else if (parent) {\n        parent.select(true);\n      }\n    }\n\n    if (child.previousSibling) {\n      child.previousSibling.nextSibling = child.nextSibling;\n    }\n    if (child.nextSibling) {\n      child.nextSibling.previousSibling = child.previousSibling;\n    }\n    child.parent = null;\n\n    if (this.treeOutline) {\n      this.treeOutline.unbindTreeElement(child);\n    }\n    for (let current = child.firstChild(); this.treeOutline && current;\n         current = current.traverseNextTreeElement(false, child, true)) {\n      this.treeOutline.unbindTreeElement(current);\n    }\n\n    child.detach();\n    if (this.treeOutline) {\n      this.treeOutline.dispatchEventToListeners(Events.ElementsDetached);\n    }\n  }\n\n  removeChild(child: TreeElement): void {\n    if (!child) {\n      throw new Error('child can\\'t be undefined or null');\n    }\n    if (child.parent !== this) {\n      return;\n    }\n\n    const childIndex = this.childrenInternal ? this.childrenInternal.indexOf(child) : -1;\n    if (childIndex === -1) {\n      throw new Error('child not found in this node\\'s children');\n    }\n\n    this.removeChildAtIndex(childIndex);\n  }\n\n  removeChildren(): void {\n    if (!this.root && this.treeOutline?.selectedTreeElement?.hasAncestorOrSelf(this)) {\n      this.select(true);\n    }\n\n    if (this.childrenInternal) {\n      for (const child of this.childrenInternal) {\n        child.previousSibling = null;\n        child.nextSibling = null;\n        child.parent = null;\n\n        if (this.treeOutline) {\n          this.treeOutline.unbindTreeElement(child);\n        }\n        for (let current = child.firstChild(); this.treeOutline && current;\n             current = current.traverseNextTreeElement(false, child, true)) {\n          this.treeOutline.unbindTreeElement(current);\n        }\n        child.detach();\n      }\n    }\n    this.childrenInternal = [];\n    if (this.treeOutline) {\n      this.treeOutline.dispatchEventToListeners(Events.ElementsDetached);\n    }\n  }\n\n  get selectable(): boolean {\n    if (this.isHidden()) {\n      return false;\n    }\n    return this.selectableInternal;\n  }\n\n  set selectable(x: boolean) {\n    this.selectableInternal = x;\n  }\n\n  get listItemElement(): HTMLLIElement {\n    return this.listItemNode;\n  }\n\n  get childrenListElement(): HTMLOListElement {\n    return this.childrenListNode;\n  }\n\n  get title(): string|Node {\n    return this.titleInternal;\n  }\n\n  set title(x: string|Node) {\n    if (this.titleInternal === x) {\n      return;\n    }\n    this.titleInternal = x;\n\n    if (typeof x === 'string') {\n      this.titleElement.textContent = x;\n      this.tooltip = x;\n    } else {\n      this.titleElement = x;\n      this.tooltip = '';\n    }\n\n    this.listItemNode.removeChildren();\n    if (this.leadingIconsElement) {\n      this.listItemNode.appendChild(this.leadingIconsElement);\n    }\n    this.listItemNode.appendChild(this.titleElement);\n    if (this.trailingIconsElement) {\n      this.listItemNode.appendChild(this.trailingIconsElement);\n    }\n    this.ensureSelection();\n  }\n\n  titleAsText(): string {\n    if (!this.titleInternal) {\n      return '';\n    }\n    if (typeof this.titleInternal === 'string') {\n      return this.titleInternal;\n    }\n    return this.titleInternal.textContent || '';\n  }\n\n  startEditingTitle<T>(editingConfig: Config<T>): void {\n    InplaceEditor.startEditing((this.titleElement as Element), editingConfig);\n    if (this.treeOutline) {\n      this.treeOutline.onStartedEditingTitle(this);\n    }\n  }\n\n  setLeadingIcons(icons: Icon[]|Lit.TemplateResult[]): void {\n    if (!this.leadingIconsElement && !icons.length) {\n      return;\n    }\n    if (!this.leadingIconsElement) {\n      this.leadingIconsElement = document.createElement('div');\n      this.leadingIconsElement.classList.add('leading-icons');\n      this.leadingIconsElement.classList.add('icons-container');\n      this.listItemNode.insertBefore(this.leadingIconsElement, this.titleElement);\n      this.ensureSelection();\n    }\n    // eslint-disable-next-line @devtools/no-lit-render-outside-of-view\n    render(icons, this.leadingIconsElement);\n  }\n\n  get tooltip(): string {\n    return this.tooltipInternal;\n  }\n\n  set tooltip(x: string) {\n    if (this.tooltipInternal === x) {\n      return;\n    }\n    this.tooltipInternal = x;\n    Tooltip.install(this.listItemNode, x);\n  }\n\n  isExpandable(): boolean {\n    return this.expandable;\n  }\n\n  setExpandable(expandable: boolean): void {\n    if (this.expandable === expandable) {\n      return;\n    }\n\n    this.expandable = expandable;\n\n    this.listItemNode.classList.toggle('parent', expandable);\n    if (!expandable) {\n      this.collapse();\n      ARIAUtils.unsetExpandable(this.listItemNode);\n    } else {\n      VisualLogging.registerLoggable(\n          this.expandLoggable, `${VisualLogging.expand()}`, this.listItemNode, new DOMRect(0, 0, 16, 16));\n      ARIAUtils.setExpanded(this.listItemNode, false);\n    }\n  }\n\n  isExpandRecursively(): boolean {\n    return this.#expandRecursively;\n  }\n\n  setExpandRecursively(expandRecursively: boolean): void {\n    this.#expandRecursively = expandRecursively;\n  }\n\n  isCollapsible(): boolean {\n    return this.collapsible;\n  }\n\n  setCollapsible(collapsible: boolean): void {\n    if (this.collapsible === collapsible) {\n      return;\n    }\n\n    this.collapsible = collapsible;\n\n    this.listItemNode.classList.toggle('always-parent', !collapsible);\n    if (!collapsible) {\n      this.expand();\n    }\n  }\n\n  get hidden(): boolean {\n    return this.hiddenInternal;\n  }\n\n  set hidden(x: boolean) {\n    if (this.hiddenInternal === x) {\n      return;\n    }\n\n    this.hiddenInternal = x;\n\n    this.listItemNode.classList.toggle('hidden', x);\n    this.childrenListNode.classList.toggle('hidden', x);\n\n    if (x && this.treeOutline?.selectedTreeElement?.hasAncestorOrSelf(this)) {\n      const hadFocus = this.treeOutline.selectedTreeElement.listItemElement.hasFocus();\n      this.treeOutline.forceSelect(!hadFocus, /* selectedByUser */ false);\n    }\n  }\n\n  invalidateChildren(): void {\n    if (this.childrenInternal) {\n      this.removeChildren();\n      this.childrenInternal = null;\n    }\n  }\n\n  private ensureSelection(): void {\n    if (!this.treeOutline?.renderSelection) {\n      return;\n    }\n    if (!this.selectionElementInternal) {\n      this.selectionElementInternal = document.createElement('div');\n      this.selectionElementInternal.classList.add('selection');\n      this.selectionElementInternal.classList.add('fill');\n    }\n    this.listItemNode.insertBefore(this.selectionElementInternal, this.listItemElement.firstChild);\n  }\n\n  private treeElementToggled(event: MouseEvent): void {\n    const element = (event.currentTarget as Node | null);\n    if (!element || treeElementBylistItemNode.get(element) !== this || element.hasSelection()) {\n      return;\n    }\n\n    console.assert(Boolean(this.treeOutline));\n    const showSelectionOnKeyboardFocus = this.treeOutline ? this.treeOutline.showSelectionOnKeyboardFocus : false;\n    const toggleOnClick = this.toggleOnClick && (showSelectionOnKeyboardFocus || !this.selectable);\n    const isInTriangle = this.isEventWithinDisclosureTriangle(event);\n    if (!toggleOnClick && !isInTriangle) {\n      return;\n    }\n\n    if (this.expanded) {\n      if (event.altKey) {\n        this.collapseRecursively();\n      } else {\n        this.collapse();\n      }\n    } else if (event.altKey) {\n      void this.expandRecursively();\n    } else {\n      this.expand();\n    }\n    void VisualLogging.logClick(this.expandLoggable, event);\n    event.consume();\n  }\n\n  private handleMouseDown(event: MouseEvent): void {\n    const element = (event.currentTarget as Node | null);\n    if (!element) {\n      return;\n    }\n    if (!this.selectable) {\n      return;\n    }\n    if (treeElementBylistItemNode.get(element) !== this) {\n      return;\n    }\n\n    if (this.isEventWithinDisclosureTriangle(event)) {\n      return;\n    }\n\n    this.selectOnMouseDown(event);\n  }\n\n  private handleDoubleClick(event: Event): void {\n    const element = (event.currentTarget as Node | null);\n    if (!element || treeElementBylistItemNode.get(element) !== this) {\n      return;\n    }\n\n    const handled = this.ondblclick(event);\n    if (handled) {\n      return;\n    }\n    if (this.expandable && !this.expanded) {\n      this.expand();\n    }\n  }\n\n  private detach(): void {\n    this.listItemNode.remove();\n    this.childrenListNode.remove();\n  }\n\n  collapse(): void {\n    if (!this.expanded || !this.collapsible) {\n      return;\n    }\n    this.listItemNode.classList.remove('expanded');\n    this.childrenListNode.classList.remove('expanded');\n    ARIAUtils.setExpanded(this.listItemNode, false);\n    this.expanded = false;\n    this.oncollapse();\n    if (this.treeOutline) {\n      this.treeOutline.dispatchEventToListeners(Events.ElementCollapsed, this);\n    }\n\n    const selectedTreeElement = this.treeOutline?.selectedTreeElement;\n    if (selectedTreeElement?.hasAncestor(this)) {\n      this.select(/* omitFocus */ true, /* selectedByUser */ true);\n    }\n  }\n\n  collapseRecursively(): void {\n    let item: (TreeElement|null)|this = this;\n    while (item) {\n      if (item.expanded) {\n        item.collapse();\n      }\n      item = item.traverseNextTreeElement(false, this, true);\n    }\n  }\n\n  collapseChildren(): void {\n    if (!this.childrenInternal) {\n      return;\n    }\n    for (const child of this.childrenInternal) {\n      child.collapseRecursively();\n    }\n  }\n\n  expand(): void {\n    if (!this.expandable || (this.expanded && this.childrenInternal)) {\n      return;\n    }\n\n    // Set this before onpopulate. Since onpopulate can add elements, this makes\n    // sure the expanded flag is true before calling those functions. This prevents the possibility\n    // of an infinite loop if onpopulate were to call expand.\n\n    this.expanded = true;\n\n    void this.populateIfNeeded();\n    this.listItemNode.classList.add('expanded');\n    this.childrenListNode.classList.add('expanded');\n    ARIAUtils.setExpanded(this.listItemNode, true);\n\n    if (this.treeOutline) {\n      this.onexpand();\n      this.treeOutline.dispatchEventToListeners(Events.ElementExpanded, this);\n    }\n  }\n\n  async expandRecursively(maxDepth?: number): Promise<void> {\n    let item: (TreeElement|null)|this = this;\n    const info = {depthChange: 0};\n    let depth = 0;\n\n    // The Inspector uses TreeOutlines to represents object properties, so recursive expansion\n    // in some case can be infinite, since JavaScript objects can hold circular references.\n    // So default to a recursion cap of 3 levels, since that gives fairly good results.\n    if (maxDepth === undefined || isNaN(maxDepth)) {\n      maxDepth = 3;\n    }\n\n    do {\n      if (item.isExpandRecursively()) {\n        await item.populateIfNeeded();\n\n        if (depth < maxDepth) {\n          item.expand();\n        }\n      }\n      item = item.traverseNextTreeElement(!item.isExpandRecursively(), this, true, info);\n      depth += info.depthChange;\n    } while (item !== null);\n  }\n\n  collapseOrAscend(altKey: boolean): boolean {\n    if (this.expanded && this.collapsible) {\n      if (altKey) {\n        this.collapseRecursively();\n      } else {\n        this.collapse();\n      }\n      return true;\n    }\n\n    if (!this.parent || this.parent.root) {\n      return false;\n    }\n\n    if (!this.parent.selectable) {\n      this.parent.collapse();\n      return true;\n    }\n\n    let nextSelectedElement: (TreeElement|null)|TreeElement = this.parent;\n    while (nextSelectedElement && !nextSelectedElement.selectable) {\n      nextSelectedElement = nextSelectedElement.parent;\n    }\n\n    if (!nextSelectedElement) {\n      return false;\n    }\n    nextSelectedElement.select(false, true);\n    return true;\n  }\n\n  descendOrExpand(altKey: boolean): boolean {\n    if (!this.expandable) {\n      return false;\n    }\n\n    if (!this.expanded) {\n      if (altKey) {\n        void this.expandRecursively();\n      } else {\n        this.expand();\n      }\n      return true;\n    }\n\n    let nextSelectedElement = this.firstChild();\n    while (nextSelectedElement && !nextSelectedElement.selectable) {\n      nextSelectedElement = nextSelectedElement.nextSibling;\n    }\n\n    if (!nextSelectedElement) {\n      return false;\n    }\n    nextSelectedElement.select(false, true);\n    return true;\n  }\n\n  reveal(center?: boolean): void {\n    let currentAncestor: (TreeElement|null) = this.parent;\n    while (currentAncestor && !currentAncestor.root) {\n      if (!currentAncestor.expanded) {\n        currentAncestor.expand();\n      }\n      currentAncestor = currentAncestor.parent;\n    }\n\n    if (this.treeOutline) {\n      this.treeOutline.deferredScrollIntoView(this, Boolean(center));\n    }\n  }\n\n  revealed(): boolean {\n    let currentAncestor: (TreeElement|null) = this.parent;\n    while (currentAncestor && !currentAncestor.root) {\n      if (!currentAncestor.expanded) {\n        return false;\n      }\n      currentAncestor = currentAncestor.parent;\n    }\n\n    return true;\n  }\n\n  selectOnMouseDown(event: MouseEvent): void {\n    if (this.select(false, true)) {\n      event.consume(true);\n    }\n\n    if (this.listItemNode.draggable && this.selectionElementInternal && this.treeOutline) {\n      const marginLeft = this.treeOutline.element.getBoundingClientRect().left -\n          this.listItemNode.getBoundingClientRect().left - this.treeOutline.element.scrollLeft;\n      // By default the left margin extends far off screen. This is not a problem except when dragging an element.\n      // Setting the margin once here should be fine, because we believe the left margin should never change.\n      this.selectionElementInternal.style.setProperty('margin-left', marginLeft + 'px');\n    }\n  }\n\n  select(omitFocus?: boolean, selectedByUser?: boolean): boolean {\n    omitFocus = omitFocus || this.disableSelectFocus;\n    if (!this.treeOutline || !this.selectable || this.selected) {\n      if (!omitFocus) {\n        this.listItemElement.focus();\n      }\n      return false;\n    }\n    // Wait to deselect this element so that focus only changes once\n    const lastSelected = this.treeOutline.selectedTreeElement;\n    this.treeOutline.selectedTreeElement = null;\n\n    if (this.treeOutline.rootElementInternal === this) {\n      if (lastSelected) {\n        lastSelected.deselect();\n      }\n      if (!omitFocus) {\n        this.listItemElement.focus();\n      }\n      return false;\n    }\n\n    this.selected = true;\n\n    this.treeOutline.selectedTreeElement = this;\n    this.treeOutline.updateFocusable();\n    if (!omitFocus || this.treeOutline.contentElement.hasFocus()) {\n      this.listItemElement.focus();\n    }\n\n    this.listItemNode.classList.add('selected');\n    ARIAUtils.setSelected(this.listItemNode, true);\n    this.treeOutline.dispatchEventToListeners(Events.ElementSelected, this);\n    if (lastSelected) {\n      lastSelected.deselect();\n    }\n    return this.onselect(selectedByUser);\n  }\n\n  setFocusable(focusable: boolean): void {\n    if (focusable) {\n      this.listItemNode.setAttribute('tabIndex', (this.treeOutline?.preventTabOrder) ? '-1' : '0');\n      this.listItemNode.addEventListener('focus', this.boundOnFocus, false);\n      this.listItemNode.addEventListener('blur', this.boundOnBlur, false);\n    } else {\n      this.listItemNode.removeAttribute('tabIndex');\n      this.listItemNode.removeEventListener('focus', this.boundOnFocus, false);\n      this.listItemNode.removeEventListener('blur', this.boundOnBlur, false);\n    }\n  }\n\n  private onFocus(): void {\n    if (!this.treeOutline || this.treeOutline.getUseLightSelectionColor()) {\n      return;\n    }\n    if (!this.treeOutline.contentElement.classList.contains('hide-selection-when-blurred')) {\n      this.listItemNode.classList.add('force-white-icons');\n    }\n  }\n\n  private onBlur(): void {\n    if (!this.treeOutline || this.treeOutline.getUseLightSelectionColor()) {\n      return;\n    }\n    if (!this.treeOutline.contentElement.classList.contains('hide-selection-when-blurred')) {\n      this.listItemNode.classList.remove('force-white-icons');\n    }\n  }\n\n  revealAndSelect(omitFocus?: boolean): void {\n    this.reveal(true);\n    this.select(omitFocus);\n  }\n\n  deselect(): void {\n    const hadFocus = this.listItemNode.hasFocus();\n    this.selected = false;\n    this.listItemNode.classList.remove('selected');\n    ARIAUtils.clearSelected(this.listItemNode);\n    this.setFocusable(false);\n\n    if (this.treeOutline?.selectedTreeElement === this) {\n      this.treeOutline.selectedTreeElement = null;\n      this.treeOutline.updateFocusable();\n      if (hadFocus) {\n        this.treeOutline.focus();\n      }\n    }\n  }\n\n  private async populateIfNeeded(): Promise<void> {\n    if (this.treeOutline && this.expandable && !this.childrenInternal) {\n      this.childrenInternal = [];\n      await this.onpopulate();\n    }\n  }\n\n  async onpopulate(): Promise<void> {\n    // Overridden by subclasses.\n  }\n\n  onenter(): boolean {\n    if (this.expandable && !this.expanded) {\n      this.expand();\n      return true;\n    }\n    if (this.collapsible && this.expanded) {\n      this.collapse();\n      return true;\n    }\n    return false;\n  }\n\n  ondelete(): boolean {\n    return false;\n  }\n\n  onspace(): boolean {\n    return false;\n  }\n\n  onbind(): void {\n  }\n\n  onunbind(): void {\n  }\n\n  onattach(): void {\n  }\n\n  onexpand(): void {\n  }\n\n  oncollapse(): void {\n  }\n\n  ondblclick(_e: Event): boolean {\n    return false;\n  }\n\n  onselect(_selectedByUser?: boolean): boolean {\n    return false;\n  }\n\n  traverseNextTreeElement(skipUnrevealed: boolean, stayWithin?: TreeElement|null, dontPopulate?: boolean, info?: {\n    depthChange: number,\n  }): TreeElement|null {\n    if (!dontPopulate) {\n      void this.populateIfNeeded();\n    }\n\n    if (info) {\n      info.depthChange = 0;\n    }\n\n    let element: (TreeElement|null)|this =\n        skipUnrevealed ? (this.revealed() ? this.firstChild() : null) : this.firstChild();\n    if (element && (!skipUnrevealed || (skipUnrevealed && this.expanded))) {\n      if (info) {\n        info.depthChange = 1;\n      }\n      return element;\n    }\n\n    if (this === stayWithin) {\n      return null;\n    }\n\n    element = skipUnrevealed ? (this.revealed() ? this.nextSibling : null) : this.nextSibling;\n    if (element) {\n      return element;\n    }\n\n    element = this;\n    while (element && !element.root &&\n           !(skipUnrevealed ? (element.revealed() ? element.nextSibling : null) : element.nextSibling) &&\n           element.parent !== stayWithin) {\n      if (info) {\n        info.depthChange -= 1;\n      }\n      element = element.parent;\n    }\n\n    if (!element || element.root) {\n      return null;\n    }\n\n    return (skipUnrevealed ? (element.revealed() ? element.nextSibling : null) : element.nextSibling);\n  }\n\n  traversePreviousTreeElement(skipUnrevealed: boolean, dontPopulate?: boolean): TreeElement|null {\n    let element: (TreeElement|null) =\n        skipUnrevealed ? (this.revealed() ? this.previousSibling : null) : this.previousSibling;\n    if (!dontPopulate && element) {\n      void element.populateIfNeeded();\n    }\n\n    while (element &&\n           (skipUnrevealed ? (element.revealed() && element.expanded ? element.lastChild() : null) :\n                             element.lastChild())) {\n      if (!dontPopulate) {\n        void element.populateIfNeeded();\n      }\n      element =\n          (skipUnrevealed ? (element.revealed() && element.expanded ? element.lastChild() : null) :\n                            element.lastChild());\n    }\n\n    if (element) {\n      return element;\n    }\n\n    if (!this.parent || this.parent.root) {\n      return null;\n    }\n\n    return this.parent;\n  }\n\n  isEventWithinDisclosureTriangle(event: MouseEvent): boolean {\n    const arrowToggleWidth = 10;\n    // FIXME: We should not use getComputedStyle(). For that we need to get rid of using ::before for disclosure triangle. (http://webk.it/74446)\n    const paddingLeftValue = window.getComputedStyle(this.listItemNode).paddingLeft;\n    console.assert(paddingLeftValue.endsWith('px'));\n    const computedLeftPadding = parseFloat(paddingLeftValue);\n    const left = this.listItemNode.getBoundingClientRect().left + computedLeftPadding;\n    return event.pageX >= left && event.pageX <= left + arrowToggleWidth && this.expandable;\n  }\n\n  setDisableSelectFocus(toggle: boolean): void {\n    this.disableSelectFocus = toggle;\n  }\n}\n\nfunction hasBooleanAttribute(element: Element, name: string): boolean {\n  return element.hasAttribute(name) && element.getAttribute(name) !== 'false';\n}\n\ninterface TreeNode<NodeT> {\n  children(): NodeT[];\n}\n\nexport interface TreeSearchResult<NodeT> {\n  node: NodeT;\n  isPostOrderMatch: boolean;\n  matchIndexInNode: number;\n}\n\nexport class TreeSearch < NodeT extends TreeNode<NodeT>,\n                                        SearchResultT extends TreeSearchResult<NodeT >= TreeSearchResult<NodeT>> {\n  #matches: SearchResultT[] = [];\n  #currentMatchIndex = 0;\n  #nodeMatchMap: WeakMap<NodeT, SearchResultT[]>|undefined;\n\n  reset(): void {\n    this.#matches = [];\n    this.#nodeMatchMap = undefined;\n    this.#currentMatchIndex = 0;\n  }\n\n  currentMatch(): SearchResultT|undefined {\n    return this.#matches.at(this.#currentMatchIndex);\n  }\n\n  #getNodeMatchMap(): WeakMap<NodeT, SearchResultT[]> {\n    if (!this.#nodeMatchMap) {\n      this.#nodeMatchMap = new WeakMap();\n      for (const match of this.#matches) {\n        let entry = this.#nodeMatchMap.get(match.node);\n        if (!entry) {\n          entry = [];\n          this.#nodeMatchMap.set(match.node, entry);\n        }\n        entry.push(match);\n      }\n    }\n    return this.#nodeMatchMap;\n  }\n\n  getResults(node: NodeT): SearchResultT[] {\n    return this.#getNodeMatchMap().get(node) ?? [];\n  }\n\n  static highlight(ranges: TextUtils.TextRange.SourceRange[], selectedRange: TextUtils.TextRange.SourceRange|undefined):\n      ReturnType<typeof Lit.Directives.ref> {\n    return Lit.Directives.ref(element => {\n      if (!(element instanceof HTMLElement)) {\n        return;\n      }\n      const configListItem = element.closest<HTMLLIElement>('li[role=\"treeitem\"]');\n      const titleElement = configListItem ? TreeViewTreeElement.get(configListItem)?.titleElement : undefined;\n      if (configListItem && titleElement) {\n        const targetElement = HTMLElementWithLightDOMTemplate.findCorrespondingElement(\n            element, configListItem, titleElement as HTMLElement);\n        if (targetElement) {\n          Highlighting.HighlightManager.HighlightManager.instance().set(targetElement, ranges, selectedRange);\n        }\n      }\n    });\n  }\n\n  updateSearchableView(view: SearchableView): void {\n    view.updateSearchMatchesCount(this.#matches.length);\n    view.updateCurrentMatchIndex(this.#currentMatchIndex);\n  }\n\n  next(): SearchResultT|undefined {\n    this.#currentMatchIndex = Platform.NumberUtilities.mod(this.#currentMatchIndex + 1, this.#matches.length);\n    return this.currentMatch();\n  }\n\n  prev(): SearchResultT|undefined {\n    this.#currentMatchIndex = Platform.NumberUtilities.mod(this.#currentMatchIndex - 1, this.#matches.length);\n    return this.currentMatch();\n  }\n\n  // This is a generator to sidestep stack overflow risks\n  *\n      #innerSearch(\n          node: NodeT, currentMatch: SearchResultT|undefined, jumpBackwards: boolean,\n          match: (node: NodeT, isPostOrder: boolean) => SearchResultT[]): Generator<SearchResultT> {\n    const updateCurrentMatchIndex = (isPostOrder: boolean): void => {\n      if (currentMatch?.node === node && currentMatch.isPostOrderMatch === isPostOrder) {\n        // We're current matching the node that contains the currently focused search result, the n-th result\n        // within that node. When updating the search hits, make sure we're still focusing the n-th result within\n        // that node. That may make the result jump within the node, but at least we're still focusing the same\n        // node. If there are fewer than n hits in the current node, we're going to move the focus to the next\n        // search hit in the next node by default, or the last one in this node if searching backwards.\n        if (currentMatch.matchIndexInNode >= preOrderMatches.length) {\n          this.#currentMatchIndex = jumpBackwards ? this.#matches.length - 1 : this.#matches.length;\n        } else {\n          this.#currentMatchIndex = this.#matches.length - preOrderMatches.length + currentMatch.matchIndexInNode;\n        }\n      }\n    };\n\n    const preOrderMatches = match(node, /* isPostOrder=*/ false);\n    this.#matches.push(...preOrderMatches);\n    updateCurrentMatchIndex(/* isPostOrder=*/ false);\n    yield* preOrderMatches.values();\n    for (const child of node.children()) {\n      yield* this.#innerSearch(child, currentMatch, jumpBackwards, match);\n    }\n    const postOrderMatches = match(node, /* isPostOrder=*/ true);\n    this.#matches.push(...postOrderMatches);\n    updateCurrentMatchIndex(/* isPostOrder=*/ true);\n    yield* postOrderMatches.values();\n  }\n\n  search(node: NodeT, jumpBackwards: boolean, match: (node: NodeT, isPostOrder: boolean) => SearchResultT[]): number {\n    const currentMatch = this.currentMatch();\n    this.reset();\n    // eslint-disable-next-line @typescript-eslint/naming-convention,@typescript-eslint/no-unused-vars\n    for (const _ of this.#innerSearch(node, currentMatch, jumpBackwards, match)) {\n      // run the generator\n    }\n    this.#currentMatchIndex = Platform.NumberUtilities.mod(this.#currentMatchIndex, this.#matches.length);\n    return this.#matches.length;\n  }\n}\n\nclass TreeViewTreeElement extends TreeElement {\n  #clonedAttributes = new Set<string>();\n  #clonedClasses = new Set<string>();\n\n  static #elementToTreeElement = new WeakMap<Node, TreeViewTreeElement>();\n  readonly configElement: HTMLLIElement;\n\n  constructor(treeOutline: TreeOutline, configElement: HTMLLIElement) {\n    super(undefined, undefined, configElement.getAttribute('jslog-context') ?? undefined);\n    this.configElement = configElement;\n    TreeViewTreeElement.#elementToTreeElement.set(configElement, this);\n    this.refresh();\n  }\n\n  refresh(): void {\n    this.titleElement.textContent = '';\n    this.#clonedAttributes.forEach(attr => this.listItemElement.attributes.removeNamedItem(attr));\n    this.#clonedClasses.forEach(className => this.listItemElement.classList.remove(className));\n    this.#clonedAttributes.clear();\n    this.#clonedClasses.clear();\n    for (let i = 0; i < this.configElement.attributes.length; ++i) {\n      const attribute = this.configElement.attributes.item(i);\n      if (attribute && attribute.name !== 'role' && SDK.DOMModel.ARIA_ATTRIBUTES.has(attribute.name)) {\n        this.listItemElement.setAttribute(attribute.name, attribute.value);\n        this.#clonedAttributes.add(attribute.name);\n      }\n    }\n    for (const className of this.configElement.classList) {\n      this.listItemElement.classList.add(className);\n      this.#clonedClasses.add(className);\n    }\n    InterceptBindingDirective.attachEventListeners(this.configElement, this.listItemElement);\n\n    for (const child of this.configElement.childNodes) {\n      if (child instanceof HTMLUListElement && child.role === 'group') {\n        continue;\n      }\n      this.titleElement.appendChild(HTMLElementWithLightDOMTemplate.cloneNode(child));\n    }\n\n    Highlighting.HighlightManager.HighlightManager.instance().apply(this.titleElement);\n  }\n\n  static get(configElement: Node|undefined): TreeViewTreeElement|undefined {\n    return configElement && TreeViewTreeElement.#elementToTreeElement.get(configElement);\n  }\n\n  remove(): void {\n    const parent = this.parent;\n    if (parent) {\n      parent.removeChild(this);\n      parent.setExpandable(parent.children().length > 0);\n    }\n    TreeViewTreeElement.#elementToTreeElement.delete(this.configElement);\n  }\n}\n\nfunction getTreeNodes(nodeList: NodeList|Node[]): HTMLLIElement[] {\n  return nodeList.values()\n      .flatMap(node => {\n        if (node instanceof HTMLLIElement && node.role === 'treeitem') {\n          return [node, ...node.querySelectorAll<HTMLLIElement>('ul[role=\"group\"] li[role=\"treeitem\"]')];\n        }\n        if (node instanceof HTMLElement) {\n          return node.querySelectorAll<HTMLLIElement>('li[role=\"treeitem\"]');\n        }\n        return [];\n      })\n      .toArray();\n}\n\nfunction getStyleElements(nodes: NodeList|Node[]): HTMLElement[] {\n  return [...nodes].flatMap(node => {\n    if (node instanceof HTMLStyleElement) {\n      return [node];\n    }\n    if (node instanceof HTMLElement) {\n      return [...node.querySelectorAll<HTMLStyleElement>('style')];\n    }\n    return [] as HTMLElement[];\n  });\n}\n\n/**\n * A tree element that can be used as progressive enhancement over a <ul> element. A `template` IDL attribute allows\n * additionally to insert the <ul> into a <template>, avoiding rendering anything into light DOM, which is recommended.\n * The <ul> itself will be cloned into shadow DOM and rendered there.\n *\n * ## Usage ##\n *\n * It can be used as\n * ```\n * <devtools-tree\n *   .template=${html`\n *     <ul role=\"tree\">\n *        <li role=\"treeitem\" @expand=${onExpand}>\n *          Tree Node Text\n *          <ul role=\"group\">\n *            Node with subtree\n *            <li role=\"treeitem\" jslog-context=\"context\">\n *              <ul role=\"group\" hidden>\n *                <li role=\"treeitem\">Tree Node Text in collapsed subtree</li>\n *                <li role=\"treeitem\">Tree Node Text in collapsed subtree</li>\n *              </ul>\n *           </li>\n *           <li selected role=\"treeitem\">Tree Node Text in a selected-by-default node</li>\n *         </ul>\n *       </li>\n *     </ul>\n *   </template>`}\n * ></devtools-tree>\n *\n * ```\n * where a <li role=\"treeitem\"> element defines a tree node and its contents (the <li> is the `config element` for this\n * tree node). If a tree node contains a <ul role=\"group\">, that defines a subtree under that tree node. The `hidden`\n * attribute on the <ul> defines whether that subtree should render as collapsed. Note that node expanding/collapsing do\n * not reflect this state back to the attribute on the config element, those state changes are rather sent out as\n * `expand` events on the config element.\n *\n * Under the hood this uses TreeOutline.\n *\n * ## Config Element Attributes ##\n *\n * - `selected`: Whether the tree node should be rendered as selected.\n * - `jslog-context`: The jslog context for the tree element.\n * - `aria-*`: All aria attributes defined on the config element are cloned over.\n * - `hidden`: On the <ul>, declares whether the subtree should be rendererd as expanded or collapsed.\n *\n * ## Event Handling ##\n *\n * This section is only relevant if NOT using the `template`.\n *\n * Since config elements are cloned into the shadow DOM, it's not possible to directly attach event listeners to the\n * children of config elements. Instead, the `UI.UIUtils.InterceptBindingDirective` directive needs to be used as a\n * wrapper:\n * ```\n * const on = Lit.Directive.directive(UI.UIUtils.InterceptBindingDirective);\n *\n * html`<li role=\"treeitem\">\n *   <button @click=${on(clickHandler)}>click me</button>\n * </li>`\n * ```\n *\n * @property template Define the tree contents\n * @event selected A node was selected\n * @attribute navigation-variant Turn this tree into the navigation variant\n * @attribute hide-overflow\n */\nexport class TreeViewElement extends HTMLElementWithLightDOMTemplate {\n  static readonly observedAttributes = ['navigation-variant', 'hide-overflow'];\n  readonly #treeOutline = new TreeOutlineInShadow(undefined, this);\n\n  constructor() {\n    super();\n    this.#treeOutline.addEventListener(Events.ElementSelected, event => {\n      if (event.data instanceof TreeViewTreeElement) {\n        this.dispatchEvent(new TreeViewElement.SelectEvent(event.data.configElement));\n      }\n    });\n    this.#treeOutline.addEventListener(Events.ElementExpanded, event => {\n      if (event.data instanceof TreeViewTreeElement) {\n        event.data.listItemElement.dispatchEvent(new TreeViewElement.ExpandEvent({expanded: true}));\n      }\n    });\n    this.#treeOutline.addEventListener(Events.ElementCollapsed, event => {\n      if (event.data instanceof TreeViewTreeElement) {\n        event.data.listItemElement.dispatchEvent(new TreeViewElement.ExpandEvent({expanded: false}));\n      }\n    });\n    this.addNodes(getTreeNodes([this]));\n  }\n\n  getInternalTreeOutlineForTest(): TreeOutlineInShadow {\n    return this.#treeOutline;\n  }\n\n  #getParentTreeElement(element: HTMLLIElement): {treeElement: TreeElement, expanded: boolean}|null {\n    const subtreeRoot = element.parentElement;\n    if (!(subtreeRoot instanceof HTMLUListElement)) {\n      return null;\n    }\n    if (subtreeRoot.role === 'tree') {\n      return {treeElement: this.#treeOutline.rootElement(), expanded: false};\n    }\n    if (subtreeRoot.role !== 'group' || !subtreeRoot.parentElement) {\n      return null;\n    }\n    const expanded = !hasBooleanAttribute(subtreeRoot, 'hidden');\n    const treeElement = TreeViewTreeElement.get(subtreeRoot.parentElement);\n    return treeElement ? {expanded, treeElement} : null;\n  }\n\n  protected override updateNode(node: Node, attributeName: string|null): void {\n    while (node?.parentNode && !(node instanceof HTMLElement)) {\n      node = node.parentNode;\n    }\n    const treeNode = node instanceof HTMLElement ? node.closest('li[role=\"treeitem\"]') : null;\n    if (!treeNode) {\n      return;\n    }\n    const treeElement = TreeViewTreeElement.get(treeNode);\n    if (!treeElement) {\n      return;\n    }\n    treeElement.refresh();\n    if (node === treeNode && attributeName === 'selected' && hasBooleanAttribute(treeNode, 'selected')) {\n      treeElement.revealAndSelect(true);\n    }\n    if (attributeName === 'hidden' && node instanceof HTMLUListElement && node.role === 'group') {\n      if (hasBooleanAttribute(node, 'hidden')) {\n        treeElement.collapse();\n      } else {\n        treeElement.expand();\n      }\n    }\n  }\n\n  protected override addNodes(nodes: NodeList|Node[], nextSibling?: Node|null): void {\n    for (const node of getTreeNodes(nodes)) {\n      if (TreeViewTreeElement.get(node)) {\n        continue;  // Not sure this can happen\n      }\n      const parent = this.#getParentTreeElement(node);\n      if (!parent) {\n        continue;\n      }\n      while (nextSibling && nextSibling.nodeType !== Node.ELEMENT_NODE) {\n        nextSibling = nextSibling.nextSibling;\n      }\n      const nextElement = nextSibling ? TreeViewTreeElement.get(nextSibling) : null;\n      const index = nextElement ? parent.treeElement.indexOfChild(nextElement) : parent.treeElement.children().length;\n      const treeElement = new TreeViewTreeElement(this.#treeOutline, node);\n      const expandable = Boolean(node.querySelector('ul[role=\"group\"]'));\n      treeElement.setExpandable(expandable);\n      parent.treeElement.insertChild(treeElement, index);\n      if (hasBooleanAttribute(node, 'selected')) {\n        treeElement.revealAndSelect(true);\n      }\n      if (parent.expanded) {\n        parent.treeElement.expand();\n      }\n    }\n    for (const element of getStyleElements(nodes)) {\n      this.#treeOutline.shadowRoot.appendChild(element.cloneNode(true));\n    }\n  }\n\n  protected override removeNodes(nodes: NodeList): void {\n    for (const node of getTreeNodes(nodes)) {\n      TreeViewTreeElement.get(node)?.remove();\n    }\n  }\n\n  set hideOverflow(hide: boolean) {\n    this.toggleAttribute('hide-overflow', hide);\n  }\n\n  get hideOverflow(): boolean {\n    return hasBooleanAttribute(this, 'hide-overflow');\n  }\n\n  set navgiationVariant(navigationVariant: boolean) {\n    this.toggleAttribute('navigation-variant', navigationVariant);\n  }\n\n  get navigationVariant(): boolean {\n    return hasBooleanAttribute(this, 'navigation-variant');\n  }\n\n  attributeChangedCallback(name: string, oldValue: string|null, newValue: string|null): void {\n    if (oldValue === newValue) {\n      return;\n    }\n    switch (name) {\n      case 'navigation-variant':\n        this.#treeOutline.setVariant(newValue !== 'false' ? TreeVariant.NAVIGATION_TREE : TreeVariant.OTHER);\n        break;\n      case 'hide-overflow':\n        this.#treeOutline.setHideOverflow(newValue !== 'false');\n    }\n  }\n}\n\nexport namespace TreeViewElement {\n  export class SelectEvent extends CustomEvent<HTMLLIElement> {\n    constructor(detail: HTMLLIElement) {\n      super('select', {detail});\n    }\n  }\n\n  export class ExpandEvent extends CustomEvent<{expanded: boolean}> {\n    constructor(detail: {expanded: boolean}) {\n      super('expand', {detail});\n    }\n  }\n}\n\ncustomElements.define('devtools-tree', TreeViewElement);\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    'devtools-tree': TreeViewElement;\n  }\n}\n\nfunction loggingParentProvider(e: Element): Element|undefined {\n  const treeElement = TreeElement.getTreeElementBylistItemNode(e);\n  const parentElement = treeElement?.parent?.listItemElement;\n  return parentElement?.isConnected && parentElement || treeElement?.treeOutline?.contentElement;\n}\n\nVisualLogging.registerParentProvider('parentTreeItem', loggingParentProvider);\n", "// Copyright 2025 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n// IMPORTANT: this file is auto generated. Please do not edit this file.\n/* istanbul ignore file */\nexport default `/*\n * Copyright 2015 The Chromium Authors\n * Use of this source code is governed by a BSD-style license that can be\n * found in the LICENSE file.\n */\n\n:host {\n  flex: 1 1 auto;\n  padding: 2px 0 0;\n}\n\n.tree-outline-disclosure:not(.tree-outline-disclosure-hide-overflow) {\n  min-width: 100%;\n  display: inline-block;\n}\n\n.tree-outline {\n  padding: 0 0 4px 4px;\n  margin: 0;\n  z-index: 0;\n  position: relative;\n}\n\n.tree-outline:focus-visible {\n  box-shadow: 0 0 0 2px var(--sys-color-state-focus-ring) inset;\n}\n\n.tree-outline li .selection {\n  display: none;\n  z-index: -1;\n  margin-left: -10000px;\n}\n\n.tree-outline:not(.hide-selection-when-blurred) li.selected {\n  color: var(--sys-color-on-surface-subtle);\n}\n\n.tree-outline:not(.hide-selection-when-blurred) li.selected .selection {\n  display: block;\n  background-color: var(--sys-color-neutral-container);\n}\n\n.tree-outline:not(.hide-selection-when-blurred) li.elements-drag-over .selection {\n  display: block;\n  margin-top: -2px;\n  border-top: 2px solid;\n  border-top-color: var(--sys-color-tonal-container);\n}\n\n.tree-outline li:hover:not(:has(devtools-checkbox)) .selection {\n  display: block;\n  background-color: var(--sys-color-state-hover-on-subtle);\n}\n\n.tree-outline:not(.hide-selection-when-blurred) li.hovered:not(.selected) .selection {\n  display: block;\n  left: 3px;\n  right: 3px;\n  background-color: var(--sys-color-state-hover-on-subtle);\n  border-radius: 5px;\n}\n\n.tree-outline:not(.hide-selection-when-blurred) li.in-clipboard .highlight {\n  outline: 1px dotted var(--sys-color-neutral-outline);\n}\n\nol.tree-outline:not(.hide-selection-when-blurred) li.selected:focus .selection {\n  background-color: var(--sys-color-tonal-container);\n}\n\nol.tree-outline,\n.tree-outline ol {\n  list-style-type: none;\n}\n\n.tree-outline ol {\n  padding-left: 12px;\n}\n\n.tree-outline li {\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  position: relative;\n  display: flex;\n  align-items: center;\n  min-height: 16px;\n}\n\nol.tree-outline:not(.hide-selection-when-blurred) li.selected:focus {\n  color: var(--sys-color-on-tonal-container);\n\n  & ::selection {\n    background-color: var(--sys-color-state-focus-select);\n    color: currentcolor;\n  }\n\n  & *:not(devtools-icon) {\n    color: inherit;\n  }\n}\n\n.tree-outline li .icons-container {\n  align-self: center;\n  display: flex;\n  align-items: center;\n}\n\n.tree-outline li .leading-icons {\n  margin-right: 4px;\n}\n\n.tree-outline li .trailing-icons {\n  margin-left: 4px;\n}\n\n.tree-outline li::before {\n  user-select: none;\n  mask-image: var(--image-file-arrow-collapse);\n  background-color: var(--icon-default);\n  content: \"\\\\A0\\\\A0\";\n  text-shadow: none;\n  margin-top: calc(-1 * var(--sys-size-2));\n  height: var(--sys-size-8);\n  width: var(--sys-size-8);\n}\n\n.tree-outline li:not(.parent)::before {\n  background-color: transparent;\n}\n\n.tree-outline li.parent.expanded::before {\n  mask-image: var(--image-file-arrow-drop-down);\n}\n\n.tree-outline ol.children {\n  display: none;\n}\n\n.tree-outline ol.children.expanded {\n  display: block;\n}\n\n.tree-outline.tree-outline-dense li {\n  margin-top: 1px;\n  min-height: 12px;\n}\n\n.tree-outline.tree-outline-dense li.parent {\n  margin-top: 0;\n}\n\n.tree-outline.tree-outline-dense li.parent::before {\n  top: 0;\n}\n\n.tree-outline.tree-outline-dense ol {\n  padding-left: 10px;\n}\n\n.tree-outline.hide-selection-when-blurred .selected:focus-visible {\n  background: var(--sys-color-state-focus-highlight);\n  border-radius: 2px;\n}\n\n.tree-outline-disclosure:not(.tree-outline-disclosure-hide-overflow) .tree-outline.hide-selection-when-blurred .selected:focus-visible {\n  width: fit-content;\n  padding-right: 3px;\n}\n\n/* Navigation tree variant */\n.tree-outline.tree-variant-navigation {\n  padding: var(--sys-size-3) 0 var(--sys-size-3) var(--sys-size-3);\n}\n\n.tree-outline.tree-variant-navigation li,\n.tree-outline.hide-selection-when-blurred.tree-variant-navigation li {\n  height: var(--sys-size-10);\n  margin-right: var(--sys-size-3);\n  padding-right: var(--sys-size-3);\n  padding-left: 6px;\n\n  &::before {\n    flex-shrink: 0;\n    overflow: hidden;\n    margin-right: 3px;\n    margin-left: -3px;\n  }\n\n  & .selection {\n    border-radius: 0 var(--sys-shape-corner-full) var(--sys-shape-corner-full) 0;\n  }\n\n  &.selected:focus {\n    &.parent::before {\n      background-color: var(--app-color-navigation-drawer-label-selected);\n    }\n\n    .selection {\n      display: block;\n      background-color: var(--app-color-navigation-drawer-background-selected);\n    }\n  }\n\n  & .leading-icons {\n    margin-right: var(--sys-size-4);\n    overflow: hidden;\n  }\n\n  & .tree-element-title {\n    height: inherit;\n    flex-shrink: 100;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    align-content: center;\n  }\n}\n\n.theme-with-dark-background,\n:host-context(.theme-with-dark-background) {\n  & .tree-variant-navigation li.selected:focus,\n  .tree-variant-navigation li.selected:focus devtools-icon {\n    color: var(--app-color-navigation-drawer-label-selected);\n\n    --override-file-source-icon-color: var(--app-color-navigation-drawer-label-selected);\n  }\n}\n\nol.tree-outline.tree-variant-navigation:not(.hide-selection-when-blurred) li.selected:focus .selection {\n  background-color: var(--app-color-navigation-drawer-background-selected);\n}\n\n@media (forced-colors: active) {\n  .tree-outline-disclosure li.parent::before,\n  .tree-outline:not(.hide-selection-when-blurred) li.parent:not(.selected)::before {\n    forced-color-adjust: none;\n    background-color: ButtonText;\n  }\n\n  .tree-outline li devtools-icon {\n    forced-color-adjust: none;\n    color: ButtonText;\n  }\n\n  .tree-outline-disclosure li.parent:hover:not(.selected)::before,\n  .tree-outline:not(.hide-selection-when-blurred) li.parent:hover:not(.selected)::before {\n    background-color: ButtonText;\n  }\n\n  .tree-outline:not(.hide-selection-when-blurred) li.selected .selection {\n    forced-color-adjust: none;\n    background-color: ButtonText;\n  }\n\n  ol.tree-outline:not(.hide-selection-when-blurred) li.selected:focus .selection,\n  .tree-outline.hide-selection-when-blurred .selected:focus-visible {\n    forced-color-adjust: none;\n    background-color: Highlight;\n  }\n\n  ol.tree-outline.tree-variant-navigation li.selected {\n    &.selected,\n    &.selected:focus {\n      & .selection {\n        forced-color-adjust: none;\n        background-color: ButtonText;\n      }\n    }\n  }\n\n  ol.tree-outline:not(.hide-selection-when-blurred) li.parent.selected::before,\n  ol.tree-outline:not(.hide-selection-when-blurred) li.parent.selected:focus::before,\n  .tree-outline.hide-selection-when-blurred .selected:focus-visible::before {\n    background-color: HighlightText;\n  }\n\n  .tree-outline li:not(.parent)::before,\n  .tree-outline li:not(.parent):hover::before,\n  .tree-outline.hide-selection-when-blurred .selected:focus-visible:not(.parent)::before {\n    forced-color-adjust: none;\n    background-color: transparent;\n  }\n\n  .tree-outline:not(.hide-selection-when-blurred) devtools-icon,\n  .tree-outline.hide-selection-when-blurred devtools-icon {\n    color: ButtonText;\n  }\n\n  .tree-outline li.selected devtools-icon,\n  .tree-outline li.selected:focus devtools-icon {\n    color: HighlightText !important; /* stylelint-disable-line declaration-no-important */\n  }\n\n  ol.tree-outline:not(.hide-selection-when-blurred) li.selected,\n  .tree-outline:not(.hide-selection-when-blurred) li.selected .tree-element-title,\n  .tree-outline:not(.hide-selection-when-blurred) li.selected:focus,\n  .tree-outline:not(.hide-selection-when-blurred) li:focus-visible .tree-element-title,\n  .tree-outline:not(.hide-selection-when-blurred) li.selected:focus .tree-element-title,\n  .tree-outline:not(.hide-selection-when-blurred) li.selected span,\n  .tree-outline.hide-selection-when-blurred .selected:focus-visible span {\n    forced-color-adjust: none;\n    color: HighlightText;\n  }\n\n  .tree-outline:not(.hide-selection-when-blurred) li.selected:focus-visible devtools-adorner,\n  .tree-outline.hide-selection-when-blurred li.selected:focus-visible devtools-adorner {\n    --override-adorner-background-color: Highlight;\n    --override-adorner-border-color: HighlightText;\n  }\n}\n\n/*# sourceURL=${import.meta.resolve('./treeoutline.css')} */`;", "// Copyright 2016 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as Platform from '../../core/platform/platform.js';\n\nimport type {TabbedPane} from './TabbedPane.js';\nimport type {ToolbarItem, ToolbarMenuButton} from './Toolbar.js';\nimport {ViewManager} from './ViewManager.js';\nimport {VBox, type Widget, type WidgetOptions} from './Widget.js';\n\nexport interface View {\n  viewId(): string;\n\n  title(): Platform.UIString.LocalizedString;\n\n  isCloseable(): boolean;\n\n  isPreviewFeature(): boolean;\n\n  iconName(): string|undefined;\n\n  isTransient(): boolean;\n\n  toolbarItems(): Promise<ToolbarItem[]>;\n\n  widget(): Promise<Widget>;\n\n  disposeView(): void|Promise<void>;\n}\n\n/**\n * Settings to control the behavior of `SimpleView` subclasses.\n */\nexport interface SimpleViewOptions extends WidgetOptions {\n  /**\n   * User visible title for the view.\n   */\n  title: Platform.UIString.LocalizedString;\n\n  /**\n   * Internal ID used to refer to the view.\n   *\n   * Note that this is also used to construct VE contexts in some places.\n   *\n   * Must be in extended kebab case.\n   */\n  viewId: Lowercase<string>;\n}\n\nexport class SimpleView extends VBox implements View {\n  readonly #title: Platform.UIString.LocalizedString;\n  readonly #viewId: Lowercase<string>;\n\n  /**\n   * Constructs a new `SimpleView` with the given `options`.\n   *\n   * @param options the settings for the resulting view.\n   * @throws TypeError - if `options.viewId` is not in extended kebab case.\n   */\n  constructor(options: SimpleViewOptions) {\n    super(options);\n    this.#title = options.title;\n    this.#viewId = options.viewId;\n    if (!Platform.StringUtilities.isExtendedKebabCase(this.#viewId)) {\n      throw new TypeError(`Invalid view ID '${this.#viewId}'`);\n    }\n  }\n\n  viewId(): string {\n    return this.#viewId;\n  }\n\n  title(): Platform.UIString.LocalizedString {\n    return this.#title;\n  }\n\n  isCloseable(): boolean {\n    return false;\n  }\n\n  isTransient(): boolean {\n    return false;\n  }\n\n  toolbarItems(): Promise<ToolbarItem[]> {\n    return Promise.resolve([]);\n  }\n\n  widget(): Promise<Widget> {\n    return Promise.resolve(this);\n  }\n\n  revealView(): Promise<void> {\n    return ViewManager.instance().revealView(this);\n  }\n\n  disposeView(): void {\n  }\n\n  isPreviewFeature(): boolean {\n    return false;\n  }\n\n  iconName(): string|undefined {\n    return undefined;\n  }\n}\n\nexport interface ViewLocation {\n  appendApplicableItems(locationName: string): void;\n  appendView(view: View, insertBefore?: View|null): void;\n  showView(view: View, insertBefore?: View|null, userGesture?: boolean): Promise<void>;\n  removeView(view: View): void;\n  isViewVisible(view: View): boolean;\n  widget(): Widget;\n}\n\nexport interface TabbedViewLocation extends ViewLocation {\n  tabbedPane(): TabbedPane;\n  enableMoreTabsButton(): ToolbarMenuButton;\n}\n\nexport interface ViewLocationResolver {\n  resolveLocation(location: string): ViewLocation|null;\n}\n"],
  "mappings": "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AA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AA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AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAsDC,YAAY,QAAQ,qBAAqB,CAAC;;;ACtD1D,IAAO,8BAAQ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;A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",
  "names": ["Common", "instance", "action", "action", "Platform", "Common", "VisualLogging", "Common", "i18n", "Platform", "Root", "Buttons", "VisualLogging", "createIcon", "Host", "Root", "Buttons", "html", "render", "VisualLogging", "Common", "Host", "Platform", "action", "m", "action", "event", "actions", "i18n", "createIcon", "VisualLogging", "Common", "Host", "i18n", "Root", "SDK", "GreenDev", "Buttons", "createIcon", "VisualLogging", "Common", "Host", "i18n", "VisualLogging", "UIStrings", "str_", "i18nString", "i18n", "Platform", "Platform", "scheduledUpdate", "document", "i18n", "Buttons", "VisualLogging", "UIStrings", "str_", "i18nString", "action", "Common", "Platform", "Geometry", "VisualLogging", "Common", "event", "Common", "window", "Common", "i18n", "Platform", "Geometry", "Buttons", "render", "VisualLogging", "createIcon", "UIStrings", "str_", "i18nString", "id", "badge", "createIcon", "menu", "tab", "Events", "render", "close", "tabIndex", "tabElement", "dragStartX", "Common", "Host", "i18n", "Platform", "createIcon", "VisualLogging", "i18n", "Root", "UIStrings", "str_", "i18nString", "UIStrings", "str_", "i18nString", "toolbar", "item", "id", "createIcon", "view", "UIStrings", "str_", "i18nString", "DrawerOrientation", "DockMode", "createIcon", "UIStrings", "str_", "i18nString", "document", "item", "createIcon", "item", "action", "section", "id", "render", "html", "Common", "Platform", "VisualLogging", "i18n", "Platform", "Geometry", "VisualLogging", "Platform", "VisualLogging", "ListMode", "item", "Common", "Platform", "UIStrings", "str_", "i18nString", "item", "TextPromptElement", "item", "UIStrings", "str_", "i18nString", "item", "action", "document", "button", "createIcon", "Common", "Host", "i18n", "Platform", "Geometry", "Buttons", "Icon", "Lit", "VisualLogging", "Directives", "render", "Lit", "UIStrings", "str_", "i18nString", "elementDragStart", "document", "window", "id", "Icon", "valid", "text", "dialog", "badge", "action", "document", "pane", "document", "dialog", "close", "dialog", "item", "i18n", "Directives", "html", "render", "VisualLogging", "Host", "Platform", "VisualLogging", "html", "close", "html", "UIStrings", "str_", "i18nString", "Directives", "render", "html", "link", "Common", "Host", "i18n", "Platform", "VisualLogging", "UIStrings", "str_", "i18nString", "toggle", "Platform", "item", "Host", "Platform", "self", "i18n", "Platform", "Buttons", "html", "render", "VisualLogging", "UIStrings", "str_", "i18nString", "item", "element", "render", "html", "VisualLogging", "VisualLogging", "popover", "document", "DEFAULT_VIEW", "i18n", "Buttons", "html", "render", "UIStrings", "str_", "i18nString", "DEFAULT_VIEW", "render", "html", "dialog", "Section", "VisualLogging", "link", "section", "Section", "document", "Common", "i18n", "Platform", "VisualLogging", "Buttons", "createIcon", "UIStrings", "str_", "i18nString", "createIcon", "toolbar", "i18n", "Geometry", "createIcon", "VisualLogging", "UIStrings", "str_", "i18nString", "createIcon", "item", "DEFAULT_VIEW", "i18n", "html", "render", "UIStrings", "str_", "i18nString", "DEFAULT_VIEW", "render", "html", "Events", "Common", "Platform", "SDK", "Lit", "VisualLogging", "render", "Lit", "Events", "item", "toggle", "TreeViewElement", "Platform"]
}
