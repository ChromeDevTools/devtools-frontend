{"version":3,"file":"requireAsteriskPrefix.cjs","names":["_iterateJsdoc","_interopRequireDefault","require","e","__esModule","default","_default","exports","iterateJsdoc","context","jsdoc","utils","indent","defaultRequireValue","tags","tagMap","options","source","always","never","currentTag","some","number","tokens","_tagMap$any2","delimiter","tag","end","description","neverFix","postDelimiter","checkNever","checkValue","_tagMap$always","_tagMap$never","includes","reportJSDoc","column","line","alwaysFix","start","checkAlways","_tagMap$never2","_tagMap$always2","slice","_tagMap$any","any","iterateAllJsdocs","meta","docs","url","fixable","schema","enum","type","additionalProperties","properties","items","module"],"sources":["../../src/rules/requireAsteriskPrefix.js"],"sourcesContent":["import iterateJsdoc from '../iterateJsdoc.js';\n\nexport default iterateJsdoc(({\n  context,\n  jsdoc,\n  utils,\n  indent,\n}) => {\n  const [\n    defaultRequireValue = 'always',\n    {\n      tags: tagMap = {},\n    } = {},\n  ] = context.options;\n\n  const {\n    source,\n  } = jsdoc;\n\n  const always = defaultRequireValue === 'always';\n  const never = defaultRequireValue === 'never';\n\n  /** @type {string} */\n  let currentTag;\n  source.some(({\n    number,\n    tokens,\n  }) => {\n    const {\n      delimiter,\n      tag,\n      end,\n      description,\n    } = tokens;\n\n    /**\n     * @returns {void}\n     */\n    const neverFix = () => {\n      tokens.delimiter = '';\n      tokens.postDelimiter = '';\n    };\n\n    /**\n     * @param {string} checkValue\n     * @returns {boolean}\n     */\n    const checkNever = (checkValue) => {\n      if (delimiter && delimiter !== '/**' && (\n        never && !tagMap.always?.includes(checkValue) ||\n        tagMap.never?.includes(checkValue)\n      )) {\n        utils.reportJSDoc('Expected JSDoc line to have no prefix.', {\n          column: 0,\n          line: number,\n        }, neverFix);\n\n        return true;\n      }\n\n      return false;\n    };\n\n    /**\n     * @returns {void}\n     */\n    const alwaysFix = () => {\n      if (!tokens.start) {\n        tokens.start = indent + ' ';\n      }\n\n      tokens.delimiter = '*';\n      tokens.postDelimiter = tag || description ? ' ' : '';\n    };\n\n    /**\n     * @param {string} checkValue\n     * @returns {boolean}\n     */\n    const checkAlways = (checkValue) => {\n      if (\n        !delimiter && (\n          always && !tagMap.never?.includes(checkValue) ||\n          tagMap.always?.includes(checkValue)\n        )\n      ) {\n        utils.reportJSDoc('Expected JSDoc line to have the prefix.', {\n          column: 0,\n          line: number,\n        }, alwaysFix);\n\n        return true;\n      }\n\n      return false;\n    };\n\n    if (tag) {\n      // Remove at sign\n      currentTag = tag.slice(1);\n    }\n\n    if (\n      // If this is the end but has a tag, the delimiter will also be\n      //  populated and will be safely ignored later\n      end && !tag\n    ) {\n      return false;\n    }\n\n    if (!currentTag) {\n      if (tagMap.any?.includes('*description')) {\n        return false;\n      }\n\n      if (checkNever('*description')) {\n        return true;\n      }\n\n      if (checkAlways('*description')) {\n        return true;\n      }\n\n      return false;\n    }\n\n    if (tagMap.any?.includes(currentTag)) {\n      return false;\n    }\n\n    if (checkNever(currentTag)) {\n      return true;\n    }\n\n    if (checkAlways(currentTag)) {\n      return true;\n    }\n\n    return false;\n  });\n}, {\n  iterateAllJsdocs: true,\n  meta: {\n    docs: {\n      description:\n        'Requires that each JSDoc line starts with an `*`.',\n      url: 'https://github.com/gajus/eslint-plugin-jsdoc/blob/main/docs/rules/require-asterisk-prefix.md#repos-sticky-header',\n    },\n    fixable: 'code',\n    schema: [\n      {\n        enum: [\n          'always', 'never', 'any',\n        ],\n        type: 'string',\n      },\n      {\n        additionalProperties: false,\n        properties: {\n          tags: {\n            properties: {\n              always: {\n                items: {\n                  type: 'string',\n                },\n                type: 'array',\n              },\n              any: {\n                items: {\n                  type: 'string',\n                },\n                type: 'array',\n              },\n              never: {\n                items: {\n                  type: 'string',\n                },\n                type: 'array',\n              },\n            },\n            type: 'object',\n          },\n        },\n        type: 'object',\n      },\n    ],\n    type: 'layout',\n  },\n});\n"],"mappings":"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","ignoreList":[]}